function aj(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var Uc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function so(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Xf={exports:{}},Qo={},Jf={exports:{}},At={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Og;function ij(){if(Og)return At;Og=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;function m($){return $===null||typeof $!="object"?null:($=f&&$[f]||$["@@iterator"],typeof $=="function"?$:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,b={};function S($,K,H){this.props=$,this.context=K,this.refs=b,this.updater=H||g}S.prototype.isReactComponent={},S.prototype.setState=function($,K){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,K,"setState")},S.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function v(){}v.prototype=S.prototype;function N($,K,H){this.props=$,this.context=K,this.refs=b,this.updater=H||g}var C=N.prototype=new v;C.constructor=N,y(C,S.prototype),C.isPureReactComponent=!0;var _=Array.isArray,R=Object.prototype.hasOwnProperty,D={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function I($,K,H){var ee,Y={},re=null,de=null;if(K!=null)for(ee in K.ref!==void 0&&(de=K.ref),K.key!==void 0&&(re=""+K.key),K)R.call(K,ee)&&!V.hasOwnProperty(ee)&&(Y[ee]=K[ee]);var X=arguments.length-2;if(X===1)Y.children=H;else if(1<X){for(var oe=Array(X),ye=0;ye<X;ye++)oe[ye]=arguments[ye+2];Y.children=oe}if($&&$.defaultProps)for(ee in X=$.defaultProps,X)Y[ee]===void 0&&(Y[ee]=X[ee]);return{$$typeof:e,type:$,key:re,ref:de,props:Y,_owner:D.current}}function A($,K){return{$$typeof:e,type:$.type,key:K,ref:$.ref,props:$.props,_owner:$._owner}}function U($){return typeof $=="object"&&$!==null&&$.$$typeof===e}function W($){var K={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(H){return K[H]})}var T=/\/+/g;function M($,K){return typeof $=="object"&&$!==null&&$.key!=null?W(""+$.key):K.toString(36)}function j($,K,H,ee,Y){var re=typeof $;(re==="undefined"||re==="boolean")&&($=null);var de=!1;if($===null)de=!0;else switch(re){case"string":case"number":de=!0;break;case"object":switch($.$$typeof){case e:case t:de=!0}}if(de)return de=$,Y=Y(de),$=ee===""?"."+M(de,0):ee,_(Y)?(H="",$!=null&&(H=$.replace(T,"$&/")+"/"),j(Y,K,H,"",function(ye){return ye})):Y!=null&&(U(Y)&&(Y=A(Y,H+(!Y.key||de&&de.key===Y.key?"":(""+Y.key).replace(T,"$&/")+"/")+$)),K.push(Y)),1;if(de=0,ee=ee===""?".":ee+":",_($))for(var X=0;X<$.length;X++){re=$[X];var oe=ee+M(re,X);de+=j(re,K,H,oe,Y)}else if(oe=m($),typeof oe=="function")for($=oe.call($),X=0;!(re=$.next()).done;)re=re.value,oe=ee+M(re,X++),de+=j(re,K,H,oe,Y);else if(re==="object")throw K=String($),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return de}function P($,K,H){if($==null)return $;var ee=[],Y=0;return j($,ee,"","",function(re){return K.call(H,re,Y++)}),ee}function L($){if($._status===-1){var K=$._result;K=K(),K.then(function(H){($._status===0||$._status===-1)&&($._status=1,$._result=H)},function(H){($._status===0||$._status===-1)&&($._status=2,$._result=H)}),$._status===-1&&($._status=0,$._result=K)}if($._status===1)return $._result.default;throw $._result}var B={current:null},q={transition:null},G={ReactCurrentDispatcher:B,ReactCurrentBatchConfig:q,ReactCurrentOwner:D};function O(){throw Error("act(...) is not supported in production builds of React.")}return At.Children={map:P,forEach:function($,K,H){P($,function(){K.apply(this,arguments)},H)},count:function($){var K=0;return P($,function(){K++}),K},toArray:function($){return P($,function(K){return K})||[]},only:function($){if(!U($))throw Error("React.Children.only expected to receive a single React element child.");return $}},At.Component=S,At.Fragment=n,At.Profiler=a,At.PureComponent=N,At.StrictMode=s,At.Suspense=u,At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G,At.act=O,At.cloneElement=function($,K,H){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var ee=y({},$.props),Y=$.key,re=$.ref,de=$._owner;if(K!=null){if(K.ref!==void 0&&(re=K.ref,de=D.current),K.key!==void 0&&(Y=""+K.key),$.type&&$.type.defaultProps)var X=$.type.defaultProps;for(oe in K)R.call(K,oe)&&!V.hasOwnProperty(oe)&&(ee[oe]=K[oe]===void 0&&X!==void 0?X[oe]:K[oe])}var oe=arguments.length-2;if(oe===1)ee.children=H;else if(1<oe){X=Array(oe);for(var ye=0;ye<oe;ye++)X[ye]=arguments[ye+2];ee.children=X}return{$$typeof:e,type:$.type,key:Y,ref:re,props:ee,_owner:de}},At.createContext=function($){return $={$$typeof:l,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:i,_context:$},$.Consumer=$},At.createElement=I,At.createFactory=function($){var K=I.bind(null,$);return K.type=$,K},At.createRef=function(){return{current:null}},At.forwardRef=function($){return{$$typeof:c,render:$}},At.isValidElement=U,At.lazy=function($){return{$$typeof:h,_payload:{_status:-1,_result:$},_init:L}},At.memo=function($,K){return{$$typeof:p,type:$,compare:K===void 0?null:K}},At.startTransition=function($){var K=q.transition;q.transition={};try{$()}finally{q.transition=K}},At.unstable_act=O,At.useCallback=function($,K){return B.current.useCallback($,K)},At.useContext=function($){return B.current.useContext($)},At.useDebugValue=function(){},At.useDeferredValue=function($){return B.current.useDeferredValue($)},At.useEffect=function($,K){return B.current.useEffect($,K)},At.useId=function(){return B.current.useId()},At.useImperativeHandle=function($,K,H){return B.current.useImperativeHandle($,K,H)},At.useInsertionEffect=function($,K){return B.current.useInsertionEffect($,K)},At.useLayoutEffect=function($,K){return B.current.useLayoutEffect($,K)},At.useMemo=function($,K){return B.current.useMemo($,K)},At.useReducer=function($,K,H){return B.current.useReducer($,K,H)},At.useRef=function($){return B.current.useRef($)},At.useState=function($){return B.current.useState($)},At.useSyncExternalStore=function($,K,H){return B.current.useSyncExternalStore($,K,H)},At.useTransition=function(){return B.current.useTransition()},At.version="18.3.1",At}var $g;function Jp(){return $g||($g=1,Jf.exports=ij()),Jf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vg;function oj(){if(Vg)return Qo;Vg=1;var e=Jp(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(c,u,p){var h,f={},m=null,g=null;p!==void 0&&(m=""+p),u.key!==void 0&&(m=""+u.key),u.ref!==void 0&&(g=u.ref);for(h in u)s.call(u,h)&&!i.hasOwnProperty(h)&&(f[h]=u[h]);if(c&&c.defaultProps)for(h in u=c.defaultProps,u)f[h]===void 0&&(f[h]=u[h]);return{$$typeof:t,type:c,key:m,ref:g,props:f,_owner:a.current}}return Qo.Fragment=n,Qo.jsx=l,Qo.jsxs=l,Qo}var Hg;function lj(){return Hg||(Hg=1,Xf.exports=oj()),Xf.exports}var r=lj(),Wc={},eh={exports:{}},ar={},th={exports:{}},nh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ug;function cj(){return Ug||(Ug=1,(function(e){function t(q,G){var O=q.length;q.push(G);e:for(;0<O;){var $=O-1>>>1,K=q[$];if(0<a(K,G))q[$]=G,q[O]=K,O=$;else break e}}function n(q){return q.length===0?null:q[0]}function s(q){if(q.length===0)return null;var G=q[0],O=q.pop();if(O!==G){q[0]=O;e:for(var $=0,K=q.length,H=K>>>1;$<H;){var ee=2*($+1)-1,Y=q[ee],re=ee+1,de=q[re];if(0>a(Y,O))re<K&&0>a(de,Y)?(q[$]=de,q[re]=O,$=re):(q[$]=Y,q[ee]=O,$=ee);else if(re<K&&0>a(de,O))q[$]=de,q[re]=O,$=re;else break e}}return G}function a(q,G){var O=q.sortIndex-G.sortIndex;return O!==0?O:q.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var u=[],p=[],h=1,f=null,m=3,g=!1,y=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(q){for(var G=n(p);G!==null;){if(G.callback===null)s(p);else if(G.startTime<=q)s(p),G.sortIndex=G.expirationTime,t(u,G);else break;G=n(p)}}function _(q){if(b=!1,C(q),!y)if(n(u)!==null)y=!0,L(R);else{var G=n(p);G!==null&&B(_,G.startTime-q)}}function R(q,G){y=!1,b&&(b=!1,v(I),I=-1),g=!0;var O=m;try{for(C(G),f=n(u);f!==null&&(!(f.expirationTime>G)||q&&!W());){var $=f.callback;if(typeof $=="function"){f.callback=null,m=f.priorityLevel;var K=$(f.expirationTime<=G);G=e.unstable_now(),typeof K=="function"?f.callback=K:f===n(u)&&s(u),C(G)}else s(u);f=n(u)}if(f!==null)var H=!0;else{var ee=n(p);ee!==null&&B(_,ee.startTime-G),H=!1}return H}finally{f=null,m=O,g=!1}}var D=!1,V=null,I=-1,A=5,U=-1;function W(){return!(e.unstable_now()-U<A)}function T(){if(V!==null){var q=e.unstable_now();U=q;var G=!0;try{G=V(!0,q)}finally{G?M():(D=!1,V=null)}}else D=!1}var M;if(typeof N=="function")M=function(){N(T)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,P=j.port2;j.port1.onmessage=T,M=function(){P.postMessage(null)}}else M=function(){S(T,0)};function L(q){V=q,D||(D=!0,M())}function B(q,G){I=S(function(){q(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_continueExecution=function(){y||g||(y=!0,L(R))},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(q){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var O=m;m=G;try{return q()}finally{m=O}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(q,G){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var O=m;m=q;try{return G()}finally{m=O}},e.unstable_scheduleCallback=function(q,G,O){var $=e.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?$+O:$):O=$,q){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=O+K,q={id:h++,callback:G,priorityLevel:q,startTime:O,expirationTime:K,sortIndex:-1},O>$?(q.sortIndex=O,t(p,q),n(u)===null&&q===n(p)&&(b?(v(I),I=-1):b=!0,B(_,O-$))):(q.sortIndex=K,t(u,q),y||g||(y=!0,L(R))),q},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(q){var G=m;return function(){var O=m;m=G;try{return q.apply(this,arguments)}finally{m=O}}}})(nh)),nh}var Wg;function dj(){return Wg||(Wg=1,th.exports=cj()),th.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kg;function uj(){if(Kg)return ar;Kg=1;var e=Jp(),t=dj();function n(o){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+o,x=1;x<arguments.length;x++)d+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+o+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function i(o,d){l(o,d),l(o+"Capture",d)}function l(o,d){for(a[o]=d,o=0;o<d.length;o++)s.add(d[o])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},f={};function m(o){return u.call(f,o)?!0:u.call(h,o)?!1:p.test(o)?f[o]=!0:(h[o]=!0,!1)}function g(o,d,x,w){if(x!==null&&x.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return w?!1:x!==null?!x.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function y(o,d,x,w){if(d===null||typeof d>"u"||g(o,d,x,w))return!0;if(w)return!1;if(x!==null)switch(x.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function b(o,d,x,w,E,z,Q){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=w,this.attributeNamespace=E,this.mustUseProperty=x,this.propertyName=o,this.type=d,this.sanitizeURL=z,this.removeEmptyString=Q}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){S[o]=new b(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var d=o[0];S[d]=new b(d,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){S[o]=new b(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){S[o]=new b(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){S[o]=new b(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){S[o]=new b(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){S[o]=new b(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){S[o]=new b(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){S[o]=new b(o,5,!1,o.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function N(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var d=o.replace(v,N);S[d]=new b(d,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var d=o.replace(v,N);S[d]=new b(d,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var d=o.replace(v,N);S[d]=new b(d,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){S[o]=new b(o,1,!1,o.toLowerCase(),null,!1,!1)}),S.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){S[o]=new b(o,1,!1,o.toLowerCase(),null,!0,!0)});function C(o,d,x,w){var E=S.hasOwnProperty(d)?S[d]:null;(E!==null?E.type!==0:w||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(y(d,x,E,w)&&(x=null),w||E===null?m(d)&&(x===null?o.removeAttribute(d):o.setAttribute(d,""+x)):E.mustUseProperty?o[E.propertyName]=x===null?E.type===3?!1:"":x:(d=E.attributeName,w=E.attributeNamespace,x===null?o.removeAttribute(d):(E=E.type,x=E===3||E===4&&x===!0?"":""+x,w?o.setAttributeNS(w,d,x):o.setAttribute(d,x))))}var _=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,R=Symbol.for("react.element"),D=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),W=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),B=Symbol.for("react.offscreen"),q=Symbol.iterator;function G(o){return o===null||typeof o!="object"?null:(o=q&&o[q]||o["@@iterator"],typeof o=="function"?o:null)}var O=Object.assign,$;function K(o){if($===void 0)try{throw Error()}catch(x){var d=x.stack.trim().match(/\n( *(at )?)/);$=d&&d[1]||""}return`
`+$+o}var H=!1;function ee(o,d){if(!o||H)return"";H=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Ae){var w=Ae}Reflect.construct(o,[],d)}else{try{d.call()}catch(Ae){w=Ae}o.call(d.prototype)}else{try{throw Error()}catch(Ae){w=Ae}o()}}catch(Ae){if(Ae&&w&&typeof Ae.stack=="string"){for(var E=Ae.stack.split(`
`),z=w.stack.split(`
`),Q=E.length-1,ie=z.length-1;1<=Q&&0<=ie&&E[Q]!==z[ie];)ie--;for(;1<=Q&&0<=ie;Q--,ie--)if(E[Q]!==z[ie]){if(Q!==1||ie!==1)do if(Q--,ie--,0>ie||E[Q]!==z[ie]){var fe=`
`+E[Q].replace(" at new "," at ");return o.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",o.displayName)),fe}while(1<=Q&&0<=ie);break}}}finally{H=!1,Error.prepareStackTrace=x}return(o=o?o.displayName||o.name:"")?K(o):""}function Y(o){switch(o.tag){case 5:return K(o.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return o=ee(o.type,!1),o;case 11:return o=ee(o.type.render,!1),o;case 1:return o=ee(o.type,!0),o;default:return""}}function re(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case V:return"Fragment";case D:return"Portal";case A:return"Profiler";case I:return"StrictMode";case M:return"Suspense";case j:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case W:return(o.displayName||"Context")+".Consumer";case U:return(o._context.displayName||"Context")+".Provider";case T:var d=o.render;return o=o.displayName,o||(o=d.displayName||d.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case P:return d=o.displayName||null,d!==null?d:re(o.type)||"Memo";case L:d=o._payload,o=o._init;try{return re(o(d))}catch{}}return null}function de(o){var d=o.type;switch(o.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=d.render,o=o.displayName||o.name||"",d.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return re(d);case 8:return d===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function X(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function oe(o){var d=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function ye(o){var d=oe(o)?"checked":"value",x=Object.getOwnPropertyDescriptor(o.constructor.prototype,d),w=""+o[d];if(!o.hasOwnProperty(d)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var E=x.get,z=x.set;return Object.defineProperty(o,d,{configurable:!0,get:function(){return E.call(this)},set:function(Q){w=""+Q,z.call(this,Q)}}),Object.defineProperty(o,d,{enumerable:x.enumerable}),{getValue:function(){return w},setValue:function(Q){w=""+Q},stopTracking:function(){o._valueTracker=null,delete o[d]}}}}function be(o){o._valueTracker||(o._valueTracker=ye(o))}function Ie(o){if(!o)return!1;var d=o._valueTracker;if(!d)return!0;var x=d.getValue(),w="";return o&&(w=oe(o)?o.checked?"true":"false":o.value),o=w,o!==x?(d.setValue(o),!0):!1}function De(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function F(o,d){var x=d.checked;return O({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:x??o._wrapperState.initialChecked})}function le(o,d){var x=d.defaultValue==null?"":d.defaultValue,w=d.checked!=null?d.checked:d.defaultChecked;x=X(d.value!=null?d.value:x),o._wrapperState={initialChecked:w,initialValue:x,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function Z(o,d){d=d.checked,d!=null&&C(o,"checked",d,!1)}function te(o,d){Z(o,d);var x=X(d.value),w=d.type;if(x!=null)w==="number"?(x===0&&o.value===""||o.value!=x)&&(o.value=""+x):o.value!==""+x&&(o.value=""+x);else if(w==="submit"||w==="reset"){o.removeAttribute("value");return}d.hasOwnProperty("value")?ae(o,d.type,x):d.hasOwnProperty("defaultValue")&&ae(o,d.type,X(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(o.defaultChecked=!!d.defaultChecked)}function ne(o,d,x){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var w=d.type;if(!(w!=="submit"&&w!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+o._wrapperState.initialValue,x||d===o.value||(o.value=d),o.defaultValue=d}x=o.name,x!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,x!==""&&(o.name=x)}function ae(o,d,x){(d!=="number"||De(o.ownerDocument)!==o)&&(x==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+x&&(o.defaultValue=""+x))}var we=Array.isArray;function Ce(o,d,x,w){if(o=o.options,d){d={};for(var E=0;E<x.length;E++)d["$"+x[E]]=!0;for(x=0;x<o.length;x++)E=d.hasOwnProperty("$"+o[x].value),o[x].selected!==E&&(o[x].selected=E),E&&w&&(o[x].defaultSelected=!0)}else{for(x=""+X(x),d=null,E=0;E<o.length;E++){if(o[E].value===x){o[E].selected=!0,w&&(o[E].defaultSelected=!0);return}d!==null||o[E].disabled||(d=o[E])}d!==null&&(d.selected=!0)}}function ue(o,d){if(d.dangerouslySetInnerHTML!=null)throw Error(n(91));return O({},d,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function pe(o,d){var x=d.value;if(x==null){if(x=d.children,d=d.defaultValue,x!=null){if(d!=null)throw Error(n(92));if(we(x)){if(1<x.length)throw Error(n(93));x=x[0]}d=x}d==null&&(d=""),x=d}o._wrapperState={initialValue:X(x)}}function je(o,d){var x=X(d.value),w=X(d.defaultValue);x!=null&&(x=""+x,x!==o.value&&(o.value=x),d.defaultValue==null&&o.defaultValue!==x&&(o.defaultValue=x)),w!=null&&(o.defaultValue=""+w)}function Ne(o){var d=o.textContent;d===o._wrapperState.initialValue&&d!==""&&d!==null&&(o.value=d)}function he(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ee(o,d){return o==null||o==="http://www.w3.org/1999/xhtml"?he(d):o==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Re,qe=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,x,w,E){MSApp.execUnsafeLocalFunction(function(){return o(d,x,w,E)})}:o})(function(o,d){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=d;else{for(Re=Re||document.createElement("div"),Re.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=Re.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;d.firstChild;)o.appendChild(d.firstChild)}});function Ye(o,d){if(d){var x=o.firstChild;if(x&&x===o.lastChild&&x.nodeType===3){x.nodeValue=d;return}}o.textContent=d}var nt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ce=["Webkit","ms","Moz","O"];Object.keys(nt).forEach(function(o){ce.forEach(function(d){d=d+o.charAt(0).toUpperCase()+o.substring(1),nt[d]=nt[o]})});function Te(o,d,x){return d==null||typeof d=="boolean"||d===""?"":x||typeof d!="number"||d===0||nt.hasOwnProperty(o)&&nt[o]?(""+d).trim():d+"px"}function Me(o,d){o=o.style;for(var x in d)if(d.hasOwnProperty(x)){var w=x.indexOf("--")===0,E=Te(x,d[x],w);x==="float"&&(x="cssFloat"),w?o.setProperty(x,E):o[x]=E}}var Oe=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ke(o,d){if(d){if(Oe[o]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(n(137,o));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(n(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(n(61))}if(d.style!=null&&typeof d.style!="object")throw Error(n(62))}}function Ze(o,d){if(o.indexOf("-")===-1)return typeof d.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pt=null;function ht(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var jt=null,Ht=null,Lt=null;function Kt(o){if(o=Ro(o)){if(typeof jt!="function")throw Error(n(280));var d=o.stateNode;d&&(d=ac(d),jt(o.stateNode,o.type,d))}}function it(o){Ht?Lt?Lt.push(o):Lt=[o]:Ht=o}function Pt(){if(Ht){var o=Ht,d=Lt;if(Lt=Ht=null,Kt(o),d)for(o=0;o<d.length;o++)Kt(d[o])}}function Ot(o,d){return o(d)}function kt(){}var gn=!1;function Xt(o,d,x){if(gn)return o(d,x);gn=!0;try{return Ot(o,d,x)}finally{gn=!1,(Ht!==null||Lt!==null)&&(kt(),Pt())}}function Ut(o,d){var x=o.stateNode;if(x===null)return null;var w=ac(x);if(w===null)return null;x=w[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(o=o.type,w=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!w;break e;default:o=!1}if(o)return null;if(x&&typeof x!="function")throw Error(n(231,d,typeof x));return x}var kr=!1;if(c)try{var $t={};Object.defineProperty($t,"passive",{get:function(){kr=!0}}),window.addEventListener("test",$t,$t),window.removeEventListener("test",$t,$t)}catch{kr=!1}function an(o,d,x,w,E,z,Q,ie,fe){var Ae=Array.prototype.slice.call(arguments,3);try{d.apply(x,Ae)}catch(Le){this.onError(Le)}}var Cn=!1,Kn=null,ks=!1,Os=null,Fl={onError:function(o){Cn=!0,Kn=o}};function yo(o,d,x,w,E,z,Q,ie,fe){Cn=!1,Kn=null,an.apply(Fl,arguments)}function Rl(o,d,x,w,E,z,Q,ie,fe){if(yo.apply(this,arguments),Cn){if(Cn){var Ae=Kn;Cn=!1,Kn=null}else throw Error(n(198));ks||(ks=!0,Os=Ae)}}function Fr(o){var d=o,x=o;if(o.alternate)for(;d.return;)d=d.return;else{o=d;do d=o,(d.flags&4098)!==0&&(x=d.return),o=d.return;while(o)}return d.tag===3?x:null}function Bl(o){if(o.tag===13){var d=o.memoizedState;if(d===null&&(o=o.alternate,o!==null&&(d=o.memoizedState)),d!==null)return d.dehydrated}return null}function vo(o){if(Fr(o)!==o)throw Error(n(188))}function wu(o){var d=o.alternate;if(!d){if(d=Fr(o),d===null)throw Error(n(188));return d!==o?null:o}for(var x=o,w=d;;){var E=x.return;if(E===null)break;var z=E.alternate;if(z===null){if(w=E.return,w!==null){x=w;continue}break}if(E.child===z.child){for(z=E.child;z;){if(z===x)return vo(E),o;if(z===w)return vo(E),d;z=z.sibling}throw Error(n(188))}if(x.return!==w.return)x=E,w=z;else{for(var Q=!1,ie=E.child;ie;){if(ie===x){Q=!0,x=E,w=z;break}if(ie===w){Q=!0,w=E,x=z;break}ie=ie.sibling}if(!Q){for(ie=z.child;ie;){if(ie===x){Q=!0,x=z,w=E;break}if(ie===w){Q=!0,w=z,x=E;break}ie=ie.sibling}if(!Q)throw Error(n(189))}}if(x.alternate!==w)throw Error(n(190))}if(x.tag!==3)throw Error(n(188));return x.stateNode.current===x?o:d}function ku(o){return o=wu(o),o!==null?$s(o):null}function $s(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var d=$s(o);if(d!==null)return d;o=o.sibling}return null}var wa=t.unstable_scheduleCallback,zl=t.unstable_cancelCallback,Su=t.unstable_shouldYield,ka=t.unstable_requestPaint,Wt=t.unstable_now,Sa=t.unstable_getCurrentPriorityLevel,Vs=t.unstable_ImmediatePriority,Fn=t.unstable_UserBlockingPriority,si=t.unstable_NormalPriority,Xn=t.unstable_LowPriority,wo=t.unstable_IdlePriority,ai=null,Sr=null;function Ll(o){if(Sr&&typeof Sr.onCommitFiberRoot=="function")try{Sr.onCommitFiberRoot(ai,o,void 0,(o.current.flags&128)===128)}catch{}}var Vt=Math.clz32?Math.clz32:$l,ii=Math.log,Ol=Math.LN2;function $l(o){return o>>>=0,o===0?32:31-(ii(o)/Ol|0)|0}var oi=64,li=4194304;function ja(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function ci(o,d){var x=o.pendingLanes;if(x===0)return 0;var w=0,E=o.suspendedLanes,z=o.pingedLanes,Q=x&268435455;if(Q!==0){var ie=Q&~E;ie!==0?w=ja(ie):(z&=Q,z!==0&&(w=ja(z)))}else Q=x&~E,Q!==0?w=ja(Q):z!==0&&(w=ja(z));if(w===0)return 0;if(d!==0&&d!==w&&(d&E)===0&&(E=w&-w,z=d&-d,E>=z||E===16&&(z&4194240)!==0))return d;if((w&4)!==0&&(w|=x&16),d=o.entangledLanes,d!==0)for(o=o.entanglements,d&=w;0<d;)x=31-Vt(d),E=1<<x,w|=o[x],d&=~E;return w}function Hs(o,d){switch(o){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rr(o,d){for(var x=o.suspendedLanes,w=o.pingedLanes,E=o.expirationTimes,z=o.pendingLanes;0<z;){var Q=31-Vt(z),ie=1<<Q,fe=E[Q];fe===-1?((ie&x)===0||(ie&w)!==0)&&(E[Q]=Hs(ie,d)):fe<=d&&(o.expiredLanes|=ie),z&=~ie}}function ko(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function So(){var o=oi;return oi<<=1,(oi&4194240)===0&&(oi=64),o}function jo(o){for(var d=[],x=0;31>x;x++)d.push(o);return d}function Ca(o,d,x){o.pendingLanes|=d,d!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,d=31-Vt(d),o[d]=x}function ju(o,d){var x=o.pendingLanes&~d;o.pendingLanes=d,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=d,o.mutableReadLanes&=d,o.entangledLanes&=d,d=o.entanglements;var w=o.eventTimes;for(o=o.expirationTimes;0<x;){var E=31-Vt(x),z=1<<E;d[E]=0,w[E]=-1,o[E]=-1,x&=~z}}function di(o,d){var x=o.entangledLanes|=d;for(o=o.entanglements;x;){var w=31-Vt(x),E=1<<w;E&d|o[w]&d&&(o[w]|=d),x&=~E}}var Rt=0;function Vl(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var Hl,ui,Ul,Wl,Kl,ke=!1,_e=[],xe=null,ot=null,st=null,ft=new Map,ut=new Map,_t=[],hn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lt(o,d){switch(o){case"focusin":case"focusout":xe=null;break;case"dragenter":case"dragleave":ot=null;break;case"mouseover":case"mouseout":st=null;break;case"pointerover":case"pointerout":ft.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":ut.delete(d.pointerId)}}function gt(o,d,x,w,E,z){return o===null||o.nativeEvent!==z?(o={blockedOn:d,domEventName:x,eventSystemFlags:w,nativeEvent:z,targetContainers:[E]},d!==null&&(d=Ro(d),d!==null&&ui(d)),o):(o.eventSystemFlags|=w,d=o.targetContainers,E!==null&&d.indexOf(E)===-1&&d.push(E),o)}function qt(o,d,x,w,E){switch(d){case"focusin":return xe=gt(xe,o,d,x,w,E),!0;case"dragenter":return ot=gt(ot,o,d,x,w,E),!0;case"mouseover":return st=gt(st,o,d,x,w,E),!0;case"pointerover":var z=E.pointerId;return ft.set(z,gt(ft.get(z)||null,o,d,x,w,E)),!0;case"gotpointercapture":return z=E.pointerId,ut.set(z,gt(ut.get(z)||null,o,d,x,w,E)),!0}return!1}function En(o){var d=Na(o.target);if(d!==null){var x=Fr(d);if(x!==null){if(d=x.tag,d===13){if(d=Bl(x),d!==null){o.blockedOn=d,Kl(o.priority,function(){Ul(x)});return}}else if(d===3&&x.stateNode.current.memoizedState.isDehydrated){o.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}o.blockedOn=null}function tn(o){if(o.blockedOn!==null)return!1;for(var d=o.targetContainers;0<d.length;){var x=Br(o.domEventName,o.eventSystemFlags,d[0],o.nativeEvent);if(x===null){x=o.nativeEvent;var w=new x.constructor(x.type,x);pt=w,x.target.dispatchEvent(w),pt=null}else return d=Ro(x),d!==null&&ui(d),o.blockedOn=x,!1;d.shift()}return!0}function wt(o,d,x){tn(o)&&x.delete(d)}function Rn(){ke=!1,xe!==null&&tn(xe)&&(xe=null),ot!==null&&tn(ot)&&(ot=null),st!==null&&tn(st)&&(st=null),ft.forEach(wt),ut.forEach(wt)}function Gt(o,d){o.blockedOn===d&&(o.blockedOn=null,ke||(ke=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Rn)))}function Qe(o){function d(E){return Gt(E,o)}if(0<_e.length){Gt(_e[0],o);for(var x=1;x<_e.length;x++){var w=_e[x];w.blockedOn===o&&(w.blockedOn=null)}}for(xe!==null&&Gt(xe,o),ot!==null&&Gt(ot,o),st!==null&&Gt(st,o),ft.forEach(d),ut.forEach(d),x=0;x<_t.length;x++)w=_t[x],w.blockedOn===o&&(w.blockedOn=null);for(;0<_t.length&&(x=_t[0],x.blockedOn===null);)En(x),x.blockedOn===null&&_t.shift()}var vt=_.ReactCurrentBatchConfig,Mt=!0;function Jn(o,d,x,w){var E=Rt,z=vt.transition;vt.transition=null;try{Rt=1,Bn(o,d,x,w)}finally{Rt=E,vt.transition=z}}function Xr(o,d,x,w){var E=Rt,z=vt.transition;vt.transition=null;try{Rt=4,Bn(o,d,x,w)}finally{Rt=E,vt.transition=z}}function Bn(o,d,x,w){if(Mt){var E=Br(o,d,x,w);if(E===null)$u(o,d,w,Ss,x),lt(o,w);else if(qt(E,o,d,x,w))w.stopPropagation();else if(lt(o,w),d&4&&-1<hn.indexOf(o)){for(;E!==null;){var z=Ro(E);if(z!==null&&Hl(z),z=Br(o,d,x,w),z===null&&$u(o,d,w,Ss,x),z===E)break;E=z}E!==null&&w.stopPropagation()}else $u(o,d,w,null,x)}}var Ss=null;function Br(o,d,x,w){if(Ss=null,o=ht(w),o=Na(o),o!==null)if(d=Fr(o),d===null)o=null;else if(x=d.tag,x===13){if(o=Bl(d),o!==null)return o;o=null}else if(x===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;o=null}else d!==o&&(o=null);return Ss=o,null}function ql(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sa()){case Vs:return 1;case Fn:return 4;case si:case Xn:return 16;case wo:return 536870912;default:return 16}default:return 16}}var Jr=null,Cu=null,Gl=null;function _0(){if(Gl)return Gl;var o,d=Cu,x=d.length,w,E="value"in Jr?Jr.value:Jr.textContent,z=E.length;for(o=0;o<x&&d[o]===E[o];o++);var Q=x-o;for(w=1;w<=Q&&d[x-w]===E[z-w];w++);return Gl=E.slice(o,1<w?1-w:void 0)}function Yl(o){var d=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&d===13&&(o=13)):o=d,o===10&&(o=13),32<=o||o===13?o:0}function Zl(){return!0}function A0(){return!1}function hr(o){function d(x,w,E,z,Q){this._reactName=x,this._targetInst=E,this.type=w,this.nativeEvent=z,this.target=Q,this.currentTarget=null;for(var ie in o)o.hasOwnProperty(ie)&&(x=o[ie],this[ie]=x?x(z):z[ie]);return this.isDefaultPrevented=(z.defaultPrevented!=null?z.defaultPrevented:z.returnValue===!1)?Zl:A0,this.isPropagationStopped=A0,this}return O(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=Zl)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=Zl)},persist:function(){},isPersistent:Zl}),d}var fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nu=hr(fi),Co=O({},fi,{view:0,detail:0}),Ik=hr(Co),_u,Au,No,Ql=O({},Co,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tu,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==No&&(No&&o.type==="mousemove"?(_u=o.screenX-No.screenX,Au=o.screenY-No.screenY):Au=_u=0,No=o),_u)},movementY:function(o){return"movementY"in o?o.movementY:Au}}),E0=hr(Ql),Pk=O({},Ql,{dataTransfer:0}),Mk=hr(Pk),Fk=O({},Co,{relatedTarget:0}),Eu=hr(Fk),Rk=O({},fi,{animationName:0,elapsedTime:0,pseudoElement:0}),Bk=hr(Rk),zk=O({},fi,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Lk=hr(zk),Ok=O({},fi,{data:0}),T0=hr(Ok),$k={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uk(o){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(o):(o=Hk[o])?!!d[o]:!1}function Tu(){return Uk}var Wk=O({},Co,{key:function(o){if(o.key){var d=$k[o.key]||o.key;if(d!=="Unidentified")return d}return o.type==="keypress"?(o=Yl(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Vk[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tu,charCode:function(o){return o.type==="keypress"?Yl(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Yl(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Kk=hr(Wk),qk=O({},Ql,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),D0=hr(qk),Gk=O({},Co,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tu}),Yk=hr(Gk),Zk=O({},fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qk=hr(Zk),Xk=O({},Ql,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Jk=hr(Xk),eS=[9,13,27,32],Du=c&&"CompositionEvent"in window,_o=null;c&&"documentMode"in document&&(_o=document.documentMode);var tS=c&&"TextEvent"in window&&!_o,I0=c&&(!Du||_o&&8<_o&&11>=_o),P0=" ",M0=!1;function F0(o,d){switch(o){case"keyup":return eS.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function R0(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var hi=!1;function nS(o,d){switch(o){case"compositionend":return R0(d);case"keypress":return d.which!==32?null:(M0=!0,P0);case"textInput":return o=d.data,o===P0&&M0?null:o;default:return null}}function rS(o,d){if(hi)return o==="compositionend"||!Du&&F0(o,d)?(o=_0(),Gl=Cu=Jr=null,hi=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return I0&&d.locale!=="ko"?null:d.data;default:return null}}var sS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function B0(o){var d=o&&o.nodeName&&o.nodeName.toLowerCase();return d==="input"?!!sS[o.type]:d==="textarea"}function z0(o,d,x,w){it(w),d=nc(d,"onChange"),0<d.length&&(x=new Nu("onChange","change",null,x,w),o.push({event:x,listeners:d}))}var Ao=null,Eo=null;function aS(o){nx(o,0)}function Xl(o){var d=bi(o);if(Ie(d))return o}function iS(o,d){if(o==="change")return d}var L0=!1;if(c){var Iu;if(c){var Pu="oninput"in document;if(!Pu){var O0=document.createElement("div");O0.setAttribute("oninput","return;"),Pu=typeof O0.oninput=="function"}Iu=Pu}else Iu=!1;L0=Iu&&(!document.documentMode||9<document.documentMode)}function $0(){Ao&&(Ao.detachEvent("onpropertychange",V0),Eo=Ao=null)}function V0(o){if(o.propertyName==="value"&&Xl(Eo)){var d=[];z0(d,Eo,o,ht(o)),Xt(aS,d)}}function oS(o,d,x){o==="focusin"?($0(),Ao=d,Eo=x,Ao.attachEvent("onpropertychange",V0)):o==="focusout"&&$0()}function lS(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Xl(Eo)}function cS(o,d){if(o==="click")return Xl(d)}function dS(o,d){if(o==="input"||o==="change")return Xl(d)}function uS(o,d){return o===d&&(o!==0||1/o===1/d)||o!==o&&d!==d}var zr=typeof Object.is=="function"?Object.is:uS;function To(o,d){if(zr(o,d))return!0;if(typeof o!="object"||o===null||typeof d!="object"||d===null)return!1;var x=Object.keys(o),w=Object.keys(d);if(x.length!==w.length)return!1;for(w=0;w<x.length;w++){var E=x[w];if(!u.call(d,E)||!zr(o[E],d[E]))return!1}return!0}function H0(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function U0(o,d){var x=H0(o);o=0;for(var w;x;){if(x.nodeType===3){if(w=o+x.textContent.length,o<=d&&w>=d)return{node:x,offset:d-o};o=w}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=H0(x)}}function W0(o,d){return o&&d?o===d?!0:o&&o.nodeType===3?!1:d&&d.nodeType===3?W0(o,d.parentNode):"contains"in o?o.contains(d):o.compareDocumentPosition?!!(o.compareDocumentPosition(d)&16):!1:!1}function K0(){for(var o=window,d=De();d instanceof o.HTMLIFrameElement;){try{var x=typeof d.contentWindow.location.href=="string"}catch{x=!1}if(x)o=d.contentWindow;else break;d=De(o.document)}return d}function Mu(o){var d=o&&o.nodeName&&o.nodeName.toLowerCase();return d&&(d==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||d==="textarea"||o.contentEditable==="true")}function fS(o){var d=K0(),x=o.focusedElem,w=o.selectionRange;if(d!==x&&x&&x.ownerDocument&&W0(x.ownerDocument.documentElement,x)){if(w!==null&&Mu(x)){if(d=w.start,o=w.end,o===void 0&&(o=d),"selectionStart"in x)x.selectionStart=d,x.selectionEnd=Math.min(o,x.value.length);else if(o=(d=x.ownerDocument||document)&&d.defaultView||window,o.getSelection){o=o.getSelection();var E=x.textContent.length,z=Math.min(w.start,E);w=w.end===void 0?z:Math.min(w.end,E),!o.extend&&z>w&&(E=w,w=z,z=E),E=U0(x,z);var Q=U0(x,w);E&&Q&&(o.rangeCount!==1||o.anchorNode!==E.node||o.anchorOffset!==E.offset||o.focusNode!==Q.node||o.focusOffset!==Q.offset)&&(d=d.createRange(),d.setStart(E.node,E.offset),o.removeAllRanges(),z>w?(o.addRange(d),o.extend(Q.node,Q.offset)):(d.setEnd(Q.node,Q.offset),o.addRange(d)))}}for(d=[],o=x;o=o.parentNode;)o.nodeType===1&&d.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<d.length;x++)o=d[x],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var hS=c&&"documentMode"in document&&11>=document.documentMode,pi=null,Fu=null,Do=null,Ru=!1;function q0(o,d,x){var w=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;Ru||pi==null||pi!==De(w)||(w=pi,"selectionStart"in w&&Mu(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Do&&To(Do,w)||(Do=w,w=nc(Fu,"onSelect"),0<w.length&&(d=new Nu("onSelect","select",null,d,x),o.push({event:d,listeners:w}),d.target=pi)))}function Jl(o,d){var x={};return x[o.toLowerCase()]=d.toLowerCase(),x["Webkit"+o]="webkit"+d,x["Moz"+o]="moz"+d,x}var mi={animationend:Jl("Animation","AnimationEnd"),animationiteration:Jl("Animation","AnimationIteration"),animationstart:Jl("Animation","AnimationStart"),transitionend:Jl("Transition","TransitionEnd")},Bu={},G0={};c&&(G0=document.createElement("div").style,"AnimationEvent"in window||(delete mi.animationend.animation,delete mi.animationiteration.animation,delete mi.animationstart.animation),"TransitionEvent"in window||delete mi.transitionend.transition);function ec(o){if(Bu[o])return Bu[o];if(!mi[o])return o;var d=mi[o],x;for(x in d)if(d.hasOwnProperty(x)&&x in G0)return Bu[o]=d[x];return o}var Y0=ec("animationend"),Z0=ec("animationiteration"),Q0=ec("animationstart"),X0=ec("transitionend"),J0=new Map,ex="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Us(o,d){J0.set(o,d),i(d,[o])}for(var zu=0;zu<ex.length;zu++){var Lu=ex[zu],pS=Lu.toLowerCase(),mS=Lu[0].toUpperCase()+Lu.slice(1);Us(pS,"on"+mS)}Us(Y0,"onAnimationEnd"),Us(Z0,"onAnimationIteration"),Us(Q0,"onAnimationStart"),Us("dblclick","onDoubleClick"),Us("focusin","onFocus"),Us("focusout","onBlur"),Us(X0,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Io));function tx(o,d,x){var w=o.type||"unknown-event";o.currentTarget=x,Rl(w,d,void 0,o),o.currentTarget=null}function nx(o,d){d=(d&4)!==0;for(var x=0;x<o.length;x++){var w=o[x],E=w.event;w=w.listeners;e:{var z=void 0;if(d)for(var Q=w.length-1;0<=Q;Q--){var ie=w[Q],fe=ie.instance,Ae=ie.currentTarget;if(ie=ie.listener,fe!==z&&E.isPropagationStopped())break e;tx(E,ie,Ae),z=fe}else for(Q=0;Q<w.length;Q++){if(ie=w[Q],fe=ie.instance,Ae=ie.currentTarget,ie=ie.listener,fe!==z&&E.isPropagationStopped())break e;tx(E,ie,Ae),z=fe}}}if(ks)throw o=Os,ks=!1,Os=null,o}function Jt(o,d){var x=d[qu];x===void 0&&(x=d[qu]=new Set);var w=o+"__bubble";x.has(w)||(rx(d,o,2,!1),x.add(w))}function Ou(o,d,x){var w=0;d&&(w|=4),rx(x,o,w,d)}var tc="_reactListening"+Math.random().toString(36).slice(2);function Po(o){if(!o[tc]){o[tc]=!0,s.forEach(function(x){x!=="selectionchange"&&(xS.has(x)||Ou(x,!1,o),Ou(x,!0,o))});var d=o.nodeType===9?o:o.ownerDocument;d===null||d[tc]||(d[tc]=!0,Ou("selectionchange",!1,d))}}function rx(o,d,x,w){switch(ql(d)){case 1:var E=Jn;break;case 4:E=Xr;break;default:E=Bn}x=E.bind(null,d,x,o),E=void 0,!kr||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(E=!0),w?E!==void 0?o.addEventListener(d,x,{capture:!0,passive:E}):o.addEventListener(d,x,!0):E!==void 0?o.addEventListener(d,x,{passive:E}):o.addEventListener(d,x,!1)}function $u(o,d,x,w,E){var z=w;if((d&1)===0&&(d&2)===0&&w!==null)e:for(;;){if(w===null)return;var Q=w.tag;if(Q===3||Q===4){var ie=w.stateNode.containerInfo;if(ie===E||ie.nodeType===8&&ie.parentNode===E)break;if(Q===4)for(Q=w.return;Q!==null;){var fe=Q.tag;if((fe===3||fe===4)&&(fe=Q.stateNode.containerInfo,fe===E||fe.nodeType===8&&fe.parentNode===E))return;Q=Q.return}for(;ie!==null;){if(Q=Na(ie),Q===null)return;if(fe=Q.tag,fe===5||fe===6){w=z=Q;continue e}ie=ie.parentNode}}w=w.return}Xt(function(){var Ae=z,Le=ht(x),$e=[];e:{var ze=J0.get(o);if(ze!==void 0){var Ge=Nu,Je=o;switch(o){case"keypress":if(Yl(x)===0)break e;case"keydown":case"keyup":Ge=Kk;break;case"focusin":Je="focus",Ge=Eu;break;case"focusout":Je="blur",Ge=Eu;break;case"beforeblur":case"afterblur":Ge=Eu;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ge=E0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ge=Mk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ge=Yk;break;case Y0:case Z0:case Q0:Ge=Bk;break;case X0:Ge=Qk;break;case"scroll":Ge=Ik;break;case"wheel":Ge=Jk;break;case"copy":case"cut":case"paste":Ge=Lk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ge=D0}var rt=(d&4)!==0,pn=!rt&&o==="scroll",ve=rt?ze!==null?ze+"Capture":null:ze;rt=[];for(var ge=Ae,Se;ge!==null;){Se=ge;var He=Se.stateNode;if(Se.tag===5&&He!==null&&(Se=He,ve!==null&&(He=Ut(ge,ve),He!=null&&rt.push(Mo(ge,He,Se)))),pn)break;ge=ge.return}0<rt.length&&(ze=new Ge(ze,Je,null,x,Le),$e.push({event:ze,listeners:rt}))}}if((d&7)===0){e:{if(ze=o==="mouseover"||o==="pointerover",Ge=o==="mouseout"||o==="pointerout",ze&&x!==pt&&(Je=x.relatedTarget||x.fromElement)&&(Na(Je)||Je[js]))break e;if((Ge||ze)&&(ze=Le.window===Le?Le:(ze=Le.ownerDocument)?ze.defaultView||ze.parentWindow:window,Ge?(Je=x.relatedTarget||x.toElement,Ge=Ae,Je=Je?Na(Je):null,Je!==null&&(pn=Fr(Je),Je!==pn||Je.tag!==5&&Je.tag!==6)&&(Je=null)):(Ge=null,Je=Ae),Ge!==Je)){if(rt=E0,He="onMouseLeave",ve="onMouseEnter",ge="mouse",(o==="pointerout"||o==="pointerover")&&(rt=D0,He="onPointerLeave",ve="onPointerEnter",ge="pointer"),pn=Ge==null?ze:bi(Ge),Se=Je==null?ze:bi(Je),ze=new rt(He,ge+"leave",Ge,x,Le),ze.target=pn,ze.relatedTarget=Se,He=null,Na(Le)===Ae&&(rt=new rt(ve,ge+"enter",Je,x,Le),rt.target=Se,rt.relatedTarget=pn,He=rt),pn=He,Ge&&Je)t:{for(rt=Ge,ve=Je,ge=0,Se=rt;Se;Se=xi(Se))ge++;for(Se=0,He=ve;He;He=xi(He))Se++;for(;0<ge-Se;)rt=xi(rt),ge--;for(;0<Se-ge;)ve=xi(ve),Se--;for(;ge--;){if(rt===ve||ve!==null&&rt===ve.alternate)break t;rt=xi(rt),ve=xi(ve)}rt=null}else rt=null;Ge!==null&&sx($e,ze,Ge,rt,!1),Je!==null&&pn!==null&&sx($e,pn,Je,rt,!0)}}e:{if(ze=Ae?bi(Ae):window,Ge=ze.nodeName&&ze.nodeName.toLowerCase(),Ge==="select"||Ge==="input"&&ze.type==="file")var at=iS;else if(B0(ze))if(L0)at=dS;else{at=lS;var ct=oS}else(Ge=ze.nodeName)&&Ge.toLowerCase()==="input"&&(ze.type==="checkbox"||ze.type==="radio")&&(at=cS);if(at&&(at=at(o,Ae))){z0($e,at,x,Le);break e}ct&&ct(o,ze,Ae),o==="focusout"&&(ct=ze._wrapperState)&&ct.controlled&&ze.type==="number"&&ae(ze,"number",ze.value)}switch(ct=Ae?bi(Ae):window,o){case"focusin":(B0(ct)||ct.contentEditable==="true")&&(pi=ct,Fu=Ae,Do=null);break;case"focusout":Do=Fu=pi=null;break;case"mousedown":Ru=!0;break;case"contextmenu":case"mouseup":case"dragend":Ru=!1,q0($e,x,Le);break;case"selectionchange":if(hS)break;case"keydown":case"keyup":q0($e,x,Le)}var dt;if(Du)e:{switch(o){case"compositionstart":var bt="onCompositionStart";break e;case"compositionend":bt="onCompositionEnd";break e;case"compositionupdate":bt="onCompositionUpdate";break e}bt=void 0}else hi?F0(o,x)&&(bt="onCompositionEnd"):o==="keydown"&&x.keyCode===229&&(bt="onCompositionStart");bt&&(I0&&x.locale!=="ko"&&(hi||bt!=="onCompositionStart"?bt==="onCompositionEnd"&&hi&&(dt=_0()):(Jr=Le,Cu="value"in Jr?Jr.value:Jr.textContent,hi=!0)),ct=nc(Ae,bt),0<ct.length&&(bt=new T0(bt,o,null,x,Le),$e.push({event:bt,listeners:ct}),dt?bt.data=dt:(dt=R0(x),dt!==null&&(bt.data=dt)))),(dt=tS?nS(o,x):rS(o,x))&&(Ae=nc(Ae,"onBeforeInput"),0<Ae.length&&(Le=new T0("onBeforeInput","beforeinput",null,x,Le),$e.push({event:Le,listeners:Ae}),Le.data=dt))}nx($e,d)})}function Mo(o,d,x){return{instance:o,listener:d,currentTarget:x}}function nc(o,d){for(var x=d+"Capture",w=[];o!==null;){var E=o,z=E.stateNode;E.tag===5&&z!==null&&(E=z,z=Ut(o,x),z!=null&&w.unshift(Mo(o,z,E)),z=Ut(o,d),z!=null&&w.push(Mo(o,z,E))),o=o.return}return w}function xi(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function sx(o,d,x,w,E){for(var z=d._reactName,Q=[];x!==null&&x!==w;){var ie=x,fe=ie.alternate,Ae=ie.stateNode;if(fe!==null&&fe===w)break;ie.tag===5&&Ae!==null&&(ie=Ae,E?(fe=Ut(x,z),fe!=null&&Q.unshift(Mo(x,fe,ie))):E||(fe=Ut(x,z),fe!=null&&Q.push(Mo(x,fe,ie)))),x=x.return}Q.length!==0&&o.push({event:d,listeners:Q})}var gS=/\r\n?/g,bS=/\u0000|\uFFFD/g;function ax(o){return(typeof o=="string"?o:""+o).replace(gS,`
`).replace(bS,"")}function rc(o,d,x){if(d=ax(d),ax(o)!==d&&x)throw Error(n(425))}function sc(){}var Vu=null,Hu=null;function Uu(o,d){return o==="textarea"||o==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Wu=typeof setTimeout=="function"?setTimeout:void 0,yS=typeof clearTimeout=="function"?clearTimeout:void 0,ix=typeof Promise=="function"?Promise:void 0,vS=typeof queueMicrotask=="function"?queueMicrotask:typeof ix<"u"?function(o){return ix.resolve(null).then(o).catch(wS)}:Wu;function wS(o){setTimeout(function(){throw o})}function Ku(o,d){var x=d,w=0;do{var E=x.nextSibling;if(o.removeChild(x),E&&E.nodeType===8)if(x=E.data,x==="/$"){if(w===0){o.removeChild(E),Qe(d);return}w--}else x!=="$"&&x!=="$?"&&x!=="$!"||w++;x=E}while(x);Qe(d)}function Ws(o){for(;o!=null;o=o.nextSibling){var d=o.nodeType;if(d===1||d===3)break;if(d===8){if(d=o.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return o}function ox(o){o=o.previousSibling;for(var d=0;o;){if(o.nodeType===8){var x=o.data;if(x==="$"||x==="$!"||x==="$?"){if(d===0)return o;d--}else x==="/$"&&d++}o=o.previousSibling}return null}var gi=Math.random().toString(36).slice(2),es="__reactFiber$"+gi,Fo="__reactProps$"+gi,js="__reactContainer$"+gi,qu="__reactEvents$"+gi,kS="__reactListeners$"+gi,SS="__reactHandles$"+gi;function Na(o){var d=o[es];if(d)return d;for(var x=o.parentNode;x;){if(d=x[js]||x[es]){if(x=d.alternate,d.child!==null||x!==null&&x.child!==null)for(o=ox(o);o!==null;){if(x=o[es])return x;o=ox(o)}return d}o=x,x=o.parentNode}return null}function Ro(o){return o=o[es]||o[js],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function bi(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(n(33))}function ac(o){return o[Fo]||null}var Gu=[],yi=-1;function Ks(o){return{current:o}}function en(o){0>yi||(o.current=Gu[yi],Gu[yi]=null,yi--)}function Yt(o,d){yi++,Gu[yi]=o.current,o.current=d}var qs={},zn=Ks(qs),er=Ks(!1),_a=qs;function vi(o,d){var x=o.type.contextTypes;if(!x)return qs;var w=o.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===d)return w.__reactInternalMemoizedMaskedChildContext;var E={},z;for(z in x)E[z]=d[z];return w&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=d,o.__reactInternalMemoizedMaskedChildContext=E),E}function tr(o){return o=o.childContextTypes,o!=null}function ic(){en(er),en(zn)}function lx(o,d,x){if(zn.current!==qs)throw Error(n(168));Yt(zn,d),Yt(er,x)}function cx(o,d,x){var w=o.stateNode;if(d=d.childContextTypes,typeof w.getChildContext!="function")return x;w=w.getChildContext();for(var E in w)if(!(E in d))throw Error(n(108,de(o)||"Unknown",E));return O({},x,w)}function oc(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||qs,_a=zn.current,Yt(zn,o),Yt(er,er.current),!0}function dx(o,d,x){var w=o.stateNode;if(!w)throw Error(n(169));x?(o=cx(o,d,_a),w.__reactInternalMemoizedMergedChildContext=o,en(er),en(zn),Yt(zn,o)):en(er),Yt(er,x)}var Cs=null,lc=!1,Yu=!1;function ux(o){Cs===null?Cs=[o]:Cs.push(o)}function jS(o){lc=!0,ux(o)}function Gs(){if(!Yu&&Cs!==null){Yu=!0;var o=0,d=Rt;try{var x=Cs;for(Rt=1;o<x.length;o++){var w=x[o];do w=w(!0);while(w!==null)}Cs=null,lc=!1}catch(E){throw Cs!==null&&(Cs=Cs.slice(o+1)),wa(Vs,Gs),E}finally{Rt=d,Yu=!1}}return null}var wi=[],ki=0,cc=null,dc=0,jr=[],Cr=0,Aa=null,Ns=1,_s="";function Ea(o,d){wi[ki++]=dc,wi[ki++]=cc,cc=o,dc=d}function fx(o,d,x){jr[Cr++]=Ns,jr[Cr++]=_s,jr[Cr++]=Aa,Aa=o;var w=Ns;o=_s;var E=32-Vt(w)-1;w&=~(1<<E),x+=1;var z=32-Vt(d)+E;if(30<z){var Q=E-E%5;z=(w&(1<<Q)-1).toString(32),w>>=Q,E-=Q,Ns=1<<32-Vt(d)+E|x<<E|w,_s=z+o}else Ns=1<<z|x<<E|w,_s=o}function Zu(o){o.return!==null&&(Ea(o,1),fx(o,1,0))}function Qu(o){for(;o===cc;)cc=wi[--ki],wi[ki]=null,dc=wi[--ki],wi[ki]=null;for(;o===Aa;)Aa=jr[--Cr],jr[Cr]=null,_s=jr[--Cr],jr[Cr]=null,Ns=jr[--Cr],jr[Cr]=null}var pr=null,mr=null,nn=!1,Lr=null;function hx(o,d){var x=Er(5,null,null,0);x.elementType="DELETED",x.stateNode=d,x.return=o,d=o.deletions,d===null?(o.deletions=[x],o.flags|=16):d.push(x)}function px(o,d){switch(o.tag){case 5:var x=o.type;return d=d.nodeType!==1||x.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(o.stateNode=d,pr=o,mr=Ws(d.firstChild),!0):!1;case 6:return d=o.pendingProps===""||d.nodeType!==3?null:d,d!==null?(o.stateNode=d,pr=o,mr=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(x=Aa!==null?{id:Ns,overflow:_s}:null,o.memoizedState={dehydrated:d,treeContext:x,retryLane:1073741824},x=Er(18,null,null,0),x.stateNode=d,x.return=o,o.child=x,pr=o,mr=null,!0):!1;default:return!1}}function Xu(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Ju(o){if(nn){var d=mr;if(d){var x=d;if(!px(o,d)){if(Xu(o))throw Error(n(418));d=Ws(x.nextSibling);var w=pr;d&&px(o,d)?hx(w,x):(o.flags=o.flags&-4097|2,nn=!1,pr=o)}}else{if(Xu(o))throw Error(n(418));o.flags=o.flags&-4097|2,nn=!1,pr=o}}}function mx(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;pr=o}function uc(o){if(o!==pr)return!1;if(!nn)return mx(o),nn=!0,!1;var d;if((d=o.tag!==3)&&!(d=o.tag!==5)&&(d=o.type,d=d!=="head"&&d!=="body"&&!Uu(o.type,o.memoizedProps)),d&&(d=mr)){if(Xu(o))throw xx(),Error(n(418));for(;d;)hx(o,d),d=Ws(d.nextSibling)}if(mx(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));e:{for(o=o.nextSibling,d=0;o;){if(o.nodeType===8){var x=o.data;if(x==="/$"){if(d===0){mr=Ws(o.nextSibling);break e}d--}else x!=="$"&&x!=="$!"&&x!=="$?"||d++}o=o.nextSibling}mr=null}}else mr=pr?Ws(o.stateNode.nextSibling):null;return!0}function xx(){for(var o=mr;o;)o=Ws(o.nextSibling)}function Si(){mr=pr=null,nn=!1}function ef(o){Lr===null?Lr=[o]:Lr.push(o)}var CS=_.ReactCurrentBatchConfig;function Bo(o,d,x){if(o=x.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(n(309));var w=x.stateNode}if(!w)throw Error(n(147,o));var E=w,z=""+o;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===z?d.ref:(d=function(Q){var ie=E.refs;Q===null?delete ie[z]:ie[z]=Q},d._stringRef=z,d)}if(typeof o!="string")throw Error(n(284));if(!x._owner)throw Error(n(290,o))}return o}function fc(o,d){throw o=Object.prototype.toString.call(d),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":o))}function gx(o){var d=o._init;return d(o._payload)}function bx(o){function d(ve,ge){if(o){var Se=ve.deletions;Se===null?(ve.deletions=[ge],ve.flags|=16):Se.push(ge)}}function x(ve,ge){if(!o)return null;for(;ge!==null;)d(ve,ge),ge=ge.sibling;return null}function w(ve,ge){for(ve=new Map;ge!==null;)ge.key!==null?ve.set(ge.key,ge):ve.set(ge.index,ge),ge=ge.sibling;return ve}function E(ve,ge){return ve=na(ve,ge),ve.index=0,ve.sibling=null,ve}function z(ve,ge,Se){return ve.index=Se,o?(Se=ve.alternate,Se!==null?(Se=Se.index,Se<ge?(ve.flags|=2,ge):Se):(ve.flags|=2,ge)):(ve.flags|=1048576,ge)}function Q(ve){return o&&ve.alternate===null&&(ve.flags|=2),ve}function ie(ve,ge,Se,He){return ge===null||ge.tag!==6?(ge=Kf(Se,ve.mode,He),ge.return=ve,ge):(ge=E(ge,Se),ge.return=ve,ge)}function fe(ve,ge,Se,He){var at=Se.type;return at===V?Le(ve,ge,Se.props.children,He,Se.key):ge!==null&&(ge.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===L&&gx(at)===ge.type)?(He=E(ge,Se.props),He.ref=Bo(ve,ge,Se),He.return=ve,He):(He=Rc(Se.type,Se.key,Se.props,null,ve.mode,He),He.ref=Bo(ve,ge,Se),He.return=ve,He)}function Ae(ve,ge,Se,He){return ge===null||ge.tag!==4||ge.stateNode.containerInfo!==Se.containerInfo||ge.stateNode.implementation!==Se.implementation?(ge=qf(Se,ve.mode,He),ge.return=ve,ge):(ge=E(ge,Se.children||[]),ge.return=ve,ge)}function Le(ve,ge,Se,He,at){return ge===null||ge.tag!==7?(ge=Ba(Se,ve.mode,He,at),ge.return=ve,ge):(ge=E(ge,Se),ge.return=ve,ge)}function $e(ve,ge,Se){if(typeof ge=="string"&&ge!==""||typeof ge=="number")return ge=Kf(""+ge,ve.mode,Se),ge.return=ve,ge;if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case R:return Se=Rc(ge.type,ge.key,ge.props,null,ve.mode,Se),Se.ref=Bo(ve,null,ge),Se.return=ve,Se;case D:return ge=qf(ge,ve.mode,Se),ge.return=ve,ge;case L:var He=ge._init;return $e(ve,He(ge._payload),Se)}if(we(ge)||G(ge))return ge=Ba(ge,ve.mode,Se,null),ge.return=ve,ge;fc(ve,ge)}return null}function ze(ve,ge,Se,He){var at=ge!==null?ge.key:null;if(typeof Se=="string"&&Se!==""||typeof Se=="number")return at!==null?null:ie(ve,ge,""+Se,He);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case R:return Se.key===at?fe(ve,ge,Se,He):null;case D:return Se.key===at?Ae(ve,ge,Se,He):null;case L:return at=Se._init,ze(ve,ge,at(Se._payload),He)}if(we(Se)||G(Se))return at!==null?null:Le(ve,ge,Se,He,null);fc(ve,Se)}return null}function Ge(ve,ge,Se,He,at){if(typeof He=="string"&&He!==""||typeof He=="number")return ve=ve.get(Se)||null,ie(ge,ve,""+He,at);if(typeof He=="object"&&He!==null){switch(He.$$typeof){case R:return ve=ve.get(He.key===null?Se:He.key)||null,fe(ge,ve,He,at);case D:return ve=ve.get(He.key===null?Se:He.key)||null,Ae(ge,ve,He,at);case L:var ct=He._init;return Ge(ve,ge,Se,ct(He._payload),at)}if(we(He)||G(He))return ve=ve.get(Se)||null,Le(ge,ve,He,at,null);fc(ge,He)}return null}function Je(ve,ge,Se,He){for(var at=null,ct=null,dt=ge,bt=ge=0,An=null;dt!==null&&bt<Se.length;bt++){dt.index>bt?(An=dt,dt=null):An=dt.sibling;var Ft=ze(ve,dt,Se[bt],He);if(Ft===null){dt===null&&(dt=An);break}o&&dt&&Ft.alternate===null&&d(ve,dt),ge=z(Ft,ge,bt),ct===null?at=Ft:ct.sibling=Ft,ct=Ft,dt=An}if(bt===Se.length)return x(ve,dt),nn&&Ea(ve,bt),at;if(dt===null){for(;bt<Se.length;bt++)dt=$e(ve,Se[bt],He),dt!==null&&(ge=z(dt,ge,bt),ct===null?at=dt:ct.sibling=dt,ct=dt);return nn&&Ea(ve,bt),at}for(dt=w(ve,dt);bt<Se.length;bt++)An=Ge(dt,ve,bt,Se[bt],He),An!==null&&(o&&An.alternate!==null&&dt.delete(An.key===null?bt:An.key),ge=z(An,ge,bt),ct===null?at=An:ct.sibling=An,ct=An);return o&&dt.forEach(function(ra){return d(ve,ra)}),nn&&Ea(ve,bt),at}function rt(ve,ge,Se,He){var at=G(Se);if(typeof at!="function")throw Error(n(150));if(Se=at.call(Se),Se==null)throw Error(n(151));for(var ct=at=null,dt=ge,bt=ge=0,An=null,Ft=Se.next();dt!==null&&!Ft.done;bt++,Ft=Se.next()){dt.index>bt?(An=dt,dt=null):An=dt.sibling;var ra=ze(ve,dt,Ft.value,He);if(ra===null){dt===null&&(dt=An);break}o&&dt&&ra.alternate===null&&d(ve,dt),ge=z(ra,ge,bt),ct===null?at=ra:ct.sibling=ra,ct=ra,dt=An}if(Ft.done)return x(ve,dt),nn&&Ea(ve,bt),at;if(dt===null){for(;!Ft.done;bt++,Ft=Se.next())Ft=$e(ve,Ft.value,He),Ft!==null&&(ge=z(Ft,ge,bt),ct===null?at=Ft:ct.sibling=Ft,ct=Ft);return nn&&Ea(ve,bt),at}for(dt=w(ve,dt);!Ft.done;bt++,Ft=Se.next())Ft=Ge(dt,ve,bt,Ft.value,He),Ft!==null&&(o&&Ft.alternate!==null&&dt.delete(Ft.key===null?bt:Ft.key),ge=z(Ft,ge,bt),ct===null?at=Ft:ct.sibling=Ft,ct=Ft);return o&&dt.forEach(function(sj){return d(ve,sj)}),nn&&Ea(ve,bt),at}function pn(ve,ge,Se,He){if(typeof Se=="object"&&Se!==null&&Se.type===V&&Se.key===null&&(Se=Se.props.children),typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case R:e:{for(var at=Se.key,ct=ge;ct!==null;){if(ct.key===at){if(at=Se.type,at===V){if(ct.tag===7){x(ve,ct.sibling),ge=E(ct,Se.props.children),ge.return=ve,ve=ge;break e}}else if(ct.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===L&&gx(at)===ct.type){x(ve,ct.sibling),ge=E(ct,Se.props),ge.ref=Bo(ve,ct,Se),ge.return=ve,ve=ge;break e}x(ve,ct);break}else d(ve,ct);ct=ct.sibling}Se.type===V?(ge=Ba(Se.props.children,ve.mode,He,Se.key),ge.return=ve,ve=ge):(He=Rc(Se.type,Se.key,Se.props,null,ve.mode,He),He.ref=Bo(ve,ge,Se),He.return=ve,ve=He)}return Q(ve);case D:e:{for(ct=Se.key;ge!==null;){if(ge.key===ct)if(ge.tag===4&&ge.stateNode.containerInfo===Se.containerInfo&&ge.stateNode.implementation===Se.implementation){x(ve,ge.sibling),ge=E(ge,Se.children||[]),ge.return=ve,ve=ge;break e}else{x(ve,ge);break}else d(ve,ge);ge=ge.sibling}ge=qf(Se,ve.mode,He),ge.return=ve,ve=ge}return Q(ve);case L:return ct=Se._init,pn(ve,ge,ct(Se._payload),He)}if(we(Se))return Je(ve,ge,Se,He);if(G(Se))return rt(ve,ge,Se,He);fc(ve,Se)}return typeof Se=="string"&&Se!==""||typeof Se=="number"?(Se=""+Se,ge!==null&&ge.tag===6?(x(ve,ge.sibling),ge=E(ge,Se),ge.return=ve,ve=ge):(x(ve,ge),ge=Kf(Se,ve.mode,He),ge.return=ve,ve=ge),Q(ve)):x(ve,ge)}return pn}var ji=bx(!0),yx=bx(!1),hc=Ks(null),pc=null,Ci=null,tf=null;function nf(){tf=Ci=pc=null}function rf(o){var d=hc.current;en(hc),o._currentValue=d}function sf(o,d,x){for(;o!==null;){var w=o.alternate;if((o.childLanes&d)!==d?(o.childLanes|=d,w!==null&&(w.childLanes|=d)):w!==null&&(w.childLanes&d)!==d&&(w.childLanes|=d),o===x)break;o=o.return}}function Ni(o,d){pc=o,tf=Ci=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&d)!==0&&(nr=!0),o.firstContext=null)}function Nr(o){var d=o._currentValue;if(tf!==o)if(o={context:o,memoizedValue:d,next:null},Ci===null){if(pc===null)throw Error(n(308));Ci=o,pc.dependencies={lanes:0,firstContext:o}}else Ci=Ci.next=o;return d}var Ta=null;function af(o){Ta===null?Ta=[o]:Ta.push(o)}function vx(o,d,x,w){var E=d.interleaved;return E===null?(x.next=x,af(d)):(x.next=E.next,E.next=x),d.interleaved=x,As(o,w)}function As(o,d){o.lanes|=d;var x=o.alternate;for(x!==null&&(x.lanes|=d),x=o,o=o.return;o!==null;)o.childLanes|=d,x=o.alternate,x!==null&&(x.childLanes|=d),x=o,o=o.return;return x.tag===3?x.stateNode:null}var Ys=!1;function of(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wx(o,d){o=o.updateQueue,d.updateQueue===o&&(d.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Es(o,d){return{eventTime:o,lane:d,tag:0,payload:null,callback:null,next:null}}function Zs(o,d,x){var w=o.updateQueue;if(w===null)return null;if(w=w.shared,(Dt&2)!==0){var E=w.pending;return E===null?d.next=d:(d.next=E.next,E.next=d),w.pending=d,As(o,x)}return E=w.interleaved,E===null?(d.next=d,af(w)):(d.next=E.next,E.next=d),w.interleaved=d,As(o,x)}function mc(o,d,x){if(d=d.updateQueue,d!==null&&(d=d.shared,(x&4194240)!==0)){var w=d.lanes;w&=o.pendingLanes,x|=w,d.lanes=x,di(o,x)}}function kx(o,d){var x=o.updateQueue,w=o.alternate;if(w!==null&&(w=w.updateQueue,x===w)){var E=null,z=null;if(x=x.firstBaseUpdate,x!==null){do{var Q={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};z===null?E=z=Q:z=z.next=Q,x=x.next}while(x!==null);z===null?E=z=d:z=z.next=d}else E=z=d;x={baseState:w.baseState,firstBaseUpdate:E,lastBaseUpdate:z,shared:w.shared,effects:w.effects},o.updateQueue=x;return}o=x.lastBaseUpdate,o===null?x.firstBaseUpdate=d:o.next=d,x.lastBaseUpdate=d}function xc(o,d,x,w){var E=o.updateQueue;Ys=!1;var z=E.firstBaseUpdate,Q=E.lastBaseUpdate,ie=E.shared.pending;if(ie!==null){E.shared.pending=null;var fe=ie,Ae=fe.next;fe.next=null,Q===null?z=Ae:Q.next=Ae,Q=fe;var Le=o.alternate;Le!==null&&(Le=Le.updateQueue,ie=Le.lastBaseUpdate,ie!==Q&&(ie===null?Le.firstBaseUpdate=Ae:ie.next=Ae,Le.lastBaseUpdate=fe))}if(z!==null){var $e=E.baseState;Q=0,Le=Ae=fe=null,ie=z;do{var ze=ie.lane,Ge=ie.eventTime;if((w&ze)===ze){Le!==null&&(Le=Le.next={eventTime:Ge,lane:0,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null});e:{var Je=o,rt=ie;switch(ze=d,Ge=x,rt.tag){case 1:if(Je=rt.payload,typeof Je=="function"){$e=Je.call(Ge,$e,ze);break e}$e=Je;break e;case 3:Je.flags=Je.flags&-65537|128;case 0:if(Je=rt.payload,ze=typeof Je=="function"?Je.call(Ge,$e,ze):Je,ze==null)break e;$e=O({},$e,ze);break e;case 2:Ys=!0}}ie.callback!==null&&ie.lane!==0&&(o.flags|=64,ze=E.effects,ze===null?E.effects=[ie]:ze.push(ie))}else Ge={eventTime:Ge,lane:ze,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null},Le===null?(Ae=Le=Ge,fe=$e):Le=Le.next=Ge,Q|=ze;if(ie=ie.next,ie===null){if(ie=E.shared.pending,ie===null)break;ze=ie,ie=ze.next,ze.next=null,E.lastBaseUpdate=ze,E.shared.pending=null}}while(!0);if(Le===null&&(fe=$e),E.baseState=fe,E.firstBaseUpdate=Ae,E.lastBaseUpdate=Le,d=E.shared.interleaved,d!==null){E=d;do Q|=E.lane,E=E.next;while(E!==d)}else z===null&&(E.shared.lanes=0);Pa|=Q,o.lanes=Q,o.memoizedState=$e}}function Sx(o,d,x){if(o=d.effects,d.effects=null,o!==null)for(d=0;d<o.length;d++){var w=o[d],E=w.callback;if(E!==null){if(w.callback=null,w=x,typeof E!="function")throw Error(n(191,E));E.call(w)}}}var zo={},ts=Ks(zo),Lo=Ks(zo),Oo=Ks(zo);function Da(o){if(o===zo)throw Error(n(174));return o}function lf(o,d){switch(Yt(Oo,d),Yt(Lo,o),Yt(ts,zo),o=d.nodeType,o){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:Ee(null,"");break;default:o=o===8?d.parentNode:d,d=o.namespaceURI||null,o=o.tagName,d=Ee(d,o)}en(ts),Yt(ts,d)}function _i(){en(ts),en(Lo),en(Oo)}function jx(o){Da(Oo.current);var d=Da(ts.current),x=Ee(d,o.type);d!==x&&(Yt(Lo,o),Yt(ts,x))}function cf(o){Lo.current===o&&(en(ts),en(Lo))}var on=Ks(0);function gc(o){for(var d=o;d!==null;){if(d.tag===13){var x=d.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||x.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===o)break;for(;d.sibling===null;){if(d.return===null||d.return===o)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var df=[];function uf(){for(var o=0;o<df.length;o++)df[o]._workInProgressVersionPrimary=null;df.length=0}var bc=_.ReactCurrentDispatcher,ff=_.ReactCurrentBatchConfig,Ia=0,ln=null,wn=null,Nn=null,yc=!1,$o=!1,Vo=0,NS=0;function Ln(){throw Error(n(321))}function hf(o,d){if(d===null)return!1;for(var x=0;x<d.length&&x<o.length;x++)if(!zr(o[x],d[x]))return!1;return!0}function pf(o,d,x,w,E,z){if(Ia=z,ln=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,bc.current=o===null||o.memoizedState===null?TS:DS,o=x(w,E),$o){z=0;do{if($o=!1,Vo=0,25<=z)throw Error(n(301));z+=1,Nn=wn=null,d.updateQueue=null,bc.current=IS,o=x(w,E)}while($o)}if(bc.current=kc,d=wn!==null&&wn.next!==null,Ia=0,Nn=wn=ln=null,yc=!1,d)throw Error(n(300));return o}function mf(){var o=Vo!==0;return Vo=0,o}function ns(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?ln.memoizedState=Nn=o:Nn=Nn.next=o,Nn}function _r(){if(wn===null){var o=ln.alternate;o=o!==null?o.memoizedState:null}else o=wn.next;var d=Nn===null?ln.memoizedState:Nn.next;if(d!==null)Nn=d,wn=o;else{if(o===null)throw Error(n(310));wn=o,o={memoizedState:wn.memoizedState,baseState:wn.baseState,baseQueue:wn.baseQueue,queue:wn.queue,next:null},Nn===null?ln.memoizedState=Nn=o:Nn=Nn.next=o}return Nn}function Ho(o,d){return typeof d=="function"?d(o):d}function xf(o){var d=_r(),x=d.queue;if(x===null)throw Error(n(311));x.lastRenderedReducer=o;var w=wn,E=w.baseQueue,z=x.pending;if(z!==null){if(E!==null){var Q=E.next;E.next=z.next,z.next=Q}w.baseQueue=E=z,x.pending=null}if(E!==null){z=E.next,w=w.baseState;var ie=Q=null,fe=null,Ae=z;do{var Le=Ae.lane;if((Ia&Le)===Le)fe!==null&&(fe=fe.next={lane:0,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null}),w=Ae.hasEagerState?Ae.eagerState:o(w,Ae.action);else{var $e={lane:Le,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null};fe===null?(ie=fe=$e,Q=w):fe=fe.next=$e,ln.lanes|=Le,Pa|=Le}Ae=Ae.next}while(Ae!==null&&Ae!==z);fe===null?Q=w:fe.next=ie,zr(w,d.memoizedState)||(nr=!0),d.memoizedState=w,d.baseState=Q,d.baseQueue=fe,x.lastRenderedState=w}if(o=x.interleaved,o!==null){E=o;do z=E.lane,ln.lanes|=z,Pa|=z,E=E.next;while(E!==o)}else E===null&&(x.lanes=0);return[d.memoizedState,x.dispatch]}function gf(o){var d=_r(),x=d.queue;if(x===null)throw Error(n(311));x.lastRenderedReducer=o;var w=x.dispatch,E=x.pending,z=d.memoizedState;if(E!==null){x.pending=null;var Q=E=E.next;do z=o(z,Q.action),Q=Q.next;while(Q!==E);zr(z,d.memoizedState)||(nr=!0),d.memoizedState=z,d.baseQueue===null&&(d.baseState=z),x.lastRenderedState=z}return[z,w]}function Cx(){}function Nx(o,d){var x=ln,w=_r(),E=d(),z=!zr(w.memoizedState,E);if(z&&(w.memoizedState=E,nr=!0),w=w.queue,bf(Ex.bind(null,x,w,o),[o]),w.getSnapshot!==d||z||Nn!==null&&Nn.memoizedState.tag&1){if(x.flags|=2048,Uo(9,Ax.bind(null,x,w,E,d),void 0,null),_n===null)throw Error(n(349));(Ia&30)!==0||_x(x,d,E)}return E}function _x(o,d,x){o.flags|=16384,o={getSnapshot:d,value:x},d=ln.updateQueue,d===null?(d={lastEffect:null,stores:null},ln.updateQueue=d,d.stores=[o]):(x=d.stores,x===null?d.stores=[o]:x.push(o))}function Ax(o,d,x,w){d.value=x,d.getSnapshot=w,Tx(d)&&Dx(o)}function Ex(o,d,x){return x(function(){Tx(d)&&Dx(o)})}function Tx(o){var d=o.getSnapshot;o=o.value;try{var x=d();return!zr(o,x)}catch{return!0}}function Dx(o){var d=As(o,1);d!==null&&Hr(d,o,1,-1)}function Ix(o){var d=ns();return typeof o=="function"&&(o=o()),d.memoizedState=d.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:o},d.queue=o,o=o.dispatch=ES.bind(null,ln,o),[d.memoizedState,o]}function Uo(o,d,x,w){return o={tag:o,create:d,destroy:x,deps:w,next:null},d=ln.updateQueue,d===null?(d={lastEffect:null,stores:null},ln.updateQueue=d,d.lastEffect=o.next=o):(x=d.lastEffect,x===null?d.lastEffect=o.next=o:(w=x.next,x.next=o,o.next=w,d.lastEffect=o)),o}function Px(){return _r().memoizedState}function vc(o,d,x,w){var E=ns();ln.flags|=o,E.memoizedState=Uo(1|d,x,void 0,w===void 0?null:w)}function wc(o,d,x,w){var E=_r();w=w===void 0?null:w;var z=void 0;if(wn!==null){var Q=wn.memoizedState;if(z=Q.destroy,w!==null&&hf(w,Q.deps)){E.memoizedState=Uo(d,x,z,w);return}}ln.flags|=o,E.memoizedState=Uo(1|d,x,z,w)}function Mx(o,d){return vc(8390656,8,o,d)}function bf(o,d){return wc(2048,8,o,d)}function Fx(o,d){return wc(4,2,o,d)}function Rx(o,d){return wc(4,4,o,d)}function Bx(o,d){if(typeof d=="function")return o=o(),d(o),function(){d(null)};if(d!=null)return o=o(),d.current=o,function(){d.current=null}}function zx(o,d,x){return x=x!=null?x.concat([o]):null,wc(4,4,Bx.bind(null,d,o),x)}function yf(){}function Lx(o,d){var x=_r();d=d===void 0?null:d;var w=x.memoizedState;return w!==null&&d!==null&&hf(d,w[1])?w[0]:(x.memoizedState=[o,d],o)}function Ox(o,d){var x=_r();d=d===void 0?null:d;var w=x.memoizedState;return w!==null&&d!==null&&hf(d,w[1])?w[0]:(o=o(),x.memoizedState=[o,d],o)}function $x(o,d,x){return(Ia&21)===0?(o.baseState&&(o.baseState=!1,nr=!0),o.memoizedState=x):(zr(x,d)||(x=So(),ln.lanes|=x,Pa|=x,o.baseState=!0),d)}function _S(o,d){var x=Rt;Rt=x!==0&&4>x?x:4,o(!0);var w=ff.transition;ff.transition={};try{o(!1),d()}finally{Rt=x,ff.transition=w}}function Vx(){return _r().memoizedState}function AS(o,d,x){var w=ea(o);if(x={lane:w,action:x,hasEagerState:!1,eagerState:null,next:null},Hx(o))Ux(d,x);else if(x=vx(o,d,x,w),x!==null){var E=Gn();Hr(x,o,w,E),Wx(x,d,w)}}function ES(o,d,x){var w=ea(o),E={lane:w,action:x,hasEagerState:!1,eagerState:null,next:null};if(Hx(o))Ux(d,E);else{var z=o.alternate;if(o.lanes===0&&(z===null||z.lanes===0)&&(z=d.lastRenderedReducer,z!==null))try{var Q=d.lastRenderedState,ie=z(Q,x);if(E.hasEagerState=!0,E.eagerState=ie,zr(ie,Q)){var fe=d.interleaved;fe===null?(E.next=E,af(d)):(E.next=fe.next,fe.next=E),d.interleaved=E;return}}catch{}finally{}x=vx(o,d,E,w),x!==null&&(E=Gn(),Hr(x,o,w,E),Wx(x,d,w))}}function Hx(o){var d=o.alternate;return o===ln||d!==null&&d===ln}function Ux(o,d){$o=yc=!0;var x=o.pending;x===null?d.next=d:(d.next=x.next,x.next=d),o.pending=d}function Wx(o,d,x){if((x&4194240)!==0){var w=d.lanes;w&=o.pendingLanes,x|=w,d.lanes=x,di(o,x)}}var kc={readContext:Nr,useCallback:Ln,useContext:Ln,useEffect:Ln,useImperativeHandle:Ln,useInsertionEffect:Ln,useLayoutEffect:Ln,useMemo:Ln,useReducer:Ln,useRef:Ln,useState:Ln,useDebugValue:Ln,useDeferredValue:Ln,useTransition:Ln,useMutableSource:Ln,useSyncExternalStore:Ln,useId:Ln,unstable_isNewReconciler:!1},TS={readContext:Nr,useCallback:function(o,d){return ns().memoizedState=[o,d===void 0?null:d],o},useContext:Nr,useEffect:Mx,useImperativeHandle:function(o,d,x){return x=x!=null?x.concat([o]):null,vc(4194308,4,Bx.bind(null,d,o),x)},useLayoutEffect:function(o,d){return vc(4194308,4,o,d)},useInsertionEffect:function(o,d){return vc(4,2,o,d)},useMemo:function(o,d){var x=ns();return d=d===void 0?null:d,o=o(),x.memoizedState=[o,d],o},useReducer:function(o,d,x){var w=ns();return d=x!==void 0?x(d):d,w.memoizedState=w.baseState=d,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:d},w.queue=o,o=o.dispatch=AS.bind(null,ln,o),[w.memoizedState,o]},useRef:function(o){var d=ns();return o={current:o},d.memoizedState=o},useState:Ix,useDebugValue:yf,useDeferredValue:function(o){return ns().memoizedState=o},useTransition:function(){var o=Ix(!1),d=o[0];return o=_S.bind(null,o[1]),ns().memoizedState=o,[d,o]},useMutableSource:function(){},useSyncExternalStore:function(o,d,x){var w=ln,E=ns();if(nn){if(x===void 0)throw Error(n(407));x=x()}else{if(x=d(),_n===null)throw Error(n(349));(Ia&30)!==0||_x(w,d,x)}E.memoizedState=x;var z={value:x,getSnapshot:d};return E.queue=z,Mx(Ex.bind(null,w,z,o),[o]),w.flags|=2048,Uo(9,Ax.bind(null,w,z,x,d),void 0,null),x},useId:function(){var o=ns(),d=_n.identifierPrefix;if(nn){var x=_s,w=Ns;x=(w&~(1<<32-Vt(w)-1)).toString(32)+x,d=":"+d+"R"+x,x=Vo++,0<x&&(d+="H"+x.toString(32)),d+=":"}else x=NS++,d=":"+d+"r"+x.toString(32)+":";return o.memoizedState=d},unstable_isNewReconciler:!1},DS={readContext:Nr,useCallback:Lx,useContext:Nr,useEffect:bf,useImperativeHandle:zx,useInsertionEffect:Fx,useLayoutEffect:Rx,useMemo:Ox,useReducer:xf,useRef:Px,useState:function(){return xf(Ho)},useDebugValue:yf,useDeferredValue:function(o){var d=_r();return $x(d,wn.memoizedState,o)},useTransition:function(){var o=xf(Ho)[0],d=_r().memoizedState;return[o,d]},useMutableSource:Cx,useSyncExternalStore:Nx,useId:Vx,unstable_isNewReconciler:!1},IS={readContext:Nr,useCallback:Lx,useContext:Nr,useEffect:bf,useImperativeHandle:zx,useInsertionEffect:Fx,useLayoutEffect:Rx,useMemo:Ox,useReducer:gf,useRef:Px,useState:function(){return gf(Ho)},useDebugValue:yf,useDeferredValue:function(o){var d=_r();return wn===null?d.memoizedState=o:$x(d,wn.memoizedState,o)},useTransition:function(){var o=gf(Ho)[0],d=_r().memoizedState;return[o,d]},useMutableSource:Cx,useSyncExternalStore:Nx,useId:Vx,unstable_isNewReconciler:!1};function Or(o,d){if(o&&o.defaultProps){d=O({},d),o=o.defaultProps;for(var x in o)d[x]===void 0&&(d[x]=o[x]);return d}return d}function vf(o,d,x,w){d=o.memoizedState,x=x(w,d),x=x==null?d:O({},d,x),o.memoizedState=x,o.lanes===0&&(o.updateQueue.baseState=x)}var Sc={isMounted:function(o){return(o=o._reactInternals)?Fr(o)===o:!1},enqueueSetState:function(o,d,x){o=o._reactInternals;var w=Gn(),E=ea(o),z=Es(w,E);z.payload=d,x!=null&&(z.callback=x),d=Zs(o,z,E),d!==null&&(Hr(d,o,E,w),mc(d,o,E))},enqueueReplaceState:function(o,d,x){o=o._reactInternals;var w=Gn(),E=ea(o),z=Es(w,E);z.tag=1,z.payload=d,x!=null&&(z.callback=x),d=Zs(o,z,E),d!==null&&(Hr(d,o,E,w),mc(d,o,E))},enqueueForceUpdate:function(o,d){o=o._reactInternals;var x=Gn(),w=ea(o),E=Es(x,w);E.tag=2,d!=null&&(E.callback=d),d=Zs(o,E,w),d!==null&&(Hr(d,o,w,x),mc(d,o,w))}};function Kx(o,d,x,w,E,z,Q){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(w,z,Q):d.prototype&&d.prototype.isPureReactComponent?!To(x,w)||!To(E,z):!0}function qx(o,d,x){var w=!1,E=qs,z=d.contextType;return typeof z=="object"&&z!==null?z=Nr(z):(E=tr(d)?_a:zn.current,w=d.contextTypes,z=(w=w!=null)?vi(o,E):qs),d=new d(x,z),o.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Sc,o.stateNode=d,d._reactInternals=o,w&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=E,o.__reactInternalMemoizedMaskedChildContext=z),d}function Gx(o,d,x,w){o=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(x,w),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(x,w),d.state!==o&&Sc.enqueueReplaceState(d,d.state,null)}function wf(o,d,x,w){var E=o.stateNode;E.props=x,E.state=o.memoizedState,E.refs={},of(o);var z=d.contextType;typeof z=="object"&&z!==null?E.context=Nr(z):(z=tr(d)?_a:zn.current,E.context=vi(o,z)),E.state=o.memoizedState,z=d.getDerivedStateFromProps,typeof z=="function"&&(vf(o,d,z,x),E.state=o.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(d=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),d!==E.state&&Sc.enqueueReplaceState(E,E.state,null),xc(o,x,E,w),E.state=o.memoizedState),typeof E.componentDidMount=="function"&&(o.flags|=4194308)}function Ai(o,d){try{var x="",w=d;do x+=Y(w),w=w.return;while(w);var E=x}catch(z){E=`
Error generating stack: `+z.message+`
`+z.stack}return{value:o,source:d,stack:E,digest:null}}function kf(o,d,x){return{value:o,source:null,stack:x??null,digest:d??null}}function Sf(o,d){try{console.error(d.value)}catch(x){setTimeout(function(){throw x})}}var PS=typeof WeakMap=="function"?WeakMap:Map;function Yx(o,d,x){x=Es(-1,x),x.tag=3,x.payload={element:null};var w=d.value;return x.callback=function(){Tc||(Tc=!0,zf=w),Sf(o,d)},x}function Zx(o,d,x){x=Es(-1,x),x.tag=3;var w=o.type.getDerivedStateFromError;if(typeof w=="function"){var E=d.value;x.payload=function(){return w(E)},x.callback=function(){Sf(o,d)}}var z=o.stateNode;return z!==null&&typeof z.componentDidCatch=="function"&&(x.callback=function(){Sf(o,d),typeof w!="function"&&(Xs===null?Xs=new Set([this]):Xs.add(this));var Q=d.stack;this.componentDidCatch(d.value,{componentStack:Q!==null?Q:""})}),x}function Qx(o,d,x){var w=o.pingCache;if(w===null){w=o.pingCache=new PS;var E=new Set;w.set(d,E)}else E=w.get(d),E===void 0&&(E=new Set,w.set(d,E));E.has(x)||(E.add(x),o=qS.bind(null,o,d,x),d.then(o,o))}function Xx(o){do{var d;if((d=o.tag===13)&&(d=o.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return o;o=o.return}while(o!==null);return null}function Jx(o,d,x,w,E){return(o.mode&1)===0?(o===d?o.flags|=65536:(o.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(d=Es(-1,1),d.tag=2,Zs(x,d,1))),x.lanes|=1),o):(o.flags|=65536,o.lanes=E,o)}var MS=_.ReactCurrentOwner,nr=!1;function qn(o,d,x,w){d.child=o===null?yx(d,null,x,w):ji(d,o.child,x,w)}function eg(o,d,x,w,E){x=x.render;var z=d.ref;return Ni(d,E),w=pf(o,d,x,w,z,E),x=mf(),o!==null&&!nr?(d.updateQueue=o.updateQueue,d.flags&=-2053,o.lanes&=~E,Ts(o,d,E)):(nn&&x&&Zu(d),d.flags|=1,qn(o,d,w,E),d.child)}function tg(o,d,x,w,E){if(o===null){var z=x.type;return typeof z=="function"&&!Wf(z)&&z.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(d.tag=15,d.type=z,ng(o,d,z,w,E)):(o=Rc(x.type,null,w,d,d.mode,E),o.ref=d.ref,o.return=d,d.child=o)}if(z=o.child,(o.lanes&E)===0){var Q=z.memoizedProps;if(x=x.compare,x=x!==null?x:To,x(Q,w)&&o.ref===d.ref)return Ts(o,d,E)}return d.flags|=1,o=na(z,w),o.ref=d.ref,o.return=d,d.child=o}function ng(o,d,x,w,E){if(o!==null){var z=o.memoizedProps;if(To(z,w)&&o.ref===d.ref)if(nr=!1,d.pendingProps=w=z,(o.lanes&E)!==0)(o.flags&131072)!==0&&(nr=!0);else return d.lanes=o.lanes,Ts(o,d,E)}return jf(o,d,x,w,E)}function rg(o,d,x){var w=d.pendingProps,E=w.children,z=o!==null?o.memoizedState:null;if(w.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yt(Ti,xr),xr|=x;else{if((x&1073741824)===0)return o=z!==null?z.baseLanes|x:x,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:o,cachePool:null,transitions:null},d.updateQueue=null,Yt(Ti,xr),xr|=o,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=z!==null?z.baseLanes:x,Yt(Ti,xr),xr|=w}else z!==null?(w=z.baseLanes|x,d.memoizedState=null):w=x,Yt(Ti,xr),xr|=w;return qn(o,d,E,x),d.child}function sg(o,d){var x=d.ref;(o===null&&x!==null||o!==null&&o.ref!==x)&&(d.flags|=512,d.flags|=2097152)}function jf(o,d,x,w,E){var z=tr(x)?_a:zn.current;return z=vi(d,z),Ni(d,E),x=pf(o,d,x,w,z,E),w=mf(),o!==null&&!nr?(d.updateQueue=o.updateQueue,d.flags&=-2053,o.lanes&=~E,Ts(o,d,E)):(nn&&w&&Zu(d),d.flags|=1,qn(o,d,x,E),d.child)}function ag(o,d,x,w,E){if(tr(x)){var z=!0;oc(d)}else z=!1;if(Ni(d,E),d.stateNode===null)Cc(o,d),qx(d,x,w),wf(d,x,w,E),w=!0;else if(o===null){var Q=d.stateNode,ie=d.memoizedProps;Q.props=ie;var fe=Q.context,Ae=x.contextType;typeof Ae=="object"&&Ae!==null?Ae=Nr(Ae):(Ae=tr(x)?_a:zn.current,Ae=vi(d,Ae));var Le=x.getDerivedStateFromProps,$e=typeof Le=="function"||typeof Q.getSnapshotBeforeUpdate=="function";$e||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(ie!==w||fe!==Ae)&&Gx(d,Q,w,Ae),Ys=!1;var ze=d.memoizedState;Q.state=ze,xc(d,w,Q,E),fe=d.memoizedState,ie!==w||ze!==fe||er.current||Ys?(typeof Le=="function"&&(vf(d,x,Le,w),fe=d.memoizedState),(ie=Ys||Kx(d,x,ie,w,ze,fe,Ae))?($e||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount()),typeof Q.componentDidMount=="function"&&(d.flags|=4194308)):(typeof Q.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=w,d.memoizedState=fe),Q.props=w,Q.state=fe,Q.context=Ae,w=ie):(typeof Q.componentDidMount=="function"&&(d.flags|=4194308),w=!1)}else{Q=d.stateNode,wx(o,d),ie=d.memoizedProps,Ae=d.type===d.elementType?ie:Or(d.type,ie),Q.props=Ae,$e=d.pendingProps,ze=Q.context,fe=x.contextType,typeof fe=="object"&&fe!==null?fe=Nr(fe):(fe=tr(x)?_a:zn.current,fe=vi(d,fe));var Ge=x.getDerivedStateFromProps;(Le=typeof Ge=="function"||typeof Q.getSnapshotBeforeUpdate=="function")||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(ie!==$e||ze!==fe)&&Gx(d,Q,w,fe),Ys=!1,ze=d.memoizedState,Q.state=ze,xc(d,w,Q,E);var Je=d.memoizedState;ie!==$e||ze!==Je||er.current||Ys?(typeof Ge=="function"&&(vf(d,x,Ge,w),Je=d.memoizedState),(Ae=Ys||Kx(d,x,Ae,w,ze,Je,fe)||!1)?(Le||typeof Q.UNSAFE_componentWillUpdate!="function"&&typeof Q.componentWillUpdate!="function"||(typeof Q.componentWillUpdate=="function"&&Q.componentWillUpdate(w,Je,fe),typeof Q.UNSAFE_componentWillUpdate=="function"&&Q.UNSAFE_componentWillUpdate(w,Je,fe)),typeof Q.componentDidUpdate=="function"&&(d.flags|=4),typeof Q.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof Q.componentDidUpdate!="function"||ie===o.memoizedProps&&ze===o.memoizedState||(d.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||ie===o.memoizedProps&&ze===o.memoizedState||(d.flags|=1024),d.memoizedProps=w,d.memoizedState=Je),Q.props=w,Q.state=Je,Q.context=fe,w=Ae):(typeof Q.componentDidUpdate!="function"||ie===o.memoizedProps&&ze===o.memoizedState||(d.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||ie===o.memoizedProps&&ze===o.memoizedState||(d.flags|=1024),w=!1)}return Cf(o,d,x,w,z,E)}function Cf(o,d,x,w,E,z){sg(o,d);var Q=(d.flags&128)!==0;if(!w&&!Q)return E&&dx(d,x,!1),Ts(o,d,z);w=d.stateNode,MS.current=d;var ie=Q&&typeof x.getDerivedStateFromError!="function"?null:w.render();return d.flags|=1,o!==null&&Q?(d.child=ji(d,o.child,null,z),d.child=ji(d,null,ie,z)):qn(o,d,ie,z),d.memoizedState=w.state,E&&dx(d,x,!0),d.child}function ig(o){var d=o.stateNode;d.pendingContext?lx(o,d.pendingContext,d.pendingContext!==d.context):d.context&&lx(o,d.context,!1),lf(o,d.containerInfo)}function og(o,d,x,w,E){return Si(),ef(E),d.flags|=256,qn(o,d,x,w),d.child}var Nf={dehydrated:null,treeContext:null,retryLane:0};function _f(o){return{baseLanes:o,cachePool:null,transitions:null}}function lg(o,d,x){var w=d.pendingProps,E=on.current,z=!1,Q=(d.flags&128)!==0,ie;if((ie=Q)||(ie=o!==null&&o.memoizedState===null?!1:(E&2)!==0),ie?(z=!0,d.flags&=-129):(o===null||o.memoizedState!==null)&&(E|=1),Yt(on,E&1),o===null)return Ju(d),o=d.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((d.mode&1)===0?d.lanes=1:o.data==="$!"?d.lanes=8:d.lanes=1073741824,null):(Q=w.children,o=w.fallback,z?(w=d.mode,z=d.child,Q={mode:"hidden",children:Q},(w&1)===0&&z!==null?(z.childLanes=0,z.pendingProps=Q):z=Bc(Q,w,0,null),o=Ba(o,w,x,null),z.return=d,o.return=d,z.sibling=o,d.child=z,d.child.memoizedState=_f(x),d.memoizedState=Nf,o):Af(d,Q));if(E=o.memoizedState,E!==null&&(ie=E.dehydrated,ie!==null))return FS(o,d,Q,w,ie,E,x);if(z){z=w.fallback,Q=d.mode,E=o.child,ie=E.sibling;var fe={mode:"hidden",children:w.children};return(Q&1)===0&&d.child!==E?(w=d.child,w.childLanes=0,w.pendingProps=fe,d.deletions=null):(w=na(E,fe),w.subtreeFlags=E.subtreeFlags&14680064),ie!==null?z=na(ie,z):(z=Ba(z,Q,x,null),z.flags|=2),z.return=d,w.return=d,w.sibling=z,d.child=w,w=z,z=d.child,Q=o.child.memoizedState,Q=Q===null?_f(x):{baseLanes:Q.baseLanes|x,cachePool:null,transitions:Q.transitions},z.memoizedState=Q,z.childLanes=o.childLanes&~x,d.memoizedState=Nf,w}return z=o.child,o=z.sibling,w=na(z,{mode:"visible",children:w.children}),(d.mode&1)===0&&(w.lanes=x),w.return=d,w.sibling=null,o!==null&&(x=d.deletions,x===null?(d.deletions=[o],d.flags|=16):x.push(o)),d.child=w,d.memoizedState=null,w}function Af(o,d){return d=Bc({mode:"visible",children:d},o.mode,0,null),d.return=o,o.child=d}function jc(o,d,x,w){return w!==null&&ef(w),ji(d,o.child,null,x),o=Af(d,d.pendingProps.children),o.flags|=2,d.memoizedState=null,o}function FS(o,d,x,w,E,z,Q){if(x)return d.flags&256?(d.flags&=-257,w=kf(Error(n(422))),jc(o,d,Q,w)):d.memoizedState!==null?(d.child=o.child,d.flags|=128,null):(z=w.fallback,E=d.mode,w=Bc({mode:"visible",children:w.children},E,0,null),z=Ba(z,E,Q,null),z.flags|=2,w.return=d,z.return=d,w.sibling=z,d.child=w,(d.mode&1)!==0&&ji(d,o.child,null,Q),d.child.memoizedState=_f(Q),d.memoizedState=Nf,z);if((d.mode&1)===0)return jc(o,d,Q,null);if(E.data==="$!"){if(w=E.nextSibling&&E.nextSibling.dataset,w)var ie=w.dgst;return w=ie,z=Error(n(419)),w=kf(z,w,void 0),jc(o,d,Q,w)}if(ie=(Q&o.childLanes)!==0,nr||ie){if(w=_n,w!==null){switch(Q&-Q){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=(E&(w.suspendedLanes|Q))!==0?0:E,E!==0&&E!==z.retryLane&&(z.retryLane=E,As(o,E),Hr(w,o,E,-1))}return Uf(),w=kf(Error(n(421))),jc(o,d,Q,w)}return E.data==="$?"?(d.flags|=128,d.child=o.child,d=GS.bind(null,o),E._reactRetry=d,null):(o=z.treeContext,mr=Ws(E.nextSibling),pr=d,nn=!0,Lr=null,o!==null&&(jr[Cr++]=Ns,jr[Cr++]=_s,jr[Cr++]=Aa,Ns=o.id,_s=o.overflow,Aa=d),d=Af(d,w.children),d.flags|=4096,d)}function cg(o,d,x){o.lanes|=d;var w=o.alternate;w!==null&&(w.lanes|=d),sf(o.return,d,x)}function Ef(o,d,x,w,E){var z=o.memoizedState;z===null?o.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:w,tail:x,tailMode:E}:(z.isBackwards=d,z.rendering=null,z.renderingStartTime=0,z.last=w,z.tail=x,z.tailMode=E)}function dg(o,d,x){var w=d.pendingProps,E=w.revealOrder,z=w.tail;if(qn(o,d,w.children,x),w=on.current,(w&2)!==0)w=w&1|2,d.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=d.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&cg(o,x,d);else if(o.tag===19)cg(o,x,d);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===d)break e;for(;o.sibling===null;){if(o.return===null||o.return===d)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}w&=1}if(Yt(on,w),(d.mode&1)===0)d.memoizedState=null;else switch(E){case"forwards":for(x=d.child,E=null;x!==null;)o=x.alternate,o!==null&&gc(o)===null&&(E=x),x=x.sibling;x=E,x===null?(E=d.child,d.child=null):(E=x.sibling,x.sibling=null),Ef(d,!1,E,x,z);break;case"backwards":for(x=null,E=d.child,d.child=null;E!==null;){if(o=E.alternate,o!==null&&gc(o)===null){d.child=E;break}o=E.sibling,E.sibling=x,x=E,E=o}Ef(d,!0,x,null,z);break;case"together":Ef(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Cc(o,d){(d.mode&1)===0&&o!==null&&(o.alternate=null,d.alternate=null,d.flags|=2)}function Ts(o,d,x){if(o!==null&&(d.dependencies=o.dependencies),Pa|=d.lanes,(x&d.childLanes)===0)return null;if(o!==null&&d.child!==o.child)throw Error(n(153));if(d.child!==null){for(o=d.child,x=na(o,o.pendingProps),d.child=x,x.return=d;o.sibling!==null;)o=o.sibling,x=x.sibling=na(o,o.pendingProps),x.return=d;x.sibling=null}return d.child}function RS(o,d,x){switch(d.tag){case 3:ig(d),Si();break;case 5:jx(d);break;case 1:tr(d.type)&&oc(d);break;case 4:lf(d,d.stateNode.containerInfo);break;case 10:var w=d.type._context,E=d.memoizedProps.value;Yt(hc,w._currentValue),w._currentValue=E;break;case 13:if(w=d.memoizedState,w!==null)return w.dehydrated!==null?(Yt(on,on.current&1),d.flags|=128,null):(x&d.child.childLanes)!==0?lg(o,d,x):(Yt(on,on.current&1),o=Ts(o,d,x),o!==null?o.sibling:null);Yt(on,on.current&1);break;case 19:if(w=(x&d.childLanes)!==0,(o.flags&128)!==0){if(w)return dg(o,d,x);d.flags|=128}if(E=d.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Yt(on,on.current),w)break;return null;case 22:case 23:return d.lanes=0,rg(o,d,x)}return Ts(o,d,x)}var ug,Tf,fg,hg;ug=function(o,d){for(var x=d.child;x!==null;){if(x.tag===5||x.tag===6)o.appendChild(x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===d)break;for(;x.sibling===null;){if(x.return===null||x.return===d)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},Tf=function(){},fg=function(o,d,x,w){var E=o.memoizedProps;if(E!==w){o=d.stateNode,Da(ts.current);var z=null;switch(x){case"input":E=F(o,E),w=F(o,w),z=[];break;case"select":E=O({},E,{value:void 0}),w=O({},w,{value:void 0}),z=[];break;case"textarea":E=ue(o,E),w=ue(o,w),z=[];break;default:typeof E.onClick!="function"&&typeof w.onClick=="function"&&(o.onclick=sc)}Ke(x,w);var Q;x=null;for(Ae in E)if(!w.hasOwnProperty(Ae)&&E.hasOwnProperty(Ae)&&E[Ae]!=null)if(Ae==="style"){var ie=E[Ae];for(Q in ie)ie.hasOwnProperty(Q)&&(x||(x={}),x[Q]="")}else Ae!=="dangerouslySetInnerHTML"&&Ae!=="children"&&Ae!=="suppressContentEditableWarning"&&Ae!=="suppressHydrationWarning"&&Ae!=="autoFocus"&&(a.hasOwnProperty(Ae)?z||(z=[]):(z=z||[]).push(Ae,null));for(Ae in w){var fe=w[Ae];if(ie=E?.[Ae],w.hasOwnProperty(Ae)&&fe!==ie&&(fe!=null||ie!=null))if(Ae==="style")if(ie){for(Q in ie)!ie.hasOwnProperty(Q)||fe&&fe.hasOwnProperty(Q)||(x||(x={}),x[Q]="");for(Q in fe)fe.hasOwnProperty(Q)&&ie[Q]!==fe[Q]&&(x||(x={}),x[Q]=fe[Q])}else x||(z||(z=[]),z.push(Ae,x)),x=fe;else Ae==="dangerouslySetInnerHTML"?(fe=fe?fe.__html:void 0,ie=ie?ie.__html:void 0,fe!=null&&ie!==fe&&(z=z||[]).push(Ae,fe)):Ae==="children"?typeof fe!="string"&&typeof fe!="number"||(z=z||[]).push(Ae,""+fe):Ae!=="suppressContentEditableWarning"&&Ae!=="suppressHydrationWarning"&&(a.hasOwnProperty(Ae)?(fe!=null&&Ae==="onScroll"&&Jt("scroll",o),z||ie===fe||(z=[])):(z=z||[]).push(Ae,fe))}x&&(z=z||[]).push("style",x);var Ae=z;(d.updateQueue=Ae)&&(d.flags|=4)}},hg=function(o,d,x,w){x!==w&&(d.flags|=4)};function Wo(o,d){if(!nn)switch(o.tailMode){case"hidden":d=o.tail;for(var x=null;d!==null;)d.alternate!==null&&(x=d),d=d.sibling;x===null?o.tail=null:x.sibling=null;break;case"collapsed":x=o.tail;for(var w=null;x!==null;)x.alternate!==null&&(w=x),x=x.sibling;w===null?d||o.tail===null?o.tail=null:o.tail.sibling=null:w.sibling=null}}function On(o){var d=o.alternate!==null&&o.alternate.child===o.child,x=0,w=0;if(d)for(var E=o.child;E!==null;)x|=E.lanes|E.childLanes,w|=E.subtreeFlags&14680064,w|=E.flags&14680064,E.return=o,E=E.sibling;else for(E=o.child;E!==null;)x|=E.lanes|E.childLanes,w|=E.subtreeFlags,w|=E.flags,E.return=o,E=E.sibling;return o.subtreeFlags|=w,o.childLanes=x,d}function BS(o,d,x){var w=d.pendingProps;switch(Qu(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return On(d),null;case 1:return tr(d.type)&&ic(),On(d),null;case 3:return w=d.stateNode,_i(),en(er),en(zn),uf(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(o===null||o.child===null)&&(uc(d)?d.flags|=4:o===null||o.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Lr!==null&&($f(Lr),Lr=null))),Tf(o,d),On(d),null;case 5:cf(d);var E=Da(Oo.current);if(x=d.type,o!==null&&d.stateNode!=null)fg(o,d,x,w,E),o.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!w){if(d.stateNode===null)throw Error(n(166));return On(d),null}if(o=Da(ts.current),uc(d)){w=d.stateNode,x=d.type;var z=d.memoizedProps;switch(w[es]=d,w[Fo]=z,o=(d.mode&1)!==0,x){case"dialog":Jt("cancel",w),Jt("close",w);break;case"iframe":case"object":case"embed":Jt("load",w);break;case"video":case"audio":for(E=0;E<Io.length;E++)Jt(Io[E],w);break;case"source":Jt("error",w);break;case"img":case"image":case"link":Jt("error",w),Jt("load",w);break;case"details":Jt("toggle",w);break;case"input":le(w,z),Jt("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!z.multiple},Jt("invalid",w);break;case"textarea":pe(w,z),Jt("invalid",w)}Ke(x,z),E=null;for(var Q in z)if(z.hasOwnProperty(Q)){var ie=z[Q];Q==="children"?typeof ie=="string"?w.textContent!==ie&&(z.suppressHydrationWarning!==!0&&rc(w.textContent,ie,o),E=["children",ie]):typeof ie=="number"&&w.textContent!==""+ie&&(z.suppressHydrationWarning!==!0&&rc(w.textContent,ie,o),E=["children",""+ie]):a.hasOwnProperty(Q)&&ie!=null&&Q==="onScroll"&&Jt("scroll",w)}switch(x){case"input":be(w),ne(w,z,!0);break;case"textarea":be(w),Ne(w);break;case"select":case"option":break;default:typeof z.onClick=="function"&&(w.onclick=sc)}w=E,d.updateQueue=w,w!==null&&(d.flags|=4)}else{Q=E.nodeType===9?E:E.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=he(x)),o==="http://www.w3.org/1999/xhtml"?x==="script"?(o=Q.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof w.is=="string"?o=Q.createElement(x,{is:w.is}):(o=Q.createElement(x),x==="select"&&(Q=o,w.multiple?Q.multiple=!0:w.size&&(Q.size=w.size))):o=Q.createElementNS(o,x),o[es]=d,o[Fo]=w,ug(o,d,!1,!1),d.stateNode=o;e:{switch(Q=Ze(x,w),x){case"dialog":Jt("cancel",o),Jt("close",o),E=w;break;case"iframe":case"object":case"embed":Jt("load",o),E=w;break;case"video":case"audio":for(E=0;E<Io.length;E++)Jt(Io[E],o);E=w;break;case"source":Jt("error",o),E=w;break;case"img":case"image":case"link":Jt("error",o),Jt("load",o),E=w;break;case"details":Jt("toggle",o),E=w;break;case"input":le(o,w),E=F(o,w),Jt("invalid",o);break;case"option":E=w;break;case"select":o._wrapperState={wasMultiple:!!w.multiple},E=O({},w,{value:void 0}),Jt("invalid",o);break;case"textarea":pe(o,w),E=ue(o,w),Jt("invalid",o);break;default:E=w}Ke(x,E),ie=E;for(z in ie)if(ie.hasOwnProperty(z)){var fe=ie[z];z==="style"?Me(o,fe):z==="dangerouslySetInnerHTML"?(fe=fe?fe.__html:void 0,fe!=null&&qe(o,fe)):z==="children"?typeof fe=="string"?(x!=="textarea"||fe!=="")&&Ye(o,fe):typeof fe=="number"&&Ye(o,""+fe):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(a.hasOwnProperty(z)?fe!=null&&z==="onScroll"&&Jt("scroll",o):fe!=null&&C(o,z,fe,Q))}switch(x){case"input":be(o),ne(o,w,!1);break;case"textarea":be(o),Ne(o);break;case"option":w.value!=null&&o.setAttribute("value",""+X(w.value));break;case"select":o.multiple=!!w.multiple,z=w.value,z!=null?Ce(o,!!w.multiple,z,!1):w.defaultValue!=null&&Ce(o,!!w.multiple,w.defaultValue,!0);break;default:typeof E.onClick=="function"&&(o.onclick=sc)}switch(x){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return On(d),null;case 6:if(o&&d.stateNode!=null)hg(o,d,o.memoizedProps,w);else{if(typeof w!="string"&&d.stateNode===null)throw Error(n(166));if(x=Da(Oo.current),Da(ts.current),uc(d)){if(w=d.stateNode,x=d.memoizedProps,w[es]=d,(z=w.nodeValue!==x)&&(o=pr,o!==null))switch(o.tag){case 3:rc(w.nodeValue,x,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&rc(w.nodeValue,x,(o.mode&1)!==0)}z&&(d.flags|=4)}else w=(x.nodeType===9?x:x.ownerDocument).createTextNode(w),w[es]=d,d.stateNode=w}return On(d),null;case 13:if(en(on),w=d.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(nn&&mr!==null&&(d.mode&1)!==0&&(d.flags&128)===0)xx(),Si(),d.flags|=98560,z=!1;else if(z=uc(d),w!==null&&w.dehydrated!==null){if(o===null){if(!z)throw Error(n(318));if(z=d.memoizedState,z=z!==null?z.dehydrated:null,!z)throw Error(n(317));z[es]=d}else Si(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;On(d),z=!1}else Lr!==null&&($f(Lr),Lr=null),z=!0;if(!z)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=x,d):(w=w!==null,w!==(o!==null&&o.memoizedState!==null)&&w&&(d.child.flags|=8192,(d.mode&1)!==0&&(o===null||(on.current&1)!==0?kn===0&&(kn=3):Uf())),d.updateQueue!==null&&(d.flags|=4),On(d),null);case 4:return _i(),Tf(o,d),o===null&&Po(d.stateNode.containerInfo),On(d),null;case 10:return rf(d.type._context),On(d),null;case 17:return tr(d.type)&&ic(),On(d),null;case 19:if(en(on),z=d.memoizedState,z===null)return On(d),null;if(w=(d.flags&128)!==0,Q=z.rendering,Q===null)if(w)Wo(z,!1);else{if(kn!==0||o!==null&&(o.flags&128)!==0)for(o=d.child;o!==null;){if(Q=gc(o),Q!==null){for(d.flags|=128,Wo(z,!1),w=Q.updateQueue,w!==null&&(d.updateQueue=w,d.flags|=4),d.subtreeFlags=0,w=x,x=d.child;x!==null;)z=x,o=w,z.flags&=14680066,Q=z.alternate,Q===null?(z.childLanes=0,z.lanes=o,z.child=null,z.subtreeFlags=0,z.memoizedProps=null,z.memoizedState=null,z.updateQueue=null,z.dependencies=null,z.stateNode=null):(z.childLanes=Q.childLanes,z.lanes=Q.lanes,z.child=Q.child,z.subtreeFlags=0,z.deletions=null,z.memoizedProps=Q.memoizedProps,z.memoizedState=Q.memoizedState,z.updateQueue=Q.updateQueue,z.type=Q.type,o=Q.dependencies,z.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),x=x.sibling;return Yt(on,on.current&1|2),d.child}o=o.sibling}z.tail!==null&&Wt()>Di&&(d.flags|=128,w=!0,Wo(z,!1),d.lanes=4194304)}else{if(!w)if(o=gc(Q),o!==null){if(d.flags|=128,w=!0,x=o.updateQueue,x!==null&&(d.updateQueue=x,d.flags|=4),Wo(z,!0),z.tail===null&&z.tailMode==="hidden"&&!Q.alternate&&!nn)return On(d),null}else 2*Wt()-z.renderingStartTime>Di&&x!==1073741824&&(d.flags|=128,w=!0,Wo(z,!1),d.lanes=4194304);z.isBackwards?(Q.sibling=d.child,d.child=Q):(x=z.last,x!==null?x.sibling=Q:d.child=Q,z.last=Q)}return z.tail!==null?(d=z.tail,z.rendering=d,z.tail=d.sibling,z.renderingStartTime=Wt(),d.sibling=null,x=on.current,Yt(on,w?x&1|2:x&1),d):(On(d),null);case 22:case 23:return Hf(),w=d.memoizedState!==null,o!==null&&o.memoizedState!==null!==w&&(d.flags|=8192),w&&(d.mode&1)!==0?(xr&1073741824)!==0&&(On(d),d.subtreeFlags&6&&(d.flags|=8192)):On(d),null;case 24:return null;case 25:return null}throw Error(n(156,d.tag))}function zS(o,d){switch(Qu(d),d.tag){case 1:return tr(d.type)&&ic(),o=d.flags,o&65536?(d.flags=o&-65537|128,d):null;case 3:return _i(),en(er),en(zn),uf(),o=d.flags,(o&65536)!==0&&(o&128)===0?(d.flags=o&-65537|128,d):null;case 5:return cf(d),null;case 13:if(en(on),o=d.memoizedState,o!==null&&o.dehydrated!==null){if(d.alternate===null)throw Error(n(340));Si()}return o=d.flags,o&65536?(d.flags=o&-65537|128,d):null;case 19:return en(on),null;case 4:return _i(),null;case 10:return rf(d.type._context),null;case 22:case 23:return Hf(),null;case 24:return null;default:return null}}var Nc=!1,$n=!1,LS=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function Ei(o,d){var x=o.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(w){un(o,d,w)}else x.current=null}function Df(o,d,x){try{x()}catch(w){un(o,d,w)}}var pg=!1;function OS(o,d){if(Vu=Mt,o=K0(),Mu(o)){if("selectionStart"in o)var x={start:o.selectionStart,end:o.selectionEnd};else e:{x=(x=o.ownerDocument)&&x.defaultView||window;var w=x.getSelection&&x.getSelection();if(w&&w.rangeCount!==0){x=w.anchorNode;var E=w.anchorOffset,z=w.focusNode;w=w.focusOffset;try{x.nodeType,z.nodeType}catch{x=null;break e}var Q=0,ie=-1,fe=-1,Ae=0,Le=0,$e=o,ze=null;t:for(;;){for(var Ge;$e!==x||E!==0&&$e.nodeType!==3||(ie=Q+E),$e!==z||w!==0&&$e.nodeType!==3||(fe=Q+w),$e.nodeType===3&&(Q+=$e.nodeValue.length),(Ge=$e.firstChild)!==null;)ze=$e,$e=Ge;for(;;){if($e===o)break t;if(ze===x&&++Ae===E&&(ie=Q),ze===z&&++Le===w&&(fe=Q),(Ge=$e.nextSibling)!==null)break;$e=ze,ze=$e.parentNode}$e=Ge}x=ie===-1||fe===-1?null:{start:ie,end:fe}}else x=null}x=x||{start:0,end:0}}else x=null;for(Hu={focusedElem:o,selectionRange:x},Mt=!1,Xe=d;Xe!==null;)if(d=Xe,o=d.child,(d.subtreeFlags&1028)!==0&&o!==null)o.return=d,Xe=o;else for(;Xe!==null;){d=Xe;try{var Je=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(Je!==null){var rt=Je.memoizedProps,pn=Je.memoizedState,ve=d.stateNode,ge=ve.getSnapshotBeforeUpdate(d.elementType===d.type?rt:Or(d.type,rt),pn);ve.__reactInternalSnapshotBeforeUpdate=ge}break;case 3:var Se=d.stateNode.containerInfo;Se.nodeType===1?Se.textContent="":Se.nodeType===9&&Se.documentElement&&Se.removeChild(Se.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(He){un(d,d.return,He)}if(o=d.sibling,o!==null){o.return=d.return,Xe=o;break}Xe=d.return}return Je=pg,pg=!1,Je}function Ko(o,d,x){var w=d.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var E=w=w.next;do{if((E.tag&o)===o){var z=E.destroy;E.destroy=void 0,z!==void 0&&Df(d,x,z)}E=E.next}while(E!==w)}}function _c(o,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var x=d=d.next;do{if((x.tag&o)===o){var w=x.create;x.destroy=w()}x=x.next}while(x!==d)}}function If(o){var d=o.ref;if(d!==null){var x=o.stateNode;switch(o.tag){case 5:o=x;break;default:o=x}typeof d=="function"?d(o):d.current=o}}function mg(o){var d=o.alternate;d!==null&&(o.alternate=null,mg(d)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(d=o.stateNode,d!==null&&(delete d[es],delete d[Fo],delete d[qu],delete d[kS],delete d[SS])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function xg(o){return o.tag===5||o.tag===3||o.tag===4}function gg(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||xg(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Pf(o,d,x){var w=o.tag;if(w===5||w===6)o=o.stateNode,d?x.nodeType===8?x.parentNode.insertBefore(o,d):x.insertBefore(o,d):(x.nodeType===8?(d=x.parentNode,d.insertBefore(o,x)):(d=x,d.appendChild(o)),x=x._reactRootContainer,x!=null||d.onclick!==null||(d.onclick=sc));else if(w!==4&&(o=o.child,o!==null))for(Pf(o,d,x),o=o.sibling;o!==null;)Pf(o,d,x),o=o.sibling}function Mf(o,d,x){var w=o.tag;if(w===5||w===6)o=o.stateNode,d?x.insertBefore(o,d):x.appendChild(o);else if(w!==4&&(o=o.child,o!==null))for(Mf(o,d,x),o=o.sibling;o!==null;)Mf(o,d,x),o=o.sibling}var Tn=null,$r=!1;function Qs(o,d,x){for(x=x.child;x!==null;)bg(o,d,x),x=x.sibling}function bg(o,d,x){if(Sr&&typeof Sr.onCommitFiberUnmount=="function")try{Sr.onCommitFiberUnmount(ai,x)}catch{}switch(x.tag){case 5:$n||Ei(x,d);case 6:var w=Tn,E=$r;Tn=null,Qs(o,d,x),Tn=w,$r=E,Tn!==null&&($r?(o=Tn,x=x.stateNode,o.nodeType===8?o.parentNode.removeChild(x):o.removeChild(x)):Tn.removeChild(x.stateNode));break;case 18:Tn!==null&&($r?(o=Tn,x=x.stateNode,o.nodeType===8?Ku(o.parentNode,x):o.nodeType===1&&Ku(o,x),Qe(o)):Ku(Tn,x.stateNode));break;case 4:w=Tn,E=$r,Tn=x.stateNode.containerInfo,$r=!0,Qs(o,d,x),Tn=w,$r=E;break;case 0:case 11:case 14:case 15:if(!$n&&(w=x.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){E=w=w.next;do{var z=E,Q=z.destroy;z=z.tag,Q!==void 0&&((z&2)!==0||(z&4)!==0)&&Df(x,d,Q),E=E.next}while(E!==w)}Qs(o,d,x);break;case 1:if(!$n&&(Ei(x,d),w=x.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=x.memoizedProps,w.state=x.memoizedState,w.componentWillUnmount()}catch(ie){un(x,d,ie)}Qs(o,d,x);break;case 21:Qs(o,d,x);break;case 22:x.mode&1?($n=(w=$n)||x.memoizedState!==null,Qs(o,d,x),$n=w):Qs(o,d,x);break;default:Qs(o,d,x)}}function yg(o){var d=o.updateQueue;if(d!==null){o.updateQueue=null;var x=o.stateNode;x===null&&(x=o.stateNode=new LS),d.forEach(function(w){var E=YS.bind(null,o,w);x.has(w)||(x.add(w),w.then(E,E))})}}function Vr(o,d){var x=d.deletions;if(x!==null)for(var w=0;w<x.length;w++){var E=x[w];try{var z=o,Q=d,ie=Q;e:for(;ie!==null;){switch(ie.tag){case 5:Tn=ie.stateNode,$r=!1;break e;case 3:Tn=ie.stateNode.containerInfo,$r=!0;break e;case 4:Tn=ie.stateNode.containerInfo,$r=!0;break e}ie=ie.return}if(Tn===null)throw Error(n(160));bg(z,Q,E),Tn=null,$r=!1;var fe=E.alternate;fe!==null&&(fe.return=null),E.return=null}catch(Ae){un(E,d,Ae)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)vg(d,o),d=d.sibling}function vg(o,d){var x=o.alternate,w=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Vr(d,o),rs(o),w&4){try{Ko(3,o,o.return),_c(3,o)}catch(rt){un(o,o.return,rt)}try{Ko(5,o,o.return)}catch(rt){un(o,o.return,rt)}}break;case 1:Vr(d,o),rs(o),w&512&&x!==null&&Ei(x,x.return);break;case 5:if(Vr(d,o),rs(o),w&512&&x!==null&&Ei(x,x.return),o.flags&32){var E=o.stateNode;try{Ye(E,"")}catch(rt){un(o,o.return,rt)}}if(w&4&&(E=o.stateNode,E!=null)){var z=o.memoizedProps,Q=x!==null?x.memoizedProps:z,ie=o.type,fe=o.updateQueue;if(o.updateQueue=null,fe!==null)try{ie==="input"&&z.type==="radio"&&z.name!=null&&Z(E,z),Ze(ie,Q);var Ae=Ze(ie,z);for(Q=0;Q<fe.length;Q+=2){var Le=fe[Q],$e=fe[Q+1];Le==="style"?Me(E,$e):Le==="dangerouslySetInnerHTML"?qe(E,$e):Le==="children"?Ye(E,$e):C(E,Le,$e,Ae)}switch(ie){case"input":te(E,z);break;case"textarea":je(E,z);break;case"select":var ze=E._wrapperState.wasMultiple;E._wrapperState.wasMultiple=!!z.multiple;var Ge=z.value;Ge!=null?Ce(E,!!z.multiple,Ge,!1):ze!==!!z.multiple&&(z.defaultValue!=null?Ce(E,!!z.multiple,z.defaultValue,!0):Ce(E,!!z.multiple,z.multiple?[]:"",!1))}E[Fo]=z}catch(rt){un(o,o.return,rt)}}break;case 6:if(Vr(d,o),rs(o),w&4){if(o.stateNode===null)throw Error(n(162));E=o.stateNode,z=o.memoizedProps;try{E.nodeValue=z}catch(rt){un(o,o.return,rt)}}break;case 3:if(Vr(d,o),rs(o),w&4&&x!==null&&x.memoizedState.isDehydrated)try{Qe(d.containerInfo)}catch(rt){un(o,o.return,rt)}break;case 4:Vr(d,o),rs(o);break;case 13:Vr(d,o),rs(o),E=o.child,E.flags&8192&&(z=E.memoizedState!==null,E.stateNode.isHidden=z,!z||E.alternate!==null&&E.alternate.memoizedState!==null||(Bf=Wt())),w&4&&yg(o);break;case 22:if(Le=x!==null&&x.memoizedState!==null,o.mode&1?($n=(Ae=$n)||Le,Vr(d,o),$n=Ae):Vr(d,o),rs(o),w&8192){if(Ae=o.memoizedState!==null,(o.stateNode.isHidden=Ae)&&!Le&&(o.mode&1)!==0)for(Xe=o,Le=o.child;Le!==null;){for($e=Xe=Le;Xe!==null;){switch(ze=Xe,Ge=ze.child,ze.tag){case 0:case 11:case 14:case 15:Ko(4,ze,ze.return);break;case 1:Ei(ze,ze.return);var Je=ze.stateNode;if(typeof Je.componentWillUnmount=="function"){w=ze,x=ze.return;try{d=w,Je.props=d.memoizedProps,Je.state=d.memoizedState,Je.componentWillUnmount()}catch(rt){un(w,x,rt)}}break;case 5:Ei(ze,ze.return);break;case 22:if(ze.memoizedState!==null){Sg($e);continue}}Ge!==null?(Ge.return=ze,Xe=Ge):Sg($e)}Le=Le.sibling}e:for(Le=null,$e=o;;){if($e.tag===5){if(Le===null){Le=$e;try{E=$e.stateNode,Ae?(z=E.style,typeof z.setProperty=="function"?z.setProperty("display","none","important"):z.display="none"):(ie=$e.stateNode,fe=$e.memoizedProps.style,Q=fe!=null&&fe.hasOwnProperty("display")?fe.display:null,ie.style.display=Te("display",Q))}catch(rt){un(o,o.return,rt)}}}else if($e.tag===6){if(Le===null)try{$e.stateNode.nodeValue=Ae?"":$e.memoizedProps}catch(rt){un(o,o.return,rt)}}else if(($e.tag!==22&&$e.tag!==23||$e.memoizedState===null||$e===o)&&$e.child!==null){$e.child.return=$e,$e=$e.child;continue}if($e===o)break e;for(;$e.sibling===null;){if($e.return===null||$e.return===o)break e;Le===$e&&(Le=null),$e=$e.return}Le===$e&&(Le=null),$e.sibling.return=$e.return,$e=$e.sibling}}break;case 19:Vr(d,o),rs(o),w&4&&yg(o);break;case 21:break;default:Vr(d,o),rs(o)}}function rs(o){var d=o.flags;if(d&2){try{e:{for(var x=o.return;x!==null;){if(xg(x)){var w=x;break e}x=x.return}throw Error(n(160))}switch(w.tag){case 5:var E=w.stateNode;w.flags&32&&(Ye(E,""),w.flags&=-33);var z=gg(o);Mf(o,z,E);break;case 3:case 4:var Q=w.stateNode.containerInfo,ie=gg(o);Pf(o,ie,Q);break;default:throw Error(n(161))}}catch(fe){un(o,o.return,fe)}o.flags&=-3}d&4096&&(o.flags&=-4097)}function $S(o,d,x){Xe=o,wg(o)}function wg(o,d,x){for(var w=(o.mode&1)!==0;Xe!==null;){var E=Xe,z=E.child;if(E.tag===22&&w){var Q=E.memoizedState!==null||Nc;if(!Q){var ie=E.alternate,fe=ie!==null&&ie.memoizedState!==null||$n;ie=Nc;var Ae=$n;if(Nc=Q,($n=fe)&&!Ae)for(Xe=E;Xe!==null;)Q=Xe,fe=Q.child,Q.tag===22&&Q.memoizedState!==null?jg(E):fe!==null?(fe.return=Q,Xe=fe):jg(E);for(;z!==null;)Xe=z,wg(z),z=z.sibling;Xe=E,Nc=ie,$n=Ae}kg(o)}else(E.subtreeFlags&8772)!==0&&z!==null?(z.return=E,Xe=z):kg(o)}}function kg(o){for(;Xe!==null;){var d=Xe;if((d.flags&8772)!==0){var x=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:$n||_c(5,d);break;case 1:var w=d.stateNode;if(d.flags&4&&!$n)if(x===null)w.componentDidMount();else{var E=d.elementType===d.type?x.memoizedProps:Or(d.type,x.memoizedProps);w.componentDidUpdate(E,x.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var z=d.updateQueue;z!==null&&Sx(d,z,w);break;case 3:var Q=d.updateQueue;if(Q!==null){if(x=null,d.child!==null)switch(d.child.tag){case 5:x=d.child.stateNode;break;case 1:x=d.child.stateNode}Sx(d,Q,x)}break;case 5:var ie=d.stateNode;if(x===null&&d.flags&4){x=ie;var fe=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":fe.autoFocus&&x.focus();break;case"img":fe.src&&(x.src=fe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var Ae=d.alternate;if(Ae!==null){var Le=Ae.memoizedState;if(Le!==null){var $e=Le.dehydrated;$e!==null&&Qe($e)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}$n||d.flags&512&&If(d)}catch(ze){un(d,d.return,ze)}}if(d===o){Xe=null;break}if(x=d.sibling,x!==null){x.return=d.return,Xe=x;break}Xe=d.return}}function Sg(o){for(;Xe!==null;){var d=Xe;if(d===o){Xe=null;break}var x=d.sibling;if(x!==null){x.return=d.return,Xe=x;break}Xe=d.return}}function jg(o){for(;Xe!==null;){var d=Xe;try{switch(d.tag){case 0:case 11:case 15:var x=d.return;try{_c(4,d)}catch(fe){un(d,x,fe)}break;case 1:var w=d.stateNode;if(typeof w.componentDidMount=="function"){var E=d.return;try{w.componentDidMount()}catch(fe){un(d,E,fe)}}var z=d.return;try{If(d)}catch(fe){un(d,z,fe)}break;case 5:var Q=d.return;try{If(d)}catch(fe){un(d,Q,fe)}}}catch(fe){un(d,d.return,fe)}if(d===o){Xe=null;break}var ie=d.sibling;if(ie!==null){ie.return=d.return,Xe=ie;break}Xe=d.return}}var VS=Math.ceil,Ac=_.ReactCurrentDispatcher,Ff=_.ReactCurrentOwner,Ar=_.ReactCurrentBatchConfig,Dt=0,_n=null,bn=null,Dn=0,xr=0,Ti=Ks(0),kn=0,qo=null,Pa=0,Ec=0,Rf=0,Go=null,rr=null,Bf=0,Di=1/0,Ds=null,Tc=!1,zf=null,Xs=null,Dc=!1,Js=null,Ic=0,Yo=0,Lf=null,Pc=-1,Mc=0;function Gn(){return(Dt&6)!==0?Wt():Pc!==-1?Pc:Pc=Wt()}function ea(o){return(o.mode&1)===0?1:(Dt&2)!==0&&Dn!==0?Dn&-Dn:CS.transition!==null?(Mc===0&&(Mc=So()),Mc):(o=Rt,o!==0||(o=window.event,o=o===void 0?16:ql(o.type)),o)}function Hr(o,d,x,w){if(50<Yo)throw Yo=0,Lf=null,Error(n(185));Ca(o,x,w),((Dt&2)===0||o!==_n)&&(o===_n&&((Dt&2)===0&&(Ec|=x),kn===4&&ta(o,Dn)),sr(o,w),x===1&&Dt===0&&(d.mode&1)===0&&(Di=Wt()+500,lc&&Gs()))}function sr(o,d){var x=o.callbackNode;Rr(o,d);var w=ci(o,o===_n?Dn:0);if(w===0)x!==null&&zl(x),o.callbackNode=null,o.callbackPriority=0;else if(d=w&-w,o.callbackPriority!==d){if(x!=null&&zl(x),d===1)o.tag===0?jS(Ng.bind(null,o)):ux(Ng.bind(null,o)),vS(function(){(Dt&6)===0&&Gs()}),x=null;else{switch(Vl(w)){case 1:x=Vs;break;case 4:x=Fn;break;case 16:x=si;break;case 536870912:x=wo;break;default:x=si}x=Mg(x,Cg.bind(null,o))}o.callbackPriority=d,o.callbackNode=x}}function Cg(o,d){if(Pc=-1,Mc=0,(Dt&6)!==0)throw Error(n(327));var x=o.callbackNode;if(Ii()&&o.callbackNode!==x)return null;var w=ci(o,o===_n?Dn:0);if(w===0)return null;if((w&30)!==0||(w&o.expiredLanes)!==0||d)d=Fc(o,w);else{d=w;var E=Dt;Dt|=2;var z=Ag();(_n!==o||Dn!==d)&&(Ds=null,Di=Wt()+500,Fa(o,d));do try{WS();break}catch(ie){_g(o,ie)}while(!0);nf(),Ac.current=z,Dt=E,bn!==null?d=0:(_n=null,Dn=0,d=kn)}if(d!==0){if(d===2&&(E=ko(o),E!==0&&(w=E,d=Of(o,E))),d===1)throw x=qo,Fa(o,0),ta(o,w),sr(o,Wt()),x;if(d===6)ta(o,w);else{if(E=o.current.alternate,(w&30)===0&&!HS(E)&&(d=Fc(o,w),d===2&&(z=ko(o),z!==0&&(w=z,d=Of(o,z))),d===1))throw x=qo,Fa(o,0),ta(o,w),sr(o,Wt()),x;switch(o.finishedWork=E,o.finishedLanes=w,d){case 0:case 1:throw Error(n(345));case 2:Ra(o,rr,Ds);break;case 3:if(ta(o,w),(w&130023424)===w&&(d=Bf+500-Wt(),10<d)){if(ci(o,0)!==0)break;if(E=o.suspendedLanes,(E&w)!==w){Gn(),o.pingedLanes|=o.suspendedLanes&E;break}o.timeoutHandle=Wu(Ra.bind(null,o,rr,Ds),d);break}Ra(o,rr,Ds);break;case 4:if(ta(o,w),(w&4194240)===w)break;for(d=o.eventTimes,E=-1;0<w;){var Q=31-Vt(w);z=1<<Q,Q=d[Q],Q>E&&(E=Q),w&=~z}if(w=E,w=Wt()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*VS(w/1960))-w,10<w){o.timeoutHandle=Wu(Ra.bind(null,o,rr,Ds),w);break}Ra(o,rr,Ds);break;case 5:Ra(o,rr,Ds);break;default:throw Error(n(329))}}}return sr(o,Wt()),o.callbackNode===x?Cg.bind(null,o):null}function Of(o,d){var x=Go;return o.current.memoizedState.isDehydrated&&(Fa(o,d).flags|=256),o=Fc(o,d),o!==2&&(d=rr,rr=x,d!==null&&$f(d)),o}function $f(o){rr===null?rr=o:rr.push.apply(rr,o)}function HS(o){for(var d=o;;){if(d.flags&16384){var x=d.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var w=0;w<x.length;w++){var E=x[w],z=E.getSnapshot;E=E.value;try{if(!zr(z(),E))return!1}catch{return!1}}}if(x=d.child,d.subtreeFlags&16384&&x!==null)x.return=d,d=x;else{if(d===o)break;for(;d.sibling===null;){if(d.return===null||d.return===o)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function ta(o,d){for(d&=~Rf,d&=~Ec,o.suspendedLanes|=d,o.pingedLanes&=~d,o=o.expirationTimes;0<d;){var x=31-Vt(d),w=1<<x;o[x]=-1,d&=~w}}function Ng(o){if((Dt&6)!==0)throw Error(n(327));Ii();var d=ci(o,0);if((d&1)===0)return sr(o,Wt()),null;var x=Fc(o,d);if(o.tag!==0&&x===2){var w=ko(o);w!==0&&(d=w,x=Of(o,w))}if(x===1)throw x=qo,Fa(o,0),ta(o,d),sr(o,Wt()),x;if(x===6)throw Error(n(345));return o.finishedWork=o.current.alternate,o.finishedLanes=d,Ra(o,rr,Ds),sr(o,Wt()),null}function Vf(o,d){var x=Dt;Dt|=1;try{return o(d)}finally{Dt=x,Dt===0&&(Di=Wt()+500,lc&&Gs())}}function Ma(o){Js!==null&&Js.tag===0&&(Dt&6)===0&&Ii();var d=Dt;Dt|=1;var x=Ar.transition,w=Rt;try{if(Ar.transition=null,Rt=1,o)return o()}finally{Rt=w,Ar.transition=x,Dt=d,(Dt&6)===0&&Gs()}}function Hf(){xr=Ti.current,en(Ti)}function Fa(o,d){o.finishedWork=null,o.finishedLanes=0;var x=o.timeoutHandle;if(x!==-1&&(o.timeoutHandle=-1,yS(x)),bn!==null)for(x=bn.return;x!==null;){var w=x;switch(Qu(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&ic();break;case 3:_i(),en(er),en(zn),uf();break;case 5:cf(w);break;case 4:_i();break;case 13:en(on);break;case 19:en(on);break;case 10:rf(w.type._context);break;case 22:case 23:Hf()}x=x.return}if(_n=o,bn=o=na(o.current,null),Dn=xr=d,kn=0,qo=null,Rf=Ec=Pa=0,rr=Go=null,Ta!==null){for(d=0;d<Ta.length;d++)if(x=Ta[d],w=x.interleaved,w!==null){x.interleaved=null;var E=w.next,z=x.pending;if(z!==null){var Q=z.next;z.next=E,w.next=Q}x.pending=w}Ta=null}return o}function _g(o,d){do{var x=bn;try{if(nf(),bc.current=kc,yc){for(var w=ln.memoizedState;w!==null;){var E=w.queue;E!==null&&(E.pending=null),w=w.next}yc=!1}if(Ia=0,Nn=wn=ln=null,$o=!1,Vo=0,Ff.current=null,x===null||x.return===null){kn=1,qo=d,bn=null;break}e:{var z=o,Q=x.return,ie=x,fe=d;if(d=Dn,ie.flags|=32768,fe!==null&&typeof fe=="object"&&typeof fe.then=="function"){var Ae=fe,Le=ie,$e=Le.tag;if((Le.mode&1)===0&&($e===0||$e===11||$e===15)){var ze=Le.alternate;ze?(Le.updateQueue=ze.updateQueue,Le.memoizedState=ze.memoizedState,Le.lanes=ze.lanes):(Le.updateQueue=null,Le.memoizedState=null)}var Ge=Xx(Q);if(Ge!==null){Ge.flags&=-257,Jx(Ge,Q,ie,z,d),Ge.mode&1&&Qx(z,Ae,d),d=Ge,fe=Ae;var Je=d.updateQueue;if(Je===null){var rt=new Set;rt.add(fe),d.updateQueue=rt}else Je.add(fe);break e}else{if((d&1)===0){Qx(z,Ae,d),Uf();break e}fe=Error(n(426))}}else if(nn&&ie.mode&1){var pn=Xx(Q);if(pn!==null){(pn.flags&65536)===0&&(pn.flags|=256),Jx(pn,Q,ie,z,d),ef(Ai(fe,ie));break e}}z=fe=Ai(fe,ie),kn!==4&&(kn=2),Go===null?Go=[z]:Go.push(z),z=Q;do{switch(z.tag){case 3:z.flags|=65536,d&=-d,z.lanes|=d;var ve=Yx(z,fe,d);kx(z,ve);break e;case 1:ie=fe;var ge=z.type,Se=z.stateNode;if((z.flags&128)===0&&(typeof ge.getDerivedStateFromError=="function"||Se!==null&&typeof Se.componentDidCatch=="function"&&(Xs===null||!Xs.has(Se)))){z.flags|=65536,d&=-d,z.lanes|=d;var He=Zx(z,ie,d);kx(z,He);break e}}z=z.return}while(z!==null)}Tg(x)}catch(at){d=at,bn===x&&x!==null&&(bn=x=x.return);continue}break}while(!0)}function Ag(){var o=Ac.current;return Ac.current=kc,o===null?kc:o}function Uf(){(kn===0||kn===3||kn===2)&&(kn=4),_n===null||(Pa&268435455)===0&&(Ec&268435455)===0||ta(_n,Dn)}function Fc(o,d){var x=Dt;Dt|=2;var w=Ag();(_n!==o||Dn!==d)&&(Ds=null,Fa(o,d));do try{US();break}catch(E){_g(o,E)}while(!0);if(nf(),Dt=x,Ac.current=w,bn!==null)throw Error(n(261));return _n=null,Dn=0,kn}function US(){for(;bn!==null;)Eg(bn)}function WS(){for(;bn!==null&&!Su();)Eg(bn)}function Eg(o){var d=Pg(o.alternate,o,xr);o.memoizedProps=o.pendingProps,d===null?Tg(o):bn=d,Ff.current=null}function Tg(o){var d=o;do{var x=d.alternate;if(o=d.return,(d.flags&32768)===0){if(x=BS(x,d,xr),x!==null){bn=x;return}}else{if(x=zS(x,d),x!==null){x.flags&=32767,bn=x;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{kn=6,bn=null;return}}if(d=d.sibling,d!==null){bn=d;return}bn=d=o}while(d!==null);kn===0&&(kn=5)}function Ra(o,d,x){var w=Rt,E=Ar.transition;try{Ar.transition=null,Rt=1,KS(o,d,x,w)}finally{Ar.transition=E,Rt=w}return null}function KS(o,d,x,w){do Ii();while(Js!==null);if((Dt&6)!==0)throw Error(n(327));x=o.finishedWork;var E=o.finishedLanes;if(x===null)return null;if(o.finishedWork=null,o.finishedLanes=0,x===o.current)throw Error(n(177));o.callbackNode=null,o.callbackPriority=0;var z=x.lanes|x.childLanes;if(ju(o,z),o===_n&&(bn=_n=null,Dn=0),(x.subtreeFlags&2064)===0&&(x.flags&2064)===0||Dc||(Dc=!0,Mg(si,function(){return Ii(),null})),z=(x.flags&15990)!==0,(x.subtreeFlags&15990)!==0||z){z=Ar.transition,Ar.transition=null;var Q=Rt;Rt=1;var ie=Dt;Dt|=4,Ff.current=null,OS(o,x),vg(x,o),fS(Hu),Mt=!!Vu,Hu=Vu=null,o.current=x,$S(x),ka(),Dt=ie,Rt=Q,Ar.transition=z}else o.current=x;if(Dc&&(Dc=!1,Js=o,Ic=E),z=o.pendingLanes,z===0&&(Xs=null),Ll(x.stateNode),sr(o,Wt()),d!==null)for(w=o.onRecoverableError,x=0;x<d.length;x++)E=d[x],w(E.value,{componentStack:E.stack,digest:E.digest});if(Tc)throw Tc=!1,o=zf,zf=null,o;return(Ic&1)!==0&&o.tag!==0&&Ii(),z=o.pendingLanes,(z&1)!==0?o===Lf?Yo++:(Yo=0,Lf=o):Yo=0,Gs(),null}function Ii(){if(Js!==null){var o=Vl(Ic),d=Ar.transition,x=Rt;try{if(Ar.transition=null,Rt=16>o?16:o,Js===null)var w=!1;else{if(o=Js,Js=null,Ic=0,(Dt&6)!==0)throw Error(n(331));var E=Dt;for(Dt|=4,Xe=o.current;Xe!==null;){var z=Xe,Q=z.child;if((Xe.flags&16)!==0){var ie=z.deletions;if(ie!==null){for(var fe=0;fe<ie.length;fe++){var Ae=ie[fe];for(Xe=Ae;Xe!==null;){var Le=Xe;switch(Le.tag){case 0:case 11:case 15:Ko(8,Le,z)}var $e=Le.child;if($e!==null)$e.return=Le,Xe=$e;else for(;Xe!==null;){Le=Xe;var ze=Le.sibling,Ge=Le.return;if(mg(Le),Le===Ae){Xe=null;break}if(ze!==null){ze.return=Ge,Xe=ze;break}Xe=Ge}}}var Je=z.alternate;if(Je!==null){var rt=Je.child;if(rt!==null){Je.child=null;do{var pn=rt.sibling;rt.sibling=null,rt=pn}while(rt!==null)}}Xe=z}}if((z.subtreeFlags&2064)!==0&&Q!==null)Q.return=z,Xe=Q;else e:for(;Xe!==null;){if(z=Xe,(z.flags&2048)!==0)switch(z.tag){case 0:case 11:case 15:Ko(9,z,z.return)}var ve=z.sibling;if(ve!==null){ve.return=z.return,Xe=ve;break e}Xe=z.return}}var ge=o.current;for(Xe=ge;Xe!==null;){Q=Xe;var Se=Q.child;if((Q.subtreeFlags&2064)!==0&&Se!==null)Se.return=Q,Xe=Se;else e:for(Q=ge;Xe!==null;){if(ie=Xe,(ie.flags&2048)!==0)try{switch(ie.tag){case 0:case 11:case 15:_c(9,ie)}}catch(at){un(ie,ie.return,at)}if(ie===Q){Xe=null;break e}var He=ie.sibling;if(He!==null){He.return=ie.return,Xe=He;break e}Xe=ie.return}}if(Dt=E,Gs(),Sr&&typeof Sr.onPostCommitFiberRoot=="function")try{Sr.onPostCommitFiberRoot(ai,o)}catch{}w=!0}return w}finally{Rt=x,Ar.transition=d}}return!1}function Dg(o,d,x){d=Ai(x,d),d=Yx(o,d,1),o=Zs(o,d,1),d=Gn(),o!==null&&(Ca(o,1,d),sr(o,d))}function un(o,d,x){if(o.tag===3)Dg(o,o,x);else for(;d!==null;){if(d.tag===3){Dg(d,o,x);break}else if(d.tag===1){var w=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(Xs===null||!Xs.has(w))){o=Ai(x,o),o=Zx(d,o,1),d=Zs(d,o,1),o=Gn(),d!==null&&(Ca(d,1,o),sr(d,o));break}}d=d.return}}function qS(o,d,x){var w=o.pingCache;w!==null&&w.delete(d),d=Gn(),o.pingedLanes|=o.suspendedLanes&x,_n===o&&(Dn&x)===x&&(kn===4||kn===3&&(Dn&130023424)===Dn&&500>Wt()-Bf?Fa(o,0):Rf|=x),sr(o,d)}function Ig(o,d){d===0&&((o.mode&1)===0?d=1:(d=li,li<<=1,(li&130023424)===0&&(li=4194304)));var x=Gn();o=As(o,d),o!==null&&(Ca(o,d,x),sr(o,x))}function GS(o){var d=o.memoizedState,x=0;d!==null&&(x=d.retryLane),Ig(o,x)}function YS(o,d){var x=0;switch(o.tag){case 13:var w=o.stateNode,E=o.memoizedState;E!==null&&(x=E.retryLane);break;case 19:w=o.stateNode;break;default:throw Error(n(314))}w!==null&&w.delete(d),Ig(o,x)}var Pg;Pg=function(o,d,x){if(o!==null)if(o.memoizedProps!==d.pendingProps||er.current)nr=!0;else{if((o.lanes&x)===0&&(d.flags&128)===0)return nr=!1,RS(o,d,x);nr=(o.flags&131072)!==0}else nr=!1,nn&&(d.flags&1048576)!==0&&fx(d,dc,d.index);switch(d.lanes=0,d.tag){case 2:var w=d.type;Cc(o,d),o=d.pendingProps;var E=vi(d,zn.current);Ni(d,x),E=pf(null,d,w,o,E,x);var z=mf();return d.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,tr(w)?(z=!0,oc(d)):z=!1,d.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,of(d),E.updater=Sc,d.stateNode=E,E._reactInternals=d,wf(d,w,o,x),d=Cf(null,d,w,!0,z,x)):(d.tag=0,nn&&z&&Zu(d),qn(null,d,E,x),d=d.child),d;case 16:w=d.elementType;e:{switch(Cc(o,d),o=d.pendingProps,E=w._init,w=E(w._payload),d.type=w,E=d.tag=QS(w),o=Or(w,o),E){case 0:d=jf(null,d,w,o,x);break e;case 1:d=ag(null,d,w,o,x);break e;case 11:d=eg(null,d,w,o,x);break e;case 14:d=tg(null,d,w,Or(w.type,o),x);break e}throw Error(n(306,w,""))}return d;case 0:return w=d.type,E=d.pendingProps,E=d.elementType===w?E:Or(w,E),jf(o,d,w,E,x);case 1:return w=d.type,E=d.pendingProps,E=d.elementType===w?E:Or(w,E),ag(o,d,w,E,x);case 3:e:{if(ig(d),o===null)throw Error(n(387));w=d.pendingProps,z=d.memoizedState,E=z.element,wx(o,d),xc(d,w,null,x);var Q=d.memoizedState;if(w=Q.element,z.isDehydrated)if(z={element:w,isDehydrated:!1,cache:Q.cache,pendingSuspenseBoundaries:Q.pendingSuspenseBoundaries,transitions:Q.transitions},d.updateQueue.baseState=z,d.memoizedState=z,d.flags&256){E=Ai(Error(n(423)),d),d=og(o,d,w,x,E);break e}else if(w!==E){E=Ai(Error(n(424)),d),d=og(o,d,w,x,E);break e}else for(mr=Ws(d.stateNode.containerInfo.firstChild),pr=d,nn=!0,Lr=null,x=yx(d,null,w,x),d.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(Si(),w===E){d=Ts(o,d,x);break e}qn(o,d,w,x)}d=d.child}return d;case 5:return jx(d),o===null&&Ju(d),w=d.type,E=d.pendingProps,z=o!==null?o.memoizedProps:null,Q=E.children,Uu(w,E)?Q=null:z!==null&&Uu(w,z)&&(d.flags|=32),sg(o,d),qn(o,d,Q,x),d.child;case 6:return o===null&&Ju(d),null;case 13:return lg(o,d,x);case 4:return lf(d,d.stateNode.containerInfo),w=d.pendingProps,o===null?d.child=ji(d,null,w,x):qn(o,d,w,x),d.child;case 11:return w=d.type,E=d.pendingProps,E=d.elementType===w?E:Or(w,E),eg(o,d,w,E,x);case 7:return qn(o,d,d.pendingProps,x),d.child;case 8:return qn(o,d,d.pendingProps.children,x),d.child;case 12:return qn(o,d,d.pendingProps.children,x),d.child;case 10:e:{if(w=d.type._context,E=d.pendingProps,z=d.memoizedProps,Q=E.value,Yt(hc,w._currentValue),w._currentValue=Q,z!==null)if(zr(z.value,Q)){if(z.children===E.children&&!er.current){d=Ts(o,d,x);break e}}else for(z=d.child,z!==null&&(z.return=d);z!==null;){var ie=z.dependencies;if(ie!==null){Q=z.child;for(var fe=ie.firstContext;fe!==null;){if(fe.context===w){if(z.tag===1){fe=Es(-1,x&-x),fe.tag=2;var Ae=z.updateQueue;if(Ae!==null){Ae=Ae.shared;var Le=Ae.pending;Le===null?fe.next=fe:(fe.next=Le.next,Le.next=fe),Ae.pending=fe}}z.lanes|=x,fe=z.alternate,fe!==null&&(fe.lanes|=x),sf(z.return,x,d),ie.lanes|=x;break}fe=fe.next}}else if(z.tag===10)Q=z.type===d.type?null:z.child;else if(z.tag===18){if(Q=z.return,Q===null)throw Error(n(341));Q.lanes|=x,ie=Q.alternate,ie!==null&&(ie.lanes|=x),sf(Q,x,d),Q=z.sibling}else Q=z.child;if(Q!==null)Q.return=z;else for(Q=z;Q!==null;){if(Q===d){Q=null;break}if(z=Q.sibling,z!==null){z.return=Q.return,Q=z;break}Q=Q.return}z=Q}qn(o,d,E.children,x),d=d.child}return d;case 9:return E=d.type,w=d.pendingProps.children,Ni(d,x),E=Nr(E),w=w(E),d.flags|=1,qn(o,d,w,x),d.child;case 14:return w=d.type,E=Or(w,d.pendingProps),E=Or(w.type,E),tg(o,d,w,E,x);case 15:return ng(o,d,d.type,d.pendingProps,x);case 17:return w=d.type,E=d.pendingProps,E=d.elementType===w?E:Or(w,E),Cc(o,d),d.tag=1,tr(w)?(o=!0,oc(d)):o=!1,Ni(d,x),qx(d,w,E),wf(d,w,E,x),Cf(null,d,w,!0,o,x);case 19:return dg(o,d,x);case 22:return rg(o,d,x)}throw Error(n(156,d.tag))};function Mg(o,d){return wa(o,d)}function ZS(o,d,x,w){this.tag=o,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Er(o,d,x,w){return new ZS(o,d,x,w)}function Wf(o){return o=o.prototype,!(!o||!o.isReactComponent)}function QS(o){if(typeof o=="function")return Wf(o)?1:0;if(o!=null){if(o=o.$$typeof,o===T)return 11;if(o===P)return 14}return 2}function na(o,d){var x=o.alternate;return x===null?(x=Er(o.tag,d,o.key,o.mode),x.elementType=o.elementType,x.type=o.type,x.stateNode=o.stateNode,x.alternate=o,o.alternate=x):(x.pendingProps=d,x.type=o.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=o.flags&14680064,x.childLanes=o.childLanes,x.lanes=o.lanes,x.child=o.child,x.memoizedProps=o.memoizedProps,x.memoizedState=o.memoizedState,x.updateQueue=o.updateQueue,d=o.dependencies,x.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},x.sibling=o.sibling,x.index=o.index,x.ref=o.ref,x}function Rc(o,d,x,w,E,z){var Q=2;if(w=o,typeof o=="function")Wf(o)&&(Q=1);else if(typeof o=="string")Q=5;else e:switch(o){case V:return Ba(x.children,E,z,d);case I:Q=8,E|=8;break;case A:return o=Er(12,x,d,E|2),o.elementType=A,o.lanes=z,o;case M:return o=Er(13,x,d,E),o.elementType=M,o.lanes=z,o;case j:return o=Er(19,x,d,E),o.elementType=j,o.lanes=z,o;case B:return Bc(x,E,z,d);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case U:Q=10;break e;case W:Q=9;break e;case T:Q=11;break e;case P:Q=14;break e;case L:Q=16,w=null;break e}throw Error(n(130,o==null?o:typeof o,""))}return d=Er(Q,x,d,E),d.elementType=o,d.type=w,d.lanes=z,d}function Ba(o,d,x,w){return o=Er(7,o,w,d),o.lanes=x,o}function Bc(o,d,x,w){return o=Er(22,o,w,d),o.elementType=B,o.lanes=x,o.stateNode={isHidden:!1},o}function Kf(o,d,x){return o=Er(6,o,null,d),o.lanes=x,o}function qf(o,d,x){return d=Er(4,o.children!==null?o.children:[],o.key,d),d.lanes=x,d.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},d}function XS(o,d,x,w,E){this.tag=d,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jo(0),this.expirationTimes=jo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jo(0),this.identifierPrefix=w,this.onRecoverableError=E,this.mutableSourceEagerHydrationData=null}function Gf(o,d,x,w,E,z,Q,ie,fe){return o=new XS(o,d,x,ie,fe),d===1?(d=1,z===!0&&(d|=8)):d=0,z=Er(3,null,null,d),o.current=z,z.stateNode=o,z.memoizedState={element:w,isDehydrated:x,cache:null,transitions:null,pendingSuspenseBoundaries:null},of(z),o}function JS(o,d,x){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:w==null?null:""+w,children:o,containerInfo:d,implementation:x}}function Fg(o){if(!o)return qs;o=o._reactInternals;e:{if(Fr(o)!==o||o.tag!==1)throw Error(n(170));var d=o;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(tr(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(n(171))}if(o.tag===1){var x=o.type;if(tr(x))return cx(o,x,d)}return d}function Rg(o,d,x,w,E,z,Q,ie,fe){return o=Gf(x,w,!0,o,E,z,Q,ie,fe),o.context=Fg(null),x=o.current,w=Gn(),E=ea(x),z=Es(w,E),z.callback=d??null,Zs(x,z,E),o.current.lanes=E,Ca(o,E,w),sr(o,w),o}function zc(o,d,x,w){var E=d.current,z=Gn(),Q=ea(E);return x=Fg(x),d.context===null?d.context=x:d.pendingContext=x,d=Es(z,Q),d.payload={element:o},w=w===void 0?null:w,w!==null&&(d.callback=w),o=Zs(E,d,Q),o!==null&&(Hr(o,E,Q,z),mc(o,E,Q)),Q}function Lc(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Bg(o,d){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var x=o.retryLane;o.retryLane=x!==0&&x<d?x:d}}function Yf(o,d){Bg(o,d),(o=o.alternate)&&Bg(o,d)}function ej(){return null}var zg=typeof reportError=="function"?reportError:function(o){console.error(o)};function Zf(o){this._internalRoot=o}Oc.prototype.render=Zf.prototype.render=function(o){var d=this._internalRoot;if(d===null)throw Error(n(409));zc(o,d,null,null)},Oc.prototype.unmount=Zf.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var d=o.containerInfo;Ma(function(){zc(null,o,null,null)}),d[js]=null}};function Oc(o){this._internalRoot=o}Oc.prototype.unstable_scheduleHydration=function(o){if(o){var d=Wl();o={blockedOn:null,target:o,priority:d};for(var x=0;x<_t.length&&d!==0&&d<_t[x].priority;x++);_t.splice(x,0,o),x===0&&En(o)}};function Qf(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function $c(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Lg(){}function tj(o,d,x,w,E){if(E){if(typeof w=="function"){var z=w;w=function(){var Ae=Lc(Q);z.call(Ae)}}var Q=Rg(d,w,o,0,null,!1,!1,"",Lg);return o._reactRootContainer=Q,o[js]=Q.current,Po(o.nodeType===8?o.parentNode:o),Ma(),Q}for(;E=o.lastChild;)o.removeChild(E);if(typeof w=="function"){var ie=w;w=function(){var Ae=Lc(fe);ie.call(Ae)}}var fe=Gf(o,0,!1,null,null,!1,!1,"",Lg);return o._reactRootContainer=fe,o[js]=fe.current,Po(o.nodeType===8?o.parentNode:o),Ma(function(){zc(d,fe,x,w)}),fe}function Vc(o,d,x,w,E){var z=x._reactRootContainer;if(z){var Q=z;if(typeof E=="function"){var ie=E;E=function(){var fe=Lc(Q);ie.call(fe)}}zc(d,Q,o,E)}else Q=tj(x,d,o,E,w);return Lc(Q)}Hl=function(o){switch(o.tag){case 3:var d=o.stateNode;if(d.current.memoizedState.isDehydrated){var x=ja(d.pendingLanes);x!==0&&(di(d,x|1),sr(d,Wt()),(Dt&6)===0&&(Di=Wt()+500,Gs()))}break;case 13:Ma(function(){var w=As(o,1);if(w!==null){var E=Gn();Hr(w,o,1,E)}}),Yf(o,1)}},ui=function(o){if(o.tag===13){var d=As(o,134217728);if(d!==null){var x=Gn();Hr(d,o,134217728,x)}Yf(o,134217728)}},Ul=function(o){if(o.tag===13){var d=ea(o),x=As(o,d);if(x!==null){var w=Gn();Hr(x,o,d,w)}Yf(o,d)}},Wl=function(){return Rt},Kl=function(o,d){var x=Rt;try{return Rt=o,d()}finally{Rt=x}},jt=function(o,d,x){switch(d){case"input":if(te(o,x),d=x.name,x.type==="radio"&&d!=null){for(x=o;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<x.length;d++){var w=x[d];if(w!==o&&w.form===o.form){var E=ac(w);if(!E)throw Error(n(90));Ie(w),te(w,E)}}}break;case"textarea":je(o,x);break;case"select":d=x.value,d!=null&&Ce(o,!!x.multiple,d,!1)}},Ot=Vf,kt=Ma;var nj={usingClientEntryPoint:!1,Events:[Ro,bi,ac,it,Pt,Vf]},Zo={findFiberByHostInstance:Na,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rj={bundleType:Zo.bundleType,version:Zo.version,rendererPackageName:Zo.rendererPackageName,rendererConfig:Zo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=ku(o),o===null?null:o.stateNode},findFiberByHostInstance:Zo.findFiberByHostInstance||ej,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hc.isDisabled&&Hc.supportsFiber)try{ai=Hc.inject(rj),Sr=Hc}catch{}}return ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nj,ar.createPortal=function(o,d){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qf(d))throw Error(n(200));return JS(o,d,null,x)},ar.createRoot=function(o,d){if(!Qf(o))throw Error(n(299));var x=!1,w="",E=zg;return d!=null&&(d.unstable_strictMode===!0&&(x=!0),d.identifierPrefix!==void 0&&(w=d.identifierPrefix),d.onRecoverableError!==void 0&&(E=d.onRecoverableError)),d=Gf(o,1,!1,null,null,x,!1,w,E),o[js]=d.current,Po(o.nodeType===8?o.parentNode:o),new Zf(d)},ar.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var d=o._reactInternals;if(d===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=ku(d),o=o===null?null:o.stateNode,o},ar.flushSync=function(o){return Ma(o)},ar.hydrate=function(o,d,x){if(!$c(d))throw Error(n(200));return Vc(null,o,d,!0,x)},ar.hydrateRoot=function(o,d,x){if(!Qf(o))throw Error(n(405));var w=x!=null&&x.hydratedSources||null,E=!1,z="",Q=zg;if(x!=null&&(x.unstable_strictMode===!0&&(E=!0),x.identifierPrefix!==void 0&&(z=x.identifierPrefix),x.onRecoverableError!==void 0&&(Q=x.onRecoverableError)),d=Rg(d,null,o,1,x??null,E,!1,z,Q),o[js]=d.current,Po(o),w)for(o=0;o<w.length;o++)x=w[o],E=x._getVersion,E=E(x._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[x,E]:d.mutableSourceEagerHydrationData.push(x,E);return new Oc(d)},ar.render=function(o,d,x){if(!$c(d))throw Error(n(200));return Vc(null,o,d,!1,x)},ar.unmountComponentAtNode=function(o){if(!$c(o))throw Error(n(40));return o._reactRootContainer?(Ma(function(){Vc(null,null,o,!1,function(){o._reactRootContainer=null,o[js]=null})}),!0):!1},ar.unstable_batchedUpdates=Vf,ar.unstable_renderSubtreeIntoContainer=function(o,d,x,w){if(!$c(x))throw Error(n(200));if(o==null||o._reactInternals===void 0)throw Error(n(38));return Vc(o,d,x,!1,w)},ar.version="18.3.1-next-f1338f8080-20240426",ar}var qg;function tv(){if(qg)return eh.exports;qg=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),eh.exports=uj(),eh.exports}var Gg;function fj(){if(Gg)return Wc;Gg=1;var e=tv();return Wc.createRoot=e.createRoot,Wc.hydrateRoot=e.hydrateRoot,Wc}var hj=fj(),k=Jp();const Ue=so(k),em=aj({__proto__:null,default:Ue},[k]),tm=k.createContext({});function nm(e){const t=k.useRef(null);return t.current===null&&(t.current=e()),t.current}const rm=typeof window<"u",nv=rm?k.useLayoutEffect:k.useEffect,Qd=k.createContext(null);function sm(e,t){e.indexOf(t)===-1&&e.push(t)}function am(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Ms=(e,t,n)=>n>t?t:n<e?e:n;let im=()=>{};const Fs={},rv=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function sv(e){return typeof e=="object"&&e!==null}const av=e=>/^0[^.\s]+$/u.test(e);function om(e){let t;return()=>(t===void 0&&(t=e()),t)}const Pr=e=>e,pj=(e,t)=>n=>t(e(n)),Cl=(...e)=>e.reduce(pj),xl=(e,t,n)=>{const s=t-e;return s===0?1:(n-e)/s};class lm{constructor(){this.subscriptions=[]}add(t){return sm(this.subscriptions,t),()=>am(this.subscriptions,t)}notify(t,n,s){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,n,s);else for(let i=0;i<a;i++){const l=this.subscriptions[i];l&&l(t,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const hs=e=>e*1e3,Ir=e=>e/1e3;function iv(e,t){return t?e*(1e3/t):0}const ov=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,mj=1e-7,xj=12;function gj(e,t,n,s,a){let i,l,c=0;do l=t+(n-t)/2,i=ov(l,s,a)-e,i>0?n=l:t=l;while(Math.abs(i)>mj&&++c<xj);return l}function Nl(e,t,n,s){if(e===t&&n===s)return Pr;const a=i=>gj(i,0,1,e,n);return i=>i===0||i===1?i:ov(a(i),t,s)}const lv=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,cv=e=>t=>1-e(1-t),dv=Nl(.33,1.53,.69,.99),cm=cv(dv),uv=lv(cm),fv=e=>(e*=2)<1?.5*cm(e):.5*(2-Math.pow(2,-10*(e-1))),dm=e=>1-Math.sin(Math.acos(e)),hv=cv(dm),pv=lv(dm),bj=Nl(.42,0,1,1),yj=Nl(0,0,.58,1),mv=Nl(.42,0,.58,1),vj=e=>Array.isArray(e)&&typeof e[0]!="number",xv=e=>Array.isArray(e)&&typeof e[0]=="number",wj={linear:Pr,easeIn:bj,easeInOut:mv,easeOut:yj,circIn:dm,circInOut:pv,circOut:hv,backIn:cm,backInOut:uv,backOut:dv,anticipate:fv},kj=e=>typeof e=="string",Yg=e=>{if(xv(e)){im(e.length===4);const[t,n,s,a]=e;return Nl(t,n,s,a)}else if(kj(e))return wj[e];return e},Kc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Sj(e,t){let n=new Set,s=new Set,a=!1,i=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function u(h){l.has(h)&&(p.schedule(h),e()),h(c)}const p={schedule:(h,f=!1,m=!1)=>{const y=m&&a?n:s;return f&&l.add(h),y.has(h)||y.add(h),h},cancel:h=>{s.delete(h),l.delete(h)},process:h=>{if(c=h,a){i=!0;return}a=!0,[n,s]=[s,n],n.forEach(u),n.clear(),a=!1,i&&(i=!1,p.process(h))}};return p}const jj=40;function gv(e,t){let n=!1,s=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,l=Kc.reduce((C,_)=>(C[_]=Sj(i),C),{}),{setup:c,read:u,resolveKeyframes:p,preUpdate:h,update:f,preRender:m,render:g,postRender:y}=l,b=()=>{const C=Fs.useManualTiming?a.timestamp:performance.now();n=!1,Fs.useManualTiming||(a.delta=s?1e3/60:Math.max(Math.min(C-a.timestamp,jj),1)),a.timestamp=C,a.isProcessing=!0,c.process(a),u.process(a),p.process(a),h.process(a),f.process(a),m.process(a),g.process(a),y.process(a),a.isProcessing=!1,n&&t&&(s=!1,e(b))},S=()=>{n=!0,s=!0,a.isProcessing||e(b)};return{schedule:Kc.reduce((C,_)=>{const R=l[_];return C[_]=(D,V=!1,I=!1)=>(n||S(),R.schedule(D,V,I)),C},{}),cancel:C=>{for(let _=0;_<Kc.length;_++)l[Kc[_]].cancel(C)},state:a,steps:l}}const{schedule:rn,cancel:da,state:In,steps:rh}=gv(typeof requestAnimationFrame<"u"?requestAnimationFrame:Pr,!0);let ud;function Cj(){ud=void 0}const dr={now:()=>(ud===void 0&&dr.set(In.isProcessing||Fs.useManualTiming?In.timestamp:performance.now()),ud),set:e=>{ud=e,queueMicrotask(Cj)}},bv=e=>t=>typeof t=="string"&&t.startsWith(e),yv=bv("--"),Nj=bv("var(--"),um=e=>Nj(e)?_j.test(e.split("/*")[0].trim()):!1,_j=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ao={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},gl={...ao,transform:e=>Ms(0,1,e)},qc={...ao,default:1},cl=e=>Math.round(e*1e5)/1e5,fm=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Aj(e){return e==null}const Ej=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,hm=(e,t)=>n=>!!(typeof n=="string"&&Ej.test(n)&&n.startsWith(e)||t&&!Aj(n)&&Object.prototype.hasOwnProperty.call(n,t)),vv=(e,t,n)=>s=>{if(typeof s!="string")return s;const[a,i,l,c]=s.match(fm);return{[e]:parseFloat(a),[t]:parseFloat(i),[n]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},Tj=e=>Ms(0,255,e),sh={...ao,transform:e=>Math.round(Tj(e))},$a={test:hm("rgb","red"),parse:vv("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:s=1})=>"rgba("+sh.transform(e)+", "+sh.transform(t)+", "+sh.transform(n)+", "+cl(gl.transform(s))+")"};function Dj(e){let t="",n="",s="",a="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),a=e.substring(4,5),t+=t,n+=n,s+=s,a+=a),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:a?parseInt(a,16)/255:1}}const Jh={test:hm("#"),parse:Dj,transform:$a.transform},_l=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),oa=_l("deg"),ps=_l("%"),mt=_l("px"),Ij=_l("vh"),Pj=_l("vw"),Zg={...ps,parse:e=>ps.parse(e)/100,transform:e=>ps.transform(e*100)},Oi={test:hm("hsl","hue"),parse:vv("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+ps.transform(cl(t))+", "+ps.transform(cl(n))+", "+cl(gl.transform(s))+")"},vn={test:e=>$a.test(e)||Jh.test(e)||Oi.test(e),parse:e=>$a.test(e)?$a.parse(e):Oi.test(e)?Oi.parse(e):Jh.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?$a.transform(e):Oi.transform(e),getAnimatableNone:e=>{const t=vn.parse(e);return t.alpha=0,vn.transform(t)}},Mj=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Fj(e){return isNaN(e)&&typeof e=="string"&&(e.match(fm)?.length||0)+(e.match(Mj)?.length||0)>0}const wv="number",kv="color",Rj="var",Bj="var(",Qg="${}",zj=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function bl(e){const t=e.toString(),n=[],s={color:[],number:[],var:[]},a=[];let i=0;const c=t.replace(zj,u=>(vn.test(u)?(s.color.push(i),a.push(kv),n.push(vn.parse(u))):u.startsWith(Bj)?(s.var.push(i),a.push(Rj),n.push(u)):(s.number.push(i),a.push(wv),n.push(parseFloat(u))),++i,Qg)).split(Qg);return{values:n,split:c,indexes:s,types:a}}function Sv(e){return bl(e).values}function jv(e){const{split:t,types:n}=bl(e),s=t.length;return a=>{let i="";for(let l=0;l<s;l++)if(i+=t[l],a[l]!==void 0){const c=n[l];c===wv?i+=cl(a[l]):c===kv?i+=vn.transform(a[l]):i+=a[l]}return i}}const Lj=e=>typeof e=="number"?0:vn.test(e)?vn.getAnimatableNone(e):e;function Oj(e){const t=Sv(e);return jv(e)(t.map(Lj))}const ua={test:Fj,parse:Sv,createTransformer:jv,getAnimatableNone:Oj};function ah(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function $j({hue:e,saturation:t,lightness:n,alpha:s}){e/=360,t/=100,n/=100;let a=0,i=0,l=0;if(!t)a=i=l=n;else{const c=n<.5?n*(1+t):n+t-n*t,u=2*n-c;a=ah(u,c,e+1/3),i=ah(u,c,e),l=ah(u,c,e-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(l*255),alpha:s}}function jd(e,t){return n=>n>0?t:e}const cn=(e,t,n)=>e+(t-e)*n,ih=(e,t,n)=>{const s=e*e,a=n*(t*t-s)+s;return a<0?0:Math.sqrt(a)},Vj=[Jh,$a,Oi],Hj=e=>Vj.find(t=>t.test(e));function Xg(e){const t=Hj(e);if(!t)return!1;let n=t.parse(e);return t===Oi&&(n=$j(n)),n}const Jg=(e,t)=>{const n=Xg(e),s=Xg(t);if(!n||!s)return jd(e,t);const a={...n};return i=>(a.red=ih(n.red,s.red,i),a.green=ih(n.green,s.green,i),a.blue=ih(n.blue,s.blue,i),a.alpha=cn(n.alpha,s.alpha,i),$a.transform(a))},ep=new Set(["none","hidden"]);function Uj(e,t){return ep.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function Wj(e,t){return n=>cn(e,t,n)}function pm(e){return typeof e=="number"?Wj:typeof e=="string"?um(e)?jd:vn.test(e)?Jg:Gj:Array.isArray(e)?Cv:typeof e=="object"?vn.test(e)?Jg:Kj:jd}function Cv(e,t){const n=[...e],s=n.length,a=e.map((i,l)=>pm(i)(i,t[l]));return i=>{for(let l=0;l<s;l++)n[l]=a[l](i);return n}}function Kj(e,t){const n={...e,...t},s={};for(const a in n)e[a]!==void 0&&t[a]!==void 0&&(s[a]=pm(e[a])(e[a],t[a]));return a=>{for(const i in s)n[i]=s[i](a);return n}}function qj(e,t){const n=[],s={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const i=t.types[a],l=e.indexes[i][s[i]],c=e.values[l]??0;n[a]=c,s[i]++}return n}const Gj=(e,t)=>{const n=ua.createTransformer(t),s=bl(e),a=bl(t);return s.indexes.var.length===a.indexes.var.length&&s.indexes.color.length===a.indexes.color.length&&s.indexes.number.length>=a.indexes.number.length?ep.has(e)&&!a.values.length||ep.has(t)&&!s.values.length?Uj(e,t):Cl(Cv(qj(s,a),a.values),n):jd(e,t)};function Nv(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?cn(e,t,n):pm(e)(e,t)}const Yj=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>rn.update(t,n),stop:()=>da(t),now:()=>In.isProcessing?In.timestamp:dr.now()}},_v=(e,t,n=10)=>{let s="";const a=Math.max(Math.round(t/n),2);for(let i=0;i<a;i++)s+=Math.round(e(i/(a-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},Cd=2e4;function mm(e){let t=0;const n=50;let s=e.next(t);for(;!s.done&&t<Cd;)t+=n,s=e.next(t);return t>=Cd?1/0:t}function Zj(e,t=100,n){const s=n({...e,keyframes:[0,t]}),a=Math.min(mm(s),Cd);return{type:"keyframes",ease:i=>s.next(a*i).value/t,duration:Ir(a)}}const Qj=5;function Av(e,t,n){const s=Math.max(t-Qj,0);return iv(n-e(s),t-s)}const fn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},oh=.001;function Xj({duration:e=fn.duration,bounce:t=fn.bounce,velocity:n=fn.velocity,mass:s=fn.mass}){let a,i,l=1-t;l=Ms(fn.minDamping,fn.maxDamping,l),e=Ms(fn.minDuration,fn.maxDuration,Ir(e)),l<1?(a=p=>{const h=p*l,f=h*e,m=h-n,g=tp(p,l),y=Math.exp(-f);return oh-m/g*y},i=p=>{const f=p*l*e,m=f*n+n,g=Math.pow(l,2)*Math.pow(p,2)*e,y=Math.exp(-f),b=tp(Math.pow(p,2),l);return(-a(p)+oh>0?-1:1)*((m-g)*y)/b}):(a=p=>{const h=Math.exp(-p*e),f=(p-n)*e+1;return-oh+h*f},i=p=>{const h=Math.exp(-p*e),f=(n-p)*(e*e);return h*f});const c=5/e,u=eC(a,i,c);if(e=hs(e),isNaN(u))return{stiffness:fn.stiffness,damping:fn.damping,duration:e};{const p=Math.pow(u,2)*s;return{stiffness:p,damping:l*2*Math.sqrt(s*p),duration:e}}}const Jj=12;function eC(e,t,n){let s=n;for(let a=1;a<Jj;a++)s=s-e(s)/t(s);return s}function tp(e,t){return e*Math.sqrt(1-t*t)}const tC=["duration","bounce"],nC=["stiffness","damping","mass"];function e1(e,t){return t.some(n=>e[n]!==void 0)}function rC(e){let t={velocity:fn.velocity,stiffness:fn.stiffness,damping:fn.damping,mass:fn.mass,isResolvedFromDuration:!1,...e};if(!e1(e,nC)&&e1(e,tC))if(e.visualDuration){const n=e.visualDuration,s=2*Math.PI/(n*1.2),a=s*s,i=2*Ms(.05,1,1-(e.bounce||0))*Math.sqrt(a);t={...t,mass:fn.mass,stiffness:a,damping:i}}else{const n=Xj(e);t={...t,...n,mass:fn.mass},t.isResolvedFromDuration=!0}return t}function Nd(e=fn.visualDuration,t=fn.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:s,restDelta:a}=n;const i=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],c={done:!1,value:i},{stiffness:u,damping:p,mass:h,duration:f,velocity:m,isResolvedFromDuration:g}=rC({...n,velocity:-Ir(n.velocity||0)}),y=m||0,b=p/(2*Math.sqrt(u*h)),S=l-i,v=Ir(Math.sqrt(u/h)),N=Math.abs(S)<5;s||(s=N?fn.restSpeed.granular:fn.restSpeed.default),a||(a=N?fn.restDelta.granular:fn.restDelta.default);let C;if(b<1){const R=tp(v,b);C=D=>{const V=Math.exp(-b*v*D);return l-V*((y+b*v*S)/R*Math.sin(R*D)+S*Math.cos(R*D))}}else if(b===1)C=R=>l-Math.exp(-v*R)*(S+(y+v*S)*R);else{const R=v*Math.sqrt(b*b-1);C=D=>{const V=Math.exp(-b*v*D),I=Math.min(R*D,300);return l-V*((y+b*v*S)*Math.sinh(I)+R*S*Math.cosh(I))/R}}const _={calculatedDuration:g&&f||null,next:R=>{const D=C(R);if(g)c.done=R>=f;else{let V=R===0?y:0;b<1&&(V=R===0?hs(y):Av(C,R,D));const I=Math.abs(V)<=s,A=Math.abs(l-D)<=a;c.done=I&&A}return c.value=c.done?l:D,c},toString:()=>{const R=Math.min(mm(_),Cd),D=_v(V=>_.next(R*V).value,R,30);return R+"ms "+D},toTransition:()=>{}};return _}Nd.applyToOptions=e=>{const t=Zj(e,100,Nd);return e.ease=t.ease,e.duration=hs(t.duration),e.type="keyframes",e};function np({keyframes:e,velocity:t=0,power:n=.8,timeConstant:s=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:l,min:c,max:u,restDelta:p=.5,restSpeed:h}){const f=e[0],m={done:!1,value:f},g=I=>c!==void 0&&I<c||u!==void 0&&I>u,y=I=>c===void 0?u:u===void 0||Math.abs(c-I)<Math.abs(u-I)?c:u;let b=n*t;const S=f+b,v=l===void 0?S:l(S);v!==S&&(b=v-f);const N=I=>-b*Math.exp(-I/s),C=I=>v+N(I),_=I=>{const A=N(I),U=C(I);m.done=Math.abs(A)<=p,m.value=m.done?v:U};let R,D;const V=I=>{g(m.value)&&(R=I,D=Nd({keyframes:[m.value,y(m.value)],velocity:Av(C,I,m.value),damping:a,stiffness:i,restDelta:p,restSpeed:h}))};return V(0),{calculatedDuration:null,next:I=>{let A=!1;return!D&&R===void 0&&(A=!0,_(I),V(I)),R!==void 0&&I>=R?D.next(I-R):(!A&&_(I),m)}}}function sC(e,t,n){const s=[],a=n||Fs.mix||Nv,i=e.length-1;for(let l=0;l<i;l++){let c=a(e[l],e[l+1]);if(t){const u=Array.isArray(t)?t[l]||Pr:t;c=Cl(u,c)}s.push(c)}return s}function aC(e,t,{clamp:n=!0,ease:s,mixer:a}={}){const i=e.length;if(im(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const l=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const c=sC(t,s,a),u=c.length,p=h=>{if(l&&h<e[0])return t[0];let f=0;if(u>1)for(;f<e.length-2&&!(h<e[f+1]);f++);const m=xl(e[f],e[f+1],h);return c[f](m)};return n?h=>p(Ms(e[0],e[i-1],h)):p}function iC(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const a=xl(0,t,s);e.push(cn(n,1,a))}}function oC(e){const t=[0];return iC(t,e.length-1),t}function lC(e,t){return e.map(n=>n*t)}function cC(e,t){return e.map(()=>t||mv).splice(0,e.length-1)}function dl({duration:e=300,keyframes:t,times:n,ease:s="easeInOut"}){const a=vj(s)?s.map(Yg):Yg(s),i={done:!1,value:t[0]},l=lC(n&&n.length===t.length?n:oC(t),e),c=aC(l,t,{ease:Array.isArray(a)?a:cC(t,a)});return{calculatedDuration:e,next:u=>(i.value=c(u),i.done=u>=e,i)}}const dC=e=>e!==null;function xm(e,{repeat:t,repeatType:n="loop"},s,a=1){const i=e.filter(dC),c=a<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!c||s===void 0?i[c]:s}const uC={decay:np,inertia:np,tween:dl,keyframes:dl,spring:Nd};function Ev(e){typeof e.type=="string"&&(e.type=uC[e.type])}class gm{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const fC=e=>e/100;class bm extends gm{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==dr.now()&&this.tick(dr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;Ev(t);const{type:n=dl,repeat:s=0,repeatDelay:a=0,repeatType:i,velocity:l=0}=t;let{keyframes:c}=t;const u=n||dl;u!==dl&&typeof c[0]!="number"&&(this.mixKeyframes=Cl(fC,Nv(c[0],c[1])),c=[0,100]);const p=u({...t,keyframes:c});i==="mirror"&&(this.mirroredGenerator=u({...t,keyframes:[...c].reverse(),velocity:-l})),p.calculatedDuration===null&&(p.calculatedDuration=mm(p));const{calculatedDuration:h}=p;this.calculatedDuration=h,this.resolvedDuration=h+a,this.totalDuration=this.resolvedDuration*(s+1)-a,this.generator=p}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:s,totalDuration:a,mixKeyframes:i,mirroredGenerator:l,resolvedDuration:c,calculatedDuration:u}=this;if(this.startTime===null)return s.next(0);const{delay:p=0,keyframes:h,repeat:f,repeatType:m,repeatDelay:g,type:y,onUpdate:b,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-a/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const v=this.currentTime-p*(this.playbackSpeed>=0?1:-1),N=this.playbackSpeed>=0?v<0:v>a;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let C=this.currentTime,_=s;if(f){const I=Math.min(this.currentTime,a)/c;let A=Math.floor(I),U=I%1;!U&&I>=1&&(U=1),U===1&&A--,A=Math.min(A,f+1),!!(A%2)&&(m==="reverse"?(U=1-U,g&&(U-=g/c)):m==="mirror"&&(_=l)),C=Ms(0,1,U)*c}const R=N?{done:!1,value:h[0]}:_.next(C);i&&(R.value=i(R.value));let{done:D}=R;!N&&u!==null&&(D=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const V=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return V&&y!==np&&(R.value=xm(h,this.options,S,this.speed)),b&&b(R.value),V&&this.finish(),R}then(t,n){return this.finished.then(t,n)}get duration(){return Ir(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Ir(t)}get time(){return Ir(this.currentTime)}set time(t){t=hs(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(dr.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Ir(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=Yj,startTime:n}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),this.options.onPlay?.();const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(dr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function hC(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Va=e=>e*180/Math.PI,rp=e=>{const t=Va(Math.atan2(e[1],e[0]));return sp(t)},pC={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:rp,rotateZ:rp,skewX:e=>Va(Math.atan(e[1])),skewY:e=>Va(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},sp=e=>(e=e%360,e<0&&(e+=360),e),t1=rp,n1=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),r1=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),mC={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:n1,scaleY:r1,scale:e=>(n1(e)+r1(e))/2,rotateX:e=>sp(Va(Math.atan2(e[6],e[5]))),rotateY:e=>sp(Va(Math.atan2(-e[2],e[0]))),rotateZ:t1,rotate:t1,skewX:e=>Va(Math.atan(e[4])),skewY:e=>Va(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function ap(e){return e.includes("scale")?1:0}function ip(e,t){if(!e||e==="none")return ap(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,a;if(n)s=mC,a=n;else{const c=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=pC,a=c}if(!a)return ap(t);const i=s[t],l=a[1].split(",").map(gC);return typeof i=="function"?i(l):l[i]}const xC=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return ip(n,t)};function gC(e){return parseFloat(e.trim())}const io=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],oo=new Set(io),s1=e=>e===ao||e===mt,bC=new Set(["x","y","z"]),yC=io.filter(e=>!bC.has(e));function vC(e){const t=[];return yC.forEach(n=>{const s=e.getValue(n);s!==void 0&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t}const Ua={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>ip(t,"x"),y:(e,{transform:t})=>ip(t,"y")};Ua.translateX=Ua.x;Ua.translateY=Ua.y;const Wa=new Set;let op=!1,lp=!1,cp=!1;function Tv(){if(lp){const e=Array.from(Wa).filter(s=>s.needsMeasurement),t=new Set(e.map(s=>s.element)),n=new Map;t.forEach(s=>{const a=vC(s);a.length&&(n.set(s,a),s.render())}),e.forEach(s=>s.measureInitialState()),t.forEach(s=>{s.render();const a=n.get(s);a&&a.forEach(([i,l])=>{s.getValue(i)?.set(l)})}),e.forEach(s=>s.measureEndState()),e.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}lp=!1,op=!1,Wa.forEach(e=>e.complete(cp)),Wa.clear()}function Dv(){Wa.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(lp=!0)})}function wC(){cp=!0,Dv(),Tv(),cp=!1}class ym{constructor(t,n,s,a,i,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=s,this.motionValue=a,this.element=i,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Wa.add(this),op||(op=!0,rn.read(Dv),rn.resolveKeyframes(Tv))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:s,motionValue:a}=this;if(t[0]===null){const i=a?.get(),l=t[t.length-1];if(i!==void 0)t[0]=i;else if(s&&n){const c=s.readValue(n,l);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=l),a&&i===void 0&&a.set(t[0])}hC(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Wa.delete(this)}cancel(){this.state==="scheduled"&&(Wa.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const kC=e=>e.startsWith("--");function SC(e,t,n){kC(t)?e.style.setProperty(t,n):e.style[t]=n}const jC=om(()=>window.ScrollTimeline!==void 0),CC={};function NC(e,t){const n=om(e);return()=>CC[t]??n()}const Iv=NC(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),sl=([e,t,n,s])=>`cubic-bezier(${e}, ${t}, ${n}, ${s})`,a1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:sl([0,.65,.55,1]),circOut:sl([.55,0,1,.45]),backIn:sl([.31,.01,.66,-.59]),backOut:sl([.33,1.53,.69,.99])};function Pv(e,t){if(e)return typeof e=="function"?Iv()?_v(e,t):"ease-out":xv(e)?sl(e):Array.isArray(e)?e.map(n=>Pv(n,t)||a1.easeOut):a1[e]}function _C(e,t,n,{delay:s=0,duration:a=300,repeat:i=0,repeatType:l="loop",ease:c="easeOut",times:u}={},p=void 0){const h={[t]:n};u&&(h.offset=u);const f=Pv(c,a);Array.isArray(f)&&(h.easing=f);const m={delay:s,duration:a,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:l==="reverse"?"alternate":"normal"};return p&&(m.pseudoElement=p),e.animate(h,m)}function Mv(e){return typeof e=="function"&&"applyToOptions"in e}function AC({type:e,...t}){return Mv(e)&&Iv()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class EC extends gm{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:s,keyframes:a,pseudoElement:i,allowFlatten:l=!1,finalKeyframe:c,onComplete:u}=t;this.isPseudoElement=!!i,this.allowFlatten=l,this.options=t,im(typeof t.type!="string");const p=AC(t);this.animation=_C(n,s,a,p,i),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const h=xm(a,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(h):SC(n,s,h),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Ir(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Ir(t)}get time(){return Ir(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=hs(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&jC()?(this.animation.timeline=t,Pr):n(this)}}const Fv={anticipate:fv,backInOut:uv,circInOut:pv};function TC(e){return e in Fv}function DC(e){typeof e.ease=="string"&&TC(e.ease)&&(e.ease=Fv[e.ease])}const i1=10;class IC extends EC{constructor(t){DC(t),Ev(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:s,onComplete:a,element:i,...l}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const c=new bm({...l,autoplay:!1}),u=hs(this.finishedTime??this.time);n.setWithVelocity(c.sample(u-i1).value,c.sample(u).value,i1),c.stop()}}const o1=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ua.test(e)||e==="0")&&!e.startsWith("url("));function PC(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function MC(e,t,n,s){const a=e[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],l=o1(a,t),c=o1(i,t);return!l||!c?!1:PC(e)||(n==="spring"||Mv(n))&&s}function dp(e){e.duration=0,e.type="keyframes"}const FC=new Set(["opacity","clipPath","filter","transform"]),RC=om(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function BC(e){const{motionValue:t,name:n,repeatDelay:s,repeatType:a,damping:i,type:l}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:p}=t.owner.getProps();return RC()&&n&&FC.has(n)&&(n!=="transform"||!p)&&!u&&!s&&a!=="mirror"&&i!==0&&l!=="inertia"}const zC=40;class LC extends gm{constructor({autoplay:t=!0,delay:n=0,type:s="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:l="loop",keyframes:c,name:u,motionValue:p,element:h,...f}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=dr.now();const m={autoplay:t,delay:n,type:s,repeat:a,repeatDelay:i,repeatType:l,name:u,motionValue:p,element:h,...f},g=h?.KeyframeResolver||ym;this.keyframeResolver=new g(c,(y,b,S)=>this.onKeyframesResolved(y,b,m,!S),u,p,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,s,a){this.keyframeResolver=void 0;const{name:i,type:l,velocity:c,delay:u,isHandoff:p,onUpdate:h}=s;this.resolvedAt=dr.now(),MC(t,i,l,c)||((Fs.instantAnimations||!u)&&h?.(xm(t,s,n)),t[0]=t[t.length-1],dp(s),s.repeat=0);const m={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>zC?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:t},g=!p&&BC(m)?new IC({...m,element:m.motionValue.owner.current}):new bm(m);g.finished.then(()=>this.notifyFinished()).catch(Pr),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),wC()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const OC=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function $C(e){const t=OC.exec(e);if(!t)return[,];const[,n,s,a]=t;return[`--${n??s}`,a]}function Rv(e,t,n=1){const[s,a]=$C(e);if(!s)return;const i=window.getComputedStyle(t).getPropertyValue(s);if(i){const l=i.trim();return rv(l)?parseFloat(l):l}return um(a)?Rv(a,t,n+1):a}function vm(e,t){return e?.[t]??e?.default??e}const Bv=new Set(["width","height","top","left","right","bottom",...io]),VC={test:e=>e==="auto",parse:e=>e},zv=e=>t=>t.test(e),Lv=[ao,mt,ps,oa,Pj,Ij,VC],l1=e=>Lv.find(zv(e));function HC(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||av(e):!0}const UC=new Set(["brightness","contrast","saturate","opacity"]);function WC(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=n.match(fm)||[];if(!s)return e;const a=n.replace(s,"");let i=UC.has(t)?1:0;return s!==n&&(i*=100),t+"("+i+a+")"}const KC=/\b([a-z-]*)\(.*?\)/gu,up={...ua,getAnimatableNone:e=>{const t=e.match(KC);return t?t.map(WC).join(" "):e}},c1={...ao,transform:Math.round},qC={rotate:oa,rotateX:oa,rotateY:oa,rotateZ:oa,scale:qc,scaleX:qc,scaleY:qc,scaleZ:qc,skew:oa,skewX:oa,skewY:oa,distance:mt,translateX:mt,translateY:mt,translateZ:mt,x:mt,y:mt,z:mt,perspective:mt,transformPerspective:mt,opacity:gl,originX:Zg,originY:Zg,originZ:mt},wm={borderWidth:mt,borderTopWidth:mt,borderRightWidth:mt,borderBottomWidth:mt,borderLeftWidth:mt,borderRadius:mt,radius:mt,borderTopLeftRadius:mt,borderTopRightRadius:mt,borderBottomRightRadius:mt,borderBottomLeftRadius:mt,width:mt,maxWidth:mt,height:mt,maxHeight:mt,top:mt,right:mt,bottom:mt,left:mt,padding:mt,paddingTop:mt,paddingRight:mt,paddingBottom:mt,paddingLeft:mt,margin:mt,marginTop:mt,marginRight:mt,marginBottom:mt,marginLeft:mt,backgroundPositionX:mt,backgroundPositionY:mt,...qC,zIndex:c1,fillOpacity:gl,strokeOpacity:gl,numOctaves:c1},GC={...wm,color:vn,backgroundColor:vn,outlineColor:vn,fill:vn,stroke:vn,borderColor:vn,borderTopColor:vn,borderRightColor:vn,borderBottomColor:vn,borderLeftColor:vn,filter:up,WebkitFilter:up},Ov=e=>GC[e];function $v(e,t){let n=Ov(e);return n!==up&&(n=ua),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const YC=new Set(["auto","none","0"]);function ZC(e,t,n){let s=0,a;for(;s<e.length&&!a;){const i=e[s];typeof i=="string"&&!YC.has(i)&&bl(i).values.length&&(a=e[s]),s++}if(a&&n)for(const i of t)e[i]=$v(n,a)}class QC extends ym{constructor(t,n,s,a,i){super(t,n,s,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<t.length;u++){let p=t[u];if(typeof p=="string"&&(p=p.trim(),um(p))){const h=Rv(p,n.current);h!==void 0&&(t[u]=h),u===t.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!Bv.has(s)||t.length!==2)return;const[a,i]=t,l=l1(a),c=l1(i);if(l!==c)if(s1(l)&&s1(c))for(let u=0;u<t.length;u++){const p=t[u];typeof p=="string"&&(t[u]=parseFloat(p))}else Ua[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,s=[];for(let a=0;a<t.length;a++)(t[a]===null||HC(t[a]))&&s.push(a);s.length&&ZC(t,s,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:s}=this;if(!t||!t.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ua[s](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&t.getValue(s,a).jump(a,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:s}=this;if(!t||!t.current)return;const a=t.getValue(n);a&&a.jump(this.measuredOrigin,!1);const i=s.length-1,l=s[i];s[i]=Ua[n](t.measureViewportBox(),window.getComputedStyle(t.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,u])=>{t.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function XC(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let s=document;const a=n?.[e]??s.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}const Vv=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Hv(e){return sv(e)&&"offsetHeight"in e}const d1=30,JC=e=>!isNaN(parseFloat(e));class eN{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{const a=dr.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=dr.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=JC(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new lm);const s=this.events[t].add(n);return t==="change"?()=>{s(),rn.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-s}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=dr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>d1)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,d1);return iv(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ji(e,t){return new eN(e,t)}const{schedule:km}=gv(queueMicrotask,!1),Kr={x:!1,y:!1};function Uv(){return Kr.x||Kr.y}function tN(e){return e==="x"||e==="y"?Kr[e]?null:(Kr[e]=!0,()=>{Kr[e]=!1}):Kr.x||Kr.y?null:(Kr.x=Kr.y=!0,()=>{Kr.x=Kr.y=!1})}function Wv(e,t){const n=XC(e),s=new AbortController,a={passive:!0,...t,signal:s.signal};return[n,a,()=>s.abort()]}function u1(e){return!(e.pointerType==="touch"||Uv())}function nN(e,t,n={}){const[s,a,i]=Wv(e,n),l=c=>{if(!u1(c))return;const{target:u}=c,p=t(u,c);if(typeof p!="function"||!u)return;const h=f=>{u1(f)&&(p(f),u.removeEventListener("pointerleave",h))};u.addEventListener("pointerleave",h,a)};return s.forEach(c=>{c.addEventListener("pointerenter",l,a)}),i}const Kv=(e,t)=>t?e===t?!0:Kv(e,t.parentElement):!1,Sm=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,rN=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function sN(e){return rN.has(e.tagName)||e.tabIndex!==-1}const fd=new WeakSet;function f1(e){return t=>{t.key==="Enter"&&e(t)}}function lh(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const aN=(e,t)=>{const n=e.currentTarget;if(!n)return;const s=f1(()=>{if(fd.has(n))return;lh(n,"down");const a=f1(()=>{lh(n,"up")}),i=()=>lh(n,"cancel");n.addEventListener("keyup",a,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",s,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),t)};function h1(e){return Sm(e)&&!Uv()}function iN(e,t,n={}){const[s,a,i]=Wv(e,n),l=c=>{const u=c.currentTarget;if(!h1(c))return;fd.add(u);const p=t(u,c),h=(g,y)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",m),fd.has(u)&&fd.delete(u),h1(g)&&typeof p=="function"&&p(g,{success:y})},f=g=>{h(g,u===window||u===document||n.useGlobalTarget||Kv(u,g.target))},m=g=>{h(g,!1)};window.addEventListener("pointerup",f,a),window.addEventListener("pointercancel",m,a)};return s.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",l,a),Hv(c)&&(c.addEventListener("focus",p=>aN(p,a)),!sN(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),i}function qv(e){return sv(e)&&"ownerSVGElement"in e}function oN(e){return qv(e)&&e.tagName==="svg"}const Hn=e=>!!(e&&e.getVelocity),lN=[...Lv,vn,ua],cN=e=>lN.find(zv(e)),jm=k.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function p1(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function dN(...e){return t=>{let n=!1;const s=e.map(a=>{const i=p1(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<s.length;a++){const i=s[a];typeof i=="function"?i():p1(e[a],null)}}}}function uN(...e){return k.useCallback(dN(...e),e)}class fN extends k.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const s=n.offsetParent,a=Hv(s)&&s.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=a-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function hN({children:e,isPresent:t,anchorX:n,root:s}){const a=k.useId(),i=k.useRef(null),l=k.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=k.useContext(jm),u=uN(i,e?.ref);return k.useInsertionEffect(()=>{const{width:p,height:h,top:f,left:m,right:g}=l.current;if(t||!i.current||!p||!h)return;const y=n==="left"?`left: ${m}`:`right: ${g}`;i.current.dataset.motionPopId=a;const b=document.createElement("style");c&&(b.nonce=c);const S=s??document.head;return S.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${h}px !important;
            ${y}px !important;
            top: ${f}px !important;
          }
        `),()=>{S.contains(b)&&S.removeChild(b)}},[t]),r.jsx(fN,{isPresent:t,childRef:i,sizeRef:l,children:k.cloneElement(e,{ref:u})})}const pN=({children:e,initial:t,isPresent:n,onExitComplete:s,custom:a,presenceAffectsLayout:i,mode:l,anchorX:c,root:u})=>{const p=nm(mN),h=k.useId();let f=!0,m=k.useMemo(()=>(f=!1,{id:h,initial:t,isPresent:n,custom:a,onExitComplete:g=>{p.set(g,!0);for(const y of p.values())if(!y)return;s&&s()},register:g=>(p.set(g,!1),()=>p.delete(g))}),[n,p,s]);return i&&f&&(m={...m}),k.useMemo(()=>{p.forEach((g,y)=>p.set(y,!1))},[n]),k.useEffect(()=>{!n&&!p.size&&s&&s()},[n]),l==="popLayout"&&(e=r.jsx(hN,{isPresent:n,anchorX:c,root:u,children:e})),r.jsx(Qd.Provider,{value:m,children:e})};function mN(){return new Map}function Gv(e=!0){const t=k.useContext(Qd);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:a}=t,i=k.useId();k.useEffect(()=>{if(e)return a(i)},[e]);const l=k.useCallback(()=>e&&s&&s(i),[i,s,e]);return!n&&s?[!1,l]:[!0]}const Gc=e=>e.key||"";function m1(e){const t=[];return k.Children.forEach(e,n=>{k.isValidElement(n)&&t.push(n)}),t}const Be=({children:e,custom:t,initial:n=!0,onExitComplete:s,presenceAffectsLayout:a=!0,mode:i="sync",propagate:l=!1,anchorX:c="left",root:u})=>{const[p,h]=Gv(l),f=k.useMemo(()=>m1(e),[e]),m=l&&!p?[]:f.map(Gc),g=k.useRef(!0),y=k.useRef(f),b=nm(()=>new Map),[S,v]=k.useState(f),[N,C]=k.useState(f);nv(()=>{g.current=!1,y.current=f;for(let D=0;D<N.length;D++){const V=Gc(N[D]);m.includes(V)?b.delete(V):b.get(V)!==!0&&b.set(V,!1)}},[N,m.length,m.join("-")]);const _=[];if(f!==S){let D=[...f];for(let V=0;V<N.length;V++){const I=N[V],A=Gc(I);m.includes(A)||(D.splice(V,0,I),_.push(I))}return i==="wait"&&_.length&&(D=_),C(m1(D)),v(f),null}const{forceRender:R}=k.useContext(tm);return r.jsx(r.Fragment,{children:N.map(D=>{const V=Gc(D),I=l&&!p?!1:f===N||m.includes(V),A=()=>{if(b.has(V))b.set(V,!0);else return;let U=!0;b.forEach(W=>{W||(U=!1)}),U&&(R?.(),C(y.current),l&&h?.(),s&&s())};return r.jsx(pN,{isPresent:I,initial:!g.current||n?void 0:!1,custom:t,presenceAffectsLayout:a,mode:i,root:u,onExitComplete:I?void 0:A,anchorX:c,children:D},V)})})},Yv=k.createContext({strict:!1}),x1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},eo={};for(const e in x1)eo[e]={isEnabled:t=>x1[e].some(n=>!!t[n])};function xN(e){for(const t in e)eo[t]={...eo[t],...e[t]}}const gN=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function _d(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||gN.has(e)}let Zv=e=>!_d(e);function bN(e){typeof e=="function"&&(Zv=t=>t.startsWith("on")?!_d(t):e(t))}try{bN(require("@emotion/is-prop-valid").default)}catch{}function yN(e,t,n){const s={};for(const a in e)a==="values"&&typeof e.values=="object"||(Zv(a)||n===!0&&_d(a)||!t&&!_d(a)||e.draggable&&a.startsWith("onDrag"))&&(s[a]=e[a]);return s}const Xd=k.createContext({});function Jd(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function yl(e){return typeof e=="string"||Array.isArray(e)}const Cm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Nm=["initial",...Cm];function eu(e){return Jd(e.animate)||Nm.some(t=>yl(e[t]))}function Qv(e){return!!(eu(e)||e.variants)}function vN(e,t){if(eu(e)){const{initial:n,animate:s}=e;return{initial:n===!1||yl(n)?n:void 0,animate:yl(s)?s:void 0}}return e.inherit!==!1?t:{}}function wN(e){const{initial:t,animate:n}=vN(e,k.useContext(Xd));return k.useMemo(()=>({initial:t,animate:n}),[g1(t),g1(n)])}function g1(e){return Array.isArray(e)?e.join(" "):e}function b1(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Xo={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(mt.test(e))e=parseFloat(e);else return e;const n=b1(e,t.target.x),s=b1(e,t.target.y);return`${n}% ${s}%`}},kN={correct:(e,{treeScale:t,projectionDelta:n})=>{const s=e,a=ua.parse(e);if(a.length>5)return s;const i=ua.createTransformer(e),l=typeof a[0]!="number"?1:0,c=n.x.scale*t.x,u=n.y.scale*t.y;a[0+l]/=c,a[1+l]/=u;const p=cn(c,u,.5);return typeof a[2+l]=="number"&&(a[2+l]/=p),typeof a[3+l]=="number"&&(a[3+l]/=p),i(a)}},fp={borderRadius:{...Xo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Xo,borderTopRightRadius:Xo,borderBottomLeftRadius:Xo,borderBottomRightRadius:Xo,boxShadow:kN};function Xv(e,{layout:t,layoutId:n}){return oo.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!fp[e]||e==="opacity")}const SN={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},jN=io.length;function CN(e,t,n){let s="",a=!0;for(let i=0;i<jN;i++){const l=io[i],c=e[l];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(l.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||n){const p=Vv(c,wm[l]);if(!u){a=!1;const h=SN[l]||l;s+=`${h}(${p}) `}n&&(t[l]=p)}}return s=s.trim(),n?s=n(t,a?"":s):a&&(s="none"),s}function _m(e,t,n){const{style:s,vars:a,transformOrigin:i}=e;let l=!1,c=!1;for(const u in t){const p=t[u];if(oo.has(u)){l=!0;continue}else if(yv(u)){a[u]=p;continue}else{const h=Vv(p,wm[u]);u.startsWith("origin")?(c=!0,i[u]=h):s[u]=h}}if(t.transform||(l||n?s.transform=CN(t,e.transform,n):s.transform&&(s.transform="none")),c){const{originX:u="50%",originY:p="50%",originZ:h=0}=i;s.transformOrigin=`${u} ${p} ${h}`}}const Am=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Jv(e,t,n){for(const s in t)!Hn(t[s])&&!Xv(s,n)&&(e[s]=t[s])}function NN({transformTemplate:e},t){return k.useMemo(()=>{const n=Am();return _m(n,t,e),Object.assign({},n.vars,n.style)},[t])}function _N(e,t){const n=e.style||{},s={};return Jv(s,n,e),Object.assign(s,NN(e,t)),s}function AN(e,t){const n={},s=_N(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const EN={offset:"stroke-dashoffset",array:"stroke-dasharray"},TN={offset:"strokeDashoffset",array:"strokeDasharray"};function DN(e,t,n=1,s=0,a=!0){e.pathLength=1;const i=a?EN:TN;e[i.offset]=mt.transform(-s);const l=mt.transform(t),c=mt.transform(n);e[i.array]=`${l} ${c}`}function e2(e,{attrX:t,attrY:n,attrScale:s,pathLength:a,pathSpacing:i=1,pathOffset:l=0,...c},u,p,h){if(_m(e,c,p),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:m}=e;f.transform&&(m.transform=f.transform,delete f.transform),(m.transform||f.transformOrigin)&&(m.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),m.transform&&(m.transformBox=h?.transformBox??"fill-box",delete f.transformBox),t!==void 0&&(f.x=t),n!==void 0&&(f.y=n),s!==void 0&&(f.scale=s),a!==void 0&&DN(f,a,i,l,!1)}const t2=()=>({...Am(),attrs:{}}),n2=e=>typeof e=="string"&&e.toLowerCase()==="svg";function IN(e,t,n,s){const a=k.useMemo(()=>{const i=t2();return e2(i,t,n2(s),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};Jv(i,e.style,e),a.style={...i,...a.style}}return a}const PN=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Em(e){return typeof e!="string"||e.includes("-")?!1:!!(PN.indexOf(e)>-1||/[A-Z]/u.test(e))}function MN(e,t,n,{latestValues:s},a,i=!1){const c=(Em(e)?IN:AN)(t,s,a,e),u=yN(t,typeof e=="string",i),p=e!==k.Fragment?{...u,...c,ref:n}:{},{children:h}=t,f=k.useMemo(()=>Hn(h)?h.get():h,[h]);return k.createElement(e,{...p,children:f})}function y1(e){const t=[{},{}];return e?.values.forEach((n,s)=>{t[0][s]=n.get(),t[1][s]=n.getVelocity()}),t}function Tm(e,t,n,s){if(typeof t=="function"){const[a,i]=y1(s);t=t(n!==void 0?n:e.custom,a,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[a,i]=y1(s);t=t(n!==void 0?n:e.custom,a,i)}return t}function hd(e){return Hn(e)?e.get():e}function FN({scrapeMotionValuesFromProps:e,createRenderState:t},n,s,a){return{latestValues:RN(n,s,a,e),renderState:t()}}function RN(e,t,n,s){const a={},i=s(e,{});for(const m in i)a[m]=hd(i[m]);let{initial:l,animate:c}=e;const u=eu(e),p=Qv(e);t&&p&&!u&&e.inherit!==!1&&(l===void 0&&(l=t.initial),c===void 0&&(c=t.animate));let h=n?n.initial===!1:!1;h=h||l===!1;const f=h?c:l;if(f&&typeof f!="boolean"&&!Jd(f)){const m=Array.isArray(f)?f:[f];for(let g=0;g<m.length;g++){const y=Tm(e,m[g]);if(y){const{transitionEnd:b,transition:S,...v}=y;for(const N in v){let C=v[N];if(Array.isArray(C)){const _=h?C.length-1:0;C=C[_]}C!==null&&(a[N]=C)}for(const N in b)a[N]=b[N]}}}return a}const r2=e=>(t,n)=>{const s=k.useContext(Xd),a=k.useContext(Qd),i=()=>FN(e,t,s,a);return n?i():nm(i)};function Dm(e,t,n){const{style:s}=e,a={};for(const i in s)(Hn(s[i])||t.style&&Hn(t.style[i])||Xv(i,e)||n?.getValue(i)?.liveStyle!==void 0)&&(a[i]=s[i]);return a}const BN=r2({scrapeMotionValuesFromProps:Dm,createRenderState:Am});function s2(e,t,n){const s=Dm(e,t,n);for(const a in e)if(Hn(e[a])||Hn(t[a])){const i=io.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;s[i]=e[a]}return s}const zN=r2({scrapeMotionValuesFromProps:s2,createRenderState:t2}),LN=Symbol.for("motionComponentSymbol");function $i(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function ON(e,t,n){return k.useCallback(s=>{s&&e.onMount&&e.onMount(s),t&&(s?t.mount(s):t.unmount()),n&&(typeof n=="function"?n(s):$i(n)&&(n.current=s))},[t])}const Im=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),$N="framerAppearId",a2="data-"+Im($N),i2=k.createContext({});function VN(e,t,n,s,a){const{visualElement:i}=k.useContext(Xd),l=k.useContext(Yv),c=k.useContext(Qd),u=k.useContext(jm).reducedMotion,p=k.useRef(null);s=s||l.renderer,!p.current&&s&&(p.current=s(e,{visualState:t,parent:i,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const h=p.current,f=k.useContext(i2);h&&!h.projection&&a&&(h.type==="html"||h.type==="svg")&&HN(p.current,n,a,f);const m=k.useRef(!1);k.useInsertionEffect(()=>{h&&m.current&&h.update(n,c)});const g=n[a2],y=k.useRef(!!g&&!window.MotionHandoffIsComplete?.(g)&&window.MotionHasOptimisedAnimation?.(g));return nv(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),y.current&&h.animationState&&h.animationState.animateChanges())}),k.useEffect(()=>{h&&(!y.current&&h.animationState&&h.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(g)}),y.current=!1),h.enteringChildren=void 0)}),h}function HN(e,t,n,s){const{layoutId:a,layout:i,drag:l,dragConstraints:c,layoutScroll:u,layoutRoot:p,layoutCrossfade:h}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:o2(e.parent)),e.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!l||c&&$i(c),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:s,crossfade:h,layoutScroll:u,layoutRoot:p})}function o2(e){if(e)return e.options.allowProjection!==!1?e.projection:o2(e.parent)}function ch(e,{forwardMotionProps:t=!1}={},n,s){n&&xN(n);const a=Em(e)?zN:BN;function i(c,u){let p;const h={...k.useContext(jm),...c,layoutId:UN(c)},{isStatic:f}=h,m=wN(c),g=a(c,f);if(!f&&rm){WN();const y=KN(h);p=y.MeasureLayout,m.visualElement=VN(e,g,h,s,y.ProjectionNode)}return r.jsxs(Xd.Provider,{value:m,children:[p&&m.visualElement?r.jsx(p,{visualElement:m.visualElement,...h}):null,MN(e,c,ON(g,m.visualElement,u),g,f,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const l=k.forwardRef(i);return l[LN]=e,l}function UN({layoutId:e}){const t=k.useContext(tm).id;return t&&e!==void 0?t+"-"+e:e}function WN(e,t){k.useContext(Yv).strict}function KN(e){const{drag:t,layout:n}=eo;if(!t&&!n)return{};const s={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function qN(e,t){if(typeof Proxy>"u")return ch;const n=new Map,s=(i,l)=>ch(i,l,e,t),a=(i,l)=>s(i,l);return new Proxy(a,{get:(i,l)=>l==="create"?s:(n.has(l)||n.set(l,ch(l,void 0,e,t)),n.get(l))})}function l2({top:e,left:t,right:n,bottom:s}){return{x:{min:t,max:n},y:{min:e,max:s}}}function GN({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function YN(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function dh(e){return e===void 0||e===1}function hp({scale:e,scaleX:t,scaleY:n}){return!dh(e)||!dh(t)||!dh(n)}function Oa(e){return hp(e)||c2(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function c2(e){return v1(e.x)||v1(e.y)}function v1(e){return e&&e!=="0%"}function Ad(e,t,n){const s=e-n,a=t*s;return n+a}function w1(e,t,n,s,a){return a!==void 0&&(e=Ad(e,a,s)),Ad(e,n,s)+t}function pp(e,t=0,n=1,s,a){e.min=w1(e.min,t,n,s,a),e.max=w1(e.max,t,n,s,a)}function d2(e,{x:t,y:n}){pp(e.x,t.translate,t.scale,t.originPoint),pp(e.y,n.translate,n.scale,n.originPoint)}const k1=.999999999999,S1=1.0000000000001;function ZN(e,t,n,s=!1){const a=n.length;if(!a)return;t.x=t.y=1;let i,l;for(let c=0;c<a;c++){i=n[c],l=i.projectionDelta;const{visualElement:u}=i.options;u&&u.props.style&&u.props.style.display==="contents"||(s&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Hi(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,d2(e,l)),s&&Oa(i.latestValues)&&Hi(e,i.latestValues))}t.x<S1&&t.x>k1&&(t.x=1),t.y<S1&&t.y>k1&&(t.y=1)}function Vi(e,t){e.min=e.min+t,e.max=e.max+t}function j1(e,t,n,s,a=.5){const i=cn(e.min,e.max,a);pp(e,t,n,i,s)}function Hi(e,t){j1(e.x,t.x,t.scaleX,t.scale,t.originX),j1(e.y,t.y,t.scaleY,t.scale,t.originY)}function u2(e,t){return l2(YN(e.getBoundingClientRect(),t))}function QN(e,t,n){const s=u2(e,n),{scroll:a}=t;return a&&(Vi(s.x,a.offset.x),Vi(s.y,a.offset.y)),s}const C1=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ui=()=>({x:C1(),y:C1()}),N1=()=>({min:0,max:0}),jn=()=>({x:N1(),y:N1()}),mp={current:null},f2={current:!1};function XN(){if(f2.current=!0,!!rm)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>mp.current=e.matches;e.addEventListener("change",t),t()}else mp.current=!1}const JN=new WeakMap;function e4(e,t,n){for(const s in t){const a=t[s],i=n[s];if(Hn(a))e.addValue(s,a);else if(Hn(i))e.addValue(s,Ji(a,{owner:e}));else if(i!==a)if(e.hasValue(s)){const l=e.getValue(s);l.liveStyle===!0?l.jump(a):l.hasAnimated||l.set(a)}else{const l=e.getStaticValue(s);e.addValue(s,Ji(l!==void 0?l:a,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const _1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class t4{scrapeMotionValuesFromProps(t,n,s){return{}}constructor({parent:t,props:n,presenceContext:s,reducedMotionConfig:a,blockInitialAnimation:i,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ym,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=dr.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,rn.render(this.render,!1,!0))};const{latestValues:u,renderState:p}=l;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=p,this.parent=t,this.props=n,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=c,this.blockInitialAnimation=!!i,this.isControllingVariants=eu(n),this.isVariantNode=Qv(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in f){const g=f[m];u[m]!==void 0&&Hn(g)&&g.set(u[m])}}mount(t){this.current=t,JN.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),f2.current||XN(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:mp.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),da(this.notifyUpdate),da(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const s=oo.has(t);s&&this.onBindTransform&&this.onBindTransform();const a=n.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&rn.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{a(),i&&i(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in eo){const n=eo[t];if(!n)continue;const{isEnabled:s,Feature:a}=n;if(!this.features[t]&&a&&s(this.props)&&(this.features[t]=new a(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):jn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<_1.length;s++){const a=_1[s];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,l=t[i];l&&(this.propEventSubscriptions[a]=this.on(a,l))}this.prevMotionValues=e4(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const s=this.values.get(t);n!==s&&(s&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&n!==void 0&&(s=Ji(n===null?void 0:n,{owner:this}),this.addValue(t,s)),s}readValue(t,n){let s=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return s!=null&&(typeof s=="string"&&(rv(s)||av(s))?s=parseFloat(s):!cN(s)&&ua.test(n)&&(s=$v(t,n)),this.setBaseTarget(t,Hn(s)?s.get():s)),Hn(s)?s.get():s}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const i=Tm(this.props,n,this.presenceContext?.custom);i&&(s=i[t])}if(n&&s!==void 0)return s;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!Hn(a)?a:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new lm),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){km.render(this.render)}}class h2 extends t4{constructor(){super(...arguments),this.KeyframeResolver=QC}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:s}){delete n[t],delete s[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Hn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function p2(e,{style:t,vars:n},s,a){const i=e.style;let l;for(l in t)i[l]=t[l];a?.applyProjectionStyles(i,s);for(l in n)i.setProperty(l,n[l])}function n4(e){return window.getComputedStyle(e)}class r4 extends h2{constructor(){super(...arguments),this.type="html",this.renderInstance=p2}readValueFromInstance(t,n){if(oo.has(n))return this.projection?.isProjecting?ap(n):xC(t,n);{const s=n4(t),a=(yv(n)?s.getPropertyValue(n):s[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:n}){return u2(t,n)}build(t,n,s){_m(t,n,s.transformTemplate)}scrapeMotionValuesFromProps(t,n,s){return Dm(t,n,s)}}const m2=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function s4(e,t,n,s){p2(e,t,void 0,s);for(const a in t.attrs)e.setAttribute(m2.has(a)?a:Im(a),t.attrs[a])}class a4 extends h2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=jn}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(oo.has(n)){const s=Ov(n);return s&&s.default||0}return n=m2.has(n)?n:Im(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,s){return s2(t,n,s)}build(t,n,s){e2(t,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(t,n,s,a){s4(t,n,s,a)}mount(t){this.isSVGTag=n2(t.tagName),super.mount(t)}}const i4=(e,t)=>Em(e)?new a4(t):new r4(t,{allowProjection:e!==k.Fragment});function Ki(e,t,n){const s=e.getProps();return Tm(s,t,n!==void 0?n:s.custom,e)}const xp=e=>Array.isArray(e);function o4(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Ji(n))}function l4(e){return xp(e)?e[e.length-1]||0:e}function c4(e,t){const n=Ki(e,t);let{transitionEnd:s={},transition:a={},...i}=n||{};i={...i,...s};for(const l in i){const c=l4(i[l]);o4(e,l,c)}}function d4(e){return!!(Hn(e)&&e.add)}function gp(e,t){const n=e.getValue("willChange");if(d4(n))return n.add(t);if(!n&&Fs.WillChange){const s=new Fs.WillChange("auto");e.addValue("willChange",s),s.add(t)}}function x2(e){return e.props[a2]}const u4=e=>e!==null;function f4(e,{repeat:t,repeatType:n="loop"},s){const a=e.filter(u4),i=t&&n!=="loop"&&t%2===1?0:a.length-1;return a[i]}const h4={type:"spring",stiffness:500,damping:25,restSpeed:10},p4=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),m4={type:"keyframes",duration:.8},x4={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},g4=(e,{keyframes:t})=>t.length>2?m4:oo.has(e)?e.startsWith("scale")?p4(t[1]):h4:x4;function b4({when:e,delay:t,delayChildren:n,staggerChildren:s,staggerDirection:a,repeat:i,repeatType:l,repeatDelay:c,from:u,elapsed:p,...h}){return!!Object.keys(h).length}const Pm=(e,t,n,s={},a,i)=>l=>{const c=vm(s,e)||{},u=c.delay||s.delay||0;let{elapsed:p=0}=s;p=p-hs(u);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-p,onUpdate:m=>{t.set(m),c.onUpdate&&c.onUpdate(m)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:e,motionValue:t,element:i?void 0:a};b4(c)||Object.assign(h,g4(e,h)),h.duration&&(h.duration=hs(h.duration)),h.repeatDelay&&(h.repeatDelay=hs(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let f=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(dp(h),h.delay===0&&(f=!0)),(Fs.instantAnimations||Fs.skipAnimations)&&(f=!0,dp(h),h.delay=0),h.allowFlatten=!c.type&&!c.ease,f&&!i&&t.get()!==void 0){const m=f4(h.keyframes,c);if(m!==void 0){rn.update(()=>{h.onUpdate(m),h.onComplete()});return}}return c.isSync?new bm(h):new LC(h)};function y4({protectedKeys:e,needsAnimating:t},n){const s=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,s}function g2(e,t,{delay:n=0,transitionOverride:s,type:a}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:l,...c}=t;s&&(i=s);const u=[],p=a&&e.animationState&&e.animationState.getState()[a];for(const h in c){const f=e.getValue(h,e.latestValues[h]??null),m=c[h];if(m===void 0||p&&y4(p,h))continue;const g={delay:n,...vm(i||{},h)},y=f.get();if(y!==void 0&&!f.isAnimating&&!Array.isArray(m)&&m===y&&!g.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const v=x2(e);if(v){const N=window.MotionHandoffAnimation(v,h,rn);N!==null&&(g.startTime=N,b=!0)}}gp(e,h),f.start(Pm(h,f,m,e.shouldReduceMotion&&Bv.has(h)?{type:!1}:g,e,b));const S=f.animation;S&&u.push(S)}return l&&Promise.all(u).then(()=>{rn.update(()=>{l&&c4(e,l)})}),u}function b2(e,t,n,s=0,a=1){const i=Array.from(e).sort((p,h)=>p.sortNodePosition(h)).indexOf(t),l=e.size,c=(l-1)*s;return typeof n=="function"?n(i,l):a===1?i*s:c-i*s}function bp(e,t,n={}){const s=Ki(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(a=n.transitionOverride);const i=s?()=>Promise.all(g2(e,s,n)):()=>Promise.resolve(),l=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:p=0,staggerChildren:h,staggerDirection:f}=a;return v4(e,t,u,p,h,f,n)}:()=>Promise.resolve(),{when:c}=a;if(c){const[u,p]=c==="beforeChildren"?[i,l]:[l,i];return u().then(()=>p())}else return Promise.all([i(),l(n.delay)])}function v4(e,t,n=0,s=0,a=0,i=1,l){const c=[];for(const u of e.variantChildren)u.notify("AnimationStart",t),c.push(bp(u,t,{...l,delay:n+(typeof s=="function"?0:s)+b2(e.variantChildren,u,s,a,i)}).then(()=>u.notify("AnimationComplete",t)));return Promise.all(c)}function w4(e,t,n={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const a=t.map(i=>bp(e,i,n));s=Promise.all(a)}else if(typeof t=="string")s=bp(e,t,n);else{const a=typeof t=="function"?Ki(e,t,n.custom):t;s=Promise.all(g2(e,a,n))}return s.then(()=>{e.notify("AnimationComplete",t)})}function y2(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(t[s]!==e[s])return!1;return!0}const k4=Nm.length;function v2(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?v2(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<k4;n++){const s=Nm[n],a=e.props[s];(yl(a)||a===!1)&&(t[s]=a)}return t}const S4=[...Cm].reverse(),j4=Cm.length;function C4(e){return t=>Promise.all(t.map(({animation:n,options:s})=>w4(e,n,s)))}function N4(e){let t=C4(e),n=A1(),s=!0;const a=u=>(p,h)=>{const f=Ki(e,h,u==="exit"?e.presenceContext?.custom:void 0);if(f){const{transition:m,transitionEnd:g,...y}=f;p={...p,...y,...g}}return p};function i(u){t=u(e)}function l(u){const{props:p}=e,h=v2(e.parent)||{},f=[],m=new Set;let g={},y=1/0;for(let S=0;S<j4;S++){const v=S4[S],N=n[v],C=p[v]!==void 0?p[v]:h[v],_=yl(C),R=v===u?N.isActive:null;R===!1&&(y=S);let D=C===h[v]&&C!==p[v]&&_;if(D&&s&&e.manuallyAnimateOnMount&&(D=!1),N.protectedKeys={...g},!N.isActive&&R===null||!C&&!N.prevProp||Jd(C)||typeof C=="boolean")continue;const V=_4(N.prevProp,C);let I=V||v===u&&N.isActive&&!D&&_||S>y&&_,A=!1;const U=Array.isArray(C)?C:[C];let W=U.reduce(a(v),{});R===!1&&(W={});const{prevResolvedValues:T={}}=N,M={...T,...W},j=B=>{I=!0,m.has(B)&&(A=!0,m.delete(B)),N.needsAnimating[B]=!0;const q=e.getValue(B);q&&(q.liveStyle=!1)};for(const B in M){const q=W[B],G=T[B];if(g.hasOwnProperty(B))continue;let O=!1;xp(q)&&xp(G)?O=!y2(q,G):O=q!==G,O?q!=null?j(B):m.add(B):q!==void 0&&m.has(B)?j(B):N.protectedKeys[B]=!0}N.prevProp=C,N.prevResolvedValues=W,N.isActive&&(g={...g,...W}),s&&e.blockInitialAnimation&&(I=!1);const P=D&&V;I&&(!P||A)&&f.push(...U.map(B=>{const q={type:v};if(typeof B=="string"&&s&&!P&&e.manuallyAnimateOnMount&&e.parent){const{parent:G}=e,O=Ki(G,B);if(G.enteringChildren&&O){const{delayChildren:$}=O.transition||{};q.delay=b2(G.enteringChildren,e,$)}}return{animation:B,options:q}}))}if(m.size){const S={};if(typeof p.initial!="boolean"){const v=Ki(e,Array.isArray(p.initial)?p.initial[0]:p.initial);v&&v.transition&&(S.transition=v.transition)}m.forEach(v=>{const N=e.getBaseTarget(v),C=e.getValue(v);C&&(C.liveStyle=!0),S[v]=N??null}),f.push({animation:S})}let b=!!f.length;return s&&(p.initial===!1||p.initial===p.animate)&&!e.manuallyAnimateOnMount&&(b=!1),s=!1,b?t(f):Promise.resolve()}function c(u,p){if(n[u].isActive===p)return Promise.resolve();e.variantChildren?.forEach(f=>f.animationState?.setActive(u,p)),n[u].isActive=p;const h=l(u);for(const f in n)n[f].protectedKeys={};return h}return{animateChanges:l,setActive:c,setAnimateFunction:i,getState:()=>n,reset:()=>{n=A1()}}}function _4(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!y2(t,e):!1}function za(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function A1(){return{animate:za(!0),whileInView:za(),whileHover:za(),whileTap:za(),whileDrag:za(),whileFocus:za(),exit:za()}}class ma{constructor(t){this.isMounted=!1,this.node=t}update(){}}class A4 extends ma{constructor(t){super(t),t.animationState||(t.animationState=N4(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Jd(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let E4=0;class T4 extends ma{constructor(){super(...arguments),this.id=E4++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const a=this.node.animationState.setActive("exit",!t);n&&!t&&a.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const D4={animation:{Feature:A4},exit:{Feature:T4}};function vl(e,t,n,s={passive:!0}){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n)}function Al(e){return{point:{x:e.pageX,y:e.pageY}}}const I4=e=>t=>Sm(t)&&e(t,Al(t));function ul(e,t,n,s){return vl(e,t,I4(n),s)}const w2=1e-4,P4=1-w2,M4=1+w2,k2=.01,F4=0-k2,R4=0+k2;function Yn(e){return e.max-e.min}function B4(e,t,n){return Math.abs(e-t)<=n}function E1(e,t,n,s=.5){e.origin=s,e.originPoint=cn(t.min,t.max,e.origin),e.scale=Yn(n)/Yn(t),e.translate=cn(n.min,n.max,e.origin)-e.originPoint,(e.scale>=P4&&e.scale<=M4||isNaN(e.scale))&&(e.scale=1),(e.translate>=F4&&e.translate<=R4||isNaN(e.translate))&&(e.translate=0)}function fl(e,t,n,s){E1(e.x,t.x,n.x,s?s.originX:void 0),E1(e.y,t.y,n.y,s?s.originY:void 0)}function T1(e,t,n){e.min=n.min+t.min,e.max=e.min+Yn(t)}function z4(e,t,n){T1(e.x,t.x,n.x),T1(e.y,t.y,n.y)}function D1(e,t,n){e.min=t.min-n.min,e.max=e.min+Yn(t)}function Ed(e,t,n){D1(e.x,t.x,n.x),D1(e.y,t.y,n.y)}function Tr(e){return[e("x"),e("y")]}const S2=({current:e})=>e?e.ownerDocument.defaultView:null,I1=(e,t)=>Math.abs(e-t);function L4(e,t){const n=I1(e.x,t.x),s=I1(e.y,t.y);return Math.sqrt(n**2+s**2)}class j2{constructor(t,n,{transformPagePoint:s,contextWindow:a=window,dragSnapToOrigin:i=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=fh(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,y=L4(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!y)return;const{point:b}=m,{timestamp:S}=In;this.history.push({...b,timestamp:S});const{onStart:v,onMove:N}=this.handlers;g||(v&&v(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,m)},this.handlePointerMove=(m,g)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=uh(g,this.transformPagePoint),rn.update(this.updatePoint,!0)},this.handlePointerUp=(m,g)=>{this.end();const{onEnd:y,onSessionEnd:b,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=fh(m.type==="pointercancel"?this.lastMoveEventInfo:uh(g,this.transformPagePoint),this.history);this.startEvent&&y&&y(m,v),b&&b(m,v)},!Sm(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=l,this.contextWindow=a||window;const c=Al(t),u=uh(c,this.transformPagePoint),{point:p}=u,{timestamp:h}=In;this.history=[{...p,timestamp:h}];const{onSessionStart:f}=n;f&&f(t,fh(u,this.history)),this.removeListeners=Cl(ul(this.contextWindow,"pointermove",this.handlePointerMove),ul(this.contextWindow,"pointerup",this.handlePointerUp),ul(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),da(this.updatePoint)}}function uh(e,t){return t?{point:t(e.point)}:e}function P1(e,t){return{x:e.x-t.x,y:e.y-t.y}}function fh({point:e},t){return{point:e,delta:P1(e,C2(t)),offset:P1(e,O4(t)),velocity:$4(t,.1)}}function O4(e){return e[0]}function C2(e){return e[e.length-1]}function $4(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const a=C2(e);for(;n>=0&&(s=e[n],!(a.timestamp-s.timestamp>hs(t)));)n--;if(!s)return{x:0,y:0};const i=Ir(a.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const l={x:(a.x-s.x)/i,y:(a.y-s.y)/i};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function V4(e,{min:t,max:n},s){return t!==void 0&&e<t?e=s?cn(t,e,s.min):Math.max(e,t):n!==void 0&&e>n&&(e=s?cn(n,e,s.max):Math.min(e,n)),e}function M1(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function H4(e,{top:t,left:n,bottom:s,right:a}){return{x:M1(e.x,n,a),y:M1(e.y,t,s)}}function F1(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}function U4(e,t){return{x:F1(e.x,t.x),y:F1(e.y,t.y)}}function W4(e,t){let n=.5;const s=Yn(e),a=Yn(t);return a>s?n=xl(t.min,t.max-s,e.min):s>a&&(n=xl(e.min,e.max-a,t.min)),Ms(0,1,n)}function K4(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const yp=.35;function q4(e=yp){return e===!1?e=0:e===!0&&(e=yp),{x:R1(e,"left","right"),y:R1(e,"top","bottom")}}function R1(e,t,n){return{min:B1(e,t),max:B1(e,n)}}function B1(e,t){return typeof e=="number"?e:e[t]||0}const G4=new WeakMap;class Y4{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=jn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Al(f).point)},l=(f,m)=>{const{drag:g,dragPropagation:y,onDragStart:b}=this.getProps();if(g&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=tN(g),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Tr(v=>{let N=this.getAxisMotionValue(v).get()||0;if(ps.test(N)){const{projection:C}=this.visualElement;if(C&&C.layout){const _=C.layout.layoutBox[v];_&&(N=Yn(_)*(parseFloat(N)/100))}}this.originPoint[v]=N}),b&&rn.postRender(()=>b(f,m)),gp(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},c=(f,m)=>{this.latestPointerEvent=f,this.latestPanInfo=m;const{dragPropagation:g,dragDirectionLock:y,onDirectionLock:b,onDrag:S}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:v}=m;if(y&&this.currentDirection===null){this.currentDirection=Z4(v),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",m.point,v),this.updateAxis("y",m.point,v),this.visualElement.render(),S&&S(f,m)},u=(f,m)=>{this.latestPointerEvent=f,this.latestPanInfo=m,this.stop(f,m),this.latestPointerEvent=null,this.latestPanInfo=null},p=()=>Tr(f=>this.getAnimationState(f)==="paused"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new j2(t,{onSessionStart:i,onStart:l,onMove:c,onSessionEnd:u,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:s,contextWindow:S2(this.visualElement)})}stop(t,n){const s=t||this.latestPointerEvent,a=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!a||!s)return;const{velocity:l}=a;this.startAnimation(l);const{onDragEnd:c}=this.getProps();c&&rn.postRender(()=>c(s,a))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,s){const{drag:a}=this.getProps();if(!s||!Yc(t,a,this.currentDirection))return;const i=this.getAxisMotionValue(t);let l=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(l=V4(l,this.constraints[t],this.elastic[t])),i.set(l)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,a=this.constraints;t&&$i(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=H4(s.layoutBox,t):this.constraints=!1,this.elastic=q4(n),a!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Tr(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=K4(s.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!$i(t))return!1;const s=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=QN(s,a.root,this.visualElement.getTransformPagePoint());let l=U4(a.layout.layoutBox,i);if(n){const c=n(GN(l));this.hasMutatedConstraints=!!c,c&&(l=l2(c))}return l}startAnimation(t){const{drag:n,dragMomentum:s,dragElastic:a,dragTransition:i,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},p=Tr(h=>{if(!Yc(h,n,this.currentDirection))return;let f=u&&u[h]||{};l&&(f={min:0,max:0});const m=a?200:1e6,g=a?40:1e7,y={type:"inertia",velocity:s?t[h]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(h,y)});return Promise.all(p).then(c)}startAxisValueAnimation(t,n){const s=this.getAxisMotionValue(t);return gp(this.visualElement,t),s.start(Pm(t,s,0,n,this.visualElement,!1))}stopAnimation(){Tr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Tr(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),a=s[n];return a||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){Tr(n=>{const{drag:s}=this.getProps();if(!Yc(n,s,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(n);if(a&&a.layout){const{min:l,max:c}=a.layout.layoutBox[n];i.set(t[n]-cn(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!$i(n)||!s||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Tr(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const u=c.get();a[l]=W4({min:u,max:u},this.constraints[l])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Tr(l=>{if(!Yc(l,t,null))return;const c=this.getAxisMotionValue(l),{min:u,max:p}=this.constraints[l];c.set(cn(u,p,a[l]))})}addListeners(){if(!this.visualElement.current)return;G4.set(this.visualElement,this);const t=this.visualElement.current,n=ul(t,"pointerdown",u=>{const{drag:p,dragListener:h=!0}=this.getProps();p&&h&&this.start(u)}),s=()=>{const{dragConstraints:u}=this.getProps();$i(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",s);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),rn.read(s);const l=vl(window,"resize",()=>this.scalePositionWithinConstraints()),c=a.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:p})=>{this.isDragging&&p&&(Tr(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=u[h].translate,f.set(f.get()+u[h].translate))}),this.visualElement.render())}));return()=>{l(),n(),i(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:l=yp,dragMomentum:c=!0}=t;return{...t,drag:n,dragDirectionLock:s,dragPropagation:a,dragConstraints:i,dragElastic:l,dragMomentum:c}}}function Yc(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function Z4(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class Q4 extends ma{constructor(t){super(t),this.removeGroupControls=Pr,this.removeListeners=Pr,this.controls=new Y4(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Pr}unmount(){this.removeGroupControls(),this.removeListeners()}}const z1=e=>(t,n)=>{e&&rn.postRender(()=>e(t,n))};class X4 extends ma{constructor(){super(...arguments),this.removePointerDownListener=Pr}onPointerDown(t){this.session=new j2(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:S2(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:s,onPanEnd:a}=this.node.getProps();return{onSessionStart:z1(t),onStart:z1(n),onMove:s,onEnd:(i,l)=>{delete this.session,a&&rn.postRender(()=>a(i,l))}}}mount(){this.removePointerDownListener=ul(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const pd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let hh=!1;class J4 extends k.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s,layoutId:a}=this.props,{projection:i}=t;i&&(n.group&&n.group.add(i),s&&s.register&&a&&s.register(i),hh&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),pd.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:s,drag:a,isPresent:i}=this.props,{projection:l}=s;return l&&(l.isPresent=i,hh=!0,a||t.layoutDependency!==n||n===void 0||t.isPresent!==i?l.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?l.promote():l.relegate()||rn.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),km.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:a}=t;hh=!0,a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),s&&s.deregister&&s.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function N2(e){const[t,n]=Gv(),s=k.useContext(tm);return r.jsx(J4,{...e,layoutGroup:s,switchLayoutGroup:k.useContext(i2),isPresent:t,safeToRemove:n})}function e6(e,t,n){const s=Hn(e)?e:Ji(e);return s.start(Pm("",s,t,n)),s.animation}const t6=(e,t)=>e.depth-t.depth;class n6{constructor(){this.children=[],this.isDirty=!1}add(t){sm(this.children,t),this.isDirty=!0}remove(t){am(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(t6),this.isDirty=!1,this.children.forEach(t)}}function r6(e,t){const n=dr.now(),s=({timestamp:a})=>{const i=a-n;i>=t&&(da(s),e(i-t))};return rn.setup(s,!0),()=>da(s)}const _2=["TopLeft","TopRight","BottomLeft","BottomRight"],s6=_2.length,L1=e=>typeof e=="string"?parseFloat(e):e,O1=e=>typeof e=="number"||mt.test(e);function a6(e,t,n,s,a,i){a?(e.opacity=cn(0,n.opacity??1,i6(s)),e.opacityExit=cn(t.opacity??1,0,o6(s))):i&&(e.opacity=cn(t.opacity??1,n.opacity??1,s));for(let l=0;l<s6;l++){const c=`border${_2[l]}Radius`;let u=$1(t,c),p=$1(n,c);if(u===void 0&&p===void 0)continue;u||(u=0),p||(p=0),u===0||p===0||O1(u)===O1(p)?(e[c]=Math.max(cn(L1(u),L1(p),s),0),(ps.test(p)||ps.test(u))&&(e[c]+="%")):e[c]=p}(t.rotate||n.rotate)&&(e.rotate=cn(t.rotate||0,n.rotate||0,s))}function $1(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const i6=A2(0,.5,hv),o6=A2(.5,.95,Pr);function A2(e,t,n){return s=>s<e?0:s>t?1:n(xl(e,t,s))}function V1(e,t){e.min=t.min,e.max=t.max}function Ur(e,t){V1(e.x,t.x),V1(e.y,t.y)}function H1(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function U1(e,t,n,s,a){return e-=t,e=Ad(e,1/n,s),a!==void 0&&(e=Ad(e,1/a,s)),e}function l6(e,t=0,n=1,s=.5,a,i=e,l=e){if(ps.test(t)&&(t=parseFloat(t),t=cn(l.min,l.max,t/100)-l.min),typeof t!="number")return;let c=cn(i.min,i.max,s);e===i&&(c-=t),e.min=U1(e.min,t,n,c,a),e.max=U1(e.max,t,n,c,a)}function W1(e,t,[n,s,a],i,l){l6(e,t[n],t[s],t[a],t.scale,i,l)}const c6=["x","scaleX","originX"],d6=["y","scaleY","originY"];function K1(e,t,n,s){W1(e.x,t,c6,n?n.x:void 0,s?s.x:void 0),W1(e.y,t,d6,n?n.y:void 0,s?s.y:void 0)}function q1(e){return e.translate===0&&e.scale===1}function E2(e){return q1(e.x)&&q1(e.y)}function G1(e,t){return e.min===t.min&&e.max===t.max}function u6(e,t){return G1(e.x,t.x)&&G1(e.y,t.y)}function Y1(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function T2(e,t){return Y1(e.x,t.x)&&Y1(e.y,t.y)}function Z1(e){return Yn(e.x)/Yn(e.y)}function Q1(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class f6{constructor(){this.members=[]}add(t){sm(this.members,t),t.scheduleRender()}remove(t){if(am(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(a=>t===a);if(n===0)return!1;let s;for(let a=n;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){s=i;break}}return s?(this.promote(s),!0):!1}promote(t,n){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,n&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:s}=t;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function h6(e,t,n){let s="";const a=e.x.translate/t.x,i=e.y.translate/t.y,l=n?.z||0;if((a||i||l)&&(s=`translate3d(${a}px, ${i}px, ${l}px) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:p,rotate:h,rotateX:f,rotateY:m,skewX:g,skewY:y}=n;p&&(s=`perspective(${p}px) ${s}`),h&&(s+=`rotate(${h}deg) `),f&&(s+=`rotateX(${f}deg) `),m&&(s+=`rotateY(${m}deg) `),g&&(s+=`skewX(${g}deg) `),y&&(s+=`skewY(${y}deg) `)}const c=e.x.scale*t.x,u=e.y.scale*t.y;return(c!==1||u!==1)&&(s+=`scale(${c}, ${u})`),s||"none"}const ph=["","X","Y","Z"],p6=1e3;let m6=0;function mh(e,t,n,s){const{latestValues:a}=t;a[e]&&(n[e]=a[e],t.setStaticValue(e,0),s&&(s[e]=0))}function D2(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=x2(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",rn,!(a||i))}const{parent:s}=e;s&&!s.hasCheckedOptimisedAppear&&D2(s)}function I2({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:s,resetTransform:a}){return class{constructor(l={},c=t?.()){this.id=m6++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(b6),this.nodes.forEach(k6),this.nodes.forEach(S6),this.nodes.forEach(y6)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new n6)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new lm),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const u=this.eventHandlers.get(l);u&&u.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=qv(l)&&!oN(l),this.instance=l;const{layoutId:c,layout:u,visualElement:p}=this.options;if(p&&!p.current&&p.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||c)&&(this.isLayoutDirty=!0),e){let h,f=0;const m=()=>this.root.updateBlockedByResize=!1;rn.read(()=>{f=window.innerWidth}),e(l,()=>{const g=window.innerWidth;g!==f&&(f=g,this.root.updateBlockedByResize=!0,h&&h(),h=r6(m,250),pd.hasAnimatedSinceResize&&(pd.hasAnimatedSinceResize=!1,this.nodes.forEach(eb)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&p&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeLayoutChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||p.getDefaultTransition()||A6,{onLayoutAnimationStart:b,onLayoutAnimationComplete:S}=p.getProps(),v=!this.targetLayout||!T2(this.targetLayout,g),N=!f&&m;if(this.options.layoutRoot||this.resumeFrom||N||f&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const C={...vm(y,"layout"),onPlay:b,onComplete:S};(p.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C),this.setAnimationOrigin(h,N)}else f||eb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),da(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(j6),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&D2(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(X1);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(J1);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(w6),this.nodes.forEach(x6),this.nodes.forEach(g6)):this.nodes.forEach(J1),this.clearAllSnapshots();const c=dr.now();In.delta=Ms(0,1e3/60,c-In.timestamp),In.timestamp=c,In.isProcessing=!0,rh.update.process(In),rh.preRender.process(In),rh.render.process(In),In.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,km.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(v6),this.sharedNodes.forEach(C6)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,rn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){rn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Yn(this.snapshot.measuredBox.x)&&!Yn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=jn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&this.instance){const u=s(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!a)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!E2(this.projectionDelta),u=this.getTransformTemplate(),p=u?u(this.latestValues,""):void 0,h=p!==this.prevTransformTemplateValue;l&&this.instance&&(c||Oa(this.latestValues)||h)&&(a(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return l&&(u=this.removeTransform(u)),E6(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return jn();const c=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(T6))){const{scroll:p}=this.root;p&&(Vi(c.x,p.offset.x),Vi(c.y,p.offset.y))}return c}removeElementScroll(l){const c=jn();if(Ur(c,l),this.scroll?.wasRoot)return c;for(let u=0;u<this.path.length;u++){const p=this.path[u],{scroll:h,options:f}=p;p!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&Ur(c,l),Vi(c.x,h.offset.x),Vi(c.y,h.offset.y))}return c}applyTransform(l,c=!1){const u=jn();Ur(u,l);for(let p=0;p<this.path.length;p++){const h=this.path[p];!c&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Hi(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Oa(h.latestValues)&&Hi(u,h.latestValues)}return Oa(this.latestValues)&&Hi(u,this.latestValues),u}removeTransform(l){const c=jn();Ur(c,l);for(let u=0;u<this.path.length;u++){const p=this.path[u];if(!p.instance||!Oa(p.latestValues))continue;hp(p.latestValues)&&p.updateSnapshot();const h=jn(),f=p.measurePageBox();Ur(h,f),K1(c,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,h)}return Oa(this.latestValues)&&K1(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==In.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(l||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!this.layout||!(h||f))return;this.resolvedRelativeTargetAt=In.timestamp;const m=this.getClosestProjectingParent();m&&this.linkedParentVersion!==m.layoutVersion&&!m.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(m&&m.layout?this.createRelativeTarget(m,this.layout.layoutBox,m.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=jn(),this.targetWithTransforms=jn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),z4(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ur(this.target,this.layout.layoutBox),d2(this.target,this.targetDelta)):Ur(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?this.createRelativeTarget(m,this.target,m.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||hp(this.parent.latestValues)||c2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(l,c,u){this.relativeParent=l,this.linkedParentVersion=l.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=jn(),this.relativeTargetOrigin=jn(),Ed(this.relativeTargetOrigin,c,u),Ur(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===In.timestamp&&(u=!1),u)return;const{layout:p,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||h))return;Ur(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;ZN(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=jn());const{target:g}=l;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(H1(this.prevProjectionDelta.x,this.projectionDelta.x),H1(this.prevProjectionDelta.y,this.projectionDelta.y)),fl(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!Q1(this.projectionDelta.x,this.prevProjectionDelta.x)||!Q1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ui(),this.projectionDelta=Ui(),this.projectionDeltaWithTransform=Ui()}setAnimationOrigin(l,c=!1){const u=this.snapshot,p=u?u.latestValues:{},h={...this.latestValues},f=Ui();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const m=jn(),g=u?u.source:void 0,y=this.layout?this.layout.source:void 0,b=g!==y,S=this.getStack(),v=!S||S.members.length<=1,N=!!(b&&!v&&this.options.crossfade===!0&&!this.path.some(_6));this.animationProgress=0;let C;this.mixTargetDelta=_=>{const R=_/1e3;tb(f.x,l.x,R),tb(f.y,l.y,R),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ed(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),N6(this.relativeTarget,this.relativeTargetOrigin,m,R),C&&u6(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=jn()),Ur(C,this.relativeTarget)),b&&(this.animationValues=h,a6(h,p,this.latestValues,R,N,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(da(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=rn.update(()=>{pd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ji(0)),this.currentAnimation=e6(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(p6),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:u,layout:p,latestValues:h}=l;if(!(!c||!u||!p)){if(this!==l&&this.layout&&p&&P2(this.options.animationType,this.layout.layoutBox,p.layoutBox)){u=this.target||jn();const f=Yn(this.layout.layoutBox.x);u.x.min=l.target.x.min,u.x.max=u.x.min+f;const m=Yn(this.layout.layoutBox.y);u.y.min=l.target.y.min,u.y.max=u.y.min+m}Ur(c,u),Hi(c,h),fl(this.projectionDeltaWithTransform,this.layoutCorrected,c,h)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new f6),this.sharedNodes.get(l).add(c);const p=c.options.initialPromotionConfig;c.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:u}={}){const p=this.getStack();p&&p.promote(this,u),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:u}=l;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const p={};u.z&&mh("z",l,p,this.animationValues);for(let h=0;h<ph.length;h++)mh(`rotate${ph[h]}`,l,p,this.animationValues),mh(`skew${ph[h]}`,l,p,this.animationValues);l.render();for(const h in p)l.setStaticValue(h,p[h]),this.animationValues&&(this.animationValues[h]=p[h]);l.scheduleRender()}applyProjectionStyles(l,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=hd(c?.pointerEvents)||"",l.transform=u?u(this.latestValues,""):"none";return}const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=hd(c?.pointerEvents)||""),this.hasProjected&&!Oa(this.latestValues)&&(l.transform=u?u({},""):"none",this.hasProjected=!1);return}l.visibility="";const h=p.animationValues||p.latestValues;this.applyTransformsToTarget();let f=h6(this.projectionDeltaWithTransform,this.treeScale,h);u&&(f=u(h,f)),l.transform=f;const{x:m,y:g}=this.projectionDelta;l.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,p.animationValues?l.opacity=p===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:l.opacity=p===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const y in fp){if(h[y]===void 0)continue;const{correct:b,applyTo:S,isCSSVariable:v}=fp[y],N=f==="none"?h[y]:b(h[y],p);if(S){const C=S.length;for(let _=0;_<C;_++)l[S[_]]=N}else v?this.options.visualElement.renderState.vars[y]=N:l[y]=N}this.options.layoutId&&(l.pointerEvents=p===this?hd(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(X1),this.root.sharedNodes.clear()}}}function x6(e){e.updateLayout()}function g6(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=e.layout,{animationType:a}=e.options,i=t.source!==e.layout.source;a==="size"?Tr(h=>{const f=i?t.measuredBox[h]:t.layoutBox[h],m=Yn(f);f.min=n[h].min,f.max=f.min+m}):P2(a,t.layoutBox,n)&&Tr(h=>{const f=i?t.measuredBox[h]:t.layoutBox[h],m=Yn(n[h]);f.max=f.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+m)});const l=Ui();fl(l,n,t.layoutBox);const c=Ui();i?fl(c,e.applyTransform(s,!0),t.measuredBox):fl(c,n,t.layoutBox);const u=!E2(l);let p=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const g=jn();Ed(g,t.layoutBox,f.layoutBox);const y=jn();Ed(y,n,m.layoutBox),T2(g,y)||(p=!0),h.options.layoutRoot&&(e.relativeTarget=y,e.relativeTargetOrigin=g,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:p})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function b6(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function y6(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function v6(e){e.clearSnapshot()}function X1(e){e.clearMeasurements()}function J1(e){e.isLayoutDirty=!1}function w6(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function eb(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function k6(e){e.resolveTargetDelta()}function S6(e){e.calcProjection()}function j6(e){e.resetSkewAndRotation()}function C6(e){e.removeLeadSnapshot()}function tb(e,t,n){e.translate=cn(t.translate,0,n),e.scale=cn(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function nb(e,t,n,s){e.min=cn(t.min,n.min,s),e.max=cn(t.max,n.max,s)}function N6(e,t,n,s){nb(e.x,t.x,n.x,s),nb(e.y,t.y,n.y,s)}function _6(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const A6={duration:.45,ease:[.4,0,.1,1]},rb=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),sb=rb("applewebkit/")&&!rb("chrome/")?Math.round:Pr;function ab(e){e.min=sb(e.min),e.max=sb(e.max)}function E6(e){ab(e.x),ab(e.y)}function P2(e,t,n){return e==="position"||e==="preserve-aspect"&&!B4(Z1(t),Z1(n),.2)}function T6(e){return e!==e.root&&e.scroll?.wasRoot}const D6=I2({attachResizeListener:(e,t)=>vl(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),xh={current:void 0},M2=I2({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!xh.current){const e=new D6({});e.mount(window),e.setOptions({layoutScroll:!0}),xh.current=e}return xh.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),I6={pan:{Feature:X4},drag:{Feature:Q4,ProjectionNode:M2,MeasureLayout:N2}};function ib(e,t,n){const{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,i=s[a];i&&rn.postRender(()=>i(t,Al(t)))}class P6 extends ma{mount(){const{current:t}=this.node;t&&(this.unmount=nN(t,(n,s)=>(ib(this.node,s,"Start"),a=>ib(this.node,a,"End"))))}unmount(){}}class M6 extends ma{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Cl(vl(this.node.current,"focus",()=>this.onFocus()),vl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function ob(e,t,n){const{props:s}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&s.whileTap&&e.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),i=s[a];i&&rn.postRender(()=>i(t,Al(t)))}class F6 extends ma{mount(){const{current:t}=this.node;t&&(this.unmount=iN(t,(n,s)=>(ob(this.node,s,"Start"),(a,{success:i})=>ob(this.node,a,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const vp=new WeakMap,gh=new WeakMap,R6=e=>{const t=vp.get(e.target);t&&t(e)},B6=e=>{e.forEach(R6)};function z6({root:e,...t}){const n=e||document;gh.has(n)||gh.set(n,{});const s=gh.get(n),a=JSON.stringify(t);return s[a]||(s[a]=new IntersectionObserver(B6,{root:e,...t})),s[a]}function L6(e,t,n){const s=z6(t);return vp.set(e,n),s.observe(e),()=>{vp.delete(e),s.unobserve(e)}}const O6={some:0,all:1};class $6 extends ma{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:s,amount:a="some",once:i}=t,l={root:n?n.current:void 0,rootMargin:s,threshold:typeof a=="number"?a:O6[a]},c=u=>{const{isIntersecting:p}=u;if(this.isInView===p||(this.isInView=p,i&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),m=p?h:f;m&&m(u)};return L6(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(V6(t,n))&&this.startObserver()}unmount(){}}function V6({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const H6={inView:{Feature:$6},tap:{Feature:F6},focus:{Feature:M6},hover:{Feature:P6}},U6={layout:{ProjectionNode:M2,MeasureLayout:N2}},W6={...D4,...H6,...I6,...U6},me=qN(W6,i4),F2="/assets/5f8732ee23725e4e0895553baa1c8e03e361ca7a-DtxtzMCA.png";function K6(e,t){const n=k.createContext(t),s=i=>{const{children:l,...c}=i,u=k.useMemo(()=>c,Object.values(c));return r.jsx(n.Provider,{value:u,children:l})};s.displayName=e+"Provider";function a(i){const l=k.useContext(n);if(l)return l;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[s,a]}function ei(e,t=[]){let n=[];function s(i,l){const c=k.createContext(l),u=n.length;n=[...n,l];const p=f=>{const{scope:m,children:g,...y}=f,b=m?.[e]?.[u]||c,S=k.useMemo(()=>y,Object.values(y));return r.jsx(b.Provider,{value:S,children:g})};p.displayName=i+"Provider";function h(f,m){const g=m?.[e]?.[u]||c,y=k.useContext(g);if(y)return y;if(l!==void 0)return l;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[p,h]}const a=()=>{const i=n.map(l=>k.createContext(l));return function(c){const u=c?.[e]||i;return k.useMemo(()=>({[`__scope${e}`]:{...c,[e]:u}}),[c,u])}};return a.scopeName=e,[s,q6(a,...t)]}function q6(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const l=s.reduce((c,{useScope:u,scopeName:p})=>{const f=u(i)[`__scope${p}`];return{...c,...f}},{});return k.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return n.scopeName=t.scopeName,n}function lb(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function lo(...e){return t=>{let n=!1;const s=e.map(a=>{const i=lb(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<s.length;a++){const i=s[a];typeof i=="function"?i():lb(e[a],null)}}}}function zt(...e){return k.useCallback(lo(...e),e)}function Tt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e?.(a),n===!1||!a.defaultPrevented)return t?.(a)}}var Mn=globalThis?.document?k.useLayoutEffect:()=>{},G6=em[" useId ".trim().toString()]||(()=>{}),Y6=0;function qi(e){const[t,n]=k.useState(G6());return Mn(()=>{n(s=>s??String(Y6++))},[e]),e||(t?`radix-${t}`:"")}var Z6=em[" useInsertionEffect ".trim().toString()]||Mn;function Td({prop:e,defaultProp:t,onChange:n=()=>{},caller:s}){const[a,i,l]=Q6({defaultProp:t,onChange:n}),c=e!==void 0,u=c?e:a;{const h=k.useRef(e!==void 0);k.useEffect(()=>{const f=h.current;f!==c&&console.warn(`${s} is changing from ${f?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=c},[c,s])}const p=k.useCallback(h=>{if(c){const f=X6(h)?h(e):h;f!==e&&l.current?.(f)}else i(h)},[c,e,i,l]);return[u,p]}function Q6({defaultProp:e,onChange:t}){const[n,s]=k.useState(e),a=k.useRef(n),i=k.useRef(t);return Z6(()=>{i.current=t},[t]),k.useEffect(()=>{a.current!==n&&(i.current?.(n),a.current=n)},[n,a]),[n,s,i]}function X6(e){return typeof e=="function"}var us=tv();const R2=so(us);function J6(e){const t=e_(e),n=k.forwardRef((s,a)=>{const{children:i,...l}=s,c=k.Children.toArray(i),u=c.find(n_);if(u){const p=u.props.children,h=c.map(f=>f===u?k.Children.count(p)>1?k.Children.only(null):k.isValidElement(p)?p.props.children:null:f);return r.jsx(t,{...l,ref:a,children:k.isValidElement(p)?k.cloneElement(p,void 0,h):null})}return r.jsx(t,{...l,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}function e_(e){const t=k.forwardRef((n,s)=>{const{children:a,...i}=n;if(k.isValidElement(a)){const l=s_(a),c=r_(i,a.props);return a.type!==k.Fragment&&(c.ref=s?lo(s,l):l),k.cloneElement(a,c)}return k.Children.count(a)>1?k.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var t_=Symbol("radix.slottable");function n_(e){return k.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===t_}function r_(e,t){const n={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?n[s]=(...c)=>{const u=i(...c);return a(...c),u}:a&&(n[s]=a):s==="style"?n[s]={...a,...i}:s==="className"&&(n[s]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function s_(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var a_=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],It=a_.reduce((e,t)=>{const n=J6(`Primitive.${t}`),s=k.forwardRef((a,i)=>{const{asChild:l,...c}=a,u=l?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(u,{...c,ref:i})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function i_(e,t){e&&us.flushSync(()=>e.dispatchEvent(t))}function cr(e){const t=k.useRef(e);return k.useEffect(()=>{t.current=e}),k.useMemo(()=>(...n)=>t.current?.(...n),[])}function o_(e,t=globalThis?.document){const n=cr(e);k.useEffect(()=>{const s=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[n,t])}var l_="DismissableLayer",wp="dismissableLayer.update",c_="dismissableLayer.pointerDownOutside",d_="dismissableLayer.focusOutside",cb,B2=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Mm=k.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:l,onDismiss:c,...u}=e,p=k.useContext(B2),[h,f]=k.useState(null),m=h?.ownerDocument??globalThis?.document,[,g]=k.useState({}),y=zt(t,V=>f(V)),b=Array.from(p.layers),[S]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),v=b.indexOf(S),N=h?b.indexOf(h):-1,C=p.layersWithOutsidePointerEventsDisabled.size>0,_=N>=v,R=h_(V=>{const I=V.target,A=[...p.branches].some(U=>U.contains(I));!_||A||(a?.(V),l?.(V),V.defaultPrevented||c?.())},m),D=p_(V=>{const I=V.target;[...p.branches].some(U=>U.contains(I))||(i?.(V),l?.(V),V.defaultPrevented||c?.())},m);return o_(V=>{N===p.layers.size-1&&(s?.(V),!V.defaultPrevented&&c&&(V.preventDefault(),c()))},m),k.useEffect(()=>{if(h)return n&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(cb=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(h)),p.layers.add(h),db(),()=>{n&&p.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=cb)}},[h,m,n,p]),k.useEffect(()=>()=>{h&&(p.layers.delete(h),p.layersWithOutsidePointerEventsDisabled.delete(h),db())},[h,p]),k.useEffect(()=>{const V=()=>g({});return document.addEventListener(wp,V),()=>document.removeEventListener(wp,V)},[]),r.jsx(It.div,{...u,ref:y,style:{pointerEvents:C?_?"auto":"none":void 0,...e.style},onFocusCapture:Tt(e.onFocusCapture,D.onFocusCapture),onBlurCapture:Tt(e.onBlurCapture,D.onBlurCapture),onPointerDownCapture:Tt(e.onPointerDownCapture,R.onPointerDownCapture)})});Mm.displayName=l_;var u_="DismissableLayerBranch",f_=k.forwardRef((e,t)=>{const n=k.useContext(B2),s=k.useRef(null),a=zt(t,s);return k.useEffect(()=>{const i=s.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),r.jsx(It.div,{...e,ref:a})});f_.displayName=u_;function h_(e,t=globalThis?.document){const n=cr(e),s=k.useRef(!1),a=k.useRef(()=>{});return k.useEffect(()=>{const i=c=>{if(c.target&&!s.current){let u=function(){z2(c_,n,p,{discrete:!0})};const p={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=u,t.addEventListener("click",a.current,{once:!0})):u()}else t.removeEventListener("click",a.current);s.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>s.current=!0}}function p_(e,t=globalThis?.document){const n=cr(e),s=k.useRef(!1);return k.useEffect(()=>{const a=i=>{i.target&&!s.current&&z2(d_,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function db(){const e=new CustomEvent(wp);document.dispatchEvent(e)}function z2(e,t,n,{discrete:s}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),s?i_(a,i):a.dispatchEvent(i)}var bh="focusScope.autoFocusOnMount",yh="focusScope.autoFocusOnUnmount",ub={bubbles:!1,cancelable:!0},m_="FocusScope",Fm=k.forwardRef((e,t)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...l}=e,[c,u]=k.useState(null),p=cr(a),h=cr(i),f=k.useRef(null),m=zt(t,b=>u(b)),g=k.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;k.useEffect(()=>{if(s){let b=function(C){if(g.paused||!c)return;const _=C.target;c.contains(_)?f.current=_:la(f.current,{select:!0})},S=function(C){if(g.paused||!c)return;const _=C.relatedTarget;_!==null&&(c.contains(_)||la(f.current,{select:!0}))},v=function(C){if(document.activeElement===document.body)for(const R of C)R.removedNodes.length>0&&la(c)};document.addEventListener("focusin",b),document.addEventListener("focusout",S);const N=new MutationObserver(v);return c&&N.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",S),N.disconnect()}}},[s,c,g.paused]),k.useEffect(()=>{if(c){hb.add(g);const b=document.activeElement;if(!c.contains(b)){const v=new CustomEvent(bh,ub);c.addEventListener(bh,p),c.dispatchEvent(v),v.defaultPrevented||(x_(w_(L2(c)),{select:!0}),document.activeElement===b&&la(c))}return()=>{c.removeEventListener(bh,p),setTimeout(()=>{const v=new CustomEvent(yh,ub);c.addEventListener(yh,h),c.dispatchEvent(v),v.defaultPrevented||la(b??document.body,{select:!0}),c.removeEventListener(yh,h),hb.remove(g)},0)}}},[c,p,h,g]);const y=k.useCallback(b=>{if(!n&&!s||g.paused)return;const S=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,v=document.activeElement;if(S&&v){const N=b.currentTarget,[C,_]=g_(N);C&&_?!b.shiftKey&&v===_?(b.preventDefault(),n&&la(C,{select:!0})):b.shiftKey&&v===C&&(b.preventDefault(),n&&la(_,{select:!0})):v===N&&b.preventDefault()}},[n,s,g.paused]);return r.jsx(It.div,{tabIndex:-1,...l,ref:m,onKeyDown:y})});Fm.displayName=m_;function x_(e,{select:t=!1}={}){const n=document.activeElement;for(const s of e)if(la(s,{select:t}),document.activeElement!==n)return}function g_(e){const t=L2(e),n=fb(t,e),s=fb(t.reverse(),e);return[n,s]}function L2(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function fb(e,t){for(const n of e)if(!b_(n,{upTo:t}))return n}function b_(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function y_(e){return e instanceof HTMLInputElement&&"select"in e}function la(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&y_(e)&&t&&e.select()}}var hb=v_();function v_(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=pb(e,t),e.unshift(t)},remove(t){e=pb(e,t),e[0]?.resume()}}}function pb(e,t){const n=[...e],s=n.indexOf(t);return s!==-1&&n.splice(s,1),n}function w_(e){return e.filter(t=>t.tagName!=="A")}var k_="Portal",Rm=k.forwardRef((e,t)=>{const{container:n,...s}=e,[a,i]=k.useState(!1);Mn(()=>i(!0),[]);const l=n||a&&globalThis?.document?.body;return l?R2.createPortal(r.jsx(It.div,{...s,ref:t}),l):null});Rm.displayName=k_;function S_(e,t){return k.useReducer((n,s)=>t[n][s]??n,e)}var xa=e=>{const{present:t,children:n}=e,s=j_(t),a=typeof n=="function"?n({present:s.isPresent}):k.Children.only(n),i=zt(s.ref,C_(a));return typeof n=="function"||s.isPresent?k.cloneElement(a,{ref:i}):null};xa.displayName="Presence";function j_(e){const[t,n]=k.useState(),s=k.useRef(null),a=k.useRef(e),i=k.useRef("none"),l=e?"mounted":"unmounted",[c,u]=S_(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return k.useEffect(()=>{const p=Zc(s.current);i.current=c==="mounted"?p:"none"},[c]),Mn(()=>{const p=s.current,h=a.current;if(h!==e){const m=i.current,g=Zc(p);e?u("MOUNT"):g==="none"||p?.display==="none"?u("UNMOUNT"):u(h&&m!==g?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,u]),Mn(()=>{if(t){let p;const h=t.ownerDocument.defaultView??window,f=g=>{const b=Zc(s.current).includes(CSS.escape(g.animationName));if(g.target===t&&b&&(u("ANIMATION_END"),!a.current)){const S=t.style.animationFillMode;t.style.animationFillMode="forwards",p=h.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=S)})}},m=g=>{g.target===t&&(i.current=Zc(s.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{h.clearTimeout(p),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:k.useCallback(p=>{s.current=p?getComputedStyle(p):null,n(p)},[])}}function Zc(e){return e?.animationName||"none"}function C_(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var vh=0;function O2(){k.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??mb()),document.body.insertAdjacentElement("beforeend",e[1]??mb()),vh++,()=>{vh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),vh--}},[])}function mb(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var cs=function(){return cs=Object.assign||function(t){for(var n,s=1,a=arguments.length;s<a;s++){n=arguments[s];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},cs.apply(this,arguments)};function $2(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]]);return n}function N_(e,t,n){if(n||arguments.length===2)for(var s=0,a=t.length,i;s<a;s++)(i||!(s in t))&&(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))}var md="right-scroll-bar-position",xd="width-before-scroll-bar",__="with-scroll-bars-hidden",A_="--removed-body-scroll-bar-size";function wh(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function E_(e,t){var n=k.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(s){var a=n.value;a!==s&&(n.value=s,n.callback(s,a))}}}})[0];return n.callback=t,n.facade}var T_=typeof window<"u"?k.useLayoutEffect:k.useEffect,xb=new WeakMap;function D_(e,t){var n=E_(null,function(s){return e.forEach(function(a){return wh(a,s)})});return T_(function(){var s=xb.get(n);if(s){var a=new Set(s),i=new Set(e),l=n.current;a.forEach(function(c){i.has(c)||wh(c,null)}),i.forEach(function(c){a.has(c)||wh(c,l)})}xb.set(n,e)},[e]),n}function I_(e){return e}function P_(e,t){t===void 0&&(t=I_);var n=[],s=!1,a={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var l=t(i,s);return n.push(l),function(){n=n.filter(function(c){return c!==l})}},assignSyncMedium:function(i){for(s=!0;n.length;){var l=n;n=[],l.forEach(i)}n={push:function(c){return i(c)},filter:function(){return n}}},assignMedium:function(i){s=!0;var l=[];if(n.length){var c=n;n=[],c.forEach(i),l=n}var u=function(){var h=l;l=[],h.forEach(i)},p=function(){return Promise.resolve().then(u)};p(),n={push:function(h){l.push(h),p()},filter:function(h){return l=l.filter(h),n}}}};return a}function M_(e){e===void 0&&(e={});var t=P_(null);return t.options=cs({async:!0,ssr:!1},e),t}var V2=function(e){var t=e.sideCar,n=$2(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return k.createElement(s,cs({},n))};V2.isSideCarExport=!0;function F_(e,t){return e.useMedium(t),V2}var H2=M_(),kh=function(){},tu=k.forwardRef(function(e,t){var n=k.useRef(null),s=k.useState({onScrollCapture:kh,onWheelCapture:kh,onTouchMoveCapture:kh}),a=s[0],i=s[1],l=e.forwardProps,c=e.children,u=e.className,p=e.removeScrollBar,h=e.enabled,f=e.shards,m=e.sideCar,g=e.noRelative,y=e.noIsolation,b=e.inert,S=e.allowPinchZoom,v=e.as,N=v===void 0?"div":v,C=e.gapMode,_=$2(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=m,D=D_([n,t]),V=cs(cs({},_),a);return k.createElement(k.Fragment,null,h&&k.createElement(R,{sideCar:H2,removeScrollBar:p,shards:f,noRelative:g,noIsolation:y,inert:b,setCallbacks:i,allowPinchZoom:!!S,lockRef:n,gapMode:C}),l?k.cloneElement(k.Children.only(c),cs(cs({},V),{ref:D})):k.createElement(N,cs({},V,{className:u,ref:D}),c))});tu.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};tu.classNames={fullWidth:xd,zeroRight:md};var R_=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function B_(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=R_();return t&&e.setAttribute("nonce",t),e}function z_(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function L_(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var O_=function(){var e=0,t=null;return{add:function(n){e==0&&(t=B_())&&(z_(t,n),L_(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},$_=function(){var e=O_();return function(t,n){k.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},U2=function(){var e=$_(),t=function(n){var s=n.styles,a=n.dynamic;return e(s,a),null};return t},V_={left:0,top:0,right:0,gap:0},Sh=function(e){return parseInt(e||"",10)||0},H_=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Sh(n),Sh(s),Sh(a)]},U_=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return V_;var t=H_(e),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-n+t[2]-t[0])}},W_=U2(),Gi="data-scroll-locked",K_=function(e,t,n,s){var a=e.left,i=e.top,l=e.right,c=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(__,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(c,"px ").concat(s,`;
  }
  body[`).concat(Gi,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(md,` {
    right: `).concat(c,"px ").concat(s,`;
  }
  
  .`).concat(xd,` {
    margin-right: `).concat(c,"px ").concat(s,`;
  }
  
  .`).concat(md," .").concat(md,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(xd," .").concat(xd,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Gi,`] {
    `).concat(A_,": ").concat(c,`px;
  }
`)},gb=function(){var e=parseInt(document.body.getAttribute(Gi)||"0",10);return isFinite(e)?e:0},q_=function(){k.useEffect(function(){return document.body.setAttribute(Gi,(gb()+1).toString()),function(){var e=gb()-1;e<=0?document.body.removeAttribute(Gi):document.body.setAttribute(Gi,e.toString())}},[])},G_=function(e){var t=e.noRelative,n=e.noImportant,s=e.gapMode,a=s===void 0?"margin":s;q_();var i=k.useMemo(function(){return U_(a)},[a]);return k.createElement(W_,{styles:K_(i,!t,a,n?"":"!important")})},kp=!1;if(typeof window<"u")try{var Qc=Object.defineProperty({},"passive",{get:function(){return kp=!0,!0}});window.addEventListener("test",Qc,Qc),window.removeEventListener("test",Qc,Qc)}catch{kp=!1}var Pi=kp?{passive:!1}:!1,Y_=function(e){return e.tagName==="TEXTAREA"},W2=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Y_(e)&&n[t]==="visible")},Z_=function(e){return W2(e,"overflowY")},Q_=function(e){return W2(e,"overflowX")},bb=function(e,t){var n=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var a=K2(e,s);if(a){var i=q2(e,s),l=i[1],c=i[2];if(l>c)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},X_=function(e){var t=e.scrollTop,n=e.scrollHeight,s=e.clientHeight;return[t,n,s]},J_=function(e){var t=e.scrollLeft,n=e.scrollWidth,s=e.clientWidth;return[t,n,s]},K2=function(e,t){return e==="v"?Z_(t):Q_(t)},q2=function(e,t){return e==="v"?X_(t):J_(t)},eA=function(e,t){return e==="h"&&t==="rtl"?-1:1},tA=function(e,t,n,s,a){var i=eA(e,window.getComputedStyle(t).direction),l=i*s,c=n.target,u=t.contains(c),p=!1,h=l>0,f=0,m=0;do{if(!c)break;var g=q2(e,c),y=g[0],b=g[1],S=g[2],v=b-S-i*y;(y||v)&&K2(e,c)&&(f+=v,m+=y);var N=c.parentNode;c=N&&N.nodeType===Node.DOCUMENT_FRAGMENT_NODE?N.host:N}while(!u&&c!==document.body||u&&(t.contains(c)||t===c));return(h&&Math.abs(f)<1||!h&&Math.abs(m)<1)&&(p=!0),p},Xc=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},yb=function(e){return[e.deltaX,e.deltaY]},vb=function(e){return e&&"current"in e?e.current:e},nA=function(e,t){return e[0]===t[0]&&e[1]===t[1]},rA=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},sA=0,Mi=[];function aA(e){var t=k.useRef([]),n=k.useRef([0,0]),s=k.useRef(),a=k.useState(sA++)[0],i=k.useState(U2)[0],l=k.useRef(e);k.useEffect(function(){l.current=e},[e]),k.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var b=N_([e.lockRef.current],(e.shards||[]).map(vb),!0).filter(Boolean);return b.forEach(function(S){return S.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),b.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var c=k.useCallback(function(b,S){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!l.current.allowPinchZoom;var v=Xc(b),N=n.current,C="deltaX"in b?b.deltaX:N[0]-v[0],_="deltaY"in b?b.deltaY:N[1]-v[1],R,D=b.target,V=Math.abs(C)>Math.abs(_)?"h":"v";if("touches"in b&&V==="h"&&D.type==="range")return!1;var I=window.getSelection(),A=I&&I.anchorNode,U=A?A===D||A.contains(D):!1;if(U)return!1;var W=bb(V,D);if(!W)return!0;if(W?R=V:(R=V==="v"?"h":"v",W=bb(V,D)),!W)return!1;if(!s.current&&"changedTouches"in b&&(C||_)&&(s.current=R),!R)return!0;var T=s.current||R;return tA(T,S,b,T==="h"?C:_)},[]),u=k.useCallback(function(b){var S=b;if(!(!Mi.length||Mi[Mi.length-1]!==i)){var v="deltaY"in S?yb(S):Xc(S),N=t.current.filter(function(R){return R.name===S.type&&(R.target===S.target||S.target===R.shadowParent)&&nA(R.delta,v)})[0];if(N&&N.should){S.cancelable&&S.preventDefault();return}if(!N){var C=(l.current.shards||[]).map(vb).filter(Boolean).filter(function(R){return R.contains(S.target)}),_=C.length>0?c(S,C[0]):!l.current.noIsolation;_&&S.cancelable&&S.preventDefault()}}},[]),p=k.useCallback(function(b,S,v,N){var C={name:b,delta:S,target:v,should:N,shadowParent:iA(v)};t.current.push(C),setTimeout(function(){t.current=t.current.filter(function(_){return _!==C})},1)},[]),h=k.useCallback(function(b){n.current=Xc(b),s.current=void 0},[]),f=k.useCallback(function(b){p(b.type,yb(b),b.target,c(b,e.lockRef.current))},[]),m=k.useCallback(function(b){p(b.type,Xc(b),b.target,c(b,e.lockRef.current))},[]);k.useEffect(function(){return Mi.push(i),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",u,Pi),document.addEventListener("touchmove",u,Pi),document.addEventListener("touchstart",h,Pi),function(){Mi=Mi.filter(function(b){return b!==i}),document.removeEventListener("wheel",u,Pi),document.removeEventListener("touchmove",u,Pi),document.removeEventListener("touchstart",h,Pi)}},[]);var g=e.removeScrollBar,y=e.inert;return k.createElement(k.Fragment,null,y?k.createElement(i,{styles:rA(a)}):null,g?k.createElement(G_,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function iA(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const oA=F_(H2,aA);var Bm=k.forwardRef(function(e,t){return k.createElement(tu,cs({},e,{ref:t,sideCar:oA}))});Bm.classNames=tu.classNames;var lA=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Fi=new WeakMap,Jc=new WeakMap,ed={},jh=0,G2=function(e){return e&&(e.host||G2(e.parentNode))},cA=function(e,t){return t.map(function(n){if(e.contains(n))return n;var s=G2(n);return s&&e.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},dA=function(e,t,n,s){var a=cA(t,Array.isArray(e)?e:[e]);ed[n]||(ed[n]=new WeakMap);var i=ed[n],l=[],c=new Set,u=new Set(a),p=function(f){!f||c.has(f)||(c.add(f),p(f.parentNode))};a.forEach(p);var h=function(f){!f||u.has(f)||Array.prototype.forEach.call(f.children,function(m){if(c.has(m))h(m);else try{var g=m.getAttribute(s),y=g!==null&&g!=="false",b=(Fi.get(m)||0)+1,S=(i.get(m)||0)+1;Fi.set(m,b),i.set(m,S),l.push(m),b===1&&y&&Jc.set(m,!0),S===1&&m.setAttribute(n,"true"),y||m.setAttribute(s,"true")}catch(v){console.error("aria-hidden: cannot operate on ",m,v)}})};return h(t),c.clear(),jh++,function(){l.forEach(function(f){var m=Fi.get(f)-1,g=i.get(f)-1;Fi.set(f,m),i.set(f,g),m||(Jc.has(f)||f.removeAttribute(s),Jc.delete(f)),g||f.removeAttribute(n)}),jh--,jh||(Fi=new WeakMap,Fi=new WeakMap,Jc=new WeakMap,ed={})}},Y2=function(e,t,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),a=lA(e);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live], script"))),dA(s,a,n,"aria-hidden")):function(){return null}};function uA(e){const t=fA(e),n=k.forwardRef((s,a)=>{const{children:i,...l}=s,c=k.Children.toArray(i),u=c.find(pA);if(u){const p=u.props.children,h=c.map(f=>f===u?k.Children.count(p)>1?k.Children.only(null):k.isValidElement(p)?p.props.children:null:f);return r.jsx(t,{...l,ref:a,children:k.isValidElement(p)?k.cloneElement(p,void 0,h):null})}return r.jsx(t,{...l,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}function fA(e){const t=k.forwardRef((n,s)=>{const{children:a,...i}=n;if(k.isValidElement(a)){const l=xA(a),c=mA(i,a.props);return a.type!==k.Fragment&&(c.ref=s?lo(s,l):l),k.cloneElement(a,c)}return k.Children.count(a)>1?k.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var hA=Symbol("radix.slottable");function pA(e){return k.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===hA}function mA(e,t){const n={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?n[s]=(...c)=>{const u=i(...c);return a(...c),u}:a&&(n[s]=a):s==="style"?n[s]={...a,...i}:s==="className"&&(n[s]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function xA(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var nu="Dialog",[Z2,Q2]=ei(nu),[gA,Zr]=Z2(nu),X2=e=>{const{__scopeDialog:t,children:n,open:s,defaultOpen:a,onOpenChange:i,modal:l=!0}=e,c=k.useRef(null),u=k.useRef(null),[p,h]=Td({prop:s,defaultProp:a??!1,onChange:i,caller:nu});return r.jsx(gA,{scope:t,triggerRef:c,contentRef:u,contentId:qi(),titleId:qi(),descriptionId:qi(),open:p,onOpenChange:h,onOpenToggle:k.useCallback(()=>h(f=>!f),[h]),modal:l,children:n})};X2.displayName=nu;var J2="DialogTrigger",ew=k.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=Zr(J2,n),i=zt(t,a.triggerRef);return r.jsx(It.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Om(a.open),...s,ref:i,onClick:Tt(e.onClick,a.onOpenToggle)})});ew.displayName=J2;var zm="DialogPortal",[bA,tw]=Z2(zm,{forceMount:void 0}),nw=e=>{const{__scopeDialog:t,forceMount:n,children:s,container:a}=e,i=Zr(zm,t);return r.jsx(bA,{scope:t,forceMount:n,children:k.Children.map(s,l=>r.jsx(xa,{present:n||i.open,children:r.jsx(Rm,{asChild:!0,container:a,children:l})}))})};nw.displayName=zm;var Dd="DialogOverlay",rw=k.forwardRef((e,t)=>{const n=tw(Dd,e.__scopeDialog),{forceMount:s=n.forceMount,...a}=e,i=Zr(Dd,e.__scopeDialog);return i.modal?r.jsx(xa,{present:s||i.open,children:r.jsx(vA,{...a,ref:t})}):null});rw.displayName=Dd;var yA=uA("DialogOverlay.RemoveScroll"),vA=k.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=Zr(Dd,n);return r.jsx(Bm,{as:yA,allowPinchZoom:!0,shards:[a.contentRef],children:r.jsx(It.div,{"data-state":Om(a.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),Ga="DialogContent",sw=k.forwardRef((e,t)=>{const n=tw(Ga,e.__scopeDialog),{forceMount:s=n.forceMount,...a}=e,i=Zr(Ga,e.__scopeDialog);return r.jsx(xa,{present:s||i.open,children:i.modal?r.jsx(wA,{...a,ref:t}):r.jsx(kA,{...a,ref:t})})});sw.displayName=Ga;var wA=k.forwardRef((e,t)=>{const n=Zr(Ga,e.__scopeDialog),s=k.useRef(null),a=zt(t,n.contentRef,s);return k.useEffect(()=>{const i=s.current;if(i)return Y2(i)},[]),r.jsx(aw,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Tt(e.onCloseAutoFocus,i=>{i.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Tt(e.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0;(l.button===2||c)&&i.preventDefault()}),onFocusOutside:Tt(e.onFocusOutside,i=>i.preventDefault())})}),kA=k.forwardRef((e,t)=>{const n=Zr(Ga,e.__scopeDialog),s=k.useRef(!1),a=k.useRef(!1);return r.jsx(aw,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(s.current||n.triggerRef.current?.focus(),i.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=i.target;n.triggerRef.current?.contains(l)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),aw=k.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,...l}=e,c=Zr(Ga,n),u=k.useRef(null),p=zt(t,u);return O2(),r.jsxs(r.Fragment,{children:[r.jsx(Fm,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:i,children:r.jsx(Mm,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":Om(c.open),...l,ref:p,onDismiss:()=>c.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(jA,{titleId:c.titleId}),r.jsx(NA,{contentRef:u,descriptionId:c.descriptionId})]})]})}),Lm="DialogTitle",iw=k.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=Zr(Lm,n);return r.jsx(It.h2,{id:a.titleId,...s,ref:t})});iw.displayName=Lm;var ow="DialogDescription",lw=k.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=Zr(ow,n);return r.jsx(It.p,{id:a.descriptionId,...s,ref:t})});lw.displayName=ow;var cw="DialogClose",dw=k.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=Zr(cw,n);return r.jsx(It.button,{type:"button",...s,ref:t,onClick:Tt(e.onClick,()=>a.onOpenChange(!1))})});dw.displayName=cw;function Om(e){return e?"open":"closed"}var uw="DialogTitleWarning",[SA,fw]=K6(uw,{contentName:Ga,titleName:Lm,docsSlug:"dialog"}),jA=({titleId:e})=>{const t=fw(uw),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return k.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},CA="DialogDescriptionWarning",NA=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${fw(CA).contentName}}.`;return k.useEffect(()=>{const a=e.current?.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},_A=X2,AA=ew,EA=nw,TA=rw,DA=sw,IA=iw,PA=lw,hw=dw,MA=Symbol("radix.slottable");function FA(e){const t=({children:n})=>r.jsx(r.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=MA,t}var pw="AlertDialog",[RA]=ei(pw,[Q2]),Ls=Q2(),mw=e=>{const{__scopeAlertDialog:t,...n}=e,s=Ls(t);return r.jsx(_A,{...s,...n,modal:!0})};mw.displayName=pw;var BA="AlertDialogTrigger",zA=k.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=Ls(n);return r.jsx(AA,{...a,...s,ref:t})});zA.displayName=BA;var LA="AlertDialogPortal",xw=e=>{const{__scopeAlertDialog:t,...n}=e,s=Ls(t);return r.jsx(EA,{...s,...n})};xw.displayName=LA;var OA="AlertDialogOverlay",gw=k.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=Ls(n);return r.jsx(TA,{...a,...s,ref:t})});gw.displayName=OA;var Yi="AlertDialogContent",[$A,VA]=RA(Yi),HA=FA("AlertDialogContent"),bw=k.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:s,...a}=e,i=Ls(n),l=k.useRef(null),c=zt(t,l),u=k.useRef(null);return r.jsx(SA,{contentName:Yi,titleName:yw,docsSlug:"alert-dialog",children:r.jsx($A,{scope:n,cancelRef:u,children:r.jsxs(DA,{role:"alertdialog",...i,...a,ref:c,onOpenAutoFocus:Tt(a.onOpenAutoFocus,p=>{p.preventDefault(),u.current?.focus({preventScroll:!0})}),onPointerDownOutside:p=>p.preventDefault(),onInteractOutside:p=>p.preventDefault(),children:[r.jsx(HA,{children:s}),r.jsx(KA,{contentRef:l})]})})})});bw.displayName=Yi;var yw="AlertDialogTitle",vw=k.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=Ls(n);return r.jsx(IA,{...a,...s,ref:t})});vw.displayName=yw;var ww="AlertDialogDescription",kw=k.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=Ls(n);return r.jsx(PA,{...a,...s,ref:t})});kw.displayName=ww;var UA="AlertDialogAction",Sw=k.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=Ls(n);return r.jsx(hw,{...a,...s,ref:t})});Sw.displayName=UA;var jw="AlertDialogCancel",WA=k.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,{cancelRef:a}=VA(jw,n),i=Ls(n),l=zt(t,a);return r.jsx(hw,{...i,...s,ref:l})});WA.displayName=jw;var KA=({contentRef:e})=>{const t=`\`${Yi}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Yi}\` by passing a \`${ww}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Yi}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return k.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},qA=mw,GA=xw,YA=gw,ZA=bw,QA=Sw,XA=vw,JA=kw;function Cw(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=Cw(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function Nw(){for(var e,t,n=0,s="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=Cw(e))&&(s&&(s+=" "),s+=t);return s}const eE=(e,t)=>{const n=new Array(e.length+t.length);for(let s=0;s<e.length;s++)n[s]=e[s];for(let s=0;s<t.length;s++)n[e.length+s]=t[s];return n},tE=(e,t)=>({classGroupId:e,validator:t}),_w=(e=new Map,t=null,n)=>({nextPart:e,validators:t,classGroupId:n}),Id="-",wb=[],nE="arbitrary..",rE=e=>{const t=aE(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return sE(l);const c=l.split(Id),u=c[0]===""&&c.length>1?1:0;return Aw(c,u,t)},getConflictingClassGroupIds:(l,c)=>{if(c){const u=s[l],p=n[l];return u?p?eE(p,u):u:p||wb}return n[l]||wb}}},Aw=(e,t,n)=>{if(e.length-t===0)return n.classGroupId;const a=e[t],i=n.nextPart.get(a);if(i){const p=Aw(e,t+1,i);if(p)return p}const l=n.validators;if(l===null)return;const c=t===0?e.join(Id):e.slice(t).join(Id),u=l.length;for(let p=0;p<u;p++){const h=l[p];if(h.validator(c))return h.classGroupId}},sE=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),s=t.slice(0,n);return s?nE+s:void 0})(),aE=e=>{const{theme:t,classGroups:n}=e;return iE(n,t)},iE=(e,t)=>{const n=_w();for(const s in e){const a=e[s];$m(a,n,s,t)}return n},$m=(e,t,n,s)=>{const a=e.length;for(let i=0;i<a;i++){const l=e[i];oE(l,t,n,s)}},oE=(e,t,n,s)=>{if(typeof e=="string"){lE(e,t,n);return}if(typeof e=="function"){cE(e,t,n,s);return}dE(e,t,n,s)},lE=(e,t,n)=>{const s=e===""?t:Ew(t,e);s.classGroupId=n},cE=(e,t,n,s)=>{if(uE(e)){$m(e(s),t,n,s);return}t.validators===null&&(t.validators=[]),t.validators.push(tE(n,e))},dE=(e,t,n,s)=>{const a=Object.entries(e),i=a.length;for(let l=0;l<i;l++){const[c,u]=a[l];$m(u,Ew(t,c),n,s)}},Ew=(e,t)=>{let n=e;const s=t.split(Id),a=s.length;for(let i=0;i<a;i++){const l=s[i];let c=n.nextPart.get(l);c||(c=_w(),n.nextPart.set(l,c)),n=c}return n},uE=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,fE=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),s=Object.create(null);const a=(i,l)=>{n[i]=l,t++,t>e&&(t=0,s=n,n=Object.create(null))};return{get(i){let l=n[i];if(l!==void 0)return l;if((l=s[i])!==void 0)return a(i,l),l},set(i,l){i in n?n[i]=l:a(i,l)}}},Sp="!",kb=":",hE=[],Sb=(e,t,n,s,a)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:s,isExternal:a}),pE=e=>{const{prefix:t,experimentalParseClassName:n}=e;let s=a=>{const i=[];let l=0,c=0,u=0,p;const h=a.length;for(let b=0;b<h;b++){const S=a[b];if(l===0&&c===0){if(S===kb){i.push(a.slice(u,b)),u=b+1;continue}if(S==="/"){p=b;continue}}S==="["?l++:S==="]"?l--:S==="("?c++:S===")"&&c--}const f=i.length===0?a:a.slice(u);let m=f,g=!1;f.endsWith(Sp)?(m=f.slice(0,-1),g=!0):f.startsWith(Sp)&&(m=f.slice(1),g=!0);const y=p&&p>u?p-u:void 0;return Sb(i,g,m,y)};if(t){const a=t+kb,i=s;s=l=>l.startsWith(a)?i(l.slice(a.length)):Sb(hE,!1,l,void 0,!0)}if(n){const a=s;s=i=>n({className:i,parseClassName:a})}return s},mE=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((n,s)=>{t.set(n,1e6+s)}),n=>{const s=[];let a=[];for(let i=0;i<n.length;i++){const l=n[i],c=l[0]==="[",u=t.has(l);c||u?(a.length>0&&(a.sort(),s.push(...a),a=[]),s.push(l)):a.push(l)}return a.length>0&&(a.sort(),s.push(...a)),s}},xE=e=>({cache:fE(e.cacheSize),parseClassName:pE(e),sortModifiers:mE(e),...rE(e)}),gE=/\s+/,bE=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:a,sortModifiers:i}=t,l=[],c=e.trim().split(gE);let u="";for(let p=c.length-1;p>=0;p-=1){const h=c[p],{isExternal:f,modifiers:m,hasImportantModifier:g,baseClassName:y,maybePostfixModifierPosition:b}=n(h);if(f){u=h+(u.length>0?" "+u:u);continue}let S=!!b,v=s(S?y.substring(0,b):y);if(!v){if(!S){u=h+(u.length>0?" "+u:u);continue}if(v=s(y),!v){u=h+(u.length>0?" "+u:u);continue}S=!1}const N=m.length===0?"":m.length===1?m[0]:i(m).join(":"),C=g?N+Sp:N,_=C+v;if(l.indexOf(_)>-1)continue;l.push(_);const R=a(v,S);for(let D=0;D<R.length;++D){const V=R[D];l.push(C+V)}u=h+(u.length>0?" "+u:u)}return u},yE=(...e)=>{let t=0,n,s,a="";for(;t<e.length;)(n=e[t++])&&(s=Tw(n))&&(a&&(a+=" "),a+=s);return a},Tw=e=>{if(typeof e=="string")return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=Tw(e[s]))&&(n&&(n+=" "),n+=t);return n},vE=(e,...t)=>{let n,s,a,i;const l=u=>{const p=t.reduce((h,f)=>f(h),e());return n=xE(p),s=n.cache.get,a=n.cache.set,i=c,c(u)},c=u=>{const p=s(u);if(p)return p;const h=bE(u,n);return a(u,h),h};return i=l,(...u)=>i(yE(...u))},wE=[],Sn=e=>{const t=n=>n[e]||wE;return t.isThemeGetter=!0,t},Dw=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Iw=/^\((?:(\w[\w-]*):)?(.+)\)$/i,kE=/^\d+\/\d+$/,SE=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,jE=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,CE=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,NE=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,_E=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ri=e=>kE.test(e),Nt=e=>!!e&&!Number.isNaN(Number(e)),sa=e=>!!e&&Number.isInteger(Number(e)),Ch=e=>e.endsWith("%")&&Nt(e.slice(0,-1)),Is=e=>SE.test(e),AE=()=>!0,EE=e=>jE.test(e)&&!CE.test(e),Pw=()=>!1,TE=e=>NE.test(e),DE=e=>_E.test(e),IE=e=>!et(e)&&!tt(e),PE=e=>co(e,Rw,Pw),et=e=>Dw.test(e),La=e=>co(e,Bw,EE),Nh=e=>co(e,zE,Nt),jb=e=>co(e,Mw,Pw),ME=e=>co(e,Fw,DE),td=e=>co(e,zw,TE),tt=e=>Iw.test(e),Jo=e=>uo(e,Bw),FE=e=>uo(e,LE),Cb=e=>uo(e,Mw),RE=e=>uo(e,Rw),BE=e=>uo(e,Fw),nd=e=>uo(e,zw,!0),co=(e,t,n)=>{const s=Dw.exec(e);return s?s[1]?t(s[1]):n(s[2]):!1},uo=(e,t,n=!1)=>{const s=Iw.exec(e);return s?s[1]?t(s[1]):n:!1},Mw=e=>e==="position"||e==="percentage",Fw=e=>e==="image"||e==="url",Rw=e=>e==="length"||e==="size"||e==="bg-size",Bw=e=>e==="length",zE=e=>e==="number",LE=e=>e==="family-name",zw=e=>e==="shadow",OE=()=>{const e=Sn("color"),t=Sn("font"),n=Sn("text"),s=Sn("font-weight"),a=Sn("tracking"),i=Sn("leading"),l=Sn("breakpoint"),c=Sn("container"),u=Sn("spacing"),p=Sn("radius"),h=Sn("shadow"),f=Sn("inset-shadow"),m=Sn("text-shadow"),g=Sn("drop-shadow"),y=Sn("blur"),b=Sn("perspective"),S=Sn("aspect"),v=Sn("ease"),N=Sn("animate"),C=()=>["auto","avoid","all","avoid-page","page","left","right","column"],_=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],R=()=>[..._(),tt,et],D=()=>["auto","hidden","clip","visible","scroll"],V=()=>["auto","contain","none"],I=()=>[tt,et,u],A=()=>[Ri,"full","auto",...I()],U=()=>[sa,"none","subgrid",tt,et],W=()=>["auto",{span:["full",sa,tt,et]},sa,tt,et],T=()=>[sa,"auto",tt,et],M=()=>["auto","min","max","fr",tt,et],j=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],P=()=>["start","end","center","stretch","center-safe","end-safe"],L=()=>["auto",...I()],B=()=>[Ri,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...I()],q=()=>[e,tt,et],G=()=>[..._(),Cb,jb,{position:[tt,et]}],O=()=>["no-repeat",{repeat:["","x","y","space","round"]}],$=()=>["auto","cover","contain",RE,PE,{size:[tt,et]}],K=()=>[Ch,Jo,La],H=()=>["","none","full",p,tt,et],ee=()=>["",Nt,Jo,La],Y=()=>["solid","dashed","dotted","double"],re=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],de=()=>[Nt,Ch,Cb,jb],X=()=>["","none",y,tt,et],oe=()=>["none",Nt,tt,et],ye=()=>["none",Nt,tt,et],be=()=>[Nt,tt,et],Ie=()=>[Ri,"full",...I()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Is],breakpoint:[Is],color:[AE],container:[Is],"drop-shadow":[Is],ease:["in","out","in-out"],font:[IE],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Is],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Is],shadow:[Is],spacing:["px",Nt],text:[Is],"text-shadow":[Is],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ri,et,tt,S]}],container:["container"],columns:[{columns:[Nt,et,tt,c]}],"break-after":[{"break-after":C()}],"break-before":[{"break-before":C()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:R()}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:V()}],"overscroll-x":[{"overscroll-x":V()}],"overscroll-y":[{"overscroll-y":V()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:A()}],"inset-x":[{"inset-x":A()}],"inset-y":[{"inset-y":A()}],start:[{start:A()}],end:[{end:A()}],top:[{top:A()}],right:[{right:A()}],bottom:[{bottom:A()}],left:[{left:A()}],visibility:["visible","invisible","collapse"],z:[{z:[sa,"auto",tt,et]}],basis:[{basis:[Ri,"full","auto",c,...I()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Nt,Ri,"auto","initial","none",et]}],grow:[{grow:["",Nt,tt,et]}],shrink:[{shrink:["",Nt,tt,et]}],order:[{order:[sa,"first","last","none",tt,et]}],"grid-cols":[{"grid-cols":U()}],"col-start-end":[{col:W()}],"col-start":[{"col-start":T()}],"col-end":[{"col-end":T()}],"grid-rows":[{"grid-rows":U()}],"row-start-end":[{row:W()}],"row-start":[{"row-start":T()}],"row-end":[{"row-end":T()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":M()}],"auto-rows":[{"auto-rows":M()}],gap:[{gap:I()}],"gap-x":[{"gap-x":I()}],"gap-y":[{"gap-y":I()}],"justify-content":[{justify:[...j(),"normal"]}],"justify-items":[{"justify-items":[...P(),"normal"]}],"justify-self":[{"justify-self":["auto",...P()]}],"align-content":[{content:["normal",...j()]}],"align-items":[{items:[...P(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...P(),{baseline:["","last"]}]}],"place-content":[{"place-content":j()}],"place-items":[{"place-items":[...P(),"baseline"]}],"place-self":[{"place-self":["auto",...P()]}],p:[{p:I()}],px:[{px:I()}],py:[{py:I()}],ps:[{ps:I()}],pe:[{pe:I()}],pt:[{pt:I()}],pr:[{pr:I()}],pb:[{pb:I()}],pl:[{pl:I()}],m:[{m:L()}],mx:[{mx:L()}],my:[{my:L()}],ms:[{ms:L()}],me:[{me:L()}],mt:[{mt:L()}],mr:[{mr:L()}],mb:[{mb:L()}],ml:[{ml:L()}],"space-x":[{"space-x":I()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":I()}],"space-y-reverse":["space-y-reverse"],size:[{size:B()}],w:[{w:[c,"screen",...B()]}],"min-w":[{"min-w":[c,"screen","none",...B()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[l]},...B()]}],h:[{h:["screen","lh",...B()]}],"min-h":[{"min-h":["screen","lh","none",...B()]}],"max-h":[{"max-h":["screen","lh",...B()]}],"font-size":[{text:["base",n,Jo,La]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,tt,Nh]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Ch,et]}],"font-family":[{font:[FE,et,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,tt,et]}],"line-clamp":[{"line-clamp":[Nt,"none",tt,Nh]}],leading:[{leading:[i,...I()]}],"list-image":[{"list-image":["none",tt,et]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",tt,et]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:q()}],"text-color":[{text:q()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Y(),"wavy"]}],"text-decoration-thickness":[{decoration:[Nt,"from-font","auto",tt,La]}],"text-decoration-color":[{decoration:q()}],"underline-offset":[{"underline-offset":[Nt,"auto",tt,et]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",tt,et]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",tt,et]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:G()}],"bg-repeat":[{bg:O()}],"bg-size":[{bg:$()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},sa,tt,et],radial:["",tt,et],conic:[sa,tt,et]},BE,ME]}],"bg-color":[{bg:q()}],"gradient-from-pos":[{from:K()}],"gradient-via-pos":[{via:K()}],"gradient-to-pos":[{to:K()}],"gradient-from":[{from:q()}],"gradient-via":[{via:q()}],"gradient-to":[{to:q()}],rounded:[{rounded:H()}],"rounded-s":[{"rounded-s":H()}],"rounded-e":[{"rounded-e":H()}],"rounded-t":[{"rounded-t":H()}],"rounded-r":[{"rounded-r":H()}],"rounded-b":[{"rounded-b":H()}],"rounded-l":[{"rounded-l":H()}],"rounded-ss":[{"rounded-ss":H()}],"rounded-se":[{"rounded-se":H()}],"rounded-ee":[{"rounded-ee":H()}],"rounded-es":[{"rounded-es":H()}],"rounded-tl":[{"rounded-tl":H()}],"rounded-tr":[{"rounded-tr":H()}],"rounded-br":[{"rounded-br":H()}],"rounded-bl":[{"rounded-bl":H()}],"border-w":[{border:ee()}],"border-w-x":[{"border-x":ee()}],"border-w-y":[{"border-y":ee()}],"border-w-s":[{"border-s":ee()}],"border-w-e":[{"border-e":ee()}],"border-w-t":[{"border-t":ee()}],"border-w-r":[{"border-r":ee()}],"border-w-b":[{"border-b":ee()}],"border-w-l":[{"border-l":ee()}],"divide-x":[{"divide-x":ee()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ee()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Y(),"hidden","none"]}],"divide-style":[{divide:[...Y(),"hidden","none"]}],"border-color":[{border:q()}],"border-color-x":[{"border-x":q()}],"border-color-y":[{"border-y":q()}],"border-color-s":[{"border-s":q()}],"border-color-e":[{"border-e":q()}],"border-color-t":[{"border-t":q()}],"border-color-r":[{"border-r":q()}],"border-color-b":[{"border-b":q()}],"border-color-l":[{"border-l":q()}],"divide-color":[{divide:q()}],"outline-style":[{outline:[...Y(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Nt,tt,et]}],"outline-w":[{outline:["",Nt,Jo,La]}],"outline-color":[{outline:q()}],shadow:[{shadow:["","none",h,nd,td]}],"shadow-color":[{shadow:q()}],"inset-shadow":[{"inset-shadow":["none",f,nd,td]}],"inset-shadow-color":[{"inset-shadow":q()}],"ring-w":[{ring:ee()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:q()}],"ring-offset-w":[{"ring-offset":[Nt,La]}],"ring-offset-color":[{"ring-offset":q()}],"inset-ring-w":[{"inset-ring":ee()}],"inset-ring-color":[{"inset-ring":q()}],"text-shadow":[{"text-shadow":["none",m,nd,td]}],"text-shadow-color":[{"text-shadow":q()}],opacity:[{opacity:[Nt,tt,et]}],"mix-blend":[{"mix-blend":[...re(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":re()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Nt]}],"mask-image-linear-from-pos":[{"mask-linear-from":de()}],"mask-image-linear-to-pos":[{"mask-linear-to":de()}],"mask-image-linear-from-color":[{"mask-linear-from":q()}],"mask-image-linear-to-color":[{"mask-linear-to":q()}],"mask-image-t-from-pos":[{"mask-t-from":de()}],"mask-image-t-to-pos":[{"mask-t-to":de()}],"mask-image-t-from-color":[{"mask-t-from":q()}],"mask-image-t-to-color":[{"mask-t-to":q()}],"mask-image-r-from-pos":[{"mask-r-from":de()}],"mask-image-r-to-pos":[{"mask-r-to":de()}],"mask-image-r-from-color":[{"mask-r-from":q()}],"mask-image-r-to-color":[{"mask-r-to":q()}],"mask-image-b-from-pos":[{"mask-b-from":de()}],"mask-image-b-to-pos":[{"mask-b-to":de()}],"mask-image-b-from-color":[{"mask-b-from":q()}],"mask-image-b-to-color":[{"mask-b-to":q()}],"mask-image-l-from-pos":[{"mask-l-from":de()}],"mask-image-l-to-pos":[{"mask-l-to":de()}],"mask-image-l-from-color":[{"mask-l-from":q()}],"mask-image-l-to-color":[{"mask-l-to":q()}],"mask-image-x-from-pos":[{"mask-x-from":de()}],"mask-image-x-to-pos":[{"mask-x-to":de()}],"mask-image-x-from-color":[{"mask-x-from":q()}],"mask-image-x-to-color":[{"mask-x-to":q()}],"mask-image-y-from-pos":[{"mask-y-from":de()}],"mask-image-y-to-pos":[{"mask-y-to":de()}],"mask-image-y-from-color":[{"mask-y-from":q()}],"mask-image-y-to-color":[{"mask-y-to":q()}],"mask-image-radial":[{"mask-radial":[tt,et]}],"mask-image-radial-from-pos":[{"mask-radial-from":de()}],"mask-image-radial-to-pos":[{"mask-radial-to":de()}],"mask-image-radial-from-color":[{"mask-radial-from":q()}],"mask-image-radial-to-color":[{"mask-radial-to":q()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":_()}],"mask-image-conic-pos":[{"mask-conic":[Nt]}],"mask-image-conic-from-pos":[{"mask-conic-from":de()}],"mask-image-conic-to-pos":[{"mask-conic-to":de()}],"mask-image-conic-from-color":[{"mask-conic-from":q()}],"mask-image-conic-to-color":[{"mask-conic-to":q()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:G()}],"mask-repeat":[{mask:O()}],"mask-size":[{mask:$()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",tt,et]}],filter:[{filter:["","none",tt,et]}],blur:[{blur:X()}],brightness:[{brightness:[Nt,tt,et]}],contrast:[{contrast:[Nt,tt,et]}],"drop-shadow":[{"drop-shadow":["","none",g,nd,td]}],"drop-shadow-color":[{"drop-shadow":q()}],grayscale:[{grayscale:["",Nt,tt,et]}],"hue-rotate":[{"hue-rotate":[Nt,tt,et]}],invert:[{invert:["",Nt,tt,et]}],saturate:[{saturate:[Nt,tt,et]}],sepia:[{sepia:["",Nt,tt,et]}],"backdrop-filter":[{"backdrop-filter":["","none",tt,et]}],"backdrop-blur":[{"backdrop-blur":X()}],"backdrop-brightness":[{"backdrop-brightness":[Nt,tt,et]}],"backdrop-contrast":[{"backdrop-contrast":[Nt,tt,et]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Nt,tt,et]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Nt,tt,et]}],"backdrop-invert":[{"backdrop-invert":["",Nt,tt,et]}],"backdrop-opacity":[{"backdrop-opacity":[Nt,tt,et]}],"backdrop-saturate":[{"backdrop-saturate":[Nt,tt,et]}],"backdrop-sepia":[{"backdrop-sepia":["",Nt,tt,et]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":I()}],"border-spacing-x":[{"border-spacing-x":I()}],"border-spacing-y":[{"border-spacing-y":I()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",tt,et]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Nt,"initial",tt,et]}],ease:[{ease:["linear","initial",v,tt,et]}],delay:[{delay:[Nt,tt,et]}],animate:[{animate:["none",N,tt,et]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,tt,et]}],"perspective-origin":[{"perspective-origin":R()}],rotate:[{rotate:oe()}],"rotate-x":[{"rotate-x":oe()}],"rotate-y":[{"rotate-y":oe()}],"rotate-z":[{"rotate-z":oe()}],scale:[{scale:ye()}],"scale-x":[{"scale-x":ye()}],"scale-y":[{"scale-y":ye()}],"scale-z":[{"scale-z":ye()}],"scale-3d":["scale-3d"],skew:[{skew:be()}],"skew-x":[{"skew-x":be()}],"skew-y":[{"skew-y":be()}],transform:[{transform:[tt,et,"","none","gpu","cpu"]}],"transform-origin":[{origin:R()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ie()}],"translate-x":[{"translate-x":Ie()}],"translate-y":[{"translate-y":Ie()}],"translate-z":[{"translate-z":Ie()}],"translate-none":["translate-none"],accent:[{accent:q()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:q()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",tt,et]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",tt,et]}],fill:[{fill:["none",...q()]}],"stroke-w":[{stroke:[Nt,Jo,La,Nh]}],stroke:[{stroke:["none",...q()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},$E=vE(OE);function Pe(...e){return $E(Nw(e))}var VE=Symbol.for("react.lazy"),Pd=em[" use ".trim().toString()];function HE(e){return typeof e=="object"&&e!==null&&"then"in e}function Lw(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===VE&&"_payload"in e&&HE(e._payload)}function UE(e){const t=KE(e),n=k.forwardRef((s,a)=>{let{children:i,...l}=s;Lw(i)&&typeof Pd=="function"&&(i=Pd(i._payload));const c=k.Children.toArray(i),u=c.find(GE);if(u){const p=u.props.children,h=c.map(f=>f===u?k.Children.count(p)>1?k.Children.only(null):k.isValidElement(p)?p.props.children:null:f);return r.jsx(t,{...l,ref:a,children:k.isValidElement(p)?k.cloneElement(p,void 0,h):null})}return r.jsx(t,{...l,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}var WE=UE("Slot");function KE(e){const t=k.forwardRef((n,s)=>{let{children:a,...i}=n;if(Lw(a)&&typeof Pd=="function"&&(a=Pd(a._payload)),k.isValidElement(a)){const l=ZE(a),c=YE(i,a.props);return a.type!==k.Fragment&&(c.ref=s?lo(s,l):l),k.cloneElement(a,c)}return k.Children.count(a)>1?k.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var qE=Symbol("radix.slottable");function GE(e){return k.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===qE}function YE(e,t){const n={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?n[s]=(...c)=>{const u=i(...c);return a(...c),u}:a&&(n[s]=a):s==="style"?n[s]={...a,...i}:s==="className"&&(n[s]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function ZE(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}const Nb=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,_b=Nw,QE=(e,t)=>n=>{var s;if(t?.variants==null)return _b(e,n?.class,n?.className);const{variants:a,defaultVariants:i}=t,l=Object.keys(a).map(p=>{const h=n?.[p],f=i?.[p];if(h===null)return null;const m=Nb(h)||Nb(f);return a[p][m]}),c=n&&Object.entries(n).reduce((p,h)=>{let[f,m]=h;return m===void 0||(p[f]=m),p},{}),u=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((p,h)=>{let{class:f,className:m,...g}=h;return Object.entries(g).every(y=>{let[b,S]=y;return Array.isArray(S)?S.includes({...i,...c}[b]):{...i,...c}[b]===S})?[...p,f,m]:p},[]);return _b(e,l,u,n?.class,n?.className)},Ow=QE("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function XE({className:e,variant:t,size:n,asChild:s=!1,...a}){const i=s?WE:"button";return r.jsx(i,{"data-slot":"button",className:Pe(Ow({variant:t,size:n,className:e})),...a})}function JE({...e}){return r.jsx(qA,{"data-slot":"alert-dialog",...e})}function e8({...e}){return r.jsx(GA,{"data-slot":"alert-dialog-portal",...e})}const $w=k.forwardRef(({className:e,...t},n)=>r.jsx(YA,{ref:n,"data-slot":"alert-dialog-overlay",className:Pe("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t}));$w.displayName="AlertDialogOverlay";function t8({className:e,...t}){return r.jsxs(e8,{children:[r.jsx($w,{}),r.jsx(ZA,{"data-slot":"alert-dialog-content",className:Pe("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...t})]})}function n8({className:e,...t}){return r.jsx(XA,{"data-slot":"alert-dialog-title",className:Pe("text-lg font-semibold",e),...t})}function r8({className:e,...t}){return r.jsx(JA,{"data-slot":"alert-dialog-description",className:Pe("text-muted-foreground text-sm",e),...t})}function s8({className:e,...t}){return r.jsx(QA,{className:Pe(Ow(),e),...t})}const Md="ToukenRanbuDB",a8=10,J={USER_DATA:"userData",CHARACTERS:"characters",CHATS:"chats",CHAT_MESSAGES:"chatMessages",CHAT_SETTINGS:"chatSettings",WORLD_BOOKS:"worldBooks",API_SETTINGS:"apiSettings",APPEARANCE:"appearance",MISC:"misc",STICKERS:"stickers",BUBBLE_PRESETS:"bubblePresets",AI_TASKS:"aiTasks",HEALTH:"health",SCHEDULE:"schedule",TRANSACTIONS:"transactions"};let i8=class{db=null;async init(){return new Promise((t,n)=>{const s=indexedDB.open(Md,a8);s.onerror=()=>{console.error("Failed to open IndexedDB:",s.error),n(new Error("Failed to open database"))},s.onsuccess=()=>{this.db=s.result;const a=Object.values(J),i=a.filter(l=>!this.db.objectStoreNames.contains(l));if(i.length>0){console.error("Missing object stores:",i),console.log("Available stores:",Array.from(this.db.objectStoreNames)),console.log("Required stores:",a),this.db.close();const l=indexedDB.deleteDatabase(Md);l.onsuccess=()=>{console.log("Database deleted, reinitializing..."),this.init().then(t).catch(n)},l.onerror=()=>{n(new Error("Failed to recreate database"))};return}console.log("IndexedDB initialized successfully with stores:",Array.from(this.db.objectStoreNames)),t()},s.onupgradeneeded=a=>{const i=a.target.result;console.log("Database upgrade needed from version",a.oldVersion,"to",a.newVersion),i.objectStoreNames.contains(J.USER_DATA)||(i.createObjectStore(J.USER_DATA),console.log("Created store:",J.USER_DATA)),i.objectStoreNames.contains(J.CHARACTERS)||(i.createObjectStore(J.CHARACTERS),console.log("Created store:",J.CHARACTERS)),i.objectStoreNames.contains(J.CHATS)||(i.createObjectStore(J.CHATS),console.log("Created store:",J.CHATS)),i.objectStoreNames.contains(J.CHAT_MESSAGES)||(i.createObjectStore(J.CHAT_MESSAGES),console.log("Created store:",J.CHAT_MESSAGES)),i.objectStoreNames.contains(J.CHAT_SETTINGS)||(i.createObjectStore(J.CHAT_SETTINGS),console.log("Created store:",J.CHAT_SETTINGS)),i.objectStoreNames.contains(J.WORLD_BOOKS)||(i.createObjectStore(J.WORLD_BOOKS),console.log("Created store:",J.WORLD_BOOKS)),i.objectStoreNames.contains(J.API_SETTINGS)||(i.createObjectStore(J.API_SETTINGS),console.log("Created store:",J.API_SETTINGS)),i.objectStoreNames.contains(J.APPEARANCE)||(i.createObjectStore(J.APPEARANCE),console.log("Created store:",J.APPEARANCE)),i.objectStoreNames.contains(J.MISC)||(i.createObjectStore(J.MISC),console.log("Created store:",J.MISC)),i.objectStoreNames.contains(J.STICKERS)||(i.createObjectStore(J.STICKERS),console.log("Created store:",J.STICKERS)),i.objectStoreNames.contains(J.BUBBLE_PRESETS)||(i.createObjectStore(J.BUBBLE_PRESETS),console.log("Created store:",J.BUBBLE_PRESETS)),i.objectStoreNames.contains(J.AI_TASKS)||(i.createObjectStore(J.AI_TASKS),console.log("Created store:",J.AI_TASKS)),i.objectStoreNames.contains(J.HEALTH)||(i.createObjectStore(J.HEALTH),console.log("Created store:",J.HEALTH)),i.objectStoreNames.contains(J.SCHEDULE)||(i.createObjectStore(J.SCHEDULE),console.log("Created store:",J.SCHEDULE)),i.objectStoreNames.contains(J.TRANSACTIONS)||(i.createObjectStore(J.TRANSACTIONS),console.log("Created store:",J.TRANSACTIONS))}})}validateStore(t){if(!this.db)throw new Error("Database not initialized");if(!this.db.objectStoreNames.contains(t))throw new Error(`Store "${t}" does not exist. Available stores: ${Array.from(this.db.objectStoreNames).join(", ")}`)}async get(t,n){return this.db||await this.init(),this.validateStore(t),new Promise((s,a)=>{try{const c=this.db.transaction(t,"readonly").objectStore(t).get(n);c.onsuccess=()=>{s(c.result||null)},c.onerror=()=>{a(new Error(`Failed to get data from ${t}: ${c.error}`))}}catch(i){a(i)}})}async set(t,n,s){return this.db||await this.init(),this.validateStore(t),new Promise((a,i)=>{try{const u=this.db.transaction(t,"readwrite").objectStore(t).put(s,n);u.onsuccess=()=>{a()},u.onerror=()=>{i(new Error(`Failed to set data in ${t}: ${u.error}`))}}catch(l){i(l)}})}async delete(t,n){return this.db||await this.init(),this.validateStore(t),new Promise((s,a)=>{try{const c=this.db.transaction(t,"readwrite").objectStore(t).delete(n);c.onsuccess=()=>{s()},c.onerror=()=>{a(new Error(`Failed to delete data from ${t}: ${c.error}`))}}catch(i){a(i)}})}async getAllKeys(t){return this.db||await this.init(),this.validateStore(t),new Promise((n,s)=>{try{const l=this.db.transaction(t,"readonly").objectStore(t).getAllKeys();l.onsuccess=()=>{n(l.result)},l.onerror=()=>{s(new Error(`Failed to get all keys from ${t}: ${l.error}`))}}catch(a){s(a)}})}async getAll(t){this.db||await this.init();const n=await this.getAllKeys(t),s={};for(const a of n){const i=await this.get(t,a);i!==null&&(s[a]=i)}return s}async clear(t){return this.db||await this.init(),this.validateStore(t),new Promise((n,s)=>{try{const l=this.db.transaction(t,"readwrite").objectStore(t).clear();l.onsuccess=()=>{n()},l.onerror=()=>{s(new Error(`Failed to clear ${t}: ${l.error}`))}}catch(a){s(a)}})}async clearAll(){this.db||await this.init();const t=Object.values(J);for(const n of t)await this.clear(n)}async getStoreSize(t){const n=await this.getAll(t),s=JSON.stringify(n);return new Blob([s]).size}async exportAll(){this.db||await this.init();const t={},n=Object.values(J);for(const s of n)t[s]=await this.getAll(s);return t}async importAll(t){this.db||await this.init();for(const[n,s]of Object.entries(t))if(Object.values(J).includes(n)){await this.clear(n);for(const[a,i]of Object.entries(s))await this.set(n,a,i)}}async migrateFromLocalStorage(){if(!await this.get(J.MISC,"migrated_from_localstorage")){console.log("localStorageIndexedDB...");try{const n=localStorage.getItem("userData");n&&await this.set(J.USER_DATA,"userData",JSON.parse(n));const s=localStorage.getItem("user_description");s&&await this.set(J.USER_DATA,"user_description",s);const a=localStorage.getItem("characters");a&&await this.set(J.CHARACTERS,"characters",JSON.parse(a));const i=localStorage.getItem("chat_list");i&&await this.set(J.CHATS,"chat_list",JSON.parse(i));for(let h=0;h<localStorage.length;h++){const f=localStorage.key(h);if(f&&f.startsWith("chat_messages_")){const m=localStorage.getItem(f);m&&await this.set(J.CHAT_MESSAGES,f,JSON.parse(m))}}const l=localStorage.getItem("chat_settings");l&&await this.set(J.CHAT_SETTINGS,"chat_settings",JSON.parse(l));for(let h=0;h<localStorage.length;h++){const f=localStorage.key(h);if(f&&f.startsWith("chat_detail_settings_")){const m=localStorage.getItem(f);m&&await this.set(J.CHAT_SETTINGS,f,JSON.parse(m))}}const c=localStorage.getItem("world_books");c&&await this.set(J.WORLD_BOOKS,"world_books",JSON.parse(c));for(let h=0;h<localStorage.length;h++){const f=localStorage.key(h);if(f&&f.startsWith("api_")){const m=localStorage.getItem(f);if(m)try{await this.set(J.API_SETTINGS,f,JSON.parse(m))}catch{await this.set(J.API_SETTINGS,f,m)}}}const u=localStorage.getItem("accent_color");u&&await this.set(J.APPEARANCE,"accent_color",u);const p=localStorage.getItem("dark_mode");p&&await this.set(J.APPEARANCE,"dark_mode",p);for(let h=0;h<localStorage.length;h++){const f=localStorage.key(h);if(f&&(f.startsWith("desktop")||f.startsWith("image_")||f.startsWith("customText")||f.includes("wallpaper")||f.includes("color")||f.includes("font")||f==="organizations")){const m=localStorage.getItem(f);if(m)try{await this.set(J.MISC,f,JSON.parse(m))}catch{await this.set(J.MISC,f,m)}}}await this.set(J.MISC,"migrated_from_localstorage",!0),console.log("")}catch(n){throw console.error(":",n),n}}}};const se=new i8;async function o8(){console.log("=== Database Diagnosis ===");try{await se.init(),console.log(" Database initialized successfully");const e=se.db;if(e){const t=Array.from(e.objectStoreNames);console.log("Available stores:",t);const s=Object.values(J).filter(i=>!t.includes(i));s.length>0?(console.error(" Missing stores:",s),console.log("Attempting to recreate database..."),e.close(),await new Promise((i,l)=>{const c=indexedDB.deleteDatabase(Md);c.onsuccess=()=>{console.log("Database deleted successfully"),i()},c.onerror=()=>{console.error("Failed to delete database"),l(c.error)}}),await se.init(),console.log(" Database recreated successfully")):console.log(" All required stores are present"),await se.set(J.MISC,"test_key","test_value"),await se.get(J.MISC,"test_key")==="test_value"?(console.log(" Read/write operations working"),await se.delete(J.MISC,"test_key")):console.error(" Read/write operations failed")}console.log("=== Diagnosis Complete ===")}catch(e){throw console.error(" Database diagnosis failed:",e),e}}typeof window<"u"&&(window.diagnoseDatabaseIssues=o8,window.clearDatabase=async()=>{const e=se.db;e&&e.close(),await new Promise(t=>{const n=indexedDB.deleteDatabase(Md);n.onsuccess=()=>{console.log("Database cleared successfully. Please refresh the page."),t()}})});/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l8=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),c8=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,s)=>s?s.toUpperCase():n.toLowerCase()),Ab=e=>{const t=c8(e);return t.charAt(0).toUpperCase()+t.slice(1)},Vw=(...e)=>e.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var d8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u8=k.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:a="",children:i,iconNode:l,...c},u)=>k.createElement("svg",{ref:u,...d8,width:t,height:t,stroke:e,strokeWidth:s?Number(n)*24/Number(t):n,className:Vw("lucide",a),...c},[...l.map(([p,h])=>k.createElement(p,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=(e,t)=>{const n=k.forwardRef(({className:s,...a},i)=>k.createElement(u8,{ref:i,iconNode:t,className:Vw(`lucide-${l8(Ab(e))}`,`lucide-${e}`,s),...a}));return n.displayName=Ab(e),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f8=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Fd=Fe("activity",f8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h8=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],p8=Fe("align-left",h8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m8=[["path",{d:"M12 22V8",key:"qkxhtm"}],["path",{d:"M5 12H2a10 10 0 0 0 20 0h-3",key:"1hv3nh"}],["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}]],x8=Fe("anchor",m8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g8=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Ya=Fe("archive",g8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b8=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],y8=Fe("arrow-down-left",b8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v8=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],jp=Fe("arrow-left",v8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w8=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],k8=Fe("arrow-right",w8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S8=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],j8=Fe("arrow-up-right",S8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C8=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],N8=Fe("arrow-up",C8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _8=[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]],A8=Fe("battery",_8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],T8=Fe("book-open",E8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D8=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Hw=Fe("book",D8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I8=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],P8=Fe("bookmark",I8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M8=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Eb=Fe("box",M8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],Uw=Fe("brain",F8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m14 14-4 4",key:"rymu2i"}],["path",{d:"m10 14 4 4",key:"3sz06r"}]],Tb=Fe("calendar-x",R8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B8=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Rs=Fe("calendar",B8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z8=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Vm=Fe("camera",z8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8=[["path",{d:"M22 20v-9H2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2Z",key:"109fe4"}],["path",{d:"M18 11V4H6v7",key:"mon5oj"}],["path",{d:"M15 22v-4a3 3 0 0 0-3-3a3 3 0 0 0-3 3v4",key:"1k4jtn"}],["path",{d:"M22 11V9",key:"3zbp94"}],["path",{d:"M2 11V9",key:"1x5rnq"}],["path",{d:"M6 4V2",key:"1rsq15"}],["path",{d:"M18 4V2",key:"1jsdo1"}],["path",{d:"M10 4V2",key:"75d9ly"}],["path",{d:"M14 4V2",key:"8nj3z6"}]],O8=Fe("castle",L8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Et=Fe("check",$8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V8=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ka=Fe("chevron-down",V8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H8=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],dn=Fe("chevron-left",H8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U8=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Qn=Fe("chevron-right",U8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W8=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],K8=Fe("chevron-up",W8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Hm=Fe("circle-alert",q8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],Y8=Fe("circle-arrow-up",G8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Q8=Fe("circle-check",Z8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],J8=Fe("circle",X8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],wl=Fe("clock",e7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],n7=Fe("cloud",t7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r7=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],s7=Fe("coins",r7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a7=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],i7=Fe("copy",a7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o7=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Ww=Fe("credit-card",o7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l7=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Kw=Fe("database",l7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c7=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],d7=Fe("download",c7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u7=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],f7=Fe("ellipsis",u7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h7=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]],p7=Fe("eraser",h7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m7=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],x7=Fe("eye",m7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g7=[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]],b7=Fe("file-code",g7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y7=[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]],Um=Fe("file-pen-line",y7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v7=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Wm=Fe("file-text",v7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w7=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],k7=Fe("flag",w7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S7=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],qw=Fe("flame",S7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j7=[["path",{d:"M12 5a3 3 0 1 1 3 3m-3-3a3 3 0 1 0-3 3m3-3v1M9 8a3 3 0 1 0 3 3M9 8h1m5 0a3 3 0 1 1-3 3m3-3h-1m-2 3v-1",key:"3pnvol"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M12 10v12",key:"6ubwww"}],["path",{d:"M12 22c4.2 0 7-1.667 7-5-4.2 0-7 1.667-7 5Z",key:"9hd38g"}],["path",{d:"M12 22c-4.2 0-7-1.667-7-5 4.2 0 7 1.667 7 5Z",key:"ufn41s"}]],Gw=Fe("flower-2",j7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C7=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],N7=Fe("gift",C7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Yw=Fe("globe",_7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A7=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],E7=Fe("grid-3x3",A7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T7=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],D7=Fe("hard-drive",T7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I7=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],gd=Fe("hash",I7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P7=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Rd=Fe("heart",P7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M7=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],F7=Fe("house",M7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R7=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],qa=Fe("image",R7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],z7=Fe("info",B7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L7=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Db=Fe("key",L7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O7=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],$7=Fe("layers",O7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V7=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Zw=Fe("layout-grid",V7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H7=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],Ib=Fe("library",H7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U7=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],W7=Fe("list",U7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K7=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],q7=Fe("loader-circle",K7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G7=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Pb=Fe("mail",G7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y7=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Cp=Fe("map-pin",Y7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z7=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],Qw=Fe("menu",Z7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q7=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],Mb=Fe("message-circle",Q7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X7=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M13 8H7",key:"14i4kc"}],["path",{d:"M17 12H7",key:"16if0g"}]],J7=Fe("message-square-text",X7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e9=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],t9=Fe("message-square",e9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n9=[["path",{d:"M5 12h14",key:"1ays0h"}]],Km=Fe("minus",n9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],s9=Fe("monitor",r9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a9=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],ru=Fe("moon",a9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i9=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Za=Fe("package",i9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o9=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],l9=Fe("palette",o9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c9=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],d9=Fe("pen-line",c9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u9=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],f9=Fe("pen",u9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h9=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],p9=Fe("pencil",h9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m9=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],x9=Fe("pin",m9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g9=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Zn=Fe("plus",g9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b9=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],bd=Fe("refresh-cw",b9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y9=[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]],v9=Fe("reply",y9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w9=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],k9=Fe("rotate-ccw",w9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S9=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ti=Fe("save",S9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j9=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],ga=Fe("search",j9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C9=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],qm=Fe("send",C9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N9=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],Bd=Fe("server",N9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _9=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],A9=Fe("settings-2",_9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E9=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],El=Fe("settings",E9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T9=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Gm=Fe("share-2",T9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D9=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]],I9=Fe("share",D9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P9=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Np=Fe("shield-check",P9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M9=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],F9=Fe("shield",M9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R9=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],su=Fe("shopping-bag",R9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B9=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],z9=Fe("smartphone",B9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],O9=Fe("smile",L9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $9=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],V9=Fe("sparkles",$9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H9=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],U9=Fe("square-check-big",H9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W9=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M19.27 13.73A2.5 2.5 0 0 0 17.5 13h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-1.5c0-.66-.26-1.3-.73-1.77Z",key:"1sy9ra"}],["path",{d:"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-3-3c-1.66 0-3 1-3 3s1 2 1 3.5V13",key:"cnxgux"}]],K9=Fe("stamp",W9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q9=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Xw=Fe("star",q9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G9=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],Jw=Fe("stethoscope",G9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y9=[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M14 3v4a2 2 0 0 0 2 2h4",key:"36rjfy"}],["path",{d:"M8 13h.01",key:"1sbv64"}],["path",{d:"M16 13h.01",key:"wip0gl"}],["path",{d:"M10 16s.8 1 2 1c1.3 0 2-1 2-1",key:"1vvgv3"}]],Z9=Fe("sticker",Y9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q9=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],X9=Fe("store",Q9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J9=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Ym=Fe("sun",J9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eT=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],tT=Fe("sword",eT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],rT=Fe("swords",nT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],aT=Fe("table",sT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Fb=Fe("tag",iT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]],e5=Fe("terminal",oT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],cT=Fe("thumbs-down",lT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],uT=Fe("thumbs-up",dT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],xn=Fe("trash-2",fT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],pT=Fe("trash",hT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],_p=Fe("triangle-alert",mT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],au=Fe("upload",xT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],bT=Fe("user-plus",gT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],mn=Fe("user",yT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Tl=Fe("users",vT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],kT=Fe("waves",wT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],jT=Fe("wifi",ST);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],xt=Fe("x",CT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],t5=Fe("zap",NT);function _T({onLoginSuccess:e}){const[t,n]=k.useState({name:"",country:"",fortress:"",date:""}),[s,a]=k.useState(!1),[i,l]=k.useState(!1),c=()=>{if(!t.name||!t.country||!t.fortress||!t.date){l(!0);return}a(!0),setTimeout(async()=>{await se.set(J.USER_DATA,"userData",t),e(t),a(!1)},2e3)};return r.jsxs("div",{className:"min-h-screen w-full bg-[#F2F0EB] flex flex-col items-center justify-center p-6 font-['Source_Han_Sans_CN_VF',sans-serif] relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.03]",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),r.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-blue-100/50 rounded-full blur-3xl pointer-events-none"}),r.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-gray-200/50 rounded-full blur-3xl pointer-events-none"}),r.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"w-full max-w-md relative z-10",children:[r.jsxs("div",{className:"flex flex-col items-center mb-8",children:[r.jsx(me.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8,delay:.2},className:"w-32 h-32 mb-6 drop-shadow-2xl",children:r.jsx("img",{alt:"Touken OS Logo",className:"w-full h-full object-contain",src:F2})}),r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("h1",{className:"text-2xl font-bold text-[#2C2C2C] tracking-tight",children:""}),r.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs font-mono text-[#8C8C89] uppercase tracking-widest bg-white/50 py-1 px-3 rounded-full border border-[#D6D3CC]",children:[r.jsx(Np,{className:"w-3 h-3"}),"Secure Connection"]})]})]}),r.jsxs("div",{className:"bg-white/80 backdrop-blur-xl shadow-[0_8px_30px_rgb(0,0,0,0.04)] rounded-2xl overflow-hidden border border-white",children:[r.jsx("div",{className:"h-1.5 w-full bg-[#2C2C2C]"}),r.jsxs("div",{className:"p-8 space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-1.5",children:[r.jsxs("label",{className:"text-[10px] font-bold text-[#8C8C89] uppercase tracking-wider flex items-center gap-1.5",children:[r.jsx(mn,{className:"w-3 h-3"})," "]}),r.jsx("input",{type:"text",value:t.name,onChange:u=>n({...t,name:u.target.value}),placeholder:"",className:"w-full bg-[#F9F9F7] border-b-2 border-[#E5E5E5] px-3 py-2.5 text-sm font-medium text-[#2C2C2C] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-all rounded-t-md placeholder:text-[#BBB]"})]}),r.jsxs("div",{className:"space-y-1.5",children:[r.jsxs("label",{className:"text-[10px] font-bold text-[#8C8C89] uppercase tracking-wider flex items-center gap-1.5",children:[r.jsx(Cp,{className:"w-3 h-3"})," "]}),r.jsx("input",{type:"text",value:t.country,onChange:u=>n({...t,country:u.target.value}),placeholder:" (: )",className:"w-full bg-[#F9F9F7] border-b-2 border-[#E5E5E5] px-3 py-2.5 text-sm font-medium text-[#2C2C2C] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-all rounded-t-md placeholder:text-[#BBB]"})]}),r.jsxs("div",{className:"space-y-1.5",children:[r.jsxs("label",{className:"text-[10px] font-bold text-[#8C8C89] uppercase tracking-wider flex items-center gap-1.5",children:[r.jsx(F7,{className:"w-3 h-3"})," "]}),r.jsx("input",{type:"text",value:t.fortress,onChange:u=>n({...t,fortress:u.target.value}),placeholder:"",className:"w-full bg-[#F9F9F7] border-b-2 border-[#E5E5E5] px-3 py-2.5 text-sm font-medium text-[#2C2C2C] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-all rounded-t-md placeholder:text-[#BBB]"})]}),r.jsxs("div",{className:"space-y-1.5",children:[r.jsxs("label",{className:"text-[10px] font-bold text-[#8C8C89] uppercase tracking-wider flex items-center gap-1.5",children:[r.jsx(Rs,{className:"w-3 h-3"})," "]}),r.jsx("input",{type:"date",value:t.date,onChange:u=>n({...t,date:u.target.value}),className:"w-full bg-[#F9F9F7] border-b-2 border-[#E5E5E5] px-3 py-2.5 text-sm font-medium text-[#2C2C2C] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-all rounded-t-md placeholder:text-[#BBB] font-mono"})]})]}),r.jsx("button",{onClick:c,disabled:s,className:"w-full h-12 bg-[#2C2C2C] active:bg-black hover:bg-black text-white rounded-lg font-bold text-sm tracking-widest uppercase transition-all active:scale-[0.98] shadow-lg flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed group",children:s?r.jsxs(r.Fragment,{children:[r.jsx(q7,{className:"w-4 h-4 animate-spin"}),"Connecting..."]}):r.jsxs(r.Fragment,{children:["",r.jsx(k8,{className:"w-4 h-4 group-active:translate-x-1 group-hover:translate-x-1 transition-transform"})]})})]}),r.jsxs("div",{className:"px-8 py-4 bg-[#F9F9F7] border-t border-[#E5E5E5] flex justify-between items-center text-[10px] text-[#8C8C89] font-mono",children:[r.jsx("span",{children:"SYSTEM: ONLINE"}),r.jsx("span",{children:"VER: 1.0"})]})]})]}),r.jsx(JE,{open:i,onOpenChange:l,children:r.jsxs(t8,{className:"bg-[#F9F9F7] border border-[#D6D3CC] max-w-[320px] rounded-lg",children:[r.jsxs(n8,{className:"text-[#2C2C2C] font-bold flex items-center gap-2",children:[r.jsx(Np,{className:"w-5 h-5 text-[#B93636]"}),""]}),r.jsx(r8,{className:"text-[#5A5A55] text-xs",children:""}),r.jsx("div",{className:"flex justify-end mt-4",children:r.jsx(s8,{onClick:()=>l(!1),className:"bg-[#2C2C2C] text-white active:bg-black hover:bg-black text-xs font-bold px-4 h-8 rounded-md",children:""})})]})})]})}function AT(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const ET=e=>{switch(e){case"success":return IT;case"info":return MT;case"warning":return PT;case"error":return FT;default:return null}},TT=Array(12).fill(0),DT=({visible:e,className:t})=>Ue.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},Ue.createElement("div",{className:"sonner-spinner"},TT.map((n,s)=>Ue.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),IT=Ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ue.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),PT=Ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ue.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),MT=Ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ue.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),FT=Ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ue.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),RT=Ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ue.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ue.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),BT=()=>{const[e,t]=Ue.useState(document.hidden);return Ue.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let Ap=1;class zT{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:s,...a}=t,i=typeof t?.id=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:Ap++,l=this.toasts.find(u=>u.id===i),c=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),l?this.toasts=this.toasts.map(u=>u.id===i?(this.publish({...u,...t,id:i,title:s}),{...u,...t,id:i,dismissible:c,title:s}):u):this.addToast({title:s,...a,dismissible:c,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(s=>s({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let s;n.loading!==void 0&&(s=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let i=s!==void 0,l;const c=a.then(async p=>{if(l=["resolve",p],Ue.isValidElement(p))i=!1,this.create({id:s,type:"default",message:p});else if(OT(p)&&!p.ok){i=!1;const f=typeof n.error=="function"?await n.error(`HTTP error! status: ${p.status}`):n.error,m=typeof n.description=="function"?await n.description(`HTTP error! status: ${p.status}`):n.description,y=typeof f=="object"&&!Ue.isValidElement(f)?f:{message:f};this.create({id:s,type:"error",description:m,...y})}else if(p instanceof Error){i=!1;const f=typeof n.error=="function"?await n.error(p):n.error,m=typeof n.description=="function"?await n.description(p):n.description,y=typeof f=="object"&&!Ue.isValidElement(f)?f:{message:f};this.create({id:s,type:"error",description:m,...y})}else if(n.success!==void 0){i=!1;const f=typeof n.success=="function"?await n.success(p):n.success,m=typeof n.description=="function"?await n.description(p):n.description,y=typeof f=="object"&&!Ue.isValidElement(f)?f:{message:f};this.create({id:s,type:"success",description:m,...y})}}).catch(async p=>{if(l=["reject",p],n.error!==void 0){i=!1;const h=typeof n.error=="function"?await n.error(p):n.error,f=typeof n.description=="function"?await n.description(p):n.description,g=typeof h=="object"&&!Ue.isValidElement(h)?h:{message:h};this.create({id:s,type:"error",description:f,...g})}}).finally(()=>{i&&(this.dismiss(s),s=void 0),n.finally==null||n.finally.call(n)}),u=()=>new Promise((p,h)=>c.then(()=>l[0]==="reject"?h(l[1]):p(l[1])).catch(h));return typeof s!="string"&&typeof s!="number"?{unwrap:u}:Object.assign(s,{unwrap:u})},this.custom=(t,n)=>{const s=n?.id||Ap++;return this.create({jsx:t(s),id:s,...n}),s},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const or=new zT,LT=(e,t)=>{const n=t?.id||Ap++;return or.addToast({title:e,...t,id:n}),n},OT=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",$T=LT,VT=()=>or.toasts,HT=()=>or.getActiveToasts(),Un=Object.assign($T,{success:or.success,info:or.info,warning:or.warning,error:or.error,custom:or.custom,message:or.message,promise:or.promise,dismiss:or.dismiss,loading:or.loading},{getHistory:VT,getToasts:HT});AT("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function rd(e){return e.label!==void 0}const UT=3,WT="24px",KT="16px",Rb=4e3,qT=356,GT=14,YT=45,ZT=200;function ss(...e){return e.filter(Boolean).join(" ")}function QT(e){const[t,n]=e.split("-"),s=[];return t&&s.push(t),n&&s.push(n),s}const XT=e=>{var t,n,s,a,i,l,c,u,p;const{invert:h,toast:f,unstyled:m,interacting:g,setHeights:y,visibleToasts:b,heights:S,index:v,toasts:N,expanded:C,removeToast:_,defaultRichColors:R,closeButton:D,style:V,cancelButtonStyle:I,actionButtonStyle:A,className:U="",descriptionClassName:W="",duration:T,position:M,gap:j,expandByDefault:P,classNames:L,icons:B,closeButtonAriaLabel:q="Close toast"}=e,[G,O]=Ue.useState(null),[$,K]=Ue.useState(null),[H,ee]=Ue.useState(!1),[Y,re]=Ue.useState(!1),[de,X]=Ue.useState(!1),[oe,ye]=Ue.useState(!1),[be,Ie]=Ue.useState(!1),[De,F]=Ue.useState(0),[le,Z]=Ue.useState(0),te=Ue.useRef(f.duration||T||Rb),ne=Ue.useRef(null),ae=Ue.useRef(null),we=v===0,Ce=v+1<=b,ue=f.type,pe=f.dismissible!==!1,je=f.className||"",Ne=f.descriptionClassName||"",he=Ue.useMemo(()=>S.findIndex(it=>it.toastId===f.id)||0,[S,f.id]),Ee=Ue.useMemo(()=>{var it;return(it=f.closeButton)!=null?it:D},[f.closeButton,D]),Re=Ue.useMemo(()=>f.duration||T||Rb,[f.duration,T]),qe=Ue.useRef(0),Ye=Ue.useRef(0),nt=Ue.useRef(0),ce=Ue.useRef(null),[Te,Me]=M.split("-"),Oe=Ue.useMemo(()=>S.reduce((it,Pt,Ot)=>Ot>=he?it:it+Pt.height,0),[S,he]),Ke=BT(),Ze=f.invert||h,pt=ue==="loading";Ye.current=Ue.useMemo(()=>he*j+Oe,[he,Oe]),Ue.useEffect(()=>{te.current=Re},[Re]),Ue.useEffect(()=>{ee(!0)},[]),Ue.useEffect(()=>{const it=ae.current;if(it){const Pt=it.getBoundingClientRect().height;return Z(Pt),y(Ot=>[{toastId:f.id,height:Pt,position:f.position},...Ot]),()=>y(Ot=>Ot.filter(kt=>kt.toastId!==f.id))}},[y,f.id]),Ue.useLayoutEffect(()=>{if(!H)return;const it=ae.current,Pt=it.style.height;it.style.height="auto";const Ot=it.getBoundingClientRect().height;it.style.height=Pt,Z(Ot),y(kt=>kt.find(Xt=>Xt.toastId===f.id)?kt.map(Xt=>Xt.toastId===f.id?{...Xt,height:Ot}:Xt):[{toastId:f.id,height:Ot,position:f.position},...kt])},[H,f.title,f.description,y,f.id,f.jsx,f.action,f.cancel]);const ht=Ue.useCallback(()=>{re(!0),F(Ye.current),y(it=>it.filter(Pt=>Pt.toastId!==f.id)),setTimeout(()=>{_(f)},ZT)},[f,_,y,Ye]);Ue.useEffect(()=>{if(f.promise&&ue==="loading"||f.duration===1/0||f.type==="loading")return;let it;return C||g||Ke?(()=>{if(nt.current<qe.current){const kt=new Date().getTime()-qe.current;te.current=te.current-kt}nt.current=new Date().getTime()})():(()=>{te.current!==1/0&&(qe.current=new Date().getTime(),it=setTimeout(()=>{f.onAutoClose==null||f.onAutoClose.call(f,f),ht()},te.current))})(),()=>clearTimeout(it)},[C,g,f,ue,Ke,ht]),Ue.useEffect(()=>{f.delete&&(ht(),f.onDismiss==null||f.onDismiss.call(f,f))},[ht,f.delete]);function jt(){var it;if(B?.loading){var Pt;return Ue.createElement("div",{className:ss(L?.loader,f==null||(Pt=f.classNames)==null?void 0:Pt.loader,"sonner-loader"),"data-visible":ue==="loading"},B.loading)}return Ue.createElement(DT,{className:ss(L?.loader,f==null||(it=f.classNames)==null?void 0:it.loader),visible:ue==="loading"})}const Ht=f.icon||B?.[ue]||ET(ue);var Lt,Kt;return Ue.createElement("li",{tabIndex:0,ref:ae,className:ss(U,je,L?.toast,f==null||(t=f.classNames)==null?void 0:t.toast,L?.default,L?.[ue],f==null||(n=f.classNames)==null?void 0:n[ue]),"data-sonner-toast":"","data-rich-colors":(Lt=f.richColors)!=null?Lt:R,"data-styled":!(f.jsx||f.unstyled||m),"data-mounted":H,"data-promise":!!f.promise,"data-swiped":be,"data-removed":Y,"data-visible":Ce,"data-y-position":Te,"data-x-position":Me,"data-index":v,"data-front":we,"data-swiping":de,"data-dismissible":pe,"data-type":ue,"data-invert":Ze,"data-swipe-out":oe,"data-swipe-direction":$,"data-expanded":!!(C||P&&H),"data-testid":f.testId,style:{"--index":v,"--toasts-before":v,"--z-index":N.length-v,"--offset":`${Y?De:Ye.current}px`,"--initial-height":P?"auto":`${le}px`,...V,...f.style},onDragEnd:()=>{X(!1),O(null),ce.current=null},onPointerDown:it=>{it.button!==2&&(pt||!pe||(ne.current=new Date,F(Ye.current),it.target.setPointerCapture(it.pointerId),it.target.tagName!=="BUTTON"&&(X(!0),ce.current={x:it.clientX,y:it.clientY})))},onPointerUp:()=>{var it,Pt,Ot;if(oe||!pe)return;ce.current=null;const kt=Number(((it=ae.current)==null?void 0:it.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),gn=Number(((Pt=ae.current)==null?void 0:Pt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Xt=new Date().getTime()-((Ot=ne.current)==null?void 0:Ot.getTime()),Ut=G==="x"?kt:gn,kr=Math.abs(Ut)/Xt;if(Math.abs(Ut)>=YT||kr>.11){F(Ye.current),f.onDismiss==null||f.onDismiss.call(f,f),K(G==="x"?kt>0?"right":"left":gn>0?"down":"up"),ht(),ye(!0);return}else{var $t,an;($t=ae.current)==null||$t.style.setProperty("--swipe-amount-x","0px"),(an=ae.current)==null||an.style.setProperty("--swipe-amount-y","0px")}Ie(!1),X(!1),O(null)},onPointerMove:it=>{var Pt,Ot,kt;if(!ce.current||!pe||((Pt=window.getSelection())==null?void 0:Pt.toString().length)>0)return;const Xt=it.clientY-ce.current.y,Ut=it.clientX-ce.current.x;var kr;const $t=(kr=e.swipeDirections)!=null?kr:QT(M);!G&&(Math.abs(Ut)>1||Math.abs(Xt)>1)&&O(Math.abs(Ut)>Math.abs(Xt)?"x":"y");let an={x:0,y:0};const Cn=Kn=>1/(1.5+Math.abs(Kn)/20);if(G==="y"){if($t.includes("top")||$t.includes("bottom"))if($t.includes("top")&&Xt<0||$t.includes("bottom")&&Xt>0)an.y=Xt;else{const Kn=Xt*Cn(Xt);an.y=Math.abs(Kn)<Math.abs(Xt)?Kn:Xt}}else if(G==="x"&&($t.includes("left")||$t.includes("right")))if($t.includes("left")&&Ut<0||$t.includes("right")&&Ut>0)an.x=Ut;else{const Kn=Ut*Cn(Ut);an.x=Math.abs(Kn)<Math.abs(Ut)?Kn:Ut}(Math.abs(an.x)>0||Math.abs(an.y)>0)&&Ie(!0),(Ot=ae.current)==null||Ot.style.setProperty("--swipe-amount-x",`${an.x}px`),(kt=ae.current)==null||kt.style.setProperty("--swipe-amount-y",`${an.y}px`)}},Ee&&!f.jsx&&ue!=="loading"?Ue.createElement("button",{"aria-label":q,"data-disabled":pt,"data-close-button":!0,onClick:pt||!pe?()=>{}:()=>{ht(),f.onDismiss==null||f.onDismiss.call(f,f)},className:ss(L?.closeButton,f==null||(s=f.classNames)==null?void 0:s.closeButton)},(Kt=B?.close)!=null?Kt:RT):null,(ue||f.icon||f.promise)&&f.icon!==null&&(B?.[ue]!==null||f.icon)?Ue.createElement("div",{"data-icon":"",className:ss(L?.icon,f==null||(a=f.classNames)==null?void 0:a.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||jt():null,f.type!=="loading"?Ht:null):null,Ue.createElement("div",{"data-content":"",className:ss(L?.content,f==null||(i=f.classNames)==null?void 0:i.content)},Ue.createElement("div",{"data-title":"",className:ss(L?.title,f==null||(l=f.classNames)==null?void 0:l.title)},f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title),f.description?Ue.createElement("div",{"data-description":"",className:ss(W,Ne,L?.description,f==null||(c=f.classNames)==null?void 0:c.description)},typeof f.description=="function"?f.description():f.description):null),Ue.isValidElement(f.cancel)?f.cancel:f.cancel&&rd(f.cancel)?Ue.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||I,onClick:it=>{rd(f.cancel)&&pe&&(f.cancel.onClick==null||f.cancel.onClick.call(f.cancel,it),ht())},className:ss(L?.cancelButton,f==null||(u=f.classNames)==null?void 0:u.cancelButton)},f.cancel.label):null,Ue.isValidElement(f.action)?f.action:f.action&&rd(f.action)?Ue.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||A,onClick:it=>{rd(f.action)&&(f.action.onClick==null||f.action.onClick.call(f.action,it),!it.defaultPrevented&&ht())},className:ss(L?.actionButton,f==null||(p=f.classNames)==null?void 0:p.actionButton)},f.action.label):null)};function Bb(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function JT(e,t){const n={};return[e,t].forEach((s,a)=>{const i=a===1,l=i?"--mobile-offset":"--offset",c=i?KT:WT;function u(p){["top","right","bottom","left"].forEach(h=>{n[`${l}-${h}`]=typeof p=="number"?`${p}px`:p})}typeof s=="number"||typeof s=="string"?u(s):typeof s=="object"?["top","right","bottom","left"].forEach(p=>{s[p]===void 0?n[`${l}-${p}`]=c:n[`${l}-${p}`]=typeof s[p]=="number"?`${s[p]}px`:s[p]}):u(c)}),n}const eD=Ue.forwardRef(function(t,n){const{id:s,invert:a,position:i="bottom-right",hotkey:l=["altKey","KeyT"],expand:c,closeButton:u,className:p,offset:h,mobileOffset:f,theme:m="light",richColors:g,duration:y,style:b,visibleToasts:S=UT,toastOptions:v,dir:N=Bb(),gap:C=GT,icons:_,containerAriaLabel:R="Notifications"}=t,[D,V]=Ue.useState([]),I=Ue.useMemo(()=>s?D.filter(H=>H.toasterId===s):D.filter(H=>!H.toasterId),[D,s]),A=Ue.useMemo(()=>Array.from(new Set([i].concat(I.filter(H=>H.position).map(H=>H.position)))),[I,i]),[U,W]=Ue.useState([]),[T,M]=Ue.useState(!1),[j,P]=Ue.useState(!1),[L,B]=Ue.useState(m!=="system"?m:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),q=Ue.useRef(null),G=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),O=Ue.useRef(null),$=Ue.useRef(!1),K=Ue.useCallback(H=>{V(ee=>{var Y;return(Y=ee.find(re=>re.id===H.id))!=null&&Y.delete||or.dismiss(H.id),ee.filter(({id:re})=>re!==H.id)})},[]);return Ue.useEffect(()=>or.subscribe(H=>{if(H.dismiss){requestAnimationFrame(()=>{V(ee=>ee.map(Y=>Y.id===H.id?{...Y,delete:!0}:Y))});return}setTimeout(()=>{R2.flushSync(()=>{V(ee=>{const Y=ee.findIndex(re=>re.id===H.id);return Y!==-1?[...ee.slice(0,Y),{...ee[Y],...H},...ee.slice(Y+1)]:[H,...ee]})})})}),[D]),Ue.useEffect(()=>{if(m!=="system"){B(m);return}if(m==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?B("dark"):B("light")),typeof window>"u")return;const H=window.matchMedia("(prefers-color-scheme: dark)");try{H.addEventListener("change",({matches:ee})=>{B(ee?"dark":"light")})}catch{H.addListener(({matches:Y})=>{try{B(Y?"dark":"light")}catch(re){console.error(re)}})}},[m]),Ue.useEffect(()=>{D.length<=1&&M(!1)},[D]),Ue.useEffect(()=>{const H=ee=>{var Y;if(l.every(X=>ee[X]||ee.code===X)){var de;M(!0),(de=q.current)==null||de.focus()}ee.code==="Escape"&&(document.activeElement===q.current||(Y=q.current)!=null&&Y.contains(document.activeElement))&&M(!1)};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[l]),Ue.useEffect(()=>{if(q.current)return()=>{O.current&&(O.current.focus({preventScroll:!0}),O.current=null,$.current=!1)}},[q.current]),Ue.createElement("section",{ref:n,"aria-label":`${R} ${G}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},A.map((H,ee)=>{var Y;const[re,de]=H.split("-");return I.length?Ue.createElement("ol",{key:H,dir:N==="auto"?Bb():N,tabIndex:-1,ref:q,className:p,"data-sonner-toaster":!0,"data-sonner-theme":L,"data-y-position":re,"data-x-position":de,style:{"--front-toast-height":`${((Y=U[0])==null?void 0:Y.height)||0}px`,"--width":`${qT}px`,"--gap":`${C}px`,...b,...JT(h,f)},onBlur:X=>{$.current&&!X.currentTarget.contains(X.relatedTarget)&&($.current=!1,O.current&&(O.current.focus({preventScroll:!0}),O.current=null))},onFocus:X=>{X.target instanceof HTMLElement&&X.target.dataset.dismissible==="false"||$.current||($.current=!0,O.current=X.relatedTarget)},onMouseEnter:()=>M(!0),onMouseMove:()=>M(!0),onMouseLeave:()=>{j||M(!1)},onDragEnd:()=>M(!1),onPointerDown:X=>{X.target instanceof HTMLElement&&X.target.dataset.dismissible==="false"||P(!0)},onPointerUp:()=>P(!1)},I.filter(X=>!X.position&&ee===0||X.position===H).map((X,oe)=>{var ye,be;return Ue.createElement(XT,{key:X.id,icons:_,index:oe,toast:X,defaultRichColors:g,duration:(ye=v?.duration)!=null?ye:y,className:v?.className,descriptionClassName:v?.descriptionClassName,invert:a,visibleToasts:S,closeButton:(be=v?.closeButton)!=null?be:u,interacting:j,position:H,style:v?.style,unstyled:v?.unstyled,classNames:v?.classNames,cancelButtonStyle:v?.cancelButtonStyle,actionButtonStyle:v?.actionButtonStyle,closeButtonAriaLabel:v?.closeButtonAriaLabel,removeToast:K,toasts:I.filter(Ie=>Ie.position==X.position),heights:U.filter(Ie=>Ie.position==X.position),setHeights:W,expandByDefault:c,gap:C,expanded:T,swipeDirections:t.swipeDirections})})):null}))}),zb={p15366300:"M94 47C94 72.9574 72.9574 94 47 94C21.0426 94 0 72.9574 0 47C0 21.0426 21.0426 0 47 0C72.9574 0 94 21.0426 94 47Z",p3086ef80:"M3.5 1.67073L0 5.77489e-08V4.04145L3.5 2.37073V1.67073ZM313.5 2.37073L317 4.04145V5.77489e-08L313.5 1.67073V2.37073ZM4.48585 2.02073V2.37073H7.47641V2.02073V1.67073H4.48585V2.02073ZM10.467 2.02073V2.37073H13.4575V2.02073V1.67073H10.467V2.02073ZM16.4481 2.02073V2.37073H19.4387V2.02073V1.67073H16.4481V2.02073ZM22.4292 2.02073V2.37073H25.4198V2.02073V1.67073H22.4292V2.02073ZM28.4104 2.02073V2.37073H31.4009V2.02073V1.67073H28.4104V2.02073ZM34.3915 2.02073V2.37073H37.3821V2.02073V1.67073H34.3915V2.02073ZM40.3726 2.02073V2.37073H43.3632V2.02073V1.67073H40.3726V2.02073ZM46.3538 2.02073V2.37073H49.3443V2.02073V1.67073H46.3538V2.02073ZM52.3349 2.02073V2.37073H55.3255V2.02073V1.67073H52.3349V2.02073ZM58.316 2.02073V2.37073H61.3066V2.02073V1.67073H58.316V2.02073ZM64.2972 2.02073V2.37073H67.2877V2.02073V1.67073H64.2972V2.02073ZM70.2783 2.02073V2.37073H73.2689V2.02073V1.67073H70.2783V2.02073ZM76.2594 2.02073V2.37073H79.25V2.02073V1.67073H76.2594V2.02073ZM82.2405 2.02073V2.37073H85.2311V2.02073V1.67073H82.2405V2.02073ZM88.2217 2.02073V2.37073H91.2122V2.02073V1.67073H88.2217V2.02073ZM94.2028 2.02073V2.37073H97.1934V2.02073V1.67073H94.2028V2.02073ZM100.184 2.02073V2.37073H103.174V2.02073V1.67073H100.184V2.02073ZM106.165 2.02073V2.37073H109.156V2.02073V1.67073H106.165V2.02073ZM112.146 2.02073V2.37073H115.137V2.02073V1.67073H112.146V2.02073ZM118.127 2.02073V2.37073H121.118V2.02073V1.67073H118.127V2.02073ZM124.108 2.02073V2.37073H127.099V2.02073V1.67073H124.108V2.02073ZM130.09 2.02073V2.37073H133.08V2.02073V1.67073H130.09V2.02073ZM136.071 2.02073V2.37073H139.061V2.02073V1.67073H136.071V2.02073ZM142.052 2.02073V2.37073H145.042V2.02073V1.67073H142.052V2.02073ZM148.033 2.02073V2.37073H151.024V2.02073V1.67073H148.033V2.02073ZM154.014 2.02073V2.37073H157.005V2.02073V1.67073H154.014V2.02073ZM159.995 2.02073V2.37073H162.986V2.02073V1.67073H159.995V2.02073ZM165.976 2.02073V2.37073H168.967V2.02073V1.67073H165.976V2.02073ZM171.958 2.02073V2.37073H174.948V2.02073V1.67073H171.958V2.02073ZM177.939 2.02073V2.37073H180.929V2.02073V1.67073H177.939V2.02073ZM183.92 2.02073V2.37073H186.91V2.02073V1.67073H183.92V2.02073ZM189.901 2.02073V2.37073H192.892V2.02073V1.67073H189.901V2.02073ZM195.882 2.02073V2.37073H198.873V2.02073V1.67073H195.882V2.02073ZM201.863 2.02073V2.37073H204.854V2.02073V1.67073H201.863V2.02073ZM207.844 2.02073V2.37073H210.835V2.02073V1.67073H207.844V2.02073ZM213.826 2.02073V2.37073H216.816V2.02073V1.67073H213.826V2.02073ZM219.807 2.02073V2.37073H222.797V2.02073V1.67073H219.807V2.02073ZM225.788 2.02073V2.37073H228.778V2.02073V1.67073H225.788V2.02073ZM231.769 2.02073V2.37073H234.76V2.02073V1.67073H231.769V2.02073ZM237.75 2.02073V2.37073H240.741V2.02073V1.67073H237.75V2.02073ZM243.731 2.02073V2.37073H246.722V2.02073V1.67073H243.731V2.02073ZM249.712 2.02073V2.37073H252.703V2.02073V1.67073H249.712V2.02073ZM255.693 2.02073V2.37073H258.684V2.02073V1.67073H255.693V2.02073ZM261.675 2.02073V2.37073H264.665V2.02073V1.67073H261.675V2.02073ZM267.656 2.02073V2.37073H270.646V2.02073V1.67073H267.656V2.02073ZM273.637 2.02073V2.37073H276.627V2.02073V1.67073H273.637V2.02073ZM279.618 2.02073V2.37073H282.609V2.02073V1.67073H279.618V2.02073ZM285.599 2.02073V2.37073H288.59V2.02073V1.67073H285.599V2.02073ZM291.58 2.02073V2.37073H294.571V2.02073V1.67073H291.58V2.02073ZM297.561 2.02073V2.37073H300.552V2.02073V1.67073H297.561V2.02073ZM303.543 2.02073V2.37073H306.533V2.02073V1.67073H303.543V2.02073ZM309.524 2.02073V2.37073H312.514V2.02073V1.67073H309.524V2.02073Z"},tD="/assets/8f74948c921008406168688e78dcbd91d8f4d681-x-mW1jEE.png",nD="/assets/a5993753075c329027b5d2cb65fd9ee64c4fcfce-D33ig08G.png",rD="/assets/bb6c57b71e6f8f321834896ce493dada3cf559c0-Yy02ktKg.png",sD="/assets/f2f6c119896a12e8176a39008632fd4e00350238-Cii0Sw53.png",aD={maxWidth:1024,maxHeight:1024,quality:.85,mimeType:"image/jpeg"};async function Zm(e,t={}){const n={...aD,...t};return new Promise((s,a)=>{const i=new FileReader;i.onload=l=>{const c=new Image;c.onload=()=>{try{const u=document.createElement("canvas"),p=u.getContext("2d");if(!p){a(new Error("canvas"));return}let{width:h,height:f}=c;const m=n.maxWidth,g=n.maxHeight;if(h>m||f>g){const y=Math.min(m/h,g/f);h=Math.round(h*y),f=Math.round(f*y)}u.width=h,u.height=f,p.drawImage(c,0,0,h,f),u.toBlob(y=>{y?s(y):a(new Error(""))},n.mimeType,n.quality)}catch(u){a(u)}},c.onerror=()=>{a(new Error(""))},c.src=l.target?.result},i.onerror=()=>{a(new Error(""))},i.readAsDataURL(e)})}async function iD(e){return Zm(e,{maxWidth:200,maxHeight:200,quality:.9,mimeType:"image/jpeg"})}function n5(e){const t=e.split(","),n=t[0].match(/:(.*?);/)?.[1]||"image/jpeg",s=atob(t[1]),a=new ArrayBuffer(s.length),i=new Uint8Array(a);for(let l=0;l<s.length;l++)i[l]=s.charCodeAt(l);return new Blob([a],{type:n})}const Lb="DesktopImagesDB",sn="images",oD=3,Pn={AVATARS:"avatars",MEMES:"memes",CHAT_IMAGES:"chat_images",SYSTEM:"system"},ms=new Map;function lD(e){return e==="avatar"||e==="chat-avatar"||e.startsWith("character-avatar-")||e.startsWith("character-")&&e.endsWith("-avatar")?Pn.AVATARS:e==="profileBackground"||e==="desktop-wallpaper"||e==="chat-background"||e==="anniversary"||e.startsWith("desktop2_")?Pn.SYSTEM:e.startsWith("meme-")?Pn.MEMES:e.startsWith("chat-image-")?Pn.CHAT_IMAGES:Pn.SYSTEM}function fo(e,t){return e.includes("/")?e:`${lD(e)}/${e}`}function cD(e){const t=e.split("/");return t.length>1?t[1]:e}const Qr=()=>new Promise((e,t)=>{const n=indexedDB.open(Lb,oD);n.onerror=()=>{console.error("Failed to open image database:",n.error),t(n.error)},n.onsuccess=()=>{const s=n.result;if(!s.objectStoreNames.contains(sn)){console.error("Image store not found, recreating database..."),s.close();const a=indexedDB.deleteDatabase(Lb);a.onsuccess=()=>{Qr().then(e).catch(t)},a.onerror=()=>{t(new Error("Failed to recreate image database"))};return}e(s)},n.onupgradeneeded=s=>{const a=s.target.result;console.log("Image database upgrade needed from version",s.oldVersion,"to",s.newVersion),a.objectStoreNames.contains(sn)||(a.createObjectStore(sn),console.log("Created image store:",sn))}}),wr=async(e,t)=>{try{const n=await Qr();let s;return e==="avatar"||e.includes("avatar")?s=await iD(t):s=t,new Promise((a,i)=>{try{const u=n.transaction([sn],"readwrite").objectStore(sn).put(s,fo(e));u.onsuccess=()=>{n.close();const p=to(e,s);a(p)},u.onerror=()=>{console.error("Failed to save image:",u.error),n.close(),i(u.error)}}catch(l){console.error("Error in transaction:",l),n.close(),i(l)}})}catch(n){throw console.error("Failed to save image:",n),n}},Ct=async e=>{try{if(ms.has(e))return ms.get(e);const t=await Qr(),n=fo(e);return new Promise((s,a)=>{try{const l=t.transaction([sn],"readonly").objectStore(sn),c=l.get(n);c.onsuccess=()=>{let u=c.result;if(!u&&n!==e){const h=l.get(e);h.onsuccess=()=>{const f=h.result;if(t.close(),!f){s(null);return}if(console.log(`Migrating ${e} from old format to new format...`),fD(e,f).catch(console.error),typeof f=="string")s(f);else{const m=to(e,f);s(m)}},h.onerror=()=>{t.close(),s(null)};return}if(t.close(),!u){s(null);return}if(typeof u=="string"){uD(e,u).catch(console.error),s(u);return}const p=to(e,u);s(p)},c.onerror=()=>{console.error("Failed to get image:",c.error),t.close(),a(c.error)}}catch(i){console.error("Error in transaction:",i),t.close(),a(i)}})}catch(t){return console.error("Failed to get image:",t),null}};function to(e,t){ms.has(e)&&URL.revokeObjectURL(ms.get(e));const n=URL.createObjectURL(t);return ms.set(e,n),n}const dD=e=>{ms.has(e)&&(URL.revokeObjectURL(ms.get(e)),ms.delete(e))},fa=async e=>{try{dD(e);const t=await Qr();return new Promise((n,s)=>{try{const l=t.transaction([sn],"readwrite").objectStore(sn).delete(fo(e));l.onsuccess=()=>{t.close(),n()},l.onerror=()=>{console.error("Failed to delete image:",l.error),t.close(),s(l.error)}}catch(a){console.error("Error in transaction:",a),t.close(),s(a)}})}catch(t){throw console.error("Failed to delete image:",t),t}};async function uD(e,t){try{console.log(`Migrating ${e} from Base64 to Blob...`);const n=n5(t),s=await Qr();return new Promise((a,i)=>{try{const u=s.transaction([sn],"readwrite").objectStore(sn).put(n,fo(e));u.onsuccess=()=>{s.close(),console.log(`Successfully migrated ${e} to Blob`),to(e,n),a()},u.onerror=()=>{console.error("Failed to migrate image:",u.error),s.close(),i(u.error)}}catch(l){console.error("Error in migration transaction:",l),s.close(),i(l)}})}catch(n){console.error("Failed to migrate Base64 to Blob:",n)}}async function fD(e,t){try{const n=await Qr();return new Promise((s,a)=>{try{const c=n.transaction([sn],"readwrite").objectStore(sn).put(t,fo(e));c.onsuccess=()=>{n.close(),console.log(`Successfully migrated ${e} to new format`),t instanceof Blob&&to(e,t),s()},c.onerror=()=>{console.error("Failed to migrate image:",c.error),n.close(),a(c.error)}}catch(i){console.error("Error in migration transaction:",i),n.close(),a(i)}})}catch(n){console.error("Failed to migrate to new format:",n)}}const hD=()=>{ms.forEach(e=>URL.revokeObjectURL(e)),ms.clear()},pD=async()=>{try{hD();const e=await Qr();return new Promise((t,n)=>{try{const i=e.transaction([sn],"readwrite").objectStore(sn).clear();i.onsuccess=()=>{e.close(),console.log("All images cleared successfully"),t()},i.onerror=()=>{console.error("Failed to clear all images:",i.error),e.close(),n(i.error)}}catch(s){console.error("Error in clear transaction:",s),e.close(),n(s)}})}catch(e){throw console.error("Failed to clear all images:",e),e}},mD=async()=>{try{const e=await Qr(),t=await Qm(),n={};for(const{originalKey:s,storageKey:a,category:i}of t)try{const u=e.transaction([sn],"readonly").objectStore(sn).get(a);await new Promise((p,h)=>{u.onsuccess=()=>{const f=u.result;f instanceof Blob?n[s]={blob:f,category:i}:typeof f=="string"&&(n[s]={blob:n5(f),category:i}),p()},u.onerror=h})}catch(l){console.error(`Failed to export image ${s}:`,l)}return e.close(),n}catch(e){return console.error("Failed to export all images with category:",e),{}}},xD=async e=>{try{const t=await Qr();for(const[n,s]of Object.entries(e))try{await new Promise((a,i)=>{const u=t.transaction([sn],"readwrite").objectStore(sn).put(s,fo(n));u.onsuccess=()=>{to(n,s),a()},u.onerror=()=>{console.error(`Failed to import image ${n}:`,u.error),i(u.error)}})}catch(a){console.error(`Failed to process image ${n}:`,a)}t.close(),console.log(`Successfully imported ${Object.keys(e).length} images`)}catch(t){throw console.error("Failed to import images:",t),t}},r5=async()=>{try{const e=await Qr();return new Promise((t,n)=>{try{const a=e.transaction([sn],"readonly").objectStore(sn),i=a.getAll(),l=a.getAllKeys();let c=[],u=[];i.onsuccess=()=>{c=i.result},l.onsuccess=()=>{u=l.result;const p={[Pn.AVATARS]:{count:0,size:0},[Pn.SYSTEM]:{count:0,size:0},[Pn.MEMES]:{count:0,size:0},[Pn.CHAT_IMAGES]:{count:0,size:0},uncategorized:{count:0,size:0}};u.forEach((f,m)=>{const g=String(f),y=c[m],b=y instanceof Blob?y.size:0;if(g.includes("/")){const S=g.split("/")[0];S in p?(p[S].count++,p[S].size+=b):(p.uncategorized.count++,p.uncategorized.size+=b)}else p.uncategorized.count++,p.uncategorized.size+=b});const h={};for(const[f,m]of Object.entries(p))h[f]={count:m.count,size:(m.size/1024).toFixed(2)};e.close(),t(h)},i.onerror=()=>{console.error("Failed to get all data:",i.error),e.close(),n(i.error)},l.onerror=()=>{console.error("Failed to get all keys:",l.error),e.close(),n(l.error)}}catch(s){console.error("Error in transaction:",s),e.close(),n(s)}})}catch(e){return console.error("Failed to get category stats:",e),{[Pn.AVATARS]:{count:0,size:"0.00"},[Pn.SYSTEM]:{count:0,size:"0.00"},[Pn.MEMES]:{count:0,size:"0.00"},[Pn.CHAT_IMAGES]:{count:0,size:"0.00"},uncategorized:{count:0,size:"0.00"}}}},Qm=async()=>{try{const e=await Qr();return new Promise((t,n)=>{try{const i=e.transaction([sn],"readonly").objectStore(sn).getAllKeys();i.onsuccess=()=>{e.close();const c=i.result.map(u=>{const p=String(u),h=p.split("/");return{originalKey:cD(p),storageKey:p,category:h.length>1?h[0]:"uncategorized"}});t(c)},i.onerror=()=>{console.error("Failed to list all images:",i.error),e.close(),n(i.error)}}catch(s){console.error("Error in transaction:",s),e.close(),n(s)}})}catch(e){return console.error("Failed to list all images:",e),[]}},We={messages:{},chatSettingsDetail:{},userAvatar:void 0},gD=5e3,Ep=(e=!1)=>{We.chatSettings=void 0,We.userData=void 0,We.characters=void 0,We.lastUpdate=void 0,e&&(We.messages={},We.chatSettingsDetail={},We.userAvatar=void 0)},bD=()=>We.lastUpdate?Date.now()-We.lastUpdate<gD:!1,Tp=(e,t)=>We.chatSettingsDetail[e]?.remark||t,s5=()=>We.userAvatar,a5=e=>{We.userAvatar=e};function yD({userData:e,colorMode:t,preloadedImages:n}){const[s,a]=k.useState(0),[i,l]=k.useState(n?.anniversary||null),c=k.useRef(null);k.useEffect(()=>{const h=()=>{try{const m=new Date(e.date);m.setHours(0,0,0,0);const g=new Date;g.setHours(0,0,0,0);const y=Math.abs(g.getTime()-m.getTime()),b=Math.floor(y/(1e3*60*60*24))-1;a(Math.max(0,b))}catch{console.log(""),a(365)}};h();const f=setInterval(h,1e3*60*60*24);return()=>clearInterval(f)},[e.date]),k.useEffect(()=>{(async()=>{const f=await Ct("anniversary");f&&l(f)})()},[]);const u=()=>{c.current?.click()},p=async h=>{const f=h.target.files?.[0];if(f)try{const m=await wr("anniversary",f);l(m)}catch(m){console.error(":",m)}};return r.jsxs("div",{className:"absolute left-[54.1%] w-[38.65%] aspect-square top-[52.9%]","data-name":"",children:[r.jsx("input",{ref:c,type:"file",accept:"image/*",onChange:p,className:"hidden"}),r.jsx("div",{className:"absolute left-1/2 w-full aspect-square top-1/2 translate-x-[-50%] translate-y-[-50%] cursor-pointer hover:opacity-80 transition-opacity rounded-[24px] overflow-hidden",onClick:u,children:i?r.jsx("img",{alt:"",className:"block w-full h-full object-cover",src:i}):r.jsx("div",{className:"block w-full h-full",style:{backgroundColor:"#D5EAE3"}})}),r.jsxs("div",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[11.25%] leading-[normal] left-1/2 text-[clamp(14px,4vw,16px)] text-center top-[11.875%] translate-x-[-50%] w-[62.5%] pointer-events-none ${t==="dark"?"text-black":"text-white"}`,children:[r.jsx("p",{className:"mb-0",children:""}),r.jsx("p",{children:""})]}),r.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Normal',sans-serif] font-[350] h-[14.375%] leading-[normal] left-1/2 text-[clamp(11px,3.25vw,13px)] text-center top-[28.125%] translate-x-[-50%] w-[31.25%] pointer-events-none ${t==="dark"?"text-black":"text-white"}`,children:""}),r.jsxs("p",{className:`absolute font-['Actor:Regular',sans-serif] h-[33.75%] leading-[normal] left-1/2 not-italic text-[0px] text-center top-[calc(50%-16.875%)] translate-x-[-50%] w-[72.5%] pointer-events-none ${t==="dark"?"text-black":"text-white"}`,children:[r.jsx("span",{className:"font-['Actor:Regular',sans-serif] text-[clamp(36px,12vw,48px)]",children:s}),r.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal text-[clamp(11px,3.25vw,13px)]",children:""})]})]})}function vD({userData:e,onUserDataChange:t,colorMode:n,preloadedImages:s}){const[a,i]=k.useState(new Date),[l,c]=k.useState(30),[u,p]=k.useState(""),[h,f]=k.useState(!1),[m,g]=k.useState(s?.profileBackground||null),[y,b]=k.useState(()=>s?.avatar||s5()||null),S=k.useRef(null),v=k.useRef(null);k.useEffect(()=>{const W=setInterval(()=>{i(new Date)},1e3);return()=>clearInterval(W)},[]),k.useEffect(()=>{(async()=>{if("getBattery"in navigator)try{const T=await navigator.getBattery();c(Math.round(T.level*100)),T.addEventListener("levelchange",()=>{c(Math.round(T.level*100))})}catch{console.log("")}})()},[]),k.useEffect(()=>{(async()=>{try{const T=await se.get(J.MISC,"customText");T&&p(T);const M=await Ct("profileBackground");M&&g(M);const j=await Ct("avatar");j&&b(j)}catch(T){console.error("Failed to load settings:",T)}})()},[]);const N=W=>W.toLocaleTimeString("zh-CN",{hour12:!1}),C=W=>{const T=W.getMonth()+1,M=W.getDate(),P=["","","","","","",""][W.getDay()];return`${T}${M} ${P}`},_=()=>{f(!0)},R=async()=>{f(!1),await se.set(J.MISC,"customText",u)},D=W=>{p(W.target.value)},V=()=>{S.current?.click()},I=()=>{v.current?.click()},A=async W=>{const T=W.target.files?.[0];if(T)try{const M=await wr("profileBackground",T);g(M)}catch(M){console.error(":",M)}},U=async W=>{const T=W.target.files?.[0];if(T)try{const M=await wr("avatar",T);b(M),window.dispatchEvent(new Event("avatarChanged")),a5(M)}catch(M){console.error(":",M)}};return r.jsxs("div",{className:"absolute h-[41.6%] left-1/2 top-[6.6%] translate-x-[-50%] w-[88.4%]","data-name":"1",children:[r.jsxs("div",{className:`relative backdrop-blur-[15px] backdrop-filter h-full rounded-[24px] shadow-[0px_0px_2px_0px_inset_#ffffff,0px_1px_1px_0px_inset_rgba(255,255,255,0.5)] w-full ${n==="dark"?"bg-[rgba(0,0,0,0.3)]":"bg-[rgba(255,255,255,0.5)]"}`,children:[r.jsx("div",{className:"absolute left-0 right-0 top-0 h-[49.7%] rounded-tl-[24px] rounded-tr-[24px] cursor-pointer hover:opacity-80 transition-opacity overflow-hidden",onClick:V,children:m?r.jsx("img",{alt:"",className:"absolute inset-0 w-full h-full object-cover rounded-tl-[24px] rounded-tr-[24px]",src:m}):r.jsx("div",{className:"absolute inset-0 w-full h-full rounded-tl-[24px] rounded-tr-[24px]",style:{backgroundColor:"#D5EAE3"}})}),r.jsxs("div",{className:"absolute contents left-[1.37%] top-[39.43%]","data-name":"",children:[r.jsxs("div",{className:"flex items-center absolute left-[28.5%] top-[51%]",children:[r.jsx("p",{className:`text-[clamp(14px,4vw,16px)] mr-[6px] ${n==="dark"?"text-white":"text-black"}`,children:e.name}),r.jsx("div",{className:"flex-shrink-0","data-name":"",children:r.jsx("div",{className:"relative bg-[#609f60] h-[14px] rounded-[6px] px-[5px] flex items-center justify-center",children:r.jsx("p",{className:"text-[10px] text-white whitespace-nowrap",style:{fontFamily:"YShi NewHei T, sans-serif",fontWeight:"600"},children:""})})})]}),r.jsxs("p",{className:`absolute font-['Source_Han_Sans_Old_Style:Normal',sans-serif] h-[2.61%] leading-[normal] left-[28.5%] not-italic text-[clamp(12px,3.5vw,14px)] top-[58.5%] w-[68.03%] ${n==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:[e.country,"  ",e.fortress,"  ",e.date]}),r.jsx("div",{className:"absolute left-0 w-[25.68%] aspect-square top-[38.5%] cursor-pointer hover:opacity-80 transition-opacity","data-name":"",onClick:W=>{W.stopPropagation(),I()},children:y?r.jsx("img",{alt:"",className:"block w-full h-full object-cover rounded-full",src:y}):r.jsx("svg",{className:"block w-full h-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 94 94",children:r.jsx("path",{d:zb.p15366300,fill:n==="dark"?"rgba(0,0,0,0.5)":"white"})})})]}),r.jsx("div",{className:"absolute contents left-[5.19%] top-[66.5%]","data-name":"Group 1",children:r.jsxs("div",{className:"absolute flex items-center gap-[2.5%] left-[5.19%] top-[66.5%] w-[89.62%] h-[12.8%]",children:[r.jsxs("div",{className:`flex items-center rounded-[24px] px-[2.5%] py-[2.5%] gap-[3%] w-[59.5%] h-full justify-center ${n==="dark"?"bg-[rgba(0,0,0,0.3)]":"bg-[rgba(255,255,255,0.5)]"}`,children:[r.jsxs("div",{className:`relative h-[95%] aspect-[2.43/1] rounded-[8px] flex-shrink-0 ${n==="dark"?"bg-[rgba(0,0,0,0.3)]":"bg-[rgba(255,255,255,0.5)]"}`,children:[r.jsx("div",{className:`absolute left-[8.8%] top-[21.4%] w-[41.2%] h-[57.1%] rounded-[4px] ${n==="dark"?"bg-[rgba(255,255,255,0.2)]":"bg-[#d9d9d9]"}`,children:r.jsx("div",{className:`absolute left-0 top-0 h-full rounded-[4px] transition-all duration-300 ${n==="dark"?"bg-white":"bg-[#5c5c5c]"}`,style:{width:`${l}%`}})}),r.jsx("div",{className:"absolute right-[6%] top-0 h-full flex items-center",children:r.jsxs("p",{className:`font-['Didact_Gothic:Regular',sans-serif] text-[clamp(10px,1.4vh,14px)] ${n==="dark"?"text-white":"text-[#5c5c5c]"}`,children:[l,"%"]})})]}),r.jsxs("div",{className:"relative h-[95%] aspect-square flex-shrink-0",children:[r.jsx("svg",{className:"block w-full h-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 28 28",children:r.jsx("circle",{cx:"14",cy:"14",fill:n==="dark"?"rgba(0,0,0,0.5)":"white",fillOpacity:"0.5",r:"14"})}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx("p",{className:`font-['Didact_Gothic:Regular','Noto_Sans_Symbols2:Regular',sans-serif] text-[clamp(12px,2.1vh,19px)] ${n==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:""})})]}),r.jsxs("div",{className:"relative h-[95%] aspect-square flex-shrink-0",children:[r.jsx("svg",{className:"block w-full h-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 28 28",children:r.jsx("circle",{cx:"14",cy:"14",fill:n==="dark"?"rgba(0,0,0,0.5)":"white",fillOpacity:"0.5",r:"14"})}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx("p",{className:`font-['Arial','Noto_Sans_Symbols2:Regular',sans-serif] text-[clamp(12px,2.1vh,19px)] leading-none ${n==="dark"?"text-white/70":"text-[#5c5c5c]"}`,style:{transform:"translateY(5%)"},children:""})})]}),r.jsxs("div",{className:"relative h-[95%] aspect-square flex-shrink-0",children:[r.jsx("svg",{className:"block w-full h-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 28 28",children:r.jsx("circle",{cx:"14",cy:"14",fill:n==="dark"?"rgba(0,0,0,0.5)":"white",fillOpacity:"0.5",r:"14"})}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx("p",{className:`font-['Didact_Gothic:Regular','Noto_Sans_Symbols2:Regular',sans-serif] text-[clamp(12px,2.1vh,19px)] ${n==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:""})})]})]}),r.jsx("div",{className:`rounded-[24px] px-[3%] py-[2.5%] w-[38%] h-full flex items-center justify-center ${n==="dark"?"bg-[rgba(0,0,0,0.5)]":"bg-[rgba(255,255,255,0.5)]"}`,children:r.jsx("p",{className:`bakbak-one-regular text-[clamp(20px,6.5vw,26px)] text-center whitespace-nowrap overflow-hidden ${n==="dark"?"text-white/50":"text-[#afafaf]"}`,children:N(a)})})]})}),r.jsxs("div",{className:"absolute left-[calc(50%+0.41%)] top-[83.03%] translate-x-[-50%] w-[86.61%]","data-name":"Group 3",children:[h?r.jsx("input",{type:"text",value:u,onChange:D,onBlur:R,autoFocus:!0,className:`w-full font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal text-[clamp(12px,3.5vw,14px)] text-center bg-transparent border-none outline-none ${n==="dark"?"text-white/70":"text-[#5c5c5c]"}`}):r.jsx("p",{onClick:_,className:`w-full font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal text-[clamp(12px,3.5vw,14px)] text-center cursor-pointer hover:opacity-70 transition-opacity mb-2 ${n==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:u}),r.jsx("div",{className:"w-full h-[1.31%]",children:r.jsx("svg",{className:"w-full h-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 317 5",children:r.jsx("path",{d:zb.p3086ef80,fill:n==="dark"?"rgba(255,255,255,0.7)":"#5C5C5C"})})})]}),r.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Normal',sans-serif] font-[350] h-[6.27%] leading-[normal] left-[93.99%] text-[clamp(10px,3vw,12px)] text-right top-[92.43%] translate-x-[-100%] w-[28.42%] whitespace-pre-wrap ${n==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:C(a)})]}),r.jsx("input",{ref:S,type:"file",accept:"image/*",onChange:A,className:"hidden"}),r.jsx("input",{ref:v,type:"file",accept:"image/*",onChange:U,className:"hidden"})]})}function wD({userData:e,onUserDataChange:t,onChatClick:n,onMemoryClick:s,onTransferClick:a,preloadedImages:i}){const[l,c]=k.useState("light"),[u,p]=k.useState({"desktop1-chat":i?.["system-icon-desktop1-chat"]||null,"desktop1-forum":i?.["system-icon-desktop1-forum"]||null,"desktop1-memory":i?.["system-icon-desktop1-memory"]||null,"desktop1-transfer":i?.["system-icon-desktop1-transfer"]||null});return k.useEffect(()=>{(async()=>{const y=await se.get(J.APPEARANCE,"desktop_color_mode");c(y||"light")})(),(async()=>{const y={},b=["desktop1-chat","desktop1-forum","desktop1-memory","desktop1-transfer"];for(const S of b){const v=await Ct(`system-icon-${S}`);v&&(y[S]=v)}p(y)})();const m=y=>{c(y.detail)},g=y=>{const b=y,{iconId:S,url:v}=b.detail;S.startsWith("desktop1-")&&p(N=>({...N,[S]:v}))};return window.addEventListener("colorModeChange",m),window.addEventListener("iconChange",g),()=>{window.removeEventListener("colorModeChange",m),window.removeEventListener("iconChange",g)}},[]),r.jsxs(r.Fragment,{children:[r.jsx(vD,{userData:e,onUserDataChange:t,colorMode:l}),r.jsxs("div",{className:"absolute contents left-[6.76%] top-[52.9%]","data-name":"",children:[r.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%-35.51%)] text-[clamp(10px,3vw,12px)] text-center top-[60.54%] translate-x-[-50%] w-[13.04%] pointer-events-none ${l==="dark"?"text-black":"text-white"}`,children:""}),r.jsx("button",{className:"absolute left-[6.76%] w-[14.98%] aspect-square top-[52.9%] cursor-pointer hover:opacity-80 active:opacity-60 transition-opacity overflow-hidden rounded-[18%]",onClick:n,children:r.jsx("img",{alt:"",className:"block w-full h-full object-cover pointer-events-none",src:u["desktop1-chat"]||sD})})]}),r.jsxs("div",{className:"absolute contents left-[30.43%] top-[52.9%]","data-name":"",children:[r.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%-11.84%)] text-[clamp(10px,3vw,12px)] text-center top-[60.54%] translate-x-[-50%] w-[13.04%] ${l==="dark"?"text-black":"text-white"}`,children:""}),r.jsx("div",{className:"absolute left-[30.43%] w-[14.98%] aspect-square top-[52.9%] overflow-hidden rounded-[18%]",children:r.jsx("img",{alt:"",className:"block w-full h-full object-cover",src:u["desktop1-forum"]||rD})})]}),r.jsxs("div",{className:"absolute contents left-[6.76%] top-[63.59%]","data-name":"",children:[r.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%-35.51%)] text-[clamp(10px,3vw,12px)] text-center top-[71.2%] translate-x-[-50%] w-[13.04%] ${l==="dark"?"text-black":"text-white"}`,children:""}),r.jsx("button",{className:"absolute left-[6.76%] w-[14.98%] aspect-square top-[63.59%] overflow-hidden rounded-[18%] cursor-pointer hover:opacity-80 active:opacity-60 transition-opacity",onClick:s,children:r.jsx("img",{alt:"",className:"block w-full h-full object-cover pointer-events-none",src:u["desktop1-memory"]||nD})})]}),r.jsxs("div",{className:"absolute contents left-[30.43%] top-[63.59%]","data-name":"",children:[r.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%-11.84%)] text-[clamp(10px,3vw,12px)] text-center top-[71.2%] translate-x-[-50%] w-[13.04%] ${l==="dark"?"text-black":"text-white"}`,children:""}),r.jsx("button",{className:"absolute left-[30.43%] w-[14.98%] aspect-square top-[63.59%] overflow-hidden rounded-[18%] cursor-pointer hover:opacity-80 active:opacity-60 transition-opacity",onClick:a,children:r.jsx("img",{alt:"",className:"block w-full h-full object-cover pointer-events-none",src:u["desktop1-transfer"]||tD})})]}),r.jsx(yD,{userData:e,colorMode:l})]})}const kD="/assets/2c4e24fb97d83db5e0d40da3356ff7df2f9fbf99-BUAfsKeI.png",SD="/assets/3b015cc5afccb7e9689502b97c0580e29782af83-CWB2UK3g.png",jD="/assets/d66caaf044e33e1487e4b0199ac46e1b563e30e2-C01H7kEO.png",CD="/assets/320f6f27a201a50ba3f60a7311ec793841dca491-CLzR-4Zh.png";function ND({preloadedImages:e,onHealthClick:t,onScheduleClick:n,onEntertainmentClick:s,onShopClick:a}){const[i,l]=k.useState(new Date),[c,u]=k.useState(""),[p,h]=k.useState(""),[f,m]=k.useState(!1),[g,y]=k.useState(!1),[b,S]=k.useState(e?.desktop2_timeImage||null),[v,N]=k.useState(e?.desktop2_card1||null),[C,_]=k.useState(e?.desktop2_card2||null),[R,D]=k.useState(e?.desktop2_card3||null),[V,I]=k.useState(e?.desktop2_card4||null),[A,U]=k.useState("light"),[W,T]=k.useState({"desktop2-shop":e?.["system-icon-desktop2-shop"]||null,"desktop2-game":e?.["system-icon-desktop2-game"]||null,"desktop2-schedule":e?.["system-icon-desktop2-schedule"]||null,"desktop2-health":e?.["system-icon-desktop2-health"]||null}),M=k.useRef(null),j=[k.useRef(null),k.useRef(null),k.useRef(null),k.useRef(null)];k.useEffect(()=>{const re=setInterval(()=>{l(new Date)},1e3);return()=>clearInterval(re)},[]),k.useEffect(()=>{(async()=>{const oe=await se.get(J.MISC,"desktop2_customText1"),ye=await se.get(J.MISC,"desktop2_customText2"),be=await se.get(J.APPEARANCE,"desktop_color_mode");oe&&u(oe),ye&&h(ye),U(be||"light");const Ie=await Ct("desktop2_timeImage");Ie&&S(Ie);const De=await Ct("desktop2_card1");De&&N(De);const F=await Ct("desktop2_card2");F&&_(F);const le=await Ct("desktop2_card3");le&&D(le);const Z=await Ct("desktop2_card4");Z&&I(Z);const te={},ne=["desktop2-shop","desktop2-game","desktop2-schedule","desktop2-health"];for(const ae of ne){const we=await Ct(`system-icon-${ae}`);we&&(te[ae]=we)}T(te)})();const de=oe=>{U(oe.detail)},X=oe=>{const ye=oe,{iconId:be,url:Ie}=ye.detail;be.startsWith("desktop2-")&&T(De=>({...De,[be]:Ie}))};return window.addEventListener("colorModeChange",de),window.addEventListener("iconChange",X),()=>{window.removeEventListener("colorModeChange",de),window.removeEventListener("iconChange",X)}},[]);const P=re=>re.toLocaleTimeString("zh-CN",{hour12:!1,hour:"2-digit",minute:"2-digit"}),L=()=>{const re=i.getMonth()+1,de=i.getDate();return{month:re,day:de}},B=()=>["","","","","","",""][i.getDay()],q=()=>m(!0),G=()=>y(!0),O=async()=>{m(!1),await se.set(J.MISC,"desktop2_customText1",c)},$=async()=>{y(!1),await se.set(J.MISC,"desktop2_customText2",p)},K=()=>{M.current?.click()},H=re=>{j[re].current?.click()},ee=async re=>{const de=re.target.files?.[0];if(de)try{const X=await wr("desktop2_timeImage",de);S(X)}catch(X){console.error(":",X)}},Y=async(re,de)=>{const X=de.target.files?.[0];if(X)try{const oe=await wr(`desktop2_card${re+1}`,X);[N,_,D,I][re](oe)}catch(oe){console.error(":",oe)}};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"absolute h-[15%] left-1/2 top-[6.6%] translate-x-[-50%] w-[86%]","data-name":"",children:[r.jsx("div",{className:"absolute inset-0 rounded-[24px] cursor-pointer hover:opacity-80 active:opacity-80 transition-opacity",onClick:K,children:b?r.jsx("img",{alt:"",className:"absolute inset-0 w-full h-full object-cover rounded-[24px]",src:b}):r.jsx("div",{className:"absolute inset-0 w-full h-full rounded-[24px]",style:{backgroundColor:"#D5EAE3"}})}),r.jsx("p",{className:`absolute bakbak-one-regular leading-[normal] left-1/2 top-1/2 text-[clamp(70px,12vh,120px)] text-center translate-x-[-50%] translate-y-[-50%] w-[87%] pointer-events-none ${A==="dark"?"text-[rgba(0,0,0,0.5)]":"text-[rgba(255,255,255,0.5)]"}`,children:P(i)}),r.jsx("input",{ref:M,type:"file",accept:"image/*",onChange:ee,className:"hidden"})]}),r.jsxs("div",{className:"absolute contents left-[6.76%] top-[26.3%]","data-name":"",onClick:a,style:{cursor:"pointer"},children:[r.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%-35.51%)] text-[clamp(10px,3vw,12px)] text-center top-[33.94%] translate-x-[-50%] w-[13.04%] ${A==="dark"?"text-black":"text-white"}`,children:""}),r.jsx("div",{className:"absolute left-[6.76%] w-[14.98%] aspect-square top-[26.3%] overflow-hidden rounded-[18%] hover:opacity-80 active:opacity-60 transition-opacity",children:r.jsx("img",{alt:"",className:"block w-full h-full object-cover",src:W["desktop2-shop"]||kD})})]}),r.jsxs("div",{className:"absolute contents left-[30.43%] top-[26.3%]","data-name":"",onClick:void 0,style:{cursor:"not-allowed",opacity:.5},children:[r.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%-11.84%)] text-[clamp(10px,3vw,12px)] text-center top-[33.94%] translate-x-[-50%] w-[13.04%] ${A==="dark"?"text-black":"text-white"}`,children:""}),r.jsx("div",{className:"absolute left-[30.43%] w-[14.98%] aspect-square top-[26.3%] overflow-hidden rounded-[18%]",children:r.jsx("img",{alt:"",className:"block w-full h-full object-cover",src:W["desktop2-game"]||SD})})]}),r.jsxs("div",{className:"absolute contents left-[54.1%] top-[26.3%]","data-name":"",onClick:n,style:{cursor:"pointer"},children:[r.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%+11.84%)] text-[clamp(10px,3vw,12px)] text-center top-[33.94%] translate-x-[-50%] w-[13.04%] ${A==="dark"?"text-black":"text-white"}`,children:""}),r.jsx("div",{className:"absolute left-[54.1%] w-[14.98%] aspect-square top-[26.3%] overflow-hidden rounded-[18%] hover:opacity-80 active:opacity-60 transition-opacity",children:r.jsx("img",{alt:"",className:"block w-full h-full object-cover",src:W["desktop2-schedule"]||jD})})]}),r.jsxs("div",{className:"absolute contents left-[77.78%] top-[26.3%]","data-name":"",onClick:t,style:{cursor:"pointer"},children:[r.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%+35.51%)] text-[clamp(10px,3vw,12px)] text-center top-[33.94%] translate-x-[-50%] w-[13.04%] ${A==="dark"?"text-black":"text-white"}`,children:""}),r.jsx("div",{className:"absolute left-[77.78%] w-[14.98%] aspect-square top-[26.3%] overflow-hidden rounded-[18%] hover:opacity-80 active:opacity-60 transition-opacity",children:r.jsx("img",{alt:"",className:"block w-full h-full object-cover",src:W["desktop2-health"]||CD})})]}),r.jsxs("div",{className:"absolute h-[38.04%] left-1/2 top-[38.64%] translate-x-[-50%] w-[86%]","data-name":"2",children:[r.jsx("div",{className:`absolute backdrop-blur-[15px] backdrop-filter inset-0 rounded-[24px] shadow-[0px_0px_2px_0px_inset_#ffffff,0px_1px_1px_0px_inset_rgba(255,255,255,0.5)] ${A==="dark"?"bg-[rgba(0,0,0,0.3)]":"bg-[rgba(255,255,255,0.5)]"}`}),r.jsx("div",{className:"absolute h-[62%] left-[7.3%] rounded-[26px] top-[32.86%] w-[19.66%] cursor-pointer hover:opacity-80 active:opacity-80 transition-opacity",onClick:()=>H(0),children:v?r.jsx("img",{alt:"",className:"absolute inset-0 w-full h-full object-cover rounded-[26px]",src:v}):r.jsx("div",{className:"absolute inset-0 w-full h-full rounded-[26px]",style:{backgroundColor:"#D5EAE3"}})}),r.jsx("div",{className:"absolute h-[62%] left-[29.21%] rounded-[26px] top-[33.14%] w-[19.66%] cursor-pointer hover:opacity-80 active:opacity-80 transition-opacity",onClick:()=>H(1),children:C?r.jsx("img",{alt:"",className:"absolute inset-0 w-full h-full object-cover rounded-[26px]",src:C}):r.jsx("div",{className:"absolute inset-0 w-full h-full rounded-[26px]",style:{backgroundColor:"#D5EAE3"}})}),r.jsx("div",{className:"absolute h-[62%] left-[51.12%] rounded-[26px] top-[32.86%] w-[19.66%] cursor-pointer hover:opacity-80 active:opacity-80 transition-opacity",onClick:()=>H(2),children:R?r.jsx("img",{alt:"",className:"absolute inset-0 w-full h-full object-cover rounded-[26px]",src:R}):r.jsx("div",{className:"absolute inset-0 w-full h-full rounded-[26px]",style:{backgroundColor:"#D5EAE3"}})}),r.jsx("div",{className:"absolute h-[62%] left-[73.03%] rounded-[26px] top-[32.86%] w-[19.66%] cursor-pointer hover:opacity-80 active:opacity-80 transition-opacity",onClick:()=>H(3),children:V?r.jsx("img",{alt:"",className:"absolute inset-0 w-full h-full object-cover rounded-[26px]",src:V}):r.jsx("div",{className:"absolute inset-0 w-full h-full rounded-[26px]",style:{backgroundColor:"#D5EAE3"}})}),r.jsxs("p",{className:`absolute bona-nova-regular h-[22.29%] leading-[normal] left-[5.34%] not-italic top-0 w-[46.63%] ${A==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:[r.jsx("span",{className:"text-[clamp(48px,15vw,64px)]",children:L().month}),r.jsx("span",{className:"text-[clamp(36px,11.25vw,48px)]",children:"/"}),r.jsx("span",{className:"text-[clamp(48px,15vw,64px)]",children:L().day})]}),r.jsx("p",{className:"absolute font-['Bona_Nova:Bold','Noto_Sans_JP:Bold',sans-serif] h-[14.29%] leading-[normal] left-[6.18%] text-[clamp(18px,6vw,24px)] top-[21.3%] w-[44.66%] text-white",style:{fontVariationSettings:"'wght' 700",fontFamily:"YShi NewHei T, sans-serif",fontWeight:"bold"},children:B()}),f?r.jsx("input",{type:"text",value:c,onChange:re=>u(re.target.value),onBlur:O,autoFocus:!0,className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[7.43%] leading-[normal] left-[92.42%] text-[clamp(12px,4vw,16px)] text-right top-[12.29%] translate-x-[-100%] w-[40%] bg-transparent border-none outline-none ${A==="dark"?"text-white/70":"text-[#5c5c5c]"}`}):r.jsx("p",{onClick:q,className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[7.43%] leading-[normal] left-[92.42%] text-[clamp(12px,4vw,16px)] text-right top-[12.29%] translate-x-[-100%] w-[40%] cursor-pointer hover:opacity-70 active:opacity-70 transition-opacity ${A==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:c}),g?r.jsx("input",{type:"text",value:p,onChange:re=>h(re.target.value),onBlur:$,autoFocus:!0,className:`absolute h-[7.43%] leading-[normal] left-[92.42%] text-[clamp(12px,4vw,16px)] text-right top-[22.57%] translate-x-[-100%] w-[80%] bg-transparent border-none outline-none ${A==="dark"?"text-white/70":"text-[#5c5c5c]"}`}):r.jsx("p",{onClick:G,className:`absolute h-[7.43%] leading-[normal] left-[92.42%] text-[clamp(12px,4vw,16px)] text-right top-[22.57%] translate-x-[-100%] w-[80%] cursor-pointer hover:opacity-70 active:opacity-70 transition-opacity ${A==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:p})]}),j.map((re,de)=>r.jsx("input",{ref:re,type:"file",accept:"image/*",onChange:X=>Y(de,X),className:"hidden"},de))]})}const _D="/assets/c50f0278eb53f2dd6c95d7fda7f37649c4c89657-CgQEB29n.png",AD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHwAAAB8CAYAAACrHtS+AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAtYSURBVHgB7Z1bU1TZFcf/NNCAoNzEAS9DI14HFVCj5SURE52qTGoSTfKQ5Il8gJSmKu+j38B5SR51KqnUJBWjJsYxjpaIiDqo3ES50yAqdxoQ6KZvs9bhNDb0AWnYp+nus39Vm9Ocbuju8z9r7b3XXnvvGAjA6/Wm0eEUlUIqFipFVNLUIlkaVrXUqOVeTEyMFcskBktEFfkslWNUSiAJBSz8BSxD/KAF9xP6DKQFrySXqJwPVvigBCexz0EKHW6w6OcW++JFCU5CW+hwBdN1syT8sFI5vhhrN33oBSR2KR2qIcUOZyxUqkmrUx964YKCqy78IqQLjwRYoyuqZvMyr0tX//ALSCKReet1TcFV13AFkkimlET/au7JAMHVBhrX2dKNRzY2KsVzG3JagndguhEgiXxqSPBi/xOzGm1qvW2BJFooIk1ntcNmLFx15R3QEXoPpbicbkyMjGN4YJQeu+B2ueGmc/ycmDd6/14eDx09Hnj8HjPbijcjbW3wtZZzyomGR42wTziwVOLi45CUkoiU1GRkf7wO5iQzyBKhE+za8+j/25T39ntCtxY5X2j7uB1dTa/Q3tCJvlcDGOwZwpTdSaJ4SARVIAgSnPFO/1DuIa/v1PRNEBcXh7XZGUsS3DE5hcobVfQd+rFUTCYTTLEmxJvjkJqVim2Fm7H3eCFS167RQ3j+khwdPc+/KIKr1l0KwfDFfWcbR21FA+qpDJDIbM0rjdAbawl42ONQYe82SYbQ29mLlrp2lPzyKHmefD1EP0tafMlW7rPwEgiGxbY2vsKdr+/hbUcP3G4PJNqwF3rb0YsbF2+RtzuJ7fu2iBZ9xsp9jbYzEIiXXHhbvRVX/3Id3a1vpNiLZGRoDDf/egfdLW/EtWfeU8I/TKo7FxYn5w/a3mDFjUvfYmRwDJLgGBkcxcNvqpQ2j2BKeGibLbwEAuE66eHNpxjqHYYkeNhg2p5b8YqsXAd+wYIXQiDNz1rR1dgFydJxUJev7kEDHI4pCKaIBRfmzqccTrx43KR0tyTLo6upGwPdgxCMhQW3QBD2d5PofyP8QxqS8dEJdFIvRzBFQgXv6erHOEXQJMuH4xV8Pd0uoT2ctA9mvARDDwUQXGEQWIkWbP02CuUKrcfFCj4xNqlEkCRiYG/pmhJrQMIE5+6EfcKOFY5aRhVOZUBJrAGJE5yiazywIBGHy+lUBp5EItDCId25YDxur2JIIhFah0vCHym4wZCCGwwpuMGQghsMKbjBkIIbDCm4wZCCGwwpuMGQgmugQ8Zo2CAF18DWP4Ipe3QOBEnB5zA2PKakWNfef06DF9E3GBQHyQw89afq22q01LZj4O0gPspdh01bN+g50S/kSAv3QdV245NmPC2rU34d7hvBg+vfLWuWaDgiBcd0I22434ayyw9mJWG2kqU//v8T4WPSK4kUHDwF2IE7/yzHYM/s2TKcOVp1uxqtde2IFgwvOE90rC6rJ3feotkdGx+ZwO2vy5Vpz9GAoQVngbtbX+P+fx4qDbb56Hvdj/JrlQu+JlIwtODvqL6+f+0hJt8tPFOT6/Ca8no0V7ch0jGs4OzK71+tRPvzzkVF1ni+3N1/VWCo14ZIxrD98JfUBXtR1RRUcGXgzSAqyCNEcnauIQX3uDxoeNyoTMsNBmXudoMVsbGxiFQMKTgL51hiQIWXF+MSqch+uMGQghsMKbjBkIIbDCm4wZCCGwwpuMGQghsMKbjBkIIbDCm4wZCCGwwpuMEIm9Eyzv2OiY2hO3D+HHBl+xLv+5WNonlKkF6srOCkbWJSAjZuWY+NWzcg46M0xJrmdzpuEtrjdivZKlyUHYp0FN23FJlXeV+PcoO51Z2R+JzX7ZneKUmnz8Cb4CSuSoBIVkxw3sppz9ECFP9otzLDI55+jzFFwAwPr2+xSW9IVp0UfU1WRPBVq5Nw4OQ+HPrpfiQIvoN1J8a32VvMIndfDy9CLviajNU48ZsS7Dq0Q9m/SxJaQip4UkqSIvbuQzsjw31HISETnK254OAO7Ni3dUGxZcs7EJGzV0MmeFpWKg58WgxzYrzm8yw0T+uxDYzA6ZB7pjDx5nhk5mQo+5SKIiSC8x26+8gnWJuTqfn8+NgE6ioalNkdnOivWLnBDZ27Y0c/P4j1m3MgkpAInpq5BoVHCpQNVucy3GdTduNrqWmXy2+rmBPNOPyzA9h/Yi9dswjsluXtyqWgSnrAeZ5sf/sf99Bc0xZVc7CXA7dvCg5ux74fF1KsQvyEB937ReaEeOR9khvQZ2W3/fxRI5qfSbH9SUpOwv6fFCEhSZ/4hO6Cp6SnIDs3K+C8Y2IKVbeeKhuwS96TvSkLWRuzoBe6C55Jrjw1Y03Aed7ySm5qNxtu3G6gcQWOoeuF7oInpyYjNi6wLup40RWVy2ItB66/LTs36bpqlO6Cc3QNGoEWXg9NMhsTCZ22Lg16orvg3J80adyxjihd6XA5mOla6enOGd0F5x2HtaKl8QlmSGbjogasW+etPIUJzkaslbzA87C1dtdLSV0FyWxcTjdGh95BTwQKHgOTRuPMPunQ7Gdn566DZDZ8nV63vYGeiHPpZOFxGoKP0mCI1nJXOZZsoYMC0QAHo7j3oufyYEItPM4cOBJmGxwNWOGQSc1crSxcG4lZI3rS09kHW/8o9EJoo211WnLAWPfE6CT6XwcGWDinrfCHBTCbZePNnwkaOWyra9ctRiFU8Myc9IAVjtg9tdS2aY6EbdmTj21786Nqeerlwq30Z2W1ilfUIxlEqODpFEbViqp1NXbjbUdvwPmEJDOOnT6M/N15UnQ/+sgjVvz3Eezj4pfuFtrL55h5cmqSsjqxP+OjE6i+V49sy7oAD7B2fSY+Kz2Byv99B+vLLoxRt8QtQ67KIv05dL0OnNhHvR9xdilUcDNZbNb6tRjqmb08Jbumpmet2H14Jz7evnGWNfNjHiv/rPSkstcIu7LJcbvhM16YRLqe3K3ltG5RxHgFVxRllytQzstTalhp/i4LfvWHn2NVysJfQOYxvkd0TSc8tJpXkEuCavev2190ovxKJd21C69ezF9SFvFiM8IFz7Z8hM0FFs1GGEeSnlILtOxy5bTbloQc4YInJJqVDNX56h2n3Yknt6tx8293qK4flnnoIUZ4Hc7w0Gf51Uo8/uYJXPOM/nCAJmtDJoqP7cHWonykZ6UqPkx2zqbh66NHV1UXwRnuiv37z9fRVt+x4Os4dXl1RgoystKRQpE6vceDIwEWmrur2ykolZGdAZHoJjgzOjSGW3+/i8aqFrL0yN8vJJQo+W35Ofjdn34ttFumawIEzxQ9+dvj+MGnxViTniInEAaBMvWKvCQvgCASXS3ch9vlIWsfxcuqZnQ1vaIBAju10ifhdEirn4/E5ATs3L8NRz4/qAw0iYIF57FLfTPn/ODBAR5QcU65hN+90QMPNccpy6FoTc9a1n8mwblVZYHECFj59qmBxCgoglshMQo1LHgtJEahhutwbrANQ2IE8kzUwefB6zJIop0a0trqa/OXQRLtXOAfSuhLdevcPQtZf1wScvJmLFx16xcgiVYusdj8YCa4La08qsnzCT4Tt5NWHrWc84nNBAxfkaVX06EIkmjASmLn+Z/QisyfpmKDJNJhDY/PPRkguGr+f4Qk0vm9vyv3oTn2Ri+8RIdzkEQqXG9f1XpiwRQUqs+/gBQ+0mCxz8/35Adzjkj0U3S4CNldC3e4zj5LYn+10IsWlWRGolvocBcyUSJc4ZyG01p19lwWlT/D/0ht3p+DJJxgq2YXXrwYsZmg00hVa+e6vRSSlcIXJPtSDZgtmiXnDavCl1A5AxmoCRVlaglaaB9CEsX9xC/EtPgWyPp+OdjUwnWzVT1eW6rI/nwP7DSvuDGTUckAAAAASUVORK5CYII=",ED="/assets/d12fb0f5a7c98f7ca307964198d2d0075ea990ff-CuWkxAA1.png";function TD({onSettingsClick:e,onWorldBookClick:t,onCharacterClick:n}){const[s,a]=k.useState("light"),[i,l]=k.useState({"bottom-organization":null,"bottom-worldbook":null,"bottom-settings":null});return k.useEffect(()=>{(async()=>{const f=await se.get(J.APPEARANCE,"desktop_color_mode");a(f||"light")})(),(async()=>{const f={},m=["bottom-organization","bottom-worldbook","bottom-settings"];for(const g of m){const y=await Ct(`system-icon-${g}`);y&&(f[g]=y)}l(f)})();const p=f=>{a(f.detail)},h=f=>{const m=f,{iconId:g,url:y}=m.detail;g.startsWith("bottom-")&&l(b=>({...b,[g]:y}))};return window.addEventListener("colorModeChange",p),window.addEventListener("iconChange",h),()=>{window.removeEventListener("colorModeChange",p),window.removeEventListener("iconChange",h)}},[]),r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"absolute left-[13%] w-[14.98%] aspect-square top-[89%] cursor-pointer hover:opacity-80 active:opacity-60 transition-opacity overflow-hidden rounded-[18%]",onClick:n,"data-name":"",children:r.jsx("img",{alt:"",className:"block w-full h-full object-cover pointer-events-none",src:i["bottom-organization"]||ED})}),r.jsx("button",{className:"absolute left-[42.51%] w-[14.98%] aspect-square top-[89%] cursor-pointer hover:opacity-80 active:opacity-60 transition-opacity overflow-hidden rounded-[18%]",onClick:t,"data-name":"",children:r.jsx("img",{alt:"",className:"block w-full h-full object-cover pointer-events-none",src:i["bottom-worldbook"]||AD})}),r.jsx("button",{className:"absolute left-[72.02%] w-[14.98%] aspect-square top-[89%] cursor-pointer hover:opacity-80 active:opacity-60 transition-opacity overflow-hidden rounded-[18%]",onClick:e,"data-name":"",children:r.jsx("img",{alt:"",className:"block w-full h-full object-cover pointer-events-none",src:i["bottom-settings"]||_D})})]})}function DD({currentPage:e}){const[t,n]=k.useState("light");k.useEffect(()=>{(async()=>{const l=await se.get(J.APPEARANCE,"desktop_color_mode")||"light";n(l)})();const i=l=>{n(l.detail)};return window.addEventListener("colorModeChange",i),()=>{window.removeEventListener("colorModeChange",i)}},[]);const s=t==="dark";return r.jsxs("div",{className:"absolute h-[16px] left-1/2 top-[84%] translate-x-[-50%] w-[44px]","data-name":"",children:[r.jsx("div",{className:"absolute inset-0 rounded-[8px]",style:{backgroundColor:s?"rgba(0, 0, 0, 0.3)":"rgba(255, 255, 255, 0.3)"}}),r.jsx("div",{className:"absolute left-[10.5px] size-[7px] top-[4.5px]",children:r.jsx("svg",{className:"block size-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 8 8",children:r.jsx("circle",{cx:"4",cy:"4",fill:s?"black":"white",fillOpacity:e===0?"0.7":"0.3",r:"4"})})}),r.jsx("div",{className:"absolute left-[26.5px] size-[7px] top-[4.5px]",children:r.jsx("svg",{className:"block size-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 8 8",children:r.jsx("circle",{cx:"4",cy:"4",fill:s?"black":"white",fillOpacity:e===1?"0.7":"0.3",r:"4"})})})]})}function ID({onNavigate:e,onClose:t}){const[n,s]=k.useState(new Date),[a,i]=k.useState(100),[l,c]=k.useState(!1);k.useEffect(()=>{const p=setInterval(()=>s(new Date),1e3);return()=>clearInterval(p)},[]),k.useEffect(()=>{(async()=>{try{const h=navigator;if(h.getBattery){const f=await h.getBattery(),m=()=>{i(Math.round(f.level*100)),c(f.charging)};return m(),f.addEventListener("levelchange",m),f.addEventListener("chargingchange",m),()=>{f.removeEventListener("levelchange",m),f.removeEventListener("chargingchange",m)}}}catch{console.log("Battery Status API not supported")}})()},[]);const u=[{id:"beautify",label:"",sub:"INTERFACE MOD",desc:"    ",icon:l9},{id:"api",label:"",sub:"NEURAL LINK",desc:"AI   ",icon:V9},{id:"data",label:"",sub:"DATA ARCHIVE",desc:"    ",icon:Kw},{id:"disclaimer",label:"",sub:"SYSTEM INFO",desc:"    ",icon:z7}];return r.jsxs("div",{className:"w-full h-full bg-[#F0F2F5] overflow-hidden flex flex-col font-['Source_Han_Sans_CN_VF',sans-serif] text-slate-800",children:[r.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.05]",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),r.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border-b border-slate-300 px-6 py-2 flex justify-between items-center text-[10px] font-bold tracking-widest text-slate-500 z-20 sticky top-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jT,{className:"w-3 h-3",strokeWidth:2.5}),r.jsx("span",{children:""})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{children:[a,"%"]}),r.jsxs("div",{className:"relative",children:[r.jsx(A8,{className:`w-4 h-4 ${l?"text-green-600":"text-slate-500"}`,strokeWidth:2.5}),l&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx(t5,{className:"w-2 h-2 text-green-600 fill-current"})})]})]})]}),r.jsxs("div",{className:"px-6 pt-6 pb-4 flex items-center gap-4 z-20",children:[r.jsx("button",{onClick:t,className:"w-10 h-10 bg-white border border-slate-300 flex items-center justify-center text-slate-700 active:bg-slate-800 active:text-white active:border-slate-800 hover:bg-slate-800 hover:text-white hover:border-slate-800 transition-colors",children:r.jsx(dn,{className:"w-6 h-6",strokeWidth:2})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-xl font-black text-slate-800 tracking-tighter flex items-center gap-2",children:[" ",r.jsx("span",{className:"text-[10px] px-1.5 py-0.5 border border-slate-800 text-slate-800 font-mono font-medium rounded-sm",children:"CONFIG"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-slate-500 tracking-wider mt-1",children:[r.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse shadow-[0_0_8px_rgba(34,197,94,0.6)]"}),r.jsxs("span",{children:["  ",n.toLocaleTimeString("zh-CN",{hour12:!1})]})]})]})]}),r.jsxs("div",{className:"mx-6 h-[1px] bg-slate-300 mb-6 flex justify-between items-center overflow-hidden",children:[r.jsx("div",{className:"w-1/3 h-full bg-slate-800"}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("div",{className:"w-1 h-1 bg-slate-300 rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-slate-300 rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-slate-300 rounded-full"})]})]}),r.jsxs("div",{className:"flex-1 px-6 pb-6 overflow-y-auto",children:[r.jsx("div",{className:"space-y-3",children:u.map((p,h)=>r.jsxs("button",{onClick:()=>e(p.id),className:"w-full bg-white border border-slate-300 p-0 flex items-stretch justify-between group active:border-slate-800 hover:border-slate-800 transition-colors relative overflow-hidden",children:[r.jsxs("div",{className:"absolute right-0 top-0 text-[60px] font-black text-slate-100 leading-none -translate-y-2 translate-x-4 pointer-events-none opacity-50 group-active:opacity-20 group-hover:opacity-20 transition-opacity",children:["0",h+1]}),r.jsxs("div",{className:"flex items-center gap-5 p-5 z-10",children:[r.jsx("div",{className:"w-12 h-12 bg-slate-100 border border-slate-200 flex items-center justify-center text-slate-600 group-active:bg-slate-800 group-active:text-white group-active:border-slate-800 group-hover:bg-slate-800 group-hover:text-white group-hover:border-slate-800 transition-colors duration-200",children:r.jsx(p.icon,{className:"w-6 h-6",strokeWidth:1.5})}),r.jsxs("div",{className:"text-left",children:[r.jsxs("div",{className:"flex items-baseline gap-2",children:[r.jsx("h3",{className:"text-base font-bold text-slate-800 group-active:text-blue-600 group-hover:text-blue-600 transition-colors",children:p.label}),r.jsx("span",{className:"text-[9px] font-bold text-slate-400 tracking-wider font-mono uppercase",children:p.sub})]}),r.jsx("p",{className:"text-xs text-slate-400 mt-1 font-medium tracking-wide",children:p.desc})]})]}),r.jsx("div",{className:"w-10 border-l border-slate-100 flex items-center justify-center bg-slate-50 group-active:bg-slate-100 group-hover:bg-slate-100 transition-colors",children:r.jsx(Qn,{className:"w-5 h-5 text-slate-400 group-active:text-slate-800 group-hover:text-slate-800 transition-colors"})})]},p.id))}),r.jsxs("div",{className:"mt-10 border-t border-slate-300 pt-6",children:[r.jsxs("div",{className:"flex justify-between items-end opacity-60",children:[r.jsxs("div",{className:"text-[10px] font-bold tracking-widest space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Bd,{className:"w-3 h-3"})," ",r.jsx("span",{children:": "})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Np,{className:"w-3 h-3"})," ",r.jsx("span",{children:": "})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Fd,{className:"w-3 h-3"})," ",r.jsx("span",{children:": 12ms"})]})]}),r.jsx("div",{className:"text-right",children:r.jsx("div",{className:"w-12 h-12 border-2 border-slate-800 rounded-full flex items-center justify-center opacity-20",children:r.jsx("span",{className:"text-[10px] font-black",children:"OS"})})})]}),r.jsxs("div",{className:"mt-6 text-center",children:[r.jsx("div",{className:"inline-flex items-center justify-center px-3 py-1 border border-slate-800 bg-slate-800 text-white text-[10px] font-bold tracking-[0.2em] uppercase",children:" OS"}),r.jsx("p",{className:"text-[9px] text-slate-400 mt-2 font-mono tracking-widest",children:"TOUKEN RANBU ONLINE // CHIFU SYSTEM"})]})]})]})]})}function iu({title:e,onBack:t,children:n,className:s=""}){return r.jsxs("div",{className:"w-full h-full bg-[#F0F2F5] overflow-hidden flex flex-col font-['Source_Han_Sans_CN_VF',sans-serif] text-slate-800",children:[r.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.05]",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),r.jsx("div",{className:"bg-white/90 backdrop-blur-sm border-b border-slate-300 sticky top-0 z-10 flex-shrink-0",children:r.jsxs("div",{className:"max-w-md mx-auto px-4 h-[60px] flex items-center justify-between relative",children:[r.jsxs("button",{onClick:t,className:"absolute left-4 p-2 -ml-2 flex items-center gap-1 text-slate-600 active:text-black active:bg-slate-100 hover:text-black hover:bg-slate-100 rounded-none border border-transparent active:border-slate-300 hover:border-slate-300 transition-colors",children:[r.jsx(dn,{className:"w-5 h-5",strokeWidth:2}),r.jsx("span",{className:"text-xs font-bold tracking-wider",children:""})]}),r.jsxs("div",{className:"w-full text-center flex flex-col items-center justify-center pointer-events-none",children:[r.jsx("h1",{className:"text-sm font-bold tracking-[0.1em] text-slate-800 uppercase",children:e}),r.jsx("div",{className:"h-[2px] w-8 bg-slate-800 mt-1"})]}),r.jsx("div",{className:"absolute right-4 opacity-30",children:r.jsx(e5,{className:"w-5 h-5"})})]})}),r.jsx("div",{className:`flex-1 overflow-y-auto overscroll-contain ${s}`,children:r.jsx("div",{className:"max-w-md mx-auto min-h-full pb-10 pt-6 px-5",children:n})})]})}function i5(e){const t=k.useRef({value:e,previous:e});return k.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function o5(e){const[t,n]=k.useState(void 0);return Mn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let l,c;if("borderBoxSize"in i){const u=i.borderBoxSize,p=Array.isArray(u)?u[0]:u;l=p.inlineSize,c=p.blockSize}else l=e.offsetWidth,c=e.offsetHeight;n({width:l,height:c})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else n(void 0)},[e]),t}var ou="Switch",[PD]=ei(ou),[MD,FD]=PD(ou),l5=k.forwardRef((e,t)=>{const{__scopeSwitch:n,name:s,checked:a,defaultChecked:i,required:l,disabled:c,value:u="on",onCheckedChange:p,form:h,...f}=e,[m,g]=k.useState(null),y=zt(t,C=>g(C)),b=k.useRef(!1),S=m?h||!!m.closest("form"):!0,[v,N]=Td({prop:a,defaultProp:i??!1,onChange:p,caller:ou});return r.jsxs(MD,{scope:n,checked:v,disabled:c,children:[r.jsx(It.button,{type:"button",role:"switch","aria-checked":v,"aria-required":l,"data-state":f5(v),"data-disabled":c?"":void 0,disabled:c,value:u,...f,ref:y,onClick:Tt(e.onClick,C=>{N(_=>!_),S&&(b.current=C.isPropagationStopped(),b.current||C.stopPropagation())})}),S&&r.jsx(u5,{control:m,bubbles:!b.current,name:s,value:u,checked:v,required:l,disabled:c,form:h,style:{transform:"translateX(-100%)"}})]})});l5.displayName=ou;var c5="SwitchThumb",d5=k.forwardRef((e,t)=>{const{__scopeSwitch:n,...s}=e,a=FD(c5,n);return r.jsx(It.span,{"data-state":f5(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})});d5.displayName=c5;var RD="SwitchBubbleInput",u5=k.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:s=!0,...a},i)=>{const l=k.useRef(null),c=zt(l,i),u=i5(n),p=o5(t);return k.useEffect(()=>{const h=l.current;if(!h)return;const f=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(f,"checked").set;if(u!==n&&g){const y=new Event("click",{bubbles:s});g.call(h,n),h.dispatchEvent(y)}},[u,n,s]),r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:c,style:{...a.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});u5.displayName=RD;function f5(e){return e?"checked":"unchecked"}var BD=l5,zD=d5;function h5({className:e,...t}){return r.jsx(BD,{"data-slot":"switch",className:Pe("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:r.jsx(zD,{"data-slot":"switch-thumb",className:Pe("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const p5=["https://api520.pro/v1","https://api521.pro/v1"];function ca(e){if(!e)return!1;const t=e.trim().replace(/\/$/,"");return p5.some(n=>t===n||t===n.replace(/\/$/,""))}async function ho(){try{const e=await se.get(J.API_SETTINGS,"api_configs");if(!e)return{isBlocked:!1,config:null,mainAPI:null,auxAPI:null};const t=JSON.parse(e),n=await se.get(J.API_SETTINGS,"current_config_index"),s=parseInt(n||"0"),a=t[s];if(!a)return{isBlocked:!1,config:null,mainAPI:null,auxAPI:null};const i=ca(a.baseUrl),l=a.enableAuxiliary&&a.auxBaseUrl?ca(a.auxBaseUrl):!1,c={isBlocked:i||l,config:a,mainAPI:{baseUrl:a.baseUrl,apiKey:a.apiKey,modelName:a.modelName,temperature:a.temperature,isBlocked:i},auxAPI:a.enableAuxiliary&&a.auxBaseUrl?{baseUrl:a.auxBaseUrl,apiKey:a.auxApiKey||"",modelName:a.auxModelName||"",temperature:a.auxTemperature??.7,isBlocked:l}:null};return i?c.blockReason=" API ":l&&(c.blockReason=" API "),c}catch(e){return console.error("Failed to get validated API config:",e),{isBlocked:!1,config:null,mainAPI:null,auxAPI:null}}}const LD=Object.freeze(Object.defineProperty({__proto__:null,BANNED_APIS:p5,getValidatedAPIConfig:ho,isAPIBanned:ca},Symbol.toStringTag,{value:"Module"}));function OD({onBack:e}){const[t,n]=k.useState(""),[s,a]=k.useState(""),[i,l]=k.useState(""),[c,u]=k.useState(""),[p,h]=k.useState(.7),[f,m]=k.useState(!1),[g,y]=k.useState(!1),[b,S]=k.useState(!1),[v,N]=k.useState(null),[C,_]=k.useState(null),[R,D]=k.useState([]),[V,I]=k.useState(!1),[A,U]=k.useState(null),[W,T]=k.useState([]),[M,j]=k.useState(0),[P,L]=k.useState(!1),[B,q]=k.useState(!1),[G,O]=k.useState(""),[$,K]=k.useState(""),[H,ee]=k.useState(""),[Y,re]=k.useState(.7),[de,X]=k.useState([]),[oe,ye]=k.useState(!1),[be,Ie]=k.useState(!1),[De,F]=k.useState(null);k.useEffect(()=>{(async()=>{try{const je=await se.get(J.API_SETTINGS,"api_configs");if(je){const Ne=JSON.parse(je);T(Ne);const he=parseInt(await se.get(J.API_SETTINGS,"current_config_index")||"0");j(he),Ne[he]&&le(Ne[he])}}catch(je){console.error("Failed to load API settings:",je)}})()},[]);const le=pe=>{n(pe.name),l(pe.baseUrl),a(pe.apiKey),u(pe.modelName),h(pe.temperature),q(pe.enableAuxiliary||!1),K(pe.auxBaseUrl||""),O(pe.auxApiKey||""),ee(pe.auxModelName||""),re(pe.auxTemperature??.7)},Z=()=>{if(ca(i)){N({success:!1,message:" API "}),setTimeout(()=>N(null),3e3);return}if(B&&$&&ca($)){N({success:!1,message:" API "}),setTimeout(()=>N(null),3e3);return}const pe={name:t||"",baseUrl:i,apiKey:s,modelName:c,temperature:p,enableAuxiliary:B,auxBaseUrl:$,auxApiKey:G,auxModelName:H,auxTemperature:Y};let je=[...W];const Ne=je.findIndex(he=>he.name===pe.name);Ne>=0?(je[Ne]=pe,j(Ne)):(je.push(pe),j(je.length-1)),T(je),se.set(J.API_SETTINGS,"api_configs",JSON.stringify(je)),se.set(J.API_SETTINGS,"current_config_index",M.toString()),m(!0),setTimeout(()=>m(!1),2e3),N(null),_(null)},te=async pe=>{j(pe),await se.set(J.API_SETTINGS,"current_config_index",pe.toString()),le(W[pe]),L(!1)},ne=async()=>{if(!s||!i){_({success:!1,message:" Key/URL"});return}if(ca(i)){_({success:!1,message:" API "}),setTimeout(()=>_(null),3e3);return}y(!0);try{const pe=await fetch(`${i}/models`,{headers:{Authorization:`Bearer ${s}`}});if(pe.ok){const je=await pe.json();if(je.data&&je.data.length>0){const Ne=je.data.map(he=>he.id);D(Ne),!c&&Ne.length>0&&u(Ne[0]),_({success:!0,message:` ${Ne.length} `}),setTimeout(()=>_(null),2e3)}else _({success:!1,message:""})}else _({success:!1,message:""})}catch{_({success:!1,message:""})}finally{y(!1)}},ae=pe=>{const je=W.filter((Ne,he)=>he!==pe);if(T(je),se.set(J.API_SETTINGS,"api_configs",JSON.stringify(je)),pe===M)j(0),se.set(J.API_SETTINGS,"current_config_index","0"),je.length>0?le(je[0]):(n(""),l(""),a(""),u(""),h(.7),D([]),q(!1),K(""),O(""),ee(""),re(.7),X([]));else if(pe<M){const Ne=M-1;j(Ne),se.set(J.API_SETTINGS,"current_config_index",Ne.toString())}U(null)},we=async()=>{if(!s||!i){N({success:!1,message:""});return}if(ca(i)){N({success:!1,message:" API "}),setTimeout(()=>N(null),3e3);return}S(!0),N(null);try{const pe=await fetch(`${i}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({model:c||"gpt-3.5-turbo",messages:[{role:"user",content:"test"}],temperature:p,max_tokens:10})});if(pe.ok)N({success:!0,message:""}),setTimeout(()=>N(null),2e3);else{const je=await pe.json().catch(()=>({})),Ne=je.error?.message||je.message||`HTTP ${pe.status}`;N({success:!1,message:`: ${Ne}`}),setTimeout(()=>N(null),3e3)}}catch{N({success:!1,message:""}),setTimeout(()=>N(null),3e3)}finally{S(!1)}},Ce=async()=>{if(!G||!$){F({success:!1,message:" Key/URL"});return}if(ca($)){F({success:!1,message:" API "}),setTimeout(()=>F(null),3e3);return}Ie(!0);try{const pe=await fetch(`${$}/models`,{headers:{Authorization:`Bearer ${G}`}});if(pe.ok){const je=await pe.json();if(je.data&&je.data.length>0){const Ne=je.data.map(he=>he.id);X(Ne),!H&&Ne.length>0&&ee(Ne[0]),F({success:!0,message:` ${Ne.length} `}),setTimeout(()=>F(null),2e3)}else F({success:!1,message:""})}else F({success:!1,message:""})}catch{F({success:!1,message:""})}finally{Ie(!1)}},ue=()=>{const pe=` ${W.length+1}`;n(pe),l(""),a(""),u(""),h(.7),q(!1),K(""),O(""),ee(""),re(.7),X([]),j(-1),L(!1)};return r.jsx(iu,{title:"",onBack:e,children:r.jsxs("div",{className:"space-y-6 text-slate-800",children:[r.jsx(Be,{children:(f||v||C||De)&&r.jsx(me.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"fixed top-24 left-0 right-0 flex justify-center z-[60] pointer-events-none px-4",children:r.jsxs("div",{className:`
                   px-5 py-3 border-2 shadow-xl flex items-center gap-3 backdrop-blur-md text-sm font-bold tracking-wide
                   ${v?.success===!1||C?.success===!1||De?.success===!1?"bg-red-50 border-red-500 text-red-600":"bg-white border-slate-800 text-slate-800"}
                 `,children:[v?.success===!1||C?.success===!1||De?.success===!1?r.jsx(xt,{className:"w-4 h-4",strokeWidth:3}):r.jsx(Et,{className:"w-4 h-4",strokeWidth:3}),r.jsxs("span",{children:[f&&"",v&&v.message,C&&C.message,De&&De.message]})]})})}),r.jsxs("div",{className:"relative z-30",children:[r.jsxs("div",{onClick:()=>L(!P),className:"w-full bg-white p-4 border-2 border-slate-200 border-slate-200 active:border-slate-800 hover:border-slate-800 flex items-center justify-between cursor-pointer transition-all",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-10 h-10 bg-slate-100 flex items-center justify-center text-slate-600",children:r.jsx(El,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider",children:""}),r.jsx("div",{className:"text-base font-bold text-slate-800 font-mono",children:M===-1?"NEW_PROFILE (UNSAVED)":W[M]?.name||"UNNAMED"})]})]}),r.jsx(Ka,{className:`w-5 h-5 text-slate-400 transition-transform ${P?"rotate-180":""}`})]}),r.jsx(Be,{children:P&&r.jsxs(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute top-full left-0 right-0 mt-2 bg-white border-2 border-slate-800 shadow-[8px_8px_0px_rgba(0,0,0,0.1)] z-50 max-h-[300px] overflow-y-auto",children:[W.map((pe,je)=>r.jsxs("div",{className:`p-3 flex justify-between items-center cursor-pointer transition-colors border-b border-slate-100 ${je===M?"bg-slate-50":"active:bg-slate-50 hover:bg-slate-50"}`,onClick:()=>te(je),children:[r.jsxs("div",{children:[r.jsx("div",{className:`text-sm font-bold font-mono ${je===M?"text-blue-600":"text-slate-700"}`,children:pe.name}),r.jsx("div",{className:"text-[10px] text-slate-400 truncate max-w-[200px] font-mono",children:pe.baseUrl})]}),r.jsx("button",{onClick:Ne=>{Ne.stopPropagation(),U(je)},className:"p-2 text-slate-300 active:text-red-500 active:bg-red-50 hover:text-red-500 hover:bg-red-50 rounded-sm transition-colors",children:r.jsx(xn,{className:"w-4 h-4"})})]},je)),r.jsxs("button",{onClick:ue,className:"w-full p-3 text-center text-sm font-bold text-slate-600 active:bg-slate-100 hover:bg-slate-100 transition-colors flex items-center justify-center gap-2 uppercase tracking-wider",children:[r.jsx(Zn,{className:"w-4 h-4"})," "]})]})})]}),r.jsxs("div",{className:"bg-white p-6 border border-slate-200 space-y-6 relative",children:[r.jsx("div",{className:"absolute top-0 left-0 w-3 h-3 border-l-2 border-t-2 border-slate-300"}),r.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 border-r-2 border-b-2 border-slate-300"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:""}),r.jsx("input",{type:"text",value:t,onChange:pe=>n(pe.target.value),className:"w-full bg-slate-50 border border-slate-200 px-4 py-3 text-slate-800 font-bold focus:border-slate-800 focus:outline-none transition-all font-mono text-sm rounded-none",placeholder:"PROFILE_NAME"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1 flex items-center gap-2",children:[r.jsx(Bd,{className:"w-3 h-3"}),"  (Base URL)"]}),r.jsx("input",{type:"text",value:i,onChange:pe=>l(pe.target.value),className:"w-full bg-slate-50 border border-slate-200 px-4 py-3 text-slate-800 font-medium focus:border-slate-800 focus:outline-none transition-all placeholder:text-slate-300 font-mono text-xs rounded-none",placeholder:"https://api.example.com/v1"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1 flex items-center gap-2",children:[r.jsx(Db,{className:"w-3 h-3"}),"  (API Key)"]}),r.jsx("input",{type:"password",value:s,onChange:pe=>a(pe.target.value),className:"w-full bg-slate-50 border border-slate-200 px-4 py-3 text-slate-800 font-medium focus:border-slate-800 focus:outline-none transition-all placeholder:text-slate-300 font-mono text-xs rounded-none",placeholder:"sk-..."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center px-1",children:[r.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[r.jsx(Eb,{className:"w-3 h-3"})," "]}),r.jsxs("button",{onClick:ne,disabled:g,className:"text-[9px] font-bold border border-blue-200 text-blue-600 px-2 py-0.5 active:bg-blue-50 hover:bg-blue-50 transition-all flex items-center gap-1 disabled:opacity-50 uppercase",children:[r.jsx(bd,{className:`w-3 h-3 ${g?"animate-spin":""}`}),g?"SCANNING...":"AUTO SCAN"]})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",value:c,onChange:pe=>u(pe.target.value),className:"w-full bg-slate-50 border border-slate-200 px-4 py-3 text-slate-800 font-medium focus:border-slate-800 focus:outline-none transition-all placeholder:text-slate-300 font-mono text-xs rounded-none",placeholder:"gpt-3.5-turbo"}),R.length>0&&r.jsx("button",{onClick:()=>I(!V),className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 text-slate-400 active:bg-slate-200 hover:bg-slate-200 rounded-none transition-colors",children:r.jsx(Ka,{className:"w-4 h-4"})}),r.jsx(Be,{children:V&&R.length>0&&r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute top-full left-0 right-0 mt-2 bg-white border border-slate-800 shadow-lg z-40 max-h-[200px] overflow-y-auto",children:R.map((pe,je)=>r.jsx("div",{onClick:()=>{u(pe),I(!1)},className:"px-4 py-2 text-xs text-slate-700 active:bg-slate-100 hover:bg-slate-100 cursor-pointer border-b border-slate-100 font-mono last:border-0",children:pe},je))})})]})]}),r.jsxs("div",{className:"space-y-4 pt-2",children:[r.jsxs("div",{className:"flex justify-between items-center px-1",children:[r.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[r.jsx(Fd,{className:"w-3 h-3"}),"  (Temperature)"]}),r.jsx("span",{className:"bg-slate-100 border border-slate-200 text-slate-600 px-2 py-0.5 text-xs font-bold font-mono",children:p.toFixed(1)})]}),r.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:p,onChange:pe=>h(parseFloat(pe.target.value)),className:"w-full h-1 bg-slate-200 rounded-none appearance-none cursor-pointer accent-slate-800 hover:accent-blue-600 transition-all"}),r.jsxs("div",{className:"flex justify-between text-[9px] text-slate-400 font-bold uppercase tracking-widest px-1",children:[r.jsx("span",{children:"PRECISE"}),r.jsx("span",{children:"CREATIVE"})]})]}),r.jsxs("div",{className:"border-t border-slate-200 pt-6 mt-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(t5,{className:"w-4 h-4 text-amber-500"}),r.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-slate-700",children:" API ()"})]}),r.jsx(h5,{checked:B,onCheckedChange:q,className:"data-[state=checked]:bg-amber-500"})]}),r.jsx(Be,{children:B&&r.jsxs(me.div,{initial:{height:0,opacity:0,overflow:"hidden"},animate:{height:"auto",opacity:1,transitionEnd:{overflow:"visible"}},exit:{height:0,opacity:0,overflow:"hidden"},className:"space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1 flex items-center gap-2",children:[r.jsx(Bd,{className:"w-3 h-3"})," "]}),r.jsx("input",{type:"text",value:$,onChange:pe=>K(pe.target.value),className:"w-full bg-slate-50 border border-slate-200 px-4 py-3 text-slate-800 font-medium focus:border-slate-800 focus:outline-none transition-all placeholder:text-slate-300 font-mono text-xs rounded-none",placeholder:"https://api.example.com/v1"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1 flex items-center gap-2",children:[r.jsx(Db,{className:"w-3 h-3"})," "]}),r.jsx("input",{type:"password",value:G,onChange:pe=>O(pe.target.value),className:"w-full bg-slate-50 border border-slate-200 px-4 py-3 text-slate-800 font-medium focus:border-slate-800 focus:outline-none transition-all placeholder:text-slate-300 font-mono text-xs rounded-none",placeholder:"sk-..."})]}),r.jsxs("div",{className:"space-y-2 pb-2",children:[r.jsxs("div",{className:"flex justify-between items-center px-1",children:[r.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[r.jsx(Eb,{className:"w-3 h-3"})," "]}),r.jsxs("button",{onClick:Ce,disabled:be,className:"text-[9px] font-bold border border-amber-200 text-amber-600 px-2 py-0.5 active:bg-amber-50 hover:bg-amber-50 transition-all flex items-center gap-1 disabled:opacity-50 uppercase",children:[r.jsx(bd,{className:`w-3 h-3 ${be?"animate-spin":""}`}),be?"SCANNING...":"AUTO SCAN"]})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",value:H,onChange:pe=>ee(pe.target.value),className:"w-full bg-slate-50 border border-slate-200 px-4 py-3 text-slate-800 font-medium focus:border-slate-800 focus:outline-none transition-all placeholder:text-slate-300 font-mono text-xs rounded-none",placeholder:"gpt-3.5-turbo"}),de.length>0&&r.jsx("button",{onClick:()=>ye(!oe),className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 text-slate-400 active:bg-slate-200 hover:bg-slate-200 rounded-none transition-colors",children:r.jsx(Ka,{className:"w-4 h-4"})}),r.jsx(Be,{children:oe&&de.length>0&&r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute top-full left-0 right-0 mt-2 bg-white border border-slate-800 shadow-lg z-40 max-h-[200px] overflow-y-auto",children:de.map((pe,je)=>r.jsx("div",{onClick:()=>{ee(pe),ye(!1)},className:"px-4 py-2 text-xs text-slate-700 active:bg-slate-100 hover:bg-slate-100 cursor-pointer border-b border-slate-100 font-mono last:border-0",children:pe},je))})})]})]}),r.jsxs("div",{className:"space-y-4 pt-2",children:[r.jsxs("div",{className:"flex justify-between items-center px-1",children:[r.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[r.jsx(Fd,{className:"w-3 h-3"}),"  (Temperature)"]}),r.jsx("span",{className:"bg-slate-100 border border-slate-200 text-slate-600 px-2 py-0.5 text-xs font-bold font-mono",children:Y.toFixed(1)})]}),r.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:Y,onChange:pe=>re(parseFloat(pe.target.value)),className:"w-full h-1 bg-slate-200 rounded-none appearance-none cursor-pointer accent-slate-800 hover:accent-amber-600 transition-all"}),r.jsxs("div",{className:"flex justify-between text-[9px] text-slate-400 font-bold uppercase tracking-widest px-1",children:[r.jsx("span",{children:"PRECISE"}),r.jsx("span",{children:"CREATIVE"})]})]})]})})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-3 pt-2",children:[r.jsxs("button",{onClick:we,disabled:b,className:"col-span-1 py-3.5 border border-slate-300 bg-white text-slate-600 font-bold text-xs active:border-slate-800 active:text-slate-800 hover:border-slate-800 hover:text-slate-800 transition-all flex items-center justify-center gap-2 disabled:opacity-50 uppercase tracking-wider",children:[b?r.jsx(bd,{className:"w-3 h-3 animate-spin"}):r.jsx(F9,{className:"w-3 h-3"}),"TEST"]}),r.jsxs("button",{onClick:Z,className:"col-span-2 py-3.5 bg-slate-800 text-white font-bold text-xs active:bg-slate-900 hover:bg-slate-900 transition-all flex items-center justify-center gap-2 shadow-lg shadow-slate-200 uppercase tracking-wider",children:[r.jsx(ti,{className:"w-3 h-3"}),""]})]}),r.jsx(Be,{children:A!==null&&r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[70] px-6",children:r.jsxs(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"bg-white border-2 border-slate-800 p-6 w-full max-w-sm shadow-[8px_8px_0px_rgba(0,0,0,0.2)]",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("h3",{className:"text-lg font-black text-slate-800 mb-2 uppercase tracking-tight",children:""}),r.jsxs("p",{className:"text-xs font-mono text-slate-500",children:['PROFILE: "',W[A]?.name,'"']}),r.jsx("p",{className:"text-sm text-slate-500 mt-2",children:""})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>U(null),className:"flex-1 py-3 border border-slate-300 text-slate-600 font-bold text-xs active:bg-slate-50 hover:bg-slate-50 transition-colors uppercase tracking-wider",children:""}),r.jsx("button",{onClick:()=>ae(A),className:"flex-1 py-3 bg-red-600 text-white font-bold text-xs active:bg-red-700 hover:bg-red-700 transition-colors shadow-lg shadow-red-200 uppercase tracking-wider",children:""})]})]})})})]})})}function $D(e,t){return t.forEach((function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach((function(s){if(s!=="default"&&!(s in e)){var a=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:function(){return n[s]}})}}))})),Object.freeze(e)}function m5(e,t){return new Promise((function(n,s){let a;return VD(e).then((function(i){try{return a=i,n(new Blob([t.slice(0,2),a,t.slice(2)],{type:"image/jpeg"}))}catch(l){return s(l)}}),s)}))}const VD=e=>new Promise(((t,n)=>{const s=new FileReader;s.addEventListener("load",(({target:{result:a}})=>{const i=new DataView(a);let l=0;if(i.getUint16(l)!==65496)return n("not a valid JPEG");for(l+=2;;){const c=i.getUint16(l);if(c===65498)break;const u=i.getUint16(l+2);if(c===65505&&i.getUint32(l+4)===1165519206){const p=l+10;let h;switch(i.getUint16(p)){case 18761:h=!0;break;case 19789:h=!1;break;default:return n("TIFF header contains invalid endian")}if(i.getUint16(p+2,h)!==42)return n("TIFF header contains invalid version");const f=i.getUint32(p+4,h),m=p+f+2+12*i.getUint16(p+f,h);for(let g=p+f+2;g<m;g+=12)if(i.getUint16(g,h)==274){if(i.getUint16(g+2,h)!==3)return n("Orientation data type is invalid");if(i.getUint32(g+4,h)!==1)return n("Orientation data count is invalid");i.setUint16(g+8,1,h);break}return t(a.slice(l,l+2+u))}l+=2+u}return t(new Blob)})),s.readAsArrayBuffer(e)}));var zd={},HD={get exports(){return zd},set exports(e){zd=e}};(function(e){var t,n,s={};HD.exports=s,s.parse=function(a,i){for(var l=s.bin.readUshort,c=s.bin.readUint,u=0,p={},h=new Uint8Array(a),f=h.length-4;c(h,f)!=101010256;)f--;u=f,u+=4;var m=l(h,u+=4);l(h,u+=2);var g=c(h,u+=2),y=c(h,u+=4);u+=4,u=y;for(var b=0;b<m;b++){c(h,u),u+=4,u+=4,u+=4,c(h,u+=4),g=c(h,u+=4);var S=c(h,u+=4),v=l(h,u+=4),N=l(h,u+2),C=l(h,u+4);u+=6;var _=c(h,u+=8);u+=4,u+=v+N+C,s._readLocal(h,_,p,g,S,i)}return p},s._readLocal=function(a,i,l,c,u,p){var h=s.bin.readUshort,f=s.bin.readUint;f(a,i),h(a,i+=4),h(a,i+=2);var m=h(a,i+=2);f(a,i+=2),f(a,i+=4),i+=4;var g=h(a,i+=8),y=h(a,i+=2);i+=2;var b=s.bin.readUTF8(a,i,g);if(i+=g,i+=y,p)l[b]={size:u,csize:c};else{var S=new Uint8Array(a.buffer,i);if(m==0)l[b]=new Uint8Array(S.buffer.slice(i,i+c));else{if(m!=8)throw"unknown compression method: "+m;var v=new Uint8Array(u);s.inflateRaw(S,v),l[b]=v}}},s.inflateRaw=function(a,i){return s.F.inflate(a,i)},s.inflate=function(a,i){return a[0],a[1],s.inflateRaw(new Uint8Array(a.buffer,a.byteOffset+2,a.length-6),i)},s.deflate=function(a,i){i==null&&(i={level:6});var l=0,c=new Uint8Array(50+Math.floor(1.1*a.length));c[l]=120,c[l+1]=156,l+=2,l=s.F.deflateRaw(a,c,l,i.level);var u=s.adler(a,0,a.length);return c[l+0]=u>>>24&255,c[l+1]=u>>>16&255,c[l+2]=u>>>8&255,c[l+3]=u>>>0&255,new Uint8Array(c.buffer,0,l+4)},s.deflateRaw=function(a,i){i==null&&(i={level:6});var l=new Uint8Array(50+Math.floor(1.1*a.length)),c=s.F.deflateRaw(a,l,c,i.level);return new Uint8Array(l.buffer,0,c)},s.encode=function(a,i){i==null&&(i=!1);var l=0,c=s.bin.writeUint,u=s.bin.writeUshort,p={};for(var h in a){var f=!s._noNeed(h)&&!i,m=a[h],g=s.crc.crc(m,0,m.length);p[h]={cpr:f,usize:m.length,crc:g,file:f?s.deflateRaw(m):m}}for(var h in p)l+=p[h].file.length+30+46+2*s.bin.sizeUTF8(h);l+=22;var y=new Uint8Array(l),b=0,S=[];for(var h in p){var v=p[h];S.push(b),b=s._writeHeader(y,b,h,v,0)}var N=0,C=b;for(var h in p)v=p[h],S.push(b),b=s._writeHeader(y,b,h,v,1,S[N++]);var _=b-C;return c(y,b,101010256),b+=4,u(y,b+=4,N),u(y,b+=2,N),c(y,b+=2,_),c(y,b+=4,C),b+=4,b+=2,y.buffer},s._noNeed=function(a){var i=a.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(i)!=-1},s._writeHeader=function(a,i,l,c,u,p){var h=s.bin.writeUint,f=s.bin.writeUshort,m=c.file;return h(a,i,u==0?67324752:33639248),i+=4,u==1&&(i+=2),f(a,i,20),f(a,i+=2,0),f(a,i+=2,c.cpr?8:0),h(a,i+=2,0),h(a,i+=4,c.crc),h(a,i+=4,m.length),h(a,i+=4,c.usize),f(a,i+=4,s.bin.sizeUTF8(l)),f(a,i+=2,0),i+=2,u==1&&(i+=2,i+=2,h(a,i+=6,p),i+=4),i+=s.bin.writeUTF8(a,i,l),u==0&&(a.set(m,i),i+=m.length),i},s.crc={table:(function(){for(var a=new Uint32Array(256),i=0;i<256;i++){for(var l=i,c=0;c<8;c++)1&l?l=3988292384^l>>>1:l>>>=1;a[i]=l}return a})(),update:function(a,i,l,c){for(var u=0;u<c;u++)a=s.crc.table[255&(a^i[l+u])]^a>>>8;return a},crc:function(a,i,l){return 4294967295^s.crc.update(4294967295,a,i,l)}},s.adler=function(a,i,l){for(var c=1,u=0,p=i,h=i+l;p<h;){for(var f=Math.min(p+5552,h);p<f;)u+=c+=a[p++];c%=65521,u%=65521}return u<<16|c},s.bin={readUshort:function(a,i){return a[i]|a[i+1]<<8},writeUshort:function(a,i,l){a[i]=255&l,a[i+1]=l>>8&255},readUint:function(a,i){return 16777216*a[i+3]+(a[i+2]<<16|a[i+1]<<8|a[i])},writeUint:function(a,i,l){a[i]=255&l,a[i+1]=l>>8&255,a[i+2]=l>>16&255,a[i+3]=l>>24&255},readASCII:function(a,i,l){for(var c="",u=0;u<l;u++)c+=String.fromCharCode(a[i+u]);return c},writeASCII:function(a,i,l){for(var c=0;c<l.length;c++)a[i+c]=l.charCodeAt(c)},pad:function(a){return a.length<2?"0"+a:a},readUTF8:function(a,i,l){for(var c,u="",p=0;p<l;p++)u+="%"+s.bin.pad(a[i+p].toString(16));try{c=decodeURIComponent(u)}catch{return s.bin.readASCII(a,i,l)}return c},writeUTF8:function(a,i,l){for(var c=l.length,u=0,p=0;p<c;p++){var h=l.charCodeAt(p);if((4294967168&h)==0)a[i+u]=h,u++;else if((4294965248&h)==0)a[i+u]=192|h>>6,a[i+u+1]=128|h>>0&63,u+=2;else if((4294901760&h)==0)a[i+u]=224|h>>12,a[i+u+1]=128|h>>6&63,a[i+u+2]=128|h>>0&63,u+=3;else{if((4292870144&h)!=0)throw"e";a[i+u]=240|h>>18,a[i+u+1]=128|h>>12&63,a[i+u+2]=128|h>>6&63,a[i+u+3]=128|h>>0&63,u+=4}}return u},sizeUTF8:function(a){for(var i=a.length,l=0,c=0;c<i;c++){var u=a.charCodeAt(c);if((4294967168&u)==0)l++;else if((4294965248&u)==0)l+=2;else if((4294901760&u)==0)l+=3;else{if((4292870144&u)!=0)throw"e";l+=4}}return l}},s.F={},s.F.deflateRaw=function(a,i,l,c){var u=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][c],p=s.F.U,h=s.F._goodIndex;s.F._hash;var f=s.F._putsE,m=0,g=l<<3,y=0,b=a.length;if(c==0){for(;m<b;)f(i,g,m+(W=Math.min(65535,b-m))==b?1:0),g=s.F._copyExact(a,m,W,i,g+8),m+=W;return g>>>3}var S=p.lits,v=p.strt,N=p.prev,C=0,_=0,R=0,D=0,V=0,I=0;for(b>2&&(v[I=s.F._hash(a,0)]=0),m=0;m<b;m++){if(V=I,m+1<b-2){I=s.F._hash(a,m+1);var A=m+1&32767;N[A]=v[I],v[I]=A}if(y<=m){(C>14e3||_>26697)&&b-m>100&&(y<m&&(S[C]=m-y,C+=2,y=m),g=s.F._writeBlock(m==b-1||y==b?1:0,S,C,D,a,R,m-R,i,g),C=_=D=0,R=m);var U=0;m<b-2&&(U=s.F._bestMatch(a,m,N,V,Math.min(u[2],b-m),u[3]));var W=U>>>16,T=65535&U;if(U!=0){T=65535&U;var M=h(W=U>>>16,p.of0);p.lhst[257+M]++;var j=h(T,p.df0);p.dhst[j]++,D+=p.exb[M]+p.dxb[j],S[C]=W<<23|m-y,S[C+1]=T<<16|M<<8|j,C+=2,y=m+W}else p.lhst[a[m]]++;_++}}for(R==m&&a.length!=0||(y<m&&(S[C]=m-y,C+=2,y=m),g=s.F._writeBlock(1,S,C,D,a,R,m-R,i,g),C=0,_=0,C=_=D=0,R=m);(7&g)!=0;)g++;return g>>>3},s.F._bestMatch=function(a,i,l,c,u,p){var h=32767&i,f=l[h],m=h-f+32768&32767;if(f==h||c!=s.F._hash(a,i-m))return 0;for(var g=0,y=0,b=Math.min(32767,i);m<=b&&--p!=0&&f!=h;){if(g==0||a[i+g]==a[i+g-m]){var S=s.F._howLong(a,i,m);if(S>g){if(y=m,(g=S)>=u)break;m+2<S&&(S=m+2);for(var v=0,N=0;N<S-2;N++){var C=i-m+N+32768&32767,_=C-l[C]+32768&32767;_>v&&(v=_,f=C)}}}m+=(h=f)-(f=l[h])+32768&32767}return g<<16|y},s.F._howLong=function(a,i,l){if(a[i]!=a[i-l]||a[i+1]!=a[i+1-l]||a[i+2]!=a[i+2-l])return 0;var c=i,u=Math.min(a.length,i+258);for(i+=3;i<u&&a[i]==a[i-l];)i++;return i-c},s.F._hash=function(a,i){return(a[i]<<8|a[i+1])+(a[i+2]<<4)&65535},s.saved=0,s.F._writeBlock=function(a,i,l,c,u,p,h,f,m){var g,y,b,S,v,N,C,_,R,D=s.F.U,V=s.F._putsF,I=s.F._putsE;D.lhst[256]++,y=(g=s.F.getTrees())[0],b=g[1],S=g[2],v=g[3],N=g[4],C=g[5],_=g[6],R=g[7];var A=32+((m+3&7)==0?0:8-(m+3&7))+(h<<3),U=c+s.F.contSize(D.fltree,D.lhst)+s.F.contSize(D.fdtree,D.dhst),W=c+s.F.contSize(D.ltree,D.lhst)+s.F.contSize(D.dtree,D.dhst);W+=14+3*C+s.F.contSize(D.itree,D.ihst)+(2*D.ihst[16]+3*D.ihst[17]+7*D.ihst[18]);for(var T=0;T<286;T++)D.lhst[T]=0;for(T=0;T<30;T++)D.dhst[T]=0;for(T=0;T<19;T++)D.ihst[T]=0;var M=A<U&&A<W?0:U<W?1:2;if(V(f,m,a),V(f,m+1,M),m+=3,M==0){for(;(7&m)!=0;)m++;m=s.F._copyExact(u,p,h,f,m)}else{var j,P;if(M==1&&(j=D.fltree,P=D.fdtree),M==2){s.F.makeCodes(D.ltree,y),s.F.revCodes(D.ltree,y),s.F.makeCodes(D.dtree,b),s.F.revCodes(D.dtree,b),s.F.makeCodes(D.itree,S),s.F.revCodes(D.itree,S),j=D.ltree,P=D.dtree,I(f,m,v-257),I(f,m+=5,N-1),I(f,m+=5,C-4),m+=4;for(var L=0;L<C;L++)I(f,m+3*L,D.itree[1+(D.ordr[L]<<1)]);m+=3*C,m=s.F._codeTiny(_,D.itree,f,m),m=s.F._codeTiny(R,D.itree,f,m)}for(var B=p,q=0;q<l;q+=2){for(var G=i[q],O=G>>>23,$=B+(8388607&G);B<$;)m=s.F._writeLit(u[B++],j,f,m);if(O!=0){var K=i[q+1],H=K>>16,ee=K>>8&255,Y=255&K;I(f,m=s.F._writeLit(257+ee,j,f,m),O-D.of0[ee]),m+=D.exb[ee],V(f,m=s.F._writeLit(Y,P,f,m),H-D.df0[Y]),m+=D.dxb[Y],B+=O}}m=s.F._writeLit(256,j,f,m)}return m},s.F._copyExact=function(a,i,l,c,u){var p=u>>>3;return c[p]=l,c[p+1]=l>>>8,c[p+2]=255-c[p],c[p+3]=255-c[p+1],p+=4,c.set(new Uint8Array(a.buffer,i,l),p),u+(l+4<<3)},s.F.getTrees=function(){for(var a=s.F.U,i=s.F._hufTree(a.lhst,a.ltree,15),l=s.F._hufTree(a.dhst,a.dtree,15),c=[],u=s.F._lenCodes(a.ltree,c),p=[],h=s.F._lenCodes(a.dtree,p),f=0;f<c.length;f+=2)a.ihst[c[f]]++;for(f=0;f<p.length;f+=2)a.ihst[p[f]]++;for(var m=s.F._hufTree(a.ihst,a.itree,7),g=19;g>4&&a.itree[1+(a.ordr[g-1]<<1)]==0;)g--;return[i,l,m,u,h,g,c,p]},s.F.getSecond=function(a){for(var i=[],l=0;l<a.length;l+=2)i.push(a[l+1]);return i},s.F.nonZero=function(a){for(var i="",l=0;l<a.length;l+=2)a[l+1]!=0&&(i+=(l>>1)+",");return i},s.F.contSize=function(a,i){for(var l=0,c=0;c<i.length;c++)l+=i[c]*a[1+(c<<1)];return l},s.F._codeTiny=function(a,i,l,c){for(var u=0;u<a.length;u+=2){var p=a[u],h=a[u+1];c=s.F._writeLit(p,i,l,c);var f=p==16?2:p==17?3:7;p>15&&(s.F._putsE(l,c,h,f),c+=f)}return c},s.F._lenCodes=function(a,i){for(var l=a.length;l!=2&&a[l-1]==0;)l-=2;for(var c=0;c<l;c+=2){var u=a[c+1],p=c+3<l?a[c+3]:-1,h=c+5<l?a[c+5]:-1,f=c==0?-1:a[c-1];if(u==0&&p==u&&h==u){for(var m=c+5;m+2<l&&a[m+2]==u;)m+=2;(g=Math.min(m+1-c>>>1,138))<11?i.push(17,g-3):i.push(18,g-11),c+=2*g-2}else if(u==f&&p==u&&h==u){for(m=c+5;m+2<l&&a[m+2]==u;)m+=2;var g=Math.min(m+1-c>>>1,6);i.push(16,g-3),c+=2*g-2}else i.push(u,0)}return l>>>1},s.F._hufTree=function(a,i,l){var c=[],u=a.length,p=i.length,h=0;for(h=0;h<p;h+=2)i[h]=0,i[h+1]=0;for(h=0;h<u;h++)a[h]!=0&&c.push({lit:h,f:a[h]});var f=c.length,m=c.slice(0);if(f==0)return 0;if(f==1){var g=c[0].lit;return m=g==0?1:0,i[1+(g<<1)]=1,i[1+(m<<1)]=1,1}c.sort((function(_,R){return _.f-R.f}));var y=c[0],b=c[1],S=0,v=1,N=2;for(c[0]={lit:-1,f:y.f+b.f,l:y,r:b,d:0};v!=f-1;)y=S!=v&&(N==f||c[S].f<c[N].f)?c[S++]:c[N++],b=S!=v&&(N==f||c[S].f<c[N].f)?c[S++]:c[N++],c[v++]={lit:-1,f:y.f+b.f,l:y,r:b};var C=s.F.setDepth(c[v-1],0);for(C>l&&(s.F.restrictDepth(m,l,C),C=l),h=0;h<f;h++)i[1+(m[h].lit<<1)]=m[h].d;return C},s.F.setDepth=function(a,i){return a.lit!=-1?(a.d=i,i):Math.max(s.F.setDepth(a.l,i+1),s.F.setDepth(a.r,i+1))},s.F.restrictDepth=function(a,i,l){var c=0,u=1<<l-i,p=0;for(a.sort((function(f,m){return m.d==f.d?f.f-m.f:m.d-f.d})),c=0;c<a.length&&a[c].d>i;c++){var h=a[c].d;a[c].d=i,p+=u-(1<<l-h)}for(p>>>=l-i;p>0;)(h=a[c].d)<i?(a[c].d++,p-=1<<i-h-1):c++;for(;c>=0;c--)a[c].d==i&&p<0&&(a[c].d--,p++);p!=0&&console.log("debt left")},s.F._goodIndex=function(a,i){var l=0;return i[16|l]<=a&&(l|=16),i[8|l]<=a&&(l|=8),i[4|l]<=a&&(l|=4),i[2|l]<=a&&(l|=2),i[1|l]<=a&&(l|=1),l},s.F._writeLit=function(a,i,l,c){return s.F._putsF(l,c,i[a<<1]),c+i[1+(a<<1)]},s.F.inflate=function(a,i){var l=Uint8Array;if(a[0]==3&&a[1]==0)return i||new l(0);var c=s.F,u=c._bitsF,p=c._bitsE,h=c._decodeTiny,f=c.makeCodes,m=c.codes2map,g=c._get17,y=c.U,b=i==null;b&&(i=new l(a.length>>>2<<3));for(var S,v,N=0,C=0,_=0,R=0,D=0,V=0,I=0,A=0,U=0;N==0;)if(N=u(a,U,1),C=u(a,U+1,2),U+=3,C!=0){if(b&&(i=s.F._check(i,A+(1<<17))),C==1&&(S=y.flmap,v=y.fdmap,V=511,I=31),C==2){_=p(a,U,5)+257,R=p(a,U+5,5)+1,D=p(a,U+10,4)+4,U+=14;for(var W=0;W<38;W+=2)y.itree[W]=0,y.itree[W+1]=0;var T=1;for(W=0;W<D;W++){var M=p(a,U+3*W,3);y.itree[1+(y.ordr[W]<<1)]=M,M>T&&(T=M)}U+=3*D,f(y.itree,T),m(y.itree,T,y.imap),S=y.lmap,v=y.dmap,U=h(y.imap,(1<<T)-1,_+R,a,U,y.ttree);var j=c._copyOut(y.ttree,0,_,y.ltree);V=(1<<j)-1;var P=c._copyOut(y.ttree,_,R,y.dtree);I=(1<<P)-1,f(y.ltree,j),m(y.ltree,j,S),f(y.dtree,P),m(y.dtree,P,v)}for(;;){var L=S[g(a,U)&V];U+=15&L;var B=L>>>4;if(!(B>>>8))i[A++]=B;else{if(B==256)break;var q=A+B-254;if(B>264){var G=y.ldef[B-257];q=A+(G>>>3)+p(a,U,7&G),U+=7&G}var O=v[g(a,U)&I];U+=15&O;var $=O>>>4,K=y.ddef[$],H=(K>>>4)+u(a,U,15&K);for(U+=15&K,b&&(i=s.F._check(i,A+(1<<17)));A<q;)i[A]=i[A++-H],i[A]=i[A++-H],i[A]=i[A++-H],i[A]=i[A++-H];A=q}}}else{(7&U)!=0&&(U+=8-(7&U));var ee=4+(U>>>3),Y=a[ee-4]|a[ee-3]<<8;b&&(i=s.F._check(i,A+Y)),i.set(new l(a.buffer,a.byteOffset+ee,Y),A),U=ee+Y<<3,A+=Y}return i.length==A?i:i.slice(0,A)},s.F._check=function(a,i){var l=a.length;if(i<=l)return a;var c=new Uint8Array(Math.max(l<<1,i));return c.set(a,0),c},s.F._decodeTiny=function(a,i,l,c,u,p){for(var h=s.F._bitsE,f=s.F._get17,m=0;m<l;){var g=a[f(c,u)&i];u+=15&g;var y=g>>>4;if(y<=15)p[m]=y,m++;else{var b=0,S=0;y==16?(S=3+h(c,u,2),u+=2,b=p[m-1]):y==17?(S=3+h(c,u,3),u+=3):y==18&&(S=11+h(c,u,7),u+=7);for(var v=m+S;m<v;)p[m]=b,m++}}return u},s.F._copyOut=function(a,i,l,c){for(var u=0,p=0,h=c.length>>>1;p<l;){var f=a[p+i];c[p<<1]=0,c[1+(p<<1)]=f,f>u&&(u=f),p++}for(;p<h;)c[p<<1]=0,c[1+(p<<1)]=0,p++;return u},s.F.makeCodes=function(a,i){for(var l,c,u,p,h=s.F.U,f=a.length,m=h.bl_count,g=0;g<=i;g++)m[g]=0;for(g=1;g<f;g+=2)m[a[g]]++;var y=h.next_code;for(l=0,m[0]=0,c=1;c<=i;c++)l=l+m[c-1]<<1,y[c]=l;for(u=0;u<f;u+=2)(p=a[u+1])!=0&&(a[u]=y[p],y[p]++)},s.F.codes2map=function(a,i,l){for(var c=a.length,u=s.F.U.rev15,p=0;p<c;p+=2)if(a[p+1]!=0)for(var h=p>>1,f=a[p+1],m=h<<4|f,g=i-f,y=a[p]<<g,b=y+(1<<g);y!=b;)l[u[y]>>>15-i]=m,y++},s.F.revCodes=function(a,i){for(var l=s.F.U.rev15,c=15-i,u=0;u<a.length;u+=2){var p=a[u]<<i-a[u+1];a[u]=l[p]>>>c}},s.F._putsE=function(a,i,l){l<<=7&i;var c=i>>>3;a[c]|=l,a[c+1]|=l>>>8},s.F._putsF=function(a,i,l){l<<=7&i;var c=i>>>3;a[c]|=l,a[c+1]|=l>>>8,a[c+2]|=l>>>16},s.F._bitsE=function(a,i,l){return(a[i>>>3]|a[1+(i>>>3)]<<8)>>>(7&i)&(1<<l)-1},s.F._bitsF=function(a,i,l){return(a[i>>>3]|a[1+(i>>>3)]<<8|a[2+(i>>>3)]<<16)>>>(7&i)&(1<<l)-1},s.F._get17=function(a,i){return(a[i>>>3]|a[1+(i>>>3)]<<8|a[2+(i>>>3)]<<16)>>>(7&i)},s.F._get25=function(a,i){return(a[i>>>3]|a[1+(i>>>3)]<<8|a[2+(i>>>3)]<<16|a[3+(i>>>3)]<<24)>>>(7&i)},s.F.U=(t=Uint16Array,n=Uint32Array,{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new t(65536),prev:new t(32768)}),(function(){for(var a=s.F.U,i=0;i<32768;i++){var l=i;l=(4278255360&(l=(4042322160&(l=(3435973836&(l=(2863311530&l)>>>1|(1431655765&l)<<1))>>>2|(858993459&l)<<2))>>>4|(252645135&l)<<4))>>>8|(16711935&l)<<8,a.rev15[i]=(l>>>16|l<<16)>>>17}function c(u,p,h){for(;p--!=0;)u.push(0,h)}for(i=0;i<32;i++)a.ldef[i]=a.of0[i]<<3|a.exb[i],a.ddef[i]=a.df0[i]<<4|a.dxb[i];c(a.fltree,144,8),c(a.fltree,112,9),c(a.fltree,24,7),c(a.fltree,8,8),s.F.makeCodes(a.fltree,9),s.F.codes2map(a.fltree,9,a.flmap),s.F.revCodes(a.fltree,9),c(a.fdtree,32,5),s.F.makeCodes(a.fdtree,5),s.F.codes2map(a.fdtree,5,a.fdmap),s.F.revCodes(a.fdtree,5),c(a.itree,19,0),c(a.ltree,286,0),c(a.dtree,30,0),c(a.ttree,320,0)})()})();var UD=$D({__proto__:null,default:zd},[zd]);const Wr=(function(){var e={nextZero(h,f){for(;h[f]!=0;)f++;return f},readUshort:(h,f)=>h[f]<<8|h[f+1],writeUshort(h,f,m){h[f]=m>>8&255,h[f+1]=255&m},readUint:(h,f)=>16777216*h[f]+(h[f+1]<<16|h[f+2]<<8|h[f+3]),writeUint(h,f,m){h[f]=m>>24&255,h[f+1]=m>>16&255,h[f+2]=m>>8&255,h[f+3]=255&m},readASCII(h,f,m){let g="";for(let y=0;y<m;y++)g+=String.fromCharCode(h[f+y]);return g},writeASCII(h,f,m){for(let g=0;g<m.length;g++)h[f+g]=m.charCodeAt(g)},readBytes(h,f,m){const g=[];for(let y=0;y<m;y++)g.push(h[f+y]);return g},pad:h=>h.length<2?`0${h}`:h,readUTF8(h,f,m){let g,y="";for(let b=0;b<m;b++)y+=`%${e.pad(h[f+b].toString(16))}`;try{g=decodeURIComponent(y)}catch{return e.readASCII(h,f,m)}return g}};function t(h,f,m,g){const y=f*m,b=i(g),S=Math.ceil(f*b/8),v=new Uint8Array(4*y),N=new Uint32Array(v.buffer),{ctype:C}=g,{depth:_}=g,R=e.readUshort;if(C==6){const G=y<<2;if(_==8)for(var D=0;D<G;D+=4)v[D]=h[D],v[D+1]=h[D+1],v[D+2]=h[D+2],v[D+3]=h[D+3];if(_==16)for(D=0;D<G;D++)v[D]=h[D<<1]}else if(C==2){const G=g.tabs.tRNS;if(G==null){if(_==8)for(D=0;D<y;D++){var V=3*D;N[D]=255<<24|h[V+2]<<16|h[V+1]<<8|h[V]}if(_==16)for(D=0;D<y;D++)V=6*D,N[D]=255<<24|h[V+4]<<16|h[V+2]<<8|h[V]}else{var I=G[0];const O=G[1],$=G[2];if(_==8)for(D=0;D<y;D++){var A=D<<2;V=3*D,N[D]=255<<24|h[V+2]<<16|h[V+1]<<8|h[V],h[V]==I&&h[V+1]==O&&h[V+2]==$&&(v[A+3]=0)}if(_==16)for(D=0;D<y;D++)A=D<<2,V=6*D,N[D]=255<<24|h[V+4]<<16|h[V+2]<<8|h[V],R(h,V)==I&&R(h,V+2)==O&&R(h,V+4)==$&&(v[A+3]=0)}}else if(C==3){const G=g.tabs.PLTE,O=g.tabs.tRNS,$=O?O.length:0;if(_==1)for(var U=0;U<m;U++){var W=U*S,T=U*f;for(D=0;D<f;D++){A=T+D<<2;var M=3*(j=h[W+(D>>3)]>>7-((7&D)<<0)&1);v[A]=G[M],v[A+1]=G[M+1],v[A+2]=G[M+2],v[A+3]=j<$?O[j]:255}}if(_==2)for(U=0;U<m;U++)for(W=U*S,T=U*f,D=0;D<f;D++)A=T+D<<2,M=3*(j=h[W+(D>>2)]>>6-((3&D)<<1)&3),v[A]=G[M],v[A+1]=G[M+1],v[A+2]=G[M+2],v[A+3]=j<$?O[j]:255;if(_==4)for(U=0;U<m;U++)for(W=U*S,T=U*f,D=0;D<f;D++)A=T+D<<2,M=3*(j=h[W+(D>>1)]>>4-((1&D)<<2)&15),v[A]=G[M],v[A+1]=G[M+1],v[A+2]=G[M+2],v[A+3]=j<$?O[j]:255;if(_==8)for(D=0;D<y;D++){var j;A=D<<2,M=3*(j=h[D]),v[A]=G[M],v[A+1]=G[M+1],v[A+2]=G[M+2],v[A+3]=j<$?O[j]:255}}else if(C==4){if(_==8)for(D=0;D<y;D++){A=D<<2;var P=h[L=D<<1];v[A]=P,v[A+1]=P,v[A+2]=P,v[A+3]=h[L+1]}if(_==16)for(D=0;D<y;D++){var L;A=D<<2,P=h[L=D<<2],v[A]=P,v[A+1]=P,v[A+2]=P,v[A+3]=h[L+2]}}else if(C==0)for(I=g.tabs.tRNS?g.tabs.tRNS:-1,U=0;U<m;U++){const G=U*S,O=U*f;if(_==1)for(var B=0;B<f;B++){var q=(P=255*(h[G+(B>>>3)]>>>7-(7&B)&1))==255*I?0:255;N[O+B]=q<<24|P<<16|P<<8|P}else if(_==2)for(B=0;B<f;B++)q=(P=85*(h[G+(B>>>2)]>>>6-((3&B)<<1)&3))==85*I?0:255,N[O+B]=q<<24|P<<16|P<<8|P;else if(_==4)for(B=0;B<f;B++)q=(P=17*(h[G+(B>>>1)]>>>4-((1&B)<<2)&15))==17*I?0:255,N[O+B]=q<<24|P<<16|P<<8|P;else if(_==8)for(B=0;B<f;B++)q=(P=h[G+B])==I?0:255,N[O+B]=q<<24|P<<16|P<<8|P;else if(_==16)for(B=0;B<f;B++)P=h[G+(B<<1)],q=R(h,G+(B<<1))==I?0:255,N[O+B]=q<<24|P<<16|P<<8|P}return v}function n(h,f,m,g){const y=i(h),b=Math.ceil(m*y/8),S=new Uint8Array((b+1+h.interlace)*g);return f=h.tabs.CgBI?a(f,S):s(f,S),h.interlace==0?f=l(f,h,0,m,g):h.interlace==1&&(f=(function(N,C){const _=C.width,R=C.height,D=i(C),V=D>>3,I=Math.ceil(_*D/8),A=new Uint8Array(R*I);let U=0;const W=[0,0,4,0,2,0,1],T=[0,4,0,2,0,1,0],M=[8,8,8,4,4,2,2],j=[8,8,4,4,2,2,1];let P=0;for(;P<7;){const B=M[P],q=j[P];let G=0,O=0,$=W[P];for(;$<R;)$+=B,O++;let K=T[P];for(;K<_;)K+=q,G++;const H=Math.ceil(G*D/8);l(N,C,U,G,O);let ee=0,Y=W[P];for(;Y<R;){let re=T[P],de=U+ee*H<<3;for(;re<_;){var L;if(D==1&&(L=(L=N[de>>3])>>7-(7&de)&1,A[Y*I+(re>>3)]|=L<<7-((7&re)<<0)),D==2&&(L=(L=N[de>>3])>>6-(7&de)&3,A[Y*I+(re>>2)]|=L<<6-((3&re)<<1)),D==4&&(L=(L=N[de>>3])>>4-(7&de)&15,A[Y*I+(re>>1)]|=L<<4-((1&re)<<2)),D>=8){const X=Y*I+re*V;for(let oe=0;oe<V;oe++)A[X+oe]=N[(de>>3)+oe]}de+=D,re+=q}ee++,Y+=B}G*O!=0&&(U+=O*(1+H)),P+=1}return A})(f,h)),f}function s(h,f){return a(new Uint8Array(h.buffer,2,h.length-6),f)}var a=(function(){const h={H:{}};return h.H.N=function(f,m){const g=Uint8Array;let y,b,S=0,v=0,N=0,C=0,_=0,R=0,D=0,V=0,I=0;if(f[0]==3&&f[1]==0)return m||new g(0);const A=h.H,U=A.b,W=A.e,T=A.R,M=A.n,j=A.A,P=A.Z,L=A.m,B=m==null;for(B&&(m=new g(f.length>>>2<<5));S==0;)if(S=U(f,I,1),v=U(f,I+1,2),I+=3,v!=0){if(B&&(m=h.H.W(m,V+(1<<17))),v==1&&(y=L.J,b=L.h,R=511,D=31),v==2){N=W(f,I,5)+257,C=W(f,I+5,5)+1,_=W(f,I+10,4)+4,I+=14;let G=1;for(var q=0;q<38;q+=2)L.Q[q]=0,L.Q[q+1]=0;for(q=0;q<_;q++){const K=W(f,I+3*q,3);L.Q[1+(L.X[q]<<1)]=K,K>G&&(G=K)}I+=3*_,M(L.Q,G),j(L.Q,G,L.u),y=L.w,b=L.d,I=T(L.u,(1<<G)-1,N+C,f,I,L.v);const O=A.V(L.v,0,N,L.C);R=(1<<O)-1;const $=A.V(L.v,N,C,L.D);D=(1<<$)-1,M(L.C,O),j(L.C,O,y),M(L.D,$),j(L.D,$,b)}for(;;){const G=y[P(f,I)&R];I+=15&G;const O=G>>>4;if(!(O>>>8))m[V++]=O;else{if(O==256)break;{let $=V+O-254;if(O>264){const re=L.q[O-257];$=V+(re>>>3)+W(f,I,7&re),I+=7&re}const K=b[P(f,I)&D];I+=15&K;const H=K>>>4,ee=L.c[H],Y=(ee>>>4)+U(f,I,15&ee);for(I+=15&ee;V<$;)m[V]=m[V++-Y],m[V]=m[V++-Y],m[V]=m[V++-Y],m[V]=m[V++-Y];V=$}}}}else{(7&I)!=0&&(I+=8-(7&I));const G=4+(I>>>3),O=f[G-4]|f[G-3]<<8;B&&(m=h.H.W(m,V+O)),m.set(new g(f.buffer,f.byteOffset+G,O),V),I=G+O<<3,V+=O}return m.length==V?m:m.slice(0,V)},h.H.W=function(f,m){const g=f.length;if(m<=g)return f;const y=new Uint8Array(g<<1);return y.set(f,0),y},h.H.R=function(f,m,g,y,b,S){const v=h.H.e,N=h.H.Z;let C=0;for(;C<g;){const _=f[N(y,b)&m];b+=15&_;const R=_>>>4;if(R<=15)S[C]=R,C++;else{let D=0,V=0;R==16?(V=3+v(y,b,2),b+=2,D=S[C-1]):R==17?(V=3+v(y,b,3),b+=3):R==18&&(V=11+v(y,b,7),b+=7);const I=C+V;for(;C<I;)S[C]=D,C++}}return b},h.H.V=function(f,m,g,y){let b=0,S=0;const v=y.length>>>1;for(;S<g;){const N=f[S+m];y[S<<1]=0,y[1+(S<<1)]=N,N>b&&(b=N),S++}for(;S<v;)y[S<<1]=0,y[1+(S<<1)]=0,S++;return b},h.H.n=function(f,m){const g=h.H.m,y=f.length;let b,S,v,N;const C=g.j;for(var _=0;_<=m;_++)C[_]=0;for(_=1;_<y;_+=2)C[f[_]]++;const R=g.K;for(b=0,C[0]=0,S=1;S<=m;S++)b=b+C[S-1]<<1,R[S]=b;for(v=0;v<y;v+=2)N=f[v+1],N!=0&&(f[v]=R[N],R[N]++)},h.H.A=function(f,m,g){const y=f.length,b=h.H.m.r;for(let S=0;S<y;S+=2)if(f[S+1]!=0){const v=S>>1,N=f[S+1],C=v<<4|N,_=m-N;let R=f[S]<<_;const D=R+(1<<_);for(;R!=D;)g[b[R]>>>15-m]=C,R++}},h.H.l=function(f,m){const g=h.H.m.r,y=15-m;for(let b=0;b<f.length;b+=2){const S=f[b]<<m-f[b+1];f[b]=g[S]>>>y}},h.H.M=function(f,m,g){g<<=7&m;const y=m>>>3;f[y]|=g,f[y+1]|=g>>>8},h.H.I=function(f,m,g){g<<=7&m;const y=m>>>3;f[y]|=g,f[y+1]|=g>>>8,f[y+2]|=g>>>16},h.H.e=function(f,m,g){return(f[m>>>3]|f[1+(m>>>3)]<<8)>>>(7&m)&(1<<g)-1},h.H.b=function(f,m,g){return(f[m>>>3]|f[1+(m>>>3)]<<8|f[2+(m>>>3)]<<16)>>>(7&m)&(1<<g)-1},h.H.Z=function(f,m){return(f[m>>>3]|f[1+(m>>>3)]<<8|f[2+(m>>>3)]<<16)>>>(7&m)},h.H.i=function(f,m){return(f[m>>>3]|f[1+(m>>>3)]<<8|f[2+(m>>>3)]<<16|f[3+(m>>>3)]<<24)>>>(7&m)},h.H.m=(function(){const f=Uint16Array,m=Uint32Array;return{K:new f(16),j:new f(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new f(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new m(32),J:new f(512),_:[],h:new f(32),$:[],w:new f(32768),C:[],v:[],d:new f(32768),D:[],u:new f(512),Q:[],r:new f(32768),s:new m(286),Y:new m(30),a:new m(19),t:new m(15e3),k:new f(65536),g:new f(32768)}})(),(function(){const f=h.H.m;for(var m=0;m<32768;m++){let y=m;y=(2863311530&y)>>>1|(1431655765&y)<<1,y=(3435973836&y)>>>2|(858993459&y)<<2,y=(4042322160&y)>>>4|(252645135&y)<<4,y=(4278255360&y)>>>8|(16711935&y)<<8,f.r[m]=(y>>>16|y<<16)>>>17}function g(y,b,S){for(;b--!=0;)y.push(0,S)}for(m=0;m<32;m++)f.q[m]=f.S[m]<<3|f.T[m],f.c[m]=f.p[m]<<4|f.z[m];g(f._,144,8),g(f._,112,9),g(f._,24,7),g(f._,8,8),h.H.n(f._,9),h.H.A(f._,9,f.J),h.H.l(f._,9),g(f.$,32,5),h.H.n(f.$,5),h.H.A(f.$,5,f.h),h.H.l(f.$,5),g(f.Q,19,0),g(f.C,286,0),g(f.D,30,0),g(f.v,320,0)})(),h.H.N})();function i(h){return[1,null,3,1,2,null,4][h.ctype]*h.depth}function l(h,f,m,g,y){let b=i(f);const S=Math.ceil(g*b/8);let v,N;b=Math.ceil(b/8);let C=h[m],_=0;if(C>1&&(h[m]=[0,0,1][C-2]),C==3)for(_=b;_<S;_++)h[_+1]=h[_+1]+(h[_+1-b]>>>1)&255;for(let R=0;R<y;R++)if(v=m+R*S,N=v+R+1,C=h[N-1],_=0,C==0)for(;_<S;_++)h[v+_]=h[N+_];else if(C==1){for(;_<b;_++)h[v+_]=h[N+_];for(;_<S;_++)h[v+_]=h[N+_]+h[v+_-b]}else if(C==2)for(;_<S;_++)h[v+_]=h[N+_]+h[v+_-S];else if(C==3){for(;_<b;_++)h[v+_]=h[N+_]+(h[v+_-S]>>>1);for(;_<S;_++)h[v+_]=h[N+_]+(h[v+_-S]+h[v+_-b]>>>1)}else{for(;_<b;_++)h[v+_]=h[N+_]+c(0,h[v+_-S],0);for(;_<S;_++)h[v+_]=h[N+_]+c(h[v+_-b],h[v+_-S],h[v+_-b-S])}return h}function c(h,f,m){const g=h+f-m,y=g-h,b=g-f,S=g-m;return y*y<=b*b&&y*y<=S*S?h:b*b<=S*S?f:m}function u(h,f,m){m.width=e.readUint(h,f),f+=4,m.height=e.readUint(h,f),f+=4,m.depth=h[f],f++,m.ctype=h[f],f++,m.compress=h[f],f++,m.filter=h[f],f++,m.interlace=h[f],f++}function p(h,f,m,g,y,b,S,v,N){const C=Math.min(f,y),_=Math.min(m,b);let R=0,D=0;for(let P=0;P<_;P++)for(let L=0;L<C;L++)if(S>=0&&v>=0?(R=P*f+L<<2,D=(v+P)*y+S+L<<2):(R=(-v+P)*f-S+L<<2,D=P*y+L<<2),N==0)g[D]=h[R],g[D+1]=h[R+1],g[D+2]=h[R+2],g[D+3]=h[R+3];else if(N==1){var V=h[R+3]*.00392156862745098,I=h[R]*V,A=h[R+1]*V,U=h[R+2]*V,W=g[D+3]*(1/255),T=g[D]*W,M=g[D+1]*W,j=g[D+2]*W;const B=1-V,q=V+W*B,G=q==0?0:1/q;g[D+3]=255*q,g[D+0]=(I+T*B)*G,g[D+1]=(A+M*B)*G,g[D+2]=(U+j*B)*G}else if(N==2)V=h[R+3],I=h[R],A=h[R+1],U=h[R+2],W=g[D+3],T=g[D],M=g[D+1],j=g[D+2],V==W&&I==T&&A==M&&U==j?(g[D]=0,g[D+1]=0,g[D+2]=0,g[D+3]=0):(g[D]=I,g[D+1]=A,g[D+2]=U,g[D+3]=V);else if(N==3){if(V=h[R+3],I=h[R],A=h[R+1],U=h[R+2],W=g[D+3],T=g[D],M=g[D+1],j=g[D+2],V==W&&I==T&&A==M&&U==j)continue;if(V<220&&W>20)return!1}return!0}return{decode:function(f){const m=new Uint8Array(f);let g=8;const y=e,b=y.readUshort,S=y.readUint,v={tabs:{},frames:[]},N=new Uint8Array(m.length);let C,_=0,R=0;const D=[137,80,78,71,13,10,26,10];for(var V=0;V<8;V++)if(m[V]!=D[V])throw"The input is not a PNG file!";for(;g<m.length;){const P=y.readUint(m,g);g+=4;const L=y.readASCII(m,g,4);if(g+=4,L=="IHDR")u(m,g,v);else if(L=="iCCP"){for(var I=g;m[I]!=0;)I++;y.readASCII(m,g,I-g),m[I+1];const B=m.slice(I+2,g+P);let q=null;try{q=s(B)}catch{q=a(B)}v.tabs[L]=q}else if(L=="CgBI")v.tabs[L]=m.slice(g,g+4);else if(L=="IDAT"){for(V=0;V<P;V++)N[_+V]=m[g+V];_+=P}else if(L=="acTL")v.tabs[L]={num_frames:S(m,g),num_plays:S(m,g+4)},C=new Uint8Array(m.length);else if(L=="fcTL"){R!=0&&((j=v.frames[v.frames.length-1]).data=n(v,C.slice(0,R),j.rect.width,j.rect.height),R=0);const B={x:S(m,g+12),y:S(m,g+16),width:S(m,g+4),height:S(m,g+8)};let q=b(m,g+22);q=b(m,g+20)/(q==0?100:q);const G={rect:B,delay:Math.round(1e3*q),dispose:m[g+24],blend:m[g+25]};v.frames.push(G)}else if(L=="fdAT"){for(V=0;V<P-4;V++)C[R+V]=m[g+V+4];R+=P-4}else if(L=="pHYs")v.tabs[L]=[y.readUint(m,g),y.readUint(m,g+4),m[g+8]];else if(L=="cHRM")for(v.tabs[L]=[],V=0;V<8;V++)v.tabs[L].push(y.readUint(m,g+4*V));else if(L=="tEXt"||L=="zTXt"){v.tabs[L]==null&&(v.tabs[L]={});var A=y.nextZero(m,g),U=y.readASCII(m,g,A-g),W=g+P-A-1;if(L=="tEXt")M=y.readASCII(m,A+1,W);else{var T=s(m.slice(A+2,A+2+W));M=y.readUTF8(T,0,T.length)}v.tabs[L][U]=M}else if(L=="iTXt"){v.tabs[L]==null&&(v.tabs[L]={}),A=0,I=g,A=y.nextZero(m,I),U=y.readASCII(m,I,A-I);const B=m[I=A+1];var M;m[I+1],I+=2,A=y.nextZero(m,I),y.readASCII(m,I,A-I),I=A+1,A=y.nextZero(m,I),y.readUTF8(m,I,A-I),W=P-((I=A+1)-g),B==0?M=y.readUTF8(m,I,W):(T=s(m.slice(I,I+W)),M=y.readUTF8(T,0,T.length)),v.tabs[L][U]=M}else if(L=="PLTE")v.tabs[L]=y.readBytes(m,g,P);else if(L=="hIST"){const B=v.tabs.PLTE.length/3;for(v.tabs[L]=[],V=0;V<B;V++)v.tabs[L].push(b(m,g+2*V))}else if(L=="tRNS")v.ctype==3?v.tabs[L]=y.readBytes(m,g,P):v.ctype==0?v.tabs[L]=b(m,g):v.ctype==2&&(v.tabs[L]=[b(m,g),b(m,g+2),b(m,g+4)]);else if(L=="gAMA")v.tabs[L]=y.readUint(m,g)/1e5;else if(L=="sRGB")v.tabs[L]=m[g];else if(L=="bKGD")v.ctype==0||v.ctype==4?v.tabs[L]=[b(m,g)]:v.ctype==2||v.ctype==6?v.tabs[L]=[b(m,g),b(m,g+2),b(m,g+4)]:v.ctype==3&&(v.tabs[L]=m[g]);else if(L=="IEND")break;g+=P,y.readUint(m,g),g+=4}var j;return R!=0&&((j=v.frames[v.frames.length-1]).data=n(v,C.slice(0,R),j.rect.width,j.rect.height)),v.data=n(v,N,v.width,v.height),delete v.compress,delete v.interlace,delete v.filter,v},toRGBA8:function(f){const m=f.width,g=f.height;if(f.tabs.acTL==null)return[t(f.data,m,g,f).buffer];const y=[];f.frames[0].data==null&&(f.frames[0].data=f.data);const b=m*g*4,S=new Uint8Array(b),v=new Uint8Array(b),N=new Uint8Array(b);for(let _=0;_<f.frames.length;_++){const R=f.frames[_],D=R.rect.x,V=R.rect.y,I=R.rect.width,A=R.rect.height,U=t(R.data,I,A,f);if(_!=0)for(var C=0;C<b;C++)N[C]=S[C];if(R.blend==0?p(U,I,A,S,m,g,D,V,0):R.blend==1&&p(U,I,A,S,m,g,D,V,1),y.push(S.buffer.slice(0)),R.dispose!=0){if(R.dispose==1)p(v,I,A,S,m,g,D,V,0);else if(R.dispose==2)for(C=0;C<b;C++)S[C]=N[C]}}return y},_paeth:c,_copyTile:p,_bin:e}})();(function(){const{_copyTile:e}=Wr,{_bin:t}=Wr,n=Wr._paeth;var s={table:(function(){const I=new Uint32Array(256);for(let A=0;A<256;A++){let U=A;for(let W=0;W<8;W++)1&U?U=3988292384^U>>>1:U>>>=1;I[A]=U}return I})(),update(I,A,U,W){for(let T=0;T<W;T++)I=s.table[255&(I^A[U+T])]^I>>>8;return I},crc:(I,A,U)=>4294967295^s.update(4294967295,I,A,U)};function a(I,A,U,W){A[U]+=I[0]*W>>4,A[U+1]+=I[1]*W>>4,A[U+2]+=I[2]*W>>4,A[U+3]+=I[3]*W>>4}function i(I){return Math.max(0,Math.min(255,I))}function l(I,A){const U=I[0]-A[0],W=I[1]-A[1],T=I[2]-A[2],M=I[3]-A[3];return U*U+W*W+T*T+M*M}function c(I,A,U,W,T,M,j){j==null&&(j=1);const P=W.length,L=[];for(var B=0;B<P;B++){const Y=W[B];L.push([Y>>>0&255,Y>>>8&255,Y>>>16&255,Y>>>24&255])}for(B=0;B<P;B++){let Y=4294967295;for(var q=0,G=0;G<P;G++){var O=l(L[B],L[G]);G!=B&&O<Y&&(Y=O,q=G)}}const $=new Uint32Array(T.buffer),K=new Int16Array(A*U*4),H=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(B=0;B<H.length;B++)H[B]=255*((H[B]+.5)/16-.5);for(let Y=0;Y<U;Y++)for(let re=0;re<A;re++){var ee;B=4*(Y*A+re),j!=2?ee=[i(I[B]+K[B]),i(I[B+1]+K[B+1]),i(I[B+2]+K[B+2]),i(I[B+3]+K[B+3])]:(O=H[4*(3&Y)+(3&re)],ee=[i(I[B]+O),i(I[B+1]+O),i(I[B+2]+O),i(I[B+3]+O)]),q=0;let de=16777215;for(G=0;G<P;G++){const ye=l(ee,L[G]);ye<de&&(de=ye,q=G)}const X=L[q],oe=[ee[0]-X[0],ee[1]-X[1],ee[2]-X[2],ee[3]-X[3]];j==1&&(re!=A-1&&a(oe,K,B+4,7),Y!=U-1&&(re!=0&&a(oe,K,B+4*A-4,3),a(oe,K,B+4*A,5),re!=A-1&&a(oe,K,B+4*A+4,1))),M[B>>2]=q,$[B>>2]=W[q]}}function u(I,A,U,W,T){T==null&&(T={});const{crc:M}=s,j=t.writeUint,P=t.writeUshort,L=t.writeASCII;let B=8;const q=I.frames.length>1;let G,O=!1,$=33+(q?20:0);if(T.sRGB!=null&&($+=13),T.pHYs!=null&&($+=21),T.iCCP!=null&&(G=pako.deflate(T.iCCP),$+=21+G.length+4),I.ctype==3){for(var K=I.plte.length,H=0;H<K;H++)I.plte[H]>>>24!=255&&(O=!0);$+=8+3*K+4+(O?8+1*K+4:0)}for(var ee=0;ee<I.frames.length;ee++)q&&($+=38),$+=(X=I.frames[ee]).cimg.length+12,ee!=0&&($+=4);$+=12;const Y=new Uint8Array($),re=[137,80,78,71,13,10,26,10];for(H=0;H<8;H++)Y[H]=re[H];if(j(Y,B,13),B+=4,L(Y,B,"IHDR"),B+=4,j(Y,B,A),B+=4,j(Y,B,U),B+=4,Y[B]=I.depth,B++,Y[B]=I.ctype,B++,Y[B]=0,B++,Y[B]=0,B++,Y[B]=0,B++,j(Y,B,M(Y,B-17,17)),B+=4,T.sRGB!=null&&(j(Y,B,1),B+=4,L(Y,B,"sRGB"),B+=4,Y[B]=T.sRGB,B++,j(Y,B,M(Y,B-5,5)),B+=4),T.iCCP!=null){const oe=13+G.length;j(Y,B,oe),B+=4,L(Y,B,"iCCP"),B+=4,L(Y,B,"ICC profile"),B+=11,B+=2,Y.set(G,B),B+=G.length,j(Y,B,M(Y,B-(oe+4),oe+4)),B+=4}if(T.pHYs!=null&&(j(Y,B,9),B+=4,L(Y,B,"pHYs"),B+=4,j(Y,B,T.pHYs[0]),B+=4,j(Y,B,T.pHYs[1]),B+=4,Y[B]=T.pHYs[2],B++,j(Y,B,M(Y,B-13,13)),B+=4),q&&(j(Y,B,8),B+=4,L(Y,B,"acTL"),B+=4,j(Y,B,I.frames.length),B+=4,j(Y,B,T.loop!=null?T.loop:0),B+=4,j(Y,B,M(Y,B-12,12)),B+=4),I.ctype==3){for(j(Y,B,3*(K=I.plte.length)),B+=4,L(Y,B,"PLTE"),B+=4,H=0;H<K;H++){const oe=3*H,ye=I.plte[H],be=255&ye,Ie=ye>>>8&255,De=ye>>>16&255;Y[B+oe+0]=be,Y[B+oe+1]=Ie,Y[B+oe+2]=De}if(B+=3*K,j(Y,B,M(Y,B-3*K-4,3*K+4)),B+=4,O){for(j(Y,B,K),B+=4,L(Y,B,"tRNS"),B+=4,H=0;H<K;H++)Y[B+H]=I.plte[H]>>>24&255;B+=K,j(Y,B,M(Y,B-K-4,K+4)),B+=4}}let de=0;for(ee=0;ee<I.frames.length;ee++){var X=I.frames[ee];q&&(j(Y,B,26),B+=4,L(Y,B,"fcTL"),B+=4,j(Y,B,de++),B+=4,j(Y,B,X.rect.width),B+=4,j(Y,B,X.rect.height),B+=4,j(Y,B,X.rect.x),B+=4,j(Y,B,X.rect.y),B+=4,P(Y,B,W[ee]),B+=2,P(Y,B,1e3),B+=2,Y[B]=X.dispose,B++,Y[B]=X.blend,B++,j(Y,B,M(Y,B-30,30)),B+=4);const oe=X.cimg;j(Y,B,(K=oe.length)+(ee==0?0:4)),B+=4;const ye=B;L(Y,B,ee==0?"IDAT":"fdAT"),B+=4,ee!=0&&(j(Y,B,de++),B+=4),Y.set(oe,B),B+=K,j(Y,B,M(Y,ye,B-ye)),B+=4}return j(Y,B,0),B+=4,L(Y,B,"IEND"),B+=4,j(Y,B,M(Y,B-4,4)),B+=4,Y.buffer}function p(I,A,U){for(let W=0;W<I.frames.length;W++){const T=I.frames[W];T.rect.width;const M=T.rect.height,j=new Uint8Array(M*T.bpl+M);T.cimg=g(T.img,M,T.bpp,T.bpl,j,A,U)}}function h(I,A,U,W,T){const M=T[0],j=T[1],P=T[2],L=T[3],B=T[4],q=T[5];let G=6,O=8,$=255;for(var K=0;K<I.length;K++){const Z=new Uint8Array(I[K]);for(var H=Z.length,ee=0;ee<H;ee+=4)$&=Z[ee+3]}const Y=$!=255,re=(function(te,ne,ae,we,Ce,ue){const pe=[];for(var je=0;je<te.length;je++){const Ye=new Uint8Array(te[je]),nt=new Uint32Array(Ye.buffer);var Ne;let ce=0,Te=0,Me=ne,Oe=ae,Ke=we?1:0;if(je!=0){const Ze=ue||we||je==1||pe[je-2].dispose!=0?1:2;let pt=0,ht=1e9;for(let jt=0;jt<Ze;jt++){var he=new Uint8Array(te[je-1-jt]);const Ht=new Uint32Array(te[je-1-jt]);let Lt=ne,Kt=ae,it=-1,Pt=-1;for(let kt=0;kt<ae;kt++)for(let gn=0;gn<ne;gn++)nt[Re=kt*ne+gn]!=Ht[Re]&&(gn<Lt&&(Lt=gn),gn>it&&(it=gn),kt<Kt&&(Kt=kt),kt>Pt&&(Pt=kt));it==-1&&(Lt=Kt=it=Pt=0),Ce&&((1&Lt)==1&&Lt--,(1&Kt)==1&&Kt--);const Ot=(it-Lt+1)*(Pt-Kt+1);Ot<ht&&(ht=Ot,pt=jt,ce=Lt,Te=Kt,Me=it-Lt+1,Oe=Pt-Kt+1)}he=new Uint8Array(te[je-1-pt]),pt==1&&(pe[je-1].dispose=2),Ne=new Uint8Array(Me*Oe*4),e(he,ne,ae,Ne,Me,Oe,-ce,-Te,0),Ke=e(Ye,ne,ae,Ne,Me,Oe,-ce,-Te,3)?1:0,Ke==1?m(Ye,ne,ae,Ne,{x:ce,y:Te,width:Me,height:Oe}):e(Ye,ne,ae,Ne,Me,Oe,-ce,-Te,0)}else Ne=Ye.slice(0);pe.push({rect:{x:ce,y:Te,width:Me,height:Oe},img:Ne,blend:Ke,dispose:0})}if(we)for(je=0;je<pe.length;je++){if((qe=pe[je]).blend==1)continue;const Ye=qe.rect,nt=pe[je-1].rect,ce=Math.min(Ye.x,nt.x),Te=Math.min(Ye.y,nt.y),Me={x:ce,y:Te,width:Math.max(Ye.x+Ye.width,nt.x+nt.width)-ce,height:Math.max(Ye.y+Ye.height,nt.y+nt.height)-Te};pe[je-1].dispose=1,je-1!=0&&f(te,ne,ae,pe,je-1,Me,Ce),f(te,ne,ae,pe,je,Me,Ce)}let Ee=0;if(te.length!=1)for(var Re=0;Re<pe.length;Re++){var qe;Ee+=(qe=pe[Re]).rect.width*qe.rect.height}return pe})(I,A,U,M,j,P),de={},X=[],oe=[];if(W!=0){const Z=[];for(ee=0;ee<re.length;ee++)Z.push(re[ee].img.buffer);const te=(function(Ce){let ue=0;for(var pe=0;pe<Ce.length;pe++)ue+=Ce[pe].byteLength;const je=new Uint8Array(ue);let Ne=0;for(pe=0;pe<Ce.length;pe++){const he=new Uint8Array(Ce[pe]),Ee=he.length;for(let Re=0;Re<Ee;Re+=4){let qe=he[Re],Ye=he[Re+1],nt=he[Re+2];const ce=he[Re+3];ce==0&&(qe=Ye=nt=0),je[Ne+Re]=qe,je[Ne+Re+1]=Ye,je[Ne+Re+2]=nt,je[Ne+Re+3]=ce}Ne+=Ee}return je.buffer})(Z),ne=b(te,W);for(ee=0;ee<ne.plte.length;ee++)X.push(ne.plte[ee].est.rgba);let ae=0;for(ee=0;ee<re.length;ee++){const we=(be=re[ee]).img.length;var ye=new Uint8Array(ne.inds.buffer,ae>>2,we>>2);oe.push(ye);const Ce=new Uint8Array(ne.abuf,ae,we);q&&c(be.img,be.rect.width,be.rect.height,X,Ce,ye),be.img.set(Ce),ae+=we}}else for(K=0;K<re.length;K++){var be=re[K];const Z=new Uint32Array(be.img.buffer);var Ie=be.rect.width;for(H=Z.length,ye=new Uint8Array(H),oe.push(ye),ee=0;ee<H;ee++){const te=Z[ee];if(ee!=0&&te==Z[ee-1])ye[ee]=ye[ee-1];else if(ee>Ie&&te==Z[ee-Ie])ye[ee]=ye[ee-Ie];else{let ne=de[te];if(ne==null&&(de[te]=ne=X.length,X.push(te),X.length>=300))break;ye[ee]=ne}}}const De=X.length;for(De<=256&&B==0&&(O=De<=2?1:De<=4?2:De<=16?4:8,O=Math.max(O,L)),K=0;K<re.length;K++){(be=re[K]).rect.x,be.rect.y,Ie=be.rect.width;const Z=be.rect.height;let te=be.img;new Uint32Array(te.buffer);let ne=4*Ie,ae=4;if(De<=256&&B==0){ne=Math.ceil(O*Ie/8);var F=new Uint8Array(ne*Z);const we=oe[K];for(let Ce=0;Ce<Z;Ce++){ee=Ce*ne;const ue=Ce*Ie;if(O==8)for(var le=0;le<Ie;le++)F[ee+le]=we[ue+le];else if(O==4)for(le=0;le<Ie;le++)F[ee+(le>>1)]|=we[ue+le]<<4-4*(1&le);else if(O==2)for(le=0;le<Ie;le++)F[ee+(le>>2)]|=we[ue+le]<<6-2*(3&le);else if(O==1)for(le=0;le<Ie;le++)F[ee+(le>>3)]|=we[ue+le]<<7-1*(7&le)}te=F,G=3,ae=1}else if(Y==0&&re.length==1){F=new Uint8Array(Ie*Z*3);const we=Ie*Z;for(ee=0;ee<we;ee++){const Ce=3*ee,ue=4*ee;F[Ce]=te[ue],F[Ce+1]=te[ue+1],F[Ce+2]=te[ue+2]}te=F,G=2,ae=3,ne=3*Ie}be.img=te,be.bpl=ne,be.bpp=ae}return{ctype:G,depth:O,plte:X,frames:re}}function f(I,A,U,W,T,M,j){const P=Uint8Array,L=Uint32Array,B=new P(I[T-1]),q=new L(I[T-1]),G=T+1<I.length?new P(I[T+1]):null,O=new P(I[T]),$=new L(O.buffer);let K=A,H=U,ee=-1,Y=-1;for(let de=0;de<M.height;de++)for(let X=0;X<M.width;X++){const oe=M.x+X,ye=M.y+de,be=ye*A+oe,Ie=$[be];Ie==0||W[T-1].dispose==0&&q[be]==Ie&&(G==null||G[4*be+3]!=0)||(oe<K&&(K=oe),oe>ee&&(ee=oe),ye<H&&(H=ye),ye>Y&&(Y=ye))}ee==-1&&(K=H=ee=Y=0),j&&((1&K)==1&&K--,(1&H)==1&&H--),M={x:K,y:H,width:ee-K+1,height:Y-H+1};const re=W[T];re.rect=M,re.blend=1,re.img=new Uint8Array(M.width*M.height*4),W[T-1].dispose==0?(e(B,A,U,re.img,M.width,M.height,-M.x,-M.y,0),m(O,A,U,re.img,M)):e(O,A,U,re.img,M.width,M.height,-M.x,-M.y,0)}function m(I,A,U,W,T){e(I,A,U,W,T.width,T.height,-T.x,-T.y,2)}function g(I,A,U,W,T,M,j){const P=[];let L,B=[0,1,2,3,4];M!=-1?B=[M]:(A*W>5e5||U==1)&&(B=[0]),j&&(L={level:0});const q=UD;for(var G=0;G<B.length;G++){for(let K=0;K<A;K++)y(T,I,K,W,U,B[G]);P.push(q.deflate(T,L))}let O,$=1e9;for(G=0;G<P.length;G++)P[G].length<$&&(O=G,$=P[G].length);return P[O]}function y(I,A,U,W,T,M){const j=U*W;let P=j+U;if(I[P]=M,P++,M==0)if(W<500)for(var L=0;L<W;L++)I[P+L]=A[j+L];else I.set(new Uint8Array(A.buffer,j,W),P);else if(M==1){for(L=0;L<T;L++)I[P+L]=A[j+L];for(L=T;L<W;L++)I[P+L]=A[j+L]-A[j+L-T]+256&255}else if(U==0){for(L=0;L<T;L++)I[P+L]=A[j+L];if(M==2)for(L=T;L<W;L++)I[P+L]=A[j+L];if(M==3)for(L=T;L<W;L++)I[P+L]=A[j+L]-(A[j+L-T]>>1)+256&255;if(M==4)for(L=T;L<W;L++)I[P+L]=A[j+L]-n(A[j+L-T],0,0)+256&255}else{if(M==2)for(L=0;L<W;L++)I[P+L]=A[j+L]+256-A[j+L-W]&255;if(M==3){for(L=0;L<T;L++)I[P+L]=A[j+L]+256-(A[j+L-W]>>1)&255;for(L=T;L<W;L++)I[P+L]=A[j+L]+256-(A[j+L-W]+A[j+L-T]>>1)&255}if(M==4){for(L=0;L<T;L++)I[P+L]=A[j+L]+256-n(0,A[j+L-W],0)&255;for(L=T;L<W;L++)I[P+L]=A[j+L]+256-n(A[j+L-T],A[j+L-W],A[j+L-T-W])&255}}}function b(I,A){const U=new Uint8Array(I),W=U.slice(0),T=new Uint32Array(W.buffer),M=S(W,A),j=M[0],P=M[1],L=U.length,B=new Uint8Array(L>>2);let q;if(U.length<2e7)for(var G=0;G<L;G+=4)q=v(j,O=U[G]*(1/255),$=U[G+1]*(1/255),K=U[G+2]*(1/255),H=U[G+3]*(1/255)),B[G>>2]=q.ind,T[G>>2]=q.est.rgba;else for(G=0;G<L;G+=4){var O=U[G]*.00392156862745098,$=U[G+1]*(1/255),K=U[G+2]*(1/255),H=U[G+3]*(1/255);for(q=j;q.left;)q=N(q.est,O,$,K,H)<=0?q.left:q.right;B[G>>2]=q.ind,T[G>>2]=q.est.rgba}return{abuf:W.buffer,inds:B,plte:P}}function S(I,A,U){U==null&&(U=1e-4);const W=new Uint32Array(I.buffer),T={i0:0,i1:I.length,bst:null,est:null,tdst:0,left:null,right:null};T.bst=R(I,T.i0,T.i1),T.est=D(T.bst);const M=[T];for(;M.length<A;){let P=0,L=0;for(var j=0;j<M.length;j++)M[j].est.L>P&&(P=M[j].est.L,L=j);if(P<U)break;const B=M[L],q=C(I,W,B.i0,B.i1,B.est.e,B.est.eMq255);if(B.i0>=q||B.i1<=q){B.est.L=0;continue}const G={i0:B.i0,i1:q,bst:null,est:null,tdst:0,left:null,right:null};G.bst=R(I,G.i0,G.i1),G.est=D(G.bst);const O={i0:q,i1:B.i1,bst:null,est:null,tdst:0,left:null,right:null};for(O.bst={R:[],m:[],N:B.bst.N-G.bst.N},j=0;j<16;j++)O.bst.R[j]=B.bst.R[j]-G.bst.R[j];for(j=0;j<4;j++)O.bst.m[j]=B.bst.m[j]-G.bst.m[j];O.est=D(O.bst),B.left=G,B.right=O,M[L]=G,M.push(O)}for(M.sort(((P,L)=>L.bst.N-P.bst.N)),j=0;j<M.length;j++)M[j].ind=j;return[T,M]}function v(I,A,U,W,T){if(I.left==null)return I.tdst=(function(G,O,$,K,H){const ee=O-G[0],Y=$-G[1],re=K-G[2],de=H-G[3];return ee*ee+Y*Y+re*re+de*de})(I.est.q,A,U,W,T),I;const M=N(I.est,A,U,W,T);let j=I.left,P=I.right;M>0&&(j=I.right,P=I.left);const L=v(j,A,U,W,T);if(L.tdst<=M*M)return L;const B=v(P,A,U,W,T);return B.tdst<L.tdst?B:L}function N(I,A,U,W,T){const{e:M}=I;return M[0]*A+M[1]*U+M[2]*W+M[3]*T-I.eMq}function C(I,A,U,W,T,M){for(W-=4;U<W;){for(;_(I,U,T)<=M;)U+=4;for(;_(I,W,T)>M;)W-=4;if(U>=W)break;const j=A[U>>2];A[U>>2]=A[W>>2],A[W>>2]=j,U+=4,W-=4}for(;_(I,U,T)>M;)U-=4;return U+4}function _(I,A,U){return I[A]*U[0]+I[A+1]*U[1]+I[A+2]*U[2]+I[A+3]*U[3]}function R(I,A,U){const W=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T=[0,0,0,0],M=U-A>>2;for(let j=A;j<U;j+=4){const P=I[j]*.00392156862745098,L=I[j+1]*(1/255),B=I[j+2]*(1/255),q=I[j+3]*(1/255);T[0]+=P,T[1]+=L,T[2]+=B,T[3]+=q,W[0]+=P*P,W[1]+=P*L,W[2]+=P*B,W[3]+=P*q,W[5]+=L*L,W[6]+=L*B,W[7]+=L*q,W[10]+=B*B,W[11]+=B*q,W[15]+=q*q}return W[4]=W[1],W[8]=W[2],W[9]=W[6],W[12]=W[3],W[13]=W[7],W[14]=W[11],{R:W,m:T,N:M}}function D(I){const{R:A}=I,{m:U}=I,{N:W}=I,T=U[0],M=U[1],j=U[2],P=U[3],L=W==0?0:1/W,B=[A[0]-T*T*L,A[1]-T*M*L,A[2]-T*j*L,A[3]-T*P*L,A[4]-M*T*L,A[5]-M*M*L,A[6]-M*j*L,A[7]-M*P*L,A[8]-j*T*L,A[9]-j*M*L,A[10]-j*j*L,A[11]-j*P*L,A[12]-P*T*L,A[13]-P*M*L,A[14]-P*j*L,A[15]-P*P*L],q=B,G=V;let O=[Math.random(),Math.random(),Math.random(),Math.random()],$=0,K=0;if(W!=0)for(let ee=0;ee<16&&(O=G.multVec(q,O),K=Math.sqrt(G.dot(O,O)),O=G.sml(1/K,O),!(ee!=0&&Math.abs(K-$)<1e-9));ee++)$=K;const H=[T*L,M*L,j*L,P*L];return{Cov:B,q:H,e:O,L:$,eMq255:G.dot(G.sml(255,H),O),eMq:G.dot(O,H),rgba:(Math.round(255*H[3])<<24|Math.round(255*H[2])<<16|Math.round(255*H[1])<<8|Math.round(255*H[0])<<0)>>>0}}var V={multVec:(I,A)=>[I[0]*A[0]+I[1]*A[1]+I[2]*A[2]+I[3]*A[3],I[4]*A[0]+I[5]*A[1]+I[6]*A[2]+I[7]*A[3],I[8]*A[0]+I[9]*A[1]+I[10]*A[2]+I[11]*A[3],I[12]*A[0]+I[13]*A[1]+I[14]*A[2]+I[15]*A[3]],dot:(I,A)=>I[0]*A[0]+I[1]*A[1]+I[2]*A[2]+I[3]*A[3],sml:(I,A)=>[I*A[0],I*A[1],I*A[2],I*A[3]]};Wr.encode=function(A,U,W,T,M,j,P){T==null&&(T=0),P==null&&(P=!1);const L=h(A,U,W,T,[!1,!1,!1,0,P,!1]);return p(L,-1),u(L,U,W,M,j)},Wr.encodeLL=function(A,U,W,T,M,j,P,L){const B={ctype:0+(T==1?0:2)+(M==0?0:4),depth:j,frames:[]},q=(T+M)*j,G=q*U;for(let O=0;O<A.length;O++)B.frames.push({rect:{x:0,y:0,width:U,height:W},img:new Uint8Array(A[O]),blend:0,dispose:1,bpp:Math.ceil(q/8),bpl:Math.ceil(G/8)});return p(B,0,!0),u(B,U,W,P,L)},Wr.encode.compress=h,Wr.encode.dither=c,Wr.quantize=b,Wr.quantize.getKDtree=S,Wr.quantize.getNearest=v})();const x5={toArrayBuffer(e,t){const n=e.width,s=e.height,a=n<<2,i=e.getContext("2d").getImageData(0,0,n,s),l=new Uint32Array(i.data.buffer),c=(32*n+31)/32<<2,u=c*s,p=122+u,h=new ArrayBuffer(p),f=new DataView(h),m=1<<20;let g,y,b,S,v=m,N=0,C=0,_=0;function R(I){f.setUint16(C,I,!0),C+=2}function D(I){f.setUint32(C,I,!0),C+=4}function V(I){C+=I}R(19778),D(p),V(4),D(122),D(108),D(n),D(-s>>>0),R(1),R(32),D(3),D(u),D(2835),D(2835),V(8),D(16711680),D(65280),D(255),D(4278190080),D(1466527264),(function I(){for(;N<s&&v>0;){for(S=122+N*c,g=0;g<a;)v--,y=l[_++],b=y>>>24,f.setUint32(S+g,y<<8|b),g+=4;N++}_<l.length?(v=m,setTimeout(I,x5._dly)):t(h)})()},toBlob(e,t){this.toArrayBuffer(e,(n=>{t(new Blob([n],{type:"image/bmp"}))}))},_dly:9};var lr={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},WD={[lr.CHROME]:16384,[lr.FIREFOX]:11180,[lr.DESKTOP_SAFARI]:16384,[lr.IE]:8192,[lr.IOS]:4096,[lr.ETC]:8192};const Xm=typeof window<"u",g5=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Ld=Xm&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),KD=(Xm||g5)&&(Ld&&Ld.getOriginalSymbol(window,"File")||typeof File<"u"&&File),b5=(Xm||g5)&&(Ld&&Ld.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Jm(e,t,n=Date.now()){return new Promise((s=>{const a=e.split(","),i=a[0].match(/:(.*?);/)[1],l=globalThis.atob(a[1]);let c=l.length;const u=new Uint8Array(c);for(;c--;)u[c]=l.charCodeAt(c);const p=new Blob([u],{type:i});p.name=t,p.lastModified=n,s(p)}))}function y5(e){return new Promise(((t,n)=>{const s=new b5;s.onload=()=>t(s.result),s.onerror=a=>n(a),s.readAsDataURL(e)}))}function v5(e){return new Promise(((t,n)=>{const s=new Image;s.onload=()=>t(s),s.onerror=a=>n(a),s.src=e}))}function Ha(){if(Ha.cachedResult!==void 0)return Ha.cachedResult;let e=lr.ETC;const{userAgent:t}=navigator;return/Chrom(e|ium)/i.test(t)?e=lr.CHROME:/iP(ad|od|hone)/i.test(t)&&/WebKit/i.test(t)?e=lr.IOS:/Safari/i.test(t)?e=lr.DESKTOP_SAFARI:/Firefox/i.test(t)?e=lr.FIREFOX:(/MSIE/i.test(t)||document.documentMode)&&(e=lr.IE),Ha.cachedResult=e,Ha.cachedResult}function w5(e,t){const n=Ha(),s=WD[n];let a=e,i=t,l=a*i;const c=a>i?i/a:a/i;for(;l>s*s;){const u=(s+a)/2,p=(s+i)/2;u<p?(i=p,a=p*c):(i=u*c,a=u),l=a*i}return{width:a,height:i}}function lu(e,t){let n,s;try{if(n=new OffscreenCanvas(e,t),s=n.getContext("2d"),s===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),s=n.getContext("2d")}return n.width=e,n.height=t,[n,s]}function k5(e,t){const{width:n,height:s}=w5(e.width,e.height),[a,i]=lu(n,s);return t&&/jpe?g/.test(t)&&(i.fillStyle="white",i.fillRect(0,0,a.width,a.height)),i.drawImage(e,0,0,a.width,a.height),a}function yd(){return yd.cachedResult!==void 0||(yd.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),yd.cachedResult}function Od(e,t={}){return new Promise((function(n,s){let a,i;var l=function(){try{return i=k5(a,t.fileType||e.type),n([a,i])}catch(u){return s(u)}},c=function(u){try{var p=function(h){try{throw h}catch(f){return s(f)}};try{let h;return y5(e).then((function(f){try{return h=f,v5(h).then((function(m){try{return a=m,(function(){try{return l()}catch(g){return s(g)}})()}catch(g){return p(g)}}),p)}catch(m){return p(m)}}),p)}catch(h){p(h)}}catch(h){return s(h)}};try{if(yd()||[lr.DESKTOP_SAFARI,lr.MOBILE_SAFARI].includes(Ha()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then((function(u){try{return a=u,l()}catch{return c()}}),c)}catch{c()}}))}function $d(e,t,n,s,a=1){return new Promise((function(i,l){let c;if(t==="image/png"){let f,m,g;return f=e.getContext("2d"),{data:m}=f.getImageData(0,0,e.width,e.height),g=Wr.encode([m.buffer],e.width,e.height,4096*a),c=new Blob([g],{type:t}),c.name=n,c.lastModified=s,u.call(this)}{let f=function(){return u.call(this)};var p=f;if(t==="image/bmp")return new Promise((m=>x5.toBlob(e,m))).then(function(m){try{return c=m,c.name=n,c.lastModified=s,f.call(this)}catch(g){return l(g)}}.bind(this),l);{let m=function(){return f.call(this)};var h=m;if(typeof OffscreenCanvas=="function"&&e instanceof OffscreenCanvas)return e.convertToBlob({type:t,quality:a}).then(function(g){try{return c=g,c.name=n,c.lastModified=s,m.call(this)}catch(y){return l(y)}}.bind(this),l);{let g;return g=e.toDataURL(t,a),Jm(g,n,s).then(function(y){try{return c=y,m.call(this)}catch(b){return l(b)}}.bind(this),l)}}}function u(){return i(c)}}))}function ls(e){e.width=0,e.height=0}function Wi(){return new Promise((function(e,t){let n,s,a,i;return Wi.cachedResult!==void 0?e(Wi.cachedResult):Jm("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(l){try{return n=l,Od(n).then((function(c){try{return s=c[1],$d(s,n.type,n.name,n.lastModified).then((function(u){try{return a=u,ls(s),Od(a).then((function(p){try{return i=p[0],Wi.cachedResult=i.width===1&&i.height===2,e(Wi.cachedResult)}catch(h){return t(h)}}),t)}catch(p){return t(p)}}),t)}catch(u){return t(u)}}),t)}catch(c){return t(c)}}),t)}))}function S5(e){return new Promise(((t,n)=>{const s=new b5;s.onload=a=>{const i=new DataView(a.target.result);if(i.getUint16(0,!1)!=65496)return t(-2);const l=i.byteLength;let c=2;for(;c<l;){if(i.getUint16(c+2,!1)<=8)return t(-1);const u=i.getUint16(c,!1);if(c+=2,u==65505){if(i.getUint32(c+=2,!1)!=1165519206)return t(-1);const p=i.getUint16(c+=6,!1)==18761;c+=i.getUint32(c+4,p);const h=i.getUint16(c,p);c+=2;for(let f=0;f<h;f++)if(i.getUint16(c+12*f,p)==274)return t(i.getUint16(c+12*f+8,p))}else{if((65280&u)!=65280)break;c+=i.getUint16(c,!1)}}return t(-1)},s.onerror=a=>n(a),s.readAsArrayBuffer(e)}))}function j5(e,t){const{width:n}=e,{height:s}=e,{maxWidthOrHeight:a}=t;let i,l=e;return isFinite(a)&&(n>a||s>a)&&([l,i]=lu(n,s),n>s?(l.width=a,l.height=s/n*a):(l.width=n/s*a,l.height=a),i.drawImage(e,0,0,l.width,l.height),ls(e)),l}function C5(e,t){const{width:n}=e,{height:s}=e,[a,i]=lu(n,s);switch(t>4&&t<9?(a.width=s,a.height=n):(a.width=n,a.height=s),t){case 2:i.transform(-1,0,0,1,n,0);break;case 3:i.transform(-1,0,0,-1,n,s);break;case 4:i.transform(1,0,0,-1,0,s);break;case 5:i.transform(0,1,1,0,0,0);break;case 6:i.transform(0,1,-1,0,s,0);break;case 7:i.transform(0,-1,-1,0,s,n);break;case 8:i.transform(0,-1,1,0,0,n)}return i.drawImage(e,0,0,n,s),ls(e),a}function Ob(e,t,n=0){return new Promise((function(s,a){let i,l,c,u,p,h,f,m,g,y,b,S,v,N,C,_,R,D,V,I;function A(W=5){if(t.signal&&t.signal.aborted)throw t.signal.reason;i+=W,t.onProgress(Math.min(i,100))}function U(W){if(t.signal&&t.signal.aborted)throw t.signal.reason;i=Math.min(Math.max(W,i),100),t.onProgress(i)}return i=n,l=t.maxIteration||10,c=1024*t.maxSizeMB*1024,A(),Od(e,t).then(function(W){try{return[,u]=W,A(),p=j5(u,t),A(),new Promise((function(T,M){var j;if(!(j=t.exifOrientation))return S5(e).then(function(L){try{return j=L,P.call(this)}catch(B){return M(B)}}.bind(this),M);function P(){return T(j)}return P.call(this)})).then(function(T){try{return h=T,A(),Wi().then(function(M){try{return f=M?p:C5(p,h),A(),m=t.initialQuality||1,g=t.fileType||e.type,$d(f,g,e.name,e.lastModified,m).then(function(j){try{{let q=function(){if(l--&&(C>c||C>v)){let O,$;return O=I?.95*V.width:V.width,$=I?.95*V.height:V.height,[R,D]=lu(O,$),D.drawImage(V,0,0,O,$),m*=g==="image/png"?.85:.95,$d(R,g,e.name,e.lastModified,m).then((function(K){try{return _=K,ls(V),V=R,C=_.size,U(Math.min(99,Math.floor((N-C)/(N-c)*100))),q}catch(H){return a(H)}}),a)}return[1]},G=function(){return ls(V),ls(R),ls(p),ls(f),ls(u),U(100),s(_)};var L=q,B=G;if(y=j,A(),b=y.size>c,S=y.size>e.size,!b&&!S)return U(100),s(y);var P;return v=e.size,N=y.size,C=N,V=f,I=!t.alwaysKeepResolution&&b,(P=function(O){for(;O;){if(O.then)return void O.then(P,a);try{if(O.pop){if(O.length)return O.pop()?G.call(this):O;O=q}else O=O.call(this)}catch($){return a($)}}}.bind(this))(q)}}catch(q){return a(q)}}.bind(this),a)}catch(j){return a(j)}}.bind(this),a)}catch(M){return a(M)}}.bind(this),a)}catch(T){return a(T)}}.bind(this),a)}))}const qD=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let _h;function GD(e,t){return new Promise(((n,s)=>{_h||(_h=(function(l){const c=[];return c.push(l),URL.createObjectURL(new Blob(c))})(qD));const a=new Worker(_h);a.addEventListener("message",(function(l){if(t.signal&&t.signal.aborted)a.terminate();else if(l.data.progress===void 0){if(l.data.error)return s(new Error(l.data.error)),void a.terminate();n(l.data.file),a.terminate()}else t.onProgress(l.data.progress)})),a.addEventListener("error",s),t.signal&&t.signal.addEventListener("abort",(()=>{s(t.signal.reason),a.terminate()})),a.postMessage({file:e,imageCompressionLibUrl:t.libURL,options:{...t,onProgress:void 0,signal:void 0}})}))}function Vn(e,t){return new Promise((function(n,s){let a,i,l,c,u,p;if(a={...t},l=0,{onProgress:c}=a,a.maxSizeMB=a.maxSizeMB||Number.POSITIVE_INFINITY,u=typeof a.useWebWorker!="boolean"||a.useWebWorker,delete a.useWebWorker,a.onProgress=g=>{l=g,typeof c=="function"&&c(l)},!(e instanceof Blob||e instanceof KD))return s(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return s(new Error("The file given is not an image"));if(p=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!u||typeof Worker!="function"||p)return Ob(e,a).then(function(g){try{return i=g,m.call(this)}catch(y){return s(y)}}.bind(this),s);var h=function(){try{return m.call(this)}catch(g){return s(g)}}.bind(this),f=function(g){try{return Ob(e,a).then((function(y){try{return i=y,h()}catch(b){return s(b)}}),s)}catch(y){return s(y)}};try{return a.libURL=a.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",GD(e,a).then((function(g){try{return i=g,h()}catch{return f()}}),f)}catch{f()}function m(){try{i.name=e.name,i.lastModified=e.lastModified}catch{}try{a.preserveExif&&e.type==="image/jpeg"&&(!a.fileType||a.fileType&&a.fileType===e.type)&&(i=m5(e,i))}catch{}return n(i)}}))}Vn.getDataUrlFromFile=y5,Vn.getFilefromDataUrl=Jm,Vn.loadImage=v5,Vn.drawImageInCanvas=k5,Vn.drawFileInCanvas=Od,Vn.canvasToFile=$d,Vn.getExifOrientation=S5,Vn.handleMaxWidthOrHeight=j5,Vn.followExifOrientation=C5,Vn.cleanupCanvasMemory=ls,Vn.isAutoOrientationInBrowser=Wi,Vn.approximateBelowMaximumCanvasSizeOfBrowser=w5,Vn.copyExifWithoutOrientation=m5,Vn.getBrowserName=Ha,Vn.version="2.0.2";const $b=[{id:"desktop1-chat",name:"",location:""},{id:"desktop1-forum",name:"",location:""},{id:"desktop1-memory",name:"",location:""},{id:"desktop1-transfer",name:"",location:""},{id:"desktop2-shop",name:"",location:""},{id:"desktop2-game",name:"",location:""},{id:"desktop2-schedule",name:"",location:""},{id:"desktop2-health",name:"",location:""},{id:"bottom-organization",name:"",location:""},{id:"bottom-worldbook",name:"",location:""},{id:"bottom-settings",name:"",location:""}];function YD({onBack:e}){const[t,n]=k.useState(null),[s,a]=k.useState(!1),[i,l]=k.useState("light"),[c,u]=k.useState({}),[p,h]=k.useState(!1),f=k.useRef(null),m=k.useRef({});k.useEffect(()=>{(async()=>{try{const R=await se.get(J.MISC,"desktop_wallpaper"),D=await se.get(J.APPEARANCE,"desktop_color_mode")||"light";if(R)if(R.startsWith("data:"))n(R);else{const I=await Ct(R);n(I)}l(D);const V={};for(const I of $b){const A=await Ct(`system-icon-${I.id}`);A&&(V[I.id]=A)}u(V)}catch(R){console.error("Failed to load settings:",R)}})()},[]);const g=async _=>{l(_),await se.set(J.APPEARANCE,"desktop_color_mode",_),window.dispatchEvent(new CustomEvent("colorModeChange",{detail:_}))},y=()=>{f.current?.click()},b=async _=>{const R=_.target.files?.[0];if(R)try{const D=await wr("desktop-wallpaper",R);n(D),await se.set(J.MISC,"desktop_wallpaper","desktop-wallpaper"),a(!0),setTimeout(()=>a(!1),2e3),window.dispatchEvent(new CustomEvent("wallpaperChange",{detail:D}))}catch(D){console.error("Failed to save wallpaper:",D)}},S=async _=>{_.stopPropagation(),n(null),await se.delete(J.MISC,"desktop_wallpaper"),await fa("desktop-wallpaper"),a(!0),setTimeout(()=>a(!1),2e3),window.dispatchEvent(new CustomEvent("wallpaperChange",{detail:null}))},v=_=>{m.current[_]?.click()},N=async(_,R)=>{const D=R.target.files?.[0];if(D)try{const I=await Vn(D,{maxSizeMB:.5,maxWidthOrHeight:512,useWebWorker:!0}),A=await wr(`system-icon-${_}`,I);u(U=>({...U,[_]:A})),h(!0),setTimeout(()=>h(!1),2e3),window.dispatchEvent(new CustomEvent("iconChange",{detail:{iconId:_,url:A}}))}catch(V){console.error("Failed to save icon:",V)}},C=async(_,R)=>{R.stopPropagation();try{await fa(`system-icon-${_}`),u(D=>({...D,[_]:null})),h(!0),setTimeout(()=>h(!1),2e3),window.dispatchEvent(new CustomEvent("iconChange",{detail:{iconId:_,url:null}}))}catch(D){console.error("Failed to reset icon:",D)}};return r.jsxs(iu,{title:"",onBack:e,children:[r.jsxs("div",{className:"space-y-6 text-slate-800",children:[r.jsx(Be,{children:(s||p)&&r.jsx(me.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"fixed top-24 left-0 right-0 flex justify-center z-[60] pointer-events-none px-4",children:r.jsxs("div",{className:"bg-slate-800 text-white px-6 py-3 border border-slate-700 shadow-xl flex items-center gap-3 backdrop-blur-md",children:[r.jsx(Et,{className:"w-4 h-4 text-green-400",strokeWidth:3}),r.jsx("span",{className:"text-xs font-bold tracking-wider uppercase",children:s?"WALLPAPER_UPDATED":"ICON_CACHE_REFRESHED"})]})})}),r.jsxs("section",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:[r.jsx(s9,{className:"w-3 h-3"})," "]}),r.jsx("div",{className:"grid grid-cols-2 gap-3 bg-white p-2 border border-slate-200 shadow-sm",children:[{label:" (LIGHT)",value:"light",icon:Ym},{label:" (DARK)",value:"dark",icon:ru}].map(_=>r.jsxs("button",{onClick:()=>g(_.value),className:`flex items-center justify-center gap-2 py-3 border transition-all duration-200 ${i===_.value?"bg-slate-800 text-white border-slate-800 shadow-md":"bg-transparent text-slate-400 border-transparent active:bg-slate-50 active:text-slate-600 hover:bg-slate-50 hover:text-slate-600"}`,children:[r.jsx(_.icon,{className:"w-4 h-4",strokeWidth:1.5}),r.jsx("span",{className:"text-xs font-bold tracking-wide",children:_.label})]},_.value))})]}),r.jsxs("section",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:[r.jsx(z9,{className:"w-3 h-3"})," "]}),r.jsxs("div",{className:"bg-white p-4 border border-slate-200 shadow-sm relative",children:[r.jsx("div",{className:"absolute top-0 right-0 w-4 h-4 border-t-2 border-r-2 border-slate-200"}),r.jsxs("div",{className:"grid grid-cols-[80px_1fr] gap-5",children:[r.jsxs("div",{onClick:y,className:"w-[80px] aspect-[9/16] bg-slate-100 border border-slate-300 relative group cursor-pointer overflow-hidden",children:[t?r.jsx("img",{src:t,alt:"Wallpaper",className:"w-full h-full object-cover opacity-90 group-active:opacity-100 group-hover:opacity-100 transition-opacity"}):r.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-300",children:r.jsx(qa,{className:"w-5 h-5",strokeWidth:1})}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-active:opacity-100 group-hover:opacity-100 bg-slate-900/30 transition-opacity",children:r.jsx(au,{className:"w-4 h-4 text-white"})})]}),r.jsxs("div",{className:"flex flex-col justify-between py-1",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-bold text-slate-800 uppercase tracking-wider mb-1",children:""}),r.jsx("div",{className:"text-[10px] text-slate-400 font-mono",children:"RES: AUTO-FIT"}),r.jsx("div",{className:"text-[10px] text-slate-400 font-mono",children:"FMT: JPG/PNG"})]}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[r.jsx("button",{onClick:y,className:"px-4 py-2 border border-blue-200 bg-blue-50 text-blue-600 text-[10px] font-bold active:bg-blue-100 hover:bg-blue-100 transition-colors uppercase tracking-wider",children:""}),t&&r.jsx("button",{onClick:S,className:"px-3 py-2 border border-red-200 bg-red-50 text-red-500 text-[10px] font-bold active:bg-red-100 hover:bg-red-100 transition-colors",children:r.jsx(xt,{className:"w-3 h-3"})})]})]})]})]})]}),r.jsxs("section",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:[r.jsx(Zw,{className:"w-3 h-3"})," "]}),r.jsx("div",{className:"space-y-2",children:$b.map((_,R)=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-white border border-slate-200 active:border-slate-400 hover:border-slate-400 transition-colors group",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{onClick:()=>v(_.id),className:"w-10 h-10 bg-slate-50 border border-slate-200 cursor-pointer overflow-hidden relative active:border-slate-400 hover:border-slate-400 transition-colors",children:c[_.id]?r.jsx("img",{src:c[_.id],alt:_.name,className:"w-full h-full object-cover opacity-90 group-active:opacity-100 group-hover:opacity-100 transition-opacity"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300",children:r.jsx(E7,{className:"w-4 h-4"})})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-bold text-slate-700 uppercase tracking-wide",children:_.name}),r.jsx("div",{className:"text-[9px] text-slate-400 font-mono",children:_.location})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>v(_.id),className:"p-1.5 text-slate-400 active:text-slate-800 active:bg-slate-100 hover:text-slate-800 hover:bg-slate-100 transition-colors",children:r.jsx(Y8,{className:"w-4 h-4",strokeWidth:1.5})}),c[_.id]&&r.jsx("button",{onClick:D=>C(_.id,D),className:"p-1.5 text-slate-300 active:text-red-500 active:bg-red-50 hover:text-red-500 hover:bg-red-50 transition-colors",children:r.jsx(xt,{className:"w-4 h-4",strokeWidth:1.5})})]}),r.jsx("input",{ref:D=>m.current[_.id]=D,type:"file",accept:"image/*",onChange:D=>N(_.id,D),className:"hidden"})]},_.id))})]})]}),r.jsx("input",{ref:f,type:"file",accept:"image/*",onChange:b,className:"hidden"})]})}function sd(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ah={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Vb;function ZD(){return Vb||(Vb=1,(function(e,t){(function(n){e.exports=n()})(function(){return(function n(s,a,i){function l(p,h){if(!a[p]){if(!s[p]){var f=typeof sd=="function"&&sd;if(!h&&f)return f(p,!0);if(c)return c(p,!0);var m=new Error("Cannot find module '"+p+"'");throw m.code="MODULE_NOT_FOUND",m}var g=a[p]={exports:{}};s[p][0].call(g.exports,function(y){var b=s[p][1][y];return l(b||y)},g,g.exports,n,s,a,i)}return a[p].exports}for(var c=typeof sd=="function"&&sd,u=0;u<i.length;u++)l(i[u]);return l})({1:[function(n,s,a){var i=n("./utils"),l=n("./support"),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(u){for(var p,h,f,m,g,y,b,S=[],v=0,N=u.length,C=N,_=i.getTypeOf(u)!=="string";v<u.length;)C=N-v,f=_?(p=u[v++],h=v<N?u[v++]:0,v<N?u[v++]:0):(p=u.charCodeAt(v++),h=v<N?u.charCodeAt(v++):0,v<N?u.charCodeAt(v++):0),m=p>>2,g=(3&p)<<4|h>>4,y=1<C?(15&h)<<2|f>>6:64,b=2<C?63&f:64,S.push(c.charAt(m)+c.charAt(g)+c.charAt(y)+c.charAt(b));return S.join("")},a.decode=function(u){var p,h,f,m,g,y,b=0,S=0,v="data:";if(u.substr(0,v.length)===v)throw new Error("Invalid base64 input, it looks like a data url.");var N,C=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===c.charAt(64)&&C--,u.charAt(u.length-2)===c.charAt(64)&&C--,C%1!=0)throw new Error("Invalid base64 input, bad content length.");for(N=l.uint8array?new Uint8Array(0|C):new Array(0|C);b<u.length;)p=c.indexOf(u.charAt(b++))<<2|(m=c.indexOf(u.charAt(b++)))>>4,h=(15&m)<<4|(g=c.indexOf(u.charAt(b++)))>>2,f=(3&g)<<6|(y=c.indexOf(u.charAt(b++))),N[S++]=p,g!==64&&(N[S++]=h),y!==64&&(N[S++]=f);return N}},{"./support":30,"./utils":32}],2:[function(n,s,a){var i=n("./external"),l=n("./stream/DataWorker"),c=n("./stream/Crc32Probe"),u=n("./stream/DataLengthProbe");function p(h,f,m,g,y){this.compressedSize=h,this.uncompressedSize=f,this.crc32=m,this.compression=g,this.compressedContent=y}p.prototype={getContentWorker:function(){var h=new l(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),f=this;return h.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),h},getCompressedWorker:function(){return new l(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},p.createWorkerFrom=function(h,f,m){return h.pipe(new c).pipe(new u("uncompressedSize")).pipe(f.compressWorker(m)).pipe(new u("compressedSize")).withStreamInfo("compression",f)},s.exports=p},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,s,a){var i=n("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,s,a){var i=n("./utils"),l=(function(){for(var c,u=[],p=0;p<256;p++){c=p;for(var h=0;h<8;h++)c=1&c?3988292384^c>>>1:c>>>1;u[p]=c}return u})();s.exports=function(c,u){return c!==void 0&&c.length?i.getTypeOf(c)!=="string"?(function(p,h,f,m){var g=l,y=m+f;p^=-1;for(var b=m;b<y;b++)p=p>>>8^g[255&(p^h[b])];return-1^p})(0|u,c,c.length,0):(function(p,h,f,m){var g=l,y=m+f;p^=-1;for(var b=m;b<y;b++)p=p>>>8^g[255&(p^h.charCodeAt(b))];return-1^p})(0|u,c,c.length,0):0}},{"./utils":32}],5:[function(n,s,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(n,s,a){var i=null;i=typeof Promise<"u"?Promise:n("lie"),s.exports={Promise:i}},{lie:37}],7:[function(n,s,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=n("pako"),c=n("./utils"),u=n("./stream/GenericWorker"),p=i?"uint8array":"array";function h(f,m){u.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=m,this.meta={}}a.magic="\b\0",c.inherits(h,u),h.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(c.transformTo(p,f.data),!1)},h.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(m){f.push({data:m,meta:f.meta})}},a.compressWorker=function(f){return new h("Deflate",f)},a.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,s,a){function i(g,y){var b,S="";for(b=0;b<y;b++)S+=String.fromCharCode(255&g),g>>>=8;return S}function l(g,y,b,S,v,N){var C,_,R=g.file,D=g.compression,V=N!==p.utf8encode,I=c.transformTo("string",N(R.name)),A=c.transformTo("string",p.utf8encode(R.name)),U=R.comment,W=c.transformTo("string",N(U)),T=c.transformTo("string",p.utf8encode(U)),M=A.length!==R.name.length,j=T.length!==U.length,P="",L="",B="",q=R.dir,G=R.date,O={crc32:0,compressedSize:0,uncompressedSize:0};y&&!b||(O.crc32=g.crc32,O.compressedSize=g.compressedSize,O.uncompressedSize=g.uncompressedSize);var $=0;y&&($|=8),V||!M&&!j||($|=2048);var K=0,H=0;q&&(K|=16),v==="UNIX"?(H=798,K|=(function(Y,re){var de=Y;return Y||(de=re?16893:33204),(65535&de)<<16})(R.unixPermissions,q)):(H=20,K|=(function(Y){return 63&(Y||0)})(R.dosPermissions)),C=G.getUTCHours(),C<<=6,C|=G.getUTCMinutes(),C<<=5,C|=G.getUTCSeconds()/2,_=G.getUTCFullYear()-1980,_<<=4,_|=G.getUTCMonth()+1,_<<=5,_|=G.getUTCDate(),M&&(L=i(1,1)+i(h(I),4)+A,P+="up"+i(L.length,2)+L),j&&(B=i(1,1)+i(h(W),4)+T,P+="uc"+i(B.length,2)+B);var ee="";return ee+=`
\0`,ee+=i($,2),ee+=D.magic,ee+=i(C,2),ee+=i(_,2),ee+=i(O.crc32,4),ee+=i(O.compressedSize,4),ee+=i(O.uncompressedSize,4),ee+=i(I.length,2),ee+=i(P.length,2),{fileRecord:f.LOCAL_FILE_HEADER+ee+I+P,dirRecord:f.CENTRAL_FILE_HEADER+i(H,2)+ee+i(W.length,2)+"\0\0\0\0"+i(K,4)+i(S,4)+I+P+W}}var c=n("../utils"),u=n("../stream/GenericWorker"),p=n("../utf8"),h=n("../crc32"),f=n("../signature");function m(g,y,b,S){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=b,this.encodeFileName=S,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}c.inherits(m,u),m.prototype.push=function(g){var y=g.meta.percent||0,b=this.entriesCount,S=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,u.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:b?(y+100*(b-S-1))/b:100}}))},m.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var y=this.streamFiles&&!g.file.dir;if(y){var b=l(g,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},m.prototype.closedSource=function(g){this.accumulate=!1;var y=this.streamFiles&&!g.file.dir,b=l(g,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),y)this.push({data:(function(S){return f.DATA_DESCRIPTOR+i(S.crc32,4)+i(S.compressedSize,4)+i(S.uncompressedSize,4)})(g),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},m.prototype.flush=function(){for(var g=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var b=this.bytesWritten-g,S=(function(v,N,C,_,R){var D=c.transformTo("string",R(_));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(v,2)+i(v,2)+i(N,4)+i(C,4)+i(D.length,2)+D})(this.dirRecords.length,b,g,this.zipComment,this.encodeFileName);this.push({data:S,meta:{percent:100}})},m.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},m.prototype.registerPrevious=function(g){this._sources.push(g);var y=this;return g.on("data",function(b){y.processChunk(b)}),g.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),g.on("error",function(b){y.error(b)}),this},m.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},m.prototype.error=function(g){var y=this._sources;if(!u.prototype.error.call(this,g))return!1;for(var b=0;b<y.length;b++)try{y[b].error(g)}catch{}return!0},m.prototype.lock=function(){u.prototype.lock.call(this);for(var g=this._sources,y=0;y<g.length;y++)g[y].lock()},s.exports=m},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,s,a){var i=n("../compressions"),l=n("./ZipFileWorker");a.generateWorker=function(c,u,p){var h=new l(u.streamFiles,p,u.platform,u.encodeFileName),f=0;try{c.forEach(function(m,g){f++;var y=(function(N,C){var _=N||C,R=i[_];if(!R)throw new Error(_+" is not a valid compression method !");return R})(g.options.compression,u.compression),b=g.options.compressionOptions||u.compressionOptions||{},S=g.dir,v=g.date;g._compressWorker(y,b).withStreamInfo("file",{name:m,dir:S,date:v,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(h)}),h.entriesCount=f}catch(m){h.error(m)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,s,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new i;for(var c in this)typeof this[c]!="function"&&(l[c]=this[c]);return l}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(l,c){return new i().loadAsync(l,c)},i.external=n("./external"),s.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,s,a){var i=n("./utils"),l=n("./external"),c=n("./utf8"),u=n("./zipEntries"),p=n("./stream/Crc32Probe"),h=n("./nodejsUtils");function f(m){return new l.Promise(function(g,y){var b=m.decompressed.getContentWorker().pipe(new p);b.on("error",function(S){y(S)}).on("end",function(){b.streamInfo.crc32!==m.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}s.exports=function(m,g){var y=this;return g=i.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:c.utf8decode}),h.isNode&&h.isStream(m)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",m,!0,g.optimizedBinaryString,g.base64).then(function(b){var S=new u(g);return S.load(b),S}).then(function(b){var S=[l.Promise.resolve(b)],v=b.files;if(g.checkCRC32)for(var N=0;N<v.length;N++)S.push(f(v[N]));return l.Promise.all(S)}).then(function(b){for(var S=b.shift(),v=S.files,N=0;N<v.length;N++){var C=v[N],_=C.fileNameStr,R=i.resolve(C.fileNameStr);y.file(R,C.decompressed,{binary:!0,optimizedBinaryString:!0,date:C.date,dir:C.dir,comment:C.fileCommentStr.length?C.fileCommentStr:null,unixPermissions:C.unixPermissions,dosPermissions:C.dosPermissions,createFolders:g.createFolders}),C.dir||(y.file(R).unsafeOriginalName=_)}return S.zipComment.length&&(y.comment=S.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,s,a){var i=n("../utils"),l=n("../stream/GenericWorker");function c(u,p){l.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(p)}i.inherits(c,l),c.prototype._bindStream=function(u){var p=this;(this._stream=u).pause(),u.on("data",function(h){p.push({data:h,meta:{percent:0}})}).on("error",function(h){p.isPaused?this.generatedError=h:p.error(h)}).on("end",function(){p.isPaused?p._upstreamEnded=!0:p.end()})},c.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},c.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},s.exports=c},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,s,a){var i=n("readable-stream").Readable;function l(c,u,p){i.call(this,u),this._helper=c;var h=this;c.on("data",function(f,m){h.push(f)||h._helper.pause(),p&&p(m)}).on("error",function(f){h.emit("error",f)}).on("end",function(){h.push(null)})}n("../utils").inherits(l,i),l.prototype._read=function(){this._helper.resume()},s.exports=l},{"../utils":32,"readable-stream":16}],14:[function(n,s,a){s.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,l);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,l)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var l=new Buffer(i);return l.fill(0),l},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,s,a){function i(R,D,V){var I,A=c.getTypeOf(D),U=c.extend(V||{},h);U.date=U.date||new Date,U.compression!==null&&(U.compression=U.compression.toUpperCase()),typeof U.unixPermissions=="string"&&(U.unixPermissions=parseInt(U.unixPermissions,8)),U.unixPermissions&&16384&U.unixPermissions&&(U.dir=!0),U.dosPermissions&&16&U.dosPermissions&&(U.dir=!0),U.dir&&(R=v(R)),U.createFolders&&(I=S(R))&&N.call(this,I,!0);var W=A==="string"&&U.binary===!1&&U.base64===!1;V&&V.binary!==void 0||(U.binary=!W),(D instanceof f&&D.uncompressedSize===0||U.dir||!D||D.length===0)&&(U.base64=!1,U.binary=!0,D="",U.compression="STORE",A="string");var T=null;T=D instanceof f||D instanceof u?D:y.isNode&&y.isStream(D)?new b(R,D):c.prepareContent(R,D,U.binary,U.optimizedBinaryString,U.base64);var M=new m(R,T,U);this.files[R]=M}var l=n("./utf8"),c=n("./utils"),u=n("./stream/GenericWorker"),p=n("./stream/StreamHelper"),h=n("./defaults"),f=n("./compressedObject"),m=n("./zipObject"),g=n("./generate"),y=n("./nodejsUtils"),b=n("./nodejs/NodejsStreamInputAdapter"),S=function(R){R.slice(-1)==="/"&&(R=R.substring(0,R.length-1));var D=R.lastIndexOf("/");return 0<D?R.substring(0,D):""},v=function(R){return R.slice(-1)!=="/"&&(R+="/"),R},N=function(R,D){return D=D!==void 0?D:h.createFolders,R=v(R),this.files[R]||i.call(this,R,null,{dir:!0,createFolders:D}),this.files[R]};function C(R){return Object.prototype.toString.call(R)==="[object RegExp]"}var _={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(R){var D,V,I;for(D in this.files)I=this.files[D],(V=D.slice(this.root.length,D.length))&&D.slice(0,this.root.length)===this.root&&R(V,I)},filter:function(R){var D=[];return this.forEach(function(V,I){R(V,I)&&D.push(I)}),D},file:function(R,D,V){if(arguments.length!==1)return R=this.root+R,i.call(this,R,D,V),this;if(C(R)){var I=R;return this.filter(function(U,W){return!W.dir&&I.test(U)})}var A=this.files[this.root+R];return A&&!A.dir?A:null},folder:function(R){if(!R)return this;if(C(R))return this.filter(function(A,U){return U.dir&&R.test(A)});var D=this.root+R,V=N.call(this,D),I=this.clone();return I.root=V.name,I},remove:function(R){R=this.root+R;var D=this.files[R];if(D||(R.slice(-1)!=="/"&&(R+="/"),D=this.files[R]),D&&!D.dir)delete this.files[R];else for(var V=this.filter(function(A,U){return U.name.slice(0,R.length)===R}),I=0;I<V.length;I++)delete this.files[V[I].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(R){var D,V={};try{if((V=c.extend(R||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=V.type.toLowerCase(),V.compression=V.compression.toUpperCase(),V.type==="binarystring"&&(V.type="string"),!V.type)throw new Error("No output type specified.");c.checkSupport(V.type),V.platform!=="darwin"&&V.platform!=="freebsd"&&V.platform!=="linux"&&V.platform!=="sunos"||(V.platform="UNIX"),V.platform==="win32"&&(V.platform="DOS");var I=V.comment||this.comment||"";D=g.generateWorker(this,V,I)}catch(A){(D=new u("error")).error(A)}return new p(D,V.type||"string",V.mimeType)},generateAsync:function(R,D){return this.generateInternalStream(R).accumulate(D)},generateNodeStream:function(R,D){return(R=R||{}).type||(R.type="nodebuffer"),this.generateInternalStream(R).toNodejsStream(D)}};s.exports=_},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,s,a){s.exports=n("stream")},{stream:void 0}],17:[function(n,s,a){var i=n("./DataReader");function l(c){i.call(this,c);for(var u=0;u<this.data.length;u++)c[u]=255&c[u]}n("../utils").inherits(l,i),l.prototype.byteAt=function(c){return this.data[this.zero+c]},l.prototype.lastIndexOfSignature=function(c){for(var u=c.charCodeAt(0),p=c.charCodeAt(1),h=c.charCodeAt(2),f=c.charCodeAt(3),m=this.length-4;0<=m;--m)if(this.data[m]===u&&this.data[m+1]===p&&this.data[m+2]===h&&this.data[m+3]===f)return m-this.zero;return-1},l.prototype.readAndCheckSignature=function(c){var u=c.charCodeAt(0),p=c.charCodeAt(1),h=c.charCodeAt(2),f=c.charCodeAt(3),m=this.readData(4);return u===m[0]&&p===m[1]&&h===m[2]&&f===m[3]},l.prototype.readData=function(c){if(this.checkOffset(c),c===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,u},s.exports=l},{"../utils":32,"./DataReader":18}],18:[function(n,s,a){var i=n("../utils");function l(c){this.data=c,this.length=c.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(c){this.checkIndex(this.index+c)},checkIndex:function(c){if(this.length<this.zero+c||c<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+c+"). Corrupted zip ?")},setIndex:function(c){this.checkIndex(c),this.index=c},skip:function(c){this.setIndex(this.index+c)},byteAt:function(){},readInt:function(c){var u,p=0;for(this.checkOffset(c),u=this.index+c-1;u>=this.index;u--)p=(p<<8)+this.byteAt(u);return this.index+=c,p},readString:function(c){return i.transformTo("string",this.readData(c))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var c=this.readInt(4);return new Date(Date.UTC(1980+(c>>25&127),(c>>21&15)-1,c>>16&31,c>>11&31,c>>5&63,(31&c)<<1))}},s.exports=l},{"../utils":32}],19:[function(n,s,a){var i=n("./Uint8ArrayReader");function l(c){i.call(this,c)}n("../utils").inherits(l,i),l.prototype.readData=function(c){this.checkOffset(c);var u=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,u},s.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,s,a){var i=n("./DataReader");function l(c){i.call(this,c)}n("../utils").inherits(l,i),l.prototype.byteAt=function(c){return this.data.charCodeAt(this.zero+c)},l.prototype.lastIndexOfSignature=function(c){return this.data.lastIndexOf(c)-this.zero},l.prototype.readAndCheckSignature=function(c){return c===this.readData(4)},l.prototype.readData=function(c){this.checkOffset(c);var u=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,u},s.exports=l},{"../utils":32,"./DataReader":18}],21:[function(n,s,a){var i=n("./ArrayReader");function l(c){i.call(this,c)}n("../utils").inherits(l,i),l.prototype.readData=function(c){if(this.checkOffset(c),c===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+c);return this.index+=c,u},s.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(n,s,a){var i=n("../utils"),l=n("../support"),c=n("./ArrayReader"),u=n("./StringReader"),p=n("./NodeBufferReader"),h=n("./Uint8ArrayReader");s.exports=function(f){var m=i.getTypeOf(f);return i.checkSupport(m),m!=="string"||l.uint8array?m==="nodebuffer"?new p(f):l.uint8array?new h(i.transformTo("uint8array",f)):new c(i.transformTo("array",f)):new u(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,s,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,s,a){var i=n("./GenericWorker"),l=n("../utils");function c(u){i.call(this,"ConvertWorker to "+u),this.destType=u}l.inherits(c,i),c.prototype.processChunk=function(u){this.push({data:l.transformTo(this.destType,u.data),meta:u.meta})},s.exports=c},{"../utils":32,"./GenericWorker":28}],25:[function(n,s,a){var i=n("./GenericWorker"),l=n("../crc32");function c(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(c,i),c.prototype.processChunk=function(u){this.streamInfo.crc32=l(u.data,this.streamInfo.crc32||0),this.push(u)},s.exports=c},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,s,a){var i=n("../utils"),l=n("./GenericWorker");function c(u){l.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}i.inherits(c,l),c.prototype.processChunk=function(u){if(u){var p=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=p+u.data.length}l.prototype.processChunk.call(this,u)},s.exports=c},{"../utils":32,"./GenericWorker":28}],27:[function(n,s,a){var i=n("../utils"),l=n("./GenericWorker");function c(u){l.call(this,"DataWorker");var p=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(h){p.dataIsReady=!0,p.data=h,p.max=h&&h.length||0,p.type=i.getTypeOf(h),p.isPaused||p._tickAndRepeat()},function(h){p.error(h)})}i.inherits(c,l),c.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},c.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},c.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},c.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,p=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,p);break;case"uint8array":u=this.data.subarray(this.index,p);break;case"array":case"nodebuffer":u=this.data.slice(this.index,p)}return this.index=p,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},s.exports=c},{"../utils":32,"./GenericWorker":28}],28:[function(n,s,a){function i(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,c){return this._listeners[l].push(c),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,c){if(this._listeners[l])for(var u=0;u<this._listeners[l].length;u++)this._listeners[l][u].call(this,c)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var c=this;return l.on("data",function(u){c.processChunk(u)}),l.on("end",function(){c.end()}),l.on("error",function(u){c.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,c){return this.extraStreamInfo[l]=c,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},s.exports=i},{}],29:[function(n,s,a){var i=n("../utils"),l=n("./ConvertWorker"),c=n("./GenericWorker"),u=n("../base64"),p=n("../support"),h=n("../external"),f=null;if(p.nodestream)try{f=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function m(y,b){return new h.Promise(function(S,v){var N=[],C=y._internalType,_=y._outputType,R=y._mimeType;y.on("data",function(D,V){N.push(D),b&&b(V)}).on("error",function(D){N=[],v(D)}).on("end",function(){try{var D=(function(V,I,A){switch(V){case"blob":return i.newBlob(i.transformTo("arraybuffer",I),A);case"base64":return u.encode(I);default:return i.transformTo(V,I)}})(_,(function(V,I){var A,U=0,W=null,T=0;for(A=0;A<I.length;A++)T+=I[A].length;switch(V){case"string":return I.join("");case"array":return Array.prototype.concat.apply([],I);case"uint8array":for(W=new Uint8Array(T),A=0;A<I.length;A++)W.set(I[A],U),U+=I[A].length;return W;case"nodebuffer":return Buffer.concat(I);default:throw new Error("concat : unsupported type '"+V+"'")}})(C,N),R);S(D)}catch(V){v(V)}N=[]}).resume()})}function g(y,b,S){var v=b;switch(b){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=b,this._mimeType=S,i.checkSupport(v),this._worker=y.pipe(new l(v)),y.lock()}catch(N){this._worker=new c("error"),this._worker.error(N)}}g.prototype={accumulate:function(y){return m(this,y)},on:function(y,b){var S=this;return y==="data"?this._worker.on(y,function(v){b.call(S,v.data,v.meta)}):this._worker.on(y,function(){i.delay(b,arguments,S)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},y)}},s.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,s,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(i),a.blob=l.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!n("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(n,s,a){for(var i=n("./utils"),l=n("./support"),c=n("./nodejsUtils"),u=n("./stream/GenericWorker"),p=new Array(256),h=0;h<256;h++)p[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;p[254]=p[254]=1;function f(){u.call(this,"utf-8 decode"),this.leftOver=null}function m(){u.call(this,"utf-8 encode")}a.utf8encode=function(g){return l.nodebuffer?c.newBufferFrom(g,"utf-8"):(function(y){var b,S,v,N,C,_=y.length,R=0;for(N=0;N<_;N++)(64512&(S=y.charCodeAt(N)))==55296&&N+1<_&&(64512&(v=y.charCodeAt(N+1)))==56320&&(S=65536+(S-55296<<10)+(v-56320),N++),R+=S<128?1:S<2048?2:S<65536?3:4;for(b=l.uint8array?new Uint8Array(R):new Array(R),N=C=0;C<R;N++)(64512&(S=y.charCodeAt(N)))==55296&&N+1<_&&(64512&(v=y.charCodeAt(N+1)))==56320&&(S=65536+(S-55296<<10)+(v-56320),N++),S<128?b[C++]=S:(S<2048?b[C++]=192|S>>>6:(S<65536?b[C++]=224|S>>>12:(b[C++]=240|S>>>18,b[C++]=128|S>>>12&63),b[C++]=128|S>>>6&63),b[C++]=128|63&S);return b})(g)},a.utf8decode=function(g){return l.nodebuffer?i.transformTo("nodebuffer",g).toString("utf-8"):(function(y){var b,S,v,N,C=y.length,_=new Array(2*C);for(b=S=0;b<C;)if((v=y[b++])<128)_[S++]=v;else if(4<(N=p[v]))_[S++]=65533,b+=N-1;else{for(v&=N===2?31:N===3?15:7;1<N&&b<C;)v=v<<6|63&y[b++],N--;1<N?_[S++]=65533:v<65536?_[S++]=v:(v-=65536,_[S++]=55296|v>>10&1023,_[S++]=56320|1023&v)}return _.length!==S&&(_.subarray?_=_.subarray(0,S):_.length=S),i.applyFromCharCode(_)})(g=i.transformTo(l.uint8array?"uint8array":"array",g))},i.inherits(f,u),f.prototype.processChunk=function(g){var y=i.transformTo(l.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var b=y;(y=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),y.set(b,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var S=(function(N,C){var _;for((C=C||N.length)>N.length&&(C=N.length),_=C-1;0<=_&&(192&N[_])==128;)_--;return _<0||_===0?C:_+p[N[_]]>C?_:C})(y),v=y;S!==y.length&&(l.uint8array?(v=y.subarray(0,S),this.leftOver=y.subarray(S,y.length)):(v=y.slice(0,S),this.leftOver=y.slice(S,y.length))),this.push({data:a.utf8decode(v),meta:g.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=f,i.inherits(m,u),m.prototype.processChunk=function(g){this.push({data:a.utf8encode(g.data),meta:g.meta})},a.Utf8EncodeWorker=m},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,s,a){var i=n("./support"),l=n("./base64"),c=n("./nodejsUtils"),u=n("./external");function p(b){return b}function h(b,S){for(var v=0;v<b.length;++v)S[v]=255&b.charCodeAt(v);return S}n("setimmediate"),a.newBlob=function(b,S){a.checkSupport("blob");try{return new Blob([b],{type:S})}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return v.append(b),v.getBlob(S)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(b,S,v){var N=[],C=0,_=b.length;if(_<=v)return String.fromCharCode.apply(null,b);for(;C<_;)S==="array"||S==="nodebuffer"?N.push(String.fromCharCode.apply(null,b.slice(C,Math.min(C+v,_)))):N.push(String.fromCharCode.apply(null,b.subarray(C,Math.min(C+v,_)))),C+=v;return N.join("")},stringifyByChar:function(b){for(var S="",v=0;v<b.length;v++)S+=String.fromCharCode(b[v]);return S},applyCanBeUsed:{uint8array:(function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,c.allocBuffer(1)).length===1}catch{return!1}})()}};function m(b){var S=65536,v=a.getTypeOf(b),N=!0;if(v==="uint8array"?N=f.applyCanBeUsed.uint8array:v==="nodebuffer"&&(N=f.applyCanBeUsed.nodebuffer),N)for(;1<S;)try{return f.stringifyByChunk(b,v,S)}catch{S=Math.floor(S/2)}return f.stringifyByChar(b)}function g(b,S){for(var v=0;v<b.length;v++)S[v]=b[v];return S}a.applyFromCharCode=m;var y={};y.string={string:p,array:function(b){return h(b,new Array(b.length))},arraybuffer:function(b){return y.string.uint8array(b).buffer},uint8array:function(b){return h(b,new Uint8Array(b.length))},nodebuffer:function(b){return h(b,c.allocBuffer(b.length))}},y.array={string:m,array:p,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return c.newBufferFrom(b)}},y.arraybuffer={string:function(b){return m(new Uint8Array(b))},array:function(b){return g(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:p,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return c.newBufferFrom(new Uint8Array(b))}},y.uint8array={string:m,array:function(b){return g(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:p,nodebuffer:function(b){return c.newBufferFrom(b)}},y.nodebuffer={string:m,array:function(b){return g(b,new Array(b.length))},arraybuffer:function(b){return y.nodebuffer.uint8array(b).buffer},uint8array:function(b){return g(b,new Uint8Array(b.length))},nodebuffer:p},a.transformTo=function(b,S){if(S=S||"",!b)return S;a.checkSupport(b);var v=a.getTypeOf(S);return y[v][b](S)},a.resolve=function(b){for(var S=b.split("/"),v=[],N=0;N<S.length;N++){var C=S[N];C==="."||C===""&&N!==0&&N!==S.length-1||(C===".."?v.pop():v.push(C))}return v.join("/")},a.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":i.nodebuffer&&c.isBuffer(b)?"nodebuffer":i.uint8array&&b instanceof Uint8Array?"uint8array":i.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(b){if(!i[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(b){var S,v,N="";for(v=0;v<(b||"").length;v++)N+="\\x"+((S=b.charCodeAt(v))<16?"0":"")+S.toString(16).toUpperCase();return N},a.delay=function(b,S,v){setImmediate(function(){b.apply(v||null,S||[])})},a.inherits=function(b,S){function v(){}v.prototype=S.prototype,b.prototype=new v},a.extend=function(){var b,S,v={};for(b=0;b<arguments.length;b++)for(S in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],S)&&v[S]===void 0&&(v[S]=arguments[b][S]);return v},a.prepareContent=function(b,S,v,N,C){return u.Promise.resolve(S).then(function(_){return i.blob&&(_ instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(_))!==-1)&&typeof FileReader<"u"?new u.Promise(function(R,D){var V=new FileReader;V.onload=function(I){R(I.target.result)},V.onerror=function(I){D(I.target.error)},V.readAsArrayBuffer(_)}):_}).then(function(_){var R=a.getTypeOf(_);return R?(R==="arraybuffer"?_=a.transformTo("uint8array",_):R==="string"&&(C?_=l.decode(_):v&&N!==!0&&(_=(function(D){return h(D,i.uint8array?new Uint8Array(D.length):new Array(D.length))})(_))),_):u.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,s,a){var i=n("./reader/readerFor"),l=n("./utils"),c=n("./signature"),u=n("./zipEntry"),p=n("./support");function h(f){this.files=[],this.loadOptions=f}h.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var m=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(m)+", expected "+l.pretty(f)+")")}},isSignature:function(f,m){var g=this.reader.index;this.reader.setIndex(f);var y=this.reader.readString(4)===m;return this.reader.setIndex(g),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),m=p.uint8array?"uint8array":"array",g=l.transformTo(m,f);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,m,g,y=this.zip64EndOfCentralSize-44;0<y;)f=this.reader.readInt(2),m=this.reader.readInt(4),g=this.reader.readData(m),this.zip64ExtensibleData[f]={id:f,length:m,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,m;for(f=0;f<this.files.length;f++)m=this.files[f],this.reader.setIndex(m.localHeaderOffset),this.checkSignature(c.LOCAL_FILE_HEADER),m.readLocalPart(this.reader),m.handleUTF8(),m.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(c.CENTRAL_FILE_HEADER);)(f=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(c.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,c.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var m=f;if(this.checkSignature(c.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,c.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var y=m-g;if(0<y)this.isSignature(m,c.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(f){this.reader=i(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},s.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,s,a){var i=n("./reader/readerFor"),l=n("./utils"),c=n("./compressedObject"),u=n("./crc32"),p=n("./utf8"),h=n("./compressions"),f=n("./support");function m(g,y){this.options=g,this.loadOptions=y}m.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var y,b;if(g.skip(22),this.fileNameLength=g.readInt(2),b=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=(function(S){for(var v in h)if(Object.prototype.hasOwnProperty.call(h,v)&&h[v].magic===S)return h[v];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new c(this.compressedSize,this.uncompressedSize,this.crc32,y,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var y=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(y),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=i(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var y,b,S,v=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<v;)y=g.readInt(2),b=g.readInt(2),S=g.readData(b),this.extraFields[y]={id:y,length:b,value:S};g.setIndex(v)},handleUTF8:function(){var g=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=p.utf8decode(this.fileName),this.fileCommentStr=p.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var b=l.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var S=this.findExtraFieldUnicodeComment();if(S!==null)this.fileCommentStr=S;else{var v=l.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(v)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var y=i(g.value);return y.readInt(1)!==1||u(this.fileName)!==y.readInt(4)?null:p.utf8decode(y.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var y=i(g.value);return y.readInt(1)!==1||u(this.fileComment)!==y.readInt(4)?null:p.utf8decode(y.readData(g.length-5))}return null}},s.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,s,a){function i(y,b,S){this.name=y,this.dir=S.dir,this.date=S.date,this.comment=S.comment,this.unixPermissions=S.unixPermissions,this.dosPermissions=S.dosPermissions,this._data=b,this._dataBinary=S.binary,this.options={compression:S.compression,compressionOptions:S.compressionOptions}}var l=n("./stream/StreamHelper"),c=n("./stream/DataWorker"),u=n("./utf8"),p=n("./compressedObject"),h=n("./stream/GenericWorker");i.prototype={internalStream:function(y){var b=null,S="string";try{if(!y)throw new Error("No output type specified.");var v=(S=y.toLowerCase())==="string"||S==="text";S!=="binarystring"&&S!=="text"||(S="string"),b=this._decompressWorker();var N=!this._dataBinary;N&&!v&&(b=b.pipe(new u.Utf8EncodeWorker)),!N&&v&&(b=b.pipe(new u.Utf8DecodeWorker))}catch(C){(b=new h("error")).error(C)}return new l(b,S,"")},async:function(y,b){return this.internalStream(y).accumulate(b)},nodeStream:function(y,b){return this.internalStream(y||"nodebuffer").toNodejsStream(b)},_compressWorker:function(y,b){if(this._data instanceof p&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var S=this._decompressWorker();return this._dataBinary||(S=S.pipe(new u.Utf8EncodeWorker)),p.createWorkerFrom(S,y,b)},_decompressWorker:function(){return this._data instanceof p?this._data.getContentWorker():this._data instanceof h?this._data:new c(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],m=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<f.length;g++)i.prototype[f[g]]=m;s.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,s,a){(function(i){var l,c,u=i.MutationObserver||i.WebKitMutationObserver;if(u){var p=0,h=new u(y),f=i.document.createTextNode("");h.observe(f,{characterData:!0}),l=function(){f.data=p=++p%2}}else if(i.setImmediate||i.MessageChannel===void 0)l="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var b=i.document.createElement("script");b.onreadystatechange=function(){y(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},i.document.documentElement.appendChild(b)}:function(){setTimeout(y,0)};else{var m=new i.MessageChannel;m.port1.onmessage=y,l=function(){m.port2.postMessage(0)}}var g=[];function y(){var b,S;c=!0;for(var v=g.length;v;){for(S=g,g=[],b=-1;++b<v;)S[b]();v=g.length}c=!1}s.exports=function(b){g.push(b)!==1||c||l()}}).call(this,typeof Uc<"u"?Uc:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,s,a){var i=n("immediate");function l(){}var c={},u=["REJECTED"],p=["FULFILLED"],h=["PENDING"];function f(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,v!==l&&b(this,v)}function m(v,N,C){this.promise=v,typeof N=="function"&&(this.onFulfilled=N,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}function g(v,N,C){i(function(){var _;try{_=N(C)}catch(R){return c.reject(v,R)}_===v?c.reject(v,new TypeError("Cannot resolve promise with itself")):c.resolve(v,_)})}function y(v){var N=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof N=="function")return function(){N.apply(v,arguments)}}function b(v,N){var C=!1;function _(V){C||(C=!0,c.reject(v,V))}function R(V){C||(C=!0,c.resolve(v,V))}var D=S(function(){N(R,_)});D.status==="error"&&_(D.value)}function S(v,N){var C={};try{C.value=v(N),C.status="success"}catch(_){C.status="error",C.value=_}return C}(s.exports=f).prototype.finally=function(v){if(typeof v!="function")return this;var N=this.constructor;return this.then(function(C){return N.resolve(v()).then(function(){return C})},function(C){return N.resolve(v()).then(function(){throw C})})},f.prototype.catch=function(v){return this.then(null,v)},f.prototype.then=function(v,N){if(typeof v!="function"&&this.state===p||typeof N!="function"&&this.state===u)return this;var C=new this.constructor(l);return this.state!==h?g(C,this.state===p?v:N,this.outcome):this.queue.push(new m(C,v,N)),C},m.prototype.callFulfilled=function(v){c.resolve(this.promise,v)},m.prototype.otherCallFulfilled=function(v){g(this.promise,this.onFulfilled,v)},m.prototype.callRejected=function(v){c.reject(this.promise,v)},m.prototype.otherCallRejected=function(v){g(this.promise,this.onRejected,v)},c.resolve=function(v,N){var C=S(y,N);if(C.status==="error")return c.reject(v,C.value);var _=C.value;if(_)b(v,_);else{v.state=p,v.outcome=N;for(var R=-1,D=v.queue.length;++R<D;)v.queue[R].callFulfilled(N)}return v},c.reject=function(v,N){v.state=u,v.outcome=N;for(var C=-1,_=v.queue.length;++C<_;)v.queue[C].callRejected(N);return v},f.resolve=function(v){return v instanceof this?v:c.resolve(new this(l),v)},f.reject=function(v){var N=new this(l);return c.reject(N,v)},f.all=function(v){var N=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=v.length,_=!1;if(!C)return this.resolve([]);for(var R=new Array(C),D=0,V=-1,I=new this(l);++V<C;)A(v[V],V);return I;function A(U,W){N.resolve(U).then(function(T){R[W]=T,++D!==C||_||(_=!0,c.resolve(I,R))},function(T){_||(_=!0,c.reject(I,T))})}},f.race=function(v){var N=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=v.length,_=!1;if(!C)return this.resolve([]);for(var R=-1,D=new this(l);++R<C;)V=v[R],N.resolve(V).then(function(I){_||(_=!0,c.resolve(D,I))},function(I){_||(_=!0,c.reject(D,I))});var V;return D}},{immediate:36}],38:[function(n,s,a){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),s.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,s,a){var i=n("./zlib/deflate"),l=n("./utils/common"),c=n("./utils/strings"),u=n("./zlib/messages"),p=n("./zlib/zstream"),h=Object.prototype.toString,f=0,m=-1,g=0,y=8;function b(v){if(!(this instanceof b))return new b(v);this.options=l.assign({level:m,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},v||{});var N=this.options;N.raw&&0<N.windowBits?N.windowBits=-N.windowBits:N.gzip&&0<N.windowBits&&N.windowBits<16&&(N.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var C=i.deflateInit2(this.strm,N.level,N.method,N.windowBits,N.memLevel,N.strategy);if(C!==f)throw new Error(u[C]);if(N.header&&i.deflateSetHeader(this.strm,N.header),N.dictionary){var _;if(_=typeof N.dictionary=="string"?c.string2buf(N.dictionary):h.call(N.dictionary)==="[object ArrayBuffer]"?new Uint8Array(N.dictionary):N.dictionary,(C=i.deflateSetDictionary(this.strm,_))!==f)throw new Error(u[C]);this._dict_set=!0}}function S(v,N){var C=new b(N);if(C.push(v,!0),C.err)throw C.msg||u[C.err];return C.result}b.prototype.push=function(v,N){var C,_,R=this.strm,D=this.options.chunkSize;if(this.ended)return!1;_=N===~~N?N:N===!0?4:0,typeof v=="string"?R.input=c.string2buf(v):h.call(v)==="[object ArrayBuffer]"?R.input=new Uint8Array(v):R.input=v,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new l.Buf8(D),R.next_out=0,R.avail_out=D),(C=i.deflate(R,_))!==1&&C!==f)return this.onEnd(C),!(this.ended=!0);R.avail_out!==0&&(R.avail_in!==0||_!==4&&_!==2)||(this.options.to==="string"?this.onData(c.buf2binstring(l.shrinkBuf(R.output,R.next_out))):this.onData(l.shrinkBuf(R.output,R.next_out)))}while((0<R.avail_in||R.avail_out===0)&&C!==1);return _===4?(C=i.deflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===f):_!==2||(this.onEnd(f),!(R.avail_out=0))},b.prototype.onData=function(v){this.chunks.push(v)},b.prototype.onEnd=function(v){v===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},a.Deflate=b,a.deflate=S,a.deflateRaw=function(v,N){return(N=N||{}).raw=!0,S(v,N)},a.gzip=function(v,N){return(N=N||{}).gzip=!0,S(v,N)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,s,a){var i=n("./zlib/inflate"),l=n("./utils/common"),c=n("./utils/strings"),u=n("./zlib/constants"),p=n("./zlib/messages"),h=n("./zlib/zstream"),f=n("./zlib/gzheader"),m=Object.prototype.toString;function g(b){if(!(this instanceof g))return new g(b);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},b||{});var S=this.options;S.raw&&0<=S.windowBits&&S.windowBits<16&&(S.windowBits=-S.windowBits,S.windowBits===0&&(S.windowBits=-15)),!(0<=S.windowBits&&S.windowBits<16)||b&&b.windowBits||(S.windowBits+=32),15<S.windowBits&&S.windowBits<48&&(15&S.windowBits)==0&&(S.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var v=i.inflateInit2(this.strm,S.windowBits);if(v!==u.Z_OK)throw new Error(p[v]);this.header=new f,i.inflateGetHeader(this.strm,this.header)}function y(b,S){var v=new g(S);if(v.push(b,!0),v.err)throw v.msg||p[v.err];return v.result}g.prototype.push=function(b,S){var v,N,C,_,R,D,V=this.strm,I=this.options.chunkSize,A=this.options.dictionary,U=!1;if(this.ended)return!1;N=S===~~S?S:S===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof b=="string"?V.input=c.binstring2buf(b):m.call(b)==="[object ArrayBuffer]"?V.input=new Uint8Array(b):V.input=b,V.next_in=0,V.avail_in=V.input.length;do{if(V.avail_out===0&&(V.output=new l.Buf8(I),V.next_out=0,V.avail_out=I),(v=i.inflate(V,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&A&&(D=typeof A=="string"?c.string2buf(A):m.call(A)==="[object ArrayBuffer]"?new Uint8Array(A):A,v=i.inflateSetDictionary(this.strm,D)),v===u.Z_BUF_ERROR&&U===!0&&(v=u.Z_OK,U=!1),v!==u.Z_STREAM_END&&v!==u.Z_OK)return this.onEnd(v),!(this.ended=!0);V.next_out&&(V.avail_out!==0&&v!==u.Z_STREAM_END&&(V.avail_in!==0||N!==u.Z_FINISH&&N!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(C=c.utf8border(V.output,V.next_out),_=V.next_out-C,R=c.buf2string(V.output,C),V.next_out=_,V.avail_out=I-_,_&&l.arraySet(V.output,V.output,C,_,0),this.onData(R)):this.onData(l.shrinkBuf(V.output,V.next_out)))),V.avail_in===0&&V.avail_out===0&&(U=!0)}while((0<V.avail_in||V.avail_out===0)&&v!==u.Z_STREAM_END);return v===u.Z_STREAM_END&&(N=u.Z_FINISH),N===u.Z_FINISH?(v=i.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===u.Z_OK):N!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(V.avail_out=0))},g.prototype.onData=function(b){this.chunks.push(b)},g.prototype.onEnd=function(b){b===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},a.Inflate=g,a.inflate=y,a.inflateRaw=function(b,S){return(S=S||{}).raw=!0,y(b,S)},a.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,s,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(u){for(var p=Array.prototype.slice.call(arguments,1);p.length;){var h=p.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])}}return u},a.shrinkBuf=function(u,p){return u.length===p?u:u.subarray?u.subarray(0,p):(u.length=p,u)};var l={arraySet:function(u,p,h,f,m){if(p.subarray&&u.subarray)u.set(p.subarray(h,h+f),m);else for(var g=0;g<f;g++)u[m+g]=p[h+g]},flattenChunks:function(u){var p,h,f,m,g,y;for(p=f=0,h=u.length;p<h;p++)f+=u[p].length;for(y=new Uint8Array(f),p=m=0,h=u.length;p<h;p++)g=u[p],y.set(g,m),m+=g.length;return y}},c={arraySet:function(u,p,h,f,m){for(var g=0;g<f;g++)u[m+g]=p[h+g]},flattenChunks:function(u){return[].concat.apply([],u)}};a.setTyped=function(u){u?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,l)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,c))},a.setTyped(i)},{}],42:[function(n,s,a){var i=n("./common"),l=!0,c=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{c=!1}for(var u=new i.Buf8(256),p=0;p<256;p++)u[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;function h(f,m){if(m<65537&&(f.subarray&&c||!f.subarray&&l))return String.fromCharCode.apply(null,i.shrinkBuf(f,m));for(var g="",y=0;y<m;y++)g+=String.fromCharCode(f[y]);return g}u[254]=u[254]=1,a.string2buf=function(f){var m,g,y,b,S,v=f.length,N=0;for(b=0;b<v;b++)(64512&(g=f.charCodeAt(b)))==55296&&b+1<v&&(64512&(y=f.charCodeAt(b+1)))==56320&&(g=65536+(g-55296<<10)+(y-56320),b++),N+=g<128?1:g<2048?2:g<65536?3:4;for(m=new i.Buf8(N),b=S=0;S<N;b++)(64512&(g=f.charCodeAt(b)))==55296&&b+1<v&&(64512&(y=f.charCodeAt(b+1)))==56320&&(g=65536+(g-55296<<10)+(y-56320),b++),g<128?m[S++]=g:(g<2048?m[S++]=192|g>>>6:(g<65536?m[S++]=224|g>>>12:(m[S++]=240|g>>>18,m[S++]=128|g>>>12&63),m[S++]=128|g>>>6&63),m[S++]=128|63&g);return m},a.buf2binstring=function(f){return h(f,f.length)},a.binstring2buf=function(f){for(var m=new i.Buf8(f.length),g=0,y=m.length;g<y;g++)m[g]=f.charCodeAt(g);return m},a.buf2string=function(f,m){var g,y,b,S,v=m||f.length,N=new Array(2*v);for(g=y=0;g<v;)if((b=f[g++])<128)N[y++]=b;else if(4<(S=u[b]))N[y++]=65533,g+=S-1;else{for(b&=S===2?31:S===3?15:7;1<S&&g<v;)b=b<<6|63&f[g++],S--;1<S?N[y++]=65533:b<65536?N[y++]=b:(b-=65536,N[y++]=55296|b>>10&1023,N[y++]=56320|1023&b)}return h(N,y)},a.utf8border=function(f,m){var g;for((m=m||f.length)>f.length&&(m=f.length),g=m-1;0<=g&&(192&f[g])==128;)g--;return g<0||g===0?m:g+u[f[g]]>m?g:m}},{"./common":41}],43:[function(n,s,a){s.exports=function(i,l,c,u){for(var p=65535&i|0,h=i>>>16&65535|0,f=0;c!==0;){for(c-=f=2e3<c?2e3:c;h=h+(p=p+l[u++]|0)|0,--f;);p%=65521,h%=65521}return p|h<<16|0}},{}],44:[function(n,s,a){s.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,s,a){var i=(function(){for(var l,c=[],u=0;u<256;u++){l=u;for(var p=0;p<8;p++)l=1&l?3988292384^l>>>1:l>>>1;c[u]=l}return c})();s.exports=function(l,c,u,p){var h=i,f=p+u;l^=-1;for(var m=p;m<f;m++)l=l>>>8^h[255&(l^c[m])];return-1^l}},{}],46:[function(n,s,a){var i,l=n("../utils/common"),c=n("./trees"),u=n("./adler32"),p=n("./crc32"),h=n("./messages"),f=0,m=4,g=0,y=-2,b=-1,S=4,v=2,N=8,C=9,_=286,R=30,D=19,V=2*_+1,I=15,A=3,U=258,W=U+A+1,T=42,M=113,j=1,P=2,L=3,B=4;function q(F,le){return F.msg=h[le],le}function G(F){return(F<<1)-(4<F?9:0)}function O(F){for(var le=F.length;0<=--le;)F[le]=0}function $(F){var le=F.state,Z=le.pending;Z>F.avail_out&&(Z=F.avail_out),Z!==0&&(l.arraySet(F.output,le.pending_buf,le.pending_out,Z,F.next_out),F.next_out+=Z,le.pending_out+=Z,F.total_out+=Z,F.avail_out-=Z,le.pending-=Z,le.pending===0&&(le.pending_out=0))}function K(F,le){c._tr_flush_block(F,0<=F.block_start?F.block_start:-1,F.strstart-F.block_start,le),F.block_start=F.strstart,$(F.strm)}function H(F,le){F.pending_buf[F.pending++]=le}function ee(F,le){F.pending_buf[F.pending++]=le>>>8&255,F.pending_buf[F.pending++]=255&le}function Y(F,le){var Z,te,ne=F.max_chain_length,ae=F.strstart,we=F.prev_length,Ce=F.nice_match,ue=F.strstart>F.w_size-W?F.strstart-(F.w_size-W):0,pe=F.window,je=F.w_mask,Ne=F.prev,he=F.strstart+U,Ee=pe[ae+we-1],Re=pe[ae+we];F.prev_length>=F.good_match&&(ne>>=2),Ce>F.lookahead&&(Ce=F.lookahead);do if(pe[(Z=le)+we]===Re&&pe[Z+we-1]===Ee&&pe[Z]===pe[ae]&&pe[++Z]===pe[ae+1]){ae+=2,Z++;do;while(pe[++ae]===pe[++Z]&&pe[++ae]===pe[++Z]&&pe[++ae]===pe[++Z]&&pe[++ae]===pe[++Z]&&pe[++ae]===pe[++Z]&&pe[++ae]===pe[++Z]&&pe[++ae]===pe[++Z]&&pe[++ae]===pe[++Z]&&ae<he);if(te=U-(he-ae),ae=he-U,we<te){if(F.match_start=le,Ce<=(we=te))break;Ee=pe[ae+we-1],Re=pe[ae+we]}}while((le=Ne[le&je])>ue&&--ne!=0);return we<=F.lookahead?we:F.lookahead}function re(F){var le,Z,te,ne,ae,we,Ce,ue,pe,je,Ne=F.w_size;do{if(ne=F.window_size-F.lookahead-F.strstart,F.strstart>=Ne+(Ne-W)){for(l.arraySet(F.window,F.window,Ne,Ne,0),F.match_start-=Ne,F.strstart-=Ne,F.block_start-=Ne,le=Z=F.hash_size;te=F.head[--le],F.head[le]=Ne<=te?te-Ne:0,--Z;);for(le=Z=Ne;te=F.prev[--le],F.prev[le]=Ne<=te?te-Ne:0,--Z;);ne+=Ne}if(F.strm.avail_in===0)break;if(we=F.strm,Ce=F.window,ue=F.strstart+F.lookahead,pe=ne,je=void 0,je=we.avail_in,pe<je&&(je=pe),Z=je===0?0:(we.avail_in-=je,l.arraySet(Ce,we.input,we.next_in,je,ue),we.state.wrap===1?we.adler=u(we.adler,Ce,je,ue):we.state.wrap===2&&(we.adler=p(we.adler,Ce,je,ue)),we.next_in+=je,we.total_in+=je,je),F.lookahead+=Z,F.lookahead+F.insert>=A)for(ae=F.strstart-F.insert,F.ins_h=F.window[ae],F.ins_h=(F.ins_h<<F.hash_shift^F.window[ae+1])&F.hash_mask;F.insert&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[ae+A-1])&F.hash_mask,F.prev[ae&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=ae,ae++,F.insert--,!(F.lookahead+F.insert<A)););}while(F.lookahead<W&&F.strm.avail_in!==0)}function de(F,le){for(var Z,te;;){if(F.lookahead<W){if(re(F),F.lookahead<W&&le===f)return j;if(F.lookahead===0)break}if(Z=0,F.lookahead>=A&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+A-1])&F.hash_mask,Z=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart),Z!==0&&F.strstart-Z<=F.w_size-W&&(F.match_length=Y(F,Z)),F.match_length>=A)if(te=c._tr_tally(F,F.strstart-F.match_start,F.match_length-A),F.lookahead-=F.match_length,F.match_length<=F.max_lazy_match&&F.lookahead>=A){for(F.match_length--;F.strstart++,F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+A-1])&F.hash_mask,Z=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart,--F.match_length!=0;);F.strstart++}else F.strstart+=F.match_length,F.match_length=0,F.ins_h=F.window[F.strstart],F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+1])&F.hash_mask;else te=c._tr_tally(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++;if(te&&(K(F,!1),F.strm.avail_out===0))return j}return F.insert=F.strstart<A-1?F.strstart:A-1,le===m?(K(F,!0),F.strm.avail_out===0?L:B):F.last_lit&&(K(F,!1),F.strm.avail_out===0)?j:P}function X(F,le){for(var Z,te,ne;;){if(F.lookahead<W){if(re(F),F.lookahead<W&&le===f)return j;if(F.lookahead===0)break}if(Z=0,F.lookahead>=A&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+A-1])&F.hash_mask,Z=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart),F.prev_length=F.match_length,F.prev_match=F.match_start,F.match_length=A-1,Z!==0&&F.prev_length<F.max_lazy_match&&F.strstart-Z<=F.w_size-W&&(F.match_length=Y(F,Z),F.match_length<=5&&(F.strategy===1||F.match_length===A&&4096<F.strstart-F.match_start)&&(F.match_length=A-1)),F.prev_length>=A&&F.match_length<=F.prev_length){for(ne=F.strstart+F.lookahead-A,te=c._tr_tally(F,F.strstart-1-F.prev_match,F.prev_length-A),F.lookahead-=F.prev_length-1,F.prev_length-=2;++F.strstart<=ne&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+A-1])&F.hash_mask,Z=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart),--F.prev_length!=0;);if(F.match_available=0,F.match_length=A-1,F.strstart++,te&&(K(F,!1),F.strm.avail_out===0))return j}else if(F.match_available){if((te=c._tr_tally(F,0,F.window[F.strstart-1]))&&K(F,!1),F.strstart++,F.lookahead--,F.strm.avail_out===0)return j}else F.match_available=1,F.strstart++,F.lookahead--}return F.match_available&&(te=c._tr_tally(F,0,F.window[F.strstart-1]),F.match_available=0),F.insert=F.strstart<A-1?F.strstart:A-1,le===m?(K(F,!0),F.strm.avail_out===0?L:B):F.last_lit&&(K(F,!1),F.strm.avail_out===0)?j:P}function oe(F,le,Z,te,ne){this.good_length=F,this.max_lazy=le,this.nice_length=Z,this.max_chain=te,this.func=ne}function ye(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=N,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*V),this.dyn_dtree=new l.Buf16(2*(2*R+1)),this.bl_tree=new l.Buf16(2*(2*D+1)),O(this.dyn_ltree),O(this.dyn_dtree),O(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(I+1),this.heap=new l.Buf16(2*_+1),O(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*_+1),O(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function be(F){var le;return F&&F.state?(F.total_in=F.total_out=0,F.data_type=v,(le=F.state).pending=0,le.pending_out=0,le.wrap<0&&(le.wrap=-le.wrap),le.status=le.wrap?T:M,F.adler=le.wrap===2?0:1,le.last_flush=f,c._tr_init(le),g):q(F,y)}function Ie(F){var le=be(F);return le===g&&(function(Z){Z.window_size=2*Z.w_size,O(Z.head),Z.max_lazy_match=i[Z.level].max_lazy,Z.good_match=i[Z.level].good_length,Z.nice_match=i[Z.level].nice_length,Z.max_chain_length=i[Z.level].max_chain,Z.strstart=0,Z.block_start=0,Z.lookahead=0,Z.insert=0,Z.match_length=Z.prev_length=A-1,Z.match_available=0,Z.ins_h=0})(F.state),le}function De(F,le,Z,te,ne,ae){if(!F)return y;var we=1;if(le===b&&(le=6),te<0?(we=0,te=-te):15<te&&(we=2,te-=16),ne<1||C<ne||Z!==N||te<8||15<te||le<0||9<le||ae<0||S<ae)return q(F,y);te===8&&(te=9);var Ce=new ye;return(F.state=Ce).strm=F,Ce.wrap=we,Ce.gzhead=null,Ce.w_bits=te,Ce.w_size=1<<Ce.w_bits,Ce.w_mask=Ce.w_size-1,Ce.hash_bits=ne+7,Ce.hash_size=1<<Ce.hash_bits,Ce.hash_mask=Ce.hash_size-1,Ce.hash_shift=~~((Ce.hash_bits+A-1)/A),Ce.window=new l.Buf8(2*Ce.w_size),Ce.head=new l.Buf16(Ce.hash_size),Ce.prev=new l.Buf16(Ce.w_size),Ce.lit_bufsize=1<<ne+6,Ce.pending_buf_size=4*Ce.lit_bufsize,Ce.pending_buf=new l.Buf8(Ce.pending_buf_size),Ce.d_buf=1*Ce.lit_bufsize,Ce.l_buf=3*Ce.lit_bufsize,Ce.level=le,Ce.strategy=ae,Ce.method=Z,Ie(F)}i=[new oe(0,0,0,0,function(F,le){var Z=65535;for(Z>F.pending_buf_size-5&&(Z=F.pending_buf_size-5);;){if(F.lookahead<=1){if(re(F),F.lookahead===0&&le===f)return j;if(F.lookahead===0)break}F.strstart+=F.lookahead,F.lookahead=0;var te=F.block_start+Z;if((F.strstart===0||F.strstart>=te)&&(F.lookahead=F.strstart-te,F.strstart=te,K(F,!1),F.strm.avail_out===0)||F.strstart-F.block_start>=F.w_size-W&&(K(F,!1),F.strm.avail_out===0))return j}return F.insert=0,le===m?(K(F,!0),F.strm.avail_out===0?L:B):(F.strstart>F.block_start&&(K(F,!1),F.strm.avail_out),j)}),new oe(4,4,8,4,de),new oe(4,5,16,8,de),new oe(4,6,32,32,de),new oe(4,4,16,16,X),new oe(8,16,32,32,X),new oe(8,16,128,128,X),new oe(8,32,128,256,X),new oe(32,128,258,1024,X),new oe(32,258,258,4096,X)],a.deflateInit=function(F,le){return De(F,le,N,15,8,0)},a.deflateInit2=De,a.deflateReset=Ie,a.deflateResetKeep=be,a.deflateSetHeader=function(F,le){return F&&F.state?F.state.wrap!==2?y:(F.state.gzhead=le,g):y},a.deflate=function(F,le){var Z,te,ne,ae;if(!F||!F.state||5<le||le<0)return F?q(F,y):y;if(te=F.state,!F.output||!F.input&&F.avail_in!==0||te.status===666&&le!==m)return q(F,F.avail_out===0?-5:y);if(te.strm=F,Z=te.last_flush,te.last_flush=le,te.status===T)if(te.wrap===2)F.adler=0,H(te,31),H(te,139),H(te,8),te.gzhead?(H(te,(te.gzhead.text?1:0)+(te.gzhead.hcrc?2:0)+(te.gzhead.extra?4:0)+(te.gzhead.name?8:0)+(te.gzhead.comment?16:0)),H(te,255&te.gzhead.time),H(te,te.gzhead.time>>8&255),H(te,te.gzhead.time>>16&255),H(te,te.gzhead.time>>24&255),H(te,te.level===9?2:2<=te.strategy||te.level<2?4:0),H(te,255&te.gzhead.os),te.gzhead.extra&&te.gzhead.extra.length&&(H(te,255&te.gzhead.extra.length),H(te,te.gzhead.extra.length>>8&255)),te.gzhead.hcrc&&(F.adler=p(F.adler,te.pending_buf,te.pending,0)),te.gzindex=0,te.status=69):(H(te,0),H(te,0),H(te,0),H(te,0),H(te,0),H(te,te.level===9?2:2<=te.strategy||te.level<2?4:0),H(te,3),te.status=M);else{var we=N+(te.w_bits-8<<4)<<8;we|=(2<=te.strategy||te.level<2?0:te.level<6?1:te.level===6?2:3)<<6,te.strstart!==0&&(we|=32),we+=31-we%31,te.status=M,ee(te,we),te.strstart!==0&&(ee(te,F.adler>>>16),ee(te,65535&F.adler)),F.adler=1}if(te.status===69)if(te.gzhead.extra){for(ne=te.pending;te.gzindex<(65535&te.gzhead.extra.length)&&(te.pending!==te.pending_buf_size||(te.gzhead.hcrc&&te.pending>ne&&(F.adler=p(F.adler,te.pending_buf,te.pending-ne,ne)),$(F),ne=te.pending,te.pending!==te.pending_buf_size));)H(te,255&te.gzhead.extra[te.gzindex]),te.gzindex++;te.gzhead.hcrc&&te.pending>ne&&(F.adler=p(F.adler,te.pending_buf,te.pending-ne,ne)),te.gzindex===te.gzhead.extra.length&&(te.gzindex=0,te.status=73)}else te.status=73;if(te.status===73)if(te.gzhead.name){ne=te.pending;do{if(te.pending===te.pending_buf_size&&(te.gzhead.hcrc&&te.pending>ne&&(F.adler=p(F.adler,te.pending_buf,te.pending-ne,ne)),$(F),ne=te.pending,te.pending===te.pending_buf_size)){ae=1;break}ae=te.gzindex<te.gzhead.name.length?255&te.gzhead.name.charCodeAt(te.gzindex++):0,H(te,ae)}while(ae!==0);te.gzhead.hcrc&&te.pending>ne&&(F.adler=p(F.adler,te.pending_buf,te.pending-ne,ne)),ae===0&&(te.gzindex=0,te.status=91)}else te.status=91;if(te.status===91)if(te.gzhead.comment){ne=te.pending;do{if(te.pending===te.pending_buf_size&&(te.gzhead.hcrc&&te.pending>ne&&(F.adler=p(F.adler,te.pending_buf,te.pending-ne,ne)),$(F),ne=te.pending,te.pending===te.pending_buf_size)){ae=1;break}ae=te.gzindex<te.gzhead.comment.length?255&te.gzhead.comment.charCodeAt(te.gzindex++):0,H(te,ae)}while(ae!==0);te.gzhead.hcrc&&te.pending>ne&&(F.adler=p(F.adler,te.pending_buf,te.pending-ne,ne)),ae===0&&(te.status=103)}else te.status=103;if(te.status===103&&(te.gzhead.hcrc?(te.pending+2>te.pending_buf_size&&$(F),te.pending+2<=te.pending_buf_size&&(H(te,255&F.adler),H(te,F.adler>>8&255),F.adler=0,te.status=M)):te.status=M),te.pending!==0){if($(F),F.avail_out===0)return te.last_flush=-1,g}else if(F.avail_in===0&&G(le)<=G(Z)&&le!==m)return q(F,-5);if(te.status===666&&F.avail_in!==0)return q(F,-5);if(F.avail_in!==0||te.lookahead!==0||le!==f&&te.status!==666){var Ce=te.strategy===2?(function(ue,pe){for(var je;;){if(ue.lookahead===0&&(re(ue),ue.lookahead===0)){if(pe===f)return j;break}if(ue.match_length=0,je=c._tr_tally(ue,0,ue.window[ue.strstart]),ue.lookahead--,ue.strstart++,je&&(K(ue,!1),ue.strm.avail_out===0))return j}return ue.insert=0,pe===m?(K(ue,!0),ue.strm.avail_out===0?L:B):ue.last_lit&&(K(ue,!1),ue.strm.avail_out===0)?j:P})(te,le):te.strategy===3?(function(ue,pe){for(var je,Ne,he,Ee,Re=ue.window;;){if(ue.lookahead<=U){if(re(ue),ue.lookahead<=U&&pe===f)return j;if(ue.lookahead===0)break}if(ue.match_length=0,ue.lookahead>=A&&0<ue.strstart&&(Ne=Re[he=ue.strstart-1])===Re[++he]&&Ne===Re[++he]&&Ne===Re[++he]){Ee=ue.strstart+U;do;while(Ne===Re[++he]&&Ne===Re[++he]&&Ne===Re[++he]&&Ne===Re[++he]&&Ne===Re[++he]&&Ne===Re[++he]&&Ne===Re[++he]&&Ne===Re[++he]&&he<Ee);ue.match_length=U-(Ee-he),ue.match_length>ue.lookahead&&(ue.match_length=ue.lookahead)}if(ue.match_length>=A?(je=c._tr_tally(ue,1,ue.match_length-A),ue.lookahead-=ue.match_length,ue.strstart+=ue.match_length,ue.match_length=0):(je=c._tr_tally(ue,0,ue.window[ue.strstart]),ue.lookahead--,ue.strstart++),je&&(K(ue,!1),ue.strm.avail_out===0))return j}return ue.insert=0,pe===m?(K(ue,!0),ue.strm.avail_out===0?L:B):ue.last_lit&&(K(ue,!1),ue.strm.avail_out===0)?j:P})(te,le):i[te.level].func(te,le);if(Ce!==L&&Ce!==B||(te.status=666),Ce===j||Ce===L)return F.avail_out===0&&(te.last_flush=-1),g;if(Ce===P&&(le===1?c._tr_align(te):le!==5&&(c._tr_stored_block(te,0,0,!1),le===3&&(O(te.head),te.lookahead===0&&(te.strstart=0,te.block_start=0,te.insert=0))),$(F),F.avail_out===0))return te.last_flush=-1,g}return le!==m?g:te.wrap<=0?1:(te.wrap===2?(H(te,255&F.adler),H(te,F.adler>>8&255),H(te,F.adler>>16&255),H(te,F.adler>>24&255),H(te,255&F.total_in),H(te,F.total_in>>8&255),H(te,F.total_in>>16&255),H(te,F.total_in>>24&255)):(ee(te,F.adler>>>16),ee(te,65535&F.adler)),$(F),0<te.wrap&&(te.wrap=-te.wrap),te.pending!==0?g:1)},a.deflateEnd=function(F){var le;return F&&F.state?(le=F.state.status)!==T&&le!==69&&le!==73&&le!==91&&le!==103&&le!==M&&le!==666?q(F,y):(F.state=null,le===M?q(F,-3):g):y},a.deflateSetDictionary=function(F,le){var Z,te,ne,ae,we,Ce,ue,pe,je=le.length;if(!F||!F.state||(ae=(Z=F.state).wrap)===2||ae===1&&Z.status!==T||Z.lookahead)return y;for(ae===1&&(F.adler=u(F.adler,le,je,0)),Z.wrap=0,je>=Z.w_size&&(ae===0&&(O(Z.head),Z.strstart=0,Z.block_start=0,Z.insert=0),pe=new l.Buf8(Z.w_size),l.arraySet(pe,le,je-Z.w_size,Z.w_size,0),le=pe,je=Z.w_size),we=F.avail_in,Ce=F.next_in,ue=F.input,F.avail_in=je,F.next_in=0,F.input=le,re(Z);Z.lookahead>=A;){for(te=Z.strstart,ne=Z.lookahead-(A-1);Z.ins_h=(Z.ins_h<<Z.hash_shift^Z.window[te+A-1])&Z.hash_mask,Z.prev[te&Z.w_mask]=Z.head[Z.ins_h],Z.head[Z.ins_h]=te,te++,--ne;);Z.strstart=te,Z.lookahead=A-1,re(Z)}return Z.strstart+=Z.lookahead,Z.block_start=Z.strstart,Z.insert=Z.lookahead,Z.lookahead=0,Z.match_length=Z.prev_length=A-1,Z.match_available=0,F.next_in=Ce,F.input=ue,F.avail_in=we,Z.wrap=ae,g},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,s,a){s.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,s,a){s.exports=function(i,l){var c,u,p,h,f,m,g,y,b,S,v,N,C,_,R,D,V,I,A,U,W,T,M,j,P;c=i.state,u=i.next_in,j=i.input,p=u+(i.avail_in-5),h=i.next_out,P=i.output,f=h-(l-i.avail_out),m=h+(i.avail_out-257),g=c.dmax,y=c.wsize,b=c.whave,S=c.wnext,v=c.window,N=c.hold,C=c.bits,_=c.lencode,R=c.distcode,D=(1<<c.lenbits)-1,V=(1<<c.distbits)-1;e:do{C<15&&(N+=j[u++]<<C,C+=8,N+=j[u++]<<C,C+=8),I=_[N&D];t:for(;;){if(N>>>=A=I>>>24,C-=A,(A=I>>>16&255)===0)P[h++]=65535&I;else{if(!(16&A)){if((64&A)==0){I=_[(65535&I)+(N&(1<<A)-1)];continue t}if(32&A){c.mode=12;break e}i.msg="invalid literal/length code",c.mode=30;break e}U=65535&I,(A&=15)&&(C<A&&(N+=j[u++]<<C,C+=8),U+=N&(1<<A)-1,N>>>=A,C-=A),C<15&&(N+=j[u++]<<C,C+=8,N+=j[u++]<<C,C+=8),I=R[N&V];n:for(;;){if(N>>>=A=I>>>24,C-=A,!(16&(A=I>>>16&255))){if((64&A)==0){I=R[(65535&I)+(N&(1<<A)-1)];continue n}i.msg="invalid distance code",c.mode=30;break e}if(W=65535&I,C<(A&=15)&&(N+=j[u++]<<C,(C+=8)<A&&(N+=j[u++]<<C,C+=8)),g<(W+=N&(1<<A)-1)){i.msg="invalid distance too far back",c.mode=30;break e}if(N>>>=A,C-=A,(A=h-f)<W){if(b<(A=W-A)&&c.sane){i.msg="invalid distance too far back",c.mode=30;break e}if(M=v,(T=0)===S){if(T+=y-A,A<U){for(U-=A;P[h++]=v[T++],--A;);T=h-W,M=P}}else if(S<A){if(T+=y+S-A,(A-=S)<U){for(U-=A;P[h++]=v[T++],--A;);if(T=0,S<U){for(U-=A=S;P[h++]=v[T++],--A;);T=h-W,M=P}}}else if(T+=S-A,A<U){for(U-=A;P[h++]=v[T++],--A;);T=h-W,M=P}for(;2<U;)P[h++]=M[T++],P[h++]=M[T++],P[h++]=M[T++],U-=3;U&&(P[h++]=M[T++],1<U&&(P[h++]=M[T++]))}else{for(T=h-W;P[h++]=P[T++],P[h++]=P[T++],P[h++]=P[T++],2<(U-=3););U&&(P[h++]=P[T++],1<U&&(P[h++]=P[T++]))}break}}break}}while(u<p&&h<m);u-=U=C>>3,N&=(1<<(C-=U<<3))-1,i.next_in=u,i.next_out=h,i.avail_in=u<p?p-u+5:5-(u-p),i.avail_out=h<m?m-h+257:257-(h-m),c.hold=N,c.bits=C}},{}],49:[function(n,s,a){var i=n("../utils/common"),l=n("./adler32"),c=n("./crc32"),u=n("./inffast"),p=n("./inftrees"),h=1,f=2,m=0,g=-2,y=1,b=852,S=592;function v(T){return(T>>>24&255)+(T>>>8&65280)+((65280&T)<<8)+((255&T)<<24)}function N(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function C(T){var M;return T&&T.state?(M=T.state,T.total_in=T.total_out=M.total=0,T.msg="",M.wrap&&(T.adler=1&M.wrap),M.mode=y,M.last=0,M.havedict=0,M.dmax=32768,M.head=null,M.hold=0,M.bits=0,M.lencode=M.lendyn=new i.Buf32(b),M.distcode=M.distdyn=new i.Buf32(S),M.sane=1,M.back=-1,m):g}function _(T){var M;return T&&T.state?((M=T.state).wsize=0,M.whave=0,M.wnext=0,C(T)):g}function R(T,M){var j,P;return T&&T.state?(P=T.state,M<0?(j=0,M=-M):(j=1+(M>>4),M<48&&(M&=15)),M&&(M<8||15<M)?g:(P.window!==null&&P.wbits!==M&&(P.window=null),P.wrap=j,P.wbits=M,_(T))):g}function D(T,M){var j,P;return T?(P=new N,(T.state=P).window=null,(j=R(T,M))!==m&&(T.state=null),j):g}var V,I,A=!0;function U(T){if(A){var M;for(V=new i.Buf32(512),I=new i.Buf32(32),M=0;M<144;)T.lens[M++]=8;for(;M<256;)T.lens[M++]=9;for(;M<280;)T.lens[M++]=7;for(;M<288;)T.lens[M++]=8;for(p(h,T.lens,0,288,V,0,T.work,{bits:9}),M=0;M<32;)T.lens[M++]=5;p(f,T.lens,0,32,I,0,T.work,{bits:5}),A=!1}T.lencode=V,T.lenbits=9,T.distcode=I,T.distbits=5}function W(T,M,j,P){var L,B=T.state;return B.window===null&&(B.wsize=1<<B.wbits,B.wnext=0,B.whave=0,B.window=new i.Buf8(B.wsize)),P>=B.wsize?(i.arraySet(B.window,M,j-B.wsize,B.wsize,0),B.wnext=0,B.whave=B.wsize):(P<(L=B.wsize-B.wnext)&&(L=P),i.arraySet(B.window,M,j-P,L,B.wnext),(P-=L)?(i.arraySet(B.window,M,j-P,P,0),B.wnext=P,B.whave=B.wsize):(B.wnext+=L,B.wnext===B.wsize&&(B.wnext=0),B.whave<B.wsize&&(B.whave+=L))),0}a.inflateReset=_,a.inflateReset2=R,a.inflateResetKeep=C,a.inflateInit=function(T){return D(T,15)},a.inflateInit2=D,a.inflate=function(T,M){var j,P,L,B,q,G,O,$,K,H,ee,Y,re,de,X,oe,ye,be,Ie,De,F,le,Z,te,ne=0,ae=new i.Buf8(4),we=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!T||!T.state||!T.output||!T.input&&T.avail_in!==0)return g;(j=T.state).mode===12&&(j.mode=13),q=T.next_out,L=T.output,O=T.avail_out,B=T.next_in,P=T.input,G=T.avail_in,$=j.hold,K=j.bits,H=G,ee=O,le=m;e:for(;;)switch(j.mode){case y:if(j.wrap===0){j.mode=13;break}for(;K<16;){if(G===0)break e;G--,$+=P[B++]<<K,K+=8}if(2&j.wrap&&$===35615){ae[j.check=0]=255&$,ae[1]=$>>>8&255,j.check=c(j.check,ae,2,0),K=$=0,j.mode=2;break}if(j.flags=0,j.head&&(j.head.done=!1),!(1&j.wrap)||(((255&$)<<8)+($>>8))%31){T.msg="incorrect header check",j.mode=30;break}if((15&$)!=8){T.msg="unknown compression method",j.mode=30;break}if(K-=4,F=8+(15&($>>>=4)),j.wbits===0)j.wbits=F;else if(F>j.wbits){T.msg="invalid window size",j.mode=30;break}j.dmax=1<<F,T.adler=j.check=1,j.mode=512&$?10:12,K=$=0;break;case 2:for(;K<16;){if(G===0)break e;G--,$+=P[B++]<<K,K+=8}if(j.flags=$,(255&j.flags)!=8){T.msg="unknown compression method",j.mode=30;break}if(57344&j.flags){T.msg="unknown header flags set",j.mode=30;break}j.head&&(j.head.text=$>>8&1),512&j.flags&&(ae[0]=255&$,ae[1]=$>>>8&255,j.check=c(j.check,ae,2,0)),K=$=0,j.mode=3;case 3:for(;K<32;){if(G===0)break e;G--,$+=P[B++]<<K,K+=8}j.head&&(j.head.time=$),512&j.flags&&(ae[0]=255&$,ae[1]=$>>>8&255,ae[2]=$>>>16&255,ae[3]=$>>>24&255,j.check=c(j.check,ae,4,0)),K=$=0,j.mode=4;case 4:for(;K<16;){if(G===0)break e;G--,$+=P[B++]<<K,K+=8}j.head&&(j.head.xflags=255&$,j.head.os=$>>8),512&j.flags&&(ae[0]=255&$,ae[1]=$>>>8&255,j.check=c(j.check,ae,2,0)),K=$=0,j.mode=5;case 5:if(1024&j.flags){for(;K<16;){if(G===0)break e;G--,$+=P[B++]<<K,K+=8}j.length=$,j.head&&(j.head.extra_len=$),512&j.flags&&(ae[0]=255&$,ae[1]=$>>>8&255,j.check=c(j.check,ae,2,0)),K=$=0}else j.head&&(j.head.extra=null);j.mode=6;case 6:if(1024&j.flags&&(G<(Y=j.length)&&(Y=G),Y&&(j.head&&(F=j.head.extra_len-j.length,j.head.extra||(j.head.extra=new Array(j.head.extra_len)),i.arraySet(j.head.extra,P,B,Y,F)),512&j.flags&&(j.check=c(j.check,P,Y,B)),G-=Y,B+=Y,j.length-=Y),j.length))break e;j.length=0,j.mode=7;case 7:if(2048&j.flags){if(G===0)break e;for(Y=0;F=P[B+Y++],j.head&&F&&j.length<65536&&(j.head.name+=String.fromCharCode(F)),F&&Y<G;);if(512&j.flags&&(j.check=c(j.check,P,Y,B)),G-=Y,B+=Y,F)break e}else j.head&&(j.head.name=null);j.length=0,j.mode=8;case 8:if(4096&j.flags){if(G===0)break e;for(Y=0;F=P[B+Y++],j.head&&F&&j.length<65536&&(j.head.comment+=String.fromCharCode(F)),F&&Y<G;);if(512&j.flags&&(j.check=c(j.check,P,Y,B)),G-=Y,B+=Y,F)break e}else j.head&&(j.head.comment=null);j.mode=9;case 9:if(512&j.flags){for(;K<16;){if(G===0)break e;G--,$+=P[B++]<<K,K+=8}if($!==(65535&j.check)){T.msg="header crc mismatch",j.mode=30;break}K=$=0}j.head&&(j.head.hcrc=j.flags>>9&1,j.head.done=!0),T.adler=j.check=0,j.mode=12;break;case 10:for(;K<32;){if(G===0)break e;G--,$+=P[B++]<<K,K+=8}T.adler=j.check=v($),K=$=0,j.mode=11;case 11:if(j.havedict===0)return T.next_out=q,T.avail_out=O,T.next_in=B,T.avail_in=G,j.hold=$,j.bits=K,2;T.adler=j.check=1,j.mode=12;case 12:if(M===5||M===6)break e;case 13:if(j.last){$>>>=7&K,K-=7&K,j.mode=27;break}for(;K<3;){if(G===0)break e;G--,$+=P[B++]<<K,K+=8}switch(j.last=1&$,K-=1,3&($>>>=1)){case 0:j.mode=14;break;case 1:if(U(j),j.mode=20,M!==6)break;$>>>=2,K-=2;break e;case 2:j.mode=17;break;case 3:T.msg="invalid block type",j.mode=30}$>>>=2,K-=2;break;case 14:for($>>>=7&K,K-=7&K;K<32;){if(G===0)break e;G--,$+=P[B++]<<K,K+=8}if((65535&$)!=($>>>16^65535)){T.msg="invalid stored block lengths",j.mode=30;break}if(j.length=65535&$,K=$=0,j.mode=15,M===6)break e;case 15:j.mode=16;case 16:if(Y=j.length){if(G<Y&&(Y=G),O<Y&&(Y=O),Y===0)break e;i.arraySet(L,P,B,Y,q),G-=Y,B+=Y,O-=Y,q+=Y,j.length-=Y;break}j.mode=12;break;case 17:for(;K<14;){if(G===0)break e;G--,$+=P[B++]<<K,K+=8}if(j.nlen=257+(31&$),$>>>=5,K-=5,j.ndist=1+(31&$),$>>>=5,K-=5,j.ncode=4+(15&$),$>>>=4,K-=4,286<j.nlen||30<j.ndist){T.msg="too many length or distance symbols",j.mode=30;break}j.have=0,j.mode=18;case 18:for(;j.have<j.ncode;){for(;K<3;){if(G===0)break e;G--,$+=P[B++]<<K,K+=8}j.lens[we[j.have++]]=7&$,$>>>=3,K-=3}for(;j.have<19;)j.lens[we[j.have++]]=0;if(j.lencode=j.lendyn,j.lenbits=7,Z={bits:j.lenbits},le=p(0,j.lens,0,19,j.lencode,0,j.work,Z),j.lenbits=Z.bits,le){T.msg="invalid code lengths set",j.mode=30;break}j.have=0,j.mode=19;case 19:for(;j.have<j.nlen+j.ndist;){for(;oe=(ne=j.lencode[$&(1<<j.lenbits)-1])>>>16&255,ye=65535&ne,!((X=ne>>>24)<=K);){if(G===0)break e;G--,$+=P[B++]<<K,K+=8}if(ye<16)$>>>=X,K-=X,j.lens[j.have++]=ye;else{if(ye===16){for(te=X+2;K<te;){if(G===0)break e;G--,$+=P[B++]<<K,K+=8}if($>>>=X,K-=X,j.have===0){T.msg="invalid bit length repeat",j.mode=30;break}F=j.lens[j.have-1],Y=3+(3&$),$>>>=2,K-=2}else if(ye===17){for(te=X+3;K<te;){if(G===0)break e;G--,$+=P[B++]<<K,K+=8}K-=X,F=0,Y=3+(7&($>>>=X)),$>>>=3,K-=3}else{for(te=X+7;K<te;){if(G===0)break e;G--,$+=P[B++]<<K,K+=8}K-=X,F=0,Y=11+(127&($>>>=X)),$>>>=7,K-=7}if(j.have+Y>j.nlen+j.ndist){T.msg="invalid bit length repeat",j.mode=30;break}for(;Y--;)j.lens[j.have++]=F}}if(j.mode===30)break;if(j.lens[256]===0){T.msg="invalid code -- missing end-of-block",j.mode=30;break}if(j.lenbits=9,Z={bits:j.lenbits},le=p(h,j.lens,0,j.nlen,j.lencode,0,j.work,Z),j.lenbits=Z.bits,le){T.msg="invalid literal/lengths set",j.mode=30;break}if(j.distbits=6,j.distcode=j.distdyn,Z={bits:j.distbits},le=p(f,j.lens,j.nlen,j.ndist,j.distcode,0,j.work,Z),j.distbits=Z.bits,le){T.msg="invalid distances set",j.mode=30;break}if(j.mode=20,M===6)break e;case 20:j.mode=21;case 21:if(6<=G&&258<=O){T.next_out=q,T.avail_out=O,T.next_in=B,T.avail_in=G,j.hold=$,j.bits=K,u(T,ee),q=T.next_out,L=T.output,O=T.avail_out,B=T.next_in,P=T.input,G=T.avail_in,$=j.hold,K=j.bits,j.mode===12&&(j.back=-1);break}for(j.back=0;oe=(ne=j.lencode[$&(1<<j.lenbits)-1])>>>16&255,ye=65535&ne,!((X=ne>>>24)<=K);){if(G===0)break e;G--,$+=P[B++]<<K,K+=8}if(oe&&(240&oe)==0){for(be=X,Ie=oe,De=ye;oe=(ne=j.lencode[De+(($&(1<<be+Ie)-1)>>be)])>>>16&255,ye=65535&ne,!(be+(X=ne>>>24)<=K);){if(G===0)break e;G--,$+=P[B++]<<K,K+=8}$>>>=be,K-=be,j.back+=be}if($>>>=X,K-=X,j.back+=X,j.length=ye,oe===0){j.mode=26;break}if(32&oe){j.back=-1,j.mode=12;break}if(64&oe){T.msg="invalid literal/length code",j.mode=30;break}j.extra=15&oe,j.mode=22;case 22:if(j.extra){for(te=j.extra;K<te;){if(G===0)break e;G--,$+=P[B++]<<K,K+=8}j.length+=$&(1<<j.extra)-1,$>>>=j.extra,K-=j.extra,j.back+=j.extra}j.was=j.length,j.mode=23;case 23:for(;oe=(ne=j.distcode[$&(1<<j.distbits)-1])>>>16&255,ye=65535&ne,!((X=ne>>>24)<=K);){if(G===0)break e;G--,$+=P[B++]<<K,K+=8}if((240&oe)==0){for(be=X,Ie=oe,De=ye;oe=(ne=j.distcode[De+(($&(1<<be+Ie)-1)>>be)])>>>16&255,ye=65535&ne,!(be+(X=ne>>>24)<=K);){if(G===0)break e;G--,$+=P[B++]<<K,K+=8}$>>>=be,K-=be,j.back+=be}if($>>>=X,K-=X,j.back+=X,64&oe){T.msg="invalid distance code",j.mode=30;break}j.offset=ye,j.extra=15&oe,j.mode=24;case 24:if(j.extra){for(te=j.extra;K<te;){if(G===0)break e;G--,$+=P[B++]<<K,K+=8}j.offset+=$&(1<<j.extra)-1,$>>>=j.extra,K-=j.extra,j.back+=j.extra}if(j.offset>j.dmax){T.msg="invalid distance too far back",j.mode=30;break}j.mode=25;case 25:if(O===0)break e;if(Y=ee-O,j.offset>Y){if((Y=j.offset-Y)>j.whave&&j.sane){T.msg="invalid distance too far back",j.mode=30;break}re=Y>j.wnext?(Y-=j.wnext,j.wsize-Y):j.wnext-Y,Y>j.length&&(Y=j.length),de=j.window}else de=L,re=q-j.offset,Y=j.length;for(O<Y&&(Y=O),O-=Y,j.length-=Y;L[q++]=de[re++],--Y;);j.length===0&&(j.mode=21);break;case 26:if(O===0)break e;L[q++]=j.length,O--,j.mode=21;break;case 27:if(j.wrap){for(;K<32;){if(G===0)break e;G--,$|=P[B++]<<K,K+=8}if(ee-=O,T.total_out+=ee,j.total+=ee,ee&&(T.adler=j.check=j.flags?c(j.check,L,ee,q-ee):l(j.check,L,ee,q-ee)),ee=O,(j.flags?$:v($))!==j.check){T.msg="incorrect data check",j.mode=30;break}K=$=0}j.mode=28;case 28:if(j.wrap&&j.flags){for(;K<32;){if(G===0)break e;G--,$+=P[B++]<<K,K+=8}if($!==(4294967295&j.total)){T.msg="incorrect length check",j.mode=30;break}K=$=0}j.mode=29;case 29:le=1;break e;case 30:le=-3;break e;case 31:return-4;case 32:default:return g}return T.next_out=q,T.avail_out=O,T.next_in=B,T.avail_in=G,j.hold=$,j.bits=K,(j.wsize||ee!==T.avail_out&&j.mode<30&&(j.mode<27||M!==4))&&W(T,T.output,T.next_out,ee-T.avail_out)?(j.mode=31,-4):(H-=T.avail_in,ee-=T.avail_out,T.total_in+=H,T.total_out+=ee,j.total+=ee,j.wrap&&ee&&(T.adler=j.check=j.flags?c(j.check,L,ee,T.next_out-ee):l(j.check,L,ee,T.next_out-ee)),T.data_type=j.bits+(j.last?64:0)+(j.mode===12?128:0)+(j.mode===20||j.mode===15?256:0),(H==0&&ee===0||M===4)&&le===m&&(le=-5),le)},a.inflateEnd=function(T){if(!T||!T.state)return g;var M=T.state;return M.window&&(M.window=null),T.state=null,m},a.inflateGetHeader=function(T,M){var j;return T&&T.state?(2&(j=T.state).wrap)==0?g:((j.head=M).done=!1,m):g},a.inflateSetDictionary=function(T,M){var j,P=M.length;return T&&T.state?(j=T.state).wrap!==0&&j.mode!==11?g:j.mode===11&&l(1,M,P,0)!==j.check?-3:W(T,M,P,P)?(j.mode=31,-4):(j.havedict=1,m):g},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,s,a){var i=n("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];s.exports=function(h,f,m,g,y,b,S,v){var N,C,_,R,D,V,I,A,U,W=v.bits,T=0,M=0,j=0,P=0,L=0,B=0,q=0,G=0,O=0,$=0,K=null,H=0,ee=new i.Buf16(16),Y=new i.Buf16(16),re=null,de=0;for(T=0;T<=15;T++)ee[T]=0;for(M=0;M<g;M++)ee[f[m+M]]++;for(L=W,P=15;1<=P&&ee[P]===0;P--);if(P<L&&(L=P),P===0)return y[b++]=20971520,y[b++]=20971520,v.bits=1,0;for(j=1;j<P&&ee[j]===0;j++);for(L<j&&(L=j),T=G=1;T<=15;T++)if(G<<=1,(G-=ee[T])<0)return-1;if(0<G&&(h===0||P!==1))return-1;for(Y[1]=0,T=1;T<15;T++)Y[T+1]=Y[T]+ee[T];for(M=0;M<g;M++)f[m+M]!==0&&(S[Y[f[m+M]]++]=M);if(V=h===0?(K=re=S,19):h===1?(K=l,H-=257,re=c,de-=257,256):(K=u,re=p,-1),T=j,D=b,q=M=$=0,_=-1,R=(O=1<<(B=L))-1,h===1&&852<O||h===2&&592<O)return 1;for(;;){for(I=T-q,U=S[M]<V?(A=0,S[M]):S[M]>V?(A=re[de+S[M]],K[H+S[M]]):(A=96,0),N=1<<T-q,j=C=1<<B;y[D+($>>q)+(C-=N)]=I<<24|A<<16|U|0,C!==0;);for(N=1<<T-1;$&N;)N>>=1;if(N!==0?($&=N-1,$+=N):$=0,M++,--ee[T]==0){if(T===P)break;T=f[m+S[M]]}if(L<T&&($&R)!==_){for(q===0&&(q=L),D+=j,G=1<<(B=T-q);B+q<P&&!((G-=ee[B+q])<=0);)B++,G<<=1;if(O+=1<<B,h===1&&852<O||h===2&&592<O)return 1;y[_=$&R]=L<<24|B<<16|D-b|0}}return $!==0&&(y[D+$]=T-q<<24|64<<16|0),v.bits=L,0}},{"../utils/common":41}],51:[function(n,s,a){s.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,s,a){var i=n("../utils/common"),l=0,c=1;function u(ne){for(var ae=ne.length;0<=--ae;)ne[ae]=0}var p=0,h=29,f=256,m=f+1+h,g=30,y=19,b=2*m+1,S=15,v=16,N=7,C=256,_=16,R=17,D=18,V=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],I=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],W=new Array(2*(m+2));u(W);var T=new Array(2*g);u(T);var M=new Array(512);u(M);var j=new Array(256);u(j);var P=new Array(h);u(P);var L,B,q,G=new Array(g);function O(ne,ae,we,Ce,ue){this.static_tree=ne,this.extra_bits=ae,this.extra_base=we,this.elems=Ce,this.max_length=ue,this.has_stree=ne&&ne.length}function $(ne,ae){this.dyn_tree=ne,this.max_code=0,this.stat_desc=ae}function K(ne){return ne<256?M[ne]:M[256+(ne>>>7)]}function H(ne,ae){ne.pending_buf[ne.pending++]=255&ae,ne.pending_buf[ne.pending++]=ae>>>8&255}function ee(ne,ae,we){ne.bi_valid>v-we?(ne.bi_buf|=ae<<ne.bi_valid&65535,H(ne,ne.bi_buf),ne.bi_buf=ae>>v-ne.bi_valid,ne.bi_valid+=we-v):(ne.bi_buf|=ae<<ne.bi_valid&65535,ne.bi_valid+=we)}function Y(ne,ae,we){ee(ne,we[2*ae],we[2*ae+1])}function re(ne,ae){for(var we=0;we|=1&ne,ne>>>=1,we<<=1,0<--ae;);return we>>>1}function de(ne,ae,we){var Ce,ue,pe=new Array(S+1),je=0;for(Ce=1;Ce<=S;Ce++)pe[Ce]=je=je+we[Ce-1]<<1;for(ue=0;ue<=ae;ue++){var Ne=ne[2*ue+1];Ne!==0&&(ne[2*ue]=re(pe[Ne]++,Ne))}}function X(ne){var ae;for(ae=0;ae<m;ae++)ne.dyn_ltree[2*ae]=0;for(ae=0;ae<g;ae++)ne.dyn_dtree[2*ae]=0;for(ae=0;ae<y;ae++)ne.bl_tree[2*ae]=0;ne.dyn_ltree[2*C]=1,ne.opt_len=ne.static_len=0,ne.last_lit=ne.matches=0}function oe(ne){8<ne.bi_valid?H(ne,ne.bi_buf):0<ne.bi_valid&&(ne.pending_buf[ne.pending++]=ne.bi_buf),ne.bi_buf=0,ne.bi_valid=0}function ye(ne,ae,we,Ce){var ue=2*ae,pe=2*we;return ne[ue]<ne[pe]||ne[ue]===ne[pe]&&Ce[ae]<=Ce[we]}function be(ne,ae,we){for(var Ce=ne.heap[we],ue=we<<1;ue<=ne.heap_len&&(ue<ne.heap_len&&ye(ae,ne.heap[ue+1],ne.heap[ue],ne.depth)&&ue++,!ye(ae,Ce,ne.heap[ue],ne.depth));)ne.heap[we]=ne.heap[ue],we=ue,ue<<=1;ne.heap[we]=Ce}function Ie(ne,ae,we){var Ce,ue,pe,je,Ne=0;if(ne.last_lit!==0)for(;Ce=ne.pending_buf[ne.d_buf+2*Ne]<<8|ne.pending_buf[ne.d_buf+2*Ne+1],ue=ne.pending_buf[ne.l_buf+Ne],Ne++,Ce===0?Y(ne,ue,ae):(Y(ne,(pe=j[ue])+f+1,ae),(je=V[pe])!==0&&ee(ne,ue-=P[pe],je),Y(ne,pe=K(--Ce),we),(je=I[pe])!==0&&ee(ne,Ce-=G[pe],je)),Ne<ne.last_lit;);Y(ne,C,ae)}function De(ne,ae){var we,Ce,ue,pe=ae.dyn_tree,je=ae.stat_desc.static_tree,Ne=ae.stat_desc.has_stree,he=ae.stat_desc.elems,Ee=-1;for(ne.heap_len=0,ne.heap_max=b,we=0;we<he;we++)pe[2*we]!==0?(ne.heap[++ne.heap_len]=Ee=we,ne.depth[we]=0):pe[2*we+1]=0;for(;ne.heap_len<2;)pe[2*(ue=ne.heap[++ne.heap_len]=Ee<2?++Ee:0)]=1,ne.depth[ue]=0,ne.opt_len--,Ne&&(ne.static_len-=je[2*ue+1]);for(ae.max_code=Ee,we=ne.heap_len>>1;1<=we;we--)be(ne,pe,we);for(ue=he;we=ne.heap[1],ne.heap[1]=ne.heap[ne.heap_len--],be(ne,pe,1),Ce=ne.heap[1],ne.heap[--ne.heap_max]=we,ne.heap[--ne.heap_max]=Ce,pe[2*ue]=pe[2*we]+pe[2*Ce],ne.depth[ue]=(ne.depth[we]>=ne.depth[Ce]?ne.depth[we]:ne.depth[Ce])+1,pe[2*we+1]=pe[2*Ce+1]=ue,ne.heap[1]=ue++,be(ne,pe,1),2<=ne.heap_len;);ne.heap[--ne.heap_max]=ne.heap[1],(function(Re,qe){var Ye,nt,ce,Te,Me,Oe,Ke=qe.dyn_tree,Ze=qe.max_code,pt=qe.stat_desc.static_tree,ht=qe.stat_desc.has_stree,jt=qe.stat_desc.extra_bits,Ht=qe.stat_desc.extra_base,Lt=qe.stat_desc.max_length,Kt=0;for(Te=0;Te<=S;Te++)Re.bl_count[Te]=0;for(Ke[2*Re.heap[Re.heap_max]+1]=0,Ye=Re.heap_max+1;Ye<b;Ye++)Lt<(Te=Ke[2*Ke[2*(nt=Re.heap[Ye])+1]+1]+1)&&(Te=Lt,Kt++),Ke[2*nt+1]=Te,Ze<nt||(Re.bl_count[Te]++,Me=0,Ht<=nt&&(Me=jt[nt-Ht]),Oe=Ke[2*nt],Re.opt_len+=Oe*(Te+Me),ht&&(Re.static_len+=Oe*(pt[2*nt+1]+Me)));if(Kt!==0){do{for(Te=Lt-1;Re.bl_count[Te]===0;)Te--;Re.bl_count[Te]--,Re.bl_count[Te+1]+=2,Re.bl_count[Lt]--,Kt-=2}while(0<Kt);for(Te=Lt;Te!==0;Te--)for(nt=Re.bl_count[Te];nt!==0;)Ze<(ce=Re.heap[--Ye])||(Ke[2*ce+1]!==Te&&(Re.opt_len+=(Te-Ke[2*ce+1])*Ke[2*ce],Ke[2*ce+1]=Te),nt--)}})(ne,ae),de(pe,Ee,ne.bl_count)}function F(ne,ae,we){var Ce,ue,pe=-1,je=ae[1],Ne=0,he=7,Ee=4;for(je===0&&(he=138,Ee=3),ae[2*(we+1)+1]=65535,Ce=0;Ce<=we;Ce++)ue=je,je=ae[2*(Ce+1)+1],++Ne<he&&ue===je||(Ne<Ee?ne.bl_tree[2*ue]+=Ne:ue!==0?(ue!==pe&&ne.bl_tree[2*ue]++,ne.bl_tree[2*_]++):Ne<=10?ne.bl_tree[2*R]++:ne.bl_tree[2*D]++,pe=ue,Ee=(Ne=0)===je?(he=138,3):ue===je?(he=6,3):(he=7,4))}function le(ne,ae,we){var Ce,ue,pe=-1,je=ae[1],Ne=0,he=7,Ee=4;for(je===0&&(he=138,Ee=3),Ce=0;Ce<=we;Ce++)if(ue=je,je=ae[2*(Ce+1)+1],!(++Ne<he&&ue===je)){if(Ne<Ee)for(;Y(ne,ue,ne.bl_tree),--Ne!=0;);else ue!==0?(ue!==pe&&(Y(ne,ue,ne.bl_tree),Ne--),Y(ne,_,ne.bl_tree),ee(ne,Ne-3,2)):Ne<=10?(Y(ne,R,ne.bl_tree),ee(ne,Ne-3,3)):(Y(ne,D,ne.bl_tree),ee(ne,Ne-11,7));pe=ue,Ee=(Ne=0)===je?(he=138,3):ue===je?(he=6,3):(he=7,4)}}u(G);var Z=!1;function te(ne,ae,we,Ce){ee(ne,(p<<1)+(Ce?1:0),3),(function(ue,pe,je,Ne){oe(ue),H(ue,je),H(ue,~je),i.arraySet(ue.pending_buf,ue.window,pe,je,ue.pending),ue.pending+=je})(ne,ae,we)}a._tr_init=function(ne){Z||((function(){var ae,we,Ce,ue,pe,je=new Array(S+1);for(ue=Ce=0;ue<h-1;ue++)for(P[ue]=Ce,ae=0;ae<1<<V[ue];ae++)j[Ce++]=ue;for(j[Ce-1]=ue,ue=pe=0;ue<16;ue++)for(G[ue]=pe,ae=0;ae<1<<I[ue];ae++)M[pe++]=ue;for(pe>>=7;ue<g;ue++)for(G[ue]=pe<<7,ae=0;ae<1<<I[ue]-7;ae++)M[256+pe++]=ue;for(we=0;we<=S;we++)je[we]=0;for(ae=0;ae<=143;)W[2*ae+1]=8,ae++,je[8]++;for(;ae<=255;)W[2*ae+1]=9,ae++,je[9]++;for(;ae<=279;)W[2*ae+1]=7,ae++,je[7]++;for(;ae<=287;)W[2*ae+1]=8,ae++,je[8]++;for(de(W,m+1,je),ae=0;ae<g;ae++)T[2*ae+1]=5,T[2*ae]=re(ae,5);L=new O(W,V,f+1,m,S),B=new O(T,I,0,g,S),q=new O(new Array(0),A,0,y,N)})(),Z=!0),ne.l_desc=new $(ne.dyn_ltree,L),ne.d_desc=new $(ne.dyn_dtree,B),ne.bl_desc=new $(ne.bl_tree,q),ne.bi_buf=0,ne.bi_valid=0,X(ne)},a._tr_stored_block=te,a._tr_flush_block=function(ne,ae,we,Ce){var ue,pe,je=0;0<ne.level?(ne.strm.data_type===2&&(ne.strm.data_type=(function(Ne){var he,Ee=4093624447;for(he=0;he<=31;he++,Ee>>>=1)if(1&Ee&&Ne.dyn_ltree[2*he]!==0)return l;if(Ne.dyn_ltree[18]!==0||Ne.dyn_ltree[20]!==0||Ne.dyn_ltree[26]!==0)return c;for(he=32;he<f;he++)if(Ne.dyn_ltree[2*he]!==0)return c;return l})(ne)),De(ne,ne.l_desc),De(ne,ne.d_desc),je=(function(Ne){var he;for(F(Ne,Ne.dyn_ltree,Ne.l_desc.max_code),F(Ne,Ne.dyn_dtree,Ne.d_desc.max_code),De(Ne,Ne.bl_desc),he=y-1;3<=he&&Ne.bl_tree[2*U[he]+1]===0;he--);return Ne.opt_len+=3*(he+1)+5+5+4,he})(ne),ue=ne.opt_len+3+7>>>3,(pe=ne.static_len+3+7>>>3)<=ue&&(ue=pe)):ue=pe=we+5,we+4<=ue&&ae!==-1?te(ne,ae,we,Ce):ne.strategy===4||pe===ue?(ee(ne,2+(Ce?1:0),3),Ie(ne,W,T)):(ee(ne,4+(Ce?1:0),3),(function(Ne,he,Ee,Re){var qe;for(ee(Ne,he-257,5),ee(Ne,Ee-1,5),ee(Ne,Re-4,4),qe=0;qe<Re;qe++)ee(Ne,Ne.bl_tree[2*U[qe]+1],3);le(Ne,Ne.dyn_ltree,he-1),le(Ne,Ne.dyn_dtree,Ee-1)})(ne,ne.l_desc.max_code+1,ne.d_desc.max_code+1,je+1),Ie(ne,ne.dyn_ltree,ne.dyn_dtree)),X(ne),Ce&&oe(ne)},a._tr_tally=function(ne,ae,we){return ne.pending_buf[ne.d_buf+2*ne.last_lit]=ae>>>8&255,ne.pending_buf[ne.d_buf+2*ne.last_lit+1]=255&ae,ne.pending_buf[ne.l_buf+ne.last_lit]=255&we,ne.last_lit++,ae===0?ne.dyn_ltree[2*we]++:(ne.matches++,ae--,ne.dyn_ltree[2*(j[we]+f+1)]++,ne.dyn_dtree[2*K(ae)]++),ne.last_lit===ne.lit_bufsize-1},a._tr_align=function(ne){ee(ne,2,3),Y(ne,C,W),(function(ae){ae.bi_valid===16?(H(ae,ae.bi_buf),ae.bi_buf=0,ae.bi_valid=0):8<=ae.bi_valid&&(ae.pending_buf[ae.pending++]=255&ae.bi_buf,ae.bi_buf>>=8,ae.bi_valid-=8)})(ne)}},{"../utils/common":41}],53:[function(n,s,a){s.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,s,a){(function(i){(function(l,c){if(!l.setImmediate){var u,p,h,f,m=1,g={},y=!1,b=l.document,S=Object.getPrototypeOf&&Object.getPrototypeOf(l);S=S&&S.setTimeout?S:l,u={}.toString.call(l.process)==="[object process]"?function(_){process.nextTick(function(){N(_)})}:(function(){if(l.postMessage&&!l.importScripts){var _=!0,R=l.onmessage;return l.onmessage=function(){_=!1},l.postMessage("","*"),l.onmessage=R,_}})()?(f="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",C,!1):l.attachEvent("onmessage",C),function(_){l.postMessage(f+_,"*")}):l.MessageChannel?((h=new MessageChannel).port1.onmessage=function(_){N(_.data)},function(_){h.port2.postMessage(_)}):b&&"onreadystatechange"in b.createElement("script")?(p=b.documentElement,function(_){var R=b.createElement("script");R.onreadystatechange=function(){N(_),R.onreadystatechange=null,p.removeChild(R),R=null},p.appendChild(R)}):function(_){setTimeout(N,0,_)},S.setImmediate=function(_){typeof _!="function"&&(_=new Function(""+_));for(var R=new Array(arguments.length-1),D=0;D<R.length;D++)R[D]=arguments[D+1];var V={callback:_,args:R};return g[m]=V,u(m),m++},S.clearImmediate=v}function v(_){delete g[_]}function N(_){if(y)setTimeout(N,0,_);else{var R=g[_];if(R){y=!0;try{(function(D){var V=D.callback,I=D.args;switch(I.length){case 0:V();break;case 1:V(I[0]);break;case 2:V(I[0],I[1]);break;case 3:V(I[0],I[1],I[2]);break;default:V.apply(c,I)}})(R)}finally{v(_),y=!1}}}}function C(_){_.source===l&&typeof _.data=="string"&&_.data.indexOf(f)===0&&N(+_.data.slice(f.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof Uc<"u"?Uc:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Ah)),Ah.exports}var QD=ZD();const Hb=so(QD);function XD({onBack:e}){const[t,n]=k.useState(!1),[s,a]=k.useState(!1),[i,l]=k.useState(!1),[c,u]=k.useState(!1),[p,h]=k.useState(!1),[f,m]=k.useState(!1),[g,y]=k.useState(!1),[b,S]=k.useState(!1),[v,N]=k.useState({totalSize:0,userDataSize:0,chatMessagesSize:0,characterDataSize:0,memoriesSize:0,chatSettingsSize:0,worldBooksSize:0,otherDataSize:0,chatImagesSize:0,otherImagesSize:0,stickersSize:0,healthScheduleSize:0,transactionsSize:0,shopDataSize:0,whisperChatSize:0,imageStats:{totalImages:0,totalSize:0,categories:{}}});k.useEffect(()=>{_()},[]);const C=(U,W=2)=>{if(U===0)return"0 B";const T=1024,M=W<0?0:W,j=["B","KB","MB","GB","TB"],P=Math.floor(Math.log(U)/Math.log(T));return parseFloat((U/Math.pow(T,P)).toFixed(M))+" "+j[P]},_=async()=>{try{const U=await se.getStoreSize(J.USER_DATA),W=await se.getStoreSize(J.CHAT_MESSAGES),T=await se.getStoreSize(J.CHARACTERS),M=await se.getStoreSize(J.CHAT_SETTINGS),j=await se.getStoreSize(J.WORLD_BOOKS),P=await se.getStoreSize(J.API_SETTINGS),L=await se.getStoreSize(J.APPEARANCE),B=await se.getStoreSize(J.MISC),q=await se.getStoreSize(J.CHATS),G=await se.getStoreSize(J.HEALTH),O=await se.getStoreSize(J.SCHEDULE),$=await se.getStoreSize(J.STICKERS),K=await se.getStoreSize(J.BUBBLE_PRESETS),H=await se.getStoreSize(J.AI_TASKS),ee=await se.getStoreSize(J.TRANSACTIONS);let Y=0;try{const ue=await se.get(J.USER_DATA,"asset_transactions")||[],pe=await se.get(J.USER_DATA,"order_history")||[],je=await se.get(J.MISC,"shop_products")||[];Y+=new Blob([JSON.stringify(ue)]).size,Y+=new Blob([JSON.stringify(pe)]).size,Y+=new Blob([JSON.stringify(je)]).size}catch(ue){console.error("Failed to calculate shop data size:",ue)}let re=0;try{const ue=await se.get(J.CHARACTERS,"characters")||[];for(const pe of ue){const je=`whisper_chat_messages_${pe.id}`,Ne=await se.get(J.CHATS,je)||[];re+=new Blob([JSON.stringify(Ne)]).size}}catch(ue){console.error("Failed to calculate whisper chat data size:",ue)}const de=await se.get(J.CHARACTERS,"characters")||[];let X=0;de.forEach(ue=>{if(ue.memories)try{const pe=JSON.stringify(ue.memories);X+=new Blob([pe]).size}catch{}});const oe=Math.max(0,T-X),ye=P+L+B+q+U+M+K+H+ee,be=G+O,Ie=await r5(),De=Object.values(Ie).reduce((ue,{count:pe})=>ue+pe,0),le=Object.values(Ie).reduce((ue,{size:pe})=>ue+parseFloat(pe),0)*1024,te=parseFloat(Ie[Pn.CHAT_IMAGES]?.size||"0.00")*1024,ae=parseFloat(Ie[Pn.MEMES]?.size||"0.00")*1024,we=le-te-ae,Ce=W+oe+X+j+ye+le+$+be+Y+re;N({totalSize:Ce,userDataSize:U,chatMessagesSize:W,characterDataSize:oe,memoriesSize:X,chatSettingsSize:M,worldBooksSize:j,otherDataSize:ye,chatImagesSize:te,otherImagesSize:we,stickersSize:$+ae,healthScheduleSize:be,transactionsSize:ee,shopDataSize:Y,whisperChatSize:re,imageStats:{totalImages:De,totalSize:le,categories:Ie}})}catch(U){console.error("Failed to load stats:",U)}},R=async()=>{m(!0);try{const U=await se.exportAll();U[J.AI_TASKS]&&delete U[J.AI_TASKS];const W={...U,exportTime:new Date().toISOString(),version:2},T=JSON.stringify(W,null,2),M=new Blob([T],{type:"application/json"}),j=URL.createObjectURL(M),P=document.createElement("a");P.href=j,P.download=`touken-os-data-${new Date().getTime()}.json`,P.click(),URL.revokeObjectURL(j),u(!0),setTimeout(()=>u(!1),2e3)}catch(U){console.error("Export JSON failed:",U),alert("")}finally{m(!1)}},D=async()=>{m(!0);try{const U=new Hb,W=await se.exportAll();W[J.AI_TASKS]&&delete W[J.AI_TASKS];const T={...W,exportTime:new Date().toISOString(),version:2};U.file("data.json",JSON.stringify(T,null,2));const M=await mD(),j=U.folder("images");for(const[q,{blob:G,category:O}]of Object.entries(M)){const $=G.type.split("/")[1]||"png";j?.folder(O)?.file(`${q}.${$}`,G)}const P=await U.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}}),L=URL.createObjectURL(P),B=document.createElement("a");B.href=L,B.download=`touken-os-backup-${new Date().getTime()}.zip`,B.click(),URL.revokeObjectURL(L),u(!0),setTimeout(()=>u(!1),2e3)}catch(U){console.error("Export Data failed:",U),alert("")}finally{m(!1)}},V=()=>{const U=document.createElement("input");U.type="file",U.accept=".zip,.json,application/zip,application/json",U.onchange=async W=>{const T=W.target.files?.[0];if(T){y(!0);try{if(T.name.endsWith(".json")){const j=await T.text(),{exportTime:P,version:L,...B}=JSON.parse(j);await se.importAll(B)}else{const j=await Hb.loadAsync(T),P=j.file("data.json");if(!P)throw new Error("Invalid backup file: missing data.json");const L=await P.async("text"),{exportTime:B,version:q,...G}=JSON.parse(L);await se.importAll(G);const O=j.folder("images");if(O){const $={},K=[];O.forEach((H,ee)=>{ee.dir||K.push(ee.async("blob").then(Y=>{const re=H.split("/"),X=re[re.length-1].replace(/\.[^/.]+$/,"");$[X]=Y}))}),await Promise.all(K),Object.keys($).length>0&&await xD($)}}h(!0),setTimeout(()=>window.location.reload(),1500)}catch(M){console.error("Import failed:",M),alert("")}finally{y(!1)}}},U.click()},I=async()=>{S(!0);try{await se.clearAll(),await pD(),Ep(!0),l(!0),n(!1),setTimeout(()=>window.location.reload(),1500)}catch(U){console.error("Clear failed:",U),alert("")}finally{S(!1)}},A=async()=>{S(!0);try{const W=(await Qm()).filter(T=>T.category===Pn.CHAT_IMAGES);console.log(`Deleting ${W.length} chat images...`);for(const T of W)await fa(T.originalKey);l(!0),a(!1),await _(),setTimeout(()=>l(!1),2e3)}catch(U){console.error("Clear chat images failed:",U),alert("")}finally{S(!1)}};return r.jsx(iu,{title:"",onBack:e,children:r.jsxs("div",{className:"space-y-6 text-slate-800",children:[r.jsx(Be,{children:(c||p||i)&&r.jsx(me.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"fixed top-24 left-0 right-0 flex justify-center z-[60] pointer-events-none px-4",children:r.jsxs("div",{className:"bg-slate-800 text-white px-5 py-3 border border-slate-700 shadow-xl flex items-center gap-3 backdrop-blur-md",children:[r.jsx(Et,{className:"w-4 h-4 text-green-400",strokeWidth:3}),r.jsxs("span",{className:"text-xs font-bold tracking-wider uppercase",children:[c&&"ARCHIVE_EXPORT_COMPLETE",p&&"DATA_RESTORED_REBOOTING",i&&"OPERATION_COMPLETE"]})]})})}),r.jsxs("div",{className:"bg-white p-5 border border-slate-300 relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-0 w-2 h-2 border-l-2 border-t-2 border-slate-800"}),r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(D7,{className:"w-5 h-5 text-slate-600"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xs font-bold text-slate-500 tracking-widest uppercase",children:""}),r.jsx("p",{className:"text-[10px] text-slate-400 font-mono",children:"STATUS: MOUNTED"})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:"text-xl font-black text-slate-800 tracking-tighter",children:C(v.totalSize).split(" ")[0]}),r.jsx("span",{className:"text-xs text-slate-400 font-bold ml-1",children:C(v.totalSize).split(" ")[1]})]})]}),r.jsxs("div",{className:"h-3 w-full bg-slate-100 border border-slate-200 flex mb-6",children:[r.jsx("div",{className:"bg-blue-600 h-full border-r border-white",style:{width:`${Math.min(100,v.chatMessagesSize/v.totalSize*100)}%`}}),r.jsx("div",{className:"bg-purple-500 h-full border-r border-white",style:{width:`${Math.min(100,v.characterDataSize/v.totalSize*100)}%`}}),r.jsx("div",{className:"bg-emerald-500 h-full border-r border-white",style:{width:`${Math.min(100,v.chatImagesSize/v.totalSize*100)}%`}}),r.jsx("div",{className:"bg-pink-500 h-full border-r border-white",style:{width:`${Math.min(100,v.stickersSize/v.totalSize*100)}%`}}),r.jsx("div",{className:"bg-teal-500 h-full border-r border-white",style:{width:`${Math.min(100,v.otherImagesSize/v.totalSize*100)}%`}}),r.jsx("div",{className:"bg-orange-500 h-full border-r border-white",style:{width:`${Math.min(100,v.worldBooksSize/v.totalSize*100)}%`}}),r.jsx("div",{className:"bg-indigo-500 h-full border-r border-white",style:{width:`${Math.min(100,v.memoriesSize/v.totalSize*100)}%`}}),r.jsx("div",{className:"bg-amber-500 h-full border-r border-white",style:{width:`${Math.min(100,v.shopDataSize/v.totalSize*100)}%`}}),r.jsx("div",{className:"bg-rose-500 h-full border-r border-white",style:{width:`${Math.min(100,v.whisperChatSize/v.totalSize*100)}%`}}),r.jsx("div",{className:"bg-cyan-500 h-full border-r border-white",style:{width:`${Math.min(100,v.healthScheduleSize/v.totalSize*100)}%`}}),r.jsx("div",{className:"bg-slate-500 h-full",style:{width:`${Math.min(100,v.otherDataSize/v.totalSize*100)}%`}})]}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{label:"",value:v.chatMessagesSize,icon:t9,color:"text-blue-600"},{label:"",value:v.characterDataSize,icon:mn,color:"text-purple-600"},{label:"",value:v.chatImagesSize,icon:qa,color:"text-emerald-600"},{label:"",value:v.stickersSize,icon:Z9,color:"text-pink-600"},{label:"",value:v.otherImagesSize,icon:qa,color:"text-teal-600"},{label:"",value:v.worldBooksSize,icon:Kw,color:"text-orange-600"},{label:"",value:v.memoriesSize,icon:Uw,color:"text-indigo-600"},{label:"",value:v.shopDataSize,icon:su,color:"text-amber-600"},{label:"",value:v.whisperChatSize,icon:qm,color:"text-rose-600"},{label:"",value:v.healthScheduleSize,icon:Rs,color:"text-cyan-600"},{label:"",value:v.otherDataSize,icon:Ya,color:"text-slate-600"}].map((U,W)=>r.jsxs("div",{className:"flex items-center justify-between p-2 border border-slate-100 bg-slate-50/50",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(U.icon,{className:`w-3 h-3 ${U.color}`}),r.jsx("span",{className:`text-[10px] font-bold ${U.color}`,children:U.label})]}),r.jsx("span",{className:"text-[10px] font-mono text-slate-500",children:C(U.value)})]},W))})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-3 ml-1 flex items-center gap-2",children:[r.jsx(Bd,{className:"w-3 h-3"})," "]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("button",{onClick:R,disabled:f,className:"p-4 bg-white border border-slate-300 active:border-slate-800 hover:border-slate-800 active:bg-slate-50 transition-all flex flex-col gap-2 group",children:[r.jsxs("div",{className:"flex items-center justify-between w-full mb-1",children:[r.jsx(Wm,{className:"w-5 h-5 text-slate-400 group-active:text-slate-800 group-hover:text-slate-800 transition-colors"}),r.jsx("span",{className:"text-[9px] font-mono text-slate-300 group-active:text-slate-500 group-hover:text-slate-500",children:"JSON"})]}),r.jsxs("div",{className:"text-left",children:[r.jsx("h3",{className:"text-sm font-bold text-slate-800",children:""}),r.jsx("p",{className:"text-[10px] text-slate-400",children:""})]})]}),r.jsxs("button",{onClick:D,disabled:f,className:"p-4 bg-white border border-slate-300 active:border-slate-800 hover:border-slate-800 active:bg-slate-50 transition-all flex flex-col gap-2 group",children:[r.jsxs("div",{className:"flex items-center justify-between w-full mb-1",children:[r.jsx(Ya,{className:"w-5 h-5 text-slate-400 group-active:text-slate-800 group-hover:text-slate-800 transition-colors"}),r.jsx("span",{className:"text-[9px] font-mono text-slate-300 group-active:text-slate-500 group-hover:text-slate-500",children:"ZIP"})]}),r.jsxs("div",{className:"text-left",children:[r.jsx("h3",{className:"text-sm font-bold text-slate-800",children:""}),r.jsx("p",{className:"text-[10px] text-slate-400",children:""})]})]})]}),r.jsxs("button",{onClick:V,disabled:g,className:"w-full p-4 bg-white border border-slate-300 active:border-slate-800 hover:border-slate-800 active:bg-slate-50 transition-all flex items-center justify-between group",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-10 h-10 border border-slate-200 bg-slate-50 flex items-center justify-center text-slate-600 group-active:bg-slate-800 group-active:text-white group-hover:bg-slate-800 group-hover:text-white transition-colors",children:r.jsx(au,{className:"w-5 h-5"})}),r.jsxs("div",{className:"text-left",children:[r.jsx("h3",{className:"text-sm font-bold text-slate-800",children:""}),r.jsx("p",{className:"text-[10px] text-slate-400",children:"RESTORE FROM ARCHIVE"})]})]}),r.jsx("div",{className:"border border-slate-300 px-3 py-1 text-[10px] font-bold text-slate-600 uppercase active:bg-slate-800 active:text-white hover:bg-slate-800 hover:text-white transition-colors",children:""})]}),r.jsxs("button",{onClick:()=>a(!0),className:"w-full p-4 border border-slate-200 bg-slate-50/50 text-slate-600 font-bold text-sm flex items-center justify-center gap-2 active:bg-slate-100 active:border-slate-300 hover:bg-slate-100 hover:border-slate-300 transition-all group",children:[r.jsx(p7,{className:"w-4 h-4 text-emerald-400 group-hover:text-emerald-600"})," (CLEAR CACHE IMAGES)"]}),r.jsxs("button",{onClick:()=>n(!0),className:"w-full mt-6 p-4 border border-red-200 bg-red-50/30 text-red-600 font-bold text-sm flex items-center justify-center gap-2 active:bg-red-50 active:border-red-300 hover:bg-red-50 hover:border-red-300 transition-all",children:[r.jsx(xn,{className:"w-4 h-4"})," (ERASE ALL DATA)"]})]})]}),r.jsx(Be,{children:t&&r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[70] px-6",children:r.jsxs(me.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:350,damping:30},className:"bg-white border-2 border-slate-800 p-6 w-full max-w-sm shadow-[8px_8px_0px_rgba(0,0,0,0.2)] relative",onClick:U=>U.stopPropagation(),children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-slate-100 pb-4",children:[r.jsx(_p,{className:"w-6 h-6 text-red-600"}),r.jsx("h3",{className:"text-lg font-black text-slate-800 tracking-tight uppercase",children:""})]}),r.jsxs("p",{className:"text-sm text-slate-600 mb-8 leading-relaxed font-medium",children:["",r.jsx("span",{className:"text-red-600 font-bold bg-red-50 px-1",children:""}),"",r.jsx("br",{}),r.jsx("br",{}),r.jsx("span",{className:"text-xs text-slate-400",children:"SYSTEM ID: LOCAL_USER"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>n(!1),className:"flex-1 py-3 border border-slate-300 text-slate-600 font-bold text-sm active:bg-slate-50 hover:bg-slate-50 transition-colors uppercase tracking-wider",children:""}),r.jsx("button",{onClick:I,className:"flex-1 py-3 bg-red-600 text-white font-bold text-sm active:bg-red-700 hover:bg-red-700 transition-colors shadow-lg shadow-red-200 uppercase tracking-wider",children:""})]})]})},"clear-modal-overlay")}),r.jsx(Be,{children:s&&r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[70] px-6",children:r.jsxs(me.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:350,damping:30},className:"bg-white border-2 border-slate-800 p-6 w-full max-w-sm shadow-[8px_8px_0px_rgba(0,0,0,0.2)] relative",onClick:U=>U.stopPropagation(),children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-slate-100 pb-4",children:[r.jsx(qa,{className:"w-6 h-6 text-orange-500"}),r.jsx("h3",{className:"text-lg font-black text-slate-800 tracking-tight uppercase",children:""})]}),r.jsxs("p",{className:"text-sm text-slate-600 mb-8 leading-relaxed font-medium",children:["",r.jsx("br",{}),r.jsx("span",{className:"text-orange-500 font-bold",children:""}),r.jsx("br",{}),r.jsx("br",{}),r.jsxs("span",{className:"text-xs text-slate-400",children:["TARGET: ",C(v.chatImagesSize)," / ",v.imageStats.categories[Pn.CHAT_IMAGES]?.count||0," FILES"]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>a(!1),className:"flex-1 py-3 border border-slate-300 text-slate-600 font-bold text-sm active:bg-slate-50 hover:bg-slate-50 transition-colors uppercase tracking-wider",children:""}),r.jsx("button",{onClick:A,disabled:b,className:"flex-1 py-3 bg-slate-800 text-white font-bold text-sm active:bg-slate-900 hover:bg-slate-900 transition-colors shadow-lg shadow-slate-200 uppercase tracking-wider",children:b?"...":""})]})]})},"images-modal-overlay")})]})})}function JD({onBack:e}){return r.jsx(iu,{title:"",onBack:e,children:r.jsxs("div",{className:"space-y-8 text-slate-800",children:[r.jsxs("div",{className:"bg-white border border-slate-200 p-6 relative overflow-hidden shadow-sm group",children:[r.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-slate-50 -mr-8 -mt-8 rotate-45 transform transition-transform group-hover:scale-150 duration-700 ease-out"}),r.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-slate-800 text-white flex items-center justify-center mb-4 shadow-lg shadow-slate-200",children:r.jsx(e5,{className:"w-8 h-8"})}),r.jsx("h2",{className:"text-xl font-black tracking-tight uppercase",children:"Touken OS"}),r.jsx("p",{className:"text-[10px] font-bold text-slate-400 tracking-[0.3em] uppercase mt-1",children:"Government Terminal"}),r.jsx("div",{className:"mt-4 inline-flex items-center px-3 py-1 bg-slate-100 border border-slate-200 rounded-none text-xs font-mono text-slate-600",children:"v1.0 (Beta)"})]})]}),r.jsxs("section",{className:"bg-slate-50 border border-slate-200 p-5 relative",children:[r.jsx("div",{className:"absolute top-0 left-0 w-2 h-2 bg-slate-300"}),r.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 bg-slate-300"}),r.jsx("div",{className:"absolute bottom-0 left-0 w-2 h-2 bg-slate-300"}),r.jsx("div",{className:"absolute bottom-0 right-0 w-2 h-2 bg-slate-300"}),r.jsxs("div",{className:"flex items-center gap-2 text-slate-800 mb-4",children:[r.jsx(Hm,{className:"w-4 h-4"}),r.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider",children:""})]}),r.jsxs("div",{className:"text-xs text-slate-600 leading-relaxed space-y-4 text-justify h-64 overflow-y-auto pr-2 custom-scrollbar",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-slate-800 mb-1",children:"1. "}),r.jsxs("p",{children:["-ONLINE-  ",r.jsx("span",{className:"font-bold",children:"Nitroplus"}),"  ",r.jsx("span",{className:"font-bold",children:"DMM GAMES (EXNOA LLC)"}),"  "]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-slate-800 mb-1",children:"2. "}),r.jsxs("p",{children:["",r.jsx("span",{className:"font-bold text-red-500",children:""})," "]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-slate-800 mb-1",children:"3. "}),r.jsx("p",{children:" "})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-slate-800 mb-1",children:"4. "}),r.jsx("p",{children:" AI  IndexedDB  "})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-slate-800 mb-1",children:"5. AI "}),r.jsx("p",{children:"LLMAI   AI "})]})]})]}),r.jsx("div",{className:"text-center py-4 opacity-50",children:r.jsx("p",{className:"text-[9px] text-slate-400 font-mono tracking-widest",children:"MADE WITH  FOR TOUKEN RANBU"})})]})})}function eI({onClose:e}){const[t,n]=k.useState("main"),s=l=>{n(l)},a=()=>{n("main")},i=()=>{switch(t){case"api":return r.jsx(OD,{onBack:a});case"beautify":return r.jsx(YD,{onBack:a});case"data":return r.jsx(XD,{onBack:a});case"disclaimer":return r.jsx(JD,{onBack:a});default:return null}};return r.jsxs("div",{className:"w-full h-full bg-[#F0F2F5] relative overflow-hidden",children:[r.jsx(me.div,{initial:!1,animate:t==="main"?{x:0,opacity:1}:{x:"-25%",opacity:1},transition:{duration:.4,ease:[.32,.72,0,1]},className:"absolute inset-0 w-full h-full",children:r.jsx(ID,{onNavigate:s,onClose:e})}),r.jsx(Be,{children:t!=="main"&&r.jsx(me.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{duration:.4,ease:[.32,.72,0,1]},className:"absolute inset-0 w-full h-full z-20 shadow-[-10px_0_30px_rgba(0,0,0,0.15)]",children:i()},"subpage")})]})}function tI({onBack:e,onEdit:t,lastUpdated:n=0}){const[s,a]=k.useState([]),[i,l]=k.useState(""),[c,u]=k.useState("all"),[p,h]=k.useState("grid");k.useEffect(()=>{f()},[n]);const f=async()=>{try{const b=await se.get(J.WORLD_BOOKS,"world_books");b&&a(b)}catch(b){console.error("Failed to load world books:",b)}},m=()=>{t(null)},g=b=>{t(b)},y=s.filter(b=>c==="all"||b.scope===c).filter(b=>b.name.toLowerCase().includes(i.toLowerCase())||b.content.toLowerCase().includes(i.toLowerCase()));return r.jsxs("div",{className:"w-full h-full relative bg-[#F5F2EB] z-50 overflow-hidden flex flex-col font-['Source_Han_Sans_CN_VF',sans-serif]",children:[r.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-20 mix-blend-multiply",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%239C92AC' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E")`}}),r.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-20 bg-[#F5F2EB]/95 backdrop-blur-xl border-b border-[#D6D3CC] shadow-sm",children:[r.jsx("button",{onClick:e,className:"w-10 h-10 bg-white/50 border border-[#D6D3CC] rounded-lg flex items-center justify-center text-[#5A5A55] transition-colors hover:bg-white hover:text-[#2C2C2C] shadow-[0_2px_0_#E5E5E5]",children:r.jsx(dn,{className:"w-5 h-5",strokeWidth:2})}),r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Ib,{className:"w-3 h-3 text-[#8C8C89]"}),r.jsx("span",{className:"text-[10px] font-bold text-[#8C8C89] tracking-[0.2em] uppercase",children:""})]}),r.jsx("h1",{className:"text-lg font-serif font-bold text-[#2C2C2C] tracking-tight flex items-center gap-2",children:""})]}),r.jsx("button",{onClick:m,className:"w-10 h-10 bg-[#2C2C2C] text-[#F2F0EB] rounded-lg flex items-center justify-center transition-colors shadow-lg hover:bg-black",children:r.jsx(Zn,{className:"w-5 h-5",strokeWidth:2})})]}),r.jsxs("div",{className:"px-6 py-4 z-10 bg-[#F5F2EB]",children:[r.jsxs("div",{className:"flex gap-2 mb-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(ga,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-[#8C8C89]"}),r.jsx("input",{type:"text",value:i,onChange:b=>l(b.target.value),placeholder:"...",className:"w-full bg-white border border-[#D6D3CC] rounded-full px-4 py-2.5 pl-10 text-xs font-medium text-[#2C2C2C] placeholder:text-[#AAA] focus:outline-none focus:border-[#2C2C2C] focus:ring-1 focus:ring-[#2C2C2C] transition-colors shadow-sm"}),i&&r.jsx("button",{onClick:()=>l(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#BBB] hover:text-[#2C2C2C]",children:r.jsx(xt,{className:"w-3 h-3"})})]}),r.jsxs("div",{className:"flex bg-white border border-[#D6D3CC] rounded-lg p-1 shrink-0 shadow-sm",children:[r.jsx("button",{onClick:()=>h("grid"),className:`p-1.5 rounded-md transition-all ${p==="grid"?"bg-[#F5F2EB] text-[#2C2C2C]":"text-[#8C8C89]"}`,children:r.jsx(Zw,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>h("list"),className:`p-1.5 rounded-md transition-all ${p==="list"?"bg-[#F5F2EB] text-[#2C2C2C]":"text-[#8C8C89]"}`,children:r.jsx(W7,{className:"w-4 h-4"})})]})]}),r.jsx("div",{className:"flex gap-6 border-b border-[#D6D3CC] px-2",children:[{id:"all",label:""},{id:"global",label:""},{id:"local",label:""}].map(b=>r.jsxs("button",{onClick:()=>u(b.id),className:`pb-3 text-[11px] font-bold uppercase tracking-wider transition-colors relative ${c===b.id?"text-[#2C2C2C]":"text-[#8C8C89] active:text-[#5A5A55] hover:text-[#5A5A55]"}`,children:[b.label,c===b.id&&r.jsx(me.div,{layoutId:"worldbook-tab-indicator",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#2C2C2C]",transition:{duration:.25,ease:"easeInOut"}})]},b.id))})]}),r.jsx("div",{className:"flex-1 overflow-y-auto px-6 pb-24",children:y.length===0?r.jsxs("div",{className:"h-64 flex flex-col items-center justify-center text-[#8C8C89] opacity-60",children:[r.jsx(Ib,{className:"w-16 h-16 mb-4 stroke-1"}),r.jsx("p",{className:"text-xs font-serif italic",children:""})]}):r.jsx(me.div,{layout:!0,className:p==="grid"?"grid grid-cols-2 gap-4 pt-2":"flex flex-col gap-3 pt-2",children:r.jsx(Be,{mode:"popLayout",children:y.map((b,S)=>r.jsx(me.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{layout:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}},onClick:()=>g(b),className:`group cursor-pointer relative ${p==="grid"?"aspect-[3/4]":"h-24"}`,children:p==="grid"?r.jsxs(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-white border border-[#E5E5E5] rounded-r-md rounded-l-sm shadow-[4px_4px_10px_rgba(0,0,0,0.05)] transition-all overflow-hidden flex flex-col group-active:shadow-[6px_6px_15px_rgba(0,0,0,0.1)] group-hover:shadow-[6px_6px_15px_rgba(0,0,0,0.1)]",children:[r.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-3 ${b.scope==="global"?"bg-[#2C2C2C]":"bg-[#8C8C89]"} opacity-10 border-r border-black/5`}),r.jsxs("div",{className:"mt-4 mx-4 flex justify-between items-start",children:[r.jsx("span",{className:`text-[8px] font-bold uppercase tracking-wider px-1.5 py-0.5 rounded-sm ${b.scope==="global"?"bg-[#F0F0F0] text-[#2C2C2C]":"bg-[#F5F5F5] text-[#8C8C89]"}`,children:b.scope==="global"?" I":" II"}),b.scope==="global"?r.jsx(Yw,{className:"w-3 h-3 text-[#2C2C2C]"}):r.jsx(P8,{className:"w-3 h-3 text-[#8C8C89]"})]}),r.jsxs("div",{className:"flex-1 px-4 flex flex-col justify-center",children:[r.jsx("h3",{className:"font-serif text-lg leading-tight font-bold text-[#2C2C2C] line-clamp-3",children:b.name||""}),r.jsx("div",{className:"w-8 h-0.5 bg-[#D6D3CC] mt-3"})]}),r.jsxs("div",{className:"px-4 pb-4 pt-2 bg-[#F9F9F7] border-t border-[#F0F0F0]",children:[r.jsx("p",{className:"text-[9px] text-[#8C8C89] font-mono line-clamp-2 mb-2",children:b.content||"..."}),r.jsxs("div",{className:"flex items-center gap-2 text-[8px] font-bold text-[#AAA] uppercase",children:[r.jsx(Rs,{className:"w-2.5 h-2.5"}),new Date(b.updatedAt).toLocaleDateString()]})]})]}):r.jsxs(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"w-full h-full bg-white border border-[#E5E5E5] rounded-md shadow-sm transition-all flex overflow-hidden group-active:shadow-md group-hover:shadow-md",children:[r.jsx("div",{className:`w-2 h-full ${b.scope==="global"?"bg-[#2C2C2C]":"bg-[#D6D3CC]"}`}),r.jsxs("div",{className:"flex-1 p-3 flex flex-col justify-center",children:[r.jsxs("div",{className:"flex justify-between items-start mb-1",children:[r.jsx("h3",{className:"font-serif text-base font-bold text-[#2C2C2C]",children:b.name||""}),r.jsx("span",{className:"text-[9px] px-2 py-0.5 bg-[#F5F5F5] rounded text-[#8C8C89] font-bold uppercase",children:b.scope==="global"?"":""})]}),r.jsx("p",{className:"text-[10px] text-[#666] line-clamp-2 pr-8",children:b.content})]}),r.jsxs("div",{className:"w-12 border-l border-[#F0F0F0] flex flex-col items-center justify-center gap-1 text-[#AAA]",children:[r.jsx(Wm,{className:"w-4 h-4"}),r.jsx("span",{className:"text-[9px] font-mono",children:b.content.length})]})]})},b.id))})})}),r.jsxs("div",{className:"bg-[#EAE8E3] border-t border-[#D6D3CC] px-6 py-3 flex justify-between items-center text-[9px] font-mono text-[#8C8C89] uppercase tracking-wider",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-[#34C759]"}),r.jsx("span",{children:""})]}),r.jsxs("span",{children:[": ",s.length]})]})]})}function nI({onBack:e,worldBook:t}){const[n,s]=k.useState(""),[a,i]=k.useState("local"),[l,c]=k.useState("before"),[u,p]=k.useState(""),[h,f]=k.useState(!1),[m,g]=k.useState(!1),[y,b]=k.useState(!1),S=t===null;k.useEffect(()=>{t&&(s(t.name),i(t.scope),c(t.position),p(t.content))},[t]);const v=async()=>{if(!n.trim()){b(!0);return}b(!1);try{let _=await se.get(J.WORLD_BOOKS,"world_books")||[];const R=new Date().toISOString();if(S){const D={id:`wb_${Date.now()}`,name:n.trim(),scope:a,position:l,content:u.trim(),createdAt:R,updatedAt:R};_.push(D)}else _=_.map(D=>D.id===t.id?{...D,name:n.trim(),scope:a,position:l,content:u.trim(),updatedAt:R}:D);await se.set(J.WORLD_BOOKS,"world_books",_),window.dispatchEvent(new Event("chat-settings-updated")),g(!0),setTimeout(()=>{g(!1),e()},1500)}catch(C){console.error("Failed to save world book:",C)}},N=async()=>{if(t)try{const C=await se.get(J.WORLD_BOOKS,"world_books");if(C){const _=C.filter(R=>R.id!==t.id);await se.set(J.WORLD_BOOKS,"world_books",_)}window.dispatchEvent(new Event("chat-settings-updated")),f(!1),setTimeout(()=>e(),300)}catch(C){console.error("Failed to delete world book:",C)}};return r.jsxs("div",{className:"w-full h-full relative bg-[#F2F0EB] z-50 overflow-hidden flex flex-col font-['Source_Han_Sans_CN_VF',sans-serif]",children:[r.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),r.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10 bg-[#F2F0EB]/95 backdrop-blur-sm border-b border-[#D6D3CC]",children:[r.jsx("button",{onClick:e,className:"w-10 h-10 bg-[#EAE8E3] border border-[#D6D3CC] rounded-md flex items-center justify-center text-[#5A5A55] transition-colors active:bg-white active:text-[#B93636] hover:bg-white hover:text-[#B93636]",children:r.jsx(xt,{className:"w-5 h-5",strokeWidth:2})}),r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(T8,{className:"w-3 h-3 text-[#8C8C89]"}),r.jsx("span",{className:"text-[10px] font-bold text-[#8C8C89] tracking-[0.2em] uppercase",children:S?"":""})]}),r.jsx("h1",{className:"text-base font-bold text-[#2C2C2C] tracking-wide",children:S?"":""})]}),r.jsx("div",{className:"w-10"})]}),r.jsxs("div",{className:"flex-1 px-5 pb-28 overflow-y-auto",children:[r.jsxs("div",{className:"mt-6 mb-8 text-center",children:[r.jsx("div",{className:"inline-block border-b-2 border-[#2C2C2C] pb-1 mb-2",children:r.jsxs("h2",{className:"text-xl font-black text-[#2C2C2C] uppercase tracking-tighter flex items-center gap-2",children:[r.jsx(Um,{className:"w-5 h-5"}),""]})}),r.jsx("p",{className:"text-[10px] font-mono text-[#8C8C89] uppercase tracking-widest",children:""})]}),r.jsxs("div",{className:"space-y-6 max-w-[420px] mx-auto",children:[r.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)]",children:[r.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:""}),r.jsxs("div",{className:"space-y-4 mt-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1",children:""}),r.jsx("input",{type:"text",value:n,onChange:C=>{s(C.target.value),b(!1)},className:`w-full bg-[#EAE8E3] border-b-2 px-3 py-2 text-lg font-bold text-[#2C2C2C] focus:outline-none focus:bg-white transition-colors placeholder:text-[#CCC] ${y?"border-[#B93636] bg-[#FFF5F5]":"border-[#D6D3CC] focus:border-[#2C2C2C]"}`,placeholder:""}),y&&r.jsxs("p",{className:"text-[10px] text-[#B93636] font-bold mt-1 uppercase flex items-center gap-1",children:[r.jsx(Hm,{className:"w-3 h-3"})," "]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[r.jsx(Yw,{className:"w-3 h-3"})," "]}),r.jsx("div",{className:"flex flex-col gap-1",children:[{id:"global",label:" ()"},{id:"local",label:""}].map(C=>r.jsxs("button",{onClick:()=>i(C.id),className:`w-full py-2 px-3 text-xs font-bold text-left transition-all border ${a===C.id?"bg-[#2C2C2C] text-[#F2F0EB] border-[#2C2C2C]":"bg-white border-[#D6D3CC] text-[#8C8C89] active:border-[#8C8C89] hover:border-[#8C8C89]"}`,children:[a===C.id&&r.jsx(Et,{className:"w-3 h-3 inline mr-1"}),C.label]},C.id))})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[r.jsx($7,{className:"w-3 h-3"})," "]}),r.jsx("div",{className:"flex flex-col gap-1",children:[{id:"before",label:" (Prepend)"},{id:"after",label:" (Append)"}].map(C=>r.jsxs("button",{onClick:()=>c(C.id),className:`w-full py-2 px-3 text-xs font-bold text-left transition-all border ${l===C.id?"bg-[#2C2C2C] text-[#F2F0EB] border-[#2C2C2C]":"bg-white border-[#D6D3CC] text-[#8C8C89] active:border-[#8C8C89] hover:border-[#8C8C89]"}`,children:[l===C.id&&r.jsx(Et,{className:"w-3 h-3 inline mr-1"}),C.label]},C.id))})]})]})]})]}),r.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 pb-2 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)] h-[360px] flex flex-col",children:[r.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:""}),r.jsxs("div",{className:"flex-1 mt-2 relative",children:[r.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-10",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px)",backgroundSize:"100% 2rem",marginTop:"1.9rem"}}),r.jsx("textarea",{value:u,onChange:C=>p(C.target.value),className:"w-full h-full bg-transparent border-none text-sm text-[#4A4A4A] focus:outline-none resize-none leading-[2rem] font-mono",placeholder:"...",style:{lineHeight:"2rem"}})]}),r.jsx("div",{className:"text-right border-t border-[#E5E5E5] pt-2 mt-2",children:r.jsxs("span",{className:"text-[10px] font-mono text-[#8C8C89]",children:[": ",u.length]})})]})]})]}),r.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-6 bg-[#F2F0EB]/90 backdrop-blur-md border-t border-[#D6D3CC] z-40 flex gap-3 justify-center",children:[!S&&r.jsx("button",{onClick:()=>f(!0),className:"w-12 h-12 border-2 border-[#FF3B30] text-[#FF3B30] flex items-center justify-center active:bg-[#FF3B30] active:text-white hover:bg-[#FF3B30] hover:text-white transition-colors rounded-[2px]",children:r.jsx(xn,{className:"w-5 h-5"})}),r.jsxs("button",{onClick:v,className:"flex-1 max-w-[300px] bg-[#2C2C2C] text-[#F2F0EB] h-12 rounded-[2px] font-bold text-sm tracking-wider uppercase active:bg-black hover:bg-black transition-colors shadow-lg flex items-center justify-center gap-2",children:[r.jsx(ti,{className:"w-4 h-4"}),S?"":""]})]}),r.jsx(Be,{children:h&&r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-[70] px-4",children:r.jsxs(me.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:350,damping:30},className:"bg-[#F2F0EB] border-2 border-[#FF3B30] p-6 max-w-xs w-full text-center shadow-2xl",children:[r.jsx("div",{className:"w-12 h-12 bg-[#FF3B30] text-white rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(xn,{className:"w-6 h-6"})}),r.jsx("h3",{className:"text-lg font-black text-[#2C2C2C] uppercase mb-2",children:""}),r.jsx("p",{className:"text-xs font-mono text-[#5A5A55] mb-6",children:""}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>f(!1),className:"flex-1 py-3 border border-[#D6D3CC] font-bold text-xs active:bg-white hover:bg-white transition-colors",children:""}),r.jsx("button",{onClick:N,className:"flex-1 py-3 bg-[#FF3B30] text-white font-bold text-xs active:bg-[#D32F2F] hover:bg-[#D32F2F] transition-colors",children:""})]})]})})}),r.jsx(Be,{children:m&&r.jsx(me.div,{initial:{opacity:0,scale:1.5,rotate:-10},animate:{opacity:1,scale:1,rotate:-5},exit:{opacity:0},className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[70] pointer-events-none",children:r.jsxs("div",{className:"w-40 h-40 rounded-full border-[6px] border-[#34C759] flex flex-col items-center justify-center text-[#34C759] opacity-90 mix-blend-multiply bg-white/50 backdrop-blur-sm",children:[r.jsx(Et,{className:"w-12 h-12 mb-1",strokeWidth:4}),r.jsx("span",{className:"text-xl font-black uppercase tracking-tight",children:""}),r.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest mt-1",children:new Date().toLocaleDateString()})]})})})]})}function rI({onClose:e}){const[t,n]=k.useState("list"),[s,a]=k.useState(null),[i,l]=k.useState(Date.now()),c=p=>{a(p),n("editor")},u=()=>{n("list"),l(Date.now()),setTimeout(()=>a(null),300)};return r.jsxs("div",{className:"absolute inset-0 w-full h-full bg-black overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 w-full h-full bg-[#F5F2EB] z-10",style:{pointerEvents:t==="editor"?"none":"auto"},children:r.jsx(tI,{onBack:e,onEdit:c,lastUpdated:i})}),r.jsx("div",{className:"absolute inset-0 bg-black -z-10"}),r.jsx(Be,{children:t==="editor"&&r.jsx(me.div,{initial:{y:"100%",borderRadius:"16px 16px 0 0"},animate:{y:0,borderRadius:"0px"},exit:{y:"100%",borderRadius:"16px 16px 0 0"},transition:{type:"spring",stiffness:300,damping:30},className:"absolute inset-0 w-full h-full z-20 shadow-2xl overflow-hidden",children:r.jsx(nI,{onBack:u,worldBook:s})},"editor")})]})}function sI({onClose:e,onEditUser:t,onEditCharacter:n,isBackground:s=!1,lastUpdated:a=0}){const[i,l]=k.useState([]),[c,u]=k.useState({name:"",country:"",fortress:"",date:"",attendant:""}),[p,h]=k.useState(()=>{const y=s5();return y!==void 0?y:null});k.useEffect(()=>{f(),m();const y=()=>{m()};return window.addEventListener("avatarChanged",y),window.addEventListener("userDataChanged",y),()=>{window.removeEventListener("avatarChanged",y),window.removeEventListener("userDataChanged",y)}},[a]);const f=async()=>{try{const y=await se.get(J.CHARACTERS,"characters");if(y){const b=await Promise.all(y.map(async S=>{if(S.avatar){if(S.avatar.startsWith("data:"))return{...S,avatarUrl:S.avatar};{const v=await Ct(S.avatar);return{...S,avatarUrl:v}}}return{...S,avatarUrl:null}}));l(b)}}catch(y){console.error("Failed to load characters:",y)}},m=async()=>{try{const y=await se.get(J.USER_DATA,"userData");y&&u(y);const b=await Ct("avatar");h(b),a5(b)}catch(y){console.error("Failed to load user data:",y)}},g=()=>{n(null)};return r.jsxs(me.div,{className:"absolute inset-0 bg-[#F2F0EB] z-0 overflow-hidden flex flex-col font-['Source_Han_Sans_CN_VF',sans-serif]",animate:{scale:s?.92:1,borderRadius:s?"16px":"0px",filter:s?"brightness(0.9)":"brightness(1)"},transition:{type:"spring",stiffness:300,damping:30},children:[r.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),r.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10 bg-[#F2F0EB]/95 backdrop-blur-sm border-b border-stone-200",children:[r.jsx("button",{onClick:e,className:"w-10 h-10 bg-[#EAE8E3] border border-[#D6D3CC] rounded-md flex items-center justify-center text-[#5A5A55] transition-colors hover:bg-white hover:text-black hover:border-[#999]",children:r.jsx(dn,{className:"w-5 h-5",strokeWidth:2})}),r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("span",{className:"text-[10px] font-bold text-[#8C8C89] tracking-[0.2em] uppercase",children:""}),r.jsx("h1",{className:"text-base font-bold text-[#2C2C2C] tracking-wide",children:""})]}),r.jsx("button",{onClick:g,className:"w-10 h-10 bg-[#2C2C2C] text-[#F2F0EB] rounded-md flex items-center justify-center transition-colors hover:bg-black shadow-sm",children:r.jsx(Zn,{className:"w-5 h-5",strokeWidth:2})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-24",children:r.jsxs("div",{children:[r.jsx("div",{className:"flex justify-end mt-6 mb-2",children:r.jsxs("div",{className:"border border-[#8C8C89] text-[#8C8C89] px-2 py-0.5 text-[10px] font-mono uppercase tracking-widest flex items-center gap-2 opacity-60",children:[r.jsx(Ya,{className:"w-3 h-3"}),"-",new Date().getFullYear(),"-A"]})}),r.jsxs("div",{className:"relative mb-8 group cursor-pointer",onClick:t,children:[r.jsx("div",{className:"absolute -top-2 left-1/2 -translate-x-1/2 w-12 h-4 bg-[#D6D3CC] rounded-sm z-0"}),r.jsxs("div",{className:"relative bg-[#F9F9F7] border border-[#D6D3CC] p-5 shadow-[0_2px_8px_rgba(0,0,0,0.04)] z-10 transition-all group-active:border-[#B93636] group-active:shadow-md group-hover:border-[#B93636] group-hover:shadow-md",children:[r.jsx("div",{className:"absolute top-0 left-0 w-3 h-3 border-t border-l border-[#B93636] opacity-0 group-active:opacity-100 group-hover:opacity-100 transition-opacity"}),r.jsx("div",{className:"absolute top-0 right-0 w-3 h-3 border-t border-r border-[#B93636] opacity-0 group-active:opacity-100 group-hover:opacity-100 transition-opacity"}),r.jsx("div",{className:"absolute bottom-0 left-0 w-3 h-3 border-b border-l border-[#B93636] opacity-0 group-active:opacity-100 group-hover:opacity-100 transition-opacity"}),r.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 border-b border-r border-[#B93636] opacity-0 group-active:opacity-100 group-hover:opacity-100 transition-opacity"}),r.jsxs("div",{className:"flex gap-5",children:[r.jsxs("div",{className:"w-24 h-32 bg-[#E5E5E5] border border-[#D6D3CC] p-1 flex-shrink-0 relative overflow-hidden",children:[p?r.jsx("img",{src:p,alt:"Saniwa",className:"w-full h-full object-cover grayscale-[0.2] group-active:grayscale-0 group-hover:grayscale-0 transition-all"}):r.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-[#999] bg-[#F0F0F0]",children:[r.jsx(mn,{className:"w-8 h-8 mb-1",strokeWidth:1.5}),r.jsx("span",{className:"text-[9px] uppercase",children:""})]}),r.jsx("div",{className:"absolute inset-0 border border-black/5 pointer-events-none"})]}),r.jsxs("div",{className:"flex-1 flex flex-col justify-between py-0.5",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"text-[10px] font-bold bg-[#2C2C2C] text-white px-1.5 py-0.5",children:""}),r.jsx("span",{className:"text-[10px] font-bold text-[#B93636] border border-[#B93636] px-1.5 py-0.5",children:""})]}),r.jsx("h2",{className:"text-xl font-bold text-[#2C2C2C] leading-tight mb-0.5 border-b border-[#D6D3CC] pb-2 inline-block min-w-[120px]",children:c.name||""})]}),r.jsxs("div",{className:"space-y-2 mt-2",children:[r.jsxs("div",{className:"grid grid-cols-[60px_1fr] text-xs",children:[r.jsx("span",{className:"text-[#8C8C89] font-bold uppercase text-[10px] tracking-wider mt-0.5",children:""}),r.jsx("span",{className:"font-medium text-[#4A4A4A] font-mono",children:c.fortress||"---"})]}),r.jsxs("div",{className:"grid grid-cols-[60px_1fr] text-xs",children:[r.jsx("span",{className:"text-[#8C8C89] font-bold uppercase text-[10px] tracking-wider mt-0.5",children:""}),r.jsx("span",{className:"font-medium text-[#4A4A4A] font-mono",children:c.country||"---"})]}),c.attendant&&r.jsxs("div",{className:"grid grid-cols-[60px_1fr] text-xs",children:[r.jsx("span",{className:"text-[#8C8C89] font-bold uppercase text-[10px] tracking-wider mt-0.5",children:""}),r.jsx("span",{className:"font-medium text-[#4A4A4A] flex items-center gap-1",children:c.attendant})]})]})]})]}),r.jsx("div",{className:"absolute right-4 bottom-4 opacity-10 pointer-events-none rotate-[-15deg]",children:r.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-[#2C2C2C] flex items-center justify-center",children:r.jsx("span",{className:"text-[10px] font-black uppercase text-[#2C2C2C]",children:""})})})]})]}),r.jsxs("div",{className:"flex items-end justify-between mb-4 border-b-2 border-[#2C2C2C] pb-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(rT,{className:"w-5 h-5 text-[#2C2C2C]"}),r.jsx("h3",{className:"text-base font-black text-[#2C2C2C] uppercase tracking-tight",children:""})]}),r.jsxs("span",{className:"text-xs font-mono font-bold text-[#2C2C2C]",children:[": ",i.length.toString().padStart(2,"0")]})]}),r.jsx("div",{className:"space-y-2",children:i.length===0?r.jsxs("div",{className:"py-16 text-center border border-dashed border-[#BBB] bg-[#F9F9F7]",children:[r.jsx(K9,{className:"w-12 h-12 text-[#D6D3CC] mx-auto mb-3",strokeWidth:1}),r.jsx("p",{className:"text-[#8C8C89] text-sm font-medium uppercase tracking-wider",children:""}),r.jsx("button",{onClick:g,className:"mt-4 text-xs font-bold text-[#2C2C2C] underline hover:text-[#B93636]",children:"+ "})]}):i.map((y,b)=>r.jsx("div",{onClick:()=>n(y),className:"group relative bg-[#F9F9F7] border-l-[3px] border-l-[#D6D3CC] border-y border-r border-[#E5E5E5] p-3 pl-4 transition-colors cursor-pointer active:bg-[#EAE8E3] active:border-l-[#2C2C2C] hover:bg-[#EAE8E3] hover:border-l-[#2C2C2C]",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("span",{className:"text-[10px] font-mono text-[#8C8C89] w-6 text-right transition-colors group-active:text-[#B93636] group-hover:text-[#B93636]",children:y.serialNumber||(b+1).toString().padStart(3,"0")}),r.jsx("div",{className:"w-10 h-10 bg-[#E5E5E5] border border-[#D6D3CC] flex-shrink-0 overflow-hidden transition-all",children:y.avatarUrl?r.jsx("img",{src:y.avatarUrl,alt:"",className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:r.jsx(mn,{className:"w-4 h-4 text-[#999]"})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[r.jsx("h4",{className:"text-sm font-bold text-[#2C2C2C] tracking-wide group-active:text-black group-hover:text-black",children:y.name}),r.jsx("span",{className:"text-[9px] font-bold uppercase text-[#B93636] opacity-0 transition-opacity border border-[#B93636] px-1 group-active:opacity-100 group-hover:opacity-100",children:""})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-[10px] text-[#8C8C89] font-mono uppercase tracking-wider",children:""}),r.jsx("p",{className:"text-xs text-[#5A5A55] truncate font-medium",children:y.description||"---"})]})]}),r.jsx(Qn,{className:"w-4 h-4 text-[#D6D3CC] transition-colors group-active:text-[#2C2C2C] group-hover:text-[#2C2C2C]"})]})},y.id))})]})})]})}function aI({onBack:e,character:t}){const[n,s]=k.useState(""),[a,i]=k.useState(""),[l,c]=k.useState(null),[u,p]=k.useState(null),[h,f]=k.useState(""),[m,g]=k.useState(""),[y,b]=k.useState([]),[S,v]=k.useState([]),[N,C]=k.useState(!1),[_,R]=k.useState(!1),[D,V]=k.useState(!1),[I,A]=k.useState([]),U=k.useRef(null),W=t===null;k.useEffect(()=>{t&&(s(t.name),i(t.serialNumber||""),f(t.description),g(t.manifestDate||""),b(t.worldBooks||[]),(async()=>{if(t.avatar)if(t.avatar.startsWith("data:"))c(t.avatar),p(null);else{const $=await Ct(t.avatar);c($),p(t.avatar)}})())},[t]),k.useEffect(()=>{(async()=>{const $=await se.get(J.WORLD_BOOKS,"world_books");$&&A($.filter(K=>K.scope==="local"))})()},[]);const T=()=>{U.current?.click()},M=async O=>{const $=O.target.files?.[0];if($){const K=Date.now(),H=`character-${t?.id||K}-avatar`,ee=await wr(H,$);c(ee),p(H)}},j=async()=>{try{let $=await se.get(J.CHARACTERS,"characters")||[];const K=new Date().toISOString();if(W){const H={id:`char_${Date.now()}`,name:n.trim()||"",serialNumber:a.trim(),avatar:u,description:h.trim(),manifestDate:m.trim()||void 0,worldBooks:y,createdAt:K,updatedAt:K};$.push(H)}else $=$.map(H=>H.id===t.id?{...H,name:n.trim()||"",serialNumber:a.trim(),avatar:u,description:h.trim(),manifestDate:m.trim()||void 0,worldBooks:y,updatedAt:K}:H);await se.set(J.CHARACTERS,"characters",$),window.dispatchEvent(new Event("chat-settings-updated")),R(!0),setTimeout(()=>{R(!1),e()},1500)}catch(O){console.error("Failed to save character:",O)}},P=async()=>{if(t)try{const O=await se.get(J.CHARACTERS,"characters");if(O){const $=O.filter(K=>K.id!==t.id);await se.set(J.CHARACTERS,"characters",$)}window.dispatchEvent(new Event("chat-settings-updated")),t.avatar&&await fa(t.avatar),C(!1),setTimeout(()=>e(),300)}catch(O){console.error("Failed to delete character:",O)}},L=O=>{b(y.filter($=>$!==O))},B=()=>{v([...y]),V(!0)},q=O=>{S.includes(O)?v(S.filter($=>$!==O)):v([...S,O])},G=()=>{b([...S]),V(!1)};return r.jsxs("div",{className:"fixed inset-0 bg-[#F2F0EB] z-50 overflow-hidden flex flex-col font-['Source_Han_Sans_CN_VF',sans-serif]",children:[r.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),r.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10 bg-[#F2F0EB]/95 backdrop-blur-sm border-b border-stone-200",children:[r.jsx("button",{onClick:e,className:"w-10 h-10 bg-[#EAE8E3] border border-[#D6D3CC] rounded-md flex items-center justify-center text-[#5A5A55] transition-colors active:bg-white active:text-[#B93636] hover:bg-white hover:text-[#B93636]",children:r.jsx(xt,{className:"w-5 h-5",strokeWidth:2})}),r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("span",{className:"text-[10px] font-bold text-[#8C8C89] tracking-[0.2em] uppercase",children:W?"":""}),r.jsx("h1",{className:"text-base font-bold text-[#2C2C2C] tracking-wide",children:W?"":""})]}),r.jsx("div",{className:"w-10"})]}),r.jsxs("div",{className:"flex-1 px-5 pb-28 overflow-y-auto",children:[r.jsxs("div",{className:"mt-6 mb-8 text-center",children:[r.jsx("div",{className:"inline-block border-b-2 border-[#2C2C2C] pb-1 mb-2",children:r.jsxs("h2",{className:"text-xl font-black text-[#2C2C2C] uppercase tracking-tighter flex items-center gap-2",children:[r.jsx(Um,{className:"w-5 h-5"}),""]})}),r.jsx("p",{className:"text-[10px] font-mono text-[#8C8C89] uppercase tracking-widest",children:""})]}),r.jsxs("div",{className:"space-y-6 max-w-[420px] mx-auto",children:[r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("input",{ref:U,type:"file",accept:"image/*",onChange:M,className:"hidden"}),r.jsxs("div",{onClick:T,className:"relative w-32 h-40 bg-[#E5E5E5] border-2 border-[#D6D3CC] p-2 cursor-pointer group transition-colors active:border-[#2C2C2C] hover:border-[#2C2C2C]",children:[r.jsxs("div",{className:"w-full h-full bg-[#F0F0F0] overflow-hidden relative",children:[l?r.jsx("img",{src:l,alt:"Avatar",className:"w-full h-full object-cover grayscale-[0.2] group-active:grayscale-0 group-hover:grayscale-0 transition-all"}):r.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-[#999]",children:[r.jsx(qa,{className:"w-8 h-8 mb-1",strokeWidth:1.5}),r.jsx("span",{className:"text-[9px] uppercase tracking-widest",children:""})]}),r.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-active:opacity-100 group-hover:opacity-100 transition-opacity",children:r.jsx(Vm,{className:"w-8 h-8 text-white"})})]}),r.jsx("div",{className:"absolute -top-1 -left-1 w-3 h-3 border-t-2 border-l-2 border-[#2C2C2C]"}),r.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 border-t-2 border-r-2 border-[#2C2C2C]"}),r.jsx("div",{className:"absolute -bottom-1 -left-1 w-3 h-3 border-b-2 border-l-2 border-[#2C2C2C]"}),r.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 border-b-2 border-r-2 border-[#2C2C2C]"})]}),r.jsx("p",{className:"mt-2 text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider",children:"1. "})]}),r.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)]",children:[r.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:" : "}),r.jsxs("div",{className:"space-y-4 mt-2",children:[r.jsxs("div",{className:"grid grid-cols-[1fr_80px] gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1",children:" / "}),r.jsx("input",{type:"text",value:n,onChange:O=>s(O.target.value),className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-lg font-bold text-[#2C2C2C] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors placeholder:text-[#CCC]",placeholder:""})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[r.jsx(Fb,{className:"w-3 h-3"})," "]}),r.jsx("input",{type:"text",value:a,onChange:O=>i(O.target.value),className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-lg font-bold text-[#2C2C2C] font-mono text-center focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors placeholder:text-[#CCC]",placeholder:"NO."})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[r.jsx(Rs,{className:"w-3 h-3"})," "]}),r.jsx("input",{type:"text",value:m,onChange:O=>g(O.target.value),placeholder:"YYYY-MM-DD",className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-sm font-mono font-medium text-[#4A4A4A] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors"})]})]})]}),r.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)]",children:[r.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:" : "}),r.jsxs("div",{className:"mt-2",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("label",{className:"text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider flex items-center gap-1",children:[r.jsx(Hw,{className:"w-3 h-3"})," "]}),r.jsx("button",{onClick:B,className:"text-[10px] font-bold text-[#2C2C2C] border border-[#2C2C2C] px-2 py-0.5 active:bg-[#2C2C2C] active:text-white hover:bg-[#2C2C2C] hover:text-white transition-colors uppercase",children:"+ "})]}),r.jsx("div",{className:"space-y-2",children:y.length===0?r.jsx("div",{className:"py-4 text-center border border-dashed border-[#D6D3CC] bg-[#F0F0F0]",children:r.jsx("span",{className:"text-[10px] text-[#999] font-mono uppercase",children:""})}):y.map(O=>{const $=I.find(K=>K.id===O);return $?r.jsxs("div",{className:"bg-white border border-[#E5E5E5] px-3 py-2 flex items-center justify-between group",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Fb,{className:"w-3 h-3 text-[#8C8C89]"}),r.jsx("span",{className:"text-sm font-bold text-[#4A4A4A]",children:$.name})]}),r.jsx("button",{onClick:()=>L(O),className:"text-[#D6D3CC] active:text-[#FF3B30] hover:text-[#FF3B30] transition-colors",children:r.jsx(xt,{className:"w-4 h-4"})})]},O):null})})]})]}),r.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 pb-2 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)] h-[300px] flex flex-col",children:[r.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:" : "}),r.jsxs("div",{className:"flex-1 mt-2 relative",children:[r.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-10",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px)",backgroundSize:"100% 2rem",marginTop:"1.9rem"}}),r.jsx("textarea",{value:h,onChange:O=>f(O.target.value),className:"w-full h-full bg-transparent border-none text-sm text-[#4A4A4A] focus:outline-none resize-none leading-[2rem]",placeholder:"...",style:{lineHeight:"2rem"}})]}),r.jsx("div",{className:"text-right border-t border-[#E5E5E5] pt-2 mt-2",children:r.jsxs("span",{className:"text-[10px] font-mono text-[#8C8C89]",children:[": ",h.length]})})]})]})]}),r.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-6 bg-[#F2F0EB]/90 backdrop-blur-md border-t border-[#D6D3CC] z-40 flex gap-3 justify-center",children:[!W&&r.jsx("button",{onClick:()=>C(!0),className:"w-12 h-12 border-2 border-[#FF3B30] text-[#FF3B30] flex items-center justify-center active:bg-[#FF3B30] active:text-white hover:bg-[#FF3B30] hover:text-white transition-colors rounded-[2px]",children:r.jsx(xn,{className:"w-5 h-5"})}),r.jsxs("button",{onClick:j,className:"flex-1 max-w-[300px] bg-[#2C2C2C] text-[#F2F0EB] h-12 rounded-[2px] font-bold text-sm tracking-wider uppercase active:bg-black hover:bg-black transition-colors shadow-lg flex items-center justify-center gap-2",children:[r.jsx(ti,{className:"w-4 h-4"}),W?"":""]})]}),r.jsx(Be,{children:D&&r.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center px-4",children:[r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>V(!1),className:"absolute inset-0 bg-black/40 backdrop-blur-sm"}),r.jsxs(me.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",duration:.3,bounce:0},className:"bg-[#F2F0EB] w-full max-w-[340px] border border-[#D6D3CC] shadow-2xl relative z-10",children:[r.jsxs("div",{className:"bg-[#2C2C2C] text-[#F2F0EB] px-4 py-3 flex justify-between items-center",children:[r.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:""}),r.jsx("button",{onClick:()=>V(!1),children:r.jsx(xt,{className:"w-4 h-4"})})]}),r.jsx("div",{className:"max-h-[50vh] overflow-y-auto p-2",children:I.length===0?r.jsx("div",{className:"p-4 text-center text-xs text-[#8C8C89] font-mono",children:""}):r.jsx("div",{className:"space-y-1",children:I.map(O=>r.jsxs("button",{onClick:()=>q(O.id),className:`w-full px-4 py-3 text-left text-sm font-bold border transition-all flex justify-between items-center ${S.includes(O.id)?"bg-white border-[#2C2C2C] text-[#2C2C2C]":"bg-[#F9F9F7] border-transparent text-[#8C8C89] active:border-[#D6D3CC] hover:border-[#D6D3CC]"}`,children:[O.name,S.includes(O.id)&&r.jsx(Et,{className:"w-4 h-4"})]},O.id))})}),r.jsxs("div",{className:"p-3 border-t border-[#D6D3CC] flex gap-2",children:[r.jsx("button",{onClick:()=>V(!1),className:"flex-1 py-2 text-xs font-bold text-[#5A5A55] active:bg-[#E5E5E5] hover:bg-[#E5E5E5]",children:""}),r.jsx("button",{onClick:G,className:"flex-1 py-2 bg-[#2C2C2C] text-[#F2F0EB] text-xs font-bold active:bg-black hover:bg-black",children:""})]})]})]})}),r.jsx(Be,{children:_&&r.jsx(me.div,{initial:{opacity:0,scale:1.5,rotate:-10},animate:{opacity:1,scale:1,rotate:-5},exit:{opacity:0},className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[70] pointer-events-none",children:r.jsxs("div",{className:"w-40 h-40 rounded-full border-[6px] border-[#34C759] flex flex-col items-center justify-center text-[#34C759] opacity-90 mix-blend-multiply bg-white/50 backdrop-blur-sm",children:[r.jsx(Et,{className:"w-12 h-12 mb-1",strokeWidth:4}),r.jsx("span",{className:"text-xl font-black uppercase tracking-tight",children:""}),r.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest mt-1",children:new Date().toLocaleDateString()})]})})}),r.jsx(Be,{children:N&&r.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center px-4",children:[r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>C(!1),className:"absolute inset-0 bg-black/40 backdrop-blur-sm"}),r.jsxs(me.div,{initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:10},transition:{type:"spring",duration:.3,bounce:0},className:"bg-[#F2F0EB] border-2 border-[#FF3B30] p-6 max-w-xs w-full text-center shadow-2xl relative z-10",children:[r.jsx("div",{className:"w-12 h-12 bg-[#FF3B30] text-white rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(xn,{className:"w-6 h-6"})}),r.jsx("h3",{className:"text-lg font-black text-[#2C2C2C] uppercase mb-2",children:""}),r.jsx("p",{className:"text-xs font-mono text-[#5A5A55] mb-6",children:""}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>C(!1),className:"flex-1 py-3 border border-[#D6D3CC] font-bold text-xs active:bg-white hover:bg-white transition-colors",children:""}),r.jsx("button",{onClick:P,className:"flex-1 py-3 bg-[#FF3B30] text-white font-bold text-xs active:bg-[#D32F2F] hover:bg-[#D32F2F] transition-colors",children:""})]})]})]})})]})}function iI({onBack:e}){const[t,n]=k.useState(""),[s,a]=k.useState(""),[i,l]=k.useState(""),[c,u]=k.useState(""),[p,h]=k.useState(""),[f,m]=k.useState(""),[g,y]=k.useState(""),[b,S]=k.useState(""),[v,N]=k.useState(!1);k.useEffect(()=>{(async()=>{try{const R=await se.get(J.USER_DATA,"userData");R&&(n(R.name||""),a(R.country||""),l(R.fortress||""),u(R.attendant||""),h(R.initialSword||""),m(R.date||""),y(R.birthday||""));const D=await se.get(J.USER_DATA,"user_description");D&&S(D)}catch(R){console.error("Failed to load user data:",R)}})()},[]);const C=async()=>{try{const _={name:t,country:s,fortress:i,attendant:c,initialSword:p,date:f,birthday:g};await se.set(J.USER_DATA,"userData",_),await se.set(J.USER_DATA,"user_description",b);const R=new CustomEvent("userDataChanged",{detail:_});window.dispatchEvent(R),window.dispatchEvent(new Event("chat-settings-updated")),N(!0),setTimeout(()=>{N(!1),e()},1500)}catch(_){console.error("Failed to save user data:",_)}};return r.jsxs("div",{className:"fixed inset-0 bg-[#F2F0EB] z-50 overflow-hidden flex flex-col font-['Source_Han_Sans_CN_VF',sans-serif]",children:[r.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),r.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10 bg-[#F2F0EB]/95 backdrop-blur-sm border-b border-stone-200",children:[r.jsx("button",{onClick:e,className:"w-10 h-10 bg-[#EAE8E3] border border-[#D6D3CC] rounded-md flex items-center justify-center text-[#5A5A55] transition-colors active:bg-white active:text-[#B93636] hover:bg-white hover:text-[#B93636]",children:r.jsx(xt,{className:"w-5 h-5",strokeWidth:2})}),r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("span",{className:"text-[10px] font-bold text-[#8C8C89] tracking-[0.2em] uppercase",children:"Form 10-24"}),r.jsx("h1",{className:"text-base font-bold text-[#2C2C2C] tracking-wide",children:""})]}),r.jsx("div",{className:"w-10"})," "]}),r.jsxs("div",{className:"flex-1 px-5 pb-28 overflow-y-auto",children:[r.jsxs("div",{className:"mt-6 mb-8 text-center",children:[r.jsx("div",{className:"inline-block border-b-2 border-[#2C2C2C] pb-1 mb-2",children:r.jsxs("h2",{className:"text-xl font-black text-[#2C2C2C] uppercase tracking-tighter flex items-center gap-2",children:[r.jsx(Um,{className:"w-5 h-5"}),""]})}),r.jsx("p",{className:"text-[10px] font-mono text-[#8C8C89] uppercase tracking-widest",children:""})]}),r.jsxs("div",{className:"space-y-6 max-w-[420px] mx-auto",children:[r.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)]",children:[r.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:""}),r.jsxs("div",{className:"space-y-4 mt-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1",children:""}),r.jsx("input",{type:"text",value:t,onChange:_=>n(_.target.value),className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-lg font-bold text-[#2C2C2C] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors placeholder:text-[#CCC]",placeholder:""})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[r.jsx(O8,{className:"w-3 h-3"})," "]}),r.jsx("input",{type:"text",value:i,onChange:_=>l(_.target.value),className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-sm font-medium text-[#4A4A4A] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[r.jsx(k7,{className:"w-3 h-3"})," "]}),r.jsx("input",{type:"text",value:s,onChange:_=>a(_.target.value),className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-sm font-medium text-[#4A4A4A] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors"})]})]})]})]}),r.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)]",children:[r.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:""}),r.jsxs("div",{className:"mt-2 space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-[10px] font-mono text-[#B93636] uppercase tracking-wider mb-1 flex items-center gap-1",children:[r.jsx(Xw,{className:"w-3 h-3",fill:"currentColor"})," "]}),r.jsx("div",{className:"relative",children:r.jsx("input",{type:"text",value:c,onChange:_=>u(_.target.value),className:"w-full bg-[#FFF5F5] border-b-2 border-[#EFCACA] px-3 py-2 text-sm font-bold text-[#B93636] focus:outline-none focus:border-[#B93636] focus:bg-white transition-colors",placeholder:""})})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[r.jsx(tT,{className:"w-3 h-3"})," "]}),r.jsx("input",{type:"text",value:p,onChange:_=>h(_.target.value),className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-sm font-medium text-[#4A4A4A] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors",placeholder:""})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[r.jsx(Rs,{className:"w-3 h-3"})," "]}),r.jsx("input",{type:"date",value:f,onChange:_=>m(_.target.value),className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-2 py-2 text-xs font-mono font-medium text-[#4A4A4A] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[r.jsx(N7,{className:"w-3 h-3"})," "]}),r.jsx("input",{type:"text",value:g,onChange:_=>y(_.target.value),placeholder:"MM-DD",className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-xs font-mono font-medium text-[#4A4A4A] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors"})]})]})]})]}),r.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 pb-2 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)] h-[240px] flex flex-col",children:[r.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:""}),r.jsxs("div",{className:"flex-1 mt-2 relative",children:[r.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-10",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px)",backgroundSize:"100% 2rem",marginTop:"1.9rem"}}),r.jsx("textarea",{value:b,onChange:_=>S(_.target.value),className:"w-full h-full bg-transparent border-none text-sm text-[#4A4A4A] focus:outline-none resize-none leading-[2rem]",placeholder:"...",style:{lineHeight:"2rem"}})]}),r.jsx("div",{className:"text-right border-t border-[#E5E5E5] pt-2 mt-2",children:r.jsxs("span",{className:"text-[10px] font-mono text-[#8C8C89]",children:[": ",b.length]})})]})]})]}),r.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-6 bg-[#F2F0EB]/90 backdrop-blur-md border-t border-[#D6D3CC] z-40",children:r.jsxs("div",{className:"max-w-[420px] mx-auto flex gap-4 items-center justify-between",children:[r.jsx("div",{className:"text-[10px] font-mono text-[#8C8C89] max-w-[150px]",children:""}),r.jsxs("button",{onClick:C,className:"bg-[#2C2C2C] text-[#F2F0EB] px-8 py-3 rounded-[2px] font-bold text-sm tracking-wider uppercase active:bg-black hover:bg-black transition-colors shadow-lg flex items-center gap-2",children:[r.jsx(ti,{className:"w-4 h-4"}),""]})]})}),r.jsx(Be,{children:v&&r.jsx(me.div,{initial:{opacity:0,scale:1.5,rotate:-10},animate:{opacity:1,scale:1,rotate:-5},exit:{opacity:0},className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[60] pointer-events-none",children:r.jsxs("div",{className:"w-40 h-40 rounded-full border-[6px] border-[#34C759] flex flex-col items-center justify-center text-[#34C759] opacity-90 mix-blend-multiply bg-white/50 backdrop-blur-sm",children:[r.jsx(Et,{className:"w-12 h-12 mb-1",strokeWidth:4}),r.jsx("span",{className:"text-xl font-black uppercase tracking-tight",children:""}),r.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest mt-1",children:new Date().toLocaleDateString()})]})})})]})}function oI({onClose:e}){const[t,n]=k.useState("list"),[s,a]=k.useState(null),[i,l]=k.useState(Date.now()),c=()=>{n("editUser")},u=h=>{a(h),n("editCharacter")},p=()=>{n("list"),a(null),l(Date.now())};return r.jsxs("div",{className:"relative w-full h-full bg-[#F2F0EB]",children:[r.jsx(sI,{onClose:e,onEditUser:c,onEditCharacter:u,isBackground:t!=="list",lastUpdated:i}),r.jsxs(Be,{children:[t==="editUser"&&r.jsx(me.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"absolute inset-0 z-20",style:{willChange:"transform"},children:r.jsx(iI,{onBack:p})},"editUser"),t==="editCharacter"&&r.jsx(me.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"absolute inset-0 z-20",style:{willChange:"transform"},children:r.jsx(aI,{onBack:p,character:s})},"editCharacter")]}),r.jsx(Be,{children:t!=="list"&&r.jsx(me.div,{initial:{opacity:0},animate:{opacity:.3},exit:{opacity:0},className:"absolute inset-0 bg-black z-10 pointer-events-none"})})]})}function lI(){const e={user:`background: linear-gradient(75deg, rgba(172, 188, 166, 1), rgba(172, 188, 166, 1), rgba(172, 188, 166, 1));
color: #ffffff;
border-radius: 8px;
padding: 0.625rem 0.875rem;
max-width: 70vw;`,character:`background: linear-gradient(-75deg, rgba(245, 245, 245, 1), rgba(245, 245, 245, 1), rgba(245, 245, 245, 1));
color: #333333;
border-radius: 8px;
padding: 0.625rem 0.875rem;
max-width: 70vw;`,userQuote:`background: #9BAD96;
color: rgba(255, 255, 255, 0.8);
border-radius: 4px;
padding: 0.5rem;
margin-bottom: 0.5rem;`,characterQuote:`background: #e8e8e8;
color: #666666;
border-radius: 4px;
padding: 0.5rem;
margin-bottom: 0.5rem;`},[t,n]=k.useState(()=>We.chatSettings||{userAvatar:null,userNickname:"",contextMessageCount:10,chatBackground:null,enabledWorldBooks:[],timeAwareness:!0,bubbleStyles:e,timestampStyle:"default",theme:"light"}),[s,a]=k.useState(()=>We.chatSettings||{userAvatar:null,userNickname:"",contextMessageCount:10,chatBackground:null,enabledWorldBooks:[],timeAwareness:!0,bubbleStyles:e,timestampStyle:"default",theme:"light"}),[i,l]=k.useState(null),[c,u]=k.useState(null),[p,h]=k.useState(!1),[f,m]=k.useState([]),[g,y]=k.useState(!1),[b,S]=k.useState(!1),[v,N]=k.useState([]),[C,_]=k.useState(""),[R,D]=k.useState(!1),[V,I]=k.useState([]),[A,U]=k.useState(()=>{const F=We.chatSettings;return F?.theme?F.theme==="dark"||F.theme==="dark-frosted":F?.darkMode||!1}),[W,T]=k.useState("");k.useEffect(()=>{U(s.theme==="dark"||s.theme==="dark-frosted")},[s.theme]);const M=F=>{const le={user:F?.user||e.user,userQuote:F?.userQuote||e.userQuote,character:F?.character||e.character,characterQuote:F?.characterQuote||e.characterQuote};return`/*  */
.user-bubble {
  ${le.user.split(`
`).join(`
  `)}
}

/*  */
.user-quote {
  ${le.userQuote.split(`
`).join(`
  `)}
}

/*  */
.character-bubble {
  ${le.character.split(`
`).join(`
  `)}
}

/*  */
.character-quote {
  ${le.characterQuote.split(`
`).join(`
  `)}
}`},j=F=>{const le={...e},Z=F.match(/\.user-bubble\s*\{([^}]*)\}/),te=F.match(/\.user-quote\s*\{([^}]*)\}/),ne=F.match(/\.character-bubble\s*\{([^}]*)\}/),ae=F.match(/\.character-quote\s*\{([^}]*)\}/);return Z&&(le.user=Z[1].trim().replace(/\s+/g," ").replace(/; /g,`;
`)),te&&(le.userQuote=te[1].trim().replace(/\s+/g," ").replace(/; /g,`;
`)),ne&&(le.character=ne[1].trim().replace(/\s+/g," ").replace(/; /g,`;
`)),ae&&(le.characterQuote=ae[1].trim().replace(/\s+/g," ").replace(/; /g,`;
`)),le};k.useEffect(()=>{P(),L(),B()},[]),k.useEffect(()=>{(async()=>{if(s.userAvatar)if(s.userAvatar.startsWith("data:"))l(s.userAvatar);else{const le=await Ct(s.userAvatar);l(le)}else l(null);if(s.chatBackground)if(s.chatBackground.startsWith("data:"))u(s.chatBackground);else{const le=await Ct(s.chatBackground);u(le)}else u(null)})()},[s.userAvatar,s.chatBackground]);const P=async()=>{try{const F=await se.get(J.CHATS,"chat_settings");if(F){const le={...F,enabledWorldBooks:F.enabledWorldBooks||[],timeAwareness:F.timeAwareness!==void 0?F.timeAwareness:!0,bubbleStyles:F.bubbleStyles||e,timestampStyle:F.timestampStyle||"default",theme:F.theme||(F.darkMode?"dark":"light"),customCSS:F.customCSS};n(le),a(le),F.customCSS?T(F.customCSS):T(M(F.bubbleStyles||e)),We.chatSettings=le}else{const le=await se.get(J.USER_DATA,"userData");if(le){const Z={userAvatar:null,userNickname:le.name||"",contextMessageCount:10,chatBackground:null,enabledWorldBooks:[],timeAwareness:!0,bubbleStyles:e,timestampStyle:"default",theme:"light"};n(Z),a(Z),T(M(e)),We.chatSettings=Z}}}catch(F){console.error("Failed to load chat settings:",F)}},L=async()=>{try{const F=await se.get(J.WORLD_BOOKS,"world_books");if(F){const le=F.filter(Z=>Z.scope==="local");m(le)}}catch(F){console.error("Failed to load world books:",F)}},B=async()=>{try{const F=await se.get(J.BUBBLE_PRESETS,"bubble_presets");F&&N(F)}catch(F){console.error("Failed to load bubble presets:",F)}},q=async F=>{try{a(F),n(F),await se.set(J.CHATS,"chat_settings",F),We.chatSettings=F,window.dispatchEvent(new Event("chat-settings-updated"))}catch(le){console.error("Failed to save settings instantly:",le)}},G=F=>{const le={...s,userNickname:F};q(le)},O=F=>{const le={...s,contextMessageCount:F};q(le)},$=()=>{const F=document.createElement("input");F.type="file",F.accept="image/*",F.onchange=async le=>{const Z=le.target.files?.[0];if(Z){y(!0);try{const te=await wr("chat-avatar",Z),ne={...s,userAvatar:"chat-avatar"};s.userAvatar==="chat-avatar-temp"&&await fa("chat-avatar-temp"),l(te),q(ne)}catch(te){console.error(":",te)}finally{y(!1)}}},F.click()},K=()=>{const F=document.createElement("input");F.type="file",F.accept="image/*",F.onchange=async le=>{const Z=le.target.files?.[0];if(Z){y(!0);try{const te=await wr("chat-background",Z),ne={...s,chatBackground:"chat-background"};s.chatBackground==="chat-background-temp"&&await fa("chat-background-temp"),u(te),q(ne)}catch(te){console.error(":",te)}finally{y(!1)}}},F.click()},H=()=>{const F={...s,chatBackground:null};u(null),q(F)},ee=async()=>{try{const F=j(W),le={...s,bubbleStyles:F,customCSS:W};await q(le),h(!0),setTimeout(()=>h(!1),2e3)}catch(F){console.error("Failed to apply bubble styles:",F)}},Y=()=>{I([...s.enabledWorldBooks]),D(!0)},re=F=>{V.includes(F)?I(V.filter(le=>le!==F)):I([...V,F])},de=()=>{const F={...s,enabledWorldBooks:[...V]};q(F),D(!1)},X=F=>{const le={...s,enabledWorldBooks:s.enabledWorldBooks.filter(Z=>Z!==F)};q(le)},oe=F=>{const le={};return F&&F.split(";").filter(te=>te.trim()).forEach(te=>{const[ne,ae]=te.split(":").map(we=>we.trim());if(ne&&ae){const we=ne.replace(/-([a-z])/g,Ce=>Ce[1].toUpperCase());le[we]=ae}}),le},ye=async()=>{if(!C.trim()){alert("");return}const F={id:Date.now().toString(),name:C.trim(),styles:s.bubbleStyles||e,customCSS:W,createdAt:new Date().toISOString()},le=[...v,F];N(le),await se.set(J.BUBBLE_PRESETS,"bubble_presets",le),_(""),h(!0),setTimeout(()=>h(!1),1500)},be=F=>{a({...s,bubbleStyles:F.styles,customCSS:F.customCSS}),F.customCSS?T(F.customCSS):T(M(F.styles))},Ie=async F=>{const le=v.filter(Z=>Z.id!==F);N(le),await se.set(J.BUBBLE_PRESETS,"bubble_presets",le)},De=j(W);return r.jsxs("div",{className:`flex-1 overflow-y-auto flex flex-col ${s.theme==="light-frosted"||s.theme==="dark-frosted"?"bg-transparent":A?"bg-[#121212]":"bg-white"}`,children:[r.jsxs("div",{className:"flex-1 px-5 py-6",children:[r.jsxs("div",{className:"mb-8 flex flex-col items-center",children:[r.jsx("button",{onClick:$,className:`w-24 h-24 rounded-full flex items-center justify-center overflow-hidden active:opacity-70 hover:opacity-70 transition-opacity ${s.theme==="light-frosted"?"bg-white/40":s.theme==="dark-frosted"?"bg-black/40":A?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,children:i?r.jsx("img",{src:i,alt:"Avatar",className:"w-full h-full object-cover"}):r.jsx(Vm,{className:"w-8 h-8 text-[#999]",strokeWidth:2})}),r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[13px] mt-2 ${A?"text-[#888]":"text-[#999]"}`,children:""})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] mb-3 ${A?"text-white":"text-[#333]"}`,children:""}),r.jsx("input",{type:"text",value:s.userNickname,onChange:F=>G(F.target.value),placeholder:"",className:`w-full px-4 py-3 rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] outline-none transition-colors ${s.theme==="light-frosted"?"bg-white/40 text-[#333] placeholder:text-[#999] focus:bg-white/60":s.theme==="dark-frosted"?"bg-black/40 text-white placeholder:text-[#888] focus:bg-black/60":A?"bg-[#1e1e1e] text-white placeholder:text-[#888] focus:bg-[#2d2d2d]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999] focus:bg-[#ebebeb]"}`})]}),r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] ${A?"text-white":"text-[#333]"}`,children:"AI"}),r.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] text-[#7B9E7B]",children:s.contextMessageCount})]}),r.jsx("div",{className:"px-1",children:r.jsx("input",{type:"range",min:"1",max:"2000",value:s.contextMessageCount,onChange:F=>O(parseInt(F.target.value)),className:`w-full h-2 rounded-lg appearance-none cursor-pointer slider ${s.theme==="light-frosted"?"bg-white/40":s.theme==="dark-frosted"?"bg-white/10":A?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,style:{background:`linear-gradient(to right, #7B9E7B 0%, #7B9E7B ${(s.contextMessageCount-1)/1999*100}%, ${s.theme==="light-frosted"?"rgba(255,255,255,0.4)":s.theme==="dark-frosted"?"rgba(255,255,255,0.1)":A?"#1e1e1e":"#f5f5f5"} ${(s.contextMessageCount-1)/1999*100}%, ${s.theme==="light-frosted"?"rgba(255,255,255,0.4)":s.theme==="dark-frosted"?"rgba(255,255,255,0.1)":A?"#1e1e1e":"#f5f5f5"} 100%)`}})}),r.jsxs("div",{className:"flex justify-between mt-2 px-1",children:[r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] ${A?"text-[#888]":"text-[#999]"}`,children:"1"}),r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] ${A?"text-[#888]":"text-[#999]"}`,children:"2000"})]}),r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[13px] mt-3 ${A?"text-[#888]":"text-[#999]"}`,children:"AIAI"})]}),r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] mb-1 ${A?"text-white":"text-[#333]"}`,children:""}),r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[13px] ${A?"text-[#888]":"text-[#999]"}`,children:""})]}),r.jsx("button",{onClick:()=>{const F={...s,timeAwareness:!s.timeAwareness};q(F)},className:`w-12 h-7 rounded-full transition-colors flex items-center px-0.5 hover:opacity-80 active:opacity-80 ${s.timeAwareness?"bg-[#7B9E7B]":"bg-[#d0d0d0]"}`,children:r.jsx("div",{className:`w-6 h-6 bg-white rounded-full transition-transform ${s.timeAwareness?"translate-x-5":"translate-x-0"}`})})]})}),r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] ${A?"text-white":"text-[#333]"}`,children:""}),f.length>0&&r.jsx("button",{onClick:Y,className:"w-8 h-8 bg-[#7B9E7B] rounded-full flex items-center justify-center active:opacity-80 hover:opacity-80 transition-opacity",children:r.jsx(Zn,{className:"w-5 h-5 text-white",strokeWidth:2})})]}),f.length===0?r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] ${A?"text-[#888]":"text-[#999]"}`,children:""}):s.enabledWorldBooks.length===0?r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] ${A?"text-[#888]":"text-[#999]"}`,children:""}):r.jsx("div",{className:"flex flex-col gap-2",children:s.enabledWorldBooks.map(F=>{const le=f.find(Z=>Z.id===F);return le?r.jsxs("div",{className:`rounded-lg px-4 py-3 flex items-center justify-between ${s.theme==="light-frosted"?"bg-white/40":s.theme==="dark-frosted"?"bg-black/40":A?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,children:[r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] ${A?"text-white":"text-[#333]"}`,children:le.name}),r.jsx("button",{onClick:()=>X(F),className:"text-[#999] hover:text-[#333] active:text-[#333] transition-colors",children:r.jsx(xt,{className:"w-5 h-5",strokeWidth:2})})]},F):null})})]}),r.jsxs("div",{className:"mb-8",children:[r.jsxs("button",{onClick:()=>S(!b),className:`w-full flex items-center justify-between p-4 rounded-lg transition-colors ${s.theme==="light-frosted"?"bg-white/40 active:bg-white/60 hover:bg-white/60":s.theme==="dark-frosted"?"bg-black/40 active:bg-black/60 hover:bg-black/60":A?"bg-[#1e1e1e] active:bg-[#2d2d2d] hover:bg-[#2d2d2d]":"bg-[#f5f5f5] active:bg-[#ebebeb] hover:bg-[#ebebeb]"}`,children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] ${A?"text-white":"text-[#333]"}`,children:""}),r.jsx(Ka,{className:`w-5 h-5 transition-transform ${b?"rotate-180":""} ${A?"text-[#a0a0a0]":"text-[#666]"}`,strokeWidth:2})]}),r.jsx(Be,{children:b&&r.jsx(me.div,{initial:{height:0,opacity:0,marginTop:0},animate:{height:"auto",opacity:1,marginTop:16},exit:{height:0,opacity:0,marginTop:0},transition:{type:"spring",stiffness:300,damping:30},className:"overflow-hidden",children:r.jsxs("div",{className:"flex flex-col gap-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] mb-3 ${A?"text-white":"text-[#333]"}`,children:""}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{const F={...s,theme:"light",darkMode:!1};q(F)},className:`flex-1 py-3 rounded-lg border-2 font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] transition-all ${s.theme==="light"?"border-[#7B9E7B] bg-[#7B9E7B]/10 text-[#7B9E7B]":A?"border-[#2d2d2d] bg-[#1e1e1e] text-[#888]":"border-[#e5e5e5] bg-[#f5f5f5] text-[#666]"}`,children:""}),r.jsx("button",{onClick:()=>{const F={...s,theme:"dark",darkMode:!0};q(F)},className:`flex-1 py-3 rounded-lg border-2 font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] transition-all ${s.theme==="dark"?"border-[#7B9E7B] bg-[#7B9E7B]/10 text-[#7B9E7B]":A?"border-[#2d2d2d] bg-[#1e1e1e] text-[#888]":"border-[#e5e5e5] bg-[#f5f5f5] text-[#666]"}`,children:""}),r.jsx("button",{onClick:()=>{const F={...s,theme:"light-frosted",darkMode:!1};q(F)},className:`flex-1 py-3 rounded-lg border-2 font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] transition-all ${s.theme==="light-frosted"?"border-[#7B9E7B] bg-[#7B9E7B]/10 text-[#7B9E7B]":A?"border-[#2d2d2d] bg-[#1e1e1e] text-[#888]":"border-[#e5e5e5] bg-[#f5f5f5] text-[#666]"}`,children:""}),r.jsx("button",{onClick:()=>{const F={...s,theme:"dark-frosted",darkMode:!0};q(F)},className:`flex-1 py-3 rounded-lg border-2 font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] transition-all ${s.theme==="dark-frosted"?"border-[#7B9E7B] bg-[#7B9E7B]/10 text-[#7B9E7B]":A?"border-[#2d2d2d] bg-[#1e1e1e] text-[#888]":"border-[#e5e5e5] bg-[#f5f5f5] text-[#666]"}`,children:""})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] mb-3 ${A?"text-white":"text-[#333]"}`,children:""}),r.jsxs("button",{onClick:K,className:`w-full px-4 py-3 rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] transition-colors flex items-center justify-center gap-2 ${s.theme==="light-frosted"?"bg-white/40 text-[#333] active:bg-white/60 hover:bg-white/60":s.theme==="dark-frosted"?"bg-black/40 text-white active:bg-black/60 hover:bg-black/60":A?"bg-[#1e1e1e] text-white active:bg-[#2d2d2d] hover:bg-[#2d2d2d]":"bg-[#f5f5f5] text-[#333] active:bg-[#ebebeb] hover:bg-[#ebebeb]"}`,children:[r.jsx(qa,{className:`w-5 h-5 ${A?"text-[#a0a0a0]":"text-[#666]"}`,strokeWidth:2}),r.jsx("span",{children:s.chatBackground?"":""})]}),s.chatBackground&&r.jsxs("button",{onClick:H,className:`mt-2 w-full px-4 py-2.5 rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] transition-colors flex items-center justify-center gap-2 ${s.theme==="light-frosted"?"bg-red-50/50 text-[#ff4d4f] active:bg-red-50 hover:bg-red-50":s.theme==="dark-frosted"?"bg-red-900/20 text-[#ff6b6b] active:bg-red-900/30 hover:bg-red-900/30":A?"bg-[#2a1a1a] text-[#ff6b6b] active:bg-[#3a2a2a] hover:bg-[#3a2a2a]":"bg-[#fff0f0] text-[#ff4d4f] active:bg-[#ffe5e5] hover:bg-[#ffe5e5]"}`,children:[r.jsx(xn,{className:"w-4 h-4",strokeWidth:2}),r.jsx("span",{children:""})]}),c&&r.jsx("div",{className:"mt-3 rounded-lg overflow-hidden",children:r.jsx("img",{src:c,alt:"Background Preview",className:"w-full h-32 object-cover"})})]}),r.jsxs("div",{children:[r.jsx("h4",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] mb-3 ${A?"text-white":"text-[#333]"}`,children:""}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{const F={...s,timestampStyle:"default"};q(F)},className:`flex-1 py-3 rounded-lg border-2 font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] transition-all ${s.timestampStyle!=="inside"?"border-[#7B9E7B] bg-[#7B9E7B]/10 text-[#7B9E7B]":A?"border-[#2d2d2d] bg-[#1e1e1e] text-[#888]":"border-[#e5e5e5] bg-[#f5f5f5] text-[#666]"}`,children:" ()"}),r.jsx("button",{onClick:()=>{const F={...s,timestampStyle:"inside"};q(F)},className:`flex-1 py-3 rounded-lg border-2 font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] transition-all ${s.timestampStyle==="inside"?"border-[#7B9E7B] bg-[#7B9E7B]/10 text-[#7B9E7B]":A?"border-[#2d2d2d] bg-[#1e1e1e] text-[#888]":"border-[#e5e5e5] bg-[#f5f5f5] text-[#666]"}`,children:" ()"})]}),r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] mt-2 ${A?"text-[#888]":"text-[#999]"}`,children:'""'})]}),r.jsxs("div",{children:[r.jsx("h4",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] mb-3 ${A?"text-white":"text-[#333]"}`,children:"CSS"}),r.jsxs("div",{className:`mb-4 p-3 rounded-lg ${s.theme==="light-frosted"?"bg-white/40":s.theme==="dark-frosted"?"bg-black/20":A?"bg-[#181818]":"bg-[#fafafa]"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("input",{type:"text",value:C,onChange:F=>_(F.target.value),placeholder:"",className:`flex-1 px-3 py-2 border rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] outline-none transition-colors ${s.theme==="light-frosted"?"bg-white/60 border-white/40 text-[#333] placeholder:text-[#999] focus:border-[#7B9E7B]":s.theme==="dark-frosted"?"bg-black/40 border-white/10 text-white placeholder:text-[#888] focus:border-[#7B9E7B]":A?"bg-[#1e1e1e] border-[#333] text-white placeholder:text-[#888] focus:border-[#7B9E7B]":"bg-white border-[#e0e0e0] text-[#333] placeholder:text-[#999] focus:border-[#7B9E7B]"}`}),r.jsxs("button",{onClick:ye,className:"px-3 py-2 bg-[#7B9E7B] rounded-lg text-white active:opacity-80 hover:opacity-80 transition-opacity flex items-center gap-1.5",children:[r.jsx(ti,{className:"w-4 h-4",strokeWidth:2}),r.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[13px]",children:""})]})]}),v.length>0&&r.jsx("div",{className:"flex flex-col gap-2",children:v.map(F=>r.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg border ${s.theme==="light-frosted"?"bg-white/60 border-white/40":s.theme==="dark-frosted"?"bg-black/40 border-white/10":A?"bg-[#1e1e1e] border-[#333]":"bg-white border-[#e0e0e0]"}`,children:[r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] flex-1 ${A?"text-white":"text-[#333]"}`,children:F.name}),r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx("button",{onClick:()=>be(F),className:"px-2.5 py-1.5 bg-[#7B9E7B] rounded font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[12px] text-white active:opacity-80 hover:opacity-80 transition-opacity",children:""}),r.jsx("button",{onClick:()=>Ie(F.id),className:`p-1.5 rounded transition-colors ${s.theme==="light-frosted"?"bg-black/5 text-[#666] active:bg-black/10 hover:bg-black/10":s.theme==="dark-frosted"?"bg-white/10 text-[#a0a0a0] active:bg-white/20 hover:bg-white/20":A?"bg-[#2d2d2d] text-[#a0a0a0] active:bg-[#3d3d3d] hover:bg-[#3d3d3d]":"bg-[#f0f0f0] text-[#666] active:bg-[#e0e0e0] hover:bg-[#e0e0e0]"}`,children:r.jsx(xn,{className:"w-3.5 h-3.5",strokeWidth:2})})]})]},F.id))})]}),r.jsx("textarea",{value:W,onChange:F=>T(F.target.value),placeholder:"CSS...",className:`w-full px-3 py-2 rounded-lg font-mono text-[11px] outline-none transition-colors resize-y min-h-[300px] ${s.theme==="light-frosted"?"bg-white/40 text-[#333] placeholder:text-[#999] focus:bg-white/60":s.theme==="dark-frosted"?"bg-black/40 text-white placeholder:text-[#888] focus:bg-black/60":A?"bg-[#1e1e1e] text-white placeholder:text-[#888] focus:bg-[#2d2d2d]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999] focus:bg-[#ebebeb]"}`,style:{whiteSpace:"pre",overflowWrap:"normal",overflowX:"auto"}}),r.jsxs("div",{className:`mt-4 rounded-lg overflow-hidden border relative h-[300px] ${!c&&(s.theme==="light-frosted"?"bg-white/40 border-white/20":s.theme==="dark-frosted"?"bg-black/20 border-white/10":A?"bg-[#181818] border-[#333]":"bg-[#fafafa] border-black/5")} ${c?"border-transparent":""}`,children:[W&&r.jsx("style",{children:W}),r.jsx("div",{className:"absolute inset-0 bg-cover bg-center z-0",style:c?{backgroundImage:`url(${c})`}:{}}),r.jsx("div",{className:"absolute inset-0 overflow-hidden z-10 p-4",children:r.jsxs("div",{className:"relative w-full h-full",children:[r.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:"translateY(10px)"},children:r.jsx("div",{className:"pb-3",children:r.jsxs("div",{className:"flex items-start gap-2 justify-start",children:[r.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center overflow-hidden flex-shrink-0 ${s.theme==="light-frosted"?"bg-white/40":A?"bg-[#2d2d2d]":"bg-[#f5f5f5]"}`,children:r.jsx(mn,{className:"w-5 h-5 text-[#999]",strokeWidth:2})}),r.jsxs("div",{className:"character-bubble",style:oe(De.character),children:[r.jsxs("div",{className:"character-quote",style:oe(De.characterQuote),children:[r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px]",children:""}),r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px]",children:""})]}),r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px]",children:""})]})]})})}),r.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:"translateY(140px)"},children:r.jsx("div",{className:"pb-3",children:r.jsxs("div",{className:"flex items-start gap-2 justify-end",children:[r.jsxs("div",{className:"user-bubble",style:oe(De.user),children:[r.jsxs("div",{className:"user-quote",style:oe(De.userQuote),children:[r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px]",children:""}),r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px]",children:""})]}),r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px]",children:""})]}),r.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center overflow-hidden flex-shrink-0 ${s.theme==="light-frosted"?"bg-white/40":A?"bg-[#2d2d2d]":"bg-[#f5f5f5]"}`,children:i?r.jsx("img",{src:i,alt:"User",className:"w-full h-full object-cover"}):r.jsx(mn,{className:"w-5 h-5 text-[#999]",strokeWidth:2})})]})})})]})})]}),r.jsx("button",{onClick:ee,className:"mt-4 w-full py-3 bg-[#7B9E7B] rounded-lg font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[16px] text-white active:opacity-80 hover:opacity-80 transition-opacity flex items-center justify-center",children:""}),r.jsx("button",{onClick:()=>{a({...s,bubbleStyles:e,customCSS:void 0}),T(M(e))},className:`mt-4 w-full px-4 py-2 border rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] transition-colors ${s.theme==="light-frosted"?"bg-white/40 border-white/40 text-[#666] active:bg-white/60 hover:bg-white/60":s.theme==="dark-frosted"?"bg-black/40 border-white/10 text-[#a0a0a0] active:bg-black/60 hover:bg-black/60":A?"bg-[#1e1e1e] border-[#333] text-[#a0a0a0] active:bg-[#2d2d2d] hover:bg-[#2d2d2d]":"bg-white border-[#d0d0d0] text-[#666] active:bg-[#f5f5f5] hover:bg-[#f5f5f5]"}`,children:""})]})]})})})]})]}),p&&r.jsx("div",{className:"fixed inset-0 bg-black/40 z-[80] flex items-center justify-center p-4",children:r.jsx("div",{className:`rounded-2xl w-64 px-6 py-5 shadow-2xl transition-all ${s.theme==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":s.theme==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":A?"bg-[#1e1e1e]":"bg-white"}`,children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-3 ${s.theme==="light-frosted"?"bg-[#7B9E7B]/90":"bg-[#7B9E7B]"}`,children:r.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[16px] ${A?"text-white":"text-[#333]"}`,children:""})]})})}),g&&r.jsx("div",{className:"fixed inset-0 bg-black/40 z-[80] flex items-center justify-center p-4",children:r.jsx("div",{className:`rounded-2xl w-64 px-6 py-5 shadow-2xl transition-all ${s.theme==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":s.theme==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":A?"bg-[#1e1e1e]":"bg-white"}`,children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-[#7B9E7B] flex items-center justify-center mb-3",children:r.jsx("div",{className:"w-6 h-6 border-3 border-white border-t-transparent rounded-full animate-spin"})}),r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[16px] ${A?"text-white":"text-[#333]"}`,children:"..."})]})})}),R&&r.jsx("div",{className:"fixed inset-0 bg-black/40 z-[1200] flex items-center justify-center p-4",children:r.jsxs("div",{className:`rounded-2xl p-6 w-full max-w-[360px] shadow-xl max-h-[70vh] overflow-y-auto ${s.theme==="light-frosted"?"bg-white/80 backdrop-blur-md":A?"bg-[#1e1e1e]":"bg-white"}`,children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-4 ${A?"text-white":"text-[#333]"}`,children:""}),f.length===0?r.jsx("div",{className:"py-8 text-center",children:r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] ${A?"text-[#888]":"text-[#999]"}`,children:""})}):r.jsx("div",{className:"flex flex-col gap-3 mb-6",children:f.map(F=>r.jsxs("button",{onClick:()=>re(F.id),className:"flex items-center gap-3 active:opacity-70 hover:opacity-70 transition-opacity",children:[r.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors flex-shrink-0 ${V.includes(F.id)?"bg-[#7B9E7B] border-[#7B9E7B]":s.theme==="light-frosted"?"bg-white/40 border-black/5":A?"bg-[#1e1e1e] border-[#333]":"bg-white border-[#d0d0d0]"}`,children:V.includes(F.id)&&r.jsx(Et,{className:"w-3.5 h-3.5 text-white",strokeWidth:3})}),r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] text-left flex-1 ${A?"text-white":"text-[#333]"}`,children:F.name})]},F.id))}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>D(!1),className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors ${s.theme==="light-frosted"?"bg-black/5 text-[#666] hover:bg-black/10 active:bg-black/10":A?"bg-[#2d2d2d] text-[#a0a0a0] hover:bg-[#3d3d3d] active:bg-[#3d3d3d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),r.jsx("button",{onClick:de,className:"flex-1 py-2.5 rounded-xl bg-[#7B9E7B] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity",children:""})]})]})})]})}function cI({onClose:e,onOpenChat:t}){const[n,s]=k.useState("messages"),[a,i]=k.useState([]),[l,c]=k.useState(!1),[u,p]=k.useState(!1),[h,f]=k.useState([]),[m,g]=k.useState(()=>We.chatSettings?.darkMode||!1),[y,b]=k.useState(()=>We.chatSettings?.theme||(We.chatSettings?.darkMode?"dark":"light")),[S,v]=k.useState(null);k.useEffect(()=>{C(),_(),R();const T=async()=>{const j=We.chatSettings;g(j?.darkMode||!1);const P=j?.theme||(j?.darkMode?"dark":"light");if(b(P),(P==="light-frosted"||P==="dark-frosted")&&j?.chatBackground)if(j.chatBackground.startsWith("data:"))v(j.chatBackground);else try{const L=await Ct(j.chatBackground);v(L)}catch(L){console.error("Failed to load background image:",L)}else v(null);_()};window.addEventListener("chat-settings-updated",T);const M=j=>{const{type:P,payload:L}=j.data;P==="AI_TASK_COMPLETED"&&(L?.taskType==="memory_extraction"?(console.log("[ChatList] "),window.dispatchEvent(new CustomEvent("character-memories-updated",{detail:{characterId:L.characterId,memories:L.result?.memories}}))):(console.log("[ChatList]  AI "),_()))};return"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",M),()=>{window.removeEventListener("chat-settings-updated",T),"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener("message",M)}},[]);const N=T=>{if(!T)return"";const M=new Date,j=new Date(T),P=new Date(M);P.setHours(0,0,0,0);const L=new Date(j);L.setHours(0,0,0,0);const B=Math.floor((P.getTime()-L.getTime())/(1e3*60*60*24)),q=j.getHours().toString().padStart(2,"0"),G=j.getMinutes().toString().padStart(2,"0");if(B===0)return`${q}:${G}`;if(B===1)return` ${q}:${G}`;if(B<7)return["","","","","","",""][j.getDay()];if(M.getFullYear()===j.getFullYear()){const H=j.getMonth()+1,ee=j.getDate();return`${H}/${ee}`}const O=j.getFullYear(),$=j.getMonth()+1,K=j.getDate();return`${O}/${$}/${K}`},C=async()=>{try{const T=await se.get(J.CHATS,"chat_settings");if(T){We.chatSettings?We.chatSettings={...We.chatSettings,...T}:We.chatSettings=T,T.darkMode!==void 0&&g(T.darkMode);const M=T.theme||(T.darkMode?"dark":"light");if(b(M),(M==="light-frosted"||M==="dark-frosted")&&T.chatBackground)if(T.chatBackground.startsWith("data:"))v(T.chatBackground);else try{const j=await Ct(T.chatBackground);v(j)}catch(j){console.error("Failed to load background image:",j)}}}catch(T){console.error("Failed to load global chat settings:",T)}},_=async()=>{try{const T=await se.get(J.CHATS,"chat_list");if(T){const M=await Promise.all(T.map(async j=>{const P=`chat_detail_settings_${j.id}`,L=await se.get(J.CHAT_SETTINGS,P),B=N(j.timestamp);return L?{...j,remark:L.remark||j.remark,isPinned:L.isPinned!==void 0?L.isPinned:j.isPinned,time:B}:{...j,time:B}}));M.sort((j,P)=>{if(j.isPinned&&!P.isPinned)return-1;if(!j.isPinned&&P.isPinned)return 1;const L=j.timestamp||0;return(P.timestamp||0)-L}),i(M)}else i([])}catch(T){console.error("Failed to load chats:",T),i([])}},R=async()=>{try{const T=await se.get(J.CHARACTERS,"characters");T&&f(T)}catch(T){console.error("Failed to load characters:",T)}},D=()=>{c(!l)},V=()=>{c(!1),console.log("Create group")},I=()=>{c(!1),p(!0)},A=async T=>{p(!1);const M=Tp(T.id,T.name);if(M===T.name){const j=`chat_detail_settings_${T.id}`,L=(await se.get(J.CHAT_SETTINGS,j))?.remark||T.name;t(T.id,L)}else t(T.id,M)},U=T=>{const M=a.find(j=>j.id===T);if(M){let j=M.name;if(j===""||!j){const L=h.find(B=>B.id===T);L&&(j=L.name)}const P=Tp(T,M.remark||j);t(T,P)}},W=()=>{switch(n){case"messages":return"";case"notifications":return"";case"settings":return"";default:return""}};return r.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col",children:[y==="light-frosted"||y==="dark-frosted"?r.jsxs(r.Fragment,{children:[S&&r.jsx("div",{className:"absolute inset-0 -z-20",children:r.jsx("img",{src:S,className:"w-full h-full object-cover"})}),r.jsx("div",{className:`absolute inset-0 -z-10 backdrop-blur-xl ${y==="light-frosted"?"bg-white/80":"bg-black/60"}`})]}):r.jsx("div",{className:`absolute inset-0 -z-10 ${m?"bg-[#121212]":"bg-white"}`}),r.jsx("div",{className:y==="light-frosted"||y==="dark-frosted"?"bg-transparent z-20":m?"bg-[#121212]":"bg-white",children:r.jsxs("div",{className:"h-16 flex items-center justify-between px-4 relative",children:[r.jsx("button",{onClick:e,className:"p-2 -ml-2 active:opacity-60 transition-opacity",children:r.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:m?"white":"black",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M15 18l-6-6 6-6"})})}),r.jsx("h1",{className:`absolute left-1/2 -translate-x-1/2 font-semibold text-[18px] ${m?"text-white":"text-[#333]"}`,children:W()}),n==="messages"&&r.jsx("button",{onClick:D,className:"p-2 -mr-2 active:opacity-60 transition-opacity relative font-normal",children:r.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:m?"white":"#333333",strokeWidth:"2.5",children:[r.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),r.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),n!=="messages"&&r.jsx("div",{className:"w-11"})]})}),r.jsx(Be,{children:l&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-[51]",onClick:()=>c(!1)}),r.jsxs(me.div,{initial:{opacity:0,scale:.9,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-10},transition:{type:"spring",stiffness:400,damping:30},className:`absolute right-4 top-[68px] rounded-lg shadow-lg z-[52] overflow-hidden ${y==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":y==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20":m?"bg-[#1e1e1e] border border-[#2d2d2d]":"bg-white"}`,children:[r.jsxs("button",{onClick:V,className:`w-full flex items-center gap-3 px-4 py-3 transition-colors ${y==="light-frosted"?"active:bg-white/60 hover:bg-white/40":y==="dark-frosted"?"active:bg-white/10 hover:bg-white/5":m?"active:bg-[#2d2d2d]":"active:bg-[#f5f5f5]"}`,children:[r.jsx(Tl,{className:`w-6 h-6 ${m||y==="dark-frosted"?"text-white":"text-[#333]"}`,strokeWidth:2.5,strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] whitespace-nowrap ${m||y==="dark-frosted"?"text-white":"text-[#333]"}`,children:""})]}),r.jsxs("button",{onClick:I,className:`w-full flex items-center gap-3 px-4 py-3 transition-colors ${y==="light-frosted"?"active:bg-white/60 hover:bg-white/40":y==="dark-frosted"?"active:bg-white/10 hover:bg-white/5":m?"active:bg-[#2d2d2d]":"active:bg-[#f5f5f5]"}`,children:[r.jsx(bT,{className:`w-6 h-6 ${m||y==="dark-frosted"?"text-white":"text-[#333]"}`,strokeWidth:2.5,strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] whitespace-nowrap ${m||y==="dark-frosted"?"text-white":"text-[#333]"}`,children:""})]})]})]})}),r.jsx(Be,{children:u&&r.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40",onClick:()=>p(!1)}),r.jsxs(me.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`rounded-xl w-64 max-h-96 flex flex-col shadow-2xl relative z-10 ${y==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":y==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":m?"bg-[#1e1e1e]":"bg-white"}`,children:[r.jsxs("div",{className:`flex items-center justify-between px-5 py-3 border-b ${y==="light-frosted"?"border-white/20":y==="dark-frosted"?"border-white/10":m?"border-[#2d2d2d]":"border-[#f0f0f0]"}`,children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] ${m?"text-white":"text-[#333]"}`,children:""}),r.jsx("button",{onClick:()=>p(!1),className:`p-1 rounded-full transition-colors ${y==="light-frosted"?"active:bg-white/40 hover:bg-white/20":y==="dark-frosted"?"active:bg-white/10 hover:bg-white/5":m?"active:bg-[#2d2d2d]":"active:bg-[#f5f5f5]"}`,children:r.jsx(xt,{className:`w-5 h-5 ${m?"text-[#a0a0a0]":"text-[#666]"}`,strokeWidth:2})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:h.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-8 px-4",children:[r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] ${m?"text-[#888]":"text-[#999]"}`,children:""}),r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] mt-1 ${m?"text-[#666]":"text-[#ccc]"}`,children:""})]}):h.map(T=>r.jsx("button",{onClick:()=>A(T),className:`w-full flex items-center px-5 py-2.5 transition-colors ${y==="light-frosted"?"active:bg-white/40 hover:bg-white/20":m?"active:bg-[#2d2d2d]":"active:bg-[#f5f5f5]"}`,children:r.jsx("div",{className:"flex-1 text-center",children:r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] ${m?"text-white":"text-[#333]"}`,children:T.name})})},T.id))})]})]})}),r.jsx("div",{className:`flex-1 overflow-hidden relative ${y==="light-frosted"||y==="dark-frosted"?"bg-transparent":m?"bg-[#121212]":"bg-white"}`,children:r.jsxs(Be,{mode:"wait",children:[n==="messages"&&r.jsx(me.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2,ease:"easeInOut"},className:"h-full overflow-y-auto",children:a.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-20 px-4 h-full",children:[r.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-3 ${y==="light-frosted"?"bg-white/40":y==="dark-frosted"?"bg-white/10":m?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,children:r.jsx(Mb,{className:`w-9 h-9 ${m?"text-[#666]":"text-[#ccc]"}`,strokeWidth:2.5})}),r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] ${m?"text-[#888]":"text-[#999]"}`,children:""})]}):r.jsx("div",{className:y==="light-frosted"||y==="dark-frosted"?"bg-transparent":m?"bg-[#121212]":"bg-white",children:a.map((T,M)=>r.jsxs("div",{children:[r.jsx("button",{onClick:()=>U(T.id),className:`w-full px-4 py-3.5 transition-colors flex items-start text-left ${y==="light-frosted"?`active:bg-white/60 ${T.isPinned?"bg-white/40":"bg-transparent"}`:y==="dark-frosted"?`active:bg-white/10 ${T.isPinned?"bg-black/40":"bg-transparent"}`:m?`active:bg-[#1e1e1e] ${T.isPinned?"bg-[#1a1a1a]":"bg-[#121212]"}`:`active:bg-[#f5f5f5] ${T.isPinned?"bg-[#f9f9f9]":"bg-white"}`}`,children:r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[17px] truncate ${m?"text-white":"text-[#333]"}`,children:T.remark||(T.name===""||!T.name)&&h.find(j=>j.id===T.id)?.name||T.name}),T.memberCount&&r.jsxs("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] flex-shrink-0 ${m?"text-[#888]":"text-[#999]"}`,children:["(",T.memberCount,")"]})]}),T.time&&r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] flex-shrink-0 ml-2 ${m?"text-[#888]":"text-[#999]"}`,children:T.time})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] truncate flex-1 pr-2 ${m?"text-[#888]":"text-[#999]"}`,children:(()=>{let j=T.lastSender;const P=h.find(L=>L.id===T.id)?.name||T.name;return(!j||j===""||j===P)&&(j=T.remark||P||j),j?`${j}${T.lastMessage}`:T.lastMessage})()}),T.unread!==void 0&&T.unread>0&&r.jsx("span",{className:"min-w-[18px] h-[18px] bg-[#ff4d4f] text-white text-[11px] font-medium flex items-center justify-center rounded-full px-1.5 flex-shrink-0",children:T.unread>99?"99+":T.unread})]})]})}),M<a.length-1&&r.jsx("div",{className:`border-b ${y==="light-frosted"?"border-white/20":y==="dark-frosted"?"border-white/10":m?"border-[#2d2d2d]":"border-[#f0f0f0]"}`})]},T.id))})},"messages"),n==="notifications"&&r.jsxs(me.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2,ease:"easeInOut"},className:"flex flex-col items-center justify-center py-20 px-4 h-full overflow-y-auto",children:[r.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-3 ${y==="light-frosted"?"bg-white/40":y==="dark-frosted"?"bg-white/10":m?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,children:r.jsx(Pb,{className:`w-9 h-9 ${m?"text-[#666]":"text-[#ccc]"}`,strokeWidth:2.5})}),r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] ${m?"text-[#888]":"text-[#999]"}`,children:""})]},"notifications"),n==="settings"&&r.jsx(me.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2,ease:"easeInOut"},className:"h-full overflow-y-auto",children:r.jsx(lI,{})},"settings")]})}),r.jsxs("div",{className:`h-[64px] flex items-center justify-around px-4 safe-area-inset-bottom ${y==="light-frosted"||y==="dark-frosted"?"bg-transparent":m?"bg-[#121212]":"bg-white"}`,children:[r.jsxs("button",{onClick:()=>s("messages"),className:"flex flex-col items-center justify-center gap-1 py-1.5 px-6 active:opacity-60 transition-opacity",children:[r.jsx(Mb,{className:`w-6 h-6 ${n==="messages"?"text-[#7B9E7B]":m?"text-[#888]":"text-[#999]"}`,strokeWidth:2.5}),r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] ${n==="messages"?"text-[#7B9E7B]":m?"text-[#888]":"text-[#999]"}`,children:""})]}),r.jsxs("button",{onClick:()=>s("notifications"),className:"flex flex-col items-center justify-center gap-1 py-1.5 px-6 active:opacity-60 transition-opacity",children:[r.jsx(Pb,{className:`w-6 h-6 ${n==="notifications"?"text-[#7B9E7B]":m?"text-[#888]":"text-[#999]"}`,strokeWidth:2.5}),r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] ${n==="notifications"?"text-[#7B9E7B]":m?"text-[#888]":"text-[#999]"}`,children:""})]}),r.jsxs("button",{onClick:()=>s("settings"),className:"flex flex-col items-center justify-center gap-1 py-1.5 px-6 active:opacity-60 transition-opacity",children:[r.jsx(El,{className:`w-6 h-6 ${n==="settings"?"text-[#7B9E7B]":m?"text-[#888]":"text-[#999]"}`,strokeWidth:2.5}),r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] ${n==="settings"?"text-[#7B9E7B]":m?"text-[#888]":"text-[#999]"}`,children:""})]})]})]})}function Bi(e,t,n){let s=n.initialDeps??[],a,i=!0;function l(){var c,u,p;let h;n.key&&((c=n.debug)!=null&&c.call(n))&&(h=Date.now());const f=e();if(!(f.length!==s.length||f.some((y,b)=>s[b]!==y)))return a;s=f;let g;if(n.key&&((u=n.debug)!=null&&u.call(n))&&(g=Date.now()),a=t(...f),n.key&&((p=n.debug)!=null&&p.call(n))){const y=Math.round((Date.now()-h)*100)/100,b=Math.round((Date.now()-g)*100)/100,S=b/16,v=(N,C)=>{for(N=String(N);N.length<C;)N=" "+N;return N};console.info(`%c ${v(b,5)} /${v(y,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*S,120))}deg 100% 31%);`,n?.key)}return n?.onChange&&!(i&&n.skipInitialOnChange)&&n.onChange(a),i=!1,a}return l.updateDeps=c=>{s=c},l}function Ub(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const dI=(e,t)=>Math.abs(e-t)<1.01,uI=(e,t,n)=>{let s;return function(...a){e.clearTimeout(s),s=e.setTimeout(()=>t.apply(this,a),n)}},Wb=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},fI=e=>e,hI=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),s=[];for(let a=t;a<=n;a++)s.push(a);return s},pI=(e,t)=>{const n=e.scrollElement;if(!n)return;const s=e.targetWindow;if(!s)return;const a=l=>{const{width:c,height:u}=l;t({width:Math.round(c),height:Math.round(u)})};if(a(Wb(n)),!s.ResizeObserver)return()=>{};const i=new s.ResizeObserver(l=>{const c=()=>{const u=l[0];if(u?.borderBoxSize){const p=u.borderBoxSize[0];if(p){a({width:p.inlineSize,height:p.blockSize});return}}a(Wb(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(c):c()});return i.observe(n,{box:"border-box"}),()=>{i.unobserve(n)}},Kb={passive:!0},qb=typeof window>"u"?!0:"onscrollend"in window,mI=(e,t)=>{const n=e.scrollElement;if(!n)return;const s=e.targetWindow;if(!s)return;let a=0;const i=e.options.useScrollendEvent&&qb?()=>{}:uI(s,()=>{t(a,!1)},e.options.isScrollingResetDelay),l=h=>()=>{const{horizontal:f,isRtl:m}=e.options;a=f?n.scrollLeft*(m&&-1||1):n.scrollTop,i(),t(a,h)},c=l(!0),u=l(!1);u(),n.addEventListener("scroll",c,Kb);const p=e.options.useScrollendEvent&&qb;return p&&n.addEventListener("scrollend",u,Kb),()=>{n.removeEventListener("scroll",c),p&&n.removeEventListener("scrollend",u)}},xI=(e,t,n)=>{if(t?.borderBoxSize){const s=t.borderBoxSize[0];if(s)return Math.round(s[n.options.horizontal?"inlineSize":"blockSize"])}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},gI=(e,{adjustments:t=0,behavior:n},s)=>{var a,i;const l=e+t;(i=(a=s.scrollElement)==null?void 0:a.scrollTo)==null||i.call(a,{[s.options.horizontal?"left":"top"]:l,behavior:n})};class bI{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const s=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(a=>{a.forEach(i=>{const l=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()})}));return{disconnect:()=>{var a;(a=s())==null||a.disconnect(),n=null},observe:a=>{var i;return(i=s())==null?void 0:i.observe(a,{box:"border-box"})},unobserve:a=>{var i;return(i=s())==null?void 0:i.unobserve(a)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([s,a])=>{typeof a>"u"&&delete n[s]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:fI,rangeExtractor:hI,onChange:()=>{},measureElement:xI,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var s,a;(a=(s=this.options).onChange)==null||a.call(s,this,n)},this.maybeNotify=Bi(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const s=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==s){if(this.cleanup(),!s){this.maybeNotify();return}this.scrollElement=s,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(a=>{this.observer.observe(a)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,a=>{this.scrollRect=a,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(a,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<a?"forward":"backward":null,this.scrollOffset=a,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,s)=>{const a=new Map,i=new Map;for(let l=s-1;l>=0;l--){const c=n[l];if(a.has(c.lane))continue;const u=i.get(c.lane);if(u==null||c.end>u.end?i.set(c.lane,c):c.end<u.end&&a.set(c.lane,!0),a.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((l,c)=>l.end===c.end?l.index-c.index:l.end-c.end)[0]:void 0},this.getMeasurementOptions=Bi(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(n,s,a,i,l,c)=>(this.prevLanes!==void 0&&this.prevLanes!==c&&(this.lanesChangedFlag=!0),this.prevLanes=c,this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:s,scrollMargin:a,getItemKey:i,enabled:l,lanes:c}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=Bi(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:s,scrollMargin:a,getItemKey:i,enabled:l,lanes:c},u)=>{if(!l)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>n)for(const m of this.laneAssignments.keys())m>=n&&this.laneAssignments.delete(m);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(m=>{this.itemSizeCache.set(m.key,m.size)}));const p=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===n&&(this.lanesSettling=!1);const h=this.measurementsCache.slice(0,p),f=new Array(c).fill(void 0);for(let m=0;m<p;m++){const g=h[m];g&&(f[g.lane]=m)}for(let m=p;m<n;m++){const g=i(m),y=this.laneAssignments.get(m);let b,S;if(y!==void 0&&this.options.lanes>1){b=y;const _=f[b],R=_!==void 0?h[_]:void 0;S=R?R.end+this.options.gap:s+a}else{const _=this.options.lanes===1?h[m-1]:this.getFurthestMeasurement(h,m);S=_?_.end+this.options.gap:s+a,b=_?_.lane:m%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(m,b)}const v=u.get(g),N=typeof v=="number"?v:this.options.estimateSize(m),C=S+N;h[m]={index:m,start:S,size:N,end:C,key:g,lane:b},f[b]=m}return this.measurementsCache=h,h},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Bi(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,s,a,i)=>this.range=n.length>0&&s>0?yI({measurements:n,outerSize:s,scrollOffset:a,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Bi(()=>{let n=null,s=null;const a=this.calculateRange();return a&&(n=a.startIndex,s=a.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,s]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,s]},(n,s,a,i,l)=>i===null||l===null?[]:n({startIndex:i,endIndex:l,overscan:s,count:a}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const s=this.options.indexAttribute,a=n.getAttribute(s);return a?parseInt(a,10):(console.warn(`Missing attribute name '${s}={index}' on measured element.`),-1)},this._measureElement=(n,s)=>{const a=this.indexFromElement(n),i=this.measurementsCache[a];if(!i)return;const l=i.key,c=this.elementsCache.get(l);c!==n&&(c&&this.observer.unobserve(c),this.observer.observe(n),this.elementsCache.set(l,n)),n.isConnected&&this.resizeItem(a,this.options.measureElement(n,s,this))},this.resizeItem=(n,s)=>{const a=this.measurementsCache[n];if(!a)return;const i=this.itemSizeCache.get(a.key)??a.size,l=s-i;l!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(a,l,this):a.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=l,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(a.index),this.itemSizeCache=new Map(this.itemSizeCache.set(a.key,s)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((s,a)=>{s.isConnected||(this.observer.unobserve(s),this.elementsCache.delete(a))});return}this._measureElement(n,void 0)},this.getVirtualItems=Bi(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,s)=>{const a=[];for(let i=0,l=n.length;i<l;i++){const c=n[i],u=s[c];a.push(u)}return a},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const s=this.getMeasurements();if(s.length!==0)return Ub(s[N5(0,s.length-1,a=>Ub(s[a]).start,n)])},this.getOffsetForAlignment=(n,s,a=0)=>{const i=this.getSize(),l=this.getScrollOffset();s==="auto"&&(s=n>=l+i?"end":"start"),s==="center"?n+=(a-i)/2:s==="end"&&(n-=i);const c=this.getTotalSize()+this.options.scrollMargin-i;return Math.max(Math.min(c,n),0)},this.getOffsetForIndex=(n,s="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const a=this.measurementsCache[n];if(!a)return;const i=this.getSize(),l=this.getScrollOffset();if(s==="auto")if(a.end>=l+i-this.options.scrollPaddingEnd)s="end";else if(a.start<=l+this.options.scrollPaddingStart)s="start";else return[l,s];const c=s==="end"?a.end+this.options.scrollPaddingEnd:a.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(c,s,a.size),s]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:s="start",behavior:a}={})=>{a==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,s),{adjustments:void 0,behavior:a})},this.scrollToIndex=(n,{align:s="auto",behavior:a}={})=>{a==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let i=0;const l=10,c=p=>{if(!this.targetWindow)return;const h=this.getOffsetForIndex(n,p);if(!h){console.warn("Failed to get offset for index:",n);return}const[f,m]=h;this._scrollToOffset(f,{adjustments:void 0,behavior:a}),this.targetWindow.requestAnimationFrame(()=>{const g=this.getScrollOffset(),y=this.getOffsetForIndex(n,m);if(!y){console.warn("Failed to get offset for index:",n);return}dI(y[0],g)||u(m)})},u=p=>{this.targetWindow&&(i++,i<l?this.targetWindow.requestAnimationFrame(()=>c(p)):console.warn(`Failed to scroll to index ${n} after ${l} attempts.`))};c(s)},this.scrollBy=(n,{behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:s})},this.getTotalSize=()=>{var n;const s=this.getMeasurements();let a;if(s.length===0)a=this.options.paddingStart;else if(this.options.lanes===1)a=((n=s[s.length-1])==null?void 0:n.end)??0;else{const i=Array(this.options.lanes).fill(null);let l=s.length-1;for(;l>=0&&i.some(c=>c===null);){const c=s[l];i[c.lane]===null&&(i[c.lane]=c.end),l--}a=Math.max(...i.filter(c=>c!==null))}return Math.max(a-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:s,behavior:a})=>{this.options.scrollToFn(n,{behavior:a,adjustments:s},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(t)}}const N5=(e,t,n,s)=>{for(;e<=t;){const a=(e+t)/2|0,i=n(a);if(i<s)e=a+1;else if(i>s)t=a-1;else return a}return e>0?e-1:0};function yI({measurements:e,outerSize:t,scrollOffset:n,lanes:s}){const a=e.length-1,i=u=>e[u].start;if(e.length<=s)return{startIndex:0,endIndex:a};let l=N5(0,a,i,n),c=l;if(s===1)for(;c<a&&e[c].end<n+t;)c++;else if(s>1){const u=Array(s).fill(0);for(;c<a&&u.some(h=>h<n+t);){const h=e[c];u[h.lane]=h.end,c++}const p=Array(s).fill(n+t);for(;l>=0&&p.some(h=>h>=n);){const h=e[l];p[h.lane]=h.start,l--}l=Math.max(0,l-l%s),c=Math.min(a,c+(s-1-c%s))}return{startIndex:l,endIndex:c}}const Gb=typeof document<"u"?k.useLayoutEffect:k.useEffect;function vI(e){const t=k.useReducer(()=>({}),{})[1],n={...e,onChange:(a,i)=>{var l;i?us.flushSync(t):t(),(l=e.onChange)==null||l.call(e,a,i)}},[s]=k.useState(()=>new bI(n));return s.setOptions(n),Gb(()=>s._didMount(),[]),Gb(()=>s._willUpdate()),s}function _5(e){return vI({observeElementRect:pI,observeElementOffset:mI,scrollToFn:gI,...e})}async function Dl(e,t,n){const s=`task_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,a={taskId:s,chatId:e,type:t,status:"pending",createdAt:Date.now(),updatedAt:Date.now(),payload:n};if(await se.set(J.AI_TASKS,s,a),console.log(`[TaskQueue]  ${s} (: ${t}, : ${e})`),"serviceWorker"in navigator&&navigator.serviceWorker.controller){const i={apiKey:n.apiKey,baseUrl:n.baseUrl,modelName:n.modelName,temperature:n.temperature,maxTokens:n.maxTokens},l=[{role:"system",content:n.systemPrompt},{role:"user",content:n.userPrompt}];navigator.serviceWorker.controller.postMessage({type:"PROCESS_AI_TASK",payload:{taskId:s,taskType:t,characterId:e,characterName:n.characterName,displayName:n.displayName,apiConfig:i,messages:l,pendingImageBase64:n.pendingImageBase64,imageRecognitionPrompt:n.imageRecognitionPrompt,referenceDate:n.referenceDate}}),console.log(`[TaskQueue]  Service Worker: ${s}`)}else console.warn("[TaskQueue] Service Worker "),window.dispatchEvent(new CustomEvent("ai-task-needs-fallback",{detail:{taskId:s,task:a}}));return s}const wI="modulepreload",kI=function(e){return"/"+e},Yb={},al=function(t,n,s){let a=Promise.resolve();if(n&&n.length>0){let l=function(p){return Promise.all(p.map(h=>Promise.resolve(h).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");a=l(n.map(p=>{if(p=kI(p),p in Yb)return;Yb[p]=!0;const h=p.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${f}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":wI,h||(m.as="script"),m.crossOrigin="",m.href=p,u&&m.setAttribute("nonce",u),document.head.appendChild(m),h)return new Promise((g,y)=>{m.addEventListener("load",g),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${p}`)))})}))}function i(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return a.then(l=>{for(const c of l||[])c.status==="rejected"&&i(c.reason);return t().catch(i)})};var vd={exports:{}},SI=vd.exports,Zb;function jI(){return Zb||(Zb=1,(function(e,t){(function(n,s){e.exports=s()})(SI,function(){return(function(n){function s(i){if(a[i])return a[i].exports;var l=a[i]={i,l:!1,exports:{}};return n[i].call(l.exports,l,l.exports,s),l.l=!0,l.exports}var a={};return s.m=n,s.c=a,s.d=function(i,l,c){s.o(i,l)||Object.defineProperty(i,l,{configurable:!1,enumerable:!0,get:c})},s.n=function(i){var l=i&&i.__esModule?function(){return i.default}:function(){return i};return s.d(l,"a",l),l},s.o=function(i,l){return Object.prototype.hasOwnProperty.call(i,l)},s.p="",s(s.s=0)})([function(n,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=a(1),l=(function(c){return c&&c.__esModule?c:{default:c}})(i);s.default=l.default,n.exports=s.default},function(n,s,a){function i(M){return M&&M.__esModule?M:{default:M}}Object.defineProperty(s,"__esModule",{value:!0});var l=a(2),c=i(l),u=a(3),p=i(u),h=a(4),f=i(h),m=a(5),g=i(m),y=a(6),b=i(y),S=a(7),v=i(S),N=a(8),C=i(N),_=a(9),R=i(_),D=a(10),V=i(D),I=a(11),A=i(I),U=a(12),W=i(U),T={lunarInfo:c.default,solarMonth:p.default,gan:f.default,zhi:g.default,animals:b.default,lunarTerm:v.default,lTermInfo:C.default,nStr1:R.default,nStr2:V.default,nStr3:A.default,nStr4:W.default,lYearDays:function(M){var j,P=348;for(j=32768;j>8;j>>=1)P+=T.lunarInfo[M-1900]&j?1:0;return P+T.leapDays(M)},leapMonth:function(M){return 15&T.lunarInfo[M-1900]},leapDays:function(M){return T.leapMonth(M)?65536&T.lunarInfo[M-1900]?30:29:0},monthDays:function(M,j){return j>12||j<1?-1:T.lunarInfo[M-1900]&65536>>j?30:29},solarDays:function(M,j){if(j>12||j<1)return-1;var P=j-1;return P==1?M%4==0&&M%100!=0||M%400==0?29:28:T.solarMonth[P]},toGanZhi:function(M){return T.gan[M%10]+T.zhi[M%12]},getTerm:function(M,j){if(M<1900||M>2100||j<1||j>24)return-1;var P=T.lTermInfo[M-1900],L=[parseInt("0x"+P.substr(0,5)).toString(),parseInt("0x"+P.substr(5,5)).toString(),parseInt("0x"+P.substr(10,5)).toString(),parseInt("0x"+P.substr(15,5)).toString(),parseInt("0x"+P.substr(20,5)).toString(),parseInt("0x"+P.substr(25,5)).toString()],B=[L[0].substr(0,1),L[0].substr(1,2),L[0].substr(3,1),L[0].substr(4,2),L[1].substr(0,1),L[1].substr(1,2),L[1].substr(3,1),L[1].substr(4,2),L[2].substr(0,1),L[2].substr(1,2),L[2].substr(3,1),L[2].substr(4,2),L[3].substr(0,1),L[3].substr(1,2),L[3].substr(3,1),L[3].substr(4,2),L[4].substr(0,1),L[4].substr(1,2),L[4].substr(3,1),L[4].substr(4,2),L[5].substr(0,1),L[5].substr(1,2),L[5].substr(3,1),L[5].substr(4,2)];return parseInt(B[j-1])},toChinaYear:function(M){var j=parseInt(M/1e3),P=parseInt(M%1e3/100),L=parseInt(M%100/10),B=M%10;return T.nStr4[j]+T.nStr4[P]+T.nStr4[L]+T.nStr4[B]+""},toChinaMonth:function(M){if(M>12||M<1)return-1;var j=T.nStr3[M-1];return j+=""},toChinaDay:function(M){var j;switch(M){case 10:j="";break;case 20:j="";break;case 30:j="";break;default:j=T.nStr2[Math.floor(M/10)],j+=T.nStr1[M%10]}return j},getAnimal:function(M){return T.animals[(M-4)%12]},solar2lunar:function(G,O,$){if(G<1900||G>2100||G==1900&&O==1&&$<31)return-1;if(G)var L=new Date(G,parseInt(O)-1,$);else var L=new Date;var B,X=0,q=0,G=L.getFullYear(),O=L.getMonth()+1,$=L.getDate(),K=(Date.UTC(L.getFullYear(),L.getMonth(),L.getDate())-Date.UTC(1900,0,31))/864e5;for(B=1900;B<2101&&K>0;B++)q=T.lYearDays(B),K-=q;K<0&&(K+=q,B--);var H=new Date,ee=!1;H.getFullYear()==G&&H.getMonth()+1==O&&H.getDate()==$&&(ee=!0);var Y=L.getDay(),re=T.nStr1[Y];Y==0&&(Y=7);var de=B,X=T.leapMonth(B),oe=!1;for(B=1;B<13&&K>0;B++)X>0&&B==X+1&&oe==0?(--B,oe=!0,q=T.leapDays(de)):q=T.monthDays(de,B),oe==1&&B==X+1&&(oe=!1),K-=q;K==0&&X>0&&B==X+1&&(oe?oe=!1:(oe=!0,--B)),K<0&&(K+=q,--B);var ye=B,be=K+1,Ie=O-1,De=T.getTerm(G,3),F=T.toGanZhi(G-4),le=new Date(G,1,De).getTime();new Date(G,Ie,$).getTime()<le&&(F=T.toGanZhi(G-5));var Z=T.getTerm(G,2*O-1),te=T.getTerm(G,2*O),ne=T.toGanZhi(12*(G-1900)+O+11);$>=Z&&(ne=T.toGanZhi(12*(G-1900)+O+12));var ae=!1,we="";Z==$&&(ae=!0,we=T.lunarTerm[2*O-2]),te==$&&(ae=!0,we=T.lunarTerm[2*O-1]);var Ce=Date.UTC(G,Ie,1,0,0,0,0)/864e5+25567+10,ue=T.toGanZhi(Ce+$-1);return{lYear:de,lMonth:ye,lDay:be,animal:T.getAnimal(de),yearCn:T.toChinaYear(de),monthCn:(oe&&X===ye?"":"")+T.toChinaMonth(ye),dayCn:T.toChinaDay(be),cYear:G,cMonth:O,cDay:$,gzYear:F,gzMonth:ne,gzDay:ue,isToday:ee,isLeap:oe,nWeek:Y,ncWeek:""+re,isTerm:ae,term:we}},lunar2solar:function(M,j,P,L){var B=T.leapMonth(M);if(T.leapDays(M),L&&B!=j||M==2100&&j==12&&P>1||M==1900&&j==1&&P<31)return-1;var q=T.monthDays(M,j);if(M<1900||M>2100||P>q)return-1;for(var G=0,O=1900;O<M;O++)G+=T.lYearDays(O);for(var $=0,K=!1,O=1;O<j;O++)$=T.leapMonth(M),K||$<=O&&$>0&&(G+=T.leapDays(M),K=!0),G+=T.monthDays(M,O);L&&(G+=q);var H=Date.UTC(1900,1,30,0,0,0),ee=new Date(864e5*(G+P-31)+H),Y=ee.getUTCFullYear(),re=ee.getUTCMonth()+1,de=ee.getUTCDate();return T.solar2lunar(Y,re,de)}};s.default=T,n.exports=s.default},function(n,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.default=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,23232,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19195,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835,37744,18936,18800,25776,92326,59984,27424,108228,43744,37600,53987,51552,54615,54432,55888,23893,22176,42704,21972,21200,43448,43344,46240,46758,44368,21920,43940,42416,21168,45683,26928,29495,27296,44368,84821,19296,42352,21732,53600,59752,54560,55968,92838,22224,19168,43476,42192,53584,62034,54560],n.exports=s.default},function(n,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.default=[31,28,31,30,31,30,31,31,30,31,30,31],n.exports=s.default},function(n,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.default=["","","","","","","","","",""],n.exports=s.default},function(n,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.default=["","","","","","","","","","","",""],n.exports=s.default},function(n,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.default=["","","","","","","","","","","",""],n.exports=s.default},function(n,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.default=["","","","","","","","","","","","","","","","","","","","","","","",""],n.exports=s.default},function(n,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.default=["9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","9778397bd19801ec9210c965cc920e","97b6b97bd19801ec95f8c965cc920f","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd197c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bcf97c3598082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd19801ec9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bd07f1487f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b97bd197c36c9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b70c9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","977837f0e37f149b0723b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0723b06bd","7f07e7f0e37f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f595b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e37f14998083b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14898082b0723b02d5","7f07e7f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66aa89801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e26665b66a449801e9808297c35","665f67f0e37f1489801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722"],n.exports=s.default},function(n,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.default=["","","","","","","","","","",""],n.exports=s.default},function(n,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.default=["","","",""],n.exports=s.default},function(n,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.default=["","","","","","","","","","","",""],n.exports=s.default},function(n,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.default=["","","","","","","","","","",""],n.exports=s.default}])})})(vd)),vd.exports}var CI=jI();const NI=so(CI);function A5(e,t){if(!e||e.length===0)return{type:"none",message:"",days:0};const s=[...e].sort((m,g)=>new Date(g.startDate).getTime()-new Date(m.startDate).getTime())[0],i=(m=>{const[g,y,b]=m.split("-").map(Number);return new Date(g,y-1,b)})(s.startDate),l=new Date;l.setHours(0,0,0,0);const c=l.getTime()-i.getTime(),u=Math.floor(c/(1e3*60*60*24));if(u>=0&&u<t.periodLength)return{type:"period",message:` ${u+1} `,days:Math.max(0,t.periodLength-u-1)};const p=new Date(i);p.setDate(i.getDate()+t.cycleLength);const h=p.getTime()-l.getTime(),f=Math.ceil(h/(1e3*60*60*24));return f<0?{type:"late",message:` ${Math.abs(f)} `,days:Math.abs(f)}:{type:"prediction",message:` ${f} `,days:f}}async function _I(e){try{const t=await se.get(J.HEALTH,"health_settings");if(!t||!t.shareEnabled||t.shareScope==="specific"&&t.shareCharacterId!==e)return"";const n=[],s=await se.get(J.HEALTH,"sleep_logs")||[];if(s.length>0){const p=new Date().toDateString(),h=s.find(f=>new Date(f.endTime).toDateString()===p);if(h){const f={good:"",average:"",poor:""},m=b=>{const S=new Date(b);return`${String(S.getHours()).padStart(2,"0")}:${String(S.getMinutes()).padStart(2,"0")}`},g=m(h.startTime),y=m(h.endTime);n.push(`${g}-${y}:${f[h.quality]||""}`)}}const a=await se.get(J.HEALTH,"cycle_logs")||[],i=await se.get(J.HEALTH,"cycle_settings")||{cycleLength:28,periodLength:5};if(a.length>0){const u=A5(a,i);u.type==="period"?n.push(u.message.replace(/\s/g,"")):u.type==="late"?n.push(u.message.replace(/\s/g,"")):u.type==="prediction"&&n.push(`${u.days}`)}const c=(await se.get(J.HEALTH,"diagnosis_logs")||[]).filter(u=>u.status==="treating");if(c.length>0){const u=c.map(p=>p.illnessName).join("");n.push(`:${u}`)}return n.join(" ")}catch(t){return console.error("Failed to get health status:",t),""}}const AI={totalPeriods:12,showWeekends:!0,periodTimes:Array.from({length:12},(e,t)=>({period:t+1,startTime:`${8+t}:00`,endTime:`${8+t}:45`})),startDate:new Date().toISOString().split("T")[0],totalWeeks:20},EI=e=>{const t=new Date(e),n=new Date,s=new Date(t.getFullYear(),t.getMonth(),t.getDate()),a=new Date(n.getFullYear(),n.getMonth(),n.getDate()),i=s.getDay()||7,l=new Date(s);l.setDate(s.getDate()-(i-1));const c=a.getTime()-l.getTime(),u=Math.floor(c/(1e3*60*60*24));return Math.floor(u/7)+1};async function TI(e){try{const t=await se.get(J.SCHEDULE,"schedule_settings");if(!t||!t.shareEnabled||t.shareScope==="specific"&&t.shareCharacterId!==e)return"";const n=[],s=new Date,a=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`,l=(await se.get(J.SCHEDULE,"todos")||[]).filter(f=>!f.completed);if(l.length>0){const f=l.map(m=>m.text).join("");n.push(`:${f}`)}const u=(await se.get(J.SCHEDULE,"events")||[]).filter(f=>f.date===a);if(u.length>0){const f=u.map(m=>{let g="";return m.isAllDay?g="()":m.startTime&&(g=`(${m.startTime}${m.endTime?"-"+m.endTime:""})`),`${m.title}${g}`}).join("");n.push(`:${f}`)}const p=await se.get(J.SCHEDULE,"timetable_settings"),h=await se.get(J.SCHEDULE,"timetable_courses")||[];if(h.length>0){const f={...AI,...p};if(f.periodTimes.length<f.totalPeriods){const S=f.periodTimes.length;for(let v=S;v<f.totalPeriods;v++)f.periodTimes.push({period:v+1,startTime:`${8+v}:00`,endTime:`${8+v}:45`})}const m=EI(f.startDate),y=(s.getDay()+6)%7,b=h.filter(S=>S.day===y&&S.weeks.includes(m)).sort((S,v)=>S.startPeriod-v.startPeriod);if(b.length>0){const S=b.map(v=>{const N=v.room?`@${v.room}`:"",C=f.periodTimes.find(D=>D.period===v.startPeriod),_=f.periodTimes.find(D=>D.period===v.endPeriod);let R="";return C&&_?R=`(${C.startTime}-${_.endTime})`:C&&(R=`(${C.startTime})`),`${v.startPeriod}-${v.endPeriod}${R}:${v.subject}${N}`}).join("");n.push(`:${S}`)}else m>0&&m<=f.totalWeeks}return n.join(" ")}catch(t){return console.error("Failed to get schedule status:",t),""}}const xs={createMemory(e,t,n={}){const s=new Date().toISOString().split("T")[0];let a=!0;return e==="permanent"||e==="event"?a=!0:(e==="summary"||e==="date")&&(a=!1),{id:crypto.randomUUID(),type:e,content:t,created_at:n.created_at||s,expires_at:n.expires_at,importance:n.importance??.5,active:n.active??a,tags:n.tags||[]}},async injectMemories(e,t){const n=await se.get(J.CHARACTERS,"characters")||[],s=n.findIndex(h=>h.id===e);if(s===-1)throw new Error(`Character not found: ${e}`);const a=n[s],l=[...a.memories||[],...t];let c=3,u=3;try{const h=await se.get(J.CHAT_SETTINGS,"chat_settings");h&&h.summary_limit&&(c=Number(h.summary_limit)),h&&h.date_limit&&(u=Number(h.date_limit))}catch{console.warn("Failed to fetch limit settings, using defaults")}const p=this.processMemories(l,c,u);a.memories=p,n[s]=a,await se.set(J.CHARACTERS,"characters",n)},processMemories(e,t=3,n=3){const s=new Date().toISOString().split("T")[0];let a=e.map(y=>{if(y.type==="event")if(y.expires_at){const b=y.expires_at<s;return{...y,active:!b}}else return{...y,active:!0};return y});const i=a.filter(y=>y.type==="summary"),l=a.filter(y=>y.type==="date"),c=a.filter(y=>y.type!=="summary"&&y.type!=="date"),u=i.map((y,b)=>({...y,_idx:b})),p=l.map((y,b)=>({...y,_idx:b}));u.sort((y,b)=>y.created_at!==b.created_at?b.created_at.localeCompare(y.created_at):b._idx-y._idx),p.sort((y,b)=>y.created_at!==b.created_at?b.created_at.localeCompare(y.created_at):b._idx-y._idx);const h=u.map(({_idx:y,...b})=>b),f=p.map(({_idx:y,...b})=>b),m=h.map((y,b)=>({...y,active:b<t})),g=f.map((y,b)=>({...y,active:b<n}));return[...c,...m.reverse(),...g.reverse()]},async getPromptMemories(e){const n=(await se.get(J.CHARACTERS,"characters")||[]).find(l=>l.id===e);if(!n||!n.memories)return[];let s=3,a=3;try{const l=await se.get(J.CHAT_SETTINGS,"chat_settings");l&&l.summary_limit&&(s=Number(l.summary_limit)),l&&l.date_limit&&(a=Number(l.date_limit))}catch{}return this.processMemories(n.memories,s,a).filter(l=>l.active===!0&&(l.type==="permanent"||l.type==="event"||l.type==="summary"||l.type==="date"))},async buildPromptContext(e){const t=await this.getPromptMemories(e);if(t.length===0)return"";const n=t.filter(c=>c.type==="permanent"),s=t.filter(c=>c.type==="event"),a=t.filter(c=>c.type==="summary"),i=t.filter(c=>c.type==="date");let l=`
`;return n.length>0&&(l+=`[]
`,n.forEach(c=>l+=`- ${c.content}
`)),s.length>0&&(l+=`[]
`,s.forEach(c=>l+=`- ${c.content}
`)),a.length>0&&(l+=`[]
`,a.sort((u,p)=>u.created_at.localeCompare(p.created_at)).forEach(u=>l+=`- ${u.content}
`)),i.length>0&&(l+=`[]
`,i.sort((u,p)=>u.created_at.localeCompare(p.created_at)).forEach(u=>l+=`- ${u.content}
`)),l},async refreshAllCharactersMemories(){try{const e=await se.get(J.CHARACTERS,"characters")||[];if(e.length===0)return;let t=3,n=3;try{const i=await se.get(J.CHAT_SETTINGS,"chat_settings");i&&i.summary_limit&&(t=Number(i.summary_limit)),i&&i.date_limit&&(n=Number(i.date_limit))}catch{}let s=!1;const a=e.map(i=>{if(!i.memories||i.memories.length===0)return i;const l=this.processMemories(i.memories,t,n),c=JSON.stringify(i.memories),u=JSON.stringify(l);return c!==u?(s=!0,{...i,memories:l}):i});s?(await se.set(J.CHARACTERS,"characters",a),console.log("[MemorySystem] Refreshed all character memories status."),window.dispatchEvent(new CustomEvent("character-memories-updated",{detail:{characterId:null}}))):console.log("[MemorySystem] Checked memories, no status updates needed.")}catch(e){console.error("[MemorySystem] Failed to refresh memories:",e)}}},DI=Object.freeze(Object.defineProperty({__proto__:null,MemorySystem:xs},Symbol.toStringTag,{value:"Module"}));function aa(e){if(!e)return 0;let t=0;for(let n=0;n<e.length;n++)e.charCodeAt(n)>255?t+=1.5:t+=.3;return Math.ceil(t)}async function E5(e,t,n){const s=await ho(),a=await MI(e,n),i=await FI(),l=await RI(e),c=await BI(a.enabledWorldBooks,l.worldBooks),u=await zI(i,t),p=await LI(a.enableStickers,a.stickerProbability),h=await _I(e),f=await TI(e);return{apiConfig:s,chatSettings:a,userData:i,characterData:l,worldBooks:c,timeInfo:u,stickerInfo:p,healthStatus:h,scheduleStatus:f}}async function II(e){const{characterId:t,character:n,userNickname:s,allMessages:a,tempActiveMemoryIds:i,overrideSettings:l,displayName:c}=e,u=await E5(t,n,l),{chatHistory:p,hasUnclaimedUserRedPacket:h}=await T5(a,u.chatSettings.contextMessageCount,s,c||n.name,u.stickerInfo.stickerMeanings,u.chatSettings.timeAwareness),f=D5({character:n,userData:u.userData,userNickname:s,worldBooks:u.worldBooks,timeInfo:u.timeInfo,chatHistory:p,stickerInfo:u.stickerInfo,chatSettings:u.chatSettings,hasUnclaimedUserRedPacket:h,healthStatus:u.healthStatus,scheduleStatus:u.scheduleStatus,memories:u.characterData.memories,tempActiveMemoryIds:i}),g={systemTemplate:aa(f.intro+f.rolePlayRules+f.outputFormat+""),userPersona:aa(f.userContext),characterPersona:aa(f.characterContext),worldBook:aa(f.worldBooksBefore+f.worldBooksAfter),memories:aa(f.memories),chatHistory:aa(f.chatHistory),functions:aa(f.functions),other:aa(f.timeContext+f.healthSchedule)};return{total:Object.values(g).reduce((b,S)=>b+S,0),breakdown:g}}async function PI(e){const{characterId:t,character:n,userNickname:s,allMessages:a,tempActiveMemoryIds:i}=e;try{const l=await E5(t,n);let c=new Set(i||[]);if(l.characterData.memories&&l.characterData.memories.length>0){const g=a.slice(-10).map(y=>y.text||"").join(`
`);if(g.trim()){const y=JI(g,l.characterData.memories);y.forEach(b=>c.add(b)),y.length>0&&console.log(`[PrivateChatPromptBuilder] Auto-activated memories based on context: ${y.join(", ")}`)}}const{chatHistory:u,hasUnclaimedUserRedPacket:p}=await T5(a,l.chatSettings.contextMessageCount,s,n.name,l.stickerInfo.stickerMeanings,l.chatSettings.timeAwareness);return{systemPrompt:OI({character:n,userData:l.userData,userNickname:s,worldBooks:l.worldBooks,timeInfo:l.timeInfo,chatHistory:u,stickerInfo:l.stickerInfo,chatSettings:l.chatSettings,hasUnclaimedUserRedPacket:p,healthStatus:l.healthStatus,scheduleStatus:l.scheduleStatus,memories:l.characterData.memories,tempActiveMemoryIds:Array.from(c)}),userPrompt:"",apiConfig:l.apiConfig,characterName:n.name}}catch(l){throw console.error("[PrivateChatPromptBuilder]  prompt :",l),l}}async function MI(e,t){const n=await se.get(J.CHATS,"chat_settings")||{},s=await se.get(J.CHAT_SETTINGS,`chat_detail_settings_${e}`)||{};return{contextMessageCount:n.contextMessageCount||10,enabledWorldBooks:n.enabledWorldBooks||[],timeAwareness:n.timeAwareness!==void 0?n.timeAwareness:!0,enableStickers:t?.enableStickers!==void 0?t.enableStickers:s.enableStickers!==void 0?s.enableStickers:!0,stickerProbability:t?.stickerProbability!==void 0?t.stickerProbability:s.stickerProbability!==void 0?s.stickerProbability:30,summaryLimit:n.summary_limit!==void 0?Number(n.summary_limit):3,dateLimit:n.date_limit!==void 0?Number(n.date_limit):3}}async function FI(){const e=await se.get(J.USER_DATA,"userData")||{},t=await se.get(J.USER_DATA,"user_description")||"";return{name:e.name||"",country:e.country||"",fortress:e.fortress||"",date:e.date||"",birthday:e.birthday||"",attendant:e.attendant||"",initialSword:e.initialSword||"",description:t}}async function RI(e){const n=(await se.get(J.CHARACTERS,"characters")||[]).find(s=>s.id===e);return{worldBooks:n?.worldBooks||[],memories:n?.memories||[]}}async function BI(e,t){const n=await se.get(J.WORLD_BOOKS,"world_books")||[],s=new Set([...e,...t]),a=n.filter(p=>p.scope==="global"),i=n.filter(p=>p.scope==="local"&&s.has(p.id)),l=[...a,...i],c=l.filter(p=>p.position==="before"),u=l.filter(p=>p.position==="after");return{before:c,after:u}}async function zI(e,t){const n=new Date,s=n.getHours(),a=n.getMonth()+1,i=n.getDate(),l=s<6?"":s<12?"":s<18?"":"";let c="",u="",p="";try{const b=NI.solar2lunar(n.getFullYear(),a,i);b.festival&&(u=b.festival),b.Term&&(p=b.Term),c=(N=>{if(!N)return null;const C=["","","","","",""],_=["","","","","",""],R=["","","","","",""],D=["","","","","",""];return C.includes(N)?"":_.includes(N)?"":R.includes(N)?"":D.includes(N)?"":null})(b.Term)||(a>=3&&a<=5?"":a>=6&&a<=8?"":a>=9&&a<=11?"":"")}catch(b){console.error(":",b),c=a>=3&&a<=5?"":a>=6&&a<=8?"":a>=9&&a<=11?"":""}const h=`${a}-${i}`,f={"1-1":"","2-3":"","2-4":"","2-14":"","3-3":"","3-8":"","4-1":"","5-1":"","5-4":"","6-1":"","8-13":"","8-14":"","8-15":"","10-1":"","12-24":"","12-25":"","12-31":""};!u&&f[h]&&(u=f[h]);let m="";if(e.date){const b=Eh(e.date);if(b&&b.month===a&&b.day===i){const S=n.getFullYear()-b.year;S>0?m=`${S}`:S===0&&(m="")}}let g="";if(e.birthday){const b=Eh(e.birthday);b&&b.month===a&&b.day===i&&(g="")}let y="";if(t?.manifestDate){const b=Eh(t.manifestDate);if(b&&b.month===a&&b.day===i){const S=n.getFullYear()-b.year;S>0?y=`${S}`:S===0?y="":y=""}}return{timeOfDay:l,season:c,holiday:u,term:p,anniversary:m,birthday:g,manifestAnniversary:y,currentTime:`${n.getFullYear()}${a.toString().padStart(2,"0")}${i.toString().padStart(2,"0")} ${n.getHours().toString().padStart(2,"0")}:${n.getMinutes().toString().padStart(2,"0")}`}}function Eh(e){try{if(e.includes("-")){const t=e.split("-");if(t.length>=3)return{year:parseInt(t[0]),month:parseInt(t[1]),day:parseInt(t[2])};if(t.length>=2)return{year:new Date().getFullYear(),month:parseInt(t[0]),day:parseInt(t[1])}}if(e.includes("")){const t=e.match(/(\d{4})/),n=e.match(/(\d+)/),s=e.match(/(\d+)/);if(n&&s)return{year:t?parseInt(t[1]):new Date().getFullYear(),month:parseInt(n[1]),day:parseInt(s[1])}}return null}catch(t){return console.error(":",t),null}}async function LI(e,t){if(!e)return{enabled:!1,stickers:[],stickerMeanings:{},stickerList:"",stickerGuidance:""};const{getAllStickers:n,getStickerMeaningsForAI:s}=await al(async()=>{const{getAllStickers:u,getStickerMeaningsForAI:p}=await Promise.resolve().then(()=>nP);return{getAllStickers:u,getStickerMeaningsForAI:p}},void 0),a=await n(),i=await s(),l=a.length>0?a.map(u=>`- ID: ${u.id} | : ${u.meaning}`).join(`
`):"";let c="";return a.length>0&&(t<=20?c="":t<=40?c="":t<=60?c="":t<=80?c="":c=""),{enabled:!0,stickers:a,stickerMeanings:i,stickerList:l,stickerGuidance:c}}async function T5(e,t,n,s,a,i){const l=e.slice(-t);let c=!1;for(const h of l)if(h.senderId==="user"&&h.redPacket&&!h.redPacket.opened){c=!0;break}if(!i)return{chatHistory:l.map(f=>{if(f.senderId==="system")return null;if(f.isImageRecognition)return`${f.senderId==="user"?n:s}: ${f.text}`;if(f.isPlaceholderImage)return`${f.senderId==="user"?n:s}: [: ${f.text}]`;if(f.stickerId&&a[f.stickerId])return`${f.senderId==="user"?n:s}: [: ${a[f.stickerId]}]`;if(f.imageKey)return`${f.senderId==="user"?n:s}: []`;if(f.redPacket){const m=f.senderId==="user"?n:s;return f.redPacket.opened?`${m}: [-]`:`${m}: []`}return f.order?`${f.senderId==="user"?n:s}: ${f.text}`:`${f.senderId==="user"?n:s}: ${f.text}`}).filter(f=>f!==null).join(`
`),hasUnclaimedUserRedPacket:c};const u=[];let p=null;return l.forEach((h,f)=>{if(h.senderId==="system")return;const m=h.timestamp instanceof Date?h.timestamp:new Date(h.timestamp),g=`${m.getFullYear()}-${String(m.getMonth()+1).padStart(2,"0")}-${String(m.getDate()).padStart(2,"0")}`;(f===0||p!==g)&&(u.push(`${g}`),p=g);const y=`${String(m.getHours()).padStart(2,"0")}:${String(m.getMinutes()).padStart(2,"0")}`;let b="";const S=h.senderId==="user"?n:s;h.isImageRecognition?b=h.text:h.isPlaceholderImage?b=`[: ${h.text}]`:h.stickerId&&a[h.stickerId]?b=`[: ${a[h.stickerId]}]`:h.imageKey?b="[]":h.redPacket?h.redPacket.opened?b="[-]":b="[]":(h.order,b=h.text),u.push(`[${y}] ${S}: ${b}`)}),{chatHistory:u.join(`
`),hasUnclaimedUserRedPacket:c}}function D5(e){const{character:t,userData:n,userNickname:s,worldBooks:a,timeInfo:i,chatHistory:l,stickerInfo:c,chatSettings:u,hasUnclaimedUserRedPacket:p,healthStatus:h,scheduleStatus:f,memories:m,tempActiveMemoryIds:g}=e,y=Array.isArray(g)?g.slice(-5):[];let b="";if(m&&m.length>0){const P=xs.processMemories(m,u.summaryLimit||3,u.dateLimit||3),L=ee=>y.includes(ee.id),B=ee=>ee.active!==!1||L(ee),q=P.filter(ee=>ee.type==="permanent"&&B(ee)).map(ee=>`- ${ee.content}`).join(`
`),G=P.filter(ee=>ee.type==="event"&&B(ee)).map(ee=>`- ${ee.content} ${ee.expires_at?`(: ${ee.expires_at})`:""}`).join(`
`),$=P.filter(ee=>ee.type==="summary"&&B(ee)).sort((ee,Y)=>{const re=ee.created_at||"",de=Y.created_at||"";return re.localeCompare(de)}).map(ee=>`- ${ee.content}`).join(`
`),H=P.filter(ee=>ee.type==="date"&&B(ee)).sort((ee,Y)=>{const re=ee.created_at||"",de=Y.created_at||"";return re.localeCompare(de)}).map(ee=>`- ${ee.content}`).join(`
`);(q||G||$||H)&&(b=`
** (Memory Context):**`,q&&(b+=`
[]
${q}`),G&&(b+=`
[]
${G}`),$&&(b+=`
[]
${$}`),H&&(b+=`
[]
${H}`),b+=`
`)}const S=a.before.map((P,L)=>`- **${L+1}${P.name}:** ${P.content}`).join(`
`),v=a.after.map((P,L)=>`- **${L+1}${P.name}:** ${P.content}`).join(`
`);let N="";u.timeAwareness&&(N=`- **:** ${i.currentTime} (${i.timeOfDay}, ${i.season})`,i.term&&(N+=`
- **:** ${i.term}`),i.holiday&&(N+=`
- **:** ${i.holiday}`),i.anniversary&&(N+=`
- **:** ${i.anniversary}`),i.birthday&&(N+=`
- **:** ${i.birthday}`),i.manifestAnniversary&&(N+=`
- **:** ${i.manifestAnniversary}`));const C=u.timeAwareness?`** **
1. "" [HH:MM] YYYY-MM-DD
2. "23:15"23:15
3. 

`:"",_=c.enabled&&c.stickers.length>0?`${c.stickerGuidance}
${c.stickerList}
-  "stickerId" ID
- : { "sender": "${t.name}", "stickerId": "sticker_xxxxx" }
- 
- `:"",R=p?`

** ():**
- "[]"
- **"[-]"**
- : { "sender": "system", "content": "" }
- `:"",D=h?`
  - **:** ${h}
  - **:** - - - - `:"",V=f?`
  - **:** ${f}
  - **:** `:"",I=`""

**:**
- **:** 
- **:** `,A=`**:**
-  **** 
- 
- """"""""""
- 
-  emoji 
- **** """AI"""""""`,U=`**:**
- **:** ${t.name}
- **:** ${t.description||""}${t.manifestDate?`
- **:** ${t.manifestDate}`:""}`,W=`- ** ():**
  - **:** ${s}
  - **:** ${n.name}
  - **:** ${n.country}
  - **:** ${n.fortress}
  - **:** ${n.date}${n.birthday?`
  - **:** ${n.birthday}`:""}${n.attendant?`
  - **:** ${n.attendant}`:""}${n.initialSword?`
  - **:** ${n.initialSword}`:""}${n.description?`
  - **:** ${n.description}`:""}`,T=`** ():**
${_}

** ():**
- ""
- 
-  "isPlaceholderImage"  "content" 100
- : { "sender": "${t.name}", "content": "", "isPlaceholderImage": true }
- 100
- 
${R}

** ():**
- 
- 
- : { "sender": "${t.name}", "redPacket": { "amount": , "blessing": "" } }
- amount:  500-10000
- blessing: 
- `,M=`** ( JSON):**
{
    "messages": [
        { "sender": "${t.name}", "content": "" },
        {
            "sender": "${t.name}",
            "content": "",
            "quote": {
                "sender": "${s}",
                "content": ""
            }
        },
        {
            "sender": "${t.name}",
            "content": "/",
            "quote": {
                "sender": "${s}",
                "content": "[]"
            }
        },
        { "sender": "${t.name}", "stickerId": "sticker_xxxxx" },
        { "sender": "${t.name}", "content": "100", "isPlaceholderImage": true },
        { "sender": "${t.name}", "redPacket": { "amount": 200, "blessing": "" } }
    ]
}`,j=`
${A}

** ():**
- **:**  
    1. 

**:**
-  **${t.name}**  
- 1-4
- 
- quote

** ():**
- ****
- ****
- 
-   
    
  -   
  -   
  -   
  
- **** quotecontent"[]"
`;return{intro:I,rolePlayRules:A,characterContext:U,userContext:W,worldBooksBefore:S?`
**:**
${S}`:`
**:**
- `,rolePlayAndFormat:j,currentScenario:`
**:**${N?`
${N}`:""}
- **:** ${t.name}
- **:** ${t.description||""}${t.manifestDate?`
- **:** ${t.manifestDate}`:""}
${W}${D}${V}`,memories:b,chatHistory:`
${C}**:**
${l||""}`,worldBooksAfter:v?`

**:**
${v}`:`

**:**
- `,functions:`
${T}`,outputFormat:`

${M}`,timeContext:N,healthSchedule:D+V}}function OI(e){const t=D5(e);return`${t.intro}
${t.worldBooksBefore}
${t.rolePlayAndFormat}
${t.currentScenario}
${t.memories}${t.chatHistory}
${t.worldBooksAfter}
${t.functions}
${t.outputFormat}`}async function $I(e){const t=await se.get(J.USER_DATA,"userData")||{},n=await se.get(J.USER_DATA,"user_description")||"",s=await se.get(J.CHAT_SETTINGS,`chat_detail_settings_${e}`),a=await se.get(J.CHATS,"chat_settings"),i=s?.userNickname||a?.userNickname||t.name||"";return{name:t.name||"",country:t.country||"",fortress:t.fortress||"",date:t.date||"",birthday:t.birthday||"",attendant:t.attendant||"",initialSword:t.initialSword||"",description:n,chatNickname:i}}async function VI(e){const n=(await se.get(J.CHARACTERS,"characters")||[]).find(s=>s.id===e);return{worldBooks:n?.worldBooks||[],memories:n?.memories||[]}}async function HI(e){const t=await se.get(J.WORLD_BOOKS,"world_books")||[],n=await se.get(J.MISC,"teleport_active_worldbook_ids")||[],s=new Set([...e,...n]),a=t.filter(p=>p.scope==="global"),i=t.filter(p=>p.scope==="local"&&s.has(p.id)),l=[...a,...i],c=l.filter(p=>p.position==="before"),u=l.filter(p=>p.position==="after");return{before:c,after:u}}function UI(e,t,n,s){const a=s!==void 0&&s>=0?s:0;return e.slice(a).map(c=>`${c.sender==="user"?t:n}: ${c.text}`).join(`
`)}async function WI(e){try{const t=`whisper_chat_messages_${e}`;return await se.get(J.CHATS,t)||[]}catch(t){return console.error(" WhisperChat :",t),[]}}async function I5(e){const{characterId:t,character:n,currentMessage:s,replyLength:a,writingStyle:i,isGreetingExpansion:l,isHistoryExpansion:c,isRegenerate:u,privateChatHistory:p,timeAwareness:h,lastSummaryIndex:f}=e;try{const m=await ho(),g=await $I(t),y=await VI(t),b=await HI(y.worldBooks);let S=await WI(t);u&&S.length>0&&(S=S.slice(0,-1));let v=S;s&&(v=[...S,{text:s,sender:"user",timestamp:new Date}]);const N=UI(v,g.chatNickname,n.name,f),C=await KI({character:n,userData:g,worldBooks:b,chatHistory:N,replyLength:a,writingStyle:i,memories:y.memories,isGreetingExpansion:l,isHistoryExpansion:c,privateChatHistory:p,timeAwareness:h,lastSummaryIndex:f});let _="";if(l)_=`
      

${s}


- 
- 
- 
- `;else if(c&&p){let R="";if(!h)R=p.map(D=>`${D.sender==="user"?g.chatNickname:n.name}: ${D.text}`).join(`
`);else{const D=[];let V=null;p.forEach((I,A)=>{const U=I.timestamp instanceof Date?I.timestamp:new Date(I.timestamp),W=`${U.getFullYear()}-${String(U.getMonth()+1).padStart(2,"0")}-${String(U.getDate()).padStart(2,"0")}`;(A===0||V!==W)&&(D.push(`${W}`),V=W);const T=`${String(U.getHours()).padStart(2,"0")}:${String(U.getMinutes()).padStart(2,"0")}`,M=I.sender==="user"?g.chatNickname:n.name;D.push(`${T} ${M}: ${I.text}`)}),R=D.join(`
`)}_=`

****
 ${n.name} /

****
- \`: \`
-  **"${g.chatNickname}"**
-  **"${n.name}"**
-  ${n.name} 

****
1. **** ${n.name} 
2. ****
3. **** ${n.name} 
   -  "${g.chatNickname}"  ${n.name} **/** 
   -  "${n.name}"  ${n.name} **/** 

**${p.length}**
${R}

 ${n.name} `}else _="";return{systemPrompt:C,userPrompt:_,apiConfig:m,characterName:n.name}}catch(m){throw console.error("[WhisperChatPromptBuilder]  prompt :",m),m}}async function KI(e){const{character:t,userData:n,worldBooks:s,chatHistory:a,replyLength:i,writingStyle:l,memories:c,isGreetingExpansion:u,isHistoryExpansion:p}=e;let h="";if(c&&c.length>0){const b=await se.get(J.CHATS,"chat_settings")||{},S=b.summary_limit!==void 0?Number(b.summary_limit):3,v=b.date_limit!==void 0?Number(b.date_limit):3,N=xs.processMemories(c,S,v),C=A=>A.active!==!1,_=N.filter(A=>A.type==="permanent"&&C(A)).map(A=>`- ${A.content}`).join(`
`),D=N.filter(A=>A.type==="summary"&&C(A)).sort((A,U)=>(A.created_at||"").localeCompare(U.created_at||"")).map(A=>`- ${A.content}`).join(`
`),I=N.filter(A=>A.type==="date"&&C(A)).sort((A,U)=>(A.created_at||"").localeCompare(U.created_at||"")).map(A=>`- ${A.content}`).join(`
`);(_||D||I)&&(h=`### ${t.name}  (Character Memories)
`,_&&(h+=`**[${t.name} ]**
${_}
`),D&&(h+=`**[]**
${D}
`),I&&(h+=`**[]**
${I}
`))}const f=b=>!b||b.length===0?"":b.map((S,v)=>`** ${v+1} (${S.name}):** ${S.content}`).join(`
`),m=f(s.before),g=f(s.after),y=i?`
- ****:  ${i} `:"";return`
#  (System Instructions)

## 
****
- ****: 
- ****: ""********
- ****: ${u?"":p?"":""}

${m!==""?`## 
${m}
`:""}
##  (Character Profiles)

### : ${t.name} ()
- ****: ${t.name}
- ****: ${t.description||""}
${t.manifestDate?`- ****: ${t.manifestDate} ()`:""}

### :  ()
- ****: ${n.name}
- ****: **** ${t.name} 
- ****: ${n.country}
- ****: ${n.fortress}
- ****: ${n.date}
${n.birthday?`- ****: ${n.birthday}`:""}
${n.attendant?`- ****: ${n.attendant}`:""}
${n.initialSword?`- ****: ${n.initialSword}`:""}
${n.description?`- ****: ${n.description}`:""}

${h}

##  (Narrative Rules) - ****

###  (Point of View)
1. ** ()**:
   - ""
2. ** ()**:
   - ****: ** ("")**
   - ****:  ("""${n.name}""")
3. ** ${t.name}**:
   - **** ("""${t.name}")
4. ** - **:
   -  **${t.name}**  ("")
   - :
       
     
   - ****

###  (Style & Tone)
1. ****: 
2. ****: 
${l?`3. ****: ${l}`:""}

### 
-  \`"..."\`
-  \`"..."\` 
- 

##  (Current Story)


${a||""}

${g!==""?`## 
${g}
`:""}

##  (Output Requirements)
1. ****: 
2. ****:  """" 
${y}


`}async function qI(e){const{category:t}=e,n=await ho();if(n.isBlocked)throw new Error(n.blockReason||"API ");if(!n.mainAPI)throw new Error(" API");const s=`



1.  12 
2. /""""
3. 
   -  /  / 
   - 
   - 
4. """" OOC


 JSON  \`\`\`json 
{
  "items": [
    {
      "name": "",
      "price": 100,
      "description": "(30)",
      "category": "${t}"
    }
  ]
}`;let a="";if(e.keyword)a=`${e.keyword} 12 `;else switch(t){case"food":a=" 12 ";break;case"charm":a=" 12 ";break;case"stationery":a=" 12 ";break;case"furniture":a=" 12 ";break;case"attire":a=" 12 ";break;case"recommended":default:a=" 12 ";break}return{systemPrompt:s,userPrompt:a,apiConfig:{apiKey:n.mainAPI.apiKey,baseUrl:n.mainAPI.baseUrl,modelName:n.mainAPI.modelName,temperature:n.mainAPI.temperature,maxTokens:1500}}}async function GI(e,t=1024,n=1024,s=.8){return new Promise((a,i)=>{const l=new FileReader;l.onload=c=>{const u=new Image;u.onload=()=>{let p=u.width,h=u.height;if(p>t||h>n){const y=Math.min(t/p,n/h);p*=y,h*=y}const f=document.createElement("canvas");f.width=p,f.height=h;const m=f.getContext("2d");if(!m){i(new Error(" canvas context"));return}m.drawImage(u,0,0,p,h);const g=f.toDataURL("image/jpeg",s);a(g)},u.onerror=()=>i(new Error("")),u.src=c.target?.result},l.onerror=()=>i(new Error("")),l.readAsDataURL(e)})}async function P5(e){try{console.log("[AITaskManager] ...");const t=await ho();if(t.isBlocked){const l=t.blockReason||"API ";throw console.error(`[AITaskManager] API : ${l}`),new Error(l)}let n=!1,s=t.mainAPI;if(t.auxAPI&&!t.auxAPI.isBlocked)n=!0,s=t.auxAPI,console.log("[AITaskManager]  API ");else if(t.mainAPI&&!t.mainAPI.isBlocked)console.log("[AITaskManager]  API  API ");else{const l=" API  API ";throw console.error(`[AITaskManager] ${l}`),new Error(l)}const a={apiKey:s.apiKey,baseUrl:s.baseUrl,modelName:s.modelName,temperature:s.temperature,maxTokens:e.maxTokens,systemPrompt:e.systemPrompt,userPrompt:e.userPrompt,characterName:e.characterName,userNickname:e.saniwaName,referenceDate:e.referenceDate},i=await Dl(e.characterId,"memory_extraction",a);return console.log(`[AITaskManager] : ${i} (${n?"":""} API)`),i}catch(t){throw console.error("[AITaskManager] :",t),t}}async function Dp(e){try{console.log("[AITaskManager] ...");const t=await qI(e),n={apiKey:t.apiConfig.apiKey,baseUrl:t.apiConfig.baseUrl,modelName:t.apiConfig.modelName,temperature:t.apiConfig.temperature,maxTokens:t.apiConfig.maxTokens,systemPrompt:t.systemPrompt,userPrompt:t.userPrompt,characterName:"",userNickname:""},s=await Dl("shop","shop_generation",n);return console.log(`[AITaskManager] : ${s}`),s}catch(t){throw console.error("[AITaskManager] :",t),t}}async function M5(e,t){try{console.log("[AITaskManager]  AI ...");const n=await PI(e);if(n.apiConfig.isBlocked){const l=n.apiConfig.blockReason||"API ";throw console.error(`[AITaskManager] API : ${l}`),new Error(l)}if(!n.apiConfig.mainAPI){const l=" API";throw console.error(`[AITaskManager] ${l}`),new Error(l)}let s;t&&(console.log("[AITaskManager] ..."),s=await GI(t,1024,1024,.8));const a={apiKey:n.apiConfig.mainAPI.apiKey,baseUrl:n.apiConfig.mainAPI.baseUrl,modelName:n.apiConfig.mainAPI.modelName,temperature:n.apiConfig.mainAPI.temperature,maxTokens:void 0,systemPrompt:n.systemPrompt,userPrompt:n.userPrompt,pendingImageBase64:s,imageRecognitionPrompt:"100",characterName:n.characterName,userNickname:e.userNickname,displayName:e.displayName},i=await Dl(e.characterId,"private_chat_reply",a);return console.log(`[AITaskManager] : ${i}`),i}catch(n){throw console.error("[AITaskManager] :",n),n}}async function il(e){try{console.log("[AITaskManager]  AI ...");const t=await I5(e);if(t.apiConfig.isBlocked){const a=t.apiConfig.blockReason||"API ";throw console.error(`[AITaskManager] API : ${a}`),new Error(a)}if(!t.apiConfig.mainAPI){const a=" API";throw console.error(`[AITaskManager] ${a}`),new Error(a)}const n={apiKey:t.apiConfig.mainAPI.apiKey,baseUrl:t.apiConfig.mainAPI.baseUrl,modelName:t.apiConfig.mainAPI.modelName,temperature:t.apiConfig.mainAPI.temperature,maxTokens:void 0,systemPrompt:t.systemPrompt,userPrompt:t.userPrompt,characterName:t.characterName,userNickname:"",displayName:t.characterName},s=await Dl(e.characterId,"whisper_chat_reply",n);return console.log(`[AITaskManager] : ${s}`),s}catch(t){throw console.error("[AITaskManager] :",t),t}}async function YI(e){try{console.log("[AITaskManager] ...");const t=await ho();if(t.isBlocked){const l=t.blockReason||"API ";throw console.error(`[AITaskManager] API : ${l}`),new Error(l)}let n=!1,s=t.mainAPI;if(t.auxAPI&&!t.auxAPI.isBlocked)n=!0,s=t.auxAPI,console.log("[AITaskManager]  API ");else if(t.mainAPI&&!t.mainAPI.isBlocked)console.log("[AITaskManager]  API  API ");else{const l=" API  API ";throw console.error(`[AITaskManager] ${l}`),new Error(l)}const a={apiKey:s.apiKey,baseUrl:s.baseUrl,modelName:s.modelName,temperature:s.temperature||.7,maxTokens:e.maxTokens,systemPrompt:e.systemPrompt,userPrompt:e.userPrompt,characterName:e.characterName,userNickname:e.userNickname,displayName:e.displayName},i=await Dl(e.characterId,"memory_summary",a);return console.log(`[AITaskManager] : ${i} (${n?"":""} API)`),i}catch(t){throw console.error("[AITaskManager] :",t),t}}const ZI=Object.freeze(Object.defineProperty({__proto__:null,createMemoryExtractionTask:P5,createMemorySummaryTask:YI,createPrivateChatReplyTask:M5,createShopGenerationTask:Dp,createWhisperChatReplyTask:il},Symbol.toStringTag,{value:"Module"})),QI=`


1. 
2. 
3. 
 JSON Markdown`;function ad(){return Date.now().toString(36)+Math.random().toString(36).substr(2,5)}function XI(e,t,n,s){if(!t)return e.map(l=>{if(l.senderId==="system")return null;let c=l.text;return l.stickerId?c="[]":l.imageKey?c="[]":l.isPlaceholderImage?c=`[: ${l.text}]`:l.redPacket?c=l.redPacket.opened?"[-]":"[]":l.order?c=l.text:l.isImageRecognition&&(c=`[: ${l.text}]`),`${l.senderId==="user"?n:s}: ${c}`}).filter(l=>l!==null).join(`
`);const a=[];let i=null;return e.forEach((l,c)=>{if(l.senderId==="system")return;const u=new Date(l.timestamp);if(isNaN(u.getTime()))return;const p=`${u.getFullYear()}-${String(u.getMonth()+1).padStart(2,"0")}-${String(u.getDate()).padStart(2,"0")}`;(c===0||i!==p)&&(a.push(`${p}`),i=p);const h=`${String(u.getHours()).padStart(2,"0")}:${String(u.getMinutes()).padStart(2,"0")}`;let f=l.text;l.stickerId?f="[]":l.imageKey?f="[]":l.isPlaceholderImage?f=`[: ${l.text}]`:l.redPacket?f=l.redPacket.opened?"[-]":"[]":l.order?f=l.text:l.isImageRecognition&&(f=`[: ${l.text}]`);const m=l.senderId==="user"?n:s;a.push(`[${h}] ${m}: ${f}`)}),a.join(`
`)}function JI(e,t,n=2){const s=[],a=e.toLowerCase();return t.forEach(i=>{if(i.active===!1&&i.tags&&i.tags.length>0){let c=0;i.tags.forEach(u=>{if(!u)return;const p=u.toLowerCase();a.includes(p)&&(c+=p.length)}),c>=n&&s.push({id:i.id,score:c})}}),s.sort((i,l)=>l.score-i.score).slice(0,5).map(i=>i.id)}async function F5(e,t,n){const s=await se.get(J.MISC,"memory_extraction_settings"),a=s?.threshold??20,i=s?.auto_summary??!0,l=n?.manualCount!==void 0;if(!i&&!l)return;const c=await se.get(J.MISC,`last_extraction_index_${e}`)||0;let u=[];if(l){const W=n.manualCount;if(W<=0)return;u=t.slice(-W)}else{if(t.length-c<a)return;u=t.slice(c)}const p=await se.get(J.CHATS,"chat_settings")||{},h=p.timeAwareness!==void 0?p.timeAwareness:!0,m=(await se.get(J.USER_DATA,"userData")||{}).name||"",y=(await se.get(J.CHARACTERS,"characters")||[]).find(W=>W.id===e),b=y?y.name:"",S=XI(u,h,m,b);await se.set(J.MISC,`last_extraction_index_${e}`,t.length);let v="",N="",C="",_="",R="",D=new Date;if(u.length>0){const W=u[u.length-1];if(W.timestamp){const T=new Date(W.timestamp);isNaN(T.getTime())||(D=T)}}const V=`${D.getFullYear()}-${String(D.getMonth()+1).padStart(2,"0")}-${String(D.getDate()).padStart(2,"0")}`,I=h?"":"",A=h?"3":"2";if(h){const T=["","","","","","",""][D.getDay()];v=`

- ${V} (${T})
- 
- YYYY-MM-DD`,N=`2  / event
- 
-  content YYYY.MM.DD
  "2025.10.01 "
- expire_at
  a)  "expire_at": "YYYY-MM-DD"
  b) 1225
  c)  "suggested_expire_days": 
-  suggested_expire_days
-  1-3 tags`,_=`${A} summary
- 
- 150
-  content 
  -  "YYYY.MM.DD ..." ( "2025.12.28 ...")
  -  "YYYY.MM.DD-YYYY.MM.DD ..." ( "2025.12.28-2025.12.29 ...")
-  1-3 tags
- summary`,C=`  "event": [
    {
      "content": "2025.11.01",
      "suggested_expire_days": 1,
      "tags": ["", ""]
    },
    {
      "content": "2025.12.161231",
      "expire_at": "2025-12-31",
      "tags": ["", ""]
    }
  ],`,R=`  "summary": {
    "content": "2025.12.16 ",
    "tags": ["", ""]
  }`}else v="",N="",C="",_=`${A} summary
- 
- 150
-  1-3 tags
- summary`,R=`  "summary": {
    "content": "",
    "tags": ["", ""]
  }`;const U=`${m}${b}
${v}

${S}

${b}${I}

1 permanent
- 
- 
- /
-  1 
-  []
-  tags

${N}

${_}

 JSON 
{
  "permanent": [
    ""
  ],
${C}
${R}
}`;try{await P5({characterId:e,characterName:b,saniwaName:m,systemPrompt:QI,userPrompt:U,referenceDate:V}),console.log(`[Memory] Extraction task created for ${b}`)}catch(W){console.error("[Memory] Failed to create extraction task:",W)}}function R5(e,t){try{let n=e;const s=e.match(/```(?:json)?\s*(\{[\s\S]*?\})\s*```/);if(s)n=s[1];else{const u=e.indexOf("{"),p=e.lastIndexOf("}");u!==-1&&p!==-1&&(n=e.substring(u,p+1))}const a=JSON.parse(n),i=[],l=new Date().toISOString().split("T")[0],c=t?new Date(t):new Date;if(Array.isArray(a.permanent)&&a.permanent.forEach(u=>{typeof u=="string"&&u.trim()&&i.push({id:ad(),type:"permanent",content:u.trim(),created_at:l,active:!0,tags:[]})}),Array.isArray(a.event)&&a.event.forEach(u=>{if(u&&u.content){const p=Array.isArray(u.tags)?u.tags:typeof u.tags=="string"?[u.tags]:[];let h;if(u.expire_at&&/^\d{4}-\d{2}-\d{2}$/.test(u.expire_at))h=u.expire_at;else if(u.suggested_expire_days){const f=new Date(c);f.setDate(f.getDate()+Number(u.suggested_expire_days)),h=f.toISOString().split("T")[0]}i.push({id:ad(),type:"event",content:u.content,created_at:l,tags:p,active:!0,expires_at:h})}}),a.summary){const u=a.summary;if(typeof u=="object"&&u.content){const p=Array.isArray(u.tags)?u.tags:typeof u.tags=="string"?[u.tags]:[];i.push({id:ad(),type:"summary",content:u.content,created_at:l,active:!0,tags:p})}else typeof u=="string"&&i.push({id:ad(),type:"summary",content:u,created_at:l,active:!0,tags:[]})}return i}catch(n){return console.error("Failed to parse memory extraction JSON",n),[]}}async function B5(e,t){const n=await se.get(J.CHARACTERS,"characters")||[],s=n.findIndex(a=>a.id===e);if(s>=0){const a=n[s],i=a.memories||[];a.memories=[...i,...t],n[s]=a,await se.set(J.CHARACTERS,"characters",n),console.log("[Memory] Saved",t.length,"memories for",a.name),window.dispatchEvent(new CustomEvent("character-memories-updated",{detail:{characterId:e,memories:a.memories}}))}}async function Ip(e,t,n="forever"){if(e==="forever"&&t==="forever"&&n==="forever")return;const s=c=>{if(c==="forever")return null;const u=c==="7d"?7:30,p=new Date;p.setDate(p.getDate()-u);const h=p.getFullYear(),f=String(p.getMonth()+1).padStart(2,"0"),m=String(p.getDate()).padStart(2,"0");return`${h}-${f}-${m}`},a=s(e),i=s(t),l=s(n);try{const c=await se.get(J.CHARACTERS,"characters")||[];let u=!1,p=0;const h=c.map(f=>{if(!f.memories||f.memories.length===0)return f;const m=f.memories.length,g=f.memories.filter(y=>y.active!==!1?!0:!(y.type==="summary"&&a&&y.created_at<a||y.type==="event"&&i&&y.expires_at&&y.expires_at<i||y.type==="date"&&l&&y.created_at<l));return g.length!==m?(u=!0,p+=m-g.length,{...f,memories:g}):f});u&&(await se.set(J.CHARACTERS,"characters",h),console.log(`[Memory Cleanup] Removed ${p} expired inactive memories.`),window.dispatchEvent(new CustomEvent("character-memories-updated",{detail:{characterId:null}})))}catch(c){console.error("[Memory Cleanup] Failed:",c)}}function eP({characterId:e,characterName:t,onClose:n,onUpdate:s,onDelete:a}){const[i,l]=k.useState(""),[c,u]=k.useState(!1),[p,h]=k.useState(!0),[f,m]=k.useState(30),[g,y]=k.useState(!1),[b,S]=k.useState(!1),[v,N]=k.useState(!1),[C,_]=k.useState(!1),[R,D]=k.useState(null),[V,I]=k.useState(!1),[A,U]=k.useState("50"),[W,T]=k.useState("idle"),[M,j]=k.useState(()=>We.chatSettings?.darkMode||!1),[P,L]=k.useState(()=>We.chatSettings?.theme||(We.chatSettings?.darkMode?"dark":"light"));k.useEffect(()=>{(async()=>{if(!We.chatSettings)try{const oe=await se.get(J.CHATS,"chat_settings");oe&&(We.chatSettings=oe,oe.darkMode!==void 0&&j(oe.darkMode),L(oe.theme||(oe.darkMode?"dark":"light")))}catch(oe){console.error("Failed to load global chat settings in ChatDetailSettings",oe)}})()},[]),k.useEffect(()=>{const X=be=>{be.detail?.characterId===e&&W==="processing"&&(T("success"),setTimeout(()=>T("idle"),3e3))},oe=be=>{be.detail?.characterId===e&&W==="processing"&&(T("error"),setTimeout(()=>T("idle"),3e3))};window.addEventListener("character-memories-updated",X),window.addEventListener("memory-extraction-failed",oe);const ye=be=>{const{type:Ie,payload:De}=be.data;Ie==="AI_TASK_COMPLETED"&&De?.taskType==="memory_extraction"&&De?.characterId===e?(console.log("[ChatDetailSettings] Received SW memory extraction completion directly"),W==="processing"&&(T("success"),setTimeout(()=>T("idle"),3e3))):Ie==="AI_TASK_FAILED"&&De?.characterId===e&&(console.log("[ChatDetailSettings] Received SW memory extraction failure directly"),W==="processing"&&(T("error"),setTimeout(()=>T("idle"),3e3)))};return"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",ye),B(),()=>{window.removeEventListener("character-memories-updated",X),window.removeEventListener("memory-extraction-failed",oe),"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener("message",ye)}},[e,W]);const B=async()=>{try{const X=`chat_detail_settings_${e}`,oe=await se.get(J.CHAT_SETTINGS,X);oe?(l(oe.remark||""),u(oe.isPinned||!1),h(oe.enableStickers!==void 0?oe.enableStickers:!0),m(oe.stickerProbability!==void 0?oe.stickerProbability:30)):(l(""),u(!1),h(!0),m(30))}catch(X){console.error("Failed to load settings:",X)}},q=async(X,oe,ye,be)=>{try{const Ie=`chat_detail_settings_${e}`,De={remark:X,isPinned:oe,enableStickers:ye,stickerProbability:be};await se.set(J.CHAT_SETTINGS,Ie,De),await G(X,oe),window.dispatchEvent(new CustomEvent("chat-settings-updated")),s()}catch(Ie){console.error("Failed to save settings:",Ie)}},G=async(X,oe)=>{try{const ye=await se.get(J.CHATS,"chat_list");if(ye){const be=ye.findIndex(Ie=>Ie.id===e);if(be!==-1){ye[be].remark=X,ye[be].isPinned=oe;try{const Ie=await se.get(J.CHAT_MESSAGES,`chat_messages_${e}`);Ie&&Ie.length>0&&Ie[Ie.length-1].senderId==="character"&&(ye[be].lastSender=X)}catch(Ie){console.error("Failed to check last message sender:",Ie)}await se.set(J.CHATS,"chat_list",ye)}}}catch(ye){console.error("Failed to update chat list:",ye)}},O=X=>{l(X),q(X,c,p,f)},$=()=>{const X=!c;u(X),q(i,X,p,f)},K=()=>{const X=!p;h(X),q(i,c,X,f)},H=X=>{const oe=parseInt(X,10);!isNaN(oe)&&oe>=0&&oe<=100&&(m(oe),q(i,c,p,oe))},ee=async()=>{try{const X=parseInt(A,10);if(isNaN(X)||X<=0){Un.error("");return}const oe=`chat_messages_${e}`,ye=await se.get(J.CHAT_MESSAGES,oe)||[];if(ye.length===0){Un.error("");return}await F5(e,ye,{manualCount:X}),T("processing"),N(!1)}catch(X){console.error("Failed to trigger manual extraction:",X),Un.error("")}},Y=async()=>{try{I(!0);const X=`chat_messages_${e}`,oe=await se.get(J.CHAT_MESSAGES,X)||[],be=(await se.get(J.CHARACTERS,"characters")||[]).find(Z=>Z.id===e)||{id:e,name:t,description:""},Ie=await se.get(J.CHAT_SETTINGS,`chat_detail_settings_${e}`),De=await se.get(J.CHATS,"chat_settings"),F=Ie?.userNickname||De?.userNickname||"",le=await II({characterId:e,character:be,userNickname:F,displayName:i||t,allMessages:oe,overrideSettings:{enableStickers:p,stickerProbability:f}});D(le),_(!0)}catch(X){console.error(X),Un.error("")}finally{I(!1)}},re=async()=>{try{const X=`chat_messages_${e}`;await se.delete(J.CHAT_MESSAGES,X);const oe=await se.get(J.CHATS,"chat_list");if(oe){const ye=oe.findIndex(be=>be.id===e);ye!==-1&&(oe[ye].lastMessage="",oe[ye].lastSender="",await se.set(J.CHATS,"chat_list",oe))}y(!1),window.dispatchEvent(new CustomEvent("chat-settings-updated")),s(),setTimeout(()=>{window.dispatchEvent(new CustomEvent("chat-messages-cleared"))},100),n()}catch(X){console.error("Failed to clear messages:",X)}},de=async()=>{try{const X=`chat_messages_${e}`;await se.delete(J.CHAT_MESSAGES,X);const oe=`chat_detail_settings_${e}`;await se.delete(J.CHAT_SETTINGS,oe);const ye=await se.get(J.CHATS,"chat_list");if(ye){const be=ye.filter(Ie=>Ie.id!==e);await se.set(J.CHATS,"chat_list",be)}S(!1),window.dispatchEvent(new CustomEvent("chat-settings-updated")),a?a():n()}catch(X){console.error("Failed to delete chat:",X),S(!1)}};return r.jsxs(me.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30,mass:1},className:`fixed inset-0 z-[70] flex flex-col shadow-[-10px_0_30px_rgba(0,0,0,0.1)] ${P==="light-frosted"?"bg-white/80 backdrop-blur-xl":P==="dark-frosted"?"bg-black/60 backdrop-blur-xl":M?"bg-[#121212]":"bg-white"}`,children:[r.jsxs("div",{className:`h-16 flex items-center justify-between px-4 ${P==="light-frosted"||P==="dark-frosted"?"bg-transparent":M?"bg-[#121212]":"bg-white"}`,children:[r.jsx("button",{onClick:n,className:"p-2 -ml-2 active:opacity-60 hover:opacity-60 transition-opacity",children:r.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:P==="dark-frosted"||M?"white":"black",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M15 18l-6-6 6-6"})})}),r.jsx("h1",{className:`font-semibold text-[18px] ${P==="dark-frosted"||M?"text-white":"text-[#333]"}`,children:""}),r.jsx("div",{className:"w-11"})]}),r.jsx(Be,{children:W!=="idle"&&r.jsx(me.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"absolute top-20 left-4 right-4 z-50 flex justify-center pointer-events-none",children:r.jsxs("div",{className:`px-4 py-3 rounded-xl shadow-lg flex items-center gap-3 backdrop-blur-md ${P==="light-frosted"?"bg-white/80 text-[#333]":P==="dark-frosted"?"bg-black/60 text-white":M?"bg-[#2d2d2d] text-white":"bg-white text-[#333]"}`,children:[W==="processing"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-current border-t-transparent animate-spin"}),r.jsx("span",{className:"text-[14px] font-medium",children:"..."})]}),W==="success"&&r.jsxs(r.Fragment,{children:[r.jsx(Et,{className:"w-5 h-5 text-[#7B9E7B]"}),r.jsx("span",{className:"text-[14px] font-medium",children:""})]}),W==="error"&&r.jsxs(r.Fragment,{children:[r.jsx(xt,{className:"w-5 h-5 text-[#ff3b30]"}),r.jsx("span",{className:"text-[14px] font-medium",children:""})]})]})})}),r.jsxs("div",{className:`flex-1 overflow-y-auto px-5 py-6 ${P==="light-frosted"||P==="dark-frosted"?"bg-transparent":M?"bg-[#121212]":"bg-white"}`,children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] mb-3 ${P==="dark-frosted"||M?"text-white":"text-[#333]"}`,children:""}),r.jsx("input",{type:"text",value:i,onChange:X=>O(X.target.value),placeholder:t===""?"":t,className:`w-full px-4 py-3 rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] outline-none transition-colors ${P==="light-frosted"?"bg-white/40 text-[#333] placeholder:text-[#999] focus:bg-white/60":P==="dark-frosted"?"bg-black/40 text-white placeholder:text-[#888] focus:bg-black/60":M?"bg-[#2d2d2d] text-white placeholder:text-[#666] focus:bg-[#3d3d3d]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999] focus:bg-[#ebebeb]"}`})]}),r.jsx("div",{className:"mb-8",children:r.jsxs(me.button,{whileTap:{scale:.98},onClick:$,className:`w-full px-4 py-3 rounded-lg transition-colors flex items-center justify-between ${P==="light-frosted"?"bg-white/40 active:bg-white/60 hover:bg-white/60":P==="dark-frosted"?"bg-black/40 active:bg-black/60 hover:bg-black/60":M?"bg-[#2d2d2d] active:bg-[#3d3d3d] hover:bg-[#3d3d3d]":"bg-[#f5f5f5] active:bg-[#ebebeb] hover:bg-[#ebebeb]"}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(x9,{className:`w-5 h-5 ${P==="dark-frosted"||M?"text-[#aaa]":"text-[#666]"}`,strokeWidth:2}),r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] ${P==="dark-frosted"||M?"text-white":"text-[#333]"}`,children:c?"":""})]}),c&&r.jsx(me.div,{initial:{scale:0},animate:{scale:1},className:"w-5 h-5 rounded-full bg-[#7B9E7B] flex items-center justify-center",children:r.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})})]})}),r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] mb-1 ${P==="dark-frosted"||M?"text-white":"text-[#333]"}`,children:""}),r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[13px] ${P==="dark-frosted"||M?"text-[#aaa]":"text-[#999]"}`,children:""})]}),r.jsx(me.button,{onClick:K,className:`w-12 h-7 rounded-full flex items-center px-0.5 relative ${p?"#7B9E7B":P==="dark-frosted"?"bg-black/40":M?"bg-[#3d3d3d]":"bg-[#d0d0d0]"}`,animate:{backgroundColor:p?"#7B9E7B":P==="dark-frosted"?"rgba(0,0,0,0.4)":M?"#3d3d3d":"#d0d0d0"},whileTap:{scale:.95},children:r.jsx(me.div,{className:"w-6 h-6 rounded-full bg-white shadow-sm",animate:{x:p?20:0},transition:{type:"spring",stiffness:500,damping:30}})})]}),r.jsx(Be,{children:p&&r.jsx(me.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:r.jsxs("div",{className:"mt-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] ${P==="dark-frosted"||M?"text-[#aaa]":"text-[#666]"}`,children:""}),r.jsxs("span",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] text-[#7B9E7B]",children:[f,"%"]})]}),r.jsx("div",{className:"px-1",children:r.jsx("input",{type:"range",min:"0",max:"100",value:f,onChange:X=>H(X.target.value),className:`w-full h-2 rounded-lg appearance-none cursor-pointer slider ${P==="light-frosted"?"bg-white/40":P==="dark-frosted"?"bg-black/40":M?"bg-[#2d2d2d]":"bg-[#f5f5f5]"}`,style:{background:`linear-gradient(to right, #7B9E7B 0%, #7B9E7B ${f}%, ${P==="light-frosted"?"rgba(255,255,255,0.4)":P==="dark-frosted"?"rgba(0,0,0,0.4)":M?"#2d2d2d":"#f5f5f5"} ${f}%, ${P==="light-frosted"?"rgba(255,255,255,0.4)":P==="dark-frosted"?"rgba(0,0,0,0.4)":M?"#2d2d2d":"#f5f5f5"} 100%)`}})}),r.jsxs("div",{className:"flex justify-between mt-2 px-1",children:[r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] ${P==="dark-frosted"?"text-[#888]":M?"text-[#666]":"text-[#999]"}`,children:"0%"}),r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] ${P==="dark-frosted"?"text-[#888]":M?"text-[#666]":"text-[#999]"}`,children:"100%"})]}),r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] mt-2 ${P==="dark-frosted"?"text-[#888]":M?"text-[#666]":"text-[#999]"}`,children:""})]})})})]}),r.jsx("div",{className:"mb-8",children:r.jsxs(me.button,{whileTap:{scale:.98},onClick:()=>N(!0),className:`w-full px-4 py-3 rounded-lg transition-colors flex items-center justify-between ${P==="light-frosted"?"bg-white/40 active:bg-white/60 hover:bg-white/60":P==="dark-frosted"?"bg-black/40 active:bg-black/60 hover:bg-black/60":M?"bg-[#2d2d2d] active:bg-[#3d3d3d] hover:bg-[#3d3d3d]":"bg-[#f5f5f5] active:bg-[#ebebeb] hover:bg-[#ebebeb]"}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Wm,{className:`w-5 h-5 ${P==="dark-frosted"||M?"text-[#aaa]":"text-[#666]"}`,strokeWidth:2}),r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] ${P==="dark-frosted"||M?"text-white":"text-[#333]"}`,children:""})]}),r.jsx("div",{className:`text-[12px] ${P==="dark-frosted"||M?"text-[#666]":"text-[#999]"}`,children:""})]})}),r.jsx("div",{className:"mb-8",children:r.jsxs(me.button,{whileTap:{scale:.98},onClick:Y,disabled:V,className:`w-full px-4 py-3 rounded-lg transition-colors flex items-center justify-between ${P==="light-frosted"?"bg-white/40 active:bg-white/60 hover:bg-white/60":P==="dark-frosted"?"bg-black/40 active:bg-black/60 hover:bg-black/60":M?"bg-[#2d2d2d] active:bg-[#3d3d3d] hover:bg-[#3d3d3d]":"bg-[#f5f5f5] active:bg-[#ebebeb] hover:bg-[#ebebeb]"}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(gd,{className:`w-5 h-5 ${P==="dark-frosted"||M?"text-[#aaa]":"text-[#666]"}`,strokeWidth:2}),r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] ${P==="dark-frosted"||M?"text-white":"text-[#333]"}`,children:V?"...":""})]}),r.jsx("div",{className:`text-[12px] ${P==="dark-frosted"||M?"text-[#666]":"text-[#999]"}`,children:"Prompt"})]})}),r.jsx("div",{className:"mb-8",children:r.jsxs(me.button,{whileTap:{scale:.98},onClick:()=>y(!0),className:`w-full px-4 py-3 rounded-lg transition-colors flex items-center gap-3 ${P==="light-frosted"?"bg-[#ffe5e5]/60 active:bg-[#ffd0d0]/80 hover:bg-[#ffd0d0]/80":P==="dark-frosted"?"bg-[#3a1d1d]/80 active:bg-[#4a2d2d]/80 hover:bg-[#4a2d2d]/80":M?"bg-[#3a1d1d] active:bg-[#4a2d2d] hover:bg-[#4a2d2d]":"bg-[#ffe5e5] active:bg-[#ffd0d0] hover:bg-[#ffd0d0]"}`,children:[r.jsx(xn,{className:"w-5 h-5 text-[#ff3b30]",strokeWidth:2}),r.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] text-[#ff3b30]",children:""})]})}),r.jsx("div",{className:"mb-8",children:r.jsxs(me.button,{whileTap:{scale:.98},onClick:()=>S(!0),className:`w-full px-4 py-3 rounded-lg transition-colors flex items-center gap-3 ${P==="light-frosted"?"bg-[#ffe5e5]/60 active:bg-[#ffd0d0]/80 hover:bg-[#ffd0d0]/80":P==="dark-frosted"?"bg-[#3a1d1d]/80 active:bg-[#4a2d2d]/80 hover:bg-[#4a2d2d]/80":M?"bg-[#3a1d1d] active:bg-[#4a2d2d] hover:bg-[#4a2d2d]":"bg-[#ffe5e5] active:bg-[#ffd0d0] hover:bg-[#ffd0d0]"}`,children:[r.jsx(xt,{className:"w-5 h-5 text-[#ff3b30]",strokeWidth:2}),r.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] text-[#ff3b30]",children:""})]})})]}),us.createPortal(r.jsx(Be,{children:v&&r.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-black/40",onClick:()=>N(!1)}),r.jsxs(me.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[320px] shadow-xl ${P==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":P==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":M?"bg-[#1e1e1e]":"bg-white"}`,children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-3 ${P==="dark-frosted"||M?"text-white":"text-black"}`,children:""}),r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] text-center mb-4 ${P==="dark-frosted"||M?"text-[#aaa]":"text-[#666]"}`,children:""}),r.jsx("div",{className:"mb-6",children:r.jsx("input",{type:"number",value:A,onChange:X=>U(X.target.value),className:`w-full px-4 py-2 rounded-lg text-center outline-none font-['Source_Han_Sans_CN_VF:Regular',sans-serif] ${P==="light-frosted"?"bg-white/40 text-[#333] focus:bg-white/60":P==="dark-frosted"?"bg-black/40 text-white focus:bg-black/60":M?"bg-[#2d2d2d] text-white focus:bg-[#3d3d3d]":"bg-[#f5f5f5] text-[#333] focus:bg-[#ebebeb]"}`})}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>N(!1),className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors ${P==="light-frosted"?"bg-white/40 text-[#666] hover:bg-white/60":P==="dark-frosted"?"bg-white/10 text-white hover:bg-white/20":M?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),r.jsx("button",{onClick:ee,className:"flex-1 py-2.5 rounded-xl bg-[#7B9E7B] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity",children:""})]})]})]})}),document.body),us.createPortal(r.jsx(Be,{children:g&&r.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-black/40",onClick:()=>y(!1)}),r.jsxs(me.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[320px] shadow-xl ${P==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":P==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":M?"bg-[#1e1e1e]":"bg-white"}`,children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-3 ${P==="dark-frosted"||M?"text-white":"text-black"}`,children:""}),r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] text-center mb-6 ${P==="dark-frosted"||M?"text-[#aaa]":"text-[#666]"}`,children:""}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>y(!1),className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors ${P==="light-frosted"?"bg-white/40 text-[#666] hover:bg-white/60":P==="dark-frosted"?"bg-white/10 text-white hover:bg-white/20":M?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),r.jsx("button",{onClick:re,className:"flex-1 py-2.5 rounded-xl bg-[#ff3b30] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity",children:""})]})]})]})}),document.body),us.createPortal(r.jsx(Be,{children:b&&r.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-black/40",onClick:()=>S(!1)}),r.jsxs(me.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[320px] shadow-xl ${P==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":P==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":M?"bg-[#1e1e1e]":"bg-white"}`,children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-3 ${P==="dark-frosted"||M?"text-white":"text-black"}`,children:""}),r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] text-center mb-6 ${P==="dark-frosted"||M?"text-[#aaa]":"text-[#666]"}`,children:""}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>S(!1),className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors ${P==="light-frosted"?"bg-white/40 text-[#666] hover:bg-white/60":P==="dark-frosted"?"bg-white/10 text-white hover:bg-white/20":M?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),r.jsx("button",{onClick:de,className:"flex-1 py-2.5 rounded-xl bg-[#ff3b30] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity",children:""})]})]})]})}),document.body),us.createPortal(r.jsx(Be,{children:C&&R&&r.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-black/40",onClick:()=>_(!1)}),r.jsxs(me.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[360px] shadow-xl max-h-[80vh] overflow-y-auto ${P==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":P==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":M?"bg-[#1e1e1e]":"bg-white"}`,children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-6 ${P==="dark-frosted"||M?"text-white":"text-black"}`,children:"Prompt "}),r.jsxs("div",{className:"space-y-4 mb-6",children:[r.jsxs("div",{className:`p-4 rounded-xl flex justify-between items-center ${P==="dark-frosted"?"bg-white/10":M?"bg-[#2d2d2d]":"bg-[#f5f5f5]"}`,children:[r.jsx("span",{className:`text-sm ${P==="dark-frosted"||M?"text-[#aaa]":"text-[#666]"}`,children:" Token "}),r.jsx("span",{className:`text-xl font-bold ${P==="dark-frosted"||M?"text-white":"text-[#333]"}`,children:R.total})]}),r.jsx("div",{className:"space-y-3",children:[{label:"",value:R.breakdown.systemTemplate,color:"#60a5fa"},{label:"",value:R.breakdown.userPersona,color:"#34d399"},{label:"",value:R.breakdown.characterPersona,color:"#f472b6"},{label:"",value:R.breakdown.worldBook,color:"#fbbf24"},{label:"",value:R.breakdown.memories,color:"#818cf8"},{label:"",value:R.breakdown.chatHistory,color:"#a78bfa"},{label:"",value:R.breakdown.functions,color:"#9ca3af"},{label:"",value:R.breakdown.other,color:"#cbd5e1"}].map((X,oe)=>r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:X.color}}),r.jsx("span",{className:`text-sm flex-1 ${P==="dark-frosted"||M?"text-[#ddd]":"text-[#555]"}`,children:X.label}),r.jsx("span",{className:`text-sm font-medium ${P==="dark-frosted"||M?"text-white":"text-[#333]"}`,children:X.value}),r.jsx("div",{className:"w-16 h-1.5 rounded-full bg-gray-200/20 overflow-hidden",children:r.jsx("div",{className:"h-full rounded-full",style:{width:`${Math.min(100,X.value/R.total*100)}%`,backgroundColor:X.color}})})]},oe))})]}),r.jsx("button",{onClick:()=>_(!1),className:`w-full py-3 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors ${P==="light-frosted"?"bg-white/40 text-[#666] hover:bg-white/60":P==="dark-frosted"?"bg-white/10 text-white hover:bg-white/20":M?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""})]})]})}),document.body)]})}const z5=k.memo(({dateString:e})=>r.jsx("div",{className:"flex justify-center mb-3",children:r.jsx("div",{className:"bg-black/20 rounded-full px-2 py-0 flex items-center justify-center",children:r.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] text-white",children:e})})}));z5.displayName="DateSeparator";const L5=async(e,t)=>{try{const n=await Zm(e,{maxSizeMB:.2,maxWidthOrHeight:512,useWebWorker:!0}),s=`sticker_${Date.now()}`,a=`meme-${s}`;await wr(a,new File([n],e.name,{type:n.type}));const i={id:s,imageKey:a,meaning:t,createdAt:new Date().toISOString()},l=await ni();return l.push(i),await se.set(J.STICKERS,"stickers",l),i}catch(n){throw console.error("Failed to add sticker:",n),n}},ni=async()=>{try{return await se.get(J.STICKERS,"stickers")||[]}catch(e){return console.error("Failed to get stickers:",e),[]}},e0=async e=>{try{return await Ct(e)}catch(t){return console.error("Failed to get sticker image:",t),null}},O5=async e=>{try{const t=await ni(),n=t.find(a=>a.id===e);if(!n)throw new Error("Sticker not found");n.imageKey&&await fa(n.imageKey);const s=t.filter(a=>a.id!==e);await se.set(J.STICKERS,"stickers",s)}catch(t){throw console.error("Failed to delete sticker:",t),t}},tP=async()=>{try{const e=await ni(),t={};return e.forEach(n=>{t[n.id]=n.meaning}),t}catch(e){return console.error("Failed to get sticker meanings:",e),{}}},$5=async e=>{const t=e.split(`
`).map(s=>s.trim()).filter(s=>s.length>0),n={success:0,failed:0,errors:[]};for(const s of t)try{const a=s.indexOf("-");if(a===-1){n.failed++,n.errors.push(`: "${s}" (: -URL)`);continue}const i=s.substring(0,a).trim(),l=s.substring(a+1).trim();if(!i){n.failed++,n.errors.push(`: "${s}"`);continue}if(!l||!l.startsWith("http://")&&!l.startsWith("https://")){n.failed++,n.errors.push(`URL: "${l}"`);continue}const u={id:`sticker_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,imageUrl:l,meaning:i,createdAt:new Date().toISOString()},p=await ni();p.push(u),await se.set(J.STICKERS,"stickers",p),n.success++,await new Promise(h=>setTimeout(h,10))}catch(a){n.failed++,n.errors.push(`"${s.substring(0,30)}...": ${a.message||""}`)}return n},nP=Object.freeze(Object.defineProperty({__proto__:null,addSticker:L5,batchImportStickersFromURL:$5,deleteSticker:O5,getAllStickers:ni,getStickerImageURL:e0,getStickerMeaningsForAI:tP},Symbol.toStringTag,{value:"Module"}));function rP({onClose:e,onSelect:t,theme:n,isDarkMode:s}){const[a,i]=k.useState([]),[l,c]=k.useState({}),[u,p]=k.useState(!1),[h,f]=k.useState(null),[m,g]=k.useState(""),[y,b]=k.useState(null),[S,v]=k.useState(!1),N=k.useRef(null),[C,_]=k.useState({show:!1,message:""}),[R,D]=k.useState(!1),[V,I]=k.useState(""),[A,U]=k.useState(!1),[W,T]=k.useState(null),[M,j]=k.useState(!1);k.useEffect(()=>{P()},[]);const P=async()=>{try{const H=await ni();i(H);const ee={};for(const Y of H)if(Y.imageUrl)ee[Y.id]=Y.imageUrl;else if(Y.imageKey){const re=await e0(Y.imageKey);re&&(ee[Y.id]=re)}c(ee)}catch(H){console.error("Failed to load stickers:",H)}},L=H=>{const ee=H.target.files?.[0];if(ee){b(ee);const Y=new FileReader;Y.onload=re=>{f(re.target?.result)},Y.readAsDataURL(ee),p(!0)}N.current&&(N.current.value="")},B=async()=>{if(!y||!m.trim()){_({show:!0,message:""}),setTimeout(()=>_({show:!1,message:""}),3e3);return}v(!0);try{await L5(y,m.trim()),await P(),q()}catch(H){console.error("Failed to upload sticker:",H),_({show:!0,message:H.message||""}),setTimeout(()=>_({show:!1,message:""}),5e3)}finally{v(!1)}},q=()=>{p(!1),f(null),g(""),b(null)},G=H=>{t(H),e()},O=async(H,ee)=>{if(H.stopPropagation(),confirm(""))try{await O5(ee),await P()}catch(Y){console.error("Failed to delete sticker:",Y),_({show:!0,message:Y.message||""}),setTimeout(()=>_({show:!1,message:""}),5e3)}},$=async()=>{if(!V.trim()){_({show:!0,message:"URL"}),setTimeout(()=>_({show:!1,message:""}),3e3);return}U(!0),T(null);try{const H=await $5(V.trim());T(H),await P(),H.success===0&&H.failed>0&&(_({show:!0,message:"URL"}),setTimeout(()=>_({show:!1,message:""}),5e3))}catch(H){console.error("Failed to batch import stickers:",H),_({show:!0,message:H.message||""}),setTimeout(()=>_({show:!1,message:""}),5e3)}finally{U(!1)}},K=()=>{D(!1),I(""),T(null)};return r.jsxs(r.Fragment,{children:[r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 bg-transparent z-[1050]",onClick:e}),r.jsxs(me.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{type:"spring",stiffness:400,damping:30},className:`absolute bottom-[70px] right-3 w-[320px] h-[300px] rounded-xl shadow-lg flex flex-col z-[1051] ${n==="light-frosted"?"bg-white/20 backdrop-blur-xl border border-white/20":n==="dark-frosted"?"bg-black/20 backdrop-blur-xl border border-white/10":s?"bg-[#1e1e1e]":"bg-white"}`,onClick:H=>H.stopPropagation(),children:[r.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[16px] ${n==="light-frosted"?"text-[#333]":s||n==="dark-frosted"?"text-white":"text-[#333]"}`,children:M?"":""}),r.jsx("button",{onClick:()=>j(!M),className:`px-3 py-1.5 rounded-lg transition-colors ${M?"bg-[#88A588] text-white":n==="light-frosted"?"bg-white/30 text-[#333] hover:bg-white/40":n==="dark-frosted"?"bg-white/10 text-white hover:bg-white/20":s?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8]"}`,children:r.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[13px]",children:M?"":""})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:r.jsxs("div",{className:"grid grid-cols-[repeat(auto-fill,80px)] gap-2.5 justify-center",children:[!M&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>N.current?.click(),className:`w-20 h-20 rounded-lg flex items-center justify-center cursor-pointer transition-colors ${n==="light-frosted"?"bg-white/20 hover:bg-white/30 active:bg-white/40":n==="dark-frosted"?"bg-white/10 hover:bg-white/20 active:bg-white/30":s?"bg-[#2d2d2d] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#e8e8e8] hover:bg-[#d8d8d8] active:bg-[#c8c8c8]"}`,children:r.jsx(Zn,{className:`w-8 h-8 ${n==="light-frosted"?"text-[#333]":s||n==="dark-frosted"?"text-[#aaa]":"text-[#999]"}`,strokeWidth:2})}),r.jsx("button",{onClick:()=>D(!0),className:`w-20 h-20 rounded-lg flex items-center justify-center cursor-pointer transition-colors ${n==="light-frosted"?"bg-white/20 hover:bg-white/30 active:bg-white/40":n==="dark-frosted"?"bg-white/10 hover:bg-white/20 active:bg-white/30":s?"bg-[#2d2d2d] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#e8e8e8] hover:bg-[#d8d8d8] active:bg-[#c8c8c8]"}`,children:r.jsx(au,{className:`w-8 h-8 ${n==="light-frosted"?"text-[#333]":s||n==="dark-frosted"?"text-[#aaa]":"text-[#999]"}`,strokeWidth:2})})]}),a.map(H=>r.jsxs("div",{className:"relative w-20 h-20 group",children:[r.jsx("button",{onClick:()=>!M&&G(H.id),className:`w-full h-full rounded-lg p-1 transition-colors ${M?"cursor-default":n==="light-frosted"?"cursor-pointer hover:bg-white/30 active:bg-white/40":n==="dark-frosted"?"cursor-pointer hover:bg-white/20 active:bg-white/30":s?"cursor-pointer hover:bg-[#2d2d2d] active:bg-[#3d3d3d]":"cursor-pointer hover:bg-[#f0f0f0] active:bg-[#e8e8e8]"} ${n==="light-frosted"?"bg-white/20":n==="dark-frosted"?"bg-white/5":s?"bg-[#2d2d2d]":"bg-[#f9f9f9]"}`,children:l[H.id]&&r.jsx("img",{src:l[H.id],alt:H.meaning,className:"w-full h-full object-contain"})}),r.jsx("button",{onClick:ee=>O(ee,H.id),className:`absolute -top-1 -right-1 w-5 h-5 bg-[#ff3b30] rounded-full flex items-center justify-center transition-opacity ${M?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:r.jsx(xt,{className:"w-3 h-3 text-white",strokeWidth:3})})]},H.id))]})})]}),r.jsx("input",{ref:N,type:"file",accept:"image/*",className:"hidden",onChange:L}),r.jsx(Be,{children:u&&r.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40",onClick:q}),r.jsxs(me.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[320px] shadow-xl ${n==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":n==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":s?"bg-[#1e1e1e]":"bg-white"}`,children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-4 ${n==="light-frosted"?"text-[#333]":s||n==="dark-frosted"?"text-white":"text-black"}`,children:""}),h&&r.jsx("img",{src:h,alt:"preview",className:`w-[100px] h-[100px] object-cover rounded-lg mx-auto mb-4 ${n==="light-frosted"?"bg-white/50":n==="dark-frosted"?"bg-white/10":s?"bg-[#2d2d2d]":"bg-[#f0f0f0]"}`}),r.jsx("input",{type:"text",value:m,onChange:H=>g(H.target.value),placeholder:"AI(,:)",className:`w-full px-4 py-3 rounded-xl border-none outline-none font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] mb-6 ${n==="light-frosted"?"bg-white/40 text-[#333] placeholder:text-[#999]":n==="dark-frosted"?"bg-white/10 text-white placeholder:text-[#aaa]":s?"bg-[#2d2d2d] text-white placeholder:text-[#666]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999]"}`}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:q,disabled:S,className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors disabled:opacity-50 ${n==="light-frosted"?"bg-white/30 text-[#666] hover:bg-white/40":n==="dark-frosted"?"bg-white/10 text-[#ccc] hover:bg-white/20":s?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),r.jsx("button",{onClick:B,disabled:S,className:"flex-1 py-2.5 rounded-xl bg-[#88A588] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity disabled:opacity-50",children:S?"...":""})]})]})]})}),r.jsx(Be,{children:R&&r.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40",onClick:K}),r.jsxs(me.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[400px] shadow-xl max-h-[80vh] overflow-y-auto ${n==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":n==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":s?"bg-[#1e1e1e]":"bg-white"}`,children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-3 ${n==="light-frosted"?"text-[#333]":s||n==="dark-frosted"?"text-white":"text-black"}`,children:""}),r.jsxs("div",{className:`rounded-xl p-3 mb-4 ${n==="light-frosted"?"bg-white/50":n==="dark-frosted"?"bg-white/10":s?"bg-[#2d2d2d]":"bg-[#f5f5f5]"}`,children:[r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[13px] mb-2 ${n==="light-frosted"?"text-[#333]":s||n==="dark-frosted"?"text-[#aaa]":"text-[#666]"}`,children:""}),r.jsxs("p",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[12px] leading-relaxed ${n==="light-frosted"?"text-[#666]":s||n==="dark-frosted"?"text-[#888]":"text-[#999]"}`,children:["",r.jsx("br",{}),r.jsx("span",{className:"text-[#88A588]",children:"-URL"}),r.jsx("br",{}),r.jsx("br",{}),"",r.jsx("br",{}),"-https://example.com/happy.jpg",r.jsx("br",{}),"-https://example.com/sad.png",r.jsx("br",{}),"-https://example.com/angry.gif"]})]}),r.jsx("textarea",{value:V,onChange:H=>I(H.target.value),placeholder:`-https://example.com/happy.jpg
-https://example.com/sad.png`,className:`w-full px-4 py-3 rounded-xl border-none outline-none font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] mb-4 h-[150px] resize-y ${n==="light-frosted"?"bg-white/40 text-[#333] placeholder:text-[#999]":n==="dark-frosted"?"bg-white/10 text-white placeholder:text-[#aaa]":s?"bg-[#2d2d2d] text-white placeholder:text-[#666]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999]"}`}),W&&r.jsxs("div",{className:`rounded-xl p-4 mb-4 ${n==="light-frosted"?"bg-white/50":n==="dark-frosted"?"bg-white/10":s?"bg-[#2d2d2d]":"bg-[#f9f9f9]"}`,children:[r.jsxs("div",{className:"flex gap-4 mb-2",children:[r.jsxs("p",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-[#88A588]",children:[": ",W.success]}),r.jsxs("p",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-[#ff3b30]",children:[": ",W.failed]})]}),W.errors.length>0&&r.jsxs("div",{className:"max-h-[120px] overflow-y-auto",children:[r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[13px] mb-1 ${n==="light-frosted"?"text-[#333]":s||n==="dark-frosted"?"text-[#aaa]":"text-[#666]"}`,children:""}),r.jsxs("ul",{className:"space-y-1",children:[W.errors.slice(0,5).map((H,ee)=>r.jsxs("li",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[12px] text-[#ff3b30] leading-relaxed",children:[" ",H]},ee)),W.errors.length>5&&r.jsxs("li",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[12px] ${n==="light-frosted"?"text-[#666]":s||n==="dark-frosted"?"text-[#888]":"text-[#999]"}`,children:["...  ",W.errors.length-5," "]})]})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:K,disabled:A,className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors disabled:opacity-50 ${n==="light-frosted"?"bg-white/30 text-[#666] hover:bg-white/40":n==="dark-frosted"?"bg-white/10 text-[#ccc] hover:bg-white/20":s?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),r.jsx("button",{onClick:$,disabled:A,className:"flex-1 py-2.5 rounded-xl bg-[#88A588] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity disabled:opacity-50",children:A?"...":""})]})]})]})}),C.show&&r.jsx("div",{className:"fixed top-16 left-1/2 -translate-x-1/2 z-[1300] px-4 w-full max-w-[90vw]",children:r.jsx("div",{className:"bg-[#ff3b30] rounded-[12px] px-5 py-4 shadow-lg max-w-md mx-auto max-h-[60vh] overflow-y-auto",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-white/20 flex items-center justify-center mt-0.5",children:r.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] text-white mb-1",children:""}),r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] text-white/90 leading-relaxed break-words whitespace-pre-wrap",children:C.message})]})]})})})]})}function sP({onImageSelect:e,onError:t,children:n}){const s=k.useRef(null),a=async l=>{const c=l.target.files?.[0];if(c){if(!c.type.startsWith("image/")){t("");return}if(c.size>10*1024*1024){t("10MB");return}try{const u=await Zm(c,{maxWidth:1024,maxHeight:1024,quality:.85}),p=new File([u],c.name,{type:u.type}),h=`chat-image-${Date.now()}`;await wr(h,p),e(h)}catch(u){console.error("Failed to compress image:",u),t(u.message||"")}finally{s.current&&(s.current.value="")}}},i=()=>{s.current?.click()};return r.jsxs(r.Fragment,{children:[r.jsx("div",{onClick:i,className:"cursor-pointer",children:n}),r.jsx("input",{ref:s,type:"file",accept:"image/*",className:"hidden",onChange:a})]})}function aP({characterId:e,characterName:t,onClose:n}){const[s,a]=k.useState([]),[i,l]=k.useState(""),c=k.useRef(!0);k.useEffect(()=>(c.current=!0,()=>{c.current=!1}),[]);const[u,p]=k.useState(()=>We.chatSettings?.userAvatar||null),[h,f]=k.useState(()=>We.characters?.find(_e=>_e.id===e)?.avatar||null),[m,g]=k.useState(()=>We.chatSettings?.chatBackground||null),[y,b]=k.useState(null),[S,v]=k.useState(null),[N,C]=k.useState(null),[_,R]=k.useState(()=>We.chatSettings?.userNickname||We.userData?.name||""),[D,V]=k.useState(!1),[I,A]=k.useState(()=>We.chatSettingsDetail?.[e]?.remark||t),[U,W]=k.useState(()=>We.chatSettings?.bubbleStyles?.user||`background: linear-gradient(75deg, rgba(172, 188, 166, 1), rgba(172, 188, 166, 1), rgba(172, 188, 166, 1));
color: #ffffff;
border-radius: 8px;
padding: 0.625rem 0.875rem;
max-width: 70vw;`),[T,M]=k.useState(()=>We.chatSettings?.bubbleStyles?.character||`background: linear-gradient(-75deg, rgba(245, 245, 245, 1), rgba(245, 245, 245, 1), rgba(245, 245, 245, 1));
color: #333333;
border-radius: 8px;
padding: 0.625rem 0.875rem;
max-width: 70vw;`),[j,P]=k.useState(()=>We.chatSettings?.bubbleStyles?.userQuote||`background: #9BAD96;
color: rgba(255, 255, 255, 0.8);
border-radius: 4px;
padding: 0.5rem;
margin-bottom: 0.5rem;`),[L,B]=k.useState(()=>We.chatSettings?.bubbleStyles?.characterQuote||`background: #e8e8e8;
color: #666666;
border-radius: 4px;
padding: 0.5rem;
margin-bottom: 0.5rem;`),[q,G]=k.useState(()=>We.chatSettings?.customCSS),[O,$]=k.useState(()=>We.chatSettings?.timestampStyle||"default"),[K,H]=k.useState([]),[ee,Y]=k.useState(null),[re,de]=k.useState(()=>We.chatSettings?.darkMode||!1),[X,oe]=k.useState(()=>We.chatSettings?.theme||(We.chatSettings?.darkMode?"dark":"light"));k.useEffect(()=>{const ke=()=>{const xe=We.chatSettings;de(xe?.darkMode||!1),oe(xe?.theme||(xe?.darkMode?"dark":"light"))};return window.addEventListener("chat-settings-updated",ke),(async()=>{if(!We.chatSettings)try{const xe=await se.get(J.CHATS,"chat_settings");xe&&(We.chatSettings=xe,xe.darkMode!==void 0&&de(xe.darkMode),oe(xe.theme||(xe.darkMode?"dark":"light")),xe.userAvatar&&p(xe.userAvatar),xe.chatBackground&&g(xe.chatBackground),xe.bubbleStyles&&(W(xe.bubbleStyles.user),M(xe.bubbleStyles.character),P(xe.bubbleStyles.userQuote),B(xe.bubbleStyles.characterQuote)),xe.customCSS!==void 0&&G(xe.customCSS),xe.timestampStyle&&$(xe.timestampStyle))}catch(xe){console.error("Failed to load global chat settings in PrivateChat",xe)}})(),()=>window.removeEventListener("chat-settings-updated",ke)},[]),k.useEffect(()=>{const ke=_e=>{_e.detail&&_e.detail.characterId===e&&(console.log("[PrivateChat] ..."),se.get(J.CHARACTERS,"characters").then(xe=>{const ot=xe?.find(st=>st.id===e);if(ot&&(Y(ot),We.characters)){const st=We.characters.findIndex(ft=>ft.id===e);st!==-1&&(We.characters[st]=ot)}}))};return window.addEventListener("character-memories-updated",ke),()=>window.removeEventListener("character-memories-updated",ke)},[e]);const[ye,be]=k.useState(!1);k.useRef(null);const Ie=k.useRef(null),De=k.useRef(!0),F=k.useRef(null),le=k.useRef(!1),Z=k.useRef([]),[te,ne]=k.useState(!1),[ae,we]=k.useState(null),[Ce,ue]=k.useState({x:0,y:0}),[pe,je]=k.useState(!1),[Ne,he]=k.useState(""),[Ee,Re]=k.useState(null),qe=k.useRef(null),[Ye,nt]=k.useState({show:!1,message:""}),[ce,Te]=k.useState(!1),[Me,Oe]=k.useState(new Set),[Ke,Ze]=k.useState(!1),[pt,ht]=k.useState(!1),[jt,Ht]=k.useState(""),[Lt,Kt]=k.useState(!1),[it,Pt]=k.useState({}),[Ot,kt]=k.useState(0),[gn,Xt]=k.useState(0),[Ut,kr]=k.useState({}),[$t,an]=k.useState(null),[Cn,Kn]=k.useState(null),[ks,Os]=k.useState(!1),[Fl,yo]=k.useState(""),[Rl,Fr]=k.useState(""),[Bl,vo]=k.useState(0),[wu,ku]=k.useState(new Set);k.useEffect(()=>{(async()=>{if(u)if(u.startsWith("data:"))b(u);else{const _e=await Ct(u);b(_e)}else b(null);if(h)if(h.startsWith("data:"))v(h);else{const _e=await Ct(h);v(_e)}else v(null);if(m)if(m.startsWith("data:"))C(m);else{const _e=await Ct(m);C(_e)}else C(null)})()},[u,h,m]),k.useEffect(()=>{(async()=>{const _e={},xe=await ni(),ot=new Map(xe.map(st=>[st.id,st]));for(const st of Z.current)if(st.stickerId&&!it[st.stickerId]){const ft=ot.get(st.stickerId);if(ft){if(ft.imageUrl)_e[st.stickerId]=ft.imageUrl;else if(ft.imageKey){const ut=await e0(ft.imageKey);ut&&(_e[st.stickerId]=ut)}}}Object.keys(_e).length>0&&Pt(st=>({...st,..._e}))})()},[s]),k.useEffect(()=>{(async()=>{const _e={};for(const xe of Z.current)if(xe.imageKey&&!Ut[xe.imageKey]){const ot=await Ct(xe.imageKey);ot&&(_e[xe.imageKey]=ot)}Object.keys(_e).length>0&&kr(xe=>({...xe,..._e}))})()},[s]);const $s=ke=>{const _e=ke.getHours().toString().padStart(2,"0"),xe=ke.getMinutes().toString().padStart(2,"0");return`${_e}:${xe}`},wa=ke=>{const _e={};return ke&&ke.split(";").filter(ot=>ot.trim()).forEach(ot=>{const[st,ft]=ot.split(":").map(ut=>ut.trim());if(st&&ft){const ut=st.replace(/-([a-z])/g,_t=>_t[1].toUpperCase());_e[ut]=ft}}),_e},zl=(ke,_e)=>ke.getFullYear()===_e.getFullYear()&&ke.getMonth()===_e.getMonth()&&ke.getDate()===_e.getDate(),Su=ke=>{const _e=ke.getFullYear(),xe=(ke.getMonth()+1).toString().padStart(2,"0"),ot=ke.getDate().toString().padStart(2,"0");return`${_e}/${xe}/${ot}`},ka=k.useMemo(()=>{const ke=[],_e=s.filter(xe=>!xe.isImageRecognition);return _e.forEach((xe,ot)=>{(ot===0||!zl(xe.timestamp,_e[ot-1].timestamp))&&ke.push({type:"date",date:Su(xe.timestamp),id:`date-${xe.timestamp.getTime()}`});const ft=xe.senderId==="user"&&_e.slice(ot+1).some(ut=>ut.senderId==="character");ke.push({type:"message",message:xe,isUserMessageRead:ft})}),ke},[s,Ot]),Wt=_5({count:ka.length,getScrollElement:()=>Ie.current,estimateSize:ke=>{const _e=ka[ke];if(_e?.type==="date")return 30;if(_e?.type==="message"){const xe=_e.message;return xe.imageKey||xe.stickerId||xe.order?280:80}return 80},overscan:10});k.useEffect(()=>{Z.current.length>0&&!le.current&&(si(),Z.current.some(_e=>_e.senderId==="character"&&!_e.isRead)?(le.current=!0,Z.current=Z.current.map(_e=>_e.senderId==="character"?{..._e,isRead:!0}:_e),Fn(Z.current),a([...Z.current])):le.current=!0)},[Z.current.length]),k.useLayoutEffect(()=>{ka.length!==0&&(De.current?requestAnimationFrame(()=>{Wt.getTotalSize()>0&&Ie.current&&(Ie.current.scrollTop=Ie.current.scrollHeight,De.current=!1)}):requestAnimationFrame(()=>{Ie.current&&(Ie.current.scrollTop=Ie.current.scrollHeight)}))},[ka.length]),k.useEffect(()=>{De.current=!0,F.current=null,le.current=!1;const ke=async()=>{try{const ft=We.messages[e];if(ft&&ft.length>0&&(Z.current=ft,a([...ft])),We.chatSettings){const Qe=We.chatSettings;Qe.userAvatar!==void 0&&p(Qe.userAvatar),Qe.chatBackground!==void 0&&g(Qe.chatBackground),Qe.userNickname!==void 0&&R(Qe.userNickname),Qe.bubbleStyles?.user&&W(Qe.bubbleStyles.user),Qe.bubbleStyles?.character&&M(Qe.bubbleStyles.character),Qe.bubbleStyles?.userQuote&&P(Qe.bubbleStyles.userQuote),Qe.bubbleStyles?.characterQuote&&B(Qe.bubbleStyles.characterQuote),Qe.customCSS!==void 0&&G(Qe.customCSS),Qe.timestampStyle&&$(Qe.timestampStyle)}const ut=We.chatSettingsDetail[e];if(ut&&ut.remark!==void 0&&A(ut.remark),We.userData&&!We.chatSettings?.userNickname&&R(We.userData.name||""),We.characters){const Qe=We.characters.find(vt=>vt.id===e);Qe&&(f(Qe.avatar),Y(Qe))}const _t=[se.get(J.CHAT_MESSAGES,`chat_messages_${e}`),se.get(J.CHAT_SETTINGS,`chat_detail_settings_${e}`)];bD()?(_t.push(Promise.resolve(We.chatSettings)),_t.push(Promise.resolve(We.userData)),_t.push(Promise.resolve(We.characters))):(_t.push(se.get(J.CHATS,"chat_settings").then(Qe=>(We.chatSettings=Qe,Qe))),_t.push(se.get(J.USER_DATA,"userData").then(Qe=>(We.userData=Qe,Qe))),_t.push(se.get(J.CHARACTERS,"characters").then(Qe=>(We.characters=Qe,We.lastUpdate=Date.now(),Qe))));const[hn,lt,gt,qt,En]=await Promise.all(_t),tn=await se.get(J.USER_DATA,"balance");tn!=null&&vo(tn);const wt={};if(hn&&hn.length>0){const Qe=hn.map(Mt=>({...Mt,timestamp:new Date(Mt.timestamp)}));(!ft||ft.length!==Qe.length||Qe.length>0&&ft.length>0&&Qe[Qe.length-1].id!==ft[ft.length-1].id)&&(We.messages[e]=Qe,Z.current=Qe,wt.messages=Qe)}else(!ft||ft.length>0)&&(wt.messages=[],We.messages[e]=[],Z.current=[]);if(gt){gt.userAvatar!==u&&(wt.userAvatarKey=gt.userAvatar),gt.chatBackground!==m&&(wt.chatBackgroundKey=gt.chatBackground);const Qe=gt.userNickname||"";Qe!==_&&(wt.userNickname=Qe),gt.bubbleStyles?.user&&W(gt.bubbleStyles.user),gt.bubbleStyles?.character&&M(gt.bubbleStyles.character),gt.bubbleStyles?.userQuote&&P(gt.bubbleStyles.userQuote),gt.bubbleStyles?.characterQuote&&B(gt.bubbleStyles.characterQuote),gt.customCSS!==void 0&&G(gt.customCSS),gt.timestampStyle!==O&&$(gt.timestampStyle||"default")}else if(qt){const Qe=qt.name||"";Qe!==_&&(wt.userNickname=Qe)}else _!==""&&(wt.userNickname="");lt&&(We.chatSettingsDetail[e]=lt);let Rn=t;if(En){const Qe=En.find(vt=>vt.id===e);Qe&&(Rn=Qe.name)}let Gt=lt?.remark;if((!Gt||!Gt.trim())&&(Rn&&Rn!==""?Gt=Rn:t&&t!==""?Gt=t:Gt=I||""),Gt&&Gt!==I&&(wt.displayName=Gt),(!lt||!lt.remark)&&Gt&&Gt!==""){const Qe={...lt||{},remark:Gt,isPinned:lt?.isPinned||!1,background:lt?.background};se.set(J.CHAT_SETTINGS,`chat_detail_settings_${e}`,Qe).then(()=>{We.chatSettingsDetail||(We.chatSettingsDetail={}),We.chatSettingsDetail[e]=Qe,console.log("[PrivateChat] Auto-fixed missing remark with:",Gt)}).catch(vt=>{console.warn("[PrivateChat] Failed to auto-save remark:",vt)})}if(En){const Qe=En.find(vt=>vt.id===e);Qe&&(Qe.avatar!==h&&(wt.characterAvatarKey=Qe.avatar),(!ee||Qe.id!==ee?.id||Qe.name!==ee?.name)&&(wt.character=Qe))}wt.messages!==void 0&&a(wt.messages),wt.userAvatarKey!==void 0&&p(wt.userAvatarKey),wt.chatBackgroundKey!==void 0&&g(wt.chatBackgroundKey),wt.userNickname!==void 0&&R(wt.userNickname),wt.displayName!==void 0&&A(wt.displayName),wt.characterAvatarKey!==void 0&&f(wt.characterAvatarKey),wt.character!==void 0&&Y(wt.character),F.current=e}catch(ft){console.error("Failed to load chat data:",ft)}};ke();const _e=async()=>{a([]),Z.current=[],We.messages[e]=[];try{await se.delete(J.MISC,`last_extraction_index_${e}`)}catch(ft){console.error("Failed to clear extraction index:",ft)}},xe=()=>{Ep(),ke()};window.addEventListener("chat-messages-cleared",_e),window.addEventListener("chat-settings-updated",xe);const ot=ft=>{const{type:ut,payload:_t}=ft.data;if(ut==="AI_TASK_COMPLETED"){if(console.log("[PrivateChat]  AI :",_t),_t.characterId===e){const hn=_t.messages.map(gt=>({...gt,timestamp:new Date(gt.timestamp)}));if(hn.some(gt=>gt.senderId==="system"&&gt.text.includes(""))){for(let gt=Z.current.length-1;gt>=0;gt--){const qt=Z.current[gt];if(qt.senderId==="user"&&qt.redPacket&&!qt.redPacket.opened){Z.current[gt]={...qt,redPacket:{...qt.redPacket,opened:!0}};break}}a([...Z.current])}Z.current=[...Z.current,...hn],Fn(Z.current),Xn(Z.current),document.hidden||!c.current?c.current&&(a([...Z.current]),be(!1)):(async()=>{for(let qt=0;qt<hn.length;qt++){if(!c.current)return;if(document.hidden){a(wt=>{const Gt=hn.slice(qt).filter(Qe=>!wt.some(vt=>vt.id===Qe.id));return[...wt,...Gt]}),be(!1);return}const En=qt===0?600:1e3+Math.random()*800;if(await new Promise(wt=>setTimeout(wt,En)),!c.current)return;const tn=hn[qt];a(wt=>wt.some(Rn=>Rn.id===tn.id)?wt:[...wt,tn]),qt===0&&be(!1)}c.current&&be(!1)})()}}else ut==="AI_TASK_FAILED"&&(console.error("[PrivateChat] AI :",_t),_t.characterId===e&&(nt({show:!0,message:`AI: ${_t.error}`}),setTimeout(()=>nt({show:!1,message:""}),5e3),be(!1)))},st=async ft=>{const ut=ft,{taskId:_t,task:hn}=ut.detail;if(console.log("[PrivateChat] Service Worker :",_t),hn.chatId===e){if(hn.type==="memory_extraction"){console.log("[] ...");try{const{payload:lt}=hn,gt=await fetch(`${lt.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${lt.apiKey}`},body:JSON.stringify({model:lt.modelName,messages:[{role:"system",content:lt.systemPrompt},{role:"user",content:lt.userPrompt}],temperature:lt.temperature,max_tokens:lt.maxTokens})});if(!gt.ok)throw new Error(`API Error: ${gt.status}`);const qt=await gt.json();if(qt.error)throw new Error(`API Error Details: ${JSON.stringify(qt.error)}`);const En=qt.choices?.[0]?.message?.content;if(!En)throw console.error("[] :",qt),new Error("Empty response from AI (check console for details)");const tn=R5(En,lt.referenceDate);await B5(e,tn)}catch(lt){console.error("[] ",lt),window.dispatchEvent(new CustomEvent("memory-extraction-failed",{detail:{characterId:e,error:lt.message}}))}return}try{const{payload:lt}=hn;let gt=[{role:"system",content:lt.systemPrompt},{role:"user",content:lt.userPrompt}];if(lt.pendingImageBase64&&lt.imageRecognitionPrompt){console.log("[] ...");const vt=await fetch(`${lt.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${lt.apiKey}`},body:JSON.stringify({model:lt.modelName,messages:[{role:"user",content:[{type:"text",text:lt.imageRecognitionPrompt},{type:"image_url",image_url:{url:lt.pendingImageBase64}}]}],temperature:.7,max_tokens:500})});if(!vt.ok)throw new Error("");const Jn=(await vt.json()).choices?.[0]?.message?.content||"";console.log("[] :",Jn),gt=[gt[0],{role:"user",content:gt[1].content+`

[: ${Jn}]`}]}const qt=await fetch(`${lt.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${lt.apiKey}`},body:JSON.stringify({model:lt.modelName,messages:gt,temperature:lt.temperature,max_tokens:lt.maxTokens})});if(!qt.ok)throw new Error(`AI API : ${qt.status}`);const En=await qt.json();if(En.error)throw new Error(`API Error Details: ${JSON.stringify(En.error)}`);const tn=En.choices?.[0]?.message?.content||"";if(!tn)throw console.error("[] :",En),new Error("AI (check console)");console.log("[] AI :",tn);let wt,Rn=[];try{wt=JSON.parse(tn),Rn=wt.messages||[]}catch{console.log("[]  JSON...");try{const Mt=tn.match(/```(?:json)?\s*(\{[\s\S]*?\})\s*```/);if(Mt)wt=JSON.parse(Mt[1]),Rn=wt.messages||[];else{const Jn=tn.indexOf("{");if(Jn===-1)throw new Error(" JSON ");let Xr=0,Bn=-1;for(let Br=Jn;Br<tn.length;Br++)if(tn[Br]==="{"&&Xr++,tn[Br]==="}"&&Xr--,Xr===0){Bn=Br+1;break}if(Bn===-1)throw new Error("JSON ");const Ss=tn.substring(Jn,Bn);wt=JSON.parse(Ss),Rn=wt.messages||[]}}catch(Mt){throw console.error("[] JSON :",Mt.message),console.error("[] AI :",tn),new Error(`AI: ${Mt.message}`)}}if(Rn.length===0)throw new Error("AI");console.log("[] :",Rn);const Gt=Rn.map((vt,Mt)=>{if(vt.sender==="system")return{id:`${Date.now()}-${Mt}`,text:vt.content,senderId:"system",senderName:"",timestamp:new Date,isRead:!0};if(vt.isPlaceholderImage){const Xr=(vt.content||"").slice(0,100);return{id:`${Date.now()}-${Mt}`,text:Xr,senderId:"character",senderName:I,timestamp:new Date,isPlaceholderImage:!0,isRead:!0}}if(vt.redPacket)return{id:`${Date.now()}-${Mt}`,text:"[]",senderId:"character",senderName:I,timestamp:new Date,redPacket:{amount:vt.redPacket.amount,blessing:vt.redPacket.blessing,opened:!1},isRead:!0};const Jn={id:`${Date.now()}-${Mt}`,text:vt.stickerId?"[]":vt.content||"",senderId:"character",senderName:I,timestamp:new Date,isRead:!0};return vt.stickerId&&(Jn.stickerId=vt.stickerId),vt.quote&&(Jn.quote={sender:vt.quote.sender,content:vt.quote.content}),Jn});if(Gt.some(vt=>vt.senderId==="system"&&vt.text.includes(""))){for(let vt=Z.current.length-1;vt>=0;vt--){const Mt=Z.current[vt];if(Mt.senderId==="user"&&Mt.redPacket&&!Mt.redPacket.opened){Z.current[vt]={...Mt,redPacket:{...Mt.redPacket,opened:!0}};break}}a([...Z.current])}Z.current=[...Z.current,...Gt],await Fn(Z.current),await Xn(Z.current),document.hidden||!c.current?c.current&&(a([...Z.current]),be(!1)):(async()=>{for(let Mt=0;Mt<Gt.length;Mt++){if(!c.current)return;if(document.hidden){a(Bn=>{const Br=Gt.slice(Mt).filter(ql=>!Bn.some(Jr=>Jr.id===ql.id));return[...Bn,...Br]}),be(!1);return}const Jn=Mt===0?600:1e3+Math.random()*800;if(await new Promise(Bn=>setTimeout(Bn,Jn)),!c.current)return;const Xr=Gt[Mt];a(Bn=>Bn.some(Ss=>Ss.id===Xr.id)?Bn:[...Bn,Xr]),Mt===0&&be(!1)}c.current&&be(!1)})()}catch(lt){console.error("[PrivateChat]  AI :",lt),nt({show:!0,message:`AI: ${lt.message}`}),setTimeout(()=>nt({show:!1,message:""}),5e3),be(!1)}}};return"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.addEventListener("message",ot),window.addEventListener("ai-task-needs-fallback",st),()=>{window.removeEventListener("chat-messages-cleared",_e),window.removeEventListener("chat-settings-updated",xe),window.removeEventListener("ai-task-needs-fallback",st),"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener("message",ot),qe.current&&clearTimeout(qe.current),Sa.current&&clearTimeout(Sa.current)}},[e]);const Sa=k.useRef(null),Vs=()=>{Sa.current&&clearTimeout(Sa.current),Sa.current=setTimeout(()=>{kt(ke=>ke+1)},100)},Fn=async ke=>{try{const _e=`chat_messages_${e}`;await se.set(J.CHAT_MESSAGES,_e,ke),We.messages[e]=ke}catch(_e){console.error("Failed to save messages:",_e)}},si=async()=>{try{const ke=await se.get(J.CHATS,"chat_list")||[],_e=ke.findIndex(xe=>xe.id===e);_e!==-1&&ke[_e].unread&&(delete ke[_e].unread,await se.set(J.CHATS,"chat_list",ke))}catch(ke){console.error("Failed to clear unread count:",ke)}},Xn=async ke=>{try{let _e=await se.get(J.CHATS,"chat_list")||[];const xe=_e.findIndex(lt=>lt.id===e),ot=new Date,st=`${ot.getHours().toString().padStart(2,"0")}:${ot.getMinutes().toString().padStart(2,"0")}`;let ft="",ut="";if(ke.length>0){const lt=ke[ke.length-1];lt.senderId==="character"?ut=I:ut=_,ft=lt.text}let _t=t;if(ee?.name&&ee.name!=="")_t=ee.name;else if(!_t||_t===""){const lt=We.characters?.find(gt=>gt.id===e);lt?.name&&lt.name!==""&&(_t=lt.name)}const hn={id:e,name:_t||"",lastMessage:ft,lastSender:ut,time:st,timestamp:ot.getTime()};if(xe!==-1){const lt=_e[xe];hn.isPinned=lt.isPinned,hn.remark=lt.remark,_e[xe]=hn}else _e.unshift(hn);await se.set(J.CHATS,"chat_list",_e)}catch(_e){console.error("Failed to update chat list:",_e)}},wo=()=>{if(i.trim()){const ke={id:Date.now().toString(),text:i.trim(),senderId:"user",senderName:_,timestamp:new Date};if(Ee){let _e=Ee.text;Ee.isPlaceholderImage||Ee.imageUrl||Ee.imageKey?_e="[]":Ee.stickerId&&(_e="[]"),ke.quote={sender:Ee.senderId==="user"?_:I,content:_e}}Z.current=[...Z.current,ke],a([...Z.current]),Fn(Z.current),Xn(Z.current),l(""),Re(null)}},ai=ke=>{ke.key==="Enter"&&!ke.shiftKey&&(ke.preventDefault(),wo())},Sr=async ke=>{const _e={id:Date.now().toString(),text:"[]",senderId:"user",senderName:_,timestamp:new Date,stickerId:ke};Z.current=[...Z.current,_e],a([...Z.current]),Fn(Z.current),Xn(Z.current),Kt(!1),Ze(!1)},Ll=()=>{if(!jt.trim())return;const ke={id:Date.now().toString(),text:jt.trim(),senderId:"user",senderName:_,timestamp:new Date,isPlaceholderImage:!0};Z.current=[...Z.current,ke],a([...Z.current]),Fn(Z.current),Xn(Z.current),ht(!1),Ht("")},[Vt,ii]=k.useState(null),Ol=(ke,_e)=>r.jsxs("div",{className:"w-[240px] overflow-hidden rounded-lg select-none cursor-pointer active:opacity-90 transition-opacity",onClick:async xe=>{if(xe.stopPropagation(),_e.senderId==="character"&&!ke.opened){const ot=Bl+ke.amount;vo(ot),await se.set(J.USER_DATA,"balance",ot);const st=Z.current.map(ut=>ut.id===_e.id?{...ut,redPacket:{...ut.redPacket,opened:!0}}:ut),ft={id:`${Date.now()}-system`,text:`${I}`,senderId:"system",senderName:"",timestamp:new Date,isRead:!0};st.push(ft),Z.current=st,a([...st]),await Fn(st),Xn(st);try{const ut={id:_e.id,type:"receive",amount:ke.amount,timestamp:Date.now(),partnerName:t,blessing:ke.blessing};let _t=await se.get(J.USER_DATA,"asset_transactions")||[];_t.push(ut),await se.set(J.USER_DATA,"asset_transactions",_t)}catch(ut){console.error("Failed to record transaction",ut)}ii({..._e,redPacket:{...ke,opened:!0}})}else ii(_e)},children:[r.jsxs("div",{className:"bg-[#ea5e4f] p-4 flex items-center gap-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsxs("div",{className:"w-[36px] h-[52px] bg-[#f4d03f] rounded-[18px] border-2 border-[#e6b333] flex flex-col items-center justify-center gap-[5px] relative",children:[r.jsx("div",{className:"w-[20px] h-[2px] bg-[#dba830] rounded-full opacity-80"}),r.jsx("div",{className:"w-[20px] h-[2px] bg-[#dba830] rounded-full opacity-80"}),r.jsx("div",{className:"w-[20px] h-[2px] bg-[#dba830] rounded-full opacity-80"}),r.jsx("div",{className:"w-[20px] h-[2px] bg-[#dba830] rounded-full opacity-80"}),r.jsx("div",{className:"w-[20px] h-[2px] bg-[#dba830] rounded-full opacity-80"})]})}),r.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center text-white",children:[r.jsx("p",{className:"text-[15px] font-medium leading-snug truncate mb-1",children:ke.blessing}),r.jsx("p",{className:"text-[12px] opacity-85 font-normal",children:ke.opened?"":""})]})]}),r.jsx("div",{className:"bg-white px-4 py-2 border-t border-black/5",children:r.jsx("p",{className:"text-[#999] text-[11px] tracking-wide",children:""})})]}),$l=ke=>{const _e=Array.isArray(ke.items)?ke.items:[],xe=_e.reduce((ot,st)=>ot+(st.count||0),0);return r.jsxs("div",{className:"w-[240px] bg-[#F9F9F7] rounded-xl overflow-hidden shadow-sm border border-black/5 relative select-none cursor-default",children:[r.jsx("div",{className:"h-1.5 bg-[repeating-linear-gradient(45deg,#E5E5E0,#E5E5E0_10px,#F9F9F7_10px,#F9F9F7_20px)] opacity-60"}),r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-white rounded-lg border border-black/5 flex items-center justify-center text-[#2D2D2D] shadow-sm",children:r.jsx(Za,{className:"w-5 h-5",strokeWidth:1.5})}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-sm font-medium text-[#2D2D2D] tracking-wide",children:""}),r.jsxs("span",{className:"text-[10px] text-[#9CA3AF] font-mono tracking-widest",children:["NO.",ke.id?ke.id.slice(-6).toUpperCase():"------"]})]})]}),r.jsx("div",{className:"bg-white rounded-lg border border-black/5 p-3 mb-3 relative overflow-hidden",children:r.jsxs("div",{className:"space-y-2",children:[_e.slice(0,3).map((ot,st)=>r.jsxs("div",{className:"flex justify-between items-center text-xs pb-2 last:pb-0",children:[r.jsx("span",{className:"text-[#2D2D2D] font-medium truncate pr-2 max-w-[140px]",children:ot.name}),r.jsxs("span",{className:"text-[#9CA3AF] font-mono whitespace-nowrap",children:["x",ot.count]})]},st)),_e.length>3&&r.jsxs("div",{className:"text-[10px] text-[#9CA3AF] pt-2 text-center",children:["... ",xe," "]})]})}),r.jsxs("div",{className:"pt-2 flex justify-between items-end",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[10px] text-[#9CA3AF] mb-0.5 tracking-wider",children:""}),r.jsxs("div",{className:"flex items-center gap-1.5 h-[20px]",children:[r.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-[#C93A40]"}),r.jsx("span",{className:"text-xs font-medium text-[#2D2D2D] truncate max-w-[80px]",children:ke.recipient})]})]}),r.jsxs("div",{className:"flex flex-col items-end",children:[r.jsx("span",{className:"text-[10px] text-[#9CA3AF] mb-0.5 tracking-wider",children:""}),r.jsxs("div",{className:"flex items-baseline gap-1 h-[20px]",children:[r.jsx("span",{className:"text-lg font-mono font-light text-[#2D2D2D]",children:(ke.total||0).toLocaleString()}),r.jsx("span",{className:"text-[10px] text-[#9CA3AF]",children:""})]})]})]})]})]})},oi=async()=>{const ke=parseInt(Fl);if(!ke||ke<=0){nt({show:!0,message:""}),setTimeout(()=>nt({show:!1,message:""}),3e3);return}const _e=Rl.trim()||"",xe={id:Date.now().toString(),text:"[]",senderId:"user",senderName:_,timestamp:new Date,redPacket:{amount:ke,blessing:_e,opened:!1}};Z.current=[...Z.current,xe],a([...Z.current]),Fn(Z.current),Xn(Z.current);try{const ot={id:xe.id,type:"send",amount:ke,timestamp:Date.now(),partnerName:t,blessing:_e};let st=await se.get(J.USER_DATA,"asset_transactions")||[];st.push(ot),await se.set(J.USER_DATA,"asset_transactions",st)}catch(ot){console.error("Failed to record transaction",ot)}Os(!1),yo(""),Fr(""),Ze(!1)},li=async ke=>{try{if(!await Ct(ke)){nt({show:!0,message:""}),setTimeout(()=>nt({show:!1,message:""}),3e3);return}const xe=ke.replace("_chat_image",""),ot=await Ct(xe);if(ot){const ut=await(await fetch(ot)).blob(),_t=new File([ut],`image_${Date.now()}.jpg`,{type:ut.type});an(_t)}const st={id:Date.now().toString(),text:"",senderId:"user",senderName:_||"",timestamp:new Date,imageKey:ke};Z.current.push(st),a([...Z.current]),await Fn(Z.current),await Xn(Z.current),Ze(!1)}catch(_e){console.error(":",_e),nt({show:!0,message:""}),setTimeout(()=>nt({show:!1,message:""}),3e3)}},ja=async()=>{if(!ye){be(!0);try{if(i.trim()){const _e={id:Date.now().toString(),text:i.trim(),senderId:"user",senderName:_,timestamp:new Date};if(Ee){let xe=Ee.text;Ee.isPlaceholderImage||Ee.imageUrl||Ee.imageKey?xe="[]":Ee.stickerId&&(xe="[]"),_e.quote={sender:Ee.senderId==="user"?_:I,content:xe}}Z.current=[...Z.current,_e],a([...Z.current]),await Fn(Z.current),await Xn(Z.current),l(""),Re(null)}const ke=await M5({characterId:e,character:ee||{id:e,name:t,description:"",manifestDate:void 0},userNickname:_,displayName:I,allMessages:Z.current,tempActiveMemoryIds:Array.from(wu)},$t);console.log("[PrivateChat] AI :",ke),$t&&an(null)}catch(ke){console.error("[PrivateChat] :",ke),nt({show:!0,message:`AI: ${ke.message}`}),setTimeout(()=>nt({show:!1,message:""}),5e3),be(!1)}}},ci=async()=>{try{let ke=await se.get(J.CHATS,"chat_list")||[];if(ke.findIndex(xe=>xe.id===e)===-1&&s.length===0){const xe=new Date,ot=`${xe.getHours().toString().padStart(2,"0")}:${xe.getMinutes().toString().padStart(2,"0")}`,st={id:e,name:t,lastMessage:"",lastSender:"",time:ot,timestamp:xe.getTime()};ke.unshift(st),await se.set(J.CHATS,"chat_list",ke)}n()}catch(ke){console.error("Failed to save chat list:",ke),n()}},Hs=(ke,_e)=>{if(ce){di(ke.id);return}const xe="touches"in _e?_e.touches[0]:_e;qe.current=setTimeout(()=>{we(ke),ue({x:xe.clientX,y:xe.clientY}),ne(!0)},500)},Rr=()=>{qe.current&&(clearTimeout(qe.current),qe.current=null)},ko=()=>{if(ae){const ke=ae.text;navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(ke).then(()=>{console.log("")}).catch(()=>{So(ke)}):So(ke),ne(!1),we(null)}},So=ke=>{const _e=document.createElement("textarea");_e.value=ke,_e.style.position="fixed",_e.style.top="0",_e.style.left="0",_e.style.width="2em",_e.style.height="2em",_e.style.padding="0",_e.style.border="none",_e.style.outline="none",_e.style.boxShadow="none",_e.style.background="transparent",document.body.appendChild(_e),_e.focus(),_e.select();try{document.execCommand("copy")&&console.log("fallback")}catch(xe){console.error(":",xe)}document.body.removeChild(_e)},jo=async()=>{if(ae){const ke=Z.current.findIndex(_e=>_e.id===ae.id);if(Z.current=Z.current.filter(_e=>_e.id!==ae.id),ke!==-1)try{const _e=await se.get(J.MISC,`last_extraction_index_${e}`)||0;ke<_e&&await se.set(J.MISC,`last_extraction_index_${e}`,_e-1)}catch(_e){console.error("Failed to update extraction index after deletion:",_e)}ne(!1),we(null),setTimeout(()=>{a([...Z.current]),Fn(Z.current),Xn(Z.current),requestAnimationFrame(()=>{requestAnimationFrame(()=>{Xt(_e=>_e+1)})})},0)}},Ca=()=>{Te(!0),ne(!1),we(null)},ju=()=>{Te(!1),Oe(new Set)},di=ke=>{Oe(_e=>{const xe=new Set(_e);return xe.has(ke)?xe.delete(ke):xe.add(ke),xe})},Rt=async()=>{if(Me.size!==0){try{const ke=await se.get(J.MISC,`last_extraction_index_${e}`)||0,_e=Z.current.filter((xe,ot)=>Me.has(xe.id)&&ot<ke).length;_e>0&&await se.set(J.MISC,`last_extraction_index_${e}`,ke-_e)}catch(ke){console.error("Failed to update extraction index after batch deletion:",ke)}Z.current=Z.current.filter(ke=>!Me.has(ke.id)),Te(!1),Oe(new Set),setTimeout(()=>{a([...Z.current]),Fn(Z.current),Xn(Z.current),requestAnimationFrame(()=>{requestAnimationFrame(()=>{Xt(ke=>ke+1)})})},0)}},Vl=()=>{ae&&(he(ae.text),je(!0),ne(!1))},Hl=()=>{ae&&Ne.trim()&&(Z.current=Z.current.map(ke=>ke.id===ae.id?{...ke,text:Ne}:ke),je(!1),we(null),he(""),setTimeout(()=>{a([...Z.current]),Fn(Z.current),Xn(Z.current),requestAnimationFrame(()=>{requestAnimationFrame(()=>{Xt(ke=>ke+1)})})},0))},ui=()=>{je(!1),we(null),he("")},Ul=()=>{ae&&(Re(ae),ne(!1),we(null))},Wl=()=>{Re(null)},Kl=()=>{V(!1),Ep(),(async()=>{try{const[_e,xe,ot]=await Promise.all([se.get(J.CHAT_MESSAGES,`chat_messages_${e}`),se.get(J.CHATS,"chat_settings"),se.get(J.CHAT_SETTINGS,`chat_detail_settings_${e}`)]);if(_e&&_e.length>0){const st=_e.map(ft=>({...ft,timestamp:new Date(ft.timestamp)}));Z.current=st,We.messages[e]=st,a([...st])}else a([]),Z.current=[],We.messages[e]=[];if(xe&&(We.chatSettings=xe,xe.chatBackground&&xe.chatBackground!==m&&g(xe.chatBackground)),ot){We.chatSettingsDetail[e]=ot;const st=ot.remark||t;st!==I&&A(st)}else t!==I&&A(t)}catch(_e){console.error("Failed to reload data:",_e)}})()};return k.useEffect(()=>{F.current===e&&s.length>0&&F5(e,s).catch(ke=>{console.error("Failed to trigger memory extraction:",ke)})},[s.length,e]),r.jsxs(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2,ease:"easeOut"},className:`fixed inset-0 z-[60] flex flex-col ${X==="light-frosted"?"bg-transparent":re?"bg-[#121212]":"bg-white"}`,children:[q&&r.jsx("style",{children:q}),(X==="light-frosted"||X==="dark-frosted")&&N&&r.jsx("div",{className:"absolute inset-0 -z-20",children:r.jsx("img",{src:N,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:`h-16 flex items-center justify-between px-4 ${X==="light-frosted"?"bg-white/20 backdrop-blur-md":X==="dark-frosted"?"bg-black/20 backdrop-blur-md":re?"bg-[#121212]":"bg-white"}`,children:[r.jsx("button",{onClick:ci,className:"p-2 -ml-2 active:opacity-60 transition-opacity",children:r.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:X==="light-frosted"?"#333":X==="dark-frosted"||re?"white":"black",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M15 18l-6-6 6-6"})})}),r.jsx("h1",{className:`font-semibold text-[18px] text-center ${X==="light-frosted"?"text-[#333]":X==="dark-frosted"||re?"text-white":"text-[#333]"}`,children:I}),r.jsx("button",{onClick:()=>V(!0),className:"p-2 -mr-2 active:opacity-60 transition-opacity",children:r.jsx(f7,{className:`w-6 h-6 ${X==="light-frosted"?"text-[#333]":X==="dark-frosted"||re?"text-white":"text-[#333]"}`,strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})]}),r.jsx("div",{ref:Ie,className:"flex-1 overflow-y-auto px-4 py-4",style:{backgroundColor:X==="light-frosted"||X==="dark-frosted"||N?"transparent":re?"#121212":"white",backgroundImage:X==="light-frosted"||X==="dark-frosted"?"none":N?re?`linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url(${N})`:`url(${N})`:"none",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",position:"relative"},children:Z.current.length===0?r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] text-[#999]",children:""})}):r.jsx("div",{style:{height:`${Wt.getTotalSize()}px`,position:"relative"},children:Wt.getVirtualItems().map(ke=>{const _e=ka[ke.index];if(!_e)return null;if(_e.type==="date")return r.jsx("div",{ref:Wt.measureElement,"data-index":ke.index,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${ke.start}px)`},children:r.jsx(z5,{dateString:_e.date})},_e.id);const{message:xe,isUserMessageRead:ot}=_e,st=!(xe.stickerId||xe.isPlaceholderImage||xe.redPacket||xe.order||xe.imageKey&&(!xe.text||xe.text==="[]")),ft=O!=="inside";return r.jsx("div",{ref:Wt.measureElement,"data-index":ke.index,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${ke.start}px)`},children:r.jsx("div",{className:"pb-3",children:r.jsxs("div",{className:"flex items-start gap-2",children:[ce&&r.jsx("div",{className:"w-6 h-6 flex items-center justify-center cursor-pointer flex-shrink-0",onClick:()=>di(xe.id),children:r.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${Me.has(xe.id)?"bg-[#7B9E7B] border-[#7B9E7B]":"bg-white border-[#ccc]"}`,children:Me.has(xe.id)&&r.jsx(Et,{className:"w-3.5 h-3.5 text-white",strokeWidth:3})})}),r.jsxs("div",{className:`flex gap-2 items-start flex-1 ${xe.senderId==="user"?"justify-end":"justify-start"}`,children:[xe.senderId==="system"&&r.jsx("div",{className:"w-full flex justify-center py-1",children:r.jsx("div",{className:"bg-black/20 rounded-full px-2 py-0 flex items-center justify-center cursor-pointer active:opacity-70 transition-opacity select-none",onTouchStart:ut=>Hs(xe,ut),onTouchEnd:Rr,onMouseDown:ut=>Hs(xe,ut),onMouseUp:Rr,onMouseLeave:Rr,children:r.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] text-white",children:xe.text.includes("")?`${I}`:xe.text})})}),xe.senderId==="character"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-9 h-9 rounded-full bg-[#f5f5f5] flex items-center justify-center overflow-hidden flex-shrink-0",children:S?r.jsx("img",{src:S,alt:t,className:"w-full h-full object-cover"}):r.jsx(mn,{className:"w-5 h-5 text-[#999]",strokeWidth:2})}),r.jsx("div",{className:"character-bubble",style:xe.stickerId||xe.isPlaceholderImage||xe.redPacket||xe.order||xe.imageKey&&(!xe.text||xe.text==="[]")?{}:wa(T),onTouchStart:ut=>Hs(xe,ut),onTouchEnd:Rr,onMouseDown:ut=>Hs(xe,ut),onMouseUp:Rr,onMouseLeave:Rr,children:xe.stickerId&&it[xe.stickerId]?r.jsx("img",{src:it[xe.stickerId],alt:"",className:"max-w-[150px] max-h-[150px] rounded-lg",onLoad:Vs}):xe.isPlaceholderImage?r.jsx("div",{className:"w-[250px] h-[180px] bg-[#f0f0f0] rounded-lg flex items-center justify-center px-6 py-4",children:r.jsxs("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] text-[#666] text-center",children:["[",xe.text,".jpg]"]})}):xe.redPacket?Ol(xe.redPacket,xe):xe.order?$l(xe.order):r.jsxs(r.Fragment,{children:[xe.quote&&r.jsxs("div",{className:"character-quote",style:wa(L),children:[r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px]",children:xe.quote.sender}),r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] line-clamp-2",children:xe.quote.content})]}),xe.imageKey&&Ut[xe.imageKey]&&r.jsx("img",{src:Ut[xe.imageKey],alt:"",className:`max-w-[250px] max-h-[250px] rounded-lg ${xe.text&&xe.text!=="[]"?"mb-2":""}`,onLoad:Vs}),xe.text&&xe.text!=="[]"&&r.jsxs("div",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] break-words relative",children:[xe.text,O==="inside"&&st&&r.jsx("span",{className:"float-right text-[10px] opacity-70 ml-2 mt-1 select-none leading-none pt-2",children:$s(xe.timestamp)})]})]})}),ft&&r.jsxs("div",{className:"flex flex-col items-start gap-0.5 ml-1 self-end",children:[r.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] text-[#999]",children:$s(xe.timestamp)}),r.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] text-[#999]",children:xe.isRead?"":""})]})]}),xe.senderId==="user"&&r.jsxs(r.Fragment,{children:[ft&&r.jsxs("div",{className:"flex flex-col items-end gap-0.5 mr-1 self-end",children:[r.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] text-[#999]",children:$s(xe.timestamp)}),r.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] text-[#999]",children:ot?"":""})]}),r.jsx("div",{className:"user-bubble",style:xe.stickerId||xe.isPlaceholderImage||xe.redPacket||xe.order||xe.imageKey&&(!xe.text||xe.text==="[]")?{}:wa(U),onTouchStart:ut=>Hs(xe,ut),onTouchEnd:Rr,onMouseDown:ut=>Hs(xe,ut),onMouseUp:Rr,onMouseLeave:Rr,children:xe.stickerId&&it[xe.stickerId]?r.jsx("img",{src:it[xe.stickerId],alt:"",className:"max-w-[150px] max-h-[150px] rounded-lg",onLoad:Vs}):xe.isPlaceholderImage?r.jsx("div",{className:"w-[250px] h-[180px] bg-[#f0f0f0] rounded-lg flex items-center justify-center px-6 py-4",children:r.jsxs("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] text-[#666] text-center",children:["[",xe.text,".jpg]"]})}):xe.redPacket?Ol(xe.redPacket,xe):xe.order?$l(xe.order):r.jsxs(r.Fragment,{children:[xe.quote&&r.jsxs("div",{className:"user-quote",style:wa(j),children:[r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px]",children:xe.quote.sender}),r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] line-clamp-2",children:xe.quote.content})]}),xe.imageKey&&Ut[xe.imageKey]&&r.jsx("img",{src:Ut[xe.imageKey],alt:"",className:`max-w-[250px] max-h-[250px] rounded-lg ${xe.text&&xe.text!=="[]"?"mb-2":""}`,onLoad:Vs}),xe.text&&xe.text!=="[]"&&r.jsxs("div",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] break-words relative",children:[xe.text,O==="inside"&&st&&r.jsx("span",{className:"float-right text-[10px] opacity-70 ml-2 mt-1 select-none leading-none pt-2",children:$s(xe.timestamp)})]})]})}),r.jsx("div",{className:"w-9 h-9 rounded-full bg-[#f5f5f5] flex items-center justify-center overflow-hidden flex-shrink-0",children:y?r.jsx("img",{src:y,alt:"User",className:"w-full h-full object-cover"}):r.jsx(mn,{className:"w-5 h-5 text-[#999]",strokeWidth:2})})]})]})]})})},xe.id)})},`virtual-list-${gn}`)}),ce&&r.jsxs("div",{className:"bg-white border-t border-[#e5e5e5] px-4 py-3 safe-area-inset-bottom flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("span",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] text-[#666]",children:[" ",Me.size," "]})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:ju,className:"px-4 py-2 rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] text-[#666] bg-[#f5f5f5] active:bg-[#e8e8e8] transition-colors",children:""}),r.jsx("button",{onClick:Rt,disabled:Me.size===0,className:`px-4 py-2 rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] text-white transition-colors ${Me.size===0?"bg-[#ccc] cursor-not-allowed":"bg-red-500 active:opacity-80"}`,children:""})]})]}),!ce&&r.jsxs("div",{className:`px-3 py-2 safe-area-inset-bottom ${X==="light-frosted"?"bg-white/20 backdrop-blur-md":X==="dark-frosted"?"bg-black/20 backdrop-blur-md":re?"bg-[#121212]":"bg-white"}`,children:[Ee&&r.jsxs("div",{className:`mb-2 flex items-center justify-between p-2 rounded-lg ${X==="light-frosted"?"bg-white/50":X==="dark-frosted"?"bg-white/10":re?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] ${X==="light-frosted"?"text-[#666]":X==="dark-frosted"||re?"text-[#aaa]":"text-[#666]"}`,children:[" ",Ee.senderId==="user"?_:I]}),r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] truncate ${X==="light-frosted"?"text-[#333]":X==="dark-frosted"||re?"text-white":"text-[#333]"}`,children:Ee.isPlaceholderImage||Ee.imageUrl||Ee.imageKey?"[]":Ee.stickerId?"[]":Ee.text})]}),r.jsx("button",{onClick:Wl,className:`ml-2 p-1 rounded transition-colors ${X==="light-frosted"?"active:bg-white/60":X==="dark-frosted"?"active:bg-white/10":re?"active:bg-[#2d2d2d]":"active:bg-[#e8e8e8]"}`,children:r.jsx(xt,{className:`w-4 h-4 ${X==="light-frosted"?"text-[#666]":X==="dark-frosted"||re?"text-[#aaa]":"text-[#666]"}`})})]}),Cn&&r.jsxs("div",{className:`mb-2 flex items-start gap-2 p-2 rounded-lg ${X==="light-frosted"?"bg-white/50":X==="dark-frosted"?"bg-white/10":re?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,children:[r.jsx("img",{src:Cn,alt:"",className:"w-20 h-20 object-cover rounded-lg"}),r.jsx("button",{onClick:handleCancelPendingImage,className:`ml-auto p-1 rounded transition-colors ${X==="light-frosted"?"active:bg-white/60":X==="dark-frosted"?"active:bg-white/10":re?"active:bg-[#2d2d2d]":"active:bg-[#e8e8e8]"}`,children:r.jsx(xt,{className:`w-4 h-4 ${X==="light-frosted"?"text-[#666]":X==="dark-frosted"||re?"text-[#aaa]":"text-[#666]"}`})})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:ja,disabled:ye,className:`w-10 h-10 flex items-center justify-center transition-opacity flex-shrink-0 ${ye?"opacity-40":"active:opacity-60"}`,children:r.jsxs("svg",{className:`w-5 h-5 ${X==="light-frosted"?"text-[#333]":X==="dark-frosted"||re?"text-white":"text-[#333]"}`,viewBox:"0 0 24 24",stroke:"currentColor",fill:"none",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M12 2L15 9L22 12L15 15L12 22L9 15L2 12L9 9Z"}),r.jsx("path",{d:"M20 1L20.7 3.3L23 4L20.7 4.7L20 7L19.3 4.7L17 4L19.3 3.3Z",fill:"currentColor"}),r.jsx("path",{d:"M4 17L4.5 18.5L6 19L4.5 19.5L4 21L3.5 19.5L2 19L3.5 18.5Z",fill:"currentColor"})]})}),r.jsx("div",{className:`flex-1 rounded-lg px-4 py-2 min-h-[40px] max-h-[100px] flex items-center ${X==="light-frosted"?"bg-white/20":X==="dark-frosted"?"bg-white/10":re?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,children:r.jsx("textarea",{value:i,onChange:ke=>l(ke.target.value),onKeyPress:ai,onFocus:()=>{Ze(!1),Kt(!1)},className:`w-full resize-none outline-none font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] bg-transparent leading-normal ${X==="light-frosted"?"text-[#333] placeholder:text-[#999]":X==="dark-frosted"?"text-white placeholder:text-[#aaa]":re?"text-white placeholder:text-[#666]":"text-[#333] placeholder:text-[#999]"}`,rows:1,style:{maxHeight:"68px",overflowY:"auto"}})}),i.trim()===""?r.jsx("button",{onClick:()=>Ze(!Ke),className:"w-10 h-10 flex items-center justify-center active:opacity-60 transition-opacity flex-shrink-0",children:r.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:X==="light-frosted"?"#333":re?"white":"#333333",strokeWidth:"2.5",children:[r.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),r.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}):r.jsx("button",{onClick:wo,className:"w-10 h-10 bg-[#7B9E7B] rounded-full flex items-center justify-center active:opacity-80 transition-opacity flex-shrink-0",children:r.jsx(N8,{className:"w-6 h-6 text-white",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),r.jsx(Be,{children:Ke&&r.jsx(me.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{type:"spring",stiffness:400,damping:30},className:`absolute bottom-[70px] right-3 rounded-xl shadow-lg z-[998] p-2 ${X==="light-frosted"?"bg-white/20 backdrop-blur-xl border border-white/20":X==="dark-frosted"?"bg-black/20 backdrop-blur-xl border border-white/10":re?"bg-[#1e1e1e]":"bg-white"}`,children:r.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[r.jsx("button",{onClick:()=>{Kt(!0),Ze(!1)},className:"p-0 bg-transparent border-none cursor-pointer",children:r.jsx("div",{className:`w-[50px] h-[50px] rounded-lg flex items-center justify-center transition-colors ${X==="light-frosted"?"bg-white/20 hover:bg-white/30 active:bg-white/40":X==="dark-frosted"?"bg-white/10 hover:bg-white/20 active:bg-white/30":re?"bg-[#1e1e1e] hover:bg-[#2d2d2d] active:bg-[#3d3d3d]":"bg-white hover:bg-[#f5f5f5] active:bg-[#e8e8e8]"}`,children:r.jsx(O9,{className:`w-[24px] h-[24px] ${X==="light-frosted"?"text-[#333]":X==="dark-frosted"||re?"text-white":"text-[#333]"}`,strokeWidth:2.5})})}),r.jsx(sP,{onImageSelect:li,onError:ke=>{nt({show:!0,message:ke}),setTimeout(()=>nt({show:!1,message:""}),3e3)},children:r.jsx("button",{className:"p-0 bg-transparent border-none cursor-pointer",children:r.jsx("div",{className:`w-[50px] h-[50px] rounded-lg flex items-center justify-center transition-colors ${X==="light-frosted"?"bg-white/20 hover:bg-white/30 active:bg-white/40":X==="dark-frosted"?"bg-white/10 hover:bg-white/20 active:bg-white/30":re?"bg-[#1e1e1e] hover:bg-[#2d2d2d] active:bg-[#3d3d3d]":"bg-white hover:bg-[#f5f5f5] active:bg-[#e8e8e8]"}`,children:r.jsx(qa,{className:`w-[24px] h-[24px] ${X==="light-frosted"?"text-[#333]":X==="dark-frosted"||re?"text-white":"text-[#333]"}`,strokeWidth:2.5})})})}),r.jsx("button",{onClick:()=>{Ze(!1),ht(!0)},className:"p-0 bg-transparent border-none cursor-pointer",children:r.jsx("div",{className:`w-[50px] h-[50px] rounded-lg flex items-center justify-center transition-colors ${X==="light-frosted"?"bg-white/20 hover:bg-white/30 active:bg-white/40":X==="dark-frosted"?"bg-white/10 hover:bg-white/20 active:bg-white/30":re?"bg-[#1e1e1e] hover:bg-[#2d2d2d] active:bg-[#3d3d3d]":"bg-white hover:bg-[#f5f5f5] active:bg-[#e8e8e8]"}`,children:r.jsx(Vm,{className:`w-[24px] h-[24px] ${X==="light-frosted"?"text-[#333]":re?"text-white":"text-[#333]"}`,strokeWidth:2.5})})}),r.jsx("button",{onClick:()=>{Os(!0),Ze(!1)},className:"p-0 bg-transparent border-none cursor-pointer",children:r.jsx("div",{className:`w-[50px] h-[50px] rounded-lg flex items-center justify-center transition-colors ${X==="light-frosted"?"bg-white/20 hover:bg-white/30 active:bg-white/40":X==="dark-frosted"?"bg-white/10 hover:bg-white/20 active:bg-white/30":re?"bg-[#1e1e1e] hover:bg-[#2d2d2d] active:bg-[#3d3d3d]":"bg-white hover:bg-[#f5f5f5] active:bg-[#e8e8e8]"}`,children:r.jsx("svg",{className:`w-[22px] h-[22px] ${X==="light-frosted"?"text-[#333]":re?"text-white":"text-[#333]"}`,viewBox:"80 80 864 864",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",strokeWidth:"20",children:r.jsx("path",{d:"M604.928 416.682667a425.856 425.856 0 0 0 205.952-111.872V170.794667h-597.333333v134.016a425.813333 425.813333 0 0 0 205.952 111.872 106.666667 106.666667 0 0 1 185.429333 0z m8.874667 85.333333a106.709333 106.709333 0 0 1-203.178667 0 509.482667 509.482667 0 0 1-197.12-85.973333v437.418666h597.333333V416a509.525333 509.525333 0 0 1-197.034666 86.016zM170.88 85.504h682.666667a42.666667 42.666667 0 0 1 42.666666 42.666667v768a42.666667 42.666667 0 0 1-42.666666 42.666666h-682.666667a42.666667 42.666667 0 0 1-42.666667-42.666666v-768a42.666667 42.666667 0 0 1 42.666667-42.666667z"})})})})]})})}),r.jsx(Be,{children:Lt&&r.jsx(rP,{onClose:()=>Kt(!1),onSelect:Sr,theme:X,isDarkMode:re})}),r.jsx(Be,{children:pt&&r.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40",onClick:()=>ht(!1)}),r.jsxs(me.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[320px] shadow-xl ${X==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":X==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":re?"bg-[#1e1e1e] border border-[#2d2d2d] text-white shadow-xl":"bg-white text-[#333]"}`,children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-4 ${re?"text-white":"text-black"}`,children:""}),r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] text-center mb-4 ${re?"text-[#aaa]":"text-[#666]"}`,children:""}),r.jsx("input",{type:"text",value:jt,onChange:ke=>Ht(ke.target.value),placeholder:"",className:`w-full px-4 py-3 rounded-xl border-none outline-none font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] mb-6 transition-colors ${X==="light-frosted"?"bg-white/40 text-[#333] placeholder:text-[#999]":X==="dark-frosted"?"bg-white/10 text-white placeholder:text-[#aaa]":re?"bg-[#2d2d2d] text-white placeholder:text-[#666]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999]"}`,autoFocus:!0,onKeyPress:ke=>{ke.key==="Enter"&&jt.trim()&&Ll()}}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{ht(!1),Ht("")},className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors disabled:opacity-50 ${X==="light-frosted"?"bg-white/40 text-[#666] hover:bg-white/60":X==="dark-frosted"?"bg-white/10 text-white hover:bg-white/20":re?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),r.jsx("button",{onClick:Ll,disabled:!jt.trim(),className:"flex-1 py-2.5 rounded-xl bg-[#7B9E7B] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity disabled:opacity-50",children:""})]})]})]})}),r.jsx(Be,{children:ks&&r.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40",onClick:()=>Os(!1)}),r.jsxs(me.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[360px] shadow-xl ${X==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":X==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":re?"bg-[#1e1e1e] border border-[#2d2d2d] text-white shadow-xl":"bg-white text-[#333]"}`,children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-4 ${re?"text-white":"text-black"}`,children:""}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] mb-2 block ${re?"text-[#aaa]":"text-[#666]"}`,children:""}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:Fl,onChange:ke=>{const _e=ke.target.value;(_e===""||/^\d+$/.test(_e))&&yo(_e)},placeholder:"0",className:`w-full px-4 py-3 pr-16 rounded-xl border-none outline-none font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] transition-colors ${X==="light-frosted"?"bg-white/40 text-[#333] placeholder:text-[#999]":X==="dark-frosted"?"bg-white/10 text-white placeholder:text-[#aaa]":re?"bg-[#2d2d2d] text-white placeholder:text-[#666]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999]"}`,autoFocus:!0}),r.jsx("span",{className:`absolute right-4 top-1/2 -translate-y-1/2 font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] ${re?"text-[#aaa]":"text-[#999]"}`,children:""})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] mb-2 block ${re?"text-[#aaa]":"text-[#666]"}`,children:""}),r.jsx("input",{type:"text",value:Rl,onChange:ke=>Fr(ke.target.value),placeholder:"",maxLength:20,className:`w-full px-4 py-3 rounded-xl border-none outline-none font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] transition-colors ${X==="light-frosted"?"bg-white/40 text-[#333] placeholder:text-[#999]":X==="dark-frosted"?"bg-white/10 text-white placeholder:text-[#aaa]":re?"bg-[#2d2d2d] text-white placeholder:text-[#666]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999]"}`})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{Os(!1),yo(""),Fr("")},className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors ${X==="light-frosted"?"bg-white/40 text-[#666] hover:bg-white/60":X==="dark-frosted"?"bg-white/10 text-white hover:bg-white/20":re?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),r.jsx("button",{onClick:oi,className:"flex-1 py-2.5 rounded-xl bg-[#ff6b6b] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity",children:""})]})]})]})}),r.jsx(Be,{children:te&&r.jsx("div",{className:"fixed inset-0 z-[70]",onClick:()=>{ne(!1),we(null)},children:r.jsxs(me.div,{initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:10},transition:{type:"spring",stiffness:400,damping:30},className:`absolute rounded-lg shadow-lg py-1 min-w-[120px] ${X==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":X==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20":re?"bg-[#1e1e1e] border border-[#2d2d2d] text-white shadow-xl":"bg-white text-[#333] shadow-lg"}`,style:{left:Math.min(Ce.x,window.innerWidth-140),top:Math.min(Ce.y,window.innerHeight-200)},onClick:ke=>ke.stopPropagation(),children:[ae?.senderId!=="system"&&r.jsxs("button",{onClick:ko,className:`w-full px-4 py-2.5 flex items-center gap-3 transition-colors ${X==="light-frosted"?"hover:bg-white/40":X==="dark-frosted"?"hover:bg-white/10":re?"hover:bg-[#2d2d2d]":"hover:bg-[#f5f5f5]"}`,children:[r.jsx(i7,{className:`w-4 h-4 ${re||X==="dark-frosted"?"text-[#aaa]":"text-[#666]"}`}),r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] ${re||X==="dark-frosted"?"text-white":"text-[#333]"}`,children:""})]}),ae?.senderId!=="system"&&r.jsxs("button",{onClick:Ul,className:`w-full px-4 py-2.5 flex items-center gap-3 transition-colors ${X==="light-frosted"?"hover:bg-white/40":X==="dark-frosted"?"hover:bg-white/10":re?"hover:bg-[#2d2d2d]":"hover:bg-[#f5f5f5]"}`,children:[r.jsx(v9,{className:`w-4 h-4 ${re||X==="dark-frosted"?"text-[#aaa]":"text-[#666]"}`}),r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] ${re||X==="dark-frosted"?"text-white":"text-[#333]"}`,children:""})]}),ae?.senderId!=="system"&&r.jsxs("button",{onClick:Vl,className:`w-full px-4 py-2.5 flex items-center gap-3 transition-colors ${X==="light-frosted"?"hover:bg-white/40":X==="dark-frosted"?"hover:bg-white/10":re?"hover:bg-[#2d2d2d]":"hover:bg-[#f5f5f5]"}`,children:[r.jsx(d9,{className:`w-4 h-4 ${re||X==="dark-frosted"?"text-[#aaa]":"text-[#666]"}`}),r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] ${re||X==="dark-frosted"?"text-white":"text-[#333]"}`,children:""})]}),r.jsxs("button",{onClick:Ca,className:`w-full px-4 py-2.5 flex items-center gap-3 transition-colors ${X==="light-frosted"?"hover:bg-white/40":X==="dark-frosted"?"hover:bg-white/10":re?"hover:bg-[#2d2d2d]":"hover:bg-[#f5f5f5]"}`,children:[r.jsx(Et,{className:`w-4 h-4 ${re||X==="dark-frosted"?"text-[#aaa]":"text-[#666]"}`}),r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] ${re||X==="dark-frosted"?"text-white":"text-[#333]"}`,children:""})]}),r.jsxs("button",{onClick:jo,className:`w-full px-4 py-2.5 flex items-center gap-3 transition-colors ${X==="light-frosted"?"hover:bg-white/40":X==="dark-frosted"?"hover:bg-white/10":re?"hover:bg-[#2d2d2d]":"hover:bg-[#f5f5f5]"}`,children:[r.jsx(xn,{className:"w-4 h-4 text-red-500"}),r.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] text-red-500",children:""})]})]})})}),r.jsx(Be,{children:pe&&ae&&r.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40",onClick:ui}),r.jsxs(me.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[360px] shadow-xl ${X==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":X==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":re?"bg-[#1e1e1e] border border-[#2d2d2d] text-white shadow-xl":"bg-white text-[#333]"}`,children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-4 ${re?"text-white":"text-black"}`,children:""}),r.jsx("textarea",{value:Ne,onChange:ke=>he(ke.target.value),className:`w-full px-4 py-3 rounded-xl border-none outline-none font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] resize-none mb-6 transition-colors ${X==="light-frosted"?"bg-white/40 text-[#333] placeholder:text-[#999]":X==="dark-frosted"?"bg-white/10 text-white placeholder:text-[#aaa]":re?"bg-[#2d2d2d] text-white placeholder:text-[#666]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999]"}`,rows:4,autoFocus:!0,placeholder:""}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:ui,className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors ${X==="light-frosted"?"bg-white/40 text-[#666] hover:bg-white/60":X==="dark-frosted"?"bg-white/10 text-white hover:bg-white/20":re?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),r.jsx("button",{onClick:Hl,className:"flex-1 py-2.5 rounded-xl bg-[#7B9E7B] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity",children:""})]})]})]})}),r.jsx(Be,{children:Ye.show&&r.jsx(me.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},transition:{type:"spring",stiffness:400,damping:30},className:"fixed top-16 left-1/2 -translate-x-1/2 z-[80] px-4 w-full max-w-[90vw]",children:r.jsx("div",{className:"bg-[#ff3b30] rounded-[12px] px-5 py-4 shadow-lg max-w-md mx-auto max-h-[60vh] overflow-y-auto",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-white/20 flex items-center justify-center mt-0.5",children:r.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] text-white mb-1",children:""}),r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] text-white/90 leading-relaxed break-words whitespace-pre-wrap",children:Ye.message})]})]})})})}),r.jsx(Be,{children:Vt&&Vt.redPacket&&r.jsxs("div",{className:"fixed inset-0 z-[1300] flex items-center justify-center",children:[r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},style:{backgroundColor:"rgba(0,0,0,0.5)"},className:"absolute inset-0",onClick:()=>ii(null)}),r.jsxs(me.div,{initial:{scale:.9,opacity:0,y:10},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"bg-[#ea5e4f] w-[320px] rounded-[8px] overflow-hidden relative shadow-2xl z-10",onClick:ke=>ke.stopPropagation(),children:[r.jsx("button",{onClick:()=>ii(null),className:"absolute top-3 left-3 z-10 text-white/70 hover:text-white active:opacity-50 transition-colors",children:r.jsx(xt,{size:20})}),r.jsxs("div",{className:"pt-12 pb-8 px-6 flex flex-col items-center text-white relative",children:[r.jsx("div",{className:"absolute top-[-100px] w-[500px] h-[300px] bg-[#d95345] rounded-[50%] -z-0"}),r.jsx("div",{className:"w-16 h-16 rounded-full border-2 border-[#fcdb9a] bg-white p-0.5 mb-3 z-10 shadow-md",children:r.jsx("div",{className:"w-full h-full rounded-full overflow-hidden bg-gray-100",children:Vt.senderId==="user"?y?r.jsx("img",{src:y,alt:"User",className:"w-full h-full object-cover"}):r.jsx(mn,{className:"w-full h-full p-3 text-gray-400"}):S?r.jsx("img",{src:S,alt:"Character",className:"w-full h-full object-cover"}):r.jsx(mn,{className:"w-full h-full p-3 text-gray-400"})})}),r.jsxs("h3",{className:"text-[16px] font-medium mb-1 tracking-wide z-10",children:[Vt.senderId==="character"?I:Vt.senderName,""]}),r.jsx("p",{className:"text-[14px] opacity-80 mb-12 tracking-wide z-10",children:Vt.redPacket.blessing}),r.jsxs("div",{className:"z-10 flex flex-col items-center",children:[r.jsxs("div",{className:"text-[48px] font-bold leading-none tracking-tighter text-[#fcdb9a] mb-3 flex items-baseline gap-1",children:[r.jsx("span",{children:Vt.redPacket.amount.toLocaleString()}),r.jsx("span",{className:"text-[14px] font-normal tracking-normal opacity-80",children:""})]}),r.jsx("div",{className:"text-[12px] text-[#fcdb9a]/80 tracking-wide flex items-center gap-1",children:r.jsx("span",{children:Vt.senderId==="user"?Vt.redPacket.opened?"":"":""})})]})]}),r.jsxs("div",{className:"bg-white px-4 py-4 min-h-[80px]",children:[r.jsx("div",{className:"border-b border-gray-100 pb-2 mb-2",children:r.jsxs("p",{className:"text-[12px] text-gray-400 tracking-wide",children:["1",Vt.redPacket.amount,""]})}),Vt.redPacket.opened||Vt.senderId!=="user"?r.jsxs("div",{className:"flex items-center justify-between py-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 overflow-hidden flex-shrink-0",children:Vt.senderId==="user"?S?r.jsx("img",{src:S,alt:"Receiver",className:"w-full h-full object-cover"}):r.jsx(mn,{className:"w-full h-full p-2 text-gray-400"}):y?r.jsx("img",{src:y,alt:"Receiver",className:"w-full h-full object-cover"}):r.jsx(mn,{className:"w-full h-full p-2 text-gray-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[14px] text-[#333] font-medium leading-tight",children:Vt.senderId==="user"?I:_}),r.jsx("p",{className:"text-[12px] text-gray-400 mt-0.5",children:$s(Vt.timestamp)})]})]}),r.jsx("div",{className:"text-right",children:r.jsxs("p",{className:"text-[14px] text-[#333] font-medium",children:[Vt.redPacket.amount.toLocaleString()," "]})})]}):r.jsx("div",{className:"py-8 text-center text-gray-400 text-[13px]",children:"..."})]})]})]})}),r.jsx(Be,{children:D&&r.jsx(eP,{characterId:e,characterName:t,onClose:Kl,onUpdate:()=>{},onDelete:n},"chat-settings")})]})}const iP={initial:{x:"100%"},animate:{x:0},exit:{x:"100%",zIndex:61}};function oP({onClose:e,initialChatId:t,onChatChange:n}){const[s,a]=k.useState(t||null),[i,l]=k.useState(""),[c,u]=k.useState(0),[p,h]=k.useState(()=>We.chatSettings?.darkMode||!1);k.useEffect(()=>{const g=()=>{h(We.chatSettings?.darkMode||!1)};return window.addEventListener("chat-settings-updated",g),()=>window.removeEventListener("chat-settings-updated",g)},[]),k.useEffect(()=>{if(t){a(t);const g=Tp(t,"");l(g)}},[t]);const f=(g,y)=>{a(g),l(y),n?.(g)},m=()=>{a(null),l(""),u(g=>g+1),n?.(null)};return r.jsxs("div",{className:`relative w-full h-full ${p?"bg-[#121212]":"bg-white"} overflow-hidden`,children:[r.jsx("div",{className:"absolute inset-0 w-full h-full",children:r.jsx(cI,{onClose:e,onOpenChat:f},c)}),r.jsx(Be,{children:s&&r.jsx(me.div,{variants:iP,initial:"initial",animate:"animate",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"absolute inset-0 z-[60] w-full h-full bg-transparent",children:r.jsx(aP,{characterId:s,characterName:i,onClose:m})},"chat")})]})}const Qb={shareEnabled:!1,shareScope:"all",shareCharacterId:""};function lP({onClose:e,onNavigate:t}){const[n,s]=k.useState(!1),[a,i]=k.useState(!1),[l,c]=k.useState(!1),[u,p]=k.useState(Qb),[h,f]=k.useState([]),[m,g]=k.useState(!1);k.useEffect(()=>{y(),b()},[]);const y=async()=>{try{const v=await se.get(J.HEALTH,"health_settings");v&&p({...Qb,...v})}catch(v){console.error("Failed to load health settings",v)}},b=async()=>{try{const v=await se.get(J.CHARACTERS,"characters");v&&f(v)}catch(v){console.error("Failed to load characters",v)}},S=async()=>{try{await se.set(J.HEALTH,"health_settings",u),s(!1),i(!0),setTimeout(()=>i(!1),2e3)}catch{c(!0),setTimeout(()=>c(!1),2e3)}};return r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10",children:[r.jsx("button",{onClick:e,className:"w-10 h-10 bg-white/40 backdrop-blur-md border border-white/40 rounded-2xl flex items-center justify-center text-[#6B7C93] transition-transform active:scale-90 active:bg-white/60",children:r.jsx(dn,{className:"w-5 h-5",strokeWidth:2.5})}),r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("span",{className:"text-[11px] font-bold text-[#9FA8DA] tracking-[0.2em] uppercase mb-0.5",children:"Health Care"}),r.jsx("h1",{className:"text-lg font-black text-[#5C6B7F] tracking-wide",children:""})]}),r.jsx("button",{onClick:()=>s(!0),className:"w-10 h-10 bg-white/40 backdrop-blur-md border border-white/40 rounded-2xl flex items-center justify-center text-[#6B7C93] transition-transform active:scale-90 active:bg-white/60",children:r.jsx(Gm,{className:"w-5 h-5",strokeWidth:2.5})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[r.jsxs("div",{className:"text-center mb-8 relative",children:[r.jsx("div",{className:"inline-flex items-center justify-center p-4 rounded-3xl bg-white/30 backdrop-blur-sm border border-white/40 mb-4",children:r.jsx(Fd,{className:"w-8 h-8 text-[#88B04B]"})}),r.jsxs("p",{className:"text-sm text-[#7D8CA3] font-medium leading-relaxed max-w-[280px] mx-auto",children:["",r.jsx("br",{}),""]})]}),r.jsxs("div",{className:"grid gap-5",children:[r.jsxs("button",{onClick:()=>t("sleep"),className:"group relative bg-white/40 backdrop-blur-md border border-white/50 p-6 rounded-[2rem] text-left transition-transform active:scale-[0.96] overflow-hidden",children:[r.jsx("div",{className:"absolute top-[-20%] right-[-10%] w-32 h-32 bg-[#E6E6FA] rounded-full filter blur-[40px] opacity-60"}),r.jsxs("div",{className:"relative z-10 flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"w-12 h-12 bg-[#E6E6FA] text-[#6A5ACD] flex items-center justify-center rounded-2xl mb-4",children:r.jsx(ru,{className:"w-6 h-6 fill-current"})}),r.jsx("h3",{className:"text-xl font-black text-[#5C6B7F] mb-1",children:""}),r.jsxs("p",{className:"text-xs text-[#8E9CB3] font-medium",children:["",r.jsx("br",{}),""]})]}),r.jsx("div",{className:"w-8 h-8 rounded-full bg-white/40 flex items-center justify-center text-[#B39EB5]",children:r.jsx(dn,{className:"w-5 h-5 rotate-180"})})]})]}),r.jsxs("button",{onClick:()=>t("cycle"),className:"group relative bg-white/40 backdrop-blur-md border border-white/50 p-6 rounded-[2rem] text-left transition-transform active:scale-[0.96] overflow-hidden",children:[r.jsx("div",{className:"absolute top-[-20%] right-[-10%] w-32 h-32 bg-[#FFD1DC] rounded-full filter blur-[40px] opacity-60"}),r.jsxs("div",{className:"relative z-10 flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"w-12 h-12 bg-[#FFD1DC] text-[#E57373] flex items-center justify-center rounded-2xl mb-4",children:r.jsx(Gw,{className:"w-6 h-6"})}),r.jsx("h3",{className:"text-xl font-black text-[#5C6B7F] mb-1",children:""}),r.jsxs("p",{className:"text-xs text-[#8E9CB3] font-medium",children:["",r.jsx("br",{}),""]})]}),r.jsx("div",{className:"w-8 h-8 rounded-full bg-white/40 flex items-center justify-center text-[#FFB7B2]",children:r.jsx(dn,{className:"w-5 h-5 rotate-180"})})]})]}),r.jsxs("button",{onClick:()=>t("diagnosis"),className:"group relative bg-white/40 backdrop-blur-md border border-white/50 p-6 rounded-[2rem] text-left transition-transform active:scale-[0.96] overflow-hidden",children:[r.jsx("div",{className:"absolute top-[-20%] right-[-10%] w-32 h-32 bg-[#C1E1C1] rounded-full filter blur-[40px] opacity-60"}),r.jsxs("div",{className:"relative z-10 flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"w-12 h-12 bg-[#C1E1C1] text-[#6B8E23] flex items-center justify-center rounded-2xl mb-4",children:r.jsx(Jw,{className:"w-6 h-6"})}),r.jsx("h3",{className:"text-xl font-black text-[#5C6B7F] mb-1",children:""}),r.jsxs("p",{className:"text-xs text-[#8E9CB3] font-medium",children:["",r.jsx("br",{}),""]})]}),r.jsx("div",{className:"w-8 h-8 rounded-full bg-white/40 flex items-center justify-center text-[#8FBC8F]",children:r.jsx(dn,{className:"w-5 h-5 rotate-180"})})]})]})]})]}),r.jsx(Be,{children:n&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6",children:[r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>s(!1),className:"absolute inset-0 bg-[#5C6B7F]/20 backdrop-blur-sm"}),r.jsxs(me.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:300,damping:25},className:"bg-[#FDFBF7]/95 backdrop-blur-xl w-full max-w-[320px] rounded-[2rem] border border-white/50 shadow-md relative z-10",children:[r.jsxs("div",{className:"bg-white/40 border-b border-white/50 p-6 flex justify-between items-center rounded-t-[2rem]",children:[r.jsx("span",{className:"text-lg font-black tracking-wide text-[#5C6B7F]",children:""}),r.jsx("button",{onClick:()=>s(!1),className:"bg-white/40 p-1 rounded-full text-[#7D8CA3] active:bg-white/60 transition-colors",children:r.jsx(xt,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-bold text-[#5C6B7F]",children:""}),r.jsx("p",{className:"text-[10px] text-[#9FA8DA] mt-1",children:""})]}),r.jsx("button",{onClick:()=>p({...u,shareEnabled:!u.shareEnabled}),className:`w-12 h-7 rounded-full transition-colors relative ${u.shareEnabled?"bg-[#AEC6CF]":"bg-gray-200"}`,children:r.jsx(me.div,{layout:!0,className:"absolute top-1 left-1 w-5 h-5 bg-white rounded-full shadow-sm",animate:{x:u.shareEnabled?20:0},transition:{type:"spring",stiffness:500,damping:30}})})]}),r.jsx(Be,{children:u.shareEnabled&&r.jsxs(me.div,{initial:{opacity:0,height:0,overflow:"hidden"},animate:{opacity:1,height:"auto",transitionEnd:{overflow:"visible"}},exit:{opacity:0,height:0,overflow:"hidden"},className:"space-y-4 pt-4 border-t border-[#7D8CA3]/10",children:[r.jsx("label",{className:"text-xs font-bold text-[#7D8CA3] uppercase tracking-wider block mb-2",children:""}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("button",{onClick:()=>p({...u,shareScope:"all"}),className:`p-3 rounded-2xl border flex flex-col items-center gap-2 transition-all ${u.shareScope==="all"?"bg-[#AEC6CF]/10 border-[#AEC6CF] text-[#5C6B7F]":"bg-white/40 border-transparent text-[#9FA8DA]"}`,children:[r.jsx(Tl,{className:"w-5 h-5"}),r.jsx("span",{className:"text-xs font-bold",children:""})]}),r.jsxs("button",{onClick:()=>p({...u,shareScope:"specific"}),className:`p-3 rounded-2xl border flex flex-col items-center gap-2 transition-all ${u.shareScope==="specific"?"bg-[#AEC6CF]/10 border-[#AEC6CF] text-[#5C6B7F]":"bg-white/40 border-transparent text-[#9FA8DA]"}`,children:[r.jsx(mn,{className:"w-5 h-5"}),r.jsx("span",{className:"text-xs font-bold",children:""})]})]}),u.shareScope==="specific"&&r.jsxs("div",{className:"relative mt-2",children:[r.jsxs("button",{onClick:()=>g(!m),className:"w-full bg-white/50 border border-white/60 px-4 py-3 rounded-2xl text-xs font-bold text-[#5C6B7F] flex items-center justify-between active:bg-white/70 transition-colors",children:[r.jsx("div",{className:"flex items-center gap-2 pl-1",children:r.jsx("span",{children:h.find(v=>v.id===u.shareCharacterId)?.name||""})}),r.jsx(Qn,{className:`w-4 h-4 transition-transform ${m?"rotate-90":""}`})]}),r.jsx(Be,{children:m&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>g(!1)}),r.jsxs(me.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},className:"absolute top-full left-0 right-0 mt-2 bg-white/90 backdrop-blur-xl border border-white/60 rounded-2xl shadow-lg z-20 max-h-48 overflow-y-auto p-1",children:[h.length===0&&r.jsx("div",{className:"p-3 text-center text-[10px] text-[#9FA8DA]",children:""}),h.map(v=>r.jsx("button",{onClick:()=>{p({...u,shareCharacterId:v.id}),g(!1)},className:`w-full text-left px-4 py-3 rounded-xl text-xs font-bold flex items-center gap-2 mb-1 ${u.shareCharacterId===v.id?"bg-[#AEC6CF]/20 text-[#5C6B7F]":"hover:bg-black/5 text-[#7D8CA3]"}`,children:v.name},v.id))]})]})})]})]})}),r.jsxs("button",{onClick:S,className:"w-full bg-[#AEC6CF] text-white py-3.5 rounded-2xl font-bold text-xs uppercase tracking-widest shadow-md shadow-[#AEC6CF]/30 active:scale-[0.98] transition-transform flex items-center justify-center gap-2 mt-4",children:[r.jsx(Et,{className:"w-4 h-4"}),""]})]})]})]})}),r.jsx(Be,{children:a&&r.jsx("div",{className:"fixed top-[90px] inset-x-0 z-[100] flex justify-center pointer-events-none",children:r.jsxs(me.div,{initial:{scale:.9,opacity:0,y:-10},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},className:"mx-auto w-fit flex items-center gap-2 px-4 py-3 pointer-events-auto",style:{background:"rgba(253, 251, 247, 0.85)",backdropFilter:"blur(12px)",border:"1px solid rgba(255, 255, 255, 0.6)",borderRadius:"20px",color:"#5C6B7F",boxShadow:"0 10px 40px -10px rgba(92, 107, 127, 0.15)",fontSize:"13px",fontWeight:"bold"},children:[r.jsx("div",{className:"w-5 h-5 rounded-full bg-[#AEC6CF] flex items-center justify-center text-white",children:r.jsx(Et,{className:"w-3 h-3",strokeWidth:3})}),r.jsx("span",{children:""})]})})}),r.jsx(Be,{children:l&&r.jsx("div",{className:"fixed top-[90px] inset-x-0 z-[100] flex justify-center pointer-events-none",children:r.jsxs(me.div,{initial:{scale:.9,opacity:0,y:-10},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},className:"mx-auto w-fit flex items-center gap-2 px-4 py-3 pointer-events-auto",style:{background:"rgba(253, 251, 247, 0.85)",backdropFilter:"blur(12px)",border:"1px solid rgba(255, 255, 255, 0.6)",borderRadius:"20px",color:"#5C6B7F",boxShadow:"0 10px 40px -10px rgba(92, 107, 127, 0.15)",fontSize:"13px",fontWeight:"bold"},children:[r.jsx("div",{className:"w-5 h-5 rounded-full bg-[#E57373] flex items-center justify-center text-white",children:r.jsx(xt,{className:"w-3 h-3",strokeWidth:3})}),r.jsx("span",{children:""})]})})})]})}function cP({onBack:e}){const[t,n]=k.useState([]),[s,a]=k.useState(""),[i,l]=k.useState(""),[c,u]=k.useState("good"),[p,h]=k.useState(null),f=(S,v)=>{h({show:!0,type:S,message:v}),setTimeout(()=>h(null),2e3)};k.useEffect(()=>{m()},[]);const m=async()=>{try{const S=await se.get(J.HEALTH,"sleep_logs");if(S&&S.length>0){const N=new Date().toDateString(),C=S.find(_=>new Date(_.endTime).toDateString()===N);if(C){n([C]);const _=new Date(C.startTime),R=new Date(C.endTime),D=_.getHours().toString().padStart(2,"0"),V=_.getMinutes().toString().padStart(2,"0");a(`${D}:${V}`);const I=R.getHours().toString().padStart(2,"0"),A=R.getMinutes().toString().padStart(2,"0");l(`${I}:${A}`),u(C.quality),(S.length>1||!S.includes(C))&&await se.set(J.HEALTH,"sleep_logs",[C])}else n([]),await se.set(J.HEALTH,"sleep_logs",[])}}catch(S){console.error("Failed to load sleep logs",S)}},g=(S,v)=>{const N=S.replace(/\D/g,"");if(N.length<=4)if(N.length>=3){const C=N.slice(0,2),_=N.slice(2);if(parseInt(C)>23||parseInt(_)>59)return;v(`${C}:${_}`)}else v(N)},y=async()=>{if(s.length!==5||i.length!==5){f("error"," ( 23:00)");return}const S=new Date;S.setSeconds(0),S.setMilliseconds(0);const[v,N]=i.split(":").map(Number),C=new Date(S);C.setHours(v,N,0,0);const[_,R]=s.split(":").map(Number),D=new Date(S);D.setHours(_,R,0,0),D>C&&D.setDate(D.getDate()-1);const V={id:Date.now().toString(),startTime:D.toISOString(),endTime:C.toISOString(),quality:c,createdAt:new Date().toISOString()};try{const I=[V];await se.set(J.HEALTH,"sleep_logs",I),n(I),f("success","")}catch{f("error","")}},b=async()=>{if(confirm(""))try{await se.set(J.HEALTH,"sleep_logs",[]),n([]),a(""),l(""),u("good"),f("success","")}catch{f("error","")}};return r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10",children:[r.jsx("button",{onClick:e,className:"w-10 h-10 bg-white/40 backdrop-blur-md border border-white/40 rounded-2xl flex items-center justify-center text-[#6B7C93] transition-transform active:scale-90 active:bg-white/60",children:r.jsx(dn,{className:"w-5 h-5",strokeWidth:2.5})}),r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("span",{className:"text-[11px] font-bold text-[#9FA8DA] tracking-[0.2em] uppercase mb-0.5",children:"Sleep Log"}),r.jsx("h1",{className:"text-lg font-black text-[#5C6B7F] tracking-wide",children:""})]}),r.jsx("div",{className:"w-10"})," "]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:r.jsxs("div",{className:"bg-white/60 backdrop-blur-md border border-white/60 p-6 rounded-[2rem] shadow-sm",children:[r.jsxs("h3",{className:"text-xs font-bold text-[#9FA8DA] uppercase tracking-widest mb-6 flex items-center gap-2",children:[r.jsx(wl,{className:"w-4 h-4"})," "]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-[10px] font-bold text-[#7D8CA3] uppercase tracking-wider pl-1",children:" (HH:MM)"}),r.jsx("input",{type:"tel",placeholder:"2300",value:s,onChange:S=>g(S.target.value,a),maxLength:5,className:"w-full bg-white/50 border border-white/60 text-center py-4 rounded-2xl text-lg font-mono font-bold text-[#5C6B7F] placeholder:text-[#D1D5DB] focus:border-[#AEC6CF] focus:outline-none focus:ring-2 focus:ring-[#AEC6CF]/20"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-[10px] font-bold text-[#7D8CA3] uppercase tracking-wider pl-1",children:" (HH:MM)"}),r.jsx("input",{type:"tel",placeholder:"0730",value:i,onChange:S=>g(S.target.value,l),maxLength:5,className:"w-full bg-white/50 border border-white/60 text-center py-4 rounded-2xl text-lg font-mono font-bold text-[#5C6B7F] placeholder:text-[#D1D5DB] focus:border-[#AEC6CF] focus:outline-none focus:ring-2 focus:ring-[#AEC6CF]/20"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-[10px] font-bold text-[#7D8CA3] uppercase tracking-wider pl-1",children:""}),r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsxs("button",{type:"button",onClick:()=>u("good"),className:`py-3 rounded-2xl flex flex-col items-center gap-1 transition-all active:scale-95 ${c==="good"?"bg-[#E0F2F1] text-[#4DB6AC] shadow-inner ring-1 ring-[#4DB6AC]/20":"bg-white/40 text-[#B0BEC5] hover:bg-white/60"}`,children:[r.jsx(uT,{className:"w-5 h-5"}),r.jsx("span",{className:"text-[10px] font-bold",children:""})]}),r.jsxs("button",{type:"button",onClick:()=>u("average"),className:`py-3 rounded-2xl flex flex-col items-center gap-1 transition-all active:scale-95 ${c==="average"?"bg-[#FFF3E0] text-[#FFB74D] shadow-inner ring-1 ring-[#FFB74D]/20":"bg-white/40 text-[#B0BEC5] hover:bg-white/60"}`,children:[r.jsx(Km,{className:"w-5 h-5"}),r.jsx("span",{className:"text-[10px] font-bold",children:""})]}),r.jsxs("button",{type:"button",onClick:()=>u("poor"),className:`py-3 rounded-2xl flex flex-col items-center gap-1 transition-all active:scale-95 ${c==="poor"?"bg-[#FFEBEE] text-[#E57373] shadow-inner ring-1 ring-[#E57373]/20":"bg-white/40 text-[#B0BEC5] hover:bg-white/60"}`,children:[r.jsx(cT,{className:"w-5 h-5"}),r.jsx("span",{className:"text-[10px] font-bold",children:""})]})]})]}),r.jsxs("button",{onClick:y,className:"w-full bg-[#AEC6CF] text-white py-4 font-bold text-sm tracking-widest uppercase rounded-2xl shadow-md shadow-[#AEC6CF]/30 active:scale-[0.98] transition-transform flex items-center justify-center gap-2",children:[r.jsx(Et,{className:"w-5 h-5"}),t.length>0?"":""]}),t.length>0&&r.jsxs("button",{onClick:b,className:"w-full bg-[#FFEBEE] text-[#E57373] py-4 font-bold text-sm tracking-widest uppercase rounded-2xl shadow-sm active:scale-[0.98] transition-transform flex items-center justify-center gap-2",children:[r.jsx(xn,{className:"w-5 h-5"}),""]})]})]})}),r.jsx(Be,{children:p&&p.show&&r.jsx("div",{className:"fixed top-[90px] inset-x-0 z-[100] flex justify-center pointer-events-none",children:r.jsxs(me.div,{initial:{scale:.9,opacity:0,y:-10},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},className:"mx-auto w-fit flex items-center gap-2 px-4 py-3 pointer-events-auto",style:{background:"rgba(253, 251, 247, 0.85)",backdropFilter:"blur(12px)",border:"1px solid rgba(255, 255, 255, 0.6)",borderRadius:"20px",color:"#5C6B7F",boxShadow:"0 10px 40px -10px rgba(92, 107, 127, 0.15)",fontSize:"13px",fontWeight:"bold"},children:[r.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-white ${p.type==="success"?"bg-[#AEC6CF]":"bg-[#E57373]"}`,children:p.type==="success"?r.jsx(Et,{className:"w-3 h-3",strokeWidth:3}):r.jsx(xt,{className:"w-3 h-3",strokeWidth:3})}),r.jsx("span",{children:p.message})]})})})]})}const Th={cycleLength:28,periodLength:5};function dP({onBack:e}){const[t,n]=k.useState([]),[s,a]=k.useState(Th),[i,l]=k.useState(!1),[c,u]=k.useState(!1),[p,h]=k.useState(new Date),[f,m]=k.useState(""),[g,y]=k.useState(Th),[b,S]=k.useState(null),v=(M,j)=>{S({show:!0,type:M,message:j}),setTimeout(()=>S(null),2e3)};k.useEffect(()=>{N()},[]);const N=async()=>{try{const M=await se.get(J.HEALTH,"cycle_logs"),j=await se.get(J.HEALTH,"cycle_settings");if(M&&n(M.sort((P,L)=>new Date(L.startDate).getTime()-new Date(P.startDate).getTime())),j){const P={...Th,...j};a(P),y(P)}}catch(M){console.error("Failed to load cycle data",M)}},C=()=>{m(new Date().toISOString().split("T")[0]),l(!0)},_=async()=>{if(!f)return;if(t.some(P=>P.startDate===f)){v("error","");return}const j=[{id:Date.now().toString(),startDate:f},...t].sort((P,L)=>new Date(L.startDate).getTime()-new Date(P.startDate).getTime());try{await se.set(J.HEALTH,"cycle_logs",j),n(j),l(!1),v("success","")}catch{v("error","")}},R=async M=>{if(confirm(""))try{const j=t.filter(P=>P.id!==M);await se.set(J.HEALTH,"cycle_logs",j),n(j),v("success","")}catch{v("error","")}},D=async()=>{try{await se.set(J.HEALTH,"cycle_settings",g),a(g),u(!1),v("success","")}catch{v("error","")}},V=M=>new Date(M.getFullYear(),M.getMonth()+1,0).getDate(),I=M=>new Date(M.getFullYear(),M.getMonth(),1).getDay(),A=M=>{const j=new Date(p.getFullYear(),p.getMonth()+M,1);h(j)},U=M=>{const j=new Date(p.getFullYear(),p.getMonth(),M);j.getTime();for(const P of t){const L=new Date(P.startDate);L.setHours(12,0,0,0),j.setHours(12,0,0,0);const B=j.getTime()-L.getTime(),q=Math.round(B/(1e3*60*60*24));if(q>=0&&q<s.periodLength)return{type:"recorded",dayIndex:q}}if(t.length>0){const P=t[0],L=new Date(P.startDate);L.setHours(12,0,0,0),j.setHours(12,0,0,0);const q=(j.getTime()-L.getTime())/(1e3*60*60*24);if(q<0)return null;const G=Math.floor(q/s.cycleLength),O=$=>{if($<=0)return!1;const K=new Date(L);K.setDate(L.getDate()+$*s.cycleLength);const H=j.getTime()-K.getTime(),ee=Math.round(H/(1e3*60*60*24));return ee>=0&&ee<s.periodLength};if(O(G)||O(G+1))return{type:"predicted"}}return null},T=A5(t,s);return r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10",children:[r.jsx("button",{onClick:e,className:"w-10 h-10 bg-white/40 backdrop-blur-md border border-white/40 rounded-2xl flex items-center justify-center text-[#6B7C93] transition-transform active:scale-90 active:bg-white/60",children:r.jsx(dn,{className:"w-5 h-5",strokeWidth:2.5})}),r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("span",{className:"text-[11px] font-bold text-[#9FA8DA] tracking-[0.2em] uppercase mb-0.5",children:"Cycle Log"}),r.jsx("h1",{className:"text-lg font-black text-[#5C6B7F] tracking-wide",children:""})]}),r.jsx("button",{onClick:()=>u(!0),className:"w-10 h-10 bg-white/40 backdrop-blur-md border border-white/40 rounded-2xl flex items-center justify-center text-[#6B7C93] transition-transform active:scale-90 active:bg-white/60",children:r.jsx(El,{className:"w-5 h-5",strokeWidth:2.5})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[r.jsxs("div",{className:"bg-white/40 backdrop-blur-md border border-white/50 p-6 rounded-[2rem]",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("button",{onClick:()=>A(-1),className:"p-2 text-[#7D8CA3] active:bg-white/40 rounded-xl transition-colors",children:r.jsx(dn,{className:"w-5 h-5"})}),r.jsxs("h2",{className:"text-lg font-black text-[#5C6B7F]",children:[p.getFullYear()," ",p.getMonth()+1,""]}),r.jsx("button",{onClick:()=>A(1),className:"p-2 text-[#7D8CA3] active:bg-white/40 rounded-xl transition-colors",children:r.jsx(Qn,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"grid grid-cols-7 mb-4",children:["","","","","","",""].map((M,j)=>r.jsx("div",{className:"text-center text-xs font-bold text-[#9FA8DA]",children:M},j))}),r.jsxs("div",{className:"grid grid-cols-7 gap-y-4",children:[Array.from({length:I(p)}).map((M,j)=>r.jsx("div",{},`empty-${j}`)),Array.from({length:V(p)}).map((M,j)=>{const P=j+1,L=U(P),B=new Date().toDateString()===new Date(p.getFullYear(),p.getMonth(),P).toDateString();let q="",G="text-[#7D8CA3]";return L?.type==="recorded"?(q="bg-[#FFB7B2] shadow-sm",G="text-white font-bold"):L?.type==="predicted"?(q="bg-[#FFEBEE] border-2 border-dashed border-[#FFB7B2]",G="text-[#E57373] font-bold"):B&&(q="bg-white shadow-sm",G="text-[#5C6B7F] font-bold"),r.jsx("div",{className:"flex flex-col items-center justify-center relative",children:r.jsx("div",{className:`
                          w-8 h-8 flex items-center justify-center rounded-full text-sm font-medium transition-all
                          ${q} ${G}
                       `,children:P})},P)})]}),r.jsxs("div",{className:"flex justify-center gap-6 mt-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-[#FFB7B2]"}),r.jsx("span",{className:"text-[10px] text-[#7D8CA3]",children:""})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-[#FFEBEE] border border-dashed border-[#FFB7B2]"}),r.jsx("span",{className:"text-[10px] text-[#7D8CA3]",children:""})]})]})]}),r.jsxs("div",{className:"relative bg-gradient-to-br from-[#FFD1DC] to-[#FFB7B2] p-8 rounded-[2.5rem] text-center overflow-hidden shadow-md",children:[r.jsx("div",{className:"absolute top-[-20%] right-[-20%] w-48 h-48 bg-white/20 rounded-full blur-[40px] pointer-events-none"}),r.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-32 h-32 bg-[#E57373]/10 rounded-full blur-[30px] pointer-events-none mix-blend-overlay"}),r.jsxs("div",{className:"relative z-10",children:[r.jsx("div",{className:"w-16 h-16 mx-auto bg-white/30 backdrop-blur-sm rounded-full flex items-center justify-center mb-4 border border-white/40",children:r.jsx(Gw,{className:"w-8 h-8 text-white drop-shadow-sm"})}),T.type==="none"?r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-black text-white mb-1 tracking-wide drop-shadow-sm",children:""}),r.jsx("p",{className:"text-xs text-white/80 font-medium",children:""})]}):T.type==="period"?r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-black text-white mb-1 tracking-wide drop-shadow-sm",children:T.message}),r.jsx("p",{className:"text-xs text-white/90 font-bold bg-white/20 inline-block px-3 py-1 rounded-full backdrop-blur-sm",children:T.days>0?` ${T.days} `:""})]}):r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-bold text-white/70 uppercase tracking-widest mb-2",children:T.message}),r.jsxs("div",{className:"flex items-baseline justify-center gap-2 text-white drop-shadow-sm",children:[r.jsx("span",{className:"text-5xl font-black leading-none",children:T.days}),r.jsx("span",{className:"text-lg font-bold opacity-80",children:""})]})]}),r.jsx("button",{onClick:C,className:"mt-6 bg-white text-[#FFB7B2] px-6 py-2.5 rounded-2xl text-[10px] font-black uppercase tracking-widest active:scale-95 transition-transform shadow-sm",children:""})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-xs font-bold text-[#9FA8DA] uppercase tracking-widest mb-4 flex items-center gap-2 pl-2",children:[r.jsx(Rs,{className:"w-4 h-4"})," "]}),r.jsx("div",{className:"space-y-3 pb-8",children:t.length===0?r.jsx("div",{className:"p-8 text-center bg-white/40 border-2 border-dashed border-[#E0E0E0] rounded-[1.5rem] text-xs text-[#9E9E9E]",children:""}):t.map(M=>r.jsxs("div",{className:"bg-white/40 backdrop-blur-sm border border-white/50 p-4 rounded-2xl flex items-center justify-between active:bg-white/60 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-2 h-10 bg-[#FFD1DC] rounded-full"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-base font-bold text-[#5C6B7F]",children:new Date(M.startDate).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"})}),r.jsx("div",{className:"text-[10px] text-[#FFB7B2] font-black uppercase tracking-wider bg-[#FFEBEE] px-2 py-0.5 rounded-md inline-block mt-1",children:""})]})]}),r.jsx("button",{onClick:()=>R(M.id),className:"w-10 h-10 rounded-xl flex items-center justify-center text-[#D6D3CC] active:bg-[#FFEBEE] active:text-[#E57373] transition-colors",children:r.jsx(xn,{className:"w-5 h-5"})})]},M.id))})]})]}),r.jsx(Be,{children:i&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6",children:[r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>l(!1),className:"absolute inset-0 bg-[#5C6B7F]/20 backdrop-blur-sm"}),r.jsxs(me.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:300,damping:25},className:"bg-[#FDFBF7]/95 backdrop-blur-xl w-full max-w-[320px] rounded-[2rem] border border-white/50 shadow-md overflow-hidden relative z-10",children:[r.jsxs("div",{className:"bg-white/40 border-b border-white/50 p-6 flex justify-between items-center",children:[r.jsx("span",{className:"text-lg font-black tracking-wide text-[#5C6B7F]",children:""}),r.jsx("button",{onClick:()=>l(!1),className:"bg-white/40 p-1 rounded-full text-[#7D8CA3] active:bg-white/60 transition-colors",children:r.jsx(xt,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-8",children:[r.jsx("label",{className:"block text-xs font-bold text-[#9FA8DA] mb-4 uppercase tracking-wider text-center",children:""}),r.jsx("input",{type:"date",value:f,onChange:M=>m(M.target.value),className:"w-full bg-white/50 border border-white/60 px-4 py-4 rounded-2xl text-center font-mono font-bold text-[#5C6B7F] focus:border-[#FFB7B2] focus:outline-none focus:ring-2 focus:ring-[#FFB7B2]/20 mb-8"}),r.jsx("button",{onClick:_,className:"w-full bg-[#FFB7B2] text-white py-4 text-xs font-bold uppercase tracking-widest active:scale-95 transition-all rounded-2xl shadow-sm",children:""})]})]})]})}),r.jsx(Be,{children:c&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6",children:[r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>u(!1),className:"absolute inset-0 bg-[#5C6B7F]/20 backdrop-blur-sm"}),r.jsxs(me.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:300,damping:25},className:"bg-[#FDFBF7]/95 backdrop-blur-xl w-full max-w-[320px] rounded-[2rem] border border-white/50 shadow-md overflow-hidden relative z-10",children:[r.jsxs("div",{className:"bg-white/40 border-b border-white/50 p-6 flex justify-between items-center",children:[r.jsx("span",{className:"text-lg font-black tracking-wide text-[#5C6B7F]",children:""}),r.jsx("button",{onClick:()=>u(!1),className:"bg-white/40 p-1 rounded-full text-[#7D8CA3] active:bg-white/60 transition-colors",children:r.jsx(xt,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-8 space-y-8",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center justify-between text-xs font-bold text-[#7D8CA3] mb-3 uppercase tracking-wider",children:[r.jsx("span",{children:""}),r.jsxs("span",{className:"text-[#FFB7B2] bg-[#FFEBEE] px-2 py-1 rounded-md",children:[g.cycleLength,""]})]}),r.jsx("input",{type:"range",min:"20",max:"45",value:g.cycleLength,onChange:M=>y({...g,cycleLength:parseInt(M.target.value)}),className:"w-full accent-[#FFB7B2] h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center justify-between text-xs font-bold text-[#7D8CA3] mb-3 uppercase tracking-wider",children:[r.jsx("span",{children:""}),r.jsxs("span",{className:"text-[#FFB7B2] bg-[#FFEBEE] px-2 py-1 rounded-md",children:[g.periodLength,""]})]}),r.jsx("input",{type:"range",min:"2",max:"10",value:g.periodLength,onChange:M=>y({...g,periodLength:parseInt(M.target.value)}),className:"w-full accent-[#FFB7B2] h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),r.jsx("div",{className:"pt-2",children:r.jsxs("button",{onClick:D,className:"w-full bg-[#5C6B7F] text-white py-4 text-xs font-bold uppercase tracking-widest active:bg-[#4A5568] transition-colors flex items-center justify-center gap-2 rounded-2xl shadow-sm",children:[r.jsx(ti,{className:"w-4 h-4"}),""]})})]})]})]})}),r.jsx(Be,{children:b&&b.show&&r.jsx("div",{className:"fixed top-[90px] inset-x-0 z-[100] flex justify-center pointer-events-none",children:r.jsxs(me.div,{initial:{scale:.9,opacity:0,y:-10},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},className:"mx-auto w-fit flex items-center gap-2 px-4 py-3 pointer-events-auto",style:{background:"rgba(253, 251, 247, 0.85)",backdropFilter:"blur(12px)",border:"1px solid rgba(255, 255, 255, 0.6)",borderRadius:"20px",color:"#5C6B7F",boxShadow:"0 10px 40px -10px rgba(92, 107, 127, 0.15)",fontSize:"13px",fontWeight:"bold"},children:[r.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-white ${b.type==="success"?"bg-[#FFB7B2]":"bg-[#E57373]"}`,children:b.type==="success"?r.jsx(Et,{className:"w-3 h-3",strokeWidth:3}):r.jsx(xt,{className:"w-3 h-3",strokeWidth:3})}),r.jsx("span",{children:b.message})]})})})]})}function uP({onBack:e}){const[t,n]=k.useState([]),[s,a]=k.useState(!1),[i,l]=k.useState(null),[c,u]=k.useState(""),[p,h]=k.useState(""),[f,m]=k.useState("treating"),[g,y]=k.useState(""),[b,S]=k.useState(null),v=(A,U)=>{S({show:!0,type:A,message:U}),setTimeout(()=>S(null),2e3)};k.useEffect(()=>{N()},[]);const N=async()=>{try{const A=await se.get(J.HEALTH,"diagnosis_logs");A&&n(A.sort((U,W)=>new Date(W.startDate).getTime()-new Date(U.startDate).getTime()))}catch(A){console.error("Failed to load diagnosis logs",A)}},C=()=>{u(""),h(""),m("treating");const A=new Date().toISOString().split("T")[0];y(A),l(null)},_=()=>{C(),a(!0)},R=A=>{u(A.illnessName),h(A.symptoms),m(A.status),y(A.startDate),l(A),a(!0)},D=async()=>{if(!c.trim()){v("error","");return}if(!g){v("error","");return}try{let A=[...t];i?(A=A.map(U=>U.id===i.id?{...U,illnessName:c,symptoms:p,status:f,startDate:g,endDate:f==="recovered"&&!U.endDate?new Date().toISOString().split("T")[0]:f==="treating"?void 0:U.endDate}:U),v("success","")):(A=[{id:Date.now().toString(),illnessName:c,symptoms:p,status:f,startDate:g,createdAt:new Date().toISOString()},...A],v("success","")),await se.set(J.HEALTH,"diagnosis_logs",A),n(A.sort((U,W)=>new Date(W.startDate).getTime()-new Date(U.startDate).getTime())),a(!1),C()}catch{v("error","")}},V=async A=>{if(confirm(""))try{const U=t.filter(W=>W.id!==A);await se.set(J.HEALTH,"diagnosis_logs",U),n(U),v("success","")}catch{v("error","")}},I=A=>{const U=new Date(A);return`${U.getFullYear()}${U.getMonth()+1}${U.getDate()}`};return r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10",children:[r.jsx("button",{onClick:e,className:"w-10 h-10 bg-white/40 backdrop-blur-md border border-white/40 rounded-2xl flex items-center justify-center text-[#6B7C93] transition-transform active:scale-90 active:bg-white/60",children:r.jsx(dn,{className:"w-5 h-5",strokeWidth:2.5})}),r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("span",{className:"text-[11px] font-bold text-[#9FA8DA] tracking-[0.2em] uppercase mb-0.5",children:"Medical Records"}),r.jsx("h1",{className:"text-lg font-black text-[#5C6B7F] tracking-wide",children:""})]}),r.jsx("button",{onClick:_,className:"w-10 h-10 bg-[#AEC6CF] text-white rounded-2xl flex items-center justify-center shadow-md shadow-[#AEC6CF]/30 transition-transform active:scale-90",children:r.jsx(Zn,{className:"w-5 h-5",strokeWidth:2.5})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:t.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-60",children:[r.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:r.jsx(Jw,{className:"w-10 h-10 text-gray-300"})}),r.jsx("p",{className:"text-sm font-medium text-gray-400",children:""})]}):r.jsx("div",{className:"space-y-4",children:t.map(A=>r.jsxs("div",{onClick:()=>R(A),className:`group relative bg-white/60 border border-white/50 p-5 rounded-[2rem] text-left transition-transform active:scale-[0.98] overflow-hidden ${A.status==="recovered"?"opacity-70 grayscale-[0.5]":""}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-black text-[#5C6B7F] mb-1",children:A.illnessName}),r.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-lg text-[10px] font-bold uppercase tracking-wider ${A.status==="treating"?"bg-[#FFEBEE] text-[#E57373]":"bg-[#E0F2F1] text-[#4DB6AC]"}`,children:A.status==="treating"?"":""})]}),r.jsx("button",{onClick:U=>{U.stopPropagation(),V(A.id)},className:"p-2 rounded-xl text-[#B0BEC5] hover:bg-red-50 hover:text-red-400 transition-colors",children:r.jsx(xn,{className:"w-4 h-4"})})]}),A.symptoms&&r.jsx("p",{className:"text-xs text-[#7D8CA3] mb-4 line-clamp-2 bg-white/30 p-3 rounded-xl",children:A.symptoms}),r.jsx("div",{className:"flex items-center gap-4 text-[10px] text-[#9FA8DA] font-bold tracking-wide",children:r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(Rs,{className:"w-3 h-3"}),I(A.startDate)]})})]},A.id))})}),r.jsx(Be,{children:s&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center sm:p-6",children:[r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>a(!1),className:"absolute inset-0 bg-[#5C6B7F]/20 backdrop-blur-sm"}),r.jsxs(me.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",stiffness:300,damping:30},className:"bg-[#FDFBF7] w-full max-w-[400px] h-[85vh] sm:h-auto sm:rounded-[2.5rem] rounded-t-[2.5rem] border border-white/50 shadow-2xl flex flex-col relative z-10",children:[r.jsxs("div",{className:"p-6 pb-2 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-black text-[#5C6B7F]",children:i?"":""}),r.jsx("p",{className:"text-xs text-[#9FA8DA] mt-0.5",children:""})]}),r.jsx("button",{onClick:()=>a(!1),className:"w-8 h-8 rounded-full bg-black/5 flex items-center justify-center text-[#7D8CA3]",children:r.jsx(xt,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-[10px] font-bold text-[#7D8CA3] uppercase tracking-wider pl-1",children:""}),r.jsx("input",{type:"text",placeholder:"",value:c,onChange:A=>u(A.target.value),className:"w-full bg-white border border-[#E0E0E0] p-4 rounded-2xl text-sm font-bold text-[#5C6B7F] placeholder:text-[#D1D5DB] focus:border-[#AEC6CF] focus:outline-none focus:ring-2 focus:ring-[#AEC6CF]/20 transition-all"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-[10px] font-bold text-[#7D8CA3] uppercase tracking-wider pl-1",children:""}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"date",value:g,onChange:A=>y(A.target.value),className:"w-full bg-white border border-[#E0E0E0] p-4 rounded-2xl text-sm font-bold text-[#5C6B7F] placeholder:text-[#D1D5DB] focus:border-[#AEC6CF] focus:outline-none focus:ring-2 focus:ring-[#AEC6CF]/20 transition-all appearance-none"}),r.jsx(Rs,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 text-[#B0BEC5] pointer-events-none"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-[10px] font-bold text-[#7D8CA3] uppercase tracking-wider pl-1",children:""}),r.jsx("textarea",{placeholder:"...",value:p,onChange:A=>h(A.target.value),rows:4,className:"w-full bg-white border border-[#E0E0E0] p-4 rounded-2xl text-sm font-medium text-[#5C6B7F] placeholder:text-[#D1D5DB] focus:border-[#AEC6CF] focus:outline-none focus:ring-2 focus:ring-[#AEC6CF]/20 transition-all resize-none"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-[10px] font-bold text-[#7D8CA3] uppercase tracking-wider pl-1",children:""}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("button",{type:"button",onClick:()=>m("treating"),className:`p-4 rounded-2xl flex items-center justify-center gap-2 transition-all active:scale-[0.98] ${f==="treating"?"bg-[#FFEBEE] text-[#E57373] ring-1 ring-[#E57373]/20 shadow-inner":"bg-white border border-[#E0E0E0] text-[#B0BEC5]"}`,children:[r.jsx(Hm,{className:"w-4 h-4"}),r.jsx("span",{className:"text-xs font-bold",children:""})]}),r.jsxs("button",{type:"button",onClick:()=>m("recovered"),className:`p-4 rounded-2xl flex items-center justify-center gap-2 transition-all active:scale-[0.98] ${f==="recovered"?"bg-[#E0F2F1] text-[#4DB6AC] ring-1 ring-[#4DB6AC]/20 shadow-inner":"bg-white border border-[#E0E0E0] text-[#B0BEC5]"}`,children:[r.jsx(Et,{className:"w-4 h-4"}),r.jsx("span",{className:"text-xs font-bold",children:""})]})]})]})]}),r.jsx("div",{className:"p-6 border-t border-gray-100 bg-white/50 backdrop-blur-sm rounded-b-[2.5rem]",children:r.jsxs("button",{onClick:D,className:"w-full bg-[#AEC6CF] text-white py-4 rounded-2xl font-bold text-sm tracking-widest uppercase shadow-lg shadow-[#AEC6CF]/30 active:scale-[0.98] transition-transform flex items-center justify-center gap-2",children:[r.jsx(Et,{className:"w-5 h-5"}),""]})})]})]})}),r.jsx(Be,{children:b&&b.show&&r.jsx("div",{className:"fixed top-[90px] inset-x-0 z-[100] flex justify-center pointer-events-none",children:r.jsxs(me.div,{initial:{scale:.9,opacity:0,y:-10},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},className:"mx-auto w-fit flex items-center gap-2 px-4 py-3 pointer-events-auto",style:{background:"rgba(253, 251, 247, 0.85)",backdropFilter:"blur(12px)",border:"1px solid rgba(255, 255, 255, 0.6)",borderRadius:"20px",color:"#5C6B7F",boxShadow:"0 10px 40px -10px rgba(92, 107, 127, 0.15)",fontSize:"13px",fontWeight:"bold"},children:[r.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-white ${b.type==="success"?"bg-[#8FBC8F]":"bg-[#E57373]"}`,children:b.type==="success"?r.jsx(Et,{className:"w-3 h-3",strokeWidth:3}):r.jsx(xt,{className:"w-3 h-3",strokeWidth:3})}),r.jsx("span",{children:b.message})]})})})]})}function Xb(){return r.jsxs("div",{className:"absolute inset-0 opacity-60 pointer-events-none overflow-hidden",children:[r.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[70%] h-[70%] bg-[#FFD1DC] rounded-full mix-blend-multiply filter blur-[90px]"}),r.jsx("div",{className:"absolute top-[10%] right-[-10%] w-[60%] h-[60%] bg-[#C1E1C1] rounded-full mix-blend-multiply filter blur-[90px]"}),r.jsx("div",{className:"absolute bottom-[-20%] left-[20%] w-[80%] h-[80%] bg-[#AEC6CF] rounded-full mix-blend-multiply filter blur-[90px]"}),r.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[60%] h-[60%] bg-[#E6E6FA] rounded-full mix-blend-multiply filter blur-[90px]"})]})}const Jb={enter:e=>({x:e>0?"100%":"-25%",opacity:0}),center:{x:0,opacity:1},exit:e=>({x:e<0?"100%":"-25%",opacity:0})};function fP({onClose:e}){const[t,n]=k.useState("dashboard"),[s,a]=k.useState(0),i=k.useRef(!0);k.useEffect(()=>{const u=setTimeout(()=>{i.current=!1},500);return()=>clearTimeout(u)},[]);const l=u=>{a(1),n(u)},c=()=>{a(-1),n("dashboard")};return r.jsxs("div",{className:"fixed inset-0 z-50 bg-[#FDFBF7] font-['Source_Han_Sans_CN_VF',sans-serif] overflow-hidden",children:[r.jsx(Xb,{}),r.jsx("div",{className:"relative z-10 h-full w-full",children:r.jsx(Be,{initial:!1,custom:s,children:t==="dashboard"?r.jsx(me.div,{custom:s,variants:Jb,initial:i.current?"center":"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"absolute inset-0 w-full h-full",children:r.jsx(lP,{onClose:e,onNavigate:l})},"dashboard"):r.jsxs(me.div,{custom:s,variants:Jb,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"absolute inset-0 w-full h-full bg-[#FDFBF7] will-change-transform",children:[r.jsx(Xb,{}),r.jsxs("div",{className:"relative z-10 h-full",children:[t==="sleep"&&r.jsx(cP,{onBack:c}),t==="cycle"&&r.jsx(dP,{onBack:c}),t==="diagnosis"&&r.jsx(uP,{onBack:c})]})]},t)})})]})}const hP={idle:"",loading:"",success:"",error:""};function pP({state:e,onDismiss:t,message:n}){return k.useEffect(()=>{if(e==="success"||e==="error"){const s=setTimeout(t,2e3);return()=>clearTimeout(s)}},[e,t]),e==="idle"?null:r.jsx(Be,{children:r.jsx("div",{className:"fixed bottom-32 left-0 right-0 flex justify-center z-[100] pointer-events-none",children:r.jsxs(me.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{type:"spring",stiffness:300,damping:30},className:"bg-[#4B4B4B] text-white/90 px-6 py-2.5 rounded-full text-sm tracking-wide font-medium shadow-xl flex items-center gap-2.5 backdrop-blur-sm",children:[e==="loading"&&r.jsx(me.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-3.5 h-3.5 border-2 border-white/20 border-t-white/90 rounded-full"}),r.jsx("span",{children:n||hP[e]})]})})})}const mP=[{id:"recommended",label:""},{id:"food",label:""},{id:"charm",label:""},{id:"stationery",label:""},{id:"furniture",label:""},{id:"attire",label:""}],Pp=[{id:"f1",category:"food",name:"",price:800,description:""},{id:"f2",category:"food",name:"",price:150,description:""},{id:"f3",category:"food",name:"",price:450,description:""},{id:"f4",category:"food",name:"",price:1200,description:""},{id:"f5",category:"food",name:"",price:300,description:""},{id:"f6",category:"food",name:"",price:500,description:""},{id:"c1",category:"charm",name:"",price:500,description:""},{id:"c2",category:"charm",name:"",price:1e3,description:""},{id:"c3",category:"charm",name:"",price:600,description:""},{id:"c4",category:"charm",name:"",price:300,description:""},{id:"st1",category:"stationery",name:"",price:100,description:""},{id:"st2",category:"stationery",name:"",price:450,description:""},{id:"st3",category:"stationery",name:"",price:600,description:""},{id:"st4",category:"stationery",name:"",price:300,description:""},{id:"d1",category:"furniture",name:"",price:500,description:""},{id:"d2",category:"furniture",name:"",price:1200,description:""},{id:"d3",category:"furniture",name:"",price:800,description:""},{id:"d4",category:"furniture",name:"",price:400,description:""},{id:"d5",category:"furniture",name:"",price:2500,description:""},{id:"a1",category:"attire",name:"",price:5e3,description:""},{id:"a2",category:"attire",name:"",price:800,description:""}],xP=["f1","c2","d5","f2","a1","st3"];function gP({onAddToCart:e}){const[t,n]=k.useState("recommended"),[s,a]=k.useState(""),[i,l]=k.useState([]),[c,u]=k.useState(!1),[p,h]=k.useState("idle"),[f,m]=k.useState(void 0);k.useEffect(()=>{(async()=>{const C=await se.get(J.MISC,"shop_products");C&&C.length>0?l(C):(l(Pp),se.set(J.MISC,"shop_products",Pp))})()},[]);const g=k.useCallback(N=>{const C=N.map(_=>({..._,category:_.category||"recommended"}));l(_=>{const R=C[0].category;let D=[..._];return R==="recommended"?(D=_.filter(V=>V.category!=="recommended"),D=[...C,...D]):(D=_.filter(V=>V.category!==R),D=[...C,...D]),se.set(J.MISC,"shop_products",D),D}),u(!1),m(void 0),h("success")},[]);k.useEffect(()=>{const N=async _=>{if(_.data?.type==="AI_TASK_COMPLETED"&&_.data.payload?.taskType==="shop_generation"){const{shopItems:R}=_.data.payload.result;R&&R.length>0&&g(R)}else _.data?.type==="AI_TASK_FAILED"&&_.data.payload?.taskType==="shop_generation"&&(u(!1),m(void 0),h("error"))},C=async _=>{const R=_,{taskId:D,task:V}=R.detail;if(V.type==="shop_generation"){console.log("[ShopStore] Service Worker :",D);try{const{payload:I}=V,A=await fetch(`${I.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${I.apiKey}`},body:JSON.stringify({model:I.modelName,messages:[{role:"system",content:I.systemPrompt},{role:"user",content:I.userPrompt}],temperature:I.temperature,max_tokens:I.maxTokens})});if(!A.ok)throw new Error(`API Error: ${A.status}`);const W=(await A.json()).choices?.[0]?.message?.content||"";if(!W)throw new Error("AI");let T=[];try{let M=W;const j=W.match(/```(?:json)?\s*(\{[\s\S]*?\})\s*```/);if(j)M=j[1];else{const L=W.indexOf("{"),B=W.lastIndexOf("}");L!==-1&&B!==-1&&(M=W.substring(L,B+1))}T=JSON.parse(M).items||[],T=T.map(L=>({...L,id:L.id||`gen-${Date.now()}-${Math.random().toString(36).substr(2,5)}`,category:L.category||"recommended"}))}catch(M){throw console.error("JSON Parse Failed",M),new Error("")}if(T.length>0)g(T);else throw new Error("")}catch(I){console.error("[ShopStore] Fallback failed",I),u(!1),m(void 0),h("error")}}};return"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",N),window.addEventListener("ai-task-needs-fallback",C),()=>{"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener("message",N),window.removeEventListener("ai-task-needs-fallback",C)}},[g]);const y=async()=>{if(!c){u(!0),m(void 0),h("loading");try{await Dp({category:t})}catch(N){console.error(N),u(!1),m(void 0),h("error")}}},b=async()=>{if(!(!s.trim()||c)){u(!0),m(`${s}...`),h("loading"),n("recommended");try{await Dp({category:"recommended",keyword:s.trim()}),a("")}catch(N){console.error(N),u(!1),m(void 0),h("error")}}},S=N=>{e?e(N):(m(""),h("success"))},v=i.filter(N=>s&&!N.name.toLowerCase().includes(s.toLowerCase())?!1:t==="recommended"?i.some(_=>_.category==="recommended")?N.category==="recommended":xP.includes(N.id):N.category===t);return r.jsxs("div",{className:"h-full flex flex-col overflow-hidden bg-[#FCFCFA] relative",children:[r.jsx("div",{className:"px-6 pb-2",children:r.jsxs("div",{className:"relative border-b border-black/5 focus-within:border-[#C93A40] transition-colors",children:[r.jsx("input",{type:"text",placeholder:"...",value:s,onChange:N=>a(N.target.value),onKeyDown:N=>{N.key==="Enter"&&b()},className:"w-full bg-transparent py-4 pl-0 pr-8 text-sm placeholder:text-[#9CA3AF] focus:outline-none text-[#2D2D2D]"}),r.jsx("button",{onClick:b,className:"absolute right-0 top-1/2 -translate-y-1/2 p-2 hover:bg-black/5 rounded-full transition-colors active:scale-90",children:r.jsx(ga,{className:"w-4 h-4 text-[#9CA3AF]",strokeWidth:1.5})})]})}),r.jsxs("div",{className:"pt-4 pb-2 flex items-center pr-4",children:[r.jsx("div",{className:"flex-1 flex gap-6 overflow-x-auto px-6 pb-2 no-scrollbar",children:mP.map(N=>r.jsxs("button",{onClick:()=>n(N.id),className:`whitespace-nowrap text-sm transition-colors relative flex flex-col items-center gap-1 pb-1
                        ${t===N.id?"font-medium text-[#2D2D2D]":"text-[#2D2D2D]/40 hover:text-[#2D2D2D]/70"}`,children:[N.label,t===N.id&&r.jsx(me.div,{layoutId:"category-indicator",className:"absolute bottom-0 w-1 h-1 rounded-full bg-[#C93A40]"})]},N.id))}),r.jsx("button",{onClick:y,disabled:c,className:`p-2 rounded-full transition-all ${c?"opacity-50 cursor-not-allowed":"hover:bg-black/5 active:scale-90"}`,children:r.jsx(k9,{className:`w-4 h-4 text-[#9CA3AF] ${c?"animate-[spin_1s_linear_infinite_reverse]":""}`,strokeWidth:1.5})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto px-6 pb-32 no-scrollbar",children:[r.jsx(Be,{children:t==="recommended"&&!s&&r.jsx(me.div,{initial:{opacity:0,height:0,marginBottom:0},animate:{opacity:1,height:"auto",marginBottom:32},exit:{opacity:0,height:0,marginBottom:0},className:"overflow-hidden",children:r.jsxs("div",{className:"pt-4",children:[r.jsx("h2",{className:"text-3xl font-light text-[#2D2D2D] mb-1",children:""}),r.jsx("h2",{className:"text-3xl font-bold text-[#2D2D2D]",children:""}),r.jsx("p",{className:"text-xs text-[#9CA3AF] mt-2 tracking-widest",children:"LIMITED TIME OFFER"}),r.jsxs("div",{className:"mt-6 w-full aspect-[2.5/1] bg-[#F3F1EB] rounded-lg relative overflow-hidden flex items-center justify-center border border-black/5",children:[r.jsx("span",{className:"text-6xl opacity-20 filter blur-sm",children:""}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx("span",{className:"text-sm font-medium tracking-widest text-[#555]",children:"  "})})]})]})})}),r.jsx(me.div,{layout:!0,className:"grid grid-cols-2 gap-x-4 gap-y-6",children:r.jsx(Be,{mode:"popLayout",children:v.map(N=>r.jsxs(me.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},whileTap:{scale:.98},className:"group cursor-pointer",onClick:()=>S({name:N.name,price:N.price,description:N.description}),children:[r.jsx("div",{className:"aspect-square bg-[#F5F5F0] rounded-xl mb-3 flex items-center justify-center p-4 group-hover:bg-[#EAEAE5] transition-colors relative overflow-hidden",children:r.jsx("p",{className:"text-xs text-[#9CA3AF] text-center leading-relaxed font-medium group-hover:text-[#555] transition-colors line-clamp-4",children:N.description})}),r.jsxs("div",{className:"flex justify-between items-start pl-1",children:[r.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[r.jsx("h3",{className:"text-sm font-medium text-[#2D2D2D] truncate",children:N.name}),r.jsxs("div",{className:"flex items-baseline gap-0.5 mt-1",children:[r.jsx("span",{className:"text-xs font-bold text-[#C93A40]",children:N.price}),r.jsx("span",{className:"text-[10px] text-[#9CA3AF]",children:""})]})]}),r.jsx("button",{onClick:C=>{C.stopPropagation(),S({name:N.name,price:N.price,description:N.description})},className:"w-7 h-7 flex items-center justify-center rounded-full bg-white border border-black/5 shadow-sm text-[#2D2D2D] hover:bg-[#2D2D2D] hover:text-white transition-all active:scale-90",children:r.jsx(Zn,{className:"w-3.5 h-3.5",strokeWidth:1.5})})]})]},N.id))})}),v.length===0&&r.jsx("div",{className:"py-20 text-center",children:r.jsx("span",{className:"text-sm text-[#9CA3AF]",children:""})})]}),r.jsx(pP,{state:p,message:f,onDismiss:()=>h("idle")})]})}function bP({cartItems:e=[],onRemove:t,onBulkRemove:n,onAdd:s,onCheckout:a}){const[i,l]=k.useState(!1),[c,u]=k.useState(new Set),p=e.reduce((y,b)=>y+b.price,0),h=k.useMemo(()=>{const y=new Map;return e.forEach(b=>{const S=`${b.name}-${b.price}`;if(!y.has(S))y.set(S,{name:b.name,price:b.price,ids:[b.id],count:1});else{const v=y.get(S);v.ids.push(b.id),v.count+=1}}),Array.from(y.values())},[e]),f=y=>{const b=new Set(c);b.has(y)?b.delete(y):b.add(y),u(b)},m=()=>{const y=[];h.forEach(b=>{const S=`${b.name}-${b.price}`;c.has(S)&&y.push(...b.ids)}),y.length>0&&(n?.(y),u(new Set),y.length===e.length&&l(!1))},g=()=>{if(c.size===h.length)u(new Set);else{const y=new Set;h.forEach(b=>{y.add(`${b.name}-${b.price}`)}),u(y)}};return e.length===0?r.jsxs("div",{className:"h-full flex flex-col relative bg-[#FCFCFA]",children:[r.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 -mt-20",children:[r.jsx(su,{className:"w-8 h-8 text-[#E5E5E5] mb-4",strokeWidth:1}),r.jsx("span",{className:"text-xs text-[#9CA3AF] tracking-widest font-light",children:""})]}),r.jsxs("div",{className:"absolute bottom-4 left-8 right-8",children:[r.jsxs("div",{className:"flex justify-between items-end mb-6 px-1",children:[r.jsx("span",{className:"text-[10px] text-[#9CA3AF] tracking-widest uppercase",children:"Total"}),r.jsx("span",{className:"text-xl font-light font-mono text-[#2D2D2D]",children:"0"})]}),r.jsx("button",{disabled:!0,className:"w-full h-12 rounded-full bg-[#F3F3F3] text-[#A3A3A3] text-xs font-medium tracking-widest cursor-not-allowed hover:bg-[#EDEDED] transition-colors flex items-center justify-center",children:""})]})]}):r.jsxs("div",{className:"h-full flex flex-col relative bg-[#FCFCFA]",children:[r.jsxs("div",{className:"flex justify-between items-center px-6 py-2 shrink-0",children:[r.jsx("div",{className:"h-8 flex items-center",children:i&&r.jsx("button",{onClick:g,className:"text-xs text-[#2D2D2D] font-medium tracking-wide hover:opacity-70 transition-opacity",children:c.size===h.length?"":""})}),r.jsx("button",{onClick:()=>{l(!i),u(new Set)},className:"text-xs text-[#9CA3AF] hover:text-[#2D2D2D] transition-colors tracking-wide font-medium",children:i?"":""})]}),r.jsx("div",{className:"flex-1 overflow-y-auto px-6 pt-0 pb-48 no-scrollbar",children:r.jsx(Be,{mode:"popLayout",initial:!1,children:h.map(y=>{const b=`${y.name}-${y.price}`,S=c.has(b);return r.jsxs(me.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-20},onClick:()=>{i&&f(b)},className:`flex items-center gap-4 py-4 border-b border-black/5 ${i?"cursor-pointer":""}`,children:[r.jsx(Be,{mode:"wait",children:i&&r.jsx(me.div,{initial:{width:0,opacity:0,marginRight:0},animate:{width:"auto",opacity:1,marginRight:0},exit:{width:0,opacity:0,marginRight:0},className:"flex items-center justify-center",children:S?r.jsx(Q8,{className:"w-5 h-5 text-[#C93A40] fill-[#C93A40]/10"}):r.jsx(J8,{className:"w-5 h-5 text-[#E5E5E5]"})})}),r.jsx("div",{className:"w-16 h-16 bg-[#F5F5F0] rounded-lg flex items-center justify-center text-[#9CA3AF] flex-shrink-0 relative border border-black/5",children:r.jsx(Za,{className:"w-6 h-6",strokeWidth:1.5})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"text-sm font-medium text-[#2D2D2D] mb-1 truncate",children:y.name}),r.jsxs("div",{className:"flex items-baseline gap-0.5",children:[r.jsx("span",{className:"text-xs font-bold text-[#C93A40]",children:y.price}),r.jsx("span",{className:"text-[10px] text-[#9CA3AF]",children:""})]})]}),r.jsx("div",{className:"flex items-center",children:i?r.jsxs("span",{className:"text-sm font-mono text-[#9CA3AF] px-2",children:["x",y.count]}):r.jsxs("div",{className:"flex items-center gap-3 bg-[#F5F5F0] rounded-full p-1 px-1",children:[r.jsx("button",{onClick:v=>{v.stopPropagation();const N=y.ids[y.ids.length-1];t?.(N)},className:"w-6 h-6 flex items-center justify-center rounded-full bg-white shadow-sm text-[#2D2D2D] hover:text-[#C93A40] active:scale-90 transition-all",children:y.count===0?r.jsx(xn,{className:"w-3 h-3",strokeWidth:2}):r.jsx(Km,{className:"w-3 h-3",strokeWidth:2})}),r.jsx("span",{className:"text-xs font-mono font-medium text-[#2D2D2D] w-4 text-center",children:y.count}),r.jsx("button",{onClick:v=>{v.stopPropagation(),s?.({name:y.name,price:y.price})},className:"w-6 h-6 flex items-center justify-center rounded-full bg-[#2D2D2D] text-white active:scale-90 transition-all shadow-sm",children:r.jsx(Zn,{className:"w-3 h-3",strokeWidth:2})})]})})]},b)})})}),r.jsx("div",{className:"absolute bottom-4 left-8 right-8 bg-[#FCFCFA] pt-4 border-t border-transparent",children:i?r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsx("div",{className:"h-6"})," ",r.jsxs("button",{onClick:m,disabled:c.size===0,className:`w-full h-12 rounded-full text-xs font-medium tracking-widest transition-all flex items-center justify-center shadow-lg
                        ${c.size>0?"bg-[#C93A40] text-white hover:bg-[#B02E34] shadow-[#C93A40]/20":"bg-[#F3F3F3] text-[#A3A3A3] cursor-not-allowed shadow-none"}`,children:[" (",c.size,")"]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex justify-between items-end mb-6 px-1",children:[r.jsx("span",{className:"text-[10px] text-[#9CA3AF] tracking-widest uppercase",children:"Total"}),r.jsxs("div",{className:"flex items-baseline gap-1",children:[r.jsx("span",{className:"text-xl font-light font-mono text-[#2D2D2D]",children:p}),r.jsx("span",{className:"text-[10px] text-[#9CA3AF]",children:""})]})]}),r.jsx("button",{onClick:a,className:"w-full h-12 rounded-full bg-[#2D2D2D] text-white text-xs font-medium tracking-widest hover:bg-black transition-colors flex items-center justify-center shadow-lg shadow-black/5",children:""})]})})]})}function yP({cartItems:e,onBack:t,onComplete:n}){const[s,a]=k.useState([]),[i,l]=k.useState("saniwa"),[c,u]=k.useState({}),[p,h]=k.useState(!1),f=e.reduce((b,S)=>b+S.price,0),m=e.reduce((b,S)=>{const v=`${S.name}-${S.price}`;return b[v]||(b[v]={name:S.name,price:S.price,count:0}),b[v].count+=1,b},{}),g=Object.values(m);k.useEffect(()=>{(async()=>{try{const[S,v,N]=await Promise.all([se.get(J.CHARACTERS,"characters"),se.get(J.USER_DATA,"userData"),se.get(J.MISC,"organizations")]);let C="",_=null;if(N){let V=null;Array.isArray(N)?(V=N.find(I=>I.name&&I.name.includes("")||I.role==="saniwa"||I.isUser===!0),!V&&N.length>0&&N[0].name&&N[0].country&&(V=N[0])):typeof N=="object"&&(V=N),V&&(V.name&&(C=V.name),V.avatar&&(_=V.avatar))}if(C===""&&v?.saniwaName?C=v.saniwaName:C===""&&v?.name&&(C=v.name),!_&&v?.avatar&&(_=v.avatar),!_){const V=await Ct("avatar");V&&(_=V)}const R=[{id:"saniwa",name:C,avatar:_,isUser:!0},...(S||[]).map(V=>({id:V.id,name:V.name||V.kanjiName||"",avatar:V.avatar}))];a(R);const D={};for(const V of R)if(V.avatar)if(V.avatar.startsWith("data:")||V.avatar.startsWith("http")||V.avatar.startsWith("blob:"))D[V.id]=V.avatar;else{const I=await Ct(V.avatar);I&&(D[V.id]=I)}u(D)}catch(S){console.error("Failed to load recipients",S)}})()},[]);const y=()=>{const b=s.find(S=>S.id===i);return b?b.name:""};return r.jsxs("div",{className:"h-full flex flex-col bg-[#FCFCFA] relative overflow-hidden font-['Source_Han_Sans_CN_VF:Regular',sans-serif]",children:[r.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-bl from-[#E5E5E0] to-transparent opacity-40 rounded-bl-full -mr-16 -mt-16 pointer-events-none"}),r.jsxs("div",{className:"px-6 pt-12 pb-5 flex items-center justify-between relative z-10",children:[r.jsx("button",{onClick:t,className:"w-10 h-10 -ml-2 rounded-full flex items-center justify-center hover:bg-black/5 transition-colors group",children:r.jsx(jp,{className:"w-5 h-5 text-[#2D2D2D] group-hover:-translate-x-0.5 transition-transform"})}),r.jsx("span",{className:"text-sm font-medium tracking-widest text-[#2D2D2D] uppercase opacity-60",children:"Checkout"})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar pb-32",children:[r.jsxs("div",{className:"px-8 mb-8",children:[r.jsx("h1",{className:"text-3xl font-light text-[#2D2D2D] mb-2 tracking-wide font-serif",children:""}),r.jsx("p",{className:"text-xs text-[#9CA3AF] tracking-widest uppercase",children:"Payment Confirmation"})]}),r.jsxs("div",{className:"mb-10 px-8 relative z-30",children:[r.jsx("label",{className:"text-[10px] text-[#9CA3AF] tracking-[0.2em] uppercase font-medium mb-3 block",children:""}),r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>h(!p),className:"w-full bg-white rounded-xl h-16 flex items-center justify-between px-4 border border-black/5 shadow-sm hover:border-black/10 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border border-black/5 bg-[#F5F5F0]",children:(()=>{const b=s.find(S=>S.id===i);return b?b.isUser&&!c[b.id]?r.jsx("div",{className:"w-full h-full flex items-center justify-center text-[#9CA3AF]",children:r.jsx(mn,{className:"w-5 h-5"})}):c[b.id]?r.jsx("img",{src:c[b.id],alt:b.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-[#C0C0C0]",children:r.jsx("span",{className:"text-xs",children:b.name[0]})}):null})()}),r.jsx("span",{className:"text-sm font-medium text-[#2D2D2D]",children:y()})]}),r.jsx(Ka,{className:`w-4 h-4 text-[#9CA3AF] transition-transform duration-300 ${p?"rotate-180":""}`})]}),r.jsx(Be,{children:p&&r.jsx(me.div,{initial:{opacity:0,y:10,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:10,height:0},className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-xl border border-black/5 overflow-hidden max-h-64 overflow-y-auto no-scrollbar z-50",children:s.map(b=>r.jsxs("button",{onClick:()=>{l(b.id),h(!1)},className:`w-full flex items-center justify-between px-4 py-3 hover:bg-[#F9F9F7] transition-colors border-b border-black/5 last:border-0
                                        ${i===b.id?"bg-[#F9F9F7]":""}
                                    `,children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden border border-black/5 bg-[#F5F5F0]",children:b.isUser&&!c[b.id]?r.jsx("div",{className:"w-full h-full flex items-center justify-center text-[#9CA3AF]",children:r.jsx(mn,{className:"w-4 h-4"})}):c[b.id]?r.jsx("img",{src:c[b.id],alt:b.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-[#C0C0C0]",children:r.jsx("span",{className:"text-[10px]",children:b.name[0]})})}),r.jsx("span",{className:`text-sm ${i===b.id?"font-medium text-[#C93A40]":"text-[#2D2D2D]"}`,children:b.name})]}),i===b.id&&r.jsx(Et,{className:"w-4 h-4 text-[#C93A40]"})]},b.id))})})]})]}),r.jsx("div",{className:"px-6",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl shadow-[#000000]/[0.03] overflow-hidden border border-black/5 relative",children:[r.jsx("div",{className:"h-1.5 bg-[repeating-linear-gradient(45deg,#F5F5F0,#F5F5F0_10px,#FFFFFF_10px,#FFFFFF_20px)] opacity-50"}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("p",{className:"text-[10px] text-[#9CA3AF] tracking-[0.2em] uppercase mb-4",children:""}),r.jsx("div",{className:"space-y-3",children:g.map((b,S)=>r.jsxs("div",{className:"flex justify-between items-center group",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded bg-[#F5F5F0] flex items-center justify-center text-[#9CA3AF] border border-black/5 flex-shrink-0",children:r.jsx(Za,{className:"w-4 h-4",strokeWidth:1.5})}),r.jsx("span",{className:"text-sm text-[#2D2D2D] font-medium",children:b.name}),b.count>1&&r.jsxs("span",{className:"text-xs text-[#9CA3AF] font-mono",children:["x",b.count]})]}),r.jsx("span",{className:"text-sm text-[#9CA3AF] font-mono",children:b.price.toLocaleString()})]},S))})]}),r.jsx("div",{className:"w-full h-px bg-dashed bg-black/10 border-t border-dashed border-[#E5E5E0] mb-6"}),r.jsxs("div",{className:"flex justify-between items-start mb-8",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] text-[#9CA3AF] tracking-[0.2em] uppercase mb-1",children:""}),r.jsxs("div",{className:"flex items-baseline gap-1",children:[r.jsx("span",{className:"text-4xl font-light text-[#2D2D2D] font-mono",children:f.toLocaleString()}),r.jsx("span",{className:"text-xs text-[#9CA3AF] font-medium",children:""})]})]}),r.jsx("div",{className:"w-10 h-10 bg-[#F9F9F7] rounded-full flex items-center justify-center text-[#C93A40]",children:r.jsx(s7,{className:"w-5 h-5 stroke-[1.5px]"})})]}),r.jsx("div",{className:"flex items-center gap-2 mb-6 opacity-30",children:r.jsx("div",{className:"w-full h-px bg-black/20"})}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center group cursor-default",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#2D2D2D] flex items-center justify-center text-white shadow-md shadow-black/10",children:r.jsx(Ww,{className:"w-4 h-4"})}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-sm font-medium text-[#2D2D2D]",children:""}),r.jsx("span",{className:"text-[10px] text-[#9CA3AF]",children:"Koband Pay"})]})]}),r.jsx("div",{className:"w-4 h-4 rounded-full border border-[#C93A40] flex items-center justify-center",children:r.jsx("div",{className:"w-2 h-2 rounded-full bg-[#C93A40]"})})]}),r.jsxs("div",{className:"flex justify-between items-center opacity-60",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#F0F0F0] flex items-center justify-center text-[#9CA3AF]",children:r.jsx("div",{className:"w-2 h-2 bg-[#9CA3AF] rounded-full"})}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-sm font-medium text-[#2D2D2D]",children:""}),r.jsx("span",{className:"text-[10px] text-[#9CA3AF]",children:""})]})]}),r.jsx(Qn,{className:"w-4 h-4 text-[#9CA3AF]"})]})]})]}),r.jsx("div",{className:"relative h-4 bg-[#F9F9F7] mt-2 mx-[-1px] mb-[-1px]",children:r.jsx("div",{className:"absolute top-0 left-0 right-0 h-4 bg-white",style:{clipPath:"polygon(0 0, 100% 0, 98% 100%, 96% 0, 94% 100%, 92% 0, 90% 100%, 88% 0, 86% 100%, 84% 0, 82% 100%, 80% 0, 78% 100%, 76% 0, 74% 100%, 72% 0, 70% 100%, 68% 0, 66% 100%, 64% 0, 62% 100%, 60% 0, 58% 100%, 56% 0, 54% 100%, 52% 0, 50% 100%, 48% 0, 46% 100%, 44% 0, 42% 100%, 40% 0, 38% 100%, 36% 0, 34% 100%, 32% 0, 30% 100%, 28% 0, 26% 100%, 24% 0, 22% 100%, 20% 0, 18% 100%, 16% 0, 14% 100%, 12% 0, 10% 100%, 8% 0, 6% 100%, 4% 0, 2% 100%, 0 0)"}})})]})})]}),r.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 pb-8 bg-white/80 backdrop-blur-xl border-t border-black/5 z-20",children:r.jsxs("button",{onClick:()=>n(y()),className:"w-full h-14 rounded-2xl bg-[#2D2D2D] text-white overflow-hidden relative group shadow-lg shadow-[#2D2D2D]/20 active:scale-[0.98] transition-all",children:[r.jsxs("div",{className:"absolute inset-0 flex items-center justify-center gap-3 z-10",children:[r.jsx("span",{className:"text-sm font-medium tracking-[0.2em] uppercase",children:""}),r.jsx(jp,{className:"w-4 h-4 rotate-180 group-hover:translate-x-1 transition-transform"})]}),r.jsx("div",{className:"absolute top-0 -left-[100%] w-[100%] h-full bg-gradient-to-r from-transparent via-white/10 to-transparent group-hover:left-[100%] transition-all duration-700 ease-in-out"})]})})]})}function vP({onBack:e,currentBalance:t}){const[n,s]=k.useState([]),[a,i]=k.useState(t||0),[l,c]=k.useState(!0);k.useEffect(()=>{(async()=>{try{if(c(!0),t===void 0){const b=await se.get(J.USER_DATA,"userData");b&&typeof b.balance=="number"&&i(b.balance)}let h=await se.get(J.USER_DATA,"asset_transactions")||[];const f=await se.get(J.MISC,"transactions_migrated");if(h.length===0&&!f){console.log("Starting migration of red packet transactions...");const b=await se.getAllKeys(J.CHAT_MESSAGES);for(const S of b)if(typeof S=="string"&&S.startsWith("chat_messages_")){const v=S.replace("chat_messages_","");let N=v;const C=await se.get(J.CHARACTERS,"characters");if(C&&Array.isArray(C)){const R=C.find(D=>D.id===v);R&&(N=R.name)}const _=await se.get(J.CHAT_MESSAGES,S);_&&Array.isArray(_)&&_.forEach(R=>{if(R.redPacket){let D=Date.now();if(R.id&&typeof R.id=="string"){const V=R.id.split("-"),I=parseInt(V[0]);isNaN(I)||(D=I)}R.senderId==="user"?h.push({id:R.id,type:"send",amount:R.redPacket.amount,timestamp:D,partnerName:N,blessing:R.redPacket.blessing}):R.redPacket.opened&&h.push({id:R.id,type:"receive",amount:R.redPacket.amount,timestamp:D,partnerName:N||R.senderName||"",blessing:R.redPacket.blessing})}})}await se.set(J.USER_DATA,"asset_transactions",h),await se.set(J.MISC,"transactions_migrated",!0)}const g=(await se.get(J.USER_DATA,"order_history")||[]).map(b=>({id:b.id,type:"purchase",amount:b.total,timestamp:b.timestamp,partnerName:""})),y=[...h,...g];y.sort((b,S)=>S.timestamp-b.timestamp),s(y)}catch(h){console.error("Failed to load asset details",h)}finally{c(!1)}})()},[]);const u=p=>{const h=new Date(p);return`${h.getFullYear()}/${(h.getMonth()+1).toString().padStart(2,"0")}/${h.getDate().toString().padStart(2,"0")} ${h.getHours().toString().padStart(2,"0")}:${h.getMinutes().toString().padStart(2,"0")}`};return r.jsxs("div",{className:"h-full flex flex-col bg-[#FCFCFA]",children:[r.jsxs("div",{className:"flex items-center px-4 pt-12 pb-4 border-b border-black/5",children:[r.jsx("button",{onClick:e,className:"w-10 h-10 flex items-center justify-center -ml-2 text-[#555] hover:text-[#2D2D2D]",children:r.jsx(dn,{className:"w-6 h-6"})}),r.jsx("h2",{className:"text-lg font-medium text-[#2D2D2D] ml-2",children:""})]}),r.jsxs("div",{className:"px-8 py-6 bg-[#F5F5F0]",children:[r.jsx("p",{className:"text-xs text-[#9CA3AF] mb-1",children:" ()"}),r.jsx("p",{className:"text-3xl font-mono font-medium text-[#2D2D2D]",children:"+"})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:l?r.jsx("div",{className:"py-12 text-center text-[#9CA3AF] text-xs",children:"..."}):n.length===0?r.jsxs("div",{className:"py-20 flex flex-col items-center justify-center text-[#9CA3AF] opacity-60",children:[r.jsx(ga,{className:"w-12 h-12 mb-2 stroke-1"}),r.jsx("p",{className:"text-xs tracking-wider",children:""})]}):r.jsx("div",{className:"divide-y divide-black/5",children:n.map(p=>r.jsxs("div",{className:"px-6 py-4 flex items-center justify-between hover:bg-black/[0.02] transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${p.type==="receive"?"bg-[#FFF5F5] text-[#C93A40]":"bg-[#F5F5F5] text-[#555]"}`,children:p.type==="receive"?r.jsx(y8,{className:"w-5 h-5"}):p.type==="purchase"?r.jsx(su,{className:"w-4 h-4"}):r.jsx(j8,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm font-medium text-[#2D2D2D]",children:[p.type==="receive"?"":p.type==="purchase"?"":"",r.jsxs("span",{className:"text-xs font-normal text-[#9CA3AF] ml-2",children:["- ",p.partnerName]})]}),r.jsx("p",{className:"text-[10px] text-[#9CA3AF] mt-0.5 font-mono",children:u(p.timestamp)})]})]}),r.jsxs("div",{className:`text-sm font-mono font-medium ${p.type==="receive"?"text-[#C93A40]":"text-[#2D2D2D]"}`,children:[p.type==="receive"?"+":"-",p.amount]})]},p.id))})})]})}const wP=({char:e,onSelect:t})=>{const[n,s]=k.useState(null);return k.useEffect(()=>{let a=!0;return(async()=>{if(e.avatar)if(e.avatar.startsWith("data:")||e.avatar.startsWith("http"))a&&s(e.avatar);else{const l=await Ct(e.avatar);a&&l&&s(l)}})(),()=>{a=!1}},[e.avatar]),r.jsxs("button",{onClick:t,className:"w-full flex items-center justify-between p-4 hover:bg-black/5 active:bg-black/10 transition-colors group border-b border-black/5 last:border-0",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-[#F0F0F0] overflow-hidden flex-shrink-0 border border-black/5 relative shadow-sm",children:n?r.jsx("img",{src:n,alt:e.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-[#C0C0C0]",children:r.jsx(mn,{className:"w-5 h-5 stroke-1"})})}),r.jsx("div",{className:"text-left",children:r.jsx("div",{className:"text-base font-medium text-[#2D2D2D] tracking-wide",children:e.name||e.kanjiName||""})})]}),r.jsx("div",{className:"w-8 h-8 rounded-full bg-transparent group-hover:bg-[#C93A40] flex items-center justify-center transition-colors",children:r.jsx(qm,{className:"w-4 h-4 text-[#C9C9C9] group-hover:text-white transition-colors -ml-0.5 mt-0.5",strokeWidth:1.5})})]})};function kP({onBack:e}){const[t,n]=k.useState([]),[s,a]=k.useState(!0),[i,l]=k.useState(!1),[c,u]=k.useState(null),[p,h]=k.useState([]),[f,m]=k.useState(""),[g,y]=k.useState(null);k.useEffect(()=>{(async()=>{try{a(!0);const _=await se.get(J.USER_DATA,"order_history")||[];_.sort((R,D)=>D.timestamp-R.timestamp),n(_)}catch(_){console.error("Failed to load orders",_)}finally{a(!1)}})()},[]),k.useEffect(()=>{i&&(async()=>{const _=await se.get(J.CHARACTERS,"characters")||[];h(_)})()},[i]);const b=C=>{const _=new Date(C);return`${_.getFullYear()}/${(_.getMonth()+1).toString().padStart(2,"0")}/${_.getDate().toString().padStart(2,"0")} ${_.getHours().toString().padStart(2,"0")}:${_.getMinutes().toString().padStart(2,"0")}`},S=C=>{y({message:C}),setTimeout(()=>{y(null)},2e3)},v=async(C,_)=>{if(c)try{const R=new Date,D=c.items.map(j=>{let P=j.description;if(!P){const L=Pp.find(B=>B.name===j.name);L&&(P=L.description)}return{name:j.name,price:j.price,count:j.count,description:P||""}}),I=`[] ${D.map(j=>{const P=j.description?`(${j.description})`:"";return`${j.name}${P} x${j.count} (${j.price})`}).join("; ")} ${c.total} ${c.recipient}`,A={id:Date.now().toString(),text:I,senderId:"user",senderName:"",timestamp:R,isRead:!0,order:{id:c.id,items:D,total:c.total,recipient:c.recipient,timestamp:c.timestamp}},U=await se.get(J.CHAT_MESSAGES,`chat_messages_${C}`)||[];U.push(A),await se.set(J.CHAT_MESSAGES,`chat_messages_${C}`,U);const W=await se.get(J.CHATS,"chat_list")||[],T=W.findIndex(j=>j.id===C),M={id:C,name:_,lastMessage:"[]",lastSender:"",time:`${R.getHours().toString().padStart(2,"0")}:${R.getMinutes().toString().padStart(2,"0")}`,timestamp:R.getTime()};if(T!==-1){const j=W[T];M.isPinned=j.isPinned,M.remark=j.remark,W[T]=M}else W.unshift(M);await se.set(J.CHATS,"chat_list",W),S(""),l(!1),u(null)}catch(R){console.error("Failed to share order",R),Un.error("")}},N=p.filter(C=>C.name&&C.name.toLowerCase().includes(f.toLowerCase())||C.kanjiName&&C.kanjiName.includes(f));return r.jsxs("div",{className:"h-full flex flex-col bg-[#FCFCFA] relative",children:[r.jsxs("div",{className:"flex items-center px-4 pt-12 pb-4 border-b border-black/5",children:[r.jsx("button",{onClick:e,className:"w-10 h-10 flex items-center justify-center -ml-2 text-[#555] hover:text-[#2D2D2D]",children:r.jsx(dn,{className:"w-6 h-6"})}),r.jsx("h2",{className:"text-lg font-medium text-[#2D2D2D] ml-2",children:""})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:s?r.jsx("div",{className:"py-12 text-center text-[#9CA3AF] text-xs",children:"..."}):t.length===0?r.jsxs("div",{className:"py-20 flex flex-col items-center justify-center text-[#9CA3AF] opacity-60",children:[r.jsx(Za,{className:"w-12 h-12 mb-2 stroke-1"}),r.jsx("p",{className:"text-xs tracking-wider",children:""})]}):r.jsx("div",{className:"space-y-6",children:t.map(C=>r.jsxs("div",{className:"bg-white rounded-xl border border-black/5 p-4 shadow-sm relative group",children:[r.jsxs("div",{className:"flex justify-between items-center mb-3 pb-3 border-b border-black/5",children:[r.jsx("span",{className:"text-[10px] text-[#9CA3AF] font-mono tracking-widest",children:b(C.timestamp)}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("span",{className:"text-[10px] text-[#9CA3AF] font-mono tracking-widest",children:["ID: ",C.id.slice(-6).toUpperCase()]}),r.jsx("button",{onClick:()=>{u(C),l(!0)},className:"p-1.5 -mr-1 rounded-full hover:bg-black/5 text-[#9CA3AF] hover:text-[#2D2D2D] transition-colors",title:"",children:r.jsx(Gm,{className:"w-4 h-4"})})]})]}),r.jsx("div",{className:"space-y-3 mb-4",children:C.items.map((_,R)=>r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-[#F5F5F0] rounded flex items-center justify-center text-[#9CA3AF] border border-black/5",children:r.jsx(Za,{className:"w-5 h-5",strokeWidth:1.5})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-[#2D2D2D] truncate",children:_.name}),r.jsxs("p",{className:"text-xs text-[#9CA3AF]",children:["x",_.count]})]}),r.jsx("span",{className:"text-sm font-medium text-[#2D2D2D]",children:_.price*_.count})]},R))}),r.jsxs("div",{className:"pt-3 border-t border-dashed border-black/10 flex justify-between items-end",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[10px] text-[#9CA3AF] mb-0.5 tracking-wider",children:""}),r.jsxs("div",{className:"flex items-center gap-1.5 h-[28px]",children:[r.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-[#C93A40]"}),r.jsx("span",{className:"text-xs font-medium text-[#2D2D2D]",children:C.recipient})]})]}),r.jsxs("div",{className:"flex flex-col items-end",children:[r.jsx("span",{className:"text-[10px] text-[#9CA3AF] mb-0.5 tracking-wider",children:""}),r.jsxs("div",{className:"flex items-baseline gap-1 h-[28px]",children:[r.jsx("span",{className:"text-lg font-mono font-medium text-[#2D2D2D]",children:C.total.toLocaleString()}),r.jsx("span",{className:"text-[10px] text-[#9CA3AF]",children:""})]})]})]})]},C.id))})}),r.jsx(Be,{children:i&&r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-50 bg-black/20 backdrop-blur-sm flex items-end sm:items-center justify-center",onClick:()=>l(!1),children:r.jsxs(me.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"w-full h-[80%] sm:h-[600px] sm:max-w-md bg-white rounded-t-2xl sm:rounded-2xl flex flex-col overflow-hidden shadow-2xl",onClick:C=>C.stopPropagation(),children:[r.jsxs("div",{className:"px-6 py-5 flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-light text-[#2D2D2D] tracking-wide",children:""}),r.jsx("button",{onClick:()=>l(!1),className:"p-2 -mr-2 rounded-full hover:bg-black/5 transition-colors",children:r.jsx(xt,{className:"w-5 h-5 text-[#9CA3AF] stroke-1"})})]}),r.jsx("div",{className:"px-6 pb-2",children:r.jsxs("div",{className:"relative group",children:[r.jsx(ga,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-[#9CA3AF] group-focus-within:text-[#2D2D2D] transition-colors"}),r.jsx("input",{type:"text",placeholder:"...",value:f,onChange:C=>m(C.target.value),className:"w-full h-11 pl-10 pr-4 rounded-xl bg-[#F9F9F7] text-base text-[#2D2D2D] placeholder-[#9CA3AF] focus:outline-none focus:bg-[#F0F0F0] transition-colors font-light"})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto px-2 py-2",children:N.length===0?r.jsx("div",{className:"py-12 text-center text-[#9CA3AF] text-xs font-light tracking-wider",children:""}):r.jsx("div",{className:"flex flex-col",children:N.map(C=>r.jsx(wP,{char:C,onSelect:()=>v(C.id,C.name||C.kanjiName||"")},C.id))})})]})})}),r.jsx(Be,{children:g&&r.jsx(me.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},className:"fixed bottom-32 left-1/2 -translate-x-1/2 bg-[#505050] text-white px-6 py-2.5 rounded-full shadow-lg z-[100] flex items-center justify-center min-w-[120px]",children:r.jsx("span",{className:"text-sm font-medium tracking-widest",children:g.message})})})]})}function SP({onBack:e}){const[t,n]=k.useState(!1),[s,a]=k.useState(!1),[i,l]=k.useState(!1),c=async()=>{l(!0);try{await se.set(J.USER_DATA,"asset_transactions",[]);const p=await se.get(J.USER_DATA,"userData")||{};p.balance=0,await se.set(J.USER_DATA,"userData",p),await se.set(J.MISC,"transactions_migrated",!0),Un.success(""),n(!1)}catch(p){console.error("Failed to clear assets",p),Un.error("")}finally{l(!1)}},u=async()=>{l(!0);try{await se.set(J.USER_DATA,"order_history",[]),Un.success(""),a(!1)}catch(p){console.error("Failed to clear orders",p),Un.error("")}finally{l(!1)}};return r.jsxs("div",{className:"h-full flex flex-col bg-[#FCFCFA]",children:[r.jsxs("div",{className:"flex items-center px-4 pt-12 pb-4 border-b border-black/5",children:[r.jsx("button",{onClick:e,className:"w-10 h-10 flex items-center justify-center -ml-2 text-[#555] hover:text-[#2D2D2D]",children:r.jsx(dn,{className:"w-6 h-6"})}),r.jsx("h2",{className:"text-lg font-medium text-[#2D2D2D] ml-2",children:""})]}),r.jsxs("div",{className:"flex-1 px-8 py-6 space-y-4",children:[r.jsx("p",{className:"text-xs text-[#9CA3AF] uppercase tracking-wider mb-2",children:""}),r.jsx("button",{onClick:()=>n(!0),className:"w-full bg-white border border-red-100 rounded-lg p-4 flex items-center justify-between group active:scale-[0.98] transition-all shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-red-50 flex items-center justify-center text-red-500",children:r.jsx(xn,{className:"w-4 h-4"})}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"text-sm font-medium text-[#2D2D2D] group-hover:text-red-600 transition-colors",children:""}),r.jsx("p",{className:"text-[10px] text-[#9CA3AF]",children:""})]})]})}),r.jsx("button",{onClick:()=>a(!0),className:"w-full bg-white border border-red-100 rounded-lg p-4 flex items-center justify-between group active:scale-[0.98] transition-all shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-red-50 flex items-center justify-center text-red-500",children:r.jsx(xn,{className:"w-4 h-4"})}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"text-sm font-medium text-[#2D2D2D] group-hover:text-red-600 transition-colors",children:""}),r.jsx("p",{className:"text-[10px] text-[#9CA3AF]",children:""})]})]})})]}),r.jsxs(Be,{children:[t&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6",children:[r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/20 backdrop-blur-sm",onClick:()=>n(!1)}),r.jsx(me.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl p-6 w-full max-w-xs shadow-xl relative z-10",children:r.jsxs("div",{className:"flex flex-col items-center text-center",children:[r.jsx("div",{className:"w-12 h-12 bg-red-50 rounded-full flex items-center justify-center text-red-500 mb-4",children:r.jsx(_p,{className:"w-6 h-6"})}),r.jsx("h3",{className:"text-lg font-medium text-[#2D2D2D] mb-2",children:"?"}),r.jsxs("p",{className:"text-sm text-[#555] mb-6 leading-relaxed",children:["",r.jsx("br",{}),r.jsx("span",{className:"text-red-500 text-xs",children:""})]}),r.jsxs("div",{className:"flex gap-3 w-full",children:[r.jsx("button",{onClick:()=>n(!1),className:"flex-1 py-2.5 rounded-lg border border-[#E5E5E5] text-sm text-[#555] font-medium",children:""}),r.jsx("button",{onClick:c,disabled:i,className:"flex-1 py-2.5 rounded-lg bg-red-500 text-white text-sm font-medium shadow-md shadow-red-200",children:i?"...":""})]})]})})]}),s&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6",children:[r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/20 backdrop-blur-sm",onClick:()=>a(!1)}),r.jsx(me.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl p-6 w-full max-w-xs shadow-xl relative z-10",children:r.jsxs("div",{className:"flex flex-col items-center text-center",children:[r.jsx("div",{className:"w-12 h-12 bg-red-50 rounded-full flex items-center justify-center text-red-500 mb-4",children:r.jsx(_p,{className:"w-6 h-6"})}),r.jsx("h3",{className:"text-lg font-medium text-[#2D2D2D] mb-2",children:"?"}),r.jsxs("p",{className:"text-sm text-[#555] mb-6 leading-relaxed",children:["",r.jsx("br",{}),r.jsx("span",{className:"text-red-500 text-xs",children:""})]}),r.jsxs("div",{className:"flex gap-3 w-full",children:[r.jsx("button",{onClick:()=>a(!1),className:"flex-1 py-2.5 rounded-lg border border-[#E5E5E5] text-sm text-[#555] font-medium",children:""}),r.jsx("button",{onClick:u,disabled:i,className:"flex-1 py-2.5 rounded-lg bg-red-500 text-white text-sm font-medium shadow-md shadow-red-200",children:i?"...":""})]})]})})]})]})]})}function jP({subView:e="menu",onSubViewChange:t}){const[n,s]=k.useState("menu"),a=t?e:n,i=t||s,[l,c]=k.useState(null),[u,p]=k.useState(null),[h,f]=k.useState(0);k.useEffect(()=>{(async()=>{try{const S=await se.get(J.USER_DATA,"userData");S&&typeof S.balance=="number"&&f(S.balance);const v=await se.get(J.MISC,"organizations");let N=!1;if(v){let C=null;if(Array.isArray(v)?(C=v.find(_=>_.name&&_.name.includes("")||_.role==="saniwa"||_.isSaniwa),!C&&v.length>0&&v[0].name&&v[0].country&&(C=v[0])):typeof v=="object"&&(C=v),C){if(c({saniwaName:C.name||C.saniwaName||"",country:C.country||"",honmaruName:C.honmaruName||C.fortress||""}),C.avatar)if(C.avatar.startsWith("data:")||C.avatar.startsWith("http"))p(C.avatar);else{const _=await Ct(C.avatar);_&&p(_)}N=!0}}if(!N){const C=await se.get(J.USER_DATA,"userData");C&&c(C);const _=await Ct("avatar");_&&p(_)}}catch(S){console.error("Failed to load user profile",S)}})()},[]);const m=l?.name||l?.saniwaName||"",g=l?.country||"",y=l?.fortress||l?.honmaruName||"";return a==="assets"?r.jsx(vP,{onBack:()=>i("menu"),currentBalance:h}):a==="orders"?r.jsx(kP,{onBack:()=>i("menu")}):a==="settings"?r.jsx(SP,{onBack:()=>i("menu")}):r.jsxs("div",{className:"h-full flex flex-col bg-[#FCFCFA] overflow-hidden",children:[r.jsxs("div",{className:"pt-8 pb-12 px-8 text-center",children:[r.jsx("div",{className:"w-20 h-20 mx-auto rounded-full bg-[#F5F5F0] flex items-center justify-center text-2xl mb-4 relative overflow-hidden",children:u?r.jsx("img",{src:u,alt:"Avatar",className:"w-full h-full object-cover"}):r.jsx("span",{children:""})}),r.jsx("h2",{className:"text-lg font-medium text-[#2D2D2D] mb-1",children:m}),r.jsx("p",{className:"text-[10px] text-[#9CA3AF] tracking-widest uppercase mb-1",children:g}),r.jsx("p",{className:"text-xs text-[#555] font-light tracking-wide",children:y})]}),r.jsxs("div",{className:"mx-8 mb-10 py-4 border-y border-black/5 flex justify-between items-center",children:[r.jsx("span",{className:"text-xs text-[#9CA3AF]",children:""}),r.jsxs("span",{className:"text-sm font-mono font-medium text-[#2D2D2D]",children:["+ ",r.jsx("span",{className:"text-[10px] text-[#9CA3AF]",children:""})]})]}),r.jsx("div",{className:"flex-1 px-8 space-y-1",children:[{icon:Ww,label:"",action:()=>i("assets")},{icon:Za,label:"",action:()=>i("orders")},{icon:El,label:"",action:()=>i("settings")}].map((b,S)=>r.jsxs("button",{onClick:b.action,className:"w-full flex items-center justify-between py-4 group",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(b.icon,{className:"w-4 h-4 text-[#9CA3AF] group-hover:text-[#2D2D2D] transition-colors",strokeWidth:1.5}),r.jsx("span",{className:"text-sm text-[#555] group-hover:text-[#2D2D2D] transition-colors font-light",children:b.label})]}),r.jsx(Qn,{className:"w-3 h-3 text-[#E5E5E5] group-hover:text-[#2D2D2D] transition-colors"})]},S))})]})}function CP({item:e,quantity:t=1,onAddOne:n,onRemoveOne:s,onClose:a,onViewCart:i}){return r.jsx(Be,{children:e&&r.jsxs(r.Fragment,{children:[r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:a,className:"absolute inset-0 z-[60] bg-black/20 backdrop-blur-[1px]"}),r.jsx(me.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"absolute bottom-0 left-0 right-0 z-[70] bg-white rounded-t-[24px] shadow-[0_-4px_30px_rgba(0,0,0,0.15)] overflow-hidden",children:r.jsxs("div",{className:"p-6 pb-12",children:[r.jsx("div",{className:"flex items-center justify-center mb-6 relative",children:r.jsxs("div",{className:"flex items-center gap-2 text-[#2D2D2D]",children:[r.jsx("div",{className:"w-5 h-5 rounded-full bg-[#4A7C59] flex items-center justify-center",children:r.jsx(Et,{className:"w-3 h-3 text-white",strokeWidth:3})}),r.jsx("span",{className:"font-medium text-sm",children:""})]})}),r.jsxs("div",{className:"flex gap-4 mb-8 bg-[#F9F9F7] p-4 rounded-xl items-center",children:[r.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center text-2xl flex-shrink-0 shadow-sm text-[#9CA3AF]",children:r.jsx(Za,{className:"w-6 h-6",strokeWidth:1.5})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"text-sm font-medium text-[#2D2D2D] truncate",children:e.name}),r.jsxs("div",{className:"flex items-baseline gap-1 mt-0.5",children:[r.jsx("span",{className:"text-sm font-bold text-[#C93A40]",children:e.price}),r.jsx("span",{className:"text-[10px] text-[#9CA3AF]",children:""})]})]}),r.jsxs("div",{className:"flex items-center gap-3 bg-white rounded-full p-1.5 px-2 shadow-sm",children:[r.jsx("button",{onClick:s,className:"w-7 h-7 flex items-center justify-center rounded-full bg-[#F5F5F0] text-[#2D2D2D] hover:bg-[#E5E5E0] active:scale-90 transition-all",children:r.jsx(Km,{className:"w-3.5 h-3.5",strokeWidth:2})}),r.jsx("span",{className:"text-sm font-mono font-medium text-[#2D2D2D] min-w-[1ch] text-center",children:t}),r.jsx("button",{onClick:n,className:"w-7 h-7 flex items-center justify-center rounded-full bg-[#2D2D2D] text-white hover:bg-black active:scale-90 transition-all",children:r.jsx(Zn,{className:"w-3.5 h-3.5",strokeWidth:2})})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:a,className:"flex-1 h-12 rounded-full border border-black/10 text-[#2D2D2D] text-sm font-medium hover:bg-[#F5F5F0] active:scale-95 transition-all",children:""}),r.jsxs("button",{onClick:i,className:"flex-1 h-12 rounded-full bg-[#2D2D2D] text-white text-sm font-medium hover:bg-black active:scale-95 transition-all flex items-center justify-center gap-1",children:["",r.jsx(Qn,{className:"w-4 h-4 opacity-50"})]})]})]})})]})})}function NP({onClose:e}){const[t,n]=k.useState("store"),[s,a]=k.useState("menu"),[i,l]=k.useState([]),[c,u]=k.useState(null),[p,h]=k.useState(null);k.useEffect(()=>{(async()=>{try{const C=await se.get(J.USER_DATA,"shopping_cart");C&&l(C)}catch(C){console.error("Failed to load cart",C)}})()},[]);const f=async N=>{l(N);try{await se.set(J.USER_DATA,"shopping_cart",N)}catch(C){console.error("Failed to save cart",C)}},m=(N,C)=>{h({message:N,subtext:C}),setTimeout(()=>{h(null)},3e3)},g=(N,C=!0)=>{const _={...N,id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now()},R=[...i,_];f(R),C&&u({name:N.name,price:N.price})},y=N=>{const C=i.filter(_=>_.id!==N);f(C)},b=N=>{const C=new Set(N),_=i.filter(R=>!C.has(R.id));f(_)},S=async N=>{const C=i.reduce((D,V)=>D+V.price,0),_=i.reduce((D,V)=>{const I=`${V.name}-${V.price}`;return D[I]||(D[I]={name:V.name,price:V.price,description:V.description,count:0}),D[I].count+=1,D},{}),R={id:`${Date.now().toString(36).toUpperCase()}-${Math.random().toString(36).substr(2,4).toUpperCase()}`,items:Object.values(_),total:C,recipient:N,timestamp:Date.now()};try{const D=await se.get(J.USER_DATA,"order_history")||[];await se.set(J.USER_DATA,"order_history",[...D,R])}catch(D){console.error("Failed to save order history",D)}f([]),m("",` ${N}`),n("store")},v=t==="checkout"||t==="profile"&&(s==="assets"||s==="orders"||s==="settings");return r.jsxs("div",{className:"fixed inset-0 z-50 bg-[#FCFCFA] font-sans overflow-hidden flex flex-col text-[#2D2D2D]",children:[r.jsx("div",{className:`relative z-20 flex items-center justify-between px-6 bg-[#FCFCFA] transition-all duration-200 ${v?"pt-[env(safe-area-inset-top)] h-[env(safe-area-inset-top)]":"pt-12 pb-2 min-h-[80px]"}`,children:!v&&r.jsxs(r.Fragment,{children:[r.jsxs("h1",{className:"text-2xl font-light tracking-widest",children:[t==="store"&&"",t==="cart"&&"",t==="profile"&&""]}),r.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full flex items-center justify-center hover:bg-black/5 transition-colors",children:r.jsx(xt,{className:"w-6 h-6 stroke-1 text-[#2D2D2D]"})})]})}),r.jsx("div",{className:"flex-1 relative z-10 overflow-hidden",children:r.jsx(Be,{mode:"wait",children:r.jsxs(me.div,{className:"absolute inset-0",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[t==="store"&&r.jsx(gP,{onAddToCart:N=>g(N,!0)}),t==="cart"&&r.jsx(bP,{cartItems:i,onRemove:y,onBulkRemove:b,onAdd:N=>g(N,!1),onCheckout:()=>n("checkout")}),t==="checkout"&&r.jsx(yP,{cartItems:i,onBack:()=>n("cart"),onComplete:S}),t==="profile"&&r.jsx(jP,{subView:s,onSubViewChange:a})]},t)})}),t!=="checkout"&&r.jsx("div",{className:"bg-white/80 backdrop-blur-xl border-t border-black/5 pb-8 pt-4 px-12 z-30 flex justify-between items-center",children:[{id:"store",icon:X9,label:""},{id:"cart",icon:su,label:"",badge:i.length},{id:"profile",icon:mn,label:""}].map(N=>{const C=t===N.id;return r.jsxs("button",{onClick:()=>{n(N.id),N.id==="profile"&&a("menu")},className:"flex flex-col items-center gap-1.5 w-16 group relative",children:[r.jsxs("div",{className:`relative transition-all duration-300 ${C?"text-[#C93A40] scale-110":"text-[#9CA3AF] group-hover:text-[#6B7280]"}`,children:[r.jsx(N.icon,{className:"w-6 h-6 stroke-[1.5px]"}),N.badge?r.jsx("span",{className:"absolute -top-1 -right-2 w-4 h-4 bg-[#C93A40] text-white text-[9px] flex items-center justify-center rounded-full shadow-sm",children:N.badge}):null]}),C&&r.jsx(me.div,{layoutId:"indicator",className:"w-1 h-1 rounded-full bg-[#C93A40]"})]},N.id)})}),r.jsx(CP,{item:c,quantity:c?i.filter(N=>N.name===c.name&&N.price===c.price).length:0,onAddOne:()=>c&&g(c,!1),onRemoveOne:()=>{if(!c)return;const N=i.filter(C=>C.name===c.name&&C.price===c.price);N.length>0&&y(N[N.length-1].id)},onClose:()=>u(null),onViewCart:()=>{u(null),n("cart")}}),r.jsx(Be,{children:p&&r.jsx(me.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},className:"fixed bottom-32 left-1/2 -translate-x-1/2 bg-[#505050] text-white px-6 py-3 rounded-full shadow-lg z-[100] flex items-center gap-3 min-w-[200px] justify-center",children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("span",{className:"text-xs font-medium tracking-widest",children:p.message}),p.subtext&&r.jsx("span",{className:"text-[10px] text-white/60 tracking-wider mt-0.5",children:p.subtext})]})})})]})}function _P(){const[e,t]=k.useState([]),[n,s]=k.useState(""),[a,i]=k.useState(!1);k.useEffect(()=>{l()},[]);const l=async()=>{try{const f=await se.get(J.SCHEDULE,"todos");f&&t(f.sort((m,g)=>g.createdAt-m.createdAt))}catch(f){console.error("Failed to load todos:",f)}},c=async f=>{try{await se.set(J.SCHEDULE,"todos",f),t(f)}catch(m){console.error("Failed to save todos:",m)}},u=async()=>{if(!n.trim())return;const m=[{id:Date.now().toString(),text:n.trim(),completed:!1,createdAt:Date.now()},...e];await c(m),s(""),i(!1)},p=async f=>{const m=e.map(g=>g.id===f?{...g,completed:!g.completed}:g);await c(m)},h=async f=>{const m=e.filter(g=>g.id!==f);await c(m)};return r.jsxs("div",{className:"h-full flex flex-col p-4 overflow-y-auto custom-scrollbar",children:[r.jsxs("div",{className:"mb-6 ml-2 relative inline-block",children:[r.jsx("h2",{className:"text-2xl font-bold text-[#5A5A5A] relative z-10",children:"To-Do List"}),r.jsx("div",{className:"absolute bottom-1 left-0 w-full h-3 bg-[#FFE4E1] -rotate-2 z-0 opacity-70"})]}),r.jsxs("div",{className:"flex-1 space-y-3 pb-20",children:[r.jsx(Be,{initial:!1,children:e.map(f=>r.jsxs(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,height:0,marginBottom:0},transition:{type:"spring",stiffness:400,damping:30},className:`group relative p-4 rounded-xl border-2 transition-all duration-200 active:scale-[0.99] ${f.completed?"bg-[#F0F0F0] border-transparent opacity-60":"bg-white border-[#F0F0F0] shadow-sm active:border-[#D4E0D6]"}`,children:[r.jsx("div",{className:"absolute -top-2 left-1/2 -translate-x-1/2 w-3 h-3 rounded-full bg-[#D4E0D6] border border-white shadow-sm z-10"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>p(f.id),className:`w-6 h-6 rounded-md border-2 flex items-center justify-center transition-all duration-200 active:scale-90 ${f.completed?"bg-[#8CAE8C] border-[#8CAE8C]":"border-[#D1D1D1] active:border-[#8CAE8C]"}`,children:f.completed&&r.jsx(Et,{className:"w-4 h-4 text-white",strokeWidth:3})}),r.jsx("span",{className:`flex-1 text-[15px] font-medium leading-relaxed ${f.completed?"text-[#999] line-through decoration-2 decoration-[#999]/30":"text-[#5A5A5A]"}`,children:f.text}),r.jsx("button",{onClick:()=>h(f.id),className:"p-2 text-[#999] active:text-[#FF6B6B] active:scale-95 transition-colors duration-200",children:r.jsx(xt,{className:"w-5 h-5"})})]})]},f.id))}),e.length===0&&!a&&r.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-40",children:[r.jsx("div",{className:"w-20 h-20 border-4 border-dashed border-[#5A5A5A] rounded-full flex items-center justify-center mb-4",children:r.jsx(Et,{className:"w-10 h-10 text-[#5A5A5A]"})}),r.jsx("p",{className:"font-bold text-[#5A5A5A]",children:""}),r.jsx("p",{className:"text-sm",children:""})]})]}),r.jsx("div",{className:"absolute bottom-6 right-6 left-6 z-20 pointer-events-none",children:r.jsx("div",{className:"pointer-events-auto",children:r.jsx(Be,{children:a?r.jsxs(me.div,{initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"bg-white p-2 rounded-2xl shadow-xl border-2 border-[#5A5A5A]/10 flex gap-2",children:[r.jsx("input",{type:"text",value:n,onChange:f=>s(f.target.value),placeholder:"...",autoFocus:!0,className:"flex-1 bg-transparent px-4 py-2 outline-none text-[#5A5A5A] placeholder:text-[#999]",onKeyDown:f=>f.key==="Enter"&&u()}),r.jsx("button",{onClick:u,className:"w-10 h-10 bg-[#5A5A5A] rounded-xl flex items-center justify-center text-white shadow-lg active:scale-90 transition-transform duration-200",children:r.jsx(Et,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>i(!1),className:"w-10 h-10 bg-[#F5F5F5] rounded-xl flex items-center justify-center text-[#5A5A5A] active:scale-90 transition-transform duration-200",children:r.jsx(xt,{className:"w-5 h-5"})})]}):r.jsx("div",{className:"flex justify-end",children:r.jsx(me.button,{whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:20},onClick:()=>i(!0),className:"w-14 h-14 bg-[#5A5A5A] rounded-full shadow-lg shadow-[#5A5A5A]/30 flex items-center justify-center text-white",children:r.jsx(Zn,{className:"w-7 h-7"})})})})})})]})}const Dh=["#FFD1DC","#D4E0D6","#CCE5FF","#FFF5BA","#E6E6FA"];function AP(){const[e,t]=k.useState(new Date),[n,s]=k.useState([]),[a,i]=k.useState(null),[l,c]=k.useState(!1),[u,p]=k.useState(null),[h,f]=k.useState(""),[m,g]=k.useState(!1),[y,b]=k.useState("09:00"),[S,v]=k.useState("10:00"),[N,C]=k.useState(""),[_,R]=k.useState(""),[D,V]=k.useState(Dh[0]);k.useEffect(()=>{I();const $=new Date;i(M($.getFullYear(),$.getMonth(),$.getDate()))},[]);const I=async()=>{const $=await se.get(J.SCHEDULE,"events");if($){const K=new Date,H=new Date(K.getFullYear(),K.getMonth(),K.getDate()),ee=$.filter(Y=>{const[re,de,X]=Y.date.split("-").map(Number);return new Date(re,de-1,X)>=H});ee.length!==$.length?(await se.set(J.SCHEDULE,"events",ee),s(ee)):s($)}},A=async $=>{await se.set(J.SCHEDULE,"events",$),s($)},U=($,K)=>new Date($,K+1,0).getDate(),W=($,K)=>new Date($,K,1).getDay(),T=$=>{const K=new Date(e.getFullYear(),e.getMonth()+$,1);t(K)},M=($,K,H)=>`${$}-${String(K+1).padStart(2,"0")}-${String(H).padStart(2,"0")}`,j=$=>{const K=M(e.getFullYear(),e.getMonth(),$);i(K)},P=()=>{p(null),f(""),R(""),C(""),g(!1),b("09:00"),v("10:00"),V(Dh[0]),c(!0)},L=$=>{p($.id),f($.title),R($.description||""),C($.location||""),g($.isAllDay),b($.startTime||"09:00"),v($.endTime||"10:00"),V($.color),c(!0)},B=async()=>{if(!h.trim()||!a)return;if(!m&&y>=S){alert("");return}const $={id:u||Date.now().toString(),title:h,date:a,isAllDay:m,startTime:m?void 0:y,endTime:m?void 0:S,location:N,description:_,color:D};let K;u?K=n.map(H=>H.id===u?$:H):K=[...n,$],await A(K),c(!1)},q=async($,K)=>{if($.stopPropagation(),confirm("")){const H=n.filter(ee=>ee.id!==K);await A(H)}},G=()=>{const $=e.getFullYear(),K=e.getMonth(),H=U($,K),ee=W($,K),Y=[];for(let re=0;re<ee;re++)Y.push(r.jsx("div",{className:"min-h-[3rem] sm:min-h-[4rem]"},`empty-${re}`));for(let re=1;re<=H;re++){const de=M($,K,re),X=n.filter(be=>be.date===de),oe=a===de,ye=new Date().toDateString()===new Date($,K,re).toDateString();Y.push(r.jsxs("div",{onClick:()=>j(re),className:"relative min-h-[3rem] sm:min-h-[4rem] flex flex-col items-center pt-1 cursor-pointer active:scale-95 transition-transform duration-100 group",children:[r.jsx("div",{className:`w-7 h-7 sm:w-8 sm:h-8 flex items-center justify-center rounded-full text-xs sm:text-sm font-medium transition-all z-10 ${oe?"bg-[#5A5A5A] text-white shadow-md scale-110":ye?"bg-[#FFD1DC] text-[#5A5A5A]":"text-[#5A5A5A] group-hover:bg-[#5A5A5A]/5"}`,children:re}),r.jsxs("div",{className:"flex gap-0.5 sm:gap-1 mt-1 flex-wrap justify-center px-1",children:[X.slice(0,4).map((be,Ie)=>r.jsx("div",{className:"w-1 h-1 sm:w-1.5 sm:h-1.5 rounded-full",style:{backgroundColor:be.color}},Ie)),X.length>4&&r.jsx("div",{className:"w-1 h-1 sm:w-1.5 sm:h-1.5 rounded-full bg-gray-300"})]})]},re))}return Y},O=a?n.filter($=>$.date===a).sort(($,K)=>$.isAllDay&&!K.isAllDay?-1:!$.isAllDay&&K.isAllDay?1:$.isAllDay&&K.isAllDay?0:($.startTime||"").localeCompare(K.startTime||"")):[];return r.jsxs("div",{className:"h-full flex flex-col overflow-hidden bg-[#F9F7F2]",children:[r.jsxs("div",{className:"px-6 py-4 flex items-center justify-between",children:[r.jsx("button",{onClick:()=>T(-1),className:"p-2 active:bg-[#5A5A5A]/10 active:scale-90 rounded-full transition-all duration-200",children:r.jsx(dn,{className:"w-5 h-5 text-[#5A5A5A]"})}),r.jsxs("h2",{className:"text-lg font-bold text-[#5A5A5A] tracking-widest",children:[e.getFullYear()," ",e.getMonth()+1,""]}),r.jsx("button",{onClick:()=>T(1),className:"p-2 active:bg-[#5A5A5A]/10 active:scale-90 rounded-full transition-all duration-200",children:r.jsx(Qn,{className:"w-5 h-5 text-[#5A5A5A]"})})]}),r.jsx("div",{className:"grid grid-cols-7 px-4 mb-2",children:["","","","","","",""].map($=>r.jsx("div",{className:"text-center text-xs font-bold text-[#9A9A9A]",children:$},$))}),r.jsxs("div",{className:"flex-1 overflow-y-auto px-4 pb-20 custom-scrollbar",children:[r.jsx("div",{className:"grid grid-cols-7 gap-y-2 mb-6 bg-white p-2 rounded-2xl border-2 border-dashed border-[#5A5A5A]/10 shadow-sm",children:G()}),r.jsx(Be,{mode:"wait",children:a&&r.jsxs(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"space-y-4 px-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-[#5A5A5A] font-bold border-l-4 border-[#5A5A5A] pl-2",children:a}),r.jsxs("button",{onClick:P,className:"flex items-center gap-1 text-xs font-bold bg-[#5A5A5A] text-white px-3 py-1.5 rounded-full shadow-sm active:scale-95 transition-transform duration-200",children:[r.jsx(Zn,{className:"w-3 h-3"}),""]})]}),O.length===0?r.jsx("div",{className:"text-center py-8 text-[#999] text-sm italic opacity-60",children:""}):r.jsx("div",{className:"space-y-3",children:O.map($=>r.jsxs(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},onClick:()=>L($),className:"relative p-4 rounded-xl shadow-sm border border-black/5 flex gap-4 overflow-hidden active:scale-[0.98] transition-transform duration-150 bg-white cursor-pointer",children:[r.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1.5",style:{backgroundColor:$.color}}),r.jsx("div",{className:"flex flex-col items-center justify-center min-w-[50px] border-r border-black/5 pr-4 py-1",children:$.isAllDay?r.jsx("span",{className:"text-xs font-bold text-[#5A5A5A] bg-[#5A5A5A]/10 px-2 py-1 rounded",children:""}):r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-sm font-bold text-[#5A5A5A]",children:$.startTime}),r.jsx("span",{className:"text-xs text-[#999] mt-0.5",children:$.endTime})]})}),r.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center gap-1",children:[r.jsx("h4",{className:"font-bold text-[#5A5A5A] truncate text-sm",children:$.title}),$.location&&r.jsxs("div",{className:"flex items-center gap-1 text-xs text-[#5A5A5A]/70",children:[r.jsx(Cp,{className:"w-3 h-3"}),r.jsx("span",{className:"truncate",children:$.location})]}),$.description&&r.jsx("p",{className:"text-xs text-[#5A5A5A]/50 truncate",children:$.description})]}),r.jsx("button",{onClick:K=>q(K,$.id),className:"absolute top-2 right-2 p-2 text-[#5A5A5A]/30 active:text-[#FF6B6B] active:scale-110 transition-all z-10",children:r.jsx(xt,{className:"w-4 h-4"})})]},$.id))})]})})]}),r.jsx(Be,{children:l&&r.jsxs("div",{className:"absolute inset-0 z-50 flex items-end justify-center sm:items-center p-0 sm:p-4 bg-black/20 backdrop-blur-[2px]",children:[r.jsx("div",{className:"absolute inset-0",onClick:()=>c(!1)}),r.jsxs(me.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"tween",duration:.25,ease:"easeOut"},className:"bg-[#FDFBF7] w-full max-w-sm rounded-t-2xl sm:rounded-2xl shadow-2xl p-6 border-t-2 sm:border-2 border-[#5A5A5A]/10 relative z-10",children:[r.jsx("button",{onClick:()=>c(!1),className:"absolute top-4 right-4 p-2 bg-[#F5F5F5] rounded-full active:scale-90 transition-transform",children:r.jsx(xt,{className:"w-4 h-4 text-[#5A5A5A]"})}),r.jsxs("h3",{className:"text-lg font-bold text-[#5A5A5A] mb-6 flex items-center gap-2",children:[r.jsx("span",{className:"w-2 h-6 bg-[#5A5A5A] rounded-full"}),u?"":""]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-[#999] mb-1 block",children:""}),r.jsx("input",{type:"text",value:h,onChange:$=>f($.target.value),className:"w-full bg-white border-b-2 border-[#E0E0E0] focus:border-[#5A5A5A] px-2 py-2 outline-none transition-colors rounded-t-md",placeholder:""})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-xs font-bold text-[#999] mb-1 block flex items-center gap-1",children:[r.jsx(Cp,{className:"w-3 h-3"})," "]}),r.jsx("input",{type:"text",value:N,onChange:$=>C($.target.value),className:"w-full bg-white border-b-2 border-[#E0E0E0] focus:border-[#5A5A5A] px-2 py-2 outline-none transition-colors rounded-t-md text-sm",placeholder:""})]}),r.jsxs("div",{className:"flex items-center gap-2 pt-1 active:opacity-60 transition-opacity",onClick:()=>g(!m),children:[r.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center transition-colors ${m?"bg-[#5A5A5A] border-[#5A5A5A]":"border-[#999]"}`,children:m&&r.jsx(Et,{className:"w-3 h-3 text-white"})}),r.jsx("label",{className:"text-sm font-bold text-[#5A5A5A]",children:""})]}),r.jsx(Be,{children:!m&&r.jsxs(me.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.15},className:"flex gap-4 overflow-hidden",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("label",{className:"text-xs font-bold text-[#999] mb-1 block flex items-center gap-1",children:[r.jsx(wl,{className:"w-3 h-3"})," "]}),r.jsx("input",{type:"time",value:y,onChange:$=>b($.target.value),className:"w-full bg-white border-b-2 border-[#E0E0E0] focus:border-[#5A5A5A] px-2 py-2 outline-none transition-colors rounded-t-md text-sm"})]}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("label",{className:"text-xs font-bold text-[#999] mb-1 block flex items-center gap-1",children:[r.jsx(wl,{className:"w-3 h-3"})," "]}),r.jsx("input",{type:"time",value:S,onChange:$=>v($.target.value),className:"w-full bg-white border-b-2 border-[#E0E0E0] focus:border-[#5A5A5A] px-2 py-2 outline-none transition-colors rounded-t-md text-sm"})]})]})}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-[#999] mb-2 block",children:""}),r.jsx("div",{className:"flex gap-3",children:Dh.map($=>r.jsx("button",{onClick:()=>V($),className:`w-8 h-8 rounded-full border-2 transition-transform ${D===$?"border-[#5A5A5A] scale-110 shadow-sm":"border-transparent active:scale-90"}`,style:{backgroundColor:$}},$))})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-xs font-bold text-[#999] mb-1 block flex items-center gap-1",children:[r.jsx(p8,{className:"w-3 h-3"})," "]}),r.jsx("textarea",{value:_,onChange:$=>R($.target.value),className:"w-full bg-white border-2 border-[#F0F0F0] rounded-xl px-3 py-2 outline-none focus:border-[#5A5A5A]/30 resize-none h-20 text-sm",placeholder:"..."})]}),r.jsx("button",{onClick:B,className:"w-full bg-[#5A5A5A] text-white font-bold py-3.5 rounded-xl shadow-lg mt-2 active:scale-95 transition-transform duration-150",children:u?"":" "})]})]})]})})]})}const ey=["","","","","","",""],id=["#FFD1DC","#D4E0D6","#CCE5FF","#FFF5BA","#E6E6FA","#FFABAB","#FFC3A0","#D5AAFF","#85E3FF","#B9FBC0"],Ih={totalPeriods:12,showWeekends:!0,periodTimes:Array.from({length:12},(e,t)=>({period:t+1,startTime:`${8+t}:00`,endTime:`${8+t}:45`})),startDate:new Date().toISOString().split("T")[0],totalWeeks:20},EP=e=>{const t=new Date(e),n=new Date,s=new Date(t.getFullYear(),t.getMonth(),t.getDate()),a=new Date(n.getFullYear(),n.getMonth(),n.getDate()),i=s.getDay()||7,l=new Date(s);l.setDate(s.getDate()-(i-1));const c=a.getTime()-l.getTime(),u=Math.floor(c/(1e3*60*60*24));return{currentWeek:Math.floor(u/7)+1,firstMonday:l}},TP=(e,t,n)=>{const s=new Date(e);return s.setDate(e.getDate()+(t-1)*7+n),`${s.getMonth()+1}/${s.getDate()}`};function DP(){const[e,t]=k.useState([]),[n,s]=k.useState(null),[a,i]=k.useState(null),[l,c]=k.useState(Ih),[u,p]=k.useState(!1),{currentWeek:h,firstMonday:f}=EP(l.startDate),[m,g]=k.useState(1);k.useEffect(()=>{h>0&&g(Math.min(Math.max(1,h),l.totalWeeks))},[h,l.totalWeeks]);const[y,b]=k.useState(""),[S,v]=k.useState(""),[N,C]=k.useState(id[0]),[_,R]=k.useState(1),[D,V]=k.useState(1),[I,A]=k.useState([]),[U,W]=k.useState(!1);k.useEffect(()=>{T()},[]);const T=async()=>{const Y=await se.get(J.SCHEDULE,"timetable_courses");if(Y)t(Y);else{const de=await se.get(J.SCHEDULE,"timetable");if(de&&de.length>0){const X=de.map(oe=>({id:Math.random().toString(36).substr(2,9),day:oe.day,startPeriod:oe.period,endPeriod:oe.period,subject:oe.subject,room:oe.room,color:oe.color,weeks:Array.from({length:Ih.totalWeeks},(ye,be)=>be+1)}));t(X),await se.set(J.SCHEDULE,"timetable_courses",X)}}const re=await se.get(J.SCHEDULE,"timetable_settings");if(re){const de={...Ih,...re};if(de.periodTimes.length<de.totalPeriods){const X=de.periodTimes.length;for(let oe=X;oe<de.totalPeriods;oe++)de.periodTimes.push({period:oe+1,startTime:`${8+oe}:00`,endTime:`${8+oe}:45`})}c(de)}},M=async Y=>{await se.set(J.SCHEDULE,"timetable_courses",Y),t(Y)},j=async Y=>{const re=[...Y.periodTimes];if(re.length<Y.totalPeriods)for(let X=re.length;X<Y.totalPeriods;X++)re.push({period:X+1,startTime:`${8+X}:00`,endTime:`${8+X}:45`});else re.length>Y.totalPeriods&&(re.length=Y.totalPeriods);const de={...Y,periodTimes:re};await se.set(J.SCHEDULE,"timetable_settings",de),c(de)},P=(Y,re)=>{Y?(i(Y),s(null),b(Y.subject),v(Y.room),C(Y.color),R(Y.startPeriod),V(Y.endPeriod),A(Y.weeks)):re&&(i(null),s(re),b(""),v(""),C(id[Math.floor(Math.random()*id.length)]),R(re.period),V(re.period),A(Array.from({length:l.totalWeeks},(de,X)=>X+1))),W(!1)},L=()=>{i(null),s(null)},B=async()=>{if(!y.trim())return;let Y=[...e];const re={id:a?a.id:Math.random().toString(36).substr(2,9),day:a?a.day:n?.day||0,startPeriod:_,endPeriod:D,subject:y.trim(),room:S.trim(),color:N,weeks:I.length>0?I:[m]};a?Y=Y.map(de=>de.id===a.id?re:de):Y.push(re),await M(Y),L()},q=async()=>{if(!a)return;const Y=e.filter(re=>re.id!==a.id);await M(Y),L()},G=async()=>{window.confirm("")&&(await se.delete(J.SCHEDULE,"timetable_courses"),await se.delete(J.SCHEDULE,"timetable"),t([]),p(!1))},O=()=>A(Array.from({length:l.totalWeeks},(Y,re)=>re+1)),$=()=>A(Array.from({length:l.totalWeeks},(Y,re)=>re+1).filter(Y=>Y%2!==0)),K=()=>A(Array.from({length:l.totalWeeks},(Y,re)=>re+1).filter(Y=>Y%2===0)),H=l.showWeekends?ey:ey.slice(0,5),ee=Array.from({length:l.totalPeriods},(Y,re)=>re+1);return r.jsxs("div",{className:"h-full flex flex-col relative",children:[r.jsxs("div",{className:"flex justify-between items-center px-4 py-2 bg-[#FDFBF7] border-b border-dashed border-[#5A5A5A]/10 sticky top-0 z-20",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:()=>g(Y=>Math.max(1,Y-1)),disabled:m<=1,className:"p-1 rounded-full hover:bg-black/5 disabled:opacity-30 transition-colors",children:r.jsx(dn,{className:"w-4 h-4 text-[#5A5A5A]"})}),r.jsxs("span",{className:"text-lg font-bold text-[#5A5A5A] min-w-[3rem] text-center",children:[" ",m," "]}),r.jsx("button",{onClick:()=>g(Y=>Math.min(l.totalWeeks,Y+1)),disabled:m>=l.totalWeeks,className:"p-1 rounded-full hover:bg-black/5 disabled:opacity-30 transition-colors",children:r.jsx(Qn,{className:"w-4 h-4 text-[#5A5A5A]"})})]}),h===m&&r.jsx("span",{className:"text-[10px] bg-[#5A5A5A] text-white px-1.5 py-0.5 rounded-full",children:""})]}),r.jsx("button",{onClick:()=>p(!0),className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-black/5 active:scale-90 transition-all text-[#999] hover:text-[#5A5A5A]",children:r.jsx(El,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"flex border-b border-[#5A5A5A]/10 bg-white/50 backdrop-blur-sm sticky top-[49px] z-10",children:[r.jsx("div",{className:"w-8 flex items-center justify-center border-r border-[#5A5A5A]/10 bg-[#FDFBF7]/80"}),H.map((Y,re)=>r.jsxs("div",{className:"flex-1 py-2 text-center flex flex-col items-center justify-center text-[#5A5A5A]",children:[r.jsx("span",{className:"text-xs font-bold",children:Y}),r.jsx("span",{className:"text-[10px] text-[#999] font-medium leading-none mt-0.5",children:TP(f,m,re)})]},re))]}),r.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pb-20",children:r.jsxs("div",{className:"flex min-h-full",children:[r.jsx("div",{className:"w-8 flex flex-col bg-[#FDFBF7] sticky left-0 z-10 border-r border-[#5A5A5A]/10 shrink-0",children:ee.map(Y=>{const re=l.periodTimes[Y-1];return r.jsxs("div",{className:"h-14 flex flex-col items-center justify-center text-[10px] font-bold text-[#999] border-b border-dashed border-[#5A5A5A]/10 last:border-b-0 box-border",children:[r.jsx("span",{children:Y}),re&&r.jsxs("span",{className:"text-[8px] font-normal scale-90 mt-0.5 opacity-60 flex flex-col items-center leading-none gap-0.5",children:[r.jsx("span",{children:re.startTime}),r.jsx("span",{children:"|"}),r.jsx("span",{children:re.endTime})]})]},Y)})}),r.jsx("div",{className:"flex-1 flex",children:H.map((Y,re)=>r.jsx("div",{className:"flex-1 flex flex-col border-r border-dashed border-[#5A5A5A]/10 last:border-r-0 min-w-[60px] relative",children:(()=>{const de=[];let X=1;for(;X<=l.totalPeriods;){const ye=X,be=e.find(Ie=>Ie.day===re&&Ie.startPeriod===ye&&Ie.weeks.includes(m));if(be){const Ie=be.endPeriod-be.startPeriod+1;de.push(r.jsx("div",{onClick:()=>P(be),className:"w-full p-0.5 absolute z-10",style:{top:`${(be.startPeriod-1)*56}px`,height:`${Ie*56}px`},children:r.jsxs(me.div,{className:"w-full h-full rounded-lg p-1 flex flex-col justify-center items-center shadow-sm active:scale-95 transition-transform cursor-pointer border border-black/5",style:{backgroundColor:be.color},children:[r.jsx("span",{className:"text-[10px] font-bold text-[#5A5A5A] text-center leading-tight line-clamp-3 break-all",children:be.subject}),be.room&&r.jsxs("span",{className:"text-[8px] text-[#5A5A5A]/70 mt-0.5 scale-90",children:["@",be.room]})]})},`course-${be.id}`))}X++}const oe=ee.map(ye=>r.jsx("div",{onClick:()=>P(void 0,{day:re,period:ye}),className:"h-14 border-b border-dashed border-[#5A5A5A]/10 w-full box-border"},`slot-${ye}`));return r.jsxs(r.Fragment,{children:[oe,de]})})()},re))})]})}),r.jsx(Be,{children:(a||n)&&r.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/20 backdrop-blur-[1px] p-6",children:r.jsxs(me.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:400,damping:30},className:"bg-[#FDFBF7] w-full max-w-xs max-h-[85vh] flex flex-col rounded-2xl shadow-xl border-2 border-[#5A5A5A]/10 relative",children:[r.jsxs("div",{className:"p-4 border-b border-[#5A5A5A]/10 flex justify-between items-center bg-white/50 rounded-t-2xl",children:[r.jsx("h3",{className:"font-bold text-[#5A5A5A]",children:a?"":""}),r.jsx("button",{onClick:L,className:"p-1 text-[#999] hover:text-[#5A5A5A] active:scale-90 transition-transform",children:r.jsx(xt,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"overflow-y-auto p-5 space-y-4 custom-scrollbar",children:r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{type:"text",value:y,onChange:Y=>b(Y.target.value),placeholder:"",autoFocus:!a,className:"w-full bg-white border border-[#E0E0E0] rounded-lg px-3 py-2 text-sm outline-none focus:border-[#5A5A5A]"}),r.jsx("input",{type:"text",value:S,onChange:Y=>v(Y.target.value),placeholder:" ()",className:"w-full bg-white border border-[#E0E0E0] rounded-lg px-3 py-2 text-sm outline-none focus:border-[#5A5A5A]"}),r.jsxs("div",{className:"flex gap-2 items-center",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"text-xs text-[#999] block mb-1",children:""}),r.jsx("select",{value:_,onChange:Y=>{const re=parseInt(Y.target.value);R(re),re>D&&V(re)},className:"w-full bg-white border border-[#E0E0E0] rounded-lg px-2 py-1.5 text-sm outline-none focus:border-[#5A5A5A]",children:ee.map(Y=>r.jsxs("option",{value:Y,children:[" ",Y," "]},Y))})]}),r.jsx("span",{className:"mt-5 text-[#999]",children:"-"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"text-xs text-[#999] block mb-1",children:""}),r.jsx("select",{value:D,onChange:Y=>{const re=parseInt(Y.target.value);V(re),re<_&&R(re)},className:"w-full bg-white border border-[#E0E0E0] rounded-lg px-2 py-1.5 text-sm outline-none focus:border-[#5A5A5A]",children:ee.map(Y=>r.jsxs("option",{value:Y,children:[" ",Y," "]},Y))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-xs text-[#999]",children:[": ",r.jsxs("span",{className:"text-[#5A5A5A] font-medium",children:[I.length,""]})]}),r.jsxs("div",{className:"flex gap-2 text-xs",children:[r.jsx("button",{onClick:O,className:"flex-1 py-1.5 bg-white border border-[#E0E0E0] rounded hover:bg-[#F5F5F5]",children:""}),r.jsx("button",{onClick:$,className:"flex-1 py-1.5 bg-white border border-[#E0E0E0] rounded hover:bg-[#F5F5F5]",children:""}),r.jsx("button",{onClick:K,className:"flex-1 py-1.5 bg-white border border-[#E0E0E0] rounded hover:bg-[#F5F5F5]",children:""})]}),r.jsx("button",{onClick:()=>W(!U),className:"w-full py-1.5 text-xs text-[#5A5A5A] bg-[#F5F5F5] rounded flex items-center justify-center gap-1",children:U?"":""}),U&&r.jsx("div",{className:"grid grid-cols-5 gap-1.5 p-2 bg-white rounded-lg border border-[#E0E0E0]",children:Array.from({length:l.totalWeeks},(Y,re)=>re+1).map(Y=>{const re=I.includes(Y);return r.jsx("button",{onClick:()=>{A(re?I.filter(de=>de!==Y):[...I,Y].sort((de,X)=>de-X))},className:`aspect-square flex items-center justify-center text-xs rounded transition-colors ${re?"bg-[#5A5A5A] text-white":"bg-[#F9F9F9] text-[#999]"}`,children:Y},Y)})})]}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-2 justify-center pt-2 border-t border-dashed border-[#5A5A5A]/10",children:id.map(Y=>r.jsx("button",{onClick:()=>C(Y),className:`w-6 h-6 rounded-full border-2 transition-transform ${N===Y?"border-[#5A5A5A] scale-110":"border-transparent active:scale-90"}`,style:{backgroundColor:Y}},Y))}),r.jsxs("div",{className:"flex gap-2 mt-4",children:[a&&r.jsx("button",{onClick:q,className:"flex-1 py-2 text-sm font-bold text-[#FF6B6B] bg-[#FFF0F0] rounded-lg active:scale-95 transition-transform",children:""}),r.jsx("button",{onClick:B,className:"flex-[2] py-2 text-sm font-bold text-white bg-[#5A5A5A] rounded-lg shadow-md active:scale-95 transition-transform",children:""})]})]})})]})})}),r.jsx(Be,{children:u&&r.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/20 backdrop-blur-[1px] p-4",children:r.jsxs(me.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:400,damping:30},className:"bg-[#FDFBF7] w-full max-w-sm max-h-[80vh] flex flex-col rounded-2xl shadow-xl border-2 border-[#5A5A5A]/10 relative overflow-hidden",children:[r.jsxs("div",{className:"p-4 border-b border-[#5A5A5A]/10 flex justify-between items-center bg-white/50",children:[r.jsx("h3",{className:"font-bold text-[#5A5A5A]",children:""}),r.jsx("button",{onClick:()=>p(!1),className:"p-1 text-[#999] hover:text-[#5A5A5A] active:scale-90 transition-transform",children:r.jsx(xt,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"overflow-y-auto p-4 space-y-6 flex-1 custom-scrollbar",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-bold text-[#5A5A5A]",children:""}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("span",{className:"text-xs text-[#999] block mb-1",children:""}),r.jsx("input",{type:"date",value:l.startDate,onChange:Y=>j({...l,startDate:Y.target.value}),className:"w-full bg-white border border-[#E0E0E0] rounded-lg px-2 py-1.5 text-xs outline-none focus:border-[#5A5A5A]"})]}),r.jsxs("div",{className:"w-20",children:[r.jsx("span",{className:"text-xs text-[#999] block mb-1",children:""}),r.jsx("input",{type:"number",min:1,max:30,value:l.totalWeeks,onChange:Y=>j({...l,totalWeeks:parseInt(Y.target.value)||20}),className:"w-full bg-white border border-[#E0E0E0] rounded-lg px-2 py-1.5 text-xs text-center outline-none focus:border-[#5A5A5A]"})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-bold text-[#5A5A5A]",children:""}),r.jsx("button",{onClick:()=>j({...l,showWeekends:!l.showWeekends}),className:`w-12 h-6 rounded-full relative transition-colors duration-200 ${l.showWeekends?"bg-[#5A5A5A]":"bg-[#E0E0E0]"}`,children:r.jsx(me.div,{animate:{x:l.showWeekends?26:2},className:"w-5 h-5 bg-white rounded-full absolute top-0.5 shadow-sm"})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-bold text-[#5A5A5A]",children:""}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>l.totalPeriods>1&&j({...l,totalPeriods:l.totalPeriods-1}),className:"w-8 h-8 rounded-lg bg-[#F5F5F5] flex items-center justify-center text-[#5A5A5A] active:scale-90",children:"-"}),r.jsx("span",{className:"w-8 text-center font-bold text-[#5A5A5A]",children:l.totalPeriods}),r.jsx("button",{onClick:()=>l.totalPeriods<20&&j({...l,totalPeriods:l.totalPeriods+1}),className:"w-8 h-8 rounded-lg bg-[#F5F5F5] flex items-center justify-center text-[#5A5A5A] active:scale-90",children:"+"})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-xs font-bold text-[#999] mb-3 uppercase tracking-wider",children:""}),r.jsx("div",{className:"space-y-2",children:Array.from({length:l.totalPeriods},(Y,re)=>{const de=l.periodTimes[re]||{startTime:"08:00",endTime:"08:45"};return r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("span",{className:"w-8 font-bold text-[#5A5A5A] text-center",children:re+1}),r.jsx("input",{type:"time",value:de.startTime,onChange:X=>{const oe=[...l.periodTimes];oe[re]||(oe[re]={period:re+1,startTime:"08:00",endTime:"08:45"}),oe[re].startTime=X.target.value,j({...l,periodTimes:oe})},className:"flex-1 bg-white border border-[#E0E0E0] rounded px-2 py-1 text-xs text-center outline-none focus:border-[#5A5A5A]"}),r.jsx("span",{className:"text-[#999]",children:"-"}),r.jsx("input",{type:"time",value:de.endTime,onChange:X=>{const oe=[...l.periodTimes];oe[re]||(oe[re]={period:re+1,startTime:"08:00",endTime:"08:45"}),oe[re].endTime=X.target.value,j({...l,periodTimes:oe})},className:"flex-1 bg-white border border-[#E0E0E0] rounded px-2 py-1 text-xs text-center outline-none focus:border-[#5A5A5A]"})]},re)})})]}),r.jsx("div",{className:"pt-4 border-t border-[#5A5A5A]/10",children:r.jsxs("button",{onClick:G,className:"w-full py-3 flex items-center justify-center gap-2 text-[#FF6B6B] bg-[#FFF0F0] rounded-xl font-bold active:scale-95 transition-transform",children:[r.jsx(xn,{className:"w-4 h-4"})," ()"]})})]})]})})})]})}const ty={shareEnabled:!1,shareScope:"all",shareCharacterId:""};function IP({onBack:e}){const[t,n]=k.useState("todo"),[s,a]=k.useState(!1),[i,l]=k.useState(!1),[c,u]=k.useState(!1),[p,h]=k.useState(ty),[f,m]=k.useState([]),[g,y]=k.useState(!1),b=[{id:"todo",label:"",icon:U9},{id:"calendar",label:"",icon:Rs},{id:"timetable",label:"",icon:aT}];k.useEffect(()=>{S(),v()},[]);const S=async()=>{try{const C=await se.get(J.SCHEDULE,"schedule_settings");C&&h({...ty,...C})}catch(C){console.error("Failed to load schedule settings",C)}},v=async()=>{try{const C=await se.get(J.CHARACTERS,"characters");C&&m(C)}catch(C){console.error("Failed to load characters",C)}},N=async()=>{try{await se.set(J.SCHEDULE,"schedule_settings",p),a(!1),l(!0),setTimeout(()=>l(!1),2e3)}catch{u(!0),setTimeout(()=>u(!1),2e3)}};return r.jsxs("div",{className:"flex flex-col h-full bg-[#FDFBF7] text-[#5A5A5A] relative overflow-hidden",children:[r.jsxs("div",{className:"w-full relative z-10 pt-8 pb-4 px-6 flex items-center justify-between bg-[#FDFBF7]",children:[r.jsx("button",{onClick:e,className:"w-10 h-10 flex items-center justify-center rounded-full active:bg-black/10 active:scale-90 transition-all duration-200",children:r.jsx(jp,{className:"w-6 h-6 text-[#5A5A5A]",strokeWidth:2})}),r.jsx("div",{className:"text-lg font-bold tracking-widest text-[#5A5A5A] border-b-2 border-dashed border-[#5A5A5A]/30 pb-1",children:b.find(C=>C.id===t)?.label}),r.jsx("button",{onClick:()=>a(!0),className:"w-10 h-10 flex items-center justify-center rounded-full active:bg-black/10 active:scale-90 transition-all duration-200 text-[#5A5A5A]",children:r.jsx(Gm,{className:"w-5 h-5",strokeWidth:2})})]}),r.jsx("div",{className:"absolute top-16 right-[-20px] w-24 h-6 bg-[#E8DCC4] rotate-[15deg] opacity-60 pointer-events-none z-0",style:{backgroundImage:"repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255,255,255,0.5) 10px, rgba(255,255,255,0.5) 20px)"}}),r.jsx("div",{className:"absolute top-20 left-[-10px] w-16 h-4 bg-[#D4E0D6] rotate-[-5deg] opacity-60 pointer-events-none z-0",style:{backgroundImage:"repeating-linear-gradient(-45deg, transparent, transparent 5px, rgba(255,255,255,0.5) 5px, rgba(255,255,255,0.5) 10px)"}}),r.jsx("div",{className:"flex-1 overflow-hidden relative w-full",children:r.jsx(Be,{mode:"wait",children:r.jsxs(me.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2,ease:"easeInOut"},className:"h-full w-full",children:[t==="todo"&&r.jsx(_P,{}),t==="calendar"&&r.jsx(AP,{}),t==="timetable"&&r.jsx(DP,{})]},t)})}),r.jsx("div",{className:"bg-[#FDFBF7] border-t border-dashed border-[#5A5A5A]/20 pb-safe pt-2 px-6 w-full",children:r.jsx("div",{className:"w-full flex justify-between items-center h-16 md:justify-center md:gap-32",children:b.map(C=>{const _=t===C.id;return r.jsxs("button",{onClick:()=>n(C.id),className:"flex flex-col items-center justify-center gap-1 w-20 relative group active:scale-95 transition-transform duration-150",children:[r.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center transition-all duration-300 ${_?"bg-[#5A5A5A] text-[#FDFBF7] shadow-lg scale-110 rotate-[-3deg]":"bg-transparent text-[#9A9A9A]"}`,children:r.jsx(C.icon,{className:"w-5 h-5",strokeWidth:_?2.5:2})}),r.jsx("span",{className:`text-[10px] font-bold tracking-wider transition-colors duration-300 ${_?"text-[#5A5A5A]":"text-[#9A9A9A]"}`,children:C.label}),_&&r.jsx(me.div,{layoutId:"activeTabDot",className:"absolute -bottom-1 w-1 h-1 bg-[#5A5A5A] rounded-full",transition:{type:"spring",stiffness:300,damping:30}})]},C.id)})})}),s&&r.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-[1px] z-50 flex items-center justify-center p-6",children:r.jsxs(me.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:400,damping:30},className:"bg-[#FDFBF7] w-full max-w-[320px] rounded-2xl shadow-xl border-2 border-[#5A5A5A]/10 relative overflow-hidden",children:[r.jsxs("div",{className:"bg-white/50 border-b border-dashed border-[#5A5A5A]/10 p-4 flex justify-between items-center",children:[r.jsx("span",{className:"text-lg font-bold text-[#5A5A5A]",children:""}),r.jsx("button",{onClick:()=>a(!1),className:"p-1 text-[#999] hover:text-[#5A5A5A] active:scale-90 transition-transform",children:r.jsx(xt,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-bold text-[#5A5A5A]",children:""}),r.jsx("p",{className:"text-xs text-[#999] mt-1",children:""})]}),r.jsx("button",{onClick:()=>h({...p,shareEnabled:!p.shareEnabled}),className:`flex-shrink-0 w-12 h-6 rounded-full transition-colors relative ${p.shareEnabled?"bg-[#5A5A5A]":"bg-[#E0E0E0]"}`,children:r.jsx(me.div,{animate:{x:p.shareEnabled?26:2},transition:{type:"spring",stiffness:500,damping:30},className:"w-5 h-5 bg-white rounded-full absolute top-0.5 shadow-sm"})})]}),r.jsx(Be,{children:p.shareEnabled&&r.jsxs(me.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4 pt-4 border-t border-dashed border-[#5A5A5A]/10 overflow-hidden",children:[r.jsx("label",{className:"text-xs font-bold text-[#999] block mb-2",children:""}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("button",{onClick:()=>h({...p,shareScope:"all"}),className:`p-3 rounded-xl border flex flex-col items-center gap-2 transition-all ${p.shareScope==="all"?"bg-[#5A5A5A] border-[#5A5A5A] text-white":"bg-white border-[#E0E0E0] text-[#999]"}`,children:[r.jsx(Tl,{className:"w-5 h-5"}),r.jsx("span",{className:"text-xs font-bold",children:""})]}),r.jsxs("button",{onClick:()=>h({...p,shareScope:"specific"}),className:`p-3 rounded-xl border flex flex-col items-center gap-2 transition-all ${p.shareScope==="specific"?"bg-[#5A5A5A] border-[#5A5A5A] text-white":"bg-white border-[#E0E0E0] text-[#999]"}`,children:[r.jsx(mn,{className:"w-5 h-5"}),r.jsx("span",{className:"text-xs font-bold",children:""})]})]}),p.shareScope==="specific"&&r.jsxs("div",{className:"mt-2",children:[r.jsxs("button",{onClick:()=>y(!g),className:"w-full bg-white border border-[#E0E0E0] px-4 py-2.5 rounded-lg text-xs font-bold text-[#5A5A5A] flex items-center justify-between active:bg-[#F5F5F5] transition-colors",children:[r.jsx("div",{className:"flex items-center gap-2 pl-1",children:r.jsx("span",{children:f.find(C=>C.id===p.shareCharacterId)?.name||""})}),r.jsx(Qn,{className:`w-4 h-4 text-[#999] transition-transform ${g?"rotate-90":""}`})]}),r.jsx(Be,{children:g&&r.jsx(me.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:r.jsxs("div",{className:"mt-2 bg-white border border-[#E0E0E0] rounded-xl shadow-sm max-h-48 overflow-y-auto p-1 custom-scrollbar",children:[f.length===0&&r.jsx("div",{className:"p-3 text-center text-xs text-[#999]",children:""}),f.map(C=>r.jsx("button",{onClick:()=>{h({...p,shareCharacterId:C.id}),y(!1)},className:`w-full text-left px-3 py-2 rounded-lg text-xs font-bold flex items-center gap-2 mb-1 transition-colors ${p.shareCharacterId===C.id?"bg-[#5A5A5A] text-white":"hover:bg-[#F5F5F5] text-[#5A5A5A]"}`,children:C.name},C.id))]})})})]})]})}),r.jsxs("button",{onClick:N,className:"w-full bg-[#5A5A5A] text-white py-3 rounded-xl font-bold text-sm shadow-md active:scale-[0.98] transition-transform flex items-center justify-center gap-2",children:[r.jsx(Et,{className:"w-4 h-4"}),""]})]})]})}),i&&r.jsx("div",{className:"fixed top-[90px] inset-x-0 z-[100] flex justify-center pointer-events-none",children:r.jsxs(me.div,{initial:{scale:.9,opacity:0,y:-10},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},className:"mx-auto w-fit flex items-center gap-2 px-4 py-3 pointer-events-auto shadow-sm",style:{background:"rgba(253, 251, 247, 0.95)",backdropFilter:"blur(4px)",border:"1px dashed rgba(90, 90, 90, 0.3)",borderRadius:"16px",color:"#5A5A5A",fontSize:"13px",fontWeight:"bold"},children:[r.jsx("div",{className:"w-5 h-5 rounded-full bg-[#5A5A5A] flex items-center justify-center text-[#FDFBF7]",children:r.jsx(Et,{className:"w-3 h-3",strokeWidth:3})}),r.jsx("span",{children:""})]})}),c&&r.jsx("div",{className:"fixed top-[90px] inset-x-0 z-[100] flex justify-center pointer-events-none",children:r.jsxs(me.div,{initial:{scale:.9,opacity:0,y:-10},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},className:"mx-auto w-fit flex items-center gap-2 px-4 py-3 pointer-events-auto shadow-sm",style:{background:"rgba(253, 251, 247, 0.95)",backdropFilter:"blur(4px)",border:"1px dashed rgba(229, 115, 115, 0.5)",borderRadius:"16px",color:"#5A5A5A",fontSize:"13px",fontWeight:"bold"},children:[r.jsx("div",{className:"w-5 h-5 rounded-full bg-[#E57373] flex items-center justify-center text-white",children:r.jsx(xt,{className:"w-3 h-3",strokeWidth:3})}),r.jsx("span",{children:""})]})})]})}function PP({onClose:e}){return r.jsx("div",{className:"fixed inset-0 z-50 bg-[#FDFBF7] font-['Source_Han_Sans_CN_VF',sans-serif] overflow-hidden",children:r.jsx("div",{className:"h-full w-full",children:r.jsx(IP,{onBack:e})})})}function Mp(e,[t,n]){return Math.min(n,Math.max(t,e))}function ny(e){const t=MP(e),n=k.forwardRef((s,a)=>{const{children:i,...l}=s,c=k.Children.toArray(i),u=c.find(RP);if(u){const p=u.props.children,h=c.map(f=>f===u?k.Children.count(p)>1?k.Children.only(null):k.isValidElement(p)?p.props.children:null:f);return r.jsx(t,{...l,ref:a,children:k.isValidElement(p)?k.cloneElement(p,void 0,h):null})}return r.jsx(t,{...l,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}function MP(e){const t=k.forwardRef((n,s)=>{const{children:a,...i}=n;if(k.isValidElement(a)){const l=zP(a),c=BP(i,a.props);return a.type!==k.Fragment&&(c.ref=s?lo(s,l):l),k.cloneElement(a,c)}return k.Children.count(a)>1?k.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var FP=Symbol("radix.slottable");function RP(e){return k.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===FP}function BP(e,t){const n={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?n[s]=(...c)=>{const u=i(...c);return a(...c),u}:a&&(n[s]=a):s==="style"?n[s]={...a,...i}:s==="className"&&(n[s]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function zP(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function LP(e){const t=e+"CollectionProvider",[n,s]=ei(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),l=b=>{const{scope:S,children:v}=b,N=Ue.useRef(null),C=Ue.useRef(new Map).current;return r.jsx(a,{scope:S,itemMap:C,collectionRef:N,children:v})};l.displayName=t;const c=e+"CollectionSlot",u=ny(c),p=Ue.forwardRef((b,S)=>{const{scope:v,children:N}=b,C=i(c,v),_=zt(S,C.collectionRef);return r.jsx(u,{ref:_,children:N})});p.displayName=c;const h=e+"CollectionItemSlot",f="data-radix-collection-item",m=ny(h),g=Ue.forwardRef((b,S)=>{const{scope:v,children:N,...C}=b,_=Ue.useRef(null),R=zt(S,_),D=i(h,v);return Ue.useEffect(()=>(D.itemMap.set(_,{ref:_,...C}),()=>void D.itemMap.delete(_))),r.jsx(m,{[f]:"",ref:R,children:N})});g.displayName=h;function y(b){const S=i(e+"CollectionConsumer",b);return Ue.useCallback(()=>{const N=S.collectionRef.current;if(!N)return[];const C=Array.from(N.querySelectorAll(`[${f}]`));return Array.from(S.itemMap.values()).sort((D,V)=>C.indexOf(D.ref.current)-C.indexOf(V.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:l,Slot:p,ItemSlot:g},y,s]}var OP=k.createContext(void 0);function V5(e){const t=k.useContext(OP);return e||t||"ltr"}const $P=["top","right","bottom","left"],ha=Math.min,br=Math.max,Vd=Math.round,od=Math.floor,gs=e=>({x:e,y:e}),VP={left:"right",right:"left",bottom:"top",top:"bottom"},HP={start:"end",end:"start"};function Fp(e,t,n){return br(e,ha(t,n))}function Bs(e,t){return typeof e=="function"?e(t):e}function zs(e){return e.split("-")[0]}function po(e){return e.split("-")[1]}function t0(e){return e==="x"?"y":"x"}function n0(e){return e==="y"?"height":"width"}const UP=new Set(["top","bottom"]);function fs(e){return UP.has(zs(e))?"y":"x"}function r0(e){return t0(fs(e))}function WP(e,t,n){n===void 0&&(n=!1);const s=po(e),a=r0(e),i=n0(a);let l=a==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(l=Hd(l)),[l,Hd(l)]}function KP(e){const t=Hd(e);return[Rp(e),t,Rp(t)]}function Rp(e){return e.replace(/start|end/g,t=>HP[t])}const ry=["left","right"],sy=["right","left"],qP=["top","bottom"],GP=["bottom","top"];function YP(e,t,n){switch(e){case"top":case"bottom":return n?t?sy:ry:t?ry:sy;case"left":case"right":return t?qP:GP;default:return[]}}function ZP(e,t,n,s){const a=po(e);let i=YP(zs(e),n==="start",s);return a&&(i=i.map(l=>l+"-"+a),t&&(i=i.concat(i.map(Rp)))),i}function Hd(e){return e.replace(/left|right|bottom|top/g,t=>VP[t])}function QP(e){return{top:0,right:0,bottom:0,left:0,...e}}function H5(e){return typeof e!="number"?QP(e):{top:e,right:e,bottom:e,left:e}}function Ud(e){const{x:t,y:n,width:s,height:a}=e;return{width:s,height:a,top:n,left:t,right:t+s,bottom:n+a,x:t,y:n}}function ay(e,t,n){let{reference:s,floating:a}=e;const i=fs(t),l=r0(t),c=n0(l),u=zs(t),p=i==="y",h=s.x+s.width/2-a.width/2,f=s.y+s.height/2-a.height/2,m=s[c]/2-a[c]/2;let g;switch(u){case"top":g={x:h,y:s.y-a.height};break;case"bottom":g={x:h,y:s.y+s.height};break;case"right":g={x:s.x+s.width,y:f};break;case"left":g={x:s.x-a.width,y:f};break;default:g={x:s.x,y:s.y}}switch(po(t)){case"start":g[l]-=m*(n&&p?-1:1);break;case"end":g[l]+=m*(n&&p?-1:1);break}return g}const XP=async(e,t,n)=>{const{placement:s="bottom",strategy:a="absolute",middleware:i=[],platform:l}=n,c=i.filter(Boolean),u=await(l.isRTL==null?void 0:l.isRTL(t));let p=await l.getElementRects({reference:e,floating:t,strategy:a}),{x:h,y:f}=ay(p,s,u),m=s,g={},y=0;for(let b=0;b<c.length;b++){const{name:S,fn:v}=c[b],{x:N,y:C,data:_,reset:R}=await v({x:h,y:f,initialPlacement:s,placement:m,strategy:a,middlewareData:g,rects:p,platform:l,elements:{reference:e,floating:t}});h=N??h,f=C??f,g={...g,[S]:{...g[S],..._}},R&&y<=50&&(y++,typeof R=="object"&&(R.placement&&(m=R.placement),R.rects&&(p=R.rects===!0?await l.getElementRects({reference:e,floating:t,strategy:a}):R.rects),{x:h,y:f}=ay(p,m,u)),b=-1)}return{x:h,y:f,placement:m,strategy:a,middlewareData:g}};async function kl(e,t){var n;t===void 0&&(t={});const{x:s,y:a,platform:i,rects:l,elements:c,strategy:u}=e,{boundary:p="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:m=!1,padding:g=0}=Bs(t,e),y=H5(g),S=c[m?f==="floating"?"reference":"floating":f],v=Ud(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(S)))==null||n?S:S.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(c.floating)),boundary:p,rootBoundary:h,strategy:u})),N=f==="floating"?{x:s,y:a,width:l.floating.width,height:l.floating.height}:l.reference,C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c.floating)),_=await(i.isElement==null?void 0:i.isElement(C))?await(i.getScale==null?void 0:i.getScale(C))||{x:1,y:1}:{x:1,y:1},R=Ud(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:N,offsetParent:C,strategy:u}):N);return{top:(v.top-R.top+y.top)/_.y,bottom:(R.bottom-v.bottom+y.bottom)/_.y,left:(v.left-R.left+y.left)/_.x,right:(R.right-v.right+y.right)/_.x}}const JP=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:a,rects:i,platform:l,elements:c,middlewareData:u}=t,{element:p,padding:h=0}=Bs(e,t)||{};if(p==null)return{};const f=H5(h),m={x:n,y:s},g=r0(a),y=n0(g),b=await l.getDimensions(p),S=g==="y",v=S?"top":"left",N=S?"bottom":"right",C=S?"clientHeight":"clientWidth",_=i.reference[y]+i.reference[g]-m[g]-i.floating[y],R=m[g]-i.reference[g],D=await(l.getOffsetParent==null?void 0:l.getOffsetParent(p));let V=D?D[C]:0;(!V||!await(l.isElement==null?void 0:l.isElement(D)))&&(V=c.floating[C]||i.floating[y]);const I=_/2-R/2,A=V/2-b[y]/2-1,U=ha(f[v],A),W=ha(f[N],A),T=U,M=V-b[y]-W,j=V/2-b[y]/2+I,P=Fp(T,j,M),L=!u.arrow&&po(a)!=null&&j!==P&&i.reference[y]/2-(j<T?U:W)-b[y]/2<0,B=L?j<T?j-T:j-M:0;return{[g]:m[g]+B,data:{[g]:P,centerOffset:j-P-B,...L&&{alignmentOffset:B}},reset:L}}}),eM=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,s;const{placement:a,middlewareData:i,rects:l,initialPlacement:c,platform:u,elements:p}=t,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:b=!0,...S}=Bs(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const v=zs(a),N=fs(c),C=zs(c)===c,_=await(u.isRTL==null?void 0:u.isRTL(p.floating)),R=m||(C||!b?[Hd(c)]:KP(c)),D=y!=="none";!m&&D&&R.push(...ZP(c,b,y,_));const V=[c,...R],I=await kl(t,S),A=[];let U=((s=i.flip)==null?void 0:s.overflows)||[];if(h&&A.push(I[v]),f){const j=WP(a,l,_);A.push(I[j[0]],I[j[1]])}if(U=[...U,{placement:a,overflows:A}],!A.every(j=>j<=0)){var W,T;const j=(((W=i.flip)==null?void 0:W.index)||0)+1,P=V[j];if(P&&(!(f==="alignment"?N!==fs(P):!1)||U.every(q=>fs(q.placement)===N?q.overflows[0]>0:!0)))return{data:{index:j,overflows:U},reset:{placement:P}};let L=(T=U.filter(B=>B.overflows[0]<=0).sort((B,q)=>B.overflows[1]-q.overflows[1])[0])==null?void 0:T.placement;if(!L)switch(g){case"bestFit":{var M;const B=(M=U.filter(q=>{if(D){const G=fs(q.placement);return G===N||G==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(G=>G>0).reduce((G,O)=>G+O,0)]).sort((q,G)=>q[1]-G[1])[0])==null?void 0:M[0];B&&(L=B);break}case"initialPlacement":L=c;break}if(a!==L)return{reset:{placement:L}}}return{}}}};function iy(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function oy(e){return $P.some(t=>e[t]>=0)}const tM=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:s="referenceHidden",...a}=Bs(e,t);switch(s){case"referenceHidden":{const i=await kl(t,{...a,elementContext:"reference"}),l=iy(i,n.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:oy(l)}}}case"escaped":{const i=await kl(t,{...a,altBoundary:!0}),l=iy(i,n.floating);return{data:{escapedOffsets:l,escaped:oy(l)}}}default:return{}}}}},U5=new Set(["left","top"]);async function nM(e,t){const{placement:n,platform:s,elements:a}=e,i=await(s.isRTL==null?void 0:s.isRTL(a.floating)),l=zs(n),c=po(n),u=fs(n)==="y",p=U5.has(l)?-1:1,h=i&&u?-1:1,f=Bs(t,e);let{mainAxis:m,crossAxis:g,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return c&&typeof y=="number"&&(g=c==="end"?y*-1:y),u?{x:g*h,y:m*p}:{x:m*p,y:g*h}}const rM=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,s;const{x:a,y:i,placement:l,middlewareData:c}=t,u=await nM(t,e);return l===((n=c.offset)==null?void 0:n.placement)&&(s=c.arrow)!=null&&s.alignmentOffset?{}:{x:a+u.x,y:i+u.y,data:{...u,placement:l}}}}},sM=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:s,placement:a}=t,{mainAxis:i=!0,crossAxis:l=!1,limiter:c={fn:S=>{let{x:v,y:N}=S;return{x:v,y:N}}},...u}=Bs(e,t),p={x:n,y:s},h=await kl(t,u),f=fs(zs(a)),m=t0(f);let g=p[m],y=p[f];if(i){const S=m==="y"?"top":"left",v=m==="y"?"bottom":"right",N=g+h[S],C=g-h[v];g=Fp(N,g,C)}if(l){const S=f==="y"?"top":"left",v=f==="y"?"bottom":"right",N=y+h[S],C=y-h[v];y=Fp(N,y,C)}const b=c.fn({...t,[m]:g,[f]:y});return{...b,data:{x:b.x-n,y:b.y-s,enabled:{[m]:i,[f]:l}}}}}},aM=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:s,placement:a,rects:i,middlewareData:l}=t,{offset:c=0,mainAxis:u=!0,crossAxis:p=!0}=Bs(e,t),h={x:n,y:s},f=fs(a),m=t0(f);let g=h[m],y=h[f];const b=Bs(c,t),S=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(u){const C=m==="y"?"height":"width",_=i.reference[m]-i.floating[C]+S.mainAxis,R=i.reference[m]+i.reference[C]-S.mainAxis;g<_?g=_:g>R&&(g=R)}if(p){var v,N;const C=m==="y"?"width":"height",_=U5.has(zs(a)),R=i.reference[f]-i.floating[C]+(_&&((v=l.offset)==null?void 0:v[f])||0)+(_?0:S.crossAxis),D=i.reference[f]+i.reference[C]+(_?0:((N=l.offset)==null?void 0:N[f])||0)-(_?S.crossAxis:0);y<R?y=R:y>D&&(y=D)}return{[m]:g,[f]:y}}}},iM=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,s;const{placement:a,rects:i,platform:l,elements:c}=t,{apply:u=()=>{},...p}=Bs(e,t),h=await kl(t,p),f=zs(a),m=po(a),g=fs(a)==="y",{width:y,height:b}=i.floating;let S,v;f==="top"||f==="bottom"?(S=f,v=m===(await(l.isRTL==null?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(v=f,S=m==="end"?"top":"bottom");const N=b-h.top-h.bottom,C=y-h.left-h.right,_=ha(b-h[S],N),R=ha(y-h[v],C),D=!t.middlewareData.shift;let V=_,I=R;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(I=C),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(V=N),D&&!m){const U=br(h.left,0),W=br(h.right,0),T=br(h.top,0),M=br(h.bottom,0);g?I=y-2*(U!==0||W!==0?U+W:br(h.left,h.right)):V=b-2*(T!==0||M!==0?T+M:br(h.top,h.bottom))}await u({...t,availableWidth:I,availableHeight:V});const A=await l.getDimensions(c.floating);return y!==A.width||b!==A.height?{reset:{rects:!0}}:{}}}};function cu(){return typeof window<"u"}function mo(e){return W5(e)?(e.nodeName||"").toLowerCase():"#document"}function vr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function vs(e){var t;return(t=(W5(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function W5(e){return cu()?e instanceof Node||e instanceof vr(e).Node:!1}function Gr(e){return cu()?e instanceof Element||e instanceof vr(e).Element:!1}function bs(e){return cu()?e instanceof HTMLElement||e instanceof vr(e).HTMLElement:!1}function ly(e){return!cu()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof vr(e).ShadowRoot}const oM=new Set(["inline","contents"]);function Il(e){const{overflow:t,overflowX:n,overflowY:s,display:a}=Yr(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!oM.has(a)}const lM=new Set(["table","td","th"]);function cM(e){return lM.has(mo(e))}const dM=[":popover-open",":modal"];function du(e){return dM.some(t=>{try{return e.matches(t)}catch{return!1}})}const uM=["transform","translate","scale","rotate","perspective"],fM=["transform","translate","scale","rotate","perspective","filter"],hM=["paint","layout","strict","content"];function s0(e){const t=a0(),n=Gr(e)?Yr(e):e;return uM.some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||fM.some(s=>(n.willChange||"").includes(s))||hM.some(s=>(n.contain||"").includes(s))}function pM(e){let t=pa(e);for(;bs(t)&&!no(t);){if(s0(t))return t;if(du(t))return null;t=pa(t)}return null}function a0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const mM=new Set(["html","body","#document"]);function no(e){return mM.has(mo(e))}function Yr(e){return vr(e).getComputedStyle(e)}function uu(e){return Gr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function pa(e){if(mo(e)==="html")return e;const t=e.assignedSlot||e.parentNode||ly(e)&&e.host||vs(e);return ly(t)?t.host:t}function K5(e){const t=pa(e);return no(t)?e.ownerDocument?e.ownerDocument.body:e.body:bs(t)&&Il(t)?t:K5(t)}function Sl(e,t,n){var s;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=K5(e),i=a===((s=e.ownerDocument)==null?void 0:s.body),l=vr(a);if(i){const c=Bp(l);return t.concat(l,l.visualViewport||[],Il(a)?a:[],c&&n?Sl(c):[])}return t.concat(a,Sl(a,[],n))}function Bp(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function q5(e){const t=Yr(e);let n=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const a=bs(e),i=a?e.offsetWidth:n,l=a?e.offsetHeight:s,c=Vd(n)!==i||Vd(s)!==l;return c&&(n=i,s=l),{width:n,height:s,$:c}}function i0(e){return Gr(e)?e:e.contextElement}function Zi(e){const t=i0(e);if(!bs(t))return gs(1);const n=t.getBoundingClientRect(),{width:s,height:a,$:i}=q5(t);let l=(i?Vd(n.width):n.width)/s,c=(i?Vd(n.height):n.height)/a;return(!l||!Number.isFinite(l))&&(l=1),(!c||!Number.isFinite(c))&&(c=1),{x:l,y:c}}const xM=gs(0);function G5(e){const t=vr(e);return!a0()||!t.visualViewport?xM:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function gM(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==vr(e)?!1:t}function Qa(e,t,n,s){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=i0(e);let l=gs(1);t&&(s?Gr(s)&&(l=Zi(s)):l=Zi(e));const c=gM(i,n,s)?G5(i):gs(0);let u=(a.left+c.x)/l.x,p=(a.top+c.y)/l.y,h=a.width/l.x,f=a.height/l.y;if(i){const m=vr(i),g=s&&Gr(s)?vr(s):s;let y=m,b=Bp(y);for(;b&&s&&g!==y;){const S=Zi(b),v=b.getBoundingClientRect(),N=Yr(b),C=v.left+(b.clientLeft+parseFloat(N.paddingLeft))*S.x,_=v.top+(b.clientTop+parseFloat(N.paddingTop))*S.y;u*=S.x,p*=S.y,h*=S.x,f*=S.y,u+=C,p+=_,y=vr(b),b=Bp(y)}}return Ud({width:h,height:f,x:u,y:p})}function fu(e,t){const n=uu(e).scrollLeft;return t?t.left+n:Qa(vs(e)).left+n}function Y5(e,t){const n=e.getBoundingClientRect(),s=n.left+t.scrollLeft-fu(e,n),a=n.top+t.scrollTop;return{x:s,y:a}}function bM(e){let{elements:t,rect:n,offsetParent:s,strategy:a}=e;const i=a==="fixed",l=vs(s),c=t?du(t.floating):!1;if(s===l||c&&i)return n;let u={scrollLeft:0,scrollTop:0},p=gs(1);const h=gs(0),f=bs(s);if((f||!f&&!i)&&((mo(s)!=="body"||Il(l))&&(u=uu(s)),bs(s))){const g=Qa(s);p=Zi(s),h.x=g.x+s.clientLeft,h.y=g.y+s.clientTop}const m=l&&!f&&!i?Y5(l,u):gs(0);return{width:n.width*p.x,height:n.height*p.y,x:n.x*p.x-u.scrollLeft*p.x+h.x+m.x,y:n.y*p.y-u.scrollTop*p.y+h.y+m.y}}function yM(e){return Array.from(e.getClientRects())}function vM(e){const t=vs(e),n=uu(e),s=e.ownerDocument.body,a=br(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),i=br(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let l=-n.scrollLeft+fu(e);const c=-n.scrollTop;return Yr(s).direction==="rtl"&&(l+=br(t.clientWidth,s.clientWidth)-a),{width:a,height:i,x:l,y:c}}const cy=25;function wM(e,t){const n=vr(e),s=vs(e),a=n.visualViewport;let i=s.clientWidth,l=s.clientHeight,c=0,u=0;if(a){i=a.width,l=a.height;const h=a0();(!h||h&&t==="fixed")&&(c=a.offsetLeft,u=a.offsetTop)}const p=fu(s);if(p<=0){const h=s.ownerDocument,f=h.body,m=getComputedStyle(f),g=h.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,y=Math.abs(s.clientWidth-f.clientWidth-g);y<=cy&&(i-=y)}else p<=cy&&(i+=p);return{width:i,height:l,x:c,y:u}}const kM=new Set(["absolute","fixed"]);function SM(e,t){const n=Qa(e,!0,t==="fixed"),s=n.top+e.clientTop,a=n.left+e.clientLeft,i=bs(e)?Zi(e):gs(1),l=e.clientWidth*i.x,c=e.clientHeight*i.y,u=a*i.x,p=s*i.y;return{width:l,height:c,x:u,y:p}}function dy(e,t,n){let s;if(t==="viewport")s=wM(e,n);else if(t==="document")s=vM(vs(e));else if(Gr(t))s=SM(t,n);else{const a=G5(e);s={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Ud(s)}function Z5(e,t){const n=pa(e);return n===t||!Gr(n)||no(n)?!1:Yr(n).position==="fixed"||Z5(n,t)}function jM(e,t){const n=t.get(e);if(n)return n;let s=Sl(e,[],!1).filter(c=>Gr(c)&&mo(c)!=="body"),a=null;const i=Yr(e).position==="fixed";let l=i?pa(e):e;for(;Gr(l)&&!no(l);){const c=Yr(l),u=s0(l);!u&&c.position==="fixed"&&(a=null),(i?!u&&!a:!u&&c.position==="static"&&!!a&&kM.has(a.position)||Il(l)&&!u&&Z5(e,l))?s=s.filter(h=>h!==l):a=c,l=pa(l)}return t.set(e,s),s}function CM(e){let{element:t,boundary:n,rootBoundary:s,strategy:a}=e;const l=[...n==="clippingAncestors"?du(t)?[]:jM(t,this._c):[].concat(n),s],c=l[0],u=l.reduce((p,h)=>{const f=dy(t,h,a);return p.top=br(f.top,p.top),p.right=ha(f.right,p.right),p.bottom=ha(f.bottom,p.bottom),p.left=br(f.left,p.left),p},dy(t,c,a));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function NM(e){const{width:t,height:n}=q5(e);return{width:t,height:n}}function _M(e,t,n){const s=bs(t),a=vs(t),i=n==="fixed",l=Qa(e,!0,i,t);let c={scrollLeft:0,scrollTop:0};const u=gs(0);function p(){u.x=fu(a)}if(s||!s&&!i)if((mo(t)!=="body"||Il(a))&&(c=uu(t)),s){const g=Qa(t,!0,i,t);u.x=g.x+t.clientLeft,u.y=g.y+t.clientTop}else a&&p();i&&!s&&a&&p();const h=a&&!s&&!i?Y5(a,c):gs(0),f=l.left+c.scrollLeft-u.x-h.x,m=l.top+c.scrollTop-u.y-h.y;return{x:f,y:m,width:l.width,height:l.height}}function Ph(e){return Yr(e).position==="static"}function uy(e,t){if(!bs(e)||Yr(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return vs(e)===n&&(n=n.ownerDocument.body),n}function Q5(e,t){const n=vr(e);if(du(e))return n;if(!bs(e)){let a=pa(e);for(;a&&!no(a);){if(Gr(a)&&!Ph(a))return a;a=pa(a)}return n}let s=uy(e,t);for(;s&&cM(s)&&Ph(s);)s=uy(s,t);return s&&no(s)&&Ph(s)&&!s0(s)?n:s||pM(e)||n}const AM=async function(e){const t=this.getOffsetParent||Q5,n=this.getDimensions,s=await n(e.floating);return{reference:_M(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function EM(e){return Yr(e).direction==="rtl"}const TM={convertOffsetParentRelativeRectToViewportRelativeRect:bM,getDocumentElement:vs,getClippingRect:CM,getOffsetParent:Q5,getElementRects:AM,getClientRects:yM,getDimensions:NM,getScale:Zi,isElement:Gr,isRTL:EM};function X5(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function DM(e,t){let n=null,s;const a=vs(e);function i(){var c;clearTimeout(s),(c=n)==null||c.disconnect(),n=null}function l(c,u){c===void 0&&(c=!1),u===void 0&&(u=1),i();const p=e.getBoundingClientRect(),{left:h,top:f,width:m,height:g}=p;if(c||t(),!m||!g)return;const y=od(f),b=od(a.clientWidth-(h+m)),S=od(a.clientHeight-(f+g)),v=od(h),C={rootMargin:-y+"px "+-b+"px "+-S+"px "+-v+"px",threshold:br(0,ha(1,u))||1};let _=!0;function R(D){const V=D[0].intersectionRatio;if(V!==u){if(!_)return l();V?l(!1,V):s=setTimeout(()=>{l(!1,1e-7)},1e3)}V===1&&!X5(p,e.getBoundingClientRect())&&l(),_=!1}try{n=new IntersectionObserver(R,{...C,root:a.ownerDocument})}catch{n=new IntersectionObserver(R,C)}n.observe(e)}return l(!0),i}function IM(e,t,n,s){s===void 0&&(s={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:u=!1}=s,p=i0(e),h=a||i?[...p?Sl(p):[],...Sl(t)]:[];h.forEach(v=>{a&&v.addEventListener("scroll",n,{passive:!0}),i&&v.addEventListener("resize",n)});const f=p&&c?DM(p,n):null;let m=-1,g=null;l&&(g=new ResizeObserver(v=>{let[N]=v;N&&N.target===p&&g&&(g.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var C;(C=g)==null||C.observe(t)})),n()}),p&&!u&&g.observe(p),g.observe(t));let y,b=u?Qa(e):null;u&&S();function S(){const v=Qa(e);b&&!X5(b,v)&&n(),b=v,y=requestAnimationFrame(S)}return n(),()=>{var v;h.forEach(N=>{a&&N.removeEventListener("scroll",n),i&&N.removeEventListener("resize",n)}),f?.(),(v=g)==null||v.disconnect(),g=null,u&&cancelAnimationFrame(y)}}const PM=rM,MM=sM,FM=eM,RM=iM,BM=tM,fy=JP,zM=aM,LM=(e,t,n)=>{const s=new Map,a={platform:TM,...n},i={...a.platform,_c:s};return XP(e,t,{...a,platform:i})};var OM=typeof document<"u",$M=function(){},wd=OM?k.useLayoutEffect:$M;function Wd(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,s,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(s=n;s--!==0;)if(!Wd(e[s],t[s]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(t,a[s]))return!1;for(s=n;s--!==0;){const i=a[s];if(!(i==="_owner"&&e.$$typeof)&&!Wd(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function J5(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function hy(e,t){const n=J5(e);return Math.round(t*n)/n}function Mh(e){const t=k.useRef(e);return wd(()=>{t.current=e}),t}function VM(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:s=[],platform:a,elements:{reference:i,floating:l}={},transform:c=!0,whileElementsMounted:u,open:p}=e,[h,f]=k.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,g]=k.useState(s);Wd(m,s)||g(s);const[y,b]=k.useState(null),[S,v]=k.useState(null),N=k.useCallback(q=>{q!==D.current&&(D.current=q,b(q))},[]),C=k.useCallback(q=>{q!==V.current&&(V.current=q,v(q))},[]),_=i||y,R=l||S,D=k.useRef(null),V=k.useRef(null),I=k.useRef(h),A=u!=null,U=Mh(u),W=Mh(a),T=Mh(p),M=k.useCallback(()=>{if(!D.current||!V.current)return;const q={placement:t,strategy:n,middleware:m};W.current&&(q.platform=W.current),LM(D.current,V.current,q).then(G=>{const O={...G,isPositioned:T.current!==!1};j.current&&!Wd(I.current,O)&&(I.current=O,us.flushSync(()=>{f(O)}))})},[m,t,n,W,T]);wd(()=>{p===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,f(q=>({...q,isPositioned:!1})))},[p]);const j=k.useRef(!1);wd(()=>(j.current=!0,()=>{j.current=!1}),[]),wd(()=>{if(_&&(D.current=_),R&&(V.current=R),_&&R){if(U.current)return U.current(_,R,M);M()}},[_,R,M,U,A]);const P=k.useMemo(()=>({reference:D,floating:V,setReference:N,setFloating:C}),[N,C]),L=k.useMemo(()=>({reference:_,floating:R}),[_,R]),B=k.useMemo(()=>{const q={position:n,left:0,top:0};if(!L.floating)return q;const G=hy(L.floating,h.x),O=hy(L.floating,h.y);return c?{...q,transform:"translate("+G+"px, "+O+"px)",...J5(L.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:G,top:O}},[n,c,L.floating,h.x,h.y]);return k.useMemo(()=>({...h,update:M,refs:P,elements:L,floatingStyles:B}),[h,M,P,L,B])}const HM=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:s,padding:a}=typeof e=="function"?e(n):e;return s&&t(s)?s.current!=null?fy({element:s.current,padding:a}).fn(n):{}:s?fy({element:s,padding:a}).fn(n):{}}}},UM=(e,t)=>({...PM(e),options:[e,t]}),WM=(e,t)=>({...MM(e),options:[e,t]}),KM=(e,t)=>({...zM(e),options:[e,t]}),qM=(e,t)=>({...FM(e),options:[e,t]}),GM=(e,t)=>({...RM(e),options:[e,t]}),YM=(e,t)=>({...BM(e),options:[e,t]}),ZM=(e,t)=>({...HM(e),options:[e,t]});var QM="Arrow",e3=k.forwardRef((e,t)=>{const{children:n,width:s=10,height:a=5,...i}=e;return r.jsx(It.svg,{...i,ref:t,width:s,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:r.jsx("polygon",{points:"0,0 30,0 15,10"})})});e3.displayName=QM;var XM=e3,o0="Popper",[t3,n3]=ei(o0),[JM,r3]=t3(o0),s3=e=>{const{__scopePopper:t,children:n}=e,[s,a]=k.useState(null);return r.jsx(JM,{scope:t,anchor:s,onAnchorChange:a,children:n})};s3.displayName=o0;var a3="PopperAnchor",i3=k.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:s,...a}=e,i=r3(a3,n),l=k.useRef(null),c=zt(t,l),u=k.useRef(null);return k.useEffect(()=>{const p=u.current;u.current=s?.current||l.current,p!==u.current&&i.onAnchorChange(u.current)}),s?null:r.jsx(It.div,{...a,ref:c})});i3.displayName=a3;var l0="PopperContent",[eF,tF]=t3(l0),o3=k.forwardRef((e,t)=>{const{__scopePopper:n,side:s="bottom",sideOffset:a=0,align:i="center",alignOffset:l=0,arrowPadding:c=0,avoidCollisions:u=!0,collisionBoundary:p=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:y,...b}=e,S=r3(l0,n),[v,N]=k.useState(null),C=zt(t,de=>N(de)),[_,R]=k.useState(null),D=o5(_),V=D?.width??0,I=D?.height??0,A=s+(i!=="center"?"-"+i:""),U=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},W=Array.isArray(p)?p:[p],T=W.length>0,M={padding:U,boundary:W.filter(rF),altBoundary:T},{refs:j,floatingStyles:P,placement:L,isPositioned:B,middlewareData:q}=VM({strategy:"fixed",placement:A,whileElementsMounted:(...de)=>IM(...de,{animationFrame:g==="always"}),elements:{reference:S.anchor},middleware:[UM({mainAxis:a+I,alignmentAxis:l}),u&&WM({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?KM():void 0,...M}),u&&qM({...M}),GM({...M,apply:({elements:de,rects:X,availableWidth:oe,availableHeight:ye})=>{const{width:be,height:Ie}=X.reference,De=de.floating.style;De.setProperty("--radix-popper-available-width",`${oe}px`),De.setProperty("--radix-popper-available-height",`${ye}px`),De.setProperty("--radix-popper-anchor-width",`${be}px`),De.setProperty("--radix-popper-anchor-height",`${Ie}px`)}}),_&&ZM({element:_,padding:c}),sF({arrowWidth:V,arrowHeight:I}),m&&YM({strategy:"referenceHidden",...M})]}),[G,O]=d3(L),$=cr(y);Mn(()=>{B&&$?.()},[B,$]);const K=q.arrow?.x,H=q.arrow?.y,ee=q.arrow?.centerOffset!==0,[Y,re]=k.useState();return Mn(()=>{v&&re(window.getComputedStyle(v).zIndex)},[v]),r.jsx("div",{ref:j.setFloating,"data-radix-popper-content-wrapper":"",style:{...P,transform:B?P.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Y,"--radix-popper-transform-origin":[q.transformOrigin?.x,q.transformOrigin?.y].join(" "),...q.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:r.jsx(eF,{scope:n,placedSide:G,onArrowChange:R,arrowX:K,arrowY:H,shouldHideArrow:ee,children:r.jsx(It.div,{"data-side":G,"data-align":O,...b,ref:C,style:{...b.style,animation:B?void 0:"none"}})})})});o3.displayName=l0;var l3="PopperArrow",nF={top:"bottom",right:"left",bottom:"top",left:"right"},c3=k.forwardRef(function(t,n){const{__scopePopper:s,...a}=t,i=tF(l3,s),l=nF[i.placedSide];return r.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:r.jsx(XM,{...a,ref:n,style:{...a.style,display:"block"}})})});c3.displayName=l3;function rF(e){return e!==null}var sF=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:s,middlewareData:a}=t,l=a.arrow?.centerOffset!==0,c=l?0:e.arrowWidth,u=l?0:e.arrowHeight,[p,h]=d3(n),f={start:"0%",center:"50%",end:"100%"}[h],m=(a.arrow?.x??0)+c/2,g=(a.arrow?.y??0)+u/2;let y="",b="";return p==="bottom"?(y=l?f:`${m}px`,b=`${-u}px`):p==="top"?(y=l?f:`${m}px`,b=`${s.floating.height+u}px`):p==="right"?(y=`${-u}px`,b=l?f:`${g}px`):p==="left"&&(y=`${s.floating.width+u}px`,b=l?f:`${g}px`),{data:{x:y,y:b}}}});function d3(e){const[t,n="center"]=e.split("-");return[t,n]}var aF=s3,iF=i3,oF=o3,lF=c3;function cF(e){const t=dF(e),n=k.forwardRef((s,a)=>{const{children:i,...l}=s,c=k.Children.toArray(i),u=c.find(fF);if(u){const p=u.props.children,h=c.map(f=>f===u?k.Children.count(p)>1?k.Children.only(null):k.isValidElement(p)?p.props.children:null:f);return r.jsx(t,{...l,ref:a,children:k.isValidElement(p)?k.cloneElement(p,void 0,h):null})}return r.jsx(t,{...l,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}function dF(e){const t=k.forwardRef((n,s)=>{const{children:a,...i}=n;if(k.isValidElement(a)){const l=pF(a),c=hF(i,a.props);return a.type!==k.Fragment&&(c.ref=s?lo(s,l):l),k.cloneElement(a,c)}return k.Children.count(a)>1?k.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var uF=Symbol("radix.slottable");function fF(e){return k.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===uF}function hF(e,t){const n={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?n[s]=(...c)=>{const u=i(...c);return a(...c),u}:a&&(n[s]=a):s==="style"?n[s]={...a,...i}:s==="className"&&(n[s]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function pF(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var u3=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),mF="VisuallyHidden",xF=k.forwardRef((e,t)=>r.jsx(It.span,{...e,ref:t,style:{...u3,...e.style}}));xF.displayName=mF;var gF=[" ","Enter","ArrowUp","ArrowDown"],bF=[" ","Enter"],Xa="Select",[hu,pu,yF]=LP(Xa),[xo]=ei(Xa,[yF,n3]),mu=n3(),[vF,ba]=xo(Xa),[wF,kF]=xo(Xa),f3=e=>{const{__scopeSelect:t,children:n,open:s,defaultOpen:a,onOpenChange:i,value:l,defaultValue:c,onValueChange:u,dir:p,name:h,autoComplete:f,disabled:m,required:g,form:y}=e,b=mu(t),[S,v]=k.useState(null),[N,C]=k.useState(null),[_,R]=k.useState(!1),D=V5(p),[V,I]=Td({prop:s,defaultProp:a??!1,onChange:i,caller:Xa}),[A,U]=Td({prop:l,defaultProp:c,onChange:u,caller:Xa}),W=k.useRef(null),T=S?y||!!S.closest("form"):!0,[M,j]=k.useState(new Set),P=Array.from(M).map(L=>L.props.value).join(";");return r.jsx(aF,{...b,children:r.jsxs(vF,{required:g,scope:t,trigger:S,onTriggerChange:v,valueNode:N,onValueNodeChange:C,valueNodeHasChildren:_,onValueNodeHasChildrenChange:R,contentId:qi(),value:A,onValueChange:U,open:V,onOpenChange:I,dir:D,triggerPointerDownPosRef:W,disabled:m,children:[r.jsx(hu.Provider,{scope:t,children:r.jsx(wF,{scope:e.__scopeSelect,onNativeOptionAdd:k.useCallback(L=>{j(B=>new Set(B).add(L))},[]),onNativeOptionRemove:k.useCallback(L=>{j(B=>{const q=new Set(B);return q.delete(L),q})},[]),children:n})}),T?r.jsxs(M3,{"aria-hidden":!0,required:g,tabIndex:-1,name:h,autoComplete:f,value:A,onChange:L=>U(L.target.value),disabled:m,form:y,children:[A===void 0?r.jsx("option",{value:""}):null,Array.from(M)]},P):null]})})};f3.displayName=Xa;var h3="SelectTrigger",p3=k.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:s=!1,...a}=e,i=mu(n),l=ba(h3,n),c=l.disabled||s,u=zt(t,l.onTriggerChange),p=pu(n),h=k.useRef("touch"),[f,m,g]=R3(b=>{const S=p().filter(C=>!C.disabled),v=S.find(C=>C.value===l.value),N=B3(S,b,v);N!==void 0&&l.onValueChange(N.value)}),y=b=>{c||(l.onOpenChange(!0),g()),b&&(l.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return r.jsx(iF,{asChild:!0,...i,children:r.jsx(It.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":F3(l.value)?"":void 0,...a,ref:u,onClick:Tt(a.onClick,b=>{b.currentTarget.focus(),h.current!=="mouse"&&y(b)}),onPointerDown:Tt(a.onPointerDown,b=>{h.current=b.pointerType;const S=b.target;S.hasPointerCapture(b.pointerId)&&S.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(y(b),b.preventDefault())}),onKeyDown:Tt(a.onKeyDown,b=>{const S=f.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&m(b.key),!(S&&b.key===" ")&&gF.includes(b.key)&&(y(),b.preventDefault())})})})});p3.displayName=h3;var m3="SelectValue",x3=k.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:a,children:i,placeholder:l="",...c}=e,u=ba(m3,n),{onValueNodeHasChildrenChange:p}=u,h=i!==void 0,f=zt(t,u.onValueNodeChange);return Mn(()=>{p(h)},[p,h]),r.jsx(It.span,{...c,ref:f,style:{pointerEvents:"none"},children:F3(u.value)?r.jsx(r.Fragment,{children:l}):i})});x3.displayName=m3;var SF="SelectIcon",g3=k.forwardRef((e,t)=>{const{__scopeSelect:n,children:s,...a}=e;return r.jsx(It.span,{"aria-hidden":!0,...a,ref:t,children:s||""})});g3.displayName=SF;var jF="SelectPortal",b3=e=>r.jsx(Rm,{asChild:!0,...e});b3.displayName=jF;var Ja="SelectContent",y3=k.forwardRef((e,t)=>{const n=ba(Ja,e.__scopeSelect),[s,a]=k.useState();if(Mn(()=>{a(new DocumentFragment)},[]),!n.open){const i=s;return i?us.createPortal(r.jsx(v3,{scope:e.__scopeSelect,children:r.jsx(hu.Slot,{scope:e.__scopeSelect,children:r.jsx("div",{children:e.children})})}),i):null}return r.jsx(w3,{...e,ref:t})});y3.displayName=Ja;var qr=10,[v3,ya]=xo(Ja),CF="SelectContentImpl",NF=cF("SelectContent.RemoveScroll"),w3=k.forwardRef((e,t)=>{const{__scopeSelect:n,position:s="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:l,side:c,sideOffset:u,align:p,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:y,hideWhenDetached:b,avoidCollisions:S,...v}=e,N=ba(Ja,n),[C,_]=k.useState(null),[R,D]=k.useState(null),V=zt(t,de=>_(de)),[I,A]=k.useState(null),[U,W]=k.useState(null),T=pu(n),[M,j]=k.useState(!1),P=k.useRef(!1);k.useEffect(()=>{if(C)return Y2(C)},[C]),O2();const L=k.useCallback(de=>{const[X,...oe]=T().map(Ie=>Ie.ref.current),[ye]=oe.slice(-1),be=document.activeElement;for(const Ie of de)if(Ie===be||(Ie?.scrollIntoView({block:"nearest"}),Ie===X&&R&&(R.scrollTop=0),Ie===ye&&R&&(R.scrollTop=R.scrollHeight),Ie?.focus(),document.activeElement!==be))return},[T,R]),B=k.useCallback(()=>L([I,C]),[L,I,C]);k.useEffect(()=>{M&&B()},[M,B]);const{onOpenChange:q,triggerPointerDownPosRef:G}=N;k.useEffect(()=>{if(C){let de={x:0,y:0};const X=ye=>{de={x:Math.abs(Math.round(ye.pageX)-(G.current?.x??0)),y:Math.abs(Math.round(ye.pageY)-(G.current?.y??0))}},oe=ye=>{de.x<=10&&de.y<=10?ye.preventDefault():C.contains(ye.target)||q(!1),document.removeEventListener("pointermove",X),G.current=null};return G.current!==null&&(document.addEventListener("pointermove",X),document.addEventListener("pointerup",oe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",X),document.removeEventListener("pointerup",oe,{capture:!0})}}},[C,q,G]),k.useEffect(()=>{const de=()=>q(!1);return window.addEventListener("blur",de),window.addEventListener("resize",de),()=>{window.removeEventListener("blur",de),window.removeEventListener("resize",de)}},[q]);const[O,$]=R3(de=>{const X=T().filter(be=>!be.disabled),oe=X.find(be=>be.ref.current===document.activeElement),ye=B3(X,de,oe);ye&&setTimeout(()=>ye.ref.current.focus())}),K=k.useCallback((de,X,oe)=>{const ye=!P.current&&!oe;(N.value!==void 0&&N.value===X||ye)&&(A(de),ye&&(P.current=!0))},[N.value]),H=k.useCallback(()=>C?.focus(),[C]),ee=k.useCallback((de,X,oe)=>{const ye=!P.current&&!oe;(N.value!==void 0&&N.value===X||ye)&&W(de)},[N.value]),Y=s==="popper"?zp:k3,re=Y===zp?{side:c,sideOffset:u,align:p,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:y,hideWhenDetached:b,avoidCollisions:S}:{};return r.jsx(v3,{scope:n,content:C,viewport:R,onViewportChange:D,itemRefCallback:K,selectedItem:I,onItemLeave:H,itemTextRefCallback:ee,focusSelectedItem:B,selectedItemText:U,position:s,isPositioned:M,searchRef:O,children:r.jsx(Bm,{as:NF,allowPinchZoom:!0,children:r.jsx(Fm,{asChild:!0,trapped:N.open,onMountAutoFocus:de=>{de.preventDefault()},onUnmountAutoFocus:Tt(a,de=>{N.trigger?.focus({preventScroll:!0}),de.preventDefault()}),children:r.jsx(Mm,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:de=>de.preventDefault(),onDismiss:()=>N.onOpenChange(!1),children:r.jsx(Y,{role:"listbox",id:N.contentId,"data-state":N.open?"open":"closed",dir:N.dir,onContextMenu:de=>de.preventDefault(),...v,...re,onPlaced:()=>j(!0),ref:V,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:Tt(v.onKeyDown,de=>{const X=de.ctrlKey||de.altKey||de.metaKey;if(de.key==="Tab"&&de.preventDefault(),!X&&de.key.length===1&&$(de.key),["ArrowUp","ArrowDown","Home","End"].includes(de.key)){let ye=T().filter(be=>!be.disabled).map(be=>be.ref.current);if(["ArrowUp","End"].includes(de.key)&&(ye=ye.slice().reverse()),["ArrowUp","ArrowDown"].includes(de.key)){const be=de.target,Ie=ye.indexOf(be);ye=ye.slice(Ie+1)}setTimeout(()=>L(ye)),de.preventDefault()}})})})})})})});w3.displayName=CF;var _F="SelectItemAlignedPosition",k3=k.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:s,...a}=e,i=ba(Ja,n),l=ya(Ja,n),[c,u]=k.useState(null),[p,h]=k.useState(null),f=zt(t,V=>h(V)),m=pu(n),g=k.useRef(!1),y=k.useRef(!0),{viewport:b,selectedItem:S,selectedItemText:v,focusSelectedItem:N}=l,C=k.useCallback(()=>{if(i.trigger&&i.valueNode&&c&&p&&b&&S&&v){const V=i.trigger.getBoundingClientRect(),I=p.getBoundingClientRect(),A=i.valueNode.getBoundingClientRect(),U=v.getBoundingClientRect();if(i.dir!=="rtl"){const be=U.left-I.left,Ie=A.left-be,De=V.left-Ie,F=V.width+De,le=Math.max(F,I.width),Z=window.innerWidth-qr,te=Mp(Ie,[qr,Math.max(qr,Z-le)]);c.style.minWidth=F+"px",c.style.left=te+"px"}else{const be=I.right-U.right,Ie=window.innerWidth-A.right-be,De=window.innerWidth-V.right-Ie,F=V.width+De,le=Math.max(F,I.width),Z=window.innerWidth-qr,te=Mp(Ie,[qr,Math.max(qr,Z-le)]);c.style.minWidth=F+"px",c.style.right=te+"px"}const W=m(),T=window.innerHeight-qr*2,M=b.scrollHeight,j=window.getComputedStyle(p),P=parseInt(j.borderTopWidth,10),L=parseInt(j.paddingTop,10),B=parseInt(j.borderBottomWidth,10),q=parseInt(j.paddingBottom,10),G=P+L+M+q+B,O=Math.min(S.offsetHeight*5,G),$=window.getComputedStyle(b),K=parseInt($.paddingTop,10),H=parseInt($.paddingBottom,10),ee=V.top+V.height/2-qr,Y=T-ee,re=S.offsetHeight/2,de=S.offsetTop+re,X=P+L+de,oe=G-X;if(X<=ee){const be=W.length>0&&S===W[W.length-1].ref.current;c.style.bottom="0px";const Ie=p.clientHeight-b.offsetTop-b.offsetHeight,De=Math.max(Y,re+(be?H:0)+Ie+B),F=X+De;c.style.height=F+"px"}else{const be=W.length>0&&S===W[0].ref.current;c.style.top="0px";const De=Math.max(ee,P+b.offsetTop+(be?K:0)+re)+oe;c.style.height=De+"px",b.scrollTop=X-ee+b.offsetTop}c.style.margin=`${qr}px 0`,c.style.minHeight=O+"px",c.style.maxHeight=T+"px",s?.(),requestAnimationFrame(()=>g.current=!0)}},[m,i.trigger,i.valueNode,c,p,b,S,v,i.dir,s]);Mn(()=>C(),[C]);const[_,R]=k.useState();Mn(()=>{p&&R(window.getComputedStyle(p).zIndex)},[p]);const D=k.useCallback(V=>{V&&y.current===!0&&(C(),N?.(),y.current=!1)},[C,N]);return r.jsx(EF,{scope:n,contentWrapper:c,shouldExpandOnScrollRef:g,onScrollButtonChange:D,children:r.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:r.jsx(It.div,{...a,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});k3.displayName=_F;var AF="SelectPopperPosition",zp=k.forwardRef((e,t)=>{const{__scopeSelect:n,align:s="start",collisionPadding:a=qr,...i}=e,l=mu(n);return r.jsx(oF,{...l,...i,ref:t,align:s,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});zp.displayName=AF;var[EF,c0]=xo(Ja,{}),Lp="SelectViewport",S3=k.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:s,...a}=e,i=ya(Lp,n),l=c0(Lp,n),c=zt(t,i.onViewportChange),u=k.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),r.jsx(hu.Slot,{scope:n,children:r.jsx(It.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Tt(a.onScroll,p=>{const h=p.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=l;if(m?.current&&f){const g=Math.abs(u.current-h.scrollTop);if(g>0){const y=window.innerHeight-qr*2,b=parseFloat(f.style.minHeight),S=parseFloat(f.style.height),v=Math.max(b,S);if(v<y){const N=v+g,C=Math.min(y,N),_=N-C;f.style.height=C+"px",f.style.bottom==="0px"&&(h.scrollTop=_>0?_:0,f.style.justifyContent="flex-end")}}}u.current=h.scrollTop})})})]})});S3.displayName=Lp;var j3="SelectGroup",[TF,DF]=xo(j3),IF=k.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,a=qi();return r.jsx(TF,{scope:n,id:a,children:r.jsx(It.div,{role:"group","aria-labelledby":a,...s,ref:t})})});IF.displayName=j3;var C3="SelectLabel",PF=k.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,a=DF(C3,n);return r.jsx(It.div,{id:a.id,...s,ref:t})});PF.displayName=C3;var Kd="SelectItem",[MF,N3]=xo(Kd),_3=k.forwardRef((e,t)=>{const{__scopeSelect:n,value:s,disabled:a=!1,textValue:i,...l}=e,c=ba(Kd,n),u=ya(Kd,n),p=c.value===s,[h,f]=k.useState(i??""),[m,g]=k.useState(!1),y=zt(t,N=>u.itemRefCallback?.(N,s,a)),b=qi(),S=k.useRef("touch"),v=()=>{a||(c.onValueChange(s),c.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(MF,{scope:n,value:s,disabled:a,textId:b,isSelected:p,onItemTextChange:k.useCallback(N=>{f(C=>C||(N?.textContent??"").trim())},[]),children:r.jsx(hu.ItemSlot,{scope:n,value:s,disabled:a,textValue:h,children:r.jsx(It.div,{role:"option","aria-labelledby":b,"data-highlighted":m?"":void 0,"aria-selected":p&&m,"data-state":p?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...l,ref:y,onFocus:Tt(l.onFocus,()=>g(!0)),onBlur:Tt(l.onBlur,()=>g(!1)),onClick:Tt(l.onClick,()=>{S.current!=="mouse"&&v()}),onPointerUp:Tt(l.onPointerUp,()=>{S.current==="mouse"&&v()}),onPointerDown:Tt(l.onPointerDown,N=>{S.current=N.pointerType}),onPointerMove:Tt(l.onPointerMove,N=>{S.current=N.pointerType,a?u.onItemLeave?.():S.current==="mouse"&&N.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Tt(l.onPointerLeave,N=>{N.currentTarget===document.activeElement&&u.onItemLeave?.()}),onKeyDown:Tt(l.onKeyDown,N=>{u.searchRef?.current!==""&&N.key===" "||(bF.includes(N.key)&&v(),N.key===" "&&N.preventDefault())})})})})});_3.displayName=Kd;var ol="SelectItemText",A3=k.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:a,...i}=e,l=ba(ol,n),c=ya(ol,n),u=N3(ol,n),p=kF(ol,n),[h,f]=k.useState(null),m=zt(t,v=>f(v),u.onItemTextChange,v=>c.itemTextRefCallback?.(v,u.value,u.disabled)),g=h?.textContent,y=k.useMemo(()=>r.jsx("option",{value:u.value,disabled:u.disabled,children:g},u.value),[u.disabled,u.value,g]),{onNativeOptionAdd:b,onNativeOptionRemove:S}=p;return Mn(()=>(b(y),()=>S(y)),[b,S,y]),r.jsxs(r.Fragment,{children:[r.jsx(It.span,{id:u.textId,...i,ref:m}),u.isSelected&&l.valueNode&&!l.valueNodeHasChildren?us.createPortal(i.children,l.valueNode):null]})});A3.displayName=ol;var E3="SelectItemIndicator",T3=k.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return N3(E3,n).isSelected?r.jsx(It.span,{"aria-hidden":!0,...s,ref:t}):null});T3.displayName=E3;var Op="SelectScrollUpButton",D3=k.forwardRef((e,t)=>{const n=ya(Op,e.__scopeSelect),s=c0(Op,e.__scopeSelect),[a,i]=k.useState(!1),l=zt(t,s.onScrollButtonChange);return Mn(()=>{if(n.viewport&&n.isPositioned){let c=function(){const p=u.scrollTop>0;i(p)};const u=n.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),a?r.jsx(P3,{...e,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=n;c&&u&&(c.scrollTop=c.scrollTop-u.offsetHeight)}}):null});D3.displayName=Op;var $p="SelectScrollDownButton",I3=k.forwardRef((e,t)=>{const n=ya($p,e.__scopeSelect),s=c0($p,e.__scopeSelect),[a,i]=k.useState(!1),l=zt(t,s.onScrollButtonChange);return Mn(()=>{if(n.viewport&&n.isPositioned){let c=function(){const p=u.scrollHeight-u.clientHeight,h=Math.ceil(u.scrollTop)<p;i(h)};const u=n.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),a?r.jsx(P3,{...e,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=n;c&&u&&(c.scrollTop=c.scrollTop+u.offsetHeight)}}):null});I3.displayName=$p;var P3=k.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:s,...a}=e,i=ya("SelectScrollButton",n),l=k.useRef(null),c=pu(n),u=k.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return k.useEffect(()=>()=>u(),[u]),Mn(()=>{c().find(h=>h.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[c]),r.jsx(It.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Tt(a.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(s,50))}),onPointerMove:Tt(a.onPointerMove,()=>{i.onItemLeave?.(),l.current===null&&(l.current=window.setInterval(s,50))}),onPointerLeave:Tt(a.onPointerLeave,()=>{u()})})}),FF="SelectSeparator",RF=k.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return r.jsx(It.div,{"aria-hidden":!0,...s,ref:t})});RF.displayName=FF;var Vp="SelectArrow",BF=k.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,a=mu(n),i=ba(Vp,n),l=ya(Vp,n);return i.open&&l.position==="popper"?r.jsx(lF,{...a,...s,ref:t}):null});BF.displayName=Vp;var zF="SelectBubbleInput",M3=k.forwardRef(({__scopeSelect:e,value:t,...n},s)=>{const a=k.useRef(null),i=zt(s,a),l=i5(t);return k.useEffect(()=>{const c=a.current;if(!c)return;const u=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(u,"value").set;if(l!==t&&h){const f=new Event("change",{bubbles:!0});h.call(c,t),c.dispatchEvent(f)}},[l,t]),r.jsx(It.select,{...n,style:{...u3,...n.style},ref:i,defaultValue:t})});M3.displayName=zF;function F3(e){return e===""||e===void 0}function R3(e){const t=cr(e),n=k.useRef(""),s=k.useRef(0),a=k.useCallback(l=>{const c=n.current+l;t(c),(function u(p){n.current=p,window.clearTimeout(s.current),p!==""&&(s.current=window.setTimeout(()=>u(""),1e3))})(c)},[t]),i=k.useCallback(()=>{n.current="",window.clearTimeout(s.current)},[]);return k.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,a,i]}function B3(e,t,n){const a=t.length>1&&Array.from(t).every(p=>p===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let l=LF(e,Math.max(i,0));a.length===1&&(l=l.filter(p=>p!==n));const u=l.find(p=>p.textValue.toLowerCase().startsWith(a.toLowerCase()));return u!==n?u:void 0}function LF(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var OF=f3,$F=p3,VF=x3,HF=g3,UF=b3,WF=y3,KF=S3,qF=_3,GF=A3,YF=T3,ZF=D3,QF=I3;function Fh({...e}){return r.jsx(OF,{"data-slot":"select",...e})}function Rh({...e}){return r.jsx(VF,{"data-slot":"select-value",...e})}function Bh({className:e,size:t="default",children:n,...s}){return r.jsxs($F,{"data-slot":"select-trigger","data-size":t,className:Pe("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...s,children:[n,r.jsx(HF,{asChild:!0,children:r.jsx(Ka,{className:"size-4 opacity-50"})})]})}function zh({className:e,children:t,position:n="popper",...s}){return r.jsx(UF,{children:r.jsxs(WF,{"data-slot":"select-content",className:Pe("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...s,children:[r.jsx(XF,{}),r.jsx(KF,{className:Pe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),r.jsx(JF,{})]})})}function Ps({className:e,children:t,...n}){return r.jsxs(qF,{"data-slot":"select-item",className:Pe("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[r.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:r.jsx(YF,{children:r.jsx(Et,{className:"size-4"})})}),r.jsx(GF,{children:t})]})}function XF({className:e,...t}){return r.jsx(ZF,{"data-slot":"select-scroll-up-button",className:Pe("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(K8,{className:"size-4"})})}function JF({className:e,...t}){return r.jsx(QF,{"data-slot":"select-scroll-down-button",className:Pe("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(Ka,{className:"size-4"})})}function eR({onSelect:e}){const[t,n]=k.useState([]),[s,a]=k.useState("");k.useEffect(()=>{i();const u=()=>i();return window.addEventListener("character-memories-updated",u),()=>window.removeEventListener("character-memories-updated",u)},[]);const i=async()=>{try{const u=await se.get(J.CHARACTERS,"characters");if(u){const p=await Promise.all(u.map(async h=>{const f=h.memories?.filter(m=>m.type==="summary").length||0;if(h.avatar){if(h.avatar.startsWith("data:"))return{...h,avatarUrl:h.avatar,summaryCount:f};try{const m=await Ct(h.avatar);return{...h,avatarUrl:m,summaryCount:f}}catch{return{...h,avatarUrl:null,summaryCount:f}}}return{...h,avatarUrl:null,summaryCount:f}}));n(p)}}catch(u){console.error("Failed to load characters:",u)}},l=t.filter(u=>u.name.toLowerCase().includes(s.toLowerCase())),c=u=>{let p=0;for(let f=0;f<u.length;f++)p=u.charCodeAt(f)+((p<<5)-p);const h=(p&16777215).toString(16).toUpperCase();return"#"+"00000".substring(0,6-h.length)+h};return r.jsxs("div",{className:"flex flex-col gap-6",children:[r.jsxs("div",{className:"relative group",children:[r.jsx(ga,{className:"absolute left-0 top-1/2 -translate-y-1/2 text-[#bdc3c7] transition-colors group-focus-within:text-[#2c3e50]",size:16}),r.jsx("input",{type:"text",placeholder:"...",value:s,onChange:u=>a(u.target.value),className:"w-full pl-8 py-2 bg-transparent border-b border-[#bdc3c7]/50 text-sm outline-none focus:border-[#2c3e50] transition-colors placeholder-[#bdc3c7] text-[#2c3e50]"})]}),r.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[l.length===0?r.jsx("div",{className:"text-center py-8 text-[#bdc3c7] text-sm",children:""}):l.map((u,p)=>r.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:p*.05,ease:"easeOut"},onClick:()=>e?.(u),className:"group relative overflow-hidden bg-white/40 backdrop-blur-sm rounded-xl p-3.5 border border-white/40 shadow-sm hover:shadow-md transition-all active:scale-[0.98] cursor-pointer flex items-center gap-4",children:[r.jsx("div",{className:"w-11 h-11 rounded-full flex items-center justify-center text-white font-serif text-lg shadow-inner relative overflow-hidden bg-[#2c3e50]",style:{backgroundColor:u.avatarUrl?void 0:c(u.name)},children:u.avatarUrl?r.jsx("img",{src:u.avatarUrl,alt:u.name,className:"w-full h-full object-cover"}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"absolute inset-0 bg-black/10"}),r.jsx("span",{className:"relative z-10",children:u.name[0]})]})}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsx("h3",{className:"text-[#2c3e50] font-serif font-medium text-lg leading-none truncate",children:u.name})}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("span",{className:"text-xs font-serif text-[#95a5a6]",children:[u.summaryCount||0," "]}),r.jsx(Qn,{size:14,className:"text-[#bdc3c7] group-hover:translate-x-1 transition-transform"})]})]},u.id)),l.length>0&&r.jsxs("div",{className:"py-12 flex flex-col items-center justify-center opacity-30",children:[r.jsx("div",{className:"w-1 h-12 bg-gradient-to-b from-[#2c3e50] to-transparent"}),r.jsx("p",{className:"mt-4 text-xs tracking-[0.3em] font-serif text-[#2c3e50]",children:"END OF LIST"})]})]})]})}function tR(){const e=[];return r.jsxs("div",{className:"flex flex-col gap-6",children:[r.jsxs("div",{className:"relative group",children:[r.jsx(ga,{className:"absolute left-0 top-1/2 -translate-y-1/2 text-[#bdc3c7] transition-colors group-focus-within:text-[#2c3e50]",size:16}),r.jsx("input",{type:"text",placeholder:"...",className:"w-full pl-8 py-2 bg-transparent border-b border-[#bdc3c7]/50 text-sm outline-none focus:border-[#2c3e50] transition-colors placeholder-[#bdc3c7] text-[#2c3e50]"})]}),r.jsxs("div",{className:"flex flex-col gap-4",children:[e.map((t,n)=>r.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.08,ease:"easeOut"},className:"group relative w-full overflow-hidden bg-white/40 backdrop-blur-sm rounded-xl p-3.5 border border-white/40 shadow-sm hover:shadow-md transition-all active:scale-[0.98] cursor-pointer flex items-center gap-4",children:[r.jsx("div",{className:"w-11 h-11 rounded-full flex items-center justify-center bg-[#2c3e50]/5 text-[#2c3e50] border border-[#2c3e50]/10",children:r.jsx(Tl,{size:20,className:"opacity-70"})}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsx("h3",{className:"text-[#2c3e50] font-serif font-medium text-lg leading-none truncate",children:t.title})}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("span",{className:"text-xs font-serif text-[#95a5a6]",children:[t.count," "]}),r.jsx(Qn,{size:14,className:"text-[#bdc3c7] group-hover:translate-x-1 transition-transform"})]})]},t.id)),r.jsxs("div",{className:"py-12 flex flex-col items-center justify-center opacity-30",children:[r.jsx("div",{className:"w-1 h-12 bg-gradient-to-b from-[#2c3e50] to-transparent"}),r.jsx("p",{className:"mt-4 text-xs tracking-[0.3em] font-serif text-[#2c3e50]",children:"END"})]})]})]})}function nR(){const e=[],t={hidden:{opacity:1},show:{opacity:1,transition:{staggerChildren:.05,delayChildren:.1}}},n={hidden:{x:-20,opacity:0},show:{x:0,opacity:1,transition:{x:{type:"tween",ease:"circOut",duration:.35},opacity:{duration:0}}}};return r.jsxs("div",{className:"flex flex-col gap-6",children:[r.jsxs("div",{className:"relative group",children:[r.jsx(ga,{className:"absolute left-0 top-1/2 -translate-y-1/2 text-[#bdc3c7] transition-colors group-focus-within:text-[#2c3e50]",size:16}),r.jsx("input",{type:"text",placeholder:"...",className:"w-full pl-8 py-2 bg-transparent border-b border-[#bdc3c7]/50 text-sm outline-none focus:border-[#2c3e50] transition-colors placeholder-[#bdc3c7] text-[#2c3e50]"})]}),r.jsxs("div",{className:"relative pl-4",children:[r.jsx("div",{className:"absolute left-[23px] top-4 bottom-0 w-[1px] bg-gradient-to-b from-[#bdc3c7] to-transparent z-0"}),r.jsxs(me.div,{className:"flex flex-col gap-6",variants:t,initial:"hidden",animate:"show",children:[e.map(s=>{const a=s.icon;return r.jsxs(me.div,{variants:n,className:"relative z-10 pl-8 group cursor-pointer",children:[r.jsx("div",{className:"absolute left-0 top-[22px] w-[14px] h-[14px] rounded-full bg-[#f5f5f5] border-[2px] border-[#bdc3c7] group-active:border-[#d4af37] group-active:scale-110 transition-all z-20"}),r.jsxs("div",{className:"group relative overflow-hidden bg-white/40 backdrop-blur-sm rounded-xl p-4 border border-white/40 shadow-sm active:shadow-md transition-all active:bg-white/60 flex items-center gap-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-[#2c3e50] bg-white/50 shadow-sm",children:r.jsx(a,{size:18,strokeWidth:1.5})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-[#2c3e50] font-serif font-medium text-base leading-none",children:s.title}),r.jsx("p",{className:"text-[10px] text-[#7f8c8d] tracking-wider mt-1.5 font-mono",children:s.date})]}),r.jsx("div",{className:"flex items-center gap-3",children:r.jsx(Qn,{size:14,className:"text-[#bdc3c7] transition-colors group-active:text-[#2c3e50]"})})]})]},s.id)}),r.jsx(me.div,{variants:n,className:"pl-8",children:r.jsxs("div",{className:"py-12 flex flex-col items-center justify-center opacity-30",children:[r.jsx("div",{className:"w-1 h-12 bg-gradient-to-b from-[#2c3e50] to-transparent"}),r.jsx("p",{className:"mt-4 text-xs tracking-[0.3em] font-serif text-[#2c3e50]",children:"END"})]})})]})]})]})}function rR({character:e,onBack:t,summaryLimit:n=3,dateLimit:s=3}){const[a,i]=k.useState("permanent"),[l,c]=k.useState(e.memories||[]),[u,p]=k.useState(null),[h,f]=k.useState(""),[m,g]=k.useState(""),[y,b]=k.useState([]),[S,v]=k.useState("");k.useEffect(()=>{if(e.memories){const P=xs.processMemories(e.memories,n,s);c(P)}},[e.memories,n,s]);const N=async P=>{try{const L=xs.processMemories(P,n,s);c(L);const B=await se.get(J.CHARACTERS,"characters")||[],q=B.findIndex(G=>G.id===e.id);q!==-1&&(B[q].memories=L,await se.set(J.CHARACTERS,"characters",B))}catch(L){console.error("Failed to save memories:",L)}},C=P=>{p(P.id),f(P.content),b(P.tags||[]),v(""),P.type==="event"?g(P.expires_at||""):g(P.created_at||P.date||"")},_=()=>{p(null),f(""),g(""),b([]),v("")},R=P=>{const L=l.map(B=>{if(B.id===P){const q={content:h,tags:y};return B.type==="event"?q.expires_at=m||void 0:(q.created_at=m||void 0,q.date=m||void 0),{...B,...q}}return B});N(L),p(null)},D=()=>{S.trim()&&!y.includes(S.trim())&&(b([...y,S.trim()]),v(""))},V=P=>{b(y.filter(L=>L!==P))},I=P=>{P.key==="Enter"&&(P.preventDefault(),D())},A=[{id:"permanent",label:"",sub:"Permanent",icon:x8,color:"text-blue-600",bg:"bg-blue-50"},{id:"event",label:"",sub:"Event",icon:Xw,color:"text-yellow-600",bg:"bg-yellow-50"},{id:"summary",label:"",sub:"Summary",icon:J7,color:"text-green-600",bg:"bg-green-50"},{id:"date",label:"",sub:"Date",icon:Rd,color:"text-pink-600",bg:"bg-pink-50"}],U=P=>{const L=l.filter(B=>B.id!==P);N(L)},W=P=>{const L=xs.createMemory(P,"...");L.date=L.created_at,N([...l,L])},T=A.find(P=>P.id===a),j=(()=>{const P=l.filter(L=>L.type===a);return a==="event"?[...P].sort((L,B)=>{const q=L.active!==!1,G=B.active!==!1;if(q!==G)return q?-1:1;const O=L.created_at||L.date||"";return(B.created_at||B.date||"").localeCompare(O)}):[...P].reverse()})();return r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-4 pt-2 shrink-0",children:[r.jsx("button",{onClick:t,className:"p-2 -ml-2 rounded-full hover:bg-black/5 transition-colors text-[#555] active:scale-90",children:r.jsx(dn,{size:24})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h2",{className:"text-xl font-serif font-bold text-[#2c3e50]",children:e.name}),r.jsx("p",{className:"text-[10px] tracking-widest text-[#7f8c8d] uppercase",children:"Memory Summary"})]})]}),r.jsx("div",{className:"grid grid-cols-4 gap-1 px-2 mb-6 shrink-0",children:A.map(P=>{const L=a===P.id,B=P.icon;return r.jsxs("button",{onClick:()=>i(P.id),className:`flex flex-col items-center gap-1.5 p-1.5 rounded-xl transition-all ${L?"bg-white shadow-sm scale-105 z-10":"hover:bg-white/40 opacity-70"}`,children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center transition-colors ${L?`${P.bg} ${P.color}`:"bg-gray-100 text-gray-400"}`,children:r.jsx(B,{size:16,strokeWidth:L?2.5:2})}),r.jsx("span",{className:`text-[10px] font-bold whitespace-nowrap scale-90 ${L?"text-[#2c3e50]":"text-[#95a5a6]"}`,children:P.label})]},P.id)})}),r.jsx("div",{className:"flex-1 overflow-y-auto pb-20 pr-1 pl-1",children:r.jsx(Be,{mode:"popLayout",initial:!1,children:r.jsxs(me.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"space-y-3",children:[r.jsxs("button",{onClick:()=>W(a),className:"w-full py-3 mb-2 flex items-center justify-center gap-2 text-sm text-[#95a5a6] hover:text-[#2c3e50] hover:bg-white/40 rounded-xl transition-all border border-dashed border-[#bdc3c7]/60 hover:border-[#bdc3c7]",children:[r.jsx(Zn,{size:16}),r.jsxs("span",{children:["",T.label]})]}),j.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[r.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-3 ${T.bg}`,children:r.jsx(T.icon,{size:32,className:`opacity-50 ${T.color}`})}),r.jsxs("p",{className:"text-sm text-[#95a5a6] font-medium",children:["",T.label]}),r.jsx("p",{className:"text-[10px] text-[#bdc3c7] mt-1",children:""})]}):j.map(P=>{const L=P.active!==!1,B=u===P.id,q=P.created_at||P.date;return r.jsx(me.div,{initial:{opacity:0,y:10},animate:{opacity:!L&&!B?.75:1,y:0},className:`group relative rounded-xl p-4 text-sm border transition-all shadow-sm ${!L&&!B?"bg-gray-50 border-gray-200 text-gray-500":"bg-white/60 border-white/40 text-[#34495e] hover:bg-white/80"}`,children:B?r.jsxs("div",{className:"space-y-3",children:[r.jsx("textarea",{value:h,onChange:G=>f(G.target.value),className:"w-full bg-white border border-gray-200 rounded-lg p-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-100 min-h-[80px]",autoFocus:!0,placeholder:"..."}),(a==="event"||a==="date")&&r.jsxs("div",{className:"flex items-center gap-2",children:[a==="event"?r.jsx(Tb,{size:14,className:"text-orange-400"}):r.jsx(wl,{size:14,className:"text-gray-400"}),r.jsx("input",{type:"date",value:m,onChange:G=>g(G.target.value),className:`bg-white border border-gray-200 rounded-md px-2 py-1.5 text-xs w-full focus:outline-none ${a==="event"?"focus:border-orange-300":"focus:border-blue-300"}`,placeholder:a==="event"?"":""})]}),(a==="event"||a==="summary")&&r.jsxs("div",{className:"space-y-2 pt-1",children:[r.jsx("div",{className:"flex flex-wrap gap-1.5 min-h-[24px]",children:y.map((G,O)=>r.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded bg-gray-100 text-gray-600 text-xs border border-gray-200",children:[r.jsx(gd,{size:10,className:"mr-1 opacity-50"}),G,r.jsx("button",{onClick:()=>V(G),className:"ml-1.5 hover:text-red-500 transition-colors",children:r.jsx(xt,{size:10})})]},O))}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(gd,{size:12,className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400"}),r.jsx("input",{value:S,onChange:G=>v(G.target.value),onKeyDown:I,placeholder:" ()",className:"w-full bg-gray-50 border border-gray-200 rounded-lg pl-7 pr-3 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-blue-200 focus:bg-white transition-all"})]}),r.jsx("button",{onClick:D,disabled:!S.trim(),className:"px-3 py-1.5 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-600 text-xs font-medium transition-colors disabled:opacity-50",children:r.jsx(Zn,{size:12})})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-1",children:[r.jsx("button",{onClick:_,className:"px-3 py-1.5 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-500 text-xs font-medium transition-colors",children:""}),r.jsxs("button",{onClick:()=>R(P.id),className:"px-3 py-1.5 rounded-lg bg-[#2c3e50] hover:bg-[#34495e] text-white text-xs font-medium transition-colors flex items-center gap-1",children:[r.jsx(Et,{size:12}),""]})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex justify-between items-start gap-2",children:r.jsx("p",{className:`pr-16 leading-relaxed ${L?"":"line-through decoration-gray-300"}`,children:P.content})}),(a==="event"||a==="summary")&&P.tags&&P.tags.length>0&&r.jsx("div",{className:"flex flex-wrap gap-1.5 mt-2",children:P.tags.map((G,O)=>r.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-[10px] bg-gray-50 text-gray-500 border border-gray-100",children:[r.jsx(gd,{size:9,className:"mr-0.5 opacity-40"}),G]},O))}),r.jsxs("div",{className:"flex justify-between items-center mt-3 pt-2 border-t border-black/5",children:[r.jsx("div",{className:"flex items-center gap-2",children:q&&r.jsxs("div",{className:"flex flex-wrap items-center gap-12",children:[r.jsxs("p",{className:`text-[10px] font-mono flex items-center gap-1.5 ${L?"text-[#7f8c8d]":"text-gray-400"}`,children:[r.jsx(wl,{size:12,className:L?"text-[#bdc3c7]":"text-gray-300"}),q]}),P.type==="event"&&P.expires_at&&r.jsxs("p",{className:`text-[10px] font-mono flex items-center gap-1.5 ${L?"text-orange-400":"text-gray-400"}`,children:[r.jsx(Tb,{size:12,className:L?"text-orange-300":"text-gray-300"}),P.expires_at]})]})}),r.jsxs("div",{className:"flex items-center gap-2",children:[P.type==="summary"&&r.jsxs("div",{className:`flex items-center gap-1 text-[10px] px-1.5 py-0.5 rounded-full border ${L?"bg-green-50 text-green-600 border-green-200":"bg-gray-100 text-gray-400 border-gray-200"}`,children:[L?r.jsx(Uw,{size:10}):r.jsx(Ya,{size:10}),r.jsx("span",{children:L?"":""})]}),P.type==="date"&&r.jsxs("div",{className:`flex items-center gap-1 text-[10px] px-1.5 py-0.5 rounded-full border ${L?"bg-pink-50 text-pink-600 border-pink-200":"bg-gray-100 text-gray-400 border-gray-200"}`,children:[L?r.jsx(Rd,{size:10}):r.jsx(Ya,{size:10}),r.jsx("span",{children:L?"":""})]}),!L&&P.type==="event"&&r.jsx("span",{className:"flex items-center gap-1 text-[10px] px-2 py-0.5 rounded-full bg-gray-100 text-gray-400 border border-gray-200",children:r.jsx("span",{children:""})})]})]}),r.jsxs("div",{className:"absolute top-3 right-3 flex gap-1",children:[r.jsx("button",{onClick:()=>C(P),className:"p-1.5 text-[#bdc3c7] hover:text-[#2c3e50] hover:bg-black/5 rounded-lg transition-colors",children:r.jsx(p9,{size:14})}),r.jsx("button",{onClick:()=>U(P.id),className:"p-1.5 text-[#bdc3c7] hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:r.jsx(xn,{size:14})})]})]})},P.id)}),r.jsx("div",{className:"h-10"})]},a)})})]})}function sR({onClose:e}){const[t,n]=k.useState("solitary"),[s,a]=k.useState(null),[i,l]=k.useState(!1),[c,u]=k.useState(200),[p,h]=k.useState(3),[f,m]=k.useState(3),[g,y]=k.useState(!0),[b,S]=k.useState("forever"),[v,N]=k.useState("forever"),[C,_]=k.useState("forever");k.useEffect(()=>{(async()=>{const V=await se.get(J.MISC,"memory_extraction_settings");V&&(u(V.threshold??200),y(V.auto_summary??!0),S(V.summary_retention??"forever"),N(V.event_retention??"forever"),_(V.date_retention??"forever"),Ip(V.summary_retention??"forever",V.event_retention??"forever",V.date_retention??"forever"));const I=await se.get(J.CHATS,"chat_settings");I&&(h(I.summary_limit??3),m(I.date_limit??3))})()},[]),k.useEffect(()=>{const D=async V=>{if(s&&(!V.detail.characterId||V.detail.characterId===s.id))try{const A=(await se.get(J.CHARACTERS,"characters")||[]).find(U=>U.id===s.id);A&&a(A)}catch(I){console.error("Failed to refresh selected character",I)}};return window.addEventListener("character-memories-updated",D),()=>window.removeEventListener("character-memories-updated",D)},[s]),k.useEffect(()=>{const D=async V=>{const{type:I,payload:A}=V.data;if(I==="AI_TASK_COMPLETED"&&A?.taskType==="memory_summary"){console.log("[MemoryContainer]  memory_summary :",A);try{const U=A.result||"",W=A.characterId,T=xs.createMemory("date",U,{active:!0}),M=await se.get(J.CHARACTERS,"characters")||[],j=M.findIndex(P=>P.id===W);if(j!==-1){M[j].memories=M[j].memories||[],M[j].memories.push(T);const P=await se.get(J.CHATS,"chat_settings")||{},L=P.summary_limit??3,B=P.date_limit??3;M[j].memories=xs.processMemories(M[j].memories,L,B),await se.set(J.CHARACTERS,"characters",M),console.log("[MemoryContainer] :",W),window.dispatchEvent(new CustomEvent("character-memories-updated",{detail:{characterId:W,memoryType:"date"}}))}}catch(U){console.error("[MemoryContainer] :",U)}}};return"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",D),()=>{"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener("message",D)}},[]);const R=async()=>{await se.set(J.MISC,"memory_extraction_settings",{threshold:c,auto_summary:g,summary_retention:b,event_retention:v,date_retention:C});const D=await se.get(J.CHATS,"chat_settings")||{};await se.set(J.CHATS,"chat_settings",{...D,summary_limit:p,date_limit:f}),await xs.refreshAllCharactersMemories(),await Ip(b,v,C),l(!1)};return r.jsxs("div",{className:"fixed inset-0 z-50 font-sans overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"absolute inset-0 bg-[#f0f2f5]",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#e0eafc] to-[#cfdef3] opacity-60"}),r.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[50%] h-[50%] bg-purple-200/20 rounded-full blur-[100px]"}),r.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[60%] h-[60%] bg-blue-200/20 rounded-full blur-[100px]"})]}),r.jsx(Be,{mode:"wait",children:s?r.jsx(me.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},transition:{duration:.3,ease:"easeOut"},className:"relative z-30 h-full flex flex-col pt-12 px-6",children:r.jsx(rR,{character:s,onBack:()=>a(null),summaryLimit:p,dateLimit:f})},"detail"):r.jsxs(me.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3,ease:"easeOut"},className:"relative z-20 flex flex-col h-full",children:[r.jsxs("div",{className:"flex flex-col pt-12 pb-4 px-6",children:[r.jsxs("div",{className:"flex justify-between items-start mb-6",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx(me.h1,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-3xl text-[#2c3e50] font-serif tracking-widest font-bold",children:""}),r.jsx(me.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-xs text-[#7f8c8d] mt-1 tracking-[0.2em] uppercase font-light",children:"Recollection"})]}),r.jsx("button",{onClick:e,className:"p-2 -mr-2 rounded-full hover:bg-black/5 transition-colors text-[#555] active:scale-90 duration-200 ml-2",children:r.jsx(xt,{size:24,strokeWidth:1.5})})]}),r.jsxs("div",{className:"flex items-end justify-between",children:[r.jsxs("div",{className:"flex gap-8",children:[r.jsx(Lh,{isActive:t==="solitary",onClick:()=>n("solitary"),label:"",subLabel:"Solitary"}),r.jsx(Lh,{isActive:t==="shared",onClick:()=>n("shared"),label:"",subLabel:"Shared"}),r.jsx(Lh,{isActive:t==="trifling",onClick:()=>n("trifling"),label:"",subLabel:"Trifling"})]}),r.jsx("button",{onClick:()=>l(!0),className:"p-2 mb-1 text-[#95a5a6] hover:text-[#2c3e50] hover:bg-black/5 rounded-lg transition-colors",title:"",children:r.jsx(A9,{size:20,strokeWidth:1.5})})]})]}),r.jsxs("div",{className:"relative flex-1 z-10 overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 h-8 bg-gradient-to-b from-[#f0f2f5]/0 to-transparent z-20 pointer-events-none"}),r.jsxs(Be,{mode:"wait",children:[t==="solitary"&&r.jsx(me.div,{initial:{opacity:0,filter:"blur(10px)"},animate:{opacity:1,filter:"blur(0px)"},exit:{opacity:0,filter:"blur(10px)"},transition:{duration:.4,ease:"easeOut"},className:"h-full overflow-y-auto px-6 pb-20 pt-2",children:r.jsx(eR,{onSelect:a})},"solitary"),t==="shared"&&r.jsx(me.div,{initial:{opacity:0,filter:"blur(10px)"},animate:{opacity:1,filter:"blur(0px)"},exit:{opacity:0,filter:"blur(10px)"},transition:{duration:.4,ease:"easeOut"},className:"h-full overflow-y-auto px-6 pb-20 pt-2",children:r.jsx(tR,{})},"shared"),t==="trifling"&&r.jsx(me.div,{initial:{opacity:0,filter:"blur(10px)"},animate:{opacity:1,filter:"blur(0px)"},exit:{opacity:0,filter:"blur(10px)"},transition:{duration:.4,ease:"easeOut"},className:"h-full overflow-y-auto px-6 pb-20 pt-2",children:r.jsx(nR,{})},"trifling")]})]})]},"list")}),r.jsx(Be,{children:i&&r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] bg-black/20 backdrop-blur-sm flex items-center justify-center p-6",onClick:()=>l(!1),children:r.jsxs(me.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white/90 backdrop-blur-xl rounded-2xl p-6 w-full max-w-sm shadow-xl border border-white/50",onClick:D=>D.stopPropagation(),children:[r.jsx("h3",{className:"text-lg font-bold text-[#2c3e50] mb-4",children:""}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx("label",{className:"text-sm font-medium text-[#555]",children:""}),r.jsx("p",{className:"text-[10px] text-[#95a5a6]",children:""})]}),r.jsx(h5,{checked:g,onCheckedChange:y})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("label",{className:"text-sm font-medium text-[#555]",children:""}),r.jsxs("span",{className:"text-sm font-mono text-[#2c3e50]",children:[c," "]})]}),r.jsx("input",{type:"range",min:"10",max:"2000",step:"10",value:c,onChange:D=>u(Number(D.target.value)),className:"w-full accent-[#2c3e50] h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),r.jsx("p",{className:"text-[10px] text-[#95a5a6]",children:""})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("label",{className:"text-sm font-medium text-[#555]",children:""}),r.jsxs("span",{className:"text-sm font-mono text-[#2c3e50]",children:[p," "]})]}),r.jsx("input",{type:"range",min:"0",max:"100",step:"1",value:p,onChange:D=>h(Number(D.target.value)),className:"w-full accent-[#2c3e50] h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),r.jsx("p",{className:"text-[10px] text-[#95a5a6]",children:" Prompt "})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("label",{className:"text-sm font-medium text-[#555]",children:""}),r.jsxs("span",{className:"text-sm font-mono text-[#2c3e50]",children:[f," "]})]}),r.jsx("input",{type:"range",min:"0",max:"100",step:"1",value:f,onChange:D=>m(Number(D.target.value)),className:"w-full accent-[#2c3e50] h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),r.jsx("p",{className:"text-[10px] text-[#95a5a6]",children:" Prompt "})]}),r.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-100",children:[r.jsx("h4",{className:"text-xs font-bold text-[#95a5a6] uppercase tracking-wider",children:""}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium text-[#555]",children:" (inactive)"}),r.jsxs(Fh,{value:b,onValueChange:S,children:[r.jsx(Bh,{className:"w-[100px] h-8 text-xs bg-gray-50 border-gray-200",children:r.jsx(Rh,{placeholder:""})}),r.jsxs(zh,{children:[r.jsx(Ps,{value:"7d",children:"7"}),r.jsx(Ps,{value:"30d",children:"30"}),r.jsx(Ps,{value:"forever",children:""})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium text-[#555]",children:" (inactive)"}),r.jsxs(Fh,{value:v,onValueChange:N,children:[r.jsx(Bh,{className:"w-[100px] h-8 text-xs bg-gray-50 border-gray-200",children:r.jsx(Rh,{placeholder:""})}),r.jsxs(zh,{children:[r.jsx(Ps,{value:"7d",children:"7"}),r.jsx(Ps,{value:"30d",children:"30"}),r.jsx(Ps,{value:"forever",children:""})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium text-[#555]",children:" (inactive)"}),r.jsxs(Fh,{value:C,onValueChange:_,children:[r.jsx(Bh,{className:"w-[100px] h-8 text-xs bg-gray-50 border-gray-200",children:r.jsx(Rh,{placeholder:""})}),r.jsxs(zh,{children:[r.jsx(Ps,{value:"7d",children:"7"}),r.jsx(Ps,{value:"30d",children:"30"}),r.jsx(Ps,{value:"forever",children:""})]})]})]}),r.jsx("p",{className:"text-[10px] text-[#95a5a6]",children:"(active=false)"})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 mt-8",children:[r.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 rounded-lg text-sm text-[#7f8c8d] hover:bg-gray-100 transition-colors",children:""}),r.jsx("button",{onClick:R,className:"px-4 py-2 rounded-lg text-sm bg-[#2c3e50] text-white shadow-md hover:bg-[#34495e] transition-colors",children:""})]})]})})})]})}function Lh({isActive:e,onClick:t,label:n,subLabel:s}){return r.jsxs("button",{onClick:t,className:"group flex flex-col items-start",children:[r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:`text-base font-serif tracking-wide transition-colors duration-300 ${e?"text-[#2c3e50] font-medium":"text-[#95a5a6]"}`,children:n}),e&&r.jsx(me.div,{layoutId:"activeDot",className:"absolute -right-2 top-0 w-1.5 h-1.5 bg-[#d4af37] rounded-full"})]}),r.jsx("span",{className:`text-[10px] tracking-wider uppercase transition-colors duration-300 ${e?"text-[#d4af37]":"text-transparent group-hover:text-[#bdc3c7]"}`,children:s})]})}function aR({onClose:e,onNavigate:t}){return r.jsxs("div",{className:"relative flex flex-col h-full bg-[#e6dbcc] text-[#1a1a1a] font-serif overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-60 mix-blend-multiply",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 500 500' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.4'/%3E%3C/svg%3E")`}}),r.jsx("div",{className:"absolute -bottom-20 -right-20 opacity-10 pointer-events-none text-[#2b4b64]",children:r.jsx(kT,{className:"w-96 h-96"})}),r.jsxs("div",{className:"relative z-20 flex items-center justify-between px-4 pt-12 pb-4",children:[r.jsx("button",{onClick:e,className:"group flex items-center justify-center w-12 h-12 rounded-full bg-[#1a1a1a] text-[#e6dbcc] border-2 border-[#1a1a1a] hover:bg-[#c93a40] hover:border-[#c93a40] transition-all shadow-lg active:scale-95 z-50",children:r.jsx(dn,{className:"w-6 h-6"})}),r.jsx("div",{className:"absolute inset-x-0 top-12 flex justify-center pointer-events-none",children:r.jsx("div",{className:"bg-[#1a1a1a] text-[#e6dbcc] px-8 py-3 clip-path-plaque shadow-[4px_4px_0px_rgba(201,58,64,0.5)]",children:r.jsx("h1",{className:"text-2xl font-black tracking-[0.5em] font-serif",style:{textShadow:"1px 1px 0 #000"},children:""})})})]}),r.jsxs("div",{className:"flex-1 p-6 space-y-8 overflow-y-auto relative z-10 pb-12",children:[r.jsxs(me.div,{whileHover:{scale:1.02,rotate:-1},whileTap:{scale:.98},onClick:()=>t("omikuji"),className:"group relative h-56 w-full bg-[#f4ebd9] border-4 border-[#1a1a1a] overflow-hidden cursor-pointer shadow-[8px_8px_0px_rgba(27,27,27,0.3)] hover:shadow-[12px_12px_0px_#c93a40] transition-shadow duration-300",children:[r.jsx("div",{className:"absolute inset-2 border border-[#1a1a1a]/20 pointer-events-none z-20"}),r.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-40 pointer-events-none z-0 opacity-90",children:r.jsxs("svg",{viewBox:"0 0 1000 300",preserveAspectRatio:"none",className:"w-full h-full",children:[r.jsx("path",{d:"M-100,60 h800 a10,10 0 0 1 10,10 v20 a10,10 0 0 1 -10,10 h-800 z",fill:"#c5a059",opacity:"0.4"}),r.jsx("path",{d:"M200,140 h900 a10,10 0 0 1 10,10 v25 a10,10 0 0 1 -10,10 h-900 z",fill:"#c93a40",opacity:"0.3"}),r.jsx("path",{d:"M-50,240 h600 a10,10 0 0 1 10,10 v15 a10,10 0 0 1 -10,10 h-600 z",fill:"#1a1a1a",opacity:"0.1"})]})}),r.jsx("div",{className:"absolute -top-8 -right-8 opacity-90 text-[#c93a40] z-10 pointer-events-none",children:r.jsxs("svg",{width:"240",height:"240",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{d:"M328.218327 1016.420563c133.098392 8.087855 201.861881-63.866624 230.921965-155.809944 48.400024 83.059391 131.165067 137.613944 259.192662 99.502688 14.931424-4.448655 26.190199-17.480202 27.695383-32.980251 0.080276-0.849593 0.153863-1.705875 0.22745-2.562158 1.732634-20.744779 18.978696-36.525795 39.770303-36.385311 0.856282 0.00669 1.712565 0.00669 2.568847 0 15.560256-0.107035 29.535052-10.161664 35.294889-24.651567 49.39679-124.221152 2.535399-211.622162-75.767611-267.320655 99.676621-21.962305 181.023447-90.384619 175.618164-240.80935-17.232683-11.37919-44.011576-21.380301-64.448628-24.417427 11.171809-17.460133 21.286645-44.299234 24.096321-64.809873-109.202762-103.028163-214.050526-86.651763-296.086391-25.741989C697.590449 138.918437 657.994078 40.713551 513.396081 0c-16.209158 12.931202-34.097432 35.361786-43.389433 53.892272-7.987509-9.726833-19.406837-20.142705-31.321204-28.819254-12.897753-9.385658-30.391335-9.974352-43.904541-1.371389C282.045976 95.435347 268.372217 193.894441 298.770241 285.115273c-88.023153-38.452431-187.164597-33.736188-268.625148 72.208688-9.760281 12.703752-10.750358 30.197333-2.568847 43.897851 0.367934 0.608763 0.735868 1.224216 1.110491 1.83298 10.563046 17.239373 5.860183 39.997753-10.69684 51.738186-0.588694 0.414762-1.164009 0.836213-1.746013 1.257665-12.957961 9.412416-18.992076 25.882473-15.051839 41.362453 32.899975 129.198294 122.254379 172.112758 218.51256 170.975508-64.18104 72.054824-90.799381 167.878174-15.573636 277.763286 9.011034 13.165342 25.333917 19.440286 40.920932 15.834535 0.695729-0.167243 1.391459-0.327796 2.093878-0.501728 19.694495-4.796519 39.850579 6.622809 45.824487 25.94937 0.214071 0.68904 0.428141 1.37139 0.648901 2.04705 4.883485 15.205702 18.650901 25.969439 34.59916 26.939446z m190.141516-487.478882c1.438287 0.441521 2.876574 0.876351 4.274723 1.244285 1.010146 0.990077 2.2745 1.966774 3.364922 2.95016-1.016835 0.90311-1.792841 2.020291-2.709331 3.030437a38.054393 38.054393 0 0 0-6.14115-3.478647c0.388003-1.257665 0.956628-2.455122 1.210836-3.746235z",fill:"currentColor"}),r.jsx("path",{d:"M694.064974 504.678117c-1.853049-12.683683-13.633621-21.420439-26.317304-19.513873-10.563046 1.58546-18.410071 10.054628-19.674426 20.169464l-108.741172 16.349642 73.098418-82.417179c9.131449 4.462034 20.48388 2.50195 27.581659-5.505629 8.529375-9.613108 7.679783-24.290323-1.893187-32.779559-9.572969-8.489237-24.243495-7.579437-32.766181 2.03367-7.104468 8.007578-7.693162 19.527252-2.167464 28.056628L530.093588 513.48177l3.244507-109.918561c9.887386-2.461812 17.359787-11.265465 17.674204-21.942236 0.381313-12.824167-9.700074-23.480868-22.517551-23.801974-12.810787-0.321106-23.507627 9.807109-23.88894 22.631276-0.314416 10.670081 6.616119 19.841668 16.342952 22.805208l-3.244508 109.911871-68.107897-85.989482c6.020735-8.241718 6.101012-19.761392-0.515108-28.116835-7.940681-10.034559-22.53762-11.680227-32.598938-3.692718-10.061318 7.994199-11.773883 22.604517-3.826511 32.639076 6.616119 8.348753 17.841446 10.884152 27.220414 6.890398l68.107897 85.976102L400.386877 499.052074c-0.668971-10.154974-8.007578-18.998765-18.45021-21.119402-12.556578-2.548778-24.832189 5.585905-27.434484 18.149172-2.595606 12.569958 5.47218 24.825499 18.022068 27.374278 10.449321 2.120637 20.71133-3.164231 25.353986-12.242162L505.475469 533.035781l-96.739839 52.547641c-7.037571-7.325228-18.363243-9.365589-27.76228-4.261343-11.285534 6.13446-15.506739 20.236361-9.425796 31.501826 6.080943 11.265465 20.156084 15.426462 31.441618 9.298692 9.399037-5.104246 13.88783-15.734189 11.62002-25.655023l96.746529-52.554331-40.626585 102.339124c-10.114836-1.063663-20.122636 4.669415-24.069562 14.603628-4.736312 11.941125 1.077043 25.420883 12.984719 30.110367 11.907677 4.689484 25.407504-1.184078 30.143816-13.118514 3.946927-9.940903 0.568625-20.94547-7.545989-27.059861l40.626585-102.345813 34.512194 104.24569c-8.469168 5.69294-12.489681 16.516884-9.138139 26.638409 4.027203 12.161886 17.152406 18.704418 29.327672 14.630388 12.168575-4.080721 18.771315-17.246062 14.744112-29.407948-3.351543-10.121525-13.018168-16.356331-23.186521-15.801086l-34.512194-104.24569 93.502022 57.377609c-2.843125 9.78704 1.010146 20.624364 10.094767 26.196889 10.910911 6.689706 25.206813 3.244507 31.943346-7.693162 6.729844-10.944359 3.351543-25.240261-7.552678-31.929967-9.084621-5.572525-20.517329-4.10748-27.976351 2.856504L541.131603 533.932201l108.734483-16.349641c4.10079 9.305381 14.028314 15.098667 24.591359 13.513206 12.676993-1.906566 21.453887-13.733967 19.607529-26.417649z",fill:"#c5a059"})]})}),r.jsxs("div",{className:"absolute top-4 left-6 z-30",children:[r.jsx("div",{className:"bg-[#f4ebd9] border-2 border-[#1a1a1a] inline-block px-3 py-1 mb-2 shadow-[2px_2px_0px_#1a1a1a]",children:r.jsx("span",{className:"text-xs font-black tracking-widest text-[#1a1a1a]",children:""})}),r.jsxs("h2",{className:"text-5xl font-black text-[#1a1a1a] mb-0 leading-none",style:{textShadow:"2px 2px 0px #f4ebd9"},children:["",r.jsx("br",{}),"",r.jsx("br",{}),""]})]}),r.jsx("div",{className:"absolute bottom-6 right-6 z-30",children:r.jsx("div",{className:"w-16 h-16 rounded-full border-4 border-[#c93a40] bg-[#f4ebd9] flex items-center justify-center rotate-12 shadow-lg",children:r.jsx("span",{className:"text-[#c93a40] font-black text-xl",children:""})})})]}),r.jsxs(me.div,{whileHover:{scale:1.02,rotate:1},whileTap:{scale:.98},onClick:()=>t("hyakumonogatari"),className:"group relative h-56 w-full bg-[#1e3148] border-4 border-[#1a1a1a] overflow-hidden cursor-pointer shadow-[8px_8px_0px_rgba(27,27,27,0.3)] hover:shadow-[12px_12px_0px_#4a6fa5] transition-shadow duration-300",children:[r.jsx("div",{className:"absolute inset-2 border border-[#e6dbcc]/20 pointer-events-none z-20"}),r.jsx("div",{className:"absolute top-0 right-0 w-3/4 h-full bg-[#1a1a1a] opacity-30 skew-x-12"}),r.jsx(n7,{className:"absolute -bottom-4 -left-4 w-40 h-40 text-[#4a6fa5] opacity-20"}),r.jsx("div",{className:"absolute top-10 right-12 z-10 animate-pulse",children:r.jsx(qw,{className:"w-24 h-24 text-[#e6dbcc] fill-[#c5a059]"})}),r.jsxs("div",{className:"absolute top-4 left-6 z-30",children:[r.jsx("div",{className:"bg-[#1e3148] border-2 border-[#e6dbcc] inline-block px-3 py-1 mb-2 shadow-[2px_2px_0px_#000]",children:r.jsx("span",{className:"text-xs font-black tracking-widest text-[#e6dbcc]",children:""})}),r.jsxs("h2",{className:"text-5xl font-black text-[#e6dbcc] mb-0 leading-none",style:{textShadow:"3px 3px 0px #1a1a1a"},children:["",r.jsx("br",{}),"",r.jsx("br",{}),""]})]})]}),r.jsx("div",{className:"flex justify-center mt-8",children:r.jsx("div",{className:"border-2 border-[#c93a40] px-4 py-2 rotate-[-2deg] opacity-70",children:r.jsx("span",{className:"text-[#c93a40] font-serif font-bold tracking-[0.5em] text-xs",children:""})})})]}),r.jsx("style",{jsx:!0,global:!0,children:`
        .clip-path-plaque {
          clip-path: polygon(10% 0, 90% 0, 100% 50%, 90% 100%, 10% 100%, 0% 50%);
        }
      `})]})}function iR({onBack:e}){return r.jsxs("div",{className:"relative flex flex-col h-full bg-[#f2e6d8] text-[#1a1a1a] font-serif overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-40 mix-blend-multiply",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.5'/%3E%3C/svg%3E")`}}),r.jsx("div",{className:"absolute top-0 bottom-0 left-2 w-1 bg-[#c93a40]/30"}),r.jsx("div",{className:"absolute top-0 bottom-0 right-2 w-1 bg-[#c93a40]/30"}),r.jsxs("div",{className:"relative z-20 flex items-center justify-between px-4 pt-12 pb-4",children:[r.jsx("button",{onClick:e,className:"group flex items-center justify-center w-10 h-10 rounded-full border-2 border-[#1a1a1a] bg-[#f2e6d8] text-[#1a1a1a] hover:bg-[#c93a40] hover:text-[#f2e6d8] transition-colors shadow-[2px_2px_0px_rgba(0,0,0,1)] active:translate-x-[1px] active:translate-y-[1px] active:shadow-none",children:r.jsx(dn,{className:"w-5 h-5"})}),r.jsx("div",{className:"border-y-2 border-[#1a1a1a] py-1 px-4 bg-[#c93a40] text-[#f2e6d8] shadow-[4px_4px_0px_rgba(0,0,0,0.2)]",children:r.jsx("h1",{className:"text-xl font-bold tracking-[0.3em]",children:""})}),r.jsx("div",{className:"w-10"})]}),r.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6 text-center relative z-10",children:[r.jsxs("div",{className:"w-40 h-64 bg-[#c93a40] border-4 border-[#1a1a1a] relative mb-8 shadow-[8px_8px_0px_rgba(0,0,0,0.2)] flex flex-col items-center justify-between py-6",children:[r.jsx("div",{className:"w-full h-4 border-y border-[#1a1a1a] bg-[#f2e6d8]"}),r.jsx("div",{className:"bg-[#f2e6d8] px-3 py-6 border-2 border-[#1a1a1a]",children:r.jsx("span",{className:"text-2xl font-bold text-[#1a1a1a] writing-vertical-rl tracking-widest",children:""})}),r.jsx("div",{className:"w-4 h-4 bg-[#1a1a1a] rounded-full"})]}),r.jsxs("div",{className:"bg-[#f2e6d8] border-2 border-[#1a1a1a] p-4 shadow-[4px_4px_0px_#1a1a1a] max-w-[80%]",children:[r.jsx("h2",{className:"text-xl font-bold mb-2 tracking-widest text-[#c93a40]",children:""}),r.jsx("div",{className:"w-full h-[1px] bg-[#1a1a1a] mb-2"}),r.jsxs("p",{className:"text-[#1a1a1a] text-sm tracking-wider font-medium",children:["",r.jsx("br",{}),""]})]})]})]})}function oR({onBack:e}){return r.jsxs("div",{className:"relative flex flex-col h-full bg-[#2b4b64] text-[#f2e6d8] font-serif overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-20 mix-blend-overlay",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.5'/%3E%3C/svg%3E")`}}),r.jsxs("div",{className:"relative z-20 flex items-center justify-between px-4 pt-12 pb-4",children:[r.jsx("button",{onClick:e,className:"group flex items-center justify-center w-10 h-10 rounded-full border-2 border-[#f2e6d8] bg-[#2b4b64] text-[#f2e6d8] hover:bg-[#f2e6d8] hover:text-[#2b4b64] transition-colors shadow-[2px_2px_0px_#1a1a1a] active:translate-x-[1px] active:translate-y-[1px] active:shadow-none",children:r.jsx(dn,{className:"w-5 h-5"})}),r.jsx("div",{className:"border-y-2 border-[#f2e6d8] py-1 px-4 bg-[#1a1a1a] text-[#f2e6d8] shadow-[4px_4px_0px_rgba(0,0,0,0.5)]",children:r.jsx("h1",{className:"text-xl font-bold tracking-[0.3em]",children:""})}),r.jsx("div",{className:"w-10"})]}),r.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6 text-center relative z-10",children:[r.jsxs("div",{className:"relative mb-8",children:[r.jsx("div",{className:"absolute inset-0 bg-blue-400 blur-3xl opacity-20 animate-pulse"}),r.jsx(qw,{className:"w-32 h-32 text-[#d4af37] drop-shadow-[0_0_15px_#d4af37]"}),r.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-4 h-12 bg-[#f2e6d8] opacity-50 blur-sm"})]}),r.jsxs("div",{className:"bg-[#1a1a1a] border-2 border-[#f2e6d8] p-6 shadow-[4px_4px_0px_#f2e6d8] max-w-[80%] relative",children:[r.jsx("div",{className:"absolute top-[-4px] left-[-4px] w-3 h-3 border-t-2 border-l-2 border-[#f2e6d8]"}),r.jsx("div",{className:"absolute bottom-[-4px] right-[-4px] w-3 h-3 border-b-2 border-r-2 border-[#f2e6d8]"}),r.jsx("h2",{className:"text-xl font-bold mb-2 tracking-widest text-[#d4af37]",children:""}),r.jsx("div",{className:"w-full h-[1px] bg-[#f2e6d8]/30 mb-2"}),r.jsxs("p",{className:"text-[#f2e6d8]/90 text-sm tracking-wider font-medium",children:["",r.jsx("br",{}),""]})]})]})]})}const py={enter:e=>({x:e>0?"100%":"-25%",opacity:0}),center:{x:0,opacity:1},exit:e=>({x:e<0?"100%":"-25%",opacity:0})};function lR({onClose:e}){const[t,n]=k.useState("hub"),[s,a]=k.useState(0),i=k.useRef(!0);k.useEffect(()=>{const u=setTimeout(()=>{i.current=!1},500);return()=>clearTimeout(u)},[]);const l=u=>{a(1),n(u)},c=()=>{a(-1),n("hub")};return r.jsx("div",{className:"fixed inset-0 z-50 bg-[#1c1c1e] font-['Source_Han_Sans_CN_VF',sans-serif] overflow-hidden",children:r.jsx("div",{className:"relative z-10 h-full w-full",children:r.jsx(Be,{initial:!1,custom:s,children:t==="hub"?r.jsx(me.div,{custom:s,variants:py,initial:i.current?"center":"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"absolute inset-0 w-full h-full",children:r.jsx(aR,{onClose:e,onNavigate:l})},"hub"):r.jsxs(me.div,{custom:s,variants:py,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"absolute inset-0 w-full h-full",children:[t==="omikuji"&&r.jsx(iR,{onBack:c}),t==="hyakumonogatari"&&r.jsx(oR,{onBack:c})]},t)})})})}function cR(e,t){return k.useReducer((n,s)=>t[n][s]??n,e)}var d0="ScrollArea",[z3]=ei(d0),[dR,Mr]=z3(d0),L3=k.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:s="hover",dir:a,scrollHideDelay:i=600,...l}=e,[c,u]=k.useState(null),[p,h]=k.useState(null),[f,m]=k.useState(null),[g,y]=k.useState(null),[b,S]=k.useState(null),[v,N]=k.useState(0),[C,_]=k.useState(0),[R,D]=k.useState(!1),[V,I]=k.useState(!1),A=zt(t,W=>u(W)),U=V5(a);return r.jsx(dR,{scope:n,type:s,dir:U,scrollHideDelay:i,scrollArea:c,viewport:p,onViewportChange:h,content:f,onContentChange:m,scrollbarX:g,onScrollbarXChange:y,scrollbarXEnabled:R,onScrollbarXEnabledChange:D,scrollbarY:b,onScrollbarYChange:S,scrollbarYEnabled:V,onScrollbarYEnabledChange:I,onCornerWidthChange:N,onCornerHeightChange:_,children:r.jsx(It.div,{dir:U,...l,ref:A,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":C+"px",...e.style}})})});L3.displayName=d0;var O3="ScrollAreaViewport",$3=k.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:s,nonce:a,...i}=e,l=Mr(O3,n),c=k.useRef(null),u=zt(t,c,l.onViewportChange);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),r.jsx(It.div,{"data-radix-scroll-area-viewport":"",...i,ref:u,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:r.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});$3.displayName=O3;var ws="ScrollAreaScrollbar",V3=k.forwardRef((e,t)=>{const{forceMount:n,...s}=e,a=Mr(ws,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:l}=a,c=e.orientation==="horizontal";return k.useEffect(()=>(c?i(!0):l(!0),()=>{c?i(!1):l(!1)}),[c,i,l]),a.type==="hover"?r.jsx(uR,{...s,ref:t,forceMount:n}):a.type==="scroll"?r.jsx(fR,{...s,ref:t,forceMount:n}):a.type==="auto"?r.jsx(H3,{...s,ref:t,forceMount:n}):a.type==="always"?r.jsx(u0,{...s,ref:t}):null});V3.displayName=ws;var uR=k.forwardRef((e,t)=>{const{forceMount:n,...s}=e,a=Mr(ws,e.__scopeScrollArea),[i,l]=k.useState(!1);return k.useEffect(()=>{const c=a.scrollArea;let u=0;if(c){const p=()=>{window.clearTimeout(u),l(!0)},h=()=>{u=window.setTimeout(()=>l(!1),a.scrollHideDelay)};return c.addEventListener("pointerenter",p),c.addEventListener("pointerleave",h),()=>{window.clearTimeout(u),c.removeEventListener("pointerenter",p),c.removeEventListener("pointerleave",h)}}},[a.scrollArea,a.scrollHideDelay]),r.jsx(xa,{present:n||i,children:r.jsx(H3,{"data-state":i?"visible":"hidden",...s,ref:t})})}),fR=k.forwardRef((e,t)=>{const{forceMount:n,...s}=e,a=Mr(ws,e.__scopeScrollArea),i=e.orientation==="horizontal",l=gu(()=>u("SCROLL_END"),100),[c,u]=cR("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return k.useEffect(()=>{if(c==="idle"){const p=window.setTimeout(()=>u("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(p)}},[c,a.scrollHideDelay,u]),k.useEffect(()=>{const p=a.viewport,h=i?"scrollLeft":"scrollTop";if(p){let f=p[h];const m=()=>{const g=p[h];f!==g&&(u("SCROLL"),l()),f=g};return p.addEventListener("scroll",m),()=>p.removeEventListener("scroll",m)}},[a.viewport,i,u,l]),r.jsx(xa,{present:n||c!=="hidden",children:r.jsx(u0,{"data-state":c==="hidden"?"hidden":"visible",...s,ref:t,onPointerEnter:Tt(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:Tt(e.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),H3=k.forwardRef((e,t)=>{const n=Mr(ws,e.__scopeScrollArea),{forceMount:s,...a}=e,[i,l]=k.useState(!1),c=e.orientation==="horizontal",u=gu(()=>{if(n.viewport){const p=n.viewport.offsetWidth<n.viewport.scrollWidth,h=n.viewport.offsetHeight<n.viewport.scrollHeight;l(c?p:h)}},10);return ro(n.viewport,u),ro(n.content,u),r.jsx(xa,{present:s||i,children:r.jsx(u0,{"data-state":i?"visible":"hidden",...a,ref:t})})}),u0=k.forwardRef((e,t)=>{const{orientation:n="vertical",...s}=e,a=Mr(ws,e.__scopeScrollArea),i=k.useRef(null),l=k.useRef(0),[c,u]=k.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),p=G3(c.viewport,c.content),h={...s,sizes:c,onSizesChange:u,hasThumb:p>0&&p<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:m=>l.current=m};function f(m,g){return bR(m,l.current,c,g)}return n==="horizontal"?r.jsx(hR,{...h,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollLeft,g=my(m,c,a.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollLeft=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollLeft=f(m,a.dir))}}):n==="vertical"?r.jsx(pR,{...h,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollTop,g=my(m,c);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollTop=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollTop=f(m))}}):null}),hR=k.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...a}=e,i=Mr(ws,e.__scopeScrollArea),[l,c]=k.useState(),u=k.useRef(null),p=zt(t,u,i.onScrollbarXChange);return k.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),r.jsx(W3,{"data-orientation":"horizontal",...a,ref:p,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":xu(n)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.x),onDragScroll:h=>e.onDragScroll(h.x),onWheelScroll:(h,f)=>{if(i.viewport){const m=i.viewport.scrollLeft+h.deltaX;e.onWheelScroll(m),Z3(m,f)&&h.preventDefault()}},onResize:()=>{u.current&&i.viewport&&l&&s({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:Gd(l.paddingLeft),paddingEnd:Gd(l.paddingRight)}})}})}),pR=k.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...a}=e,i=Mr(ws,e.__scopeScrollArea),[l,c]=k.useState(),u=k.useRef(null),p=zt(t,u,i.onScrollbarYChange);return k.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),r.jsx(W3,{"data-orientation":"vertical",...a,ref:p,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":xu(n)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.y),onDragScroll:h=>e.onDragScroll(h.y),onWheelScroll:(h,f)=>{if(i.viewport){const m=i.viewport.scrollTop+h.deltaY;e.onWheelScroll(m),Z3(m,f)&&h.preventDefault()}},onResize:()=>{u.current&&i.viewport&&l&&s({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:Gd(l.paddingTop),paddingEnd:Gd(l.paddingBottom)}})}})}),[mR,U3]=z3(ws),W3=k.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:s,hasThumb:a,onThumbChange:i,onThumbPointerUp:l,onThumbPointerDown:c,onThumbPositionChange:u,onDragScroll:p,onWheelScroll:h,onResize:f,...m}=e,g=Mr(ws,n),[y,b]=k.useState(null),S=zt(t,A=>b(A)),v=k.useRef(null),N=k.useRef(""),C=g.viewport,_=s.content-s.viewport,R=cr(h),D=cr(u),V=gu(f,10);function I(A){if(v.current){const U=A.clientX-v.current.left,W=A.clientY-v.current.top;p({x:U,y:W})}}return k.useEffect(()=>{const A=U=>{const W=U.target;y?.contains(W)&&R(U,_)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[C,y,_,R]),k.useEffect(D,[s,D]),ro(y,V),ro(g.content,V),r.jsx(mR,{scope:n,scrollbar:y,hasThumb:a,onThumbChange:cr(i),onThumbPointerUp:cr(l),onThumbPositionChange:D,onThumbPointerDown:cr(c),children:r.jsx(It.div,{...m,ref:S,style:{position:"absolute",...m.style},onPointerDown:Tt(e.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),v.current=y.getBoundingClientRect(),N.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),I(A))}),onPointerMove:Tt(e.onPointerMove,I),onPointerUp:Tt(e.onPointerUp,A=>{const U=A.target;U.hasPointerCapture(A.pointerId)&&U.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=N.current,g.viewport&&(g.viewport.style.scrollBehavior=""),v.current=null})})})}),qd="ScrollAreaThumb",K3=k.forwardRef((e,t)=>{const{forceMount:n,...s}=e,a=U3(qd,e.__scopeScrollArea);return r.jsx(xa,{present:n||a.hasThumb,children:r.jsx(xR,{ref:t,...s})})}),xR=k.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:s,...a}=e,i=Mr(qd,n),l=U3(qd,n),{onThumbPositionChange:c}=l,u=zt(t,f=>l.onThumbChange(f)),p=k.useRef(void 0),h=gu(()=>{p.current&&(p.current(),p.current=void 0)},100);return k.useEffect(()=>{const f=i.viewport;if(f){const m=()=>{if(h(),!p.current){const g=yR(f,c);p.current=g,c()}};return c(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[i.viewport,h,c]),r.jsx(It.div,{"data-state":l.hasThumb?"visible":"hidden",...a,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:Tt(e.onPointerDownCapture,f=>{const g=f.target.getBoundingClientRect(),y=f.clientX-g.left,b=f.clientY-g.top;l.onThumbPointerDown({x:y,y:b})}),onPointerUp:Tt(e.onPointerUp,l.onThumbPointerUp)})});K3.displayName=qd;var f0="ScrollAreaCorner",q3=k.forwardRef((e,t)=>{const n=Mr(f0,e.__scopeScrollArea),s=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&s?r.jsx(gR,{...e,ref:t}):null});q3.displayName=f0;var gR=k.forwardRef((e,t)=>{const{__scopeScrollArea:n,...s}=e,a=Mr(f0,n),[i,l]=k.useState(0),[c,u]=k.useState(0),p=!!(i&&c);return ro(a.scrollbarX,()=>{const h=a.scrollbarX?.offsetHeight||0;a.onCornerHeightChange(h),u(h)}),ro(a.scrollbarY,()=>{const h=a.scrollbarY?.offsetWidth||0;a.onCornerWidthChange(h),l(h)}),p?r.jsx(It.div,{...s,ref:t,style:{width:i,height:c,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Gd(e){return e?parseInt(e,10):0}function G3(e,t){const n=e/t;return isNaN(n)?0:n}function xu(e){const t=G3(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-n)*t;return Math.max(s,18)}function bR(e,t,n,s="ltr"){const a=xu(n),i=a/2,l=t||i,c=a-l,u=n.scrollbar.paddingStart+l,p=n.scrollbar.size-n.scrollbar.paddingEnd-c,h=n.content-n.viewport,f=s==="ltr"?[0,h]:[h*-1,0];return Y3([u,p],f)(e)}function my(e,t,n="ltr"){const s=xu(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,l=t.content-t.viewport,c=i-s,u=n==="ltr"?[0,l]:[l*-1,0],p=Mp(e,u);return Y3([0,l],[0,c])(p)}function Y3(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function Z3(e,t){return e>0&&e<t}var yR=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},s=0;return(function a(){const i={left:e.scrollLeft,top:e.scrollTop},l=n.left!==i.left,c=n.top!==i.top;(l||c)&&t(),n=i,s=window.requestAnimationFrame(a)})(),()=>window.cancelAnimationFrame(s)};function gu(e,t){const n=cr(e),s=k.useRef(0);return k.useEffect(()=>()=>window.clearTimeout(s.current),[]),k.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(n,t)},[n,t])}function ro(e,t){const n=cr(t);Mn(()=>{let s=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(s),a.unobserve(e)}}},[e,n])}var vR=L3,wR=$3,kR=q3;function kd({className:e,children:t,...n}){return r.jsxs(vR,{"data-slot":"scroll-area",className:Pe("relative",e),...n,children:[r.jsx(wR,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),r.jsx(SR,{}),r.jsx(kR,{})]})}function SR({className:e,orientation:t="vertical",...n}){return r.jsx(V3,{"data-slot":"scroll-area-scrollbar",orientation:t,className:Pe("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...n,children:r.jsx(K3,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function jR(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const CR=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,NR=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,_R={};function xy(e,t){return(_R.jsx?NR:CR).test(e)}const AR=/[ \t\n\f\r]/g;function ER(e){return typeof e=="object"?e.type==="text"?gy(e.value):!1:gy(e)}function gy(e){return e.replace(AR,"")===""}class Pl{constructor(t,n,s){this.normal=n,this.property=t,s&&(this.space=s)}}Pl.prototype.normal={};Pl.prototype.property={};Pl.prototype.space=void 0;function Q3(e,t){const n={},s={};for(const a of e)Object.assign(n,a.property),Object.assign(s,a.normal);return new Pl(n,s,t)}function Hp(e){return e.toLowerCase()}class fr{constructor(t,n){this.attribute=n,this.property=t}}fr.prototype.attribute="";fr.prototype.booleanish=!1;fr.prototype.boolean=!1;fr.prototype.commaOrSpaceSeparated=!1;fr.prototype.commaSeparated=!1;fr.prototype.defined=!1;fr.prototype.mustUseProperty=!1;fr.prototype.number=!1;fr.prototype.overloadedBoolean=!1;fr.prototype.property="";fr.prototype.spaceSeparated=!1;fr.prototype.space=void 0;let TR=0;const St=ri(),yn=ri(),Up=ri(),Ve=ri(),Zt=ri(),Qi=ri(),gr=ri();function ri(){return 2**++TR}const Wp=Object.freeze(Object.defineProperty({__proto__:null,boolean:St,booleanish:yn,commaOrSpaceSeparated:gr,commaSeparated:Qi,number:Ve,overloadedBoolean:Up,spaceSeparated:Zt},Symbol.toStringTag,{value:"Module"})),Oh=Object.keys(Wp);class h0 extends fr{constructor(t,n,s,a){let i=-1;if(super(t,n),by(this,"space",a),typeof s=="number")for(;++i<Oh.length;){const l=Oh[i];by(this,Oh[i],(s&Wp[l])===Wp[l])}}}h0.prototype.defined=!0;function by(e,t,n){n&&(e[t]=n)}function go(e){const t={},n={};for(const[s,a]of Object.entries(e.properties)){const i=new h0(s,e.transform(e.attributes||{},s),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(s)&&(i.mustUseProperty=!0),t[s]=i,n[Hp(s)]=s,n[Hp(i.attribute)]=s}return new Pl(t,n,e.space)}const X3=go({properties:{ariaActiveDescendant:null,ariaAtomic:yn,ariaAutoComplete:null,ariaBusy:yn,ariaChecked:yn,ariaColCount:Ve,ariaColIndex:Ve,ariaColSpan:Ve,ariaControls:Zt,ariaCurrent:null,ariaDescribedBy:Zt,ariaDetails:null,ariaDisabled:yn,ariaDropEffect:Zt,ariaErrorMessage:null,ariaExpanded:yn,ariaFlowTo:Zt,ariaGrabbed:yn,ariaHasPopup:null,ariaHidden:yn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Zt,ariaLevel:Ve,ariaLive:null,ariaModal:yn,ariaMultiLine:yn,ariaMultiSelectable:yn,ariaOrientation:null,ariaOwns:Zt,ariaPlaceholder:null,ariaPosInSet:Ve,ariaPressed:yn,ariaReadOnly:yn,ariaRelevant:null,ariaRequired:yn,ariaRoleDescription:Zt,ariaRowCount:Ve,ariaRowIndex:Ve,ariaRowSpan:Ve,ariaSelected:yn,ariaSetSize:Ve,ariaSort:null,ariaValueMax:Ve,ariaValueMin:Ve,ariaValueNow:Ve,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function J3(e,t){return t in e?e[t]:t}function ek(e,t){return J3(e,t.toLowerCase())}const DR=go({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Qi,acceptCharset:Zt,accessKey:Zt,action:null,allow:null,allowFullScreen:St,allowPaymentRequest:St,allowUserMedia:St,alt:null,as:null,async:St,autoCapitalize:null,autoComplete:Zt,autoFocus:St,autoPlay:St,blocking:Zt,capture:null,charSet:null,checked:St,cite:null,className:Zt,cols:Ve,colSpan:null,content:null,contentEditable:yn,controls:St,controlsList:Zt,coords:Ve|Qi,crossOrigin:null,data:null,dateTime:null,decoding:null,default:St,defer:St,dir:null,dirName:null,disabled:St,download:Up,draggable:yn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:St,formTarget:null,headers:Zt,height:Ve,hidden:Up,high:Ve,href:null,hrefLang:null,htmlFor:Zt,httpEquiv:Zt,id:null,imageSizes:null,imageSrcSet:null,inert:St,inputMode:null,integrity:null,is:null,isMap:St,itemId:null,itemProp:Zt,itemRef:Zt,itemScope:St,itemType:Zt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:St,low:Ve,manifest:null,max:null,maxLength:Ve,media:null,method:null,min:null,minLength:Ve,multiple:St,muted:St,name:null,nonce:null,noModule:St,noValidate:St,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:St,optimum:Ve,pattern:null,ping:Zt,placeholder:null,playsInline:St,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:St,referrerPolicy:null,rel:Zt,required:St,reversed:St,rows:Ve,rowSpan:Ve,sandbox:Zt,scope:null,scoped:St,seamless:St,selected:St,shadowRootClonable:St,shadowRootDelegatesFocus:St,shadowRootMode:null,shape:null,size:Ve,sizes:null,slot:null,span:Ve,spellCheck:yn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ve,step:null,style:null,tabIndex:Ve,target:null,title:null,translate:null,type:null,typeMustMatch:St,useMap:null,value:yn,width:Ve,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Zt,axis:null,background:null,bgColor:null,border:Ve,borderColor:null,bottomMargin:Ve,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:St,declare:St,event:null,face:null,frame:null,frameBorder:null,hSpace:Ve,leftMargin:Ve,link:null,longDesc:null,lowSrc:null,marginHeight:Ve,marginWidth:Ve,noResize:St,noHref:St,noShade:St,noWrap:St,object:null,profile:null,prompt:null,rev:null,rightMargin:Ve,rules:null,scheme:null,scrolling:yn,standby:null,summary:null,text:null,topMargin:Ve,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ve,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:St,disableRemotePlayback:St,prefix:null,property:null,results:Ve,security:null,unselectable:null},space:"html",transform:ek}),IR=go({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:gr,accentHeight:Ve,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ve,amplitude:Ve,arabicForm:null,ascent:Ve,attributeName:null,attributeType:null,azimuth:Ve,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ve,by:null,calcMode:null,capHeight:Ve,className:Zt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ve,diffuseConstant:Ve,direction:null,display:null,dur:null,divisor:Ve,dominantBaseline:null,download:St,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ve,enableBackground:null,end:null,event:null,exponent:Ve,externalResourcesRequired:null,fill:null,fillOpacity:Ve,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Qi,g2:Qi,glyphName:Qi,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ve,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ve,horizOriginX:Ve,horizOriginY:Ve,id:null,ideographic:Ve,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ve,k:Ve,k1:Ve,k2:Ve,k3:Ve,k4:Ve,kernelMatrix:gr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ve,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ve,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ve,overlineThickness:Ve,paintOrder:null,panose1:null,path:null,pathLength:Ve,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Zt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ve,pointsAtY:Ve,pointsAtZ:Ve,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:gr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:gr,rev:gr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:gr,requiredFeatures:gr,requiredFonts:gr,requiredFormats:gr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ve,specularExponent:Ve,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ve,strikethroughThickness:Ve,string:null,stroke:null,strokeDashArray:gr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ve,strokeOpacity:Ve,strokeWidth:null,style:null,surfaceScale:Ve,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:gr,tabIndex:Ve,tableValues:null,target:null,targetX:Ve,targetY:Ve,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:gr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ve,underlineThickness:Ve,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ve,values:null,vAlphabetic:Ve,vMathematical:Ve,vectorEffect:null,vHanging:Ve,vIdeographic:Ve,version:null,vertAdvY:Ve,vertOriginX:Ve,vertOriginY:Ve,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ve,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:J3}),tk=go({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),nk=go({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:ek}),rk=go({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),PR={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},MR=/[A-Z]/g,yy=/-[a-z]/g,FR=/^data[-\w.:]+$/i;function RR(e,t){const n=Hp(t);let s=t,a=fr;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&FR.test(t)){if(t.charAt(4)==="-"){const i=t.slice(5).replace(yy,zR);s="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=t.slice(4);if(!yy.test(i)){let l=i.replace(MR,BR);l.charAt(0)!=="-"&&(l="-"+l),t="data"+l}}a=h0}return new a(s,t)}function BR(e){return"-"+e.toLowerCase()}function zR(e){return e.charAt(1).toUpperCase()}const LR=Q3([X3,DR,tk,nk,rk],"html"),p0=Q3([X3,IR,tk,nk,rk],"svg");function OR(e){return e.join(" ").trim()}var zi={},$h,vy;function $R(){if(vy)return $h;vy=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,s=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,a=/^:\s*/,i=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,c=/^\s+|\s+$/g,u=`
`,p="/",h="*",f="",m="comment",g="declaration";function y(S,v){if(typeof S!="string")throw new TypeError("First argument must be a string");if(!S)return[];v=v||{};var N=1,C=1;function _(j){var P=j.match(t);P&&(N+=P.length);var L=j.lastIndexOf(u);C=~L?j.length-L:C+j.length}function R(){var j={line:N,column:C};return function(P){return P.position=new D(j),A(),P}}function D(j){this.start=j,this.end={line:N,column:C},this.source=v.source}D.prototype.content=S;function V(j){var P=new Error(v.source+":"+N+":"+C+": "+j);if(P.reason=j,P.filename=v.source,P.line=N,P.column=C,P.source=S,!v.silent)throw P}function I(j){var P=j.exec(S);if(P){var L=P[0];return _(L),S=S.slice(L.length),P}}function A(){I(n)}function U(j){var P;for(j=j||[];P=W();)P!==!1&&j.push(P);return j}function W(){var j=R();if(!(p!=S.charAt(0)||h!=S.charAt(1))){for(var P=2;f!=S.charAt(P)&&(h!=S.charAt(P)||p!=S.charAt(P+1));)++P;if(P+=2,f===S.charAt(P-1))return V("End of comment missing");var L=S.slice(2,P-2);return C+=2,_(L),S=S.slice(P),C+=2,j({type:m,comment:L})}}function T(){var j=R(),P=I(s);if(P){if(W(),!I(a))return V("property missing ':'");var L=I(i),B=j({type:g,property:b(P[0].replace(e,f)),value:L?b(L[0].replace(e,f)):f});return I(l),B}}function M(){var j=[];U(j);for(var P;P=T();)P!==!1&&(j.push(P),U(j));return j}return A(),M()}function b(S){return S?S.replace(c,f):f}return $h=y,$h}var wy;function VR(){if(wy)return zi;wy=1;var e=zi&&zi.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(zi,"__esModule",{value:!0}),zi.default=n;const t=e($R());function n(s,a){let i=null;if(!s||typeof s!="string")return i;const l=(0,t.default)(s),c=typeof a=="function";return l.forEach(u=>{if(u.type!=="declaration")return;const{property:p,value:h}=u;c?a(p,h,u):h&&(i=i||{},i[p]=h)}),i}return zi}var el={},ky;function HR(){if(ky)return el;ky=1,Object.defineProperty(el,"__esModule",{value:!0}),el.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,s=/^-(webkit|moz|ms|o|khtml)-/,a=/^-(ms)-/,i=function(p){return!p||n.test(p)||e.test(p)},l=function(p,h){return h.toUpperCase()},c=function(p,h){return"".concat(h,"-")},u=function(p,h){return h===void 0&&(h={}),i(p)?p:(p=p.toLowerCase(),h.reactCompat?p=p.replace(a,c):p=p.replace(s,c),p.replace(t,l))};return el.camelCase=u,el}var tl,Sy;function UR(){if(Sy)return tl;Sy=1;var e=tl&&tl.__importDefault||function(a){return a&&a.__esModule?a:{default:a}},t=e(VR()),n=HR();function s(a,i){var l={};return!a||typeof a!="string"||(0,t.default)(a,function(c,u){c&&u&&(l[(0,n.camelCase)(c,i)]=u)}),l}return s.default=s,tl=s,tl}var WR=UR();const KR=so(WR),sk=ak("end"),m0=ak("start");function ak(e){return t;function t(n){const s=n&&n.position&&n.position[e]||{};if(typeof s.line=="number"&&s.line>0&&typeof s.column=="number"&&s.column>0)return{line:s.line,column:s.column,offset:typeof s.offset=="number"&&s.offset>-1?s.offset:void 0}}}function qR(e){const t=m0(e),n=sk(e);if(t&&n)return{start:t,end:n}}function hl(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?jy(e.position):"start"in e||"end"in e?jy(e):"line"in e||"column"in e?Kp(e):""}function Kp(e){return Cy(e&&e.line)+":"+Cy(e&&e.column)}function jy(e){return Kp(e&&e.start)+"-"+Kp(e&&e.end)}function Cy(e){return e&&typeof e=="number"?e:1}class Wn extends Error{constructor(t,n,s){super(),typeof n=="string"&&(s=n,n=void 0);let a="",i={},l=!1;if(n&&("line"in n&&"column"in n?i={place:n}:"start"in n&&"end"in n?i={place:n}:"type"in n?i={ancestors:[n],place:n.position}:i={...n}),typeof t=="string"?a=t:!i.cause&&t&&(l=!0,a=t.message,i.cause=t),!i.ruleId&&!i.source&&typeof s=="string"){const u=s.indexOf(":");u===-1?i.ruleId=s:(i.source=s.slice(0,u),i.ruleId=s.slice(u+1))}if(!i.place&&i.ancestors&&i.ancestors){const u=i.ancestors[i.ancestors.length-1];u&&(i.place=u.position)}const c=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file="",this.message=a,this.line=c?c.line:void 0,this.name=hl(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=l&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Wn.prototype.file="";Wn.prototype.name="";Wn.prototype.reason="";Wn.prototype.message="";Wn.prototype.stack="";Wn.prototype.column=void 0;Wn.prototype.line=void 0;Wn.prototype.ancestors=void 0;Wn.prototype.cause=void 0;Wn.prototype.fatal=void 0;Wn.prototype.place=void 0;Wn.prototype.ruleId=void 0;Wn.prototype.source=void 0;const x0={}.hasOwnProperty,GR=new Map,YR=/[A-Z]/g,ZR=new Set(["table","tbody","thead","tfoot","tr"]),QR=new Set(["td","th"]),ik="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function XR(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let s;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");s=iB(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");s=aB(n,t.jsx,t.jsxs)}const a={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:s,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?p0:LR,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},i=ok(a,e,void 0);return i&&typeof i!="string"?i:a.create(e,a.Fragment,{children:i||void 0},void 0)}function ok(e,t,n){if(t.type==="element")return JR(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return eB(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return nB(e,t,n);if(t.type==="mdxjsEsm")return tB(e,t);if(t.type==="root")return rB(e,t,n);if(t.type==="text")return sB(e,t)}function JR(e,t,n){const s=e.schema;let a=s;t.tagName.toLowerCase()==="svg"&&s.space==="html"&&(a=p0,e.schema=a),e.ancestors.push(t);const i=ck(e,t.tagName,!1),l=oB(e,t);let c=b0(e,t);return ZR.has(t.tagName)&&(c=c.filter(function(u){return typeof u=="string"?!ER(u):!0})),lk(e,l,i,t),g0(l,c),e.ancestors.pop(),e.schema=s,e.create(t,i,l,n)}function eB(e,t){if(t.data&&t.data.estree&&e.evaluater){const s=t.data.estree.body[0];return s.type,e.evaluater.evaluateExpression(s.expression)}jl(e,t.position)}function tB(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);jl(e,t.position)}function nB(e,t,n){const s=e.schema;let a=s;t.name==="svg"&&s.space==="html"&&(a=p0,e.schema=a),e.ancestors.push(t);const i=t.name===null?e.Fragment:ck(e,t.name,!0),l=lB(e,t),c=b0(e,t);return lk(e,l,i,t),g0(l,c),e.ancestors.pop(),e.schema=s,e.create(t,i,l,n)}function rB(e,t,n){const s={};return g0(s,b0(e,t)),e.create(t,e.Fragment,s,n)}function sB(e,t){return t.value}function lk(e,t,n,s){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=s)}function g0(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function aB(e,t,n){return s;function s(a,i,l,c){const p=Array.isArray(l.children)?n:t;return c?p(i,l,c):p(i,l)}}function iB(e,t){return n;function n(s,a,i,l){const c=Array.isArray(i.children),u=m0(s);return t(a,i,l,c,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function oB(e,t){const n={};let s,a;for(a in t.properties)if(a!=="children"&&x0.call(t.properties,a)){const i=cB(e,a,t.properties[a]);if(i){const[l,c]=i;e.tableCellAlignToStyle&&l==="align"&&typeof c=="string"&&QR.has(t.tagName)?s=c:n[l]=c}}if(s){const i=n.style||(n.style={});i[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=s}return n}function lB(e,t){const n={};for(const s of t.attributes)if(s.type==="mdxJsxExpressionAttribute")if(s.data&&s.data.estree&&e.evaluater){const i=s.data.estree.body[0];i.type;const l=i.expression;l.type;const c=l.properties[0];c.type,Object.assign(n,e.evaluater.evaluateExpression(c.argument))}else jl(e,t.position);else{const a=s.name;let i;if(s.value&&typeof s.value=="object")if(s.value.data&&s.value.data.estree&&e.evaluater){const c=s.value.data.estree.body[0];c.type,i=e.evaluater.evaluateExpression(c.expression)}else jl(e,t.position);else i=s.value===null?!0:s.value;n[a]=i}return n}function b0(e,t){const n=[];let s=-1;const a=e.passKeys?new Map:GR;for(;++s<t.children.length;){const i=t.children[s];let l;if(e.passKeys){const u=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(u){const p=a.get(u)||0;l=u+"-"+p,a.set(u,p+1)}}const c=ok(e,i,l);c!==void 0&&n.push(c)}return n}function cB(e,t,n){const s=RR(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=s.commaSeparated?jR(n):OR(n)),s.property==="style"){let a=typeof n=="object"?n:dB(e,String(n));return e.stylePropertyNameCase==="css"&&(a=uB(a)),["style",a]}return[e.elementAttributeNameCase==="react"&&s.space?PR[s.property]||s.property:s.attribute,n]}}function dB(e,t){try{return KR(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const s=n,a=new Wn("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw a.file=e.filePath||void 0,a.url=ik+"#cannot-parse-style-attribute",a}}function ck(e,t,n){let s;if(!n)s={type:"Literal",value:t};else if(t.includes(".")){const a=t.split(".");let i=-1,l;for(;++i<a.length;){const c=xy(a[i])?{type:"Identifier",name:a[i]}:{type:"Literal",value:a[i]};l=l?{type:"MemberExpression",object:l,property:c,computed:!!(i&&c.type==="Literal"),optional:!1}:c}s=l}else s=xy(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(s.type==="Literal"){const a=s.value;return x0.call(e.components,a)?e.components[a]:a}if(e.evaluater)return e.evaluater.evaluateExpression(s);jl(e)}function jl(e,t){const n=new Wn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=ik+"#cannot-handle-mdx-estrees-without-createevaluater",n}function uB(e){const t={};let n;for(n in e)x0.call(e,n)&&(t[fB(n)]=e[n]);return t}function fB(e){let t=e.replace(YR,hB);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function hB(e){return"-"+e.toLowerCase()}const Vh={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},pB={};function mB(e,t){const n=pB,s=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,a=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return dk(e,s,a)}function dk(e,t,n){if(xB(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Ny(e.children,t,n)}return Array.isArray(e)?Ny(e,t,n):""}function Ny(e,t,n){const s=[];let a=-1;for(;++a<e.length;)s[a]=dk(e[a],t,n);return s.join("")}function xB(e){return!!(e&&typeof e=="object")}const _y=document.createElement("i");function y0(e){const t="&"+e+";";_y.innerHTML=t;const n=_y.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function ys(e,t,n,s){const a=e.length;let i=0,l;if(t<0?t=-t>a?0:a+t:t=t>a?a:t,n=n>0?n:0,s.length<1e4)l=Array.from(s),l.unshift(t,n),e.splice(...l);else for(n&&e.splice(t,n);i<s.length;)l=s.slice(i,i+1e4),l.unshift(t,0),e.splice(...l),i+=1e4,t+=1e4}function Dr(e,t){return e.length>0?(ys(e,e.length,0,t),e):t}const Ay={}.hasOwnProperty;function gB(e){const t={};let n=-1;for(;++n<e.length;)bB(t,e[n]);return t}function bB(e,t){let n;for(n in t){const a=(Ay.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let l;if(i)for(l in i){Ay.call(a,l)||(a[l]=[]);const c=i[l];yB(a[l],Array.isArray(c)?c:c?[c]:[])}}}function yB(e,t){let n=-1;const s=[];for(;++n<t.length;)(t[n].add==="after"?e:s).push(t[n]);ys(e,0,0,s)}function uk(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Xi(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const ds=va(/[A-Za-z]/),yr=va(/[\dA-Za-z]/),vB=va(/[#-'*+\--9=?A-Z^-~]/);function qp(e){return e!==null&&(e<32||e===127)}const Gp=va(/\d/),wB=va(/[\dA-Fa-f]/),kB=va(/[!-/:-@[-`{-~]/);function yt(e){return e!==null&&e<-2}function ur(e){return e!==null&&(e<0||e===32)}function Bt(e){return e===-2||e===-1||e===32}const SB=va(/\p{P}|\p{S}/u),jB=va(/\s/);function va(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function bo(e){const t=[];let n=-1,s=0,a=0;for(;++n<e.length;){const i=e.charCodeAt(n);let l="";if(i===37&&yr(e.charCodeAt(n+1))&&yr(e.charCodeAt(n+2)))a=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(l=String.fromCharCode(i));else if(i>55295&&i<57344){const c=e.charCodeAt(n+1);i<56320&&c>56319&&c<57344?(l=String.fromCharCode(i,c),a=1):l=""}else l=String.fromCharCode(i);l&&(t.push(e.slice(s,n),encodeURIComponent(l)),s=n+a+1,l=""),a&&(n+=a,a=0)}return t.join("")+e.slice(s)}function Qt(e,t,n,s){const a=s?s-1:Number.POSITIVE_INFINITY;let i=0;return l;function l(u){return Bt(u)?(e.enter(n),c(u)):t(u)}function c(u){return Bt(u)&&i++<a?(e.consume(u),c):(e.exit(n),t(u))}}const CB={tokenize:NB};function NB(e){const t=e.attempt(this.parser.constructs.contentInitial,s,a);let n;return t;function s(c){if(c===null){e.consume(c);return}return e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),Qt(e,t,"linePrefix")}function a(c){return e.enter("paragraph"),i(c)}function i(c){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,l(c)}function l(c){if(c===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(c);return}return yt(c)?(e.consume(c),e.exit("chunkText"),i):(e.consume(c),l)}}const _B={tokenize:AB},Ey={tokenize:EB};function AB(e){const t=this,n=[];let s=0,a,i,l;return c;function c(C){if(s<n.length){const _=n[s];return t.containerState=_[1],e.attempt(_[0].continuation,u,p)(C)}return p(C)}function u(C){if(s++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&N();const _=t.events.length;let R=_,D;for(;R--;)if(t.events[R][0]==="exit"&&t.events[R][1].type==="chunkFlow"){D=t.events[R][1].end;break}v(s);let V=_;for(;V<t.events.length;)t.events[V][1].end={...D},V++;return ys(t.events,R+1,0,t.events.slice(_)),t.events.length=V,p(C)}return c(C)}function p(C){if(s===n.length){if(!a)return m(C);if(a.currentConstruct&&a.currentConstruct.concrete)return y(C);t.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Ey,h,f)(C)}function h(C){return a&&N(),v(s),m(C)}function f(C){return t.parser.lazy[t.now().line]=s!==n.length,l=t.now().offset,y(C)}function m(C){return t.containerState={},e.attempt(Ey,g,y)(C)}function g(C){return s++,n.push([t.currentConstruct,t.containerState]),m(C)}function y(C){if(C===null){a&&N(),v(0),e.consume(C);return}return a=a||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:i}),b(C)}function b(C){if(C===null){S(e.exit("chunkFlow"),!0),v(0),e.consume(C);return}return yt(C)?(e.consume(C),S(e.exit("chunkFlow")),s=0,t.interrupt=void 0,c):(e.consume(C),b)}function S(C,_){const R=t.sliceStream(C);if(_&&R.push(null),C.previous=i,i&&(i.next=C),i=C,a.defineSkip(C.start),a.write(R),t.parser.lazy[C.start.line]){let D=a.events.length;for(;D--;)if(a.events[D][1].start.offset<l&&(!a.events[D][1].end||a.events[D][1].end.offset>l))return;const V=t.events.length;let I=V,A,U;for(;I--;)if(t.events[I][0]==="exit"&&t.events[I][1].type==="chunkFlow"){if(A){U=t.events[I][1].end;break}A=!0}for(v(s),D=V;D<t.events.length;)t.events[D][1].end={...U},D++;ys(t.events,I+1,0,t.events.slice(V)),t.events.length=D}}function v(C){let _=n.length;for(;_-- >C;){const R=n[_];t.containerState=R[1],R[0].exit.call(t,e)}n.length=C}function N(){a.write([null]),i=void 0,a=void 0,t.containerState._closeFlow=void 0}}function EB(e,t,n){return Qt(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ty(e){if(e===null||ur(e)||jB(e))return 1;if(SB(e))return 2}function v0(e,t,n){const s=[];let a=-1;for(;++a<e.length;){const i=e[a].resolveAll;i&&!s.includes(i)&&(t=i(t,n),s.push(i))}return t}const Yp={name:"attention",resolveAll:TB,tokenize:DB};function TB(e,t){let n=-1,s,a,i,l,c,u,p,h;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(s=n;s--;)if(e[s][0]==="exit"&&e[s][1].type==="attentionSequence"&&e[s][1]._open&&t.sliceSerialize(e[s][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[s][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[s][1].end.offset-e[s][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[s][1].end.offset-e[s][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f={...e[s][1].end},m={...e[n][1].start};Dy(f,-u),Dy(m,u),l={type:u>1?"strongSequence":"emphasisSequence",start:f,end:{...e[s][1].end}},c={type:u>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:m},i={type:u>1?"strongText":"emphasisText",start:{...e[s][1].end},end:{...e[n][1].start}},a={type:u>1?"strong":"emphasis",start:{...l.start},end:{...c.end}},e[s][1].end={...l.start},e[n][1].start={...c.end},p=[],e[s][1].end.offset-e[s][1].start.offset&&(p=Dr(p,[["enter",e[s][1],t],["exit",e[s][1],t]])),p=Dr(p,[["enter",a,t],["enter",l,t],["exit",l,t],["enter",i,t]]),p=Dr(p,v0(t.parser.constructs.insideSpan.null,e.slice(s+1,n),t)),p=Dr(p,[["exit",i,t],["enter",c,t],["exit",c,t],["exit",a,t]]),e[n][1].end.offset-e[n][1].start.offset?(h=2,p=Dr(p,[["enter",e[n][1],t],["exit",e[n][1],t]])):h=0,ys(e,s-1,n-s+3,p),n=s+p.length-h-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function DB(e,t){const n=this.parser.constructs.attentionMarkers.null,s=this.previous,a=Ty(s);let i;return l;function l(u){return i=u,e.enter("attentionSequence"),c(u)}function c(u){if(u===i)return e.consume(u),c;const p=e.exit("attentionSequence"),h=Ty(u),f=!h||h===2&&a||n.includes(u),m=!a||a===2&&h||n.includes(s);return p._open=!!(i===42?f:f&&(a||!m)),p._close=!!(i===42?m:m&&(h||!f)),t(u)}}function Dy(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const IB={name:"autolink",tokenize:PB};function PB(e,t,n){let s=0;return a;function a(g){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(g),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(g){return ds(g)?(e.consume(g),l):g===64?n(g):p(g)}function l(g){return g===43||g===45||g===46||yr(g)?(s=1,c(g)):p(g)}function c(g){return g===58?(e.consume(g),s=0,u):(g===43||g===45||g===46||yr(g))&&s++<32?(e.consume(g),c):(s=0,p(g))}function u(g){return g===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(g),e.exit("autolinkMarker"),e.exit("autolink"),t):g===null||g===32||g===60||qp(g)?n(g):(e.consume(g),u)}function p(g){return g===64?(e.consume(g),h):vB(g)?(e.consume(g),p):n(g)}function h(g){return yr(g)?f(g):n(g)}function f(g){return g===46?(e.consume(g),s=0,h):g===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(g),e.exit("autolinkMarker"),e.exit("autolink"),t):m(g)}function m(g){if((g===45||yr(g))&&s++<63){const y=g===45?m:f;return e.consume(g),y}return n(g)}}const bu={partial:!0,tokenize:MB};function MB(e,t,n){return s;function s(i){return Bt(i)?Qt(e,a,"linePrefix")(i):a(i)}function a(i){return i===null||yt(i)?t(i):n(i)}}const fk={continuation:{tokenize:RB},exit:BB,name:"blockQuote",tokenize:FB};function FB(e,t,n){const s=this;return a;function a(l){if(l===62){const c=s.containerState;return c.open||(e.enter("blockQuote",{_container:!0}),c.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(l),e.exit("blockQuoteMarker"),i}return n(l)}function i(l){return Bt(l)?(e.enter("blockQuotePrefixWhitespace"),e.consume(l),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(l))}}function RB(e,t,n){const s=this;return a;function a(l){return Bt(l)?Qt(e,i,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):i(l)}function i(l){return e.attempt(fk,t,n)(l)}}function BB(e){e.exit("blockQuote")}const hk={name:"characterEscape",tokenize:zB};function zB(e,t,n){return s;function s(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),a}function a(i){return kB(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(i)}}const pk={name:"characterReference",tokenize:LB};function LB(e,t,n){const s=this;let a=0,i,l;return c;function c(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),p):(e.enter("characterReferenceValue"),i=31,l=yr,h(f))}function p(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,l=wB,h):(e.enter("characterReferenceValue"),i=7,l=Gp,h(f))}function h(f){if(f===59&&a){const m=e.exit("characterReferenceValue");return l===yr&&!y0(s.sliceSerialize(m))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return l(f)&&a++<i?(e.consume(f),h):n(f)}}const Iy={partial:!0,tokenize:$B},Py={concrete:!0,name:"codeFenced",tokenize:OB};function OB(e,t,n){const s=this,a={partial:!0,tokenize:R};let i=0,l=0,c;return u;function u(D){return p(D)}function p(D){const V=s.events[s.events.length-1];return i=V&&V[1].type==="linePrefix"?V[2].sliceSerialize(V[1],!0).length:0,c=D,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),h(D)}function h(D){return D===c?(l++,e.consume(D),h):l<3?n(D):(e.exit("codeFencedFenceSequence"),Bt(D)?Qt(e,f,"whitespace")(D):f(D))}function f(D){return D===null||yt(D)?(e.exit("codeFencedFence"),s.interrupt?t(D):e.check(Iy,b,_)(D)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),m(D))}function m(D){return D===null||yt(D)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(D)):Bt(D)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Qt(e,g,"whitespace")(D)):D===96&&D===c?n(D):(e.consume(D),m)}function g(D){return D===null||yt(D)?f(D):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),y(D))}function y(D){return D===null||yt(D)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(D)):D===96&&D===c?n(D):(e.consume(D),y)}function b(D){return e.attempt(a,_,S)(D)}function S(D){return e.enter("lineEnding"),e.consume(D),e.exit("lineEnding"),v}function v(D){return i>0&&Bt(D)?Qt(e,N,"linePrefix",i+1)(D):N(D)}function N(D){return D===null||yt(D)?e.check(Iy,b,_)(D):(e.enter("codeFlowValue"),C(D))}function C(D){return D===null||yt(D)?(e.exit("codeFlowValue"),N(D)):(e.consume(D),C)}function _(D){return e.exit("codeFenced"),t(D)}function R(D,V,I){let A=0;return U;function U(P){return D.enter("lineEnding"),D.consume(P),D.exit("lineEnding"),W}function W(P){return D.enter("codeFencedFence"),Bt(P)?Qt(D,T,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(P):T(P)}function T(P){return P===c?(D.enter("codeFencedFenceSequence"),M(P)):I(P)}function M(P){return P===c?(A++,D.consume(P),M):A>=l?(D.exit("codeFencedFenceSequence"),Bt(P)?Qt(D,j,"whitespace")(P):j(P)):I(P)}function j(P){return P===null||yt(P)?(D.exit("codeFencedFence"),V(P)):I(P)}}}function $B(e,t,n){const s=this;return a;function a(l){return l===null?n(l):(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),i)}function i(l){return s.parser.lazy[s.now().line]?n(l):t(l)}}const Hh={name:"codeIndented",tokenize:HB},VB={partial:!0,tokenize:UB};function HB(e,t,n){const s=this;return a;function a(p){return e.enter("codeIndented"),Qt(e,i,"linePrefix",5)(p)}function i(p){const h=s.events[s.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?l(p):n(p)}function l(p){return p===null?u(p):yt(p)?e.attempt(VB,l,u)(p):(e.enter("codeFlowValue"),c(p))}function c(p){return p===null||yt(p)?(e.exit("codeFlowValue"),l(p)):(e.consume(p),c)}function u(p){return e.exit("codeIndented"),t(p)}}function UB(e,t,n){const s=this;return a;function a(l){return s.parser.lazy[s.now().line]?n(l):yt(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),a):Qt(e,i,"linePrefix",5)(l)}function i(l){const c=s.events[s.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?t(l):yt(l)?a(l):n(l)}}const WB={name:"codeText",previous:qB,resolve:KB,tokenize:GB};function KB(e){let t=e.length-4,n=3,s,a;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(s=n;++s<t;)if(e[s][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(s=n-1,t++;++s<=t;)a===void 0?s!==t&&e[s][1].type!=="lineEnding"&&(a=s):(s===t||e[s][1].type==="lineEnding")&&(e[a][1].type="codeTextData",s!==a+2&&(e[a][1].end=e[s-1][1].end,e.splice(a+2,s-a-2),t-=s-a-2,s=a+2),a=void 0);return e}function qB(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function GB(e,t,n){let s=0,a,i;return l;function l(f){return e.enter("codeText"),e.enter("codeTextSequence"),c(f)}function c(f){return f===96?(e.consume(f),s++,c):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(i=e.enter("codeTextSequence"),a=0,h(f)):yt(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),p(f))}function p(f){return f===null||f===32||f===96||yt(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),p)}function h(f){return f===96?(e.consume(f),a++,h):a===s?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(i.type="codeTextData",p(f))}}class YB{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const s=n??Number.POSITIVE_INFINITY;return s<this.left.length?this.left.slice(t,s):t>this.left.length?this.right.slice(this.right.length-s+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-s+this.left.length).reverse())}splice(t,n,s){const a=n||0;this.setCursor(Math.trunc(t));const i=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return s&&nl(this.left,s),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),nl(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),nl(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);nl(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);nl(this.left,n.reverse())}}}function nl(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function mk(e){const t={};let n=-1,s,a,i,l,c,u,p;const h=new YB(e);for(;++n<h.length;){for(;n in t;)n=t[n];if(s=h.get(n),n&&s[1].type==="chunkFlow"&&h.get(n-1)[1].type==="listItemPrefix"&&(u=s[1]._tokenizer.events,i=0,i<u.length&&u[i][1].type==="lineEndingBlank"&&(i+=2),i<u.length&&u[i][1].type==="content"))for(;++i<u.length&&u[i][1].type!=="content";)u[i][1].type==="chunkText"&&(u[i][1]._isInFirstContentOfListItem=!0,i++);if(s[0]==="enter")s[1].contentType&&(Object.assign(t,ZB(h,n)),n=t[n],p=!0);else if(s[1]._container){for(i=n,a=void 0;i--;)if(l=h.get(i),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(a&&(h.get(a)[1].type="lineEndingBlank"),l[1].type="lineEnding",a=i);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;a&&(s[1].end={...h.get(a)[1].start},c=h.slice(a,n),c.unshift(s),h.splice(a,n-a+1,c))}}return ys(e,0,Number.POSITIVE_INFINITY,h.slice(0)),!p}function ZB(e,t){const n=e.get(t)[1],s=e.get(t)[2];let a=t-1;const i=[];let l=n._tokenizer;l||(l=s.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const c=l.events,u=[],p={};let h,f,m=-1,g=n,y=0,b=0;const S=[b];for(;g;){for(;e.get(++a)[1]!==g;);i.push(a),g._tokenizer||(h=s.sliceStream(g),g.next||h.push(null),f&&l.defineSkip(g.start),g._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(h),g._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),f=g,g=g.next}for(g=n;++m<c.length;)c[m][0]==="exit"&&c[m-1][0]==="enter"&&c[m][1].type===c[m-1][1].type&&c[m][1].start.line!==c[m][1].end.line&&(b=m+1,S.push(b),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(l.events=[],g?(g._tokenizer=void 0,g.previous=void 0):S.pop(),m=S.length;m--;){const v=c.slice(S[m],S[m+1]),N=i.pop();u.push([N,N+v.length-1]),e.splice(N,2,v)}for(u.reverse(),m=-1;++m<u.length;)p[y+u[m][0]]=y+u[m][1],y+=u[m][1]-u[m][0]-1;return p}const QB={resolve:JB,tokenize:ez},XB={partial:!0,tokenize:tz};function JB(e){return mk(e),e}function ez(e,t){let n;return s;function s(c){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),a(c)}function a(c){return c===null?i(c):yt(c)?e.check(XB,l,i)(c):(e.consume(c),a)}function i(c){return e.exit("chunkContent"),e.exit("content"),t(c)}function l(c){return e.consume(c),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,a}}function tz(e,t,n){const s=this;return a;function a(l){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Qt(e,i,"linePrefix")}function i(l){if(l===null||yt(l))return n(l);const c=s.events[s.events.length-1];return!s.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?t(l):e.interrupt(s.parser.constructs.flow,n,t)(l)}}function xk(e,t,n,s,a,i,l,c,u){const p=u||Number.POSITIVE_INFINITY;let h=0;return f;function f(v){return v===60?(e.enter(s),e.enter(a),e.enter(i),e.consume(v),e.exit(i),m):v===null||v===32||v===41||qp(v)?n(v):(e.enter(s),e.enter(l),e.enter(c),e.enter("chunkString",{contentType:"string"}),b(v))}function m(v){return v===62?(e.enter(i),e.consume(v),e.exit(i),e.exit(a),e.exit(s),t):(e.enter(c),e.enter("chunkString",{contentType:"string"}),g(v))}function g(v){return v===62?(e.exit("chunkString"),e.exit(c),m(v)):v===null||v===60||yt(v)?n(v):(e.consume(v),v===92?y:g)}function y(v){return v===60||v===62||v===92?(e.consume(v),g):g(v)}function b(v){return!h&&(v===null||v===41||ur(v))?(e.exit("chunkString"),e.exit(c),e.exit(l),e.exit(s),t(v)):h<p&&v===40?(e.consume(v),h++,b):v===41?(e.consume(v),h--,b):v===null||v===32||v===40||qp(v)?n(v):(e.consume(v),v===92?S:b)}function S(v){return v===40||v===41||v===92?(e.consume(v),b):b(v)}}function gk(e,t,n,s,a,i){const l=this;let c=0,u;return p;function p(g){return e.enter(s),e.enter(a),e.consume(g),e.exit(a),e.enter(i),h}function h(g){return c>999||g===null||g===91||g===93&&!u||g===94&&!c&&"_hiddenFootnoteSupport"in l.parser.constructs?n(g):g===93?(e.exit(i),e.enter(a),e.consume(g),e.exit(a),e.exit(s),t):yt(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),h):(e.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===null||g===91||g===93||yt(g)||c++>999?(e.exit("chunkString"),h(g)):(e.consume(g),u||(u=!Bt(g)),g===92?m:f)}function m(g){return g===91||g===92||g===93?(e.consume(g),c++,f):f(g)}}function bk(e,t,n,s,a,i){let l;return c;function c(m){return m===34||m===39||m===40?(e.enter(s),e.enter(a),e.consume(m),e.exit(a),l=m===40?41:m,u):n(m)}function u(m){return m===l?(e.enter(a),e.consume(m),e.exit(a),e.exit(s),t):(e.enter(i),p(m))}function p(m){return m===l?(e.exit(i),u(l)):m===null?n(m):yt(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),Qt(e,p,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),h(m))}function h(m){return m===l||m===null||yt(m)?(e.exit("chunkString"),p(m)):(e.consume(m),m===92?f:h)}function f(m){return m===l||m===92?(e.consume(m),h):h(m)}}function pl(e,t){let n;return s;function s(a){return yt(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n=!0,s):Bt(a)?Qt(e,s,n?"linePrefix":"lineSuffix")(a):t(a)}}const nz={name:"definition",tokenize:sz},rz={partial:!0,tokenize:az};function sz(e,t,n){const s=this;let a;return i;function i(g){return e.enter("definition"),l(g)}function l(g){return gk.call(s,e,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function c(g){return a=Xi(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)),g===58?(e.enter("definitionMarker"),e.consume(g),e.exit("definitionMarker"),u):n(g)}function u(g){return ur(g)?pl(e,p)(g):p(g)}function p(g){return xk(e,h,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function h(g){return e.attempt(rz,f,f)(g)}function f(g){return Bt(g)?Qt(e,m,"whitespace")(g):m(g)}function m(g){return g===null||yt(g)?(e.exit("definition"),s.parser.defined.push(a),t(g)):n(g)}}function az(e,t,n){return s;function s(c){return ur(c)?pl(e,a)(c):n(c)}function a(c){return bk(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function i(c){return Bt(c)?Qt(e,l,"whitespace")(c):l(c)}function l(c){return c===null||yt(c)?t(c):n(c)}}const iz={name:"hardBreakEscape",tokenize:oz};function oz(e,t,n){return s;function s(i){return e.enter("hardBreakEscape"),e.consume(i),a}function a(i){return yt(i)?(e.exit("hardBreakEscape"),t(i)):n(i)}}const lz={name:"headingAtx",resolve:cz,tokenize:dz};function cz(e,t){let n=e.length-2,s=3,a,i;return e[s][1].type==="whitespace"&&(s+=2),n-2>s&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(s===n-1||n-4>s&&e[n-2][1].type==="whitespace")&&(n-=s+1===n?2:4),n>s&&(a={type:"atxHeadingText",start:e[s][1].start,end:e[n][1].end},i={type:"chunkText",start:e[s][1].start,end:e[n][1].end,contentType:"text"},ys(e,s,n-s+1,[["enter",a,t],["enter",i,t],["exit",i,t],["exit",a,t]])),e}function dz(e,t,n){let s=0;return a;function a(h){return e.enter("atxHeading"),i(h)}function i(h){return e.enter("atxHeadingSequence"),l(h)}function l(h){return h===35&&s++<6?(e.consume(h),l):h===null||ur(h)?(e.exit("atxHeadingSequence"),c(h)):n(h)}function c(h){return h===35?(e.enter("atxHeadingSequence"),u(h)):h===null||yt(h)?(e.exit("atxHeading"),t(h)):Bt(h)?Qt(e,c,"whitespace")(h):(e.enter("atxHeadingText"),p(h))}function u(h){return h===35?(e.consume(h),u):(e.exit("atxHeadingSequence"),c(h))}function p(h){return h===null||h===35||ur(h)?(e.exit("atxHeadingText"),c(h)):(e.consume(h),p)}}const uz=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],My=["pre","script","style","textarea"],fz={concrete:!0,name:"htmlFlow",resolveTo:mz,tokenize:xz},hz={partial:!0,tokenize:bz},pz={partial:!0,tokenize:gz};function mz(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function xz(e,t,n){const s=this;let a,i,l,c,u;return p;function p(H){return h(H)}function h(H){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(H),f}function f(H){return H===33?(e.consume(H),m):H===47?(e.consume(H),i=!0,b):H===63?(e.consume(H),a=3,s.interrupt?t:O):ds(H)?(e.consume(H),l=String.fromCharCode(H),S):n(H)}function m(H){return H===45?(e.consume(H),a=2,g):H===91?(e.consume(H),a=5,c=0,y):ds(H)?(e.consume(H),a=4,s.interrupt?t:O):n(H)}function g(H){return H===45?(e.consume(H),s.interrupt?t:O):n(H)}function y(H){const ee="CDATA[";return H===ee.charCodeAt(c++)?(e.consume(H),c===ee.length?s.interrupt?t:T:y):n(H)}function b(H){return ds(H)?(e.consume(H),l=String.fromCharCode(H),S):n(H)}function S(H){if(H===null||H===47||H===62||ur(H)){const ee=H===47,Y=l.toLowerCase();return!ee&&!i&&My.includes(Y)?(a=1,s.interrupt?t(H):T(H)):uz.includes(l.toLowerCase())?(a=6,ee?(e.consume(H),v):s.interrupt?t(H):T(H)):(a=7,s.interrupt&&!s.parser.lazy[s.now().line]?n(H):i?N(H):C(H))}return H===45||yr(H)?(e.consume(H),l+=String.fromCharCode(H),S):n(H)}function v(H){return H===62?(e.consume(H),s.interrupt?t:T):n(H)}function N(H){return Bt(H)?(e.consume(H),N):U(H)}function C(H){return H===47?(e.consume(H),U):H===58||H===95||ds(H)?(e.consume(H),_):Bt(H)?(e.consume(H),C):U(H)}function _(H){return H===45||H===46||H===58||H===95||yr(H)?(e.consume(H),_):R(H)}function R(H){return H===61?(e.consume(H),D):Bt(H)?(e.consume(H),R):C(H)}function D(H){return H===null||H===60||H===61||H===62||H===96?n(H):H===34||H===39?(e.consume(H),u=H,V):Bt(H)?(e.consume(H),D):I(H)}function V(H){return H===u?(e.consume(H),u=null,A):H===null||yt(H)?n(H):(e.consume(H),V)}function I(H){return H===null||H===34||H===39||H===47||H===60||H===61||H===62||H===96||ur(H)?R(H):(e.consume(H),I)}function A(H){return H===47||H===62||Bt(H)?C(H):n(H)}function U(H){return H===62?(e.consume(H),W):n(H)}function W(H){return H===null||yt(H)?T(H):Bt(H)?(e.consume(H),W):n(H)}function T(H){return H===45&&a===2?(e.consume(H),L):H===60&&a===1?(e.consume(H),B):H===62&&a===4?(e.consume(H),$):H===63&&a===3?(e.consume(H),O):H===93&&a===5?(e.consume(H),G):yt(H)&&(a===6||a===7)?(e.exit("htmlFlowData"),e.check(hz,K,M)(H)):H===null||yt(H)?(e.exit("htmlFlowData"),M(H)):(e.consume(H),T)}function M(H){return e.check(pz,j,K)(H)}function j(H){return e.enter("lineEnding"),e.consume(H),e.exit("lineEnding"),P}function P(H){return H===null||yt(H)?M(H):(e.enter("htmlFlowData"),T(H))}function L(H){return H===45?(e.consume(H),O):T(H)}function B(H){return H===47?(e.consume(H),l="",q):T(H)}function q(H){if(H===62){const ee=l.toLowerCase();return My.includes(ee)?(e.consume(H),$):T(H)}return ds(H)&&l.length<8?(e.consume(H),l+=String.fromCharCode(H),q):T(H)}function G(H){return H===93?(e.consume(H),O):T(H)}function O(H){return H===62?(e.consume(H),$):H===45&&a===2?(e.consume(H),O):T(H)}function $(H){return H===null||yt(H)?(e.exit("htmlFlowData"),K(H)):(e.consume(H),$)}function K(H){return e.exit("htmlFlow"),t(H)}}function gz(e,t,n){const s=this;return a;function a(l){return yt(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),i):n(l)}function i(l){return s.parser.lazy[s.now().line]?n(l):t(l)}}function bz(e,t,n){return s;function s(a){return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),e.attempt(bu,t,n)}}const yz={name:"htmlText",tokenize:vz};function vz(e,t,n){const s=this;let a,i,l;return c;function c(O){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(O),u}function u(O){return O===33?(e.consume(O),p):O===47?(e.consume(O),R):O===63?(e.consume(O),C):ds(O)?(e.consume(O),I):n(O)}function p(O){return O===45?(e.consume(O),h):O===91?(e.consume(O),i=0,y):ds(O)?(e.consume(O),N):n(O)}function h(O){return O===45?(e.consume(O),g):n(O)}function f(O){return O===null?n(O):O===45?(e.consume(O),m):yt(O)?(l=f,B(O)):(e.consume(O),f)}function m(O){return O===45?(e.consume(O),g):f(O)}function g(O){return O===62?L(O):O===45?m(O):f(O)}function y(O){const $="CDATA[";return O===$.charCodeAt(i++)?(e.consume(O),i===$.length?b:y):n(O)}function b(O){return O===null?n(O):O===93?(e.consume(O),S):yt(O)?(l=b,B(O)):(e.consume(O),b)}function S(O){return O===93?(e.consume(O),v):b(O)}function v(O){return O===62?L(O):O===93?(e.consume(O),v):b(O)}function N(O){return O===null||O===62?L(O):yt(O)?(l=N,B(O)):(e.consume(O),N)}function C(O){return O===null?n(O):O===63?(e.consume(O),_):yt(O)?(l=C,B(O)):(e.consume(O),C)}function _(O){return O===62?L(O):C(O)}function R(O){return ds(O)?(e.consume(O),D):n(O)}function D(O){return O===45||yr(O)?(e.consume(O),D):V(O)}function V(O){return yt(O)?(l=V,B(O)):Bt(O)?(e.consume(O),V):L(O)}function I(O){return O===45||yr(O)?(e.consume(O),I):O===47||O===62||ur(O)?A(O):n(O)}function A(O){return O===47?(e.consume(O),L):O===58||O===95||ds(O)?(e.consume(O),U):yt(O)?(l=A,B(O)):Bt(O)?(e.consume(O),A):L(O)}function U(O){return O===45||O===46||O===58||O===95||yr(O)?(e.consume(O),U):W(O)}function W(O){return O===61?(e.consume(O),T):yt(O)?(l=W,B(O)):Bt(O)?(e.consume(O),W):A(O)}function T(O){return O===null||O===60||O===61||O===62||O===96?n(O):O===34||O===39?(e.consume(O),a=O,M):yt(O)?(l=T,B(O)):Bt(O)?(e.consume(O),T):(e.consume(O),j)}function M(O){return O===a?(e.consume(O),a=void 0,P):O===null?n(O):yt(O)?(l=M,B(O)):(e.consume(O),M)}function j(O){return O===null||O===34||O===39||O===60||O===61||O===96?n(O):O===47||O===62||ur(O)?A(O):(e.consume(O),j)}function P(O){return O===47||O===62||ur(O)?A(O):n(O)}function L(O){return O===62?(e.consume(O),e.exit("htmlTextData"),e.exit("htmlText"),t):n(O)}function B(O){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(O),e.exit("lineEnding"),q}function q(O){return Bt(O)?Qt(e,G,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(O):G(O)}function G(O){return e.enter("htmlTextData"),l(O)}}const w0={name:"labelEnd",resolveAll:jz,resolveTo:Cz,tokenize:Nz},wz={tokenize:_z},kz={tokenize:Az},Sz={tokenize:Ez};function jz(e){let t=-1;const n=[];for(;++t<e.length;){const s=e[t][1];if(n.push(e[t]),s.type==="labelImage"||s.type==="labelLink"||s.type==="labelEnd"){const a=s.type==="labelImage"?4:2;s.type="data",t+=a}}return e.length!==n.length&&ys(e,0,e.length,n),e}function Cz(e,t){let n=e.length,s=0,a,i,l,c;for(;n--;)if(a=e[n][1],i){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[n][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(l){if(e[n][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(i=n,a.type!=="labelLink")){s=2;break}}else a.type==="labelEnd"&&(l=n);const u={type:e[i][1].type==="labelLink"?"link":"image",start:{...e[i][1].start},end:{...e[e.length-1][1].end}},p={type:"label",start:{...e[i][1].start},end:{...e[l][1].end}},h={type:"labelText",start:{...e[i+s+2][1].end},end:{...e[l-2][1].start}};return c=[["enter",u,t],["enter",p,t]],c=Dr(c,e.slice(i+1,i+s+3)),c=Dr(c,[["enter",h,t]]),c=Dr(c,v0(t.parser.constructs.insideSpan.null,e.slice(i+s+4,l-3),t)),c=Dr(c,[["exit",h,t],e[l-2],e[l-1],["exit",p,t]]),c=Dr(c,e.slice(l+1)),c=Dr(c,[["exit",u,t]]),ys(e,i,e.length,c),e}function Nz(e,t,n){const s=this;let a=s.events.length,i,l;for(;a--;)if((s.events[a][1].type==="labelImage"||s.events[a][1].type==="labelLink")&&!s.events[a][1]._balanced){i=s.events[a][1];break}return c;function c(m){return i?i._inactive?f(m):(l=s.parser.defined.includes(Xi(s.sliceSerialize({start:i.end,end:s.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(m),e.exit("labelMarker"),e.exit("labelEnd"),u):n(m)}function u(m){return m===40?e.attempt(wz,h,l?h:f)(m):m===91?e.attempt(kz,h,l?p:f)(m):l?h(m):f(m)}function p(m){return e.attempt(Sz,h,f)(m)}function h(m){return t(m)}function f(m){return i._balanced=!0,n(m)}}function _z(e,t,n){return s;function s(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),a}function a(f){return ur(f)?pl(e,i)(f):i(f)}function i(f){return f===41?h(f):xk(e,l,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function l(f){return ur(f)?pl(e,u)(f):h(f)}function c(f){return n(f)}function u(f){return f===34||f===39||f===40?bk(e,p,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):h(f)}function p(f){return ur(f)?pl(e,h)(f):h(f)}function h(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function Az(e,t,n){const s=this;return a;function a(c){return gk.call(s,e,i,l,"reference","referenceMarker","referenceString")(c)}function i(c){return s.parser.defined.includes(Xi(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)))?t(c):n(c)}function l(c){return n(c)}}function Ez(e,t,n){return s;function s(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),a}function a(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):n(i)}}const Tz={name:"labelStartImage",resolveAll:w0.resolveAll,tokenize:Dz};function Dz(e,t,n){const s=this;return a;function a(c){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(c),e.exit("labelImageMarker"),i}function i(c){return c===91?(e.enter("labelMarker"),e.consume(c),e.exit("labelMarker"),e.exit("labelImage"),l):n(c)}function l(c){return c===94&&"_hiddenFootnoteSupport"in s.parser.constructs?n(c):t(c)}}const Iz={name:"labelStartLink",resolveAll:w0.resolveAll,tokenize:Pz};function Pz(e,t,n){const s=this;return a;function a(l){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelLink"),i}function i(l){return l===94&&"_hiddenFootnoteSupport"in s.parser.constructs?n(l):t(l)}}const Uh={name:"lineEnding",tokenize:Mz};function Mz(e,t){return n;function n(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),Qt(e,t,"linePrefix")}}const Sd={name:"thematicBreak",tokenize:Fz};function Fz(e,t,n){let s=0,a;return i;function i(p){return e.enter("thematicBreak"),l(p)}function l(p){return a=p,c(p)}function c(p){return p===a?(e.enter("thematicBreakSequence"),u(p)):s>=3&&(p===null||yt(p))?(e.exit("thematicBreak"),t(p)):n(p)}function u(p){return p===a?(e.consume(p),s++,u):(e.exit("thematicBreakSequence"),Bt(p)?Qt(e,c,"whitespace")(p):c(p))}}const ir={continuation:{tokenize:Lz},exit:$z,name:"list",tokenize:zz},Rz={partial:!0,tokenize:Vz},Bz={partial:!0,tokenize:Oz};function zz(e,t,n){const s=this,a=s.events[s.events.length-1];let i=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,l=0;return c;function c(g){const y=s.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(y==="listUnordered"?!s.containerState.marker||g===s.containerState.marker:Gp(g)){if(s.containerState.type||(s.containerState.type=y,e.enter(y,{_container:!0})),y==="listUnordered")return e.enter("listItemPrefix"),g===42||g===45?e.check(Sd,n,p)(g):p(g);if(!s.interrupt||g===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(g)}return n(g)}function u(g){return Gp(g)&&++l<10?(e.consume(g),u):(!s.interrupt||l<2)&&(s.containerState.marker?g===s.containerState.marker:g===41||g===46)?(e.exit("listItemValue"),p(g)):n(g)}function p(g){return e.enter("listItemMarker"),e.consume(g),e.exit("listItemMarker"),s.containerState.marker=s.containerState.marker||g,e.check(bu,s.interrupt?n:h,e.attempt(Rz,m,f))}function h(g){return s.containerState.initialBlankLine=!0,i++,m(g)}function f(g){return Bt(g)?(e.enter("listItemPrefixWhitespace"),e.consume(g),e.exit("listItemPrefixWhitespace"),m):n(g)}function m(g){return s.containerState.size=i+s.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(g)}}function Lz(e,t,n){const s=this;return s.containerState._closeFlow=void 0,e.check(bu,a,i);function a(c){return s.containerState.furtherBlankLines=s.containerState.furtherBlankLines||s.containerState.initialBlankLine,Qt(e,t,"listItemIndent",s.containerState.size+1)(c)}function i(c){return s.containerState.furtherBlankLines||!Bt(c)?(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,l(c)):(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,e.attempt(Bz,t,l)(c))}function l(c){return s.containerState._closeFlow=!0,s.interrupt=void 0,Qt(e,e.attempt(ir,t,n),"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function Oz(e,t,n){const s=this;return Qt(e,a,"listItemIndent",s.containerState.size+1);function a(i){const l=s.events[s.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===s.containerState.size?t(i):n(i)}}function $z(e){e.exit(this.containerState.type)}function Vz(e,t,n){const s=this;return Qt(e,a,"listItemPrefixWhitespace",s.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(i){const l=s.events[s.events.length-1];return!Bt(i)&&l&&l[1].type==="listItemPrefixWhitespace"?t(i):n(i)}}const Fy={name:"setextUnderline",resolveTo:Hz,tokenize:Uz};function Hz(e,t){let n=e.length,s,a,i;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){s=n;break}e[n][1].type==="paragraph"&&(a=n)}else e[n][1].type==="content"&&e.splice(n,1),!i&&e[n][1].type==="definition"&&(i=n);const l={type:"setextHeading",start:{...e[s][1].start},end:{...e[e.length-1][1].end}};return e[a][1].type="setextHeadingText",i?(e.splice(a,0,["enter",l,t]),e.splice(i+1,0,["exit",e[s][1],t]),e[s][1].end={...e[i][1].end}):e[s][1]=l,e.push(["exit",l,t]),e}function Uz(e,t,n){const s=this;let a;return i;function i(p){let h=s.events.length,f;for(;h--;)if(s.events[h][1].type!=="lineEnding"&&s.events[h][1].type!=="linePrefix"&&s.events[h][1].type!=="content"){f=s.events[h][1].type==="paragraph";break}return!s.parser.lazy[s.now().line]&&(s.interrupt||f)?(e.enter("setextHeadingLine"),a=p,l(p)):n(p)}function l(p){return e.enter("setextHeadingLineSequence"),c(p)}function c(p){return p===a?(e.consume(p),c):(e.exit("setextHeadingLineSequence"),Bt(p)?Qt(e,u,"lineSuffix")(p):u(p))}function u(p){return p===null||yt(p)?(e.exit("setextHeadingLine"),t(p)):n(p)}}const Wz={tokenize:Kz};function Kz(e){const t=this,n=e.attempt(bu,s,e.attempt(this.parser.constructs.flowInitial,a,Qt(e,e.attempt(this.parser.constructs.flow,a,e.attempt(QB,a)),"linePrefix")));return n;function s(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function a(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const qz={resolveAll:vk()},Gz=yk("string"),Yz=yk("text");function yk(e){return{resolveAll:vk(e==="text"?Zz:void 0),tokenize:t};function t(n){const s=this,a=this.parser.constructs[e],i=n.attempt(a,l,c);return l;function l(h){return p(h)?i(h):c(h)}function c(h){if(h===null){n.consume(h);return}return n.enter("data"),n.consume(h),u}function u(h){return p(h)?(n.exit("data"),i(h)):(n.consume(h),u)}function p(h){if(h===null)return!0;const f=a[h];let m=-1;if(f)for(;++m<f.length;){const g=f[m];if(!g.previous||g.previous.call(s,s.previous))return!0}return!1}}}function vk(e){return t;function t(n,s){let a=-1,i;for(;++a<=n.length;)i===void 0?n[a]&&n[a][1].type==="data"&&(i=a,a++):(!n[a]||n[a][1].type!=="data")&&(a!==i+2&&(n[i][1].end=n[a-1][1].end,n.splice(i+2,a-i-2),a=i+2),i=void 0);return e?e(n,s):n}}function Zz(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const s=e[n-1][1],a=t.sliceStream(s);let i=a.length,l=-1,c=0,u;for(;i--;){const p=a[i];if(typeof p=="string"){for(l=p.length;p.charCodeAt(l-1)===32;)c++,l--;if(l)break;l=-1}else if(p===-2)u=!0,c++;else if(p!==-1){i++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(c=0),c){const p={type:n===e.length||u||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?l:s.start._bufferIndex+l,_index:s.start._index+i,line:s.end.line,column:s.end.column-c,offset:s.end.offset-c},end:{...s.end}};s.end={...p.start},s.start.offset===s.end.offset?Object.assign(s,p):(e.splice(n,0,["enter",p,t],["exit",p,t]),n+=2)}n++}return e}const Qz={42:ir,43:ir,45:ir,48:ir,49:ir,50:ir,51:ir,52:ir,53:ir,54:ir,55:ir,56:ir,57:ir,62:fk},Xz={91:nz},Jz={[-2]:Hh,[-1]:Hh,32:Hh},eL={35:lz,42:Sd,45:[Fy,Sd],60:fz,61:Fy,95:Sd,96:Py,126:Py},tL={38:pk,92:hk},nL={[-5]:Uh,[-4]:Uh,[-3]:Uh,33:Tz,38:pk,42:Yp,60:[IB,yz],91:Iz,92:[iz,hk],93:w0,95:Yp,96:WB},rL={null:[Yp,qz]},sL={null:[42,95]},aL={null:[]},iL=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:sL,contentInitial:Xz,disable:aL,document:Qz,flow:eL,flowInitial:Jz,insideSpan:rL,string:tL,text:nL},Symbol.toStringTag,{value:"Module"}));function oL(e,t,n){let s={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const a={},i=[];let l=[],c=[];const u={attempt:V(R),check:V(D),consume:N,enter:C,exit:_,interrupt:V(D,{interrupt:!0})},p={code:null,containerState:{},defineSkip:b,events:[],now:y,parser:e,previous:null,sliceSerialize:m,sliceStream:g,write:f};let h=t.tokenize.call(p,u);return t.resolveAll&&i.push(t),p;function f(W){return l=Dr(l,W),S(),l[l.length-1]!==null?[]:(I(t,0),p.events=v0(i,p.events,p),p.events)}function m(W,T){return cL(g(W),T)}function g(W){return lL(l,W)}function y(){const{_bufferIndex:W,_index:T,line:M,column:j,offset:P}=s;return{_bufferIndex:W,_index:T,line:M,column:j,offset:P}}function b(W){a[W.line]=W.column,U()}function S(){let W;for(;s._index<l.length;){const T=l[s._index];if(typeof T=="string")for(W=s._index,s._bufferIndex<0&&(s._bufferIndex=0);s._index===W&&s._bufferIndex<T.length;)v(T.charCodeAt(s._bufferIndex));else v(T)}}function v(W){h=h(W)}function N(W){yt(W)?(s.line++,s.column=1,s.offset+=W===-3?2:1,U()):W!==-1&&(s.column++,s.offset++),s._bufferIndex<0?s._index++:(s._bufferIndex++,s._bufferIndex===l[s._index].length&&(s._bufferIndex=-1,s._index++)),p.previous=W}function C(W,T){const M=T||{};return M.type=W,M.start=y(),p.events.push(["enter",M,p]),c.push(M),M}function _(W){const T=c.pop();return T.end=y(),p.events.push(["exit",T,p]),T}function R(W,T){I(W,T.from)}function D(W,T){T.restore()}function V(W,T){return M;function M(j,P,L){let B,q,G,O;return Array.isArray(j)?K(j):"tokenize"in j?K([j]):$(j);function $(re){return de;function de(X){const oe=X!==null&&re[X],ye=X!==null&&re.null,be=[...Array.isArray(oe)?oe:oe?[oe]:[],...Array.isArray(ye)?ye:ye?[ye]:[]];return K(be)(X)}}function K(re){return B=re,q=0,re.length===0?L:H(re[q])}function H(re){return de;function de(X){return O=A(),G=re,re.partial||(p.currentConstruct=re),re.name&&p.parser.constructs.disable.null.includes(re.name)?Y():re.tokenize.call(T?Object.assign(Object.create(p),T):p,u,ee,Y)(X)}}function ee(re){return W(G,O),P}function Y(re){return O.restore(),++q<B.length?H(B[q]):L}}}function I(W,T){W.resolveAll&&!i.includes(W)&&i.push(W),W.resolve&&ys(p.events,T,p.events.length-T,W.resolve(p.events.slice(T),p)),W.resolveTo&&(p.events=W.resolveTo(p.events,p))}function A(){const W=y(),T=p.previous,M=p.currentConstruct,j=p.events.length,P=Array.from(c);return{from:j,restore:L};function L(){s=W,p.previous=T,p.currentConstruct=M,p.events.length=j,c=P,U()}}function U(){s.line in a&&s.column<2&&(s.column=a[s.line],s.offset+=a[s.line]-1)}}function lL(e,t){const n=t.start._index,s=t.start._bufferIndex,a=t.end._index,i=t.end._bufferIndex;let l;if(n===a)l=[e[n].slice(s,i)];else{if(l=e.slice(n,a),s>-1){const c=l[0];typeof c=="string"?l[0]=c.slice(s):l.shift()}i>0&&l.push(e[a].slice(0,i))}return l}function cL(e,t){let n=-1;const s=[];let a;for(;++n<e.length;){const i=e[n];let l;if(typeof i=="string")l=i;else switch(i){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=t?" ":"	";break}case-1:{if(!t&&a)continue;l=" ";break}default:l=String.fromCharCode(i)}a=i===-2,s.push(l)}return s.join("")}function dL(e){const s={constructs:gB([iL,...(e||{}).extensions||[]]),content:a(CB),defined:[],document:a(_B),flow:a(Wz),lazy:{},string:a(Gz),text:a(Yz)};return s;function a(i){return l;function l(c){return oL(s,i,c)}}}function uL(e){for(;!mk(e););return e}const Ry=/[\0\t\n\r]/g;function fL(){let e=1,t="",n=!0,s;return a;function a(i,l,c){const u=[];let p,h,f,m,g;for(i=t+(typeof i=="string"?i.toString():new TextDecoder(l||void 0).decode(i)),f=0,t="",n&&(i.charCodeAt(0)===65279&&f++,n=void 0);f<i.length;){if(Ry.lastIndex=f,p=Ry.exec(i),m=p&&p.index!==void 0?p.index:i.length,g=i.charCodeAt(m),!p){t=i.slice(f);break}if(g===10&&f===m&&s)u.push(-3),s=void 0;else switch(s&&(u.push(-5),s=void 0),f<m&&(u.push(i.slice(f,m)),e+=m-f),g){case 0:{u.push(65533),e++;break}case 9:{for(h=Math.ceil(e/4)*4,u.push(-2);e++<h;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:s=!0,e=1}f=m+1}return c&&(s&&u.push(-5),t&&u.push(t),u.push(null)),u}}const hL=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function pL(e){return e.replace(hL,mL)}function mL(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const a=n.charCodeAt(1),i=a===120||a===88;return uk(n.slice(i?2:1),i?16:10)}return y0(n)||e}const wk={}.hasOwnProperty;function xL(e,t,n){return typeof t!="string"&&(n=t,t=void 0),gL(n)(uL(dL(n).document().write(fL()(e,t,!0))))}function gL(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(ae),autolinkProtocol:A,autolinkEmail:A,atxHeading:i(le),blockQuote:i(ye),characterEscape:A,characterReference:A,codeFenced:i(be),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:i(be,l),codeText:i(Ie,l),codeTextData:A,data:A,codeFlowValue:A,definition:i(De),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:i(F),hardBreakEscape:i(Z),hardBreakTrailing:i(Z),htmlFlow:i(te,l),htmlFlowData:A,htmlText:i(te,l),htmlTextData:A,image:i(ne),label:l,link:i(ae),listItem:i(Ce),listItemValue:m,listOrdered:i(we,f),listUnordered:i(we),paragraph:i(ue),reference:H,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:i(le),strong:i(pe),thematicBreak:i(Ne)},exit:{atxHeading:u(),atxHeadingSequence:R,autolink:u(),autolinkEmail:oe,autolinkProtocol:X,blockQuote:u(),characterEscapeValue:U,characterReferenceMarkerHexadecimal:Y,characterReferenceMarkerNumeric:Y,characterReferenceValue:re,characterReference:de,codeFenced:u(S),codeFencedFence:b,codeFencedFenceInfo:g,codeFencedFenceMeta:y,codeFlowValue:U,codeIndented:u(v),codeText:u(P),codeTextData:U,data:U,definition:u(),definitionDestinationString:_,definitionLabelString:N,definitionTitleString:C,emphasis:u(),hardBreakEscape:u(T),hardBreakTrailing:u(T),htmlFlow:u(M),htmlFlowData:U,htmlText:u(j),htmlTextData:U,image:u(B),label:G,labelText:q,lineEnding:W,link:u(L),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:ee,resourceDestinationString:O,resourceTitleString:$,resource:K,setextHeading:u(I),setextHeadingLineSequence:V,setextHeadingText:D,strong:u(),thematicBreak:u()}};kk(t,(e||{}).mdastExtensions||[]);const n={};return s;function s(he){let Ee={type:"root",children:[]};const Re={stack:[Ee],tokenStack:[],config:t,enter:c,exit:p,buffer:l,resume:h,data:n},qe=[];let Ye=-1;for(;++Ye<he.length;)if(he[Ye][1].type==="listOrdered"||he[Ye][1].type==="listUnordered")if(he[Ye][0]==="enter")qe.push(Ye);else{const nt=qe.pop();Ye=a(he,nt,Ye)}for(Ye=-1;++Ye<he.length;){const nt=t[he[Ye][0]];wk.call(nt,he[Ye][1].type)&&nt[he[Ye][1].type].call(Object.assign({sliceSerialize:he[Ye][2].sliceSerialize},Re),he[Ye][1])}if(Re.tokenStack.length>0){const nt=Re.tokenStack[Re.tokenStack.length-1];(nt[1]||By).call(Re,void 0,nt[0])}for(Ee.position={start:ia(he.length>0?he[0][1].start:{line:1,column:1,offset:0}),end:ia(he.length>0?he[he.length-2][1].end:{line:1,column:1,offset:0})},Ye=-1;++Ye<t.transforms.length;)Ee=t.transforms[Ye](Ee)||Ee;return Ee}function a(he,Ee,Re){let qe=Ee-1,Ye=-1,nt=!1,ce,Te,Me,Oe;for(;++qe<=Re;){const Ke=he[qe];switch(Ke[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ke[0]==="enter"?Ye++:Ye--,Oe=void 0;break}case"lineEndingBlank":{Ke[0]==="enter"&&(ce&&!Oe&&!Ye&&!Me&&(Me=qe),Oe=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Oe=void 0}if(!Ye&&Ke[0]==="enter"&&Ke[1].type==="listItemPrefix"||Ye===-1&&Ke[0]==="exit"&&(Ke[1].type==="listUnordered"||Ke[1].type==="listOrdered")){if(ce){let Ze=qe;for(Te=void 0;Ze--;){const pt=he[Ze];if(pt[1].type==="lineEnding"||pt[1].type==="lineEndingBlank"){if(pt[0]==="exit")continue;Te&&(he[Te][1].type="lineEndingBlank",nt=!0),pt[1].type="lineEnding",Te=Ze}else if(!(pt[1].type==="linePrefix"||pt[1].type==="blockQuotePrefix"||pt[1].type==="blockQuotePrefixWhitespace"||pt[1].type==="blockQuoteMarker"||pt[1].type==="listItemIndent"))break}Me&&(!Te||Me<Te)&&(ce._spread=!0),ce.end=Object.assign({},Te?he[Te][1].start:Ke[1].end),he.splice(Te||qe,0,["exit",ce,Ke[2]]),qe++,Re++}if(Ke[1].type==="listItemPrefix"){const Ze={type:"listItem",_spread:!1,start:Object.assign({},Ke[1].start),end:void 0};ce=Ze,he.splice(qe,0,["enter",Ze,Ke[2]]),qe++,Re++,Me=void 0,Oe=!0}}}return he[Ee][1]._spread=nt,Re}function i(he,Ee){return Re;function Re(qe){c.call(this,he(qe),qe),Ee&&Ee.call(this,qe)}}function l(){this.stack.push({type:"fragment",children:[]})}function c(he,Ee,Re){this.stack[this.stack.length-1].children.push(he),this.stack.push(he),this.tokenStack.push([Ee,Re||void 0]),he.position={start:ia(Ee.start),end:void 0}}function u(he){return Ee;function Ee(Re){he&&he.call(this,Re),p.call(this,Re)}}function p(he,Ee){const Re=this.stack.pop(),qe=this.tokenStack.pop();if(qe)qe[0].type!==he.type&&(Ee?Ee.call(this,he,qe[0]):(qe[1]||By).call(this,he,qe[0]));else throw new Error("Cannot close `"+he.type+"` ("+hl({start:he.start,end:he.end})+"): its not open");Re.position.end=ia(he.end)}function h(){return mB(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function m(he){if(this.data.expectingFirstListItemValue){const Ee=this.stack[this.stack.length-2];Ee.start=Number.parseInt(this.sliceSerialize(he),10),this.data.expectingFirstListItemValue=void 0}}function g(){const he=this.resume(),Ee=this.stack[this.stack.length-1];Ee.lang=he}function y(){const he=this.resume(),Ee=this.stack[this.stack.length-1];Ee.meta=he}function b(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function S(){const he=this.resume(),Ee=this.stack[this.stack.length-1];Ee.value=he.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const he=this.resume(),Ee=this.stack[this.stack.length-1];Ee.value=he.replace(/(\r?\n|\r)$/g,"")}function N(he){const Ee=this.resume(),Re=this.stack[this.stack.length-1];Re.label=Ee,Re.identifier=Xi(this.sliceSerialize(he)).toLowerCase()}function C(){const he=this.resume(),Ee=this.stack[this.stack.length-1];Ee.title=he}function _(){const he=this.resume(),Ee=this.stack[this.stack.length-1];Ee.url=he}function R(he){const Ee=this.stack[this.stack.length-1];if(!Ee.depth){const Re=this.sliceSerialize(he).length;Ee.depth=Re}}function D(){this.data.setextHeadingSlurpLineEnding=!0}function V(he){const Ee=this.stack[this.stack.length-1];Ee.depth=this.sliceSerialize(he).codePointAt(0)===61?1:2}function I(){this.data.setextHeadingSlurpLineEnding=void 0}function A(he){const Re=this.stack[this.stack.length-1].children;let qe=Re[Re.length-1];(!qe||qe.type!=="text")&&(qe=je(),qe.position={start:ia(he.start),end:void 0},Re.push(qe)),this.stack.push(qe)}function U(he){const Ee=this.stack.pop();Ee.value+=this.sliceSerialize(he),Ee.position.end=ia(he.end)}function W(he){const Ee=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Re=Ee.children[Ee.children.length-1];Re.position.end=ia(he.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Ee.type)&&(A.call(this,he),U.call(this,he))}function T(){this.data.atHardBreak=!0}function M(){const he=this.resume(),Ee=this.stack[this.stack.length-1];Ee.value=he}function j(){const he=this.resume(),Ee=this.stack[this.stack.length-1];Ee.value=he}function P(){const he=this.resume(),Ee=this.stack[this.stack.length-1];Ee.value=he}function L(){const he=this.stack[this.stack.length-1];if(this.data.inReference){const Ee=this.data.referenceType||"shortcut";he.type+="Reference",he.referenceType=Ee,delete he.url,delete he.title}else delete he.identifier,delete he.label;this.data.referenceType=void 0}function B(){const he=this.stack[this.stack.length-1];if(this.data.inReference){const Ee=this.data.referenceType||"shortcut";he.type+="Reference",he.referenceType=Ee,delete he.url,delete he.title}else delete he.identifier,delete he.label;this.data.referenceType=void 0}function q(he){const Ee=this.sliceSerialize(he),Re=this.stack[this.stack.length-2];Re.label=pL(Ee),Re.identifier=Xi(Ee).toLowerCase()}function G(){const he=this.stack[this.stack.length-1],Ee=this.resume(),Re=this.stack[this.stack.length-1];if(this.data.inReference=!0,Re.type==="link"){const qe=he.children;Re.children=qe}else Re.alt=Ee}function O(){const he=this.resume(),Ee=this.stack[this.stack.length-1];Ee.url=he}function $(){const he=this.resume(),Ee=this.stack[this.stack.length-1];Ee.title=he}function K(){this.data.inReference=void 0}function H(){this.data.referenceType="collapsed"}function ee(he){const Ee=this.resume(),Re=this.stack[this.stack.length-1];Re.label=Ee,Re.identifier=Xi(this.sliceSerialize(he)).toLowerCase(),this.data.referenceType="full"}function Y(he){this.data.characterReferenceType=he.type}function re(he){const Ee=this.sliceSerialize(he),Re=this.data.characterReferenceType;let qe;Re?(qe=uk(Ee,Re==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):qe=y0(Ee);const Ye=this.stack[this.stack.length-1];Ye.value+=qe}function de(he){const Ee=this.stack.pop();Ee.position.end=ia(he.end)}function X(he){U.call(this,he);const Ee=this.stack[this.stack.length-1];Ee.url=this.sliceSerialize(he)}function oe(he){U.call(this,he);const Ee=this.stack[this.stack.length-1];Ee.url="mailto:"+this.sliceSerialize(he)}function ye(){return{type:"blockquote",children:[]}}function be(){return{type:"code",lang:null,meta:null,value:""}}function Ie(){return{type:"inlineCode",value:""}}function De(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function F(){return{type:"emphasis",children:[]}}function le(){return{type:"heading",depth:0,children:[]}}function Z(){return{type:"break"}}function te(){return{type:"html",value:""}}function ne(){return{type:"image",title:null,url:"",alt:null}}function ae(){return{type:"link",title:null,url:"",children:[]}}function we(he){return{type:"list",ordered:he.type==="listOrdered",start:null,spread:he._spread,children:[]}}function Ce(he){return{type:"listItem",spread:he._spread,checked:null,children:[]}}function ue(){return{type:"paragraph",children:[]}}function pe(){return{type:"strong",children:[]}}function je(){return{type:"text",value:""}}function Ne(){return{type:"thematicBreak"}}}function ia(e){return{line:e.line,column:e.column,offset:e.offset}}function kk(e,t){let n=-1;for(;++n<t.length;){const s=t[n];Array.isArray(s)?kk(e,s):bL(e,s)}}function bL(e,t){let n;for(n in t)if(wk.call(t,n))switch(n){case"canContainEols":{const s=t[n];s&&e[n].push(...s);break}case"transforms":{const s=t[n];s&&e[n].push(...s);break}case"enter":case"exit":{const s=t[n];s&&Object.assign(e[n],s);break}}}function By(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+hl({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+hl({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+hl({start:t.start,end:t.end})+") is still open")}function yL(e){const t=this;t.parser=n;function n(s){return xL(s,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function vL(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function wL(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function kL(e,t){const n=t.value?t.value+`
`:"",s={},a=t.lang?t.lang.split(/\s+/):[];a.length>0&&(s.className=["language-"+a[0]]);let i={type:"element",tagName:"code",properties:s,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function SL(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function jL(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function CL(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",s=String(t.identifier).toUpperCase(),a=bo(s.toLowerCase()),i=e.footnoteOrder.indexOf(s);let l,c=e.footnoteCounts.get(s);c===void 0?(c=0,e.footnoteOrder.push(s),l=e.footnoteOrder.length):l=i+1,c+=1,e.footnoteCounts.set(s,c);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+a,id:n+"fnref-"+a+(c>1?"-"+c:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};e.patch(t,u);const p={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,p),e.applyData(t,p)}function NL(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function _L(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Sk(e,t){const n=t.referenceType;let s="]";if(n==="collapsed"?s+="[]":n==="full"&&(s+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+s}];const a=e.all(t),i=a[0];i&&i.type==="text"?i.value="["+i.value:a.unshift({type:"text",value:"["});const l=a[a.length-1];return l&&l.type==="text"?l.value+=s:a.push({type:"text",value:s}),a}function AL(e,t){const n=String(t.identifier).toUpperCase(),s=e.definitionById.get(n);if(!s)return Sk(e,t);const a={src:bo(s.url||""),alt:t.alt};s.title!==null&&s.title!==void 0&&(a.title=s.title);const i={type:"element",tagName:"img",properties:a,children:[]};return e.patch(t,i),e.applyData(t,i)}function EL(e,t){const n={src:bo(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const s={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,s),e.applyData(t,s)}function TL(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const s={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,s),e.applyData(t,s)}function DL(e,t){const n=String(t.identifier).toUpperCase(),s=e.definitionById.get(n);if(!s)return Sk(e,t);const a={href:bo(s.url||"")};s.title!==null&&s.title!==void 0&&(a.title=s.title);const i={type:"element",tagName:"a",properties:a,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function IL(e,t){const n={href:bo(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const s={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function PL(e,t,n){const s=e.all(t),a=n?ML(n):jk(t),i={},l=[];if(typeof t.checked=="boolean"){const h=s[0];let f;h&&h.type==="element"&&h.tagName==="p"?f=h:(f={type:"element",tagName:"p",properties:{},children:[]},s.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let c=-1;for(;++c<s.length;){const h=s[c];(a||c!==0||h.type!=="element"||h.tagName!=="p")&&l.push({type:"text",value:`
`}),h.type==="element"&&h.tagName==="p"&&!a?l.push(...h.children):l.push(h)}const u=s[s.length-1];u&&(a||u.type!=="element"||u.tagName!=="p")&&l.push({type:"text",value:`
`});const p={type:"element",tagName:"li",properties:i,children:l};return e.patch(t,p),e.applyData(t,p)}function ML(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let s=-1;for(;!t&&++s<n.length;)t=jk(n[s])}return t}function jk(e){const t=e.spread;return t??e.children.length>1}function FL(e,t){const n={},s=e.all(t);let a=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++a<s.length;){const l=s[a];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(s,!0)};return e.patch(t,i),e.applyData(t,i)}function RL(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function BL(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function zL(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function LL(e,t){const n=e.all(t),s=n.shift(),a=[];if(s){const l={type:"element",tagName:"thead",properties:{},children:e.wrap([s],!0)};e.patch(t.children[0],l),a.push(l)}if(n.length>0){const l={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},c=m0(t.children[1]),u=sk(t.children[t.children.length-1]);c&&u&&(l.position={start:c,end:u}),a.push(l)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(a,!0)};return e.patch(t,i),e.applyData(t,i)}function OL(e,t,n){const s=n?n.children:void 0,i=(s?s.indexOf(t):1)===0?"th":"td",l=n&&n.type==="table"?n.align:void 0,c=l?l.length:t.children.length;let u=-1;const p=[];for(;++u<c;){const f=t.children[u],m={},g=l?l[u]:void 0;g&&(m.align=g);let y={type:"element",tagName:i,properties:m,children:[]};f&&(y.children=e.all(f),e.patch(f,y),y=e.applyData(f,y)),p.push(y)}const h={type:"element",tagName:"tr",properties:{},children:e.wrap(p,!0)};return e.patch(t,h),e.applyData(t,h)}function $L(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const zy=9,Ly=32;function VL(e){const t=String(e),n=/\r?\n|\r/g;let s=n.exec(t),a=0;const i=[];for(;s;)i.push(Oy(t.slice(a,s.index),a>0,!0),s[0]),a=s.index+s[0].length,s=n.exec(t);return i.push(Oy(t.slice(a),a>0,!1)),i.join("")}function Oy(e,t,n){let s=0,a=e.length;if(t){let i=e.codePointAt(s);for(;i===zy||i===Ly;)s++,i=e.codePointAt(s)}if(n){let i=e.codePointAt(a-1);for(;i===zy||i===Ly;)a--,i=e.codePointAt(a-1)}return a>s?e.slice(s,a):""}function HL(e,t){const n={type:"text",value:VL(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function UL(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const WL={blockquote:vL,break:wL,code:kL,delete:SL,emphasis:jL,footnoteReference:CL,heading:NL,html:_L,imageReference:AL,image:EL,inlineCode:TL,linkReference:DL,link:IL,listItem:PL,list:FL,paragraph:RL,root:BL,strong:zL,table:LL,tableCell:$L,tableRow:OL,text:HL,thematicBreak:UL,toml:ld,yaml:ld,definition:ld,footnoteDefinition:ld};function ld(){}const Ck=-1,yu=0,ml=1,Yd=2,k0=3,S0=4,j0=5,C0=6,Nk=7,_k=8,$y=typeof self=="object"?self:globalThis,KL=(e,t)=>{const n=(a,i)=>(e.set(i,a),a),s=a=>{if(e.has(a))return e.get(a);const[i,l]=t[a];switch(i){case yu:case Ck:return n(l,a);case ml:{const c=n([],a);for(const u of l)c.push(s(u));return c}case Yd:{const c=n({},a);for(const[u,p]of l)c[s(u)]=s(p);return c}case k0:return n(new Date(l),a);case S0:{const{source:c,flags:u}=l;return n(new RegExp(c,u),a)}case j0:{const c=n(new Map,a);for(const[u,p]of l)c.set(s(u),s(p));return c}case C0:{const c=n(new Set,a);for(const u of l)c.add(s(u));return c}case Nk:{const{name:c,message:u}=l;return n(new $y[c](u),a)}case _k:return n(BigInt(l),a);case"BigInt":return n(Object(BigInt(l)),a);case"ArrayBuffer":return n(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:c}=new Uint8Array(l);return n(new DataView(c),l)}}return n(new $y[i](l),a)};return s},Vy=e=>KL(new Map,e)(0),Li="",{toString:qL}={},{keys:GL}=Object,rl=e=>{const t=typeof e;if(t!=="object"||!e)return[yu,t];const n=qL.call(e).slice(8,-1);switch(n){case"Array":return[ml,Li];case"Object":return[Yd,Li];case"Date":return[k0,Li];case"RegExp":return[S0,Li];case"Map":return[j0,Li];case"Set":return[C0,Li];case"DataView":return[ml,n]}return n.includes("Array")?[ml,n]:n.includes("Error")?[Nk,n]:[Yd,n]},cd=([e,t])=>e===yu&&(t==="function"||t==="symbol"),YL=(e,t,n,s)=>{const a=(l,c)=>{const u=s.push(l)-1;return n.set(c,u),u},i=l=>{if(n.has(l))return n.get(l);let[c,u]=rl(l);switch(c){case yu:{let h=l;switch(u){case"bigint":c=_k,h=l.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);h=null;break;case"undefined":return a([Ck],l)}return a([c,h],l)}case ml:{if(u){let m=l;return u==="DataView"?m=new Uint8Array(l.buffer):u==="ArrayBuffer"&&(m=new Uint8Array(l)),a([u,[...m]],l)}const h=[],f=a([c,h],l);for(const m of l)h.push(i(m));return f}case Yd:{if(u)switch(u){case"BigInt":return a([u,l.toString()],l);case"Boolean":case"Number":case"String":return a([u,l.valueOf()],l)}if(t&&"toJSON"in l)return i(l.toJSON());const h=[],f=a([c,h],l);for(const m of GL(l))(e||!cd(rl(l[m])))&&h.push([i(m),i(l[m])]);return f}case k0:return a([c,l.toISOString()],l);case S0:{const{source:h,flags:f}=l;return a([c,{source:h,flags:f}],l)}case j0:{const h=[],f=a([c,h],l);for(const[m,g]of l)(e||!(cd(rl(m))||cd(rl(g))))&&h.push([i(m),i(g)]);return f}case C0:{const h=[],f=a([c,h],l);for(const m of l)(e||!cd(rl(m)))&&h.push(i(m));return f}}const{message:p}=l;return a([c,{name:u,message:p}],l)};return i},Hy=(e,{json:t,lossy:n}={})=>{const s=[];return YL(!(t||n),!!t,new Map,s)(e),s},Zd=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Vy(Hy(e,t)):structuredClone(e):(e,t)=>Vy(Hy(e,t));function ZL(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function QL(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function XL(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||ZL,s=e.options.footnoteBackLabel||QL,a=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",l=e.options.footnoteLabelProperties||{className:["sr-only"]},c=[];let u=-1;for(;++u<e.footnoteOrder.length;){const p=e.footnoteById.get(e.footnoteOrder[u]);if(!p)continue;const h=e.all(p),f=String(p.identifier).toUpperCase(),m=bo(f.toLowerCase());let g=0;const y=[],b=e.footnoteCounts.get(f);for(;b!==void 0&&++g<=b;){y.length>0&&y.push({type:"text",value:" "});let N=typeof n=="string"?n:n(u,g);typeof N=="string"&&(N={type:"text",value:N}),y.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+m+(g>1?"-"+g:""),dataFootnoteBackref:"",ariaLabel:typeof s=="string"?s:s(u,g),className:["data-footnote-backref"]},children:Array.isArray(N)?N:[N]})}const S=h[h.length-1];if(S&&S.type==="element"&&S.tagName==="p"){const N=S.children[S.children.length-1];N&&N.type==="text"?N.value+=" ":S.children.push({type:"text",value:" "}),S.children.push(...y)}else h.push(...y);const v={type:"element",tagName:"li",properties:{id:t+"fn-"+m},children:e.wrap(h,!0)};e.patch(p,v),c.push(v)}if(c.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...Zd(l),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(c,!0)},{type:"text",value:`
`}]}}const Ak=(function(e){if(e==null)return nO;if(typeof e=="function")return vu(e);if(typeof e=="object")return Array.isArray(e)?JL(e):eO(e);if(typeof e=="string")return tO(e);throw new Error("Expected function, string, or object as test")});function JL(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Ak(e[n]);return vu(s);function s(...a){let i=-1;for(;++i<t.length;)if(t[i].apply(this,a))return!0;return!1}}function eO(e){const t=e;return vu(n);function n(s){const a=s;let i;for(i in e)if(a[i]!==t[i])return!1;return!0}}function tO(e){return vu(t);function t(n){return n&&n.type===e}}function vu(e){return t;function t(n,s,a){return!!(rO(n)&&e.call(this,n,typeof s=="number"?s:void 0,a||void 0))}}function nO(){return!0}function rO(e){return e!==null&&typeof e=="object"&&"type"in e}const Ek=[],sO=!0,Uy=!1,aO="skip";function iO(e,t,n,s){let a;typeof t=="function"&&typeof n!="function"?(s=n,n=t):a=t;const i=Ak(a),l=s?-1:1;c(e,void 0,[])();function c(u,p,h){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const g=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(u.type+(g?"<"+g+">":""))+")"})}return m;function m(){let g=Ek,y,b,S;if((!t||i(u,p,h[h.length-1]||void 0))&&(g=oO(n(u,h)),g[0]===Uy))return g;if("children"in u&&u.children){const v=u;if(v.children&&g[0]!==aO)for(b=(s?v.children.length:-1)+l,S=h.concat(v);b>-1&&b<v.children.length;){const N=v.children[b];if(y=c(N,b,S)(),y[0]===Uy)return y;b=typeof y[1]=="number"?y[1]:b+l}}return g}}}function oO(e){return Array.isArray(e)?e:typeof e=="number"?[sO,e]:e==null?Ek:[e]}function Tk(e,t,n,s){let a,i,l;typeof t=="function"&&typeof n!="function"?(i=void 0,l=t,a=n):(i=t,l=n,a=s),iO(e,i,c,a);function c(u,p){const h=p[p.length-1],f=h?h.children.indexOf(u):void 0;return l(u,f,h)}}const Zp={}.hasOwnProperty,lO={};function cO(e,t){const n=t||lO,s=new Map,a=new Map,i=new Map,l={...WL,...n.handlers},c={all:p,applyData:uO,definitionById:s,footnoteById:a,footnoteCounts:i,footnoteOrder:[],handlers:l,one:u,options:n,patch:dO,wrap:hO};return Tk(e,function(h){if(h.type==="definition"||h.type==="footnoteDefinition"){const f=h.type==="definition"?s:a,m=String(h.identifier).toUpperCase();f.has(m)||f.set(m,h)}}),c;function u(h,f){const m=h.type,g=c.handlers[m];if(Zp.call(c.handlers,m)&&g)return g(c,h,f);if(c.options.passThrough&&c.options.passThrough.includes(m)){if("children"in h){const{children:b,...S}=h,v=Zd(S);return v.children=c.all(h),v}return Zd(h)}return(c.options.unknownHandler||fO)(c,h,f)}function p(h){const f=[];if("children"in h){const m=h.children;let g=-1;for(;++g<m.length;){const y=c.one(m[g],h);if(y){if(g&&m[g-1].type==="break"&&(!Array.isArray(y)&&y.type==="text"&&(y.value=Wy(y.value)),!Array.isArray(y)&&y.type==="element")){const b=y.children[0];b&&b.type==="text"&&(b.value=Wy(b.value))}Array.isArray(y)?f.push(...y):f.push(y)}}}return f}}function dO(e,t){e.position&&(t.position=qR(e))}function uO(e,t){let n=t;if(e&&e.data){const s=e.data.hName,a=e.data.hChildren,i=e.data.hProperties;if(typeof s=="string")if(n.type==="element")n.tagName=s;else{const l="children"in n?n.children:[n];n={type:"element",tagName:s,properties:{},children:l}}n.type==="element"&&i&&Object.assign(n.properties,Zd(i)),"children"in n&&n.children&&a!==null&&a!==void 0&&(n.children=a)}return n}function fO(e,t){const n=t.data||{},s="value"in t&&!(Zp.call(n,"hProperties")||Zp.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function hO(e,t){const n=[];let s=-1;for(t&&n.push({type:"text",value:`
`});++s<e.length;)s&&n.push({type:"text",value:`
`}),n.push(e[s]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Wy(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Ky(e,t){const n=cO(e,t),s=n.one(e,void 0),a=XL(n),i=Array.isArray(s)?{type:"root",children:s}:s||{type:"root",children:[]};return a&&i.children.push({type:"text",value:`
`},a),i}function pO(e,t){return e&&"run"in e?async function(n,s){const a=Ky(n,{file:s,...t});await e.run(a,s)}:function(n,s){return Ky(n,{file:s,...e||t})}}function qy(e){if(e)throw e}var Wh,Gy;function mO(){if(Gy)return Wh;Gy=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=function(p){return typeof Array.isArray=="function"?Array.isArray(p):t.call(p)==="[object Array]"},i=function(p){if(!p||t.call(p)!=="[object Object]")return!1;var h=e.call(p,"constructor"),f=p.constructor&&p.constructor.prototype&&e.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!h&&!f)return!1;var m;for(m in p);return typeof m>"u"||e.call(p,m)},l=function(p,h){n&&h.name==="__proto__"?n(p,h.name,{enumerable:!0,configurable:!0,value:h.newValue,writable:!0}):p[h.name]=h.newValue},c=function(p,h){if(h==="__proto__")if(e.call(p,h)){if(s)return s(p,h).value}else return;return p[h]};return Wh=function u(){var p,h,f,m,g,y,b=arguments[0],S=1,v=arguments.length,N=!1;for(typeof b=="boolean"&&(N=b,b=arguments[1]||{},S=2),(b==null||typeof b!="object"&&typeof b!="function")&&(b={});S<v;++S)if(p=arguments[S],p!=null)for(h in p)f=c(b,h),m=c(p,h),b!==m&&(N&&m&&(i(m)||(g=a(m)))?(g?(g=!1,y=f&&a(f)?f:[]):y=f&&i(f)?f:{},l(b,{name:h,newValue:u(N,y,m)})):typeof m<"u"&&l(b,{name:h,newValue:m}));return b},Wh}var xO=mO();const Kh=so(xO);function Qp(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function gO(){const e=[],t={run:n,use:s};return t;function n(...a){let i=-1;const l=a.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);c(null,...a);function c(u,...p){const h=e[++i];let f=-1;if(u){l(u);return}for(;++f<a.length;)(p[f]===null||p[f]===void 0)&&(p[f]=a[f]);a=p,h?bO(h,c)(...p):l(null,...p)}}function s(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return e.push(a),t}}function bO(e,t){let n;return s;function s(...l){const c=e.length>l.length;let u;c&&l.push(a);try{u=e.apply(this,l)}catch(p){const h=p;if(c&&n)throw h;return a(h)}c||(u&&u.then&&typeof u.then=="function"?u.then(i,a):u instanceof Error?a(u):i(u))}function a(l,...c){n||(n=!0,t(l,...c))}function i(l){a(null,l)}}const os={basename:yO,dirname:vO,extname:wO,join:kO,sep:"/"};function yO(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Ml(e);let n=0,s=-1,a=e.length,i;if(t===void 0||t.length===0||t.length>e.length){for(;a--;)if(e.codePointAt(a)===47){if(i){n=a+1;break}}else s<0&&(i=!0,s=a+1);return s<0?"":e.slice(n,s)}if(t===e)return"";let l=-1,c=t.length-1;for(;a--;)if(e.codePointAt(a)===47){if(i){n=a+1;break}}else l<0&&(i=!0,l=a+1),c>-1&&(e.codePointAt(a)===t.codePointAt(c--)?c<0&&(s=a):(c=-1,s=l));return n===s?s=l:s<0&&(s=e.length),e.slice(n,s)}function vO(e){if(Ml(e),e.length===0)return".";let t=-1,n=e.length,s;for(;--n;)if(e.codePointAt(n)===47){if(s){t=n;break}}else s||(s=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function wO(e){Ml(e);let t=e.length,n=-1,s=0,a=-1,i=0,l;for(;t--;){const c=e.codePointAt(t);if(c===47){if(l){s=t+1;break}continue}n<0&&(l=!0,n=t+1),c===46?a<0?a=t:i!==1&&(i=1):a>-1&&(i=-1)}return a<0||n<0||i===0||i===1&&a===n-1&&a===s+1?"":e.slice(a,n)}function kO(...e){let t=-1,n;for(;++t<e.length;)Ml(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":SO(n)}function SO(e){Ml(e);const t=e.codePointAt(0)===47;let n=jO(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function jO(e,t){let n="",s=0,a=-1,i=0,l=-1,c,u;for(;++l<=e.length;){if(l<e.length)c=e.codePointAt(l);else{if(c===47)break;c=47}if(c===47){if(!(a===l-1||i===1))if(a!==l-1&&i===2){if(n.length<2||s!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",s=0):(n=n.slice(0,u),s=n.length-1-n.lastIndexOf("/")),a=l,i=0;continue}}else if(n.length>0){n="",s=0,a=l,i=0;continue}}t&&(n=n.length>0?n+"/..":"..",s=2)}else n.length>0?n+="/"+e.slice(a+1,l):n=e.slice(a+1,l),s=l-a-1;a=l,i=0}else c===46&&i>-1?i++:i=-1}return n}function Ml(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const CO={cwd:NO};function NO(){return"/"}function Xp(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function _O(e){if(typeof e=="string")e=new URL(e);else if(!Xp(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return AO(e)}function AO(e){if(e.hostname!==""){const s=new TypeError('File URL host must be "localhost" or empty on darwin');throw s.code="ERR_INVALID_FILE_URL_HOST",s}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const s=t.codePointAt(n+2);if(s===70||s===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(t)}const qh=["history","path","basename","stem","extname","dirname"];class Dk{constructor(t){let n;t?Xp(t)?n={path:t}:typeof t=="string"||EO(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":CO.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let s=-1;for(;++s<qh.length;){const i=qh[s];i in n&&n[i]!==void 0&&n[i]!==null&&(this[i]=i==="history"?[...n[i]]:n[i])}let a;for(a in n)qh.includes(a)||(this[a]=n[a])}get basename(){return typeof this.path=="string"?os.basename(this.path):void 0}set basename(t){Yh(t,"basename"),Gh(t,"basename"),this.path=os.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?os.dirname(this.path):void 0}set dirname(t){Yy(this.basename,"dirname"),this.path=os.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?os.extname(this.path):void 0}set extname(t){if(Gh(t,"extname"),Yy(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=os.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Xp(t)&&(t=_O(t)),Yh(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?os.basename(this.path,this.extname):void 0}set stem(t){Yh(t,"stem"),Gh(t,"stem"),this.path=os.join(this.dirname||"",t+(this.extname||""))}fail(t,n,s){const a=this.message(t,n,s);throw a.fatal=!0,a}info(t,n,s){const a=this.message(t,n,s);return a.fatal=void 0,a}message(t,n,s){const a=new Wn(t,n,s);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Gh(e,t){if(e&&e.includes(os.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+os.sep+"`")}function Yh(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Yy(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function EO(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const TO=(function(e){const s=this.constructor.prototype,a=s[e],i=function(){return a.apply(i,arguments)};return Object.setPrototypeOf(i,s),i}),DO={}.hasOwnProperty;class N0 extends TO{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=gO()}copy(){const t=new N0;let n=-1;for(;++n<this.attachers.length;){const s=this.attachers[n];t.use(...s)}return t.data(Kh(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Xh("data",this.frozen),this.namespace[t]=n,this):DO.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Xh("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...s]=this.attachers[this.freezeIndex];if(s[0]===!1)continue;s[0]===!0&&(s[0]=void 0);const a=n.call(t,...s);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=dd(t),s=this.parser||this.Parser;return Zh("parse",s),s(String(n),n)}process(t,n){const s=this;return this.freeze(),Zh("process",this.parser||this.Parser),Qh("process",this.compiler||this.Compiler),n?a(void 0,n):new Promise(a);function a(i,l){const c=dd(t),u=s.parse(c);s.run(u,c,function(h,f,m){if(h||!f||!m)return p(h);const g=f,y=s.stringify(g,m);MO(y)?m.value=y:m.result=y,p(h,m)});function p(h,f){h||!f?l(h):i?i(f):n(void 0,f)}}}processSync(t){let n=!1,s;return this.freeze(),Zh("processSync",this.parser||this.Parser),Qh("processSync",this.compiler||this.Compiler),this.process(t,a),Qy("processSync","process",n),s;function a(i,l){n=!0,qy(i),s=l}}run(t,n,s){Zy(t),this.freeze();const a=this.transformers;return!s&&typeof n=="function"&&(s=n,n=void 0),s?i(void 0,s):new Promise(i);function i(l,c){const u=dd(n);a.run(t,u,p);function p(h,f,m){const g=f||t;h?c(h):l?l(g):s(void 0,g,m)}}}runSync(t,n){let s=!1,a;return this.run(t,n,i),Qy("runSync","run",s),a;function i(l,c){qy(l),a=c,s=!0}}stringify(t,n){this.freeze();const s=dd(n),a=this.compiler||this.Compiler;return Qh("stringify",a),Zy(t),a(t,s)}use(t,...n){const s=this.attachers,a=this.namespace;if(Xh("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?c(t):l(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function i(p){if(typeof p=="function")u(p,[]);else if(typeof p=="object")if(Array.isArray(p)){const[h,...f]=p;u(h,f)}else l(p);else throw new TypeError("Expected usable value, not `"+p+"`")}function l(p){if(!("plugins"in p)&&!("settings"in p))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(p.plugins),p.settings&&(a.settings=Kh(!0,a.settings,p.settings))}function c(p){let h=-1;if(p!=null)if(Array.isArray(p))for(;++h<p.length;){const f=p[h];i(f)}else throw new TypeError("Expected a list of plugins, not `"+p+"`")}function u(p,h){let f=-1,m=-1;for(;++f<s.length;)if(s[f][0]===p){m=f;break}if(m===-1)s.push([p,...h]);else if(h.length>0){let[g,...y]=h;const b=s[m][1];Qp(b)&&Qp(g)&&(g=Kh(!0,b,g)),s[m]=[p,g,...y]}}}}const IO=new N0().freeze();function Zh(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Qh(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Xh(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Zy(e){if(!Qp(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Qy(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function dd(e){return PO(e)?e:new Dk(e)}function PO(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function MO(e){return typeof e=="string"||FO(e)}function FO(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const RO="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Xy=[],Jy={allowDangerousHtml:!0},BO=/^(https?|ircs?|mailto|xmpp)$/i,zO=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function LO(e){const t=OO(e),n=$O(e);return VO(t.runSync(t.parse(n),n),e)}function OO(e){const t=e.rehypePlugins||Xy,n=e.remarkPlugins||Xy,s=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Jy}:Jy;return IO().use(yL).use(n).use(pO,s).use(t)}function $O(e){const t=e.children||"",n=new Dk;return typeof t=="string"&&(n.value=t),n}function VO(e,t){const n=t.allowedElements,s=t.allowElement,a=t.components,i=t.disallowedElements,l=t.skipHtml,c=t.unwrapDisallowed,u=t.urlTransform||HO;for(const h of zO)Object.hasOwn(t,h.from)&&(""+h.from+(h.to?"use `"+h.to+"` instead":"remove it")+RO+h.id,void 0);return Tk(e,p),XR(e,{Fragment:r.Fragment,components:a,ignoreInvalidStyle:!0,jsx:r.jsx,jsxs:r.jsxs,passKeys:!0,passNode:!0});function p(h,f,m){if(h.type==="raw"&&m&&typeof f=="number")return l?m.children.splice(f,1):m.children[f]={type:"text",value:h.value},f;if(h.type==="element"){let g;for(g in Vh)if(Object.hasOwn(Vh,g)&&Object.hasOwn(h.properties,g)){const y=h.properties[g],b=Vh[g];(b===null||b.includes(h.tagName))&&(h.properties[g]=u(String(y||""),g,h))}}if(h.type==="element"){let g=n?!n.includes(h.tagName):i?i.includes(h.tagName):!1;if(!g&&s&&typeof f=="number"&&(g=!s(h,f,m)),g&&m&&typeof f=="number")return c&&h.children?m.children.splice(f,1,...h.children):m.children.splice(f,1),f}}}function HO(e){const t=e.indexOf(":"),n=e.indexOf("?"),s=e.indexOf("#"),a=e.indexOf("/");return t===-1||a!==-1&&t>a||n!==-1&&t>n||s!==-1&&t>s||BO.test(e.slice(0,t))?e:""}function UO({content:e,isDark:t=!1,className:n}){return r.jsx(LO,{className:Pe("markdown-content",n),components:{p:({children:s})=>r.jsx("p",{className:"mb-2 last:mb-0",children:s}),h1:({children:s})=>r.jsx("h1",{className:"mb-2 font-bold",children:s}),h2:({children:s})=>r.jsx("h2",{className:"mb-2 font-bold",children:s}),h3:({children:s})=>r.jsx("h3",{className:"mb-2 font-bold",children:s}),ul:({children:s})=>r.jsx("ul",{className:"list-disc list-inside mb-2 space-y-1",children:s}),ol:({children:s})=>r.jsx("ol",{className:"list-decimal list-inside mb-2 space-y-1",children:s}),li:({children:s})=>r.jsx("li",{children:s}),code:({inline:s,children:a,...i})=>s?r.jsx("code",{className:Pe("px-1.5 py-0.5 rounded text-sm font-mono",t?"bg-white/10":"bg-black/10"),...i,children:a}):r.jsx("code",{className:Pe("block p-3 rounded-lg text-sm font-mono overflow-x-auto my-2",t?"bg-white/10":"bg-black/10"),...i,children:a}),pre:({children:s})=>r.jsx("pre",{className:"mb-2",children:s}),a:({children:s,href:a})=>r.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:Pe("underline hover:opacity-70 transition-opacity",t?"text-blue-300":"text-blue-600"),children:s}),blockquote:({children:s})=>r.jsx("blockquote",{className:Pe("border-l-4 pl-4 my-2 italic",t?"border-white/20":"border-black/20"),children:s}),strong:({children:s})=>r.jsx("strong",{className:"font-bold",children:s}),em:({children:s})=>r.jsx("em",{className:"italic",children:s}),hr:()=>r.jsx("hr",{className:Pe("my-4 border-t",t?"border-white/10":"border-black/10")})},children:e})}function ev(e){if(!e)return 0;let t=0;for(let n=0;n<e.length;n++){const s=e.charCodeAt(n);s>=19968&&s<=40959||s>=13312&&s<=19903||s>=131072&&s<=173791||s>=173824&&s<=177983||s>=177984&&s<=178207||s>=178208&&s<=183983||s>=12288&&s<=12351||s>=65280&&s<=65519?t+=1.5:s<=127?t+=.3:t+=1.5}return Math.ceil(t)}function WO(e){return e>=1e3?`${(e/1e3).toFixed(1)}K`:e.toString()}const ll=({item:e,isDark:t,userAvatarUrl:n,characterAvatarUrl:s,character:a,onRegenerate:i,onEdit:l,onDelete:c,isSelected:u,onSelect:p,messageIndex:h,lastSummaryIndex:f})=>{const m=e,g=m.sender==="user",y=h===f-1&&f>0;return r.jsxs("div",{className:"pb-6 px-4 sm:px-6 message-row relative",children:[r.jsxs("div",{className:Pe("flex gap-4 max-w-[95%] sm:max-w-[85%] flex-col",g?"ml-auto items-end":"mr-auto items-start"),children:[r.jsxs("div",{className:Pe("flex gap-4",g?"flex-row-reverse":"flex-row"),children:[r.jsx("div",{className:Pe("w-10 h-10 rounded-full overflow-hidden flex-shrink-0 border mt-1 flex items-center justify-center avatar-container relative",t?"border-white/10 bg-white/5":"border-black/10 bg-black/5"),children:g?n?r.jsx("img",{src:n,alt:"User",className:"w-full h-full object-cover"}):r.jsx(mn,{className:"w-5 h-5 opacity-50"}):s?r.jsx("img",{src:s,alt:a.name,className:"w-full h-full object-cover"}):r.jsx(mn,{className:"w-5 h-5 opacity-50"})}),r.jsx("div",{onClick:()=>p(m.id),className:Pe("p-4 rounded-2xl text-sm leading-relaxed tracking-wide shadow-sm backdrop-blur-sm bubble relative cursor-pointer active:scale-[0.98] transition-transform",g?"bubble-user":"bubble-character",g?t?"bg-white/10 text-gray-100 rounded-tr-sm border border-white/10":"bg-white/80 text-gray-900 rounded-tr-sm border border-white/60":t?"bg-white/5 text-gray-200 rounded-tl-sm border border-white/5":"bg-white/60 text-gray-800 rounded-tl-sm border border-white/40"),onClickCapture:b=>{b.stopPropagation(),p(m.id)},children:r.jsx(UO,{content:m.text,isDark:t})})]}),r.jsx(Be,{children:u&&r.jsxs(me.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:Pe("flex items-center gap-2",g?"mr-14":"ml-14"),children:[!g&&r.jsx("button",{onClick:b=>{b.stopPropagation(),i(m.id)},className:Pe("p-2 rounded-lg transition-all duration-200 active:scale-95",t?"bg-white/10 text-white/80 active:bg-white/20":"bg-black/5 text-black/60 active:bg-black/10"),title:"",children:r.jsx(bd,{className:"w-4 h-4"})}),r.jsx("button",{onClick:b=>{b.stopPropagation(),b.preventDefault(),l(m.id)},className:Pe("p-2 rounded-lg transition-all duration-200 active:scale-95",t?"bg-white/10 text-white/80 active:bg-white/20":"bg-black/5 text-black/60 active:bg-black/10"),title:"",children:r.jsx(f9,{className:"w-4 h-4"})}),r.jsx("button",{onClick:b=>{b.stopPropagation(),c(m.id)},className:Pe("p-2 rounded-lg transition-all duration-200 active:scale-95",t?"bg-red-500/20 text-red-400 active:bg-red-500/30":"bg-red-50 text-red-600 active:bg-red-100"),title:"",children:r.jsx(xn,{className:"w-4 h-4"})})]})})]}),y&&r.jsx("div",{className:"flex justify-center pt-3",children:r.jsx("div",{className:Pe("px-3 py-1 rounded-full text-[10px] tracking-widest uppercase backdrop-blur-sm border",t?"bg-indigo-500/10 text-indigo-400/60 border-indigo-500/20":"bg-indigo-100/60 text-indigo-600/60 border-indigo-200/40"),children:""})})]})};function KO({character:e,onBack:t,isDark:n,backgroundImage:s,customCSS:a,onToggleColorMode:i,writingStyle:l=""}){const[c,u]=k.useState([]),[p,h]=k.useState(""),[f,m]=k.useState(null),[g,y]=k.useState(null),[b,S]=k.useState(!1),[v,N]=k.useState(null),[C,_]=k.useState(!1),[R,D]=k.useState(null),[V,I]=k.useState(""),[A,U]=k.useState(null),[W,T]=k.useState(!1),[M,j]=k.useState("greeting"),[P,L]=k.useState(""),[B,q]=k.useState(20),[G,O]=k.useState(100),[$,K]=k.useState(0),[H,ee]=k.useState(!1),[Y,re]=k.useState(""),[de,X]=k.useState(0),[oe,ye]=k.useState(!1),be=k.useRef(null),Ie=k.useRef(null),De=k.useRef(!0),F=k.useMemo(()=>c,[c]),le=_5({count:F.length,getScrollElement:()=>be.current,estimateSize:ce=>100,overscan:5});k.useLayoutEffect(()=>{F.length!==0&&(De.current?requestAnimationFrame(()=>{le.getTotalSize()>0&&be.current&&(be.current.scrollTop=be.current.scrollHeight,De.current=!1)}):requestAnimationFrame(()=>{if(be.current){const{scrollHeight:ce,scrollTop:Te,clientHeight:Me}=be.current;be.current.scrollTop=ce}}))},[F.length,le.getTotalSize()]),k.useEffect(()=>{let ce=!0;return(async()=>{if(e.avatar)try{const Me=await Ct(e.avatar);ce&&m(Me)}catch(Me){console.error(Me)}try{const Me=await Ct("avatar");ce&&Me&&y(Me)}catch(Me){console.error(Me)}})(),()=>{ce=!1}},[e.avatar]),k.useEffect(()=>{(async()=>{try{const Te=`whisper_chat_settings_${e.id}`,Me=await se.get(J.CHATS,Te);Me&&(j(Me.openingMode||"greeting"),L(Me.greetingText||""),q(Me.loadHistoryCount||20),O(Me.replyLength||100))}catch(Te){console.error("Failed to load chat settings:",Te)}})()},[e.id]),k.useEffect(()=>{(async()=>{try{const Te=`whisper_chat_messages_${e.id}`,Me=await se.get(J.CHATS,Te);Me&&Array.isArray(Me)&&u(Me);const Oe=`whisper_last_summary_index_${e.id}`,Ke=await se.get(J.MISC,Oe)||0,pt=(await se.get(J.CHARACTERS,"characters")||[]).find(ht=>ht.id===e.id);pt&&pt.memories&&pt.memories.filter(jt=>jt.type==="date"&&jt.tags&&jt.tags.includes("")).length>0&&Me&&Me.length>Ke?(console.log("[WhisperChat] Syncing lastSummaryIndex with existing memories"),await se.set(J.MISC,Oe,Me.length),K(Me.length)):K(Ke)}catch(Te){console.error("Failed to load chat messages:",Te)}})()},[e.id]),k.useEffect(()=>{const ce=async()=>{try{const Te=`whisper_chat_messages_${e.id}`;await se.set(J.CHATS,Te,c)}catch(Te){console.error("Failed to save messages:",Te)}};c.length>0&&ce()},[c,e.id]),k.useEffect(()=>{b&&pe()},[b]),k.useEffect(()=>{const ce=async Te=>{const Me=Te,{taskId:Oe,task:Ke}=Me.detail;if(console.log("[WhisperChat] Service Worker :",Oe),Ke.chatId===e.id&&!(Ke.type!=="whisper_chat_reply"&&Ke.type!=="memory_summary"))try{const{payload:Ze}=Ke,pt=[{role:"system",content:Ze.systemPrompt},{role:"user",content:Ze.userPrompt}],ht=await fetch(`${Ze.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ze.apiKey}`},body:JSON.stringify({model:Ze.modelName,messages:pt,temperature:Ze.temperature,max_tokens:Ze.maxTokens})});if(!ht.ok){const Lt=await ht.text();throw new Error(`AI API  ${ht.status}: ${Lt}`)}const jt=await ht.json();if(jt.error)throw new Error(`API Error Details: ${JSON.stringify(jt.error)}`);const Ht=jt.choices?.[0]?.message?.content||"";if(!Ht)throw console.error("[] :",jt),new Error("AI");console.log("[] AI :",Ht),window.dispatchEvent(new CustomEvent("ai_task_completed",{detail:{taskId:Oe,success:!0,result:Ht}}))}catch(Ze){console.error("[] WhisperChat AI :",Ze),window.dispatchEvent(new CustomEvent("ai_task_completed",{detail:{taskId:Oe,success:!1,error:Ze.message||"AI "}}))}};return window.addEventListener("ai-task-needs-fallback",ce),()=>{window.removeEventListener("ai-task-needs-fallback",ce)}},[e.id]),k.useEffect(()=>{const ce=async Te=>{const{type:Me,payload:Oe}=Te.data;Me==="AI_TASK_COMPLETED"?Oe?.characterId===e.id&&(Oe?.taskType==="whisper_chat_reply"?(console.log("[WhisperChat]  SW whisper_chat_reply :",Oe),window.dispatchEvent(new CustomEvent("ai_task_completed",{detail:{taskId:Oe.taskId,success:!0,result:Oe.result,message:Oe.message}}))):Oe?.taskType==="memory_summary"&&(console.log("[WhisperChat]  SW memory_summary :",Oe),window.dispatchEvent(new CustomEvent("ai_task_completed",{detail:{taskId:Oe.taskId,success:!0,result:Oe.result,message:Oe.message}})))):Me==="AI_TASK_FAILED"&&Oe?.characterId===e.id&&(Oe?.taskType==="whisper_chat_reply"?(console.log("[WhisperChat]  SW whisper_chat_reply :",Oe),window.dispatchEvent(new CustomEvent("ai_task_completed",{detail:{taskId:Oe.taskId,success:!1,error:Oe.error||"AI "}}))):Oe?.taskType==="memory_summary"&&(console.log("[WhisperChat]  SW memory_summary :",Oe),window.dispatchEvent(new CustomEvent("ai_task_completed",{detail:{taskId:Oe.taskId,success:!1,error:Oe.error||""}}))))};return"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",ce),()=>{"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener("message",ce)}},[e.id]);const Z=(ce,Te)=>{U({type:ce,message:Te}),setTimeout(()=>U(null),3e3)},te=async()=>{try{const ce=`whisper_chat_settings_${e.id}`;await se.set(J.CHATS,ce,{openingMode:M,greetingText:P,loadHistoryCount:B,replyLength:G}),M==="greeting"&&P.trim()&&await ne(P.trim()),M==="load_history"&&await ae(),S(!1)}catch(ce){console.error("Failed to save chat settings:",ce),Z("error","")}},ne=async ce=>{if(C){Z("error","...");return}_(!0);try{const Te=await il({characterId:e.id,character:e,currentMessage:ce,replyLength:G,writingStyle:l,isGreetingExpansion:!0}),Me=Oe=>{if(Oe.detail?.taskId===Te&&Oe.detail?.success){const Ke=Oe.detail.result||"...";let Ze;Oe.detail.message?Ze={...Oe.detail.message,timestamp:new Date(Oe.detail.message.timestamp)}:Ze={id:`${Date.now()}_greeting`,text:Ke,sender:"character",timestamp:new Date},u([Ze]),_(!1)}else Oe.detail?.taskId===Te&&!Oe.detail?.success&&(Z("error",Oe.detail.error||"AI "),_(!1))};window.addEventListener("ai_task_completed",Me),setTimeout(()=>{window.removeEventListener("ai_task_completed",Me),_(!1)},6e4)}catch(Te){console.error("Failed to expand greeting:",Te),Z("error",Te.message||"AI "),_(!1)}},ae=async()=>{if(C){Z("error","...");return}try{const ce=`chat_messages_${e.id}`,Te=await se.get(J.CHAT_MESSAGES,ce)||[];if(Te.length===0){Z("error","");return}const Oe=(await se.get(J.CHATS,"chat_settings")||{}).timeAwareness||!1,Ke=Te.slice(-B);_(!0);const Ze=await il({characterId:e.id,character:e,replyLength:G,writingStyle:l,isHistoryExpansion:!0,privateChatHistory:Ke,timeAwareness:Oe}),pt=ht=>{if(ht.detail?.taskId===Ze&&ht.detail?.success){const jt=ht.detail.result||"...";let Ht;ht.detail.message?Ht={...ht.detail.message,timestamp:new Date(ht.detail.message.timestamp)}:Ht={id:`${Date.now()}_history`,text:jt,sender:"character",timestamp:new Date},u([Ht]),_(!1)}else ht.detail?.taskId===Ze&&!ht.detail?.success&&(Z("error",ht.detail.error||"AI "),_(!1))};window.addEventListener("ai_task_completed",pt),setTimeout(()=>{window.removeEventListener("ai_task_completed",pt),_(!1)},6e4)}catch(ce){console.error("Failed to create opening from history:",ce),Z("error",ce.message||"AI "),_(!1)}},we=async()=>{if(c.length===0){Z("error","");return}if(C){Z("error","...");return}try{const ce=await se.get(J.CHATS,"chat_settings")||{};if(ce.timeAwareness!==void 0?ce.timeAwareness:!0){const Me=new Date,Oe=`${Me.getFullYear()}-${String(Me.getMonth()+1).padStart(2,"0")}-${String(Me.getDate()).padStart(2,"0")}`;re(Oe),ee(!0)}else await Ce(!1,"")}catch(ce){console.error("Failed to check settings:",ce),Z("error",ce.message||"")}},Ce=async(ce,Te)=>{try{Z("info","...");const{getValidatedAPIConfig:Me}=await al(async()=>{const{getValidatedAPIConfig:kt}=await Promise.resolve().then(()=>LD);return{getValidatedAPIConfig:kt}},void 0),Oe=await Me();if(Oe.isBlocked){Z("error",Oe.blockReason||"API ");return}if(!Oe.mainAPI){Z("error"," API");return}const Ze=(await se.get(J.USER_DATA,"userData")||{}).name||"",pt=`whisper_last_summary_index_${e.id}`,ht=await se.get(J.MISC,pt)||0,jt=c.slice(ht);if(jt.length===0){Z("info","");return}const{buildMemorySummaryPrompt:Ht}=await al(async()=>{const{buildMemorySummaryPrompt:kt}=await import("./memorySummaryPromptBuilder-CY5L6uQA.js");return{buildMemorySummaryPrompt:kt}},[]),{systemPrompt:Lt,userPrompt:Kt}=Ht({characterName:e.name,userName:Ze,chatHistory:jt,timeAwareness:ce,dateInput:ce?Te:void 0}),{createMemorySummaryTask:it}=await al(async()=>{const{createMemorySummaryTask:kt}=await Promise.resolve().then(()=>ZI);return{createMemorySummaryTask:kt}},void 0),Pt=await it({characterId:e.id,characterName:e.name,userNickname:Ze,displayName:` - ${e.name}`,systemPrompt:Lt,userPrompt:Kt,maxTokens:void 0}),Ot=async kt=>{if(kt.detail?.taskId===Pt&&kt.detail?.success){const gn=kt.detail.result||"";if(kt.detail.message&&kt.detail.message.id)console.log("[WhisperChat] SW already saved memory, only updating index"),await se.set(J.MISC,pt,c.length),K(c.length),Z("success","");else{console.log("[WhisperChat] Fallback: frontend saving memory");const{MemorySystem:Ut}=await al(async()=>{const{MemorySystem:Cn}=await Promise.resolve().then(()=>DI);return{MemorySystem:Cn}},void 0),kr=Ut.createMemory("date",gn,{active:!0}),$t=await se.get(J.CHARACTERS,"characters")||[],an=$t.findIndex(Cn=>Cn.id===e.id);if(an!==-1){$t[an].memories=$t[an].memories||[],$t[an].memories.push(kr);const Cn=await se.get(J.CHATS,"chat_settings")||{},Kn=Cn.summary_limit??3,ks=Cn.date_limit??3;$t[an].memories=Ut.processMemories($t[an].memories,Kn,ks),await se.set(J.CHARACTERS,"characters",$t),await se.set(J.MISC,pt,c.length),K(c.length),Z("success","")}else Z("error","")}window.removeEventListener("ai_task_completed",Ot)}else kt.detail?.taskId===Pt&&!kt.detail?.success&&(Z("error",kt.detail.error||""),window.removeEventListener("ai_task_completed",Ot))};window.addEventListener("ai_task_completed",Ot),setTimeout(()=>{window.removeEventListener("ai_task_completed",Ot)},6e4)}catch(Me){console.error("Failed to save to memory:",Me),Z("error",Me.message||"")}},ue=async()=>{if(c.length===0){Z("error","");return}try{const ce=`whisper_last_summary_index_${e.id}`,Te=await se.get(J.MISC,ce)||0,Me=c.length-Te;if(Me===0){Z("info","");return}await se.set(J.MISC,ce,c.length),K(c.length),Z("success",` ${Me} `)}catch(ce){console.error("Failed to discard summary:",ce),Z("error",ce.message||"")}},pe=async()=>{if(!oe){ye(!0);try{const ce=await I5({characterId:e.id,character:e,currentMessage:p||void 0,replyLength:G,writingStyle:l,lastSummaryIndex:$}),Te=ev(ce.systemPrompt),Me=ev(ce.userPrompt),Oe=Te+Me;X(Oe)}catch(ce){console.error("Failed to calculate tokens:",ce)}finally{ye(!1)}}},je=()=>{T(!0)},Ne=async()=>{T(!1),u([]),K(0);try{const ce=`whisper_chat_messages_${e.id}`;await se.delete(J.CHATS,ce)}catch(ce){console.error("Failed to clear messages:",ce)}try{const ce=`whisper_last_summary_index_${e.id}`;await se.delete(J.MISC,ce)}catch(ce){console.error("Failed to clear summary index:",ce)}},he=async ce=>{const Te=c.findIndex(Me=>Me.id===ce);if(!(Te===-1||c[Te].sender!=="character")){if(C){Z("error","...");return}_(!0);try{const Me=await il({characterId:e.id,character:e,replyLength:G,writingStyle:l}),Oe=Ke=>{if(Ke.detail?.taskId===Me&&Ke.detail?.success){const Ze=Ke.detail.result||"...";u(pt=>pt.map((ht,jt)=>jt===Te?{...ht,text:Ze,timestamp:new Date}:ht)),_(!1)}else Ke.detail?.taskId===Me&&!Ke.detail?.success&&(Z("error",Ke.detail.error||"AI "),_(!1))};window.addEventListener("ai_task_completed",Oe),setTimeout(()=>{window.removeEventListener("ai_task_completed",Oe),_(!1)},6e4)}catch(Me){console.error("Failed to regenerate:",Me),Z("error",Me.message||"AI "),_(!1)}}},Ee=ce=>{const Te=c.find(Me=>Me.id===ce);Te&&(D(ce),I(Te.text),N(null))},Re=async()=>{if(R&&V.trim()){const ce=c.map(Te=>Te.id===R?{...Te,text:V.trim()}:Te);u(ce);try{const Te=`whisper_chat_messages_${e.id}`;await se.set(J.CHATS,Te,ce),Z("success","")}catch(Te){console.error("Failed to save edited message:",Te),Z("error","")}}D(null),I("")},qe=()=>{D(null),I("")},Ye=async ce=>{const Te=c.findIndex(Ke=>Ke.id===ce);if(Te===-1)return;const Me=c.slice(0,Te);u(Me);const Oe=`whisper_chat_messages_${e.id}`;try{await se.set(J.CHATS,Oe,Me)}catch(Ke){console.error("Failed to save messages after deletion:",Ke)}if(Te<=$){const Ke=Math.min($,Me.length);K(Ke);try{const Ze=`whisper_last_summary_index_${e.id}`;await se.set(J.MISC,Ze,Ke)}catch(Ze){console.error("Failed to update summary index after deletion:",Ze)}}Z("success",` ${c.length-Te} `)},nt=async()=>{if(!p.trim()||C)return;const ce=p.trim(),Te={id:Date.now().toString(),text:ce,sender:"user",timestamp:new Date};u(Me=>[...Me,Te]),h(""),Ie.current&&(Ie.current.style.height="40px"),_(!0);try{const Me=await il({characterId:e.id,character:e,currentMessage:ce,replyLength:G,writingStyle:l}),Oe=Ke=>{if(Ke.detail?.taskId===Me&&Ke.detail?.success){const Ze=Ke.detail.result||"...";let pt;Ke.detail.message?pt={...Ke.detail.message,timestamp:new Date(Ke.detail.message.timestamp)}:pt={id:`${Date.now()}_ai`,text:Ze,sender:"character",timestamp:new Date},u(ht=>[...ht,pt]),_(!1)}else Ke.detail?.taskId===Me&&!Ke.detail?.success&&(Z("error",Ke.detail.error||"AI "),_(!1))};window.addEventListener("ai_task_completed",Oe),setTimeout(()=>{window.removeEventListener("ai_task_completed",Oe),_(!1)},6e4)}catch(Me){console.error("Failed to send message:",Me),Z("error",Me.message||"AI "),_(!1)}};return r.jsxs(me.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.4,ease:[.16,1,.3,1]},className:"flex flex-col h-full relative",children:[s&&r.jsx("div",{className:"absolute inset-0 z-0",children:r.jsx("img",{src:s,alt:"Background",className:"w-full h-full object-cover opacity-100"})}),a&&r.jsx("style",{children:a}),r.jsx("div",{className:Pe("absolute top-0 left-0 right-0 h-40 z-10 pointer-events-none",n?"bg-gradient-to-b from-[#18181B] via-[#18181B]/80 to-transparent":"bg-gradient-to-b from-white via-white/80 to-transparent")}),r.jsx("div",{className:Pe("absolute bottom-0 left-0 right-0 h-24 z-10 pointer-events-none",n?"bg-gradient-to-t from-[#18181B] via-[#18181B]/80 to-transparent":"bg-gradient-to-t from-white via-white/80 to-transparent")}),r.jsxs("div",{className:Pe("absolute top-0 left-0 right-0 flex items-center justify-between px-6 pt-12 pb-4 z-20 transition-all duration-200"),children:[r.jsx("button",{onClick:t,className:Pe("w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300 shadow-md backdrop-blur-xl border",n?"bg-black/20 border-white/10 text-white hover:bg-black/40":"bg-white/40 border-white/40 text-black hover:bg-white/60"),children:r.jsx(dn,{className:"w-6 h-6 stroke-1"})}),r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("span",{className:"text-lg font-serif font-medium tracking-wide",children:e.name}),r.jsx("span",{className:Pe("text-[10px] uppercase tracking-[0.2em] opacity-50"),children:"Connected"})]}),r.jsx("button",{onClick:()=>S(!0),className:Pe("w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300 shadow-md backdrop-blur-xl border",n?"bg-black/20 border-white/10 text-white hover:bg-black/40":"bg-white/40 border-white/40 text-black hover:bg-white/60"),children:r.jsx(Qw,{className:"w-5 h-5 stroke-1"})})]}),r.jsx("div",{ref:be,className:"absolute inset-0 w-full z-0 overflow-y-auto scrollbar-hide pt-32 pb-32",onClick:()=>N(null),children:r.jsx("div",{style:{height:`${le.getTotalSize()}px`,width:"100%",position:"relative"},children:le.getVirtualItems().map(ce=>r.jsx("div",{"data-index":ce.index,ref:le.measureElement,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${ce.start}px)`},children:r.jsx(ll,{item:F[ce.index],isDark:n,userAvatarUrl:g,characterAvatarUrl:f,character:e,onRegenerate:he,onEdit:Ee,onDelete:Ye,isSelected:v===F[ce.index].id,onSelect:Te=>N(v===Te?null:Te),messageIndex:ce.index,lastSummaryIndex:$})},ce.key))})}),r.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 sm:p-6 pb-8 z-20",children:r.jsxs("div",{className:Pe("flex items-end gap-2 p-1.5 rounded-[2rem] shadow-lg backdrop-blur-xl border transition-all duration-300",n?"bg-black/20 border-white/10 focus-within:bg-black/30 focus-within:border-white/20":"bg-white/40 border-white/40 focus-within:bg-white/60 focus-within:border-white/60",C?"pl-3":"pl-5"),children:[r.jsx(Be,{children:C&&r.jsxs(me.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},className:"flex items-center gap-1.5 pr-2 border-r mb-3",style:{borderColor:n?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"},children:[r.jsx(me.div,{animate:{scale:[1,1.3,1]},transition:{duration:1,repeat:1/0,delay:0},className:Pe("w-1.5 h-1.5 rounded-full",n?"bg-white/50":"bg-black/50")}),r.jsx(me.div,{animate:{scale:[1,1.3,1]},transition:{duration:1,repeat:1/0,delay:.2},className:Pe("w-1.5 h-1.5 rounded-full",n?"bg-white/50":"bg-black/50")}),r.jsx(me.div,{animate:{scale:[1,1.3,1]},transition:{duration:1,repeat:1/0,delay:.4},className:Pe("w-1.5 h-1.5 rounded-full",n?"bg-white/50":"bg-black/50")})]})}),r.jsx("textarea",{rows:1,value:p,onChange:ce=>{h(ce.target.value),ce.target.style.height="auto",ce.target.style.height=`${Math.min(ce.target.scrollHeight,120)}px`},placeholder:C?"...":"",disabled:C,className:Pe("flex-1 bg-transparent outline-none text-sm placeholder:opacity-50 min-w-0 resize-none py-2.5 max-h-[120px]",n?"text-white placeholder:text-white":"text-black placeholder:text-black"),style:{height:"40px"}}),r.jsx("button",{onClick:nt,disabled:C,className:Pe("w-10 h-10 rounded-full flex items-center justify-center transition-all duration-300",n?"bg-white text-black hover:bg-gray-200":"bg-[#2D2D2D] text-white hover:bg-black",C&&"opacity-50 cursor-not-allowed"),children:r.jsx(qm,{className:"w-4 h-4 ml-0.5"})})]})}),r.jsx(Be,{children:b&&r.jsxs(r.Fragment,{children:[r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-40 bg-black/20 backdrop-blur-[2px]",onClick:()=>S(!1)}),r.jsxs(me.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:Pe("absolute right-0 top-0 bottom-0 w-80 z-50 shadow-2xl flex flex-col","pt-10",n?"bg-[#18181B] border-l border-white/10":"bg-white border-l border-black/5"),children:[r.jsxs("div",{className:"px-8 pt-2 pb-4 flex items-center justify-between flex-shrink-0",children:[r.jsx("h2",{className:"text-xl font-medium tracking-[0.1em]",children:""}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:i,className:Pe("w-8 h-8 rounded-full flex items-center justify-center transition-colors mr-1",n?"hover:bg-white/10":"hover:bg-black/5"),children:n?r.jsx(ru,{className:"w-5 h-5 opacity-70"}):r.jsx(Ym,{className:"w-5 h-5 opacity-70"})}),r.jsx("button",{onClick:()=>S(!1),className:Pe("w-8 h-8 rounded-full flex items-center justify-center transition-colors",n?"hover:bg-white/10":"hover:bg-black/5"),children:r.jsx(xt,{className:"w-5 h-5 opacity-70"})})]})]}),r.jsx(kd,{className:"flex-1 overflow-hidden",children:r.jsxs("div",{className:"px-8 pb-6 space-y-6",children:[r.jsxs("button",{onClick:we,className:Pe("w-full py-3 px-4 rounded-xl border transition-all duration-300 flex items-center justify-center gap-3 group",n?"bg-gradient-to-r from-indigo-600/20 to-purple-600/20 border-indigo-500/30 hover:border-indigo-400/50 hover:from-indigo-600/30 hover:to-purple-600/30":"bg-gradient-to-r from-indigo-50 to-purple-50 border-indigo-200 hover:border-indigo-300 hover:from-indigo-100 hover:to-purple-100"),children:[r.jsx(Ya,{className:Pe("w-5 h-5 transition-transform group-hover:scale-110",n?"text-indigo-400":"text-indigo-600")}),r.jsx("span",{className:Pe("text-sm font-medium tracking-wide",n?"text-indigo-300":"text-indigo-700"),children:""})]}),r.jsxs("button",{onClick:ue,className:Pe("w-full py-3 px-4 rounded-xl border transition-all duration-300 flex items-center justify-center gap-3 group",n?"bg-gradient-to-r from-gray-600/20 to-gray-500/20 border-gray-500/30 hover:border-gray-400/50 hover:from-gray-600/30 hover:to-gray-500/30":"bg-gradient-to-r from-gray-50 to-gray-100 border-gray-200 hover:border-gray-300 hover:from-gray-100 hover:to-gray-200"),children:[r.jsx(xt,{className:Pe("w-5 h-5 transition-transform group-hover:scale-110",n?"text-gray-400":"text-gray-600")}),r.jsx("span",{className:Pe("text-sm font-medium tracking-wide",n?"text-gray-300":"text-gray-700"),children:""})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"text-sm font-medium tracking-wider opacity-60 uppercase",children:""}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:()=>j("greeting"),className:Pe("flex-1 flex items-center justify-center gap-2 p-3 rounded-lg border cursor-pointer transition-all",M==="greeting"?n?"bg-indigo-900/20 border-indigo-500/50":"bg-indigo-50 border-indigo-200":n?"bg-white/5 border-white/5 hover:bg-white/10":"bg-black/5 border-black/5 hover:bg-black/10"),children:[r.jsx("div",{className:Pe("w-4 h-4 rounded-full flex items-center justify-center border transition-colors flex-shrink-0",M==="greeting"?n?"bg-indigo-500 border-indigo-500 text-white":"bg-indigo-600 border-indigo-600 text-white":n?"border-white/20":"border-black/20"),children:M==="greeting"&&r.jsx(Et,{className:"w-2.5 h-2.5"})}),r.jsx("div",{className:"text-sm font-medium",children:""})]}),r.jsxs("button",{onClick:()=>j("load_history"),className:Pe("flex-1 flex items-center justify-center gap-2 p-3 rounded-lg border cursor-pointer transition-all",M==="load_history"?n?"bg-indigo-900/20 border-indigo-500/50":"bg-indigo-50 border-indigo-200":n?"bg-white/5 border-white/5 hover:bg-white/10":"bg-black/5 border-black/5 hover:bg-black/10"),children:[r.jsx("div",{className:Pe("w-4 h-4 rounded-full flex items-center justify-center border transition-colors flex-shrink-0",M==="load_history"?n?"bg-indigo-500 border-indigo-500 text-white":"bg-indigo-600 border-indigo-600 text-white":n?"border-white/20":"border-black/20"),children:M==="load_history"&&r.jsx(Et,{className:"w-2.5 h-2.5"})}),r.jsx("div",{className:"text-sm font-medium",children:""})]})]}),M==="greeting"&&r.jsxs("div",{className:"space-y-2 pt-1",children:[r.jsx("label",{className:"text-xs opacity-60",children:""}),r.jsx("textarea",{value:P,onChange:ce=>L(ce.target.value),className:Pe("w-full h-28 p-3 rounded-lg text-sm resize-none outline-none border transition-all",n?"bg-white/5 border-white/10 focus:border-white/30 text-gray-300 placeholder:text-white/20":"bg-black/5 border-black/10 focus:border-black/30 text-gray-700 placeholder:text-black/20")})]}),M==="load_history"&&r.jsx("div",{className:"pt-1",children:r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("span",{className:"opacity-60",children:""}),r.jsx("input",{type:"number",min:"1",max:"100",value:B,onChange:ce=>q(Number(ce.target.value)),className:Pe("w-20 p-2 rounded-lg text-sm text-center outline-none border transition-all",n?"bg-white/5 border-white/10 focus:border-white/30 text-gray-300":"bg-black/5 border-black/10 focus:border-black/30 text-gray-700")}),r.jsx("span",{className:"opacity-60",children:""})]})}),r.jsx("button",{onClick:te,className:Pe("w-full py-2.5 rounded-lg text-sm font-medium transition-all mt-3",n?"bg-white/10 hover:bg-white/20 text-white":"bg-black/5 hover:bg-black/10 text-black"),children:""})]}),r.jsx("div",{className:"space-y-3",children:r.jsx("div",{className:"space-y-2",children:r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("span",{className:"opacity-60",children:""}),r.jsx("input",{type:"number",min:"50",max:"1000",value:G,onChange:ce=>O(Number(ce.target.value)),className:Pe("w-20 p-2 rounded-lg text-sm text-center outline-none border transition-all",n?"bg-white/5 border-white/10 focus:border-white/30 text-gray-300":"bg-black/5 border-black/10 focus:border-black/30 text-gray-700")}),r.jsx("span",{className:"opacity-60",children:""})]})})}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-sm font-medium tracking-wider opacity-60 uppercase",children:""}),r.jsx("span",{className:"text-sm font-mono",children:oe?"...":`${WO(de)} tokens`})]}),r.jsxs("button",{onClick:je,className:Pe("w-full py-3 px-4 rounded-xl border transition-all duration-300 flex items-center justify-center gap-3 group",n?"bg-gradient-to-r from-red-600/20 to-orange-600/20 border-red-500/30 hover:border-red-400/50 hover:from-red-600/30 hover:to-orange-600/30":"bg-gradient-to-r from-red-50 to-orange-50 border-red-200 hover:border-red-300 hover:from-red-100 hover:to-orange-100"),children:[r.jsx(xn,{className:Pe("w-5 h-5 transition-transform group-hover:scale-110",n?"text-red-400":"text-red-600")}),r.jsx("span",{className:Pe("text-sm font-medium tracking-wide",n?"text-red-300":"text-red-700"),children:""})]})]})})]})]})}),r.jsx(Be,{children:H&&r.jsxs(r.Fragment,{children:[r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>ee(!1)}),r.jsx(me.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{type:"spring",damping:25,stiffness:300},className:"fixed inset-0 z-[101] flex items-center justify-center p-4 pointer-events-none",children:r.jsxs("div",{className:Pe("w-full max-w-md rounded-2xl shadow-2xl pointer-events-auto",n?"bg-[#18181B] border border-white/10":"bg-white border border-black/5"),onClick:ce=>ce.stopPropagation(),children:[r.jsxs("div",{className:"px-6 pt-6 pb-4 flex items-center justify-between",children:[r.jsx("h2",{className:"text-lg font-medium tracking-wide",children:""}),r.jsx("button",{onClick:()=>ee(!1),className:Pe("w-8 h-8 rounded-full flex items-center justify-center transition-colors",n?"hover:bg-white/10":"hover:bg-black/5"),children:r.jsx(xt,{className:"w-5 h-5 opacity-70"})})]}),r.jsxs("div",{className:"px-6 pb-6",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{className:Pe("text-sm mb-3",n?"text-gray-400":"text-gray-600"),children:""}),r.jsx("input",{type:"date",value:Y,onChange:ce=>re(ce.target.value),className:Pe("w-full p-3 rounded-lg text-sm outline-none border transition-all",n?"bg-white/5 border-white/10 focus:border-white/30 text-gray-300":"bg-black/5 border-black/10 focus:border-black/30 text-gray-700")})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>ee(!1),className:Pe("flex-1 py-2.5 rounded-lg text-sm font-medium transition-all",n?"bg-white/5 hover:bg-white/10 text-white":"bg-black/5 hover:bg-black/10 text-black"),children:""}),r.jsx("button",{onClick:async()=>{ee(!1);const ce=await se.get(J.CHATS,"chat_settings")||{},Te=ce.timeAwareness!==void 0?ce.timeAwareness:!0;await Ce(Te,Y)},className:Pe("flex-1 py-2.5 rounded-lg text-sm font-medium transition-all",n?"bg-indigo-500 hover:bg-indigo-600 text-white":"bg-indigo-600 hover:bg-indigo-700 text-white"),children:""})]})]})]})})]})}),r.jsx(Be,{children:A&&r.jsx(me.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,ease:[.16,1,.3,1]},className:"fixed top-20 left-0 right-0 z-[300] flex justify-center px-4",children:r.jsxs("div",{className:Pe("px-6 py-3 rounded-xl shadow-2xl backdrop-blur-xl border flex items-start gap-3 max-w-md max-h-[60vh] overflow-y-auto",A.type==="success"&&(n?"bg-green-500/20 border-green-500/30 text-green-200":"bg-green-50/95 border-green-200/50 text-green-800"),A.type==="error"&&(n?"bg-red-500/20 border-red-500/30 text-red-200":"bg-red-50/95 border-red-200/50 text-red-800"),A.type==="info"&&(n?"bg-blue-500/20 border-blue-500/30 text-blue-200":"bg-blue-50/95 border-blue-200/50 text-blue-800")),children:[A.type==="success"&&r.jsx(Et,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),A.type==="error"&&r.jsx(xt,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),A.type==="info"&&r.jsx(Ya,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),r.jsx("span",{className:"text-sm font-medium tracking-wide break-all min-w-0",children:A.message})]})})}),r.jsx(Be,{children:R&&r.jsxs(r.Fragment,{children:[r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:qe,className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[200]"}),r.jsx(me.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{type:"spring",damping:25,stiffness:300},className:"fixed inset-0 z-[201] flex items-center justify-center p-4 pointer-events-none",children:r.jsxs("div",{className:Pe("w-full max-w-2xl rounded-2xl shadow-2xl pointer-events-auto flex flex-col max-h-[80vh]",n?"bg-[#18181B] border border-white/10":"bg-white border border-black/5"),onClick:ce=>ce.stopPropagation(),children:[r.jsxs("div",{className:"px-6 pt-6 pb-4 flex items-center justify-between flex-shrink-0",children:[r.jsx("h2",{className:"text-lg font-medium tracking-wide",children:""}),r.jsx("button",{onClick:qe,className:Pe("w-8 h-8 rounded-full flex items-center justify-center transition-colors",n?"hover:bg-white/10":"hover:bg-black/5"),children:r.jsx(xt,{className:"w-5 h-5 opacity-70"})})]}),r.jsx("div",{className:"px-6 flex-1 overflow-hidden",children:r.jsx("textarea",{value:V,onChange:ce=>I(ce.target.value),className:Pe("w-full h-full min-h-[300px] p-4 rounded-lg text-sm resize-none outline-none border transition-all",n?"bg-white/5 border-white/10 focus:border-white/30 text-gray-300 placeholder:text-white/20":"bg-black/5 border-black/10 focus:border-black/30 text-gray-700 placeholder:text-black/20"),placeholder:"...",autoFocus:!0})}),r.jsxs("div",{className:"px-6 py-4 flex gap-3 flex-shrink-0",children:[r.jsx("button",{onClick:qe,className:Pe("flex-1 py-2.5 rounded-lg text-sm font-medium transition-all",n?"bg-white/5 hover:bg-white/10 text-white":"bg-black/5 hover:bg-black/10 text-black"),children:""}),r.jsx("button",{onClick:Re,className:Pe("flex-1 py-2.5 rounded-lg text-sm font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed",n?"bg-white/90 hover:bg-white text-black":"bg-black/90 hover:bg-black text-white"),disabled:!V.trim(),children:""})]})]})})]})}),r.jsx(Be,{children:W&&r.jsxs(r.Fragment,{children:[r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>T(!1),className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[200]"}),r.jsx(me.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{type:"spring",damping:25,stiffness:300},className:"fixed inset-0 z-[201] flex items-center justify-center p-4 pointer-events-none",children:r.jsxs("div",{className:Pe("w-full max-w-md rounded-2xl shadow-2xl pointer-events-auto backdrop-blur-xl border",n?"bg-[#18181B]/95 border-white/10":"bg-white/95 border-black/5"),onClick:ce=>ce.stopPropagation(),children:[r.jsxs("div",{className:"px-6 pt-6 pb-4",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[r.jsx("div",{className:Pe("w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0",n?"bg-red-500/20":"bg-red-50"),children:r.jsx(xn,{className:Pe("w-6 h-6",n?"text-red-400":"text-red-600")})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-medium tracking-wide",children:""}),r.jsx("p",{className:Pe("text-sm mt-1",n?"text-gray-400":"text-gray-600"),children:""})]})]}),r.jsx("p",{className:Pe("text-sm leading-relaxed",n?"text-gray-300":"text-gray-700"),children:""})]}),r.jsxs("div",{className:"px-6 py-4 flex gap-3",children:[r.jsx("button",{onClick:()=>T(!1),className:Pe("flex-1 py-2.5 rounded-lg text-sm font-medium transition-all",n?"bg-white/5 hover:bg-white/10 text-white":"bg-black/5 hover:bg-black/10 text-black"),children:""}),r.jsx("button",{onClick:Ne,className:Pe("flex-1 py-2.5 rounded-lg text-sm font-medium transition-all",n?"bg-red-600/90 hover:bg-red-600 text-white":"bg-red-600 hover:bg-red-700 text-white"),children:""})]})]})})]})})]})}const qO=`/* ---  --- */
.bubble {
  padding: 1rem !important;
  border-radius: 1rem !important;
  font-size: 0.875rem !important;
  line-height: 1.625 !important;
  letter-spacing: 0.025em !important;
  backdrop-filter: blur(4px) !important;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05) !important;
}

/* ---  --- */
/*  */
.bubble-user {
  background-color: rgba(255, 255, 255, 0.8) !important;
  color: #111827 !important;
  border-top-right-radius: 0.125rem !important;
  border: 1px solid rgba(255, 255, 255, 0.6) !important;
}

/*  (.dark ) */
.dark .bubble-user {
  background-color: rgba(255, 255, 255, 0.1) !important;
  color: #f3f4f6 !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
}

/* ---  --- */
/*  */
.bubble-character {
  background-color: rgba(255, 255, 255, 0.6) !important;
  color: #1f2937 !important;
  border-top-left-radius: 0.125rem !important;
  border: 1px solid rgba(255, 255, 255, 0.4) !important;
}

/*  */
.dark .bubble-character {
  background-color: rgba(255, 255, 255, 0.05) !important;
  color: #e5e7eb !important;
  border: 1px solid rgba(255, 255, 255, 0.05) !important;
}

/* ---  --- */
/*
.message-row:hover .bubble {
  transform: translateY(-1px);
  transition: transform 0.2s;
}
*/`,GO=({character:e,onClick:t,isDark:n})=>{const[s,a]=k.useState(null);return k.useEffect(()=>{let i=!0;return(async()=>{if(e.avatar)try{const c=await Ct(e.avatar);i&&a(c)}catch(c){console.error("Failed to load avatar for",e.name,c)}})(),()=>{i=!1}},[e.avatar]),r.jsxs(me.button,{whileTap:{scale:.98},onClick:t,className:Pe("w-full flex items-center gap-4 p-3.5 rounded-xl transition-all duration-300 group border mb-2 relative overflow-hidden",n?"bg-white/5 border-white/5 hover:bg-white/10 hover:border-white/10":"bg-black/5 border-black/5 hover:bg-black/10 hover:border-black/10"),children:[r.jsx("div",{className:Pe("relative w-12 h-12 rounded-full overflow-hidden border transition-colors flex-shrink-0 flex items-center justify-center",n?"border-white/10 bg-white/5":"border-black/10 bg-black/5"),children:s?r.jsx("img",{src:s,alt:e.name,className:"w-full h-full object-cover"}):r.jsx(mn,{className:Pe("w-6 h-6 opacity-50",n?"text-white":"text-black")})}),r.jsx("div",{className:"flex-1 text-left min-w-0 flex flex-col justify-center",children:r.jsx("div",{className:Pe("text-[15px] font-medium tracking-wide truncate pr-2",n?"text-white":"text-black"),children:e.name})}),r.jsx("div",{className:Pe("flex items-center justify-center w-8 h-8 rounded-full transition-all duration-300 opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0",n?"bg-white/10 text-white":"bg-black/5 text-black"),children:r.jsx(Qn,{className:"w-4 h-4"})})]})};function YO({onClose:e}){const[t,n]=k.useState("date"),[s,a]=k.useState(!1),[i,l]=k.useState(""),[c,u]=k.useState("light"),[p,h]=k.useState(""),[f,m]=k.useState(null),[g,y]=k.useState(!1),[b,S]=k.useState(""),[v,N]=k.useState(""),[C,_]=k.useState(""),[R,D]=k.useState(!1),[V,I]=k.useState([]),[A,U]=k.useState(""),[W,T]=k.useState([]),[M,j]=k.useState([]),[P,L]=k.useState(!1),[B,q]=k.useState([]),G=B.filter(Z=>Z.name.toLowerCase().includes(p.toLowerCase()));k.useEffect(()=>{(async()=>{try{const te=await se.get(J.APPEARANCE,"teleport_color_mode");u(te||"light");const ne=await se.get(J.MISC,"teleport_background");if(ne)if(ne==="custom_local")try{const Ne=await Ct("teleport_bg_custom");Ne&&l(Ne)}catch(Ne){console.error(Ne)}else l(ne);const ae=await se.get(J.APPEARANCE,"teleport_custom_css");ae&&(N(ae),_(ae));const we=await se.get(J.APPEARANCE,"teleport_css_presets");we&&I(we);const Ce=await se.get(J.WORLD_BOOKS,"world_books");Ce&&T(Ce.filter(Ne=>Ne.scope==="local"));const ue=await se.get(J.MISC,"teleport_active_worldbook_ids");if(ue&&Array.isArray(ue))j(ue);else{const Ne=await se.get(J.MISC,"teleport_active_worldbook_id");Ne&&j([Ne])}const pe=await se.get(J.CHARACTERS,"characters");pe&&Array.isArray(pe)&&q(pe);const je=await se.get(J.CHATS,"teleport_style_worldbook_id");je&&S(je)}catch(te){console.error(":",te)}})()},[]);const O=async Z=>{const te=Z.target.files?.[0];if(te)try{await wr("teleport_bg_custom",te);const ne=await Ct("teleport_bg_custom");ne&&(l(ne),await se.set(J.MISC,"teleport_background","custom_local"))}catch(ne){console.error("Failed to save background image:",ne)}},$=async()=>{l(""),await se.set(J.MISC,"teleport_background","");try{await fa("teleport_bg_custom")}catch{console.log("No local custom background to delete or delete failed")}},K=async Z=>{let te;M.includes(Z)?te=M.filter(ne=>ne!==Z):te=[...M,Z],j(te),await se.set(J.MISC,"teleport_active_worldbook_ids",te)},H=async()=>{j([]),await se.set(J.MISC,"teleport_active_worldbook_ids",[])},ee=async Z=>{S(Z),await se.set(J.CHATS,"teleport_style_worldbook_id",Z),y(!1)},Y=k.useMemo(()=>{if(!b)return"";const Z=W.find(ne=>ne.id===b);if(!Z)return"";const te=Z.content||Z.description||"";return te?`${Z.name}
${te}`:""},[b,W]),re=Z=>{_(Z.target.value)},de=async()=>{N(C),await se.set(J.APPEARANCE,"teleport_custom_css",C)},X=()=>{(!C||window.confirm(" CSS"))&&_(qO)};k.useMemo(()=>{if(!C)return"";try{return C.replace(/([^\r\n,{}]+)(,(?=[^}]*{)|\s*{)/g,"#preview-root $1$2")}catch{return""}},[C]);const oe=async()=>{const Z=c==="light"?"dark":"light";u(Z),await se.set(J.APPEARANCE,"teleport_color_mode",Z)},ye=async()=>{if(!A.trim()){Un.error("");return}const Z={id:Date.now().toString(),name:A.trim(),css:C,createdAt:new Date().toISOString()},te=[...V,Z];I(te),await se.set(J.APPEARANCE,"teleport_css_presets",te),U(""),Un.success(` "${Z.name}" `)},be=Z=>{_(Z.css),Un.success(` "${Z.name}"`)},Ie=async Z=>{const te=V.filter(ne=>ne.id!==Z);I(te),await se.set(J.APPEARANCE,"teleport_css_presets",te),Un.success("")},De=c==="dark",F=De?"bg-[#18181B]":"bg-white",le=De?"text-[#e5e5e5]":"text-[#2D2D2D]";return r.jsxs("div",{className:Pe("fixed inset-0 z-50 flex flex-col font-sans overflow-hidden",F,le,De?"dark":""),children:[r.jsx("style",{children:`
        .scroll-smooth { scroll-behavior: smooth; }
      `}),r.jsx(Be,{mode:"wait",children:f?r.jsx(KO,{character:f,onBack:()=>m(null),isDark:De,backgroundImage:i,customCSS:v,onToggleColorMode:oe,writingStyle:Y},"chat"):r.jsxs(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col h-full",children:[r.jsxs("div",{className:Pe("relative z-20 flex items-center justify-between px-6 transition-all duration-200","pt-12 pb-2 min-h-[80px]"),children:[r.jsx("div",{className:"flex items-center gap-4 z-30",children:r.jsx("button",{onClick:e,className:Pe("w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300 shadow-md backdrop-blur-xl border",De?"bg-black/20 border-white/10 text-white hover:bg-black/40":"bg-white/40 border-white/40 text-black hover:bg-white/60"),children:r.jsx(dn,{className:Pe("w-6 h-6 stroke-1",le)})})}),r.jsxs("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 pt-10 flex flex-col items-center justify-center pointer-events-none",children:[r.jsx("h1",{className:"text-2xl font-serif tracking-[0.15em] font-medium",children:t==="date"?"":""}),r.jsx("span",{className:Pe("text-[10px] tracking-[0.3em] uppercase opacity-50 font-sans mt-1",De?"text-white/60":"text-black/60"),children:t==="date"?"Whisper":"Banquet"})]}),r.jsx("div",{className:"flex items-center gap-2 z-30",children:r.jsx("button",{onClick:()=>a(!0),className:Pe("w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300 shadow-md backdrop-blur-xl border",De?"bg-black/20 border-white/10 text-white hover:bg-black/40":"bg-white/40 border-white/40 text-black hover:bg-white/60"),children:r.jsx(Qw,{className:Pe("w-5 h-5 stroke-1",le)})})})]}),r.jsx("div",{className:"flex-1 relative z-10 overflow-hidden px-6",children:r.jsx(Be,{mode:"wait",children:t==="date"?r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4,ease:[.16,1,.3,1]},className:"h-full flex flex-col items-center pt-8",children:B.length>0?r.jsxs("div",{className:"w-full max-w-2xl h-full flex flex-col",children:[r.jsxs("div",{className:"text-center space-y-2 mb-6 flex-shrink-0",children:[r.jsx("h2",{className:"text-lg font-serif tracking-widest font-medium opacity-90",children:""}),r.jsx("p",{className:Pe("text-[10px] tracking-[0.2em] uppercase opacity-60 font-sans"),children:"Select a Touken Danshi to whisper with"})]}),r.jsxs("div",{className:"relative group w-full mb-6 px-1 flex-shrink-0",children:[r.jsx("div",{className:Pe("absolute left-4 top-1/2 -translate-y-1/2 transition-colors",De?"text-white/30 group-focus-within:text-white/60":"text-black/30 group-focus-within:text-black/60"),children:r.jsx(ga,{className:"w-4 h-4"})}),r.jsx("input",{type:"text",value:p,onChange:Z=>h(Z.target.value),placeholder:"Search Touken Danshi...",className:Pe("w-full py-3 pl-10 pr-4 rounded-xl text-sm outline-none transition-all border bg-transparent",De?"border-white/10 focus:border-white/30 placeholder:text-white/20 text-white hover:bg-white/5 focus:bg-white/5":"border-black/10 focus:border-black/30 placeholder:text-black/20 text-black hover:bg-black/5 focus:bg-black/5")})]}),r.jsx("div",{className:"flex-1 overflow-hidden w-full",children:r.jsx(kd,{className:"h-full w-full px-1 [&>[data-slot=scroll-area-scrollbar]]:hidden",children:r.jsx("div",{className:"pb-28 px-1",children:G.length>0?G.map(Z=>r.jsx(GO,{character:Z,onClick:()=>m(Z),isDark:De},Z.id)):r.jsx("div",{className:"py-12 text-center opacity-40",children:r.jsxs("p",{className:"text-xs",children:['No Touken Danshi found matching "',p,'"']})})})})})]}):r.jsxs("div",{className:"flex flex-col items-center justify-center h-full opacity-50 pb-20",children:[r.jsx(Rd,{className:"w-12 h-12 mb-4 stroke-[1]"}),r.jsx("p",{className:"text-sm tracking-widest",children:"No Touken Danshi found."})]})},"date"):r.jsx(me.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.05},transition:{duration:.4,ease:[.16,1,.3,1]},className:"h-full flex flex-col items-center justify-center pb-24"},"party")})}),r.jsx("div",{className:"absolute bottom-10 left-0 right-0 z-30 flex justify-center",children:r.jsx("div",{className:Pe("flex items-center p-1.5 rounded-full shadow-lg backdrop-blur-xl border",De?"bg-black/20 border-white/10":"bg-white/40 border-white/40"),children:[{id:"date",icon:Rd,label:"",color:"text-rose-500",darkColor:"text-rose-400"},{id:"party",icon:Tl,label:"",color:"text-indigo-500",darkColor:"text-indigo-400"}].map(Z=>{const te=t===Z.id,ne=De?Z.darkColor:Z.color;return r.jsxs("button",{onClick:()=>n(Z.id),className:"relative px-6 py-3 rounded-full transition-all duration-300 flex items-center gap-2.5 group",children:[te&&r.jsx(me.div,{layoutId:"activeTab",className:Pe("absolute inset-0 rounded-full shadow-sm",De?"bg-[#3a3a3a]":"bg-white"),transition:{type:"spring",bounce:.2,duration:.6}}),r.jsx(Z.icon,{className:Pe("relative z-10 w-4 h-4 transition-colors duration-300",te?ne:De?"text-white/40 group-hover:text-white/70":"text-black/40 group-hover:text-black/70")}),r.jsx("span",{className:Pe("relative z-10 text-sm font-medium tracking-wide transition-colors duration-300",te?De?"text-white":"text-black":De?"text-white/40 hover:text-white/70":"text-black/40 hover:text-black/70"),children:Z.label})]},Z.id)})})})]},"main-interface")}),r.jsx(Be,{children:s&&r.jsxs(r.Fragment,{children:[r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-40 bg-black/20 backdrop-blur-[2px]",onClick:()=>a(!1)}),r.jsxs(me.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:Pe("absolute right-0 top-0 bottom-0 w-80 z-50 shadow-2xl flex flex-col","pt-10",De?"bg-[#18181B] border-l border-white/10":"bg-white border-l border-black/5"),children:[r.jsxs("div",{className:"px-8 pt-2 pb-8 flex items-center justify-between flex-shrink-0",children:[r.jsx("h2",{className:"text-xl font-medium tracking-[0.1em]",children:""}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:oe,className:Pe("w-8 h-8 rounded-full flex items-center justify-center transition-colors mr-1",De?"hover:bg-white/10":"hover:bg-black/5"),children:De?r.jsx(ru,{className:"w-5 h-5 opacity-70"}):r.jsx(Ym,{className:"w-5 h-5 opacity-70"})}),r.jsx("button",{onClick:()=>a(!1),className:Pe("w-8 h-8 rounded-full flex items-center justify-center transition-colors",De?"hover:bg-white/10":"hover:bg-black/5"),children:r.jsx(xt,{className:"w-5 h-5 opacity-70"})})]})]}),r.jsx(kd,{className:"flex-1 overflow-hidden",children:r.jsxs("div",{className:"px-8 pb-8 space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-sm font-medium tracking-wider opacity-60 uppercase",children:""}),r.jsxs("div",{className:"relative space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("label",{className:Pe("flex-1 flex items-center justify-center gap-2 p-3 rounded-lg border border-dashed cursor-pointer transition-all",De?"border-white/20 hover:border-white/40 hover:bg-white/5":"border-black/20 hover:border-black/40 hover:bg-black/5"),children:[r.jsx(au,{className:"w-4 h-4 opacity-50"}),r.jsx("span",{className:"text-sm opacity-70",children:i?"":""}),r.jsx("input",{type:"file",accept:"image/*",onChange:O,className:"hidden"})]}),i&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-12 h-12 rounded-lg overflow-hidden border border-white/10 shrink-0",children:r.jsx("img",{src:i,alt:"Background",className:"w-full h-full object-cover"})}),r.jsx("button",{onClick:$,className:Pe("w-8 h-8 rounded-full flex items-center justify-center transition-colors border",De?"border-white/10 hover:bg-white/10 text-white/70":"border-black/10 hover:bg-black/5 text-black/70"),title:"",children:r.jsx(xt,{className:"w-4 h-4"})})]})]}),r.jsx("div",{className:"text-[10px] opacity-40",children:""})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-sm font-medium tracking-wider opacity-60 uppercase",children:""}),r.jsx("button",{onClick:()=>L(!0),className:Pe("w-7 h-7 rounded-md flex items-center justify-center transition-colors border",De?"border-white/10 hover:bg-white/10 text-white/70":"border-black/10 hover:bg-black/5 text-black/70"),title:"",children:r.jsx(Zn,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"space-y-2",children:[M.length>0?W.filter(Z=>M.includes(Z.id)).map(Z=>r.jsxs("div",{className:Pe("flex items-center gap-3 p-3 rounded-lg border",De?"bg-indigo-900/20 border-indigo-500/50":"bg-indigo-50 border-indigo-200"),children:[r.jsx(Hw,{className:"w-4 h-4 opacity-60 shrink-0"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-sm font-medium truncate",children:Z.name}),Z.description&&r.jsx("div",{className:"text-xs opacity-50 truncate",children:Z.description})]})]},Z.id)):r.jsx("div",{className:"text-sm opacity-50 italic text-center py-4",children:""}),M.length>0&&r.jsx("button",{onClick:H,className:"text-xs opacity-50 hover:opacity-100 underline mt-2 w-full",children:""})]})]}),r.jsxs("div",{className:"space-y-4 relative z-50",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("h3",{className:"text-sm font-medium tracking-wider opacity-60 uppercase",children:""})}),r.jsxs("div",{className:"space-y-1 relative",children:[r.jsxs("button",{onClick:()=>y(!g),className:Pe("w-full p-3 flex items-center justify-between rounded-lg text-sm border transition-all",De?"bg-white/5 border-white/10 hover:bg-white/10 text-gray-300":"bg-black/5 border-black/10 hover:bg-black/10 text-gray-700"),children:[r.jsx("span",{className:"truncate",children:b?W.find(Z=>Z.id===b)?.name||"":""}),r.jsx(Qn,{className:Pe("w-4 h-4 opacity-50 transition-transform duration-200",g?"rotate-90":"")})]}),r.jsx(Be,{children:g&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-40 bg-transparent",onClick:()=>y(!1)}),r.jsx(me.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.15},className:Pe("absolute top-full left-0 right-0 mt-2 z-50 max-h-60 overflow-y-auto rounded-lg border shadow-xl",De?"bg-[#1f1f23] border-white/10":"bg-white border-black/10"),children:r.jsxs("div",{className:"p-1.5 space-y-0.5",children:[r.jsxs("button",{onClick:()=>ee(""),className:Pe("w-full text-left px-3 py-2.5 rounded-md text-sm transition-colors flex items-center justify-between",b?De?"text-gray-400 hover:bg-white/5 hover:text-gray-200":"text-gray-600 hover:bg-black/5 hover:text-gray-900":De?"bg-white/10 text-white":"bg-black/5 text-black"),children:[r.jsx("span",{children:""}),!b&&r.jsx(Et,{className:"w-3.5 h-3.5 opacity-70"})]}),W.map(Z=>{const te=b===Z.id;return r.jsxs("button",{onClick:()=>ee(Z.id),className:Pe("w-full text-left px-3 py-2.5 rounded-md text-sm transition-colors flex items-center justify-between group",te?De?"bg-white/10 text-white":"bg-black/5 text-black":De?"text-gray-400 hover:bg-white/5 hover:text-gray-200":"text-gray-600 hover:bg-black/5 hover:text-gray-900"),children:[r.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[r.jsx("div",{className:"truncate",children:Z.name}),Z.description&&r.jsx("div",{className:Pe("text-[10px] truncate mt-0.5 transition-colors",te?"opacity-70":"opacity-40 group-hover:opacity-60"),children:Z.description})]}),te&&r.jsx(Et,{className:"w-3.5 h-3.5 opacity-70 flex-shrink-0"})]},Z.id)}),W.length===0&&r.jsx("div",{className:"px-3 py-4 text-center text-xs opacity-40",children:""})]})})]})}),r.jsx("div",{className:"text-[10px] opacity-40 mt-1",children:""})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-sm font-medium tracking-wider opacity-60 uppercase",children:""}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:X,className:Pe("p-1.5 rounded-md transition-colors",De?"hover:bg-white/10 text-white/70":"hover:bg-black/5 text-black/70"),title:"",children:r.jsx(b7,{className:"w-4 h-4"})}),r.jsxs("button",{onClick:de,className:Pe("flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-medium transition-colors",De?"bg-white/10 hover:bg-white/20 text-white":"bg-black/5 hover:bg-black/10 text-black"),children:[r.jsx(ti,{className:"w-3.5 h-3.5"}),""]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("textarea",{value:C,onChange:re,placeholder:".bubble { ... }",className:Pe("w-full h-40 p-3 rounded-lg text-xs font-mono resize-none outline-none border transition-all",De?"bg-white/5 border-white/10 focus:border-white/30 text-gray-300 placeholder:text-white/20":"bg-black/5 border-black/10 focus:border-black/30 text-gray-700 placeholder:text-black/20")}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"text",value:A,onChange:Z=>U(Z.target.value),placeholder:"...",className:Pe("flex-1 px-3 py-2 rounded-md text-xs outline-none border transition-all",De?"bg-white/5 border-white/10 focus:border-white/30 text-gray-300 placeholder:text-white/20":"bg-black/5 border-black/10 focus:border-black/30 text-gray-700 placeholder:text-black/20"),onKeyDown:Z=>{Z.key==="Enter"&&ye()}}),r.jsx("button",{onClick:ye,className:Pe("p-2 rounded-md transition-colors border",De?"border-white/10 hover:bg-white/10 text-white/70":"border-black/10 hover:bg-black/5 text-black/70"),title:"",children:r.jsx(Zn,{className:"w-4 h-4"})})]}),V.length>0&&r.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:V.map(Z=>r.jsxs("div",{className:Pe("flex items-center justify-between gap-2 p-2.5 rounded-md border group",De?"bg-white/5 border-white/5 hover:bg-white/10 hover:border-white/10":"bg-black/5 border-black/5 hover:bg-black/10 hover:border-black/10"),children:[r.jsx("button",{onClick:()=>be(Z),className:"flex-1 text-left text-xs font-medium truncate",children:Z.name}),r.jsx("button",{onClick:()=>Ie(Z.id),className:Pe("p-1.5 rounded transition-colors",De?"hover:bg-red-500/20 text-red-400":"hover:bg-red-50 text-red-600"),title:"",children:r.jsx(pT,{className:"w-3.5 h-3.5"})})]},Z.id))})]}),r.jsx("div",{className:"pt-2",children:r.jsxs(XE,{onClick:()=>D(!0),variant:"outline",className:Pe("w-full flex items-center justify-center gap-2 border-dashed h-12",De?"border-white/20 hover:bg-white/5":"border-black/20 hover:bg-black/5"),children:[r.jsx(x7,{className:"w-4 h-4 opacity-70"}),r.jsx("span",{className:"opacity-70",children:""})]})})]})]})]})})]})]})}),r.jsx(Be,{children:R&&r.jsxs(me.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:Pe("fixed inset-0 z-[60] flex flex-col font-sans",De?"bg-[#18181B] text-[#e5e5e5]":"bg-white text-[#2D2D2D]",De?"dark":""),id:"preview-root",children:[r.jsx("style",{children:C}),i&&r.jsx("div",{className:"absolute inset-0 z-0",children:r.jsx("img",{src:i,alt:"Background",className:"w-full h-full object-cover opacity-100"})}),r.jsx("div",{className:Pe("absolute top-0 left-0 right-0 h-40 z-10 pointer-events-none",De?"bg-gradient-to-b from-[#18181B] via-[#18181B]/80 to-transparent":"bg-gradient-to-b from-white via-white/80 to-transparent")}),r.jsxs("div",{className:"relative z-20 flex items-center justify-between px-6 pt-12 pb-4",children:[r.jsx("div",{className:"w-12 h-12"})," ",r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("span",{className:"text-lg font-serif font-medium tracking-wide",children:""}),r.jsx("span",{className:"text-[10px] uppercase tracking-[0.2em] opacity-50",children:"Preview Mode"})]}),r.jsx("button",{onClick:()=>D(!1),className:Pe("w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300 shadow-md backdrop-blur-xl border",De?"bg-black/20 border-white/10 text-white hover:bg-black/40":"bg-white/40 border-white/40 text-black hover:bg-white/60"),children:r.jsx(xt,{className:"w-6 h-6 stroke-1"})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto relative z-10 pb-20",children:r.jsxs("div",{className:"max-w-3xl mx-auto w-full pt-10",children:[r.jsx(ll,{item:{type:"header"}}),r.jsx(ll,{item:{id:"p1",text:"",sender:"user",timestamp:new Date},isDark:De,userAvatarUrl:null,characterAvatarUrl:null,character:{name:""}}),r.jsx(ll,{item:{id:"p2",text:"",sender:"character",timestamp:new Date},isDark:De,userAvatarUrl:null,characterAvatarUrl:null,character:{name:""}}),r.jsx(ll,{item:{id:"p3",text:`

`,sender:"user",timestamp:new Date},isDark:De,userAvatarUrl:null,characterAvatarUrl:null,character:{name:""}})]})})]})}),r.jsx(Be,{children:P&&r.jsxs(r.Fragment,{children:[r.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-40 bg-black/20 backdrop-blur-[2px]",onClick:()=>L(!1)}),r.jsxs(me.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:Pe("absolute right-0 top-0 bottom-0 w-80 z-50 shadow-2xl flex flex-col","pt-10",De?"bg-[#18181B] border-l border-white/10":"bg-white border-l border-black/5"),children:[r.jsxs("div",{className:"px-8 pt-2 pb-6 flex items-center justify-between flex-shrink-0",children:[r.jsx("h2",{className:"text-lg font-medium tracking-wide",children:""}),r.jsx("button",{onClick:()=>L(!1),className:Pe("w-8 h-8 rounded-full flex items-center justify-center transition-colors",De?"hover:bg-white/10":"hover:bg-black/5"),children:r.jsx(xt,{className:"w-5 h-5 opacity-70"})})]}),r.jsx(kd,{className:"flex-1 overflow-hidden",children:r.jsx("div",{className:"px-8 pb-8 space-y-2",children:W.length>0?W.map(Z=>{const te=M.includes(Z.id);return r.jsxs("div",{onClick:()=>K(Z.id),className:Pe("flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all",te?De?"bg-indigo-900/20 border-indigo-500/50":"bg-indigo-50 border-indigo-200":De?"bg-white/5 border-white/5 hover:bg-white/10":"bg-black/5 border-black/5 hover:bg-black/10"),children:[r.jsx("div",{className:Pe("w-5 h-5 rounded flex items-center justify-center border transition-colors shrink-0",te?De?"bg-indigo-500 border-indigo-500 text-white":"bg-indigo-600 border-indigo-600 text-white":De?"border-white/20":"border-black/20"),children:te&&r.jsx(Et,{className:"w-3 h-3"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-sm font-medium truncate",children:Z.name}),Z.description&&r.jsx("div",{className:"text-xs opacity-50 truncate",children:Z.description})]})]},Z.id)}):r.jsx("div",{className:"text-sm opacity-50 italic text-center py-8",children:""})})}),W.length>0&&r.jsx("div",{className:"px-8 pb-8 pt-4 border-t border-white/10 flex-shrink-0",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"text-xs opacity-50",children:[" ",M.length," "]}),M.length>0&&r.jsx("button",{onClick:H,className:Pe("text-xs underline transition-colors",De?"text-white/50 hover:text-white/100":"text-black/50 hover:text-black/100"),children:""})]})})]})]})})]})}const as={initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20}},is={duration:.2,ease:"easeInOut"};function ZO({userData:e,preloadedImages:t={},initialChatId:n}){const[s,a]=k.useState(0),[i,l]=k.useState(0),[c,u]=k.useState(!1),[p,h]=k.useState(e),[f,m]=k.useState(!1),[g,y]=k.useState(!1),[b,S]=k.useState(!1),[v,N]=k.useState(!1),[C,_]=k.useState(!1),[R,D]=k.useState(!1),[V,I]=k.useState(!1),[A,U]=k.useState(!1),[W,T]=k.useState(!1),[M,j]=k.useState(!1),[P,L]=k.useState(n||null),[B,q]=k.useState(t.desktop_wallpaper||null),G=k.useRef(0),O=k.useRef(0),$=k.useRef(null),K=k.useRef(W),H=k.useRef(P);k.useEffect(()=>{K.current=W},[W]),k.useEffect(()=>{H.current=P},[P]),k.useEffect(()=>{n&&(T(!0),L(n))},[n]),k.useEffect(()=>{const ce=Te=>{if(Te.data){if(Te.data.type==="open-conversation"){const{conversationId:Me}=Te.data;T(!0),L(Me)}if(Te.data.type==="AI_TASK_COMPLETED"){const{messages:Me,characterId:Oe,displayName:Ke}=Te.data.payload;if(!Me||Me.length===0)return;const Ze=Me[Me.length-1];if(Ze.text&&(Ze.text.includes("")||Ze.text.includes("")||Ze.text.includes('"permanent":')||Ze.text.includes('"summary":')||Ze.text.includes("```json"))){console.log("[Memory] Received extraction result for",Oe);try{const jt=R5(Ze.text);B5(Oe,jt).then(()=>{Un.success("",{description:` ${jt.length} `,duration:3e3})})}catch(jt){console.error("[Memory] Failed to parse/save memories",jt)}return}const pt=Ke||Ze.senderName||"",ht=K.current;H.current,ht||Un(pt,{description:Ze.text,action:{label:"",onClick:()=>{T(!0),L(Oe)}},duration:5e3})}if(Te.data.type==="AI_TASK_FAILED"){const{characterId:Me,error:Oe,taskType:Ke}=Te.data.payload;if(Ke==="shop_generation"||Ke==="whisper_chat_reply"||Ke==="memory_summary"||Ke==="private_chat_reply")return;const Ze=K.current,pt=H.current;(!Ze||pt!==Me)&&Un.error("",{description:Oe,duration:5e3})}}};return"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",ce),()=>{"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener("message",ce)}},[]),k.useEffect(()=>{(async()=>{try{const Me=await se.get(J.MISC,"desktop_wallpaper");if(Me)if(Me.startsWith("data:"))q(Me);else{const Oe=await Ct(Me);q(Oe)}}catch(Me){console.error("Failed to load wallpaper:",Me)}})();const Te=Me=>{q(Me.detail)};return window.addEventListener("wallpaperChange",Te),()=>{window.removeEventListener("wallpaperChange",Te)}},[]);const ee=ce=>{h(ce)},Y=()=>{T(!1),y(!1),S(!1),N(!1),_(!1),D(!1),I(!1),U(!1),m(!0)},re=()=>{m(!1)},de=()=>{y(!0)},X=()=>{y(!1)},oe=()=>{S(!0)},ye=()=>{S(!1)},be=()=>{N(!0)},Ie=()=>{N(!1)},De=()=>{_(!0)},F=()=>{_(!1)},le=()=>{D(!0)},Z=()=>{D(!1)},te=()=>{I(!0)},ne=()=>{I(!1)},ae=()=>{U(!0)},we=()=>{U(!1)},Ce=()=>{T(!0)},ue=()=>{T(!1)},pe=()=>{j(!0)},je=()=>{j(!1)},Ne=ce=>{L(ce)},he=ce=>{u(!0),G.current=ce.touches[0].clientX,O.current=ce.touches[0].clientX},Ee=ce=>{if(!c)return;O.current=ce.touches[0].clientX;const Te=O.current-G.current,Oe=s*-50+Te/window.innerWidth*50;Oe<=0&&Oe>=-50&&l(Oe)},Re=()=>{if(!c)return;const ce=O.current-G.current,Te=window.innerWidth*.3;ce<-Te&&s===0?(a(1),l(-50)):ce>Te&&s===1?(a(0),l(0)):l(s*-50),u(!1)},qe=ce=>{u(!0),G.current=ce.clientX,O.current=ce.clientX},Ye=ce=>{if(!c)return;O.current=ce.clientX;const Te=O.current-G.current,Oe=s*-50+Te/window.innerWidth*50;Oe<=0&&Oe>=-50&&l(Oe)},nt=()=>{if(!c)return;const ce=O.current-G.current,Te=window.innerWidth*.3;ce<-Te&&s===0?(a(1),l(-50)):ce>Te&&s===1?(a(0),l(0)):l(s*-50),u(!1)};return k.useEffect(()=>{const ce=()=>{c&&(u(!1),l(s*-50))};return window.addEventListener("mouseup",ce),()=>window.removeEventListener("mouseup",ce)},[c,s]),r.jsxs("div",{ref:$,className:"relative w-full h-screen overflow-hidden","data-name":"",onTouchStart:he,onTouchMove:Ee,onTouchEnd:Re,onMouseDown:qe,onMouseMove:Ye,onMouseUp:nt,children:[B?r.jsx("img",{alt:"",className:"absolute inset-0 w-full h-full object-cover pointer-events-none",src:B}):r.jsx("div",{className:"absolute inset-0 w-full h-full pointer-events-none",style:{backgroundColor:"#D5EAE3"}}),r.jsxs("div",{className:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full h-full max-w-[440px] max-h-[956px] aspect-[440/956] overflow-hidden",children:[r.jsxs("div",{className:"absolute inset-0 flex transition-transform",style:{transform:`translateX(${i}%)`,transitionDuration:c?"0ms":"300ms",width:"200%"},children:[r.jsx("div",{className:"relative w-1/2 h-full flex-shrink-0",children:r.jsx(wD,{userData:p,onUserDataChange:ee,onChatClick:Ce,onMemoryClick:te,onTransferClick:pe,preloadedImages:t})}),r.jsx("div",{className:"relative w-1/2 h-full flex-shrink-0",children:r.jsx(ND,{preloadedImages:t,onShopClick:be,onHealthClick:De,onScheduleClick:le,onEntertainmentClick:ae})})]}),r.jsx(TD,{onSettingsClick:Y,onWorldBookClick:de,onCharacterClick:oe,onChatClick:Ce}),r.jsx(DD,{currentPage:s})]}),r.jsx(Be,{children:f&&r.jsx(me.div,{variants:as,initial:"initial",animate:"animate",exit:"exit",transition:is,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:ce=>ce.stopPropagation(),onTouchStart:ce=>ce.stopPropagation(),onMouseDown:ce=>ce.stopPropagation(),children:r.jsx(eI,{onClose:re})},"settings")}),r.jsx(Be,{children:g&&r.jsx(me.div,{variants:as,initial:"initial",animate:"animate",exit:"exit",transition:is,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:ce=>ce.stopPropagation(),onTouchStart:ce=>ce.stopPropagation(),onMouseDown:ce=>ce.stopPropagation(),children:r.jsx(rI,{onClose:X})},"worldbook-app")}),r.jsx(Be,{children:b&&r.jsx(me.div,{variants:as,initial:"initial",animate:"animate",exit:"exit",transition:is,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:ce=>ce.stopPropagation(),onTouchStart:ce=>ce.stopPropagation(),onMouseDown:ce=>ce.stopPropagation(),children:r.jsx(oI,{onClose:ye})},"character-app")}),r.jsx(Be,{children:v&&r.jsx(me.div,{variants:as,initial:"initial",animate:"animate",exit:"exit",transition:is,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:ce=>ce.stopPropagation(),onTouchStart:ce=>ce.stopPropagation(),onMouseDown:ce=>ce.stopPropagation(),children:r.jsx(NP,{onClose:Ie})},"shop-app")}),r.jsx(Be,{children:C&&r.jsx(me.div,{variants:as,initial:"initial",animate:"animate",exit:"exit",transition:is,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:ce=>ce.stopPropagation(),onTouchStart:ce=>ce.stopPropagation(),onMouseDown:ce=>ce.stopPropagation(),children:r.jsx(fP,{onClose:F})},"health-app")}),r.jsx(Be,{children:R&&r.jsx(me.div,{variants:as,initial:"initial",animate:"animate",exit:"exit",transition:is,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:ce=>ce.stopPropagation(),onTouchStart:ce=>ce.stopPropagation(),onMouseDown:ce=>ce.stopPropagation(),children:r.jsx(PP,{onClose:Z})},"schedule-app")}),r.jsx(Be,{children:V&&r.jsx(me.div,{variants:as,initial:"initial",animate:"animate",exit:"exit",transition:is,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:ce=>ce.stopPropagation(),onTouchStart:ce=>ce.stopPropagation(),onMouseDown:ce=>ce.stopPropagation(),children:r.jsx(sR,{onClose:ne})},"memory-app")}),r.jsx(Be,{children:A&&r.jsx(me.div,{variants:as,initial:"initial",animate:"animate",exit:"exit",transition:is,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:ce=>ce.stopPropagation(),onTouchStart:ce=>ce.stopPropagation(),onMouseDown:ce=>ce.stopPropagation(),children:r.jsx(lR,{onClose:we})},"entertainment-app")}),r.jsx(Be,{children:W&&r.jsx(me.div,{variants:as,initial:"initial",animate:"animate",exit:"exit",transition:is,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:ce=>ce.stopPropagation(),onTouchStart:ce=>ce.stopPropagation(),onMouseDown:ce=>ce.stopPropagation(),children:r.jsx(oP,{onClose:ue,initialChatId:P,onChatChange:Ne})},"chat-app")}),r.jsx(Be,{children:M&&r.jsx(me.div,{variants:as,initial:"initial",animate:"animate",exit:"exit",transition:is,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:ce=>ce.stopPropagation(),onTouchStart:ce=>ce.stopPropagation(),onMouseDown:ce=>ce.stopPropagation(),children:r.jsx(YO,{onClose:je})},"teleport-app")})]})}function QO(){const[e,t]=k.useState(null),[n,s]=k.useState(!1),[a,i]=k.useState(!1),[l,c]=k.useState(!1);k.useEffect(()=>{const h=/iPad|iPhone|iPod/.test(navigator.userAgent);i(h);const f=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||document.referrer.includes("android-app://");c(f);const m=y=>{y.preventDefault(),t(y),!localStorage.getItem("pwa-install-prompt-closed")&&!f&&s(!0)};window.addEventListener("beforeinstallprompt",m),h&&!f&&(localStorage.getItem("pwa-install-ios-prompt-closed")||s(!0));const g=()=>{s(!1),t(null),localStorage.removeItem("pwa-install-prompt-closed"),localStorage.removeItem("pwa-install-ios-prompt-closed")};return window.addEventListener("appinstalled",g),()=>{window.removeEventListener("beforeinstallprompt",m),window.removeEventListener("appinstalled",g)}},[]);const u=async()=>{if(!e)return;e.prompt();const{outcome:h}=await e.userChoice;console.log(h==="accepted"?"":""),t(null),s(!1)},p=()=>{s(!1),a?localStorage.setItem("pwa-install-ios-prompt-closed","true"):localStorage.setItem("pwa-install-prompt-closed","true")};return l||!n?null:a?r.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t-2 border-gray-200 shadow-lg z-50 animate-slide-up",children:r.jsx("div",{className:"max-w-[420px] mx-auto p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] text-black mb-2",children:" Touken OS "}),r.jsxs("div",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[13px] text-[#666] space-y-1",children:[r.jsxs("p",{className:"flex items-center gap-1",children:[" ",r.jsx(I9,{className:"w-4 h-4 inline"})," "]}),r.jsx("p",{children:'""'})]})]}),r.jsx("button",{onClick:p,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(xt,{className:"w-5 h-5 text-gray-500"})})]})})}):r.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t-2 border-gray-200 shadow-lg z-50 animate-slide-up",children:r.jsx("div",{className:"max-w-[420px] mx-auto p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] text-black mb-1",children:" Touken OS"}),r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[13px] text-[#666]",children:""})]}),r.jsxs("button",{onClick:u,className:"bg-black text-white px-4 py-2 rounded-lg font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] flex items-center gap-2 hover:bg-gray-800 transition-colors",children:[r.jsx(d7,{className:"w-4 h-4"}),""]}),r.jsx("button",{onClick:p,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(xt,{className:"w-5 h-5 text-gray-500"})})]})})})}function XO({onAnimationComplete:e}){const[t,n]=k.useState(0),[s,a]=k.useState([]);return k.useEffect(()=>{let u=0;const p=setInterval(()=>{u++;const h=Math.min(100,u/100*100);n(h),h>10&&s.length===0&&a(f=>[...f,">> ..."]),h>30&&s.length===1&&a(f=>[...f,">> ..."]),h>50&&s.length===2&&a(f=>[...f,">> ..."]),h>70&&s.length===3&&a(f=>[...f,">> ..."]),h>90&&s.length===4&&a(f=>[...f,">> Touken OS "]),u>=100&&(clearInterval(p),e&&setTimeout(e,200))},20);return()=>clearInterval(p)},[s.length]),r.jsxs("div",{className:"fixed inset-0 bg-[#F5F5F5] flex flex-col items-center justify-center font-['Source_Han_Sans_CN_VF',sans-serif] z-50",children:[r.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.03]",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),r.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-[#2C2C2C]"}),r.jsxs("div",{className:"w-full max-w-[320px] flex flex-col items-center relative z-10",children:[r.jsxs(me.div,{initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0},transition:{duration:.8,ease:"easeOut"},className:"w-32 h-32 mb-12 relative",children:[r.jsx("div",{className:"absolute inset-0 bg-white rounded-full shadow-2xl opacity-50 blur-xl scale-90"}),r.jsx("img",{src:F2,alt:"Touken OS Logo",className:"w-full h-full object-contain relative z-10 drop-shadow-lg"})]}),r.jsx("div",{className:"w-full h-1 bg-[#D6D3CC] mb-6 relative overflow-hidden rounded-full",children:r.jsx(me.div,{className:"absolute top-0 left-0 bottom-0 bg-[#2C2C2C]",initial:{width:"0%"},animate:{width:`${t}%`},transition:{ease:"linear",duration:.1}})}),r.jsx("div",{className:"w-full h-24 font-mono text-[10px] text-[#5A5A55] space-y-1.5 overflow-hidden flex flex-col justify-end",children:r.jsx(Be,{mode:"popLayout",children:s.map((i,l)=>r.jsxs(me.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"flex items-center gap-2",children:[r.jsx("span",{className:"w-1 h-1 bg-[#34C759] rounded-full shrink-0 animate-pulse"}),r.jsx("span",{className:"truncate tracking-tight",children:i})]},l))})}),r.jsx("div",{className:"absolute -bottom-24 text-[9px] text-[#8C8C89] font-mono tracking-widest opacity-60",children:"CHRONOS GOVERNMENT TERMINAL V1.0"})]})]})}function JO(){k.useEffect(()=>{if("serviceWorker"in navigator){const n=()=>{navigator.serviceWorker.register("/sw.js").then(s=>{console.log("SW registered: ",s),s.addEventListener("updatefound",()=>{const a=s.installing;a&&a.addEventListener("statechange",()=>{a.state==="installed"&&navigator.serviceWorker.controller&&(console.log("New content is available; please refresh."),confirm("")&&(a.postMessage({type:"SKIP_WAITING"}),window.location.reload()))})})}).catch(s=>{if(s.message&&s.message.includes("MIME type")){console.warn("Service Worker registration skipped: sw.js not served with correct MIME type (likely dev environment issue).");return}console.log("SW registration failed: ",s)})};document.readyState==="complete"?n():window.addEventListener("load",n),navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()})}(()=>{let n=document.querySelector('meta[name="viewport"]');n||(n=document.createElement("meta"),n.setAttribute("name","viewport"),document.head.appendChild(n)),n.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover");let s=document.querySelector('meta[name="theme-color"]');s||(s=document.createElement("meta"),s.setAttribute("name","theme-color"),document.head.appendChild(s)),s.setAttribute("content","#000000");let a=document.querySelector('meta[name="apple-mobile-web-app-capable"]');a||(a=document.createElement("meta"),a.setAttribute("name","apple-mobile-web-app-capable"),document.head.appendChild(a)),a.setAttribute("content","yes");let i=document.querySelector('meta[name="apple-mobile-web-app-status-bar-style"]');i||(i=document.createElement("meta"),i.setAttribute("name","apple-mobile-web-app-status-bar-style"),document.head.appendChild(i)),i.setAttribute("content","default");let l=document.querySelector('meta[name="apple-mobile-web-app-title"]');l||(l=document.createElement("meta"),l.setAttribute("name","apple-mobile-web-app-title"),document.head.appendChild(l)),l.setAttribute("content","Touken OS");let c=document.querySelector('meta[name="description"]');c||(c=document.createElement("meta"),c.setAttribute("name","description"),document.head.appendChild(c)),c.setAttribute("content","");let u=document.querySelector('link[rel="manifest"]');u||(u=document.createElement("link"),u.setAttribute("rel","manifest"),document.head.appendChild(u)),u.setAttribute("href","/manifest.json");let p=document.querySelector('link[rel="apple-touch-icon"]');p||(p=document.createElement("link"),p.setAttribute("rel","apple-touch-icon"),p.setAttribute("href","/icon-192.png"),document.head.appendChild(p));let h=document.querySelector('link[rel="icon"]');h||(h=document.createElement("link"),h.setAttribute("rel","icon"),h.setAttribute("type","image/png"),h.setAttribute("sizes","32x32"),h.setAttribute("href","/icon-192.png"),document.head.appendChild(h))})(),document.addEventListener("gesturestart",n=>{n.preventDefault()}),document.addEventListener("gesturechange",n=>{n.preventDefault()}),document.addEventListener("gestureend",n=>{n.preventDefault()});let t=0;document.addEventListener("touchend",n=>{const s=Date.now();s-t<=300&&n.preventDefault(),t=s},!1)},[])}function e$(){const[e,t]=k.useState("loading"),[n,s]=k.useState(null),[a,i]=k.useState(!0),[l,c]=k.useState({}),[u,p]=k.useState(null),[h,f]=k.useState(!1),[m,g]=k.useState(null);JO(),k.useEffect(()=>{window.debugImageStorage=async()=>{console.log("=== Image Storage Debug ===");const b=await r5();console.log("Category stats:",b);const S=await Qm();return console.log("All images:",S),console.log("Total images:",S.length),{stats:b,images:S}},console.log("Debug tools available:"),console.log("- window.debugImageStorage() - ")},[]),k.useEffect(()=>{[{name:"apple-mobile-web-app-capable",content:"yes"},{name:"apple-mobile-web-app-status-bar-style",content:"default"},{name:"apple-mobile-web-app-title",content:"Touken OS"},{name:"mobile-web-app-capable",content:"yes"}].forEach(v=>{let N=document.querySelector(`meta[name="${v.name}"]`);N||(N=document.createElement("meta"),N.setAttribute("name",v.name),document.head.appendChild(N)),N.setAttribute("content",v.content)}),[{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:""},{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Bakbak+One&family=Bona+Nova:ital,wght@0,400;0,700;1,400&family=Braah+One&display=swap"}].forEach(v=>{if(!document.querySelector(`link[href="${v.href}"]`)){const N=document.createElement("link");N.rel=v.rel,N.href=v.href,v.crossOrigin!==void 0&&(N.crossOrigin=v.crossOrigin),document.head.appendChild(N)}})},[]),k.useEffect(()=>{(async()=>{try{console.log("Initializing application..."),console.log("Initializing database..."),await se.init();try{console.log("Cleaning up stale AI tasks..."),await se.clear(J.AI_TASKS)}catch(V){console.warn("Failed to clear AI tasks store:",V)}(async()=>{try{const V=await se.get(J.MISC,"memory_extraction_settings");V&&await Ip(V.summary_retention??"forever",V.event_retention??"forever",V.date_retention??"forever"),await xs.refreshAllCharactersMemories()}catch(V){console.warn("[App] Background memory cleanup failed",V)}})(),!1&&"Notification"in window&&Notification.permission;const N=new URLSearchParams(window.location.search).get("chatId");N&&(console.log("Found chatId in URL:",N),p(N),window.history.replaceState({},"","/"));const C=se.get(J.USER_DATA,"userData"),_=(async()=>{const V=["desktop_wallpaper","profileBackground","avatar","anniversary","system-icon-desktop1-chat","system-icon-desktop1-forum","system-icon-desktop1-memory","system-icon-desktop1-transfer","desktop2_timeImage","desktop2_card1","desktop2_card2","desktop2_card3","desktop2_card4","system-icon-desktop2-shop","system-icon-desktop2-game","system-icon-desktop2-schedule","system-icon-desktop2-health"],I={};return await Promise.all(V.map(async A=>{try{I[A]=await Ct(A)}catch(U){console.warn(`Failed to preload image ${A}`,U),I[A]=null}})),I})(),[R,D]=await Promise.all([C,_]);g({userData:R||null,images:D})}catch(S){console.error("Failed to initialize app:",S),g({userData:null,images:{}})}})()},[]),k.useEffect(()=>{h&&m&&(console.log("Animation complete and data ready, transitioning..."),c(m.images),m.userData?(console.log("User data found, redirecting to desktop"),s(m.userData),t("desktop")):(console.log("No user data found, showing login page"),t("login")),setTimeout(()=>i(!1),100))},[h,m]);const y=b=>{s(b),t("desktop")};return r.jsxs(r.Fragment,{children:[r.jsxs(Be,{mode:"wait",children:[e==="loading"&&r.jsx(me.div,{className:"fixed inset-0 z-50",exit:{opacity:0,scale:1.1,filter:"blur(10px)"},transition:{duration:.8,ease:"easeInOut"},children:r.jsx(XO,{onAnimationComplete:()=>f(!0)})},"loading"),e==="login"&&r.jsx(me.div,{className:"fixed inset-0 z-40",initial:{opacity:0,scale:.95,filter:"blur(10px)"},animate:{opacity:1,scale:1,filter:"blur(0px)"},exit:{opacity:0,scale:1.05,filter:"blur(10px)"},transition:{duration:.8,ease:"easeInOut"},children:r.jsx(_T,{onLoginSuccess:y})},"login"),e==="desktop"&&n&&r.jsx(me.div,{className:"fixed inset-0 z-30",initial:{opacity:0,scale:.95,filter:"blur(10px)"},animate:{opacity:1,scale:1,filter:"blur(0px)"},exit:{opacity:0,scale:1.05,filter:"blur(10px)"},transition:{duration:.8,ease:"easeInOut"},children:r.jsx(ZO,{userData:n,preloadedImages:l,initialChatId:u})},"desktop")]}),r.jsx(QO,{}),r.jsx(eD,{position:"top-center"})]})}hj.createRoot(document.getElementById("root")).render(r.jsx(e$,{}));
