function y5(e,n){for(var s=0;s<n.length;s++){const a=n[s];if(typeof a!="string"&&!Array.isArray(a)){for(const i in a)if(i!=="default"&&!(i in e)){const l=Object.getOwnPropertyDescriptor(a,i);l&&Object.defineProperty(e,i,l.get?l:{enumerable:!0,get:()=>a[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function s(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(i){if(i.ep)return;i.ep=!0;const l=s(i);fetch(i.href,l)}})();var Wl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $c(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var zu={exports:{}},mo={},Ou={exports:{}},pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z0;function w5(){if(z0)return pt;z0=1;var e=Symbol.for("react.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.iterator;function x(O){return O===null||typeof O!="object"?null:(O=f&&O[f]||O["@@iterator"],typeof O=="function"?O:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,g={};function k(O,V,ee){this.props=O,this.context=V,this.refs=g,this.updater=ee||b}k.prototype.isReactComponent={},k.prototype.setState=function(O,V){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,V,"setState")},k.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function w(){}w.prototype=k.prototype;function C(O,V,ee){this.props=O,this.context=V,this.refs=g,this.updater=ee||b}var N=C.prototype=new w;N.constructor=C,y(N,k.prototype),N.isPureReactComponent=!0;var A=Array.isArray,P=Object.prototype.hasOwnProperty,B={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function D(O,V,ee){var q,G={},Q=null,le=null;if(V!=null)for(q in V.ref!==void 0&&(le=V.ref),V.key!==void 0&&(Q=""+V.key),V)P.call(V,q)&&!$.hasOwnProperty(q)&&(G[q]=V[q]);var ne=arguments.length-2;if(ne===1)G.children=ee;else if(1<ne){for(var ie=Array(ne),ve=0;ve<ne;ve++)ie[ve]=arguments[ve+2];G.children=ie}if(O&&O.defaultProps)for(q in ne=O.defaultProps,ne)G[q]===void 0&&(G[q]=ne[q]);return{$$typeof:e,type:O,key:Q,ref:le,props:G,_owner:B.current}}function T(O,V){return{$$typeof:e,type:O.type,key:V,ref:O.ref,props:O.props,_owner:O._owner}}function H(O){return typeof O=="object"&&O!==null&&O.$$typeof===e}function K(O){var V={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ee){return V[ee]})}var E=/\/+/g;function I(O,V){return typeof O=="object"&&O!==null&&O.key!=null?K(""+O.key):V.toString(36)}function S(O,V,ee,q,G){var Q=typeof O;(Q==="undefined"||Q==="boolean")&&(O=null);var le=!1;if(O===null)le=!0;else switch(Q){case"string":case"number":le=!0;break;case"object":switch(O.$$typeof){case e:case n:le=!0}}if(le)return le=O,G=G(le),O=q===""?"."+I(le,0):q,A(G)?(ee="",O!=null&&(ee=O.replace(E,"$&/")+"/"),S(G,V,ee,"",function(ve){return ve})):G!=null&&(H(G)&&(G=T(G,ee+(!G.key||le&&le.key===G.key?"":(""+G.key).replace(E,"$&/")+"/")+O)),V.push(G)),1;if(le=0,q=q===""?".":q+":",A(O))for(var ne=0;ne<O.length;ne++){Q=O[ne];var ie=q+I(Q,ne);le+=S(Q,V,ee,ie,G)}else if(ie=x(O),typeof ie=="function")for(O=ie.call(O),ne=0;!(Q=O.next()).done;)Q=Q.value,ie=q+I(Q,ne++),le+=S(Q,V,ee,ie,G);else if(Q==="object")throw V=String(O),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.");return le}function L(O,V,ee){if(O==null)return O;var q=[],G=0;return S(O,q,"","",function(Q){return V.call(ee,Q,G++)}),q}function z(O){if(O._status===-1){var V=O._result;V=V(),V.then(function(ee){(O._status===0||O._status===-1)&&(O._status=1,O._result=ee)},function(ee){(O._status===0||O._status===-1)&&(O._status=2,O._result=ee)}),O._status===-1&&(O._status=0,O._result=V)}if(O._status===1)return O._result.default;throw O._result}var R={current:null},U={transition:null},W={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:U,ReactCurrentOwner:B};function Z(){throw Error("act(...) is not supported in production builds of React.")}return pt.Children={map:L,forEach:function(O,V,ee){L(O,function(){V.apply(this,arguments)},ee)},count:function(O){var V=0;return L(O,function(){V++}),V},toArray:function(O){return L(O,function(V){return V})||[]},only:function(O){if(!H(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},pt.Component=k,pt.Fragment=s,pt.Profiler=i,pt.PureComponent=C,pt.StrictMode=a,pt.Suspense=u,pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W,pt.act=Z,pt.cloneElement=function(O,V,ee){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var q=y({},O.props),G=O.key,Q=O.ref,le=O._owner;if(V!=null){if(V.ref!==void 0&&(Q=V.ref,le=B.current),V.key!==void 0&&(G=""+V.key),O.type&&O.type.defaultProps)var ne=O.type.defaultProps;for(ie in V)P.call(V,ie)&&!$.hasOwnProperty(ie)&&(q[ie]=V[ie]===void 0&&ne!==void 0?ne[ie]:V[ie])}var ie=arguments.length-2;if(ie===1)q.children=ee;else if(1<ie){ne=Array(ie);for(var ve=0;ve<ie;ve++)ne[ve]=arguments[ve+2];q.children=ne}return{$$typeof:e,type:O.type,key:G,ref:Q,props:q,_owner:le}},pt.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:l,_context:O},O.Consumer=O},pt.createElement=D,pt.createFactory=function(O){var V=D.bind(null,O);return V.type=O,V},pt.createRef=function(){return{current:null}},pt.forwardRef=function(O){return{$$typeof:d,render:O}},pt.isValidElement=H,pt.lazy=function(O){return{$$typeof:p,_payload:{_status:-1,_result:O},_init:z}},pt.memo=function(O,V){return{$$typeof:m,type:O,compare:V===void 0?null:V}},pt.startTransition=function(O){var V=U.transition;U.transition={};try{O()}finally{U.transition=V}},pt.unstable_act=Z,pt.useCallback=function(O,V){return R.current.useCallback(O,V)},pt.useContext=function(O){return R.current.useContext(O)},pt.useDebugValue=function(){},pt.useDeferredValue=function(O){return R.current.useDeferredValue(O)},pt.useEffect=function(O,V){return R.current.useEffect(O,V)},pt.useId=function(){return R.current.useId()},pt.useImperativeHandle=function(O,V,ee){return R.current.useImperativeHandle(O,V,ee)},pt.useInsertionEffect=function(O,V){return R.current.useInsertionEffect(O,V)},pt.useLayoutEffect=function(O,V){return R.current.useLayoutEffect(O,V)},pt.useMemo=function(O,V){return R.current.useMemo(O,V)},pt.useReducer=function(O,V,ee){return R.current.useReducer(O,V,ee)},pt.useRef=function(O){return R.current.useRef(O)},pt.useState=function(O){return R.current.useState(O)},pt.useSyncExternalStore=function(O,V,ee){return R.current.useSyncExternalStore(O,V,ee)},pt.useTransition=function(){return R.current.useTransition()},pt.version="18.3.1",pt}var O0;function fh(){return O0||(O0=1,Ou.exports=w5()),Ou.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $0;function S5(){if($0)return mo;$0=1;var e=fh(),n=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(d,u,m){var p,f={},x=null,b=null;m!==void 0&&(x=""+m),u.key!==void 0&&(x=""+u.key),u.ref!==void 0&&(b=u.ref);for(p in u)a.call(u,p)&&!l.hasOwnProperty(p)&&(f[p]=u[p]);if(d&&d.defaultProps)for(p in u=d.defaultProps,u)f[p]===void 0&&(f[p]=u[p]);return{$$typeof:n,type:d,key:x,ref:b,props:f,_owner:i.current}}return mo.Fragment=s,mo.jsx=c,mo.jsxs=c,mo}var V0;function k5(){return V0||(V0=1,zu.exports=S5()),zu.exports}var t=k5(),Kl={},$u={exports:{}},Yn={},Vu={exports:{}},Hu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H0;function j5(){return H0||(H0=1,(function(e){function n(U,W){var Z=U.length;U.push(W);e:for(;0<Z;){var O=Z-1>>>1,V=U[O];if(0<i(V,W))U[O]=W,U[Z]=V,Z=O;else break e}}function s(U){return U.length===0?null:U[0]}function a(U){if(U.length===0)return null;var W=U[0],Z=U.pop();if(Z!==W){U[0]=Z;e:for(var O=0,V=U.length,ee=V>>>1;O<ee;){var q=2*(O+1)-1,G=U[q],Q=q+1,le=U[Q];if(0>i(G,Z))Q<V&&0>i(le,G)?(U[O]=le,U[Q]=Z,O=Q):(U[O]=G,U[q]=Z,O=q);else if(Q<V&&0>i(le,Z))U[O]=le,U[Q]=Z,O=Q;else break e}}return W}function i(U,W){var Z=U.sortIndex-W.sortIndex;return Z!==0?Z:U.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();e.unstable_now=function(){return c.now()-d}}var u=[],m=[],p=1,f=null,x=3,b=!1,y=!1,g=!1,k=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(U){for(var W=s(m);W!==null;){if(W.callback===null)a(m);else if(W.startTime<=U)a(m),W.sortIndex=W.expirationTime,n(u,W);else break;W=s(m)}}function A(U){if(g=!1,N(U),!y)if(s(u)!==null)y=!0,z(P);else{var W=s(m);W!==null&&R(A,W.startTime-U)}}function P(U,W){y=!1,g&&(g=!1,w(D),D=-1),b=!0;var Z=x;try{for(N(W),f=s(u);f!==null&&(!(f.expirationTime>W)||U&&!K());){var O=f.callback;if(typeof O=="function"){f.callback=null,x=f.priorityLevel;var V=O(f.expirationTime<=W);W=e.unstable_now(),typeof V=="function"?f.callback=V:f===s(u)&&a(u),N(W)}else a(u);f=s(u)}if(f!==null)var ee=!0;else{var q=s(m);q!==null&&R(A,q.startTime-W),ee=!1}return ee}finally{f=null,x=Z,b=!1}}var B=!1,$=null,D=-1,T=5,H=-1;function K(){return!(e.unstable_now()-H<T)}function E(){if($!==null){var U=e.unstable_now();H=U;var W=!0;try{W=$(!0,U)}finally{W?I():(B=!1,$=null)}}else B=!1}var I;if(typeof C=="function")I=function(){C(E)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,L=S.port2;S.port1.onmessage=E,I=function(){L.postMessage(null)}}else I=function(){k(E,0)};function z(U){$=U,B||(B=!0,I())}function R(U,W){D=k(function(){U(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){y||b||(y=!0,z(P))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return s(u)},e.unstable_next=function(U){switch(x){case 1:case 2:case 3:var W=3;break;default:W=x}var Z=x;x=W;try{return U()}finally{x=Z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,W){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Z=x;x=U;try{return W()}finally{x=Z}},e.unstable_scheduleCallback=function(U,W,Z){var O=e.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?O+Z:O):Z=O,U){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=Z+V,U={id:p++,callback:W,priorityLevel:U,startTime:Z,expirationTime:V,sortIndex:-1},Z>O?(U.sortIndex=Z,n(m,U),s(u)===null&&U===s(m)&&(g?(w(D),D=-1):g=!0,R(A,Z-O))):(U.sortIndex=V,n(u,U),y||b||(y=!0,z(P))),U},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(U){var W=x;return function(){var Z=x;x=W;try{return U.apply(this,arguments)}finally{x=Z}}}})(Hu)),Hu}var U0;function N5(){return U0||(U0=1,Vu.exports=j5()),Vu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W0;function C5(){if(W0)return Yn;W0=1;var e=fh(),n=N5();function s(r){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+r,h=1;h<arguments.length;h++)o+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,i={};function l(r,o){c(r,o),c(r+"Capture",o)}function c(r,o){for(i[r]=o,r=0;r<o.length;r++)a.add(o[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function x(r){return u.call(f,r)?!0:u.call(p,r)?!1:m.test(r)?f[r]=!0:(p[r]=!0,!1)}function b(r,o,h,v){if(h!==null&&h.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return v?!1:h!==null?!h.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function y(r,o,h,v){if(o===null||typeof o>"u"||b(r,o,h,v))return!0;if(v)return!1;if(h!==null)switch(h.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function g(r,o,h,v,_,F,Y){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=v,this.attributeNamespace=_,this.mustUseProperty=h,this.propertyName=r,this.type=o,this.sanitizeURL=F,this.removeEmptyString=Y}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){k[r]=new g(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var o=r[0];k[o]=new g(o,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){k[r]=new g(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){k[r]=new g(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){k[r]=new g(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){k[r]=new g(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){k[r]=new g(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){k[r]=new g(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){k[r]=new g(r,5,!1,r.toLowerCase(),null,!1,!1)});var w=/[\-:]([a-z])/g;function C(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var o=r.replace(w,C);k[o]=new g(o,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var o=r.replace(w,C);k[o]=new g(o,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var o=r.replace(w,C);k[o]=new g(o,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){k[r]=new g(r,1,!1,r.toLowerCase(),null,!1,!1)}),k.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){k[r]=new g(r,1,!1,r.toLowerCase(),null,!0,!0)});function N(r,o,h,v){var _=k.hasOwnProperty(o)?k[o]:null;(_!==null?_.type!==0:v||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(y(o,h,_,v)&&(h=null),v||_===null?x(o)&&(h===null?r.removeAttribute(o):r.setAttribute(o,""+h)):_.mustUseProperty?r[_.propertyName]=h===null?_.type===3?!1:"":h:(o=_.attributeName,v=_.attributeNamespace,h===null?r.removeAttribute(o):(_=_.type,h=_===3||_===4&&h===!0?"":""+h,v?r.setAttributeNS(v,o,h):r.setAttribute(o,h))))}var A=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),B=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),K=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),R=Symbol.for("react.offscreen"),U=Symbol.iterator;function W(r){return r===null||typeof r!="object"?null:(r=U&&r[U]||r["@@iterator"],typeof r=="function"?r:null)}var Z=Object.assign,O;function V(r){if(O===void 0)try{throw Error()}catch(h){var o=h.stack.trim().match(/\n( *(at )?)/);O=o&&o[1]||""}return`
`+O+r}var ee=!1;function q(r,o){if(!r||ee)return"";ee=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(je){var v=je}Reflect.construct(r,[],o)}else{try{o.call()}catch(je){v=je}r.call(o.prototype)}else{try{throw Error()}catch(je){v=je}r()}}catch(je){if(je&&v&&typeof je.stack=="string"){for(var _=je.stack.split(`
`),F=v.stack.split(`
`),Y=_.length-1,re=F.length-1;1<=Y&&0<=re&&_[Y]!==F[re];)re--;for(;1<=Y&&0<=re;Y--,re--)if(_[Y]!==F[re]){if(Y!==1||re!==1)do if(Y--,re--,0>re||_[Y]!==F[re]){var ce=`
`+_[Y].replace(" at new "," at ");return r.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",r.displayName)),ce}while(1<=Y&&0<=re);break}}}finally{ee=!1,Error.prepareStackTrace=h}return(r=r?r.displayName||r.name:"")?V(r):""}function G(r){switch(r.tag){case 5:return V(r.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return r=q(r.type,!1),r;case 11:return r=q(r.type.render,!1),r;case 1:return r=q(r.type,!0),r;default:return""}}function Q(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case $:return"Fragment";case B:return"Portal";case T:return"Profiler";case D:return"StrictMode";case I:return"Suspense";case S:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case K:return(r.displayName||"Context")+".Consumer";case H:return(r._context.displayName||"Context")+".Provider";case E:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case L:return o=r.displayName||null,o!==null?o:Q(r.type)||"Memo";case z:o=r._payload,r=r._init;try{return Q(r(o))}catch{}}return null}function le(r){var o=r.type;switch(r.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=o.render,r=r.displayName||r.name||"",o.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Q(o);case 8:return o===D?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function ne(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ie(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function ve(r){var o=ie(r)?"checked":"value",h=Object.getOwnPropertyDescriptor(r.constructor.prototype,o),v=""+r[o];if(!r.hasOwnProperty(o)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var _=h.get,F=h.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return _.call(this)},set:function(Y){v=""+Y,F.call(this,Y)}}),Object.defineProperty(r,o,{enumerable:h.enumerable}),{getValue:function(){return v},setValue:function(Y){v=""+Y},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function se(r){r._valueTracker||(r._valueTracker=ve(r))}function ge(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var h=o.getValue(),v="";return r&&(v=ie(r)?r.checked?"true":"false":r.value),r=v,r!==h?(o.setValue(r),!0):!1}function Me(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function M(r,o){var h=o.checked;return Z({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??r._wrapperState.initialChecked})}function me(r,o){var h=o.defaultValue==null?"":o.defaultValue,v=o.checked!=null?o.checked:o.defaultChecked;h=ne(o.value!=null?o.value:h),r._wrapperState={initialChecked:v,initialValue:h,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function he(r,o){o=o.checked,o!=null&&N(r,"checked",o,!1)}function J(r,o){he(r,o);var h=ne(o.value),v=o.type;if(h!=null)v==="number"?(h===0&&r.value===""||r.value!=h)&&(r.value=""+h):r.value!==""+h&&(r.value=""+h);else if(v==="submit"||v==="reset"){r.removeAttribute("value");return}o.hasOwnProperty("value")?oe(r,o.type,h):o.hasOwnProperty("defaultValue")&&oe(r,o.type,ne(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(r.defaultChecked=!!o.defaultChecked)}function X(r,o,h){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var v=o.type;if(!(v!=="submit"&&v!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+r._wrapperState.initialValue,h||o===r.value||(r.value=o),r.defaultValue=o}h=r.name,h!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,h!==""&&(r.name=h)}function oe(r,o,h){(o!=="number"||Me(r.ownerDocument)!==r)&&(h==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+h&&(r.defaultValue=""+h))}var ke=Array.isArray;function Ne(r,o,h,v){if(r=r.options,o){o={};for(var _=0;_<h.length;_++)o["$"+h[_]]=!0;for(h=0;h<r.length;h++)_=o.hasOwnProperty("$"+r[h].value),r[h].selected!==_&&(r[h].selected=_),_&&v&&(r[h].defaultSelected=!0)}else{for(h=""+ne(h),o=null,_=0;_<r.length;_++){if(r[_].value===h){r[_].selected=!0,v&&(r[_].defaultSelected=!0);return}o!==null||r[_].disabled||(o=r[_])}o!==null&&(o.selected=!0)}}function de(r,o){if(o.dangerouslySetInnerHTML!=null)throw Error(s(91));return Z({},o,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function fe(r,o){var h=o.value;if(h==null){if(h=o.children,o=o.defaultValue,h!=null){if(o!=null)throw Error(s(92));if(ke(h)){if(1<h.length)throw Error(s(93));h=h[0]}o=h}o==null&&(o=""),h=o}r._wrapperState={initialValue:ne(h)}}function _e(r,o){var h=ne(o.value),v=ne(o.defaultValue);h!=null&&(h=""+h,h!==r.value&&(r.value=h),o.defaultValue==null&&r.defaultValue!==h&&(r.defaultValue=h)),v!=null&&(r.defaultValue=""+v)}function Se(r){var o=r.textContent;o===r._wrapperState.initialValue&&o!==""&&o!==null&&(r.value=o)}function Be(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ot(r,o){return r==null||r==="http://www.w3.org/1999/xhtml"?Be(o):r==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Ce,Ue=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,h,v,_){MSApp.execUnsafeLocalFunction(function(){return r(o,h,v,_)})}:r})(function(r,o){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=o;else{for(Ce=Ce||document.createElement("div"),Ce.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Ce.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;o.firstChild;)r.appendChild(o.firstChild)}});function Ze(r,o){if(o){var h=r.firstChild;if(h&&h===r.lastChild&&h.nodeType===3){h.nodeValue=o;return}}r.textContent=o}var et={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ut=["Webkit","ms","Moz","O"];Object.keys(et).forEach(function(r){ut.forEach(function(o){o=o+r.charAt(0).toUpperCase()+r.substring(1),et[o]=et[r]})});function tt(r,o,h){return o==null||typeof o=="boolean"||o===""?"":h||typeof o!="number"||o===0||et.hasOwnProperty(r)&&et[r]?(""+o).trim():o+"px"}function Mt(r,o){r=r.style;for(var h in o)if(o.hasOwnProperty(h)){var v=h.indexOf("--")===0,_=tt(h,o[h],v);h==="float"&&(h="cssFloat"),v?r.setProperty(h,_):r[h]=_}}var Ct=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _t(r,o){if(o){if(Ct[r]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(s(137,r));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(s(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(s(61))}if(o.style!=null&&typeof o.style!="object")throw Error(s(62))}}function Fn(r,o){if(r.indexOf("-")===-1)return typeof o.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var on=null;function Zt(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Mn=null,pn=null,St=null;function Qt(r){if(r=Ji(r)){if(typeof Mn!="function")throw Error(s(280));var o=r.stateNode;o&&(o=il(o),Mn(r.stateNode,r.type,o))}}function Xe(r){pn?St?St.push(r):St=[r]:pn=r}function kt(){if(pn){var r=pn,o=St;if(St=pn=null,Qt(r),o)for(r=0;r<o.length;r++)Qt(o[r])}}function Lt(r,o){return r(o)}function jt(){}var Kt=!1;function Gt(r,o,h){if(Kt)return r(o,h);Kt=!0;try{return Lt(r,o,h)}finally{Kt=!1,(pn!==null||St!==null)&&(jt(),kt())}}function Xt(r,o){var h=r.stateNode;if(h===null)return null;var v=il(h);if(v===null)return null;h=v[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(r=r.type,v=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!v;break e;default:r=!1}if(r)return null;if(h&&typeof h!="function")throw Error(s(231,o,typeof h));return h}var vs=!1;if(d)try{var tn={};Object.defineProperty(tn,"passive",{get:function(){vs=!0}}),window.addEventListener("test",tn,tn),window.removeEventListener("test",tn,tn)}catch{vs=!1}function zn(r,o,h,v,_,F,Y,re,ce){var je=Array.prototype.slice.call(arguments,3);try{o.apply(h,je)}catch(De){this.onError(De)}}var Ps=!1,bn=null,mr=!1,Wr=null,zo={onError:function(r){Ps=!0,bn=r}};function Ii(r,o,h,v,_,F,Y,re,ce){Ps=!1,bn=null,zn.apply(zo,arguments)}function id(r,o,h,v,_,F,Y,re,ce){if(Ii.apply(this,arguments),Ps){if(Ps){var je=bn;Ps=!1,bn=null}else throw Error(s(198));mr||(mr=!0,Wr=je)}}function Rs(r){var o=r,h=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(h=o.return),r=o.return;while(r)}return o.tag===3?h:null}function Oo(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function od(r){if(Rs(r)!==r)throw Error(s(188))}function Kr(r){var o=r.alternate;if(!o){if(o=Rs(r),o===null)throw Error(s(188));return o!==r?null:r}for(var h=r,v=o;;){var _=h.return;if(_===null)break;var F=_.alternate;if(F===null){if(v=_.return,v!==null){h=v;continue}break}if(_.child===F.child){for(F=_.child;F;){if(F===h)return od(_),r;if(F===v)return od(_),o;F=F.sibling}throw Error(s(188))}if(h.return!==v.return)h=_,v=F;else{for(var Y=!1,re=_.child;re;){if(re===h){Y=!0,h=_,v=F;break}if(re===v){Y=!0,v=_,h=F;break}re=re.sibling}if(!Y){for(re=F.child;re;){if(re===h){Y=!0,h=F,v=_;break}if(re===v){Y=!0,v=F,h=_;break}re=re.sibling}if(!Y)throw Error(s(189))}}if(h.alternate!==v)throw Error(s(190))}if(h.tag!==3)throw Error(s(188));return h.stateNode.current===h?r:o}function Gr(r){return r=Kr(r),r!==null?$o(r):null}function $o(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var o=$o(r);if(o!==null)return o;r=r.sibling}return null}var Vo=n.unstable_scheduleCallback,xr=n.unstable_cancelCallback,Yr=n.unstable_shouldYield,qr=n.unstable_requestPaint,Dt=n.unstable_now,In=n.unstable_getCurrentPriorityLevel,Pi=n.unstable_ImmediatePriority,Pn=n.unstable_UserBlockingPriority,Zr=n.unstable_NormalPriority,ld=n.unstable_LowPriority,Ho=n.unstable_IdlePriority,Qr=null,At=null;function Ea(r){if(At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(Qr,r,void 0,(r.current.flags&128)===128)}catch{}}var On=Math.clz32?Math.clz32:dd,Uo=Math.log,cd=Math.LN2;function dd(r){return r>>>=0,r===0?32:31-(Uo(r)/cd|0)|0}var Ta=64,Da=4194304;function ls(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function $n(r,o){var h=r.pendingLanes;if(h===0)return 0;var v=0,_=r.suspendedLanes,F=r.pingedLanes,Y=h&268435455;if(Y!==0){var re=Y&~_;re!==0?v=ls(re):(F&=Y,F!==0&&(v=ls(F)))}else Y=h&~_,Y!==0?v=ls(Y):F!==0&&(v=ls(F));if(v===0)return 0;if(o!==0&&o!==v&&(o&_)===0&&(_=v&-v,F=o&-o,_>=F||_===16&&(F&4194240)!==0))return o;if((v&4)!==0&&(v|=h&16),o=r.entangledLanes,o!==0)for(r=r.entanglements,o&=v;0<o;)h=31-On(o),_=1<<h,v|=r[h],o&=~_;return v}function ud(r,o){switch(r){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wo(r,o){for(var h=r.suspendedLanes,v=r.pingedLanes,_=r.expirationTimes,F=r.pendingLanes;0<F;){var Y=31-On(F),re=1<<Y,ce=_[Y];ce===-1?((re&h)===0||(re&v)!==0)&&(_[Y]=ud(re,o)):ce<=o&&(r.expiredLanes|=re),F&=~re}}function Ri(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Ko(){var r=Ta;return Ta<<=1,(Ta&4194240)===0&&(Ta=64),r}function Bi(r){for(var o=[],h=0;31>h;h++)o.push(r);return o}function gr(r,o,h){r.pendingLanes|=o,o!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,o=31-On(o),r[o]=h}function fd(r,o){var h=r.pendingLanes&~o;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=o,r.mutableReadLanes&=o,r.entangledLanes&=o,o=r.entanglements;var v=r.eventTimes;for(r=r.expirationTimes;0<h;){var _=31-On(h),F=1<<_;o[_]=0,v[_]=-1,r[_]=-1,h&=~F}}function Li(r,o){var h=r.entangledLanes|=o;for(r=r.entanglements;h;){var v=31-On(h),_=1<<v;_&o|r[v]&o&&(r[v]|=o),h&=~_}}var yt=0;function zi(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Go,Oi,Yo,we,Ae,pe=!1,Je=[],Ge=null,rt=null,Qe=null,mt=new Map,It=new Map,Ye=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Et(r,o){switch(r){case"focusin":case"focusout":Ge=null;break;case"dragenter":case"dragleave":rt=null;break;case"mouseover":case"mouseout":Qe=null;break;case"pointerover":case"pointerout":mt.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(o.pointerId)}}function nn(r,o,h,v,_,F){return r===null||r.nativeEvent!==F?(r={blockedOn:o,domEventName:h,eventSystemFlags:v,nativeEvent:F,targetContainers:[_]},o!==null&&(o=Ji(o),o!==null&&Oi(o)),r):(r.eventSystemFlags|=v,o=r.targetContainers,_!==null&&o.indexOf(_)===-1&&o.push(_),r)}function Jt(r,o,h,v,_){switch(o){case"focusin":return Ge=nn(Ge,r,o,h,v,_),!0;case"dragenter":return rt=nn(rt,r,o,h,v,_),!0;case"mouseover":return Qe=nn(Qe,r,o,h,v,_),!0;case"pointerover":var F=_.pointerId;return mt.set(F,nn(mt.get(F)||null,r,o,h,v,_)),!0;case"gotpointercapture":return F=_.pointerId,It.set(F,nn(It.get(F)||null,r,o,h,v,_)),!0}return!1}function ct(r){var o=Xr(r.target);if(o!==null){var h=Rs(o);if(h!==null){if(o=h.tag,o===13){if(o=Oo(h),o!==null){r.blockedOn=o,Ae(r.priority,function(){Yo(h)});return}}else if(o===3&&h.stateNode.current.memoizedState.isDehydrated){r.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}r.blockedOn=null}function ln(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var h=$i(r.domEventName,r.eventSystemFlags,o[0],r.nativeEvent);if(h===null){h=r.nativeEvent;var v=new h.constructor(h.type,h);on=v,h.target.dispatchEvent(v),on=null}else return o=Ji(h),o!==null&&Oi(o),r.blockedOn=h,!1;o.shift()}return!0}function Vt(r,o,h){ln(r)&&h.delete(o)}function Ke(){pe=!1,Ge!==null&&ln(Ge)&&(Ge=null),rt!==null&&ln(rt)&&(rt=null),Qe!==null&&ln(Qe)&&(Qe=null),mt.forEach(Vt),It.forEach(Vt)}function lt(r,o){r.blockedOn===o&&(r.blockedOn=null,pe||(pe=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Ke)))}function gt(r){function o(_){return lt(_,r)}if(0<Je.length){lt(Je[0],r);for(var h=1;h<Je.length;h++){var v=Je[h];v.blockedOn===r&&(v.blockedOn=null)}}for(Ge!==null&&lt(Ge,r),rt!==null&&lt(rt,r),Qe!==null&&lt(Qe,r),mt.forEach(o),It.forEach(o),h=0;h<Ye.length;h++)v=Ye[h],v.blockedOn===r&&(v.blockedOn=null);for(;0<Ye.length&&(h=Ye[0],h.blockedOn===null);)ct(h),h.blockedOn===null&&Ye.shift()}var cn=A.ReactCurrentBatchConfig,Xn=!0;function Vn(r,o,h,v){var _=yt,F=cn.transition;cn.transition=null;try{yt=1,ys(r,o,h,v)}finally{yt=_,cn.transition=F}}function Fa(r,o,h,v){var _=yt,F=cn.transition;cn.transition=null;try{yt=4,ys(r,o,h,v)}finally{yt=_,cn.transition=F}}function ys(r,o,h,v){if(Xn){var _=$i(r,o,h,v);if(_===null)Ed(r,o,v,Ma,h),Et(r,v);else if(Jt(_,r,o,h,v))v.stopPropagation();else if(Et(r,v),o&4&&-1<dt.indexOf(r)){for(;_!==null;){var F=Ji(_);if(F!==null&&Go(F),F=$i(r,o,h,v),F===null&&Ed(r,o,v,Ma,h),F===_)break;_=F}_!==null&&v.stopPropagation()}else Ed(r,o,v,null,h)}}var Ma=null;function $i(r,o,h,v){if(Ma=null,r=Zt(v),r=Xr(r),r!==null)if(o=Rs(r),o===null)r=null;else if(h=o.tag,h===13){if(r=Oo(o),r!==null)return r;r=null}else if(h===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null);return Ma=r,null}function Np(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(In()){case Pi:return 1;case Pn:return 4;case Zr:case ld:return 16;case Ho:return 536870912;default:return 16}default:return 16}}var br=null,hd=null,qo=null;function Cp(){if(qo)return qo;var r,o=hd,h=o.length,v,_="value"in br?br.value:br.textContent,F=_.length;for(r=0;r<h&&o[r]===_[r];r++);var Y=h-r;for(v=1;v<=Y&&o[h-v]===_[F-v];v++);return qo=_.slice(r,1<v?1-v:void 0)}function Zo(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function Qo(){return!0}function _p(){return!1}function Jn(r){function o(h,v,_,F,Y){this._reactName=h,this._targetInst=_,this.type=v,this.nativeEvent=F,this.target=Y,this.currentTarget=null;for(var re in r)r.hasOwnProperty(re)&&(h=r[re],this[re]=h?h(F):F[re]);return this.isDefaultPrevented=(F.defaultPrevented!=null?F.defaultPrevented:F.returnValue===!1)?Qo:_p,this.isPropagationStopped=_p,this}return Z(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Qo)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Qo)},persist:function(){},isPersistent:Qo}),o}var Ia={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pd=Jn(Ia),Vi=Z({},Ia,{view:0,detail:0}),Gy=Jn(Vi),md,xd,Hi,Xo=Z({},Vi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bd,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Hi&&(Hi&&r.type==="mousemove"?(md=r.screenX-Hi.screenX,xd=r.screenY-Hi.screenY):xd=md=0,Hi=r),md)},movementY:function(r){return"movementY"in r?r.movementY:xd}}),Ap=Jn(Xo),Yy=Z({},Xo,{dataTransfer:0}),qy=Jn(Yy),Zy=Z({},Vi,{relatedTarget:0}),gd=Jn(Zy),Qy=Z({},Ia,{animationName:0,elapsedTime:0,pseudoElement:0}),Xy=Jn(Qy),Jy=Z({},Ia,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),ew=Jn(Jy),tw=Z({},Ia,{data:0}),Ep=Jn(tw),nw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aw(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=rw[r])?!!o[r]:!1}function bd(){return aw}var iw=Z({},Vi,{key:function(r){if(r.key){var o=nw[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=Zo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?sw[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bd,charCode:function(r){return r.type==="keypress"?Zo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Zo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),ow=Jn(iw),lw=Z({},Xo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tp=Jn(lw),cw=Z({},Vi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bd}),dw=Jn(cw),uw=Z({},Ia,{propertyName:0,elapsedTime:0,pseudoElement:0}),fw=Jn(uw),hw=Z({},Xo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),pw=Jn(hw),mw=[9,13,27,32],vd=d&&"CompositionEvent"in window,Ui=null;d&&"documentMode"in document&&(Ui=document.documentMode);var xw=d&&"TextEvent"in window&&!Ui,Dp=d&&(!vd||Ui&&8<Ui&&11>=Ui),Fp=" ",Mp=!1;function Ip(r,o){switch(r){case"keyup":return mw.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pp(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Pa=!1;function gw(r,o){switch(r){case"compositionend":return Pp(o);case"keypress":return o.which!==32?null:(Mp=!0,Fp);case"textInput":return r=o.data,r===Fp&&Mp?null:r;default:return null}}function bw(r,o){if(Pa)return r==="compositionend"||!vd&&Ip(r,o)?(r=Cp(),qo=hd=br=null,Pa=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Dp&&o.locale!=="ko"?null:o.data;default:return null}}var vw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rp(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!vw[r.type]:o==="textarea"}function Bp(r,o,h,v){Xe(v),o=sl(o,"onChange"),0<o.length&&(h=new pd("onChange","change",null,h,v),r.push({event:h,listeners:o}))}var Wi=null,Ki=null;function yw(r){tm(r,0)}function Jo(r){var o=Oa(r);if(ge(o))return r}function ww(r,o){if(r==="change")return o}var Lp=!1;if(d){var yd;if(d){var wd="oninput"in document;if(!wd){var zp=document.createElement("div");zp.setAttribute("oninput","return;"),wd=typeof zp.oninput=="function"}yd=wd}else yd=!1;Lp=yd&&(!document.documentMode||9<document.documentMode)}function Op(){Wi&&(Wi.detachEvent("onpropertychange",$p),Ki=Wi=null)}function $p(r){if(r.propertyName==="value"&&Jo(Ki)){var o=[];Bp(o,Ki,r,Zt(r)),Gt(yw,o)}}function Sw(r,o,h){r==="focusin"?(Op(),Wi=o,Ki=h,Wi.attachEvent("onpropertychange",$p)):r==="focusout"&&Op()}function kw(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Jo(Ki)}function jw(r,o){if(r==="click")return Jo(o)}function Nw(r,o){if(r==="input"||r==="change")return Jo(o)}function Cw(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var ws=typeof Object.is=="function"?Object.is:Cw;function Gi(r,o){if(ws(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var h=Object.keys(r),v=Object.keys(o);if(h.length!==v.length)return!1;for(v=0;v<h.length;v++){var _=h[v];if(!u.call(o,_)||!ws(r[_],o[_]))return!1}return!0}function Vp(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Hp(r,o){var h=Vp(r);r=0;for(var v;h;){if(h.nodeType===3){if(v=r+h.textContent.length,r<=o&&v>=o)return{node:h,offset:o-r};r=v}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Vp(h)}}function Up(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?Up(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function Wp(){for(var r=window,o=Me();o instanceof r.HTMLIFrameElement;){try{var h=typeof o.contentWindow.location.href=="string"}catch{h=!1}if(h)r=o.contentWindow;else break;o=Me(r.document)}return o}function Sd(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}function _w(r){var o=Wp(),h=r.focusedElem,v=r.selectionRange;if(o!==h&&h&&h.ownerDocument&&Up(h.ownerDocument.documentElement,h)){if(v!==null&&Sd(h)){if(o=v.start,r=v.end,r===void 0&&(r=o),"selectionStart"in h)h.selectionStart=o,h.selectionEnd=Math.min(r,h.value.length);else if(r=(o=h.ownerDocument||document)&&o.defaultView||window,r.getSelection){r=r.getSelection();var _=h.textContent.length,F=Math.min(v.start,_);v=v.end===void 0?F:Math.min(v.end,_),!r.extend&&F>v&&(_=v,v=F,F=_),_=Hp(h,F);var Y=Hp(h,v);_&&Y&&(r.rangeCount!==1||r.anchorNode!==_.node||r.anchorOffset!==_.offset||r.focusNode!==Y.node||r.focusOffset!==Y.offset)&&(o=o.createRange(),o.setStart(_.node,_.offset),r.removeAllRanges(),F>v?(r.addRange(o),r.extend(Y.node,Y.offset)):(o.setEnd(Y.node,Y.offset),r.addRange(o)))}}for(o=[],r=h;r=r.parentNode;)r.nodeType===1&&o.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<o.length;h++)r=o[h],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var Aw=d&&"documentMode"in document&&11>=document.documentMode,Ra=null,kd=null,Yi=null,jd=!1;function Kp(r,o,h){var v=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;jd||Ra==null||Ra!==Me(v)||(v=Ra,"selectionStart"in v&&Sd(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Yi&&Gi(Yi,v)||(Yi=v,v=sl(kd,"onSelect"),0<v.length&&(o=new pd("onSelect","select",null,o,h),r.push({event:o,listeners:v}),o.target=Ra)))}function el(r,o){var h={};return h[r.toLowerCase()]=o.toLowerCase(),h["Webkit"+r]="webkit"+o,h["Moz"+r]="moz"+o,h}var Ba={animationend:el("Animation","AnimationEnd"),animationiteration:el("Animation","AnimationIteration"),animationstart:el("Animation","AnimationStart"),transitionend:el("Transition","TransitionEnd")},Nd={},Gp={};d&&(Gp=document.createElement("div").style,"AnimationEvent"in window||(delete Ba.animationend.animation,delete Ba.animationiteration.animation,delete Ba.animationstart.animation),"TransitionEvent"in window||delete Ba.transitionend.transition);function tl(r){if(Nd[r])return Nd[r];if(!Ba[r])return r;var o=Ba[r],h;for(h in o)if(o.hasOwnProperty(h)&&h in Gp)return Nd[r]=o[h];return r}var Yp=tl("animationend"),qp=tl("animationiteration"),Zp=tl("animationstart"),Qp=tl("transitionend"),Xp=new Map,Jp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vr(r,o){Xp.set(r,o),l(o,[r])}for(var Cd=0;Cd<Jp.length;Cd++){var _d=Jp[Cd],Ew=_d.toLowerCase(),Tw=_d[0].toUpperCase()+_d.slice(1);vr(Ew,"on"+Tw)}vr(Yp,"onAnimationEnd"),vr(qp,"onAnimationIteration"),vr(Zp,"onAnimationStart"),vr("dblclick","onDoubleClick"),vr("focusin","onFocus"),vr("focusout","onBlur"),vr(Qp,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dw=new Set("cancel close invalid load scroll toggle".split(" ").concat(qi));function em(r,o,h){var v=r.type||"unknown-event";r.currentTarget=h,id(v,o,void 0,r),r.currentTarget=null}function tm(r,o){o=(o&4)!==0;for(var h=0;h<r.length;h++){var v=r[h],_=v.event;v=v.listeners;e:{var F=void 0;if(o)for(var Y=v.length-1;0<=Y;Y--){var re=v[Y],ce=re.instance,je=re.currentTarget;if(re=re.listener,ce!==F&&_.isPropagationStopped())break e;em(_,re,je),F=ce}else for(Y=0;Y<v.length;Y++){if(re=v[Y],ce=re.instance,je=re.currentTarget,re=re.listener,ce!==F&&_.isPropagationStopped())break e;em(_,re,je),F=ce}}}if(mr)throw r=Wr,mr=!1,Wr=null,r}function Pt(r,o){var h=o[Pd];h===void 0&&(h=o[Pd]=new Set);var v=r+"__bubble";h.has(v)||(nm(o,r,2,!1),h.add(v))}function Ad(r,o,h){var v=0;o&&(v|=4),nm(h,r,v,o)}var nl="_reactListening"+Math.random().toString(36).slice(2);function Zi(r){if(!r[nl]){r[nl]=!0,a.forEach(function(h){h!=="selectionchange"&&(Dw.has(h)||Ad(h,!1,r),Ad(h,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[nl]||(o[nl]=!0,Ad("selectionchange",!1,o))}}function nm(r,o,h,v){switch(Np(o)){case 1:var _=Vn;break;case 4:_=Fa;break;default:_=ys}h=_.bind(null,o,h,r),_=void 0,!vs||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(_=!0),v?_!==void 0?r.addEventListener(o,h,{capture:!0,passive:_}):r.addEventListener(o,h,!0):_!==void 0?r.addEventListener(o,h,{passive:_}):r.addEventListener(o,h,!1)}function Ed(r,o,h,v,_){var F=v;if((o&1)===0&&(o&2)===0&&v!==null)e:for(;;){if(v===null)return;var Y=v.tag;if(Y===3||Y===4){var re=v.stateNode.containerInfo;if(re===_||re.nodeType===8&&re.parentNode===_)break;if(Y===4)for(Y=v.return;Y!==null;){var ce=Y.tag;if((ce===3||ce===4)&&(ce=Y.stateNode.containerInfo,ce===_||ce.nodeType===8&&ce.parentNode===_))return;Y=Y.return}for(;re!==null;){if(Y=Xr(re),Y===null)return;if(ce=Y.tag,ce===5||ce===6){v=F=Y;continue e}re=re.parentNode}}v=v.return}Gt(function(){var je=F,De=Zt(h),Fe=[];e:{var Te=Xp.get(r);if(Te!==void 0){var ze=pd,$e=r;switch(r){case"keypress":if(Zo(h)===0)break e;case"keydown":case"keyup":ze=ow;break;case"focusin":$e="focus",ze=gd;break;case"focusout":$e="blur",ze=gd;break;case"beforeblur":case"afterblur":ze=gd;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ze=Ap;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ze=qy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ze=dw;break;case Yp:case qp:case Zp:ze=Xy;break;case Qp:ze=fw;break;case"scroll":ze=Gy;break;case"wheel":ze=pw;break;case"copy":case"cut":case"paste":ze=ew;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ze=Tp}var We=(o&4)!==0,en=!We&&r==="scroll",be=We?Te!==null?Te+"Capture":null:Te;We=[];for(var ue=je,ye;ue!==null;){ye=ue;var Pe=ye.stateNode;if(ye.tag===5&&Pe!==null&&(ye=Pe,be!==null&&(Pe=Xt(ue,be),Pe!=null&&We.push(Qi(ue,Pe,ye)))),en)break;ue=ue.return}0<We.length&&(Te=new ze(Te,$e,null,h,De),Fe.push({event:Te,listeners:We}))}}if((o&7)===0){e:{if(Te=r==="mouseover"||r==="pointerover",ze=r==="mouseout"||r==="pointerout",Te&&h!==on&&($e=h.relatedTarget||h.fromElement)&&(Xr($e)||$e[Xs]))break e;if((ze||Te)&&(Te=De.window===De?De:(Te=De.ownerDocument)?Te.defaultView||Te.parentWindow:window,ze?($e=h.relatedTarget||h.toElement,ze=je,$e=$e?Xr($e):null,$e!==null&&(en=Rs($e),$e!==en||$e.tag!==5&&$e.tag!==6)&&($e=null)):(ze=null,$e=je),ze!==$e)){if(We=Ap,Pe="onMouseLeave",be="onMouseEnter",ue="mouse",(r==="pointerout"||r==="pointerover")&&(We=Tp,Pe="onPointerLeave",be="onPointerEnter",ue="pointer"),en=ze==null?Te:Oa(ze),ye=$e==null?Te:Oa($e),Te=new We(Pe,ue+"leave",ze,h,De),Te.target=en,Te.relatedTarget=ye,Pe=null,Xr(De)===je&&(We=new We(be,ue+"enter",$e,h,De),We.target=ye,We.relatedTarget=en,Pe=We),en=Pe,ze&&$e)t:{for(We=ze,be=$e,ue=0,ye=We;ye;ye=La(ye))ue++;for(ye=0,Pe=be;Pe;Pe=La(Pe))ye++;for(;0<ue-ye;)We=La(We),ue--;for(;0<ye-ue;)be=La(be),ye--;for(;ue--;){if(We===be||be!==null&&We===be.alternate)break t;We=La(We),be=La(be)}We=null}else We=null;ze!==null&&sm(Fe,Te,ze,We,!1),$e!==null&&en!==null&&sm(Fe,en,$e,We,!0)}}e:{if(Te=je?Oa(je):window,ze=Te.nodeName&&Te.nodeName.toLowerCase(),ze==="select"||ze==="input"&&Te.type==="file")var qe=ww;else if(Rp(Te))if(Lp)qe=Nw;else{qe=kw;var nt=Sw}else(ze=Te.nodeName)&&ze.toLowerCase()==="input"&&(Te.type==="checkbox"||Te.type==="radio")&&(qe=jw);if(qe&&(qe=qe(r,je))){Bp(Fe,qe,h,De);break e}nt&&nt(r,Te,je),r==="focusout"&&(nt=Te._wrapperState)&&nt.controlled&&Te.type==="number"&&oe(Te,"number",Te.value)}switch(nt=je?Oa(je):window,r){case"focusin":(Rp(nt)||nt.contentEditable==="true")&&(Ra=nt,kd=je,Yi=null);break;case"focusout":Yi=kd=Ra=null;break;case"mousedown":jd=!0;break;case"contextmenu":case"mouseup":case"dragend":jd=!1,Kp(Fe,h,De);break;case"selectionchange":if(Aw)break;case"keydown":case"keyup":Kp(Fe,h,De)}var st;if(vd)e:{switch(r){case"compositionstart":var it="onCompositionStart";break e;case"compositionend":it="onCompositionEnd";break e;case"compositionupdate":it="onCompositionUpdate";break e}it=void 0}else Pa?Ip(r,h)&&(it="onCompositionEnd"):r==="keydown"&&h.keyCode===229&&(it="onCompositionStart");it&&(Dp&&h.locale!=="ko"&&(Pa||it!=="onCompositionStart"?it==="onCompositionEnd"&&Pa&&(st=Cp()):(br=De,hd="value"in br?br.value:br.textContent,Pa=!0)),nt=sl(je,it),0<nt.length&&(it=new Ep(it,r,null,h,De),Fe.push({event:it,listeners:nt}),st?it.data=st:(st=Pp(h),st!==null&&(it.data=st)))),(st=xw?gw(r,h):bw(r,h))&&(je=sl(je,"onBeforeInput"),0<je.length&&(De=new Ep("onBeforeInput","beforeinput",null,h,De),Fe.push({event:De,listeners:je}),De.data=st))}tm(Fe,o)})}function Qi(r,o,h){return{instance:r,listener:o,currentTarget:h}}function sl(r,o){for(var h=o+"Capture",v=[];r!==null;){var _=r,F=_.stateNode;_.tag===5&&F!==null&&(_=F,F=Xt(r,h),F!=null&&v.unshift(Qi(r,F,_)),F=Xt(r,o),F!=null&&v.push(Qi(r,F,_))),r=r.return}return v}function La(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function sm(r,o,h,v,_){for(var F=o._reactName,Y=[];h!==null&&h!==v;){var re=h,ce=re.alternate,je=re.stateNode;if(ce!==null&&ce===v)break;re.tag===5&&je!==null&&(re=je,_?(ce=Xt(h,F),ce!=null&&Y.unshift(Qi(h,ce,re))):_||(ce=Xt(h,F),ce!=null&&Y.push(Qi(h,ce,re)))),h=h.return}Y.length!==0&&r.push({event:o,listeners:Y})}var Fw=/\r\n?/g,Mw=/\u0000|\uFFFD/g;function rm(r){return(typeof r=="string"?r:""+r).replace(Fw,`
`).replace(Mw,"")}function rl(r,o,h){if(o=rm(o),rm(r)!==o&&h)throw Error(s(425))}function al(){}var Td=null,Dd=null;function Fd(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Md=typeof setTimeout=="function"?setTimeout:void 0,Iw=typeof clearTimeout=="function"?clearTimeout:void 0,am=typeof Promise=="function"?Promise:void 0,Pw=typeof queueMicrotask=="function"?queueMicrotask:typeof am<"u"?function(r){return am.resolve(null).then(r).catch(Rw)}:Md;function Rw(r){setTimeout(function(){throw r})}function Id(r,o){var h=o,v=0;do{var _=h.nextSibling;if(r.removeChild(h),_&&_.nodeType===8)if(h=_.data,h==="/$"){if(v===0){r.removeChild(_),gt(o);return}v--}else h!=="$"&&h!=="$?"&&h!=="$!"||v++;h=_}while(h);gt(o)}function yr(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return r}function im(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var h=r.data;if(h==="$"||h==="$!"||h==="$?"){if(o===0)return r;o--}else h==="/$"&&o++}r=r.previousSibling}return null}var za=Math.random().toString(36).slice(2),Bs="__reactFiber$"+za,Xi="__reactProps$"+za,Xs="__reactContainer$"+za,Pd="__reactEvents$"+za,Bw="__reactListeners$"+za,Lw="__reactHandles$"+za;function Xr(r){var o=r[Bs];if(o)return o;for(var h=r.parentNode;h;){if(o=h[Xs]||h[Bs]){if(h=o.alternate,o.child!==null||h!==null&&h.child!==null)for(r=im(r);r!==null;){if(h=r[Bs])return h;r=im(r)}return o}r=h,h=r.parentNode}return null}function Ji(r){return r=r[Bs]||r[Xs],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Oa(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(s(33))}function il(r){return r[Xi]||null}var Rd=[],$a=-1;function wr(r){return{current:r}}function Rt(r){0>$a||(r.current=Rd[$a],Rd[$a]=null,$a--)}function Ft(r,o){$a++,Rd[$a]=r.current,r.current=o}var Sr={},kn=wr(Sr),Hn=wr(!1),Jr=Sr;function Va(r,o){var h=r.type.contextTypes;if(!h)return Sr;var v=r.stateNode;if(v&&v.__reactInternalMemoizedUnmaskedChildContext===o)return v.__reactInternalMemoizedMaskedChildContext;var _={},F;for(F in h)_[F]=o[F];return v&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=o,r.__reactInternalMemoizedMaskedChildContext=_),_}function Un(r){return r=r.childContextTypes,r!=null}function ol(){Rt(Hn),Rt(kn)}function om(r,o,h){if(kn.current!==Sr)throw Error(s(168));Ft(kn,o),Ft(Hn,h)}function lm(r,o,h){var v=r.stateNode;if(o=o.childContextTypes,typeof v.getChildContext!="function")return h;v=v.getChildContext();for(var _ in v)if(!(_ in o))throw Error(s(108,le(r)||"Unknown",_));return Z({},h,v)}function ll(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Sr,Jr=kn.current,Ft(kn,r),Ft(Hn,Hn.current),!0}function cm(r,o,h){var v=r.stateNode;if(!v)throw Error(s(169));h?(r=lm(r,o,Jr),v.__reactInternalMemoizedMergedChildContext=r,Rt(Hn),Rt(kn),Ft(kn,r)):Rt(Hn),Ft(Hn,h)}var Js=null,cl=!1,Bd=!1;function dm(r){Js===null?Js=[r]:Js.push(r)}function zw(r){cl=!0,dm(r)}function kr(){if(!Bd&&Js!==null){Bd=!0;var r=0,o=yt;try{var h=Js;for(yt=1;r<h.length;r++){var v=h[r];do v=v(!0);while(v!==null)}Js=null,cl=!1}catch(_){throw Js!==null&&(Js=Js.slice(r+1)),Vo(Pi,kr),_}finally{yt=o,Bd=!1}}return null}var Ha=[],Ua=0,dl=null,ul=0,cs=[],ds=0,ea=null,er=1,tr="";function ta(r,o){Ha[Ua++]=ul,Ha[Ua++]=dl,dl=r,ul=o}function um(r,o,h){cs[ds++]=er,cs[ds++]=tr,cs[ds++]=ea,ea=r;var v=er;r=tr;var _=32-On(v)-1;v&=~(1<<_),h+=1;var F=32-On(o)+_;if(30<F){var Y=_-_%5;F=(v&(1<<Y)-1).toString(32),v>>=Y,_-=Y,er=1<<32-On(o)+_|h<<_|v,tr=F+r}else er=1<<F|h<<_|v,tr=r}function Ld(r){r.return!==null&&(ta(r,1),um(r,1,0))}function zd(r){for(;r===dl;)dl=Ha[--Ua],Ha[Ua]=null,ul=Ha[--Ua],Ha[Ua]=null;for(;r===ea;)ea=cs[--ds],cs[ds]=null,tr=cs[--ds],cs[ds]=null,er=cs[--ds],cs[ds]=null}var es=null,ts=null,zt=!1,Ss=null;function fm(r,o){var h=ps(5,null,null,0);h.elementType="DELETED",h.stateNode=o,h.return=r,o=r.deletions,o===null?(r.deletions=[h],r.flags|=16):o.push(h)}function hm(r,o){switch(r.tag){case 5:var h=r.type;return o=o.nodeType!==1||h.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(r.stateNode=o,es=r,ts=yr(o.firstChild),!0):!1;case 6:return o=r.pendingProps===""||o.nodeType!==3?null:o,o!==null?(r.stateNode=o,es=r,ts=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(h=ea!==null?{id:er,overflow:tr}:null,r.memoizedState={dehydrated:o,treeContext:h,retryLane:1073741824},h=ps(18,null,null,0),h.stateNode=o,h.return=r,r.child=h,es=r,ts=null,!0):!1;default:return!1}}function Od(r){return(r.mode&1)!==0&&(r.flags&128)===0}function $d(r){if(zt){var o=ts;if(o){var h=o;if(!hm(r,o)){if(Od(r))throw Error(s(418));o=yr(h.nextSibling);var v=es;o&&hm(r,o)?fm(v,h):(r.flags=r.flags&-4097|2,zt=!1,es=r)}}else{if(Od(r))throw Error(s(418));r.flags=r.flags&-4097|2,zt=!1,es=r}}}function pm(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;es=r}function fl(r){if(r!==es)return!1;if(!zt)return pm(r),zt=!0,!1;var o;if((o=r.tag!==3)&&!(o=r.tag!==5)&&(o=r.type,o=o!=="head"&&o!=="body"&&!Fd(r.type,r.memoizedProps)),o&&(o=ts)){if(Od(r))throw mm(),Error(s(418));for(;o;)fm(r,o),o=yr(o.nextSibling)}if(pm(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));e:{for(r=r.nextSibling,o=0;r;){if(r.nodeType===8){var h=r.data;if(h==="/$"){if(o===0){ts=yr(r.nextSibling);break e}o--}else h!=="$"&&h!=="$!"&&h!=="$?"||o++}r=r.nextSibling}ts=null}}else ts=es?yr(r.stateNode.nextSibling):null;return!0}function mm(){for(var r=ts;r;)r=yr(r.nextSibling)}function Wa(){ts=es=null,zt=!1}function Vd(r){Ss===null?Ss=[r]:Ss.push(r)}var Ow=A.ReactCurrentBatchConfig;function eo(r,o,h){if(r=h.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(s(309));var v=h.stateNode}if(!v)throw Error(s(147,r));var _=v,F=""+r;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===F?o.ref:(o=function(Y){var re=_.refs;Y===null?delete re[F]:re[F]=Y},o._stringRef=F,o)}if(typeof r!="string")throw Error(s(284));if(!h._owner)throw Error(s(290,r))}return r}function hl(r,o){throw r=Object.prototype.toString.call(o),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r))}function xm(r){var o=r._init;return o(r._payload)}function gm(r){function o(be,ue){if(r){var ye=be.deletions;ye===null?(be.deletions=[ue],be.flags|=16):ye.push(ue)}}function h(be,ue){if(!r)return null;for(;ue!==null;)o(be,ue),ue=ue.sibling;return null}function v(be,ue){for(be=new Map;ue!==null;)ue.key!==null?be.set(ue.key,ue):be.set(ue.index,ue),ue=ue.sibling;return be}function _(be,ue){return be=Dr(be,ue),be.index=0,be.sibling=null,be}function F(be,ue,ye){return be.index=ye,r?(ye=be.alternate,ye!==null?(ye=ye.index,ye<ue?(be.flags|=2,ue):ye):(be.flags|=2,ue)):(be.flags|=1048576,ue)}function Y(be){return r&&be.alternate===null&&(be.flags|=2),be}function re(be,ue,ye,Pe){return ue===null||ue.tag!==6?(ue=Mu(ye,be.mode,Pe),ue.return=be,ue):(ue=_(ue,ye),ue.return=be,ue)}function ce(be,ue,ye,Pe){var qe=ye.type;return qe===$?De(be,ue,ye.props.children,Pe,ye.key):ue!==null&&(ue.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===z&&xm(qe)===ue.type)?(Pe=_(ue,ye.props),Pe.ref=eo(be,ue,ye),Pe.return=be,Pe):(Pe=Bl(ye.type,ye.key,ye.props,null,be.mode,Pe),Pe.ref=eo(be,ue,ye),Pe.return=be,Pe)}function je(be,ue,ye,Pe){return ue===null||ue.tag!==4||ue.stateNode.containerInfo!==ye.containerInfo||ue.stateNode.implementation!==ye.implementation?(ue=Iu(ye,be.mode,Pe),ue.return=be,ue):(ue=_(ue,ye.children||[]),ue.return=be,ue)}function De(be,ue,ye,Pe,qe){return ue===null||ue.tag!==7?(ue=ca(ye,be.mode,Pe,qe),ue.return=be,ue):(ue=_(ue,ye),ue.return=be,ue)}function Fe(be,ue,ye){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return ue=Mu(""+ue,be.mode,ye),ue.return=be,ue;if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case P:return ye=Bl(ue.type,ue.key,ue.props,null,be.mode,ye),ye.ref=eo(be,null,ue),ye.return=be,ye;case B:return ue=Iu(ue,be.mode,ye),ue.return=be,ue;case z:var Pe=ue._init;return Fe(be,Pe(ue._payload),ye)}if(ke(ue)||W(ue))return ue=ca(ue,be.mode,ye,null),ue.return=be,ue;hl(be,ue)}return null}function Te(be,ue,ye,Pe){var qe=ue!==null?ue.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number")return qe!==null?null:re(be,ue,""+ye,Pe);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case P:return ye.key===qe?ce(be,ue,ye,Pe):null;case B:return ye.key===qe?je(be,ue,ye,Pe):null;case z:return qe=ye._init,Te(be,ue,qe(ye._payload),Pe)}if(ke(ye)||W(ye))return qe!==null?null:De(be,ue,ye,Pe,null);hl(be,ye)}return null}function ze(be,ue,ye,Pe,qe){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number")return be=be.get(ye)||null,re(ue,be,""+Pe,qe);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case P:return be=be.get(Pe.key===null?ye:Pe.key)||null,ce(ue,be,Pe,qe);case B:return be=be.get(Pe.key===null?ye:Pe.key)||null,je(ue,be,Pe,qe);case z:var nt=Pe._init;return ze(be,ue,ye,nt(Pe._payload),qe)}if(ke(Pe)||W(Pe))return be=be.get(ye)||null,De(ue,be,Pe,qe,null);hl(ue,Pe)}return null}function $e(be,ue,ye,Pe){for(var qe=null,nt=null,st=ue,it=ue=0,gn=null;st!==null&&it<ye.length;it++){st.index>it?(gn=st,st=null):gn=st.sibling;var vt=Te(be,st,ye[it],Pe);if(vt===null){st===null&&(st=gn);break}r&&st&&vt.alternate===null&&o(be,st),ue=F(vt,ue,it),nt===null?qe=vt:nt.sibling=vt,nt=vt,st=gn}if(it===ye.length)return h(be,st),zt&&ta(be,it),qe;if(st===null){for(;it<ye.length;it++)st=Fe(be,ye[it],Pe),st!==null&&(ue=F(st,ue,it),nt===null?qe=st:nt.sibling=st,nt=st);return zt&&ta(be,it),qe}for(st=v(be,st);it<ye.length;it++)gn=ze(st,be,it,ye[it],Pe),gn!==null&&(r&&gn.alternate!==null&&st.delete(gn.key===null?it:gn.key),ue=F(gn,ue,it),nt===null?qe=gn:nt.sibling=gn,nt=gn);return r&&st.forEach(function(Fr){return o(be,Fr)}),zt&&ta(be,it),qe}function We(be,ue,ye,Pe){var qe=W(ye);if(typeof qe!="function")throw Error(s(150));if(ye=qe.call(ye),ye==null)throw Error(s(151));for(var nt=qe=null,st=ue,it=ue=0,gn=null,vt=ye.next();st!==null&&!vt.done;it++,vt=ye.next()){st.index>it?(gn=st,st=null):gn=st.sibling;var Fr=Te(be,st,vt.value,Pe);if(Fr===null){st===null&&(st=gn);break}r&&st&&Fr.alternate===null&&o(be,st),ue=F(Fr,ue,it),nt===null?qe=Fr:nt.sibling=Fr,nt=Fr,st=gn}if(vt.done)return h(be,st),zt&&ta(be,it),qe;if(st===null){for(;!vt.done;it++,vt=ye.next())vt=Fe(be,vt.value,Pe),vt!==null&&(ue=F(vt,ue,it),nt===null?qe=vt:nt.sibling=vt,nt=vt);return zt&&ta(be,it),qe}for(st=v(be,st);!vt.done;it++,vt=ye.next())vt=ze(st,be,it,vt.value,Pe),vt!==null&&(r&&vt.alternate!==null&&st.delete(vt.key===null?it:vt.key),ue=F(vt,ue,it),nt===null?qe=vt:nt.sibling=vt,nt=vt);return r&&st.forEach(function(v5){return o(be,v5)}),zt&&ta(be,it),qe}function en(be,ue,ye,Pe){if(typeof ye=="object"&&ye!==null&&ye.type===$&&ye.key===null&&(ye=ye.props.children),typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case P:e:{for(var qe=ye.key,nt=ue;nt!==null;){if(nt.key===qe){if(qe=ye.type,qe===$){if(nt.tag===7){h(be,nt.sibling),ue=_(nt,ye.props.children),ue.return=be,be=ue;break e}}else if(nt.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===z&&xm(qe)===nt.type){h(be,nt.sibling),ue=_(nt,ye.props),ue.ref=eo(be,nt,ye),ue.return=be,be=ue;break e}h(be,nt);break}else o(be,nt);nt=nt.sibling}ye.type===$?(ue=ca(ye.props.children,be.mode,Pe,ye.key),ue.return=be,be=ue):(Pe=Bl(ye.type,ye.key,ye.props,null,be.mode,Pe),Pe.ref=eo(be,ue,ye),Pe.return=be,be=Pe)}return Y(be);case B:e:{for(nt=ye.key;ue!==null;){if(ue.key===nt)if(ue.tag===4&&ue.stateNode.containerInfo===ye.containerInfo&&ue.stateNode.implementation===ye.implementation){h(be,ue.sibling),ue=_(ue,ye.children||[]),ue.return=be,be=ue;break e}else{h(be,ue);break}else o(be,ue);ue=ue.sibling}ue=Iu(ye,be.mode,Pe),ue.return=be,be=ue}return Y(be);case z:return nt=ye._init,en(be,ue,nt(ye._payload),Pe)}if(ke(ye))return $e(be,ue,ye,Pe);if(W(ye))return We(be,ue,ye,Pe);hl(be,ye)}return typeof ye=="string"&&ye!==""||typeof ye=="number"?(ye=""+ye,ue!==null&&ue.tag===6?(h(be,ue.sibling),ue=_(ue,ye),ue.return=be,be=ue):(h(be,ue),ue=Mu(ye,be.mode,Pe),ue.return=be,be=ue),Y(be)):h(be,ue)}return en}var Ka=gm(!0),bm=gm(!1),pl=wr(null),ml=null,Ga=null,Hd=null;function Ud(){Hd=Ga=ml=null}function Wd(r){var o=pl.current;Rt(pl),r._currentValue=o}function Kd(r,o,h){for(;r!==null;){var v=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,v!==null&&(v.childLanes|=o)):v!==null&&(v.childLanes&o)!==o&&(v.childLanes|=o),r===h)break;r=r.return}}function Ya(r,o){ml=r,Hd=Ga=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&o)!==0&&(Wn=!0),r.firstContext=null)}function us(r){var o=r._currentValue;if(Hd!==r)if(r={context:r,memoizedValue:o,next:null},Ga===null){if(ml===null)throw Error(s(308));Ga=r,ml.dependencies={lanes:0,firstContext:r}}else Ga=Ga.next=r;return o}var na=null;function Gd(r){na===null?na=[r]:na.push(r)}function vm(r,o,h,v){var _=o.interleaved;return _===null?(h.next=h,Gd(o)):(h.next=_.next,_.next=h),o.interleaved=h,nr(r,v)}function nr(r,o){r.lanes|=o;var h=r.alternate;for(h!==null&&(h.lanes|=o),h=r,r=r.return;r!==null;)r.childLanes|=o,h=r.alternate,h!==null&&(h.childLanes|=o),h=r,r=r.return;return h.tag===3?h.stateNode:null}var jr=!1;function Yd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ym(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function sr(r,o){return{eventTime:r,lane:o,tag:0,payload:null,callback:null,next:null}}function Nr(r,o,h){var v=r.updateQueue;if(v===null)return null;if(v=v.shared,(bt&2)!==0){var _=v.pending;return _===null?o.next=o:(o.next=_.next,_.next=o),v.pending=o,nr(r,h)}return _=v.interleaved,_===null?(o.next=o,Gd(v)):(o.next=_.next,_.next=o),v.interleaved=o,nr(r,h)}function xl(r,o,h){if(o=o.updateQueue,o!==null&&(o=o.shared,(h&4194240)!==0)){var v=o.lanes;v&=r.pendingLanes,h|=v,o.lanes=h,Li(r,h)}}function wm(r,o){var h=r.updateQueue,v=r.alternate;if(v!==null&&(v=v.updateQueue,h===v)){var _=null,F=null;if(h=h.firstBaseUpdate,h!==null){do{var Y={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};F===null?_=F=Y:F=F.next=Y,h=h.next}while(h!==null);F===null?_=F=o:F=F.next=o}else _=F=o;h={baseState:v.baseState,firstBaseUpdate:_,lastBaseUpdate:F,shared:v.shared,effects:v.effects},r.updateQueue=h;return}r=h.lastBaseUpdate,r===null?h.firstBaseUpdate=o:r.next=o,h.lastBaseUpdate=o}function gl(r,o,h,v){var _=r.updateQueue;jr=!1;var F=_.firstBaseUpdate,Y=_.lastBaseUpdate,re=_.shared.pending;if(re!==null){_.shared.pending=null;var ce=re,je=ce.next;ce.next=null,Y===null?F=je:Y.next=je,Y=ce;var De=r.alternate;De!==null&&(De=De.updateQueue,re=De.lastBaseUpdate,re!==Y&&(re===null?De.firstBaseUpdate=je:re.next=je,De.lastBaseUpdate=ce))}if(F!==null){var Fe=_.baseState;Y=0,De=je=ce=null,re=F;do{var Te=re.lane,ze=re.eventTime;if((v&Te)===Te){De!==null&&(De=De.next={eventTime:ze,lane:0,tag:re.tag,payload:re.payload,callback:re.callback,next:null});e:{var $e=r,We=re;switch(Te=o,ze=h,We.tag){case 1:if($e=We.payload,typeof $e=="function"){Fe=$e.call(ze,Fe,Te);break e}Fe=$e;break e;case 3:$e.flags=$e.flags&-65537|128;case 0:if($e=We.payload,Te=typeof $e=="function"?$e.call(ze,Fe,Te):$e,Te==null)break e;Fe=Z({},Fe,Te);break e;case 2:jr=!0}}re.callback!==null&&re.lane!==0&&(r.flags|=64,Te=_.effects,Te===null?_.effects=[re]:Te.push(re))}else ze={eventTime:ze,lane:Te,tag:re.tag,payload:re.payload,callback:re.callback,next:null},De===null?(je=De=ze,ce=Fe):De=De.next=ze,Y|=Te;if(re=re.next,re===null){if(re=_.shared.pending,re===null)break;Te=re,re=Te.next,Te.next=null,_.lastBaseUpdate=Te,_.shared.pending=null}}while(!0);if(De===null&&(ce=Fe),_.baseState=ce,_.firstBaseUpdate=je,_.lastBaseUpdate=De,o=_.shared.interleaved,o!==null){_=o;do Y|=_.lane,_=_.next;while(_!==o)}else F===null&&(_.shared.lanes=0);aa|=Y,r.lanes=Y,r.memoizedState=Fe}}function Sm(r,o,h){if(r=o.effects,o.effects=null,r!==null)for(o=0;o<r.length;o++){var v=r[o],_=v.callback;if(_!==null){if(v.callback=null,v=h,typeof _!="function")throw Error(s(191,_));_.call(v)}}}var to={},Ls=wr(to),no=wr(to),so=wr(to);function sa(r){if(r===to)throw Error(s(174));return r}function qd(r,o){switch(Ft(so,o),Ft(no,r),Ft(Ls,to),r=o.nodeType,r){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:ot(null,"");break;default:r=r===8?o.parentNode:o,o=r.namespaceURI||null,r=r.tagName,o=ot(o,r)}Rt(Ls),Ft(Ls,o)}function qa(){Rt(Ls),Rt(no),Rt(so)}function km(r){sa(so.current);var o=sa(Ls.current),h=ot(o,r.type);o!==h&&(Ft(no,r),Ft(Ls,h))}function Zd(r){no.current===r&&(Rt(Ls),Rt(no))}var Ht=wr(0);function bl(r){for(var o=r;o!==null;){if(o.tag===13){var h=o.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Qd=[];function Xd(){for(var r=0;r<Qd.length;r++)Qd[r]._workInProgressVersionPrimary=null;Qd.length=0}var vl=A.ReactCurrentDispatcher,Jd=A.ReactCurrentBatchConfig,ra=0,Ut=null,dn=null,mn=null,yl=!1,ro=!1,ao=0,$w=0;function jn(){throw Error(s(321))}function eu(r,o){if(o===null)return!1;for(var h=0;h<o.length&&h<r.length;h++)if(!ws(r[h],o[h]))return!1;return!0}function tu(r,o,h,v,_,F){if(ra=F,Ut=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,vl.current=r===null||r.memoizedState===null?Ww:Kw,r=h(v,_),ro){F=0;do{if(ro=!1,ao=0,25<=F)throw Error(s(301));F+=1,mn=dn=null,o.updateQueue=null,vl.current=Gw,r=h(v,_)}while(ro)}if(vl.current=kl,o=dn!==null&&dn.next!==null,ra=0,mn=dn=Ut=null,yl=!1,o)throw Error(s(300));return r}function nu(){var r=ao!==0;return ao=0,r}function zs(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mn===null?Ut.memoizedState=mn=r:mn=mn.next=r,mn}function fs(){if(dn===null){var r=Ut.alternate;r=r!==null?r.memoizedState:null}else r=dn.next;var o=mn===null?Ut.memoizedState:mn.next;if(o!==null)mn=o,dn=r;else{if(r===null)throw Error(s(310));dn=r,r={memoizedState:dn.memoizedState,baseState:dn.baseState,baseQueue:dn.baseQueue,queue:dn.queue,next:null},mn===null?Ut.memoizedState=mn=r:mn=mn.next=r}return mn}function io(r,o){return typeof o=="function"?o(r):o}function su(r){var o=fs(),h=o.queue;if(h===null)throw Error(s(311));h.lastRenderedReducer=r;var v=dn,_=v.baseQueue,F=h.pending;if(F!==null){if(_!==null){var Y=_.next;_.next=F.next,F.next=Y}v.baseQueue=_=F,h.pending=null}if(_!==null){F=_.next,v=v.baseState;var re=Y=null,ce=null,je=F;do{var De=je.lane;if((ra&De)===De)ce!==null&&(ce=ce.next={lane:0,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null}),v=je.hasEagerState?je.eagerState:r(v,je.action);else{var Fe={lane:De,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null};ce===null?(re=ce=Fe,Y=v):ce=ce.next=Fe,Ut.lanes|=De,aa|=De}je=je.next}while(je!==null&&je!==F);ce===null?Y=v:ce.next=re,ws(v,o.memoizedState)||(Wn=!0),o.memoizedState=v,o.baseState=Y,o.baseQueue=ce,h.lastRenderedState=v}if(r=h.interleaved,r!==null){_=r;do F=_.lane,Ut.lanes|=F,aa|=F,_=_.next;while(_!==r)}else _===null&&(h.lanes=0);return[o.memoizedState,h.dispatch]}function ru(r){var o=fs(),h=o.queue;if(h===null)throw Error(s(311));h.lastRenderedReducer=r;var v=h.dispatch,_=h.pending,F=o.memoizedState;if(_!==null){h.pending=null;var Y=_=_.next;do F=r(F,Y.action),Y=Y.next;while(Y!==_);ws(F,o.memoizedState)||(Wn=!0),o.memoizedState=F,o.baseQueue===null&&(o.baseState=F),h.lastRenderedState=F}return[F,v]}function jm(){}function Nm(r,o){var h=Ut,v=fs(),_=o(),F=!ws(v.memoizedState,_);if(F&&(v.memoizedState=_,Wn=!0),v=v.queue,au(Am.bind(null,h,v,r),[r]),v.getSnapshot!==o||F||mn!==null&&mn.memoizedState.tag&1){if(h.flags|=2048,oo(9,_m.bind(null,h,v,_,o),void 0,null),xn===null)throw Error(s(349));(ra&30)!==0||Cm(h,o,_)}return _}function Cm(r,o,h){r.flags|=16384,r={getSnapshot:o,value:h},o=Ut.updateQueue,o===null?(o={lastEffect:null,stores:null},Ut.updateQueue=o,o.stores=[r]):(h=o.stores,h===null?o.stores=[r]:h.push(r))}function _m(r,o,h,v){o.value=h,o.getSnapshot=v,Em(o)&&Tm(r)}function Am(r,o,h){return h(function(){Em(o)&&Tm(r)})}function Em(r){var o=r.getSnapshot;r=r.value;try{var h=o();return!ws(r,h)}catch{return!0}}function Tm(r){var o=nr(r,1);o!==null&&Cs(o,r,1,-1)}function Dm(r){var o=zs();return typeof r=="function"&&(r=r()),o.memoizedState=o.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:r},o.queue=r,r=r.dispatch=Uw.bind(null,Ut,r),[o.memoizedState,r]}function oo(r,o,h,v){return r={tag:r,create:o,destroy:h,deps:v,next:null},o=Ut.updateQueue,o===null?(o={lastEffect:null,stores:null},Ut.updateQueue=o,o.lastEffect=r.next=r):(h=o.lastEffect,h===null?o.lastEffect=r.next=r:(v=h.next,h.next=r,r.next=v,o.lastEffect=r)),r}function Fm(){return fs().memoizedState}function wl(r,o,h,v){var _=zs();Ut.flags|=r,_.memoizedState=oo(1|o,h,void 0,v===void 0?null:v)}function Sl(r,o,h,v){var _=fs();v=v===void 0?null:v;var F=void 0;if(dn!==null){var Y=dn.memoizedState;if(F=Y.destroy,v!==null&&eu(v,Y.deps)){_.memoizedState=oo(o,h,F,v);return}}Ut.flags|=r,_.memoizedState=oo(1|o,h,F,v)}function Mm(r,o){return wl(8390656,8,r,o)}function au(r,o){return Sl(2048,8,r,o)}function Im(r,o){return Sl(4,2,r,o)}function Pm(r,o){return Sl(4,4,r,o)}function Rm(r,o){if(typeof o=="function")return r=r(),o(r),function(){o(null)};if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function Bm(r,o,h){return h=h!=null?h.concat([r]):null,Sl(4,4,Rm.bind(null,o,r),h)}function iu(){}function Lm(r,o){var h=fs();o=o===void 0?null:o;var v=h.memoizedState;return v!==null&&o!==null&&eu(o,v[1])?v[0]:(h.memoizedState=[r,o],r)}function zm(r,o){var h=fs();o=o===void 0?null:o;var v=h.memoizedState;return v!==null&&o!==null&&eu(o,v[1])?v[0]:(r=r(),h.memoizedState=[r,o],r)}function Om(r,o,h){return(ra&21)===0?(r.baseState&&(r.baseState=!1,Wn=!0),r.memoizedState=h):(ws(h,o)||(h=Ko(),Ut.lanes|=h,aa|=h,r.baseState=!0),o)}function Vw(r,o){var h=yt;yt=h!==0&&4>h?h:4,r(!0);var v=Jd.transition;Jd.transition={};try{r(!1),o()}finally{yt=h,Jd.transition=v}}function $m(){return fs().memoizedState}function Hw(r,o,h){var v=Er(r);if(h={lane:v,action:h,hasEagerState:!1,eagerState:null,next:null},Vm(r))Hm(o,h);else if(h=vm(r,o,h,v),h!==null){var _=Bn();Cs(h,r,v,_),Um(h,o,v)}}function Uw(r,o,h){var v=Er(r),_={lane:v,action:h,hasEagerState:!1,eagerState:null,next:null};if(Vm(r))Hm(o,_);else{var F=r.alternate;if(r.lanes===0&&(F===null||F.lanes===0)&&(F=o.lastRenderedReducer,F!==null))try{var Y=o.lastRenderedState,re=F(Y,h);if(_.hasEagerState=!0,_.eagerState=re,ws(re,Y)){var ce=o.interleaved;ce===null?(_.next=_,Gd(o)):(_.next=ce.next,ce.next=_),o.interleaved=_;return}}catch{}finally{}h=vm(r,o,_,v),h!==null&&(_=Bn(),Cs(h,r,v,_),Um(h,o,v))}}function Vm(r){var o=r.alternate;return r===Ut||o!==null&&o===Ut}function Hm(r,o){ro=yl=!0;var h=r.pending;h===null?o.next=o:(o.next=h.next,h.next=o),r.pending=o}function Um(r,o,h){if((h&4194240)!==0){var v=o.lanes;v&=r.pendingLanes,h|=v,o.lanes=h,Li(r,h)}}var kl={readContext:us,useCallback:jn,useContext:jn,useEffect:jn,useImperativeHandle:jn,useInsertionEffect:jn,useLayoutEffect:jn,useMemo:jn,useReducer:jn,useRef:jn,useState:jn,useDebugValue:jn,useDeferredValue:jn,useTransition:jn,useMutableSource:jn,useSyncExternalStore:jn,useId:jn,unstable_isNewReconciler:!1},Ww={readContext:us,useCallback:function(r,o){return zs().memoizedState=[r,o===void 0?null:o],r},useContext:us,useEffect:Mm,useImperativeHandle:function(r,o,h){return h=h!=null?h.concat([r]):null,wl(4194308,4,Rm.bind(null,o,r),h)},useLayoutEffect:function(r,o){return wl(4194308,4,r,o)},useInsertionEffect:function(r,o){return wl(4,2,r,o)},useMemo:function(r,o){var h=zs();return o=o===void 0?null:o,r=r(),h.memoizedState=[r,o],r},useReducer:function(r,o,h){var v=zs();return o=h!==void 0?h(o):o,v.memoizedState=v.baseState=o,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:o},v.queue=r,r=r.dispatch=Hw.bind(null,Ut,r),[v.memoizedState,r]},useRef:function(r){var o=zs();return r={current:r},o.memoizedState=r},useState:Dm,useDebugValue:iu,useDeferredValue:function(r){return zs().memoizedState=r},useTransition:function(){var r=Dm(!1),o=r[0];return r=Vw.bind(null,r[1]),zs().memoizedState=r,[o,r]},useMutableSource:function(){},useSyncExternalStore:function(r,o,h){var v=Ut,_=zs();if(zt){if(h===void 0)throw Error(s(407));h=h()}else{if(h=o(),xn===null)throw Error(s(349));(ra&30)!==0||Cm(v,o,h)}_.memoizedState=h;var F={value:h,getSnapshot:o};return _.queue=F,Mm(Am.bind(null,v,F,r),[r]),v.flags|=2048,oo(9,_m.bind(null,v,F,h,o),void 0,null),h},useId:function(){var r=zs(),o=xn.identifierPrefix;if(zt){var h=tr,v=er;h=(v&~(1<<32-On(v)-1)).toString(32)+h,o=":"+o+"R"+h,h=ao++,0<h&&(o+="H"+h.toString(32)),o+=":"}else h=$w++,o=":"+o+"r"+h.toString(32)+":";return r.memoizedState=o},unstable_isNewReconciler:!1},Kw={readContext:us,useCallback:Lm,useContext:us,useEffect:au,useImperativeHandle:Bm,useInsertionEffect:Im,useLayoutEffect:Pm,useMemo:zm,useReducer:su,useRef:Fm,useState:function(){return su(io)},useDebugValue:iu,useDeferredValue:function(r){var o=fs();return Om(o,dn.memoizedState,r)},useTransition:function(){var r=su(io)[0],o=fs().memoizedState;return[r,o]},useMutableSource:jm,useSyncExternalStore:Nm,useId:$m,unstable_isNewReconciler:!1},Gw={readContext:us,useCallback:Lm,useContext:us,useEffect:au,useImperativeHandle:Bm,useInsertionEffect:Im,useLayoutEffect:Pm,useMemo:zm,useReducer:ru,useRef:Fm,useState:function(){return ru(io)},useDebugValue:iu,useDeferredValue:function(r){var o=fs();return dn===null?o.memoizedState=r:Om(o,dn.memoizedState,r)},useTransition:function(){var r=ru(io)[0],o=fs().memoizedState;return[r,o]},useMutableSource:jm,useSyncExternalStore:Nm,useId:$m,unstable_isNewReconciler:!1};function ks(r,o){if(r&&r.defaultProps){o=Z({},o),r=r.defaultProps;for(var h in r)o[h]===void 0&&(o[h]=r[h]);return o}return o}function ou(r,o,h,v){o=r.memoizedState,h=h(v,o),h=h==null?o:Z({},o,h),r.memoizedState=h,r.lanes===0&&(r.updateQueue.baseState=h)}var jl={isMounted:function(r){return(r=r._reactInternals)?Rs(r)===r:!1},enqueueSetState:function(r,o,h){r=r._reactInternals;var v=Bn(),_=Er(r),F=sr(v,_);F.payload=o,h!=null&&(F.callback=h),o=Nr(r,F,_),o!==null&&(Cs(o,r,_,v),xl(o,r,_))},enqueueReplaceState:function(r,o,h){r=r._reactInternals;var v=Bn(),_=Er(r),F=sr(v,_);F.tag=1,F.payload=o,h!=null&&(F.callback=h),o=Nr(r,F,_),o!==null&&(Cs(o,r,_,v),xl(o,r,_))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var h=Bn(),v=Er(r),_=sr(h,v);_.tag=2,o!=null&&(_.callback=o),o=Nr(r,_,v),o!==null&&(Cs(o,r,v,h),xl(o,r,v))}};function Wm(r,o,h,v,_,F,Y){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(v,F,Y):o.prototype&&o.prototype.isPureReactComponent?!Gi(h,v)||!Gi(_,F):!0}function Km(r,o,h){var v=!1,_=Sr,F=o.contextType;return typeof F=="object"&&F!==null?F=us(F):(_=Un(o)?Jr:kn.current,v=o.contextTypes,F=(v=v!=null)?Va(r,_):Sr),o=new o(h,F),r.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=jl,r.stateNode=o,o._reactInternals=r,v&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=_,r.__reactInternalMemoizedMaskedChildContext=F),o}function Gm(r,o,h,v){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(h,v),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(h,v),o.state!==r&&jl.enqueueReplaceState(o,o.state,null)}function lu(r,o,h,v){var _=r.stateNode;_.props=h,_.state=r.memoizedState,_.refs={},Yd(r);var F=o.contextType;typeof F=="object"&&F!==null?_.context=us(F):(F=Un(o)?Jr:kn.current,_.context=Va(r,F)),_.state=r.memoizedState,F=o.getDerivedStateFromProps,typeof F=="function"&&(ou(r,o,F,h),_.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(o=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),o!==_.state&&jl.enqueueReplaceState(_,_.state,null),gl(r,h,_,v),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308)}function Za(r,o){try{var h="",v=o;do h+=G(v),v=v.return;while(v);var _=h}catch(F){_=`
Error generating stack: `+F.message+`
`+F.stack}return{value:r,source:o,stack:_,digest:null}}function cu(r,o,h){return{value:r,source:null,stack:h??null,digest:o??null}}function du(r,o){try{console.error(o.value)}catch(h){setTimeout(function(){throw h})}}var Yw=typeof WeakMap=="function"?WeakMap:Map;function Ym(r,o,h){h=sr(-1,h),h.tag=3,h.payload={element:null};var v=o.value;return h.callback=function(){Dl||(Dl=!0,Nu=v),du(r,o)},h}function qm(r,o,h){h=sr(-1,h),h.tag=3;var v=r.type.getDerivedStateFromError;if(typeof v=="function"){var _=o.value;h.payload=function(){return v(_)},h.callback=function(){du(r,o)}}var F=r.stateNode;return F!==null&&typeof F.componentDidCatch=="function"&&(h.callback=function(){du(r,o),typeof v!="function"&&(_r===null?_r=new Set([this]):_r.add(this));var Y=o.stack;this.componentDidCatch(o.value,{componentStack:Y!==null?Y:""})}),h}function Zm(r,o,h){var v=r.pingCache;if(v===null){v=r.pingCache=new Yw;var _=new Set;v.set(o,_)}else _=v.get(o),_===void 0&&(_=new Set,v.set(o,_));_.has(h)||(_.add(h),r=l5.bind(null,r,o,h),o.then(r,r))}function Qm(r){do{var o;if((o=r.tag===13)&&(o=r.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return r;r=r.return}while(r!==null);return null}function Xm(r,o,h,v,_){return(r.mode&1)===0?(r===o?r.flags|=65536:(r.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(o=sr(-1,1),o.tag=2,Nr(h,o,1))),h.lanes|=1),r):(r.flags|=65536,r.lanes=_,r)}var qw=A.ReactCurrentOwner,Wn=!1;function Rn(r,o,h,v){o.child=r===null?bm(o,null,h,v):Ka(o,r.child,h,v)}function Jm(r,o,h,v,_){h=h.render;var F=o.ref;return Ya(o,_),v=tu(r,o,h,v,F,_),h=nu(),r!==null&&!Wn?(o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~_,rr(r,o,_)):(zt&&h&&Ld(o),o.flags|=1,Rn(r,o,v,_),o.child)}function e0(r,o,h,v,_){if(r===null){var F=h.type;return typeof F=="function"&&!Fu(F)&&F.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(o.tag=15,o.type=F,t0(r,o,F,v,_)):(r=Bl(h.type,null,v,o,o.mode,_),r.ref=o.ref,r.return=o,o.child=r)}if(F=r.child,(r.lanes&_)===0){var Y=F.memoizedProps;if(h=h.compare,h=h!==null?h:Gi,h(Y,v)&&r.ref===o.ref)return rr(r,o,_)}return o.flags|=1,r=Dr(F,v),r.ref=o.ref,r.return=o,o.child=r}function t0(r,o,h,v,_){if(r!==null){var F=r.memoizedProps;if(Gi(F,v)&&r.ref===o.ref)if(Wn=!1,o.pendingProps=v=F,(r.lanes&_)!==0)(r.flags&131072)!==0&&(Wn=!0);else return o.lanes=r.lanes,rr(r,o,_)}return uu(r,o,h,v,_)}function n0(r,o,h){var v=o.pendingProps,_=v.children,F=r!==null?r.memoizedState:null;if(v.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ft(Xa,ns),ns|=h;else{if((h&1073741824)===0)return r=F!==null?F.baseLanes|h:h,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:r,cachePool:null,transitions:null},o.updateQueue=null,Ft(Xa,ns),ns|=r,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},v=F!==null?F.baseLanes:h,Ft(Xa,ns),ns|=v}else F!==null?(v=F.baseLanes|h,o.memoizedState=null):v=h,Ft(Xa,ns),ns|=v;return Rn(r,o,_,h),o.child}function s0(r,o){var h=o.ref;(r===null&&h!==null||r!==null&&r.ref!==h)&&(o.flags|=512,o.flags|=2097152)}function uu(r,o,h,v,_){var F=Un(h)?Jr:kn.current;return F=Va(o,F),Ya(o,_),h=tu(r,o,h,v,F,_),v=nu(),r!==null&&!Wn?(o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~_,rr(r,o,_)):(zt&&v&&Ld(o),o.flags|=1,Rn(r,o,h,_),o.child)}function r0(r,o,h,v,_){if(Un(h)){var F=!0;ll(o)}else F=!1;if(Ya(o,_),o.stateNode===null)Cl(r,o),Km(o,h,v),lu(o,h,v,_),v=!0;else if(r===null){var Y=o.stateNode,re=o.memoizedProps;Y.props=re;var ce=Y.context,je=h.contextType;typeof je=="object"&&je!==null?je=us(je):(je=Un(h)?Jr:kn.current,je=Va(o,je));var De=h.getDerivedStateFromProps,Fe=typeof De=="function"||typeof Y.getSnapshotBeforeUpdate=="function";Fe||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(re!==v||ce!==je)&&Gm(o,Y,v,je),jr=!1;var Te=o.memoizedState;Y.state=Te,gl(o,v,Y,_),ce=o.memoizedState,re!==v||Te!==ce||Hn.current||jr?(typeof De=="function"&&(ou(o,h,De,v),ce=o.memoizedState),(re=jr||Wm(o,h,re,v,Te,ce,je))?(Fe||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount()),typeof Y.componentDidMount=="function"&&(o.flags|=4194308)):(typeof Y.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=v,o.memoizedState=ce),Y.props=v,Y.state=ce,Y.context=je,v=re):(typeof Y.componentDidMount=="function"&&(o.flags|=4194308),v=!1)}else{Y=o.stateNode,ym(r,o),re=o.memoizedProps,je=o.type===o.elementType?re:ks(o.type,re),Y.props=je,Fe=o.pendingProps,Te=Y.context,ce=h.contextType,typeof ce=="object"&&ce!==null?ce=us(ce):(ce=Un(h)?Jr:kn.current,ce=Va(o,ce));var ze=h.getDerivedStateFromProps;(De=typeof ze=="function"||typeof Y.getSnapshotBeforeUpdate=="function")||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(re!==Fe||Te!==ce)&&Gm(o,Y,v,ce),jr=!1,Te=o.memoizedState,Y.state=Te,gl(o,v,Y,_);var $e=o.memoizedState;re!==Fe||Te!==$e||Hn.current||jr?(typeof ze=="function"&&(ou(o,h,ze,v),$e=o.memoizedState),(je=jr||Wm(o,h,je,v,Te,$e,ce)||!1)?(De||typeof Y.UNSAFE_componentWillUpdate!="function"&&typeof Y.componentWillUpdate!="function"||(typeof Y.componentWillUpdate=="function"&&Y.componentWillUpdate(v,$e,ce),typeof Y.UNSAFE_componentWillUpdate=="function"&&Y.UNSAFE_componentWillUpdate(v,$e,ce)),typeof Y.componentDidUpdate=="function"&&(o.flags|=4),typeof Y.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof Y.componentDidUpdate!="function"||re===r.memoizedProps&&Te===r.memoizedState||(o.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||re===r.memoizedProps&&Te===r.memoizedState||(o.flags|=1024),o.memoizedProps=v,o.memoizedState=$e),Y.props=v,Y.state=$e,Y.context=ce,v=je):(typeof Y.componentDidUpdate!="function"||re===r.memoizedProps&&Te===r.memoizedState||(o.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||re===r.memoizedProps&&Te===r.memoizedState||(o.flags|=1024),v=!1)}return fu(r,o,h,v,F,_)}function fu(r,o,h,v,_,F){s0(r,o);var Y=(o.flags&128)!==0;if(!v&&!Y)return _&&cm(o,h,!1),rr(r,o,F);v=o.stateNode,qw.current=o;var re=Y&&typeof h.getDerivedStateFromError!="function"?null:v.render();return o.flags|=1,r!==null&&Y?(o.child=Ka(o,r.child,null,F),o.child=Ka(o,null,re,F)):Rn(r,o,re,F),o.memoizedState=v.state,_&&cm(o,h,!0),o.child}function a0(r){var o=r.stateNode;o.pendingContext?om(r,o.pendingContext,o.pendingContext!==o.context):o.context&&om(r,o.context,!1),qd(r,o.containerInfo)}function i0(r,o,h,v,_){return Wa(),Vd(_),o.flags|=256,Rn(r,o,h,v),o.child}var hu={dehydrated:null,treeContext:null,retryLane:0};function pu(r){return{baseLanes:r,cachePool:null,transitions:null}}function o0(r,o,h){var v=o.pendingProps,_=Ht.current,F=!1,Y=(o.flags&128)!==0,re;if((re=Y)||(re=r!==null&&r.memoizedState===null?!1:(_&2)!==0),re?(F=!0,o.flags&=-129):(r===null||r.memoizedState!==null)&&(_|=1),Ft(Ht,_&1),r===null)return $d(o),r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((o.mode&1)===0?o.lanes=1:r.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(Y=v.children,r=v.fallback,F?(v=o.mode,F=o.child,Y={mode:"hidden",children:Y},(v&1)===0&&F!==null?(F.childLanes=0,F.pendingProps=Y):F=Ll(Y,v,0,null),r=ca(r,v,h,null),F.return=o,r.return=o,F.sibling=r,o.child=F,o.child.memoizedState=pu(h),o.memoizedState=hu,r):mu(o,Y));if(_=r.memoizedState,_!==null&&(re=_.dehydrated,re!==null))return Zw(r,o,Y,v,re,_,h);if(F){F=v.fallback,Y=o.mode,_=r.child,re=_.sibling;var ce={mode:"hidden",children:v.children};return(Y&1)===0&&o.child!==_?(v=o.child,v.childLanes=0,v.pendingProps=ce,o.deletions=null):(v=Dr(_,ce),v.subtreeFlags=_.subtreeFlags&14680064),re!==null?F=Dr(re,F):(F=ca(F,Y,h,null),F.flags|=2),F.return=o,v.return=o,v.sibling=F,o.child=v,v=F,F=o.child,Y=r.child.memoizedState,Y=Y===null?pu(h):{baseLanes:Y.baseLanes|h,cachePool:null,transitions:Y.transitions},F.memoizedState=Y,F.childLanes=r.childLanes&~h,o.memoizedState=hu,v}return F=r.child,r=F.sibling,v=Dr(F,{mode:"visible",children:v.children}),(o.mode&1)===0&&(v.lanes=h),v.return=o,v.sibling=null,r!==null&&(h=o.deletions,h===null?(o.deletions=[r],o.flags|=16):h.push(r)),o.child=v,o.memoizedState=null,v}function mu(r,o){return o=Ll({mode:"visible",children:o},r.mode,0,null),o.return=r,r.child=o}function Nl(r,o,h,v){return v!==null&&Vd(v),Ka(o,r.child,null,h),r=mu(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function Zw(r,o,h,v,_,F,Y){if(h)return o.flags&256?(o.flags&=-257,v=cu(Error(s(422))),Nl(r,o,Y,v)):o.memoizedState!==null?(o.child=r.child,o.flags|=128,null):(F=v.fallback,_=o.mode,v=Ll({mode:"visible",children:v.children},_,0,null),F=ca(F,_,Y,null),F.flags|=2,v.return=o,F.return=o,v.sibling=F,o.child=v,(o.mode&1)!==0&&Ka(o,r.child,null,Y),o.child.memoizedState=pu(Y),o.memoizedState=hu,F);if((o.mode&1)===0)return Nl(r,o,Y,null);if(_.data==="$!"){if(v=_.nextSibling&&_.nextSibling.dataset,v)var re=v.dgst;return v=re,F=Error(s(419)),v=cu(F,v,void 0),Nl(r,o,Y,v)}if(re=(Y&r.childLanes)!==0,Wn||re){if(v=xn,v!==null){switch(Y&-Y){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=(_&(v.suspendedLanes|Y))!==0?0:_,_!==0&&_!==F.retryLane&&(F.retryLane=_,nr(r,_),Cs(v,r,_,-1))}return Du(),v=cu(Error(s(421))),Nl(r,o,Y,v)}return _.data==="$?"?(o.flags|=128,o.child=r.child,o=c5.bind(null,r),_._reactRetry=o,null):(r=F.treeContext,ts=yr(_.nextSibling),es=o,zt=!0,Ss=null,r!==null&&(cs[ds++]=er,cs[ds++]=tr,cs[ds++]=ea,er=r.id,tr=r.overflow,ea=o),o=mu(o,v.children),o.flags|=4096,o)}function l0(r,o,h){r.lanes|=o;var v=r.alternate;v!==null&&(v.lanes|=o),Kd(r.return,o,h)}function xu(r,o,h,v,_){var F=r.memoizedState;F===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:v,tail:h,tailMode:_}:(F.isBackwards=o,F.rendering=null,F.renderingStartTime=0,F.last=v,F.tail=h,F.tailMode=_)}function c0(r,o,h){var v=o.pendingProps,_=v.revealOrder,F=v.tail;if(Rn(r,o,v.children,h),v=Ht.current,(v&2)!==0)v=v&1|2,o.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&l0(r,h,o);else if(r.tag===19)l0(r,h,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}v&=1}if(Ft(Ht,v),(o.mode&1)===0)o.memoizedState=null;else switch(_){case"forwards":for(h=o.child,_=null;h!==null;)r=h.alternate,r!==null&&bl(r)===null&&(_=h),h=h.sibling;h=_,h===null?(_=o.child,o.child=null):(_=h.sibling,h.sibling=null),xu(o,!1,_,h,F);break;case"backwards":for(h=null,_=o.child,o.child=null;_!==null;){if(r=_.alternate,r!==null&&bl(r)===null){o.child=_;break}r=_.sibling,_.sibling=h,h=_,_=r}xu(o,!0,h,null,F);break;case"together":xu(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Cl(r,o){(o.mode&1)===0&&r!==null&&(r.alternate=null,o.alternate=null,o.flags|=2)}function rr(r,o,h){if(r!==null&&(o.dependencies=r.dependencies),aa|=o.lanes,(h&o.childLanes)===0)return null;if(r!==null&&o.child!==r.child)throw Error(s(153));if(o.child!==null){for(r=o.child,h=Dr(r,r.pendingProps),o.child=h,h.return=o;r.sibling!==null;)r=r.sibling,h=h.sibling=Dr(r,r.pendingProps),h.return=o;h.sibling=null}return o.child}function Qw(r,o,h){switch(o.tag){case 3:a0(o),Wa();break;case 5:km(o);break;case 1:Un(o.type)&&ll(o);break;case 4:qd(o,o.stateNode.containerInfo);break;case 10:var v=o.type._context,_=o.memoizedProps.value;Ft(pl,v._currentValue),v._currentValue=_;break;case 13:if(v=o.memoizedState,v!==null)return v.dehydrated!==null?(Ft(Ht,Ht.current&1),o.flags|=128,null):(h&o.child.childLanes)!==0?o0(r,o,h):(Ft(Ht,Ht.current&1),r=rr(r,o,h),r!==null?r.sibling:null);Ft(Ht,Ht.current&1);break;case 19:if(v=(h&o.childLanes)!==0,(r.flags&128)!==0){if(v)return c0(r,o,h);o.flags|=128}if(_=o.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Ft(Ht,Ht.current),v)break;return null;case 22:case 23:return o.lanes=0,n0(r,o,h)}return rr(r,o,h)}var d0,gu,u0,f0;d0=function(r,o){for(var h=o.child;h!==null;){if(h.tag===5||h.tag===6)r.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===o)break;for(;h.sibling===null;){if(h.return===null||h.return===o)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},gu=function(){},u0=function(r,o,h,v){var _=r.memoizedProps;if(_!==v){r=o.stateNode,sa(Ls.current);var F=null;switch(h){case"input":_=M(r,_),v=M(r,v),F=[];break;case"select":_=Z({},_,{value:void 0}),v=Z({},v,{value:void 0}),F=[];break;case"textarea":_=de(r,_),v=de(r,v),F=[];break;default:typeof _.onClick!="function"&&typeof v.onClick=="function"&&(r.onclick=al)}_t(h,v);var Y;h=null;for(je in _)if(!v.hasOwnProperty(je)&&_.hasOwnProperty(je)&&_[je]!=null)if(je==="style"){var re=_[je];for(Y in re)re.hasOwnProperty(Y)&&(h||(h={}),h[Y]="")}else je!=="dangerouslySetInnerHTML"&&je!=="children"&&je!=="suppressContentEditableWarning"&&je!=="suppressHydrationWarning"&&je!=="autoFocus"&&(i.hasOwnProperty(je)?F||(F=[]):(F=F||[]).push(je,null));for(je in v){var ce=v[je];if(re=_?.[je],v.hasOwnProperty(je)&&ce!==re&&(ce!=null||re!=null))if(je==="style")if(re){for(Y in re)!re.hasOwnProperty(Y)||ce&&ce.hasOwnProperty(Y)||(h||(h={}),h[Y]="");for(Y in ce)ce.hasOwnProperty(Y)&&re[Y]!==ce[Y]&&(h||(h={}),h[Y]=ce[Y])}else h||(F||(F=[]),F.push(je,h)),h=ce;else je==="dangerouslySetInnerHTML"?(ce=ce?ce.__html:void 0,re=re?re.__html:void 0,ce!=null&&re!==ce&&(F=F||[]).push(je,ce)):je==="children"?typeof ce!="string"&&typeof ce!="number"||(F=F||[]).push(je,""+ce):je!=="suppressContentEditableWarning"&&je!=="suppressHydrationWarning"&&(i.hasOwnProperty(je)?(ce!=null&&je==="onScroll"&&Pt("scroll",r),F||re===ce||(F=[])):(F=F||[]).push(je,ce))}h&&(F=F||[]).push("style",h);var je=F;(o.updateQueue=je)&&(o.flags|=4)}},f0=function(r,o,h,v){h!==v&&(o.flags|=4)};function lo(r,o){if(!zt)switch(r.tailMode){case"hidden":o=r.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?r.tail=null:h.sibling=null;break;case"collapsed":h=r.tail;for(var v=null;h!==null;)h.alternate!==null&&(v=h),h=h.sibling;v===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:v.sibling=null}}function Nn(r){var o=r.alternate!==null&&r.alternate.child===r.child,h=0,v=0;if(o)for(var _=r.child;_!==null;)h|=_.lanes|_.childLanes,v|=_.subtreeFlags&14680064,v|=_.flags&14680064,_.return=r,_=_.sibling;else for(_=r.child;_!==null;)h|=_.lanes|_.childLanes,v|=_.subtreeFlags,v|=_.flags,_.return=r,_=_.sibling;return r.subtreeFlags|=v,r.childLanes=h,o}function Xw(r,o,h){var v=o.pendingProps;switch(zd(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nn(o),null;case 1:return Un(o.type)&&ol(),Nn(o),null;case 3:return v=o.stateNode,qa(),Rt(Hn),Rt(kn),Xd(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(r===null||r.child===null)&&(fl(o)?o.flags|=4:r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Ss!==null&&(Au(Ss),Ss=null))),gu(r,o),Nn(o),null;case 5:Zd(o);var _=sa(so.current);if(h=o.type,r!==null&&o.stateNode!=null)u0(r,o,h,v,_),r.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!v){if(o.stateNode===null)throw Error(s(166));return Nn(o),null}if(r=sa(Ls.current),fl(o)){v=o.stateNode,h=o.type;var F=o.memoizedProps;switch(v[Bs]=o,v[Xi]=F,r=(o.mode&1)!==0,h){case"dialog":Pt("cancel",v),Pt("close",v);break;case"iframe":case"object":case"embed":Pt("load",v);break;case"video":case"audio":for(_=0;_<qi.length;_++)Pt(qi[_],v);break;case"source":Pt("error",v);break;case"img":case"image":case"link":Pt("error",v),Pt("load",v);break;case"details":Pt("toggle",v);break;case"input":me(v,F),Pt("invalid",v);break;case"select":v._wrapperState={wasMultiple:!!F.multiple},Pt("invalid",v);break;case"textarea":fe(v,F),Pt("invalid",v)}_t(h,F),_=null;for(var Y in F)if(F.hasOwnProperty(Y)){var re=F[Y];Y==="children"?typeof re=="string"?v.textContent!==re&&(F.suppressHydrationWarning!==!0&&rl(v.textContent,re,r),_=["children",re]):typeof re=="number"&&v.textContent!==""+re&&(F.suppressHydrationWarning!==!0&&rl(v.textContent,re,r),_=["children",""+re]):i.hasOwnProperty(Y)&&re!=null&&Y==="onScroll"&&Pt("scroll",v)}switch(h){case"input":se(v),X(v,F,!0);break;case"textarea":se(v),Se(v);break;case"select":case"option":break;default:typeof F.onClick=="function"&&(v.onclick=al)}v=_,o.updateQueue=v,v!==null&&(o.flags|=4)}else{Y=_.nodeType===9?_:_.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Be(h)),r==="http://www.w3.org/1999/xhtml"?h==="script"?(r=Y.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof v.is=="string"?r=Y.createElement(h,{is:v.is}):(r=Y.createElement(h),h==="select"&&(Y=r,v.multiple?Y.multiple=!0:v.size&&(Y.size=v.size))):r=Y.createElementNS(r,h),r[Bs]=o,r[Xi]=v,d0(r,o,!1,!1),o.stateNode=r;e:{switch(Y=Fn(h,v),h){case"dialog":Pt("cancel",r),Pt("close",r),_=v;break;case"iframe":case"object":case"embed":Pt("load",r),_=v;break;case"video":case"audio":for(_=0;_<qi.length;_++)Pt(qi[_],r);_=v;break;case"source":Pt("error",r),_=v;break;case"img":case"image":case"link":Pt("error",r),Pt("load",r),_=v;break;case"details":Pt("toggle",r),_=v;break;case"input":me(r,v),_=M(r,v),Pt("invalid",r);break;case"option":_=v;break;case"select":r._wrapperState={wasMultiple:!!v.multiple},_=Z({},v,{value:void 0}),Pt("invalid",r);break;case"textarea":fe(r,v),_=de(r,v),Pt("invalid",r);break;default:_=v}_t(h,_),re=_;for(F in re)if(re.hasOwnProperty(F)){var ce=re[F];F==="style"?Mt(r,ce):F==="dangerouslySetInnerHTML"?(ce=ce?ce.__html:void 0,ce!=null&&Ue(r,ce)):F==="children"?typeof ce=="string"?(h!=="textarea"||ce!=="")&&Ze(r,ce):typeof ce=="number"&&Ze(r,""+ce):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(i.hasOwnProperty(F)?ce!=null&&F==="onScroll"&&Pt("scroll",r):ce!=null&&N(r,F,ce,Y))}switch(h){case"input":se(r),X(r,v,!1);break;case"textarea":se(r),Se(r);break;case"option":v.value!=null&&r.setAttribute("value",""+ne(v.value));break;case"select":r.multiple=!!v.multiple,F=v.value,F!=null?Ne(r,!!v.multiple,F,!1):v.defaultValue!=null&&Ne(r,!!v.multiple,v.defaultValue,!0);break;default:typeof _.onClick=="function"&&(r.onclick=al)}switch(h){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}}v&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Nn(o),null;case 6:if(r&&o.stateNode!=null)f0(r,o,r.memoizedProps,v);else{if(typeof v!="string"&&o.stateNode===null)throw Error(s(166));if(h=sa(so.current),sa(Ls.current),fl(o)){if(v=o.stateNode,h=o.memoizedProps,v[Bs]=o,(F=v.nodeValue!==h)&&(r=es,r!==null))switch(r.tag){case 3:rl(v.nodeValue,h,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&rl(v.nodeValue,h,(r.mode&1)!==0)}F&&(o.flags|=4)}else v=(h.nodeType===9?h:h.ownerDocument).createTextNode(v),v[Bs]=o,o.stateNode=v}return Nn(o),null;case 13:if(Rt(Ht),v=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(zt&&ts!==null&&(o.mode&1)!==0&&(o.flags&128)===0)mm(),Wa(),o.flags|=98560,F=!1;else if(F=fl(o),v!==null&&v.dehydrated!==null){if(r===null){if(!F)throw Error(s(318));if(F=o.memoizedState,F=F!==null?F.dehydrated:null,!F)throw Error(s(317));F[Bs]=o}else Wa(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Nn(o),F=!1}else Ss!==null&&(Au(Ss),Ss=null),F=!0;if(!F)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=h,o):(v=v!==null,v!==(r!==null&&r.memoizedState!==null)&&v&&(o.child.flags|=8192,(o.mode&1)!==0&&(r===null||(Ht.current&1)!==0?un===0&&(un=3):Du())),o.updateQueue!==null&&(o.flags|=4),Nn(o),null);case 4:return qa(),gu(r,o),r===null&&Zi(o.stateNode.containerInfo),Nn(o),null;case 10:return Wd(o.type._context),Nn(o),null;case 17:return Un(o.type)&&ol(),Nn(o),null;case 19:if(Rt(Ht),F=o.memoizedState,F===null)return Nn(o),null;if(v=(o.flags&128)!==0,Y=F.rendering,Y===null)if(v)lo(F,!1);else{if(un!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(Y=bl(r),Y!==null){for(o.flags|=128,lo(F,!1),v=Y.updateQueue,v!==null&&(o.updateQueue=v,o.flags|=4),o.subtreeFlags=0,v=h,h=o.child;h!==null;)F=h,r=v,F.flags&=14680066,Y=F.alternate,Y===null?(F.childLanes=0,F.lanes=r,F.child=null,F.subtreeFlags=0,F.memoizedProps=null,F.memoizedState=null,F.updateQueue=null,F.dependencies=null,F.stateNode=null):(F.childLanes=Y.childLanes,F.lanes=Y.lanes,F.child=Y.child,F.subtreeFlags=0,F.deletions=null,F.memoizedProps=Y.memoizedProps,F.memoizedState=Y.memoizedState,F.updateQueue=Y.updateQueue,F.type=Y.type,r=Y.dependencies,F.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),h=h.sibling;return Ft(Ht,Ht.current&1|2),o.child}r=r.sibling}F.tail!==null&&Dt()>Ja&&(o.flags|=128,v=!0,lo(F,!1),o.lanes=4194304)}else{if(!v)if(r=bl(Y),r!==null){if(o.flags|=128,v=!0,h=r.updateQueue,h!==null&&(o.updateQueue=h,o.flags|=4),lo(F,!0),F.tail===null&&F.tailMode==="hidden"&&!Y.alternate&&!zt)return Nn(o),null}else 2*Dt()-F.renderingStartTime>Ja&&h!==1073741824&&(o.flags|=128,v=!0,lo(F,!1),o.lanes=4194304);F.isBackwards?(Y.sibling=o.child,o.child=Y):(h=F.last,h!==null?h.sibling=Y:o.child=Y,F.last=Y)}return F.tail!==null?(o=F.tail,F.rendering=o,F.tail=o.sibling,F.renderingStartTime=Dt(),o.sibling=null,h=Ht.current,Ft(Ht,v?h&1|2:h&1),o):(Nn(o),null);case 22:case 23:return Tu(),v=o.memoizedState!==null,r!==null&&r.memoizedState!==null!==v&&(o.flags|=8192),v&&(o.mode&1)!==0?(ns&1073741824)!==0&&(Nn(o),o.subtreeFlags&6&&(o.flags|=8192)):Nn(o),null;case 24:return null;case 25:return null}throw Error(s(156,o.tag))}function Jw(r,o){switch(zd(o),o.tag){case 1:return Un(o.type)&&ol(),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return qa(),Rt(Hn),Rt(kn),Xd(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 5:return Zd(o),null;case 13:if(Rt(Ht),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(s(340));Wa()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return Rt(Ht),null;case 4:return qa(),null;case 10:return Wd(o.type._context),null;case 22:case 23:return Tu(),null;case 24:return null;default:return null}}var _l=!1,Cn=!1,e5=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function Qa(r,o){var h=r.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(v){Yt(r,o,v)}else h.current=null}function bu(r,o,h){try{h()}catch(v){Yt(r,o,v)}}var h0=!1;function t5(r,o){if(Td=Xn,r=Wp(),Sd(r)){if("selectionStart"in r)var h={start:r.selectionStart,end:r.selectionEnd};else e:{h=(h=r.ownerDocument)&&h.defaultView||window;var v=h.getSelection&&h.getSelection();if(v&&v.rangeCount!==0){h=v.anchorNode;var _=v.anchorOffset,F=v.focusNode;v=v.focusOffset;try{h.nodeType,F.nodeType}catch{h=null;break e}var Y=0,re=-1,ce=-1,je=0,De=0,Fe=r,Te=null;t:for(;;){for(var ze;Fe!==h||_!==0&&Fe.nodeType!==3||(re=Y+_),Fe!==F||v!==0&&Fe.nodeType!==3||(ce=Y+v),Fe.nodeType===3&&(Y+=Fe.nodeValue.length),(ze=Fe.firstChild)!==null;)Te=Fe,Fe=ze;for(;;){if(Fe===r)break t;if(Te===h&&++je===_&&(re=Y),Te===F&&++De===v&&(ce=Y),(ze=Fe.nextSibling)!==null)break;Fe=Te,Te=Fe.parentNode}Fe=ze}h=re===-1||ce===-1?null:{start:re,end:ce}}else h=null}h=h||{start:0,end:0}}else h=null;for(Dd={focusedElem:r,selectionRange:h},Xn=!1,Oe=o;Oe!==null;)if(o=Oe,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,Oe=r;else for(;Oe!==null;){o=Oe;try{var $e=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if($e!==null){var We=$e.memoizedProps,en=$e.memoizedState,be=o.stateNode,ue=be.getSnapshotBeforeUpdate(o.elementType===o.type?We:ks(o.type,We),en);be.__reactInternalSnapshotBeforeUpdate=ue}break;case 3:var ye=o.stateNode.containerInfo;ye.nodeType===1?ye.textContent="":ye.nodeType===9&&ye.documentElement&&ye.removeChild(ye.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Pe){Yt(o,o.return,Pe)}if(r=o.sibling,r!==null){r.return=o.return,Oe=r;break}Oe=o.return}return $e=h0,h0=!1,$e}function co(r,o,h){var v=o.updateQueue;if(v=v!==null?v.lastEffect:null,v!==null){var _=v=v.next;do{if((_.tag&r)===r){var F=_.destroy;_.destroy=void 0,F!==void 0&&bu(o,h,F)}_=_.next}while(_!==v)}}function Al(r,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var h=o=o.next;do{if((h.tag&r)===r){var v=h.create;h.destroy=v()}h=h.next}while(h!==o)}}function vu(r){var o=r.ref;if(o!==null){var h=r.stateNode;switch(r.tag){case 5:r=h;break;default:r=h}typeof o=="function"?o(r):o.current=r}}function p0(r){var o=r.alternate;o!==null&&(r.alternate=null,p0(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&(delete o[Bs],delete o[Xi],delete o[Pd],delete o[Bw],delete o[Lw])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function m0(r){return r.tag===5||r.tag===3||r.tag===4}function x0(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||m0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function yu(r,o,h){var v=r.tag;if(v===5||v===6)r=r.stateNode,o?h.nodeType===8?h.parentNode.insertBefore(r,o):h.insertBefore(r,o):(h.nodeType===8?(o=h.parentNode,o.insertBefore(r,h)):(o=h,o.appendChild(r)),h=h._reactRootContainer,h!=null||o.onclick!==null||(o.onclick=al));else if(v!==4&&(r=r.child,r!==null))for(yu(r,o,h),r=r.sibling;r!==null;)yu(r,o,h),r=r.sibling}function wu(r,o,h){var v=r.tag;if(v===5||v===6)r=r.stateNode,o?h.insertBefore(r,o):h.appendChild(r);else if(v!==4&&(r=r.child,r!==null))for(wu(r,o,h),r=r.sibling;r!==null;)wu(r,o,h),r=r.sibling}var vn=null,js=!1;function Cr(r,o,h){for(h=h.child;h!==null;)g0(r,o,h),h=h.sibling}function g0(r,o,h){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(Qr,h)}catch{}switch(h.tag){case 5:Cn||Qa(h,o);case 6:var v=vn,_=js;vn=null,Cr(r,o,h),vn=v,js=_,vn!==null&&(js?(r=vn,h=h.stateNode,r.nodeType===8?r.parentNode.removeChild(h):r.removeChild(h)):vn.removeChild(h.stateNode));break;case 18:vn!==null&&(js?(r=vn,h=h.stateNode,r.nodeType===8?Id(r.parentNode,h):r.nodeType===1&&Id(r,h),gt(r)):Id(vn,h.stateNode));break;case 4:v=vn,_=js,vn=h.stateNode.containerInfo,js=!0,Cr(r,o,h),vn=v,js=_;break;case 0:case 11:case 14:case 15:if(!Cn&&(v=h.updateQueue,v!==null&&(v=v.lastEffect,v!==null))){_=v=v.next;do{var F=_,Y=F.destroy;F=F.tag,Y!==void 0&&((F&2)!==0||(F&4)!==0)&&bu(h,o,Y),_=_.next}while(_!==v)}Cr(r,o,h);break;case 1:if(!Cn&&(Qa(h,o),v=h.stateNode,typeof v.componentWillUnmount=="function"))try{v.props=h.memoizedProps,v.state=h.memoizedState,v.componentWillUnmount()}catch(re){Yt(h,o,re)}Cr(r,o,h);break;case 21:Cr(r,o,h);break;case 22:h.mode&1?(Cn=(v=Cn)||h.memoizedState!==null,Cr(r,o,h),Cn=v):Cr(r,o,h);break;default:Cr(r,o,h)}}function b0(r){var o=r.updateQueue;if(o!==null){r.updateQueue=null;var h=r.stateNode;h===null&&(h=r.stateNode=new e5),o.forEach(function(v){var _=d5.bind(null,r,v);h.has(v)||(h.add(v),v.then(_,_))})}}function Ns(r,o){var h=o.deletions;if(h!==null)for(var v=0;v<h.length;v++){var _=h[v];try{var F=r,Y=o,re=Y;e:for(;re!==null;){switch(re.tag){case 5:vn=re.stateNode,js=!1;break e;case 3:vn=re.stateNode.containerInfo,js=!0;break e;case 4:vn=re.stateNode.containerInfo,js=!0;break e}re=re.return}if(vn===null)throw Error(s(160));g0(F,Y,_),vn=null,js=!1;var ce=_.alternate;ce!==null&&(ce.return=null),_.return=null}catch(je){Yt(_,o,je)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)v0(o,r),o=o.sibling}function v0(r,o){var h=r.alternate,v=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Ns(o,r),Os(r),v&4){try{co(3,r,r.return),Al(3,r)}catch(We){Yt(r,r.return,We)}try{co(5,r,r.return)}catch(We){Yt(r,r.return,We)}}break;case 1:Ns(o,r),Os(r),v&512&&h!==null&&Qa(h,h.return);break;case 5:if(Ns(o,r),Os(r),v&512&&h!==null&&Qa(h,h.return),r.flags&32){var _=r.stateNode;try{Ze(_,"")}catch(We){Yt(r,r.return,We)}}if(v&4&&(_=r.stateNode,_!=null)){var F=r.memoizedProps,Y=h!==null?h.memoizedProps:F,re=r.type,ce=r.updateQueue;if(r.updateQueue=null,ce!==null)try{re==="input"&&F.type==="radio"&&F.name!=null&&he(_,F),Fn(re,Y);var je=Fn(re,F);for(Y=0;Y<ce.length;Y+=2){var De=ce[Y],Fe=ce[Y+1];De==="style"?Mt(_,Fe):De==="dangerouslySetInnerHTML"?Ue(_,Fe):De==="children"?Ze(_,Fe):N(_,De,Fe,je)}switch(re){case"input":J(_,F);break;case"textarea":_e(_,F);break;case"select":var Te=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!F.multiple;var ze=F.value;ze!=null?Ne(_,!!F.multiple,ze,!1):Te!==!!F.multiple&&(F.defaultValue!=null?Ne(_,!!F.multiple,F.defaultValue,!0):Ne(_,!!F.multiple,F.multiple?[]:"",!1))}_[Xi]=F}catch(We){Yt(r,r.return,We)}}break;case 6:if(Ns(o,r),Os(r),v&4){if(r.stateNode===null)throw Error(s(162));_=r.stateNode,F=r.memoizedProps;try{_.nodeValue=F}catch(We){Yt(r,r.return,We)}}break;case 3:if(Ns(o,r),Os(r),v&4&&h!==null&&h.memoizedState.isDehydrated)try{gt(o.containerInfo)}catch(We){Yt(r,r.return,We)}break;case 4:Ns(o,r),Os(r);break;case 13:Ns(o,r),Os(r),_=r.child,_.flags&8192&&(F=_.memoizedState!==null,_.stateNode.isHidden=F,!F||_.alternate!==null&&_.alternate.memoizedState!==null||(ju=Dt())),v&4&&b0(r);break;case 22:if(De=h!==null&&h.memoizedState!==null,r.mode&1?(Cn=(je=Cn)||De,Ns(o,r),Cn=je):Ns(o,r),Os(r),v&8192){if(je=r.memoizedState!==null,(r.stateNode.isHidden=je)&&!De&&(r.mode&1)!==0)for(Oe=r,De=r.child;De!==null;){for(Fe=Oe=De;Oe!==null;){switch(Te=Oe,ze=Te.child,Te.tag){case 0:case 11:case 14:case 15:co(4,Te,Te.return);break;case 1:Qa(Te,Te.return);var $e=Te.stateNode;if(typeof $e.componentWillUnmount=="function"){v=Te,h=Te.return;try{o=v,$e.props=o.memoizedProps,$e.state=o.memoizedState,$e.componentWillUnmount()}catch(We){Yt(v,h,We)}}break;case 5:Qa(Te,Te.return);break;case 22:if(Te.memoizedState!==null){S0(Fe);continue}}ze!==null?(ze.return=Te,Oe=ze):S0(Fe)}De=De.sibling}e:for(De=null,Fe=r;;){if(Fe.tag===5){if(De===null){De=Fe;try{_=Fe.stateNode,je?(F=_.style,typeof F.setProperty=="function"?F.setProperty("display","none","important"):F.display="none"):(re=Fe.stateNode,ce=Fe.memoizedProps.style,Y=ce!=null&&ce.hasOwnProperty("display")?ce.display:null,re.style.display=tt("display",Y))}catch(We){Yt(r,r.return,We)}}}else if(Fe.tag===6){if(De===null)try{Fe.stateNode.nodeValue=je?"":Fe.memoizedProps}catch(We){Yt(r,r.return,We)}}else if((Fe.tag!==22&&Fe.tag!==23||Fe.memoizedState===null||Fe===r)&&Fe.child!==null){Fe.child.return=Fe,Fe=Fe.child;continue}if(Fe===r)break e;for(;Fe.sibling===null;){if(Fe.return===null||Fe.return===r)break e;De===Fe&&(De=null),Fe=Fe.return}De===Fe&&(De=null),Fe.sibling.return=Fe.return,Fe=Fe.sibling}}break;case 19:Ns(o,r),Os(r),v&4&&b0(r);break;case 21:break;default:Ns(o,r),Os(r)}}function Os(r){var o=r.flags;if(o&2){try{e:{for(var h=r.return;h!==null;){if(m0(h)){var v=h;break e}h=h.return}throw Error(s(160))}switch(v.tag){case 5:var _=v.stateNode;v.flags&32&&(Ze(_,""),v.flags&=-33);var F=x0(r);wu(r,F,_);break;case 3:case 4:var Y=v.stateNode.containerInfo,re=x0(r);yu(r,re,Y);break;default:throw Error(s(161))}}catch(ce){Yt(r,r.return,ce)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function n5(r,o,h){Oe=r,y0(r)}function y0(r,o,h){for(var v=(r.mode&1)!==0;Oe!==null;){var _=Oe,F=_.child;if(_.tag===22&&v){var Y=_.memoizedState!==null||_l;if(!Y){var re=_.alternate,ce=re!==null&&re.memoizedState!==null||Cn;re=_l;var je=Cn;if(_l=Y,(Cn=ce)&&!je)for(Oe=_;Oe!==null;)Y=Oe,ce=Y.child,Y.tag===22&&Y.memoizedState!==null?k0(_):ce!==null?(ce.return=Y,Oe=ce):k0(_);for(;F!==null;)Oe=F,y0(F),F=F.sibling;Oe=_,_l=re,Cn=je}w0(r)}else(_.subtreeFlags&8772)!==0&&F!==null?(F.return=_,Oe=F):w0(r)}}function w0(r){for(;Oe!==null;){var o=Oe;if((o.flags&8772)!==0){var h=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Cn||Al(5,o);break;case 1:var v=o.stateNode;if(o.flags&4&&!Cn)if(h===null)v.componentDidMount();else{var _=o.elementType===o.type?h.memoizedProps:ks(o.type,h.memoizedProps);v.componentDidUpdate(_,h.memoizedState,v.__reactInternalSnapshotBeforeUpdate)}var F=o.updateQueue;F!==null&&Sm(o,F,v);break;case 3:var Y=o.updateQueue;if(Y!==null){if(h=null,o.child!==null)switch(o.child.tag){case 5:h=o.child.stateNode;break;case 1:h=o.child.stateNode}Sm(o,Y,h)}break;case 5:var re=o.stateNode;if(h===null&&o.flags&4){h=re;var ce=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":ce.autoFocus&&h.focus();break;case"img":ce.src&&(h.src=ce.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var je=o.alternate;if(je!==null){var De=je.memoizedState;if(De!==null){var Fe=De.dehydrated;Fe!==null&&gt(Fe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Cn||o.flags&512&&vu(o)}catch(Te){Yt(o,o.return,Te)}}if(o===r){Oe=null;break}if(h=o.sibling,h!==null){h.return=o.return,Oe=h;break}Oe=o.return}}function S0(r){for(;Oe!==null;){var o=Oe;if(o===r){Oe=null;break}var h=o.sibling;if(h!==null){h.return=o.return,Oe=h;break}Oe=o.return}}function k0(r){for(;Oe!==null;){var o=Oe;try{switch(o.tag){case 0:case 11:case 15:var h=o.return;try{Al(4,o)}catch(ce){Yt(o,h,ce)}break;case 1:var v=o.stateNode;if(typeof v.componentDidMount=="function"){var _=o.return;try{v.componentDidMount()}catch(ce){Yt(o,_,ce)}}var F=o.return;try{vu(o)}catch(ce){Yt(o,F,ce)}break;case 5:var Y=o.return;try{vu(o)}catch(ce){Yt(o,Y,ce)}}}catch(ce){Yt(o,o.return,ce)}if(o===r){Oe=null;break}var re=o.sibling;if(re!==null){re.return=o.return,Oe=re;break}Oe=o.return}}var s5=Math.ceil,El=A.ReactCurrentDispatcher,Su=A.ReactCurrentOwner,hs=A.ReactCurrentBatchConfig,bt=0,xn=null,sn=null,yn=0,ns=0,Xa=wr(0),un=0,uo=null,aa=0,Tl=0,ku=0,fo=null,Kn=null,ju=0,Ja=1/0,ar=null,Dl=!1,Nu=null,_r=null,Fl=!1,Ar=null,Ml=0,ho=0,Cu=null,Il=-1,Pl=0;function Bn(){return(bt&6)!==0?Dt():Il!==-1?Il:Il=Dt()}function Er(r){return(r.mode&1)===0?1:(bt&2)!==0&&yn!==0?yn&-yn:Ow.transition!==null?(Pl===0&&(Pl=Ko()),Pl):(r=yt,r!==0||(r=window.event,r=r===void 0?16:Np(r.type)),r)}function Cs(r,o,h,v){if(50<ho)throw ho=0,Cu=null,Error(s(185));gr(r,h,v),((bt&2)===0||r!==xn)&&(r===xn&&((bt&2)===0&&(Tl|=h),un===4&&Tr(r,yn)),Gn(r,v),h===1&&bt===0&&(o.mode&1)===0&&(Ja=Dt()+500,cl&&kr()))}function Gn(r,o){var h=r.callbackNode;Wo(r,o);var v=$n(r,r===xn?yn:0);if(v===0)h!==null&&xr(h),r.callbackNode=null,r.callbackPriority=0;else if(o=v&-v,r.callbackPriority!==o){if(h!=null&&xr(h),o===1)r.tag===0?zw(N0.bind(null,r)):dm(N0.bind(null,r)),Pw(function(){(bt&6)===0&&kr()}),h=null;else{switch(zi(v)){case 1:h=Pi;break;case 4:h=Pn;break;case 16:h=Zr;break;case 536870912:h=Ho;break;default:h=Zr}h=M0(h,j0.bind(null,r))}r.callbackPriority=o,r.callbackNode=h}}function j0(r,o){if(Il=-1,Pl=0,(bt&6)!==0)throw Error(s(327));var h=r.callbackNode;if(ei()&&r.callbackNode!==h)return null;var v=$n(r,r===xn?yn:0);if(v===0)return null;if((v&30)!==0||(v&r.expiredLanes)!==0||o)o=Rl(r,v);else{o=v;var _=bt;bt|=2;var F=_0();(xn!==r||yn!==o)&&(ar=null,Ja=Dt()+500,oa(r,o));do try{i5();break}catch(re){C0(r,re)}while(!0);Ud(),El.current=F,bt=_,sn!==null?o=0:(xn=null,yn=0,o=un)}if(o!==0){if(o===2&&(_=Ri(r),_!==0&&(v=_,o=_u(r,_))),o===1)throw h=uo,oa(r,0),Tr(r,v),Gn(r,Dt()),h;if(o===6)Tr(r,v);else{if(_=r.current.alternate,(v&30)===0&&!r5(_)&&(o=Rl(r,v),o===2&&(F=Ri(r),F!==0&&(v=F,o=_u(r,F))),o===1))throw h=uo,oa(r,0),Tr(r,v),Gn(r,Dt()),h;switch(r.finishedWork=_,r.finishedLanes=v,o){case 0:case 1:throw Error(s(345));case 2:la(r,Kn,ar);break;case 3:if(Tr(r,v),(v&130023424)===v&&(o=ju+500-Dt(),10<o)){if($n(r,0)!==0)break;if(_=r.suspendedLanes,(_&v)!==v){Bn(),r.pingedLanes|=r.suspendedLanes&_;break}r.timeoutHandle=Md(la.bind(null,r,Kn,ar),o);break}la(r,Kn,ar);break;case 4:if(Tr(r,v),(v&4194240)===v)break;for(o=r.eventTimes,_=-1;0<v;){var Y=31-On(v);F=1<<Y,Y=o[Y],Y>_&&(_=Y),v&=~F}if(v=_,v=Dt()-v,v=(120>v?120:480>v?480:1080>v?1080:1920>v?1920:3e3>v?3e3:4320>v?4320:1960*s5(v/1960))-v,10<v){r.timeoutHandle=Md(la.bind(null,r,Kn,ar),v);break}la(r,Kn,ar);break;case 5:la(r,Kn,ar);break;default:throw Error(s(329))}}}return Gn(r,Dt()),r.callbackNode===h?j0.bind(null,r):null}function _u(r,o){var h=fo;return r.current.memoizedState.isDehydrated&&(oa(r,o).flags|=256),r=Rl(r,o),r!==2&&(o=Kn,Kn=h,o!==null&&Au(o)),r}function Au(r){Kn===null?Kn=r:Kn.push.apply(Kn,r)}function r5(r){for(var o=r;;){if(o.flags&16384){var h=o.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var v=0;v<h.length;v++){var _=h[v],F=_.getSnapshot;_=_.value;try{if(!ws(F(),_))return!1}catch{return!1}}}if(h=o.child,o.subtreeFlags&16384&&h!==null)h.return=o,o=h;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Tr(r,o){for(o&=~ku,o&=~Tl,r.suspendedLanes|=o,r.pingedLanes&=~o,r=r.expirationTimes;0<o;){var h=31-On(o),v=1<<h;r[h]=-1,o&=~v}}function N0(r){if((bt&6)!==0)throw Error(s(327));ei();var o=$n(r,0);if((o&1)===0)return Gn(r,Dt()),null;var h=Rl(r,o);if(r.tag!==0&&h===2){var v=Ri(r);v!==0&&(o=v,h=_u(r,v))}if(h===1)throw h=uo,oa(r,0),Tr(r,o),Gn(r,Dt()),h;if(h===6)throw Error(s(345));return r.finishedWork=r.current.alternate,r.finishedLanes=o,la(r,Kn,ar),Gn(r,Dt()),null}function Eu(r,o){var h=bt;bt|=1;try{return r(o)}finally{bt=h,bt===0&&(Ja=Dt()+500,cl&&kr())}}function ia(r){Ar!==null&&Ar.tag===0&&(bt&6)===0&&ei();var o=bt;bt|=1;var h=hs.transition,v=yt;try{if(hs.transition=null,yt=1,r)return r()}finally{yt=v,hs.transition=h,bt=o,(bt&6)===0&&kr()}}function Tu(){ns=Xa.current,Rt(Xa)}function oa(r,o){r.finishedWork=null,r.finishedLanes=0;var h=r.timeoutHandle;if(h!==-1&&(r.timeoutHandle=-1,Iw(h)),sn!==null)for(h=sn.return;h!==null;){var v=h;switch(zd(v),v.tag){case 1:v=v.type.childContextTypes,v!=null&&ol();break;case 3:qa(),Rt(Hn),Rt(kn),Xd();break;case 5:Zd(v);break;case 4:qa();break;case 13:Rt(Ht);break;case 19:Rt(Ht);break;case 10:Wd(v.type._context);break;case 22:case 23:Tu()}h=h.return}if(xn=r,sn=r=Dr(r.current,null),yn=ns=o,un=0,uo=null,ku=Tl=aa=0,Kn=fo=null,na!==null){for(o=0;o<na.length;o++)if(h=na[o],v=h.interleaved,v!==null){h.interleaved=null;var _=v.next,F=h.pending;if(F!==null){var Y=F.next;F.next=_,v.next=Y}h.pending=v}na=null}return r}function C0(r,o){do{var h=sn;try{if(Ud(),vl.current=kl,yl){for(var v=Ut.memoizedState;v!==null;){var _=v.queue;_!==null&&(_.pending=null),v=v.next}yl=!1}if(ra=0,mn=dn=Ut=null,ro=!1,ao=0,Su.current=null,h===null||h.return===null){un=1,uo=o,sn=null;break}e:{var F=r,Y=h.return,re=h,ce=o;if(o=yn,re.flags|=32768,ce!==null&&typeof ce=="object"&&typeof ce.then=="function"){var je=ce,De=re,Fe=De.tag;if((De.mode&1)===0&&(Fe===0||Fe===11||Fe===15)){var Te=De.alternate;Te?(De.updateQueue=Te.updateQueue,De.memoizedState=Te.memoizedState,De.lanes=Te.lanes):(De.updateQueue=null,De.memoizedState=null)}var ze=Qm(Y);if(ze!==null){ze.flags&=-257,Xm(ze,Y,re,F,o),ze.mode&1&&Zm(F,je,o),o=ze,ce=je;var $e=o.updateQueue;if($e===null){var We=new Set;We.add(ce),o.updateQueue=We}else $e.add(ce);break e}else{if((o&1)===0){Zm(F,je,o),Du();break e}ce=Error(s(426))}}else if(zt&&re.mode&1){var en=Qm(Y);if(en!==null){(en.flags&65536)===0&&(en.flags|=256),Xm(en,Y,re,F,o),Vd(Za(ce,re));break e}}F=ce=Za(ce,re),un!==4&&(un=2),fo===null?fo=[F]:fo.push(F),F=Y;do{switch(F.tag){case 3:F.flags|=65536,o&=-o,F.lanes|=o;var be=Ym(F,ce,o);wm(F,be);break e;case 1:re=ce;var ue=F.type,ye=F.stateNode;if((F.flags&128)===0&&(typeof ue.getDerivedStateFromError=="function"||ye!==null&&typeof ye.componentDidCatch=="function"&&(_r===null||!_r.has(ye)))){F.flags|=65536,o&=-o,F.lanes|=o;var Pe=qm(F,re,o);wm(F,Pe);break e}}F=F.return}while(F!==null)}E0(h)}catch(qe){o=qe,sn===h&&h!==null&&(sn=h=h.return);continue}break}while(!0)}function _0(){var r=El.current;return El.current=kl,r===null?kl:r}function Du(){(un===0||un===3||un===2)&&(un=4),xn===null||(aa&268435455)===0&&(Tl&268435455)===0||Tr(xn,yn)}function Rl(r,o){var h=bt;bt|=2;var v=_0();(xn!==r||yn!==o)&&(ar=null,oa(r,o));do try{a5();break}catch(_){C0(r,_)}while(!0);if(Ud(),bt=h,El.current=v,sn!==null)throw Error(s(261));return xn=null,yn=0,un}function a5(){for(;sn!==null;)A0(sn)}function i5(){for(;sn!==null&&!Yr();)A0(sn)}function A0(r){var o=F0(r.alternate,r,ns);r.memoizedProps=r.pendingProps,o===null?E0(r):sn=o,Su.current=null}function E0(r){var o=r;do{var h=o.alternate;if(r=o.return,(o.flags&32768)===0){if(h=Xw(h,o,ns),h!==null){sn=h;return}}else{if(h=Jw(h,o),h!==null){h.flags&=32767,sn=h;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{un=6,sn=null;return}}if(o=o.sibling,o!==null){sn=o;return}sn=o=r}while(o!==null);un===0&&(un=5)}function la(r,o,h){var v=yt,_=hs.transition;try{hs.transition=null,yt=1,o5(r,o,h,v)}finally{hs.transition=_,yt=v}return null}function o5(r,o,h,v){do ei();while(Ar!==null);if((bt&6)!==0)throw Error(s(327));h=r.finishedWork;var _=r.finishedLanes;if(h===null)return null;if(r.finishedWork=null,r.finishedLanes=0,h===r.current)throw Error(s(177));r.callbackNode=null,r.callbackPriority=0;var F=h.lanes|h.childLanes;if(fd(r,F),r===xn&&(sn=xn=null,yn=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||Fl||(Fl=!0,M0(Zr,function(){return ei(),null})),F=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||F){F=hs.transition,hs.transition=null;var Y=yt;yt=1;var re=bt;bt|=4,Su.current=null,t5(r,h),v0(h,r),_w(Dd),Xn=!!Td,Dd=Td=null,r.current=h,n5(h),qr(),bt=re,yt=Y,hs.transition=F}else r.current=h;if(Fl&&(Fl=!1,Ar=r,Ml=_),F=r.pendingLanes,F===0&&(_r=null),Ea(h.stateNode),Gn(r,Dt()),o!==null)for(v=r.onRecoverableError,h=0;h<o.length;h++)_=o[h],v(_.value,{componentStack:_.stack,digest:_.digest});if(Dl)throw Dl=!1,r=Nu,Nu=null,r;return(Ml&1)!==0&&r.tag!==0&&ei(),F=r.pendingLanes,(F&1)!==0?r===Cu?ho++:(ho=0,Cu=r):ho=0,kr(),null}function ei(){if(Ar!==null){var r=zi(Ml),o=hs.transition,h=yt;try{if(hs.transition=null,yt=16>r?16:r,Ar===null)var v=!1;else{if(r=Ar,Ar=null,Ml=0,(bt&6)!==0)throw Error(s(331));var _=bt;for(bt|=4,Oe=r.current;Oe!==null;){var F=Oe,Y=F.child;if((Oe.flags&16)!==0){var re=F.deletions;if(re!==null){for(var ce=0;ce<re.length;ce++){var je=re[ce];for(Oe=je;Oe!==null;){var De=Oe;switch(De.tag){case 0:case 11:case 15:co(8,De,F)}var Fe=De.child;if(Fe!==null)Fe.return=De,Oe=Fe;else for(;Oe!==null;){De=Oe;var Te=De.sibling,ze=De.return;if(p0(De),De===je){Oe=null;break}if(Te!==null){Te.return=ze,Oe=Te;break}Oe=ze}}}var $e=F.alternate;if($e!==null){var We=$e.child;if(We!==null){$e.child=null;do{var en=We.sibling;We.sibling=null,We=en}while(We!==null)}}Oe=F}}if((F.subtreeFlags&2064)!==0&&Y!==null)Y.return=F,Oe=Y;else e:for(;Oe!==null;){if(F=Oe,(F.flags&2048)!==0)switch(F.tag){case 0:case 11:case 15:co(9,F,F.return)}var be=F.sibling;if(be!==null){be.return=F.return,Oe=be;break e}Oe=F.return}}var ue=r.current;for(Oe=ue;Oe!==null;){Y=Oe;var ye=Y.child;if((Y.subtreeFlags&2064)!==0&&ye!==null)ye.return=Y,Oe=ye;else e:for(Y=ue;Oe!==null;){if(re=Oe,(re.flags&2048)!==0)try{switch(re.tag){case 0:case 11:case 15:Al(9,re)}}catch(qe){Yt(re,re.return,qe)}if(re===Y){Oe=null;break e}var Pe=re.sibling;if(Pe!==null){Pe.return=re.return,Oe=Pe;break e}Oe=re.return}}if(bt=_,kr(),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(Qr,r)}catch{}v=!0}return v}finally{yt=h,hs.transition=o}}return!1}function T0(r,o,h){o=Za(h,o),o=Ym(r,o,1),r=Nr(r,o,1),o=Bn(),r!==null&&(gr(r,1,o),Gn(r,o))}function Yt(r,o,h){if(r.tag===3)T0(r,r,h);else for(;o!==null;){if(o.tag===3){T0(o,r,h);break}else if(o.tag===1){var v=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(_r===null||!_r.has(v))){r=Za(h,r),r=qm(o,r,1),o=Nr(o,r,1),r=Bn(),o!==null&&(gr(o,1,r),Gn(o,r));break}}o=o.return}}function l5(r,o,h){var v=r.pingCache;v!==null&&v.delete(o),o=Bn(),r.pingedLanes|=r.suspendedLanes&h,xn===r&&(yn&h)===h&&(un===4||un===3&&(yn&130023424)===yn&&500>Dt()-ju?oa(r,0):ku|=h),Gn(r,o)}function D0(r,o){o===0&&((r.mode&1)===0?o=1:(o=Da,Da<<=1,(Da&130023424)===0&&(Da=4194304)));var h=Bn();r=nr(r,o),r!==null&&(gr(r,o,h),Gn(r,h))}function c5(r){var o=r.memoizedState,h=0;o!==null&&(h=o.retryLane),D0(r,h)}function d5(r,o){var h=0;switch(r.tag){case 13:var v=r.stateNode,_=r.memoizedState;_!==null&&(h=_.retryLane);break;case 19:v=r.stateNode;break;default:throw Error(s(314))}v!==null&&v.delete(o),D0(r,h)}var F0;F0=function(r,o,h){if(r!==null)if(r.memoizedProps!==o.pendingProps||Hn.current)Wn=!0;else{if((r.lanes&h)===0&&(o.flags&128)===0)return Wn=!1,Qw(r,o,h);Wn=(r.flags&131072)!==0}else Wn=!1,zt&&(o.flags&1048576)!==0&&um(o,ul,o.index);switch(o.lanes=0,o.tag){case 2:var v=o.type;Cl(r,o),r=o.pendingProps;var _=Va(o,kn.current);Ya(o,h),_=tu(null,o,v,r,_,h);var F=nu();return o.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Un(v)?(F=!0,ll(o)):F=!1,o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,Yd(o),_.updater=jl,o.stateNode=_,_._reactInternals=o,lu(o,v,r,h),o=fu(null,o,v,!0,F,h)):(o.tag=0,zt&&F&&Ld(o),Rn(null,o,_,h),o=o.child),o;case 16:v=o.elementType;e:{switch(Cl(r,o),r=o.pendingProps,_=v._init,v=_(v._payload),o.type=v,_=o.tag=f5(v),r=ks(v,r),_){case 0:o=uu(null,o,v,r,h);break e;case 1:o=r0(null,o,v,r,h);break e;case 11:o=Jm(null,o,v,r,h);break e;case 14:o=e0(null,o,v,ks(v.type,r),h);break e}throw Error(s(306,v,""))}return o;case 0:return v=o.type,_=o.pendingProps,_=o.elementType===v?_:ks(v,_),uu(r,o,v,_,h);case 1:return v=o.type,_=o.pendingProps,_=o.elementType===v?_:ks(v,_),r0(r,o,v,_,h);case 3:e:{if(a0(o),r===null)throw Error(s(387));v=o.pendingProps,F=o.memoizedState,_=F.element,ym(r,o),gl(o,v,null,h);var Y=o.memoizedState;if(v=Y.element,F.isDehydrated)if(F={element:v,isDehydrated:!1,cache:Y.cache,pendingSuspenseBoundaries:Y.pendingSuspenseBoundaries,transitions:Y.transitions},o.updateQueue.baseState=F,o.memoizedState=F,o.flags&256){_=Za(Error(s(423)),o),o=i0(r,o,v,h,_);break e}else if(v!==_){_=Za(Error(s(424)),o),o=i0(r,o,v,h,_);break e}else for(ts=yr(o.stateNode.containerInfo.firstChild),es=o,zt=!0,Ss=null,h=bm(o,null,v,h),o.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Wa(),v===_){o=rr(r,o,h);break e}Rn(r,o,v,h)}o=o.child}return o;case 5:return km(o),r===null&&$d(o),v=o.type,_=o.pendingProps,F=r!==null?r.memoizedProps:null,Y=_.children,Fd(v,_)?Y=null:F!==null&&Fd(v,F)&&(o.flags|=32),s0(r,o),Rn(r,o,Y,h),o.child;case 6:return r===null&&$d(o),null;case 13:return o0(r,o,h);case 4:return qd(o,o.stateNode.containerInfo),v=o.pendingProps,r===null?o.child=Ka(o,null,v,h):Rn(r,o,v,h),o.child;case 11:return v=o.type,_=o.pendingProps,_=o.elementType===v?_:ks(v,_),Jm(r,o,v,_,h);case 7:return Rn(r,o,o.pendingProps,h),o.child;case 8:return Rn(r,o,o.pendingProps.children,h),o.child;case 12:return Rn(r,o,o.pendingProps.children,h),o.child;case 10:e:{if(v=o.type._context,_=o.pendingProps,F=o.memoizedProps,Y=_.value,Ft(pl,v._currentValue),v._currentValue=Y,F!==null)if(ws(F.value,Y)){if(F.children===_.children&&!Hn.current){o=rr(r,o,h);break e}}else for(F=o.child,F!==null&&(F.return=o);F!==null;){var re=F.dependencies;if(re!==null){Y=F.child;for(var ce=re.firstContext;ce!==null;){if(ce.context===v){if(F.tag===1){ce=sr(-1,h&-h),ce.tag=2;var je=F.updateQueue;if(je!==null){je=je.shared;var De=je.pending;De===null?ce.next=ce:(ce.next=De.next,De.next=ce),je.pending=ce}}F.lanes|=h,ce=F.alternate,ce!==null&&(ce.lanes|=h),Kd(F.return,h,o),re.lanes|=h;break}ce=ce.next}}else if(F.tag===10)Y=F.type===o.type?null:F.child;else if(F.tag===18){if(Y=F.return,Y===null)throw Error(s(341));Y.lanes|=h,re=Y.alternate,re!==null&&(re.lanes|=h),Kd(Y,h,o),Y=F.sibling}else Y=F.child;if(Y!==null)Y.return=F;else for(Y=F;Y!==null;){if(Y===o){Y=null;break}if(F=Y.sibling,F!==null){F.return=Y.return,Y=F;break}Y=Y.return}F=Y}Rn(r,o,_.children,h),o=o.child}return o;case 9:return _=o.type,v=o.pendingProps.children,Ya(o,h),_=us(_),v=v(_),o.flags|=1,Rn(r,o,v,h),o.child;case 14:return v=o.type,_=ks(v,o.pendingProps),_=ks(v.type,_),e0(r,o,v,_,h);case 15:return t0(r,o,o.type,o.pendingProps,h);case 17:return v=o.type,_=o.pendingProps,_=o.elementType===v?_:ks(v,_),Cl(r,o),o.tag=1,Un(v)?(r=!0,ll(o)):r=!1,Ya(o,h),Km(o,v,_),lu(o,v,_,h),fu(null,o,v,!0,r,h);case 19:return c0(r,o,h);case 22:return n0(r,o,h)}throw Error(s(156,o.tag))};function M0(r,o){return Vo(r,o)}function u5(r,o,h,v){this.tag=r,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ps(r,o,h,v){return new u5(r,o,h,v)}function Fu(r){return r=r.prototype,!(!r||!r.isReactComponent)}function f5(r){if(typeof r=="function")return Fu(r)?1:0;if(r!=null){if(r=r.$$typeof,r===E)return 11;if(r===L)return 14}return 2}function Dr(r,o){var h=r.alternate;return h===null?(h=ps(r.tag,o,r.key,r.mode),h.elementType=r.elementType,h.type=r.type,h.stateNode=r.stateNode,h.alternate=r,r.alternate=h):(h.pendingProps=o,h.type=r.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=r.flags&14680064,h.childLanes=r.childLanes,h.lanes=r.lanes,h.child=r.child,h.memoizedProps=r.memoizedProps,h.memoizedState=r.memoizedState,h.updateQueue=r.updateQueue,o=r.dependencies,h.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},h.sibling=r.sibling,h.index=r.index,h.ref=r.ref,h}function Bl(r,o,h,v,_,F){var Y=2;if(v=r,typeof r=="function")Fu(r)&&(Y=1);else if(typeof r=="string")Y=5;else e:switch(r){case $:return ca(h.children,_,F,o);case D:Y=8,_|=8;break;case T:return r=ps(12,h,o,_|2),r.elementType=T,r.lanes=F,r;case I:return r=ps(13,h,o,_),r.elementType=I,r.lanes=F,r;case S:return r=ps(19,h,o,_),r.elementType=S,r.lanes=F,r;case R:return Ll(h,_,F,o);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case H:Y=10;break e;case K:Y=9;break e;case E:Y=11;break e;case L:Y=14;break e;case z:Y=16,v=null;break e}throw Error(s(130,r==null?r:typeof r,""))}return o=ps(Y,h,o,_),o.elementType=r,o.type=v,o.lanes=F,o}function ca(r,o,h,v){return r=ps(7,r,v,o),r.lanes=h,r}function Ll(r,o,h,v){return r=ps(22,r,v,o),r.elementType=R,r.lanes=h,r.stateNode={isHidden:!1},r}function Mu(r,o,h){return r=ps(6,r,null,o),r.lanes=h,r}function Iu(r,o,h){return o=ps(4,r.children!==null?r.children:[],r.key,o),o.lanes=h,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}function h5(r,o,h,v,_){this.tag=o,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bi(0),this.expirationTimes=Bi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bi(0),this.identifierPrefix=v,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function Pu(r,o,h,v,_,F,Y,re,ce){return r=new h5(r,o,h,re,ce),o===1?(o=1,F===!0&&(o|=8)):o=0,F=ps(3,null,null,o),r.current=F,F.stateNode=r,F.memoizedState={element:v,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yd(F),r}function p5(r,o,h){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:v==null?null:""+v,children:r,containerInfo:o,implementation:h}}function I0(r){if(!r)return Sr;r=r._reactInternals;e:{if(Rs(r)!==r||r.tag!==1)throw Error(s(170));var o=r;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Un(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(s(171))}if(r.tag===1){var h=r.type;if(Un(h))return lm(r,h,o)}return o}function P0(r,o,h,v,_,F,Y,re,ce){return r=Pu(h,v,!0,r,_,F,Y,re,ce),r.context=I0(null),h=r.current,v=Bn(),_=Er(h),F=sr(v,_),F.callback=o??null,Nr(h,F,_),r.current.lanes=_,gr(r,_,v),Gn(r,v),r}function zl(r,o,h,v){var _=o.current,F=Bn(),Y=Er(_);return h=I0(h),o.context===null?o.context=h:o.pendingContext=h,o=sr(F,Y),o.payload={element:r},v=v===void 0?null:v,v!==null&&(o.callback=v),r=Nr(_,o,Y),r!==null&&(Cs(r,_,Y,F),xl(r,_,Y)),Y}function Ol(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function R0(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var h=r.retryLane;r.retryLane=h!==0&&h<o?h:o}}function Ru(r,o){R0(r,o),(r=r.alternate)&&R0(r,o)}function m5(){return null}var B0=typeof reportError=="function"?reportError:function(r){console.error(r)};function Bu(r){this._internalRoot=r}$l.prototype.render=Bu.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(s(409));zl(r,o,null,null)},$l.prototype.unmount=Bu.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;ia(function(){zl(null,r,null,null)}),o[Xs]=null}};function $l(r){this._internalRoot=r}$l.prototype.unstable_scheduleHydration=function(r){if(r){var o=we();r={blockedOn:null,target:r,priority:o};for(var h=0;h<Ye.length&&o!==0&&o<Ye[h].priority;h++);Ye.splice(h,0,r),h===0&&ct(r)}};function Lu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Vl(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function L0(){}function x5(r,o,h,v,_){if(_){if(typeof v=="function"){var F=v;v=function(){var je=Ol(Y);F.call(je)}}var Y=P0(o,v,r,0,null,!1,!1,"",L0);return r._reactRootContainer=Y,r[Xs]=Y.current,Zi(r.nodeType===8?r.parentNode:r),ia(),Y}for(;_=r.lastChild;)r.removeChild(_);if(typeof v=="function"){var re=v;v=function(){var je=Ol(ce);re.call(je)}}var ce=Pu(r,0,!1,null,null,!1,!1,"",L0);return r._reactRootContainer=ce,r[Xs]=ce.current,Zi(r.nodeType===8?r.parentNode:r),ia(function(){zl(o,ce,h,v)}),ce}function Hl(r,o,h,v,_){var F=h._reactRootContainer;if(F){var Y=F;if(typeof _=="function"){var re=_;_=function(){var ce=Ol(Y);re.call(ce)}}zl(o,Y,r,_)}else Y=x5(h,o,r,_,v);return Ol(Y)}Go=function(r){switch(r.tag){case 3:var o=r.stateNode;if(o.current.memoizedState.isDehydrated){var h=ls(o.pendingLanes);h!==0&&(Li(o,h|1),Gn(o,Dt()),(bt&6)===0&&(Ja=Dt()+500,kr()))}break;case 13:ia(function(){var v=nr(r,1);if(v!==null){var _=Bn();Cs(v,r,1,_)}}),Ru(r,1)}},Oi=function(r){if(r.tag===13){var o=nr(r,134217728);if(o!==null){var h=Bn();Cs(o,r,134217728,h)}Ru(r,134217728)}},Yo=function(r){if(r.tag===13){var o=Er(r),h=nr(r,o);if(h!==null){var v=Bn();Cs(h,r,o,v)}Ru(r,o)}},we=function(){return yt},Ae=function(r,o){var h=yt;try{return yt=r,o()}finally{yt=h}},Mn=function(r,o,h){switch(o){case"input":if(J(r,h),o=h.name,h.type==="radio"&&o!=null){for(h=r;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<h.length;o++){var v=h[o];if(v!==r&&v.form===r.form){var _=il(v);if(!_)throw Error(s(90));ge(v),J(v,_)}}}break;case"textarea":_e(r,h);break;case"select":o=h.value,o!=null&&Ne(r,!!h.multiple,o,!1)}},Lt=Eu,jt=ia;var g5={usingClientEntryPoint:!1,Events:[Ji,Oa,il,Xe,kt,Eu]},po={findFiberByHostInstance:Xr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},b5={bundleType:po.bundleType,version:po.version,rendererPackageName:po.rendererPackageName,rendererConfig:po.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Gr(r),r===null?null:r.stateNode},findFiberByHostInstance:po.findFiberByHostInstance||m5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ul.isDisabled&&Ul.supportsFiber)try{Qr=Ul.inject(b5),At=Ul}catch{}}return Yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=g5,Yn.createPortal=function(r,o){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lu(o))throw Error(s(200));return p5(r,o,null,h)},Yn.createRoot=function(r,o){if(!Lu(r))throw Error(s(299));var h=!1,v="",_=B0;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(v=o.identifierPrefix),o.onRecoverableError!==void 0&&(_=o.onRecoverableError)),o=Pu(r,1,!1,null,null,h,!1,v,_),r[Xs]=o.current,Zi(r.nodeType===8?r.parentNode:r),new Bu(o)},Yn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=Gr(o),r=r===null?null:r.stateNode,r},Yn.flushSync=function(r){return ia(r)},Yn.hydrate=function(r,o,h){if(!Vl(o))throw Error(s(200));return Hl(null,r,o,!0,h)},Yn.hydrateRoot=function(r,o,h){if(!Lu(r))throw Error(s(405));var v=h!=null&&h.hydratedSources||null,_=!1,F="",Y=B0;if(h!=null&&(h.unstable_strictMode===!0&&(_=!0),h.identifierPrefix!==void 0&&(F=h.identifierPrefix),h.onRecoverableError!==void 0&&(Y=h.onRecoverableError)),o=P0(o,null,r,1,h??null,_,!1,F,Y),r[Xs]=o.current,Zi(r),v)for(r=0;r<v.length;r++)h=v[r],_=h._getVersion,_=_(h._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[h,_]:o.mutableSourceEagerHydrationData.push(h,_);return new $l(o)},Yn.render=function(r,o,h){if(!Vl(o))throw Error(s(200));return Hl(null,r,o,!1,h)},Yn.unmountComponentAtNode=function(r){if(!Vl(r))throw Error(s(40));return r._reactRootContainer?(ia(function(){Hl(null,null,r,!1,function(){r._reactRootContainer=null,r[Xs]=null})}),!0):!1},Yn.unstable_batchedUpdates=Eu,Yn.unstable_renderSubtreeIntoContainer=function(r,o,h,v){if(!Vl(h))throw Error(s(200));if(r==null||r._reactInternals===void 0)throw Error(s(38));return Hl(r,o,h,!1,v)},Yn.version="18.3.1-next-f1338f8080-20240426",Yn}var K0;function y1(){if(K0)return $u.exports;K0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),$u.exports=C5(),$u.exports}var G0;function _5(){if(G0)return Kl;G0=1;var e=y1();return Kl.createRoot=e.createRoot,Kl.hydrateRoot=e.hydrateRoot,Kl}var A5=_5(),j=fh();const Re=$c(j),w1=y5({__proto__:null,default:Re},[j]),hh=j.createContext({});function ph(e){const n=j.useRef(null);return n.current===null&&(n.current=e()),n.current}const mh=typeof window<"u",S1=mh?j.useLayoutEffect:j.useEffect,Vc=j.createContext(null);function xh(e,n){e.indexOf(n)===-1&&e.push(n)}function gh(e,n){const s=e.indexOf(n);s>-1&&e.splice(s,1)}const cr=(e,n,s)=>s>n?n:s<e?e:s;let bh=()=>{};const dr={},k1=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function j1(e){return typeof e=="object"&&e!==null}const N1=e=>/^0[^.\s]+$/u.test(e);function vh(e){let n;return()=>(n===void 0&&(n=e()),n)}const gs=e=>e,E5=(e,n)=>s=>n(e(s)),Fo=(...e)=>e.reduce(E5),jo=(e,n,s)=>{const a=n-e;return a===0?1:(s-e)/a};class yh{constructor(){this.subscriptions=[]}add(n){return xh(this.subscriptions,n),()=>gh(this.subscriptions,n)}notify(n,s,a){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](n,s,a);else for(let l=0;l<i;l++){const c=this.subscriptions[l];c&&c(n,s,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ks=e=>e*1e3,xs=e=>e/1e3;function C1(e,n){return n?e*(1e3/n):0}const _1=(e,n,s)=>(((1-3*s+3*n)*e+(3*s-6*n))*e+3*n)*e,T5=1e-7,D5=12;function F5(e,n,s,a,i){let l,c,d=0;do c=n+(s-n)/2,l=_1(c,a,i)-e,l>0?s=c:n=c;while(Math.abs(l)>T5&&++d<D5);return c}function Mo(e,n,s,a){if(e===n&&s===a)return gs;const i=l=>F5(l,0,1,e,s);return l=>l===0||l===1?l:_1(i(l),n,a)}const A1=e=>n=>n<=.5?e(2*n)/2:(2-e(2*(1-n)))/2,E1=e=>n=>1-e(1-n),T1=Mo(.33,1.53,.69,.99),wh=E1(T1),D1=A1(wh),F1=e=>(e*=2)<1?.5*wh(e):.5*(2-Math.pow(2,-10*(e-1))),Sh=e=>1-Math.sin(Math.acos(e)),M1=E1(Sh),I1=A1(Sh),M5=Mo(.42,0,1,1),I5=Mo(0,0,.58,1),P1=Mo(.42,0,.58,1),P5=e=>Array.isArray(e)&&typeof e[0]!="number",R1=e=>Array.isArray(e)&&typeof e[0]=="number",R5={linear:gs,easeIn:M5,easeInOut:P1,easeOut:I5,circIn:Sh,circInOut:I1,circOut:M1,backIn:wh,backInOut:D1,backOut:T1,anticipate:F1},B5=e=>typeof e=="string",Y0=e=>{if(R1(e)){bh(e.length===4);const[n,s,a,i]=e;return Mo(n,s,a,i)}else if(B5(e))return R5[e];return e},Gl=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function L5(e,n){let s=new Set,a=new Set,i=!1,l=!1;const c=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1};function u(p){c.has(p)&&(m.schedule(p),e()),p(d)}const m={schedule:(p,f=!1,x=!1)=>{const y=x&&i?s:a;return f&&c.add(p),y.has(p)||y.add(p),p},cancel:p=>{a.delete(p),c.delete(p)},process:p=>{if(d=p,i){l=!0;return}i=!0,[s,a]=[a,s],s.forEach(u),s.clear(),i=!1,l&&(l=!1,m.process(p))}};return m}const z5=40;function B1(e,n){let s=!1,a=!0;const i={delta:0,timestamp:0,isProcessing:!1},l=()=>s=!0,c=Gl.reduce((N,A)=>(N[A]=L5(l),N),{}),{setup:d,read:u,resolveKeyframes:m,preUpdate:p,update:f,preRender:x,render:b,postRender:y}=c,g=()=>{const N=dr.useManualTiming?i.timestamp:performance.now();s=!1,dr.useManualTiming||(i.delta=a?1e3/60:Math.max(Math.min(N-i.timestamp,z5),1)),i.timestamp=N,i.isProcessing=!0,d.process(i),u.process(i),m.process(i),p.process(i),f.process(i),x.process(i),b.process(i),y.process(i),i.isProcessing=!1,s&&n&&(a=!1,e(g))},k=()=>{s=!0,a=!0,i.isProcessing||e(g)};return{schedule:Gl.reduce((N,A)=>{const P=c[A];return N[A]=(B,$=!1,D=!1)=>(s||k(),P.schedule(B,$,D)),N},{}),cancel:N=>{for(let A=0;A<Gl.length;A++)c[Gl[A]].cancel(N)},state:i,steps:c}}const{schedule:Ot,cancel:Lr,state:wn,steps:Uu}=B1(typeof requestAnimationFrame<"u"?requestAnimationFrame:gs,!0);let cc;function O5(){cc=void 0}const Qn={now:()=>(cc===void 0&&Qn.set(wn.isProcessing||dr.useManualTiming?wn.timestamp:performance.now()),cc),set:e=>{cc=e,queueMicrotask(O5)}},L1=e=>n=>typeof n=="string"&&n.startsWith(e),z1=L1("--"),$5=L1("var(--"),kh=e=>$5(e)?V5.test(e.split("/*")[0].trim()):!1,V5=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ki={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},No={...ki,transform:e=>cr(0,1,e)},Yl={...ki,default:1},yo=e=>Math.round(e*1e5)/1e5,jh=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function H5(e){return e==null}const U5=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Nh=(e,n)=>s=>!!(typeof s=="string"&&U5.test(s)&&s.startsWith(e)||n&&!H5(s)&&Object.prototype.hasOwnProperty.call(s,n)),O1=(e,n,s)=>a=>{if(typeof a!="string")return a;const[i,l,c,d]=a.match(jh);return{[e]:parseFloat(i),[n]:parseFloat(l),[s]:parseFloat(c),alpha:d!==void 0?parseFloat(d):1}},W5=e=>cr(0,255,e),Wu={...ki,transform:e=>Math.round(W5(e))},ha={test:Nh("rgb","red"),parse:O1("red","green","blue"),transform:({red:e,green:n,blue:s,alpha:a=1})=>"rgba("+Wu.transform(e)+", "+Wu.transform(n)+", "+Wu.transform(s)+", "+yo(No.transform(a))+")"};function K5(e){let n="",s="",a="",i="";return e.length>5?(n=e.substring(1,3),s=e.substring(3,5),a=e.substring(5,7),i=e.substring(7,9)):(n=e.substring(1,2),s=e.substring(2,3),a=e.substring(3,4),i=e.substring(4,5),n+=n,s+=s,a+=a,i+=i),{red:parseInt(n,16),green:parseInt(s,16),blue:parseInt(a,16),alpha:i?parseInt(i,16)/255:1}}const Nf={test:Nh("#"),parse:K5,transform:ha.transform},Io=e=>({test:n=>typeof n=="string"&&n.endsWith(e)&&n.split(" ").length===1,parse:parseFloat,transform:n=>`${n}${e}`}),Pr=Io("deg"),Gs=Io("%"),at=Io("px"),G5=Io("vh"),Y5=Io("vw"),q0={...Gs,parse:e=>Gs.parse(e)/100,transform:e=>Gs.transform(e*100)},oi={test:Nh("hsl","hue"),parse:O1("hue","saturation","lightness"),transform:({hue:e,saturation:n,lightness:s,alpha:a=1})=>"hsla("+Math.round(e)+", "+Gs.transform(yo(n))+", "+Gs.transform(yo(s))+", "+yo(No.transform(a))+")"},rn={test:e=>ha.test(e)||Nf.test(e)||oi.test(e),parse:e=>ha.test(e)?ha.parse(e):oi.test(e)?oi.parse(e):Nf.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?ha.transform(e):oi.transform(e),getAnimatableNone:e=>{const n=rn.parse(e);return n.alpha=0,rn.transform(n)}},q5=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Z5(e){return isNaN(e)&&typeof e=="string"&&(e.match(jh)?.length||0)+(e.match(q5)?.length||0)>0}const $1="number",V1="color",Q5="var",X5="var(",Z0="${}",J5=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Co(e){const n=e.toString(),s=[],a={color:[],number:[],var:[]},i=[];let l=0;const d=n.replace(J5,u=>(rn.test(u)?(a.color.push(l),i.push(V1),s.push(rn.parse(u))):u.startsWith(X5)?(a.var.push(l),i.push(Q5),s.push(u)):(a.number.push(l),i.push($1),s.push(parseFloat(u))),++l,Z0)).split(Z0);return{values:s,split:d,indexes:a,types:i}}function H1(e){return Co(e).values}function U1(e){const{split:n,types:s}=Co(e),a=n.length;return i=>{let l="";for(let c=0;c<a;c++)if(l+=n[c],i[c]!==void 0){const d=s[c];d===$1?l+=yo(i[c]):d===V1?l+=rn.transform(i[c]):l+=i[c]}return l}}const e3=e=>typeof e=="number"?0:rn.test(e)?rn.getAnimatableNone(e):e;function t3(e){const n=H1(e);return U1(e)(n.map(e3))}const zr={test:Z5,parse:H1,createTransformer:U1,getAnimatableNone:t3};function Ku(e,n,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(n-e)*6*s:s<1/2?n:s<2/3?e+(n-e)*(2/3-s)*6:e}function n3({hue:e,saturation:n,lightness:s,alpha:a}){e/=360,n/=100,s/=100;let i=0,l=0,c=0;if(!n)i=l=c=s;else{const d=s<.5?s*(1+n):s+n-s*n,u=2*s-d;i=Ku(u,d,e+1/3),l=Ku(u,d,e),c=Ku(u,d,e-1/3)}return{red:Math.round(i*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:a}}function vc(e,n){return s=>s>0?n:e}const Wt=(e,n,s)=>e+(n-e)*s,Gu=(e,n,s)=>{const a=e*e,i=s*(n*n-a)+a;return i<0?0:Math.sqrt(i)},s3=[Nf,ha,oi],r3=e=>s3.find(n=>n.test(e));function Q0(e){const n=r3(e);if(!n)return!1;let s=n.parse(e);return n===oi&&(s=n3(s)),s}const X0=(e,n)=>{const s=Q0(e),a=Q0(n);if(!s||!a)return vc(e,n);const i={...s};return l=>(i.red=Gu(s.red,a.red,l),i.green=Gu(s.green,a.green,l),i.blue=Gu(s.blue,a.blue,l),i.alpha=Wt(s.alpha,a.alpha,l),ha.transform(i))},Cf=new Set(["none","hidden"]);function a3(e,n){return Cf.has(e)?s=>s<=0?e:n:s=>s>=1?n:e}function i3(e,n){return s=>Wt(e,n,s)}function Ch(e){return typeof e=="number"?i3:typeof e=="string"?kh(e)?vc:rn.test(e)?X0:c3:Array.isArray(e)?W1:typeof e=="object"?rn.test(e)?X0:o3:vc}function W1(e,n){const s=[...e],a=s.length,i=e.map((l,c)=>Ch(l)(l,n[c]));return l=>{for(let c=0;c<a;c++)s[c]=i[c](l);return s}}function o3(e,n){const s={...e,...n},a={};for(const i in s)e[i]!==void 0&&n[i]!==void 0&&(a[i]=Ch(e[i])(e[i],n[i]));return i=>{for(const l in a)s[l]=a[l](i);return s}}function l3(e,n){const s=[],a={color:0,var:0,number:0};for(let i=0;i<n.values.length;i++){const l=n.types[i],c=e.indexes[l][a[l]],d=e.values[c]??0;s[i]=d,a[l]++}return s}const c3=(e,n)=>{const s=zr.createTransformer(n),a=Co(e),i=Co(n);return a.indexes.var.length===i.indexes.var.length&&a.indexes.color.length===i.indexes.color.length&&a.indexes.number.length>=i.indexes.number.length?Cf.has(e)&&!i.values.length||Cf.has(n)&&!a.values.length?a3(e,n):Fo(W1(l3(a,i),i.values),s):vc(e,n)};function K1(e,n,s){return typeof e=="number"&&typeof n=="number"&&typeof s=="number"?Wt(e,n,s):Ch(e)(e,n)}const d3=e=>{const n=({timestamp:s})=>e(s);return{start:(s=!0)=>Ot.update(n,s),stop:()=>Lr(n),now:()=>wn.isProcessing?wn.timestamp:Qn.now()}},G1=(e,n,s=10)=>{let a="";const i=Math.max(Math.round(n/s),2);for(let l=0;l<i;l++)a+=Math.round(e(l/(i-1))*1e4)/1e4+", ";return`linear(${a.substring(0,a.length-2)})`},yc=2e4;function _h(e){let n=0;const s=50;let a=e.next(n);for(;!a.done&&n<yc;)n+=s,a=e.next(n);return n>=yc?1/0:n}function u3(e,n=100,s){const a=s({...e,keyframes:[0,n]}),i=Math.min(_h(a),yc);return{type:"keyframes",ease:l=>a.next(i*l).value/n,duration:xs(i)}}const f3=5;function Y1(e,n,s){const a=Math.max(n-f3,0);return C1(s-e(a),n-a)}const qt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Yu=.001;function h3({duration:e=qt.duration,bounce:n=qt.bounce,velocity:s=qt.velocity,mass:a=qt.mass}){let i,l,c=1-n;c=cr(qt.minDamping,qt.maxDamping,c),e=cr(qt.minDuration,qt.maxDuration,xs(e)),c<1?(i=m=>{const p=m*c,f=p*e,x=p-s,b=_f(m,c),y=Math.exp(-f);return Yu-x/b*y},l=m=>{const f=m*c*e,x=f*s+s,b=Math.pow(c,2)*Math.pow(m,2)*e,y=Math.exp(-f),g=_f(Math.pow(m,2),c);return(-i(m)+Yu>0?-1:1)*((x-b)*y)/g}):(i=m=>{const p=Math.exp(-m*e),f=(m-s)*e+1;return-Yu+p*f},l=m=>{const p=Math.exp(-m*e),f=(s-m)*(e*e);return p*f});const d=5/e,u=m3(i,l,d);if(e=Ks(e),isNaN(u))return{stiffness:qt.stiffness,damping:qt.damping,duration:e};{const m=Math.pow(u,2)*a;return{stiffness:m,damping:c*2*Math.sqrt(a*m),duration:e}}}const p3=12;function m3(e,n,s){let a=s;for(let i=1;i<p3;i++)a=a-e(a)/n(a);return a}function _f(e,n){return e*Math.sqrt(1-n*n)}const x3=["duration","bounce"],g3=["stiffness","damping","mass"];function J0(e,n){return n.some(s=>e[s]!==void 0)}function b3(e){let n={velocity:qt.velocity,stiffness:qt.stiffness,damping:qt.damping,mass:qt.mass,isResolvedFromDuration:!1,...e};if(!J0(e,g3)&&J0(e,x3))if(e.visualDuration){const s=e.visualDuration,a=2*Math.PI/(s*1.2),i=a*a,l=2*cr(.05,1,1-(e.bounce||0))*Math.sqrt(i);n={...n,mass:qt.mass,stiffness:i,damping:l}}else{const s=h3(e);n={...n,...s,mass:qt.mass},n.isResolvedFromDuration=!0}return n}function wc(e=qt.visualDuration,n=qt.bounce){const s=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:n}:e;let{restSpeed:a,restDelta:i}=s;const l=s.keyframes[0],c=s.keyframes[s.keyframes.length-1],d={done:!1,value:l},{stiffness:u,damping:m,mass:p,duration:f,velocity:x,isResolvedFromDuration:b}=b3({...s,velocity:-xs(s.velocity||0)}),y=x||0,g=m/(2*Math.sqrt(u*p)),k=c-l,w=xs(Math.sqrt(u/p)),C=Math.abs(k)<5;a||(a=C?qt.restSpeed.granular:qt.restSpeed.default),i||(i=C?qt.restDelta.granular:qt.restDelta.default);let N;if(g<1){const P=_f(w,g);N=B=>{const $=Math.exp(-g*w*B);return c-$*((y+g*w*k)/P*Math.sin(P*B)+k*Math.cos(P*B))}}else if(g===1)N=P=>c-Math.exp(-w*P)*(k+(y+w*k)*P);else{const P=w*Math.sqrt(g*g-1);N=B=>{const $=Math.exp(-g*w*B),D=Math.min(P*B,300);return c-$*((y+g*w*k)*Math.sinh(D)+P*k*Math.cosh(D))/P}}const A={calculatedDuration:b&&f||null,next:P=>{const B=N(P);if(b)d.done=P>=f;else{let $=P===0?y:0;g<1&&($=P===0?Ks(y):Y1(N,P,B));const D=Math.abs($)<=a,T=Math.abs(c-B)<=i;d.done=D&&T}return d.value=d.done?c:B,d},toString:()=>{const P=Math.min(_h(A),yc),B=G1($=>A.next(P*$).value,P,30);return P+"ms "+B},toTransition:()=>{}};return A}wc.applyToOptions=e=>{const n=u3(e,100,wc);return e.ease=n.ease,e.duration=Ks(n.duration),e.type="keyframes",e};function Af({keyframes:e,velocity:n=0,power:s=.8,timeConstant:a=325,bounceDamping:i=10,bounceStiffness:l=500,modifyTarget:c,min:d,max:u,restDelta:m=.5,restSpeed:p}){const f=e[0],x={done:!1,value:f},b=D=>d!==void 0&&D<d||u!==void 0&&D>u,y=D=>d===void 0?u:u===void 0||Math.abs(d-D)<Math.abs(u-D)?d:u;let g=s*n;const k=f+g,w=c===void 0?k:c(k);w!==k&&(g=w-f);const C=D=>-g*Math.exp(-D/a),N=D=>w+C(D),A=D=>{const T=C(D),H=N(D);x.done=Math.abs(T)<=m,x.value=x.done?w:H};let P,B;const $=D=>{b(x.value)&&(P=D,B=wc({keyframes:[x.value,y(x.value)],velocity:Y1(N,D,x.value),damping:i,stiffness:l,restDelta:m,restSpeed:p}))};return $(0),{calculatedDuration:null,next:D=>{let T=!1;return!B&&P===void 0&&(T=!0,A(D),$(D)),P!==void 0&&D>=P?B.next(D-P):(!T&&A(D),x)}}}function v3(e,n,s){const a=[],i=s||dr.mix||K1,l=e.length-1;for(let c=0;c<l;c++){let d=i(e[c],e[c+1]);if(n){const u=Array.isArray(n)?n[c]||gs:n;d=Fo(u,d)}a.push(d)}return a}function y3(e,n,{clamp:s=!0,ease:a,mixer:i}={}){const l=e.length;if(bh(l===n.length),l===1)return()=>n[0];if(l===2&&n[0]===n[1])return()=>n[1];const c=e[0]===e[1];e[0]>e[l-1]&&(e=[...e].reverse(),n=[...n].reverse());const d=v3(n,a,i),u=d.length,m=p=>{if(c&&p<e[0])return n[0];let f=0;if(u>1)for(;f<e.length-2&&!(p<e[f+1]);f++);const x=jo(e[f],e[f+1],p);return d[f](x)};return s?p=>m(cr(e[0],e[l-1],p)):m}function w3(e,n){const s=e[e.length-1];for(let a=1;a<=n;a++){const i=jo(0,n,a);e.push(Wt(s,1,i))}}function S3(e){const n=[0];return w3(n,e.length-1),n}function k3(e,n){return e.map(s=>s*n)}function j3(e,n){return e.map(()=>n||P1).splice(0,e.length-1)}function wo({duration:e=300,keyframes:n,times:s,ease:a="easeInOut"}){const i=P5(a)?a.map(Y0):Y0(a),l={done:!1,value:n[0]},c=k3(s&&s.length===n.length?s:S3(n),e),d=y3(c,n,{ease:Array.isArray(i)?i:j3(n,i)});return{calculatedDuration:e,next:u=>(l.value=d(u),l.done=u>=e,l)}}const N3=e=>e!==null;function Ah(e,{repeat:n,repeatType:s="loop"},a,i=1){const l=e.filter(N3),d=i<0||n&&s!=="loop"&&n%2===1?0:l.length-1;return!d||a===void 0?l[d]:a}const C3={decay:Af,inertia:Af,tween:wo,keyframes:wo,spring:wc};function q1(e){typeof e.type=="string"&&(e.type=C3[e.type])}class Eh{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(n=>{this.resolve=n})}notifyFinished(){this.resolve()}then(n,s){return this.finished.then(n,s)}}const _3=e=>e/100;class Th extends Eh{constructor(n){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:s}=this.options;s&&s.updatedAt!==Qn.now()&&this.tick(Qn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=n,this.initAnimation(),this.play(),n.autoplay===!1&&this.pause()}initAnimation(){const{options:n}=this;q1(n);const{type:s=wo,repeat:a=0,repeatDelay:i=0,repeatType:l,velocity:c=0}=n;let{keyframes:d}=n;const u=s||wo;u!==wo&&typeof d[0]!="number"&&(this.mixKeyframes=Fo(_3,K1(d[0],d[1])),d=[0,100]);const m=u({...n,keyframes:d});l==="mirror"&&(this.mirroredGenerator=u({...n,keyframes:[...d].reverse(),velocity:-c})),m.calculatedDuration===null&&(m.calculatedDuration=_h(m));const{calculatedDuration:p}=m;this.calculatedDuration=p,this.resolvedDuration=p+i,this.totalDuration=this.resolvedDuration*(a+1)-i,this.generator=m}updateTime(n){const s=Math.round(n-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(n,s=!1){const{generator:a,totalDuration:i,mixKeyframes:l,mirroredGenerator:c,resolvedDuration:d,calculatedDuration:u}=this;if(this.startTime===null)return a.next(0);const{delay:m=0,keyframes:p,repeat:f,repeatType:x,repeatDelay:b,type:y,onUpdate:g,finalKeyframe:k}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,n):this.speed<0&&(this.startTime=Math.min(n-i/this.speed,this.startTime)),s?this.currentTime=n:this.updateTime(n);const w=this.currentTime-m*(this.playbackSpeed>=0?1:-1),C=this.playbackSpeed>=0?w<0:w>i;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let N=this.currentTime,A=a;if(f){const D=Math.min(this.currentTime,i)/d;let T=Math.floor(D),H=D%1;!H&&D>=1&&(H=1),H===1&&T--,T=Math.min(T,f+1),!!(T%2)&&(x==="reverse"?(H=1-H,b&&(H-=b/d)):x==="mirror"&&(A=c)),N=cr(0,1,H)*d}const P=C?{done:!1,value:p[0]}:A.next(N);l&&(P.value=l(P.value));let{done:B}=P;!C&&u!==null&&(B=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const $=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&B);return $&&y!==Af&&(P.value=Ah(p,this.options,k,this.speed)),g&&g(P.value),$&&this.finish(),P}then(n,s){return this.finished.then(n,s)}get duration(){return xs(this.calculatedDuration)}get iterationDuration(){const{delay:n=0}=this.options||{};return this.duration+xs(n)}get time(){return xs(this.currentTime)}set time(n){n=Ks(n),this.currentTime=n,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=n:this.driver&&(this.startTime=this.driver.now()-n/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(n){this.updateTime(Qn.now());const s=this.playbackSpeed!==n;this.playbackSpeed=n,s&&(this.time=xs(this.currentTime))}play(){if(this.isStopped)return;const{driver:n=d3,startTime:s}=this.options;this.driver||(this.driver=n(i=>this.tick(i))),this.options.onPlay?.();const a=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=a):this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime||(this.startTime=s??a),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Qn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(n){return this.startTime=0,this.tick(n,!0)}attachTimeline(n){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),n.observe(this)}}function A3(e){for(let n=1;n<e.length;n++)e[n]??(e[n]=e[n-1])}const pa=e=>e*180/Math.PI,Ef=e=>{const n=pa(Math.atan2(e[1],e[0]));return Tf(n)},E3={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Ef,rotateZ:Ef,skewX:e=>pa(Math.atan(e[1])),skewY:e=>pa(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Tf=e=>(e=e%360,e<0&&(e+=360),e),ex=Ef,tx=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),nx=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),T3={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:tx,scaleY:nx,scale:e=>(tx(e)+nx(e))/2,rotateX:e=>Tf(pa(Math.atan2(e[6],e[5]))),rotateY:e=>Tf(pa(Math.atan2(-e[2],e[0]))),rotateZ:ex,rotate:ex,skewX:e=>pa(Math.atan(e[4])),skewY:e=>pa(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Df(e){return e.includes("scale")?1:0}function Ff(e,n){if(!e||e==="none")return Df(n);const s=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let a,i;if(s)a=T3,i=s;else{const d=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);a=E3,i=d}if(!i)return Df(n);const l=a[n],c=i[1].split(",").map(F3);return typeof l=="function"?l(c):c[l]}const D3=(e,n)=>{const{transform:s="none"}=getComputedStyle(e);return Ff(s,n)};function F3(e){return parseFloat(e.trim())}const ji=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ni=new Set(ji),sx=e=>e===ki||e===at,M3=new Set(["x","y","z"]),I3=ji.filter(e=>!M3.has(e));function P3(e){const n=[];return I3.forEach(s=>{const a=e.getValue(s);a!==void 0&&(n.push([s,a.get()]),a.set(s.startsWith("scale")?1:0))}),n}const xa={width:({x:e},{paddingLeft:n="0",paddingRight:s="0"})=>e.max-e.min-parseFloat(n)-parseFloat(s),height:({y:e},{paddingTop:n="0",paddingBottom:s="0"})=>e.max-e.min-parseFloat(n)-parseFloat(s),top:(e,{top:n})=>parseFloat(n),left:(e,{left:n})=>parseFloat(n),bottom:({y:e},{top:n})=>parseFloat(n)+(e.max-e.min),right:({x:e},{left:n})=>parseFloat(n)+(e.max-e.min),x:(e,{transform:n})=>Ff(n,"x"),y:(e,{transform:n})=>Ff(n,"y")};xa.translateX=xa.x;xa.translateY=xa.y;const ga=new Set;let Mf=!1,If=!1,Pf=!1;function Z1(){if(If){const e=Array.from(ga).filter(a=>a.needsMeasurement),n=new Set(e.map(a=>a.element)),s=new Map;n.forEach(a=>{const i=P3(a);i.length&&(s.set(a,i),a.render())}),e.forEach(a=>a.measureInitialState()),n.forEach(a=>{a.render();const i=s.get(a);i&&i.forEach(([l,c])=>{a.getValue(l)?.set(c)})}),e.forEach(a=>a.measureEndState()),e.forEach(a=>{a.suspendedScrollY!==void 0&&window.scrollTo(0,a.suspendedScrollY)})}If=!1,Mf=!1,ga.forEach(e=>e.complete(Pf)),ga.clear()}function Q1(){ga.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(If=!0)})}function R3(){Pf=!0,Q1(),Z1(),Pf=!1}class Dh{constructor(n,s,a,i,l,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...n],this.onComplete=s,this.name=a,this.motionValue=i,this.element=l,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(ga.add(this),Mf||(Mf=!0,Ot.read(Q1),Ot.resolveKeyframes(Z1))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:n,name:s,element:a,motionValue:i}=this;if(n[0]===null){const l=i?.get(),c=n[n.length-1];if(l!==void 0)n[0]=l;else if(a&&s){const d=a.readValue(s,c);d!=null&&(n[0]=d)}n[0]===void 0&&(n[0]=c),i&&l===void 0&&i.set(n[0])}A3(n)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(n=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,n),ga.delete(this)}cancel(){this.state==="scheduled"&&(ga.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const B3=e=>e.startsWith("--");function L3(e,n,s){B3(n)?e.style.setProperty(n,s):e.style[n]=s}const z3=vh(()=>window.ScrollTimeline!==void 0),O3={};function $3(e,n){const s=vh(e);return()=>O3[n]??s()}const X1=$3(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),bo=([e,n,s,a])=>`cubic-bezier(${e}, ${n}, ${s}, ${a})`,rx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:bo([0,.65,.55,1]),circOut:bo([.55,0,1,.45]),backIn:bo([.31,.01,.66,-.59]),backOut:bo([.33,1.53,.69,.99])};function J1(e,n){if(e)return typeof e=="function"?X1()?G1(e,n):"ease-out":R1(e)?bo(e):Array.isArray(e)?e.map(s=>J1(s,n)||rx.easeOut):rx[e]}function V3(e,n,s,{delay:a=0,duration:i=300,repeat:l=0,repeatType:c="loop",ease:d="easeOut",times:u}={},m=void 0){const p={[n]:s};u&&(p.offset=u);const f=J1(d,i);Array.isArray(f)&&(p.easing=f);const x={delay:a,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:l+1,direction:c==="reverse"?"alternate":"normal"};return m&&(x.pseudoElement=m),e.animate(p,x)}function eb(e){return typeof e=="function"&&"applyToOptions"in e}function H3({type:e,...n}){return eb(e)&&X1()?e.applyToOptions(n):(n.duration??(n.duration=300),n.ease??(n.ease="easeOut"),n)}class U3 extends Eh{constructor(n){if(super(),this.finishedTime=null,this.isStopped=!1,!n)return;const{element:s,name:a,keyframes:i,pseudoElement:l,allowFlatten:c=!1,finalKeyframe:d,onComplete:u}=n;this.isPseudoElement=!!l,this.allowFlatten=c,this.options=n,bh(typeof n.type!="string");const m=H3(n);this.animation=V3(s,a,i,m,l),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const p=Ah(i,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(p):L3(s,a,p),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:n}=this;n==="idle"||n==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const n=this.animation.effect?.getComputedTiming?.().duration||0;return xs(Number(n))}get iterationDuration(){const{delay:n=0}=this.options||{};return this.duration+xs(n)}get time(){return xs(Number(this.animation.currentTime)||0)}set time(n){this.finishedTime=null,this.animation.currentTime=Ks(n)}get speed(){return this.animation.playbackRate}set speed(n){n<0&&(this.finishedTime=null),this.animation.playbackRate=n}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(n){this.animation.startTime=n}attachTimeline({timeline:n,observe:s}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,n&&z3()?(this.animation.timeline=n,gs):s(this)}}const tb={anticipate:F1,backInOut:D1,circInOut:I1};function W3(e){return e in tb}function K3(e){typeof e.ease=="string"&&W3(e.ease)&&(e.ease=tb[e.ease])}const ax=10;class G3 extends U3{constructor(n){K3(n),q1(n),super(n),n.startTime&&(this.startTime=n.startTime),this.options=n}updateMotionValue(n){const{motionValue:s,onUpdate:a,onComplete:i,element:l,...c}=this.options;if(!s)return;if(n!==void 0){s.set(n);return}const d=new Th({...c,autoplay:!1}),u=Ks(this.finishedTime??this.time);s.setWithVelocity(d.sample(u-ax).value,d.sample(u).value,ax),d.stop()}}const ix=(e,n)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(zr.test(e)||e==="0")&&!e.startsWith("url("));function Y3(e){const n=e[0];if(e.length===1)return!0;for(let s=0;s<e.length;s++)if(e[s]!==n)return!0}function q3(e,n,s,a){const i=e[0];if(i===null)return!1;if(n==="display"||n==="visibility")return!0;const l=e[e.length-1],c=ix(i,n),d=ix(l,n);return!c||!d?!1:Y3(e)||(s==="spring"||eb(s))&&a}function Rf(e){e.duration=0,e.type="keyframes"}const Z3=new Set(["opacity","clipPath","filter","transform"]),Q3=vh(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function X3(e){const{motionValue:n,name:s,repeatDelay:a,repeatType:i,damping:l,type:c}=e;if(!(n?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:m}=n.owner.getProps();return Q3()&&s&&Z3.has(s)&&(s!=="transform"||!m)&&!u&&!a&&i!=="mirror"&&l!==0&&c!=="inertia"}const J3=40;class eS extends Eh{constructor({autoplay:n=!0,delay:s=0,type:a="keyframes",repeat:i=0,repeatDelay:l=0,repeatType:c="loop",keyframes:d,name:u,motionValue:m,element:p,...f}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Qn.now();const x={autoplay:n,delay:s,type:a,repeat:i,repeatDelay:l,repeatType:c,name:u,motionValue:m,element:p,...f},b=p?.KeyframeResolver||Dh;this.keyframeResolver=new b(d,(y,g,k)=>this.onKeyframesResolved(y,g,x,!k),u,m,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(n,s,a,i){this.keyframeResolver=void 0;const{name:l,type:c,velocity:d,delay:u,isHandoff:m,onUpdate:p}=a;this.resolvedAt=Qn.now(),q3(n,l,c,d)||((dr.instantAnimations||!u)&&p?.(Ah(n,a,s)),n[0]=n[n.length-1],Rf(a),a.repeat=0);const x={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>J3?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...a,keyframes:n},b=!m&&X3(x)?new G3({...x,element:x.motionValue.owner.current}):new Th(x);b.finished.then(()=>this.notifyFinished()).catch(gs),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(n,s){return this.finished.finally(n).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),R3()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(n){this.animation.time=n}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(n){this.animation.speed=n}get startTime(){return this.animation.startTime}attachTimeline(n){return this._animation?this.stopTimeline=this.animation.attachTimeline(n):this.pendingTimeline=n,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const tS=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function nS(e){const n=tS.exec(e);if(!n)return[,];const[,s,a,i]=n;return[`--${s??a}`,i]}function nb(e,n,s=1){const[a,i]=nS(e);if(!a)return;const l=window.getComputedStyle(n).getPropertyValue(a);if(l){const c=l.trim();return k1(c)?parseFloat(c):c}return kh(i)?nb(i,n,s+1):i}function Fh(e,n){return e?.[n]??e?.default??e}const sb=new Set(["width","height","top","left","right","bottom",...ji]),sS={test:e=>e==="auto",parse:e=>e},rb=e=>n=>n.test(e),ab=[ki,at,Gs,Pr,Y5,G5,sS],ox=e=>ab.find(rb(e));function rS(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||N1(e):!0}const aS=new Set(["brightness","contrast","saturate","opacity"]);function iS(e){const[n,s]=e.slice(0,-1).split("(");if(n==="drop-shadow")return e;const[a]=s.match(jh)||[];if(!a)return e;const i=s.replace(a,"");let l=aS.has(n)?1:0;return a!==s&&(l*=100),n+"("+l+i+")"}const oS=/\b([a-z-]*)\(.*?\)/gu,Bf={...zr,getAnimatableNone:e=>{const n=e.match(oS);return n?n.map(iS).join(" "):e}},lx={...ki,transform:Math.round},lS={rotate:Pr,rotateX:Pr,rotateY:Pr,rotateZ:Pr,scale:Yl,scaleX:Yl,scaleY:Yl,scaleZ:Yl,skew:Pr,skewX:Pr,skewY:Pr,distance:at,translateX:at,translateY:at,translateZ:at,x:at,y:at,z:at,perspective:at,transformPerspective:at,opacity:No,originX:q0,originY:q0,originZ:at},Mh={borderWidth:at,borderTopWidth:at,borderRightWidth:at,borderBottomWidth:at,borderLeftWidth:at,borderRadius:at,radius:at,borderTopLeftRadius:at,borderTopRightRadius:at,borderBottomRightRadius:at,borderBottomLeftRadius:at,width:at,maxWidth:at,height:at,maxHeight:at,top:at,right:at,bottom:at,left:at,padding:at,paddingTop:at,paddingRight:at,paddingBottom:at,paddingLeft:at,margin:at,marginTop:at,marginRight:at,marginBottom:at,marginLeft:at,backgroundPositionX:at,backgroundPositionY:at,...lS,zIndex:lx,fillOpacity:No,strokeOpacity:No,numOctaves:lx},cS={...Mh,color:rn,backgroundColor:rn,outlineColor:rn,fill:rn,stroke:rn,borderColor:rn,borderTopColor:rn,borderRightColor:rn,borderBottomColor:rn,borderLeftColor:rn,filter:Bf,WebkitFilter:Bf},ib=e=>cS[e];function ob(e,n){let s=ib(e);return s!==Bf&&(s=zr),s.getAnimatableNone?s.getAnimatableNone(n):void 0}const dS=new Set(["auto","none","0"]);function uS(e,n,s){let a=0,i;for(;a<e.length&&!i;){const l=e[a];typeof l=="string"&&!dS.has(l)&&Co(l).values.length&&(i=e[a]),a++}if(i&&s)for(const l of n)e[l]=ob(s,i)}class fS extends Dh{constructor(n,s,a,i,l){super(n,s,a,i,l,!0)}readKeyframes(){const{unresolvedKeyframes:n,element:s,name:a}=this;if(!s||!s.current)return;super.readKeyframes();for(let u=0;u<n.length;u++){let m=n[u];if(typeof m=="string"&&(m=m.trim(),kh(m))){const p=nb(m,s.current);p!==void 0&&(n[u]=p),u===n.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!sb.has(a)||n.length!==2)return;const[i,l]=n,c=ox(i),d=ox(l);if(c!==d)if(sx(c)&&sx(d))for(let u=0;u<n.length;u++){const m=n[u];typeof m=="string"&&(n[u]=parseFloat(m))}else xa[a]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:n,name:s}=this,a=[];for(let i=0;i<n.length;i++)(n[i]===null||rS(n[i]))&&a.push(i);a.length&&uS(n,a,s)}measureInitialState(){const{element:n,unresolvedKeyframes:s,name:a}=this;if(!n||!n.current)return;a==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=xa[a](n.measureViewportBox(),window.getComputedStyle(n.current)),s[0]=this.measuredOrigin;const i=s[s.length-1];i!==void 0&&n.getValue(a,i).jump(i,!1)}measureEndState(){const{element:n,name:s,unresolvedKeyframes:a}=this;if(!n||!n.current)return;const i=n.getValue(s);i&&i.jump(this.measuredOrigin,!1);const l=a.length-1,c=a[l];a[l]=xa[s](n.measureViewportBox(),window.getComputedStyle(n.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),this.removedTransforms?.length&&this.removedTransforms.forEach(([d,u])=>{n.getValue(d).set(u)}),this.resolveNoneKeyframes()}}function hS(e,n,s){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let a=document;const i=s?.[e]??a.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}const lb=(e,n)=>n&&typeof e=="number"?n.transform(e):e;function cb(e){return j1(e)&&"offsetHeight"in e}const cx=30,pS=e=>!isNaN(parseFloat(e));class mS{constructor(n,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=a=>{const i=Qn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(n),this.owner=s.owner}setCurrent(n){this.current=n,this.updatedAt=Qn.now(),this.canTrackVelocity===null&&n!==void 0&&(this.canTrackVelocity=pS(this.current))}setPrevFrameValue(n=this.current){this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt}onChange(n){return this.on("change",n)}on(n,s){this.events[n]||(this.events[n]=new yh);const a=this.events[n].add(s);return n==="change"?()=>{a(),Ot.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const n in this.events)this.events[n].clear()}attach(n,s){this.passiveEffect=n,this.stopPassiveEffect=s}set(n){this.passiveEffect?this.passiveEffect(n,this.updateAndNotify):this.updateAndNotify(n)}setWithVelocity(n,s,a){this.set(s),this.prev=void 0,this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt-a}jump(n,s=!0){this.updateAndNotify(n),this.prev=n,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(n){this.dependents||(this.dependents=new Set),this.dependents.add(n)}removeDependent(n){this.dependents&&this.dependents.delete(n)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const n=Qn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||n-this.updatedAt>cx)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,cx);return C1(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(n){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=n(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function vi(e,n){return new mS(e,n)}const{schedule:Ih}=B1(queueMicrotask,!1),Es={x:!1,y:!1};function db(){return Es.x||Es.y}function xS(e){return e==="x"||e==="y"?Es[e]?null:(Es[e]=!0,()=>{Es[e]=!1}):Es.x||Es.y?null:(Es.x=Es.y=!0,()=>{Es.x=Es.y=!1})}function ub(e,n){const s=hS(e),a=new AbortController,i={passive:!0,...n,signal:a.signal};return[s,i,()=>a.abort()]}function dx(e){return!(e.pointerType==="touch"||db())}function gS(e,n,s={}){const[a,i,l]=ub(e,s),c=d=>{if(!dx(d))return;const{target:u}=d,m=n(u,d);if(typeof m!="function"||!u)return;const p=f=>{dx(f)&&(m(f),u.removeEventListener("pointerleave",p))};u.addEventListener("pointerleave",p,i)};return a.forEach(d=>{d.addEventListener("pointerenter",c,i)}),l}const fb=(e,n)=>n?e===n?!0:fb(e,n.parentElement):!1,Ph=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,bS=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function vS(e){return bS.has(e.tagName)||e.tabIndex!==-1}const dc=new WeakSet;function ux(e){return n=>{n.key==="Enter"&&e(n)}}function qu(e,n){e.dispatchEvent(new PointerEvent("pointer"+n,{isPrimary:!0,bubbles:!0}))}const yS=(e,n)=>{const s=e.currentTarget;if(!s)return;const a=ux(()=>{if(dc.has(s))return;qu(s,"down");const i=ux(()=>{qu(s,"up")}),l=()=>qu(s,"cancel");s.addEventListener("keyup",i,n),s.addEventListener("blur",l,n)});s.addEventListener("keydown",a,n),s.addEventListener("blur",()=>s.removeEventListener("keydown",a),n)};function fx(e){return Ph(e)&&!db()}function wS(e,n,s={}){const[a,i,l]=ub(e,s),c=d=>{const u=d.currentTarget;if(!fx(d))return;dc.add(u);const m=n(u,d),p=(b,y)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",x),dc.has(u)&&dc.delete(u),fx(b)&&typeof m=="function"&&m(b,{success:y})},f=b=>{p(b,u===window||u===document||s.useGlobalTarget||fb(u,b.target))},x=b=>{p(b,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",x,i)};return a.forEach(d=>{(s.useGlobalTarget?window:d).addEventListener("pointerdown",c,i),cb(d)&&(d.addEventListener("focus",m=>yS(m,i)),!vS(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),l}function hb(e){return j1(e)&&"ownerSVGElement"in e}function SS(e){return hb(e)&&e.tagName==="svg"}const En=e=>!!(e&&e.getVelocity),kS=[...ab,rn,zr],jS=e=>kS.find(rb(e)),Rh=j.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function hx(e,n){if(typeof e=="function")return e(n);e!=null&&(e.current=n)}function NS(...e){return n=>{let s=!1;const a=e.map(i=>{const l=hx(i,n);return!s&&typeof l=="function"&&(s=!0),l});if(s)return()=>{for(let i=0;i<a.length;i++){const l=a[i];typeof l=="function"?l():hx(e[i],null)}}}}function CS(...e){return j.useCallback(NS(...e),e)}class _S extends j.Component{getSnapshotBeforeUpdate(n){const s=this.props.childRef.current;if(s&&n.isPresent&&!this.props.isPresent){const a=s.offsetParent,i=cb(a)&&a.offsetWidth||0,l=this.props.sizeRef.current;l.height=s.offsetHeight||0,l.width=s.offsetWidth||0,l.top=s.offsetTop,l.left=s.offsetLeft,l.right=i-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function AS({children:e,isPresent:n,anchorX:s,root:a}){const i=j.useId(),l=j.useRef(null),c=j.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=j.useContext(Rh),u=CS(l,e?.ref);return j.useInsertionEffect(()=>{const{width:m,height:p,top:f,left:x,right:b}=c.current;if(n||!l.current||!m||!p)return;const y=s==="left"?`left: ${x}`:`right: ${b}`;l.current.dataset.motionPopId=i;const g=document.createElement("style");d&&(g.nonce=d);const k=a??document.head;return k.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${p}px !important;
            ${y}px !important;
            top: ${f}px !important;
          }
        `),()=>{k.contains(g)&&k.removeChild(g)}},[n]),t.jsx(_S,{isPresent:n,childRef:l,sizeRef:c,children:j.cloneElement(e,{ref:u})})}const ES=({children:e,initial:n,isPresent:s,onExitComplete:a,custom:i,presenceAffectsLayout:l,mode:c,anchorX:d,root:u})=>{const m=ph(TS),p=j.useId();let f=!0,x=j.useMemo(()=>(f=!1,{id:p,initial:n,isPresent:s,custom:i,onExitComplete:b=>{m.set(b,!0);for(const y of m.values())if(!y)return;a&&a()},register:b=>(m.set(b,!1),()=>m.delete(b))}),[s,m,a]);return l&&f&&(x={...x}),j.useMemo(()=>{m.forEach((b,y)=>m.set(y,!1))},[s]),j.useEffect(()=>{!s&&!m.size&&a&&a()},[s]),c==="popLayout"&&(e=t.jsx(AS,{isPresent:s,anchorX:d,root:u,children:e})),t.jsx(Vc.Provider,{value:x,children:e})};function TS(){return new Map}function pb(e=!0){const n=j.useContext(Vc);if(n===null)return[!0,null];const{isPresent:s,onExitComplete:a,register:i}=n,l=j.useId();j.useEffect(()=>{if(e)return i(l)},[e]);const c=j.useCallback(()=>e&&a&&a(l),[l,a,e]);return!s&&a?[!1,c]:[!0]}const ql=e=>e.key||"";function px(e){const n=[];return j.Children.forEach(e,s=>{j.isValidElement(s)&&n.push(s)}),n}const Ie=({children:e,custom:n,initial:s=!0,onExitComplete:a,presenceAffectsLayout:i=!0,mode:l="sync",propagate:c=!1,anchorX:d="left",root:u})=>{const[m,p]=pb(c),f=j.useMemo(()=>px(e),[e]),x=c&&!m?[]:f.map(ql),b=j.useRef(!0),y=j.useRef(f),g=ph(()=>new Map),[k,w]=j.useState(f),[C,N]=j.useState(f);S1(()=>{b.current=!1,y.current=f;for(let B=0;B<C.length;B++){const $=ql(C[B]);x.includes($)?g.delete($):g.get($)!==!0&&g.set($,!1)}},[C,x.length,x.join("-")]);const A=[];if(f!==k){let B=[...f];for(let $=0;$<C.length;$++){const D=C[$],T=ql(D);x.includes(T)||(B.splice($,0,D),A.push(D))}return l==="wait"&&A.length&&(B=A),N(px(B)),w(f),null}const{forceRender:P}=j.useContext(hh);return t.jsx(t.Fragment,{children:C.map(B=>{const $=ql(B),D=c&&!m?!1:f===C||x.includes($),T=()=>{if(g.has($))g.set($,!0);else return;let H=!0;g.forEach(K=>{K||(H=!1)}),H&&(P?.(),N(y.current),c&&p?.(),a&&a())};return t.jsx(ES,{isPresent:D,initial:!b.current||s?void 0:!1,custom:n,presenceAffectsLayout:i,mode:l,root:u,onExitComplete:D?void 0:T,anchorX:d,children:B},$)})})},mb=j.createContext({strict:!1}),mx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},yi={};for(const e in mx)yi[e]={isEnabled:n=>mx[e].some(s=>!!n[s])};function DS(e){for(const n in e)yi[n]={...yi[n],...e[n]}}const FS=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Sc(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||FS.has(e)}let xb=e=>!Sc(e);function MS(e){typeof e=="function"&&(xb=n=>n.startsWith("on")?!Sc(n):e(n))}try{MS(require("@emotion/is-prop-valid").default)}catch{}function IS(e,n,s){const a={};for(const i in e)i==="values"&&typeof e.values=="object"||(xb(i)||s===!0&&Sc(i)||!n&&!Sc(i)||e.draggable&&i.startsWith("onDrag"))&&(a[i]=e[i]);return a}const Hc=j.createContext({});function Uc(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function _o(e){return typeof e=="string"||Array.isArray(e)}const Bh=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Lh=["initial",...Bh];function Wc(e){return Uc(e.animate)||Lh.some(n=>_o(e[n]))}function gb(e){return!!(Wc(e)||e.variants)}function PS(e,n){if(Wc(e)){const{initial:s,animate:a}=e;return{initial:s===!1||_o(s)?s:void 0,animate:_o(a)?a:void 0}}return e.inherit!==!1?n:{}}function RS(e){const{initial:n,animate:s}=PS(e,j.useContext(Hc));return j.useMemo(()=>({initial:n,animate:s}),[xx(n),xx(s)])}function xx(e){return Array.isArray(e)?e.join(" "):e}function gx(e,n){return n.max===n.min?0:e/(n.max-n.min)*100}const xo={correct:(e,n)=>{if(!n.target)return e;if(typeof e=="string")if(at.test(e))e=parseFloat(e);else return e;const s=gx(e,n.target.x),a=gx(e,n.target.y);return`${s}% ${a}%`}},BS={correct:(e,{treeScale:n,projectionDelta:s})=>{const a=e,i=zr.parse(e);if(i.length>5)return a;const l=zr.createTransformer(e),c=typeof i[0]!="number"?1:0,d=s.x.scale*n.x,u=s.y.scale*n.y;i[0+c]/=d,i[1+c]/=u;const m=Wt(d,u,.5);return typeof i[2+c]=="number"&&(i[2+c]/=m),typeof i[3+c]=="number"&&(i[3+c]/=m),l(i)}},Lf={borderRadius:{...xo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:xo,borderTopRightRadius:xo,borderBottomLeftRadius:xo,borderBottomRightRadius:xo,boxShadow:BS};function bb(e,{layout:n,layoutId:s}){return Ni.has(e)||e.startsWith("origin")||(n||s!==void 0)&&(!!Lf[e]||e==="opacity")}const LS={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},zS=ji.length;function OS(e,n,s){let a="",i=!0;for(let l=0;l<zS;l++){const c=ji[l],d=e[c];if(d===void 0)continue;let u=!0;if(typeof d=="number"?u=d===(c.startsWith("scale")?1:0):u=parseFloat(d)===0,!u||s){const m=lb(d,Mh[c]);if(!u){i=!1;const p=LS[c]||c;a+=`${p}(${m}) `}s&&(n[c]=m)}}return a=a.trim(),s?a=s(n,i?"":a):i&&(a="none"),a}function zh(e,n,s){const{style:a,vars:i,transformOrigin:l}=e;let c=!1,d=!1;for(const u in n){const m=n[u];if(Ni.has(u)){c=!0;continue}else if(z1(u)){i[u]=m;continue}else{const p=lb(m,Mh[u]);u.startsWith("origin")?(d=!0,l[u]=p):a[u]=p}}if(n.transform||(c||s?a.transform=OS(n,e.transform,s):a.transform&&(a.transform="none")),d){const{originX:u="50%",originY:m="50%",originZ:p=0}=l;a.transformOrigin=`${u} ${m} ${p}`}}const Oh=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function vb(e,n,s){for(const a in n)!En(n[a])&&!bb(a,s)&&(e[a]=n[a])}function $S({transformTemplate:e},n){return j.useMemo(()=>{const s=Oh();return zh(s,n,e),Object.assign({},s.vars,s.style)},[n])}function VS(e,n){const s=e.style||{},a={};return vb(a,s,e),Object.assign(a,$S(e,n)),a}function HS(e,n){const s={},a=VS(e,n);return e.drag&&e.dragListener!==!1&&(s.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=a,s}const US={offset:"stroke-dashoffset",array:"stroke-dasharray"},WS={offset:"strokeDashoffset",array:"strokeDasharray"};function KS(e,n,s=1,a=0,i=!0){e.pathLength=1;const l=i?US:WS;e[l.offset]=at.transform(-a);const c=at.transform(n),d=at.transform(s);e[l.array]=`${c} ${d}`}function yb(e,{attrX:n,attrY:s,attrScale:a,pathLength:i,pathSpacing:l=1,pathOffset:c=0,...d},u,m,p){if(zh(e,d,m),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:x}=e;f.transform&&(x.transform=f.transform,delete f.transform),(x.transform||f.transformOrigin)&&(x.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),x.transform&&(x.transformBox=p?.transformBox??"fill-box",delete f.transformBox),n!==void 0&&(f.x=n),s!==void 0&&(f.y=s),a!==void 0&&(f.scale=a),i!==void 0&&KS(f,i,l,c,!1)}const wb=()=>({...Oh(),attrs:{}}),Sb=e=>typeof e=="string"&&e.toLowerCase()==="svg";function GS(e,n,s,a){const i=j.useMemo(()=>{const l=wb();return yb(l,n,Sb(a),e.transformTemplate,e.style),{...l.attrs,style:{...l.style}}},[n]);if(e.style){const l={};vb(l,e.style,e),i.style={...l,...i.style}}return i}const YS=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function $h(e){return typeof e!="string"||e.includes("-")?!1:!!(YS.indexOf(e)>-1||/[A-Z]/u.test(e))}function qS(e,n,s,{latestValues:a},i,l=!1){const d=($h(e)?GS:HS)(n,a,i,e),u=IS(n,typeof e=="string",l),m=e!==j.Fragment?{...u,...d,ref:s}:{},{children:p}=n,f=j.useMemo(()=>En(p)?p.get():p,[p]);return j.createElement(e,{...m,children:f})}function bx(e){const n=[{},{}];return e?.values.forEach((s,a)=>{n[0][a]=s.get(),n[1][a]=s.getVelocity()}),n}function Vh(e,n,s,a){if(typeof n=="function"){const[i,l]=bx(a);n=n(s!==void 0?s:e.custom,i,l)}if(typeof n=="string"&&(n=e.variants&&e.variants[n]),typeof n=="function"){const[i,l]=bx(a);n=n(s!==void 0?s:e.custom,i,l)}return n}function uc(e){return En(e)?e.get():e}function ZS({scrapeMotionValuesFromProps:e,createRenderState:n},s,a,i){return{latestValues:QS(s,a,i,e),renderState:n()}}function QS(e,n,s,a){const i={},l=a(e,{});for(const x in l)i[x]=uc(l[x]);let{initial:c,animate:d}=e;const u=Wc(e),m=gb(e);n&&m&&!u&&e.inherit!==!1&&(c===void 0&&(c=n.initial),d===void 0&&(d=n.animate));let p=s?s.initial===!1:!1;p=p||c===!1;const f=p?d:c;if(f&&typeof f!="boolean"&&!Uc(f)){const x=Array.isArray(f)?f:[f];for(let b=0;b<x.length;b++){const y=Vh(e,x[b]);if(y){const{transitionEnd:g,transition:k,...w}=y;for(const C in w){let N=w[C];if(Array.isArray(N)){const A=p?N.length-1:0;N=N[A]}N!==null&&(i[C]=N)}for(const C in g)i[C]=g[C]}}}return i}const kb=e=>(n,s)=>{const a=j.useContext(Hc),i=j.useContext(Vc),l=()=>ZS(e,n,a,i);return s?l():ph(l)};function Hh(e,n,s){const{style:a}=e,i={};for(const l in a)(En(a[l])||n.style&&En(n.style[l])||bb(l,e)||s?.getValue(l)?.liveStyle!==void 0)&&(i[l]=a[l]);return i}const XS=kb({scrapeMotionValuesFromProps:Hh,createRenderState:Oh});function jb(e,n,s){const a=Hh(e,n,s);for(const i in e)if(En(e[i])||En(n[i])){const l=ji.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;a[l]=e[i]}return a}const JS=kb({scrapeMotionValuesFromProps:jb,createRenderState:wb}),ek=Symbol.for("motionComponentSymbol");function li(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function tk(e,n,s){return j.useCallback(a=>{a&&e.onMount&&e.onMount(a),n&&(a?n.mount(a):n.unmount()),s&&(typeof s=="function"?s(a):li(s)&&(s.current=a))},[n])}const Uh=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),nk="framerAppearId",Nb="data-"+Uh(nk),Cb=j.createContext({});function sk(e,n,s,a,i){const{visualElement:l}=j.useContext(Hc),c=j.useContext(mb),d=j.useContext(Vc),u=j.useContext(Rh).reducedMotion,m=j.useRef(null);a=a||c.renderer,!m.current&&a&&(m.current=a(e,{visualState:n,parent:l,props:s,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:u}));const p=m.current,f=j.useContext(Cb);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&rk(m.current,s,i,f);const x=j.useRef(!1);j.useInsertionEffect(()=>{p&&x.current&&p.update(s,d)});const b=s[Nb],y=j.useRef(!!b&&!window.MotionHandoffIsComplete?.(b)&&window.MotionHasOptimisedAnimation?.(b));return S1(()=>{p&&(x.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),y.current&&p.animationState&&p.animationState.animateChanges())}),j.useEffect(()=>{p&&(!y.current&&p.animationState&&p.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(b)}),y.current=!1),p.enteringChildren=void 0)}),p}function rk(e,n,s,a){const{layoutId:i,layout:l,drag:c,dragConstraints:d,layoutScroll:u,layoutRoot:m,layoutCrossfade:p}=n;e.projection=new s(e.latestValues,n["data-framer-portal-id"]?void 0:_b(e.parent)),e.projection.setOptions({layoutId:i,layout:l,alwaysMeasureLayout:!!c||d&&li(d),visualElement:e,animationType:typeof l=="string"?l:"both",initialPromotionConfig:a,crossfade:p,layoutScroll:u,layoutRoot:m})}function _b(e){if(e)return e.options.allowProjection!==!1?e.projection:_b(e.parent)}function Zu(e,{forwardMotionProps:n=!1}={},s,a){s&&DS(s);const i=$h(e)?JS:XS;function l(d,u){let m;const p={...j.useContext(Rh),...d,layoutId:ak(d)},{isStatic:f}=p,x=RS(d),b=i(d,f);if(!f&&mh){ik();const y=ok(p);m=y.MeasureLayout,x.visualElement=sk(e,b,p,a,y.ProjectionNode)}return t.jsxs(Hc.Provider,{value:x,children:[m&&x.visualElement?t.jsx(m,{visualElement:x.visualElement,...p}):null,qS(e,d,tk(b,x.visualElement,u),b,f,n)]})}l.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const c=j.forwardRef(l);return c[ek]=e,c}function ak({layoutId:e}){const n=j.useContext(hh).id;return n&&e!==void 0?n+"-"+e:e}function ik(e,n){j.useContext(mb).strict}function ok(e){const{drag:n,layout:s}=yi;if(!n&&!s)return{};const a={...n,...s};return{MeasureLayout:n?.isEnabled(e)||s?.isEnabled(e)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}function lk(e,n){if(typeof Proxy>"u")return Zu;const s=new Map,a=(l,c)=>Zu(l,c,e,n),i=(l,c)=>a(l,c);return new Proxy(i,{get:(l,c)=>c==="create"?a:(s.has(c)||s.set(c,Zu(c,void 0,e,n)),s.get(c))})}function Ab({top:e,left:n,right:s,bottom:a}){return{x:{min:n,max:s},y:{min:e,max:a}}}function ck({x:e,y:n}){return{top:n.min,right:e.max,bottom:n.max,left:e.min}}function dk(e,n){if(!n)return e;const s=n({x:e.left,y:e.top}),a=n({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:a.y,right:a.x}}function Qu(e){return e===void 0||e===1}function zf({scale:e,scaleX:n,scaleY:s}){return!Qu(e)||!Qu(n)||!Qu(s)}function fa(e){return zf(e)||Eb(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Eb(e){return vx(e.x)||vx(e.y)}function vx(e){return e&&e!=="0%"}function kc(e,n,s){const a=e-s,i=n*a;return s+i}function yx(e,n,s,a,i){return i!==void 0&&(e=kc(e,i,a)),kc(e,s,a)+n}function Of(e,n=0,s=1,a,i){e.min=yx(e.min,n,s,a,i),e.max=yx(e.max,n,s,a,i)}function Tb(e,{x:n,y:s}){Of(e.x,n.translate,n.scale,n.originPoint),Of(e.y,s.translate,s.scale,s.originPoint)}const wx=.999999999999,Sx=1.0000000000001;function uk(e,n,s,a=!1){const i=s.length;if(!i)return;n.x=n.y=1;let l,c;for(let d=0;d<i;d++){l=s[d],c=l.projectionDelta;const{visualElement:u}=l.options;u&&u.props.style&&u.props.style.display==="contents"||(a&&l.options.layoutScroll&&l.scroll&&l!==l.root&&di(e,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),c&&(n.x*=c.x.scale,n.y*=c.y.scale,Tb(e,c)),a&&fa(l.latestValues)&&di(e,l.latestValues))}n.x<Sx&&n.x>wx&&(n.x=1),n.y<Sx&&n.y>wx&&(n.y=1)}function ci(e,n){e.min=e.min+n,e.max=e.max+n}function kx(e,n,s,a,i=.5){const l=Wt(e.min,e.max,i);Of(e,n,s,l,a)}function di(e,n){kx(e.x,n.x,n.scaleX,n.scale,n.originX),kx(e.y,n.y,n.scaleY,n.scale,n.originY)}function Db(e,n){return Ab(dk(e.getBoundingClientRect(),n))}function fk(e,n,s){const a=Db(e,s),{scroll:i}=n;return i&&(ci(a.x,i.offset.x),ci(a.y,i.offset.y)),a}const jx=()=>({translate:0,scale:1,origin:0,originPoint:0}),ui=()=>({x:jx(),y:jx()}),Nx=()=>({min:0,max:0}),hn=()=>({x:Nx(),y:Nx()}),$f={current:null},Fb={current:!1};function hk(){if(Fb.current=!0,!!mh)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),n=()=>$f.current=e.matches;e.addEventListener("change",n),n()}else $f.current=!1}const pk=new WeakMap;function mk(e,n,s){for(const a in n){const i=n[a],l=s[a];if(En(i))e.addValue(a,i);else if(En(l))e.addValue(a,vi(i,{owner:e}));else if(l!==i)if(e.hasValue(a)){const c=e.getValue(a);c.liveStyle===!0?c.jump(i):c.hasAnimated||c.set(i)}else{const c=e.getStaticValue(a);e.addValue(a,vi(c!==void 0?c:i,{owner:e}))}}for(const a in s)n[a]===void 0&&e.removeValue(a);return n}const Cx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class xk{scrapeMotionValuesFromProps(n,s,a){return{}}constructor({parent:n,props:s,presenceContext:a,reducedMotionConfig:i,blockInitialAnimation:l,visualState:c},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Dh,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=Qn.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,Ot.render(this.render,!1,!0))};const{latestValues:u,renderState:m}=c;this.latestValues=u,this.baseTarget={...u},this.initialValues=s.initial?{...u}:{},this.renderState=m,this.parent=n,this.props=s,this.presenceContext=a,this.depth=n?n.depth+1:0,this.reducedMotionConfig=i,this.options=d,this.blockInitialAnimation=!!l,this.isControllingVariants=Wc(s),this.isVariantNode=gb(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(n&&n.current);const{willChange:p,...f}=this.scrapeMotionValuesFromProps(s,{},this);for(const x in f){const b=f[x];u[x]!==void 0&&En(b)&&b.set(u[x])}}mount(n){this.current=n,pk.set(n,this),this.projection&&!this.projection.instance&&this.projection.mount(n),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,a)=>this.bindToMotionValue(a,s)),Fb.current||hk(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:$f.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Lr(this.notifyUpdate),Lr(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const s=this.features[n];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(n){this.children.add(n),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(n)}removeChild(n){this.children.delete(n),this.enteringChildren&&this.enteringChildren.delete(n)}bindToMotionValue(n,s){this.valueSubscriptions.has(n)&&this.valueSubscriptions.get(n)();const a=Ni.has(n);a&&this.onBindTransform&&this.onBindTransform();const i=s.on("change",c=>{this.latestValues[n]=c,this.props.onUpdate&&Ot.preRender(this.notifyUpdate),a&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,n,s)),this.valueSubscriptions.set(n,()=>{i(),l&&l(),s.owner&&s.stop()})}sortNodePosition(n){return!this.current||!this.sortInstanceNodePosition||this.type!==n.type?0:this.sortInstanceNodePosition(this.current,n.current)}updateFeatures(){let n="animation";for(n in yi){const s=yi[n];if(!s)continue;const{isEnabled:a,Feature:i}=s;if(!this.features[n]&&i&&a(this.props)&&(this.features[n]=new i(this)),this.features[n]){const l=this.features[n];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):hn()}getStaticValue(n){return this.latestValues[n]}setStaticValue(n,s){this.latestValues[n]=s}update(n,s){(n.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=n,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let a=0;a<Cx.length;a++){const i=Cx[a];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const l="on"+i,c=n[l];c&&(this.propEventSubscriptions[i]=this.on(i,c))}this.prevMotionValues=mk(this,this.scrapeMotionValuesFromProps(n,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(n){return this.props.variants?this.props.variants[n]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(n){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(n),()=>s.variantChildren.delete(n)}addValue(n,s){const a=this.values.get(n);s!==a&&(a&&this.removeValue(n),this.bindToMotionValue(n,s),this.values.set(n,s),this.latestValues[n]=s.get())}removeValue(n){this.values.delete(n);const s=this.valueSubscriptions.get(n);s&&(s(),this.valueSubscriptions.delete(n)),delete this.latestValues[n],this.removeValueFromRenderState(n,this.renderState)}hasValue(n){return this.values.has(n)}getValue(n,s){if(this.props.values&&this.props.values[n])return this.props.values[n];let a=this.values.get(n);return a===void 0&&s!==void 0&&(a=vi(s===null?void 0:s,{owner:this}),this.addValue(n,a)),a}readValue(n,s){let a=this.latestValues[n]!==void 0||!this.current?this.latestValues[n]:this.getBaseTargetFromProps(this.props,n)??this.readValueFromInstance(this.current,n,this.options);return a!=null&&(typeof a=="string"&&(k1(a)||N1(a))?a=parseFloat(a):!jS(a)&&zr.test(s)&&(a=ob(n,s)),this.setBaseTarget(n,En(a)?a.get():a)),En(a)?a.get():a}setBaseTarget(n,s){this.baseTarget[n]=s}getBaseTarget(n){const{initial:s}=this.props;let a;if(typeof s=="string"||typeof s=="object"){const l=Vh(this.props,s,this.presenceContext?.custom);l&&(a=l[n])}if(s&&a!==void 0)return a;const i=this.getBaseTargetFromProps(this.props,n);return i!==void 0&&!En(i)?i:this.initialValues[n]!==void 0&&a===void 0?void 0:this.baseTarget[n]}on(n,s){return this.events[n]||(this.events[n]=new yh),this.events[n].add(s)}notify(n,...s){this.events[n]&&this.events[n].notify(...s)}scheduleRenderMicrotask(){Ih.render(this.render)}}class Mb extends xk{constructor(){super(...arguments),this.KeyframeResolver=fS}sortInstanceNodePosition(n,s){return n.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(n,s){return n.style?n.style[s]:void 0}removeValueFromRenderState(n,{vars:s,style:a}){delete s[n],delete a[n]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:n}=this.props;En(n)&&(this.childSubscription=n.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function Ib(e,{style:n,vars:s},a,i){const l=e.style;let c;for(c in n)l[c]=n[c];i?.applyProjectionStyles(l,a);for(c in s)l.setProperty(c,s[c])}function gk(e){return window.getComputedStyle(e)}class bk extends Mb{constructor(){super(...arguments),this.type="html",this.renderInstance=Ib}readValueFromInstance(n,s){if(Ni.has(s))return this.projection?.isProjecting?Df(s):D3(n,s);{const a=gk(n),i=(z1(s)?a.getPropertyValue(s):a[s])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(n,{transformPagePoint:s}){return Db(n,s)}build(n,s,a){zh(n,s,a.transformTemplate)}scrapeMotionValuesFromProps(n,s,a){return Hh(n,s,a)}}const Pb=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function vk(e,n,s,a){Ib(e,n,void 0,a);for(const i in n.attrs)e.setAttribute(Pb.has(i)?i:Uh(i),n.attrs[i])}class yk extends Mb{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=hn}getBaseTargetFromProps(n,s){return n[s]}readValueFromInstance(n,s){if(Ni.has(s)){const a=ib(s);return a&&a.default||0}return s=Pb.has(s)?s:Uh(s),n.getAttribute(s)}scrapeMotionValuesFromProps(n,s,a){return jb(n,s,a)}build(n,s,a){yb(n,s,this.isSVGTag,a.transformTemplate,a.style)}renderInstance(n,s,a,i){vk(n,s,a,i)}mount(n){this.isSVGTag=Sb(n.tagName),super.mount(n)}}const wk=(e,n)=>$h(e)?new yk(n):new bk(n,{allowProjection:e!==j.Fragment});function hi(e,n,s){const a=e.getProps();return Vh(a,n,s!==void 0?s:a.custom,e)}const Vf=e=>Array.isArray(e);function Sk(e,n,s){e.hasValue(n)?e.getValue(n).set(s):e.addValue(n,vi(s))}function kk(e){return Vf(e)?e[e.length-1]||0:e}function jk(e,n){const s=hi(e,n);let{transitionEnd:a={},transition:i={},...l}=s||{};l={...l,...a};for(const c in l){const d=kk(l[c]);Sk(e,c,d)}}function Nk(e){return!!(En(e)&&e.add)}function Hf(e,n){const s=e.getValue("willChange");if(Nk(s))return s.add(n);if(!s&&dr.WillChange){const a=new dr.WillChange("auto");e.addValue("willChange",a),a.add(n)}}function Rb(e){return e.props[Nb]}const Ck=e=>e!==null;function _k(e,{repeat:n,repeatType:s="loop"},a){const i=e.filter(Ck),l=n&&s!=="loop"&&n%2===1?0:i.length-1;return i[l]}const Ak={type:"spring",stiffness:500,damping:25,restSpeed:10},Ek=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Tk={type:"keyframes",duration:.8},Dk={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Fk=(e,{keyframes:n})=>n.length>2?Tk:Ni.has(e)?e.startsWith("scale")?Ek(n[1]):Ak:Dk;function Mk({when:e,delay:n,delayChildren:s,staggerChildren:a,staggerDirection:i,repeat:l,repeatType:c,repeatDelay:d,from:u,elapsed:m,...p}){return!!Object.keys(p).length}const Wh=(e,n,s,a={},i,l)=>c=>{const d=Fh(a,e)||{},u=d.delay||a.delay||0;let{elapsed:m=0}=a;m=m-Ks(u);const p={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:n.getVelocity(),...d,delay:-m,onUpdate:x=>{n.set(x),d.onUpdate&&d.onUpdate(x)},onComplete:()=>{c(),d.onComplete&&d.onComplete()},name:e,motionValue:n,element:l?void 0:i};Mk(d)||Object.assign(p,Fk(e,p)),p.duration&&(p.duration=Ks(p.duration)),p.repeatDelay&&(p.repeatDelay=Ks(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let f=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(Rf(p),p.delay===0&&(f=!0)),(dr.instantAnimations||dr.skipAnimations)&&(f=!0,Rf(p),p.delay=0),p.allowFlatten=!d.type&&!d.ease,f&&!l&&n.get()!==void 0){const x=_k(p.keyframes,d);if(x!==void 0){Ot.update(()=>{p.onUpdate(x),p.onComplete()});return}}return d.isSync?new Th(p):new eS(p)};function Ik({protectedKeys:e,needsAnimating:n},s){const a=e.hasOwnProperty(s)&&n[s]!==!0;return n[s]=!1,a}function Bb(e,n,{delay:s=0,transitionOverride:a,type:i}={}){let{transition:l=e.getDefaultTransition(),transitionEnd:c,...d}=n;a&&(l=a);const u=[],m=i&&e.animationState&&e.animationState.getState()[i];for(const p in d){const f=e.getValue(p,e.latestValues[p]??null),x=d[p];if(x===void 0||m&&Ik(m,p))continue;const b={delay:s,...Fh(l||{},p)},y=f.get();if(y!==void 0&&!f.isAnimating&&!Array.isArray(x)&&x===y&&!b.velocity)continue;let g=!1;if(window.MotionHandoffAnimation){const w=Rb(e);if(w){const C=window.MotionHandoffAnimation(w,p,Ot);C!==null&&(b.startTime=C,g=!0)}}Hf(e,p),f.start(Wh(p,f,x,e.shouldReduceMotion&&sb.has(p)?{type:!1}:b,e,g));const k=f.animation;k&&u.push(k)}return c&&Promise.all(u).then(()=>{Ot.update(()=>{c&&jk(e,c)})}),u}function Lb(e,n,s,a=0,i=1){const l=Array.from(e).sort((m,p)=>m.sortNodePosition(p)).indexOf(n),c=e.size,d=(c-1)*a;return typeof s=="function"?s(l,c):i===1?l*a:d-l*a}function Uf(e,n,s={}){const a=hi(e,n,s.type==="exit"?e.presenceContext?.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=a||{};s.transitionOverride&&(i=s.transitionOverride);const l=a?()=>Promise.all(Bb(e,a,s)):()=>Promise.resolve(),c=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:m=0,staggerChildren:p,staggerDirection:f}=i;return Pk(e,n,u,m,p,f,s)}:()=>Promise.resolve(),{when:d}=i;if(d){const[u,m]=d==="beforeChildren"?[l,c]:[c,l];return u().then(()=>m())}else return Promise.all([l(),c(s.delay)])}function Pk(e,n,s=0,a=0,i=0,l=1,c){const d=[];for(const u of e.variantChildren)u.notify("AnimationStart",n),d.push(Uf(u,n,{...c,delay:s+(typeof a=="function"?0:a)+Lb(e.variantChildren,u,a,i,l)}).then(()=>u.notify("AnimationComplete",n)));return Promise.all(d)}function Rk(e,n,s={}){e.notify("AnimationStart",n);let a;if(Array.isArray(n)){const i=n.map(l=>Uf(e,l,s));a=Promise.all(i)}else if(typeof n=="string")a=Uf(e,n,s);else{const i=typeof n=="function"?hi(e,n,s.custom):n;a=Promise.all(Bb(e,i,s))}return a.then(()=>{e.notify("AnimationComplete",n)})}function zb(e,n){if(!Array.isArray(n))return!1;const s=n.length;if(s!==e.length)return!1;for(let a=0;a<s;a++)if(n[a]!==e[a])return!1;return!0}const Bk=Lh.length;function Ob(e){if(!e)return;if(!e.isControllingVariants){const s=e.parent?Ob(e.parent)||{}:{};return e.props.initial!==void 0&&(s.initial=e.props.initial),s}const n={};for(let s=0;s<Bk;s++){const a=Lh[s],i=e.props[a];(_o(i)||i===!1)&&(n[a]=i)}return n}const Lk=[...Bh].reverse(),zk=Bh.length;function Ok(e){return n=>Promise.all(n.map(({animation:s,options:a})=>Rk(e,s,a)))}function $k(e){let n=Ok(e),s=_x(),a=!0;const i=u=>(m,p)=>{const f=hi(e,p,u==="exit"?e.presenceContext?.custom:void 0);if(f){const{transition:x,transitionEnd:b,...y}=f;m={...m,...y,...b}}return m};function l(u){n=u(e)}function c(u){const{props:m}=e,p=Ob(e.parent)||{},f=[],x=new Set;let b={},y=1/0;for(let k=0;k<zk;k++){const w=Lk[k],C=s[w],N=m[w]!==void 0?m[w]:p[w],A=_o(N),P=w===u?C.isActive:null;P===!1&&(y=k);let B=N===p[w]&&N!==m[w]&&A;if(B&&a&&e.manuallyAnimateOnMount&&(B=!1),C.protectedKeys={...b},!C.isActive&&P===null||!N&&!C.prevProp||Uc(N)||typeof N=="boolean")continue;const $=Vk(C.prevProp,N);let D=$||w===u&&C.isActive&&!B&&A||k>y&&A,T=!1;const H=Array.isArray(N)?N:[N];let K=H.reduce(i(w),{});P===!1&&(K={});const{prevResolvedValues:E={}}=C,I={...E,...K},S=R=>{D=!0,x.has(R)&&(T=!0,x.delete(R)),C.needsAnimating[R]=!0;const U=e.getValue(R);U&&(U.liveStyle=!1)};for(const R in I){const U=K[R],W=E[R];if(b.hasOwnProperty(R))continue;let Z=!1;Vf(U)&&Vf(W)?Z=!zb(U,W):Z=U!==W,Z?U!=null?S(R):x.add(R):U!==void 0&&x.has(R)?S(R):C.protectedKeys[R]=!0}C.prevProp=N,C.prevResolvedValues=K,C.isActive&&(b={...b,...K}),a&&e.blockInitialAnimation&&(D=!1);const L=B&&$;D&&(!L||T)&&f.push(...H.map(R=>{const U={type:w};if(typeof R=="string"&&a&&!L&&e.manuallyAnimateOnMount&&e.parent){const{parent:W}=e,Z=hi(W,R);if(W.enteringChildren&&Z){const{delayChildren:O}=Z.transition||{};U.delay=Lb(W.enteringChildren,e,O)}}return{animation:R,options:U}}))}if(x.size){const k={};if(typeof m.initial!="boolean"){const w=hi(e,Array.isArray(m.initial)?m.initial[0]:m.initial);w&&w.transition&&(k.transition=w.transition)}x.forEach(w=>{const C=e.getBaseTarget(w),N=e.getValue(w);N&&(N.liveStyle=!0),k[w]=C??null}),f.push({animation:k})}let g=!!f.length;return a&&(m.initial===!1||m.initial===m.animate)&&!e.manuallyAnimateOnMount&&(g=!1),a=!1,g?n(f):Promise.resolve()}function d(u,m){if(s[u].isActive===m)return Promise.resolve();e.variantChildren?.forEach(f=>f.animationState?.setActive(u,m)),s[u].isActive=m;const p=c(u);for(const f in s)s[f].protectedKeys={};return p}return{animateChanges:c,setActive:d,setAnimateFunction:l,getState:()=>s,reset:()=>{s=_x()}}}function Vk(e,n){return typeof n=="string"?n!==e:Array.isArray(n)?!zb(n,e):!1}function da(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function _x(){return{animate:da(!0),whileInView:da(),whileHover:da(),whileTap:da(),whileDrag:da(),whileFocus:da(),exit:da()}}class Vr{constructor(n){this.isMounted=!1,this.node=n}update(){}}class Hk extends Vr{constructor(n){super(n),n.animationState||(n.animationState=$k(n))}updateAnimationControlsSubscription(){const{animate:n}=this.node.getProps();Uc(n)&&(this.unmountControls=n.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:n}=this.node.getProps(),{animate:s}=this.node.prevProps||{};n!==s&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Uk=0;class Wk extends Vr{constructor(){super(...arguments),this.id=Uk++}update(){if(!this.node.presenceContext)return;const{isPresent:n,onExitComplete:s}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||n===a)return;const i=this.node.animationState.setActive("exit",!n);s&&!n&&i.then(()=>{s(this.id)})}mount(){const{register:n,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),n&&(this.unmount=n(this.id))}unmount(){}}const Kk={animation:{Feature:Hk},exit:{Feature:Wk}};function Ao(e,n,s,a={passive:!0}){return e.addEventListener(n,s,a),()=>e.removeEventListener(n,s)}function Po(e){return{point:{x:e.pageX,y:e.pageY}}}const Gk=e=>n=>Ph(n)&&e(n,Po(n));function So(e,n,s,a){return Ao(e,n,Gk(s),a)}const $b=1e-4,Yk=1-$b,qk=1+$b,Vb=.01,Zk=0-Vb,Qk=0+Vb;function Ln(e){return e.max-e.min}function Xk(e,n,s){return Math.abs(e-n)<=s}function Ax(e,n,s,a=.5){e.origin=a,e.originPoint=Wt(n.min,n.max,e.origin),e.scale=Ln(s)/Ln(n),e.translate=Wt(s.min,s.max,e.origin)-e.originPoint,(e.scale>=Yk&&e.scale<=qk||isNaN(e.scale))&&(e.scale=1),(e.translate>=Zk&&e.translate<=Qk||isNaN(e.translate))&&(e.translate=0)}function ko(e,n,s,a){Ax(e.x,n.x,s.x,a?a.originX:void 0),Ax(e.y,n.y,s.y,a?a.originY:void 0)}function Ex(e,n,s){e.min=s.min+n.min,e.max=e.min+Ln(n)}function Jk(e,n,s){Ex(e.x,n.x,s.x),Ex(e.y,n.y,s.y)}function Tx(e,n,s){e.min=n.min-s.min,e.max=e.min+Ln(n)}function jc(e,n,s){Tx(e.x,n.x,s.x),Tx(e.y,n.y,s.y)}function ms(e){return[e("x"),e("y")]}const Hb=({current:e})=>e?e.ownerDocument.defaultView:null,Dx=(e,n)=>Math.abs(e-n);function ej(e,n){const s=Dx(e.x,n.x),a=Dx(e.y,n.y);return Math.sqrt(s**2+a**2)}class Ub{constructor(n,s,{transformPagePoint:a,contextWindow:i=window,dragSnapToOrigin:l=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Ju(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,y=ej(x.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!y)return;const{point:g}=x,{timestamp:k}=wn;this.history.push({...g,timestamp:k});const{onStart:w,onMove:C}=this.handlers;b||(w&&w(this.lastMoveEvent,x),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,x)},this.handlePointerMove=(x,b)=>{this.lastMoveEvent=x,this.lastMoveEventInfo=Xu(b,this.transformPagePoint),Ot.update(this.updatePoint,!0)},this.handlePointerUp=(x,b)=>{this.end();const{onEnd:y,onSessionEnd:g,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Ju(x.type==="pointercancel"?this.lastMoveEventInfo:Xu(b,this.transformPagePoint),this.history);this.startEvent&&y&&y(x,w),g&&g(x,w)},!Ph(n))return;this.dragSnapToOrigin=l,this.handlers=s,this.transformPagePoint=a,this.distanceThreshold=c,this.contextWindow=i||window;const d=Po(n),u=Xu(d,this.transformPagePoint),{point:m}=u,{timestamp:p}=wn;this.history=[{...m,timestamp:p}];const{onSessionStart:f}=s;f&&f(n,Ju(u,this.history)),this.removeListeners=Fo(So(this.contextWindow,"pointermove",this.handlePointerMove),So(this.contextWindow,"pointerup",this.handlePointerUp),So(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(n){this.handlers=n}end(){this.removeListeners&&this.removeListeners(),Lr(this.updatePoint)}}function Xu(e,n){return n?{point:n(e.point)}:e}function Fx(e,n){return{x:e.x-n.x,y:e.y-n.y}}function Ju({point:e},n){return{point:e,delta:Fx(e,Wb(n)),offset:Fx(e,tj(n)),velocity:nj(n,.1)}}function tj(e){return e[0]}function Wb(e){return e[e.length-1]}function nj(e,n){if(e.length<2)return{x:0,y:0};let s=e.length-1,a=null;const i=Wb(e);for(;s>=0&&(a=e[s],!(i.timestamp-a.timestamp>Ks(n)));)s--;if(!a)return{x:0,y:0};const l=xs(i.timestamp-a.timestamp);if(l===0)return{x:0,y:0};const c={x:(i.x-a.x)/l,y:(i.y-a.y)/l};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function sj(e,{min:n,max:s},a){return n!==void 0&&e<n?e=a?Wt(n,e,a.min):Math.max(e,n):s!==void 0&&e>s&&(e=a?Wt(s,e,a.max):Math.min(e,s)),e}function Mx(e,n,s){return{min:n!==void 0?e.min+n:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function rj(e,{top:n,left:s,bottom:a,right:i}){return{x:Mx(e.x,s,i),y:Mx(e.y,n,a)}}function Ix(e,n){let s=n.min-e.min,a=n.max-e.max;return n.max-n.min<e.max-e.min&&([s,a]=[a,s]),{min:s,max:a}}function aj(e,n){return{x:Ix(e.x,n.x),y:Ix(e.y,n.y)}}function ij(e,n){let s=.5;const a=Ln(e),i=Ln(n);return i>a?s=jo(n.min,n.max-a,e.min):a>i&&(s=jo(e.min,e.max-i,n.min)),cr(0,1,s)}function oj(e,n){const s={};return n.min!==void 0&&(s.min=n.min-e.min),n.max!==void 0&&(s.max=n.max-e.min),s}const Wf=.35;function lj(e=Wf){return e===!1?e=0:e===!0&&(e=Wf),{x:Px(e,"left","right"),y:Px(e,"top","bottom")}}function Px(e,n,s){return{min:Rx(e,n),max:Rx(e,s)}}function Rx(e,n){return typeof e=="number"?e:e[n]||0}const cj=new WeakMap;class dj{constructor(n){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=hn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=n}start(n,{snapToCursor:s=!1,distanceThreshold:a}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const l=f=>{const{dragSnapToOrigin:x}=this.getProps();x?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(Po(f).point)},c=(f,x)=>{const{drag:b,dragPropagation:y,onDragStart:g}=this.getProps();if(b&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=xS(b),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=x,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ms(w=>{let C=this.getAxisMotionValue(w).get()||0;if(Gs.test(C)){const{projection:N}=this.visualElement;if(N&&N.layout){const A=N.layout.layoutBox[w];A&&(C=Ln(A)*(parseFloat(C)/100))}}this.originPoint[w]=C}),g&&Ot.postRender(()=>g(f,x)),Hf(this.visualElement,"transform");const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},d=(f,x)=>{this.latestPointerEvent=f,this.latestPanInfo=x;const{dragPropagation:b,dragDirectionLock:y,onDirectionLock:g,onDrag:k}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:w}=x;if(y&&this.currentDirection===null){this.currentDirection=uj(w),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",x.point,w),this.updateAxis("y",x.point,w),this.visualElement.render(),k&&k(f,x)},u=(f,x)=>{this.latestPointerEvent=f,this.latestPanInfo=x,this.stop(f,x),this.latestPointerEvent=null,this.latestPanInfo=null},m=()=>ms(f=>this.getAnimationState(f)==="paused"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new Ub(n,{onSessionStart:l,onStart:c,onMove:d,onSessionEnd:u,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:a,contextWindow:Hb(this.visualElement)})}stop(n,s){const a=n||this.latestPointerEvent,i=s||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!i||!a)return;const{velocity:c}=i;this.startAnimation(c);const{onDragEnd:d}=this.getProps();d&&Ot.postRender(()=>d(a,i))}cancel(){this.isDragging=!1;const{projection:n,animationState:s}=this.visualElement;n&&(n.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(n,s,a){const{drag:i}=this.getProps();if(!a||!Zl(n,i,this.currentDirection))return;const l=this.getAxisMotionValue(n);let c=this.originPoint[n]+a[n];this.constraints&&this.constraints[n]&&(c=sj(c,this.constraints[n],this.elastic[n])),l.set(c)}resolveConstraints(){const{dragConstraints:n,dragElastic:s}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;n&&li(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&a?this.constraints=rj(a.layoutBox,n):this.constraints=!1,this.elastic=lj(s),i!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&ms(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=oj(a.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:n,onMeasureDragConstraints:s}=this.getProps();if(!n||!li(n))return!1;const a=n.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const l=fk(a,i.root,this.visualElement.getTransformPagePoint());let c=aj(i.layout.layoutBox,l);if(s){const d=s(ck(c));this.hasMutatedConstraints=!!d,d&&(c=Ab(d))}return c}startAnimation(n){const{drag:s,dragMomentum:a,dragElastic:i,dragTransition:l,dragSnapToOrigin:c,onDragTransitionEnd:d}=this.getProps(),u=this.constraints||{},m=ms(p=>{if(!Zl(p,s,this.currentDirection))return;let f=u&&u[p]||{};c&&(f={min:0,max:0});const x=i?200:1e6,b=i?40:1e7,y={type:"inertia",velocity:a?n[p]:0,bounceStiffness:x,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...l,...f};return this.startAxisValueAnimation(p,y)});return Promise.all(m).then(d)}startAxisValueAnimation(n,s){const a=this.getAxisMotionValue(n);return Hf(this.visualElement,n),a.start(Wh(n,a,0,s,this.visualElement,!1))}stopAnimation(){ms(n=>this.getAxisMotionValue(n).stop())}pauseAnimation(){ms(n=>this.getAxisMotionValue(n).animation?.pause())}getAnimationState(n){return this.getAxisMotionValue(n).animation?.state}getAxisMotionValue(n){const s=`_drag${n.toUpperCase()}`,a=this.visualElement.getProps(),i=a[s];return i||this.visualElement.getValue(n,(a.initial?a.initial[n]:void 0)||0)}snapToCursor(n){ms(s=>{const{drag:a}=this.getProps();if(!Zl(s,a,this.currentDirection))return;const{projection:i}=this.visualElement,l=this.getAxisMotionValue(s);if(i&&i.layout){const{min:c,max:d}=i.layout.layoutBox[s];l.set(n[s]-Wt(c,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:n,dragConstraints:s}=this.getProps(),{projection:a}=this.visualElement;if(!li(s)||!a||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ms(c=>{const d=this.getAxisMotionValue(c);if(d&&this.constraints!==!1){const u=d.get();i[c]=ij({min:u,max:u},this.constraints[c])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),ms(c=>{if(!Zl(c,n,null))return;const d=this.getAxisMotionValue(c),{min:u,max:m}=this.constraints[c];d.set(Wt(u,m,i[c]))})}addListeners(){if(!this.visualElement.current)return;cj.set(this.visualElement,this);const n=this.visualElement.current,s=So(n,"pointerdown",u=>{const{drag:m,dragListener:p=!0}=this.getProps();m&&p&&this.start(u)}),a=()=>{const{dragConstraints:u}=this.getProps();li(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,l=i.addEventListener("measure",a);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ot.read(a);const c=Ao(window,"resize",()=>this.scalePositionWithinConstraints()),d=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:m})=>{this.isDragging&&m&&(ms(p=>{const f=this.getAxisMotionValue(p);f&&(this.originPoint[p]+=u[p].translate,f.set(f.get()+u[p].translate))}),this.visualElement.render())}));return()=>{c(),s(),l(),d&&d()}}getProps(){const n=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:a=!1,dragPropagation:i=!1,dragConstraints:l=!1,dragElastic:c=Wf,dragMomentum:d=!0}=n;return{...n,drag:s,dragDirectionLock:a,dragPropagation:i,dragConstraints:l,dragElastic:c,dragMomentum:d}}}function Zl(e,n,s){return(n===!0||n===e)&&(s===null||s===e)}function uj(e,n=10){let s=null;return Math.abs(e.y)>n?s="y":Math.abs(e.x)>n&&(s="x"),s}class fj extends Vr{constructor(n){super(n),this.removeGroupControls=gs,this.removeListeners=gs,this.controls=new dj(n)}mount(){const{dragControls:n}=this.node.getProps();n&&(this.removeGroupControls=n.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||gs}unmount(){this.removeGroupControls(),this.removeListeners()}}const Bx=e=>(n,s)=>{e&&Ot.postRender(()=>e(n,s))};class hj extends Vr{constructor(){super(...arguments),this.removePointerDownListener=gs}onPointerDown(n){this.session=new Ub(n,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Hb(this.node)})}createPanHandlers(){const{onPanSessionStart:n,onPanStart:s,onPan:a,onPanEnd:i}=this.node.getProps();return{onSessionStart:Bx(n),onStart:Bx(s),onMove:a,onEnd:(l,c)=>{delete this.session,i&&Ot.postRender(()=>i(l,c))}}}mount(){this.removePointerDownListener=So(this.node.current,"pointerdown",n=>this.onPointerDown(n))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const fc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let ef=!1;class pj extends j.Component{componentDidMount(){const{visualElement:n,layoutGroup:s,switchLayoutGroup:a,layoutId:i}=this.props,{projection:l}=n;l&&(s.group&&s.group.add(l),a&&a.register&&i&&a.register(l),ef&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),fc.hasEverUpdated=!0}getSnapshotBeforeUpdate(n){const{layoutDependency:s,visualElement:a,drag:i,isPresent:l}=this.props,{projection:c}=a;return c&&(c.isPresent=l,ef=!0,i||n.layoutDependency!==s||s===void 0||n.isPresent!==l?c.willUpdate():this.safeToRemove(),n.isPresent!==l&&(l?c.promote():c.relegate()||Ot.postRender(()=>{const d=c.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:n}=this.props.visualElement;n&&(n.root.didUpdate(),Ih.postRender(()=>{!n.currentAnimation&&n.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:n,layoutGroup:s,switchLayoutGroup:a}=this.props,{projection:i}=n;ef=!0,i&&(i.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(i),a&&a.deregister&&a.deregister(i))}safeToRemove(){const{safeToRemove:n}=this.props;n&&n()}render(){return null}}function Kb(e){const[n,s]=pb(),a=j.useContext(hh);return t.jsx(pj,{...e,layoutGroup:a,switchLayoutGroup:j.useContext(Cb),isPresent:n,safeToRemove:s})}function mj(e,n,s){const a=En(e)?e:vi(e);return a.start(Wh("",a,n,s)),a.animation}const xj=(e,n)=>e.depth-n.depth;class gj{constructor(){this.children=[],this.isDirty=!1}add(n){xh(this.children,n),this.isDirty=!0}remove(n){gh(this.children,n),this.isDirty=!0}forEach(n){this.isDirty&&this.children.sort(xj),this.isDirty=!1,this.children.forEach(n)}}function bj(e,n){const s=Qn.now(),a=({timestamp:i})=>{const l=i-s;l>=n&&(Lr(a),e(l-n))};return Ot.setup(a,!0),()=>Lr(a)}const Gb=["TopLeft","TopRight","BottomLeft","BottomRight"],vj=Gb.length,Lx=e=>typeof e=="string"?parseFloat(e):e,zx=e=>typeof e=="number"||at.test(e);function yj(e,n,s,a,i,l){i?(e.opacity=Wt(0,s.opacity??1,wj(a)),e.opacityExit=Wt(n.opacity??1,0,Sj(a))):l&&(e.opacity=Wt(n.opacity??1,s.opacity??1,a));for(let c=0;c<vj;c++){const d=`border${Gb[c]}Radius`;let u=Ox(n,d),m=Ox(s,d);if(u===void 0&&m===void 0)continue;u||(u=0),m||(m=0),u===0||m===0||zx(u)===zx(m)?(e[d]=Math.max(Wt(Lx(u),Lx(m),a),0),(Gs.test(m)||Gs.test(u))&&(e[d]+="%")):e[d]=m}(n.rotate||s.rotate)&&(e.rotate=Wt(n.rotate||0,s.rotate||0,a))}function Ox(e,n){return e[n]!==void 0?e[n]:e.borderRadius}const wj=Yb(0,.5,M1),Sj=Yb(.5,.95,gs);function Yb(e,n,s){return a=>a<e?0:a>n?1:s(jo(e,n,a))}function $x(e,n){e.min=n.min,e.max=n.max}function _s(e,n){$x(e.x,n.x),$x(e.y,n.y)}function Vx(e,n){e.translate=n.translate,e.scale=n.scale,e.originPoint=n.originPoint,e.origin=n.origin}function Hx(e,n,s,a,i){return e-=n,e=kc(e,1/s,a),i!==void 0&&(e=kc(e,1/i,a)),e}function kj(e,n=0,s=1,a=.5,i,l=e,c=e){if(Gs.test(n)&&(n=parseFloat(n),n=Wt(c.min,c.max,n/100)-c.min),typeof n!="number")return;let d=Wt(l.min,l.max,a);e===l&&(d-=n),e.min=Hx(e.min,n,s,d,i),e.max=Hx(e.max,n,s,d,i)}function Ux(e,n,[s,a,i],l,c){kj(e,n[s],n[a],n[i],n.scale,l,c)}const jj=["x","scaleX","originX"],Nj=["y","scaleY","originY"];function Wx(e,n,s,a){Ux(e.x,n,jj,s?s.x:void 0,a?a.x:void 0),Ux(e.y,n,Nj,s?s.y:void 0,a?a.y:void 0)}function Kx(e){return e.translate===0&&e.scale===1}function qb(e){return Kx(e.x)&&Kx(e.y)}function Gx(e,n){return e.min===n.min&&e.max===n.max}function Cj(e,n){return Gx(e.x,n.x)&&Gx(e.y,n.y)}function Yx(e,n){return Math.round(e.min)===Math.round(n.min)&&Math.round(e.max)===Math.round(n.max)}function Zb(e,n){return Yx(e.x,n.x)&&Yx(e.y,n.y)}function qx(e){return Ln(e.x)/Ln(e.y)}function Zx(e,n){return e.translate===n.translate&&e.scale===n.scale&&e.originPoint===n.originPoint}class _j{constructor(){this.members=[]}add(n){xh(this.members,n),n.scheduleRender()}remove(n){if(gh(this.members,n),n===this.prevLead&&(this.prevLead=void 0),n===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(n){const s=this.members.findIndex(i=>n===i);if(s===0)return!1;let a;for(let i=s;i>=0;i--){const l=this.members[i];if(l.isPresent!==!1){a=l;break}}return a?(this.promote(a),!0):!1}promote(n,s){const a=this.lead;if(n!==a&&(this.prevLead=a,this.lead=n,n.show(),a)){a.instance&&a.scheduleRender(),n.scheduleRender(),n.resumeFrom=a,s&&(n.resumeFrom.preserveOpacity=!0),a.snapshot&&(n.snapshot=a.snapshot,n.snapshot.latestValues=a.animationValues||a.latestValues),n.root&&n.root.isUpdating&&(n.isLayoutDirty=!0);const{crossfade:i}=n.options;i===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(n=>{const{options:s,resumingFrom:a}=n;s.onExitComplete&&s.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(n=>{n.instance&&n.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Aj(e,n,s){let a="";const i=e.x.translate/n.x,l=e.y.translate/n.y,c=s?.z||0;if((i||l||c)&&(a=`translate3d(${i}px, ${l}px, ${c}px) `),(n.x!==1||n.y!==1)&&(a+=`scale(${1/n.x}, ${1/n.y}) `),s){const{transformPerspective:m,rotate:p,rotateX:f,rotateY:x,skewX:b,skewY:y}=s;m&&(a=`perspective(${m}px) ${a}`),p&&(a+=`rotate(${p}deg) `),f&&(a+=`rotateX(${f}deg) `),x&&(a+=`rotateY(${x}deg) `),b&&(a+=`skewX(${b}deg) `),y&&(a+=`skewY(${y}deg) `)}const d=e.x.scale*n.x,u=e.y.scale*n.y;return(d!==1||u!==1)&&(a+=`scale(${d}, ${u})`),a||"none"}const tf=["","X","Y","Z"],Ej=1e3;let Tj=0;function nf(e,n,s,a){const{latestValues:i}=n;i[e]&&(s[e]=i[e],n.setStaticValue(e,0),a&&(a[e]=0))}function Qb(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:n}=e.options;if(!n)return;const s=Rb(n);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:i,layoutId:l}=e.options;window.MotionCancelOptimisedAnimation(s,"transform",Ot,!(i||l))}const{parent:a}=e;a&&!a.hasCheckedOptimisedAppear&&Qb(a)}function Xb({attachResizeListener:e,defaultParent:n,measureScroll:s,checkIsScrollRoot:a,resetTransform:i}){return class{constructor(c={},d=n?.()){this.id=Tj++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Mj),this.nodes.forEach(Bj),this.nodes.forEach(Lj),this.nodes.forEach(Ij)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new gj)}addEventListener(c,d){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new yh),this.eventHandlers.get(c).add(d)}notifyListeners(c,...d){const u=this.eventHandlers.get(c);u&&u.notify(...d)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=hb(c)&&!SS(c),this.instance=c;const{layoutId:d,layout:u,visualElement:m}=this.options;if(m&&!m.current&&m.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||d)&&(this.isLayoutDirty=!0),e){let p,f=0;const x=()=>this.root.updateBlockedByResize=!1;Ot.read(()=>{f=window.innerWidth}),e(c,()=>{const b=window.innerWidth;b!==f&&(f=b,this.root.updateBlockedByResize=!0,p&&p(),p=bj(x,250),fc.hasAnimatedSinceResize&&(fc.hasAnimatedSinceResize=!1,this.nodes.forEach(Jx)))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&m&&(d||u)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:f,hasRelativeLayoutChanged:x,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||m.getDefaultTransition()||Hj,{onLayoutAnimationStart:g,onLayoutAnimationComplete:k}=m.getProps(),w=!this.targetLayout||!Zb(this.targetLayout,b),C=!f&&x;if(this.options.layoutRoot||this.resumeFrom||C||f&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const N={...Fh(y,"layout"),onPlay:g,onComplete:k};(m.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N),this.setAnimationOrigin(p,C)}else f||Jx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Lr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(zj),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Qb(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const f=this.path[p];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:d,layout:u}=this.options;if(d===void 0&&!u)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Qx);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Xx);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Rj),this.nodes.forEach(Dj),this.nodes.forEach(Fj)):this.nodes.forEach(Xx),this.clearAllSnapshots();const d=Qn.now();wn.delta=cr(0,1e3/60,d-wn.timestamp),wn.timestamp=d,wn.isProcessing=!0,Uu.update.process(wn),Uu.preRender.process(wn),Uu.render.process(wn),wn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Ih.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Pj),this.sharedNodes.forEach(Oj)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ot.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ot.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ln(this.snapshot.measuredBox.x)&&!Ln(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=hn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(d=!1),d&&this.instance){const u=a(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:u,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!qb(this.projectionDelta),u=this.getTransformTemplate(),m=u?u(this.latestValues,""):void 0,p=m!==this.prevTransformTemplateValue;c&&this.instance&&(d||fa(this.latestValues)||p)&&(i(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const d=this.measurePageBox();let u=this.removeElementScroll(d);return c&&(u=this.removeTransform(u)),Uj(u),{animationId:this.root.animationId,measuredBox:d,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return hn();const d=c.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Wj))){const{scroll:m}=this.root;m&&(ci(d.x,m.offset.x),ci(d.y,m.offset.y))}return d}removeElementScroll(c){const d=hn();if(_s(d,c),this.scroll?.wasRoot)return d;for(let u=0;u<this.path.length;u++){const m=this.path[u],{scroll:p,options:f}=m;m!==this.root&&p&&f.layoutScroll&&(p.wasRoot&&_s(d,c),ci(d.x,p.offset.x),ci(d.y,p.offset.y))}return d}applyTransform(c,d=!1){const u=hn();_s(u,c);for(let m=0;m<this.path.length;m++){const p=this.path[m];!d&&p.options.layoutScroll&&p.scroll&&p!==p.root&&di(u,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),fa(p.latestValues)&&di(u,p.latestValues)}return fa(this.latestValues)&&di(u,this.latestValues),u}removeTransform(c){const d=hn();_s(d,c);for(let u=0;u<this.path.length;u++){const m=this.path[u];if(!m.instance||!fa(m.latestValues))continue;zf(m.latestValues)&&m.updateSnapshot();const p=hn(),f=m.measurePageBox();_s(p,f),Wx(d,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,p)}return fa(this.latestValues)&&Wx(d,this.latestValues),d}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==wn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==d;if(!(c||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:f}=this.options;if(!this.layout||!(p||f))return;this.resolvedRelativeTargetAt=wn.timestamp;const x=this.getClosestProjectingParent();x&&this.linkedParentVersion!==x.layoutVersion&&!x.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(x&&x.layout?this.createRelativeTarget(x,this.layout.layoutBox,x.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=hn(),this.targetWithTransforms=hn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Jk(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):_s(this.target,this.layout.layoutBox),Tb(this.target,this.targetDelta)):_s(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?this.createRelativeTarget(x,this.target,x.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||zf(this.parent.latestValues)||Eb(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(c,d,u){this.relativeParent=c,this.linkedParentVersion=c.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hn(),this.relativeTargetOrigin=hn(),jc(this.relativeTargetOrigin,d,u),_s(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const c=this.getLead(),d=!!this.resumingFrom||this!==c;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===wn.timestamp&&(u=!1),u)return;const{layout:m,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||p))return;_s(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,x=this.treeScale.y;uk(this.layoutCorrected,this.treeScale,this.path,d),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=hn());const{target:b}=c;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Vx(this.prevProjectionDelta.x,this.projectionDelta.x),Vx(this.prevProjectionDelta.y,this.projectionDelta.y)),ko(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==x||!Zx(this.projectionDelta.x,this.prevProjectionDelta.x)||!Zx(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.visualElement?.scheduleRender(),c){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ui(),this.projectionDelta=ui(),this.projectionDeltaWithTransform=ui()}setAnimationOrigin(c,d=!1){const u=this.snapshot,m=u?u.latestValues:{},p={...this.latestValues},f=ui();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const x=hn(),b=u?u.source:void 0,y=this.layout?this.layout.source:void 0,g=b!==y,k=this.getStack(),w=!k||k.members.length<=1,C=!!(g&&!w&&this.options.crossfade===!0&&!this.path.some(Vj));this.animationProgress=0;let N;this.mixTargetDelta=A=>{const P=A/1e3;eg(f.x,c.x,P),eg(f.y,c.y,P),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(jc(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),$j(this.relativeTarget,this.relativeTargetOrigin,x,P),N&&Cj(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=hn()),_s(N,this.relativeTarget)),g&&(this.animationValues=p,yj(p,m,this.latestValues,P,C,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Lr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ot.update(()=>{fc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=vi(0)),this.currentAnimation=mj(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),c.onUpdate&&c.onUpdate(d)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Ej),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:d,target:u,layout:m,latestValues:p}=c;if(!(!d||!u||!m)){if(this!==c&&this.layout&&m&&Jb(this.options.animationType,this.layout.layoutBox,m.layoutBox)){u=this.target||hn();const f=Ln(this.layout.layoutBox.x);u.x.min=c.target.x.min,u.x.max=u.x.min+f;const x=Ln(this.layout.layoutBox.y);u.y.min=c.target.y.min,u.y.max=u.y.min+x}_s(d,u),di(d,p),ko(this.projectionDeltaWithTransform,this.layoutCorrected,d,p)}}registerSharedNode(c,d){this.sharedNodes.has(c)||this.sharedNodes.set(c,new _j),this.sharedNodes.get(c).add(d);const m=d.options.initialPromotionConfig;d.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(d):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){const{layoutId:c}=this.options;return c?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:c}=this.options;return c?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:d,preserveFollowOpacity:u}={}){const m=this.getStack();m&&m.promote(this,u),c&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let d=!1;const{latestValues:u}=c;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(d=!0),!d)return;const m={};u.z&&nf("z",c,m,this.animationValues);for(let p=0;p<tf.length;p++)nf(`rotate${tf[p]}`,c,m,this.animationValues),nf(`skew${tf[p]}`,c,m,this.animationValues);c.render();for(const p in m)c.setStaticValue(p,m[p]),this.animationValues&&(this.animationValues[p]=m[p]);c.scheduleRender()}applyProjectionStyles(c,d){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=uc(d?.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none";return}const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=uc(d?.pointerEvents)||""),this.hasProjected&&!fa(this.latestValues)&&(c.transform=u?u({},""):"none",this.hasProjected=!1);return}c.visibility="";const p=m.animationValues||m.latestValues;this.applyTransformsToTarget();let f=Aj(this.projectionDeltaWithTransform,this.treeScale,p);u&&(f=u(p,f)),c.transform=f;const{x,y:b}=this.projectionDelta;c.transformOrigin=`${x.origin*100}% ${b.origin*100}% 0`,m.animationValues?c.opacity=m===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=m===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const y in Lf){if(p[y]===void 0)continue;const{correct:g,applyTo:k,isCSSVariable:w}=Lf[y],C=f==="none"?p[y]:g(p[y],m);if(k){const N=k.length;for(let A=0;A<N;A++)c[k[A]]=C}else w?this.options.visualElement.renderState.vars[y]=C:c[y]=C}this.options.layoutId&&(c.pointerEvents=m===this?uc(d?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>c.currentAnimation?.stop()),this.root.nodes.forEach(Qx),this.root.sharedNodes.clear()}}}function Dj(e){e.updateLayout()}function Fj(e){const n=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:a}=e.layout,{animationType:i}=e.options,l=n.source!==e.layout.source;i==="size"?ms(p=>{const f=l?n.measuredBox[p]:n.layoutBox[p],x=Ln(f);f.min=s[p].min,f.max=f.min+x}):Jb(i,n.layoutBox,s)&&ms(p=>{const f=l?n.measuredBox[p]:n.layoutBox[p],x=Ln(s[p]);f.max=f.min+x,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[p].max=e.relativeTarget[p].min+x)});const c=ui();ko(c,s,n.layoutBox);const d=ui();l?ko(d,e.applyTransform(a,!0),n.measuredBox):ko(d,s,n.layoutBox);const u=!qb(c);let m=!1;if(!e.resumeFrom){const p=e.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:f,layout:x}=p;if(f&&x){const b=hn();jc(b,n.layoutBox,f.layoutBox);const y=hn();jc(y,s,x.layoutBox),Zb(b,y)||(m=!0),p.options.layoutRoot&&(e.relativeTarget=y,e.relativeTargetOrigin=b,e.relativeParent=p)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:d,layoutDelta:c,hasLayoutChanged:u,hasRelativeLayoutChanged:m})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function Mj(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Ij(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Pj(e){e.clearSnapshot()}function Qx(e){e.clearMeasurements()}function Xx(e){e.isLayoutDirty=!1}function Rj(e){const{visualElement:n}=e.options;n&&n.getProps().onBeforeLayoutMeasure&&n.notify("BeforeLayoutMeasure"),e.resetTransform()}function Jx(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Bj(e){e.resolveTargetDelta()}function Lj(e){e.calcProjection()}function zj(e){e.resetSkewAndRotation()}function Oj(e){e.removeLeadSnapshot()}function eg(e,n,s){e.translate=Wt(n.translate,0,s),e.scale=Wt(n.scale,1,s),e.origin=n.origin,e.originPoint=n.originPoint}function tg(e,n,s,a){e.min=Wt(n.min,s.min,a),e.max=Wt(n.max,s.max,a)}function $j(e,n,s,a){tg(e.x,n.x,s.x,a),tg(e.y,n.y,s.y,a)}function Vj(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Hj={duration:.45,ease:[.4,0,.1,1]},ng=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),sg=ng("applewebkit/")&&!ng("chrome/")?Math.round:gs;function rg(e){e.min=sg(e.min),e.max=sg(e.max)}function Uj(e){rg(e.x),rg(e.y)}function Jb(e,n,s){return e==="position"||e==="preserve-aspect"&&!Xk(qx(n),qx(s),.2)}function Wj(e){return e!==e.root&&e.scroll?.wasRoot}const Kj=Xb({attachResizeListener:(e,n)=>Ao(e,"resize",n),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),sf={current:void 0},e2=Xb({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!sf.current){const e=new Kj({});e.mount(window),e.setOptions({layoutScroll:!0}),sf.current=e}return sf.current},resetTransform:(e,n)=>{e.style.transform=n!==void 0?n:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Gj={pan:{Feature:hj},drag:{Feature:fj,ProjectionNode:e2,MeasureLayout:Kb}};function ag(e,n,s){const{props:a}=e;e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",s==="Start");const i="onHover"+s,l=a[i];l&&Ot.postRender(()=>l(n,Po(n)))}class Yj extends Vr{mount(){const{current:n}=this.node;n&&(this.unmount=gS(n,(s,a)=>(ag(this.node,a,"Start"),i=>ag(this.node,i,"End"))))}unmount(){}}class qj extends Vr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let n=!1;try{n=this.node.current.matches(":focus-visible")}catch{n=!0}!n||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Fo(Ao(this.node.current,"focus",()=>this.onFocus()),Ao(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function ig(e,n,s){const{props:a}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&a.whileTap&&e.animationState.setActive("whileTap",s==="Start");const i="onTap"+(s==="End"?"":s),l=a[i];l&&Ot.postRender(()=>l(n,Po(n)))}class Zj extends Vr{mount(){const{current:n}=this.node;n&&(this.unmount=wS(n,(s,a)=>(ig(this.node,a,"Start"),(i,{success:l})=>ig(this.node,i,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Kf=new WeakMap,rf=new WeakMap,Qj=e=>{const n=Kf.get(e.target);n&&n(e)},Xj=e=>{e.forEach(Qj)};function Jj({root:e,...n}){const s=e||document;rf.has(s)||rf.set(s,{});const a=rf.get(s),i=JSON.stringify(n);return a[i]||(a[i]=new IntersectionObserver(Xj,{root:e,...n})),a[i]}function eN(e,n,s){const a=Jj(n);return Kf.set(e,s),a.observe(e),()=>{Kf.delete(e),a.unobserve(e)}}const tN={some:0,all:1};class nN extends Vr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:n={}}=this.node.getProps(),{root:s,margin:a,amount:i="some",once:l}=n,c={root:s?s.current:void 0,rootMargin:a,threshold:typeof i=="number"?i:tN[i]},d=u=>{const{isIntersecting:m}=u;if(this.isInView===m||(this.isInView=m,l&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:p,onViewportLeave:f}=this.node.getProps(),x=m?p:f;x&&x(u)};return eN(this.node.current,c,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:n,prevProps:s}=this.node;["amount","margin","root"].some(sN(n,s))&&this.startObserver()}unmount(){}}function sN({viewport:e={}},{viewport:n={}}={}){return s=>e[s]!==n[s]}const rN={inView:{Feature:nN},tap:{Feature:Zj},focus:{Feature:qj},hover:{Feature:Yj}},aN={layout:{ProjectionNode:e2,MeasureLayout:Kb}},iN={...Kk,...rN,...Gj,...aN},xe=lk(iN,wk),Kh="/assets/5f8732ee23725e4e0895553baa1c8e03e361ca7a-DtxtzMCA.png";function oN(e,n){const s=j.createContext(n),a=l=>{const{children:c,...d}=l,u=j.useMemo(()=>d,Object.values(d));return t.jsx(s.Provider,{value:u,children:c})};a.displayName=e+"Provider";function i(l){const c=j.useContext(s);if(c)return c;if(n!==void 0)return n;throw new Error(`\`${l}\` must be used within \`${e}\``)}return[a,i]}function Ci(e,n=[]){let s=[];function a(l,c){const d=j.createContext(c),u=s.length;s=[...s,c];const m=f=>{const{scope:x,children:b,...y}=f,g=x?.[e]?.[u]||d,k=j.useMemo(()=>y,Object.values(y));return t.jsx(g.Provider,{value:k,children:b})};m.displayName=l+"Provider";function p(f,x){const b=x?.[e]?.[u]||d,y=j.useContext(b);if(y)return y;if(c!==void 0)return c;throw new Error(`\`${f}\` must be used within \`${l}\``)}return[m,p]}const i=()=>{const l=s.map(c=>j.createContext(c));return function(d){const u=d?.[e]||l;return j.useMemo(()=>({[`__scope${e}`]:{...d,[e]:u}}),[d,u])}};return i.scopeName=e,[a,lN(i,...n)]}function lN(...e){const n=e[0];if(e.length===1)return n;const s=()=>{const a=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(l){const c=a.reduce((d,{useScope:u,scopeName:m})=>{const f=u(l)[`__scope${m}`];return{...d,...f}},{});return j.useMemo(()=>({[`__scope${n.scopeName}`]:c}),[c])}};return s.scopeName=n.scopeName,s}function og(e,n){if(typeof e=="function")return e(n);e!=null&&(e.current=n)}function Ro(...e){return n=>{let s=!1;const a=e.map(i=>{const l=og(i,n);return!s&&typeof l=="function"&&(s=!0),l});if(s)return()=>{for(let i=0;i<a.length;i++){const l=a[i];typeof l=="function"?l():og(e[i],null)}}}}function Bt(...e){return j.useCallback(Ro(...e),e)}function Tt(e,n,{checkForDefaultPrevented:s=!0}={}){return function(i){if(e?.(i),s===!1||!i.defaultPrevented)return n?.(i)}}var Tn=globalThis?.document?j.useLayoutEffect:()=>{},cN=w1[" useId ".trim().toString()]||(()=>{}),dN=0;function pi(e){const[n,s]=j.useState(cN());return Tn(()=>{s(a=>a??String(dN++))},[e]),e||(n?`radix-${n}`:"")}var uN=w1[" useInsertionEffect ".trim().toString()]||Tn;function Nc({prop:e,defaultProp:n,onChange:s=()=>{},caller:a}){const[i,l,c]=fN({defaultProp:n,onChange:s}),d=e!==void 0,u=d?e:i;{const p=j.useRef(e!==void 0);j.useEffect(()=>{const f=p.current;f!==d&&console.warn(`${a} is changing from ${f?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=d},[d,a])}const m=j.useCallback(p=>{if(d){const f=hN(p)?p(e):p;f!==e&&c.current?.(f)}else l(p)},[d,e,l,c]);return[u,m]}function fN({defaultProp:e,onChange:n}){const[s,a]=j.useState(e),i=j.useRef(s),l=j.useRef(n);return uN(()=>{l.current=n},[n]),j.useEffect(()=>{i.current!==s&&(l.current?.(s),i.current=s)},[s,i]),[s,a,l]}function hN(e){return typeof e=="function"}var Us=y1();const t2=$c(Us);function pN(e){const n=mN(e),s=j.forwardRef((a,i)=>{const{children:l,...c}=a,d=j.Children.toArray(l),u=d.find(gN);if(u){const m=u.props.children,p=d.map(f=>f===u?j.Children.count(m)>1?j.Children.only(null):j.isValidElement(m)?m.props.children:null:f);return t.jsx(n,{...c,ref:i,children:j.isValidElement(m)?j.cloneElement(m,void 0,p):null})}return t.jsx(n,{...c,ref:i,children:l})});return s.displayName=`${e}.Slot`,s}function mN(e){const n=j.forwardRef((s,a)=>{const{children:i,...l}=s;if(j.isValidElement(i)){const c=vN(i),d=bN(l,i.props);return i.type!==j.Fragment&&(d.ref=a?Ro(a,c):c),j.cloneElement(i,d)}return j.Children.count(i)>1?j.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var xN=Symbol("radix.slottable");function gN(e){return j.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===xN}function bN(e,n){const s={...n};for(const a in n){const i=e[a],l=n[a];/^on[A-Z]/.test(a)?i&&l?s[a]=(...d)=>{const u=l(...d);return i(...d),u}:i&&(s[a]=i):a==="style"?s[a]={...i,...l}:a==="className"&&(s[a]=[i,l].filter(Boolean).join(" "))}return{...e,...s}}function vN(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var yN=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Nt=yN.reduce((e,n)=>{const s=pN(`Primitive.${n}`),a=j.forwardRef((i,l)=>{const{asChild:c,...d}=i,u=c?s:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(u,{...d,ref:l})});return a.displayName=`Primitive.${n}`,{...e,[n]:a}},{});function wN(e,n){e&&Us.flushSync(()=>e.dispatchEvent(n))}function ya(e){const n=j.useRef(e);return j.useEffect(()=>{n.current=e}),j.useMemo(()=>(...s)=>n.current?.(...s),[])}function SN(e,n=globalThis?.document){const s=ya(e);j.useEffect(()=>{const a=i=>{i.key==="Escape"&&s(i)};return n.addEventListener("keydown",a,{capture:!0}),()=>n.removeEventListener("keydown",a,{capture:!0})},[s,n])}var kN="DismissableLayer",Gf="dismissableLayer.update",jN="dismissableLayer.pointerDownOutside",NN="dismissableLayer.focusOutside",lg,n2=j.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Gh=j.forwardRef((e,n)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:l,onInteractOutside:c,onDismiss:d,...u}=e,m=j.useContext(n2),[p,f]=j.useState(null),x=p?.ownerDocument??globalThis?.document,[,b]=j.useState({}),y=Bt(n,$=>f($)),g=Array.from(m.layers),[k]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),w=g.indexOf(k),C=p?g.indexOf(p):-1,N=m.layersWithOutsidePointerEventsDisabled.size>0,A=C>=w,P=AN($=>{const D=$.target,T=[...m.branches].some(H=>H.contains(D));!A||T||(i?.($),c?.($),$.defaultPrevented||d?.())},x),B=EN($=>{const D=$.target;[...m.branches].some(H=>H.contains(D))||(l?.($),c?.($),$.defaultPrevented||d?.())},x);return SN($=>{C===m.layers.size-1&&(a?.($),!$.defaultPrevented&&d&&($.preventDefault(),d()))},x),j.useEffect(()=>{if(p)return s&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(lg=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(p)),m.layers.add(p),cg(),()=>{s&&m.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=lg)}},[p,x,s,m]),j.useEffect(()=>()=>{p&&(m.layers.delete(p),m.layersWithOutsidePointerEventsDisabled.delete(p),cg())},[p,m]),j.useEffect(()=>{const $=()=>b({});return document.addEventListener(Gf,$),()=>document.removeEventListener(Gf,$)},[]),t.jsx(Nt.div,{...u,ref:y,style:{pointerEvents:N?A?"auto":"none":void 0,...e.style},onFocusCapture:Tt(e.onFocusCapture,B.onFocusCapture),onBlurCapture:Tt(e.onBlurCapture,B.onBlurCapture),onPointerDownCapture:Tt(e.onPointerDownCapture,P.onPointerDownCapture)})});Gh.displayName=kN;var CN="DismissableLayerBranch",_N=j.forwardRef((e,n)=>{const s=j.useContext(n2),a=j.useRef(null),i=Bt(n,a);return j.useEffect(()=>{const l=a.current;if(l)return s.branches.add(l),()=>{s.branches.delete(l)}},[s.branches]),t.jsx(Nt.div,{...e,ref:i})});_N.displayName=CN;function AN(e,n=globalThis?.document){const s=ya(e),a=j.useRef(!1),i=j.useRef(()=>{});return j.useEffect(()=>{const l=d=>{if(d.target&&!a.current){let u=function(){s2(jN,s,m,{discrete:!0})};const m={originalEvent:d};d.pointerType==="touch"?(n.removeEventListener("click",i.current),i.current=u,n.addEventListener("click",i.current,{once:!0})):u()}else n.removeEventListener("click",i.current);a.current=!1},c=window.setTimeout(()=>{n.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(c),n.removeEventListener("pointerdown",l),n.removeEventListener("click",i.current)}},[n,s]),{onPointerDownCapture:()=>a.current=!0}}function EN(e,n=globalThis?.document){const s=ya(e),a=j.useRef(!1);return j.useEffect(()=>{const i=l=>{l.target&&!a.current&&s2(NN,s,{originalEvent:l},{discrete:!1})};return n.addEventListener("focusin",i),()=>n.removeEventListener("focusin",i)},[n,s]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function cg(){const e=new CustomEvent(Gf);document.dispatchEvent(e)}function s2(e,n,s,{discrete:a}){const i=s.originalEvent.target,l=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});n&&i.addEventListener(e,n,{once:!0}),a?wN(i,l):i.dispatchEvent(l)}var af="focusScope.autoFocusOnMount",of="focusScope.autoFocusOnUnmount",dg={bubbles:!1,cancelable:!0},TN="FocusScope",Yh=j.forwardRef((e,n)=>{const{loop:s=!1,trapped:a=!1,onMountAutoFocus:i,onUnmountAutoFocus:l,...c}=e,[d,u]=j.useState(null),m=ya(i),p=ya(l),f=j.useRef(null),x=Bt(n,g=>u(g)),b=j.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;j.useEffect(()=>{if(a){let g=function(N){if(b.paused||!d)return;const A=N.target;d.contains(A)?f.current=A:Rr(f.current,{select:!0})},k=function(N){if(b.paused||!d)return;const A=N.relatedTarget;A!==null&&(d.contains(A)||Rr(f.current,{select:!0}))},w=function(N){if(document.activeElement===document.body)for(const P of N)P.removedNodes.length>0&&Rr(d)};document.addEventListener("focusin",g),document.addEventListener("focusout",k);const C=new MutationObserver(w);return d&&C.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",k),C.disconnect()}}},[a,d,b.paused]),j.useEffect(()=>{if(d){fg.add(b);const g=document.activeElement;if(!d.contains(g)){const w=new CustomEvent(af,dg);d.addEventListener(af,m),d.dispatchEvent(w),w.defaultPrevented||(DN(RN(r2(d)),{select:!0}),document.activeElement===g&&Rr(d))}return()=>{d.removeEventListener(af,m),setTimeout(()=>{const w=new CustomEvent(of,dg);d.addEventListener(of,p),d.dispatchEvent(w),w.defaultPrevented||Rr(g??document.body,{select:!0}),d.removeEventListener(of,p),fg.remove(b)},0)}}},[d,m,p,b]);const y=j.useCallback(g=>{if(!s&&!a||b.paused)return;const k=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,w=document.activeElement;if(k&&w){const C=g.currentTarget,[N,A]=FN(C);N&&A?!g.shiftKey&&w===A?(g.preventDefault(),s&&Rr(N,{select:!0})):g.shiftKey&&w===N&&(g.preventDefault(),s&&Rr(A,{select:!0})):w===C&&g.preventDefault()}},[s,a,b.paused]);return t.jsx(Nt.div,{tabIndex:-1,...c,ref:x,onKeyDown:y})});Yh.displayName=TN;function DN(e,{select:n=!1}={}){const s=document.activeElement;for(const a of e)if(Rr(a,{select:n}),document.activeElement!==s)return}function FN(e){const n=r2(e),s=ug(n,e),a=ug(n.reverse(),e);return[s,a]}function r2(e){const n=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const i=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||i?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)n.push(s.currentNode);return n}function ug(e,n){for(const s of e)if(!MN(s,{upTo:n}))return s}function MN(e,{upTo:n}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(n!==void 0&&e===n)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function IN(e){return e instanceof HTMLInputElement&&"select"in e}function Rr(e,{select:n=!1}={}){if(e&&e.focus){const s=document.activeElement;e.focus({preventScroll:!0}),e!==s&&IN(e)&&n&&e.select()}}var fg=PN();function PN(){let e=[];return{add(n){const s=e[0];n!==s&&s?.pause(),e=hg(e,n),e.unshift(n)},remove(n){e=hg(e,n),e[0]?.resume()}}}function hg(e,n){const s=[...e],a=s.indexOf(n);return a!==-1&&s.splice(a,1),s}function RN(e){return e.filter(n=>n.tagName!=="A")}var BN="Portal",qh=j.forwardRef((e,n)=>{const{container:s,...a}=e,[i,l]=j.useState(!1);Tn(()=>l(!0),[]);const c=s||i&&globalThis?.document?.body;return c?t2.createPortal(t.jsx(Nt.div,{...a,ref:n}),c):null});qh.displayName=BN;function LN(e,n){return j.useReducer((s,a)=>n[s][a]??s,e)}var Kc=e=>{const{present:n,children:s}=e,a=zN(n),i=typeof s=="function"?s({present:a.isPresent}):j.Children.only(s),l=Bt(a.ref,ON(i));return typeof s=="function"||a.isPresent?j.cloneElement(i,{ref:l}):null};Kc.displayName="Presence";function zN(e){const[n,s]=j.useState(),a=j.useRef(null),i=j.useRef(e),l=j.useRef("none"),c=e?"mounted":"unmounted",[d,u]=LN(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return j.useEffect(()=>{const m=Ql(a.current);l.current=d==="mounted"?m:"none"},[d]),Tn(()=>{const m=a.current,p=i.current;if(p!==e){const x=l.current,b=Ql(m);e?u("MOUNT"):b==="none"||m?.display==="none"?u("UNMOUNT"):u(p&&x!==b?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,u]),Tn(()=>{if(n){let m;const p=n.ownerDocument.defaultView??window,f=b=>{const g=Ql(a.current).includes(CSS.escape(b.animationName));if(b.target===n&&g&&(u("ANIMATION_END"),!i.current)){const k=n.style.animationFillMode;n.style.animationFillMode="forwards",m=p.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=k)})}},x=b=>{b.target===n&&(l.current=Ql(a.current))};return n.addEventListener("animationstart",x),n.addEventListener("animationcancel",f),n.addEventListener("animationend",f),()=>{p.clearTimeout(m),n.removeEventListener("animationstart",x),n.removeEventListener("animationcancel",f),n.removeEventListener("animationend",f)}}else u("ANIMATION_END")},[n,u]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:j.useCallback(m=>{a.current=m?getComputedStyle(m):null,s(m)},[])}}function Ql(e){return e?.animationName||"none"}function ON(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var lf=0;function a2(){j.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??pg()),document.body.insertAdjacentElement("beforeend",e[1]??pg()),lf++,()=>{lf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),lf--}},[])}function pg(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Hs=function(){return Hs=Object.assign||function(n){for(var s,a=1,i=arguments.length;a<i;a++){s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(n[l]=s[l])}return n},Hs.apply(this,arguments)};function i2(e,n){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)n.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(s[a[i]]=e[a[i]]);return s}function $N(e,n,s){if(s||arguments.length===2)for(var a=0,i=n.length,l;a<i;a++)(l||!(a in n))&&(l||(l=Array.prototype.slice.call(n,0,a)),l[a]=n[a]);return e.concat(l||Array.prototype.slice.call(n))}var hc="right-scroll-bar-position",pc="width-before-scroll-bar",VN="with-scroll-bars-hidden",HN="--removed-body-scroll-bar-size";function cf(e,n){return typeof e=="function"?e(n):e&&(e.current=n),e}function UN(e,n){var s=j.useState(function(){return{value:e,callback:n,facade:{get current(){return s.value},set current(a){var i=s.value;i!==a&&(s.value=a,s.callback(a,i))}}}})[0];return s.callback=n,s.facade}var WN=typeof window<"u"?j.useLayoutEffect:j.useEffect,mg=new WeakMap;function KN(e,n){var s=UN(null,function(a){return e.forEach(function(i){return cf(i,a)})});return WN(function(){var a=mg.get(s);if(a){var i=new Set(a),l=new Set(e),c=s.current;i.forEach(function(d){l.has(d)||cf(d,null)}),l.forEach(function(d){i.has(d)||cf(d,c)})}mg.set(s,e)},[e]),s}function GN(e){return e}function YN(e,n){n===void 0&&(n=GN);var s=[],a=!1,i={read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:e},useMedium:function(l){var c=n(l,a);return s.push(c),function(){s=s.filter(function(d){return d!==c})}},assignSyncMedium:function(l){for(a=!0;s.length;){var c=s;s=[],c.forEach(l)}s={push:function(d){return l(d)},filter:function(){return s}}},assignMedium:function(l){a=!0;var c=[];if(s.length){var d=s;s=[],d.forEach(l),c=s}var u=function(){var p=c;c=[],p.forEach(l)},m=function(){return Promise.resolve().then(u)};m(),s={push:function(p){c.push(p),m()},filter:function(p){return c=c.filter(p),s}}}};return i}function qN(e){e===void 0&&(e={});var n=YN(null);return n.options=Hs({async:!0,ssr:!1},e),n}var o2=function(e){var n=e.sideCar,s=i2(e,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=n.read();if(!a)throw new Error("Sidecar medium not found");return j.createElement(a,Hs({},s))};o2.isSideCarExport=!0;function ZN(e,n){return e.useMedium(n),o2}var l2=qN(),df=function(){},Gc=j.forwardRef(function(e,n){var s=j.useRef(null),a=j.useState({onScrollCapture:df,onWheelCapture:df,onTouchMoveCapture:df}),i=a[0],l=a[1],c=e.forwardProps,d=e.children,u=e.className,m=e.removeScrollBar,p=e.enabled,f=e.shards,x=e.sideCar,b=e.noRelative,y=e.noIsolation,g=e.inert,k=e.allowPinchZoom,w=e.as,C=w===void 0?"div":w,N=e.gapMode,A=i2(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=x,B=KN([s,n]),$=Hs(Hs({},A),i);return j.createElement(j.Fragment,null,p&&j.createElement(P,{sideCar:l2,removeScrollBar:m,shards:f,noRelative:b,noIsolation:y,inert:g,setCallbacks:l,allowPinchZoom:!!k,lockRef:s,gapMode:N}),c?j.cloneElement(j.Children.only(d),Hs(Hs({},$),{ref:B})):j.createElement(C,Hs({},$,{className:u,ref:B}),d))});Gc.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Gc.classNames={fullWidth:pc,zeroRight:hc};var QN=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function XN(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var n=QN();return n&&e.setAttribute("nonce",n),e}function JN(e,n){e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n))}function eC(e){var n=document.head||document.getElementsByTagName("head")[0];n.appendChild(e)}var tC=function(){var e=0,n=null;return{add:function(s){e==0&&(n=XN())&&(JN(n,s),eC(n)),e++},remove:function(){e--,!e&&n&&(n.parentNode&&n.parentNode.removeChild(n),n=null)}}},nC=function(){var e=tC();return function(n,s){j.useEffect(function(){return e.add(n),function(){e.remove()}},[n&&s])}},c2=function(){var e=nC(),n=function(s){var a=s.styles,i=s.dynamic;return e(a,i),null};return n},sC={left:0,top:0,right:0,gap:0},uf=function(e){return parseInt(e||"",10)||0},rC=function(e){var n=window.getComputedStyle(document.body),s=n[e==="padding"?"paddingLeft":"marginLeft"],a=n[e==="padding"?"paddingTop":"marginTop"],i=n[e==="padding"?"paddingRight":"marginRight"];return[uf(s),uf(a),uf(i)]},aC=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return sC;var n=rC(e),s=document.documentElement.clientWidth,a=window.innerWidth;return{left:n[0],top:n[1],right:n[2],gap:Math.max(0,a-s+n[2]-n[0])}},iC=c2(),mi="data-scroll-locked",oC=function(e,n,s,a){var i=e.left,l=e.top,c=e.right,d=e.gap;return s===void 0&&(s="margin"),`
  .`.concat(VN,` {
   overflow: hidden `).concat(a,`;
   padding-right: `).concat(d,"px ").concat(a,`;
  }
  body[`).concat(mi,`] {
    overflow: hidden `).concat(a,`;
    overscroll-behavior: contain;
    `).concat([n&&"position: relative ".concat(a,";"),s==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(a,`;
    `),s==="padding"&&"padding-right: ".concat(d,"px ").concat(a,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(hc,` {
    right: `).concat(d,"px ").concat(a,`;
  }
  
  .`).concat(pc,` {
    margin-right: `).concat(d,"px ").concat(a,`;
  }
  
  .`).concat(hc," .").concat(hc,` {
    right: 0 `).concat(a,`;
  }
  
  .`).concat(pc," .").concat(pc,` {
    margin-right: 0 `).concat(a,`;
  }
  
  body[`).concat(mi,`] {
    `).concat(HN,": ").concat(d,`px;
  }
`)},xg=function(){var e=parseInt(document.body.getAttribute(mi)||"0",10);return isFinite(e)?e:0},lC=function(){j.useEffect(function(){return document.body.setAttribute(mi,(xg()+1).toString()),function(){var e=xg()-1;e<=0?document.body.removeAttribute(mi):document.body.setAttribute(mi,e.toString())}},[])},cC=function(e){var n=e.noRelative,s=e.noImportant,a=e.gapMode,i=a===void 0?"margin":a;lC();var l=j.useMemo(function(){return aC(i)},[i]);return j.createElement(iC,{styles:oC(l,!n,i,s?"":"!important")})},Yf=!1;if(typeof window<"u")try{var Xl=Object.defineProperty({},"passive",{get:function(){return Yf=!0,!0}});window.addEventListener("test",Xl,Xl),window.removeEventListener("test",Xl,Xl)}catch{Yf=!1}var ti=Yf?{passive:!1}:!1,dC=function(e){return e.tagName==="TEXTAREA"},d2=function(e,n){if(!(e instanceof Element))return!1;var s=window.getComputedStyle(e);return s[n]!=="hidden"&&!(s.overflowY===s.overflowX&&!dC(e)&&s[n]==="visible")},uC=function(e){return d2(e,"overflowY")},fC=function(e){return d2(e,"overflowX")},gg=function(e,n){var s=n.ownerDocument,a=n;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var i=u2(e,a);if(i){var l=f2(e,a),c=l[1],d=l[2];if(c>d)return!0}a=a.parentNode}while(a&&a!==s.body);return!1},hC=function(e){var n=e.scrollTop,s=e.scrollHeight,a=e.clientHeight;return[n,s,a]},pC=function(e){var n=e.scrollLeft,s=e.scrollWidth,a=e.clientWidth;return[n,s,a]},u2=function(e,n){return e==="v"?uC(n):fC(n)},f2=function(e,n){return e==="v"?hC(n):pC(n)},mC=function(e,n){return e==="h"&&n==="rtl"?-1:1},xC=function(e,n,s,a,i){var l=mC(e,window.getComputedStyle(n).direction),c=l*a,d=s.target,u=n.contains(d),m=!1,p=c>0,f=0,x=0;do{if(!d)break;var b=f2(e,d),y=b[0],g=b[1],k=b[2],w=g-k-l*y;(y||w)&&u2(e,d)&&(f+=w,x+=y);var C=d.parentNode;d=C&&C.nodeType===Node.DOCUMENT_FRAGMENT_NODE?C.host:C}while(!u&&d!==document.body||u&&(n.contains(d)||n===d));return(p&&Math.abs(f)<1||!p&&Math.abs(x)<1)&&(m=!0),m},Jl=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},bg=function(e){return[e.deltaX,e.deltaY]},vg=function(e){return e&&"current"in e?e.current:e},gC=function(e,n){return e[0]===n[0]&&e[1]===n[1]},bC=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},vC=0,ni=[];function yC(e){var n=j.useRef([]),s=j.useRef([0,0]),a=j.useRef(),i=j.useState(vC++)[0],l=j.useState(c2)[0],c=j.useRef(e);j.useEffect(function(){c.current=e},[e]),j.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var g=$N([e.lockRef.current],(e.shards||[]).map(vg),!0).filter(Boolean);return g.forEach(function(k){return k.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(k){return k.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var d=j.useCallback(function(g,k){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!c.current.allowPinchZoom;var w=Jl(g),C=s.current,N="deltaX"in g?g.deltaX:C[0]-w[0],A="deltaY"in g?g.deltaY:C[1]-w[1],P,B=g.target,$=Math.abs(N)>Math.abs(A)?"h":"v";if("touches"in g&&$==="h"&&B.type==="range")return!1;var D=window.getSelection(),T=D&&D.anchorNode,H=T?T===B||T.contains(B):!1;if(H)return!1;var K=gg($,B);if(!K)return!0;if(K?P=$:(P=$==="v"?"h":"v",K=gg($,B)),!K)return!1;if(!a.current&&"changedTouches"in g&&(N||A)&&(a.current=P),!P)return!0;var E=a.current||P;return xC(E,k,g,E==="h"?N:A)},[]),u=j.useCallback(function(g){var k=g;if(!(!ni.length||ni[ni.length-1]!==l)){var w="deltaY"in k?bg(k):Jl(k),C=n.current.filter(function(P){return P.name===k.type&&(P.target===k.target||k.target===P.shadowParent)&&gC(P.delta,w)})[0];if(C&&C.should){k.cancelable&&k.preventDefault();return}if(!C){var N=(c.current.shards||[]).map(vg).filter(Boolean).filter(function(P){return P.contains(k.target)}),A=N.length>0?d(k,N[0]):!c.current.noIsolation;A&&k.cancelable&&k.preventDefault()}}},[]),m=j.useCallback(function(g,k,w,C){var N={name:g,delta:k,target:w,should:C,shadowParent:wC(w)};n.current.push(N),setTimeout(function(){n.current=n.current.filter(function(A){return A!==N})},1)},[]),p=j.useCallback(function(g){s.current=Jl(g),a.current=void 0},[]),f=j.useCallback(function(g){m(g.type,bg(g),g.target,d(g,e.lockRef.current))},[]),x=j.useCallback(function(g){m(g.type,Jl(g),g.target,d(g,e.lockRef.current))},[]);j.useEffect(function(){return ni.push(l),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:x}),document.addEventListener("wheel",u,ti),document.addEventListener("touchmove",u,ti),document.addEventListener("touchstart",p,ti),function(){ni=ni.filter(function(g){return g!==l}),document.removeEventListener("wheel",u,ti),document.removeEventListener("touchmove",u,ti),document.removeEventListener("touchstart",p,ti)}},[]);var b=e.removeScrollBar,y=e.inert;return j.createElement(j.Fragment,null,y?j.createElement(l,{styles:bC(i)}):null,b?j.createElement(cC,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function wC(e){for(var n=null;e!==null;)e instanceof ShadowRoot&&(n=e.host,e=e.host),e=e.parentNode;return n}const SC=ZN(l2,yC);var Zh=j.forwardRef(function(e,n){return j.createElement(Gc,Hs({},e,{ref:n,sideCar:SC}))});Zh.classNames=Gc.classNames;var kC=function(e){if(typeof document>"u")return null;var n=Array.isArray(e)?e[0]:e;return n.ownerDocument.body},si=new WeakMap,ec=new WeakMap,tc={},ff=0,h2=function(e){return e&&(e.host||h2(e.parentNode))},jC=function(e,n){return n.map(function(s){if(e.contains(s))return s;var a=h2(s);return a&&e.contains(a)?a:(console.error("aria-hidden",s,"in not contained inside",e,". Doing nothing"),null)}).filter(function(s){return!!s})},NC=function(e,n,s,a){var i=jC(n,Array.isArray(e)?e:[e]);tc[s]||(tc[s]=new WeakMap);var l=tc[s],c=[],d=new Set,u=new Set(i),m=function(f){!f||d.has(f)||(d.add(f),m(f.parentNode))};i.forEach(m);var p=function(f){!f||u.has(f)||Array.prototype.forEach.call(f.children,function(x){if(d.has(x))p(x);else try{var b=x.getAttribute(a),y=b!==null&&b!=="false",g=(si.get(x)||0)+1,k=(l.get(x)||0)+1;si.set(x,g),l.set(x,k),c.push(x),g===1&&y&&ec.set(x,!0),k===1&&x.setAttribute(s,"true"),y||x.setAttribute(a,"true")}catch(w){console.error("aria-hidden: cannot operate on ",x,w)}})};return p(n),d.clear(),ff++,function(){c.forEach(function(f){var x=si.get(f)-1,b=l.get(f)-1;si.set(f,x),l.set(f,b),x||(ec.has(f)||f.removeAttribute(a),ec.delete(f)),b||f.removeAttribute(s)}),ff--,ff||(si=new WeakMap,si=new WeakMap,ec=new WeakMap,tc={})}},p2=function(e,n,s){s===void 0&&(s="data-aria-hidden");var a=Array.from(Array.isArray(e)?e:[e]),i=kC(e);return i?(a.push.apply(a,Array.from(i.querySelectorAll("[aria-live], script"))),NC(a,i,s,"aria-hidden")):function(){return null}};function CC(e){const n=_C(e),s=j.forwardRef((a,i)=>{const{children:l,...c}=a,d=j.Children.toArray(l),u=d.find(EC);if(u){const m=u.props.children,p=d.map(f=>f===u?j.Children.count(m)>1?j.Children.only(null):j.isValidElement(m)?m.props.children:null:f);return t.jsx(n,{...c,ref:i,children:j.isValidElement(m)?j.cloneElement(m,void 0,p):null})}return t.jsx(n,{...c,ref:i,children:l})});return s.displayName=`${e}.Slot`,s}function _C(e){const n=j.forwardRef((s,a)=>{const{children:i,...l}=s;if(j.isValidElement(i)){const c=DC(i),d=TC(l,i.props);return i.type!==j.Fragment&&(d.ref=a?Ro(a,c):c),j.cloneElement(i,d)}return j.Children.count(i)>1?j.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var AC=Symbol("radix.slottable");function EC(e){return j.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===AC}function TC(e,n){const s={...n};for(const a in n){const i=e[a],l=n[a];/^on[A-Z]/.test(a)?i&&l?s[a]=(...d)=>{const u=l(...d);return i(...d),u}:i&&(s[a]=i):a==="style"?s[a]={...i,...l}:a==="className"&&(s[a]=[i,l].filter(Boolean).join(" "))}return{...e,...s}}function DC(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var Yc="Dialog",[m2,x2]=Ci(Yc),[FC,Ms]=m2(Yc),g2=e=>{const{__scopeDialog:n,children:s,open:a,defaultOpen:i,onOpenChange:l,modal:c=!0}=e,d=j.useRef(null),u=j.useRef(null),[m,p]=Nc({prop:a,defaultProp:i??!1,onChange:l,caller:Yc});return t.jsx(FC,{scope:n,triggerRef:d,contentRef:u,contentId:pi(),titleId:pi(),descriptionId:pi(),open:m,onOpenChange:p,onOpenToggle:j.useCallback(()=>p(f=>!f),[p]),modal:c,children:s})};g2.displayName=Yc;var b2="DialogTrigger",v2=j.forwardRef((e,n)=>{const{__scopeDialog:s,...a}=e,i=Ms(b2,s),l=Bt(n,i.triggerRef);return t.jsx(Nt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Jh(i.open),...a,ref:l,onClick:Tt(e.onClick,i.onOpenToggle)})});v2.displayName=b2;var Qh="DialogPortal",[MC,y2]=m2(Qh,{forceMount:void 0}),w2=e=>{const{__scopeDialog:n,forceMount:s,children:a,container:i}=e,l=Ms(Qh,n);return t.jsx(MC,{scope:n,forceMount:s,children:j.Children.map(a,c=>t.jsx(Kc,{present:s||l.open,children:t.jsx(qh,{asChild:!0,container:i,children:c})}))})};w2.displayName=Qh;var Cc="DialogOverlay",S2=j.forwardRef((e,n)=>{const s=y2(Cc,e.__scopeDialog),{forceMount:a=s.forceMount,...i}=e,l=Ms(Cc,e.__scopeDialog);return l.modal?t.jsx(Kc,{present:a||l.open,children:t.jsx(PC,{...i,ref:n})}):null});S2.displayName=Cc;var IC=CC("DialogOverlay.RemoveScroll"),PC=j.forwardRef((e,n)=>{const{__scopeDialog:s,...a}=e,i=Ms(Cc,s);return t.jsx(Zh,{as:IC,allowPinchZoom:!0,shards:[i.contentRef],children:t.jsx(Nt.div,{"data-state":Jh(i.open),...a,ref:n,style:{pointerEvents:"auto",...a.style}})})}),wa="DialogContent",k2=j.forwardRef((e,n)=>{const s=y2(wa,e.__scopeDialog),{forceMount:a=s.forceMount,...i}=e,l=Ms(wa,e.__scopeDialog);return t.jsx(Kc,{present:a||l.open,children:l.modal?t.jsx(RC,{...i,ref:n}):t.jsx(BC,{...i,ref:n})})});k2.displayName=wa;var RC=j.forwardRef((e,n)=>{const s=Ms(wa,e.__scopeDialog),a=j.useRef(null),i=Bt(n,s.contentRef,a);return j.useEffect(()=>{const l=a.current;if(l)return p2(l)},[]),t.jsx(j2,{...e,ref:i,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Tt(e.onCloseAutoFocus,l=>{l.preventDefault(),s.triggerRef.current?.focus()}),onPointerDownOutside:Tt(e.onPointerDownOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0;(c.button===2||d)&&l.preventDefault()}),onFocusOutside:Tt(e.onFocusOutside,l=>l.preventDefault())})}),BC=j.forwardRef((e,n)=>{const s=Ms(wa,e.__scopeDialog),a=j.useRef(!1),i=j.useRef(!1);return t.jsx(j2,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{e.onCloseAutoFocus?.(l),l.defaultPrevented||(a.current||s.triggerRef.current?.focus(),l.preventDefault()),a.current=!1,i.current=!1},onInteractOutside:l=>{e.onInteractOutside?.(l),l.defaultPrevented||(a.current=!0,l.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const c=l.target;s.triggerRef.current?.contains(c)&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&i.current&&l.preventDefault()}})}),j2=j.forwardRef((e,n)=>{const{__scopeDialog:s,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:l,...c}=e,d=Ms(wa,s),u=j.useRef(null),m=Bt(n,u);return a2(),t.jsxs(t.Fragment,{children:[t.jsx(Yh,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:i,onUnmountAutoFocus:l,children:t.jsx(Gh,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":Jh(d.open),...c,ref:m,onDismiss:()=>d.onOpenChange(!1)})}),t.jsxs(t.Fragment,{children:[t.jsx(zC,{titleId:d.titleId}),t.jsx($C,{contentRef:u,descriptionId:d.descriptionId})]})]})}),Xh="DialogTitle",N2=j.forwardRef((e,n)=>{const{__scopeDialog:s,...a}=e,i=Ms(Xh,s);return t.jsx(Nt.h2,{id:i.titleId,...a,ref:n})});N2.displayName=Xh;var C2="DialogDescription",_2=j.forwardRef((e,n)=>{const{__scopeDialog:s,...a}=e,i=Ms(C2,s);return t.jsx(Nt.p,{id:i.descriptionId,...a,ref:n})});_2.displayName=C2;var A2="DialogClose",E2=j.forwardRef((e,n)=>{const{__scopeDialog:s,...a}=e,i=Ms(A2,s);return t.jsx(Nt.button,{type:"button",...a,ref:n,onClick:Tt(e.onClick,()=>i.onOpenChange(!1))})});E2.displayName=A2;function Jh(e){return e?"open":"closed"}var T2="DialogTitleWarning",[LC,D2]=oN(T2,{contentName:wa,titleName:Xh,docsSlug:"dialog"}),zC=({titleId:e})=>{const n=D2(T2),s=`\`${n.contentName}\` requires a \`${n.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${n.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${n.docsSlug}`;return j.useEffect(()=>{e&&(document.getElementById(e)||console.error(s))},[s,e]),null},OC="DialogDescriptionWarning",$C=({contentRef:e,descriptionId:n})=>{const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${D2(OC).contentName}}.`;return j.useEffect(()=>{const i=e.current?.getAttribute("aria-describedby");n&&i&&(document.getElementById(n)||console.warn(a))},[a,e,n]),null},VC=g2,HC=v2,UC=w2,WC=S2,KC=k2,GC=N2,YC=_2,F2=E2,qC=Symbol("radix.slottable");function ZC(e){const n=({children:s})=>t.jsx(t.Fragment,{children:s});return n.displayName=`${e}.Slottable`,n.__radixId=qC,n}var M2="AlertDialog",[QC]=Ci(M2,[x2]),pr=x2(),I2=e=>{const{__scopeAlertDialog:n,...s}=e,a=pr(n);return t.jsx(VC,{...a,...s,modal:!0})};I2.displayName=M2;var XC="AlertDialogTrigger",JC=j.forwardRef((e,n)=>{const{__scopeAlertDialog:s,...a}=e,i=pr(s);return t.jsx(HC,{...i,...a,ref:n})});JC.displayName=XC;var e4="AlertDialogPortal",P2=e=>{const{__scopeAlertDialog:n,...s}=e,a=pr(n);return t.jsx(UC,{...a,...s})};P2.displayName=e4;var t4="AlertDialogOverlay",R2=j.forwardRef((e,n)=>{const{__scopeAlertDialog:s,...a}=e,i=pr(s);return t.jsx(WC,{...i,...a,ref:n})});R2.displayName=t4;var xi="AlertDialogContent",[n4,s4]=QC(xi),r4=ZC("AlertDialogContent"),B2=j.forwardRef((e,n)=>{const{__scopeAlertDialog:s,children:a,...i}=e,l=pr(s),c=j.useRef(null),d=Bt(n,c),u=j.useRef(null);return t.jsx(LC,{contentName:xi,titleName:L2,docsSlug:"alert-dialog",children:t.jsx(n4,{scope:s,cancelRef:u,children:t.jsxs(KC,{role:"alertdialog",...l,...i,ref:d,onOpenAutoFocus:Tt(i.onOpenAutoFocus,m=>{m.preventDefault(),u.current?.focus({preventScroll:!0})}),onPointerDownOutside:m=>m.preventDefault(),onInteractOutside:m=>m.preventDefault(),children:[t.jsx(r4,{children:a}),t.jsx(o4,{contentRef:c})]})})})});B2.displayName=xi;var L2="AlertDialogTitle",z2=j.forwardRef((e,n)=>{const{__scopeAlertDialog:s,...a}=e,i=pr(s);return t.jsx(GC,{...i,...a,ref:n})});z2.displayName=L2;var O2="AlertDialogDescription",$2=j.forwardRef((e,n)=>{const{__scopeAlertDialog:s,...a}=e,i=pr(s);return t.jsx(YC,{...i,...a,ref:n})});$2.displayName=O2;var a4="AlertDialogAction",V2=j.forwardRef((e,n)=>{const{__scopeAlertDialog:s,...a}=e,i=pr(s);return t.jsx(F2,{...i,...a,ref:n})});V2.displayName=a4;var H2="AlertDialogCancel",i4=j.forwardRef((e,n)=>{const{__scopeAlertDialog:s,...a}=e,{cancelRef:i}=s4(H2,s),l=pr(s),c=Bt(n,i);return t.jsx(F2,{...l,...a,ref:c})});i4.displayName=H2;var o4=({contentRef:e})=>{const n=`\`${xi}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${xi}\` by passing a \`${O2}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${xi}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return j.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(n)},[n,e]),null},l4=I2,c4=P2,d4=R2,u4=B2,f4=V2,h4=z2,p4=$2;function U2(e){var n,s,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(n=0;n<i;n++)e[n]&&(s=U2(e[n]))&&(a&&(a+=" "),a+=s)}else for(s in e)e[s]&&(a&&(a+=" "),a+=s);return a}function W2(){for(var e,n,s=0,a="",i=arguments.length;s<i;s++)(e=arguments[s])&&(n=U2(e))&&(a&&(a+=" "),a+=n);return a}const m4=(e,n)=>{const s=new Array(e.length+n.length);for(let a=0;a<e.length;a++)s[a]=e[a];for(let a=0;a<n.length;a++)s[e.length+a]=n[a];return s},x4=(e,n)=>({classGroupId:e,validator:n}),K2=(e=new Map,n=null,s)=>({nextPart:e,validators:n,classGroupId:s}),_c="-",yg=[],g4="arbitrary..",b4=e=>{const n=y4(e),{conflictingClassGroups:s,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:c=>{if(c.startsWith("[")&&c.endsWith("]"))return v4(c);const d=c.split(_c),u=d[0]===""&&d.length>1?1:0;return G2(d,u,n)},getConflictingClassGroupIds:(c,d)=>{if(d){const u=a[c],m=s[c];return u?m?m4(m,u):u:m||yg}return s[c]||yg}}},G2=(e,n,s)=>{if(e.length-n===0)return s.classGroupId;const i=e[n],l=s.nextPart.get(i);if(l){const m=G2(e,n+1,l);if(m)return m}const c=s.validators;if(c===null)return;const d=n===0?e.join(_c):e.slice(n).join(_c),u=c.length;for(let m=0;m<u;m++){const p=c[m];if(p.validator(d))return p.classGroupId}},v4=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const n=e.slice(1,-1),s=n.indexOf(":"),a=n.slice(0,s);return a?g4+a:void 0})(),y4=e=>{const{theme:n,classGroups:s}=e;return w4(s,n)},w4=(e,n)=>{const s=K2();for(const a in e){const i=e[a];ep(i,s,a,n)}return s},ep=(e,n,s,a)=>{const i=e.length;for(let l=0;l<i;l++){const c=e[l];S4(c,n,s,a)}},S4=(e,n,s,a)=>{if(typeof e=="string"){k4(e,n,s);return}if(typeof e=="function"){j4(e,n,s,a);return}N4(e,n,s,a)},k4=(e,n,s)=>{const a=e===""?n:Y2(n,e);a.classGroupId=s},j4=(e,n,s,a)=>{if(C4(e)){ep(e(a),n,s,a);return}n.validators===null&&(n.validators=[]),n.validators.push(x4(s,e))},N4=(e,n,s,a)=>{const i=Object.entries(e),l=i.length;for(let c=0;c<l;c++){const[d,u]=i[c];ep(u,Y2(n,d),s,a)}},Y2=(e,n)=>{let s=e;const a=n.split(_c),i=a.length;for(let l=0;l<i;l++){const c=a[l];let d=s.nextPart.get(c);d||(d=K2(),s.nextPart.set(c,d)),s=d}return s},C4=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,_4=e=>{if(e<1)return{get:()=>{},set:()=>{}};let n=0,s=Object.create(null),a=Object.create(null);const i=(l,c)=>{s[l]=c,n++,n>e&&(n=0,a=s,s=Object.create(null))};return{get(l){let c=s[l];if(c!==void 0)return c;if((c=a[l])!==void 0)return i(l,c),c},set(l,c){l in s?s[l]=c:i(l,c)}}},qf="!",wg=":",A4=[],Sg=(e,n,s,a,i)=>({modifiers:e,hasImportantModifier:n,baseClassName:s,maybePostfixModifierPosition:a,isExternal:i}),E4=e=>{const{prefix:n,experimentalParseClassName:s}=e;let a=i=>{const l=[];let c=0,d=0,u=0,m;const p=i.length;for(let g=0;g<p;g++){const k=i[g];if(c===0&&d===0){if(k===wg){l.push(i.slice(u,g)),u=g+1;continue}if(k==="/"){m=g;continue}}k==="["?c++:k==="]"?c--:k==="("?d++:k===")"&&d--}const f=l.length===0?i:i.slice(u);let x=f,b=!1;f.endsWith(qf)?(x=f.slice(0,-1),b=!0):f.startsWith(qf)&&(x=f.slice(1),b=!0);const y=m&&m>u?m-u:void 0;return Sg(l,b,x,y)};if(n){const i=n+wg,l=a;a=c=>c.startsWith(i)?l(c.slice(i.length)):Sg(A4,!1,c,void 0,!0)}if(s){const i=a;a=l=>s({className:l,parseClassName:i})}return a},T4=e=>{const n=new Map;return e.orderSensitiveModifiers.forEach((s,a)=>{n.set(s,1e6+a)}),s=>{const a=[];let i=[];for(let l=0;l<s.length;l++){const c=s[l],d=c[0]==="[",u=n.has(c);d||u?(i.length>0&&(i.sort(),a.push(...i),i=[]),a.push(c)):i.push(c)}return i.length>0&&(i.sort(),a.push(...i)),a}},D4=e=>({cache:_4(e.cacheSize),parseClassName:E4(e),sortModifiers:T4(e),...b4(e)}),F4=/\s+/,M4=(e,n)=>{const{parseClassName:s,getClassGroupId:a,getConflictingClassGroupIds:i,sortModifiers:l}=n,c=[],d=e.trim().split(F4);let u="";for(let m=d.length-1;m>=0;m-=1){const p=d[m],{isExternal:f,modifiers:x,hasImportantModifier:b,baseClassName:y,maybePostfixModifierPosition:g}=s(p);if(f){u=p+(u.length>0?" "+u:u);continue}let k=!!g,w=a(k?y.substring(0,g):y);if(!w){if(!k){u=p+(u.length>0?" "+u:u);continue}if(w=a(y),!w){u=p+(u.length>0?" "+u:u);continue}k=!1}const C=x.length===0?"":x.length===1?x[0]:l(x).join(":"),N=b?C+qf:C,A=N+w;if(c.indexOf(A)>-1)continue;c.push(A);const P=i(w,k);for(let B=0;B<P.length;++B){const $=P[B];c.push(N+$)}u=p+(u.length>0?" "+u:u)}return u},I4=(...e)=>{let n=0,s,a,i="";for(;n<e.length;)(s=e[n++])&&(a=q2(s))&&(i&&(i+=" "),i+=a);return i},q2=e=>{if(typeof e=="string")return e;let n,s="";for(let a=0;a<e.length;a++)e[a]&&(n=q2(e[a]))&&(s&&(s+=" "),s+=n);return s},P4=(e,...n)=>{let s,a,i,l;const c=u=>{const m=n.reduce((p,f)=>f(p),e());return s=D4(m),a=s.cache.get,i=s.cache.set,l=d,d(u)},d=u=>{const m=a(u);if(m)return m;const p=M4(u,s);return i(u,p),p};return l=c,(...u)=>l(I4(...u))},R4=[],fn=e=>{const n=s=>s[e]||R4;return n.isThemeGetter=!0,n},Z2=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Q2=/^\((?:(\w[\w-]*):)?(.+)\)$/i,B4=/^\d+\/\d+$/,L4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,z4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,O4=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,$4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,V4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ri=e=>B4.test(e),ft=e=>!!e&&!Number.isNaN(Number(e)),Mr=e=>!!e&&Number.isInteger(Number(e)),hf=e=>e.endsWith("%")&&ft(e.slice(0,-1)),ir=e=>L4.test(e),H4=()=>!0,U4=e=>z4.test(e)&&!O4.test(e),X2=()=>!1,W4=e=>$4.test(e),K4=e=>V4.test(e),G4=e=>!Ve(e)&&!He(e),Y4=e=>_i(e,tv,X2),Ve=e=>Z2.test(e),ua=e=>_i(e,nv,U4),pf=e=>_i(e,J4,ft),kg=e=>_i(e,J2,X2),q4=e=>_i(e,ev,K4),nc=e=>_i(e,sv,W4),He=e=>Q2.test(e),go=e=>Ai(e,nv),Z4=e=>Ai(e,e6),jg=e=>Ai(e,J2),Q4=e=>Ai(e,tv),X4=e=>Ai(e,ev),sc=e=>Ai(e,sv,!0),_i=(e,n,s)=>{const a=Z2.exec(e);return a?a[1]?n(a[1]):s(a[2]):!1},Ai=(e,n,s=!1)=>{const a=Q2.exec(e);return a?a[1]?n(a[1]):s:!1},J2=e=>e==="position"||e==="percentage",ev=e=>e==="image"||e==="url",tv=e=>e==="length"||e==="size"||e==="bg-size",nv=e=>e==="length",J4=e=>e==="number",e6=e=>e==="family-name",sv=e=>e==="shadow",t6=()=>{const e=fn("color"),n=fn("font"),s=fn("text"),a=fn("font-weight"),i=fn("tracking"),l=fn("leading"),c=fn("breakpoint"),d=fn("container"),u=fn("spacing"),m=fn("radius"),p=fn("shadow"),f=fn("inset-shadow"),x=fn("text-shadow"),b=fn("drop-shadow"),y=fn("blur"),g=fn("perspective"),k=fn("aspect"),w=fn("ease"),C=fn("animate"),N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],A=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],P=()=>[...A(),He,Ve],B=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto","contain","none"],D=()=>[He,Ve,u],T=()=>[ri,"full","auto",...D()],H=()=>[Mr,"none","subgrid",He,Ve],K=()=>["auto",{span:["full",Mr,He,Ve]},Mr,He,Ve],E=()=>[Mr,"auto",He,Ve],I=()=>["auto","min","max","fr",He,Ve],S=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],L=()=>["start","end","center","stretch","center-safe","end-safe"],z=()=>["auto",...D()],R=()=>[ri,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...D()],U=()=>[e,He,Ve],W=()=>[...A(),jg,kg,{position:[He,Ve]}],Z=()=>["no-repeat",{repeat:["","x","y","space","round"]}],O=()=>["auto","cover","contain",Q4,Y4,{size:[He,Ve]}],V=()=>[hf,go,ua],ee=()=>["","none","full",m,He,Ve],q=()=>["",ft,go,ua],G=()=>["solid","dashed","dotted","double"],Q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],le=()=>[ft,hf,jg,kg],ne=()=>["","none",y,He,Ve],ie=()=>["none",ft,He,Ve],ve=()=>["none",ft,He,Ve],se=()=>[ft,He,Ve],ge=()=>[ri,"full",...D()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ir],breakpoint:[ir],color:[H4],container:[ir],"drop-shadow":[ir],ease:["in","out","in-out"],font:[G4],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ir],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ir],shadow:[ir],spacing:["px",ft],text:[ir],"text-shadow":[ir],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ri,Ve,He,k]}],container:["container"],columns:[{columns:[ft,Ve,He,d]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:P()}],overflow:[{overflow:B()}],"overflow-x":[{"overflow-x":B()}],"overflow-y":[{"overflow-y":B()}],overscroll:[{overscroll:$()}],"overscroll-x":[{"overscroll-x":$()}],"overscroll-y":[{"overscroll-y":$()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:T()}],"inset-x":[{"inset-x":T()}],"inset-y":[{"inset-y":T()}],start:[{start:T()}],end:[{end:T()}],top:[{top:T()}],right:[{right:T()}],bottom:[{bottom:T()}],left:[{left:T()}],visibility:["visible","invisible","collapse"],z:[{z:[Mr,"auto",He,Ve]}],basis:[{basis:[ri,"full","auto",d,...D()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ft,ri,"auto","initial","none",Ve]}],grow:[{grow:["",ft,He,Ve]}],shrink:[{shrink:["",ft,He,Ve]}],order:[{order:[Mr,"first","last","none",He,Ve]}],"grid-cols":[{"grid-cols":H()}],"col-start-end":[{col:K()}],"col-start":[{"col-start":E()}],"col-end":[{"col-end":E()}],"grid-rows":[{"grid-rows":H()}],"row-start-end":[{row:K()}],"row-start":[{"row-start":E()}],"row-end":[{"row-end":E()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":I()}],"auto-rows":[{"auto-rows":I()}],gap:[{gap:D()}],"gap-x":[{"gap-x":D()}],"gap-y":[{"gap-y":D()}],"justify-content":[{justify:[...S(),"normal"]}],"justify-items":[{"justify-items":[...L(),"normal"]}],"justify-self":[{"justify-self":["auto",...L()]}],"align-content":[{content:["normal",...S()]}],"align-items":[{items:[...L(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...L(),{baseline:["","last"]}]}],"place-content":[{"place-content":S()}],"place-items":[{"place-items":[...L(),"baseline"]}],"place-self":[{"place-self":["auto",...L()]}],p:[{p:D()}],px:[{px:D()}],py:[{py:D()}],ps:[{ps:D()}],pe:[{pe:D()}],pt:[{pt:D()}],pr:[{pr:D()}],pb:[{pb:D()}],pl:[{pl:D()}],m:[{m:z()}],mx:[{mx:z()}],my:[{my:z()}],ms:[{ms:z()}],me:[{me:z()}],mt:[{mt:z()}],mr:[{mr:z()}],mb:[{mb:z()}],ml:[{ml:z()}],"space-x":[{"space-x":D()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":D()}],"space-y-reverse":["space-y-reverse"],size:[{size:R()}],w:[{w:[d,"screen",...R()]}],"min-w":[{"min-w":[d,"screen","none",...R()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[c]},...R()]}],h:[{h:["screen","lh",...R()]}],"min-h":[{"min-h":["screen","lh","none",...R()]}],"max-h":[{"max-h":["screen","lh",...R()]}],"font-size":[{text:["base",s,go,ua]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,He,pf]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",hf,Ve]}],"font-family":[{font:[Z4,Ve,n]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,He,Ve]}],"line-clamp":[{"line-clamp":[ft,"none",He,pf]}],leading:[{leading:[l,...D()]}],"list-image":[{"list-image":["none",He,Ve]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",He,Ve]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:U()}],"text-color":[{text:U()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...G(),"wavy"]}],"text-decoration-thickness":[{decoration:[ft,"from-font","auto",He,ua]}],"text-decoration-color":[{decoration:U()}],"underline-offset":[{"underline-offset":[ft,"auto",He,Ve]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",He,Ve]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",He,Ve]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:W()}],"bg-repeat":[{bg:Z()}],"bg-size":[{bg:O()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Mr,He,Ve],radial:["",He,Ve],conic:[Mr,He,Ve]},X4,q4]}],"bg-color":[{bg:U()}],"gradient-from-pos":[{from:V()}],"gradient-via-pos":[{via:V()}],"gradient-to-pos":[{to:V()}],"gradient-from":[{from:U()}],"gradient-via":[{via:U()}],"gradient-to":[{to:U()}],rounded:[{rounded:ee()}],"rounded-s":[{"rounded-s":ee()}],"rounded-e":[{"rounded-e":ee()}],"rounded-t":[{"rounded-t":ee()}],"rounded-r":[{"rounded-r":ee()}],"rounded-b":[{"rounded-b":ee()}],"rounded-l":[{"rounded-l":ee()}],"rounded-ss":[{"rounded-ss":ee()}],"rounded-se":[{"rounded-se":ee()}],"rounded-ee":[{"rounded-ee":ee()}],"rounded-es":[{"rounded-es":ee()}],"rounded-tl":[{"rounded-tl":ee()}],"rounded-tr":[{"rounded-tr":ee()}],"rounded-br":[{"rounded-br":ee()}],"rounded-bl":[{"rounded-bl":ee()}],"border-w":[{border:q()}],"border-w-x":[{"border-x":q()}],"border-w-y":[{"border-y":q()}],"border-w-s":[{"border-s":q()}],"border-w-e":[{"border-e":q()}],"border-w-t":[{"border-t":q()}],"border-w-r":[{"border-r":q()}],"border-w-b":[{"border-b":q()}],"border-w-l":[{"border-l":q()}],"divide-x":[{"divide-x":q()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":q()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...G(),"hidden","none"]}],"divide-style":[{divide:[...G(),"hidden","none"]}],"border-color":[{border:U()}],"border-color-x":[{"border-x":U()}],"border-color-y":[{"border-y":U()}],"border-color-s":[{"border-s":U()}],"border-color-e":[{"border-e":U()}],"border-color-t":[{"border-t":U()}],"border-color-r":[{"border-r":U()}],"border-color-b":[{"border-b":U()}],"border-color-l":[{"border-l":U()}],"divide-color":[{divide:U()}],"outline-style":[{outline:[...G(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ft,He,Ve]}],"outline-w":[{outline:["",ft,go,ua]}],"outline-color":[{outline:U()}],shadow:[{shadow:["","none",p,sc,nc]}],"shadow-color":[{shadow:U()}],"inset-shadow":[{"inset-shadow":["none",f,sc,nc]}],"inset-shadow-color":[{"inset-shadow":U()}],"ring-w":[{ring:q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:U()}],"ring-offset-w":[{"ring-offset":[ft,ua]}],"ring-offset-color":[{"ring-offset":U()}],"inset-ring-w":[{"inset-ring":q()}],"inset-ring-color":[{"inset-ring":U()}],"text-shadow":[{"text-shadow":["none",x,sc,nc]}],"text-shadow-color":[{"text-shadow":U()}],opacity:[{opacity:[ft,He,Ve]}],"mix-blend":[{"mix-blend":[...Q(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Q()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ft]}],"mask-image-linear-from-pos":[{"mask-linear-from":le()}],"mask-image-linear-to-pos":[{"mask-linear-to":le()}],"mask-image-linear-from-color":[{"mask-linear-from":U()}],"mask-image-linear-to-color":[{"mask-linear-to":U()}],"mask-image-t-from-pos":[{"mask-t-from":le()}],"mask-image-t-to-pos":[{"mask-t-to":le()}],"mask-image-t-from-color":[{"mask-t-from":U()}],"mask-image-t-to-color":[{"mask-t-to":U()}],"mask-image-r-from-pos":[{"mask-r-from":le()}],"mask-image-r-to-pos":[{"mask-r-to":le()}],"mask-image-r-from-color":[{"mask-r-from":U()}],"mask-image-r-to-color":[{"mask-r-to":U()}],"mask-image-b-from-pos":[{"mask-b-from":le()}],"mask-image-b-to-pos":[{"mask-b-to":le()}],"mask-image-b-from-color":[{"mask-b-from":U()}],"mask-image-b-to-color":[{"mask-b-to":U()}],"mask-image-l-from-pos":[{"mask-l-from":le()}],"mask-image-l-to-pos":[{"mask-l-to":le()}],"mask-image-l-from-color":[{"mask-l-from":U()}],"mask-image-l-to-color":[{"mask-l-to":U()}],"mask-image-x-from-pos":[{"mask-x-from":le()}],"mask-image-x-to-pos":[{"mask-x-to":le()}],"mask-image-x-from-color":[{"mask-x-from":U()}],"mask-image-x-to-color":[{"mask-x-to":U()}],"mask-image-y-from-pos":[{"mask-y-from":le()}],"mask-image-y-to-pos":[{"mask-y-to":le()}],"mask-image-y-from-color":[{"mask-y-from":U()}],"mask-image-y-to-color":[{"mask-y-to":U()}],"mask-image-radial":[{"mask-radial":[He,Ve]}],"mask-image-radial-from-pos":[{"mask-radial-from":le()}],"mask-image-radial-to-pos":[{"mask-radial-to":le()}],"mask-image-radial-from-color":[{"mask-radial-from":U()}],"mask-image-radial-to-color":[{"mask-radial-to":U()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":A()}],"mask-image-conic-pos":[{"mask-conic":[ft]}],"mask-image-conic-from-pos":[{"mask-conic-from":le()}],"mask-image-conic-to-pos":[{"mask-conic-to":le()}],"mask-image-conic-from-color":[{"mask-conic-from":U()}],"mask-image-conic-to-color":[{"mask-conic-to":U()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:W()}],"mask-repeat":[{mask:Z()}],"mask-size":[{mask:O()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",He,Ve]}],filter:[{filter:["","none",He,Ve]}],blur:[{blur:ne()}],brightness:[{brightness:[ft,He,Ve]}],contrast:[{contrast:[ft,He,Ve]}],"drop-shadow":[{"drop-shadow":["","none",b,sc,nc]}],"drop-shadow-color":[{"drop-shadow":U()}],grayscale:[{grayscale:["",ft,He,Ve]}],"hue-rotate":[{"hue-rotate":[ft,He,Ve]}],invert:[{invert:["",ft,He,Ve]}],saturate:[{saturate:[ft,He,Ve]}],sepia:[{sepia:["",ft,He,Ve]}],"backdrop-filter":[{"backdrop-filter":["","none",He,Ve]}],"backdrop-blur":[{"backdrop-blur":ne()}],"backdrop-brightness":[{"backdrop-brightness":[ft,He,Ve]}],"backdrop-contrast":[{"backdrop-contrast":[ft,He,Ve]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ft,He,Ve]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ft,He,Ve]}],"backdrop-invert":[{"backdrop-invert":["",ft,He,Ve]}],"backdrop-opacity":[{"backdrop-opacity":[ft,He,Ve]}],"backdrop-saturate":[{"backdrop-saturate":[ft,He,Ve]}],"backdrop-sepia":[{"backdrop-sepia":["",ft,He,Ve]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":D()}],"border-spacing-x":[{"border-spacing-x":D()}],"border-spacing-y":[{"border-spacing-y":D()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",He,Ve]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ft,"initial",He,Ve]}],ease:[{ease:["linear","initial",w,He,Ve]}],delay:[{delay:[ft,He,Ve]}],animate:[{animate:["none",C,He,Ve]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[g,He,Ve]}],"perspective-origin":[{"perspective-origin":P()}],rotate:[{rotate:ie()}],"rotate-x":[{"rotate-x":ie()}],"rotate-y":[{"rotate-y":ie()}],"rotate-z":[{"rotate-z":ie()}],scale:[{scale:ve()}],"scale-x":[{"scale-x":ve()}],"scale-y":[{"scale-y":ve()}],"scale-z":[{"scale-z":ve()}],"scale-3d":["scale-3d"],skew:[{skew:se()}],"skew-x":[{"skew-x":se()}],"skew-y":[{"skew-y":se()}],transform:[{transform:[He,Ve,"","none","gpu","cpu"]}],"transform-origin":[{origin:P()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ge()}],"translate-x":[{"translate-x":ge()}],"translate-y":[{"translate-y":ge()}],"translate-z":[{"translate-z":ge()}],"translate-none":["translate-none"],accent:[{accent:U()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:U()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",He,Ve]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",He,Ve]}],fill:[{fill:["none",...U()]}],"stroke-w":[{stroke:[ft,go,ua,pf]}],stroke:[{stroke:["none",...U()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},n6=P4(t6);function as(...e){return n6(W2(e))}const Ng=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Cg=W2,s6=(e,n)=>s=>{var a;if(n?.variants==null)return Cg(e,s?.class,s?.className);const{variants:i,defaultVariants:l}=n,c=Object.keys(i).map(m=>{const p=s?.[m],f=l?.[m];if(p===null)return null;const x=Ng(p)||Ng(f);return i[m][x]}),d=s&&Object.entries(s).reduce((m,p)=>{let[f,x]=p;return x===void 0||(m[f]=x),m},{}),u=n==null||(a=n.compoundVariants)===null||a===void 0?void 0:a.reduce((m,p)=>{let{class:f,className:x,...b}=p;return Object.entries(b).every(y=>{let[g,k]=y;return Array.isArray(k)?k.includes({...l,...d}[g]):{...l,...d}[g]===k})?[...m,f,x]:m},[]);return Cg(e,c,u,s?.class,s?.className)},r6=s6("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function a6({...e}){return t.jsx(l4,{"data-slot":"alert-dialog",...e})}function i6({...e}){return t.jsx(c4,{"data-slot":"alert-dialog-portal",...e})}const rv=j.forwardRef(({className:e,...n},s)=>t.jsx(d4,{ref:s,"data-slot":"alert-dialog-overlay",className:as("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...n}));rv.displayName="AlertDialogOverlay";function o6({className:e,...n}){return t.jsxs(i6,{children:[t.jsx(rv,{}),t.jsx(u4,{"data-slot":"alert-dialog-content",className:as("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n})]})}function l6({className:e,...n}){return t.jsx(h4,{"data-slot":"alert-dialog-title",className:as("text-lg font-semibold",e),...n})}function c6({className:e,...n}){return t.jsx(p4,{"data-slot":"alert-dialog-description",className:as("text-muted-foreground text-sm",e),...n})}function d6({className:e,...n}){return t.jsx(f4,{className:as(r6(),e),...n})}const Ac="ToukenRanbuDB",u6=10,te={USER_DATA:"userData",CHARACTERS:"characters",CHATS:"chats",CHAT_MESSAGES:"chatMessages",CHAT_SETTINGS:"chatSettings",WORLD_BOOKS:"worldBooks",API_SETTINGS:"apiSettings",APPEARANCE:"appearance",MISC:"misc",STICKERS:"stickers",BUBBLE_PRESETS:"bubblePresets",AI_TASKS:"aiTasks",HEALTH:"health",SCHEDULE:"schedule",TRANSACTIONS:"transactions"};let f6=class{db=null;async init(){return new Promise((n,s)=>{const a=indexedDB.open(Ac,u6);a.onerror=()=>{console.error("Failed to open IndexedDB:",a.error),s(new Error("Failed to open database"))},a.onsuccess=()=>{this.db=a.result;const i=Object.values(te),l=i.filter(c=>!this.db.objectStoreNames.contains(c));if(l.length>0){console.error("Missing object stores:",l),console.log("Available stores:",Array.from(this.db.objectStoreNames)),console.log("Required stores:",i),this.db.close();const c=indexedDB.deleteDatabase(Ac);c.onsuccess=()=>{console.log("Database deleted, reinitializing..."),this.init().then(n).catch(s)},c.onerror=()=>{s(new Error("Failed to recreate database"))};return}console.log("IndexedDB initialized successfully with stores:",Array.from(this.db.objectStoreNames)),n()},a.onupgradeneeded=i=>{const l=i.target.result;console.log("Database upgrade needed from version",i.oldVersion,"to",i.newVersion),l.objectStoreNames.contains(te.USER_DATA)||(l.createObjectStore(te.USER_DATA),console.log("Created store:",te.USER_DATA)),l.objectStoreNames.contains(te.CHARACTERS)||(l.createObjectStore(te.CHARACTERS),console.log("Created store:",te.CHARACTERS)),l.objectStoreNames.contains(te.CHATS)||(l.createObjectStore(te.CHATS),console.log("Created store:",te.CHATS)),l.objectStoreNames.contains(te.CHAT_MESSAGES)||(l.createObjectStore(te.CHAT_MESSAGES),console.log("Created store:",te.CHAT_MESSAGES)),l.objectStoreNames.contains(te.CHAT_SETTINGS)||(l.createObjectStore(te.CHAT_SETTINGS),console.log("Created store:",te.CHAT_SETTINGS)),l.objectStoreNames.contains(te.WORLD_BOOKS)||(l.createObjectStore(te.WORLD_BOOKS),console.log("Created store:",te.WORLD_BOOKS)),l.objectStoreNames.contains(te.API_SETTINGS)||(l.createObjectStore(te.API_SETTINGS),console.log("Created store:",te.API_SETTINGS)),l.objectStoreNames.contains(te.APPEARANCE)||(l.createObjectStore(te.APPEARANCE),console.log("Created store:",te.APPEARANCE)),l.objectStoreNames.contains(te.MISC)||(l.createObjectStore(te.MISC),console.log("Created store:",te.MISC)),l.objectStoreNames.contains(te.STICKERS)||(l.createObjectStore(te.STICKERS),console.log("Created store:",te.STICKERS)),l.objectStoreNames.contains(te.BUBBLE_PRESETS)||(l.createObjectStore(te.BUBBLE_PRESETS),console.log("Created store:",te.BUBBLE_PRESETS)),l.objectStoreNames.contains(te.AI_TASKS)||(l.createObjectStore(te.AI_TASKS),console.log("Created store:",te.AI_TASKS)),l.objectStoreNames.contains(te.HEALTH)||(l.createObjectStore(te.HEALTH),console.log("Created store:",te.HEALTH)),l.objectStoreNames.contains(te.SCHEDULE)||(l.createObjectStore(te.SCHEDULE),console.log("Created store:",te.SCHEDULE)),l.objectStoreNames.contains(te.TRANSACTIONS)||(l.createObjectStore(te.TRANSACTIONS),console.log("Created store:",te.TRANSACTIONS))}})}validateStore(n){if(!this.db)throw new Error("Database not initialized");if(!this.db.objectStoreNames.contains(n))throw new Error(`Store "${n}" does not exist. Available stores: ${Array.from(this.db.objectStoreNames).join(", ")}`)}async get(n,s){return this.db||await this.init(),this.validateStore(n),new Promise((a,i)=>{try{const d=this.db.transaction(n,"readonly").objectStore(n).get(s);d.onsuccess=()=>{a(d.result||null)},d.onerror=()=>{i(new Error(`Failed to get data from ${n}: ${d.error}`))}}catch(l){i(l)}})}async set(n,s,a){return this.db||await this.init(),this.validateStore(n),new Promise((i,l)=>{try{const u=this.db.transaction(n,"readwrite").objectStore(n).put(a,s);u.onsuccess=()=>{i()},u.onerror=()=>{l(new Error(`Failed to set data in ${n}: ${u.error}`))}}catch(c){l(c)}})}async delete(n,s){return this.db||await this.init(),this.validateStore(n),new Promise((a,i)=>{try{const d=this.db.transaction(n,"readwrite").objectStore(n).delete(s);d.onsuccess=()=>{a()},d.onerror=()=>{i(new Error(`Failed to delete data from ${n}: ${d.error}`))}}catch(l){i(l)}})}async getAllKeys(n){return this.db||await this.init(),this.validateStore(n),new Promise((s,a)=>{try{const c=this.db.transaction(n,"readonly").objectStore(n).getAllKeys();c.onsuccess=()=>{s(c.result)},c.onerror=()=>{a(new Error(`Failed to get all keys from ${n}: ${c.error}`))}}catch(i){a(i)}})}async getAll(n){this.db||await this.init();const s=await this.getAllKeys(n),a={};for(const i of s){const l=await this.get(n,i);l!==null&&(a[i]=l)}return a}async clear(n){return this.db||await this.init(),this.validateStore(n),new Promise((s,a)=>{try{const c=this.db.transaction(n,"readwrite").objectStore(n).clear();c.onsuccess=()=>{s()},c.onerror=()=>{a(new Error(`Failed to clear ${n}: ${c.error}`))}}catch(i){a(i)}})}async clearAll(){this.db||await this.init();const n=Object.values(te);for(const s of n)await this.clear(s)}async getStoreSize(n){const s=await this.getAll(n),a=JSON.stringify(s);return new Blob([a]).size}async exportAll(){this.db||await this.init();const n={},s=Object.values(te);for(const a of s)n[a]=await this.getAll(a);return n}async importAll(n){this.db||await this.init();for(const[s,a]of Object.entries(n))if(Object.values(te).includes(s)){await this.clear(s);for(const[i,l]of Object.entries(a))await this.set(s,i,l)}}async migrateFromLocalStorage(){if(!await this.get(te.MISC,"migrated_from_localstorage")){console.log("localStorageIndexedDB...");try{const s=localStorage.getItem("userData");s&&await this.set(te.USER_DATA,"userData",JSON.parse(s));const a=localStorage.getItem("user_description");a&&await this.set(te.USER_DATA,"user_description",a);const i=localStorage.getItem("characters");i&&await this.set(te.CHARACTERS,"characters",JSON.parse(i));const l=localStorage.getItem("chat_list");l&&await this.set(te.CHATS,"chat_list",JSON.parse(l));for(let p=0;p<localStorage.length;p++){const f=localStorage.key(p);if(f&&f.startsWith("chat_messages_")){const x=localStorage.getItem(f);x&&await this.set(te.CHAT_MESSAGES,f,JSON.parse(x))}}const c=localStorage.getItem("chat_settings");c&&await this.set(te.CHAT_SETTINGS,"chat_settings",JSON.parse(c));for(let p=0;p<localStorage.length;p++){const f=localStorage.key(p);if(f&&f.startsWith("chat_detail_settings_")){const x=localStorage.getItem(f);x&&await this.set(te.CHAT_SETTINGS,f,JSON.parse(x))}}const d=localStorage.getItem("world_books");d&&await this.set(te.WORLD_BOOKS,"world_books",JSON.parse(d));for(let p=0;p<localStorage.length;p++){const f=localStorage.key(p);if(f&&f.startsWith("api_")){const x=localStorage.getItem(f);if(x)try{await this.set(te.API_SETTINGS,f,JSON.parse(x))}catch{await this.set(te.API_SETTINGS,f,x)}}}const u=localStorage.getItem("accent_color");u&&await this.set(te.APPEARANCE,"accent_color",u);const m=localStorage.getItem("dark_mode");m&&await this.set(te.APPEARANCE,"dark_mode",m);for(let p=0;p<localStorage.length;p++){const f=localStorage.key(p);if(f&&(f.startsWith("desktop")||f.startsWith("image_")||f.startsWith("customText")||f.includes("wallpaper")||f.includes("color")||f.includes("font")||f==="organizations")){const x=localStorage.getItem(f);if(x)try{await this.set(te.MISC,f,JSON.parse(x))}catch{await this.set(te.MISC,f,x)}}}await this.set(te.MISC,"migrated_from_localstorage",!0),console.log("")}catch(s){throw console.error(":",s),s}}}};const ae=new f6;async function h6(){console.log("=== Database Diagnosis ===");try{await ae.init(),console.log(" Database initialized successfully");const e=ae.db;if(e){const n=Array.from(e.objectStoreNames);console.log("Available stores:",n);const a=Object.values(te).filter(l=>!n.includes(l));a.length>0?(console.error(" Missing stores:",a),console.log("Attempting to recreate database..."),e.close(),await new Promise((l,c)=>{const d=indexedDB.deleteDatabase(Ac);d.onsuccess=()=>{console.log("Database deleted successfully"),l()},d.onerror=()=>{console.error("Failed to delete database"),c(d.error)}}),await ae.init(),console.log(" Database recreated successfully")):console.log(" All required stores are present"),await ae.set(te.MISC,"test_key","test_value"),await ae.get(te.MISC,"test_key")==="test_value"?(console.log(" Read/write operations working"),await ae.delete(te.MISC,"test_key")):console.error(" Read/write operations failed")}console.log("=== Diagnosis Complete ===")}catch(e){throw console.error(" Database diagnosis failed:",e),e}}typeof window<"u"&&(window.diagnoseDatabaseIssues=h6,window.clearDatabase=async()=>{const e=ae.db;e&&e.close(),await new Promise(n=>{const s=indexedDB.deleteDatabase(Ac);s.onsuccess=()=>{console.log("Database cleared successfully. Please refresh the page."),n()}})});/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),m6=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,s,a)=>a?a.toUpperCase():s.toLowerCase()),_g=e=>{const n=m6(e);return n.charAt(0).toUpperCase()+n.slice(1)},av=(...e)=>e.filter((n,s,a)=>!!n&&n.trim()!==""&&a.indexOf(n)===s).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var x6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6=j.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:i="",children:l,iconNode:c,...d},u)=>j.createElement("svg",{ref:u,...x6,width:n,height:n,stroke:e,strokeWidth:a?Number(s)*24/Number(n):s,className:av("lucide",i),...d},[...c.map(([m,p])=>j.createElement(m,p)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=(e,n)=>{const s=j.forwardRef(({className:a,...i},l)=>j.createElement(g6,{ref:l,iconNode:n,className:av(`lucide-${p6(_g(e))}`,`lucide-${e}`,a),...i}));return s.displayName=_g(e),s};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Ec=Ee("activity",b6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],y6=Ee("align-left",v6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=[["path",{d:"M12 22V8",key:"qkxhtm"}],["path",{d:"M5 12H2a10 10 0 0 0 20 0h-3",key:"1hv3nh"}],["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}]],S6=Ee("anchor",w6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k6=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Tc=Ee("archive",k6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j6=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],N6=Ee("arrow-down-left",j6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Zf=Ee("arrow-left",C6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],A6=Ee("arrow-right",_6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],T6=Ee("arrow-up-right",E6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D6=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],F6=Ee("arrow-up",D6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]],I6=Ee("battery",M6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],R6=Ee("book-open",P6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],L6=Ee("book",B6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],O6=Ee("bookmark",z6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $6=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Ag=Ee("box",$6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],iv=Ee("brain",V6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H6=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m14 14-4 4",key:"rymu2i"}],["path",{d:"m10 14 4 4",key:"3sz06r"}]],Eg=Ee("calendar-x",H6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ur=Ee("calendar",U6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W6=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],tp=Ee("camera",W6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=[["path",{d:"M22 20v-9H2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2Z",key:"109fe4"}],["path",{d:"M18 11V4H6v7",key:"mon5oj"}],["path",{d:"M15 22v-4a3 3 0 0 0-3-3a3 3 0 0 0-3 3v4",key:"1k4jtn"}],["path",{d:"M22 11V9",key:"3zbp94"}],["path",{d:"M2 11V9",key:"1x5rnq"}],["path",{d:"M6 4V2",key:"1rsq15"}],["path",{d:"M18 4V2",key:"1jsdo1"}],["path",{d:"M10 4V2",key:"75d9ly"}],["path",{d:"M14 4V2",key:"8nj3z6"}]],G6=Ee("castle",K6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],wt=Ee("check",Y6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q6=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ba=Ee("chevron-down",q6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],an=Ee("chevron-left",Z6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],os=Ee("chevron-right",Q6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],J6=Ee("chevron-up",X6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],np=Ee("circle-alert",e_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],n_=Ee("circle-arrow-up",t_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],r_=Ee("circle-check",s_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],i_=Ee("circle",a_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Eo=Ee("clock",o_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],c_=Ee("cloud",l_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],u_=Ee("coins",d_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],h_=Ee("copy",f_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],sp=Ee("credit-card",p_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],ov=Ee("database",m_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x_=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],g_=Ee("download",x_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],v_=Ee("ellipsis",b_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]],w_=Ee("eraser",y_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]],rp=Ee("file-pen-line",S_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ap=Ee("file-text",k_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],N_=Ee("flag",j_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],lv=Ee("flame",C_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=[["path",{d:"M12 5a3 3 0 1 1 3 3m-3-3a3 3 0 1 0-3 3m3-3v1M9 8a3 3 0 1 0 3 3M9 8h1m5 0a3 3 0 1 1-3 3m3-3h-1m-2 3v-1",key:"3pnvol"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M12 10v12",key:"6ubwww"}],["path",{d:"M12 22c4.2 0 7-1.667 7-5-4.2 0-7 1.667-7 5Z",key:"9hd38g"}],["path",{d:"M12 22c-4.2 0-7-1.667-7-5 4.2 0 7 1.667 7 5Z",key:"ufn41s"}]],cv=Ee("flower-2",__);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],E_=Ee("gift",A_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],dv=Ee("globe",T_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],F_=Ee("grid-3x3",D_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],I_=Ee("hard-drive",M_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],mc=Ee("hash",P_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],B_=Ee("heart",R_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],z_=Ee("house",L_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],va=Ee("image",O_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],V_=Ee("info",$_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Tg=Ee("key",H_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],W_=Ee("layers",U_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],uv=Ee("layout-grid",K_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],Dg=Ee("library",G_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],q_=Ee("list",Y_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Q_=Ee("loader-circle",Z_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Fg=Ee("mail",X_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Qf=Ee("map-pin",J_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e8=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],Mg=Ee("message-circle",e8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t8=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M13 8H7",key:"14i4kc"}],["path",{d:"M17 12H7",key:"16if0g"}]],n8=Ee("message-square-text",t8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s8=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],r8=Ee("message-square",s8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=[["path",{d:"M5 12h14",key:"1ays0h"}]],ip=Ee("minus",a8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],o8=Ee("monitor",i8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l8=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],fv=Ee("moon",l8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c8=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Sa=Ee("package",c8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d8=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],u8=Ee("palette",d8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f8=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],h8=Ee("pen-line",f8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p8=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],m8=Ee("pencil",p8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x8=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],g8=Ee("pin",x8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b8=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],is=Ee("plus",b8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v8=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],mf=Ee("refresh-cw",v8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y8=[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]],w8=Ee("reply",y8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S8=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],k8=Ee("rotate-ccw",S8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j8=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ei=Ee("save",j8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N8=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],_a=Ee("search",N8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C8=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],_8=Ee("send",C8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A8=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],Dc=Ee("server",A8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],T8=Ee("settings-2",E8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D8=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Bo=Ee("settings",D8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],op=Ee("share-2",F8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M8=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]],I8=Ee("share",M8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P8=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Xf=Ee("shield-check",P8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],B8=Ee("shield",R8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],lp=Ee("shopping-bag",L8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z8=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],O8=Ee("smartphone",z8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],V8=Ee("smile",$8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H8=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],U8=Ee("sparkles",H8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W8=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],K8=Ee("square-check-big",W8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G8=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M19.27 13.73A2.5 2.5 0 0 0 17.5 13h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-1.5c0-.66-.26-1.3-.73-1.77Z",key:"1sy9ra"}],["path",{d:"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-3-3c-1.66 0-3 1-3 3s1 2 1 3.5V13",key:"cnxgux"}]],Y8=Ee("stamp",G8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q8=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],hv=Ee("star",q8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z8=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],pv=Ee("stethoscope",Z8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q8=[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M14 3v4a2 2 0 0 0 2 2h4",key:"36rjfy"}],["path",{d:"M8 13h.01",key:"1sbv64"}],["path",{d:"M16 13h.01",key:"wip0gl"}],["path",{d:"M10 16s.8 1 2 1c1.3 0 2-1 2-1",key:"1vvgv3"}]],X8=Ee("sticker",Q8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J8=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],e7=Ee("store",J8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],n7=Ee("sun",t7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s7=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],r7=Ee("sword",s7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a7=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],i7=Ee("swords",a7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o7=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],l7=Ee("table",o7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c7=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Ig=Ee("tag",c7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d7=[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]],mv=Ee("terminal",d7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u7=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],f7=Ee("thumbs-down",u7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h7=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],p7=Ee("thumbs-up",h7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m7=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Dn=Ee("trash-2",m7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x7=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],g7=Ee("triangle-alert",x7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b7=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],cp=Ee("upload",b7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v7=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],y7=Ee("user-plus",v7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w7=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],An=Ee("user",w7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S7=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],qc=Ee("users",S7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k7=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],j7=Ee("waves",k7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N7=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],C7=Ee("wifi",N7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _7=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ht=Ee("x",_7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A7=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],xv=Ee("zap",A7);function E7({onLoginSuccess:e}){const[n,s]=j.useState({name:"",country:"",fortress:"",date:""}),[a,i]=j.useState(!1),[l,c]=j.useState(!1),d=()=>{if(!n.name||!n.country||!n.fortress||!n.date){c(!0);return}i(!0),setTimeout(async()=>{await ae.set(te.USER_DATA,"userData",n),e(n),i(!1)},2e3)};return t.jsxs("div",{className:"min-h-screen w-full bg-[#F2F0EB] flex flex-col items-center justify-center p-6 font-['Source_Han_Sans_CN_VF',sans-serif] relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.03]",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),t.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-blue-100/50 rounded-full blur-3xl pointer-events-none"}),t.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-gray-200/50 rounded-full blur-3xl pointer-events-none"}),t.jsxs(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"w-full max-w-md relative z-10",children:[t.jsxs("div",{className:"flex flex-col items-center mb-8",children:[t.jsx(xe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8,delay:.2},className:"w-32 h-32 mb-6 drop-shadow-2xl",children:t.jsx("img",{alt:"Touken OS Logo",className:"w-full h-full object-contain",src:Kh})}),t.jsxs("div",{className:"text-center space-y-2",children:[t.jsx("h1",{className:"text-2xl font-bold text-[#2C2C2C] tracking-tight",children:""}),t.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs font-mono text-[#8C8C89] uppercase tracking-widest bg-white/50 py-1 px-3 rounded-full border border-[#D6D3CC]",children:[t.jsx(Xf,{className:"w-3 h-3"}),"Secure Connection"]})]})]}),t.jsxs("div",{className:"bg-white/80 backdrop-blur-xl shadow-[0_8px_30px_rgb(0,0,0,0.04)] rounded-2xl overflow-hidden border border-white",children:[t.jsx("div",{className:"h-1.5 w-full bg-[#2C2C2C]"}),t.jsxs("div",{className:"p-8 space-y-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-1.5",children:[t.jsxs("label",{className:"text-[10px] font-bold text-[#8C8C89] uppercase tracking-wider flex items-center gap-1.5",children:[t.jsx(An,{className:"w-3 h-3"})," "]}),t.jsx("input",{type:"text",value:n.name,onChange:u=>s({...n,name:u.target.value}),placeholder:"",className:"w-full bg-[#F9F9F7] border-b-2 border-[#E5E5E5] px-3 py-2.5 text-sm font-medium text-[#2C2C2C] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-all rounded-t-md placeholder:text-[#BBB]"})]}),t.jsxs("div",{className:"space-y-1.5",children:[t.jsxs("label",{className:"text-[10px] font-bold text-[#8C8C89] uppercase tracking-wider flex items-center gap-1.5",children:[t.jsx(Qf,{className:"w-3 h-3"})," "]}),t.jsx("input",{type:"text",value:n.country,onChange:u=>s({...n,country:u.target.value}),placeholder:" (: )",className:"w-full bg-[#F9F9F7] border-b-2 border-[#E5E5E5] px-3 py-2.5 text-sm font-medium text-[#2C2C2C] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-all rounded-t-md placeholder:text-[#BBB]"})]}),t.jsxs("div",{className:"space-y-1.5",children:[t.jsxs("label",{className:"text-[10px] font-bold text-[#8C8C89] uppercase tracking-wider flex items-center gap-1.5",children:[t.jsx(z_,{className:"w-3 h-3"})," "]}),t.jsx("input",{type:"text",value:n.fortress,onChange:u=>s({...n,fortress:u.target.value}),placeholder:"",className:"w-full bg-[#F9F9F7] border-b-2 border-[#E5E5E5] px-3 py-2.5 text-sm font-medium text-[#2C2C2C] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-all rounded-t-md placeholder:text-[#BBB]"})]}),t.jsxs("div",{className:"space-y-1.5",children:[t.jsxs("label",{className:"text-[10px] font-bold text-[#8C8C89] uppercase tracking-wider flex items-center gap-1.5",children:[t.jsx(ur,{className:"w-3 h-3"})," "]}),t.jsx("input",{type:"date",value:n.date,onChange:u=>s({...n,date:u.target.value}),className:"w-full bg-[#F9F9F7] border-b-2 border-[#E5E5E5] px-3 py-2.5 text-sm font-medium text-[#2C2C2C] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-all rounded-t-md placeholder:text-[#BBB] font-mono"})]})]}),t.jsx("button",{onClick:d,disabled:a,className:"w-full h-12 bg-[#2C2C2C] active:bg-black hover:bg-black text-white rounded-lg font-bold text-sm tracking-widest uppercase transition-all active:scale-[0.98] shadow-lg flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed group",children:a?t.jsxs(t.Fragment,{children:[t.jsx(Q_,{className:"w-4 h-4 animate-spin"}),"Connecting..."]}):t.jsxs(t.Fragment,{children:["",t.jsx(A6,{className:"w-4 h-4 group-active:translate-x-1 group-hover:translate-x-1 transition-transform"})]})})]}),t.jsxs("div",{className:"px-8 py-4 bg-[#F9F9F7] border-t border-[#E5E5E5] flex justify-between items-center text-[10px] text-[#8C8C89] font-mono",children:[t.jsx("span",{children:"SYSTEM: ONLINE"}),t.jsx("span",{children:"VER: 1.0"})]})]})]}),t.jsx(a6,{open:l,onOpenChange:c,children:t.jsxs(o6,{className:"bg-[#F9F9F7] border border-[#D6D3CC] max-w-[320px] rounded-lg",children:[t.jsxs(l6,{className:"text-[#2C2C2C] font-bold flex items-center gap-2",children:[t.jsx(Xf,{className:"w-5 h-5 text-[#B93636]"}),""]}),t.jsx(c6,{className:"text-[#5A5A55] text-xs",children:""}),t.jsx("div",{className:"flex justify-end mt-4",children:t.jsx(d6,{onClick:()=>c(!1),className:"bg-[#2C2C2C] text-white active:bg-black hover:bg-black text-xs font-bold px-4 h-8 rounded-md",children:""})})]})})]})}function T7(e){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",n.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}const D7=e=>{switch(e){case"success":return I7;case"info":return R7;case"warning":return P7;case"error":return B7;default:return null}},F7=Array(12).fill(0),M7=({visible:e,className:n})=>Re.createElement("div",{className:["sonner-loading-wrapper",n].filter(Boolean).join(" "),"data-visible":e},Re.createElement("div",{className:"sonner-spinner"},F7.map((s,a)=>Re.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${a}`})))),I7=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),P7=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),R7=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),B7=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),L7=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Re.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Re.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),z7=()=>{const[e,n]=Re.useState(document.hidden);return Re.useEffect(()=>{const s=()=>{n(document.hidden)};return document.addEventListener("visibilitychange",s),()=>window.removeEventListener("visibilitychange",s)},[]),e};let Jf=1;class O7{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{const s=this.subscribers.indexOf(n);this.subscribers.splice(s,1)}),this.publish=n=>{this.subscribers.forEach(s=>s(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var s;const{message:a,...i}=n,l=typeof n?.id=="number"||((s=n.id)==null?void 0:s.length)>0?n.id:Jf++,c=this.toasts.find(u=>u.id===l),d=n.dismissible===void 0?!0:n.dismissible;return this.dismissedToasts.has(l)&&this.dismissedToasts.delete(l),c?this.toasts=this.toasts.map(u=>u.id===l?(this.publish({...u,...n,id:l,title:a}),{...u,...n,id:l,dismissible:d,title:a}):u):this.addToast({title:a,...i,dismissible:d,id:l}),l},this.dismiss=n=>(n?(this.dismissedToasts.add(n),requestAnimationFrame(()=>this.subscribers.forEach(s=>s({id:n,dismiss:!0})))):this.toasts.forEach(s=>{this.subscribers.forEach(a=>a({id:s.id,dismiss:!0}))}),n),this.message=(n,s)=>this.create({...s,message:n}),this.error=(n,s)=>this.create({...s,message:n,type:"error"}),this.success=(n,s)=>this.create({...s,type:"success",message:n}),this.info=(n,s)=>this.create({...s,type:"info",message:n}),this.warning=(n,s)=>this.create({...s,type:"warning",message:n}),this.loading=(n,s)=>this.create({...s,type:"loading",message:n}),this.promise=(n,s)=>{if(!s)return;let a;s.loading!==void 0&&(a=this.create({...s,promise:n,type:"loading",message:s.loading,description:typeof s.description!="function"?s.description:void 0}));const i=Promise.resolve(n instanceof Function?n():n);let l=a!==void 0,c;const d=i.then(async m=>{if(c=["resolve",m],Re.isValidElement(m))l=!1,this.create({id:a,type:"default",message:m});else if(V7(m)&&!m.ok){l=!1;const f=typeof s.error=="function"?await s.error(`HTTP error! status: ${m.status}`):s.error,x=typeof s.description=="function"?await s.description(`HTTP error! status: ${m.status}`):s.description,y=typeof f=="object"&&!Re.isValidElement(f)?f:{message:f};this.create({id:a,type:"error",description:x,...y})}else if(m instanceof Error){l=!1;const f=typeof s.error=="function"?await s.error(m):s.error,x=typeof s.description=="function"?await s.description(m):s.description,y=typeof f=="object"&&!Re.isValidElement(f)?f:{message:f};this.create({id:a,type:"error",description:x,...y})}else if(s.success!==void 0){l=!1;const f=typeof s.success=="function"?await s.success(m):s.success,x=typeof s.description=="function"?await s.description(m):s.description,y=typeof f=="object"&&!Re.isValidElement(f)?f:{message:f};this.create({id:a,type:"success",description:x,...y})}}).catch(async m=>{if(c=["reject",m],s.error!==void 0){l=!1;const p=typeof s.error=="function"?await s.error(m):s.error,f=typeof s.description=="function"?await s.description(m):s.description,b=typeof p=="object"&&!Re.isValidElement(p)?p:{message:p};this.create({id:a,type:"error",description:f,...b})}}).finally(()=>{l&&(this.dismiss(a),a=void 0),s.finally==null||s.finally.call(s)}),u=()=>new Promise((m,p)=>d.then(()=>c[0]==="reject"?p(c[1]):m(c[1])).catch(p));return typeof a!="string"&&typeof a!="number"?{unwrap:u}:Object.assign(a,{unwrap:u})},this.custom=(n,s)=>{const a=s?.id||Jf++;return this.create({jsx:n(a),id:a,...s}),a},this.getActiveToasts=()=>this.toasts.filter(n=>!this.dismissedToasts.has(n.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const qn=new O7,$7=(e,n)=>{const s=n?.id||Jf++;return qn.addToast({title:e,...n,id:s}),s},V7=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",H7=$7,U7=()=>qn.toasts,W7=()=>qn.getActiveToasts(),Br=Object.assign(H7,{success:qn.success,info:qn.info,warning:qn.warning,error:qn.error,custom:qn.custom,message:qn.message,promise:qn.promise,dismiss:qn.dismiss,loading:qn.loading},{getHistory:U7,getToasts:W7});T7("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function rc(e){return e.label!==void 0}const K7=3,G7="24px",Y7="16px",Pg=4e3,q7=356,Z7=14,Q7=45,X7=200;function $s(...e){return e.filter(Boolean).join(" ")}function J7(e){const[n,s]=e.split("-"),a=[];return n&&a.push(n),s&&a.push(s),a}const eA=e=>{var n,s,a,i,l,c,d,u,m;const{invert:p,toast:f,unstyled:x,interacting:b,setHeights:y,visibleToasts:g,heights:k,index:w,toasts:C,expanded:N,removeToast:A,defaultRichColors:P,closeButton:B,style:$,cancelButtonStyle:D,actionButtonStyle:T,className:H="",descriptionClassName:K="",duration:E,position:I,gap:S,expandByDefault:L,classNames:z,icons:R,closeButtonAriaLabel:U="Close toast"}=e,[W,Z]=Re.useState(null),[O,V]=Re.useState(null),[ee,q]=Re.useState(!1),[G,Q]=Re.useState(!1),[le,ne]=Re.useState(!1),[ie,ve]=Re.useState(!1),[se,ge]=Re.useState(!1),[Me,M]=Re.useState(0),[me,he]=Re.useState(0),J=Re.useRef(f.duration||E||Pg),X=Re.useRef(null),oe=Re.useRef(null),ke=w===0,Ne=w+1<=g,de=f.type,fe=f.dismissible!==!1,_e=f.className||"",Se=f.descriptionClassName||"",Be=Re.useMemo(()=>k.findIndex(Xe=>Xe.toastId===f.id)||0,[k,f.id]),ot=Re.useMemo(()=>{var Xe;return(Xe=f.closeButton)!=null?Xe:B},[f.closeButton,B]),Ce=Re.useMemo(()=>f.duration||E||Pg,[f.duration,E]),Ue=Re.useRef(0),Ze=Re.useRef(0),et=Re.useRef(0),ut=Re.useRef(null),[tt,Mt]=I.split("-"),Ct=Re.useMemo(()=>k.reduce((Xe,kt,Lt)=>Lt>=Be?Xe:Xe+kt.height,0),[k,Be]),_t=z7(),Fn=f.invert||p,on=de==="loading";Ze.current=Re.useMemo(()=>Be*S+Ct,[Be,Ct]),Re.useEffect(()=>{J.current=Ce},[Ce]),Re.useEffect(()=>{q(!0)},[]),Re.useEffect(()=>{const Xe=oe.current;if(Xe){const kt=Xe.getBoundingClientRect().height;return he(kt),y(Lt=>[{toastId:f.id,height:kt,position:f.position},...Lt]),()=>y(Lt=>Lt.filter(jt=>jt.toastId!==f.id))}},[y,f.id]),Re.useLayoutEffect(()=>{if(!ee)return;const Xe=oe.current,kt=Xe.style.height;Xe.style.height="auto";const Lt=Xe.getBoundingClientRect().height;Xe.style.height=kt,he(Lt),y(jt=>jt.find(Gt=>Gt.toastId===f.id)?jt.map(Gt=>Gt.toastId===f.id?{...Gt,height:Lt}:Gt):[{toastId:f.id,height:Lt,position:f.position},...jt])},[ee,f.title,f.description,y,f.id,f.jsx,f.action,f.cancel]);const Zt=Re.useCallback(()=>{Q(!0),M(Ze.current),y(Xe=>Xe.filter(kt=>kt.toastId!==f.id)),setTimeout(()=>{A(f)},X7)},[f,A,y,Ze]);Re.useEffect(()=>{if(f.promise&&de==="loading"||f.duration===1/0||f.type==="loading")return;let Xe;return N||b||_t?(()=>{if(et.current<Ue.current){const jt=new Date().getTime()-Ue.current;J.current=J.current-jt}et.current=new Date().getTime()})():(()=>{J.current!==1/0&&(Ue.current=new Date().getTime(),Xe=setTimeout(()=>{f.onAutoClose==null||f.onAutoClose.call(f,f),Zt()},J.current))})(),()=>clearTimeout(Xe)},[N,b,f,de,_t,Zt]),Re.useEffect(()=>{f.delete&&(Zt(),f.onDismiss==null||f.onDismiss.call(f,f))},[Zt,f.delete]);function Mn(){var Xe;if(R?.loading){var kt;return Re.createElement("div",{className:$s(z?.loader,f==null||(kt=f.classNames)==null?void 0:kt.loader,"sonner-loader"),"data-visible":de==="loading"},R.loading)}return Re.createElement(M7,{className:$s(z?.loader,f==null||(Xe=f.classNames)==null?void 0:Xe.loader),visible:de==="loading"})}const pn=f.icon||R?.[de]||D7(de);var St,Qt;return Re.createElement("li",{tabIndex:0,ref:oe,className:$s(H,_e,z?.toast,f==null||(n=f.classNames)==null?void 0:n.toast,z?.default,z?.[de],f==null||(s=f.classNames)==null?void 0:s[de]),"data-sonner-toast":"","data-rich-colors":(St=f.richColors)!=null?St:P,"data-styled":!(f.jsx||f.unstyled||x),"data-mounted":ee,"data-promise":!!f.promise,"data-swiped":se,"data-removed":G,"data-visible":Ne,"data-y-position":tt,"data-x-position":Mt,"data-index":w,"data-front":ke,"data-swiping":le,"data-dismissible":fe,"data-type":de,"data-invert":Fn,"data-swipe-out":ie,"data-swipe-direction":O,"data-expanded":!!(N||L&&ee),"data-testid":f.testId,style:{"--index":w,"--toasts-before":w,"--z-index":C.length-w,"--offset":`${G?Me:Ze.current}px`,"--initial-height":L?"auto":`${me}px`,...$,...f.style},onDragEnd:()=>{ne(!1),Z(null),ut.current=null},onPointerDown:Xe=>{Xe.button!==2&&(on||!fe||(X.current=new Date,M(Ze.current),Xe.target.setPointerCapture(Xe.pointerId),Xe.target.tagName!=="BUTTON"&&(ne(!0),ut.current={x:Xe.clientX,y:Xe.clientY})))},onPointerUp:()=>{var Xe,kt,Lt;if(ie||!fe)return;ut.current=null;const jt=Number(((Xe=oe.current)==null?void 0:Xe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Kt=Number(((kt=oe.current)==null?void 0:kt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Gt=new Date().getTime()-((Lt=X.current)==null?void 0:Lt.getTime()),Xt=W==="x"?jt:Kt,vs=Math.abs(Xt)/Gt;if(Math.abs(Xt)>=Q7||vs>.11){M(Ze.current),f.onDismiss==null||f.onDismiss.call(f,f),V(W==="x"?jt>0?"right":"left":Kt>0?"down":"up"),Zt(),ve(!0);return}else{var tn,zn;(tn=oe.current)==null||tn.style.setProperty("--swipe-amount-x","0px"),(zn=oe.current)==null||zn.style.setProperty("--swipe-amount-y","0px")}ge(!1),ne(!1),Z(null)},onPointerMove:Xe=>{var kt,Lt,jt;if(!ut.current||!fe||((kt=window.getSelection())==null?void 0:kt.toString().length)>0)return;const Gt=Xe.clientY-ut.current.y,Xt=Xe.clientX-ut.current.x;var vs;const tn=(vs=e.swipeDirections)!=null?vs:J7(I);!W&&(Math.abs(Xt)>1||Math.abs(Gt)>1)&&Z(Math.abs(Xt)>Math.abs(Gt)?"x":"y");let zn={x:0,y:0};const Ps=bn=>1/(1.5+Math.abs(bn)/20);if(W==="y"){if(tn.includes("top")||tn.includes("bottom"))if(tn.includes("top")&&Gt<0||tn.includes("bottom")&&Gt>0)zn.y=Gt;else{const bn=Gt*Ps(Gt);zn.y=Math.abs(bn)<Math.abs(Gt)?bn:Gt}}else if(W==="x"&&(tn.includes("left")||tn.includes("right")))if(tn.includes("left")&&Xt<0||tn.includes("right")&&Xt>0)zn.x=Xt;else{const bn=Xt*Ps(Xt);zn.x=Math.abs(bn)<Math.abs(Xt)?bn:Xt}(Math.abs(zn.x)>0||Math.abs(zn.y)>0)&&ge(!0),(Lt=oe.current)==null||Lt.style.setProperty("--swipe-amount-x",`${zn.x}px`),(jt=oe.current)==null||jt.style.setProperty("--swipe-amount-y",`${zn.y}px`)}},ot&&!f.jsx&&de!=="loading"?Re.createElement("button",{"aria-label":U,"data-disabled":on,"data-close-button":!0,onClick:on||!fe?()=>{}:()=>{Zt(),f.onDismiss==null||f.onDismiss.call(f,f)},className:$s(z?.closeButton,f==null||(a=f.classNames)==null?void 0:a.closeButton)},(Qt=R?.close)!=null?Qt:L7):null,(de||f.icon||f.promise)&&f.icon!==null&&(R?.[de]!==null||f.icon)?Re.createElement("div",{"data-icon":"",className:$s(z?.icon,f==null||(i=f.classNames)==null?void 0:i.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||Mn():null,f.type!=="loading"?pn:null):null,Re.createElement("div",{"data-content":"",className:$s(z?.content,f==null||(l=f.classNames)==null?void 0:l.content)},Re.createElement("div",{"data-title":"",className:$s(z?.title,f==null||(c=f.classNames)==null?void 0:c.title)},f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title),f.description?Re.createElement("div",{"data-description":"",className:$s(K,Se,z?.description,f==null||(d=f.classNames)==null?void 0:d.description)},typeof f.description=="function"?f.description():f.description):null),Re.isValidElement(f.cancel)?f.cancel:f.cancel&&rc(f.cancel)?Re.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||D,onClick:Xe=>{rc(f.cancel)&&fe&&(f.cancel.onClick==null||f.cancel.onClick.call(f.cancel,Xe),Zt())},className:$s(z?.cancelButton,f==null||(u=f.classNames)==null?void 0:u.cancelButton)},f.cancel.label):null,Re.isValidElement(f.action)?f.action:f.action&&rc(f.action)?Re.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||T,onClick:Xe=>{rc(f.action)&&(f.action.onClick==null||f.action.onClick.call(f.action,Xe),!Xe.defaultPrevented&&Zt())},className:$s(z?.actionButton,f==null||(m=f.classNames)==null?void 0:m.actionButton)},f.action.label):null)};function Rg(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function tA(e,n){const s={};return[e,n].forEach((a,i)=>{const l=i===1,c=l?"--mobile-offset":"--offset",d=l?Y7:G7;function u(m){["top","right","bottom","left"].forEach(p=>{s[`${c}-${p}`]=typeof m=="number"?`${m}px`:m})}typeof a=="number"||typeof a=="string"?u(a):typeof a=="object"?["top","right","bottom","left"].forEach(m=>{a[m]===void 0?s[`${c}-${m}`]=d:s[`${c}-${m}`]=typeof a[m]=="number"?`${a[m]}px`:a[m]}):u(d)}),s}const nA=Re.forwardRef(function(n,s){const{id:a,invert:i,position:l="bottom-right",hotkey:c=["altKey","KeyT"],expand:d,closeButton:u,className:m,offset:p,mobileOffset:f,theme:x="light",richColors:b,duration:y,style:g,visibleToasts:k=K7,toastOptions:w,dir:C=Rg(),gap:N=Z7,icons:A,containerAriaLabel:P="Notifications"}=n,[B,$]=Re.useState([]),D=Re.useMemo(()=>a?B.filter(ee=>ee.toasterId===a):B.filter(ee=>!ee.toasterId),[B,a]),T=Re.useMemo(()=>Array.from(new Set([l].concat(D.filter(ee=>ee.position).map(ee=>ee.position)))),[D,l]),[H,K]=Re.useState([]),[E,I]=Re.useState(!1),[S,L]=Re.useState(!1),[z,R]=Re.useState(x!=="system"?x:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),U=Re.useRef(null),W=c.join("+").replace(/Key/g,"").replace(/Digit/g,""),Z=Re.useRef(null),O=Re.useRef(!1),V=Re.useCallback(ee=>{$(q=>{var G;return(G=q.find(Q=>Q.id===ee.id))!=null&&G.delete||qn.dismiss(ee.id),q.filter(({id:Q})=>Q!==ee.id)})},[]);return Re.useEffect(()=>qn.subscribe(ee=>{if(ee.dismiss){requestAnimationFrame(()=>{$(q=>q.map(G=>G.id===ee.id?{...G,delete:!0}:G))});return}setTimeout(()=>{t2.flushSync(()=>{$(q=>{const G=q.findIndex(Q=>Q.id===ee.id);return G!==-1?[...q.slice(0,G),{...q[G],...ee},...q.slice(G+1)]:[ee,...q]})})})}),[B]),Re.useEffect(()=>{if(x!=="system"){R(x);return}if(x==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?R("dark"):R("light")),typeof window>"u")return;const ee=window.matchMedia("(prefers-color-scheme: dark)");try{ee.addEventListener("change",({matches:q})=>{R(q?"dark":"light")})}catch{ee.addListener(({matches:G})=>{try{R(G?"dark":"light")}catch(Q){console.error(Q)}})}},[x]),Re.useEffect(()=>{B.length<=1&&I(!1)},[B]),Re.useEffect(()=>{const ee=q=>{var G;if(c.every(ne=>q[ne]||q.code===ne)){var le;I(!0),(le=U.current)==null||le.focus()}q.code==="Escape"&&(document.activeElement===U.current||(G=U.current)!=null&&G.contains(document.activeElement))&&I(!1)};return document.addEventListener("keydown",ee),()=>document.removeEventListener("keydown",ee)},[c]),Re.useEffect(()=>{if(U.current)return()=>{Z.current&&(Z.current.focus({preventScroll:!0}),Z.current=null,O.current=!1)}},[U.current]),Re.createElement("section",{ref:s,"aria-label":`${P} ${W}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},T.map((ee,q)=>{var G;const[Q,le]=ee.split("-");return D.length?Re.createElement("ol",{key:ee,dir:C==="auto"?Rg():C,tabIndex:-1,ref:U,className:m,"data-sonner-toaster":!0,"data-sonner-theme":z,"data-y-position":Q,"data-x-position":le,style:{"--front-toast-height":`${((G=H[0])==null?void 0:G.height)||0}px`,"--width":`${q7}px`,"--gap":`${N}px`,...g,...tA(p,f)},onBlur:ne=>{O.current&&!ne.currentTarget.contains(ne.relatedTarget)&&(O.current=!1,Z.current&&(Z.current.focus({preventScroll:!0}),Z.current=null))},onFocus:ne=>{ne.target instanceof HTMLElement&&ne.target.dataset.dismissible==="false"||O.current||(O.current=!0,Z.current=ne.relatedTarget)},onMouseEnter:()=>I(!0),onMouseMove:()=>I(!0),onMouseLeave:()=>{S||I(!1)},onDragEnd:()=>I(!1),onPointerDown:ne=>{ne.target instanceof HTMLElement&&ne.target.dataset.dismissible==="false"||L(!0)},onPointerUp:()=>L(!1)},D.filter(ne=>!ne.position&&q===0||ne.position===ee).map((ne,ie)=>{var ve,se;return Re.createElement(eA,{key:ne.id,icons:A,index:ie,toast:ne,defaultRichColors:b,duration:(ve=w?.duration)!=null?ve:y,className:w?.className,descriptionClassName:w?.descriptionClassName,invert:i,visibleToasts:k,closeButton:(se=w?.closeButton)!=null?se:u,interacting:S,position:ee,style:w?.style,unstyled:w?.unstyled,classNames:w?.classNames,cancelButtonStyle:w?.cancelButtonStyle,actionButtonStyle:w?.actionButtonStyle,closeButtonAriaLabel:w?.closeButtonAriaLabel,removeToast:V,toasts:D.filter(ge=>ge.position==ne.position),heights:H.filter(ge=>ge.position==ne.position),setHeights:K,expandByDefault:d,gap:N,expanded:E,swipeDirections:n.swipeDirections})})):null}))}),Bg={p15366300:"M94 47C94 72.9574 72.9574 94 47 94C21.0426 94 0 72.9574 0 47C0 21.0426 21.0426 0 47 0C72.9574 0 94 21.0426 94 47Z",p3086ef80:"M3.5 1.67073L0 5.77489e-08V4.04145L3.5 2.37073V1.67073ZM313.5 2.37073L317 4.04145V5.77489e-08L313.5 1.67073V2.37073ZM4.48585 2.02073V2.37073H7.47641V2.02073V1.67073H4.48585V2.02073ZM10.467 2.02073V2.37073H13.4575V2.02073V1.67073H10.467V2.02073ZM16.4481 2.02073V2.37073H19.4387V2.02073V1.67073H16.4481V2.02073ZM22.4292 2.02073V2.37073H25.4198V2.02073V1.67073H22.4292V2.02073ZM28.4104 2.02073V2.37073H31.4009V2.02073V1.67073H28.4104V2.02073ZM34.3915 2.02073V2.37073H37.3821V2.02073V1.67073H34.3915V2.02073ZM40.3726 2.02073V2.37073H43.3632V2.02073V1.67073H40.3726V2.02073ZM46.3538 2.02073V2.37073H49.3443V2.02073V1.67073H46.3538V2.02073ZM52.3349 2.02073V2.37073H55.3255V2.02073V1.67073H52.3349V2.02073ZM58.316 2.02073V2.37073H61.3066V2.02073V1.67073H58.316V2.02073ZM64.2972 2.02073V2.37073H67.2877V2.02073V1.67073H64.2972V2.02073ZM70.2783 2.02073V2.37073H73.2689V2.02073V1.67073H70.2783V2.02073ZM76.2594 2.02073V2.37073H79.25V2.02073V1.67073H76.2594V2.02073ZM82.2405 2.02073V2.37073H85.2311V2.02073V1.67073H82.2405V2.02073ZM88.2217 2.02073V2.37073H91.2122V2.02073V1.67073H88.2217V2.02073ZM94.2028 2.02073V2.37073H97.1934V2.02073V1.67073H94.2028V2.02073ZM100.184 2.02073V2.37073H103.174V2.02073V1.67073H100.184V2.02073ZM106.165 2.02073V2.37073H109.156V2.02073V1.67073H106.165V2.02073ZM112.146 2.02073V2.37073H115.137V2.02073V1.67073H112.146V2.02073ZM118.127 2.02073V2.37073H121.118V2.02073V1.67073H118.127V2.02073ZM124.108 2.02073V2.37073H127.099V2.02073V1.67073H124.108V2.02073ZM130.09 2.02073V2.37073H133.08V2.02073V1.67073H130.09V2.02073ZM136.071 2.02073V2.37073H139.061V2.02073V1.67073H136.071V2.02073ZM142.052 2.02073V2.37073H145.042V2.02073V1.67073H142.052V2.02073ZM148.033 2.02073V2.37073H151.024V2.02073V1.67073H148.033V2.02073ZM154.014 2.02073V2.37073H157.005V2.02073V1.67073H154.014V2.02073ZM159.995 2.02073V2.37073H162.986V2.02073V1.67073H159.995V2.02073ZM165.976 2.02073V2.37073H168.967V2.02073V1.67073H165.976V2.02073ZM171.958 2.02073V2.37073H174.948V2.02073V1.67073H171.958V2.02073ZM177.939 2.02073V2.37073H180.929V2.02073V1.67073H177.939V2.02073ZM183.92 2.02073V2.37073H186.91V2.02073V1.67073H183.92V2.02073ZM189.901 2.02073V2.37073H192.892V2.02073V1.67073H189.901V2.02073ZM195.882 2.02073V2.37073H198.873V2.02073V1.67073H195.882V2.02073ZM201.863 2.02073V2.37073H204.854V2.02073V1.67073H201.863V2.02073ZM207.844 2.02073V2.37073H210.835V2.02073V1.67073H207.844V2.02073ZM213.826 2.02073V2.37073H216.816V2.02073V1.67073H213.826V2.02073ZM219.807 2.02073V2.37073H222.797V2.02073V1.67073H219.807V2.02073ZM225.788 2.02073V2.37073H228.778V2.02073V1.67073H225.788V2.02073ZM231.769 2.02073V2.37073H234.76V2.02073V1.67073H231.769V2.02073ZM237.75 2.02073V2.37073H240.741V2.02073V1.67073H237.75V2.02073ZM243.731 2.02073V2.37073H246.722V2.02073V1.67073H243.731V2.02073ZM249.712 2.02073V2.37073H252.703V2.02073V1.67073H249.712V2.02073ZM255.693 2.02073V2.37073H258.684V2.02073V1.67073H255.693V2.02073ZM261.675 2.02073V2.37073H264.665V2.02073V1.67073H261.675V2.02073ZM267.656 2.02073V2.37073H270.646V2.02073V1.67073H267.656V2.02073ZM273.637 2.02073V2.37073H276.627V2.02073V1.67073H273.637V2.02073ZM279.618 2.02073V2.37073H282.609V2.02073V1.67073H279.618V2.02073ZM285.599 2.02073V2.37073H288.59V2.02073V1.67073H285.599V2.02073ZM291.58 2.02073V2.37073H294.571V2.02073V1.67073H291.58V2.02073ZM297.561 2.02073V2.37073H300.552V2.02073V1.67073H297.561V2.02073ZM303.543 2.02073V2.37073H306.533V2.02073V1.67073H303.543V2.02073ZM309.524 2.02073V2.37073H312.514V2.02073V1.67073H309.524V2.02073Z"},sA="/assets/8f74948c921008406168688e78dcbd91d8f4d681-x-mW1jEE.png",rA="/assets/a5993753075c329027b5d2cb65fd9ee64c4fcfce-D33ig08G.png",aA="/assets/bb6c57b71e6f8f321834896ce493dada3cf559c0-Yy02ktKg.png",iA="/assets/f2f6c119896a12e8176a39008632fd4e00350238-Cii0Sw53.png",oA={maxWidth:1024,maxHeight:1024,quality:.85,mimeType:"image/jpeg"};async function dp(e,n={}){const s={...oA,...n};return new Promise((a,i)=>{const l=new FileReader;l.onload=c=>{const d=new Image;d.onload=()=>{try{const u=document.createElement("canvas"),m=u.getContext("2d");if(!m){i(new Error("canvas"));return}let{width:p,height:f}=d;const x=s.maxWidth,b=s.maxHeight;if(p>x||f>b){const y=Math.min(x/p,b/f);p=Math.round(p*y),f=Math.round(f*y)}u.width=p,u.height=f,m.drawImage(d,0,0,p,f),u.toBlob(y=>{y?a(y):i(new Error(""))},s.mimeType,s.quality)}catch(u){i(u)}},d.onerror=()=>{i(new Error(""))},d.src=c.target?.result},l.onerror=()=>{i(new Error(""))},l.readAsDataURL(e)})}async function lA(e){return dp(e,{maxWidth:200,maxHeight:200,quality:.9,mimeType:"image/jpeg"})}function gv(e){const n=e.split(","),s=n[0].match(/:(.*?);/)?.[1]||"image/jpeg",a=atob(n[1]),i=new ArrayBuffer(a.length),l=new Uint8Array(i);for(let c=0;c<a.length;c++)l[c]=a.charCodeAt(c);return new Blob([i],{type:s})}const Lg="DesktopImagesDB",$t="images",cA=3,Sn={AVATARS:"avatars",MEMES:"memes",CHAT_IMAGES:"chat_images",SYSTEM:"system"},Ys=new Map;function dA(e){return e==="avatar"||e==="chat-avatar"||e.startsWith("character-avatar-")||e.startsWith("character-")&&e.endsWith("-avatar")?Sn.AVATARS:e==="profileBackground"||e==="desktop-wallpaper"||e==="chat-background"||e==="anniversary"||e.startsWith("desktop2_")?Sn.SYSTEM:e.startsWith("meme-")?Sn.MEMES:e.startsWith("chat-image-")?Sn.CHAT_IMAGES:Sn.SYSTEM}function Ti(e,n){return e.includes("/")?e:`${dA(e)}/${e}`}function uA(e){const n=e.split("/");return n.length>1?n[1]:e}const Is=()=>new Promise((e,n)=>{const s=indexedDB.open(Lg,cA);s.onerror=()=>{console.error("Failed to open image database:",s.error),n(s.error)},s.onsuccess=()=>{const a=s.result;if(!a.objectStoreNames.contains($t)){console.error("Image store not found, recreating database..."),a.close();const i=indexedDB.deleteDatabase(Lg);i.onsuccess=()=>{Is().then(e).catch(n)},i.onerror=()=>{n(new Error("Failed to recreate image database"))};return}e(a)},s.onupgradeneeded=a=>{const i=a.target.result;console.log("Image database upgrade needed from version",a.oldVersion,"to",a.newVersion),i.objectStoreNames.contains($t)||(i.createObjectStore($t),console.log("Created image store:",$t))}}),bs=async(e,n)=>{try{const s=await Is();let a;return e==="avatar"||e.includes("avatar")?a=await lA(n):a=n,new Promise((i,l)=>{try{const u=s.transaction([$t],"readwrite").objectStore($t).put(a,Ti(e));u.onsuccess=()=>{s.close();const m=wi(e,a);i(m)},u.onerror=()=>{console.error("Failed to save image:",u.error),s.close(),l(u.error)}}catch(c){console.error("Error in transaction:",c),s.close(),l(c)}})}catch(s){throw console.error("Failed to save image:",s),s}},xt=async e=>{try{if(Ys.has(e))return Ys.get(e);const n=await Is(),s=Ti(e);return new Promise((a,i)=>{try{const c=n.transaction([$t],"readonly").objectStore($t),d=c.get(s);d.onsuccess=()=>{let u=d.result;if(!u&&s!==e){const p=c.get(e);p.onsuccess=()=>{const f=p.result;if(n.close(),!f){a(null);return}if(console.log(`Migrating ${e} from old format to new format...`),pA(e,f).catch(console.error),typeof f=="string")a(f);else{const x=wi(e,f);a(x)}},p.onerror=()=>{n.close(),a(null)};return}if(n.close(),!u){a(null);return}if(typeof u=="string"){hA(e,u).catch(console.error),a(u);return}const m=wi(e,u);a(m)},d.onerror=()=>{console.error("Failed to get image:",d.error),n.close(),i(d.error)}}catch(l){console.error("Error in transaction:",l),n.close(),i(l)}})}catch(n){return console.error("Failed to get image:",n),null}};function wi(e,n){Ys.has(e)&&URL.revokeObjectURL(Ys.get(e));const s=URL.createObjectURL(n);return Ys.set(e,s),s}const fA=e=>{Ys.has(e)&&(URL.revokeObjectURL(Ys.get(e)),Ys.delete(e))},ka=async e=>{try{fA(e);const n=await Is();return new Promise((s,a)=>{try{const c=n.transaction([$t],"readwrite").objectStore($t).delete(Ti(e));c.onsuccess=()=>{n.close(),s()},c.onerror=()=>{console.error("Failed to delete image:",c.error),n.close(),a(c.error)}}catch(i){console.error("Error in transaction:",i),n.close(),a(i)}})}catch(n){throw console.error("Failed to delete image:",n),n}};async function hA(e,n){try{console.log(`Migrating ${e} from Base64 to Blob...`);const s=gv(n),a=await Is();return new Promise((i,l)=>{try{const u=a.transaction([$t],"readwrite").objectStore($t).put(s,Ti(e));u.onsuccess=()=>{a.close(),console.log(`Successfully migrated ${e} to Blob`),wi(e,s),i()},u.onerror=()=>{console.error("Failed to migrate image:",u.error),a.close(),l(u.error)}}catch(c){console.error("Error in migration transaction:",c),a.close(),l(c)}})}catch(s){console.error("Failed to migrate Base64 to Blob:",s)}}async function pA(e,n){try{const s=await Is();return new Promise((a,i)=>{try{const d=s.transaction([$t],"readwrite").objectStore($t).put(n,Ti(e));d.onsuccess=()=>{s.close(),console.log(`Successfully migrated ${e} to new format`),n instanceof Blob&&wi(e,n),a()},d.onerror=()=>{console.error("Failed to migrate image:",d.error),s.close(),i(d.error)}}catch(l){console.error("Error in migration transaction:",l),s.close(),i(l)}})}catch(s){console.error("Failed to migrate to new format:",s)}}const mA=()=>{Ys.forEach(e=>URL.revokeObjectURL(e)),Ys.clear()},xA=async()=>{try{mA();const e=await Is();return new Promise((n,s)=>{try{const l=e.transaction([$t],"readwrite").objectStore($t).clear();l.onsuccess=()=>{e.close(),console.log("All images cleared successfully"),n()},l.onerror=()=>{console.error("Failed to clear all images:",l.error),e.close(),s(l.error)}}catch(a){console.error("Error in clear transaction:",a),e.close(),s(a)}})}catch(e){throw console.error("Failed to clear all images:",e),e}},gA=async()=>{try{const e=await Is(),n=await up(),s={};for(const{originalKey:a,storageKey:i,category:l}of n)try{const u=e.transaction([$t],"readonly").objectStore($t).get(i);await new Promise((m,p)=>{u.onsuccess=()=>{const f=u.result;f instanceof Blob?s[a]={blob:f,category:l}:typeof f=="string"&&(s[a]={blob:gv(f),category:l}),m()},u.onerror=p})}catch(c){console.error(`Failed to export image ${a}:`,c)}return e.close(),s}catch(e){return console.error("Failed to export all images with category:",e),{}}},bA=async e=>{try{const n=await Is();for(const[s,a]of Object.entries(e))try{await new Promise((i,l)=>{const u=n.transaction([$t],"readwrite").objectStore($t).put(a,Ti(s));u.onsuccess=()=>{wi(s,a),i()},u.onerror=()=>{console.error(`Failed to import image ${s}:`,u.error),l(u.error)}})}catch(i){console.error(`Failed to process image ${s}:`,i)}n.close(),console.log(`Successfully imported ${Object.keys(e).length} images`)}catch(n){throw console.error("Failed to import images:",n),n}},bv=async()=>{try{const e=await Is();return new Promise((n,s)=>{try{const i=e.transaction([$t],"readonly").objectStore($t),l=i.getAll(),c=i.getAllKeys();let d=[],u=[];l.onsuccess=()=>{d=l.result},c.onsuccess=()=>{u=c.result;const m={[Sn.AVATARS]:{count:0,size:0},[Sn.SYSTEM]:{count:0,size:0},[Sn.MEMES]:{count:0,size:0},[Sn.CHAT_IMAGES]:{count:0,size:0},uncategorized:{count:0,size:0}};u.forEach((f,x)=>{const b=String(f),y=d[x],g=y instanceof Blob?y.size:0;if(b.includes("/")){const k=b.split("/")[0];k in m?(m[k].count++,m[k].size+=g):(m.uncategorized.count++,m.uncategorized.size+=g)}else m.uncategorized.count++,m.uncategorized.size+=g});const p={};for(const[f,x]of Object.entries(m))p[f]={count:x.count,size:(x.size/1024).toFixed(2)};e.close(),n(p)},l.onerror=()=>{console.error("Failed to get all data:",l.error),e.close(),s(l.error)},c.onerror=()=>{console.error("Failed to get all keys:",c.error),e.close(),s(c.error)}}catch(a){console.error("Error in transaction:",a),e.close(),s(a)}})}catch(e){return console.error("Failed to get category stats:",e),{[Sn.AVATARS]:{count:0,size:"0.00"},[Sn.SYSTEM]:{count:0,size:"0.00"},[Sn.MEMES]:{count:0,size:"0.00"},[Sn.CHAT_IMAGES]:{count:0,size:"0.00"},uncategorized:{count:0,size:"0.00"}}}},up=async()=>{try{const e=await Is();return new Promise((n,s)=>{try{const l=e.transaction([$t],"readonly").objectStore($t).getAllKeys();l.onsuccess=()=>{e.close();const d=l.result.map(u=>{const m=String(u),p=m.split("/");return{originalKey:uA(m),storageKey:m,category:p.length>1?p[0]:"uncategorized"}});n(d)},l.onerror=()=>{console.error("Failed to list all images:",l.error),e.close(),s(l.error)}}catch(a){console.error("Error in transaction:",a),e.close(),s(a)}})}catch(e){return console.error("Failed to list all images:",e),[]}},Le={messages:{},chatSettingsDetail:{},userAvatar:void 0},vA=5e3,eh=(e=!1)=>{Le.chatSettings=void 0,Le.userData=void 0,Le.characters=void 0,Le.lastUpdate=void 0,e&&(Le.messages={},Le.chatSettingsDetail={},Le.userAvatar=void 0)},yA=()=>Le.lastUpdate?Date.now()-Le.lastUpdate<vA:!1,th=(e,n)=>Le.chatSettingsDetail[e]?.remark||n,vv=()=>Le.userAvatar,yv=e=>{Le.userAvatar=e};function wA({userData:e,colorMode:n,preloadedImages:s}){const[a,i]=j.useState(0),[l,c]=j.useState(s?.anniversary||null),d=j.useRef(null);j.useEffect(()=>{const p=()=>{try{const x=new Date(e.date);x.setHours(0,0,0,0);const b=new Date;b.setHours(0,0,0,0);const y=Math.abs(b.getTime()-x.getTime()),g=Math.floor(y/(1e3*60*60*24))-1;i(Math.max(0,g))}catch{console.log(""),i(365)}};p();const f=setInterval(p,1e3*60*60*24);return()=>clearInterval(f)},[e.date]),j.useEffect(()=>{(async()=>{const f=await xt("anniversary");f&&c(f)})()},[]);const u=()=>{d.current?.click()},m=async p=>{const f=p.target.files?.[0];if(f)try{const x=await bs("anniversary",f);c(x)}catch(x){console.error(":",x)}};return t.jsxs("div",{className:"absolute left-[54.1%] w-[38.65%] aspect-square top-[52.9%]","data-name":"",children:[t.jsx("input",{ref:d,type:"file",accept:"image/*",onChange:m,className:"hidden"}),t.jsx("div",{className:"absolute left-1/2 w-full aspect-square top-1/2 translate-x-[-50%] translate-y-[-50%] cursor-pointer hover:opacity-80 transition-opacity rounded-[24px] overflow-hidden",onClick:u,children:l?t.jsx("img",{alt:"",className:"block w-full h-full object-cover",src:l}):t.jsx("div",{className:"block w-full h-full",style:{backgroundColor:"#D5EAE3"}})}),t.jsxs("div",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[11.25%] leading-[normal] left-1/2 text-[clamp(14px,4vw,16px)] text-center top-[11.875%] translate-x-[-50%] w-[62.5%] pointer-events-none ${n==="dark"?"text-black":"text-white"}`,children:[t.jsx("p",{className:"mb-0",children:""}),t.jsx("p",{children:""})]}),t.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Normal',sans-serif] font-[350] h-[14.375%] leading-[normal] left-1/2 text-[clamp(11px,3.25vw,13px)] text-center top-[28.125%] translate-x-[-50%] w-[31.25%] pointer-events-none ${n==="dark"?"text-black":"text-white"}`,children:""}),t.jsxs("p",{className:`absolute font-['Actor:Regular',sans-serif] h-[33.75%] leading-[normal] left-1/2 not-italic text-[0px] text-center top-[calc(50%-16.875%)] translate-x-[-50%] w-[72.5%] pointer-events-none ${n==="dark"?"text-black":"text-white"}`,children:[t.jsx("span",{className:"font-['Actor:Regular',sans-serif] text-[clamp(36px,12vw,48px)]",children:a}),t.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal text-[clamp(11px,3.25vw,13px)]",children:""})]})]})}function SA({userData:e,onUserDataChange:n,colorMode:s,preloadedImages:a}){const[i,l]=j.useState(new Date),[c,d]=j.useState(30),[u,m]=j.useState(""),[p,f]=j.useState(!1),[x,b]=j.useState(a?.profileBackground||null),[y,g]=j.useState(()=>a?.avatar||vv()||null),k=j.useRef(null),w=j.useRef(null);j.useEffect(()=>{const K=setInterval(()=>{l(new Date)},1e3);return()=>clearInterval(K)},[]),j.useEffect(()=>{(async()=>{if("getBattery"in navigator)try{const E=await navigator.getBattery();d(Math.round(E.level*100)),E.addEventListener("levelchange",()=>{d(Math.round(E.level*100))})}catch{console.log("")}})()},[]),j.useEffect(()=>{(async()=>{try{const E=await ae.get(te.MISC,"customText");E&&m(E);const I=await xt("profileBackground");I&&b(I);const S=await xt("avatar");S&&g(S)}catch(E){console.error("Failed to load settings:",E)}})()},[]);const C=K=>K.toLocaleTimeString("zh-CN",{hour12:!1}),N=K=>{const E=K.getMonth()+1,I=K.getDate(),L=["","","","","","",""][K.getDay()];return`${E}${I} ${L}`},A=()=>{f(!0)},P=async()=>{f(!1),await ae.set(te.MISC,"customText",u)},B=K=>{m(K.target.value)},$=()=>{k.current?.click()},D=()=>{w.current?.click()},T=async K=>{const E=K.target.files?.[0];if(E)try{const I=await bs("profileBackground",E);b(I)}catch(I){console.error(":",I)}},H=async K=>{const E=K.target.files?.[0];if(E)try{const I=await bs("avatar",E);g(I),window.dispatchEvent(new Event("avatarChanged")),yv(I)}catch(I){console.error(":",I)}};return t.jsxs("div",{className:"absolute h-[41.6%] left-1/2 top-[6.6%] translate-x-[-50%] w-[88.4%]","data-name":"1",children:[t.jsxs("div",{className:`relative backdrop-blur-[15px] backdrop-filter h-full rounded-[24px] shadow-[0px_0px_2px_0px_inset_#ffffff,0px_1px_1px_0px_inset_rgba(255,255,255,0.5)] w-full ${s==="dark"?"bg-[rgba(0,0,0,0.3)]":"bg-[rgba(255,255,255,0.5)]"}`,children:[t.jsx("div",{className:"absolute left-0 right-0 top-0 h-[49.7%] rounded-tl-[24px] rounded-tr-[24px] cursor-pointer hover:opacity-80 transition-opacity overflow-hidden",onClick:$,children:x?t.jsx("img",{alt:"",className:"absolute inset-0 w-full h-full object-cover rounded-tl-[24px] rounded-tr-[24px]",src:x}):t.jsx("div",{className:"absolute inset-0 w-full h-full rounded-tl-[24px] rounded-tr-[24px]",style:{backgroundColor:"#D5EAE3"}})}),t.jsxs("div",{className:"absolute contents left-[1.37%] top-[39.43%]","data-name":"",children:[t.jsxs("div",{className:"flex items-center absolute left-[28.5%] top-[51%]",children:[t.jsx("p",{className:`text-[clamp(14px,4vw,16px)] mr-[6px] ${s==="dark"?"text-white":"text-black"}`,children:e.name}),t.jsx("div",{className:"flex-shrink-0","data-name":"",children:t.jsx("div",{className:"relative bg-[#609f60] h-[14px] rounded-[6px] px-[5px] flex items-center justify-center",children:t.jsx("p",{className:"text-[10px] text-white whitespace-nowrap",style:{fontFamily:"YShi NewHei T, sans-serif",fontWeight:"600"},children:""})})})]}),t.jsxs("p",{className:`absolute font-['Source_Han_Sans_Old_Style:Normal',sans-serif] h-[2.61%] leading-[normal] left-[28.5%] not-italic text-[clamp(12px,3.5vw,14px)] top-[58.5%] w-[68.03%] ${s==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:[e.country,"  ",e.fortress,"  ",e.date]}),t.jsx("div",{className:"absolute left-0 w-[25.68%] aspect-square top-[38.5%] cursor-pointer hover:opacity-80 transition-opacity","data-name":"",onClick:K=>{K.stopPropagation(),D()},children:y?t.jsx("img",{alt:"",className:"block w-full h-full object-cover rounded-full",src:y}):t.jsx("svg",{className:"block w-full h-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 94 94",children:t.jsx("path",{d:Bg.p15366300,fill:s==="dark"?"rgba(0,0,0,0.5)":"white"})})})]}),t.jsx("div",{className:"absolute contents left-[5.19%] top-[66.5%]","data-name":"Group 1",children:t.jsxs("div",{className:"absolute flex items-center gap-[2.5%] left-[5.19%] top-[66.5%] w-[89.62%] h-[12.8%]",children:[t.jsxs("div",{className:`flex items-center rounded-[24px] px-[2.5%] py-[2.5%] gap-[3%] w-[59.5%] h-full justify-center ${s==="dark"?"bg-[rgba(0,0,0,0.3)]":"bg-[rgba(255,255,255,0.5)]"}`,children:[t.jsxs("div",{className:`relative h-[95%] aspect-[2.43/1] rounded-[8px] flex-shrink-0 ${s==="dark"?"bg-[rgba(0,0,0,0.3)]":"bg-[rgba(255,255,255,0.5)]"}`,children:[t.jsx("div",{className:`absolute left-[8.8%] top-[21.4%] w-[41.2%] h-[57.1%] rounded-[4px] ${s==="dark"?"bg-[rgba(255,255,255,0.2)]":"bg-[#d9d9d9]"}`,children:t.jsx("div",{className:`absolute left-0 top-0 h-full rounded-[4px] transition-all duration-300 ${s==="dark"?"bg-white":"bg-[#5c5c5c]"}`,style:{width:`${c}%`}})}),t.jsx("div",{className:"absolute right-[6%] top-0 h-full flex items-center",children:t.jsxs("p",{className:`font-['Didact_Gothic:Regular',sans-serif] text-[clamp(10px,1.4vh,14px)] ${s==="dark"?"text-white":"text-[#5c5c5c]"}`,children:[c,"%"]})})]}),t.jsxs("div",{className:"relative h-[95%] aspect-square flex-shrink-0",children:[t.jsx("svg",{className:"block w-full h-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 28 28",children:t.jsx("circle",{cx:"14",cy:"14",fill:s==="dark"?"rgba(0,0,0,0.5)":"white",fillOpacity:"0.5",r:"14"})}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx("p",{className:`font-['Didact_Gothic:Regular','Noto_Sans_Symbols2:Regular',sans-serif] text-[clamp(12px,2.1vh,19px)] ${s==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:""})})]}),t.jsxs("div",{className:"relative h-[95%] aspect-square flex-shrink-0",children:[t.jsx("svg",{className:"block w-full h-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 28 28",children:t.jsx("circle",{cx:"14",cy:"14",fill:s==="dark"?"rgba(0,0,0,0.5)":"white",fillOpacity:"0.5",r:"14"})}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx("p",{className:`font-['Arial','Noto_Sans_Symbols2:Regular',sans-serif] text-[clamp(12px,2.1vh,19px)] leading-none ${s==="dark"?"text-white/70":"text-[#5c5c5c]"}`,style:{transform:"translateY(5%)"},children:""})})]}),t.jsxs("div",{className:"relative h-[95%] aspect-square flex-shrink-0",children:[t.jsx("svg",{className:"block w-full h-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 28 28",children:t.jsx("circle",{cx:"14",cy:"14",fill:s==="dark"?"rgba(0,0,0,0.5)":"white",fillOpacity:"0.5",r:"14"})}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx("p",{className:`font-['Didact_Gothic:Regular','Noto_Sans_Symbols2:Regular',sans-serif] text-[clamp(12px,2.1vh,19px)] ${s==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:""})})]})]}),t.jsx("div",{className:`rounded-[24px] px-[3%] py-[2.5%] w-[38%] h-full flex items-center justify-center ${s==="dark"?"bg-[rgba(0,0,0,0.5)]":"bg-[rgba(255,255,255,0.5)]"}`,children:t.jsx("p",{className:`bakbak-one-regular text-[clamp(20px,6.5vw,26px)] text-center whitespace-nowrap overflow-hidden ${s==="dark"?"text-white/50":"text-[#afafaf]"}`,children:C(i)})})]})}),t.jsxs("div",{className:"absolute left-[calc(50%+0.41%)] top-[83.03%] translate-x-[-50%] w-[86.61%]","data-name":"Group 3",children:[p?t.jsx("input",{type:"text",value:u,onChange:B,onBlur:P,autoFocus:!0,className:`w-full font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal text-[clamp(12px,3.5vw,14px)] text-center bg-transparent border-none outline-none ${s==="dark"?"text-white/70":"text-[#5c5c5c]"}`}):t.jsx("p",{onClick:A,className:`w-full font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal text-[clamp(12px,3.5vw,14px)] text-center cursor-pointer hover:opacity-70 transition-opacity mb-2 ${s==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:u}),t.jsx("div",{className:"w-full h-[1.31%]",children:t.jsx("svg",{className:"w-full h-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 317 5",children:t.jsx("path",{d:Bg.p3086ef80,fill:s==="dark"?"rgba(255,255,255,0.7)":"#5C5C5C"})})})]}),t.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Normal',sans-serif] font-[350] h-[6.27%] leading-[normal] left-[93.99%] text-[clamp(10px,3vw,12px)] text-right top-[92.43%] translate-x-[-100%] w-[28.42%] whitespace-pre-wrap ${s==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:N(i)})]}),t.jsx("input",{ref:k,type:"file",accept:"image/*",onChange:T,className:"hidden"}),t.jsx("input",{ref:w,type:"file",accept:"image/*",onChange:H,className:"hidden"})]})}function kA({userData:e,onUserDataChange:n,onChatClick:s,onMemoryClick:a,preloadedImages:i}){const[l,c]=j.useState("light"),[d,u]=j.useState({"desktop1-chat":i?.["system-icon-desktop1-chat"]||null,"desktop1-forum":i?.["system-icon-desktop1-forum"]||null,"desktop1-memory":i?.["system-icon-desktop1-memory"]||null,"desktop1-transfer":i?.["system-icon-desktop1-transfer"]||null});return j.useEffect(()=>{(async()=>{const b=await ae.get(te.APPEARANCE,"desktop_color_mode");c(b||"light")})(),(async()=>{const b={},y=["desktop1-chat","desktop1-forum","desktop1-memory","desktop1-transfer"];for(const g of y){const k=await xt(`system-icon-${g}`);k&&(b[g]=k)}u(b)})();const f=b=>{c(b.detail)},x=b=>{const y=b,{iconId:g,url:k}=y.detail;g.startsWith("desktop1-")&&u(w=>({...w,[g]:k}))};return window.addEventListener("colorModeChange",f),window.addEventListener("iconChange",x),()=>{window.removeEventListener("colorModeChange",f),window.removeEventListener("iconChange",x)}},[]),t.jsxs(t.Fragment,{children:[t.jsx(SA,{userData:e,onUserDataChange:n,colorMode:l}),t.jsxs("div",{className:"absolute contents left-[6.76%] top-[52.9%]","data-name":"",children:[t.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%-35.51%)] text-[clamp(10px,3vw,12px)] text-center top-[60.54%] translate-x-[-50%] w-[13.04%] pointer-events-none ${l==="dark"?"text-black":"text-white"}`,children:""}),t.jsx("button",{className:"absolute left-[6.76%] w-[14.98%] aspect-square top-[52.9%] cursor-pointer hover:opacity-80 active:opacity-60 transition-opacity overflow-hidden rounded-[18%]",onClick:s,children:t.jsx("img",{alt:"",className:"block w-full h-full object-cover pointer-events-none",src:d["desktop1-chat"]||iA})})]}),t.jsxs("div",{className:"absolute contents left-[30.43%] top-[52.9%]","data-name":"",children:[t.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%-11.84%)] text-[clamp(10px,3vw,12px)] text-center top-[60.54%] translate-x-[-50%] w-[13.04%] ${l==="dark"?"text-black":"text-white"}`,children:""}),t.jsx("div",{className:"absolute left-[30.43%] w-[14.98%] aspect-square top-[52.9%] overflow-hidden rounded-[18%]",children:t.jsx("img",{alt:"",className:"block w-full h-full object-cover",src:d["desktop1-forum"]||aA})})]}),t.jsxs("div",{className:"absolute contents left-[6.76%] top-[63.59%]","data-name":"",children:[t.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%-35.51%)] text-[clamp(10px,3vw,12px)] text-center top-[71.2%] translate-x-[-50%] w-[13.04%] ${l==="dark"?"text-black":"text-white"}`,children:""}),t.jsx("button",{className:"absolute left-[6.76%] w-[14.98%] aspect-square top-[63.59%] overflow-hidden rounded-[18%] cursor-pointer hover:opacity-80 active:opacity-60 transition-opacity",onClick:a,children:t.jsx("img",{alt:"",className:"block w-full h-full object-cover pointer-events-none",src:d["desktop1-memory"]||rA})})]}),t.jsxs("div",{className:"absolute contents left-[30.43%] top-[63.59%]","data-name":"",children:[t.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%-11.84%)] text-[clamp(10px,3vw,12px)] text-center top-[71.2%] translate-x-[-50%] w-[13.04%] ${l==="dark"?"text-black":"text-white"}`,children:""}),t.jsx("div",{className:"absolute left-[30.43%] w-[14.98%] aspect-square top-[63.59%] overflow-hidden rounded-[18%]",children:t.jsx("img",{alt:"",className:"block w-full h-full object-cover",src:d["desktop1-transfer"]||sA})})]}),t.jsx(wA,{userData:e,colorMode:l})]})}const jA="/assets/2c4e24fb97d83db5e0d40da3356ff7df2f9fbf99-BUAfsKeI.png",NA="/assets/3b015cc5afccb7e9689502b97c0580e29782af83-CWB2UK3g.png",CA="/assets/d66caaf044e33e1487e4b0199ac46e1b563e30e2-C01H7kEO.png",_A="/assets/320f6f27a201a50ba3f60a7311ec793841dca491-CLzR-4Zh.png";function AA({preloadedImages:e,onHealthClick:n,onScheduleClick:s,onEntertainmentClick:a,onShopClick:i}){const[l,c]=j.useState(new Date),[d,u]=j.useState(""),[m,p]=j.useState(""),[f,x]=j.useState(!1),[b,y]=j.useState(!1),[g,k]=j.useState(e?.desktop2_timeImage||null),[w,C]=j.useState(e?.desktop2_card1||null),[N,A]=j.useState(e?.desktop2_card2||null),[P,B]=j.useState(e?.desktop2_card3||null),[$,D]=j.useState(e?.desktop2_card4||null),[T,H]=j.useState("light"),[K,E]=j.useState({"desktop2-shop":e?.["system-icon-desktop2-shop"]||null,"desktop2-game":e?.["system-icon-desktop2-game"]||null,"desktop2-schedule":e?.["system-icon-desktop2-schedule"]||null,"desktop2-health":e?.["system-icon-desktop2-health"]||null}),I=j.useRef(null),S=[j.useRef(null),j.useRef(null),j.useRef(null),j.useRef(null)];j.useEffect(()=>{const Q=setInterval(()=>{c(new Date)},1e3);return()=>clearInterval(Q)},[]),j.useEffect(()=>{(async()=>{const ie=await ae.get(te.MISC,"desktop2_customText1"),ve=await ae.get(te.MISC,"desktop2_customText2"),se=await ae.get(te.APPEARANCE,"desktop_color_mode");ie&&u(ie),ve&&p(ve),H(se||"light");const ge=await xt("desktop2_timeImage");ge&&k(ge);const Me=await xt("desktop2_card1");Me&&C(Me);const M=await xt("desktop2_card2");M&&A(M);const me=await xt("desktop2_card3");me&&B(me);const he=await xt("desktop2_card4");he&&D(he);const J={},X=["desktop2-shop","desktop2-game","desktop2-schedule","desktop2-health"];for(const oe of X){const ke=await xt(`system-icon-${oe}`);ke&&(J[oe]=ke)}E(J)})();const le=ie=>{H(ie.detail)},ne=ie=>{const ve=ie,{iconId:se,url:ge}=ve.detail;se.startsWith("desktop2-")&&E(Me=>({...Me,[se]:ge}))};return window.addEventListener("colorModeChange",le),window.addEventListener("iconChange",ne),()=>{window.removeEventListener("colorModeChange",le),window.removeEventListener("iconChange",ne)}},[]);const L=Q=>Q.toLocaleTimeString("zh-CN",{hour12:!1,hour:"2-digit",minute:"2-digit"}),z=()=>{const Q=l.getMonth()+1,le=l.getDate();return{month:Q,day:le}},R=()=>["","","","","","",""][l.getDay()],U=()=>x(!0),W=()=>y(!0),Z=async()=>{x(!1),await ae.set(te.MISC,"desktop2_customText1",d)},O=async()=>{y(!1),await ae.set(te.MISC,"desktop2_customText2",m)},V=()=>{I.current?.click()},ee=Q=>{S[Q].current?.click()},q=async Q=>{const le=Q.target.files?.[0];if(le)try{const ne=await bs("desktop2_timeImage",le);k(ne)}catch(ne){console.error(":",ne)}},G=async(Q,le)=>{const ne=le.target.files?.[0];if(ne)try{const ie=await bs(`desktop2_card${Q+1}`,ne);[C,A,B,D][Q](ie)}catch(ie){console.error(":",ie)}};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"absolute h-[15%] left-1/2 top-[6.6%] translate-x-[-50%] w-[86%]","data-name":"",children:[t.jsx("div",{className:"absolute inset-0 rounded-[24px] cursor-pointer hover:opacity-80 active:opacity-80 transition-opacity",onClick:V,children:g?t.jsx("img",{alt:"",className:"absolute inset-0 w-full h-full object-cover rounded-[24px]",src:g}):t.jsx("div",{className:"absolute inset-0 w-full h-full rounded-[24px]",style:{backgroundColor:"#D5EAE3"}})}),t.jsx("p",{className:`absolute bakbak-one-regular leading-[normal] left-1/2 top-1/2 text-[clamp(70px,12vh,120px)] text-center translate-x-[-50%] translate-y-[-50%] w-[87%] pointer-events-none ${T==="dark"?"text-[rgba(0,0,0,0.5)]":"text-[rgba(255,255,255,0.5)]"}`,children:L(l)}),t.jsx("input",{ref:I,type:"file",accept:"image/*",onChange:q,className:"hidden"})]}),t.jsxs("div",{className:"absolute contents left-[6.76%] top-[26.3%]","data-name":"",onClick:i,style:{cursor:"pointer"},children:[t.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%-35.51%)] text-[clamp(10px,3vw,12px)] text-center top-[33.94%] translate-x-[-50%] w-[13.04%] ${T==="dark"?"text-black":"text-white"}`,children:""}),t.jsx("div",{className:"absolute left-[6.76%] w-[14.98%] aspect-square top-[26.3%] overflow-hidden rounded-[18%] hover:opacity-80 active:opacity-60 transition-opacity",children:t.jsx("img",{alt:"",className:"block w-full h-full object-cover",src:K["desktop2-shop"]||jA})})]}),t.jsxs("div",{className:"absolute contents left-[30.43%] top-[26.3%]","data-name":"",onClick:void 0,style:{cursor:"not-allowed",opacity:.5},children:[t.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%-11.84%)] text-[clamp(10px,3vw,12px)] text-center top-[33.94%] translate-x-[-50%] w-[13.04%] ${T==="dark"?"text-black":"text-white"}`,children:""}),t.jsx("div",{className:"absolute left-[30.43%] w-[14.98%] aspect-square top-[26.3%] overflow-hidden rounded-[18%]",children:t.jsx("img",{alt:"",className:"block w-full h-full object-cover",src:K["desktop2-game"]||NA})})]}),t.jsxs("div",{className:"absolute contents left-[54.1%] top-[26.3%]","data-name":"",onClick:s,style:{cursor:"pointer"},children:[t.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%+11.84%)] text-[clamp(10px,3vw,12px)] text-center top-[33.94%] translate-x-[-50%] w-[13.04%] ${T==="dark"?"text-black":"text-white"}`,children:""}),t.jsx("div",{className:"absolute left-[54.1%] w-[14.98%] aspect-square top-[26.3%] overflow-hidden rounded-[18%] hover:opacity-80 active:opacity-60 transition-opacity",children:t.jsx("img",{alt:"",className:"block w-full h-full object-cover",src:K["desktop2-schedule"]||CA})})]}),t.jsxs("div",{className:"absolute contents left-[77.78%] top-[26.3%]","data-name":"",onClick:n,style:{cursor:"pointer"},children:[t.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%+35.51%)] text-[clamp(10px,3vw,12px)] text-center top-[33.94%] translate-x-[-50%] w-[13.04%] ${T==="dark"?"text-black":"text-white"}`,children:""}),t.jsx("div",{className:"absolute left-[77.78%] w-[14.98%] aspect-square top-[26.3%] overflow-hidden rounded-[18%] hover:opacity-80 active:opacity-60 transition-opacity",children:t.jsx("img",{alt:"",className:"block w-full h-full object-cover",src:K["desktop2-health"]||_A})})]}),t.jsxs("div",{className:"absolute h-[38.04%] left-1/2 top-[38.64%] translate-x-[-50%] w-[86%]","data-name":"2",children:[t.jsx("div",{className:`absolute backdrop-blur-[15px] backdrop-filter inset-0 rounded-[24px] shadow-[0px_0px_2px_0px_inset_#ffffff,0px_1px_1px_0px_inset_rgba(255,255,255,0.5)] ${T==="dark"?"bg-[rgba(0,0,0,0.3)]":"bg-[rgba(255,255,255,0.5)]"}`}),t.jsx("div",{className:"absolute h-[62%] left-[7.3%] rounded-[26px] top-[32.86%] w-[19.66%] cursor-pointer hover:opacity-80 active:opacity-80 transition-opacity",onClick:()=>ee(0),children:w?t.jsx("img",{alt:"",className:"absolute inset-0 w-full h-full object-cover rounded-[26px]",src:w}):t.jsx("div",{className:"absolute inset-0 w-full h-full rounded-[26px]",style:{backgroundColor:"#D5EAE3"}})}),t.jsx("div",{className:"absolute h-[62%] left-[29.21%] rounded-[26px] top-[33.14%] w-[19.66%] cursor-pointer hover:opacity-80 active:opacity-80 transition-opacity",onClick:()=>ee(1),children:N?t.jsx("img",{alt:"",className:"absolute inset-0 w-full h-full object-cover rounded-[26px]",src:N}):t.jsx("div",{className:"absolute inset-0 w-full h-full rounded-[26px]",style:{backgroundColor:"#D5EAE3"}})}),t.jsx("div",{className:"absolute h-[62%] left-[51.12%] rounded-[26px] top-[32.86%] w-[19.66%] cursor-pointer hover:opacity-80 active:opacity-80 transition-opacity",onClick:()=>ee(2),children:P?t.jsx("img",{alt:"",className:"absolute inset-0 w-full h-full object-cover rounded-[26px]",src:P}):t.jsx("div",{className:"absolute inset-0 w-full h-full rounded-[26px]",style:{backgroundColor:"#D5EAE3"}})}),t.jsx("div",{className:"absolute h-[62%] left-[73.03%] rounded-[26px] top-[32.86%] w-[19.66%] cursor-pointer hover:opacity-80 active:opacity-80 transition-opacity",onClick:()=>ee(3),children:$?t.jsx("img",{alt:"",className:"absolute inset-0 w-full h-full object-cover rounded-[26px]",src:$}):t.jsx("div",{className:"absolute inset-0 w-full h-full rounded-[26px]",style:{backgroundColor:"#D5EAE3"}})}),t.jsxs("p",{className:`absolute bona-nova-regular h-[22.29%] leading-[normal] left-[5.34%] not-italic top-0 w-[46.63%] ${T==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:[t.jsx("span",{className:"text-[clamp(48px,15vw,64px)]",children:z().month}),t.jsx("span",{className:"text-[clamp(36px,11.25vw,48px)]",children:"/"}),t.jsx("span",{className:"text-[clamp(48px,15vw,64px)]",children:z().day})]}),t.jsx("p",{className:"absolute font-['Bona_Nova:Bold','Noto_Sans_JP:Bold',sans-serif] h-[14.29%] leading-[normal] left-[6.18%] text-[clamp(18px,6vw,24px)] top-[21.3%] w-[44.66%] text-white",style:{fontVariationSettings:"'wght' 700",fontFamily:"YShi NewHei T, sans-serif",fontWeight:"bold"},children:R()}),f?t.jsx("input",{type:"text",value:d,onChange:Q=>u(Q.target.value),onBlur:Z,autoFocus:!0,className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[7.43%] leading-[normal] left-[92.42%] text-[clamp(12px,4vw,16px)] text-right top-[12.29%] translate-x-[-100%] w-[40%] bg-transparent border-none outline-none ${T==="dark"?"text-white/70":"text-[#5c5c5c]"}`}):t.jsx("p",{onClick:U,className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[7.43%] leading-[normal] left-[92.42%] text-[clamp(12px,4vw,16px)] text-right top-[12.29%] translate-x-[-100%] w-[40%] cursor-pointer hover:opacity-70 active:opacity-70 transition-opacity ${T==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:d}),b?t.jsx("input",{type:"text",value:m,onChange:Q=>p(Q.target.value),onBlur:O,autoFocus:!0,className:`absolute h-[7.43%] leading-[normal] left-[92.42%] text-[clamp(12px,4vw,16px)] text-right top-[22.57%] translate-x-[-100%] w-[80%] bg-transparent border-none outline-none ${T==="dark"?"text-white/70":"text-[#5c5c5c]"}`}):t.jsx("p",{onClick:W,className:`absolute h-[7.43%] leading-[normal] left-[92.42%] text-[clamp(12px,4vw,16px)] text-right top-[22.57%] translate-x-[-100%] w-[80%] cursor-pointer hover:opacity-70 active:opacity-70 transition-opacity ${T==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:m})]}),S.map((Q,le)=>t.jsx("input",{ref:Q,type:"file",accept:"image/*",onChange:ne=>G(le,ne),className:"hidden"},le))]})}const EA="/assets/c50f0278eb53f2dd6c95d7fda7f37649c4c89657-CgQEB29n.png",TA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHwAAAB8CAYAAACrHtS+AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAtYSURBVHgB7Z1bU1TZFcf/NNCAoNzEAS9DI14HFVCj5SURE52qTGoSTfKQ5Il8gJSmKu+j38B5SR51KqnUJBWjJsYxjpaIiDqo3ES50yAqdxoQ6KZvs9bhNDb0AWnYp+nus39Vm9Ocbuju8z9r7b3XXnvvGAjA6/Wm0eEUlUIqFipFVNLUIlkaVrXUqOVeTEyMFcskBktEFfkslWNUSiAJBSz8BSxD/KAF9xP6DKQFrySXqJwPVvigBCexz0EKHW6w6OcW++JFCU5CW+hwBdN1syT8sFI5vhhrN33oBSR2KR2qIcUOZyxUqkmrUx964YKCqy78IqQLjwRYoyuqZvMyr0tX//ALSCKReet1TcFV13AFkkimlET/au7JAMHVBhrX2dKNRzY2KsVzG3JagndguhEgiXxqSPBi/xOzGm1qvW2BJFooIk1ntcNmLFx15R3QEXoPpbicbkyMjGN4YJQeu+B2ueGmc/ycmDd6/14eDx09Hnj8HjPbijcjbW3wtZZzyomGR42wTziwVOLi45CUkoiU1GRkf7wO5iQzyBKhE+za8+j/25T39ntCtxY5X2j7uB1dTa/Q3tCJvlcDGOwZwpTdSaJ4SARVIAgSnPFO/1DuIa/v1PRNEBcXh7XZGUsS3DE5hcobVfQd+rFUTCYTTLEmxJvjkJqVim2Fm7H3eCFS167RQ3j+khwdPc+/KIKr1l0KwfDFfWcbR21FA+qpDJDIbM0rjdAbawl42ONQYe82SYbQ29mLlrp2lPzyKHmefD1EP0tafMlW7rPwEgiGxbY2vsKdr+/hbUcP3G4PJNqwF3rb0YsbF2+RtzuJ7fu2iBZ9xsp9jbYzEIiXXHhbvRVX/3Id3a1vpNiLZGRoDDf/egfdLW/EtWfeU8I/TKo7FxYn5w/a3mDFjUvfYmRwDJLgGBkcxcNvqpQ2j2BKeGibLbwEAuE66eHNpxjqHYYkeNhg2p5b8YqsXAd+wYIXQiDNz1rR1dgFydJxUJev7kEDHI4pCKaIBRfmzqccTrx43KR0tyTLo6upGwPdgxCMhQW3QBD2d5PofyP8QxqS8dEJdFIvRzBFQgXv6erHOEXQJMuH4xV8Pd0uoT2ctA9mvARDDwUQXGEQWIkWbP02CuUKrcfFCj4xNqlEkCRiYG/pmhJrQMIE5+6EfcKOFY5aRhVOZUBJrAGJE5yiazywIBGHy+lUBp5EItDCId25YDxur2JIIhFah0vCHym4wZCCGwwpuMGQghsMKbjBkIIbDCm4wZCCGwwpuMGQgmugQ8Zo2CAF18DWP4Ipe3QOBEnB5zA2PKakWNfef06DF9E3GBQHyQw89afq22q01LZj4O0gPspdh01bN+g50S/kSAv3QdV245NmPC2rU34d7hvBg+vfLWuWaDgiBcd0I22434ayyw9mJWG2kqU//v8T4WPSK4kUHDwF2IE7/yzHYM/s2TKcOVp1uxqtde2IFgwvOE90rC6rJ3feotkdGx+ZwO2vy5Vpz9GAoQVngbtbX+P+fx4qDbb56Hvdj/JrlQu+JlIwtODvqL6+f+0hJt8tPFOT6/Ca8no0V7ch0jGs4OzK71+tRPvzzkVF1ni+3N1/VWCo14ZIxrD98JfUBXtR1RRUcGXgzSAqyCNEcnauIQX3uDxoeNyoTMsNBmXudoMVsbGxiFQMKTgL51hiQIWXF+MSqch+uMGQghsMKbjBkIIbDCm4wZCCGwwpuMGQghsMKbjBkIIbDCm4wZCCGwwpuMEIm9Eyzv2OiY2hO3D+HHBl+xLv+5WNonlKkF6srOCkbWJSAjZuWY+NWzcg46M0xJrmdzpuEtrjdivZKlyUHYp0FN23FJlXeV+PcoO51Z2R+JzX7ZneKUmnz8Cb4CSuSoBIVkxw3sppz9ECFP9otzLDI55+jzFFwAwPr2+xSW9IVp0UfU1WRPBVq5Nw4OQ+HPrpfiQIvoN1J8a32VvMIndfDy9CLviajNU48ZsS7Dq0Q9m/SxJaQip4UkqSIvbuQzsjw31HISETnK254OAO7Ni3dUGxZcs7EJGzV0MmeFpWKg58WgxzYrzm8yw0T+uxDYzA6ZB7pjDx5nhk5mQo+5SKIiSC8x26+8gnWJuTqfn8+NgE6ioalNkdnOivWLnBDZ27Y0c/P4j1m3MgkpAInpq5BoVHCpQNVucy3GdTduNrqWmXy2+rmBPNOPyzA9h/Yi9dswjsluXtyqWgSnrAeZ5sf/sf99Bc0xZVc7CXA7dvCg5ux74fF1KsQvyEB937ReaEeOR9khvQZ2W3/fxRI5qfSbH9SUpOwv6fFCEhSZ/4hO6Cp6SnIDs3K+C8Y2IKVbeeKhuwS96TvSkLWRuzoBe6C55Jrjw1Y03Aed7ySm5qNxtu3G6gcQWOoeuF7oInpyYjNi6wLup40RWVy2ItB66/LTs36bpqlO6Cc3QNGoEWXg9NMhsTCZ22Lg16orvg3J80adyxjihd6XA5mOla6enOGd0F5x2HtaKl8QlmSGbjogasW+etPIUJzkaslbzA87C1dtdLSV0FyWxcTjdGh95BTwQKHgOTRuPMPunQ7Gdn566DZDZ8nV63vYGeiHPpZOFxGoKP0mCI1nJXOZZsoYMC0QAHo7j3oufyYEItPM4cOBJmGxwNWOGQSc1crSxcG4lZI3rS09kHW/8o9EJoo211WnLAWPfE6CT6XwcGWDinrfCHBTCbZePNnwkaOWyra9ctRiFU8Myc9IAVjtg9tdS2aY6EbdmTj21786Nqeerlwq30Z2W1ilfUIxlEqODpFEbViqp1NXbjbUdvwPmEJDOOnT6M/N15UnQ/+sgjVvz3Eezj4pfuFtrL55h5cmqSsjqxP+OjE6i+V49sy7oAD7B2fSY+Kz2Byv99B+vLLoxRt8QtQ67KIv05dL0OnNhHvR9xdilUcDNZbNb6tRjqmb08Jbumpmet2H14Jz7evnGWNfNjHiv/rPSkstcIu7LJcbvhM16YRLqe3K3ltG5RxHgFVxRllytQzstTalhp/i4LfvWHn2NVysJfQOYxvkd0TSc8tJpXkEuCavev2190ovxKJd21C69ezF9SFvFiM8IFz7Z8hM0FFs1GGEeSnlILtOxy5bTbloQc4YInJJqVDNX56h2n3Yknt6tx8293qK4flnnoIUZ4Hc7w0Gf51Uo8/uYJXPOM/nCAJmtDJoqP7cHWonykZ6UqPkx2zqbh66NHV1UXwRnuiv37z9fRVt+x4Os4dXl1RgoystKRQpE6vceDIwEWmrur2ykolZGdAZHoJjgzOjSGW3+/i8aqFrL0yN8vJJQo+W35Ofjdn34ttFumawIEzxQ9+dvj+MGnxViTniInEAaBMvWKvCQvgCASXS3ch9vlIWsfxcuqZnQ1vaIBAju10ifhdEirn4/E5ATs3L8NRz4/qAw0iYIF57FLfTPn/ODBAR5QcU65hN+90QMPNccpy6FoTc9a1n8mwblVZYHECFj59qmBxCgoglshMQo1LHgtJEahhutwbrANQ2IE8kzUwefB6zJIop0a0trqa/OXQRLtXOAfSuhLdevcPQtZf1wScvJmLFx16xcgiVYusdj8YCa4La08qsnzCT4Tt5NWHrWc84nNBAxfkaVX06EIkmjASmLn+Z/QisyfpmKDJNJhDY/PPRkguGr+f4Qk0vm9vyv3oTn2Ri+8RIdzkEQqXG9f1XpiwRQUqs+/gBQ+0mCxz8/35Adzjkj0U3S4CNldC3e4zj5LYn+10IsWlWRGolvocBcyUSJc4ZyG01p19lwWlT/D/0ht3p+DJJxgq2YXXrwYsZmg00hVa+e6vRSSlcIXJPtSDZgtmiXnDavCl1A5AxmoCRVlaglaaB9CEsX9xC/EtPgWyPp+OdjUwnWzVT1eW6rI/nwP7DSvuDGTUckAAAAASUVORK5CYII=",DA="/assets/d12fb0f5a7c98f7ca307964198d2d0075ea990ff-CuWkxAA1.png";function FA({onSettingsClick:e,onWorldBookClick:n,onCharacterClick:s}){const[a,i]=j.useState("light"),[l,c]=j.useState({"bottom-organization":null,"bottom-worldbook":null,"bottom-settings":null});return j.useEffect(()=>{(async()=>{const f=await ae.get(te.APPEARANCE,"desktop_color_mode");i(f||"light")})(),(async()=>{const f={},x=["bottom-organization","bottom-worldbook","bottom-settings"];for(const b of x){const y=await xt(`system-icon-${b}`);y&&(f[b]=y)}c(f)})();const m=f=>{i(f.detail)},p=f=>{const x=f,{iconId:b,url:y}=x.detail;b.startsWith("bottom-")&&c(g=>({...g,[b]:y}))};return window.addEventListener("colorModeChange",m),window.addEventListener("iconChange",p),()=>{window.removeEventListener("colorModeChange",m),window.removeEventListener("iconChange",p)}},[]),t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"absolute left-[13%] w-[14.98%] aspect-square top-[89%] cursor-pointer hover:opacity-80 active:opacity-60 transition-opacity overflow-hidden rounded-[18%]",onClick:s,"data-name":"",children:t.jsx("img",{alt:"",className:"block w-full h-full object-cover pointer-events-none",src:l["bottom-organization"]||DA})}),t.jsx("button",{className:"absolute left-[42.51%] w-[14.98%] aspect-square top-[89%] cursor-pointer hover:opacity-80 active:opacity-60 transition-opacity overflow-hidden rounded-[18%]",onClick:n,"data-name":"",children:t.jsx("img",{alt:"",className:"block w-full h-full object-cover pointer-events-none",src:l["bottom-worldbook"]||TA})}),t.jsx("button",{className:"absolute left-[72.02%] w-[14.98%] aspect-square top-[89%] cursor-pointer hover:opacity-80 active:opacity-60 transition-opacity overflow-hidden rounded-[18%]",onClick:e,"data-name":"",children:t.jsx("img",{alt:"",className:"block w-full h-full object-cover pointer-events-none",src:l["bottom-settings"]||EA})})]})}function MA({currentPage:e}){const[n,s]=j.useState("light");j.useEffect(()=>{(async()=>{const c=await ae.get(te.APPEARANCE,"desktop_color_mode")||"light";s(c)})();const l=c=>{s(c.detail)};return window.addEventListener("colorModeChange",l),()=>{window.removeEventListener("colorModeChange",l)}},[]);const a=n==="dark";return t.jsxs("div",{className:"absolute h-[16px] left-1/2 top-[84%] translate-x-[-50%] w-[44px]","data-name":"",children:[t.jsx("div",{className:"absolute inset-0 rounded-[8px]",style:{backgroundColor:a?"rgba(0, 0, 0, 0.3)":"rgba(255, 255, 255, 0.3)"}}),t.jsx("div",{className:"absolute left-[10.5px] size-[7px] top-[4.5px]",children:t.jsx("svg",{className:"block size-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 8 8",children:t.jsx("circle",{cx:"4",cy:"4",fill:a?"black":"white",fillOpacity:e===0?"0.7":"0.3",r:"4"})})}),t.jsx("div",{className:"absolute left-[26.5px] size-[7px] top-[4.5px]",children:t.jsx("svg",{className:"block size-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 8 8",children:t.jsx("circle",{cx:"4",cy:"4",fill:a?"black":"white",fillOpacity:e===1?"0.7":"0.3",r:"4"})})})]})}function IA({onNavigate:e,onClose:n}){const[s,a]=j.useState(new Date),[i,l]=j.useState(100),[c,d]=j.useState(!1);j.useEffect(()=>{const m=setInterval(()=>a(new Date),1e3);return()=>clearInterval(m)},[]),j.useEffect(()=>{(async()=>{try{const p=navigator;if(p.getBattery){const f=await p.getBattery(),x=()=>{l(Math.round(f.level*100)),d(f.charging)};return x(),f.addEventListener("levelchange",x),f.addEventListener("chargingchange",x),()=>{f.removeEventListener("levelchange",x),f.removeEventListener("chargingchange",x)}}}catch{console.log("Battery Status API not supported")}})()},[]);const u=[{id:"beautify",label:"",sub:"INTERFACE MOD",desc:"    ",icon:u8},{id:"api",label:"",sub:"NEURAL LINK",desc:"AI   ",icon:U8},{id:"data",label:"",sub:"DATA ARCHIVE",desc:"    ",icon:ov},{id:"disclaimer",label:"",sub:"SYSTEM INFO",desc:"    ",icon:V_}];return t.jsxs("div",{className:"w-full h-full bg-[#F0F2F5] overflow-hidden flex flex-col font-['Source_Han_Sans_CN_VF',sans-serif] text-slate-800",children:[t.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.05]",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),t.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border-b border-slate-300 px-6 py-2 flex justify-between items-center text-[10px] font-bold tracking-widest text-slate-500 z-20 sticky top-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(C7,{className:"w-3 h-3",strokeWidth:2.5}),t.jsx("span",{children:""})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{children:[i,"%"]}),t.jsxs("div",{className:"relative",children:[t.jsx(I6,{className:`w-4 h-4 ${c?"text-green-600":"text-slate-500"}`,strokeWidth:2.5}),c&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx(xv,{className:"w-2 h-2 text-green-600 fill-current"})})]})]})]}),t.jsxs("div",{className:"px-6 pt-6 pb-4 flex items-center gap-4 z-20",children:[t.jsx("button",{onClick:n,className:"w-10 h-10 bg-white border border-slate-300 flex items-center justify-center text-slate-700 active:bg-slate-800 active:text-white active:border-slate-800 hover:bg-slate-800 hover:text-white hover:border-slate-800 transition-colors",children:t.jsx(an,{className:"w-6 h-6",strokeWidth:2})}),t.jsxs("div",{children:[t.jsxs("h1",{className:"text-xl font-black text-slate-800 tracking-tighter flex items-center gap-2",children:[" ",t.jsx("span",{className:"text-[10px] px-1.5 py-0.5 border border-slate-800 text-slate-800 font-mono font-medium rounded-sm",children:"CONFIG"})]}),t.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-slate-500 tracking-wider mt-1",children:[t.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse shadow-[0_0_8px_rgba(34,197,94,0.6)]"}),t.jsxs("span",{children:["  ",s.toLocaleTimeString("zh-CN",{hour12:!1})]})]})]})]}),t.jsxs("div",{className:"mx-6 h-[1px] bg-slate-300 mb-6 flex justify-between items-center overflow-hidden",children:[t.jsx("div",{className:"w-1/3 h-full bg-slate-800"}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx("div",{className:"w-1 h-1 bg-slate-300 rounded-full"}),t.jsx("div",{className:"w-1 h-1 bg-slate-300 rounded-full"}),t.jsx("div",{className:"w-1 h-1 bg-slate-300 rounded-full"})]})]}),t.jsxs("div",{className:"flex-1 px-6 pb-6 overflow-y-auto",children:[t.jsx("div",{className:"space-y-3",children:u.map((m,p)=>t.jsxs("button",{onClick:()=>e(m.id),className:"w-full bg-white border border-slate-300 p-0 flex items-stretch justify-between group active:border-slate-800 hover:border-slate-800 transition-colors relative overflow-hidden",children:[t.jsxs("div",{className:"absolute right-0 top-0 text-[60px] font-black text-slate-100 leading-none -translate-y-2 translate-x-4 pointer-events-none opacity-50 group-active:opacity-20 group-hover:opacity-20 transition-opacity",children:["0",p+1]}),t.jsxs("div",{className:"flex items-center gap-5 p-5 z-10",children:[t.jsx("div",{className:"w-12 h-12 bg-slate-100 border border-slate-200 flex items-center justify-center text-slate-600 group-active:bg-slate-800 group-active:text-white group-active:border-slate-800 group-hover:bg-slate-800 group-hover:text-white group-hover:border-slate-800 transition-colors duration-200",children:t.jsx(m.icon,{className:"w-6 h-6",strokeWidth:1.5})}),t.jsxs("div",{className:"text-left",children:[t.jsxs("div",{className:"flex items-baseline gap-2",children:[t.jsx("h3",{className:"text-base font-bold text-slate-800 group-active:text-blue-600 group-hover:text-blue-600 transition-colors",children:m.label}),t.jsx("span",{className:"text-[9px] font-bold text-slate-400 tracking-wider font-mono uppercase",children:m.sub})]}),t.jsx("p",{className:"text-xs text-slate-400 mt-1 font-medium tracking-wide",children:m.desc})]})]}),t.jsx("div",{className:"w-10 border-l border-slate-100 flex items-center justify-center bg-slate-50 group-active:bg-slate-100 group-hover:bg-slate-100 transition-colors",children:t.jsx(os,{className:"w-5 h-5 text-slate-400 group-active:text-slate-800 group-hover:text-slate-800 transition-colors"})})]},m.id))}),t.jsxs("div",{className:"mt-10 border-t border-slate-300 pt-6",children:[t.jsxs("div",{className:"flex justify-between items-end opacity-60",children:[t.jsxs("div",{className:"text-[10px] font-bold tracking-widest space-y-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Dc,{className:"w-3 h-3"})," ",t.jsx("span",{children:": "})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Xf,{className:"w-3 h-3"})," ",t.jsx("span",{children:": "})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ec,{className:"w-3 h-3"})," ",t.jsx("span",{children:": 12ms"})]})]}),t.jsx("div",{className:"text-right",children:t.jsx("div",{className:"w-12 h-12 border-2 border-slate-800 rounded-full flex items-center justify-center opacity-20",children:t.jsx("span",{className:"text-[10px] font-black",children:"OS"})})})]}),t.jsxs("div",{className:"mt-6 text-center",children:[t.jsx("div",{className:"inline-flex items-center justify-center px-3 py-1 border border-slate-800 bg-slate-800 text-white text-[10px] font-bold tracking-[0.2em] uppercase",children:" OS"}),t.jsx("p",{className:"text-[9px] text-slate-400 mt-2 font-mono tracking-widest",children:"TOUKEN RANBU ONLINE // CHIFU SYSTEM"})]})]})]})]})}function Zc({title:e,onBack:n,children:s,className:a=""}){return t.jsxs("div",{className:"w-full h-full bg-[#F0F2F5] overflow-hidden flex flex-col font-['Source_Han_Sans_CN_VF',sans-serif] text-slate-800",children:[t.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.05]",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),t.jsx("div",{className:"bg-white/90 backdrop-blur-sm border-b border-slate-300 sticky top-0 z-10 flex-shrink-0",children:t.jsxs("div",{className:"max-w-md mx-auto px-4 h-[60px] flex items-center justify-between relative",children:[t.jsxs("button",{onClick:n,className:"absolute left-4 p-2 -ml-2 flex items-center gap-1 text-slate-600 active:text-black active:bg-slate-100 hover:text-black hover:bg-slate-100 rounded-none border border-transparent active:border-slate-300 hover:border-slate-300 transition-colors",children:[t.jsx(an,{className:"w-5 h-5",strokeWidth:2}),t.jsx("span",{className:"text-xs font-bold tracking-wider",children:""})]}),t.jsxs("div",{className:"w-full text-center flex flex-col items-center justify-center pointer-events-none",children:[t.jsx("h1",{className:"text-sm font-bold tracking-[0.1em] text-slate-800 uppercase",children:e}),t.jsx("div",{className:"h-[2px] w-8 bg-slate-800 mt-1"})]}),t.jsx("div",{className:"absolute right-4 opacity-30",children:t.jsx(mv,{className:"w-5 h-5"})})]})}),t.jsx("div",{className:`flex-1 overflow-y-auto overscroll-contain ${a}`,children:t.jsx("div",{className:"max-w-md mx-auto min-h-full pb-10 pt-6 px-5",children:s})})]})}function wv(e){const n=j.useRef({value:e,previous:e});return j.useMemo(()=>(n.current.value!==e&&(n.current.previous=n.current.value,n.current.value=e),n.current.previous),[e])}function Sv(e){const[n,s]=j.useState(void 0);return Tn(()=>{if(e){s({width:e.offsetWidth,height:e.offsetHeight});const a=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const l=i[0];let c,d;if("borderBoxSize"in l){const u=l.borderBoxSize,m=Array.isArray(u)?u[0]:u;c=m.inlineSize,d=m.blockSize}else c=e.offsetWidth,d=e.offsetHeight;s({width:c,height:d})});return a.observe(e,{box:"border-box"}),()=>a.unobserve(e)}else s(void 0)},[e]),n}var Qc="Switch",[PA]=Ci(Qc),[RA,BA]=PA(Qc),kv=j.forwardRef((e,n)=>{const{__scopeSwitch:s,name:a,checked:i,defaultChecked:l,required:c,disabled:d,value:u="on",onCheckedChange:m,form:p,...f}=e,[x,b]=j.useState(null),y=Bt(n,N=>b(N)),g=j.useRef(!1),k=x?p||!!x.closest("form"):!0,[w,C]=Nc({prop:i,defaultProp:l??!1,onChange:m,caller:Qc});return t.jsxs(RA,{scope:s,checked:w,disabled:d,children:[t.jsx(Nt.button,{type:"button",role:"switch","aria-checked":w,"aria-required":c,"data-state":_v(w),"data-disabled":d?"":void 0,disabled:d,value:u,...f,ref:y,onClick:Tt(e.onClick,N=>{C(A=>!A),k&&(g.current=N.isPropagationStopped(),g.current||N.stopPropagation())})}),k&&t.jsx(Cv,{control:x,bubbles:!g.current,name:a,value:u,checked:w,required:c,disabled:d,form:p,style:{transform:"translateX(-100%)"}})]})});kv.displayName=Qc;var jv="SwitchThumb",Nv=j.forwardRef((e,n)=>{const{__scopeSwitch:s,...a}=e,i=BA(jv,s);return t.jsx(Nt.span,{"data-state":_v(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:n})});Nv.displayName=jv;var LA="SwitchBubbleInput",Cv=j.forwardRef(({__scopeSwitch:e,control:n,checked:s,bubbles:a=!0,...i},l)=>{const c=j.useRef(null),d=Bt(c,l),u=wv(s),m=Sv(n);return j.useEffect(()=>{const p=c.current;if(!p)return;const f=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(f,"checked").set;if(u!==s&&b){const y=new Event("click",{bubbles:a});b.call(p,s),p.dispatchEvent(y)}},[u,s,a]),t.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...i,tabIndex:-1,ref:d,style:{...i.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Cv.displayName=LA;function _v(e){return e?"checked":"unchecked"}var zA=kv,OA=Nv;function Av({className:e,...n}){return t.jsx(zA,{"data-slot":"switch",className:as("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...n,children:t.jsx(OA,{"data-slot":"switch-thumb",className:as("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function $A({onBack:e}){const[n,s]=j.useState(""),[a,i]=j.useState(""),[l,c]=j.useState(""),[d,u]=j.useState(""),[m,p]=j.useState(.7),[f,x]=j.useState(!1),[b,y]=j.useState(!1),[g,k]=j.useState(!1),[w,C]=j.useState(null),[N,A]=j.useState(null),[P,B]=j.useState([]),[$,D]=j.useState(!1),[T,H]=j.useState(null),[K,E]=j.useState([]),[I,S]=j.useState(0),[L,z]=j.useState(!1),[R,U]=j.useState(!1),[W,Z]=j.useState(""),[O,V]=j.useState(""),[ee,q]=j.useState(""),[G,Q]=j.useState(.7),[le,ne]=j.useState([]),[ie,ve]=j.useState(!1),[se,ge]=j.useState(!1),[Me,M]=j.useState(null);j.useEffect(()=>{(async()=>{try{const _e=await ae.get(te.API_SETTINGS,"api_configs");if(_e){const Se=JSON.parse(_e);E(Se);const Be=parseInt(await ae.get(te.API_SETTINGS,"current_config_index")||"0");S(Be),Se[Be]&&me(Se[Be])}}catch(_e){console.error("Failed to load API settings:",_e)}})()},[]);const me=fe=>{s(fe.name),c(fe.baseUrl),i(fe.apiKey),u(fe.modelName),p(fe.temperature),U(fe.enableAuxiliary||!1),V(fe.auxBaseUrl||""),Z(fe.auxApiKey||""),q(fe.auxModelName||""),Q(fe.auxTemperature??.7)},he=()=>{const fe={name:n||"",baseUrl:l,apiKey:a,modelName:d,temperature:m,enableAuxiliary:R,auxBaseUrl:O,auxApiKey:W,auxModelName:ee,auxTemperature:G};let _e=[...K];const Se=_e.findIndex(Be=>Be.name===fe.name);Se>=0?(_e[Se]=fe,S(Se)):(_e.push(fe),S(_e.length-1)),E(_e),ae.set(te.API_SETTINGS,"api_configs",JSON.stringify(_e)),ae.set(te.API_SETTINGS,"current_config_index",I.toString()),x(!0),setTimeout(()=>x(!1),2e3),C(null),A(null)},J=async fe=>{S(fe),await ae.set(te.API_SETTINGS,"current_config_index",fe.toString()),me(K[fe]),z(!1)},X=async()=>{if(!a||!l){A({success:!1,message:" Key/URL"});return}y(!0);try{const fe=await fetch(`${l}/models`,{headers:{Authorization:`Bearer ${a}`}});if(fe.ok){const _e=await fe.json();if(_e.data&&_e.data.length>0){const Se=_e.data.map(Be=>Be.id);B(Se),!d&&Se.length>0&&u(Se[0]),A({success:!0,message:` ${Se.length} `}),setTimeout(()=>A(null),2e3)}else A({success:!1,message:""})}else A({success:!1,message:""})}catch{A({success:!1,message:""})}finally{y(!1)}},oe=fe=>{const _e=K.filter((Se,Be)=>Be!==fe);if(E(_e),ae.set(te.API_SETTINGS,"api_configs",JSON.stringify(_e)),fe===I)S(0),ae.set(te.API_SETTINGS,"current_config_index","0"),_e.length>0?me(_e[0]):(s(""),c(""),i(""),u(""),p(.7),B([]),U(!1),V(""),Z(""),q(""),Q(.7),ne([]));else if(fe<I){const Se=I-1;S(Se),ae.set(te.API_SETTINGS,"current_config_index",Se.toString())}H(null)},ke=async()=>{if(!a||!l){C({success:!1,message:""});return}k(!0),C(null);try{const fe=await fetch(`${l}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({model:d||"gpt-3.5-turbo",messages:[{role:"user",content:"test"}],temperature:m,max_tokens:10})});if(fe.ok)C({success:!0,message:""}),setTimeout(()=>C(null),2e3);else{const _e=await fe.json().catch(()=>({})),Se=_e.error?.message||_e.message||`HTTP ${fe.status}`;C({success:!1,message:`: ${Se}`}),setTimeout(()=>C(null),3e3)}}catch{C({success:!1,message:""}),setTimeout(()=>C(null),3e3)}finally{k(!1)}},Ne=async()=>{if(!W||!O){M({success:!1,message:" Key/URL"});return}ge(!0);try{const fe=await fetch(`${O}/models`,{headers:{Authorization:`Bearer ${W}`}});if(fe.ok){const _e=await fe.json();if(_e.data&&_e.data.length>0){const Se=_e.data.map(Be=>Be.id);ne(Se),!ee&&Se.length>0&&q(Se[0]),M({success:!0,message:` ${Se.length} `}),setTimeout(()=>M(null),2e3)}else M({success:!1,message:""})}else M({success:!1,message:""})}catch{M({success:!1,message:""})}finally{ge(!1)}},de=()=>{const fe=` ${K.length+1}`;s(fe),c(""),i(""),u(""),p(.7),U(!1),V(""),Z(""),q(""),Q(.7),ne([]),S(-1),z(!1)};return t.jsx(Zc,{title:"",onBack:e,children:t.jsxs("div",{className:"space-y-6 text-slate-800",children:[t.jsx(Ie,{children:(f||w||N||Me)&&t.jsx(xe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"fixed top-24 left-0 right-0 flex justify-center z-[60] pointer-events-none px-4",children:t.jsxs("div",{className:`
                   px-5 py-3 border-2 shadow-xl flex items-center gap-3 backdrop-blur-md text-sm font-bold tracking-wide
                   ${w?.success===!1||N?.success===!1||Me?.success===!1?"bg-red-50 border-red-500 text-red-600":"bg-white border-slate-800 text-slate-800"}
                 `,children:[w?.success===!1||N?.success===!1||Me?.success===!1?t.jsx(ht,{className:"w-4 h-4",strokeWidth:3}):t.jsx(wt,{className:"w-4 h-4",strokeWidth:3}),t.jsxs("span",{children:[f&&"",w&&w.message,N&&N.message,Me&&Me.message]})]})})}),t.jsxs("div",{className:"relative z-30",children:[t.jsxs("div",{onClick:()=>z(!L),className:"w-full bg-white p-4 border-2 border-slate-200 border-slate-200 active:border-slate-800 hover:border-slate-800 flex items-center justify-between cursor-pointer transition-all",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-10 h-10 bg-slate-100 flex items-center justify-center text-slate-600",children:t.jsx(Bo,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider",children:""}),t.jsx("div",{className:"text-base font-bold text-slate-800 font-mono",children:I===-1?"NEW_PROFILE (UNSAVED)":K[I]?.name||"UNNAMED"})]})]}),t.jsx(ba,{className:`w-5 h-5 text-slate-400 transition-transform ${L?"rotate-180":""}`})]}),t.jsx(Ie,{children:L&&t.jsxs(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute top-full left-0 right-0 mt-2 bg-white border-2 border-slate-800 shadow-[8px_8px_0px_rgba(0,0,0,0.1)] z-50 max-h-[300px] overflow-y-auto",children:[K.map((fe,_e)=>t.jsxs("div",{className:`p-3 flex justify-between items-center cursor-pointer transition-colors border-b border-slate-100 ${_e===I?"bg-slate-50":"active:bg-slate-50 hover:bg-slate-50"}`,onClick:()=>J(_e),children:[t.jsxs("div",{children:[t.jsx("div",{className:`text-sm font-bold font-mono ${_e===I?"text-blue-600":"text-slate-700"}`,children:fe.name}),t.jsx("div",{className:"text-[10px] text-slate-400 truncate max-w-[200px] font-mono",children:fe.baseUrl})]}),t.jsx("button",{onClick:Se=>{Se.stopPropagation(),H(_e)},className:"p-2 text-slate-300 active:text-red-500 active:bg-red-50 hover:text-red-500 hover:bg-red-50 rounded-sm transition-colors",children:t.jsx(Dn,{className:"w-4 h-4"})})]},_e)),t.jsxs("button",{onClick:de,className:"w-full p-3 text-center text-sm font-bold text-slate-600 active:bg-slate-100 hover:bg-slate-100 transition-colors flex items-center justify-center gap-2 uppercase tracking-wider",children:[t.jsx(is,{className:"w-4 h-4"})," "]})]})})]}),t.jsxs("div",{className:"bg-white p-6 border border-slate-200 space-y-6 relative",children:[t.jsx("div",{className:"absolute top-0 left-0 w-3 h-3 border-l-2 border-t-2 border-slate-300"}),t.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 border-r-2 border-b-2 border-slate-300"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:""}),t.jsx("input",{type:"text",value:n,onChange:fe=>s(fe.target.value),className:"w-full bg-slate-50 border border-slate-200 px-4 py-3 text-slate-800 font-bold focus:border-slate-800 focus:outline-none transition-all font-mono text-sm rounded-none",placeholder:"PROFILE_NAME"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1 flex items-center gap-2",children:[t.jsx(Dc,{className:"w-3 h-3"}),"  (Base URL)"]}),t.jsx("input",{type:"text",value:l,onChange:fe=>c(fe.target.value),className:"w-full bg-slate-50 border border-slate-200 px-4 py-3 text-slate-800 font-medium focus:border-slate-800 focus:outline-none transition-all placeholder:text-slate-300 font-mono text-xs rounded-none",placeholder:"https://api.example.com/v1"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1 flex items-center gap-2",children:[t.jsx(Tg,{className:"w-3 h-3"}),"  (API Key)"]}),t.jsx("input",{type:"password",value:a,onChange:fe=>i(fe.target.value),className:"w-full bg-slate-50 border border-slate-200 px-4 py-3 text-slate-800 font-medium focus:border-slate-800 focus:outline-none transition-all placeholder:text-slate-300 font-mono text-xs rounded-none",placeholder:"sk-..."})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between items-center px-1",children:[t.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[t.jsx(Ag,{className:"w-3 h-3"})," "]}),t.jsxs("button",{onClick:X,disabled:b,className:"text-[9px] font-bold border border-blue-200 text-blue-600 px-2 py-0.5 active:bg-blue-50 hover:bg-blue-50 transition-all flex items-center gap-1 disabled:opacity-50 uppercase",children:[t.jsx(mf,{className:`w-3 h-3 ${b?"animate-spin":""}`}),b?"SCANNING...":"AUTO SCAN"]})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",value:d,onChange:fe=>u(fe.target.value),className:"w-full bg-slate-50 border border-slate-200 px-4 py-3 text-slate-800 font-medium focus:border-slate-800 focus:outline-none transition-all placeholder:text-slate-300 font-mono text-xs rounded-none",placeholder:"gpt-3.5-turbo"}),P.length>0&&t.jsx("button",{onClick:()=>D(!$),className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 text-slate-400 active:bg-slate-200 hover:bg-slate-200 rounded-none transition-colors",children:t.jsx(ba,{className:"w-4 h-4"})}),t.jsx(Ie,{children:$&&P.length>0&&t.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute top-full left-0 right-0 mt-2 bg-white border border-slate-800 shadow-lg z-40 max-h-[200px] overflow-y-auto",children:P.map((fe,_e)=>t.jsx("div",{onClick:()=>{u(fe),D(!1)},className:"px-4 py-2 text-xs text-slate-700 active:bg-slate-100 hover:bg-slate-100 cursor-pointer border-b border-slate-100 font-mono last:border-0",children:fe},_e))})})]})]}),t.jsxs("div",{className:"space-y-4 pt-2",children:[t.jsxs("div",{className:"flex justify-between items-center px-1",children:[t.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[t.jsx(Ec,{className:"w-3 h-3"}),"  (Temperature)"]}),t.jsx("span",{className:"bg-slate-100 border border-slate-200 text-slate-600 px-2 py-0.5 text-xs font-bold font-mono",children:m.toFixed(1)})]}),t.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:m,onChange:fe=>p(parseFloat(fe.target.value)),className:"w-full h-1 bg-slate-200 rounded-none appearance-none cursor-pointer accent-slate-800 hover:accent-blue-600 transition-all"}),t.jsxs("div",{className:"flex justify-between text-[9px] text-slate-400 font-bold uppercase tracking-widest px-1",children:[t.jsx("span",{children:"PRECISE"}),t.jsx("span",{children:"CREATIVE"})]})]}),t.jsxs("div",{className:"border-t border-slate-200 pt-6 mt-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(xv,{className:"w-4 h-4 text-amber-500"}),t.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-slate-700",children:" API ()"})]}),t.jsx(Av,{checked:R,onCheckedChange:U,className:"data-[state=checked]:bg-amber-500"})]}),t.jsx(Ie,{children:R&&t.jsxs(xe.div,{initial:{height:0,opacity:0,overflow:"hidden"},animate:{height:"auto",opacity:1,transitionEnd:{overflow:"visible"}},exit:{height:0,opacity:0,overflow:"hidden"},className:"space-y-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1 flex items-center gap-2",children:[t.jsx(Dc,{className:"w-3 h-3"})," "]}),t.jsx("input",{type:"text",value:O,onChange:fe=>V(fe.target.value),className:"w-full bg-slate-50 border border-slate-200 px-4 py-3 text-slate-800 font-medium focus:border-slate-800 focus:outline-none transition-all placeholder:text-slate-300 font-mono text-xs rounded-none",placeholder:"https://api.example.com/v1"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1 flex items-center gap-2",children:[t.jsx(Tg,{className:"w-3 h-3"})," "]}),t.jsx("input",{type:"password",value:W,onChange:fe=>Z(fe.target.value),className:"w-full bg-slate-50 border border-slate-200 px-4 py-3 text-slate-800 font-medium focus:border-slate-800 focus:outline-none transition-all placeholder:text-slate-300 font-mono text-xs rounded-none",placeholder:"sk-..."})]}),t.jsxs("div",{className:"space-y-2 pb-2",children:[t.jsxs("div",{className:"flex justify-between items-center px-1",children:[t.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[t.jsx(Ag,{className:"w-3 h-3"})," "]}),t.jsxs("button",{onClick:Ne,disabled:se,className:"text-[9px] font-bold border border-amber-200 text-amber-600 px-2 py-0.5 active:bg-amber-50 hover:bg-amber-50 transition-all flex items-center gap-1 disabled:opacity-50 uppercase",children:[t.jsx(mf,{className:`w-3 h-3 ${se?"animate-spin":""}`}),se?"SCANNING...":"AUTO SCAN"]})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",value:ee,onChange:fe=>q(fe.target.value),className:"w-full bg-slate-50 border border-slate-200 px-4 py-3 text-slate-800 font-medium focus:border-slate-800 focus:outline-none transition-all placeholder:text-slate-300 font-mono text-xs rounded-none",placeholder:"gpt-3.5-turbo"}),le.length>0&&t.jsx("button",{onClick:()=>ve(!ie),className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 text-slate-400 active:bg-slate-200 hover:bg-slate-200 rounded-none transition-colors",children:t.jsx(ba,{className:"w-4 h-4"})}),t.jsx(Ie,{children:ie&&le.length>0&&t.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute top-full left-0 right-0 mt-2 bg-white border border-slate-800 shadow-lg z-40 max-h-[200px] overflow-y-auto",children:le.map((fe,_e)=>t.jsx("div",{onClick:()=>{q(fe),ve(!1)},className:"px-4 py-2 text-xs text-slate-700 active:bg-slate-100 hover:bg-slate-100 cursor-pointer border-b border-slate-100 font-mono last:border-0",children:fe},_e))})})]})]}),t.jsxs("div",{className:"space-y-4 pt-2",children:[t.jsxs("div",{className:"flex justify-between items-center px-1",children:[t.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[t.jsx(Ec,{className:"w-3 h-3"}),"  (Temperature)"]}),t.jsx("span",{className:"bg-slate-100 border border-slate-200 text-slate-600 px-2 py-0.5 text-xs font-bold font-mono",children:G.toFixed(1)})]}),t.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:G,onChange:fe=>Q(parseFloat(fe.target.value)),className:"w-full h-1 bg-slate-200 rounded-none appearance-none cursor-pointer accent-slate-800 hover:accent-amber-600 transition-all"}),t.jsxs("div",{className:"flex justify-between text-[9px] text-slate-400 font-bold uppercase tracking-widest px-1",children:[t.jsx("span",{children:"PRECISE"}),t.jsx("span",{children:"CREATIVE"})]})]})]})})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-3 pt-2",children:[t.jsxs("button",{onClick:ke,disabled:g,className:"col-span-1 py-3.5 border border-slate-300 bg-white text-slate-600 font-bold text-xs active:border-slate-800 active:text-slate-800 hover:border-slate-800 hover:text-slate-800 transition-all flex items-center justify-center gap-2 disabled:opacity-50 uppercase tracking-wider",children:[g?t.jsx(mf,{className:"w-3 h-3 animate-spin"}):t.jsx(B8,{className:"w-3 h-3"}),"TEST"]}),t.jsxs("button",{onClick:he,className:"col-span-2 py-3.5 bg-slate-800 text-white font-bold text-xs active:bg-slate-900 hover:bg-slate-900 transition-all flex items-center justify-center gap-2 shadow-lg shadow-slate-200 uppercase tracking-wider",children:[t.jsx(Ei,{className:"w-3 h-3"}),""]})]}),t.jsx(Ie,{children:T!==null&&t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[70] px-6",children:t.jsxs(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"bg-white border-2 border-slate-800 p-6 w-full max-w-sm shadow-[8px_8px_0px_rgba(0,0,0,0.2)]",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("h3",{className:"text-lg font-black text-slate-800 mb-2 uppercase tracking-tight",children:""}),t.jsxs("p",{className:"text-xs font-mono text-slate-500",children:['PROFILE: "',K[T]?.name,'"']}),t.jsx("p",{className:"text-sm text-slate-500 mt-2",children:""})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>H(null),className:"flex-1 py-3 border border-slate-300 text-slate-600 font-bold text-xs active:bg-slate-50 hover:bg-slate-50 transition-colors uppercase tracking-wider",children:""}),t.jsx("button",{onClick:()=>oe(T),className:"flex-1 py-3 bg-red-600 text-white font-bold text-xs active:bg-red-700 hover:bg-red-700 transition-colors shadow-lg shadow-red-200 uppercase tracking-wider",children:""})]})]})})})]})})}function VA(e,n){return n.forEach((function(s){s&&typeof s!="string"&&!Array.isArray(s)&&Object.keys(s).forEach((function(a){if(a!=="default"&&!(a in e)){var i=Object.getOwnPropertyDescriptor(s,a);Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:function(){return s[a]}})}}))})),Object.freeze(e)}function Ev(e,n){return new Promise((function(s,a){let i;return HA(e).then((function(l){try{return i=l,s(new Blob([n.slice(0,2),i,n.slice(2)],{type:"image/jpeg"}))}catch(c){return a(c)}}),a)}))}const HA=e=>new Promise(((n,s)=>{const a=new FileReader;a.addEventListener("load",(({target:{result:i}})=>{const l=new DataView(i);let c=0;if(l.getUint16(c)!==65496)return s("not a valid JPEG");for(c+=2;;){const d=l.getUint16(c);if(d===65498)break;const u=l.getUint16(c+2);if(d===65505&&l.getUint32(c+4)===1165519206){const m=c+10;let p;switch(l.getUint16(m)){case 18761:p=!0;break;case 19789:p=!1;break;default:return s("TIFF header contains invalid endian")}if(l.getUint16(m+2,p)!==42)return s("TIFF header contains invalid version");const f=l.getUint32(m+4,p),x=m+f+2+12*l.getUint16(m+f,p);for(let b=m+f+2;b<x;b+=12)if(l.getUint16(b,p)==274){if(l.getUint16(b+2,p)!==3)return s("Orientation data type is invalid");if(l.getUint32(b+4,p)!==1)return s("Orientation data count is invalid");l.setUint16(b+8,1,p);break}return n(i.slice(c,c+2+u))}c+=2+u}return n(new Blob)})),a.readAsArrayBuffer(e)}));var Fc={},UA={get exports(){return Fc},set exports(e){Fc=e}};(function(e){var n,s,a={};UA.exports=a,a.parse=function(i,l){for(var c=a.bin.readUshort,d=a.bin.readUint,u=0,m={},p=new Uint8Array(i),f=p.length-4;d(p,f)!=101010256;)f--;u=f,u+=4;var x=c(p,u+=4);c(p,u+=2);var b=d(p,u+=2),y=d(p,u+=4);u+=4,u=y;for(var g=0;g<x;g++){d(p,u),u+=4,u+=4,u+=4,d(p,u+=4),b=d(p,u+=4);var k=d(p,u+=4),w=c(p,u+=4),C=c(p,u+2),N=c(p,u+4);u+=6;var A=d(p,u+=8);u+=4,u+=w+C+N,a._readLocal(p,A,m,b,k,l)}return m},a._readLocal=function(i,l,c,d,u,m){var p=a.bin.readUshort,f=a.bin.readUint;f(i,l),p(i,l+=4),p(i,l+=2);var x=p(i,l+=2);f(i,l+=2),f(i,l+=4),l+=4;var b=p(i,l+=8),y=p(i,l+=2);l+=2;var g=a.bin.readUTF8(i,l,b);if(l+=b,l+=y,m)c[g]={size:u,csize:d};else{var k=new Uint8Array(i.buffer,l);if(x==0)c[g]=new Uint8Array(k.buffer.slice(l,l+d));else{if(x!=8)throw"unknown compression method: "+x;var w=new Uint8Array(u);a.inflateRaw(k,w),c[g]=w}}},a.inflateRaw=function(i,l){return a.F.inflate(i,l)},a.inflate=function(i,l){return i[0],i[1],a.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),l)},a.deflate=function(i,l){l==null&&(l={level:6});var c=0,d=new Uint8Array(50+Math.floor(1.1*i.length));d[c]=120,d[c+1]=156,c+=2,c=a.F.deflateRaw(i,d,c,l.level);var u=a.adler(i,0,i.length);return d[c+0]=u>>>24&255,d[c+1]=u>>>16&255,d[c+2]=u>>>8&255,d[c+3]=u>>>0&255,new Uint8Array(d.buffer,0,c+4)},a.deflateRaw=function(i,l){l==null&&(l={level:6});var c=new Uint8Array(50+Math.floor(1.1*i.length)),d=a.F.deflateRaw(i,c,d,l.level);return new Uint8Array(c.buffer,0,d)},a.encode=function(i,l){l==null&&(l=!1);var c=0,d=a.bin.writeUint,u=a.bin.writeUshort,m={};for(var p in i){var f=!a._noNeed(p)&&!l,x=i[p],b=a.crc.crc(x,0,x.length);m[p]={cpr:f,usize:x.length,crc:b,file:f?a.deflateRaw(x):x}}for(var p in m)c+=m[p].file.length+30+46+2*a.bin.sizeUTF8(p);c+=22;var y=new Uint8Array(c),g=0,k=[];for(var p in m){var w=m[p];k.push(g),g=a._writeHeader(y,g,p,w,0)}var C=0,N=g;for(var p in m)w=m[p],k.push(g),g=a._writeHeader(y,g,p,w,1,k[C++]);var A=g-N;return d(y,g,101010256),g+=4,u(y,g+=4,C),u(y,g+=2,C),d(y,g+=2,A),d(y,g+=4,N),g+=4,g+=2,y.buffer},a._noNeed=function(i){var l=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(l)!=-1},a._writeHeader=function(i,l,c,d,u,m){var p=a.bin.writeUint,f=a.bin.writeUshort,x=d.file;return p(i,l,u==0?67324752:33639248),l+=4,u==1&&(l+=2),f(i,l,20),f(i,l+=2,0),f(i,l+=2,d.cpr?8:0),p(i,l+=2,0),p(i,l+=4,d.crc),p(i,l+=4,x.length),p(i,l+=4,d.usize),f(i,l+=4,a.bin.sizeUTF8(c)),f(i,l+=2,0),l+=2,u==1&&(l+=2,l+=2,p(i,l+=6,m),l+=4),l+=a.bin.writeUTF8(i,l,c),u==0&&(i.set(x,l),l+=x.length),l},a.crc={table:(function(){for(var i=new Uint32Array(256),l=0;l<256;l++){for(var c=l,d=0;d<8;d++)1&c?c=3988292384^c>>>1:c>>>=1;i[l]=c}return i})(),update:function(i,l,c,d){for(var u=0;u<d;u++)i=a.crc.table[255&(i^l[c+u])]^i>>>8;return i},crc:function(i,l,c){return 4294967295^a.crc.update(4294967295,i,l,c)}},a.adler=function(i,l,c){for(var d=1,u=0,m=l,p=l+c;m<p;){for(var f=Math.min(m+5552,p);m<f;)u+=d+=i[m++];d%=65521,u%=65521}return u<<16|d},a.bin={readUshort:function(i,l){return i[l]|i[l+1]<<8},writeUshort:function(i,l,c){i[l]=255&c,i[l+1]=c>>8&255},readUint:function(i,l){return 16777216*i[l+3]+(i[l+2]<<16|i[l+1]<<8|i[l])},writeUint:function(i,l,c){i[l]=255&c,i[l+1]=c>>8&255,i[l+2]=c>>16&255,i[l+3]=c>>24&255},readASCII:function(i,l,c){for(var d="",u=0;u<c;u++)d+=String.fromCharCode(i[l+u]);return d},writeASCII:function(i,l,c){for(var d=0;d<c.length;d++)i[l+d]=c.charCodeAt(d)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,l,c){for(var d,u="",m=0;m<c;m++)u+="%"+a.bin.pad(i[l+m].toString(16));try{d=decodeURIComponent(u)}catch{return a.bin.readASCII(i,l,c)}return d},writeUTF8:function(i,l,c){for(var d=c.length,u=0,m=0;m<d;m++){var p=c.charCodeAt(m);if((4294967168&p)==0)i[l+u]=p,u++;else if((4294965248&p)==0)i[l+u]=192|p>>6,i[l+u+1]=128|p>>0&63,u+=2;else if((4294901760&p)==0)i[l+u]=224|p>>12,i[l+u+1]=128|p>>6&63,i[l+u+2]=128|p>>0&63,u+=3;else{if((4292870144&p)!=0)throw"e";i[l+u]=240|p>>18,i[l+u+1]=128|p>>12&63,i[l+u+2]=128|p>>6&63,i[l+u+3]=128|p>>0&63,u+=4}}return u},sizeUTF8:function(i){for(var l=i.length,c=0,d=0;d<l;d++){var u=i.charCodeAt(d);if((4294967168&u)==0)c++;else if((4294965248&u)==0)c+=2;else if((4294901760&u)==0)c+=3;else{if((4292870144&u)!=0)throw"e";c+=4}}return c}},a.F={},a.F.deflateRaw=function(i,l,c,d){var u=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][d],m=a.F.U,p=a.F._goodIndex;a.F._hash;var f=a.F._putsE,x=0,b=c<<3,y=0,g=i.length;if(d==0){for(;x<g;)f(l,b,x+(K=Math.min(65535,g-x))==g?1:0),b=a.F._copyExact(i,x,K,l,b+8),x+=K;return b>>>3}var k=m.lits,w=m.strt,C=m.prev,N=0,A=0,P=0,B=0,$=0,D=0;for(g>2&&(w[D=a.F._hash(i,0)]=0),x=0;x<g;x++){if($=D,x+1<g-2){D=a.F._hash(i,x+1);var T=x+1&32767;C[T]=w[D],w[D]=T}if(y<=x){(N>14e3||A>26697)&&g-x>100&&(y<x&&(k[N]=x-y,N+=2,y=x),b=a.F._writeBlock(x==g-1||y==g?1:0,k,N,B,i,P,x-P,l,b),N=A=B=0,P=x);var H=0;x<g-2&&(H=a.F._bestMatch(i,x,C,$,Math.min(u[2],g-x),u[3]));var K=H>>>16,E=65535&H;if(H!=0){E=65535&H;var I=p(K=H>>>16,m.of0);m.lhst[257+I]++;var S=p(E,m.df0);m.dhst[S]++,B+=m.exb[I]+m.dxb[S],k[N]=K<<23|x-y,k[N+1]=E<<16|I<<8|S,N+=2,y=x+K}else m.lhst[i[x]]++;A++}}for(P==x&&i.length!=0||(y<x&&(k[N]=x-y,N+=2,y=x),b=a.F._writeBlock(1,k,N,B,i,P,x-P,l,b),N=0,A=0,N=A=B=0,P=x);(7&b)!=0;)b++;return b>>>3},a.F._bestMatch=function(i,l,c,d,u,m){var p=32767&l,f=c[p],x=p-f+32768&32767;if(f==p||d!=a.F._hash(i,l-x))return 0;for(var b=0,y=0,g=Math.min(32767,l);x<=g&&--m!=0&&f!=p;){if(b==0||i[l+b]==i[l+b-x]){var k=a.F._howLong(i,l,x);if(k>b){if(y=x,(b=k)>=u)break;x+2<k&&(k=x+2);for(var w=0,C=0;C<k-2;C++){var N=l-x+C+32768&32767,A=N-c[N]+32768&32767;A>w&&(w=A,f=N)}}}x+=(p=f)-(f=c[p])+32768&32767}return b<<16|y},a.F._howLong=function(i,l,c){if(i[l]!=i[l-c]||i[l+1]!=i[l+1-c]||i[l+2]!=i[l+2-c])return 0;var d=l,u=Math.min(i.length,l+258);for(l+=3;l<u&&i[l]==i[l-c];)l++;return l-d},a.F._hash=function(i,l){return(i[l]<<8|i[l+1])+(i[l+2]<<4)&65535},a.saved=0,a.F._writeBlock=function(i,l,c,d,u,m,p,f,x){var b,y,g,k,w,C,N,A,P,B=a.F.U,$=a.F._putsF,D=a.F._putsE;B.lhst[256]++,y=(b=a.F.getTrees())[0],g=b[1],k=b[2],w=b[3],C=b[4],N=b[5],A=b[6],P=b[7];var T=32+((x+3&7)==0?0:8-(x+3&7))+(p<<3),H=d+a.F.contSize(B.fltree,B.lhst)+a.F.contSize(B.fdtree,B.dhst),K=d+a.F.contSize(B.ltree,B.lhst)+a.F.contSize(B.dtree,B.dhst);K+=14+3*N+a.F.contSize(B.itree,B.ihst)+(2*B.ihst[16]+3*B.ihst[17]+7*B.ihst[18]);for(var E=0;E<286;E++)B.lhst[E]=0;for(E=0;E<30;E++)B.dhst[E]=0;for(E=0;E<19;E++)B.ihst[E]=0;var I=T<H&&T<K?0:H<K?1:2;if($(f,x,i),$(f,x+1,I),x+=3,I==0){for(;(7&x)!=0;)x++;x=a.F._copyExact(u,m,p,f,x)}else{var S,L;if(I==1&&(S=B.fltree,L=B.fdtree),I==2){a.F.makeCodes(B.ltree,y),a.F.revCodes(B.ltree,y),a.F.makeCodes(B.dtree,g),a.F.revCodes(B.dtree,g),a.F.makeCodes(B.itree,k),a.F.revCodes(B.itree,k),S=B.ltree,L=B.dtree,D(f,x,w-257),D(f,x+=5,C-1),D(f,x+=5,N-4),x+=4;for(var z=0;z<N;z++)D(f,x+3*z,B.itree[1+(B.ordr[z]<<1)]);x+=3*N,x=a.F._codeTiny(A,B.itree,f,x),x=a.F._codeTiny(P,B.itree,f,x)}for(var R=m,U=0;U<c;U+=2){for(var W=l[U],Z=W>>>23,O=R+(8388607&W);R<O;)x=a.F._writeLit(u[R++],S,f,x);if(Z!=0){var V=l[U+1],ee=V>>16,q=V>>8&255,G=255&V;D(f,x=a.F._writeLit(257+q,S,f,x),Z-B.of0[q]),x+=B.exb[q],$(f,x=a.F._writeLit(G,L,f,x),ee-B.df0[G]),x+=B.dxb[G],R+=Z}}x=a.F._writeLit(256,S,f,x)}return x},a.F._copyExact=function(i,l,c,d,u){var m=u>>>3;return d[m]=c,d[m+1]=c>>>8,d[m+2]=255-d[m],d[m+3]=255-d[m+1],m+=4,d.set(new Uint8Array(i.buffer,l,c),m),u+(c+4<<3)},a.F.getTrees=function(){for(var i=a.F.U,l=a.F._hufTree(i.lhst,i.ltree,15),c=a.F._hufTree(i.dhst,i.dtree,15),d=[],u=a.F._lenCodes(i.ltree,d),m=[],p=a.F._lenCodes(i.dtree,m),f=0;f<d.length;f+=2)i.ihst[d[f]]++;for(f=0;f<m.length;f+=2)i.ihst[m[f]]++;for(var x=a.F._hufTree(i.ihst,i.itree,7),b=19;b>4&&i.itree[1+(i.ordr[b-1]<<1)]==0;)b--;return[l,c,x,u,p,b,d,m]},a.F.getSecond=function(i){for(var l=[],c=0;c<i.length;c+=2)l.push(i[c+1]);return l},a.F.nonZero=function(i){for(var l="",c=0;c<i.length;c+=2)i[c+1]!=0&&(l+=(c>>1)+",");return l},a.F.contSize=function(i,l){for(var c=0,d=0;d<l.length;d++)c+=l[d]*i[1+(d<<1)];return c},a.F._codeTiny=function(i,l,c,d){for(var u=0;u<i.length;u+=2){var m=i[u],p=i[u+1];d=a.F._writeLit(m,l,c,d);var f=m==16?2:m==17?3:7;m>15&&(a.F._putsE(c,d,p,f),d+=f)}return d},a.F._lenCodes=function(i,l){for(var c=i.length;c!=2&&i[c-1]==0;)c-=2;for(var d=0;d<c;d+=2){var u=i[d+1],m=d+3<c?i[d+3]:-1,p=d+5<c?i[d+5]:-1,f=d==0?-1:i[d-1];if(u==0&&m==u&&p==u){for(var x=d+5;x+2<c&&i[x+2]==u;)x+=2;(b=Math.min(x+1-d>>>1,138))<11?l.push(17,b-3):l.push(18,b-11),d+=2*b-2}else if(u==f&&m==u&&p==u){for(x=d+5;x+2<c&&i[x+2]==u;)x+=2;var b=Math.min(x+1-d>>>1,6);l.push(16,b-3),d+=2*b-2}else l.push(u,0)}return c>>>1},a.F._hufTree=function(i,l,c){var d=[],u=i.length,m=l.length,p=0;for(p=0;p<m;p+=2)l[p]=0,l[p+1]=0;for(p=0;p<u;p++)i[p]!=0&&d.push({lit:p,f:i[p]});var f=d.length,x=d.slice(0);if(f==0)return 0;if(f==1){var b=d[0].lit;return x=b==0?1:0,l[1+(b<<1)]=1,l[1+(x<<1)]=1,1}d.sort((function(A,P){return A.f-P.f}));var y=d[0],g=d[1],k=0,w=1,C=2;for(d[0]={lit:-1,f:y.f+g.f,l:y,r:g,d:0};w!=f-1;)y=k!=w&&(C==f||d[k].f<d[C].f)?d[k++]:d[C++],g=k!=w&&(C==f||d[k].f<d[C].f)?d[k++]:d[C++],d[w++]={lit:-1,f:y.f+g.f,l:y,r:g};var N=a.F.setDepth(d[w-1],0);for(N>c&&(a.F.restrictDepth(x,c,N),N=c),p=0;p<f;p++)l[1+(x[p].lit<<1)]=x[p].d;return N},a.F.setDepth=function(i,l){return i.lit!=-1?(i.d=l,l):Math.max(a.F.setDepth(i.l,l+1),a.F.setDepth(i.r,l+1))},a.F.restrictDepth=function(i,l,c){var d=0,u=1<<c-l,m=0;for(i.sort((function(f,x){return x.d==f.d?f.f-x.f:x.d-f.d})),d=0;d<i.length&&i[d].d>l;d++){var p=i[d].d;i[d].d=l,m+=u-(1<<c-p)}for(m>>>=c-l;m>0;)(p=i[d].d)<l?(i[d].d++,m-=1<<l-p-1):d++;for(;d>=0;d--)i[d].d==l&&m<0&&(i[d].d--,m++);m!=0&&console.log("debt left")},a.F._goodIndex=function(i,l){var c=0;return l[16|c]<=i&&(c|=16),l[8|c]<=i&&(c|=8),l[4|c]<=i&&(c|=4),l[2|c]<=i&&(c|=2),l[1|c]<=i&&(c|=1),c},a.F._writeLit=function(i,l,c,d){return a.F._putsF(c,d,l[i<<1]),d+l[1+(i<<1)]},a.F.inflate=function(i,l){var c=Uint8Array;if(i[0]==3&&i[1]==0)return l||new c(0);var d=a.F,u=d._bitsF,m=d._bitsE,p=d._decodeTiny,f=d.makeCodes,x=d.codes2map,b=d._get17,y=d.U,g=l==null;g&&(l=new c(i.length>>>2<<3));for(var k,w,C=0,N=0,A=0,P=0,B=0,$=0,D=0,T=0,H=0;C==0;)if(C=u(i,H,1),N=u(i,H+1,2),H+=3,N!=0){if(g&&(l=a.F._check(l,T+(1<<17))),N==1&&(k=y.flmap,w=y.fdmap,$=511,D=31),N==2){A=m(i,H,5)+257,P=m(i,H+5,5)+1,B=m(i,H+10,4)+4,H+=14;for(var K=0;K<38;K+=2)y.itree[K]=0,y.itree[K+1]=0;var E=1;for(K=0;K<B;K++){var I=m(i,H+3*K,3);y.itree[1+(y.ordr[K]<<1)]=I,I>E&&(E=I)}H+=3*B,f(y.itree,E),x(y.itree,E,y.imap),k=y.lmap,w=y.dmap,H=p(y.imap,(1<<E)-1,A+P,i,H,y.ttree);var S=d._copyOut(y.ttree,0,A,y.ltree);$=(1<<S)-1;var L=d._copyOut(y.ttree,A,P,y.dtree);D=(1<<L)-1,f(y.ltree,S),x(y.ltree,S,k),f(y.dtree,L),x(y.dtree,L,w)}for(;;){var z=k[b(i,H)&$];H+=15&z;var R=z>>>4;if(!(R>>>8))l[T++]=R;else{if(R==256)break;var U=T+R-254;if(R>264){var W=y.ldef[R-257];U=T+(W>>>3)+m(i,H,7&W),H+=7&W}var Z=w[b(i,H)&D];H+=15&Z;var O=Z>>>4,V=y.ddef[O],ee=(V>>>4)+u(i,H,15&V);for(H+=15&V,g&&(l=a.F._check(l,T+(1<<17)));T<U;)l[T]=l[T++-ee],l[T]=l[T++-ee],l[T]=l[T++-ee],l[T]=l[T++-ee];T=U}}}else{(7&H)!=0&&(H+=8-(7&H));var q=4+(H>>>3),G=i[q-4]|i[q-3]<<8;g&&(l=a.F._check(l,T+G)),l.set(new c(i.buffer,i.byteOffset+q,G),T),H=q+G<<3,T+=G}return l.length==T?l:l.slice(0,T)},a.F._check=function(i,l){var c=i.length;if(l<=c)return i;var d=new Uint8Array(Math.max(c<<1,l));return d.set(i,0),d},a.F._decodeTiny=function(i,l,c,d,u,m){for(var p=a.F._bitsE,f=a.F._get17,x=0;x<c;){var b=i[f(d,u)&l];u+=15&b;var y=b>>>4;if(y<=15)m[x]=y,x++;else{var g=0,k=0;y==16?(k=3+p(d,u,2),u+=2,g=m[x-1]):y==17?(k=3+p(d,u,3),u+=3):y==18&&(k=11+p(d,u,7),u+=7);for(var w=x+k;x<w;)m[x]=g,x++}}return u},a.F._copyOut=function(i,l,c,d){for(var u=0,m=0,p=d.length>>>1;m<c;){var f=i[m+l];d[m<<1]=0,d[1+(m<<1)]=f,f>u&&(u=f),m++}for(;m<p;)d[m<<1]=0,d[1+(m<<1)]=0,m++;return u},a.F.makeCodes=function(i,l){for(var c,d,u,m,p=a.F.U,f=i.length,x=p.bl_count,b=0;b<=l;b++)x[b]=0;for(b=1;b<f;b+=2)x[i[b]]++;var y=p.next_code;for(c=0,x[0]=0,d=1;d<=l;d++)c=c+x[d-1]<<1,y[d]=c;for(u=0;u<f;u+=2)(m=i[u+1])!=0&&(i[u]=y[m],y[m]++)},a.F.codes2map=function(i,l,c){for(var d=i.length,u=a.F.U.rev15,m=0;m<d;m+=2)if(i[m+1]!=0)for(var p=m>>1,f=i[m+1],x=p<<4|f,b=l-f,y=i[m]<<b,g=y+(1<<b);y!=g;)c[u[y]>>>15-l]=x,y++},a.F.revCodes=function(i,l){for(var c=a.F.U.rev15,d=15-l,u=0;u<i.length;u+=2){var m=i[u]<<l-i[u+1];i[u]=c[m]>>>d}},a.F._putsE=function(i,l,c){c<<=7&l;var d=l>>>3;i[d]|=c,i[d+1]|=c>>>8},a.F._putsF=function(i,l,c){c<<=7&l;var d=l>>>3;i[d]|=c,i[d+1]|=c>>>8,i[d+2]|=c>>>16},a.F._bitsE=function(i,l,c){return(i[l>>>3]|i[1+(l>>>3)]<<8)>>>(7&l)&(1<<c)-1},a.F._bitsF=function(i,l,c){return(i[l>>>3]|i[1+(l>>>3)]<<8|i[2+(l>>>3)]<<16)>>>(7&l)&(1<<c)-1},a.F._get17=function(i,l){return(i[l>>>3]|i[1+(l>>>3)]<<8|i[2+(l>>>3)]<<16)>>>(7&l)},a.F._get25=function(i,l){return(i[l>>>3]|i[1+(l>>>3)]<<8|i[2+(l>>>3)]<<16|i[3+(l>>>3)]<<24)>>>(7&l)},a.F.U=(n=Uint16Array,s=Uint32Array,{next_code:new n(16),bl_count:new n(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new n(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new s(32),flmap:new n(512),fltree:[],fdmap:new n(32),fdtree:[],lmap:new n(32768),ltree:[],ttree:[],dmap:new n(32768),dtree:[],imap:new n(512),itree:[],rev15:new n(32768),lhst:new s(286),dhst:new s(30),ihst:new s(19),lits:new s(15e3),strt:new n(65536),prev:new n(32768)}),(function(){for(var i=a.F.U,l=0;l<32768;l++){var c=l;c=(4278255360&(c=(4042322160&(c=(3435973836&(c=(2863311530&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,i.rev15[l]=(c>>>16|c<<16)>>>17}function d(u,m,p){for(;m--!=0;)u.push(0,p)}for(l=0;l<32;l++)i.ldef[l]=i.of0[l]<<3|i.exb[l],i.ddef[l]=i.df0[l]<<4|i.dxb[l];d(i.fltree,144,8),d(i.fltree,112,9),d(i.fltree,24,7),d(i.fltree,8,8),a.F.makeCodes(i.fltree,9),a.F.codes2map(i.fltree,9,i.flmap),a.F.revCodes(i.fltree,9),d(i.fdtree,32,5),a.F.makeCodes(i.fdtree,5),a.F.codes2map(i.fdtree,5,i.fdmap),a.F.revCodes(i.fdtree,5),d(i.itree,19,0),d(i.ltree,286,0),d(i.dtree,30,0),d(i.ttree,320,0)})()})();var WA=VA({__proto__:null,default:Fc},[Fc]);const As=(function(){var e={nextZero(p,f){for(;p[f]!=0;)f++;return f},readUshort:(p,f)=>p[f]<<8|p[f+1],writeUshort(p,f,x){p[f]=x>>8&255,p[f+1]=255&x},readUint:(p,f)=>16777216*p[f]+(p[f+1]<<16|p[f+2]<<8|p[f+3]),writeUint(p,f,x){p[f]=x>>24&255,p[f+1]=x>>16&255,p[f+2]=x>>8&255,p[f+3]=255&x},readASCII(p,f,x){let b="";for(let y=0;y<x;y++)b+=String.fromCharCode(p[f+y]);return b},writeASCII(p,f,x){for(let b=0;b<x.length;b++)p[f+b]=x.charCodeAt(b)},readBytes(p,f,x){const b=[];for(let y=0;y<x;y++)b.push(p[f+y]);return b},pad:p=>p.length<2?`0${p}`:p,readUTF8(p,f,x){let b,y="";for(let g=0;g<x;g++)y+=`%${e.pad(p[f+g].toString(16))}`;try{b=decodeURIComponent(y)}catch{return e.readASCII(p,f,x)}return b}};function n(p,f,x,b){const y=f*x,g=l(b),k=Math.ceil(f*g/8),w=new Uint8Array(4*y),C=new Uint32Array(w.buffer),{ctype:N}=b,{depth:A}=b,P=e.readUshort;if(N==6){const W=y<<2;if(A==8)for(var B=0;B<W;B+=4)w[B]=p[B],w[B+1]=p[B+1],w[B+2]=p[B+2],w[B+3]=p[B+3];if(A==16)for(B=0;B<W;B++)w[B]=p[B<<1]}else if(N==2){const W=b.tabs.tRNS;if(W==null){if(A==8)for(B=0;B<y;B++){var $=3*B;C[B]=255<<24|p[$+2]<<16|p[$+1]<<8|p[$]}if(A==16)for(B=0;B<y;B++)$=6*B,C[B]=255<<24|p[$+4]<<16|p[$+2]<<8|p[$]}else{var D=W[0];const Z=W[1],O=W[2];if(A==8)for(B=0;B<y;B++){var T=B<<2;$=3*B,C[B]=255<<24|p[$+2]<<16|p[$+1]<<8|p[$],p[$]==D&&p[$+1]==Z&&p[$+2]==O&&(w[T+3]=0)}if(A==16)for(B=0;B<y;B++)T=B<<2,$=6*B,C[B]=255<<24|p[$+4]<<16|p[$+2]<<8|p[$],P(p,$)==D&&P(p,$+2)==Z&&P(p,$+4)==O&&(w[T+3]=0)}}else if(N==3){const W=b.tabs.PLTE,Z=b.tabs.tRNS,O=Z?Z.length:0;if(A==1)for(var H=0;H<x;H++){var K=H*k,E=H*f;for(B=0;B<f;B++){T=E+B<<2;var I=3*(S=p[K+(B>>3)]>>7-((7&B)<<0)&1);w[T]=W[I],w[T+1]=W[I+1],w[T+2]=W[I+2],w[T+3]=S<O?Z[S]:255}}if(A==2)for(H=0;H<x;H++)for(K=H*k,E=H*f,B=0;B<f;B++)T=E+B<<2,I=3*(S=p[K+(B>>2)]>>6-((3&B)<<1)&3),w[T]=W[I],w[T+1]=W[I+1],w[T+2]=W[I+2],w[T+3]=S<O?Z[S]:255;if(A==4)for(H=0;H<x;H++)for(K=H*k,E=H*f,B=0;B<f;B++)T=E+B<<2,I=3*(S=p[K+(B>>1)]>>4-((1&B)<<2)&15),w[T]=W[I],w[T+1]=W[I+1],w[T+2]=W[I+2],w[T+3]=S<O?Z[S]:255;if(A==8)for(B=0;B<y;B++){var S;T=B<<2,I=3*(S=p[B]),w[T]=W[I],w[T+1]=W[I+1],w[T+2]=W[I+2],w[T+3]=S<O?Z[S]:255}}else if(N==4){if(A==8)for(B=0;B<y;B++){T=B<<2;var L=p[z=B<<1];w[T]=L,w[T+1]=L,w[T+2]=L,w[T+3]=p[z+1]}if(A==16)for(B=0;B<y;B++){var z;T=B<<2,L=p[z=B<<2],w[T]=L,w[T+1]=L,w[T+2]=L,w[T+3]=p[z+2]}}else if(N==0)for(D=b.tabs.tRNS?b.tabs.tRNS:-1,H=0;H<x;H++){const W=H*k,Z=H*f;if(A==1)for(var R=0;R<f;R++){var U=(L=255*(p[W+(R>>>3)]>>>7-(7&R)&1))==255*D?0:255;C[Z+R]=U<<24|L<<16|L<<8|L}else if(A==2)for(R=0;R<f;R++)U=(L=85*(p[W+(R>>>2)]>>>6-((3&R)<<1)&3))==85*D?0:255,C[Z+R]=U<<24|L<<16|L<<8|L;else if(A==4)for(R=0;R<f;R++)U=(L=17*(p[W+(R>>>1)]>>>4-((1&R)<<2)&15))==17*D?0:255,C[Z+R]=U<<24|L<<16|L<<8|L;else if(A==8)for(R=0;R<f;R++)U=(L=p[W+R])==D?0:255,C[Z+R]=U<<24|L<<16|L<<8|L;else if(A==16)for(R=0;R<f;R++)L=p[W+(R<<1)],U=P(p,W+(R<<1))==D?0:255,C[Z+R]=U<<24|L<<16|L<<8|L}return w}function s(p,f,x,b){const y=l(p),g=Math.ceil(x*y/8),k=new Uint8Array((g+1+p.interlace)*b);return f=p.tabs.CgBI?i(f,k):a(f,k),p.interlace==0?f=c(f,p,0,x,b):p.interlace==1&&(f=(function(C,N){const A=N.width,P=N.height,B=l(N),$=B>>3,D=Math.ceil(A*B/8),T=new Uint8Array(P*D);let H=0;const K=[0,0,4,0,2,0,1],E=[0,4,0,2,0,1,0],I=[8,8,8,4,4,2,2],S=[8,8,4,4,2,2,1];let L=0;for(;L<7;){const R=I[L],U=S[L];let W=0,Z=0,O=K[L];for(;O<P;)O+=R,Z++;let V=E[L];for(;V<A;)V+=U,W++;const ee=Math.ceil(W*B/8);c(C,N,H,W,Z);let q=0,G=K[L];for(;G<P;){let Q=E[L],le=H+q*ee<<3;for(;Q<A;){var z;if(B==1&&(z=(z=C[le>>3])>>7-(7&le)&1,T[G*D+(Q>>3)]|=z<<7-((7&Q)<<0)),B==2&&(z=(z=C[le>>3])>>6-(7&le)&3,T[G*D+(Q>>2)]|=z<<6-((3&Q)<<1)),B==4&&(z=(z=C[le>>3])>>4-(7&le)&15,T[G*D+(Q>>1)]|=z<<4-((1&Q)<<2)),B>=8){const ne=G*D+Q*$;for(let ie=0;ie<$;ie++)T[ne+ie]=C[(le>>3)+ie]}le+=B,Q+=U}q++,G+=R}W*Z!=0&&(H+=Z*(1+ee)),L+=1}return T})(f,p)),f}function a(p,f){return i(new Uint8Array(p.buffer,2,p.length-6),f)}var i=(function(){const p={H:{}};return p.H.N=function(f,x){const b=Uint8Array;let y,g,k=0,w=0,C=0,N=0,A=0,P=0,B=0,$=0,D=0;if(f[0]==3&&f[1]==0)return x||new b(0);const T=p.H,H=T.b,K=T.e,E=T.R,I=T.n,S=T.A,L=T.Z,z=T.m,R=x==null;for(R&&(x=new b(f.length>>>2<<5));k==0;)if(k=H(f,D,1),w=H(f,D+1,2),D+=3,w!=0){if(R&&(x=p.H.W(x,$+(1<<17))),w==1&&(y=z.J,g=z.h,P=511,B=31),w==2){C=K(f,D,5)+257,N=K(f,D+5,5)+1,A=K(f,D+10,4)+4,D+=14;let W=1;for(var U=0;U<38;U+=2)z.Q[U]=0,z.Q[U+1]=0;for(U=0;U<A;U++){const V=K(f,D+3*U,3);z.Q[1+(z.X[U]<<1)]=V,V>W&&(W=V)}D+=3*A,I(z.Q,W),S(z.Q,W,z.u),y=z.w,g=z.d,D=E(z.u,(1<<W)-1,C+N,f,D,z.v);const Z=T.V(z.v,0,C,z.C);P=(1<<Z)-1;const O=T.V(z.v,C,N,z.D);B=(1<<O)-1,I(z.C,Z),S(z.C,Z,y),I(z.D,O),S(z.D,O,g)}for(;;){const W=y[L(f,D)&P];D+=15&W;const Z=W>>>4;if(!(Z>>>8))x[$++]=Z;else{if(Z==256)break;{let O=$+Z-254;if(Z>264){const Q=z.q[Z-257];O=$+(Q>>>3)+K(f,D,7&Q),D+=7&Q}const V=g[L(f,D)&B];D+=15&V;const ee=V>>>4,q=z.c[ee],G=(q>>>4)+H(f,D,15&q);for(D+=15&q;$<O;)x[$]=x[$++-G],x[$]=x[$++-G],x[$]=x[$++-G],x[$]=x[$++-G];$=O}}}}else{(7&D)!=0&&(D+=8-(7&D));const W=4+(D>>>3),Z=f[W-4]|f[W-3]<<8;R&&(x=p.H.W(x,$+Z)),x.set(new b(f.buffer,f.byteOffset+W,Z),$),D=W+Z<<3,$+=Z}return x.length==$?x:x.slice(0,$)},p.H.W=function(f,x){const b=f.length;if(x<=b)return f;const y=new Uint8Array(b<<1);return y.set(f,0),y},p.H.R=function(f,x,b,y,g,k){const w=p.H.e,C=p.H.Z;let N=0;for(;N<b;){const A=f[C(y,g)&x];g+=15&A;const P=A>>>4;if(P<=15)k[N]=P,N++;else{let B=0,$=0;P==16?($=3+w(y,g,2),g+=2,B=k[N-1]):P==17?($=3+w(y,g,3),g+=3):P==18&&($=11+w(y,g,7),g+=7);const D=N+$;for(;N<D;)k[N]=B,N++}}return g},p.H.V=function(f,x,b,y){let g=0,k=0;const w=y.length>>>1;for(;k<b;){const C=f[k+x];y[k<<1]=0,y[1+(k<<1)]=C,C>g&&(g=C),k++}for(;k<w;)y[k<<1]=0,y[1+(k<<1)]=0,k++;return g},p.H.n=function(f,x){const b=p.H.m,y=f.length;let g,k,w,C;const N=b.j;for(var A=0;A<=x;A++)N[A]=0;for(A=1;A<y;A+=2)N[f[A]]++;const P=b.K;for(g=0,N[0]=0,k=1;k<=x;k++)g=g+N[k-1]<<1,P[k]=g;for(w=0;w<y;w+=2)C=f[w+1],C!=0&&(f[w]=P[C],P[C]++)},p.H.A=function(f,x,b){const y=f.length,g=p.H.m.r;for(let k=0;k<y;k+=2)if(f[k+1]!=0){const w=k>>1,C=f[k+1],N=w<<4|C,A=x-C;let P=f[k]<<A;const B=P+(1<<A);for(;P!=B;)b[g[P]>>>15-x]=N,P++}},p.H.l=function(f,x){const b=p.H.m.r,y=15-x;for(let g=0;g<f.length;g+=2){const k=f[g]<<x-f[g+1];f[g]=b[k]>>>y}},p.H.M=function(f,x,b){b<<=7&x;const y=x>>>3;f[y]|=b,f[y+1]|=b>>>8},p.H.I=function(f,x,b){b<<=7&x;const y=x>>>3;f[y]|=b,f[y+1]|=b>>>8,f[y+2]|=b>>>16},p.H.e=function(f,x,b){return(f[x>>>3]|f[1+(x>>>3)]<<8)>>>(7&x)&(1<<b)-1},p.H.b=function(f,x,b){return(f[x>>>3]|f[1+(x>>>3)]<<8|f[2+(x>>>3)]<<16)>>>(7&x)&(1<<b)-1},p.H.Z=function(f,x){return(f[x>>>3]|f[1+(x>>>3)]<<8|f[2+(x>>>3)]<<16)>>>(7&x)},p.H.i=function(f,x){return(f[x>>>3]|f[1+(x>>>3)]<<8|f[2+(x>>>3)]<<16|f[3+(x>>>3)]<<24)>>>(7&x)},p.H.m=(function(){const f=Uint16Array,x=Uint32Array;return{K:new f(16),j:new f(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new f(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new x(32),J:new f(512),_:[],h:new f(32),$:[],w:new f(32768),C:[],v:[],d:new f(32768),D:[],u:new f(512),Q:[],r:new f(32768),s:new x(286),Y:new x(30),a:new x(19),t:new x(15e3),k:new f(65536),g:new f(32768)}})(),(function(){const f=p.H.m;for(var x=0;x<32768;x++){let y=x;y=(2863311530&y)>>>1|(1431655765&y)<<1,y=(3435973836&y)>>>2|(858993459&y)<<2,y=(4042322160&y)>>>4|(252645135&y)<<4,y=(4278255360&y)>>>8|(16711935&y)<<8,f.r[x]=(y>>>16|y<<16)>>>17}function b(y,g,k){for(;g--!=0;)y.push(0,k)}for(x=0;x<32;x++)f.q[x]=f.S[x]<<3|f.T[x],f.c[x]=f.p[x]<<4|f.z[x];b(f._,144,8),b(f._,112,9),b(f._,24,7),b(f._,8,8),p.H.n(f._,9),p.H.A(f._,9,f.J),p.H.l(f._,9),b(f.$,32,5),p.H.n(f.$,5),p.H.A(f.$,5,f.h),p.H.l(f.$,5),b(f.Q,19,0),b(f.C,286,0),b(f.D,30,0),b(f.v,320,0)})(),p.H.N})();function l(p){return[1,null,3,1,2,null,4][p.ctype]*p.depth}function c(p,f,x,b,y){let g=l(f);const k=Math.ceil(b*g/8);let w,C;g=Math.ceil(g/8);let N=p[x],A=0;if(N>1&&(p[x]=[0,0,1][N-2]),N==3)for(A=g;A<k;A++)p[A+1]=p[A+1]+(p[A+1-g]>>>1)&255;for(let P=0;P<y;P++)if(w=x+P*k,C=w+P+1,N=p[C-1],A=0,N==0)for(;A<k;A++)p[w+A]=p[C+A];else if(N==1){for(;A<g;A++)p[w+A]=p[C+A];for(;A<k;A++)p[w+A]=p[C+A]+p[w+A-g]}else if(N==2)for(;A<k;A++)p[w+A]=p[C+A]+p[w+A-k];else if(N==3){for(;A<g;A++)p[w+A]=p[C+A]+(p[w+A-k]>>>1);for(;A<k;A++)p[w+A]=p[C+A]+(p[w+A-k]+p[w+A-g]>>>1)}else{for(;A<g;A++)p[w+A]=p[C+A]+d(0,p[w+A-k],0);for(;A<k;A++)p[w+A]=p[C+A]+d(p[w+A-g],p[w+A-k],p[w+A-g-k])}return p}function d(p,f,x){const b=p+f-x,y=b-p,g=b-f,k=b-x;return y*y<=g*g&&y*y<=k*k?p:g*g<=k*k?f:x}function u(p,f,x){x.width=e.readUint(p,f),f+=4,x.height=e.readUint(p,f),f+=4,x.depth=p[f],f++,x.ctype=p[f],f++,x.compress=p[f],f++,x.filter=p[f],f++,x.interlace=p[f],f++}function m(p,f,x,b,y,g,k,w,C){const N=Math.min(f,y),A=Math.min(x,g);let P=0,B=0;for(let L=0;L<A;L++)for(let z=0;z<N;z++)if(k>=0&&w>=0?(P=L*f+z<<2,B=(w+L)*y+k+z<<2):(P=(-w+L)*f-k+z<<2,B=L*y+z<<2),C==0)b[B]=p[P],b[B+1]=p[P+1],b[B+2]=p[P+2],b[B+3]=p[P+3];else if(C==1){var $=p[P+3]*.00392156862745098,D=p[P]*$,T=p[P+1]*$,H=p[P+2]*$,K=b[B+3]*(1/255),E=b[B]*K,I=b[B+1]*K,S=b[B+2]*K;const R=1-$,U=$+K*R,W=U==0?0:1/U;b[B+3]=255*U,b[B+0]=(D+E*R)*W,b[B+1]=(T+I*R)*W,b[B+2]=(H+S*R)*W}else if(C==2)$=p[P+3],D=p[P],T=p[P+1],H=p[P+2],K=b[B+3],E=b[B],I=b[B+1],S=b[B+2],$==K&&D==E&&T==I&&H==S?(b[B]=0,b[B+1]=0,b[B+2]=0,b[B+3]=0):(b[B]=D,b[B+1]=T,b[B+2]=H,b[B+3]=$);else if(C==3){if($=p[P+3],D=p[P],T=p[P+1],H=p[P+2],K=b[B+3],E=b[B],I=b[B+1],S=b[B+2],$==K&&D==E&&T==I&&H==S)continue;if($<220&&K>20)return!1}return!0}return{decode:function(f){const x=new Uint8Array(f);let b=8;const y=e,g=y.readUshort,k=y.readUint,w={tabs:{},frames:[]},C=new Uint8Array(x.length);let N,A=0,P=0;const B=[137,80,78,71,13,10,26,10];for(var $=0;$<8;$++)if(x[$]!=B[$])throw"The input is not a PNG file!";for(;b<x.length;){const L=y.readUint(x,b);b+=4;const z=y.readASCII(x,b,4);if(b+=4,z=="IHDR")u(x,b,w);else if(z=="iCCP"){for(var D=b;x[D]!=0;)D++;y.readASCII(x,b,D-b),x[D+1];const R=x.slice(D+2,b+L);let U=null;try{U=a(R)}catch{U=i(R)}w.tabs[z]=U}else if(z=="CgBI")w.tabs[z]=x.slice(b,b+4);else if(z=="IDAT"){for($=0;$<L;$++)C[A+$]=x[b+$];A+=L}else if(z=="acTL")w.tabs[z]={num_frames:k(x,b),num_plays:k(x,b+4)},N=new Uint8Array(x.length);else if(z=="fcTL"){P!=0&&((S=w.frames[w.frames.length-1]).data=s(w,N.slice(0,P),S.rect.width,S.rect.height),P=0);const R={x:k(x,b+12),y:k(x,b+16),width:k(x,b+4),height:k(x,b+8)};let U=g(x,b+22);U=g(x,b+20)/(U==0?100:U);const W={rect:R,delay:Math.round(1e3*U),dispose:x[b+24],blend:x[b+25]};w.frames.push(W)}else if(z=="fdAT"){for($=0;$<L-4;$++)N[P+$]=x[b+$+4];P+=L-4}else if(z=="pHYs")w.tabs[z]=[y.readUint(x,b),y.readUint(x,b+4),x[b+8]];else if(z=="cHRM")for(w.tabs[z]=[],$=0;$<8;$++)w.tabs[z].push(y.readUint(x,b+4*$));else if(z=="tEXt"||z=="zTXt"){w.tabs[z]==null&&(w.tabs[z]={});var T=y.nextZero(x,b),H=y.readASCII(x,b,T-b),K=b+L-T-1;if(z=="tEXt")I=y.readASCII(x,T+1,K);else{var E=a(x.slice(T+2,T+2+K));I=y.readUTF8(E,0,E.length)}w.tabs[z][H]=I}else if(z=="iTXt"){w.tabs[z]==null&&(w.tabs[z]={}),T=0,D=b,T=y.nextZero(x,D),H=y.readASCII(x,D,T-D);const R=x[D=T+1];var I;x[D+1],D+=2,T=y.nextZero(x,D),y.readASCII(x,D,T-D),D=T+1,T=y.nextZero(x,D),y.readUTF8(x,D,T-D),K=L-((D=T+1)-b),R==0?I=y.readUTF8(x,D,K):(E=a(x.slice(D,D+K)),I=y.readUTF8(E,0,E.length)),w.tabs[z][H]=I}else if(z=="PLTE")w.tabs[z]=y.readBytes(x,b,L);else if(z=="hIST"){const R=w.tabs.PLTE.length/3;for(w.tabs[z]=[],$=0;$<R;$++)w.tabs[z].push(g(x,b+2*$))}else if(z=="tRNS")w.ctype==3?w.tabs[z]=y.readBytes(x,b,L):w.ctype==0?w.tabs[z]=g(x,b):w.ctype==2&&(w.tabs[z]=[g(x,b),g(x,b+2),g(x,b+4)]);else if(z=="gAMA")w.tabs[z]=y.readUint(x,b)/1e5;else if(z=="sRGB")w.tabs[z]=x[b];else if(z=="bKGD")w.ctype==0||w.ctype==4?w.tabs[z]=[g(x,b)]:w.ctype==2||w.ctype==6?w.tabs[z]=[g(x,b),g(x,b+2),g(x,b+4)]:w.ctype==3&&(w.tabs[z]=x[b]);else if(z=="IEND")break;b+=L,y.readUint(x,b),b+=4}var S;return P!=0&&((S=w.frames[w.frames.length-1]).data=s(w,N.slice(0,P),S.rect.width,S.rect.height)),w.data=s(w,C,w.width,w.height),delete w.compress,delete w.interlace,delete w.filter,w},toRGBA8:function(f){const x=f.width,b=f.height;if(f.tabs.acTL==null)return[n(f.data,x,b,f).buffer];const y=[];f.frames[0].data==null&&(f.frames[0].data=f.data);const g=x*b*4,k=new Uint8Array(g),w=new Uint8Array(g),C=new Uint8Array(g);for(let A=0;A<f.frames.length;A++){const P=f.frames[A],B=P.rect.x,$=P.rect.y,D=P.rect.width,T=P.rect.height,H=n(P.data,D,T,f);if(A!=0)for(var N=0;N<g;N++)C[N]=k[N];if(P.blend==0?m(H,D,T,k,x,b,B,$,0):P.blend==1&&m(H,D,T,k,x,b,B,$,1),y.push(k.buffer.slice(0)),P.dispose!=0){if(P.dispose==1)m(w,D,T,k,x,b,B,$,0);else if(P.dispose==2)for(N=0;N<g;N++)k[N]=C[N]}}return y},_paeth:d,_copyTile:m,_bin:e}})();(function(){const{_copyTile:e}=As,{_bin:n}=As,s=As._paeth;var a={table:(function(){const D=new Uint32Array(256);for(let T=0;T<256;T++){let H=T;for(let K=0;K<8;K++)1&H?H=3988292384^H>>>1:H>>>=1;D[T]=H}return D})(),update(D,T,H,K){for(let E=0;E<K;E++)D=a.table[255&(D^T[H+E])]^D>>>8;return D},crc:(D,T,H)=>4294967295^a.update(4294967295,D,T,H)};function i(D,T,H,K){T[H]+=D[0]*K>>4,T[H+1]+=D[1]*K>>4,T[H+2]+=D[2]*K>>4,T[H+3]+=D[3]*K>>4}function l(D){return Math.max(0,Math.min(255,D))}function c(D,T){const H=D[0]-T[0],K=D[1]-T[1],E=D[2]-T[2],I=D[3]-T[3];return H*H+K*K+E*E+I*I}function d(D,T,H,K,E,I,S){S==null&&(S=1);const L=K.length,z=[];for(var R=0;R<L;R++){const G=K[R];z.push([G>>>0&255,G>>>8&255,G>>>16&255,G>>>24&255])}for(R=0;R<L;R++){let G=4294967295;for(var U=0,W=0;W<L;W++){var Z=c(z[R],z[W]);W!=R&&Z<G&&(G=Z,U=W)}}const O=new Uint32Array(E.buffer),V=new Int16Array(T*H*4),ee=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(R=0;R<ee.length;R++)ee[R]=255*((ee[R]+.5)/16-.5);for(let G=0;G<H;G++)for(let Q=0;Q<T;Q++){var q;R=4*(G*T+Q),S!=2?q=[l(D[R]+V[R]),l(D[R+1]+V[R+1]),l(D[R+2]+V[R+2]),l(D[R+3]+V[R+3])]:(Z=ee[4*(3&G)+(3&Q)],q=[l(D[R]+Z),l(D[R+1]+Z),l(D[R+2]+Z),l(D[R+3]+Z)]),U=0;let le=16777215;for(W=0;W<L;W++){const ve=c(q,z[W]);ve<le&&(le=ve,U=W)}const ne=z[U],ie=[q[0]-ne[0],q[1]-ne[1],q[2]-ne[2],q[3]-ne[3]];S==1&&(Q!=T-1&&i(ie,V,R+4,7),G!=H-1&&(Q!=0&&i(ie,V,R+4*T-4,3),i(ie,V,R+4*T,5),Q!=T-1&&i(ie,V,R+4*T+4,1))),I[R>>2]=U,O[R>>2]=K[U]}}function u(D,T,H,K,E){E==null&&(E={});const{crc:I}=a,S=n.writeUint,L=n.writeUshort,z=n.writeASCII;let R=8;const U=D.frames.length>1;let W,Z=!1,O=33+(U?20:0);if(E.sRGB!=null&&(O+=13),E.pHYs!=null&&(O+=21),E.iCCP!=null&&(W=pako.deflate(E.iCCP),O+=21+W.length+4),D.ctype==3){for(var V=D.plte.length,ee=0;ee<V;ee++)D.plte[ee]>>>24!=255&&(Z=!0);O+=8+3*V+4+(Z?8+1*V+4:0)}for(var q=0;q<D.frames.length;q++)U&&(O+=38),O+=(ne=D.frames[q]).cimg.length+12,q!=0&&(O+=4);O+=12;const G=new Uint8Array(O),Q=[137,80,78,71,13,10,26,10];for(ee=0;ee<8;ee++)G[ee]=Q[ee];if(S(G,R,13),R+=4,z(G,R,"IHDR"),R+=4,S(G,R,T),R+=4,S(G,R,H),R+=4,G[R]=D.depth,R++,G[R]=D.ctype,R++,G[R]=0,R++,G[R]=0,R++,G[R]=0,R++,S(G,R,I(G,R-17,17)),R+=4,E.sRGB!=null&&(S(G,R,1),R+=4,z(G,R,"sRGB"),R+=4,G[R]=E.sRGB,R++,S(G,R,I(G,R-5,5)),R+=4),E.iCCP!=null){const ie=13+W.length;S(G,R,ie),R+=4,z(G,R,"iCCP"),R+=4,z(G,R,"ICC profile"),R+=11,R+=2,G.set(W,R),R+=W.length,S(G,R,I(G,R-(ie+4),ie+4)),R+=4}if(E.pHYs!=null&&(S(G,R,9),R+=4,z(G,R,"pHYs"),R+=4,S(G,R,E.pHYs[0]),R+=4,S(G,R,E.pHYs[1]),R+=4,G[R]=E.pHYs[2],R++,S(G,R,I(G,R-13,13)),R+=4),U&&(S(G,R,8),R+=4,z(G,R,"acTL"),R+=4,S(G,R,D.frames.length),R+=4,S(G,R,E.loop!=null?E.loop:0),R+=4,S(G,R,I(G,R-12,12)),R+=4),D.ctype==3){for(S(G,R,3*(V=D.plte.length)),R+=4,z(G,R,"PLTE"),R+=4,ee=0;ee<V;ee++){const ie=3*ee,ve=D.plte[ee],se=255&ve,ge=ve>>>8&255,Me=ve>>>16&255;G[R+ie+0]=se,G[R+ie+1]=ge,G[R+ie+2]=Me}if(R+=3*V,S(G,R,I(G,R-3*V-4,3*V+4)),R+=4,Z){for(S(G,R,V),R+=4,z(G,R,"tRNS"),R+=4,ee=0;ee<V;ee++)G[R+ee]=D.plte[ee]>>>24&255;R+=V,S(G,R,I(G,R-V-4,V+4)),R+=4}}let le=0;for(q=0;q<D.frames.length;q++){var ne=D.frames[q];U&&(S(G,R,26),R+=4,z(G,R,"fcTL"),R+=4,S(G,R,le++),R+=4,S(G,R,ne.rect.width),R+=4,S(G,R,ne.rect.height),R+=4,S(G,R,ne.rect.x),R+=4,S(G,R,ne.rect.y),R+=4,L(G,R,K[q]),R+=2,L(G,R,1e3),R+=2,G[R]=ne.dispose,R++,G[R]=ne.blend,R++,S(G,R,I(G,R-30,30)),R+=4);const ie=ne.cimg;S(G,R,(V=ie.length)+(q==0?0:4)),R+=4;const ve=R;z(G,R,q==0?"IDAT":"fdAT"),R+=4,q!=0&&(S(G,R,le++),R+=4),G.set(ie,R),R+=V,S(G,R,I(G,ve,R-ve)),R+=4}return S(G,R,0),R+=4,z(G,R,"IEND"),R+=4,S(G,R,I(G,R-4,4)),R+=4,G.buffer}function m(D,T,H){for(let K=0;K<D.frames.length;K++){const E=D.frames[K];E.rect.width;const I=E.rect.height,S=new Uint8Array(I*E.bpl+I);E.cimg=b(E.img,I,E.bpp,E.bpl,S,T,H)}}function p(D,T,H,K,E){const I=E[0],S=E[1],L=E[2],z=E[3],R=E[4],U=E[5];let W=6,Z=8,O=255;for(var V=0;V<D.length;V++){const he=new Uint8Array(D[V]);for(var ee=he.length,q=0;q<ee;q+=4)O&=he[q+3]}const G=O!=255,Q=(function(J,X,oe,ke,Ne,de){const fe=[];for(var _e=0;_e<J.length;_e++){const Ze=new Uint8Array(J[_e]),et=new Uint32Array(Ze.buffer);var Se;let ut=0,tt=0,Mt=X,Ct=oe,_t=ke?1:0;if(_e!=0){const Fn=de||ke||_e==1||fe[_e-2].dispose!=0?1:2;let on=0,Zt=1e9;for(let Mn=0;Mn<Fn;Mn++){var Be=new Uint8Array(J[_e-1-Mn]);const pn=new Uint32Array(J[_e-1-Mn]);let St=X,Qt=oe,Xe=-1,kt=-1;for(let jt=0;jt<oe;jt++)for(let Kt=0;Kt<X;Kt++)et[Ce=jt*X+Kt]!=pn[Ce]&&(Kt<St&&(St=Kt),Kt>Xe&&(Xe=Kt),jt<Qt&&(Qt=jt),jt>kt&&(kt=jt));Xe==-1&&(St=Qt=Xe=kt=0),Ne&&((1&St)==1&&St--,(1&Qt)==1&&Qt--);const Lt=(Xe-St+1)*(kt-Qt+1);Lt<Zt&&(Zt=Lt,on=Mn,ut=St,tt=Qt,Mt=Xe-St+1,Ct=kt-Qt+1)}Be=new Uint8Array(J[_e-1-on]),on==1&&(fe[_e-1].dispose=2),Se=new Uint8Array(Mt*Ct*4),e(Be,X,oe,Se,Mt,Ct,-ut,-tt,0),_t=e(Ze,X,oe,Se,Mt,Ct,-ut,-tt,3)?1:0,_t==1?x(Ze,X,oe,Se,{x:ut,y:tt,width:Mt,height:Ct}):e(Ze,X,oe,Se,Mt,Ct,-ut,-tt,0)}else Se=Ze.slice(0);fe.push({rect:{x:ut,y:tt,width:Mt,height:Ct},img:Se,blend:_t,dispose:0})}if(ke)for(_e=0;_e<fe.length;_e++){if((Ue=fe[_e]).blend==1)continue;const Ze=Ue.rect,et=fe[_e-1].rect,ut=Math.min(Ze.x,et.x),tt=Math.min(Ze.y,et.y),Mt={x:ut,y:tt,width:Math.max(Ze.x+Ze.width,et.x+et.width)-ut,height:Math.max(Ze.y+Ze.height,et.y+et.height)-tt};fe[_e-1].dispose=1,_e-1!=0&&f(J,X,oe,fe,_e-1,Mt,Ne),f(J,X,oe,fe,_e,Mt,Ne)}let ot=0;if(J.length!=1)for(var Ce=0;Ce<fe.length;Ce++){var Ue;ot+=(Ue=fe[Ce]).rect.width*Ue.rect.height}return fe})(D,T,H,I,S,L),le={},ne=[],ie=[];if(K!=0){const he=[];for(q=0;q<Q.length;q++)he.push(Q[q].img.buffer);const J=(function(Ne){let de=0;for(var fe=0;fe<Ne.length;fe++)de+=Ne[fe].byteLength;const _e=new Uint8Array(de);let Se=0;for(fe=0;fe<Ne.length;fe++){const Be=new Uint8Array(Ne[fe]),ot=Be.length;for(let Ce=0;Ce<ot;Ce+=4){let Ue=Be[Ce],Ze=Be[Ce+1],et=Be[Ce+2];const ut=Be[Ce+3];ut==0&&(Ue=Ze=et=0),_e[Se+Ce]=Ue,_e[Se+Ce+1]=Ze,_e[Se+Ce+2]=et,_e[Se+Ce+3]=ut}Se+=ot}return _e.buffer})(he),X=g(J,K);for(q=0;q<X.plte.length;q++)ne.push(X.plte[q].est.rgba);let oe=0;for(q=0;q<Q.length;q++){const ke=(se=Q[q]).img.length;var ve=new Uint8Array(X.inds.buffer,oe>>2,ke>>2);ie.push(ve);const Ne=new Uint8Array(X.abuf,oe,ke);U&&d(se.img,se.rect.width,se.rect.height,ne,Ne,ve),se.img.set(Ne),oe+=ke}}else for(V=0;V<Q.length;V++){var se=Q[V];const he=new Uint32Array(se.img.buffer);var ge=se.rect.width;for(ee=he.length,ve=new Uint8Array(ee),ie.push(ve),q=0;q<ee;q++){const J=he[q];if(q!=0&&J==he[q-1])ve[q]=ve[q-1];else if(q>ge&&J==he[q-ge])ve[q]=ve[q-ge];else{let X=le[J];if(X==null&&(le[J]=X=ne.length,ne.push(J),ne.length>=300))break;ve[q]=X}}}const Me=ne.length;for(Me<=256&&R==0&&(Z=Me<=2?1:Me<=4?2:Me<=16?4:8,Z=Math.max(Z,z)),V=0;V<Q.length;V++){(se=Q[V]).rect.x,se.rect.y,ge=se.rect.width;const he=se.rect.height;let J=se.img;new Uint32Array(J.buffer);let X=4*ge,oe=4;if(Me<=256&&R==0){X=Math.ceil(Z*ge/8);var M=new Uint8Array(X*he);const ke=ie[V];for(let Ne=0;Ne<he;Ne++){q=Ne*X;const de=Ne*ge;if(Z==8)for(var me=0;me<ge;me++)M[q+me]=ke[de+me];else if(Z==4)for(me=0;me<ge;me++)M[q+(me>>1)]|=ke[de+me]<<4-4*(1&me);else if(Z==2)for(me=0;me<ge;me++)M[q+(me>>2)]|=ke[de+me]<<6-2*(3&me);else if(Z==1)for(me=0;me<ge;me++)M[q+(me>>3)]|=ke[de+me]<<7-1*(7&me)}J=M,W=3,oe=1}else if(G==0&&Q.length==1){M=new Uint8Array(ge*he*3);const ke=ge*he;for(q=0;q<ke;q++){const Ne=3*q,de=4*q;M[Ne]=J[de],M[Ne+1]=J[de+1],M[Ne+2]=J[de+2]}J=M,W=2,oe=3,X=3*ge}se.img=J,se.bpl=X,se.bpp=oe}return{ctype:W,depth:Z,plte:ne,frames:Q}}function f(D,T,H,K,E,I,S){const L=Uint8Array,z=Uint32Array,R=new L(D[E-1]),U=new z(D[E-1]),W=E+1<D.length?new L(D[E+1]):null,Z=new L(D[E]),O=new z(Z.buffer);let V=T,ee=H,q=-1,G=-1;for(let le=0;le<I.height;le++)for(let ne=0;ne<I.width;ne++){const ie=I.x+ne,ve=I.y+le,se=ve*T+ie,ge=O[se];ge==0||K[E-1].dispose==0&&U[se]==ge&&(W==null||W[4*se+3]!=0)||(ie<V&&(V=ie),ie>q&&(q=ie),ve<ee&&(ee=ve),ve>G&&(G=ve))}q==-1&&(V=ee=q=G=0),S&&((1&V)==1&&V--,(1&ee)==1&&ee--),I={x:V,y:ee,width:q-V+1,height:G-ee+1};const Q=K[E];Q.rect=I,Q.blend=1,Q.img=new Uint8Array(I.width*I.height*4),K[E-1].dispose==0?(e(R,T,H,Q.img,I.width,I.height,-I.x,-I.y,0),x(Z,T,H,Q.img,I)):e(Z,T,H,Q.img,I.width,I.height,-I.x,-I.y,0)}function x(D,T,H,K,E){e(D,T,H,K,E.width,E.height,-E.x,-E.y,2)}function b(D,T,H,K,E,I,S){const L=[];let z,R=[0,1,2,3,4];I!=-1?R=[I]:(T*K>5e5||H==1)&&(R=[0]),S&&(z={level:0});const U=WA;for(var W=0;W<R.length;W++){for(let V=0;V<T;V++)y(E,D,V,K,H,R[W]);L.push(U.deflate(E,z))}let Z,O=1e9;for(W=0;W<L.length;W++)L[W].length<O&&(Z=W,O=L[W].length);return L[Z]}function y(D,T,H,K,E,I){const S=H*K;let L=S+H;if(D[L]=I,L++,I==0)if(K<500)for(var z=0;z<K;z++)D[L+z]=T[S+z];else D.set(new Uint8Array(T.buffer,S,K),L);else if(I==1){for(z=0;z<E;z++)D[L+z]=T[S+z];for(z=E;z<K;z++)D[L+z]=T[S+z]-T[S+z-E]+256&255}else if(H==0){for(z=0;z<E;z++)D[L+z]=T[S+z];if(I==2)for(z=E;z<K;z++)D[L+z]=T[S+z];if(I==3)for(z=E;z<K;z++)D[L+z]=T[S+z]-(T[S+z-E]>>1)+256&255;if(I==4)for(z=E;z<K;z++)D[L+z]=T[S+z]-s(T[S+z-E],0,0)+256&255}else{if(I==2)for(z=0;z<K;z++)D[L+z]=T[S+z]+256-T[S+z-K]&255;if(I==3){for(z=0;z<E;z++)D[L+z]=T[S+z]+256-(T[S+z-K]>>1)&255;for(z=E;z<K;z++)D[L+z]=T[S+z]+256-(T[S+z-K]+T[S+z-E]>>1)&255}if(I==4){for(z=0;z<E;z++)D[L+z]=T[S+z]+256-s(0,T[S+z-K],0)&255;for(z=E;z<K;z++)D[L+z]=T[S+z]+256-s(T[S+z-E],T[S+z-K],T[S+z-E-K])&255}}}function g(D,T){const H=new Uint8Array(D),K=H.slice(0),E=new Uint32Array(K.buffer),I=k(K,T),S=I[0],L=I[1],z=H.length,R=new Uint8Array(z>>2);let U;if(H.length<2e7)for(var W=0;W<z;W+=4)U=w(S,Z=H[W]*(1/255),O=H[W+1]*(1/255),V=H[W+2]*(1/255),ee=H[W+3]*(1/255)),R[W>>2]=U.ind,E[W>>2]=U.est.rgba;else for(W=0;W<z;W+=4){var Z=H[W]*.00392156862745098,O=H[W+1]*(1/255),V=H[W+2]*(1/255),ee=H[W+3]*(1/255);for(U=S;U.left;)U=C(U.est,Z,O,V,ee)<=0?U.left:U.right;R[W>>2]=U.ind,E[W>>2]=U.est.rgba}return{abuf:K.buffer,inds:R,plte:L}}function k(D,T,H){H==null&&(H=1e-4);const K=new Uint32Array(D.buffer),E={i0:0,i1:D.length,bst:null,est:null,tdst:0,left:null,right:null};E.bst=P(D,E.i0,E.i1),E.est=B(E.bst);const I=[E];for(;I.length<T;){let L=0,z=0;for(var S=0;S<I.length;S++)I[S].est.L>L&&(L=I[S].est.L,z=S);if(L<H)break;const R=I[z],U=N(D,K,R.i0,R.i1,R.est.e,R.est.eMq255);if(R.i0>=U||R.i1<=U){R.est.L=0;continue}const W={i0:R.i0,i1:U,bst:null,est:null,tdst:0,left:null,right:null};W.bst=P(D,W.i0,W.i1),W.est=B(W.bst);const Z={i0:U,i1:R.i1,bst:null,est:null,tdst:0,left:null,right:null};for(Z.bst={R:[],m:[],N:R.bst.N-W.bst.N},S=0;S<16;S++)Z.bst.R[S]=R.bst.R[S]-W.bst.R[S];for(S=0;S<4;S++)Z.bst.m[S]=R.bst.m[S]-W.bst.m[S];Z.est=B(Z.bst),R.left=W,R.right=Z,I[z]=W,I.push(Z)}for(I.sort(((L,z)=>z.bst.N-L.bst.N)),S=0;S<I.length;S++)I[S].ind=S;return[E,I]}function w(D,T,H,K,E){if(D.left==null)return D.tdst=(function(W,Z,O,V,ee){const q=Z-W[0],G=O-W[1],Q=V-W[2],le=ee-W[3];return q*q+G*G+Q*Q+le*le})(D.est.q,T,H,K,E),D;const I=C(D.est,T,H,K,E);let S=D.left,L=D.right;I>0&&(S=D.right,L=D.left);const z=w(S,T,H,K,E);if(z.tdst<=I*I)return z;const R=w(L,T,H,K,E);return R.tdst<z.tdst?R:z}function C(D,T,H,K,E){const{e:I}=D;return I[0]*T+I[1]*H+I[2]*K+I[3]*E-D.eMq}function N(D,T,H,K,E,I){for(K-=4;H<K;){for(;A(D,H,E)<=I;)H+=4;for(;A(D,K,E)>I;)K-=4;if(H>=K)break;const S=T[H>>2];T[H>>2]=T[K>>2],T[K>>2]=S,H+=4,K-=4}for(;A(D,H,E)>I;)H-=4;return H+4}function A(D,T,H){return D[T]*H[0]+D[T+1]*H[1]+D[T+2]*H[2]+D[T+3]*H[3]}function P(D,T,H){const K=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],E=[0,0,0,0],I=H-T>>2;for(let S=T;S<H;S+=4){const L=D[S]*.00392156862745098,z=D[S+1]*(1/255),R=D[S+2]*(1/255),U=D[S+3]*(1/255);E[0]+=L,E[1]+=z,E[2]+=R,E[3]+=U,K[0]+=L*L,K[1]+=L*z,K[2]+=L*R,K[3]+=L*U,K[5]+=z*z,K[6]+=z*R,K[7]+=z*U,K[10]+=R*R,K[11]+=R*U,K[15]+=U*U}return K[4]=K[1],K[8]=K[2],K[9]=K[6],K[12]=K[3],K[13]=K[7],K[14]=K[11],{R:K,m:E,N:I}}function B(D){const{R:T}=D,{m:H}=D,{N:K}=D,E=H[0],I=H[1],S=H[2],L=H[3],z=K==0?0:1/K,R=[T[0]-E*E*z,T[1]-E*I*z,T[2]-E*S*z,T[3]-E*L*z,T[4]-I*E*z,T[5]-I*I*z,T[6]-I*S*z,T[7]-I*L*z,T[8]-S*E*z,T[9]-S*I*z,T[10]-S*S*z,T[11]-S*L*z,T[12]-L*E*z,T[13]-L*I*z,T[14]-L*S*z,T[15]-L*L*z],U=R,W=$;let Z=[Math.random(),Math.random(),Math.random(),Math.random()],O=0,V=0;if(K!=0)for(let q=0;q<16&&(Z=W.multVec(U,Z),V=Math.sqrt(W.dot(Z,Z)),Z=W.sml(1/V,Z),!(q!=0&&Math.abs(V-O)<1e-9));q++)O=V;const ee=[E*z,I*z,S*z,L*z];return{Cov:R,q:ee,e:Z,L:O,eMq255:W.dot(W.sml(255,ee),Z),eMq:W.dot(Z,ee),rgba:(Math.round(255*ee[3])<<24|Math.round(255*ee[2])<<16|Math.round(255*ee[1])<<8|Math.round(255*ee[0])<<0)>>>0}}var $={multVec:(D,T)=>[D[0]*T[0]+D[1]*T[1]+D[2]*T[2]+D[3]*T[3],D[4]*T[0]+D[5]*T[1]+D[6]*T[2]+D[7]*T[3],D[8]*T[0]+D[9]*T[1]+D[10]*T[2]+D[11]*T[3],D[12]*T[0]+D[13]*T[1]+D[14]*T[2]+D[15]*T[3]],dot:(D,T)=>D[0]*T[0]+D[1]*T[1]+D[2]*T[2]+D[3]*T[3],sml:(D,T)=>[D*T[0],D*T[1],D*T[2],D*T[3]]};As.encode=function(T,H,K,E,I,S,L){E==null&&(E=0),L==null&&(L=!1);const z=p(T,H,K,E,[!1,!1,!1,0,L,!1]);return m(z,-1),u(z,H,K,I,S)},As.encodeLL=function(T,H,K,E,I,S,L,z){const R={ctype:0+(E==1?0:2)+(I==0?0:4),depth:S,frames:[]},U=(E+I)*S,W=U*H;for(let Z=0;Z<T.length;Z++)R.frames.push({rect:{x:0,y:0,width:H,height:K},img:new Uint8Array(T[Z]),blend:0,dispose:1,bpp:Math.ceil(U/8),bpl:Math.ceil(W/8)});return m(R,0,!0),u(R,H,K,L,z)},As.encode.compress=p,As.encode.dither=d,As.quantize=g,As.quantize.getKDtree=k,As.quantize.getNearest=w})();const Tv={toArrayBuffer(e,n){const s=e.width,a=e.height,i=s<<2,l=e.getContext("2d").getImageData(0,0,s,a),c=new Uint32Array(l.data.buffer),d=(32*s+31)/32<<2,u=d*a,m=122+u,p=new ArrayBuffer(m),f=new DataView(p),x=1<<20;let b,y,g,k,w=x,C=0,N=0,A=0;function P(D){f.setUint16(N,D,!0),N+=2}function B(D){f.setUint32(N,D,!0),N+=4}function $(D){N+=D}P(19778),B(m),$(4),B(122),B(108),B(s),B(-a>>>0),P(1),P(32),B(3),B(u),B(2835),B(2835),$(8),B(16711680),B(65280),B(255),B(4278190080),B(1466527264),(function D(){for(;C<a&&w>0;){for(k=122+C*d,b=0;b<i;)w--,y=c[A++],g=y>>>24,f.setUint32(k+b,y<<8|g),b+=4;C++}A<c.length?(w=x,setTimeout(D,Tv._dly)):n(p)})()},toBlob(e,n){this.toArrayBuffer(e,(s=>{n(new Blob([s],{type:"image/bmp"}))}))},_dly:9};var Zn={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},KA={[Zn.CHROME]:16384,[Zn.FIREFOX]:11180,[Zn.DESKTOP_SAFARI]:16384,[Zn.IE]:8192,[Zn.IOS]:4096,[Zn.ETC]:8192};const fp=typeof window<"u",Dv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Mc=fp&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),GA=(fp||Dv)&&(Mc&&Mc.getOriginalSymbol(window,"File")||typeof File<"u"&&File),Fv=(fp||Dv)&&(Mc&&Mc.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function hp(e,n,s=Date.now()){return new Promise((a=>{const i=e.split(","),l=i[0].match(/:(.*?);/)[1],c=globalThis.atob(i[1]);let d=c.length;const u=new Uint8Array(d);for(;d--;)u[d]=c.charCodeAt(d);const m=new Blob([u],{type:l});m.name=n,m.lastModified=s,a(m)}))}function Mv(e){return new Promise(((n,s)=>{const a=new Fv;a.onload=()=>n(a.result),a.onerror=i=>s(i),a.readAsDataURL(e)}))}function Iv(e){return new Promise(((n,s)=>{const a=new Image;a.onload=()=>n(a),a.onerror=i=>s(i),a.src=e}))}function ma(){if(ma.cachedResult!==void 0)return ma.cachedResult;let e=Zn.ETC;const{userAgent:n}=navigator;return/Chrom(e|ium)/i.test(n)?e=Zn.CHROME:/iP(ad|od|hone)/i.test(n)&&/WebKit/i.test(n)?e=Zn.IOS:/Safari/i.test(n)?e=Zn.DESKTOP_SAFARI:/Firefox/i.test(n)?e=Zn.FIREFOX:(/MSIE/i.test(n)||document.documentMode)&&(e=Zn.IE),ma.cachedResult=e,ma.cachedResult}function Pv(e,n){const s=ma(),a=KA[s];let i=e,l=n,c=i*l;const d=i>l?l/i:i/l;for(;c>a*a;){const u=(a+i)/2,m=(a+l)/2;u<m?(l=m,i=m*d):(l=u*d,i=u),c=i*l}return{width:i,height:l}}function Xc(e,n){let s,a;try{if(s=new OffscreenCanvas(e,n),a=s.getContext("2d"),a===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{s=document.createElement("canvas"),a=s.getContext("2d")}return s.width=e,s.height=n,[s,a]}function Rv(e,n){const{width:s,height:a}=Pv(e.width,e.height),[i,l]=Xc(s,a);return n&&/jpe?g/.test(n)&&(l.fillStyle="white",l.fillRect(0,0,i.width,i.height)),l.drawImage(e,0,0,i.width,i.height),i}function xc(){return xc.cachedResult!==void 0||(xc.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),xc.cachedResult}function Ic(e,n={}){return new Promise((function(s,a){let i,l;var c=function(){try{return l=Rv(i,n.fileType||e.type),s([i,l])}catch(u){return a(u)}},d=function(u){try{var m=function(p){try{throw p}catch(f){return a(f)}};try{let p;return Mv(e).then((function(f){try{return p=f,Iv(p).then((function(x){try{return i=x,(function(){try{return c()}catch(b){return a(b)}})()}catch(b){return m(b)}}),m)}catch(x){return m(x)}}),m)}catch(p){m(p)}}catch(p){return a(p)}};try{if(xc()||[Zn.DESKTOP_SAFARI,Zn.MOBILE_SAFARI].includes(ma()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then((function(u){try{return i=u,c()}catch{return d()}}),d)}catch{d()}}))}function Pc(e,n,s,a,i=1){return new Promise((function(l,c){let d;if(n==="image/png"){let f,x,b;return f=e.getContext("2d"),{data:x}=f.getImageData(0,0,e.width,e.height),b=As.encode([x.buffer],e.width,e.height,4096*i),d=new Blob([b],{type:n}),d.name=s,d.lastModified=a,u.call(this)}{let f=function(){return u.call(this)};var m=f;if(n==="image/bmp")return new Promise((x=>Tv.toBlob(e,x))).then(function(x){try{return d=x,d.name=s,d.lastModified=a,f.call(this)}catch(b){return c(b)}}.bind(this),c);{let x=function(){return f.call(this)};var p=x;if(typeof OffscreenCanvas=="function"&&e instanceof OffscreenCanvas)return e.convertToBlob({type:n,quality:i}).then(function(b){try{return d=b,d.name=s,d.lastModified=a,x.call(this)}catch(y){return c(y)}}.bind(this),c);{let b;return b=e.toDataURL(n,i),hp(b,s,a).then(function(y){try{return d=y,x.call(this)}catch(g){return c(g)}}.bind(this),c)}}}function u(){return l(d)}}))}function Vs(e){e.width=0,e.height=0}function fi(){return new Promise((function(e,n){let s,a,i,l;return fi.cachedResult!==void 0?e(fi.cachedResult):hp("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(c){try{return s=c,Ic(s).then((function(d){try{return a=d[1],Pc(a,s.type,s.name,s.lastModified).then((function(u){try{return i=u,Vs(a),Ic(i).then((function(m){try{return l=m[0],fi.cachedResult=l.width===1&&l.height===2,e(fi.cachedResult)}catch(p){return n(p)}}),n)}catch(m){return n(m)}}),n)}catch(u){return n(u)}}),n)}catch(d){return n(d)}}),n)}))}function Bv(e){return new Promise(((n,s)=>{const a=new Fv;a.onload=i=>{const l=new DataView(i.target.result);if(l.getUint16(0,!1)!=65496)return n(-2);const c=l.byteLength;let d=2;for(;d<c;){if(l.getUint16(d+2,!1)<=8)return n(-1);const u=l.getUint16(d,!1);if(d+=2,u==65505){if(l.getUint32(d+=2,!1)!=1165519206)return n(-1);const m=l.getUint16(d+=6,!1)==18761;d+=l.getUint32(d+4,m);const p=l.getUint16(d,m);d+=2;for(let f=0;f<p;f++)if(l.getUint16(d+12*f,m)==274)return n(l.getUint16(d+12*f+8,m))}else{if((65280&u)!=65280)break;d+=l.getUint16(d,!1)}}return n(-1)},a.onerror=i=>s(i),a.readAsArrayBuffer(e)}))}function Lv(e,n){const{width:s}=e,{height:a}=e,{maxWidthOrHeight:i}=n;let l,c=e;return isFinite(i)&&(s>i||a>i)&&([c,l]=Xc(s,a),s>a?(c.width=i,c.height=a/s*i):(c.width=s/a*i,c.height=i),l.drawImage(e,0,0,c.width,c.height),Vs(e)),c}function zv(e,n){const{width:s}=e,{height:a}=e,[i,l]=Xc(s,a);switch(n>4&&n<9?(i.width=a,i.height=s):(i.width=s,i.height=a),n){case 2:l.transform(-1,0,0,1,s,0);break;case 3:l.transform(-1,0,0,-1,s,a);break;case 4:l.transform(1,0,0,-1,0,a);break;case 5:l.transform(0,1,1,0,0,0);break;case 6:l.transform(0,1,-1,0,a,0);break;case 7:l.transform(0,-1,-1,0,a,s);break;case 8:l.transform(0,-1,1,0,0,s)}return l.drawImage(e,0,0,s,a),Vs(e),i}function zg(e,n,s=0){return new Promise((function(a,i){let l,c,d,u,m,p,f,x,b,y,g,k,w,C,N,A,P,B,$,D;function T(K=5){if(n.signal&&n.signal.aborted)throw n.signal.reason;l+=K,n.onProgress(Math.min(l,100))}function H(K){if(n.signal&&n.signal.aborted)throw n.signal.reason;l=Math.min(Math.max(K,l),100),n.onProgress(l)}return l=s,c=n.maxIteration||10,d=1024*n.maxSizeMB*1024,T(),Ic(e,n).then(function(K){try{return[,u]=K,T(),m=Lv(u,n),T(),new Promise((function(E,I){var S;if(!(S=n.exifOrientation))return Bv(e).then(function(z){try{return S=z,L.call(this)}catch(R){return I(R)}}.bind(this),I);function L(){return E(S)}return L.call(this)})).then(function(E){try{return p=E,T(),fi().then(function(I){try{return f=I?m:zv(m,p),T(),x=n.initialQuality||1,b=n.fileType||e.type,Pc(f,b,e.name,e.lastModified,x).then(function(S){try{{let U=function(){if(c--&&(N>d||N>w)){let Z,O;return Z=D?.95*$.width:$.width,O=D?.95*$.height:$.height,[P,B]=Xc(Z,O),B.drawImage($,0,0,Z,O),x*=b==="image/png"?.85:.95,Pc(P,b,e.name,e.lastModified,x).then((function(V){try{return A=V,Vs($),$=P,N=A.size,H(Math.min(99,Math.floor((C-N)/(C-d)*100))),U}catch(ee){return i(ee)}}),i)}return[1]},W=function(){return Vs($),Vs(P),Vs(m),Vs(f),Vs(u),H(100),a(A)};var z=U,R=W;if(y=S,T(),g=y.size>d,k=y.size>e.size,!g&&!k)return H(100),a(y);var L;return w=e.size,C=y.size,N=C,$=f,D=!n.alwaysKeepResolution&&g,(L=function(Z){for(;Z;){if(Z.then)return void Z.then(L,i);try{if(Z.pop){if(Z.length)return Z.pop()?W.call(this):Z;Z=U}else Z=Z.call(this)}catch(O){return i(O)}}}.bind(this))(U)}}catch(U){return i(U)}}.bind(this),i)}catch(S){return i(S)}}.bind(this),i)}catch(I){return i(I)}}.bind(this),i)}catch(E){return i(E)}}.bind(this),i)}))}const YA=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let xf;function qA(e,n){return new Promise(((s,a)=>{xf||(xf=(function(c){const d=[];return d.push(c),URL.createObjectURL(new Blob(d))})(YA));const i=new Worker(xf);i.addEventListener("message",(function(c){if(n.signal&&n.signal.aborted)i.terminate();else if(c.data.progress===void 0){if(c.data.error)return a(new Error(c.data.error)),void i.terminate();s(c.data.file),i.terminate()}else n.onProgress(c.data.progress)})),i.addEventListener("error",a),n.signal&&n.signal.addEventListener("abort",(()=>{a(n.signal.reason),i.terminate()})),i.postMessage({file:e,imageCompressionLibUrl:n.libURL,options:{...n,onProgress:void 0,signal:void 0}})}))}function _n(e,n){return new Promise((function(s,a){let i,l,c,d,u,m;if(i={...n},c=0,{onProgress:d}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,u=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=b=>{c=b,typeof d=="function"&&d(c)},!(e instanceof Blob||e instanceof GA))return a(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return a(new Error("The file given is not an image"));if(m=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!u||typeof Worker!="function"||m)return zg(e,i).then(function(b){try{return l=b,x.call(this)}catch(y){return a(y)}}.bind(this),a);var p=function(){try{return x.call(this)}catch(b){return a(b)}}.bind(this),f=function(b){try{return zg(e,i).then((function(y){try{return l=y,p()}catch(g){return a(g)}}),a)}catch(y){return a(y)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",qA(e,i).then((function(b){try{return l=b,p()}catch{return f()}}),f)}catch{f()}function x(){try{l.name=e.name,l.lastModified=e.lastModified}catch{}try{i.preserveExif&&e.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===e.type)&&(l=Ev(e,l))}catch{}return s(l)}}))}_n.getDataUrlFromFile=Mv,_n.getFilefromDataUrl=hp,_n.loadImage=Iv,_n.drawImageInCanvas=Rv,_n.drawFileInCanvas=Ic,_n.canvasToFile=Pc,_n.getExifOrientation=Bv,_n.handleMaxWidthOrHeight=Lv,_n.followExifOrientation=zv,_n.cleanupCanvasMemory=Vs,_n.isAutoOrientationInBrowser=fi,_n.approximateBelowMaximumCanvasSizeOfBrowser=Pv,_n.copyExifWithoutOrientation=Ev,_n.getBrowserName=ma,_n.version="2.0.2";const Og=[{id:"desktop1-chat",name:"",location:""},{id:"desktop1-forum",name:"",location:""},{id:"desktop1-memory",name:"",location:""},{id:"desktop1-transfer",name:"",location:""},{id:"desktop2-shop",name:"",location:""},{id:"desktop2-game",name:"",location:""},{id:"desktop2-schedule",name:"",location:""},{id:"desktop2-health",name:"",location:""},{id:"bottom-organization",name:"",location:""},{id:"bottom-worldbook",name:"",location:""},{id:"bottom-settings",name:"",location:""}];function ZA({onBack:e}){const[n,s]=j.useState(null),[a,i]=j.useState(!1),[l,c]=j.useState("light"),[d,u]=j.useState({}),[m,p]=j.useState(!1),f=j.useRef(null),x=j.useRef({});j.useEffect(()=>{(async()=>{try{const P=await ae.get(te.MISC,"desktop_wallpaper"),B=await ae.get(te.APPEARANCE,"desktop_color_mode")||"light";if(P)if(P.startsWith("data:"))s(P);else{const D=await xt(P);s(D)}c(B);const $={};for(const D of Og){const T=await xt(`system-icon-${D.id}`);T&&($[D.id]=T)}u($)}catch(P){console.error("Failed to load settings:",P)}})()},[]);const b=async A=>{c(A),await ae.set(te.APPEARANCE,"desktop_color_mode",A),window.dispatchEvent(new CustomEvent("colorModeChange",{detail:A}))},y=()=>{f.current?.click()},g=async A=>{const P=A.target.files?.[0];if(P)try{const B=await bs("desktop-wallpaper",P);s(B),await ae.set(te.MISC,"desktop_wallpaper","desktop-wallpaper"),i(!0),setTimeout(()=>i(!1),2e3),window.dispatchEvent(new CustomEvent("wallpaperChange",{detail:B}))}catch(B){console.error("Failed to save wallpaper:",B)}},k=async A=>{A.stopPropagation(),s(null),await ae.delete(te.MISC,"desktop_wallpaper"),await ka("desktop-wallpaper"),i(!0),setTimeout(()=>i(!1),2e3),window.dispatchEvent(new CustomEvent("wallpaperChange",{detail:null}))},w=A=>{x.current[A]?.click()},C=async(A,P)=>{const B=P.target.files?.[0];if(B)try{const D=await _n(B,{maxSizeMB:.5,maxWidthOrHeight:512,useWebWorker:!0}),T=await bs(`system-icon-${A}`,D);u(H=>({...H,[A]:T})),p(!0),setTimeout(()=>p(!1),2e3),window.dispatchEvent(new CustomEvent("iconChange",{detail:{iconId:A,url:T}}))}catch($){console.error("Failed to save icon:",$)}},N=async(A,P)=>{P.stopPropagation();try{await ka(`system-icon-${A}`),u(B=>({...B,[A]:null})),p(!0),setTimeout(()=>p(!1),2e3),window.dispatchEvent(new CustomEvent("iconChange",{detail:{iconId:A,url:null}}))}catch(B){console.error("Failed to reset icon:",B)}};return t.jsxs(Zc,{title:"",onBack:e,children:[t.jsxs("div",{className:"space-y-6 text-slate-800",children:[t.jsx(Ie,{children:(a||m)&&t.jsx(xe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"fixed top-24 left-0 right-0 flex justify-center z-[60] pointer-events-none px-4",children:t.jsxs("div",{className:"bg-slate-800 text-white px-6 py-3 border border-slate-700 shadow-xl flex items-center gap-3 backdrop-blur-md",children:[t.jsx(wt,{className:"w-4 h-4 text-green-400",strokeWidth:3}),t.jsx("span",{className:"text-xs font-bold tracking-wider uppercase",children:a?"WALLPAPER_UPDATED":"ICON_CACHE_REFRESHED"})]})})}),t.jsxs("section",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:[t.jsx(o8,{className:"w-3 h-3"})," "]}),t.jsx("div",{className:"grid grid-cols-2 gap-3 bg-white p-2 border border-slate-200 shadow-sm",children:[{label:" (LIGHT)",value:"light",icon:n7},{label:" (DARK)",value:"dark",icon:fv}].map(A=>t.jsxs("button",{onClick:()=>b(A.value),className:`flex items-center justify-center gap-2 py-3 border transition-all duration-200 ${l===A.value?"bg-slate-800 text-white border-slate-800 shadow-md":"bg-transparent text-slate-400 border-transparent active:bg-slate-50 active:text-slate-600 hover:bg-slate-50 hover:text-slate-600"}`,children:[t.jsx(A.icon,{className:"w-4 h-4",strokeWidth:1.5}),t.jsx("span",{className:"text-xs font-bold tracking-wide",children:A.label})]},A.value))})]}),t.jsxs("section",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:[t.jsx(O8,{className:"w-3 h-3"})," "]}),t.jsxs("div",{className:"bg-white p-4 border border-slate-200 shadow-sm relative",children:[t.jsx("div",{className:"absolute top-0 right-0 w-4 h-4 border-t-2 border-r-2 border-slate-200"}),t.jsxs("div",{className:"grid grid-cols-[80px_1fr] gap-5",children:[t.jsxs("div",{onClick:y,className:"w-[80px] aspect-[9/16] bg-slate-100 border border-slate-300 relative group cursor-pointer overflow-hidden",children:[n?t.jsx("img",{src:n,alt:"Wallpaper",className:"w-full h-full object-cover opacity-90 group-active:opacity-100 group-hover:opacity-100 transition-opacity"}):t.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-300",children:t.jsx(va,{className:"w-5 h-5",strokeWidth:1})}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-active:opacity-100 group-hover:opacity-100 bg-slate-900/30 transition-opacity",children:t.jsx(cp,{className:"w-4 h-4 text-white"})})]}),t.jsxs("div",{className:"flex flex-col justify-between py-1",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs font-bold text-slate-800 uppercase tracking-wider mb-1",children:""}),t.jsx("div",{className:"text-[10px] text-slate-400 font-mono",children:"RES: AUTO-FIT"}),t.jsx("div",{className:"text-[10px] text-slate-400 font-mono",children:"FMT: JPG/PNG"})]}),t.jsxs("div",{className:"flex gap-2 mt-2",children:[t.jsx("button",{onClick:y,className:"px-4 py-2 border border-blue-200 bg-blue-50 text-blue-600 text-[10px] font-bold active:bg-blue-100 hover:bg-blue-100 transition-colors uppercase tracking-wider",children:""}),n&&t.jsx("button",{onClick:k,className:"px-3 py-2 border border-red-200 bg-red-50 text-red-500 text-[10px] font-bold active:bg-red-100 hover:bg-red-100 transition-colors",children:t.jsx(ht,{className:"w-3 h-3"})})]})]})]})]})]}),t.jsxs("section",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:[t.jsx(uv,{className:"w-3 h-3"})," "]}),t.jsx("div",{className:"space-y-2",children:Og.map((A,P)=>t.jsxs("div",{className:"flex items-center justify-between p-2 bg-white border border-slate-200 active:border-slate-400 hover:border-slate-400 transition-colors group",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{onClick:()=>w(A.id),className:"w-10 h-10 bg-slate-50 border border-slate-200 cursor-pointer overflow-hidden relative active:border-slate-400 hover:border-slate-400 transition-colors",children:d[A.id]?t.jsx("img",{src:d[A.id],alt:A.name,className:"w-full h-full object-cover opacity-90 group-active:opacity-100 group-hover:opacity-100 transition-opacity"}):t.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300",children:t.jsx(F_,{className:"w-4 h-4"})})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs font-bold text-slate-700 uppercase tracking-wide",children:A.name}),t.jsx("div",{className:"text-[9px] text-slate-400 font-mono",children:A.location})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>w(A.id),className:"p-1.5 text-slate-400 active:text-slate-800 active:bg-slate-100 hover:text-slate-800 hover:bg-slate-100 transition-colors",children:t.jsx(n_,{className:"w-4 h-4",strokeWidth:1.5})}),d[A.id]&&t.jsx("button",{onClick:B=>N(A.id,B),className:"p-1.5 text-slate-300 active:text-red-500 active:bg-red-50 hover:text-red-500 hover:bg-red-50 transition-colors",children:t.jsx(ht,{className:"w-4 h-4",strokeWidth:1.5})})]}),t.jsx("input",{ref:B=>x.current[A.id]=B,type:"file",accept:"image/*",onChange:B=>C(A.id,B),className:"hidden"})]},A.id))})]})]}),t.jsx("input",{ref:f,type:"file",accept:"image/*",onChange:g,className:"hidden"})]})}function ac(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var gf={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var $g;function QA(){return $g||($g=1,(function(e,n){(function(s){e.exports=s()})(function(){return(function s(a,i,l){function c(m,p){if(!i[m]){if(!a[m]){var f=typeof ac=="function"&&ac;if(!p&&f)return f(m,!0);if(d)return d(m,!0);var x=new Error("Cannot find module '"+m+"'");throw x.code="MODULE_NOT_FOUND",x}var b=i[m]={exports:{}};a[m][0].call(b.exports,function(y){var g=a[m][1][y];return c(g||y)},b,b.exports,s,a,i,l)}return i[m].exports}for(var d=typeof ac=="function"&&ac,u=0;u<l.length;u++)c(l[u]);return c})({1:[function(s,a,i){var l=s("./utils"),c=s("./support"),d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(u){for(var m,p,f,x,b,y,g,k=[],w=0,C=u.length,N=C,A=l.getTypeOf(u)!=="string";w<u.length;)N=C-w,f=A?(m=u[w++],p=w<C?u[w++]:0,w<C?u[w++]:0):(m=u.charCodeAt(w++),p=w<C?u.charCodeAt(w++):0,w<C?u.charCodeAt(w++):0),x=m>>2,b=(3&m)<<4|p>>4,y=1<N?(15&p)<<2|f>>6:64,g=2<N?63&f:64,k.push(d.charAt(x)+d.charAt(b)+d.charAt(y)+d.charAt(g));return k.join("")},i.decode=function(u){var m,p,f,x,b,y,g=0,k=0,w="data:";if(u.substr(0,w.length)===w)throw new Error("Invalid base64 input, it looks like a data url.");var C,N=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===d.charAt(64)&&N--,u.charAt(u.length-2)===d.charAt(64)&&N--,N%1!=0)throw new Error("Invalid base64 input, bad content length.");for(C=c.uint8array?new Uint8Array(0|N):new Array(0|N);g<u.length;)m=d.indexOf(u.charAt(g++))<<2|(x=d.indexOf(u.charAt(g++)))>>4,p=(15&x)<<4|(b=d.indexOf(u.charAt(g++)))>>2,f=(3&b)<<6|(y=d.indexOf(u.charAt(g++))),C[k++]=m,b!==64&&(C[k++]=p),y!==64&&(C[k++]=f);return C}},{"./support":30,"./utils":32}],2:[function(s,a,i){var l=s("./external"),c=s("./stream/DataWorker"),d=s("./stream/Crc32Probe"),u=s("./stream/DataLengthProbe");function m(p,f,x,b,y){this.compressedSize=p,this.uncompressedSize=f,this.crc32=x,this.compression=b,this.compressedContent=y}m.prototype={getContentWorker:function(){var p=new c(l.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),f=this;return p.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),p},getCompressedWorker:function(){return new c(l.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},m.createWorkerFrom=function(p,f,x){return p.pipe(new d).pipe(new u("uncompressedSize")).pipe(f.compressWorker(x)).pipe(new u("compressedSize")).withStreamInfo("compression",f)},a.exports=m},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(s,a,i){var l=s("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new l("STORE compression")},uncompressWorker:function(){return new l("STORE decompression")}},i.DEFLATE=s("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(s,a,i){var l=s("./utils"),c=(function(){for(var d,u=[],m=0;m<256;m++){d=m;for(var p=0;p<8;p++)d=1&d?3988292384^d>>>1:d>>>1;u[m]=d}return u})();a.exports=function(d,u){return d!==void 0&&d.length?l.getTypeOf(d)!=="string"?(function(m,p,f,x){var b=c,y=x+f;m^=-1;for(var g=x;g<y;g++)m=m>>>8^b[255&(m^p[g])];return-1^m})(0|u,d,d.length,0):(function(m,p,f,x){var b=c,y=x+f;m^=-1;for(var g=x;g<y;g++)m=m>>>8^b[255&(m^p.charCodeAt(g))];return-1^m})(0|u,d,d.length,0):0}},{"./utils":32}],5:[function(s,a,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(s,a,i){var l=null;l=typeof Promise<"u"?Promise:s("lie"),a.exports={Promise:l}},{lie:37}],7:[function(s,a,i){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",c=s("pako"),d=s("./utils"),u=s("./stream/GenericWorker"),m=l?"uint8array":"array";function p(f,x){u.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=x,this.meta={}}i.magic="\b\0",d.inherits(p,u),p.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(d.transformTo(m,f.data),!1)},p.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},p.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},p.prototype._createPako=function(){this._pako=new c[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(x){f.push({data:x,meta:f.meta})}},i.compressWorker=function(f){return new p("Deflate",f)},i.uncompressWorker=function(){return new p("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(s,a,i){function l(b,y){var g,k="";for(g=0;g<y;g++)k+=String.fromCharCode(255&b),b>>>=8;return k}function c(b,y,g,k,w,C){var N,A,P=b.file,B=b.compression,$=C!==m.utf8encode,D=d.transformTo("string",C(P.name)),T=d.transformTo("string",m.utf8encode(P.name)),H=P.comment,K=d.transformTo("string",C(H)),E=d.transformTo("string",m.utf8encode(H)),I=T.length!==P.name.length,S=E.length!==H.length,L="",z="",R="",U=P.dir,W=P.date,Z={crc32:0,compressedSize:0,uncompressedSize:0};y&&!g||(Z.crc32=b.crc32,Z.compressedSize=b.compressedSize,Z.uncompressedSize=b.uncompressedSize);var O=0;y&&(O|=8),$||!I&&!S||(O|=2048);var V=0,ee=0;U&&(V|=16),w==="UNIX"?(ee=798,V|=(function(G,Q){var le=G;return G||(le=Q?16893:33204),(65535&le)<<16})(P.unixPermissions,U)):(ee=20,V|=(function(G){return 63&(G||0)})(P.dosPermissions)),N=W.getUTCHours(),N<<=6,N|=W.getUTCMinutes(),N<<=5,N|=W.getUTCSeconds()/2,A=W.getUTCFullYear()-1980,A<<=4,A|=W.getUTCMonth()+1,A<<=5,A|=W.getUTCDate(),I&&(z=l(1,1)+l(p(D),4)+T,L+="up"+l(z.length,2)+z),S&&(R=l(1,1)+l(p(K),4)+E,L+="uc"+l(R.length,2)+R);var q="";return q+=`
\0`,q+=l(O,2),q+=B.magic,q+=l(N,2),q+=l(A,2),q+=l(Z.crc32,4),q+=l(Z.compressedSize,4),q+=l(Z.uncompressedSize,4),q+=l(D.length,2),q+=l(L.length,2),{fileRecord:f.LOCAL_FILE_HEADER+q+D+L,dirRecord:f.CENTRAL_FILE_HEADER+l(ee,2)+q+l(K.length,2)+"\0\0\0\0"+l(V,4)+l(k,4)+D+L+K}}var d=s("../utils"),u=s("../stream/GenericWorker"),m=s("../utf8"),p=s("../crc32"),f=s("../signature");function x(b,y,g,k){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=g,this.encodeFileName=k,this.streamFiles=b,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}d.inherits(x,u),x.prototype.push=function(b){var y=b.meta.percent||0,g=this.entriesCount,k=this._sources.length;this.accumulate?this.contentBuffer.push(b):(this.bytesWritten+=b.data.length,u.prototype.push.call(this,{data:b.data,meta:{currentFile:this.currentFile,percent:g?(y+100*(g-k-1))/g:100}}))},x.prototype.openedSource=function(b){this.currentSourceOffset=this.bytesWritten,this.currentFile=b.file.name;var y=this.streamFiles&&!b.file.dir;if(y){var g=c(b,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},x.prototype.closedSource=function(b){this.accumulate=!1;var y=this.streamFiles&&!b.file.dir,g=c(b,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),y)this.push({data:(function(k){return f.DATA_DESCRIPTOR+l(k.crc32,4)+l(k.compressedSize,4)+l(k.uncompressedSize,4)})(b),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},x.prototype.flush=function(){for(var b=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var g=this.bytesWritten-b,k=(function(w,C,N,A,P){var B=d.transformTo("string",P(A));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+l(w,2)+l(w,2)+l(C,4)+l(N,4)+l(B.length,2)+B})(this.dirRecords.length,g,b,this.zipComment,this.encodeFileName);this.push({data:k,meta:{percent:100}})},x.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},x.prototype.registerPrevious=function(b){this._sources.push(b);var y=this;return b.on("data",function(g){y.processChunk(g)}),b.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),b.on("error",function(g){y.error(g)}),this},x.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},x.prototype.error=function(b){var y=this._sources;if(!u.prototype.error.call(this,b))return!1;for(var g=0;g<y.length;g++)try{y[g].error(b)}catch{}return!0},x.prototype.lock=function(){u.prototype.lock.call(this);for(var b=this._sources,y=0;y<b.length;y++)b[y].lock()},a.exports=x},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(s,a,i){var l=s("../compressions"),c=s("./ZipFileWorker");i.generateWorker=function(d,u,m){var p=new c(u.streamFiles,m,u.platform,u.encodeFileName),f=0;try{d.forEach(function(x,b){f++;var y=(function(C,N){var A=C||N,P=l[A];if(!P)throw new Error(A+" is not a valid compression method !");return P})(b.options.compression,u.compression),g=b.options.compressionOptions||u.compressionOptions||{},k=b.dir,w=b.date;b._compressWorker(y,g).withStreamInfo("file",{name:x,dir:k,date:w,comment:b.comment||"",unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions}).pipe(p)}),p.entriesCount=f}catch(x){p.error(x)}return p}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(s,a,i){function l(){if(!(this instanceof l))return new l;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var c=new l;for(var d in this)typeof this[d]!="function"&&(c[d]=this[d]);return c}}(l.prototype=s("./object")).loadAsync=s("./load"),l.support=s("./support"),l.defaults=s("./defaults"),l.version="3.10.1",l.loadAsync=function(c,d){return new l().loadAsync(c,d)},l.external=s("./external"),a.exports=l},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(s,a,i){var l=s("./utils"),c=s("./external"),d=s("./utf8"),u=s("./zipEntries"),m=s("./stream/Crc32Probe"),p=s("./nodejsUtils");function f(x){return new c.Promise(function(b,y){var g=x.decompressed.getContentWorker().pipe(new m);g.on("error",function(k){y(k)}).on("end",function(){g.streamInfo.crc32!==x.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):b()}).resume()})}a.exports=function(x,b){var y=this;return b=l.extend(b||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:d.utf8decode}),p.isNode&&p.isStream(x)?c.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):l.prepareContent("the loaded zip file",x,!0,b.optimizedBinaryString,b.base64).then(function(g){var k=new u(b);return k.load(g),k}).then(function(g){var k=[c.Promise.resolve(g)],w=g.files;if(b.checkCRC32)for(var C=0;C<w.length;C++)k.push(f(w[C]));return c.Promise.all(k)}).then(function(g){for(var k=g.shift(),w=k.files,C=0;C<w.length;C++){var N=w[C],A=N.fileNameStr,P=l.resolve(N.fileNameStr);y.file(P,N.decompressed,{binary:!0,optimizedBinaryString:!0,date:N.date,dir:N.dir,comment:N.fileCommentStr.length?N.fileCommentStr:null,unixPermissions:N.unixPermissions,dosPermissions:N.dosPermissions,createFolders:b.createFolders}),N.dir||(y.file(P).unsafeOriginalName=A)}return k.zipComment.length&&(y.comment=k.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(s,a,i){var l=s("../utils"),c=s("../stream/GenericWorker");function d(u,m){c.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(m)}l.inherits(d,c),d.prototype._bindStream=function(u){var m=this;(this._stream=u).pause(),u.on("data",function(p){m.push({data:p,meta:{percent:0}})}).on("error",function(p){m.isPaused?this.generatedError=p:m.error(p)}).on("end",function(){m.isPaused?m._upstreamEnded=!0:m.end()})},d.prototype.pause=function(){return!!c.prototype.pause.call(this)&&(this._stream.pause(),!0)},d.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},a.exports=d},{"../stream/GenericWorker":28,"../utils":32}],13:[function(s,a,i){var l=s("readable-stream").Readable;function c(d,u,m){l.call(this,u),this._helper=d;var p=this;d.on("data",function(f,x){p.push(f)||p._helper.pause(),m&&m(x)}).on("error",function(f){p.emit("error",f)}).on("end",function(){p.push(null)})}s("../utils").inherits(c,l),c.prototype._read=function(){this._helper.resume()},a.exports=c},{"../utils":32,"readable-stream":16}],14:[function(s,a,i){a.exports={isNode:typeof Buffer<"u",newBufferFrom:function(l,c){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(l,c);if(typeof l=="number")throw new Error('The "data" argument must not be a number');return new Buffer(l,c)},allocBuffer:function(l){if(Buffer.alloc)return Buffer.alloc(l);var c=new Buffer(l);return c.fill(0),c},isBuffer:function(l){return Buffer.isBuffer(l)},isStream:function(l){return l&&typeof l.on=="function"&&typeof l.pause=="function"&&typeof l.resume=="function"}}},{}],15:[function(s,a,i){function l(P,B,$){var D,T=d.getTypeOf(B),H=d.extend($||{},p);H.date=H.date||new Date,H.compression!==null&&(H.compression=H.compression.toUpperCase()),typeof H.unixPermissions=="string"&&(H.unixPermissions=parseInt(H.unixPermissions,8)),H.unixPermissions&&16384&H.unixPermissions&&(H.dir=!0),H.dosPermissions&&16&H.dosPermissions&&(H.dir=!0),H.dir&&(P=w(P)),H.createFolders&&(D=k(P))&&C.call(this,D,!0);var K=T==="string"&&H.binary===!1&&H.base64===!1;$&&$.binary!==void 0||(H.binary=!K),(B instanceof f&&B.uncompressedSize===0||H.dir||!B||B.length===0)&&(H.base64=!1,H.binary=!0,B="",H.compression="STORE",T="string");var E=null;E=B instanceof f||B instanceof u?B:y.isNode&&y.isStream(B)?new g(P,B):d.prepareContent(P,B,H.binary,H.optimizedBinaryString,H.base64);var I=new x(P,E,H);this.files[P]=I}var c=s("./utf8"),d=s("./utils"),u=s("./stream/GenericWorker"),m=s("./stream/StreamHelper"),p=s("./defaults"),f=s("./compressedObject"),x=s("./zipObject"),b=s("./generate"),y=s("./nodejsUtils"),g=s("./nodejs/NodejsStreamInputAdapter"),k=function(P){P.slice(-1)==="/"&&(P=P.substring(0,P.length-1));var B=P.lastIndexOf("/");return 0<B?P.substring(0,B):""},w=function(P){return P.slice(-1)!=="/"&&(P+="/"),P},C=function(P,B){return B=B!==void 0?B:p.createFolders,P=w(P),this.files[P]||l.call(this,P,null,{dir:!0,createFolders:B}),this.files[P]};function N(P){return Object.prototype.toString.call(P)==="[object RegExp]"}var A={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(P){var B,$,D;for(B in this.files)D=this.files[B],($=B.slice(this.root.length,B.length))&&B.slice(0,this.root.length)===this.root&&P($,D)},filter:function(P){var B=[];return this.forEach(function($,D){P($,D)&&B.push(D)}),B},file:function(P,B,$){if(arguments.length!==1)return P=this.root+P,l.call(this,P,B,$),this;if(N(P)){var D=P;return this.filter(function(H,K){return!K.dir&&D.test(H)})}var T=this.files[this.root+P];return T&&!T.dir?T:null},folder:function(P){if(!P)return this;if(N(P))return this.filter(function(T,H){return H.dir&&P.test(T)});var B=this.root+P,$=C.call(this,B),D=this.clone();return D.root=$.name,D},remove:function(P){P=this.root+P;var B=this.files[P];if(B||(P.slice(-1)!=="/"&&(P+="/"),B=this.files[P]),B&&!B.dir)delete this.files[P];else for(var $=this.filter(function(T,H){return H.name.slice(0,P.length)===P}),D=0;D<$.length;D++)delete this.files[$[D].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(P){var B,$={};try{if(($=d.extend(P||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:c.utf8encode})).type=$.type.toLowerCase(),$.compression=$.compression.toUpperCase(),$.type==="binarystring"&&($.type="string"),!$.type)throw new Error("No output type specified.");d.checkSupport($.type),$.platform!=="darwin"&&$.platform!=="freebsd"&&$.platform!=="linux"&&$.platform!=="sunos"||($.platform="UNIX"),$.platform==="win32"&&($.platform="DOS");var D=$.comment||this.comment||"";B=b.generateWorker(this,$,D)}catch(T){(B=new u("error")).error(T)}return new m(B,$.type||"string",$.mimeType)},generateAsync:function(P,B){return this.generateInternalStream(P).accumulate(B)},generateNodeStream:function(P,B){return(P=P||{}).type||(P.type="nodebuffer"),this.generateInternalStream(P).toNodejsStream(B)}};a.exports=A},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(s,a,i){a.exports=s("stream")},{stream:void 0}],17:[function(s,a,i){var l=s("./DataReader");function c(d){l.call(this,d);for(var u=0;u<this.data.length;u++)d[u]=255&d[u]}s("../utils").inherits(c,l),c.prototype.byteAt=function(d){return this.data[this.zero+d]},c.prototype.lastIndexOfSignature=function(d){for(var u=d.charCodeAt(0),m=d.charCodeAt(1),p=d.charCodeAt(2),f=d.charCodeAt(3),x=this.length-4;0<=x;--x)if(this.data[x]===u&&this.data[x+1]===m&&this.data[x+2]===p&&this.data[x+3]===f)return x-this.zero;return-1},c.prototype.readAndCheckSignature=function(d){var u=d.charCodeAt(0),m=d.charCodeAt(1),p=d.charCodeAt(2),f=d.charCodeAt(3),x=this.readData(4);return u===x[0]&&m===x[1]&&p===x[2]&&f===x[3]},c.prototype.readData=function(d){if(this.checkOffset(d),d===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,u},a.exports=c},{"../utils":32,"./DataReader":18}],18:[function(s,a,i){var l=s("../utils");function c(d){this.data=d,this.length=d.length,this.index=0,this.zero=0}c.prototype={checkOffset:function(d){this.checkIndex(this.index+d)},checkIndex:function(d){if(this.length<this.zero+d||d<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+d+"). Corrupted zip ?")},setIndex:function(d){this.checkIndex(d),this.index=d},skip:function(d){this.setIndex(this.index+d)},byteAt:function(){},readInt:function(d){var u,m=0;for(this.checkOffset(d),u=this.index+d-1;u>=this.index;u--)m=(m<<8)+this.byteAt(u);return this.index+=d,m},readString:function(d){return l.transformTo("string",this.readData(d))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var d=this.readInt(4);return new Date(Date.UTC(1980+(d>>25&127),(d>>21&15)-1,d>>16&31,d>>11&31,d>>5&63,(31&d)<<1))}},a.exports=c},{"../utils":32}],19:[function(s,a,i){var l=s("./Uint8ArrayReader");function c(d){l.call(this,d)}s("../utils").inherits(c,l),c.prototype.readData=function(d){this.checkOffset(d);var u=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,u},a.exports=c},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(s,a,i){var l=s("./DataReader");function c(d){l.call(this,d)}s("../utils").inherits(c,l),c.prototype.byteAt=function(d){return this.data.charCodeAt(this.zero+d)},c.prototype.lastIndexOfSignature=function(d){return this.data.lastIndexOf(d)-this.zero},c.prototype.readAndCheckSignature=function(d){return d===this.readData(4)},c.prototype.readData=function(d){this.checkOffset(d);var u=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,u},a.exports=c},{"../utils":32,"./DataReader":18}],21:[function(s,a,i){var l=s("./ArrayReader");function c(d){l.call(this,d)}s("../utils").inherits(c,l),c.prototype.readData=function(d){if(this.checkOffset(d),d===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+d);return this.index+=d,u},a.exports=c},{"../utils":32,"./ArrayReader":17}],22:[function(s,a,i){var l=s("../utils"),c=s("../support"),d=s("./ArrayReader"),u=s("./StringReader"),m=s("./NodeBufferReader"),p=s("./Uint8ArrayReader");a.exports=function(f){var x=l.getTypeOf(f);return l.checkSupport(x),x!=="string"||c.uint8array?x==="nodebuffer"?new m(f):c.uint8array?new p(l.transformTo("uint8array",f)):new d(l.transformTo("array",f)):new u(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(s,a,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(s,a,i){var l=s("./GenericWorker"),c=s("../utils");function d(u){l.call(this,"ConvertWorker to "+u),this.destType=u}c.inherits(d,l),d.prototype.processChunk=function(u){this.push({data:c.transformTo(this.destType,u.data),meta:u.meta})},a.exports=d},{"../utils":32,"./GenericWorker":28}],25:[function(s,a,i){var l=s("./GenericWorker"),c=s("../crc32");function d(){l.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}s("../utils").inherits(d,l),d.prototype.processChunk=function(u){this.streamInfo.crc32=c(u.data,this.streamInfo.crc32||0),this.push(u)},a.exports=d},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(s,a,i){var l=s("../utils"),c=s("./GenericWorker");function d(u){c.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}l.inherits(d,c),d.prototype.processChunk=function(u){if(u){var m=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=m+u.data.length}c.prototype.processChunk.call(this,u)},a.exports=d},{"../utils":32,"./GenericWorker":28}],27:[function(s,a,i){var l=s("../utils"),c=s("./GenericWorker");function d(u){c.call(this,"DataWorker");var m=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(p){m.dataIsReady=!0,m.data=p,m.max=p&&p.length||0,m.type=l.getTypeOf(p),m.isPaused||m._tickAndRepeat()},function(p){m.error(p)})}l.inherits(d,c),d.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this.data=null},d.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,l.delay(this._tickAndRepeat,[],this)),!0)},d.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(l.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},d.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,m=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,m);break;case"uint8array":u=this.data.subarray(this.index,m);break;case"array":case"nodebuffer":u=this.data.slice(this.index,m)}return this.index=m,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},a.exports=d},{"../utils":32,"./GenericWorker":28}],28:[function(s,a,i){function l(c){this.name=c||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}l.prototype={push:function(c){this.emit("data",c)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(c){this.emit("error",c)}return!0},error:function(c){return!this.isFinished&&(this.isPaused?this.generatedError=c:(this.isFinished=!0,this.emit("error",c),this.previous&&this.previous.error(c),this.cleanUp()),!0)},on:function(c,d){return this._listeners[c].push(d),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(c,d){if(this._listeners[c])for(var u=0;u<this._listeners[c].length;u++)this._listeners[c][u].call(this,d)},pipe:function(c){return c.registerPrevious(this)},registerPrevious:function(c){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=c.streamInfo,this.mergeStreamInfo(),this.previous=c;var d=this;return c.on("data",function(u){d.processChunk(u)}),c.on("end",function(){d.end()}),c.on("error",function(u){d.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var c=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),c=!0),this.previous&&this.previous.resume(),!c},flush:function(){},processChunk:function(c){this.push(c)},withStreamInfo:function(c,d){return this.extraStreamInfo[c]=d,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var c in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,c)&&(this.streamInfo[c]=this.extraStreamInfo[c])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var c="Worker "+this.name;return this.previous?this.previous+" -> "+c:c}},a.exports=l},{}],29:[function(s,a,i){var l=s("../utils"),c=s("./ConvertWorker"),d=s("./GenericWorker"),u=s("../base64"),m=s("../support"),p=s("../external"),f=null;if(m.nodestream)try{f=s("../nodejs/NodejsStreamOutputAdapter")}catch{}function x(y,g){return new p.Promise(function(k,w){var C=[],N=y._internalType,A=y._outputType,P=y._mimeType;y.on("data",function(B,$){C.push(B),g&&g($)}).on("error",function(B){C=[],w(B)}).on("end",function(){try{var B=(function($,D,T){switch($){case"blob":return l.newBlob(l.transformTo("arraybuffer",D),T);case"base64":return u.encode(D);default:return l.transformTo($,D)}})(A,(function($,D){var T,H=0,K=null,E=0;for(T=0;T<D.length;T++)E+=D[T].length;switch($){case"string":return D.join("");case"array":return Array.prototype.concat.apply([],D);case"uint8array":for(K=new Uint8Array(E),T=0;T<D.length;T++)K.set(D[T],H),H+=D[T].length;return K;case"nodebuffer":return Buffer.concat(D);default:throw new Error("concat : unsupported type '"+$+"'")}})(N,C),P);k(B)}catch($){w($)}C=[]}).resume()})}function b(y,g,k){var w=g;switch(g){case"blob":case"arraybuffer":w="uint8array";break;case"base64":w="string"}try{this._internalType=w,this._outputType=g,this._mimeType=k,l.checkSupport(w),this._worker=y.pipe(new c(w)),y.lock()}catch(C){this._worker=new d("error"),this._worker.error(C)}}b.prototype={accumulate:function(y){return x(this,y)},on:function(y,g){var k=this;return y==="data"?this._worker.on(y,function(w){g.call(k,w.data,w.meta)}):this._worker.on(y,function(){l.delay(g,arguments,k)}),this},resume:function(){return l.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(l.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},y)}},a.exports=b},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(s,a,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var l=new ArrayBuffer(0);try{i.blob=new Blob([l],{type:"application/zip"}).size===0}catch{try{var c=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);c.append(l),i.blob=c.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!s("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(s,a,i){for(var l=s("./utils"),c=s("./support"),d=s("./nodejsUtils"),u=s("./stream/GenericWorker"),m=new Array(256),p=0;p<256;p++)m[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;m[254]=m[254]=1;function f(){u.call(this,"utf-8 decode"),this.leftOver=null}function x(){u.call(this,"utf-8 encode")}i.utf8encode=function(b){return c.nodebuffer?d.newBufferFrom(b,"utf-8"):(function(y){var g,k,w,C,N,A=y.length,P=0;for(C=0;C<A;C++)(64512&(k=y.charCodeAt(C)))==55296&&C+1<A&&(64512&(w=y.charCodeAt(C+1)))==56320&&(k=65536+(k-55296<<10)+(w-56320),C++),P+=k<128?1:k<2048?2:k<65536?3:4;for(g=c.uint8array?new Uint8Array(P):new Array(P),C=N=0;N<P;C++)(64512&(k=y.charCodeAt(C)))==55296&&C+1<A&&(64512&(w=y.charCodeAt(C+1)))==56320&&(k=65536+(k-55296<<10)+(w-56320),C++),k<128?g[N++]=k:(k<2048?g[N++]=192|k>>>6:(k<65536?g[N++]=224|k>>>12:(g[N++]=240|k>>>18,g[N++]=128|k>>>12&63),g[N++]=128|k>>>6&63),g[N++]=128|63&k);return g})(b)},i.utf8decode=function(b){return c.nodebuffer?l.transformTo("nodebuffer",b).toString("utf-8"):(function(y){var g,k,w,C,N=y.length,A=new Array(2*N);for(g=k=0;g<N;)if((w=y[g++])<128)A[k++]=w;else if(4<(C=m[w]))A[k++]=65533,g+=C-1;else{for(w&=C===2?31:C===3?15:7;1<C&&g<N;)w=w<<6|63&y[g++],C--;1<C?A[k++]=65533:w<65536?A[k++]=w:(w-=65536,A[k++]=55296|w>>10&1023,A[k++]=56320|1023&w)}return A.length!==k&&(A.subarray?A=A.subarray(0,k):A.length=k),l.applyFromCharCode(A)})(b=l.transformTo(c.uint8array?"uint8array":"array",b))},l.inherits(f,u),f.prototype.processChunk=function(b){var y=l.transformTo(c.uint8array?"uint8array":"array",b.data);if(this.leftOver&&this.leftOver.length){if(c.uint8array){var g=y;(y=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),y.set(g,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var k=(function(C,N){var A;for((N=N||C.length)>C.length&&(N=C.length),A=N-1;0<=A&&(192&C[A])==128;)A--;return A<0||A===0?N:A+m[C[A]]>N?A:N})(y),w=y;k!==y.length&&(c.uint8array?(w=y.subarray(0,k),this.leftOver=y.subarray(k,y.length)):(w=y.slice(0,k),this.leftOver=y.slice(k,y.length))),this.push({data:i.utf8decode(w),meta:b.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=f,l.inherits(x,u),x.prototype.processChunk=function(b){this.push({data:i.utf8encode(b.data),meta:b.meta})},i.Utf8EncodeWorker=x},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(s,a,i){var l=s("./support"),c=s("./base64"),d=s("./nodejsUtils"),u=s("./external");function m(g){return g}function p(g,k){for(var w=0;w<g.length;++w)k[w]=255&g.charCodeAt(w);return k}s("setimmediate"),i.newBlob=function(g,k){i.checkSupport("blob");try{return new Blob([g],{type:k})}catch{try{var w=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return w.append(g),w.getBlob(k)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(g,k,w){var C=[],N=0,A=g.length;if(A<=w)return String.fromCharCode.apply(null,g);for(;N<A;)k==="array"||k==="nodebuffer"?C.push(String.fromCharCode.apply(null,g.slice(N,Math.min(N+w,A)))):C.push(String.fromCharCode.apply(null,g.subarray(N,Math.min(N+w,A)))),N+=w;return C.join("")},stringifyByChar:function(g){for(var k="",w=0;w<g.length;w++)k+=String.fromCharCode(g[w]);return k},applyCanBeUsed:{uint8array:(function(){try{return l.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return l.nodebuffer&&String.fromCharCode.apply(null,d.allocBuffer(1)).length===1}catch{return!1}})()}};function x(g){var k=65536,w=i.getTypeOf(g),C=!0;if(w==="uint8array"?C=f.applyCanBeUsed.uint8array:w==="nodebuffer"&&(C=f.applyCanBeUsed.nodebuffer),C)for(;1<k;)try{return f.stringifyByChunk(g,w,k)}catch{k=Math.floor(k/2)}return f.stringifyByChar(g)}function b(g,k){for(var w=0;w<g.length;w++)k[w]=g[w];return k}i.applyFromCharCode=x;var y={};y.string={string:m,array:function(g){return p(g,new Array(g.length))},arraybuffer:function(g){return y.string.uint8array(g).buffer},uint8array:function(g){return p(g,new Uint8Array(g.length))},nodebuffer:function(g){return p(g,d.allocBuffer(g.length))}},y.array={string:x,array:m,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return d.newBufferFrom(g)}},y.arraybuffer={string:function(g){return x(new Uint8Array(g))},array:function(g){return b(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:m,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return d.newBufferFrom(new Uint8Array(g))}},y.uint8array={string:x,array:function(g){return b(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:m,nodebuffer:function(g){return d.newBufferFrom(g)}},y.nodebuffer={string:x,array:function(g){return b(g,new Array(g.length))},arraybuffer:function(g){return y.nodebuffer.uint8array(g).buffer},uint8array:function(g){return b(g,new Uint8Array(g.length))},nodebuffer:m},i.transformTo=function(g,k){if(k=k||"",!g)return k;i.checkSupport(g);var w=i.getTypeOf(k);return y[w][g](k)},i.resolve=function(g){for(var k=g.split("/"),w=[],C=0;C<k.length;C++){var N=k[C];N==="."||N===""&&C!==0&&C!==k.length-1||(N===".."?w.pop():w.push(N))}return w.join("/")},i.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":l.nodebuffer&&d.isBuffer(g)?"nodebuffer":l.uint8array&&g instanceof Uint8Array?"uint8array":l.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(g){if(!l[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(g){var k,w,C="";for(w=0;w<(g||"").length;w++)C+="\\x"+((k=g.charCodeAt(w))<16?"0":"")+k.toString(16).toUpperCase();return C},i.delay=function(g,k,w){setImmediate(function(){g.apply(w||null,k||[])})},i.inherits=function(g,k){function w(){}w.prototype=k.prototype,g.prototype=new w},i.extend=function(){var g,k,w={};for(g=0;g<arguments.length;g++)for(k in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],k)&&w[k]===void 0&&(w[k]=arguments[g][k]);return w},i.prepareContent=function(g,k,w,C,N){return u.Promise.resolve(k).then(function(A){return l.blob&&(A instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(A))!==-1)&&typeof FileReader<"u"?new u.Promise(function(P,B){var $=new FileReader;$.onload=function(D){P(D.target.result)},$.onerror=function(D){B(D.target.error)},$.readAsArrayBuffer(A)}):A}).then(function(A){var P=i.getTypeOf(A);return P?(P==="arraybuffer"?A=i.transformTo("uint8array",A):P==="string"&&(N?A=c.decode(A):w&&C!==!0&&(A=(function(B){return p(B,l.uint8array?new Uint8Array(B.length):new Array(B.length))})(A))),A):u.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(s,a,i){var l=s("./reader/readerFor"),c=s("./utils"),d=s("./signature"),u=s("./zipEntry"),m=s("./support");function p(f){this.files=[],this.loadOptions=f}p.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var x=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+c.pretty(x)+", expected "+c.pretty(f)+")")}},isSignature:function(f,x){var b=this.reader.index;this.reader.setIndex(f);var y=this.reader.readString(4)===x;return this.reader.setIndex(b),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),x=m.uint8array?"uint8array":"array",b=c.transformTo(x,f);this.zipComment=this.loadOptions.decodeFileName(b)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,x,b,y=this.zip64EndOfCentralSize-44;0<y;)f=this.reader.readInt(2),x=this.reader.readInt(4),b=this.reader.readData(x),this.zip64ExtensibleData[f]={id:f,length:x,value:b}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,x;for(f=0;f<this.files.length;f++)x=this.files[f],this.reader.setIndex(x.localHeaderOffset),this.checkSignature(d.LOCAL_FILE_HEADER),x.readLocalPart(this.reader),x.handleUTF8(),x.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(d.CENTRAL_FILE_HEADER);)(f=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(d.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,d.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var x=f;if(this.checkSignature(d.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===c.MAX_VALUE_16BITS||this.diskWithCentralDirStart===c.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===c.MAX_VALUE_16BITS||this.centralDirRecords===c.MAX_VALUE_16BITS||this.centralDirSize===c.MAX_VALUE_32BITS||this.centralDirOffset===c.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(d.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(d.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,d.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(d.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(d.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var b=this.centralDirOffset+this.centralDirSize;this.zip64&&(b+=20,b+=12+this.zip64EndOfCentralSize);var y=x-b;if(0<y)this.isSignature(x,d.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(f){this.reader=l(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},a.exports=p},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(s,a,i){var l=s("./reader/readerFor"),c=s("./utils"),d=s("./compressedObject"),u=s("./crc32"),m=s("./utf8"),p=s("./compressions"),f=s("./support");function x(b,y){this.options=b,this.loadOptions=y}x.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(b){var y,g;if(b.skip(22),this.fileNameLength=b.readInt(2),g=b.readInt(2),this.fileName=b.readData(this.fileNameLength),b.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=(function(k){for(var w in p)if(Object.prototype.hasOwnProperty.call(p,w)&&p[w].magic===k)return p[w];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+c.pretty(this.compressionMethod)+" unknown (inner file : "+c.transformTo("string",this.fileName)+")");this.decompressed=new d(this.compressedSize,this.uncompressedSize,this.crc32,y,b.readData(this.compressedSize))},readCentralPart:function(b){this.versionMadeBy=b.readInt(2),b.skip(2),this.bitFlag=b.readInt(2),this.compressionMethod=b.readString(2),this.date=b.readDate(),this.crc32=b.readInt(4),this.compressedSize=b.readInt(4),this.uncompressedSize=b.readInt(4);var y=b.readInt(2);if(this.extraFieldsLength=b.readInt(2),this.fileCommentLength=b.readInt(2),this.diskNumberStart=b.readInt(2),this.internalFileAttributes=b.readInt(2),this.externalFileAttributes=b.readInt(4),this.localHeaderOffset=b.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");b.skip(y),this.readExtraFields(b),this.parseZIP64ExtraField(b),this.fileComment=b.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var b=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),b==0&&(this.dosPermissions=63&this.externalFileAttributes),b==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var b=l(this.extraFields[1].value);this.uncompressedSize===c.MAX_VALUE_32BITS&&(this.uncompressedSize=b.readInt(8)),this.compressedSize===c.MAX_VALUE_32BITS&&(this.compressedSize=b.readInt(8)),this.localHeaderOffset===c.MAX_VALUE_32BITS&&(this.localHeaderOffset=b.readInt(8)),this.diskNumberStart===c.MAX_VALUE_32BITS&&(this.diskNumberStart=b.readInt(4))}},readExtraFields:function(b){var y,g,k,w=b.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});b.index+4<w;)y=b.readInt(2),g=b.readInt(2),k=b.readData(g),this.extraFields[y]={id:y,length:g,value:k};b.setIndex(w)},handleUTF8:function(){var b=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=m.utf8decode(this.fileName),this.fileCommentStr=m.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var g=c.transformTo(b,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var k=this.findExtraFieldUnicodeComment();if(k!==null)this.fileCommentStr=k;else{var w=c.transformTo(b,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(w)}}},findExtraFieldUnicodePath:function(){var b=this.extraFields[28789];if(b){var y=l(b.value);return y.readInt(1)!==1||u(this.fileName)!==y.readInt(4)?null:m.utf8decode(y.readData(b.length-5))}return null},findExtraFieldUnicodeComment:function(){var b=this.extraFields[25461];if(b){var y=l(b.value);return y.readInt(1)!==1||u(this.fileComment)!==y.readInt(4)?null:m.utf8decode(y.readData(b.length-5))}return null}},a.exports=x},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(s,a,i){function l(y,g,k){this.name=y,this.dir=k.dir,this.date=k.date,this.comment=k.comment,this.unixPermissions=k.unixPermissions,this.dosPermissions=k.dosPermissions,this._data=g,this._dataBinary=k.binary,this.options={compression:k.compression,compressionOptions:k.compressionOptions}}var c=s("./stream/StreamHelper"),d=s("./stream/DataWorker"),u=s("./utf8"),m=s("./compressedObject"),p=s("./stream/GenericWorker");l.prototype={internalStream:function(y){var g=null,k="string";try{if(!y)throw new Error("No output type specified.");var w=(k=y.toLowerCase())==="string"||k==="text";k!=="binarystring"&&k!=="text"||(k="string"),g=this._decompressWorker();var C=!this._dataBinary;C&&!w&&(g=g.pipe(new u.Utf8EncodeWorker)),!C&&w&&(g=g.pipe(new u.Utf8DecodeWorker))}catch(N){(g=new p("error")).error(N)}return new c(g,k,"")},async:function(y,g){return this.internalStream(y).accumulate(g)},nodeStream:function(y,g){return this.internalStream(y||"nodebuffer").toNodejsStream(g)},_compressWorker:function(y,g){if(this._data instanceof m&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var k=this._decompressWorker();return this._dataBinary||(k=k.pipe(new u.Utf8EncodeWorker)),m.createWorkerFrom(k,y,g)},_decompressWorker:function(){return this._data instanceof m?this._data.getContentWorker():this._data instanceof p?this._data:new d(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],x=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},b=0;b<f.length;b++)l.prototype[f[b]]=x;a.exports=l},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(s,a,i){(function(l){var c,d,u=l.MutationObserver||l.WebKitMutationObserver;if(u){var m=0,p=new u(y),f=l.document.createTextNode("");p.observe(f,{characterData:!0}),c=function(){f.data=m=++m%2}}else if(l.setImmediate||l.MessageChannel===void 0)c="document"in l&&"onreadystatechange"in l.document.createElement("script")?function(){var g=l.document.createElement("script");g.onreadystatechange=function(){y(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},l.document.documentElement.appendChild(g)}:function(){setTimeout(y,0)};else{var x=new l.MessageChannel;x.port1.onmessage=y,c=function(){x.port2.postMessage(0)}}var b=[];function y(){var g,k;d=!0;for(var w=b.length;w;){for(k=b,b=[],g=-1;++g<w;)k[g]();w=b.length}d=!1}a.exports=function(g){b.push(g)!==1||d||c()}}).call(this,typeof Wl<"u"?Wl:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(s,a,i){var l=s("immediate");function c(){}var d={},u=["REJECTED"],m=["FULFILLED"],p=["PENDING"];function f(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,w!==c&&g(this,w)}function x(w,C,N){this.promise=w,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof N=="function"&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}function b(w,C,N){l(function(){var A;try{A=C(N)}catch(P){return d.reject(w,P)}A===w?d.reject(w,new TypeError("Cannot resolve promise with itself")):d.resolve(w,A)})}function y(w){var C=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof C=="function")return function(){C.apply(w,arguments)}}function g(w,C){var N=!1;function A($){N||(N=!0,d.reject(w,$))}function P($){N||(N=!0,d.resolve(w,$))}var B=k(function(){C(P,A)});B.status==="error"&&A(B.value)}function k(w,C){var N={};try{N.value=w(C),N.status="success"}catch(A){N.status="error",N.value=A}return N}(a.exports=f).prototype.finally=function(w){if(typeof w!="function")return this;var C=this.constructor;return this.then(function(N){return C.resolve(w()).then(function(){return N})},function(N){return C.resolve(w()).then(function(){throw N})})},f.prototype.catch=function(w){return this.then(null,w)},f.prototype.then=function(w,C){if(typeof w!="function"&&this.state===m||typeof C!="function"&&this.state===u)return this;var N=new this.constructor(c);return this.state!==p?b(N,this.state===m?w:C,this.outcome):this.queue.push(new x(N,w,C)),N},x.prototype.callFulfilled=function(w){d.resolve(this.promise,w)},x.prototype.otherCallFulfilled=function(w){b(this.promise,this.onFulfilled,w)},x.prototype.callRejected=function(w){d.reject(this.promise,w)},x.prototype.otherCallRejected=function(w){b(this.promise,this.onRejected,w)},d.resolve=function(w,C){var N=k(y,C);if(N.status==="error")return d.reject(w,N.value);var A=N.value;if(A)g(w,A);else{w.state=m,w.outcome=C;for(var P=-1,B=w.queue.length;++P<B;)w.queue[P].callFulfilled(C)}return w},d.reject=function(w,C){w.state=u,w.outcome=C;for(var N=-1,A=w.queue.length;++N<A;)w.queue[N].callRejected(C);return w},f.resolve=function(w){return w instanceof this?w:d.resolve(new this(c),w)},f.reject=function(w){var C=new this(c);return d.reject(C,w)},f.all=function(w){var C=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=w.length,A=!1;if(!N)return this.resolve([]);for(var P=new Array(N),B=0,$=-1,D=new this(c);++$<N;)T(w[$],$);return D;function T(H,K){C.resolve(H).then(function(E){P[K]=E,++B!==N||A||(A=!0,d.resolve(D,P))},function(E){A||(A=!0,d.reject(D,E))})}},f.race=function(w){var C=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=w.length,A=!1;if(!N)return this.resolve([]);for(var P=-1,B=new this(c);++P<N;)$=w[P],C.resolve($).then(function(D){A||(A=!0,d.resolve(B,D))},function(D){A||(A=!0,d.reject(B,D))});var $;return B}},{immediate:36}],38:[function(s,a,i){var l={};(0,s("./lib/utils/common").assign)(l,s("./lib/deflate"),s("./lib/inflate"),s("./lib/zlib/constants")),a.exports=l},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(s,a,i){var l=s("./zlib/deflate"),c=s("./utils/common"),d=s("./utils/strings"),u=s("./zlib/messages"),m=s("./zlib/zstream"),p=Object.prototype.toString,f=0,x=-1,b=0,y=8;function g(w){if(!(this instanceof g))return new g(w);this.options=c.assign({level:x,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:b,to:""},w||{});var C=this.options;C.raw&&0<C.windowBits?C.windowBits=-C.windowBits:C.gzip&&0<C.windowBits&&C.windowBits<16&&(C.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var N=l.deflateInit2(this.strm,C.level,C.method,C.windowBits,C.memLevel,C.strategy);if(N!==f)throw new Error(u[N]);if(C.header&&l.deflateSetHeader(this.strm,C.header),C.dictionary){var A;if(A=typeof C.dictionary=="string"?d.string2buf(C.dictionary):p.call(C.dictionary)==="[object ArrayBuffer]"?new Uint8Array(C.dictionary):C.dictionary,(N=l.deflateSetDictionary(this.strm,A))!==f)throw new Error(u[N]);this._dict_set=!0}}function k(w,C){var N=new g(C);if(N.push(w,!0),N.err)throw N.msg||u[N.err];return N.result}g.prototype.push=function(w,C){var N,A,P=this.strm,B=this.options.chunkSize;if(this.ended)return!1;A=C===~~C?C:C===!0?4:0,typeof w=="string"?P.input=d.string2buf(w):p.call(w)==="[object ArrayBuffer]"?P.input=new Uint8Array(w):P.input=w,P.next_in=0,P.avail_in=P.input.length;do{if(P.avail_out===0&&(P.output=new c.Buf8(B),P.next_out=0,P.avail_out=B),(N=l.deflate(P,A))!==1&&N!==f)return this.onEnd(N),!(this.ended=!0);P.avail_out!==0&&(P.avail_in!==0||A!==4&&A!==2)||(this.options.to==="string"?this.onData(d.buf2binstring(c.shrinkBuf(P.output,P.next_out))):this.onData(c.shrinkBuf(P.output,P.next_out)))}while((0<P.avail_in||P.avail_out===0)&&N!==1);return A===4?(N=l.deflateEnd(this.strm),this.onEnd(N),this.ended=!0,N===f):A!==2||(this.onEnd(f),!(P.avail_out=0))},g.prototype.onData=function(w){this.chunks.push(w)},g.prototype.onEnd=function(w){w===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},i.Deflate=g,i.deflate=k,i.deflateRaw=function(w,C){return(C=C||{}).raw=!0,k(w,C)},i.gzip=function(w,C){return(C=C||{}).gzip=!0,k(w,C)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(s,a,i){var l=s("./zlib/inflate"),c=s("./utils/common"),d=s("./utils/strings"),u=s("./zlib/constants"),m=s("./zlib/messages"),p=s("./zlib/zstream"),f=s("./zlib/gzheader"),x=Object.prototype.toString;function b(g){if(!(this instanceof b))return new b(g);this.options=c.assign({chunkSize:16384,windowBits:0,to:""},g||{});var k=this.options;k.raw&&0<=k.windowBits&&k.windowBits<16&&(k.windowBits=-k.windowBits,k.windowBits===0&&(k.windowBits=-15)),!(0<=k.windowBits&&k.windowBits<16)||g&&g.windowBits||(k.windowBits+=32),15<k.windowBits&&k.windowBits<48&&(15&k.windowBits)==0&&(k.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var w=l.inflateInit2(this.strm,k.windowBits);if(w!==u.Z_OK)throw new Error(m[w]);this.header=new f,l.inflateGetHeader(this.strm,this.header)}function y(g,k){var w=new b(k);if(w.push(g,!0),w.err)throw w.msg||m[w.err];return w.result}b.prototype.push=function(g,k){var w,C,N,A,P,B,$=this.strm,D=this.options.chunkSize,T=this.options.dictionary,H=!1;if(this.ended)return!1;C=k===~~k?k:k===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof g=="string"?$.input=d.binstring2buf(g):x.call(g)==="[object ArrayBuffer]"?$.input=new Uint8Array(g):$.input=g,$.next_in=0,$.avail_in=$.input.length;do{if($.avail_out===0&&($.output=new c.Buf8(D),$.next_out=0,$.avail_out=D),(w=l.inflate($,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&T&&(B=typeof T=="string"?d.string2buf(T):x.call(T)==="[object ArrayBuffer]"?new Uint8Array(T):T,w=l.inflateSetDictionary(this.strm,B)),w===u.Z_BUF_ERROR&&H===!0&&(w=u.Z_OK,H=!1),w!==u.Z_STREAM_END&&w!==u.Z_OK)return this.onEnd(w),!(this.ended=!0);$.next_out&&($.avail_out!==0&&w!==u.Z_STREAM_END&&($.avail_in!==0||C!==u.Z_FINISH&&C!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(N=d.utf8border($.output,$.next_out),A=$.next_out-N,P=d.buf2string($.output,N),$.next_out=A,$.avail_out=D-A,A&&c.arraySet($.output,$.output,N,A,0),this.onData(P)):this.onData(c.shrinkBuf($.output,$.next_out)))),$.avail_in===0&&$.avail_out===0&&(H=!0)}while((0<$.avail_in||$.avail_out===0)&&w!==u.Z_STREAM_END);return w===u.Z_STREAM_END&&(C=u.Z_FINISH),C===u.Z_FINISH?(w=l.inflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===u.Z_OK):C!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!($.avail_out=0))},b.prototype.onData=function(g){this.chunks.push(g)},b.prototype.onEnd=function(g){g===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},i.Inflate=b,i.inflate=y,i.inflateRaw=function(g,k){return(k=k||{}).raw=!0,y(g,k)},i.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(s,a,i){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(u){for(var m=Array.prototype.slice.call(arguments,1);m.length;){var p=m.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(var f in p)p.hasOwnProperty(f)&&(u[f]=p[f])}}return u},i.shrinkBuf=function(u,m){return u.length===m?u:u.subarray?u.subarray(0,m):(u.length=m,u)};var c={arraySet:function(u,m,p,f,x){if(m.subarray&&u.subarray)u.set(m.subarray(p,p+f),x);else for(var b=0;b<f;b++)u[x+b]=m[p+b]},flattenChunks:function(u){var m,p,f,x,b,y;for(m=f=0,p=u.length;m<p;m++)f+=u[m].length;for(y=new Uint8Array(f),m=x=0,p=u.length;m<p;m++)b=u[m],y.set(b,x),x+=b.length;return y}},d={arraySet:function(u,m,p,f,x){for(var b=0;b<f;b++)u[x+b]=m[p+b]},flattenChunks:function(u){return[].concat.apply([],u)}};i.setTyped=function(u){u?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,c)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,d))},i.setTyped(l)},{}],42:[function(s,a,i){var l=s("./common"),c=!0,d=!0;try{String.fromCharCode.apply(null,[0])}catch{c=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{d=!1}for(var u=new l.Buf8(256),m=0;m<256;m++)u[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;function p(f,x){if(x<65537&&(f.subarray&&d||!f.subarray&&c))return String.fromCharCode.apply(null,l.shrinkBuf(f,x));for(var b="",y=0;y<x;y++)b+=String.fromCharCode(f[y]);return b}u[254]=u[254]=1,i.string2buf=function(f){var x,b,y,g,k,w=f.length,C=0;for(g=0;g<w;g++)(64512&(b=f.charCodeAt(g)))==55296&&g+1<w&&(64512&(y=f.charCodeAt(g+1)))==56320&&(b=65536+(b-55296<<10)+(y-56320),g++),C+=b<128?1:b<2048?2:b<65536?3:4;for(x=new l.Buf8(C),g=k=0;k<C;g++)(64512&(b=f.charCodeAt(g)))==55296&&g+1<w&&(64512&(y=f.charCodeAt(g+1)))==56320&&(b=65536+(b-55296<<10)+(y-56320),g++),b<128?x[k++]=b:(b<2048?x[k++]=192|b>>>6:(b<65536?x[k++]=224|b>>>12:(x[k++]=240|b>>>18,x[k++]=128|b>>>12&63),x[k++]=128|b>>>6&63),x[k++]=128|63&b);return x},i.buf2binstring=function(f){return p(f,f.length)},i.binstring2buf=function(f){for(var x=new l.Buf8(f.length),b=0,y=x.length;b<y;b++)x[b]=f.charCodeAt(b);return x},i.buf2string=function(f,x){var b,y,g,k,w=x||f.length,C=new Array(2*w);for(b=y=0;b<w;)if((g=f[b++])<128)C[y++]=g;else if(4<(k=u[g]))C[y++]=65533,b+=k-1;else{for(g&=k===2?31:k===3?15:7;1<k&&b<w;)g=g<<6|63&f[b++],k--;1<k?C[y++]=65533:g<65536?C[y++]=g:(g-=65536,C[y++]=55296|g>>10&1023,C[y++]=56320|1023&g)}return p(C,y)},i.utf8border=function(f,x){var b;for((x=x||f.length)>f.length&&(x=f.length),b=x-1;0<=b&&(192&f[b])==128;)b--;return b<0||b===0?x:b+u[f[b]]>x?b:x}},{"./common":41}],43:[function(s,a,i){a.exports=function(l,c,d,u){for(var m=65535&l|0,p=l>>>16&65535|0,f=0;d!==0;){for(d-=f=2e3<d?2e3:d;p=p+(m=m+c[u++]|0)|0,--f;);m%=65521,p%=65521}return m|p<<16|0}},{}],44:[function(s,a,i){a.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(s,a,i){var l=(function(){for(var c,d=[],u=0;u<256;u++){c=u;for(var m=0;m<8;m++)c=1&c?3988292384^c>>>1:c>>>1;d[u]=c}return d})();a.exports=function(c,d,u,m){var p=l,f=m+u;c^=-1;for(var x=m;x<f;x++)c=c>>>8^p[255&(c^d[x])];return-1^c}},{}],46:[function(s,a,i){var l,c=s("../utils/common"),d=s("./trees"),u=s("./adler32"),m=s("./crc32"),p=s("./messages"),f=0,x=4,b=0,y=-2,g=-1,k=4,w=2,C=8,N=9,A=286,P=30,B=19,$=2*A+1,D=15,T=3,H=258,K=H+T+1,E=42,I=113,S=1,L=2,z=3,R=4;function U(M,me){return M.msg=p[me],me}function W(M){return(M<<1)-(4<M?9:0)}function Z(M){for(var me=M.length;0<=--me;)M[me]=0}function O(M){var me=M.state,he=me.pending;he>M.avail_out&&(he=M.avail_out),he!==0&&(c.arraySet(M.output,me.pending_buf,me.pending_out,he,M.next_out),M.next_out+=he,me.pending_out+=he,M.total_out+=he,M.avail_out-=he,me.pending-=he,me.pending===0&&(me.pending_out=0))}function V(M,me){d._tr_flush_block(M,0<=M.block_start?M.block_start:-1,M.strstart-M.block_start,me),M.block_start=M.strstart,O(M.strm)}function ee(M,me){M.pending_buf[M.pending++]=me}function q(M,me){M.pending_buf[M.pending++]=me>>>8&255,M.pending_buf[M.pending++]=255&me}function G(M,me){var he,J,X=M.max_chain_length,oe=M.strstart,ke=M.prev_length,Ne=M.nice_match,de=M.strstart>M.w_size-K?M.strstart-(M.w_size-K):0,fe=M.window,_e=M.w_mask,Se=M.prev,Be=M.strstart+H,ot=fe[oe+ke-1],Ce=fe[oe+ke];M.prev_length>=M.good_match&&(X>>=2),Ne>M.lookahead&&(Ne=M.lookahead);do if(fe[(he=me)+ke]===Ce&&fe[he+ke-1]===ot&&fe[he]===fe[oe]&&fe[++he]===fe[oe+1]){oe+=2,he++;do;while(fe[++oe]===fe[++he]&&fe[++oe]===fe[++he]&&fe[++oe]===fe[++he]&&fe[++oe]===fe[++he]&&fe[++oe]===fe[++he]&&fe[++oe]===fe[++he]&&fe[++oe]===fe[++he]&&fe[++oe]===fe[++he]&&oe<Be);if(J=H-(Be-oe),oe=Be-H,ke<J){if(M.match_start=me,Ne<=(ke=J))break;ot=fe[oe+ke-1],Ce=fe[oe+ke]}}while((me=Se[me&_e])>de&&--X!=0);return ke<=M.lookahead?ke:M.lookahead}function Q(M){var me,he,J,X,oe,ke,Ne,de,fe,_e,Se=M.w_size;do{if(X=M.window_size-M.lookahead-M.strstart,M.strstart>=Se+(Se-K)){for(c.arraySet(M.window,M.window,Se,Se,0),M.match_start-=Se,M.strstart-=Se,M.block_start-=Se,me=he=M.hash_size;J=M.head[--me],M.head[me]=Se<=J?J-Se:0,--he;);for(me=he=Se;J=M.prev[--me],M.prev[me]=Se<=J?J-Se:0,--he;);X+=Se}if(M.strm.avail_in===0)break;if(ke=M.strm,Ne=M.window,de=M.strstart+M.lookahead,fe=X,_e=void 0,_e=ke.avail_in,fe<_e&&(_e=fe),he=_e===0?0:(ke.avail_in-=_e,c.arraySet(Ne,ke.input,ke.next_in,_e,de),ke.state.wrap===1?ke.adler=u(ke.adler,Ne,_e,de):ke.state.wrap===2&&(ke.adler=m(ke.adler,Ne,_e,de)),ke.next_in+=_e,ke.total_in+=_e,_e),M.lookahead+=he,M.lookahead+M.insert>=T)for(oe=M.strstart-M.insert,M.ins_h=M.window[oe],M.ins_h=(M.ins_h<<M.hash_shift^M.window[oe+1])&M.hash_mask;M.insert&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[oe+T-1])&M.hash_mask,M.prev[oe&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=oe,oe++,M.insert--,!(M.lookahead+M.insert<T)););}while(M.lookahead<K&&M.strm.avail_in!==0)}function le(M,me){for(var he,J;;){if(M.lookahead<K){if(Q(M),M.lookahead<K&&me===f)return S;if(M.lookahead===0)break}if(he=0,M.lookahead>=T&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+T-1])&M.hash_mask,he=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),he!==0&&M.strstart-he<=M.w_size-K&&(M.match_length=G(M,he)),M.match_length>=T)if(J=d._tr_tally(M,M.strstart-M.match_start,M.match_length-T),M.lookahead-=M.match_length,M.match_length<=M.max_lazy_match&&M.lookahead>=T){for(M.match_length--;M.strstart++,M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+T-1])&M.hash_mask,he=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart,--M.match_length!=0;);M.strstart++}else M.strstart+=M.match_length,M.match_length=0,M.ins_h=M.window[M.strstart],M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+1])&M.hash_mask;else J=d._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++;if(J&&(V(M,!1),M.strm.avail_out===0))return S}return M.insert=M.strstart<T-1?M.strstart:T-1,me===x?(V(M,!0),M.strm.avail_out===0?z:R):M.last_lit&&(V(M,!1),M.strm.avail_out===0)?S:L}function ne(M,me){for(var he,J,X;;){if(M.lookahead<K){if(Q(M),M.lookahead<K&&me===f)return S;if(M.lookahead===0)break}if(he=0,M.lookahead>=T&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+T-1])&M.hash_mask,he=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),M.prev_length=M.match_length,M.prev_match=M.match_start,M.match_length=T-1,he!==0&&M.prev_length<M.max_lazy_match&&M.strstart-he<=M.w_size-K&&(M.match_length=G(M,he),M.match_length<=5&&(M.strategy===1||M.match_length===T&&4096<M.strstart-M.match_start)&&(M.match_length=T-1)),M.prev_length>=T&&M.match_length<=M.prev_length){for(X=M.strstart+M.lookahead-T,J=d._tr_tally(M,M.strstart-1-M.prev_match,M.prev_length-T),M.lookahead-=M.prev_length-1,M.prev_length-=2;++M.strstart<=X&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+T-1])&M.hash_mask,he=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),--M.prev_length!=0;);if(M.match_available=0,M.match_length=T-1,M.strstart++,J&&(V(M,!1),M.strm.avail_out===0))return S}else if(M.match_available){if((J=d._tr_tally(M,0,M.window[M.strstart-1]))&&V(M,!1),M.strstart++,M.lookahead--,M.strm.avail_out===0)return S}else M.match_available=1,M.strstart++,M.lookahead--}return M.match_available&&(J=d._tr_tally(M,0,M.window[M.strstart-1]),M.match_available=0),M.insert=M.strstart<T-1?M.strstart:T-1,me===x?(V(M,!0),M.strm.avail_out===0?z:R):M.last_lit&&(V(M,!1),M.strm.avail_out===0)?S:L}function ie(M,me,he,J,X){this.good_length=M,this.max_lazy=me,this.nice_length=he,this.max_chain=J,this.func=X}function ve(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=C,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new c.Buf16(2*$),this.dyn_dtree=new c.Buf16(2*(2*P+1)),this.bl_tree=new c.Buf16(2*(2*B+1)),Z(this.dyn_ltree),Z(this.dyn_dtree),Z(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new c.Buf16(D+1),this.heap=new c.Buf16(2*A+1),Z(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new c.Buf16(2*A+1),Z(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function se(M){var me;return M&&M.state?(M.total_in=M.total_out=0,M.data_type=w,(me=M.state).pending=0,me.pending_out=0,me.wrap<0&&(me.wrap=-me.wrap),me.status=me.wrap?E:I,M.adler=me.wrap===2?0:1,me.last_flush=f,d._tr_init(me),b):U(M,y)}function ge(M){var me=se(M);return me===b&&(function(he){he.window_size=2*he.w_size,Z(he.head),he.max_lazy_match=l[he.level].max_lazy,he.good_match=l[he.level].good_length,he.nice_match=l[he.level].nice_length,he.max_chain_length=l[he.level].max_chain,he.strstart=0,he.block_start=0,he.lookahead=0,he.insert=0,he.match_length=he.prev_length=T-1,he.match_available=0,he.ins_h=0})(M.state),me}function Me(M,me,he,J,X,oe){if(!M)return y;var ke=1;if(me===g&&(me=6),J<0?(ke=0,J=-J):15<J&&(ke=2,J-=16),X<1||N<X||he!==C||J<8||15<J||me<0||9<me||oe<0||k<oe)return U(M,y);J===8&&(J=9);var Ne=new ve;return(M.state=Ne).strm=M,Ne.wrap=ke,Ne.gzhead=null,Ne.w_bits=J,Ne.w_size=1<<Ne.w_bits,Ne.w_mask=Ne.w_size-1,Ne.hash_bits=X+7,Ne.hash_size=1<<Ne.hash_bits,Ne.hash_mask=Ne.hash_size-1,Ne.hash_shift=~~((Ne.hash_bits+T-1)/T),Ne.window=new c.Buf8(2*Ne.w_size),Ne.head=new c.Buf16(Ne.hash_size),Ne.prev=new c.Buf16(Ne.w_size),Ne.lit_bufsize=1<<X+6,Ne.pending_buf_size=4*Ne.lit_bufsize,Ne.pending_buf=new c.Buf8(Ne.pending_buf_size),Ne.d_buf=1*Ne.lit_bufsize,Ne.l_buf=3*Ne.lit_bufsize,Ne.level=me,Ne.strategy=oe,Ne.method=he,ge(M)}l=[new ie(0,0,0,0,function(M,me){var he=65535;for(he>M.pending_buf_size-5&&(he=M.pending_buf_size-5);;){if(M.lookahead<=1){if(Q(M),M.lookahead===0&&me===f)return S;if(M.lookahead===0)break}M.strstart+=M.lookahead,M.lookahead=0;var J=M.block_start+he;if((M.strstart===0||M.strstart>=J)&&(M.lookahead=M.strstart-J,M.strstart=J,V(M,!1),M.strm.avail_out===0)||M.strstart-M.block_start>=M.w_size-K&&(V(M,!1),M.strm.avail_out===0))return S}return M.insert=0,me===x?(V(M,!0),M.strm.avail_out===0?z:R):(M.strstart>M.block_start&&(V(M,!1),M.strm.avail_out),S)}),new ie(4,4,8,4,le),new ie(4,5,16,8,le),new ie(4,6,32,32,le),new ie(4,4,16,16,ne),new ie(8,16,32,32,ne),new ie(8,16,128,128,ne),new ie(8,32,128,256,ne),new ie(32,128,258,1024,ne),new ie(32,258,258,4096,ne)],i.deflateInit=function(M,me){return Me(M,me,C,15,8,0)},i.deflateInit2=Me,i.deflateReset=ge,i.deflateResetKeep=se,i.deflateSetHeader=function(M,me){return M&&M.state?M.state.wrap!==2?y:(M.state.gzhead=me,b):y},i.deflate=function(M,me){var he,J,X,oe;if(!M||!M.state||5<me||me<0)return M?U(M,y):y;if(J=M.state,!M.output||!M.input&&M.avail_in!==0||J.status===666&&me!==x)return U(M,M.avail_out===0?-5:y);if(J.strm=M,he=J.last_flush,J.last_flush=me,J.status===E)if(J.wrap===2)M.adler=0,ee(J,31),ee(J,139),ee(J,8),J.gzhead?(ee(J,(J.gzhead.text?1:0)+(J.gzhead.hcrc?2:0)+(J.gzhead.extra?4:0)+(J.gzhead.name?8:0)+(J.gzhead.comment?16:0)),ee(J,255&J.gzhead.time),ee(J,J.gzhead.time>>8&255),ee(J,J.gzhead.time>>16&255),ee(J,J.gzhead.time>>24&255),ee(J,J.level===9?2:2<=J.strategy||J.level<2?4:0),ee(J,255&J.gzhead.os),J.gzhead.extra&&J.gzhead.extra.length&&(ee(J,255&J.gzhead.extra.length),ee(J,J.gzhead.extra.length>>8&255)),J.gzhead.hcrc&&(M.adler=m(M.adler,J.pending_buf,J.pending,0)),J.gzindex=0,J.status=69):(ee(J,0),ee(J,0),ee(J,0),ee(J,0),ee(J,0),ee(J,J.level===9?2:2<=J.strategy||J.level<2?4:0),ee(J,3),J.status=I);else{var ke=C+(J.w_bits-8<<4)<<8;ke|=(2<=J.strategy||J.level<2?0:J.level<6?1:J.level===6?2:3)<<6,J.strstart!==0&&(ke|=32),ke+=31-ke%31,J.status=I,q(J,ke),J.strstart!==0&&(q(J,M.adler>>>16),q(J,65535&M.adler)),M.adler=1}if(J.status===69)if(J.gzhead.extra){for(X=J.pending;J.gzindex<(65535&J.gzhead.extra.length)&&(J.pending!==J.pending_buf_size||(J.gzhead.hcrc&&J.pending>X&&(M.adler=m(M.adler,J.pending_buf,J.pending-X,X)),O(M),X=J.pending,J.pending!==J.pending_buf_size));)ee(J,255&J.gzhead.extra[J.gzindex]),J.gzindex++;J.gzhead.hcrc&&J.pending>X&&(M.adler=m(M.adler,J.pending_buf,J.pending-X,X)),J.gzindex===J.gzhead.extra.length&&(J.gzindex=0,J.status=73)}else J.status=73;if(J.status===73)if(J.gzhead.name){X=J.pending;do{if(J.pending===J.pending_buf_size&&(J.gzhead.hcrc&&J.pending>X&&(M.adler=m(M.adler,J.pending_buf,J.pending-X,X)),O(M),X=J.pending,J.pending===J.pending_buf_size)){oe=1;break}oe=J.gzindex<J.gzhead.name.length?255&J.gzhead.name.charCodeAt(J.gzindex++):0,ee(J,oe)}while(oe!==0);J.gzhead.hcrc&&J.pending>X&&(M.adler=m(M.adler,J.pending_buf,J.pending-X,X)),oe===0&&(J.gzindex=0,J.status=91)}else J.status=91;if(J.status===91)if(J.gzhead.comment){X=J.pending;do{if(J.pending===J.pending_buf_size&&(J.gzhead.hcrc&&J.pending>X&&(M.adler=m(M.adler,J.pending_buf,J.pending-X,X)),O(M),X=J.pending,J.pending===J.pending_buf_size)){oe=1;break}oe=J.gzindex<J.gzhead.comment.length?255&J.gzhead.comment.charCodeAt(J.gzindex++):0,ee(J,oe)}while(oe!==0);J.gzhead.hcrc&&J.pending>X&&(M.adler=m(M.adler,J.pending_buf,J.pending-X,X)),oe===0&&(J.status=103)}else J.status=103;if(J.status===103&&(J.gzhead.hcrc?(J.pending+2>J.pending_buf_size&&O(M),J.pending+2<=J.pending_buf_size&&(ee(J,255&M.adler),ee(J,M.adler>>8&255),M.adler=0,J.status=I)):J.status=I),J.pending!==0){if(O(M),M.avail_out===0)return J.last_flush=-1,b}else if(M.avail_in===0&&W(me)<=W(he)&&me!==x)return U(M,-5);if(J.status===666&&M.avail_in!==0)return U(M,-5);if(M.avail_in!==0||J.lookahead!==0||me!==f&&J.status!==666){var Ne=J.strategy===2?(function(de,fe){for(var _e;;){if(de.lookahead===0&&(Q(de),de.lookahead===0)){if(fe===f)return S;break}if(de.match_length=0,_e=d._tr_tally(de,0,de.window[de.strstart]),de.lookahead--,de.strstart++,_e&&(V(de,!1),de.strm.avail_out===0))return S}return de.insert=0,fe===x?(V(de,!0),de.strm.avail_out===0?z:R):de.last_lit&&(V(de,!1),de.strm.avail_out===0)?S:L})(J,me):J.strategy===3?(function(de,fe){for(var _e,Se,Be,ot,Ce=de.window;;){if(de.lookahead<=H){if(Q(de),de.lookahead<=H&&fe===f)return S;if(de.lookahead===0)break}if(de.match_length=0,de.lookahead>=T&&0<de.strstart&&(Se=Ce[Be=de.strstart-1])===Ce[++Be]&&Se===Ce[++Be]&&Se===Ce[++Be]){ot=de.strstart+H;do;while(Se===Ce[++Be]&&Se===Ce[++Be]&&Se===Ce[++Be]&&Se===Ce[++Be]&&Se===Ce[++Be]&&Se===Ce[++Be]&&Se===Ce[++Be]&&Se===Ce[++Be]&&Be<ot);de.match_length=H-(ot-Be),de.match_length>de.lookahead&&(de.match_length=de.lookahead)}if(de.match_length>=T?(_e=d._tr_tally(de,1,de.match_length-T),de.lookahead-=de.match_length,de.strstart+=de.match_length,de.match_length=0):(_e=d._tr_tally(de,0,de.window[de.strstart]),de.lookahead--,de.strstart++),_e&&(V(de,!1),de.strm.avail_out===0))return S}return de.insert=0,fe===x?(V(de,!0),de.strm.avail_out===0?z:R):de.last_lit&&(V(de,!1),de.strm.avail_out===0)?S:L})(J,me):l[J.level].func(J,me);if(Ne!==z&&Ne!==R||(J.status=666),Ne===S||Ne===z)return M.avail_out===0&&(J.last_flush=-1),b;if(Ne===L&&(me===1?d._tr_align(J):me!==5&&(d._tr_stored_block(J,0,0,!1),me===3&&(Z(J.head),J.lookahead===0&&(J.strstart=0,J.block_start=0,J.insert=0))),O(M),M.avail_out===0))return J.last_flush=-1,b}return me!==x?b:J.wrap<=0?1:(J.wrap===2?(ee(J,255&M.adler),ee(J,M.adler>>8&255),ee(J,M.adler>>16&255),ee(J,M.adler>>24&255),ee(J,255&M.total_in),ee(J,M.total_in>>8&255),ee(J,M.total_in>>16&255),ee(J,M.total_in>>24&255)):(q(J,M.adler>>>16),q(J,65535&M.adler)),O(M),0<J.wrap&&(J.wrap=-J.wrap),J.pending!==0?b:1)},i.deflateEnd=function(M){var me;return M&&M.state?(me=M.state.status)!==E&&me!==69&&me!==73&&me!==91&&me!==103&&me!==I&&me!==666?U(M,y):(M.state=null,me===I?U(M,-3):b):y},i.deflateSetDictionary=function(M,me){var he,J,X,oe,ke,Ne,de,fe,_e=me.length;if(!M||!M.state||(oe=(he=M.state).wrap)===2||oe===1&&he.status!==E||he.lookahead)return y;for(oe===1&&(M.adler=u(M.adler,me,_e,0)),he.wrap=0,_e>=he.w_size&&(oe===0&&(Z(he.head),he.strstart=0,he.block_start=0,he.insert=0),fe=new c.Buf8(he.w_size),c.arraySet(fe,me,_e-he.w_size,he.w_size,0),me=fe,_e=he.w_size),ke=M.avail_in,Ne=M.next_in,de=M.input,M.avail_in=_e,M.next_in=0,M.input=me,Q(he);he.lookahead>=T;){for(J=he.strstart,X=he.lookahead-(T-1);he.ins_h=(he.ins_h<<he.hash_shift^he.window[J+T-1])&he.hash_mask,he.prev[J&he.w_mask]=he.head[he.ins_h],he.head[he.ins_h]=J,J++,--X;);he.strstart=J,he.lookahead=T-1,Q(he)}return he.strstart+=he.lookahead,he.block_start=he.strstart,he.insert=he.lookahead,he.lookahead=0,he.match_length=he.prev_length=T-1,he.match_available=0,M.next_in=Ne,M.input=de,M.avail_in=ke,he.wrap=oe,b},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(s,a,i){a.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(s,a,i){a.exports=function(l,c){var d,u,m,p,f,x,b,y,g,k,w,C,N,A,P,B,$,D,T,H,K,E,I,S,L;d=l.state,u=l.next_in,S=l.input,m=u+(l.avail_in-5),p=l.next_out,L=l.output,f=p-(c-l.avail_out),x=p+(l.avail_out-257),b=d.dmax,y=d.wsize,g=d.whave,k=d.wnext,w=d.window,C=d.hold,N=d.bits,A=d.lencode,P=d.distcode,B=(1<<d.lenbits)-1,$=(1<<d.distbits)-1;e:do{N<15&&(C+=S[u++]<<N,N+=8,C+=S[u++]<<N,N+=8),D=A[C&B];t:for(;;){if(C>>>=T=D>>>24,N-=T,(T=D>>>16&255)===0)L[p++]=65535&D;else{if(!(16&T)){if((64&T)==0){D=A[(65535&D)+(C&(1<<T)-1)];continue t}if(32&T){d.mode=12;break e}l.msg="invalid literal/length code",d.mode=30;break e}H=65535&D,(T&=15)&&(N<T&&(C+=S[u++]<<N,N+=8),H+=C&(1<<T)-1,C>>>=T,N-=T),N<15&&(C+=S[u++]<<N,N+=8,C+=S[u++]<<N,N+=8),D=P[C&$];n:for(;;){if(C>>>=T=D>>>24,N-=T,!(16&(T=D>>>16&255))){if((64&T)==0){D=P[(65535&D)+(C&(1<<T)-1)];continue n}l.msg="invalid distance code",d.mode=30;break e}if(K=65535&D,N<(T&=15)&&(C+=S[u++]<<N,(N+=8)<T&&(C+=S[u++]<<N,N+=8)),b<(K+=C&(1<<T)-1)){l.msg="invalid distance too far back",d.mode=30;break e}if(C>>>=T,N-=T,(T=p-f)<K){if(g<(T=K-T)&&d.sane){l.msg="invalid distance too far back",d.mode=30;break e}if(I=w,(E=0)===k){if(E+=y-T,T<H){for(H-=T;L[p++]=w[E++],--T;);E=p-K,I=L}}else if(k<T){if(E+=y+k-T,(T-=k)<H){for(H-=T;L[p++]=w[E++],--T;);if(E=0,k<H){for(H-=T=k;L[p++]=w[E++],--T;);E=p-K,I=L}}}else if(E+=k-T,T<H){for(H-=T;L[p++]=w[E++],--T;);E=p-K,I=L}for(;2<H;)L[p++]=I[E++],L[p++]=I[E++],L[p++]=I[E++],H-=3;H&&(L[p++]=I[E++],1<H&&(L[p++]=I[E++]))}else{for(E=p-K;L[p++]=L[E++],L[p++]=L[E++],L[p++]=L[E++],2<(H-=3););H&&(L[p++]=L[E++],1<H&&(L[p++]=L[E++]))}break}}break}}while(u<m&&p<x);u-=H=N>>3,C&=(1<<(N-=H<<3))-1,l.next_in=u,l.next_out=p,l.avail_in=u<m?m-u+5:5-(u-m),l.avail_out=p<x?x-p+257:257-(p-x),d.hold=C,d.bits=N}},{}],49:[function(s,a,i){var l=s("../utils/common"),c=s("./adler32"),d=s("./crc32"),u=s("./inffast"),m=s("./inftrees"),p=1,f=2,x=0,b=-2,y=1,g=852,k=592;function w(E){return(E>>>24&255)+(E>>>8&65280)+((65280&E)<<8)+((255&E)<<24)}function C(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new l.Buf16(320),this.work=new l.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function N(E){var I;return E&&E.state?(I=E.state,E.total_in=E.total_out=I.total=0,E.msg="",I.wrap&&(E.adler=1&I.wrap),I.mode=y,I.last=0,I.havedict=0,I.dmax=32768,I.head=null,I.hold=0,I.bits=0,I.lencode=I.lendyn=new l.Buf32(g),I.distcode=I.distdyn=new l.Buf32(k),I.sane=1,I.back=-1,x):b}function A(E){var I;return E&&E.state?((I=E.state).wsize=0,I.whave=0,I.wnext=0,N(E)):b}function P(E,I){var S,L;return E&&E.state?(L=E.state,I<0?(S=0,I=-I):(S=1+(I>>4),I<48&&(I&=15)),I&&(I<8||15<I)?b:(L.window!==null&&L.wbits!==I&&(L.window=null),L.wrap=S,L.wbits=I,A(E))):b}function B(E,I){var S,L;return E?(L=new C,(E.state=L).window=null,(S=P(E,I))!==x&&(E.state=null),S):b}var $,D,T=!0;function H(E){if(T){var I;for($=new l.Buf32(512),D=new l.Buf32(32),I=0;I<144;)E.lens[I++]=8;for(;I<256;)E.lens[I++]=9;for(;I<280;)E.lens[I++]=7;for(;I<288;)E.lens[I++]=8;for(m(p,E.lens,0,288,$,0,E.work,{bits:9}),I=0;I<32;)E.lens[I++]=5;m(f,E.lens,0,32,D,0,E.work,{bits:5}),T=!1}E.lencode=$,E.lenbits=9,E.distcode=D,E.distbits=5}function K(E,I,S,L){var z,R=E.state;return R.window===null&&(R.wsize=1<<R.wbits,R.wnext=0,R.whave=0,R.window=new l.Buf8(R.wsize)),L>=R.wsize?(l.arraySet(R.window,I,S-R.wsize,R.wsize,0),R.wnext=0,R.whave=R.wsize):(L<(z=R.wsize-R.wnext)&&(z=L),l.arraySet(R.window,I,S-L,z,R.wnext),(L-=z)?(l.arraySet(R.window,I,S-L,L,0),R.wnext=L,R.whave=R.wsize):(R.wnext+=z,R.wnext===R.wsize&&(R.wnext=0),R.whave<R.wsize&&(R.whave+=z))),0}i.inflateReset=A,i.inflateReset2=P,i.inflateResetKeep=N,i.inflateInit=function(E){return B(E,15)},i.inflateInit2=B,i.inflate=function(E,I){var S,L,z,R,U,W,Z,O,V,ee,q,G,Q,le,ne,ie,ve,se,ge,Me,M,me,he,J,X=0,oe=new l.Buf8(4),ke=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!E||!E.state||!E.output||!E.input&&E.avail_in!==0)return b;(S=E.state).mode===12&&(S.mode=13),U=E.next_out,z=E.output,Z=E.avail_out,R=E.next_in,L=E.input,W=E.avail_in,O=S.hold,V=S.bits,ee=W,q=Z,me=x;e:for(;;)switch(S.mode){case y:if(S.wrap===0){S.mode=13;break}for(;V<16;){if(W===0)break e;W--,O+=L[R++]<<V,V+=8}if(2&S.wrap&&O===35615){oe[S.check=0]=255&O,oe[1]=O>>>8&255,S.check=d(S.check,oe,2,0),V=O=0,S.mode=2;break}if(S.flags=0,S.head&&(S.head.done=!1),!(1&S.wrap)||(((255&O)<<8)+(O>>8))%31){E.msg="incorrect header check",S.mode=30;break}if((15&O)!=8){E.msg="unknown compression method",S.mode=30;break}if(V-=4,M=8+(15&(O>>>=4)),S.wbits===0)S.wbits=M;else if(M>S.wbits){E.msg="invalid window size",S.mode=30;break}S.dmax=1<<M,E.adler=S.check=1,S.mode=512&O?10:12,V=O=0;break;case 2:for(;V<16;){if(W===0)break e;W--,O+=L[R++]<<V,V+=8}if(S.flags=O,(255&S.flags)!=8){E.msg="unknown compression method",S.mode=30;break}if(57344&S.flags){E.msg="unknown header flags set",S.mode=30;break}S.head&&(S.head.text=O>>8&1),512&S.flags&&(oe[0]=255&O,oe[1]=O>>>8&255,S.check=d(S.check,oe,2,0)),V=O=0,S.mode=3;case 3:for(;V<32;){if(W===0)break e;W--,O+=L[R++]<<V,V+=8}S.head&&(S.head.time=O),512&S.flags&&(oe[0]=255&O,oe[1]=O>>>8&255,oe[2]=O>>>16&255,oe[3]=O>>>24&255,S.check=d(S.check,oe,4,0)),V=O=0,S.mode=4;case 4:for(;V<16;){if(W===0)break e;W--,O+=L[R++]<<V,V+=8}S.head&&(S.head.xflags=255&O,S.head.os=O>>8),512&S.flags&&(oe[0]=255&O,oe[1]=O>>>8&255,S.check=d(S.check,oe,2,0)),V=O=0,S.mode=5;case 5:if(1024&S.flags){for(;V<16;){if(W===0)break e;W--,O+=L[R++]<<V,V+=8}S.length=O,S.head&&(S.head.extra_len=O),512&S.flags&&(oe[0]=255&O,oe[1]=O>>>8&255,S.check=d(S.check,oe,2,0)),V=O=0}else S.head&&(S.head.extra=null);S.mode=6;case 6:if(1024&S.flags&&(W<(G=S.length)&&(G=W),G&&(S.head&&(M=S.head.extra_len-S.length,S.head.extra||(S.head.extra=new Array(S.head.extra_len)),l.arraySet(S.head.extra,L,R,G,M)),512&S.flags&&(S.check=d(S.check,L,G,R)),W-=G,R+=G,S.length-=G),S.length))break e;S.length=0,S.mode=7;case 7:if(2048&S.flags){if(W===0)break e;for(G=0;M=L[R+G++],S.head&&M&&S.length<65536&&(S.head.name+=String.fromCharCode(M)),M&&G<W;);if(512&S.flags&&(S.check=d(S.check,L,G,R)),W-=G,R+=G,M)break e}else S.head&&(S.head.name=null);S.length=0,S.mode=8;case 8:if(4096&S.flags){if(W===0)break e;for(G=0;M=L[R+G++],S.head&&M&&S.length<65536&&(S.head.comment+=String.fromCharCode(M)),M&&G<W;);if(512&S.flags&&(S.check=d(S.check,L,G,R)),W-=G,R+=G,M)break e}else S.head&&(S.head.comment=null);S.mode=9;case 9:if(512&S.flags){for(;V<16;){if(W===0)break e;W--,O+=L[R++]<<V,V+=8}if(O!==(65535&S.check)){E.msg="header crc mismatch",S.mode=30;break}V=O=0}S.head&&(S.head.hcrc=S.flags>>9&1,S.head.done=!0),E.adler=S.check=0,S.mode=12;break;case 10:for(;V<32;){if(W===0)break e;W--,O+=L[R++]<<V,V+=8}E.adler=S.check=w(O),V=O=0,S.mode=11;case 11:if(S.havedict===0)return E.next_out=U,E.avail_out=Z,E.next_in=R,E.avail_in=W,S.hold=O,S.bits=V,2;E.adler=S.check=1,S.mode=12;case 12:if(I===5||I===6)break e;case 13:if(S.last){O>>>=7&V,V-=7&V,S.mode=27;break}for(;V<3;){if(W===0)break e;W--,O+=L[R++]<<V,V+=8}switch(S.last=1&O,V-=1,3&(O>>>=1)){case 0:S.mode=14;break;case 1:if(H(S),S.mode=20,I!==6)break;O>>>=2,V-=2;break e;case 2:S.mode=17;break;case 3:E.msg="invalid block type",S.mode=30}O>>>=2,V-=2;break;case 14:for(O>>>=7&V,V-=7&V;V<32;){if(W===0)break e;W--,O+=L[R++]<<V,V+=8}if((65535&O)!=(O>>>16^65535)){E.msg="invalid stored block lengths",S.mode=30;break}if(S.length=65535&O,V=O=0,S.mode=15,I===6)break e;case 15:S.mode=16;case 16:if(G=S.length){if(W<G&&(G=W),Z<G&&(G=Z),G===0)break e;l.arraySet(z,L,R,G,U),W-=G,R+=G,Z-=G,U+=G,S.length-=G;break}S.mode=12;break;case 17:for(;V<14;){if(W===0)break e;W--,O+=L[R++]<<V,V+=8}if(S.nlen=257+(31&O),O>>>=5,V-=5,S.ndist=1+(31&O),O>>>=5,V-=5,S.ncode=4+(15&O),O>>>=4,V-=4,286<S.nlen||30<S.ndist){E.msg="too many length or distance symbols",S.mode=30;break}S.have=0,S.mode=18;case 18:for(;S.have<S.ncode;){for(;V<3;){if(W===0)break e;W--,O+=L[R++]<<V,V+=8}S.lens[ke[S.have++]]=7&O,O>>>=3,V-=3}for(;S.have<19;)S.lens[ke[S.have++]]=0;if(S.lencode=S.lendyn,S.lenbits=7,he={bits:S.lenbits},me=m(0,S.lens,0,19,S.lencode,0,S.work,he),S.lenbits=he.bits,me){E.msg="invalid code lengths set",S.mode=30;break}S.have=0,S.mode=19;case 19:for(;S.have<S.nlen+S.ndist;){for(;ie=(X=S.lencode[O&(1<<S.lenbits)-1])>>>16&255,ve=65535&X,!((ne=X>>>24)<=V);){if(W===0)break e;W--,O+=L[R++]<<V,V+=8}if(ve<16)O>>>=ne,V-=ne,S.lens[S.have++]=ve;else{if(ve===16){for(J=ne+2;V<J;){if(W===0)break e;W--,O+=L[R++]<<V,V+=8}if(O>>>=ne,V-=ne,S.have===0){E.msg="invalid bit length repeat",S.mode=30;break}M=S.lens[S.have-1],G=3+(3&O),O>>>=2,V-=2}else if(ve===17){for(J=ne+3;V<J;){if(W===0)break e;W--,O+=L[R++]<<V,V+=8}V-=ne,M=0,G=3+(7&(O>>>=ne)),O>>>=3,V-=3}else{for(J=ne+7;V<J;){if(W===0)break e;W--,O+=L[R++]<<V,V+=8}V-=ne,M=0,G=11+(127&(O>>>=ne)),O>>>=7,V-=7}if(S.have+G>S.nlen+S.ndist){E.msg="invalid bit length repeat",S.mode=30;break}for(;G--;)S.lens[S.have++]=M}}if(S.mode===30)break;if(S.lens[256]===0){E.msg="invalid code -- missing end-of-block",S.mode=30;break}if(S.lenbits=9,he={bits:S.lenbits},me=m(p,S.lens,0,S.nlen,S.lencode,0,S.work,he),S.lenbits=he.bits,me){E.msg="invalid literal/lengths set",S.mode=30;break}if(S.distbits=6,S.distcode=S.distdyn,he={bits:S.distbits},me=m(f,S.lens,S.nlen,S.ndist,S.distcode,0,S.work,he),S.distbits=he.bits,me){E.msg="invalid distances set",S.mode=30;break}if(S.mode=20,I===6)break e;case 20:S.mode=21;case 21:if(6<=W&&258<=Z){E.next_out=U,E.avail_out=Z,E.next_in=R,E.avail_in=W,S.hold=O,S.bits=V,u(E,q),U=E.next_out,z=E.output,Z=E.avail_out,R=E.next_in,L=E.input,W=E.avail_in,O=S.hold,V=S.bits,S.mode===12&&(S.back=-1);break}for(S.back=0;ie=(X=S.lencode[O&(1<<S.lenbits)-1])>>>16&255,ve=65535&X,!((ne=X>>>24)<=V);){if(W===0)break e;W--,O+=L[R++]<<V,V+=8}if(ie&&(240&ie)==0){for(se=ne,ge=ie,Me=ve;ie=(X=S.lencode[Me+((O&(1<<se+ge)-1)>>se)])>>>16&255,ve=65535&X,!(se+(ne=X>>>24)<=V);){if(W===0)break e;W--,O+=L[R++]<<V,V+=8}O>>>=se,V-=se,S.back+=se}if(O>>>=ne,V-=ne,S.back+=ne,S.length=ve,ie===0){S.mode=26;break}if(32&ie){S.back=-1,S.mode=12;break}if(64&ie){E.msg="invalid literal/length code",S.mode=30;break}S.extra=15&ie,S.mode=22;case 22:if(S.extra){for(J=S.extra;V<J;){if(W===0)break e;W--,O+=L[R++]<<V,V+=8}S.length+=O&(1<<S.extra)-1,O>>>=S.extra,V-=S.extra,S.back+=S.extra}S.was=S.length,S.mode=23;case 23:for(;ie=(X=S.distcode[O&(1<<S.distbits)-1])>>>16&255,ve=65535&X,!((ne=X>>>24)<=V);){if(W===0)break e;W--,O+=L[R++]<<V,V+=8}if((240&ie)==0){for(se=ne,ge=ie,Me=ve;ie=(X=S.distcode[Me+((O&(1<<se+ge)-1)>>se)])>>>16&255,ve=65535&X,!(se+(ne=X>>>24)<=V);){if(W===0)break e;W--,O+=L[R++]<<V,V+=8}O>>>=se,V-=se,S.back+=se}if(O>>>=ne,V-=ne,S.back+=ne,64&ie){E.msg="invalid distance code",S.mode=30;break}S.offset=ve,S.extra=15&ie,S.mode=24;case 24:if(S.extra){for(J=S.extra;V<J;){if(W===0)break e;W--,O+=L[R++]<<V,V+=8}S.offset+=O&(1<<S.extra)-1,O>>>=S.extra,V-=S.extra,S.back+=S.extra}if(S.offset>S.dmax){E.msg="invalid distance too far back",S.mode=30;break}S.mode=25;case 25:if(Z===0)break e;if(G=q-Z,S.offset>G){if((G=S.offset-G)>S.whave&&S.sane){E.msg="invalid distance too far back",S.mode=30;break}Q=G>S.wnext?(G-=S.wnext,S.wsize-G):S.wnext-G,G>S.length&&(G=S.length),le=S.window}else le=z,Q=U-S.offset,G=S.length;for(Z<G&&(G=Z),Z-=G,S.length-=G;z[U++]=le[Q++],--G;);S.length===0&&(S.mode=21);break;case 26:if(Z===0)break e;z[U++]=S.length,Z--,S.mode=21;break;case 27:if(S.wrap){for(;V<32;){if(W===0)break e;W--,O|=L[R++]<<V,V+=8}if(q-=Z,E.total_out+=q,S.total+=q,q&&(E.adler=S.check=S.flags?d(S.check,z,q,U-q):c(S.check,z,q,U-q)),q=Z,(S.flags?O:w(O))!==S.check){E.msg="incorrect data check",S.mode=30;break}V=O=0}S.mode=28;case 28:if(S.wrap&&S.flags){for(;V<32;){if(W===0)break e;W--,O+=L[R++]<<V,V+=8}if(O!==(4294967295&S.total)){E.msg="incorrect length check",S.mode=30;break}V=O=0}S.mode=29;case 29:me=1;break e;case 30:me=-3;break e;case 31:return-4;case 32:default:return b}return E.next_out=U,E.avail_out=Z,E.next_in=R,E.avail_in=W,S.hold=O,S.bits=V,(S.wsize||q!==E.avail_out&&S.mode<30&&(S.mode<27||I!==4))&&K(E,E.output,E.next_out,q-E.avail_out)?(S.mode=31,-4):(ee-=E.avail_in,q-=E.avail_out,E.total_in+=ee,E.total_out+=q,S.total+=q,S.wrap&&q&&(E.adler=S.check=S.flags?d(S.check,z,q,E.next_out-q):c(S.check,z,q,E.next_out-q)),E.data_type=S.bits+(S.last?64:0)+(S.mode===12?128:0)+(S.mode===20||S.mode===15?256:0),(ee==0&&q===0||I===4)&&me===x&&(me=-5),me)},i.inflateEnd=function(E){if(!E||!E.state)return b;var I=E.state;return I.window&&(I.window=null),E.state=null,x},i.inflateGetHeader=function(E,I){var S;return E&&E.state?(2&(S=E.state).wrap)==0?b:((S.head=I).done=!1,x):b},i.inflateSetDictionary=function(E,I){var S,L=I.length;return E&&E.state?(S=E.state).wrap!==0&&S.mode!==11?b:S.mode===11&&c(1,I,L,0)!==S.check?-3:K(E,I,L,L)?(S.mode=31,-4):(S.havedict=1,x):b},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(s,a,i){var l=s("../utils/common"),c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];a.exports=function(p,f,x,b,y,g,k,w){var C,N,A,P,B,$,D,T,H,K=w.bits,E=0,I=0,S=0,L=0,z=0,R=0,U=0,W=0,Z=0,O=0,V=null,ee=0,q=new l.Buf16(16),G=new l.Buf16(16),Q=null,le=0;for(E=0;E<=15;E++)q[E]=0;for(I=0;I<b;I++)q[f[x+I]]++;for(z=K,L=15;1<=L&&q[L]===0;L--);if(L<z&&(z=L),L===0)return y[g++]=20971520,y[g++]=20971520,w.bits=1,0;for(S=1;S<L&&q[S]===0;S++);for(z<S&&(z=S),E=W=1;E<=15;E++)if(W<<=1,(W-=q[E])<0)return-1;if(0<W&&(p===0||L!==1))return-1;for(G[1]=0,E=1;E<15;E++)G[E+1]=G[E]+q[E];for(I=0;I<b;I++)f[x+I]!==0&&(k[G[f[x+I]]++]=I);if($=p===0?(V=Q=k,19):p===1?(V=c,ee-=257,Q=d,le-=257,256):(V=u,Q=m,-1),E=S,B=g,U=I=O=0,A=-1,P=(Z=1<<(R=z))-1,p===1&&852<Z||p===2&&592<Z)return 1;for(;;){for(D=E-U,H=k[I]<$?(T=0,k[I]):k[I]>$?(T=Q[le+k[I]],V[ee+k[I]]):(T=96,0),C=1<<E-U,S=N=1<<R;y[B+(O>>U)+(N-=C)]=D<<24|T<<16|H|0,N!==0;);for(C=1<<E-1;O&C;)C>>=1;if(C!==0?(O&=C-1,O+=C):O=0,I++,--q[E]==0){if(E===L)break;E=f[x+k[I]]}if(z<E&&(O&P)!==A){for(U===0&&(U=z),B+=S,W=1<<(R=E-U);R+U<L&&!((W-=q[R+U])<=0);)R++,W<<=1;if(Z+=1<<R,p===1&&852<Z||p===2&&592<Z)return 1;y[A=O&P]=z<<24|R<<16|B-g|0}}return O!==0&&(y[B+O]=E-U<<24|64<<16|0),w.bits=z,0}},{"../utils/common":41}],51:[function(s,a,i){a.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(s,a,i){var l=s("../utils/common"),c=0,d=1;function u(X){for(var oe=X.length;0<=--oe;)X[oe]=0}var m=0,p=29,f=256,x=f+1+p,b=30,y=19,g=2*x+1,k=15,w=16,C=7,N=256,A=16,P=17,B=18,$=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],D=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],K=new Array(2*(x+2));u(K);var E=new Array(2*b);u(E);var I=new Array(512);u(I);var S=new Array(256);u(S);var L=new Array(p);u(L);var z,R,U,W=new Array(b);function Z(X,oe,ke,Ne,de){this.static_tree=X,this.extra_bits=oe,this.extra_base=ke,this.elems=Ne,this.max_length=de,this.has_stree=X&&X.length}function O(X,oe){this.dyn_tree=X,this.max_code=0,this.stat_desc=oe}function V(X){return X<256?I[X]:I[256+(X>>>7)]}function ee(X,oe){X.pending_buf[X.pending++]=255&oe,X.pending_buf[X.pending++]=oe>>>8&255}function q(X,oe,ke){X.bi_valid>w-ke?(X.bi_buf|=oe<<X.bi_valid&65535,ee(X,X.bi_buf),X.bi_buf=oe>>w-X.bi_valid,X.bi_valid+=ke-w):(X.bi_buf|=oe<<X.bi_valid&65535,X.bi_valid+=ke)}function G(X,oe,ke){q(X,ke[2*oe],ke[2*oe+1])}function Q(X,oe){for(var ke=0;ke|=1&X,X>>>=1,ke<<=1,0<--oe;);return ke>>>1}function le(X,oe,ke){var Ne,de,fe=new Array(k+1),_e=0;for(Ne=1;Ne<=k;Ne++)fe[Ne]=_e=_e+ke[Ne-1]<<1;for(de=0;de<=oe;de++){var Se=X[2*de+1];Se!==0&&(X[2*de]=Q(fe[Se]++,Se))}}function ne(X){var oe;for(oe=0;oe<x;oe++)X.dyn_ltree[2*oe]=0;for(oe=0;oe<b;oe++)X.dyn_dtree[2*oe]=0;for(oe=0;oe<y;oe++)X.bl_tree[2*oe]=0;X.dyn_ltree[2*N]=1,X.opt_len=X.static_len=0,X.last_lit=X.matches=0}function ie(X){8<X.bi_valid?ee(X,X.bi_buf):0<X.bi_valid&&(X.pending_buf[X.pending++]=X.bi_buf),X.bi_buf=0,X.bi_valid=0}function ve(X,oe,ke,Ne){var de=2*oe,fe=2*ke;return X[de]<X[fe]||X[de]===X[fe]&&Ne[oe]<=Ne[ke]}function se(X,oe,ke){for(var Ne=X.heap[ke],de=ke<<1;de<=X.heap_len&&(de<X.heap_len&&ve(oe,X.heap[de+1],X.heap[de],X.depth)&&de++,!ve(oe,Ne,X.heap[de],X.depth));)X.heap[ke]=X.heap[de],ke=de,de<<=1;X.heap[ke]=Ne}function ge(X,oe,ke){var Ne,de,fe,_e,Se=0;if(X.last_lit!==0)for(;Ne=X.pending_buf[X.d_buf+2*Se]<<8|X.pending_buf[X.d_buf+2*Se+1],de=X.pending_buf[X.l_buf+Se],Se++,Ne===0?G(X,de,oe):(G(X,(fe=S[de])+f+1,oe),(_e=$[fe])!==0&&q(X,de-=L[fe],_e),G(X,fe=V(--Ne),ke),(_e=D[fe])!==0&&q(X,Ne-=W[fe],_e)),Se<X.last_lit;);G(X,N,oe)}function Me(X,oe){var ke,Ne,de,fe=oe.dyn_tree,_e=oe.stat_desc.static_tree,Se=oe.stat_desc.has_stree,Be=oe.stat_desc.elems,ot=-1;for(X.heap_len=0,X.heap_max=g,ke=0;ke<Be;ke++)fe[2*ke]!==0?(X.heap[++X.heap_len]=ot=ke,X.depth[ke]=0):fe[2*ke+1]=0;for(;X.heap_len<2;)fe[2*(de=X.heap[++X.heap_len]=ot<2?++ot:0)]=1,X.depth[de]=0,X.opt_len--,Se&&(X.static_len-=_e[2*de+1]);for(oe.max_code=ot,ke=X.heap_len>>1;1<=ke;ke--)se(X,fe,ke);for(de=Be;ke=X.heap[1],X.heap[1]=X.heap[X.heap_len--],se(X,fe,1),Ne=X.heap[1],X.heap[--X.heap_max]=ke,X.heap[--X.heap_max]=Ne,fe[2*de]=fe[2*ke]+fe[2*Ne],X.depth[de]=(X.depth[ke]>=X.depth[Ne]?X.depth[ke]:X.depth[Ne])+1,fe[2*ke+1]=fe[2*Ne+1]=de,X.heap[1]=de++,se(X,fe,1),2<=X.heap_len;);X.heap[--X.heap_max]=X.heap[1],(function(Ce,Ue){var Ze,et,ut,tt,Mt,Ct,_t=Ue.dyn_tree,Fn=Ue.max_code,on=Ue.stat_desc.static_tree,Zt=Ue.stat_desc.has_stree,Mn=Ue.stat_desc.extra_bits,pn=Ue.stat_desc.extra_base,St=Ue.stat_desc.max_length,Qt=0;for(tt=0;tt<=k;tt++)Ce.bl_count[tt]=0;for(_t[2*Ce.heap[Ce.heap_max]+1]=0,Ze=Ce.heap_max+1;Ze<g;Ze++)St<(tt=_t[2*_t[2*(et=Ce.heap[Ze])+1]+1]+1)&&(tt=St,Qt++),_t[2*et+1]=tt,Fn<et||(Ce.bl_count[tt]++,Mt=0,pn<=et&&(Mt=Mn[et-pn]),Ct=_t[2*et],Ce.opt_len+=Ct*(tt+Mt),Zt&&(Ce.static_len+=Ct*(on[2*et+1]+Mt)));if(Qt!==0){do{for(tt=St-1;Ce.bl_count[tt]===0;)tt--;Ce.bl_count[tt]--,Ce.bl_count[tt+1]+=2,Ce.bl_count[St]--,Qt-=2}while(0<Qt);for(tt=St;tt!==0;tt--)for(et=Ce.bl_count[tt];et!==0;)Fn<(ut=Ce.heap[--Ze])||(_t[2*ut+1]!==tt&&(Ce.opt_len+=(tt-_t[2*ut+1])*_t[2*ut],_t[2*ut+1]=tt),et--)}})(X,oe),le(fe,ot,X.bl_count)}function M(X,oe,ke){var Ne,de,fe=-1,_e=oe[1],Se=0,Be=7,ot=4;for(_e===0&&(Be=138,ot=3),oe[2*(ke+1)+1]=65535,Ne=0;Ne<=ke;Ne++)de=_e,_e=oe[2*(Ne+1)+1],++Se<Be&&de===_e||(Se<ot?X.bl_tree[2*de]+=Se:de!==0?(de!==fe&&X.bl_tree[2*de]++,X.bl_tree[2*A]++):Se<=10?X.bl_tree[2*P]++:X.bl_tree[2*B]++,fe=de,ot=(Se=0)===_e?(Be=138,3):de===_e?(Be=6,3):(Be=7,4))}function me(X,oe,ke){var Ne,de,fe=-1,_e=oe[1],Se=0,Be=7,ot=4;for(_e===0&&(Be=138,ot=3),Ne=0;Ne<=ke;Ne++)if(de=_e,_e=oe[2*(Ne+1)+1],!(++Se<Be&&de===_e)){if(Se<ot)for(;G(X,de,X.bl_tree),--Se!=0;);else de!==0?(de!==fe&&(G(X,de,X.bl_tree),Se--),G(X,A,X.bl_tree),q(X,Se-3,2)):Se<=10?(G(X,P,X.bl_tree),q(X,Se-3,3)):(G(X,B,X.bl_tree),q(X,Se-11,7));fe=de,ot=(Se=0)===_e?(Be=138,3):de===_e?(Be=6,3):(Be=7,4)}}u(W);var he=!1;function J(X,oe,ke,Ne){q(X,(m<<1)+(Ne?1:0),3),(function(de,fe,_e,Se){ie(de),ee(de,_e),ee(de,~_e),l.arraySet(de.pending_buf,de.window,fe,_e,de.pending),de.pending+=_e})(X,oe,ke)}i._tr_init=function(X){he||((function(){var oe,ke,Ne,de,fe,_e=new Array(k+1);for(de=Ne=0;de<p-1;de++)for(L[de]=Ne,oe=0;oe<1<<$[de];oe++)S[Ne++]=de;for(S[Ne-1]=de,de=fe=0;de<16;de++)for(W[de]=fe,oe=0;oe<1<<D[de];oe++)I[fe++]=de;for(fe>>=7;de<b;de++)for(W[de]=fe<<7,oe=0;oe<1<<D[de]-7;oe++)I[256+fe++]=de;for(ke=0;ke<=k;ke++)_e[ke]=0;for(oe=0;oe<=143;)K[2*oe+1]=8,oe++,_e[8]++;for(;oe<=255;)K[2*oe+1]=9,oe++,_e[9]++;for(;oe<=279;)K[2*oe+1]=7,oe++,_e[7]++;for(;oe<=287;)K[2*oe+1]=8,oe++,_e[8]++;for(le(K,x+1,_e),oe=0;oe<b;oe++)E[2*oe+1]=5,E[2*oe]=Q(oe,5);z=new Z(K,$,f+1,x,k),R=new Z(E,D,0,b,k),U=new Z(new Array(0),T,0,y,C)})(),he=!0),X.l_desc=new O(X.dyn_ltree,z),X.d_desc=new O(X.dyn_dtree,R),X.bl_desc=new O(X.bl_tree,U),X.bi_buf=0,X.bi_valid=0,ne(X)},i._tr_stored_block=J,i._tr_flush_block=function(X,oe,ke,Ne){var de,fe,_e=0;0<X.level?(X.strm.data_type===2&&(X.strm.data_type=(function(Se){var Be,ot=4093624447;for(Be=0;Be<=31;Be++,ot>>>=1)if(1&ot&&Se.dyn_ltree[2*Be]!==0)return c;if(Se.dyn_ltree[18]!==0||Se.dyn_ltree[20]!==0||Se.dyn_ltree[26]!==0)return d;for(Be=32;Be<f;Be++)if(Se.dyn_ltree[2*Be]!==0)return d;return c})(X)),Me(X,X.l_desc),Me(X,X.d_desc),_e=(function(Se){var Be;for(M(Se,Se.dyn_ltree,Se.l_desc.max_code),M(Se,Se.dyn_dtree,Se.d_desc.max_code),Me(Se,Se.bl_desc),Be=y-1;3<=Be&&Se.bl_tree[2*H[Be]+1]===0;Be--);return Se.opt_len+=3*(Be+1)+5+5+4,Be})(X),de=X.opt_len+3+7>>>3,(fe=X.static_len+3+7>>>3)<=de&&(de=fe)):de=fe=ke+5,ke+4<=de&&oe!==-1?J(X,oe,ke,Ne):X.strategy===4||fe===de?(q(X,2+(Ne?1:0),3),ge(X,K,E)):(q(X,4+(Ne?1:0),3),(function(Se,Be,ot,Ce){var Ue;for(q(Se,Be-257,5),q(Se,ot-1,5),q(Se,Ce-4,4),Ue=0;Ue<Ce;Ue++)q(Se,Se.bl_tree[2*H[Ue]+1],3);me(Se,Se.dyn_ltree,Be-1),me(Se,Se.dyn_dtree,ot-1)})(X,X.l_desc.max_code+1,X.d_desc.max_code+1,_e+1),ge(X,X.dyn_ltree,X.dyn_dtree)),ne(X),Ne&&ie(X)},i._tr_tally=function(X,oe,ke){return X.pending_buf[X.d_buf+2*X.last_lit]=oe>>>8&255,X.pending_buf[X.d_buf+2*X.last_lit+1]=255&oe,X.pending_buf[X.l_buf+X.last_lit]=255&ke,X.last_lit++,oe===0?X.dyn_ltree[2*ke]++:(X.matches++,oe--,X.dyn_ltree[2*(S[ke]+f+1)]++,X.dyn_dtree[2*V(oe)]++),X.last_lit===X.lit_bufsize-1},i._tr_align=function(X){q(X,2,3),G(X,N,K),(function(oe){oe.bi_valid===16?(ee(oe,oe.bi_buf),oe.bi_buf=0,oe.bi_valid=0):8<=oe.bi_valid&&(oe.pending_buf[oe.pending++]=255&oe.bi_buf,oe.bi_buf>>=8,oe.bi_valid-=8)})(X)}},{"../utils/common":41}],53:[function(s,a,i){a.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(s,a,i){(function(l){(function(c,d){if(!c.setImmediate){var u,m,p,f,x=1,b={},y=!1,g=c.document,k=Object.getPrototypeOf&&Object.getPrototypeOf(c);k=k&&k.setTimeout?k:c,u={}.toString.call(c.process)==="[object process]"?function(A){process.nextTick(function(){C(A)})}:(function(){if(c.postMessage&&!c.importScripts){var A=!0,P=c.onmessage;return c.onmessage=function(){A=!1},c.postMessage("","*"),c.onmessage=P,A}})()?(f="setImmediate$"+Math.random()+"$",c.addEventListener?c.addEventListener("message",N,!1):c.attachEvent("onmessage",N),function(A){c.postMessage(f+A,"*")}):c.MessageChannel?((p=new MessageChannel).port1.onmessage=function(A){C(A.data)},function(A){p.port2.postMessage(A)}):g&&"onreadystatechange"in g.createElement("script")?(m=g.documentElement,function(A){var P=g.createElement("script");P.onreadystatechange=function(){C(A),P.onreadystatechange=null,m.removeChild(P),P=null},m.appendChild(P)}):function(A){setTimeout(C,0,A)},k.setImmediate=function(A){typeof A!="function"&&(A=new Function(""+A));for(var P=new Array(arguments.length-1),B=0;B<P.length;B++)P[B]=arguments[B+1];var $={callback:A,args:P};return b[x]=$,u(x),x++},k.clearImmediate=w}function w(A){delete b[A]}function C(A){if(y)setTimeout(C,0,A);else{var P=b[A];if(P){y=!0;try{(function(B){var $=B.callback,D=B.args;switch(D.length){case 0:$();break;case 1:$(D[0]);break;case 2:$(D[0],D[1]);break;case 3:$(D[0],D[1],D[2]);break;default:$.apply(d,D)}})(P)}finally{w(A),y=!1}}}}function N(A){A.source===c&&typeof A.data=="string"&&A.data.indexOf(f)===0&&C(+A.data.slice(f.length))}})(typeof self>"u"?l===void 0?this:l:self)}).call(this,typeof Wl<"u"?Wl:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(gf)),gf.exports}var XA=QA();const Vg=$c(XA);function JA({onBack:e}){const[n,s]=j.useState(!1),[a,i]=j.useState(!1),[l,c]=j.useState(!1),[d,u]=j.useState(!1),[m,p]=j.useState(!1),[f,x]=j.useState(!1),[b,y]=j.useState(!1),[g,k]=j.useState(!1),[w,C]=j.useState({totalSize:0,userDataSize:0,chatMessagesSize:0,characterDataSize:0,memoriesSize:0,chatSettingsSize:0,worldBooksSize:0,otherDataSize:0,chatImagesSize:0,otherImagesSize:0,stickersSize:0,healthScheduleSize:0,transactionsSize:0,imageStats:{totalImages:0,totalSize:0,categories:{}}});j.useEffect(()=>{A()},[]);const N=(H,K=2)=>{if(H===0)return"0 B";const E=1024,I=K<0?0:K,S=["B","KB","MB","GB","TB"],L=Math.floor(Math.log(H)/Math.log(E));return parseFloat((H/Math.pow(E,L)).toFixed(I))+" "+S[L]},A=async()=>{try{const H=await ae.getStoreSize(te.USER_DATA),K=await ae.getStoreSize(te.CHAT_MESSAGES),E=await ae.getStoreSize(te.CHARACTERS),I=await ae.getStoreSize(te.CHAT_SETTINGS),S=await ae.getStoreSize(te.WORLD_BOOKS),L=await ae.getStoreSize(te.API_SETTINGS),z=await ae.getStoreSize(te.APPEARANCE),R=await ae.getStoreSize(te.MISC),U=await ae.getStoreSize(te.CHATS),W=await ae.getStoreSize(te.HEALTH),Z=await ae.getStoreSize(te.SCHEDULE),O=await ae.getStoreSize(te.STICKERS),V=await ae.getStoreSize(te.BUBBLE_PRESETS),ee=await ae.getStoreSize(te.AI_TASKS),q=await ae.getStoreSize(te.TRANSACTIONS),G=await ae.get(te.CHARACTERS,"characters")||[];let Q=0;G.forEach(ke=>{if(ke.memories)try{const Ne=JSON.stringify(ke.memories);Q+=new Blob([Ne]).size}catch{}});const le=Math.max(0,E-Q),ne=L+z+R+U+H+I+V+ee+q,ie=W+Z,ve=await bv(),se=Object.values(ve).reduce((ke,{count:Ne})=>ke+Ne,0),Me=Object.values(ve).reduce((ke,{size:Ne})=>ke+parseFloat(Ne),0)*1024,me=parseFloat(ve[Sn.CHAT_IMAGES]?.size||"0.00")*1024,J=parseFloat(ve[Sn.MEMES]?.size||"0.00")*1024,X=Me-me-J,oe=K+le+Q+S+ne+Me+O+ie;C({totalSize:oe,userDataSize:H,chatMessagesSize:K,characterDataSize:le,memoriesSize:Q,chatSettingsSize:I,worldBooksSize:S,otherDataSize:ne,chatImagesSize:me,otherImagesSize:X,stickersSize:O+J,healthScheduleSize:ie,transactionsSize:q,imageStats:{totalImages:se,totalSize:Me,categories:ve}})}catch(H){console.error("Failed to load stats:",H)}},P=async()=>{x(!0);try{const H=await ae.exportAll();H[te.AI_TASKS]&&delete H[te.AI_TASKS];const K={...H,exportTime:new Date().toISOString(),version:2},E=JSON.stringify(K,null,2),I=new Blob([E],{type:"application/json"}),S=URL.createObjectURL(I),L=document.createElement("a");L.href=S,L.download=`touken-os-data-${new Date().getTime()}.json`,L.click(),URL.revokeObjectURL(S),u(!0),setTimeout(()=>u(!1),2e3)}catch(H){console.error("Export JSON failed:",H),alert("")}finally{x(!1)}},B=async()=>{x(!0);try{const H=new Vg,K=await ae.exportAll();K[te.AI_TASKS]&&delete K[te.AI_TASKS];const E={...K,exportTime:new Date().toISOString(),version:2};H.file("data.json",JSON.stringify(E,null,2));const I=await gA(),S=H.folder("images");for(const[U,{blob:W,category:Z}]of Object.entries(I)){const O=W.type.split("/")[1]||"png";S?.folder(Z)?.file(`${U}.${O}`,W)}const L=await H.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}}),z=URL.createObjectURL(L),R=document.createElement("a");R.href=z,R.download=`touken-os-backup-${new Date().getTime()}.zip`,R.click(),URL.revokeObjectURL(z),u(!0),setTimeout(()=>u(!1),2e3)}catch(H){console.error("Export Data failed:",H),alert("")}finally{x(!1)}},$=()=>{const H=document.createElement("input");H.type="file",H.accept=".zip,.json,application/zip,application/json",H.onchange=async K=>{const E=K.target.files?.[0];if(E){y(!0);try{if(E.name.endsWith(".json")){const S=await E.text(),{exportTime:L,version:z,...R}=JSON.parse(S);await ae.importAll(R)}else{const S=await Vg.loadAsync(E),L=S.file("data.json");if(!L)throw new Error("Invalid backup file: missing data.json");const z=await L.async("text"),{exportTime:R,version:U,...W}=JSON.parse(z);await ae.importAll(W);const Z=S.folder("images");if(Z){const O={},V=[];Z.forEach((ee,q)=>{q.dir||V.push(q.async("blob").then(G=>{const Q=ee.split("/"),ne=Q[Q.length-1].replace(/\.[^/.]+$/,"");O[ne]=G}))}),await Promise.all(V),Object.keys(O).length>0&&await bA(O)}}p(!0),setTimeout(()=>window.location.reload(),1500)}catch(I){console.error("Import failed:",I),alert("")}finally{y(!1)}}},H.click()},D=async()=>{k(!0);try{await ae.clearAll(),await xA(),eh(!0),c(!0),s(!1),setTimeout(()=>window.location.reload(),1500)}catch(H){console.error("Clear failed:",H),alert("")}finally{k(!1)}},T=async()=>{k(!0);try{const K=(await up()).filter(E=>E.category===Sn.CHAT_IMAGES);console.log(`Deleting ${K.length} chat images...`);for(const E of K)await ka(E.originalKey);c(!0),i(!1),await A(),setTimeout(()=>c(!1),2e3)}catch(H){console.error("Clear chat images failed:",H),alert("")}finally{k(!1)}};return t.jsx(Zc,{title:"",onBack:e,children:t.jsxs("div",{className:"space-y-6 text-slate-800",children:[t.jsx(Ie,{children:(d||m||l)&&t.jsx(xe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"fixed top-24 left-0 right-0 flex justify-center z-[60] pointer-events-none px-4",children:t.jsxs("div",{className:"bg-slate-800 text-white px-5 py-3 border border-slate-700 shadow-xl flex items-center gap-3 backdrop-blur-md",children:[t.jsx(wt,{className:"w-4 h-4 text-green-400",strokeWidth:3}),t.jsxs("span",{className:"text-xs font-bold tracking-wider uppercase",children:[d&&"ARCHIVE_EXPORT_COMPLETE",m&&"DATA_RESTORED_REBOOTING",l&&"OPERATION_COMPLETE"]})]})})}),t.jsxs("div",{className:"bg-white p-5 border border-slate-300 relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 left-0 w-2 h-2 border-l-2 border-t-2 border-slate-800"}),t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(I_,{className:"w-5 h-5 text-slate-600"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xs font-bold text-slate-500 tracking-widest uppercase",children:""}),t.jsx("p",{className:"text-[10px] text-slate-400 font-mono",children:"STATUS: MOUNTED"})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("span",{className:"text-xl font-black text-slate-800 tracking-tighter",children:N(w.totalSize).split(" ")[0]}),t.jsx("span",{className:"text-xs text-slate-400 font-bold ml-1",children:N(w.totalSize).split(" ")[1]})]})]}),t.jsxs("div",{className:"h-3 w-full bg-slate-100 border border-slate-200 flex mb-6",children:[t.jsx("div",{className:"bg-blue-600 h-full border-r border-white",style:{width:`${Math.min(100,w.chatMessagesSize/w.totalSize*100)}%`}}),t.jsx("div",{className:"bg-purple-500 h-full border-r border-white",style:{width:`${Math.min(100,w.characterDataSize/w.totalSize*100)}%`}}),t.jsx("div",{className:"bg-emerald-500 h-full border-r border-white",style:{width:`${Math.min(100,w.chatImagesSize/w.totalSize*100)}%`}}),t.jsx("div",{className:"bg-teal-500 h-full border-r border-white",style:{width:`${Math.min(100,w.otherImagesSize/w.totalSize*100)}%`}}),t.jsx("div",{className:"bg-orange-500 h-full border-r border-white",style:{width:`${Math.min(100,w.worldBooksSize/w.totalSize*100)}%`}}),t.jsx("div",{className:"bg-indigo-500 h-full border-r border-white",style:{width:`${Math.min(100,w.memoriesSize/w.totalSize*100)}%`}}),t.jsx("div",{className:"bg-pink-500 h-full border-r border-white",style:{width:`${Math.min(100,w.stickersSize/w.totalSize*100)}%`}}),t.jsx("div",{className:"bg-cyan-500 h-full border-r border-white",style:{width:`${Math.min(100,w.healthScheduleSize/w.totalSize*100)}%`}}),t.jsx("div",{className:"bg-slate-500 h-full",style:{width:`${Math.min(100,w.otherDataSize/w.totalSize*100)}%`}})]}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{label:"",value:w.chatMessagesSize,icon:r8,color:"text-blue-600"},{label:"",value:w.characterDataSize,icon:An,color:"text-purple-600"},{label:"",value:w.transactionsSize,icon:sp,color:"text-yellow-600"},{label:"",value:w.chatImagesSize,icon:va,color:"text-emerald-600"},{label:"",value:w.stickersSize,icon:X8,color:"text-pink-600"},{label:"",value:w.otherImagesSize,icon:va,color:"text-teal-600"},{label:"",value:w.worldBooksSize,icon:ov,color:"text-orange-600"},{label:"",value:w.memoriesSize,icon:iv,color:"text-indigo-600"},{label:"",value:w.otherDataSize,icon:Tc,color:"text-slate-600"},{label:"",value:w.healthScheduleSize,icon:ur,color:"text-cyan-600"}].map((H,K)=>t.jsxs("div",{className:"flex items-center justify-between p-2 border border-slate-100 bg-slate-50/50",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(H.icon,{className:`w-3 h-3 ${H.color}`}),t.jsx("span",{className:`text-[10px] font-bold ${H.color}`,children:H.label})]}),t.jsx("span",{className:"text-[10px] font-mono text-slate-500",children:N(H.value)})]},K))})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-3 ml-1 flex items-center gap-2",children:[t.jsx(Dc,{className:"w-3 h-3"})," "]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("button",{onClick:P,disabled:f,className:"p-4 bg-white border border-slate-300 active:border-slate-800 hover:border-slate-800 active:bg-slate-50 transition-all flex flex-col gap-2 group",children:[t.jsxs("div",{className:"flex items-center justify-between w-full mb-1",children:[t.jsx(ap,{className:"w-5 h-5 text-slate-400 group-active:text-slate-800 group-hover:text-slate-800 transition-colors"}),t.jsx("span",{className:"text-[9px] font-mono text-slate-300 group-active:text-slate-500 group-hover:text-slate-500",children:"JSON"})]}),t.jsxs("div",{className:"text-left",children:[t.jsx("h3",{className:"text-sm font-bold text-slate-800",children:""}),t.jsx("p",{className:"text-[10px] text-slate-400",children:""})]})]}),t.jsxs("button",{onClick:B,disabled:f,className:"p-4 bg-white border border-slate-300 active:border-slate-800 hover:border-slate-800 active:bg-slate-50 transition-all flex flex-col gap-2 group",children:[t.jsxs("div",{className:"flex items-center justify-between w-full mb-1",children:[t.jsx(Tc,{className:"w-5 h-5 text-slate-400 group-active:text-slate-800 group-hover:text-slate-800 transition-colors"}),t.jsx("span",{className:"text-[9px] font-mono text-slate-300 group-active:text-slate-500 group-hover:text-slate-500",children:"ZIP"})]}),t.jsxs("div",{className:"text-left",children:[t.jsx("h3",{className:"text-sm font-bold text-slate-800",children:""}),t.jsx("p",{className:"text-[10px] text-slate-400",children:""})]})]})]}),t.jsxs("button",{onClick:$,disabled:b,className:"w-full p-4 bg-white border border-slate-300 active:border-slate-800 hover:border-slate-800 active:bg-slate-50 transition-all flex items-center justify-between group",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-10 h-10 border border-slate-200 bg-slate-50 flex items-center justify-center text-slate-600 group-active:bg-slate-800 group-active:text-white group-hover:bg-slate-800 group-hover:text-white transition-colors",children:t.jsx(cp,{className:"w-5 h-5"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("h3",{className:"text-sm font-bold text-slate-800",children:""}),t.jsx("p",{className:"text-[10px] text-slate-400",children:"RESTORE FROM ARCHIVE"})]})]}),t.jsx("div",{className:"border border-slate-300 px-3 py-1 text-[10px] font-bold text-slate-600 uppercase active:bg-slate-800 active:text-white hover:bg-slate-800 hover:text-white transition-colors",children:""})]}),t.jsxs("button",{onClick:()=>i(!0),className:"w-full p-4 border border-slate-200 bg-slate-50/50 text-slate-600 font-bold text-sm flex items-center justify-center gap-2 active:bg-slate-100 active:border-slate-300 hover:bg-slate-100 hover:border-slate-300 transition-all group",children:[t.jsx(w_,{className:"w-4 h-4 text-emerald-400 group-hover:text-emerald-600"})," (CLEAR CACHE IMAGES)"]}),t.jsxs("button",{onClick:()=>s(!0),className:"w-full mt-6 p-4 border border-red-200 bg-red-50/30 text-red-600 font-bold text-sm flex items-center justify-center gap-2 active:bg-red-50 active:border-red-300 hover:bg-red-50 hover:border-red-300 transition-all",children:[t.jsx(Dn,{className:"w-4 h-4"})," (ERASE ALL DATA)"]})]})]}),t.jsx(Ie,{children:n&&t.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[70] px-6",children:t.jsxs(xe.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:350,damping:30},className:"bg-white border-2 border-slate-800 p-6 w-full max-w-sm shadow-[8px_8px_0px_rgba(0,0,0,0.2)] relative",onClick:H=>H.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-slate-100 pb-4",children:[t.jsx(g7,{className:"w-6 h-6 text-red-600"}),t.jsx("h3",{className:"text-lg font-black text-slate-800 tracking-tight uppercase",children:""})]}),t.jsxs("p",{className:"text-sm text-slate-600 mb-8 leading-relaxed font-medium",children:["",t.jsx("span",{className:"text-red-600 font-bold bg-red-50 px-1",children:""}),"",t.jsx("br",{}),t.jsx("br",{}),t.jsx("span",{className:"text-xs text-slate-400",children:"SYSTEM ID: LOCAL_USER"})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>s(!1),className:"flex-1 py-3 border border-slate-300 text-slate-600 font-bold text-sm active:bg-slate-50 hover:bg-slate-50 transition-colors uppercase tracking-wider",children:""}),t.jsx("button",{onClick:D,className:"flex-1 py-3 bg-red-600 text-white font-bold text-sm active:bg-red-700 hover:bg-red-700 transition-colors shadow-lg shadow-red-200 uppercase tracking-wider",children:""})]})]})},"clear-modal-overlay")}),t.jsx(Ie,{children:a&&t.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[70] px-6",children:t.jsxs(xe.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:350,damping:30},className:"bg-white border-2 border-slate-800 p-6 w-full max-w-sm shadow-[8px_8px_0px_rgba(0,0,0,0.2)] relative",onClick:H=>H.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-slate-100 pb-4",children:[t.jsx(va,{className:"w-6 h-6 text-orange-500"}),t.jsx("h3",{className:"text-lg font-black text-slate-800 tracking-tight uppercase",children:""})]}),t.jsxs("p",{className:"text-sm text-slate-600 mb-8 leading-relaxed font-medium",children:["",t.jsx("br",{}),t.jsx("span",{className:"text-orange-500 font-bold",children:""}),t.jsx("br",{}),t.jsx("br",{}),t.jsxs("span",{className:"text-xs text-slate-400",children:["TARGET: ",N(w.chatImagesSize)," / ",w.imageStats.categories[Sn.CHAT_IMAGES]?.count||0," FILES"]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>i(!1),className:"flex-1 py-3 border border-slate-300 text-slate-600 font-bold text-sm active:bg-slate-50 hover:bg-slate-50 transition-colors uppercase tracking-wider",children:""}),t.jsx("button",{onClick:T,disabled:g,className:"flex-1 py-3 bg-slate-800 text-white font-bold text-sm active:bg-slate-900 hover:bg-slate-900 transition-colors shadow-lg shadow-slate-200 uppercase tracking-wider",children:g?"...":""})]})]})},"images-modal-overlay")})]})})}function e9({onBack:e}){return t.jsx(Zc,{title:"",onBack:e,children:t.jsxs("div",{className:"space-y-8 text-slate-800",children:[t.jsxs("div",{className:"bg-white border border-slate-200 p-6 relative overflow-hidden shadow-sm group",children:[t.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-slate-50 -mr-8 -mt-8 rotate-45 transform transition-transform group-hover:scale-150 duration-700 ease-out"}),t.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-slate-800 text-white flex items-center justify-center mb-4 shadow-lg shadow-slate-200",children:t.jsx(mv,{className:"w-8 h-8"})}),t.jsx("h2",{className:"text-xl font-black tracking-tight uppercase",children:"Touken OS"}),t.jsx("p",{className:"text-[10px] font-bold text-slate-400 tracking-[0.3em] uppercase mt-1",children:"Government Terminal"}),t.jsx("div",{className:"mt-4 inline-flex items-center px-3 py-1 bg-slate-100 border border-slate-200 rounded-none text-xs font-mono text-slate-600",children:"v1.0 (Beta)"})]})]}),t.jsxs("section",{className:"bg-slate-50 border border-slate-200 p-5 relative",children:[t.jsx("div",{className:"absolute top-0 left-0 w-2 h-2 bg-slate-300"}),t.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 bg-slate-300"}),t.jsx("div",{className:"absolute bottom-0 left-0 w-2 h-2 bg-slate-300"}),t.jsx("div",{className:"absolute bottom-0 right-0 w-2 h-2 bg-slate-300"}),t.jsxs("div",{className:"flex items-center gap-2 text-slate-800 mb-4",children:[t.jsx(np,{className:"w-4 h-4"}),t.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider",children:""})]}),t.jsxs("div",{className:"text-xs text-slate-600 leading-relaxed space-y-4 text-justify h-64 overflow-y-auto pr-2 custom-scrollbar",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-slate-800 mb-1",children:"1. "}),t.jsxs("p",{children:["-ONLINE-  ",t.jsx("span",{className:"font-bold",children:"Nitroplus"}),"  ",t.jsx("span",{className:"font-bold",children:"DMM GAMES (EXNOA LLC)"}),"  "]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-slate-800 mb-1",children:"2. "}),t.jsxs("p",{children:["",t.jsx("span",{className:"font-bold text-red-500",children:""})," "]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-slate-800 mb-1",children:"3. "}),t.jsx("p",{children:" "})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-slate-800 mb-1",children:"4. "}),t.jsx("p",{children:" AI  IndexedDB  "})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-slate-800 mb-1",children:"5. AI "}),t.jsx("p",{children:"LLMAI   AI "})]})]})]}),t.jsx("div",{className:"text-center py-4 opacity-50",children:t.jsx("p",{className:"text-[9px] text-slate-400 font-mono tracking-widest",children:"MADE WITH  FOR TOUKEN RANBU"})})]})})}function t9({onClose:e}){const[n,s]=j.useState("main"),a=c=>{s(c)},i=()=>{s("main")},l=()=>{switch(n){case"api":return t.jsx($A,{onBack:i});case"beautify":return t.jsx(ZA,{onBack:i});case"data":return t.jsx(JA,{onBack:i});case"disclaimer":return t.jsx(e9,{onBack:i});default:return null}};return t.jsxs("div",{className:"w-full h-full bg-[#F0F2F5] relative overflow-hidden",children:[t.jsx(xe.div,{initial:!1,animate:n==="main"?{x:0,opacity:1}:{x:"-25%",opacity:1},transition:{duration:.4,ease:[.32,.72,0,1]},className:"absolute inset-0 w-full h-full",children:t.jsx(IA,{onNavigate:a,onClose:e})}),t.jsx(Ie,{children:n!=="main"&&t.jsx(xe.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{duration:.4,ease:[.32,.72,0,1]},className:"absolute inset-0 w-full h-full z-20 shadow-[-10px_0_30px_rgba(0,0,0,0.15)]",children:l()},"subpage")})]})}function n9({onBack:e,onEdit:n,lastUpdated:s=0}){const[a,i]=j.useState([]),[l,c]=j.useState(""),[d,u]=j.useState("all"),[m,p]=j.useState("grid");j.useEffect(()=>{f()},[s]);const f=async()=>{try{const g=await ae.get(te.WORLD_BOOKS,"world_books");g&&i(g)}catch(g){console.error("Failed to load world books:",g)}},x=()=>{n(null)},b=g=>{n(g)},y=a.filter(g=>d==="all"||g.scope===d).filter(g=>g.name.toLowerCase().includes(l.toLowerCase())||g.content.toLowerCase().includes(l.toLowerCase()));return t.jsxs("div",{className:"w-full h-full relative bg-[#F5F2EB] z-50 overflow-hidden flex flex-col font-['Source_Han_Sans_CN_VF',sans-serif]",children:[t.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-20 mix-blend-multiply",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%239C92AC' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E")`}}),t.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-20 bg-[#F5F2EB]/95 backdrop-blur-xl border-b border-[#D6D3CC] shadow-sm",children:[t.jsx("button",{onClick:e,className:"w-10 h-10 bg-white/50 border border-[#D6D3CC] rounded-lg flex items-center justify-center text-[#5A5A55] transition-colors hover:bg-white hover:text-[#2C2C2C] shadow-[0_2px_0_#E5E5E5]",children:t.jsx(an,{className:"w-5 h-5",strokeWidth:2})}),t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(Dg,{className:"w-3 h-3 text-[#8C8C89]"}),t.jsx("span",{className:"text-[10px] font-bold text-[#8C8C89] tracking-[0.2em] uppercase",children:""})]}),t.jsx("h1",{className:"text-lg font-serif font-bold text-[#2C2C2C] tracking-tight flex items-center gap-2",children:""})]}),t.jsx("button",{onClick:x,className:"w-10 h-10 bg-[#2C2C2C] text-[#F2F0EB] rounded-lg flex items-center justify-center transition-colors shadow-lg hover:bg-black",children:t.jsx(is,{className:"w-5 h-5",strokeWidth:2})})]}),t.jsxs("div",{className:"px-6 py-4 z-10 bg-[#F5F2EB]",children:[t.jsxs("div",{className:"flex gap-2 mb-4",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(_a,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-[#8C8C89]"}),t.jsx("input",{type:"text",value:l,onChange:g=>c(g.target.value),placeholder:"...",className:"w-full bg-white border border-[#D6D3CC] rounded-full px-4 py-2.5 pl-10 text-xs font-medium text-[#2C2C2C] placeholder:text-[#AAA] focus:outline-none focus:border-[#2C2C2C] focus:ring-1 focus:ring-[#2C2C2C] transition-colors shadow-sm"}),l&&t.jsx("button",{onClick:()=>c(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#BBB] hover:text-[#2C2C2C]",children:t.jsx(ht,{className:"w-3 h-3"})})]}),t.jsxs("div",{className:"flex bg-white border border-[#D6D3CC] rounded-lg p-1 shrink-0 shadow-sm",children:[t.jsx("button",{onClick:()=>p("grid"),className:`p-1.5 rounded-md transition-all ${m==="grid"?"bg-[#F5F2EB] text-[#2C2C2C]":"text-[#8C8C89]"}`,children:t.jsx(uv,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>p("list"),className:`p-1.5 rounded-md transition-all ${m==="list"?"bg-[#F5F2EB] text-[#2C2C2C]":"text-[#8C8C89]"}`,children:t.jsx(q_,{className:"w-4 h-4"})})]})]}),t.jsx("div",{className:"flex gap-6 border-b border-[#D6D3CC] px-2",children:[{id:"all",label:""},{id:"global",label:""},{id:"local",label:""}].map(g=>t.jsxs("button",{onClick:()=>u(g.id),className:`pb-3 text-[11px] font-bold uppercase tracking-wider transition-colors relative ${d===g.id?"text-[#2C2C2C]":"text-[#8C8C89] active:text-[#5A5A55] hover:text-[#5A5A55]"}`,children:[g.label,d===g.id&&t.jsx(xe.div,{layoutId:"worldbook-tab-indicator",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#2C2C2C]",transition:{duration:.25,ease:"easeInOut"}})]},g.id))})]}),t.jsx("div",{className:"flex-1 overflow-y-auto px-6 pb-24",children:y.length===0?t.jsxs("div",{className:"h-64 flex flex-col items-center justify-center text-[#8C8C89] opacity-60",children:[t.jsx(Dg,{className:"w-16 h-16 mb-4 stroke-1"}),t.jsx("p",{className:"text-xs font-serif italic",children:""})]}):t.jsx(xe.div,{layout:!0,className:m==="grid"?"grid grid-cols-2 gap-4 pt-2":"flex flex-col gap-3 pt-2",children:t.jsx(Ie,{mode:"popLayout",children:y.map((g,k)=>t.jsx(xe.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{layout:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}},onClick:()=>b(g),className:`group cursor-pointer relative ${m==="grid"?"aspect-[3/4]":"h-24"}`,children:m==="grid"?t.jsxs(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-white border border-[#E5E5E5] rounded-r-md rounded-l-sm shadow-[4px_4px_10px_rgba(0,0,0,0.05)] transition-all overflow-hidden flex flex-col group-active:shadow-[6px_6px_15px_rgba(0,0,0,0.1)] group-hover:shadow-[6px_6px_15px_rgba(0,0,0,0.1)]",children:[t.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-3 ${g.scope==="global"?"bg-[#2C2C2C]":"bg-[#8C8C89]"} opacity-10 border-r border-black/5`}),t.jsxs("div",{className:"mt-4 mx-4 flex justify-between items-start",children:[t.jsx("span",{className:`text-[8px] font-bold uppercase tracking-wider px-1.5 py-0.5 rounded-sm ${g.scope==="global"?"bg-[#F0F0F0] text-[#2C2C2C]":"bg-[#F5F5F5] text-[#8C8C89]"}`,children:g.scope==="global"?" I":" II"}),g.scope==="global"?t.jsx(dv,{className:"w-3 h-3 text-[#2C2C2C]"}):t.jsx(O6,{className:"w-3 h-3 text-[#8C8C89]"})]}),t.jsxs("div",{className:"flex-1 px-4 flex flex-col justify-center",children:[t.jsx("h3",{className:"font-serif text-lg leading-tight font-bold text-[#2C2C2C] line-clamp-3",children:g.name||""}),t.jsx("div",{className:"w-8 h-0.5 bg-[#D6D3CC] mt-3"})]}),t.jsxs("div",{className:"px-4 pb-4 pt-2 bg-[#F9F9F7] border-t border-[#F0F0F0]",children:[t.jsx("p",{className:"text-[9px] text-[#8C8C89] font-mono line-clamp-2 mb-2",children:g.content||"..."}),t.jsxs("div",{className:"flex items-center gap-2 text-[8px] font-bold text-[#AAA] uppercase",children:[t.jsx(ur,{className:"w-2.5 h-2.5"}),new Date(g.updatedAt).toLocaleDateString()]})]})]}):t.jsxs(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"w-full h-full bg-white border border-[#E5E5E5] rounded-md shadow-sm transition-all flex overflow-hidden group-active:shadow-md group-hover:shadow-md",children:[t.jsx("div",{className:`w-2 h-full ${g.scope==="global"?"bg-[#2C2C2C]":"bg-[#D6D3CC]"}`}),t.jsxs("div",{className:"flex-1 p-3 flex flex-col justify-center",children:[t.jsxs("div",{className:"flex justify-between items-start mb-1",children:[t.jsx("h3",{className:"font-serif text-base font-bold text-[#2C2C2C]",children:g.name||""}),t.jsx("span",{className:"text-[9px] px-2 py-0.5 bg-[#F5F5F5] rounded text-[#8C8C89] font-bold uppercase",children:g.scope==="global"?"":""})]}),t.jsx("p",{className:"text-[10px] text-[#666] line-clamp-2 pr-8",children:g.content})]}),t.jsxs("div",{className:"w-12 border-l border-[#F0F0F0] flex flex-col items-center justify-center gap-1 text-[#AAA]",children:[t.jsx(ap,{className:"w-4 h-4"}),t.jsx("span",{className:"text-[9px] font-mono",children:g.content.length})]})]})},g.id))})})}),t.jsxs("div",{className:"bg-[#EAE8E3] border-t border-[#D6D3CC] px-6 py-3 flex justify-between items-center text-[9px] font-mono text-[#8C8C89] uppercase tracking-wider",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-[#34C759]"}),t.jsx("span",{children:""})]}),t.jsxs("span",{children:[": ",a.length]})]})]})}function s9({onBack:e,worldBook:n}){const[s,a]=j.useState(""),[i,l]=j.useState("local"),[c,d]=j.useState("before"),[u,m]=j.useState(""),[p,f]=j.useState(!1),[x,b]=j.useState(!1),[y,g]=j.useState(!1),k=n===null;j.useEffect(()=>{n&&(a(n.name),l(n.scope),d(n.position),m(n.content))},[n]);const w=async()=>{if(!s.trim()){g(!0);return}g(!1);try{let A=await ae.get(te.WORLD_BOOKS,"world_books")||[];const P=new Date().toISOString();if(k){const B={id:`wb_${Date.now()}`,name:s.trim(),scope:i,position:c,content:u.trim(),createdAt:P,updatedAt:P};A.push(B)}else A=A.map(B=>B.id===n.id?{...B,name:s.trim(),scope:i,position:c,content:u.trim(),updatedAt:P}:B);await ae.set(te.WORLD_BOOKS,"world_books",A),window.dispatchEvent(new Event("chat-settings-updated")),b(!0),setTimeout(()=>{b(!1),e()},1500)}catch(N){console.error("Failed to save world book:",N)}},C=async()=>{if(n)try{const N=await ae.get(te.WORLD_BOOKS,"world_books");if(N){const A=N.filter(P=>P.id!==n.id);await ae.set(te.WORLD_BOOKS,"world_books",A)}window.dispatchEvent(new Event("chat-settings-updated")),f(!1),setTimeout(()=>e(),300)}catch(N){console.error("Failed to delete world book:",N)}};return t.jsxs("div",{className:"w-full h-full relative bg-[#F2F0EB] z-50 overflow-hidden flex flex-col font-['Source_Han_Sans_CN_VF',sans-serif]",children:[t.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),t.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10 bg-[#F2F0EB]/95 backdrop-blur-sm border-b border-[#D6D3CC]",children:[t.jsx("button",{onClick:e,className:"w-10 h-10 bg-[#EAE8E3] border border-[#D6D3CC] rounded-md flex items-center justify-center text-[#5A5A55] transition-colors active:bg-white active:text-[#B93636] hover:bg-white hover:text-[#B93636]",children:t.jsx(ht,{className:"w-5 h-5",strokeWidth:2})}),t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(R6,{className:"w-3 h-3 text-[#8C8C89]"}),t.jsx("span",{className:"text-[10px] font-bold text-[#8C8C89] tracking-[0.2em] uppercase",children:k?"":""})]}),t.jsx("h1",{className:"text-base font-bold text-[#2C2C2C] tracking-wide",children:k?"":""})]}),t.jsx("div",{className:"w-10"})]}),t.jsxs("div",{className:"flex-1 px-5 pb-28 overflow-y-auto",children:[t.jsxs("div",{className:"mt-6 mb-8 text-center",children:[t.jsx("div",{className:"inline-block border-b-2 border-[#2C2C2C] pb-1 mb-2",children:t.jsxs("h2",{className:"text-xl font-black text-[#2C2C2C] uppercase tracking-tighter flex items-center gap-2",children:[t.jsx(rp,{className:"w-5 h-5"}),""]})}),t.jsx("p",{className:"text-[10px] font-mono text-[#8C8C89] uppercase tracking-widest",children:""})]}),t.jsxs("div",{className:"space-y-6 max-w-[420px] mx-auto",children:[t.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)]",children:[t.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:""}),t.jsxs("div",{className:"space-y-4 mt-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1",children:""}),t.jsx("input",{type:"text",value:s,onChange:N=>{a(N.target.value),g(!1)},className:`w-full bg-[#EAE8E3] border-b-2 px-3 py-2 text-lg font-bold text-[#2C2C2C] focus:outline-none focus:bg-white transition-colors placeholder:text-[#CCC] ${y?"border-[#B93636] bg-[#FFF5F5]":"border-[#D6D3CC] focus:border-[#2C2C2C]"}`,placeholder:""}),y&&t.jsxs("p",{className:"text-[10px] text-[#B93636] font-bold mt-1 uppercase flex items-center gap-1",children:[t.jsx(np,{className:"w-3 h-3"})," "]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[t.jsx(dv,{className:"w-3 h-3"})," "]}),t.jsx("div",{className:"flex flex-col gap-1",children:[{id:"global",label:" ()"},{id:"local",label:""}].map(N=>t.jsxs("button",{onClick:()=>l(N.id),className:`w-full py-2 px-3 text-xs font-bold text-left transition-all border ${i===N.id?"bg-[#2C2C2C] text-[#F2F0EB] border-[#2C2C2C]":"bg-white border-[#D6D3CC] text-[#8C8C89] active:border-[#8C8C89] hover:border-[#8C8C89]"}`,children:[i===N.id&&t.jsx(wt,{className:"w-3 h-3 inline mr-1"}),N.label]},N.id))})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[t.jsx(W_,{className:"w-3 h-3"})," "]}),t.jsx("div",{className:"flex flex-col gap-1",children:[{id:"before",label:" (Prepend)"},{id:"after",label:" (Append)"}].map(N=>t.jsxs("button",{onClick:()=>d(N.id),className:`w-full py-2 px-3 text-xs font-bold text-left transition-all border ${c===N.id?"bg-[#2C2C2C] text-[#F2F0EB] border-[#2C2C2C]":"bg-white border-[#D6D3CC] text-[#8C8C89] active:border-[#8C8C89] hover:border-[#8C8C89]"}`,children:[c===N.id&&t.jsx(wt,{className:"w-3 h-3 inline mr-1"}),N.label]},N.id))})]})]})]})]}),t.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 pb-2 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)] h-[360px] flex flex-col",children:[t.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:""}),t.jsxs("div",{className:"flex-1 mt-2 relative",children:[t.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-10",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px)",backgroundSize:"100% 2rem",marginTop:"1.9rem"}}),t.jsx("textarea",{value:u,onChange:N=>m(N.target.value),className:"w-full h-full bg-transparent border-none text-sm text-[#4A4A4A] focus:outline-none resize-none leading-[2rem] font-mono",placeholder:"...",style:{lineHeight:"2rem"}})]}),t.jsx("div",{className:"text-right border-t border-[#E5E5E5] pt-2 mt-2",children:t.jsxs("span",{className:"text-[10px] font-mono text-[#8C8C89]",children:[": ",u.length]})})]})]})]}),t.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-6 bg-[#F2F0EB]/90 backdrop-blur-md border-t border-[#D6D3CC] z-40 flex gap-3 justify-center",children:[!k&&t.jsx("button",{onClick:()=>f(!0),className:"w-12 h-12 border-2 border-[#FF3B30] text-[#FF3B30] flex items-center justify-center active:bg-[#FF3B30] active:text-white hover:bg-[#FF3B30] hover:text-white transition-colors rounded-[2px]",children:t.jsx(Dn,{className:"w-5 h-5"})}),t.jsxs("button",{onClick:w,className:"flex-1 max-w-[300px] bg-[#2C2C2C] text-[#F2F0EB] h-12 rounded-[2px] font-bold text-sm tracking-wider uppercase active:bg-black hover:bg-black transition-colors shadow-lg flex items-center justify-center gap-2",children:[t.jsx(Ei,{className:"w-4 h-4"}),k?"":""]})]}),t.jsx(Ie,{children:p&&t.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-[70] px-4",children:t.jsxs(xe.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:350,damping:30},className:"bg-[#F2F0EB] border-2 border-[#FF3B30] p-6 max-w-xs w-full text-center shadow-2xl",children:[t.jsx("div",{className:"w-12 h-12 bg-[#FF3B30] text-white rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(Dn,{className:"w-6 h-6"})}),t.jsx("h3",{className:"text-lg font-black text-[#2C2C2C] uppercase mb-2",children:""}),t.jsx("p",{className:"text-xs font-mono text-[#5A5A55] mb-6",children:""}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>f(!1),className:"flex-1 py-3 border border-[#D6D3CC] font-bold text-xs active:bg-white hover:bg-white transition-colors",children:""}),t.jsx("button",{onClick:C,className:"flex-1 py-3 bg-[#FF3B30] text-white font-bold text-xs active:bg-[#D32F2F] hover:bg-[#D32F2F] transition-colors",children:""})]})]})})}),t.jsx(Ie,{children:x&&t.jsx(xe.div,{initial:{opacity:0,scale:1.5,rotate:-10},animate:{opacity:1,scale:1,rotate:-5},exit:{opacity:0},className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[70] pointer-events-none",children:t.jsxs("div",{className:"w-40 h-40 rounded-full border-[6px] border-[#34C759] flex flex-col items-center justify-center text-[#34C759] opacity-90 mix-blend-multiply bg-white/50 backdrop-blur-sm",children:[t.jsx(wt,{className:"w-12 h-12 mb-1",strokeWidth:4}),t.jsx("span",{className:"text-xl font-black uppercase tracking-tight",children:""}),t.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest mt-1",children:new Date().toLocaleDateString()})]})})})]})}function r9({onClose:e}){const[n,s]=j.useState("list"),[a,i]=j.useState(null),[l,c]=j.useState(Date.now()),d=m=>{i(m),s("editor")},u=()=>{s("list"),c(Date.now()),setTimeout(()=>i(null),300)};return t.jsxs("div",{className:"absolute inset-0 w-full h-full bg-black overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 w-full h-full bg-[#F5F2EB] z-10",style:{pointerEvents:n==="editor"?"none":"auto"},children:t.jsx(n9,{onBack:e,onEdit:d,lastUpdated:l})}),t.jsx("div",{className:"absolute inset-0 bg-black -z-10"}),t.jsx(Ie,{children:n==="editor"&&t.jsx(xe.div,{initial:{y:"100%",borderRadius:"16px 16px 0 0"},animate:{y:0,borderRadius:"0px"},exit:{y:"100%",borderRadius:"16px 16px 0 0"},transition:{type:"spring",stiffness:300,damping:30},className:"absolute inset-0 w-full h-full z-20 shadow-2xl overflow-hidden",children:t.jsx(s9,{onBack:u,worldBook:a})},"editor")})]})}function a9({onClose:e,onEditUser:n,onEditCharacter:s,isBackground:a=!1,lastUpdated:i=0}){const[l,c]=j.useState([]),[d,u]=j.useState({name:"",country:"",fortress:"",date:"",attendant:""}),[m,p]=j.useState(()=>{const y=vv();return y!==void 0?y:null});j.useEffect(()=>{f(),x();const y=()=>{x()};return window.addEventListener("avatarChanged",y),window.addEventListener("userDataChanged",y),()=>{window.removeEventListener("avatarChanged",y),window.removeEventListener("userDataChanged",y)}},[i]);const f=async()=>{try{const y=await ae.get(te.CHARACTERS,"characters");if(y){const g=await Promise.all(y.map(async k=>{if(k.avatar){if(k.avatar.startsWith("data:"))return{...k,avatarUrl:k.avatar};{const w=await xt(k.avatar);return{...k,avatarUrl:w}}}return{...k,avatarUrl:null}}));c(g)}}catch(y){console.error("Failed to load characters:",y)}},x=async()=>{try{const y=await ae.get(te.USER_DATA,"userData");y&&u(y);const g=await xt("avatar");p(g),yv(g)}catch(y){console.error("Failed to load user data:",y)}},b=()=>{s(null)};return t.jsxs(xe.div,{className:"absolute inset-0 bg-[#F2F0EB] z-0 overflow-hidden flex flex-col font-['Source_Han_Sans_CN_VF',sans-serif]",animate:{scale:a?.92:1,borderRadius:a?"16px":"0px",filter:a?"brightness(0.9)":"brightness(1)"},transition:{type:"spring",stiffness:300,damping:30},children:[t.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),t.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10 bg-[#F2F0EB]/95 backdrop-blur-sm border-b border-stone-200",children:[t.jsx("button",{onClick:e,className:"w-10 h-10 bg-[#EAE8E3] border border-[#D6D3CC] rounded-md flex items-center justify-center text-[#5A5A55] transition-colors hover:bg-white hover:text-black hover:border-[#999]",children:t.jsx(an,{className:"w-5 h-5",strokeWidth:2})}),t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("span",{className:"text-[10px] font-bold text-[#8C8C89] tracking-[0.2em] uppercase",children:""}),t.jsx("h1",{className:"text-base font-bold text-[#2C2C2C] tracking-wide",children:""})]}),t.jsx("button",{onClick:b,className:"w-10 h-10 bg-[#2C2C2C] text-[#F2F0EB] rounded-md flex items-center justify-center transition-colors hover:bg-black shadow-sm",children:t.jsx(is,{className:"w-5 h-5",strokeWidth:2})})]}),t.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-24",children:t.jsxs("div",{children:[t.jsx("div",{className:"flex justify-end mt-6 mb-2",children:t.jsxs("div",{className:"border border-[#8C8C89] text-[#8C8C89] px-2 py-0.5 text-[10px] font-mono uppercase tracking-widest flex items-center gap-2 opacity-60",children:[t.jsx(Tc,{className:"w-3 h-3"}),"-",new Date().getFullYear(),"-A"]})}),t.jsxs("div",{className:"relative mb-8 group cursor-pointer",onClick:n,children:[t.jsx("div",{className:"absolute -top-2 left-1/2 -translate-x-1/2 w-12 h-4 bg-[#D6D3CC] rounded-sm z-0"}),t.jsxs("div",{className:"relative bg-[#F9F9F7] border border-[#D6D3CC] p-5 shadow-[0_2px_8px_rgba(0,0,0,0.04)] z-10 transition-all group-active:border-[#B93636] group-active:shadow-md group-hover:border-[#B93636] group-hover:shadow-md",children:[t.jsx("div",{className:"absolute top-0 left-0 w-3 h-3 border-t border-l border-[#B93636] opacity-0 group-active:opacity-100 group-hover:opacity-100 transition-opacity"}),t.jsx("div",{className:"absolute top-0 right-0 w-3 h-3 border-t border-r border-[#B93636] opacity-0 group-active:opacity-100 group-hover:opacity-100 transition-opacity"}),t.jsx("div",{className:"absolute bottom-0 left-0 w-3 h-3 border-b border-l border-[#B93636] opacity-0 group-active:opacity-100 group-hover:opacity-100 transition-opacity"}),t.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 border-b border-r border-[#B93636] opacity-0 group-active:opacity-100 group-hover:opacity-100 transition-opacity"}),t.jsxs("div",{className:"flex gap-5",children:[t.jsxs("div",{className:"w-24 h-32 bg-[#E5E5E5] border border-[#D6D3CC] p-1 flex-shrink-0 relative overflow-hidden",children:[m?t.jsx("img",{src:m,alt:"Saniwa",className:"w-full h-full object-cover grayscale-[0.2] group-active:grayscale-0 group-hover:grayscale-0 transition-all"}):t.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-[#999] bg-[#F0F0F0]",children:[t.jsx(An,{className:"w-8 h-8 mb-1",strokeWidth:1.5}),t.jsx("span",{className:"text-[9px] uppercase",children:""})]}),t.jsx("div",{className:"absolute inset-0 border border-black/5 pointer-events-none"})]}),t.jsxs("div",{className:"flex-1 flex flex-col justify-between py-0.5",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"text-[10px] font-bold bg-[#2C2C2C] text-white px-1.5 py-0.5",children:""}),t.jsx("span",{className:"text-[10px] font-bold text-[#B93636] border border-[#B93636] px-1.5 py-0.5",children:""})]}),t.jsx("h2",{className:"text-xl font-bold text-[#2C2C2C] leading-tight mb-0.5 border-b border-[#D6D3CC] pb-2 inline-block min-w-[120px]",children:d.name||""})]}),t.jsxs("div",{className:"space-y-2 mt-2",children:[t.jsxs("div",{className:"grid grid-cols-[60px_1fr] text-xs",children:[t.jsx("span",{className:"text-[#8C8C89] font-bold uppercase text-[10px] tracking-wider mt-0.5",children:""}),t.jsx("span",{className:"font-medium text-[#4A4A4A] font-mono",children:d.fortress||"---"})]}),t.jsxs("div",{className:"grid grid-cols-[60px_1fr] text-xs",children:[t.jsx("span",{className:"text-[#8C8C89] font-bold uppercase text-[10px] tracking-wider mt-0.5",children:""}),t.jsx("span",{className:"font-medium text-[#4A4A4A] font-mono",children:d.country||"---"})]}),d.attendant&&t.jsxs("div",{className:"grid grid-cols-[60px_1fr] text-xs",children:[t.jsx("span",{className:"text-[#8C8C89] font-bold uppercase text-[10px] tracking-wider mt-0.5",children:""}),t.jsx("span",{className:"font-medium text-[#4A4A4A] flex items-center gap-1",children:d.attendant})]})]})]})]}),t.jsx("div",{className:"absolute right-4 bottom-4 opacity-10 pointer-events-none rotate-[-15deg]",children:t.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-[#2C2C2C] flex items-center justify-center",children:t.jsx("span",{className:"text-[10px] font-black uppercase text-[#2C2C2C]",children:""})})})]})]}),t.jsxs("div",{className:"flex items-end justify-between mb-4 border-b-2 border-[#2C2C2C] pb-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(i7,{className:"w-5 h-5 text-[#2C2C2C]"}),t.jsx("h3",{className:"text-base font-black text-[#2C2C2C] uppercase tracking-tight",children:""})]}),t.jsxs("span",{className:"text-xs font-mono font-bold text-[#2C2C2C]",children:[": ",l.length.toString().padStart(2,"0")]})]}),t.jsx("div",{className:"space-y-2",children:l.length===0?t.jsxs("div",{className:"py-16 text-center border border-dashed border-[#BBB] bg-[#F9F9F7]",children:[t.jsx(Y8,{className:"w-12 h-12 text-[#D6D3CC] mx-auto mb-3",strokeWidth:1}),t.jsx("p",{className:"text-[#8C8C89] text-sm font-medium uppercase tracking-wider",children:""}),t.jsx("button",{onClick:b,className:"mt-4 text-xs font-bold text-[#2C2C2C] underline hover:text-[#B93636]",children:"+ "})]}):l.map((y,g)=>t.jsx("div",{onClick:()=>s(y),className:"group relative bg-[#F9F9F7] border-l-[3px] border-l-[#D6D3CC] border-y border-r border-[#E5E5E5] p-3 pl-4 transition-colors cursor-pointer active:bg-[#EAE8E3] active:border-l-[#2C2C2C] hover:bg-[#EAE8E3] hover:border-l-[#2C2C2C]",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("span",{className:"text-[10px] font-mono text-[#8C8C89] w-6 text-right transition-colors group-active:text-[#B93636] group-hover:text-[#B93636]",children:y.serialNumber||(g+1).toString().padStart(3,"0")}),t.jsx("div",{className:"w-10 h-10 bg-[#E5E5E5] border border-[#D6D3CC] flex-shrink-0 overflow-hidden transition-all",children:y.avatarUrl?t.jsx("img",{src:y.avatarUrl,alt:"",className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full flex items-center justify-center",children:t.jsx(An,{className:"w-4 h-4 text-[#999]"})})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[t.jsx("h4",{className:"text-sm font-bold text-[#2C2C2C] tracking-wide group-active:text-black group-hover:text-black",children:y.name}),t.jsx("span",{className:"text-[9px] font-bold uppercase text-[#B93636] opacity-0 transition-opacity border border-[#B93636] px-1 group-active:opacity-100 group-hover:opacity-100",children:""})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-[10px] text-[#8C8C89] font-mono uppercase tracking-wider",children:""}),t.jsx("p",{className:"text-xs text-[#5A5A55] truncate font-medium",children:y.description||"---"})]})]}),t.jsx(os,{className:"w-4 h-4 text-[#D6D3CC] transition-colors group-active:text-[#2C2C2C] group-hover:text-[#2C2C2C]"})]})},y.id))})]})})]})}function i9({onBack:e,character:n}){const[s,a]=j.useState(""),[i,l]=j.useState(""),[c,d]=j.useState(null),[u,m]=j.useState(null),[p,f]=j.useState(""),[x,b]=j.useState(""),[y,g]=j.useState([]),[k,w]=j.useState([]),[C,N]=j.useState(!1),[A,P]=j.useState(!1),[B,$]=j.useState(!1),[D,T]=j.useState([]),H=j.useRef(null),K=n===null;j.useEffect(()=>{n&&(a(n.name),l(n.serialNumber||""),f(n.description),b(n.manifestDate||""),g(n.worldBooks||[]),(async()=>{if(n.avatar)if(n.avatar.startsWith("data:"))d(n.avatar),m(null);else{const O=await xt(n.avatar);d(O),m(n.avatar)}})())},[n]),j.useEffect(()=>{(async()=>{const O=await ae.get(te.WORLD_BOOKS,"world_books");O&&T(O.filter(V=>V.scope==="local"))})()},[]);const E=()=>{H.current?.click()},I=async Z=>{const O=Z.target.files?.[0];if(O){const V=Date.now(),ee=`character-${n?.id||V}-avatar`,q=await bs(ee,O);d(q),m(ee)}},S=async()=>{try{let O=await ae.get(te.CHARACTERS,"characters")||[];const V=new Date().toISOString();if(K){const ee={id:`char_${Date.now()}`,name:s.trim()||"",serialNumber:i.trim(),avatar:u,description:p.trim(),manifestDate:x.trim()||void 0,worldBooks:y,createdAt:V,updatedAt:V};O.push(ee)}else O=O.map(ee=>ee.id===n.id?{...ee,name:s.trim()||"",serialNumber:i.trim(),avatar:u,description:p.trim(),manifestDate:x.trim()||void 0,worldBooks:y,updatedAt:V}:ee);await ae.set(te.CHARACTERS,"characters",O),window.dispatchEvent(new Event("chat-settings-updated")),P(!0),setTimeout(()=>{P(!1),e()},1500)}catch(Z){console.error("Failed to save character:",Z)}},L=async()=>{if(n)try{const Z=await ae.get(te.CHARACTERS,"characters");if(Z){const O=Z.filter(V=>V.id!==n.id);await ae.set(te.CHARACTERS,"characters",O)}window.dispatchEvent(new Event("chat-settings-updated")),n.avatar&&await ka(n.avatar),N(!1),setTimeout(()=>e(),300)}catch(Z){console.error("Failed to delete character:",Z)}},z=Z=>{g(y.filter(O=>O!==Z))},R=()=>{w([...y]),$(!0)},U=Z=>{k.includes(Z)?w(k.filter(O=>O!==Z)):w([...k,Z])},W=()=>{g([...k]),$(!1)};return t.jsxs("div",{className:"fixed inset-0 bg-[#F2F0EB] z-50 overflow-hidden flex flex-col font-['Source_Han_Sans_CN_VF',sans-serif]",children:[t.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),t.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10 bg-[#F2F0EB]/95 backdrop-blur-sm border-b border-stone-200",children:[t.jsx("button",{onClick:e,className:"w-10 h-10 bg-[#EAE8E3] border border-[#D6D3CC] rounded-md flex items-center justify-center text-[#5A5A55] transition-colors active:bg-white active:text-[#B93636] hover:bg-white hover:text-[#B93636]",children:t.jsx(ht,{className:"w-5 h-5",strokeWidth:2})}),t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("span",{className:"text-[10px] font-bold text-[#8C8C89] tracking-[0.2em] uppercase",children:K?"":""}),t.jsx("h1",{className:"text-base font-bold text-[#2C2C2C] tracking-wide",children:K?"":""})]}),t.jsx("div",{className:"w-10"})]}),t.jsxs("div",{className:"flex-1 px-5 pb-28 overflow-y-auto",children:[t.jsxs("div",{className:"mt-6 mb-8 text-center",children:[t.jsx("div",{className:"inline-block border-b-2 border-[#2C2C2C] pb-1 mb-2",children:t.jsxs("h2",{className:"text-xl font-black text-[#2C2C2C] uppercase tracking-tighter flex items-center gap-2",children:[t.jsx(rp,{className:"w-5 h-5"}),""]})}),t.jsx("p",{className:"text-[10px] font-mono text-[#8C8C89] uppercase tracking-widest",children:""})]}),t.jsxs("div",{className:"space-y-6 max-w-[420px] mx-auto",children:[t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("input",{ref:H,type:"file",accept:"image/*",onChange:I,className:"hidden"}),t.jsxs("div",{onClick:E,className:"relative w-32 h-40 bg-[#E5E5E5] border-2 border-[#D6D3CC] p-2 cursor-pointer group transition-colors active:border-[#2C2C2C] hover:border-[#2C2C2C]",children:[t.jsxs("div",{className:"w-full h-full bg-[#F0F0F0] overflow-hidden relative",children:[c?t.jsx("img",{src:c,alt:"Avatar",className:"w-full h-full object-cover grayscale-[0.2] group-active:grayscale-0 group-hover:grayscale-0 transition-all"}):t.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-[#999]",children:[t.jsx(va,{className:"w-8 h-8 mb-1",strokeWidth:1.5}),t.jsx("span",{className:"text-[9px] uppercase tracking-widest",children:""})]}),t.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-active:opacity-100 group-hover:opacity-100 transition-opacity",children:t.jsx(tp,{className:"w-8 h-8 text-white"})})]}),t.jsx("div",{className:"absolute -top-1 -left-1 w-3 h-3 border-t-2 border-l-2 border-[#2C2C2C]"}),t.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 border-t-2 border-r-2 border-[#2C2C2C]"}),t.jsx("div",{className:"absolute -bottom-1 -left-1 w-3 h-3 border-b-2 border-l-2 border-[#2C2C2C]"}),t.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 border-b-2 border-r-2 border-[#2C2C2C]"})]}),t.jsx("p",{className:"mt-2 text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider",children:"1. "})]}),t.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)]",children:[t.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:" : "}),t.jsxs("div",{className:"space-y-4 mt-2",children:[t.jsxs("div",{className:"grid grid-cols-[1fr_80px] gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1",children:" / "}),t.jsx("input",{type:"text",value:s,onChange:Z=>a(Z.target.value),className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-lg font-bold text-[#2C2C2C] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors placeholder:text-[#CCC]",placeholder:""})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[t.jsx(Ig,{className:"w-3 h-3"})," "]}),t.jsx("input",{type:"text",value:i,onChange:Z=>l(Z.target.value),className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-lg font-bold text-[#2C2C2C] font-mono text-center focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors placeholder:text-[#CCC]",placeholder:"NO."})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[t.jsx(ur,{className:"w-3 h-3"})," "]}),t.jsx("input",{type:"text",value:x,onChange:Z=>b(Z.target.value),placeholder:"YYYY-MM-DD",className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-sm font-mono font-medium text-[#4A4A4A] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors"})]})]})]}),t.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)]",children:[t.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:" : "}),t.jsxs("div",{className:"mt-2",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("label",{className:"text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider flex items-center gap-1",children:[t.jsx(L6,{className:"w-3 h-3"})," "]}),t.jsx("button",{onClick:R,className:"text-[10px] font-bold text-[#2C2C2C] border border-[#2C2C2C] px-2 py-0.5 active:bg-[#2C2C2C] active:text-white hover:bg-[#2C2C2C] hover:text-white transition-colors uppercase",children:"+ "})]}),t.jsx("div",{className:"space-y-2",children:y.length===0?t.jsx("div",{className:"py-4 text-center border border-dashed border-[#D6D3CC] bg-[#F0F0F0]",children:t.jsx("span",{className:"text-[10px] text-[#999] font-mono uppercase",children:""})}):y.map(Z=>{const O=D.find(V=>V.id===Z);return O?t.jsxs("div",{className:"bg-white border border-[#E5E5E5] px-3 py-2 flex items-center justify-between group",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ig,{className:"w-3 h-3 text-[#8C8C89]"}),t.jsx("span",{className:"text-sm font-bold text-[#4A4A4A]",children:O.name})]}),t.jsx("button",{onClick:()=>z(Z),className:"text-[#D6D3CC] active:text-[#FF3B30] hover:text-[#FF3B30] transition-colors",children:t.jsx(ht,{className:"w-4 h-4"})})]},Z):null})})]})]}),t.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 pb-2 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)] h-[300px] flex flex-col",children:[t.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:" : "}),t.jsxs("div",{className:"flex-1 mt-2 relative",children:[t.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-10",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px)",backgroundSize:"100% 2rem",marginTop:"1.9rem"}}),t.jsx("textarea",{value:p,onChange:Z=>f(Z.target.value),className:"w-full h-full bg-transparent border-none text-sm text-[#4A4A4A] focus:outline-none resize-none leading-[2rem]",placeholder:"...",style:{lineHeight:"2rem"}})]}),t.jsx("div",{className:"text-right border-t border-[#E5E5E5] pt-2 mt-2",children:t.jsxs("span",{className:"text-[10px] font-mono text-[#8C8C89]",children:[": ",p.length]})})]})]})]}),t.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-6 bg-[#F2F0EB]/90 backdrop-blur-md border-t border-[#D6D3CC] z-40 flex gap-3 justify-center",children:[!K&&t.jsx("button",{onClick:()=>N(!0),className:"w-12 h-12 border-2 border-[#FF3B30] text-[#FF3B30] flex items-center justify-center active:bg-[#FF3B30] active:text-white hover:bg-[#FF3B30] hover:text-white transition-colors rounded-[2px]",children:t.jsx(Dn,{className:"w-5 h-5"})}),t.jsxs("button",{onClick:S,className:"flex-1 max-w-[300px] bg-[#2C2C2C] text-[#F2F0EB] h-12 rounded-[2px] font-bold text-sm tracking-wider uppercase active:bg-black hover:bg-black transition-colors shadow-lg flex items-center justify-center gap-2",children:[t.jsx(Ei,{className:"w-4 h-4"}),K?"":""]})]}),t.jsx(Ie,{children:B&&t.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center px-4",children:[t.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>$(!1),className:"absolute inset-0 bg-black/40 backdrop-blur-sm"}),t.jsxs(xe.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",duration:.3,bounce:0},className:"bg-[#F2F0EB] w-full max-w-[340px] border border-[#D6D3CC] shadow-2xl relative z-10",children:[t.jsxs("div",{className:"bg-[#2C2C2C] text-[#F2F0EB] px-4 py-3 flex justify-between items-center",children:[t.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:""}),t.jsx("button",{onClick:()=>$(!1),children:t.jsx(ht,{className:"w-4 h-4"})})]}),t.jsx("div",{className:"max-h-[50vh] overflow-y-auto p-2",children:D.length===0?t.jsx("div",{className:"p-4 text-center text-xs text-[#8C8C89] font-mono",children:""}):t.jsx("div",{className:"space-y-1",children:D.map(Z=>t.jsxs("button",{onClick:()=>U(Z.id),className:`w-full px-4 py-3 text-left text-sm font-bold border transition-all flex justify-between items-center ${k.includes(Z.id)?"bg-white border-[#2C2C2C] text-[#2C2C2C]":"bg-[#F9F9F7] border-transparent text-[#8C8C89] active:border-[#D6D3CC] hover:border-[#D6D3CC]"}`,children:[Z.name,k.includes(Z.id)&&t.jsx(wt,{className:"w-4 h-4"})]},Z.id))})}),t.jsxs("div",{className:"p-3 border-t border-[#D6D3CC] flex gap-2",children:[t.jsx("button",{onClick:()=>$(!1),className:"flex-1 py-2 text-xs font-bold text-[#5A5A55] active:bg-[#E5E5E5] hover:bg-[#E5E5E5]",children:""}),t.jsx("button",{onClick:W,className:"flex-1 py-2 bg-[#2C2C2C] text-[#F2F0EB] text-xs font-bold active:bg-black hover:bg-black",children:""})]})]})]})}),t.jsx(Ie,{children:A&&t.jsx(xe.div,{initial:{opacity:0,scale:1.5,rotate:-10},animate:{opacity:1,scale:1,rotate:-5},exit:{opacity:0},className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[70] pointer-events-none",children:t.jsxs("div",{className:"w-40 h-40 rounded-full border-[6px] border-[#34C759] flex flex-col items-center justify-center text-[#34C759] opacity-90 mix-blend-multiply bg-white/50 backdrop-blur-sm",children:[t.jsx(wt,{className:"w-12 h-12 mb-1",strokeWidth:4}),t.jsx("span",{className:"text-xl font-black uppercase tracking-tight",children:""}),t.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest mt-1",children:new Date().toLocaleDateString()})]})})}),t.jsx(Ie,{children:C&&t.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center px-4",children:[t.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>N(!1),className:"absolute inset-0 bg-black/40 backdrop-blur-sm"}),t.jsxs(xe.div,{initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:10},transition:{type:"spring",duration:.3,bounce:0},className:"bg-[#F2F0EB] border-2 border-[#FF3B30] p-6 max-w-xs w-full text-center shadow-2xl relative z-10",children:[t.jsx("div",{className:"w-12 h-12 bg-[#FF3B30] text-white rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(Dn,{className:"w-6 h-6"})}),t.jsx("h3",{className:"text-lg font-black text-[#2C2C2C] uppercase mb-2",children:""}),t.jsx("p",{className:"text-xs font-mono text-[#5A5A55] mb-6",children:""}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>N(!1),className:"flex-1 py-3 border border-[#D6D3CC] font-bold text-xs active:bg-white hover:bg-white transition-colors",children:""}),t.jsx("button",{onClick:L,className:"flex-1 py-3 bg-[#FF3B30] text-white font-bold text-xs active:bg-[#D32F2F] hover:bg-[#D32F2F] transition-colors",children:""})]})]})]})})]})}function o9({onBack:e}){const[n,s]=j.useState(""),[a,i]=j.useState(""),[l,c]=j.useState(""),[d,u]=j.useState(""),[m,p]=j.useState(""),[f,x]=j.useState(""),[b,y]=j.useState(""),[g,k]=j.useState(""),[w,C]=j.useState(!1);j.useEffect(()=>{(async()=>{try{const P=await ae.get(te.USER_DATA,"userData");P&&(s(P.name||""),i(P.country||""),c(P.fortress||""),u(P.attendant||""),p(P.initialSword||""),x(P.date||""),y(P.birthday||""));const B=await ae.get(te.USER_DATA,"user_description");B&&k(B)}catch(P){console.error("Failed to load user data:",P)}})()},[]);const N=async()=>{try{const A={name:n,country:a,fortress:l,attendant:d,initialSword:m,date:f,birthday:b};await ae.set(te.USER_DATA,"userData",A),await ae.set(te.USER_DATA,"user_description",g);const P=new CustomEvent("userDataChanged",{detail:A});window.dispatchEvent(P),window.dispatchEvent(new Event("chat-settings-updated")),C(!0),setTimeout(()=>{C(!1),e()},1500)}catch(A){console.error("Failed to save user data:",A)}};return t.jsxs("div",{className:"fixed inset-0 bg-[#F2F0EB] z-50 overflow-hidden flex flex-col font-['Source_Han_Sans_CN_VF',sans-serif]",children:[t.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),t.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10 bg-[#F2F0EB]/95 backdrop-blur-sm border-b border-stone-200",children:[t.jsx("button",{onClick:e,className:"w-10 h-10 bg-[#EAE8E3] border border-[#D6D3CC] rounded-md flex items-center justify-center text-[#5A5A55] transition-colors active:bg-white active:text-[#B93636] hover:bg-white hover:text-[#B93636]",children:t.jsx(ht,{className:"w-5 h-5",strokeWidth:2})}),t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("span",{className:"text-[10px] font-bold text-[#8C8C89] tracking-[0.2em] uppercase",children:"Form 10-24"}),t.jsx("h1",{className:"text-base font-bold text-[#2C2C2C] tracking-wide",children:""})]}),t.jsx("div",{className:"w-10"})," "]}),t.jsxs("div",{className:"flex-1 px-5 pb-28 overflow-y-auto",children:[t.jsxs("div",{className:"mt-6 mb-8 text-center",children:[t.jsx("div",{className:"inline-block border-b-2 border-[#2C2C2C] pb-1 mb-2",children:t.jsxs("h2",{className:"text-xl font-black text-[#2C2C2C] uppercase tracking-tighter flex items-center gap-2",children:[t.jsx(rp,{className:"w-5 h-5"}),""]})}),t.jsx("p",{className:"text-[10px] font-mono text-[#8C8C89] uppercase tracking-widest",children:""})]}),t.jsxs("div",{className:"space-y-6 max-w-[420px] mx-auto",children:[t.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)]",children:[t.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:""}),t.jsxs("div",{className:"space-y-4 mt-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1",children:""}),t.jsx("input",{type:"text",value:n,onChange:A=>s(A.target.value),className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-lg font-bold text-[#2C2C2C] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors placeholder:text-[#CCC]",placeholder:""})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[t.jsx(G6,{className:"w-3 h-3"})," "]}),t.jsx("input",{type:"text",value:l,onChange:A=>c(A.target.value),className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-sm font-medium text-[#4A4A4A] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[t.jsx(N_,{className:"w-3 h-3"})," "]}),t.jsx("input",{type:"text",value:a,onChange:A=>i(A.target.value),className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-sm font-medium text-[#4A4A4A] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors"})]})]})]})]}),t.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)]",children:[t.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:""}),t.jsxs("div",{className:"mt-2 space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-[10px] font-mono text-[#B93636] uppercase tracking-wider mb-1 flex items-center gap-1",children:[t.jsx(hv,{className:"w-3 h-3",fill:"currentColor"})," "]}),t.jsx("div",{className:"relative",children:t.jsx("input",{type:"text",value:d,onChange:A=>u(A.target.value),className:"w-full bg-[#FFF5F5] border-b-2 border-[#EFCACA] px-3 py-2 text-sm font-bold text-[#B93636] focus:outline-none focus:border-[#B93636] focus:bg-white transition-colors",placeholder:""})})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[t.jsx(r7,{className:"w-3 h-3"})," "]}),t.jsx("input",{type:"text",value:m,onChange:A=>p(A.target.value),className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-sm font-medium text-[#4A4A4A] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors",placeholder:""})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[t.jsx(ur,{className:"w-3 h-3"})," "]}),t.jsx("input",{type:"date",value:f,onChange:A=>x(A.target.value),className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-2 py-2 text-xs font-mono font-medium text-[#4A4A4A] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[t.jsx(E_,{className:"w-3 h-3"})," "]}),t.jsx("input",{type:"text",value:b,onChange:A=>y(A.target.value),placeholder:"MM-DD",className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-xs font-mono font-medium text-[#4A4A4A] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors"})]})]})]})]}),t.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 pb-2 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)] h-[240px] flex flex-col",children:[t.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:""}),t.jsxs("div",{className:"flex-1 mt-2 relative",children:[t.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-10",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px)",backgroundSize:"100% 2rem",marginTop:"1.9rem"}}),t.jsx("textarea",{value:g,onChange:A=>k(A.target.value),className:"w-full h-full bg-transparent border-none text-sm text-[#4A4A4A] focus:outline-none resize-none leading-[2rem]",placeholder:"...",style:{lineHeight:"2rem"}})]}),t.jsx("div",{className:"text-right border-t border-[#E5E5E5] pt-2 mt-2",children:t.jsxs("span",{className:"text-[10px] font-mono text-[#8C8C89]",children:[": ",g.length]})})]})]})]}),t.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-6 bg-[#F2F0EB]/90 backdrop-blur-md border-t border-[#D6D3CC] z-40",children:t.jsxs("div",{className:"max-w-[420px] mx-auto flex gap-4 items-center justify-between",children:[t.jsx("div",{className:"text-[10px] font-mono text-[#8C8C89] max-w-[150px]",children:""}),t.jsxs("button",{onClick:N,className:"bg-[#2C2C2C] text-[#F2F0EB] px-8 py-3 rounded-[2px] font-bold text-sm tracking-wider uppercase active:bg-black hover:bg-black transition-colors shadow-lg flex items-center gap-2",children:[t.jsx(Ei,{className:"w-4 h-4"}),""]})]})}),t.jsx(Ie,{children:w&&t.jsx(xe.div,{initial:{opacity:0,scale:1.5,rotate:-10},animate:{opacity:1,scale:1,rotate:-5},exit:{opacity:0},className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[60] pointer-events-none",children:t.jsxs("div",{className:"w-40 h-40 rounded-full border-[6px] border-[#34C759] flex flex-col items-center justify-center text-[#34C759] opacity-90 mix-blend-multiply bg-white/50 backdrop-blur-sm",children:[t.jsx(wt,{className:"w-12 h-12 mb-1",strokeWidth:4}),t.jsx("span",{className:"text-xl font-black uppercase tracking-tight",children:""}),t.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest mt-1",children:new Date().toLocaleDateString()})]})})})]})}function l9({onClose:e}){const[n,s]=j.useState("list"),[a,i]=j.useState(null),[l,c]=j.useState(Date.now()),d=()=>{s("editUser")},u=p=>{i(p),s("editCharacter")},m=()=>{s("list"),i(null),c(Date.now())};return t.jsxs("div",{className:"relative w-full h-full bg-[#F2F0EB]",children:[t.jsx(a9,{onClose:e,onEditUser:d,onEditCharacter:u,isBackground:n!=="list",lastUpdated:l}),t.jsxs(Ie,{children:[n==="editUser"&&t.jsx(xe.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"absolute inset-0 z-20",style:{willChange:"transform"},children:t.jsx(o9,{onBack:m})},"editUser"),n==="editCharacter"&&t.jsx(xe.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"absolute inset-0 z-20",style:{willChange:"transform"},children:t.jsx(i9,{onBack:m,character:a})},"editCharacter")]}),t.jsx(Ie,{children:n!=="list"&&t.jsx(xe.div,{initial:{opacity:0},animate:{opacity:.3},exit:{opacity:0},className:"absolute inset-0 bg-black z-10 pointer-events-none"})})]})}function c9(){const e={user:`background: linear-gradient(75deg, rgba(172, 188, 166, 1), rgba(172, 188, 166, 1), rgba(172, 188, 166, 1));
color: #ffffff;
border-radius: 8px;
padding: 0.625rem 0.875rem;
max-width: 70vw;`,character:`background: linear-gradient(-75deg, rgba(245, 245, 245, 1), rgba(245, 245, 245, 1), rgba(245, 245, 245, 1));
color: #333333;
border-radius: 8px;
padding: 0.625rem 0.875rem;
max-width: 70vw;`,userQuote:`background: #9BAD96;
color: rgba(255, 255, 255, 0.8);
border-radius: 4px;
padding: 0.5rem;
margin-bottom: 0.5rem;`,characterQuote:`background: #e8e8e8;
color: #666666;
border-radius: 4px;
padding: 0.5rem;
margin-bottom: 0.5rem;`},[n,s]=j.useState(()=>Le.chatSettings||{userAvatar:null,userNickname:"",contextMessageCount:10,chatBackground:null,enabledWorldBooks:[],timeAwareness:!0,bubbleStyles:e,timestampStyle:"default",theme:"light"}),[a,i]=j.useState(()=>Le.chatSettings||{userAvatar:null,userNickname:"",contextMessageCount:10,chatBackground:null,enabledWorldBooks:[],timeAwareness:!0,bubbleStyles:e,timestampStyle:"default",theme:"light"}),[l,c]=j.useState(null),[d,u]=j.useState(null),[m,p]=j.useState(!1),[f,x]=j.useState([]),[b,y]=j.useState(!1),[g,k]=j.useState(!1),[w,C]=j.useState([]),[N,A]=j.useState(""),[P,B]=j.useState(!1),[$,D]=j.useState([]),[T,H]=j.useState(()=>{const se=Le.chatSettings;return se?.theme?se.theme==="dark"||se.theme==="dark-frosted":se?.darkMode||!1});j.useEffect(()=>{H(a.theme==="dark"||a.theme==="dark-frosted")},[a.theme]);const K=se=>{const ge={user:se?.user||e.user,userQuote:se?.userQuote||e.userQuote,character:se?.character||e.character,characterQuote:se?.characterQuote||e.characterQuote};return`/*  */
.user-bubble {
  ${ge.user.split(`
`).join(`
  `)}
}

/*  */
.user-quote {
  ${ge.userQuote.split(`
`).join(`
  `)}
}

/*  */
.character-bubble {
  ${ge.character.split(`
`).join(`
  `)}
}

/*  */
.character-quote {
  ${ge.characterQuote.split(`
`).join(`
  `)}
}`},E=se=>{const ge={...e},Me=se.match(/\.user-bubble\s*\{([^}]*)\}/),M=se.match(/\.user-quote\s*\{([^}]*)\}/),me=se.match(/\.character-bubble\s*\{([^}]*)\}/),he=se.match(/\.character-quote\s*\{([^}]*)\}/);return Me&&(ge.user=Me[1].trim().replace(/\s+/g," ").replace(/; /g,`;
`)),M&&(ge.userQuote=M[1].trim().replace(/\s+/g," ").replace(/; /g,`;
`)),me&&(ge.character=me[1].trim().replace(/\s+/g," ").replace(/; /g,`;
`)),he&&(ge.characterQuote=he[1].trim().replace(/\s+/g," ").replace(/; /g,`;
`)),ge};j.useEffect(()=>{I(),S(),L()},[]),j.useEffect(()=>{(async()=>{if(a.userAvatar)if(a.userAvatar.startsWith("data:"))c(a.userAvatar);else{const ge=await xt(a.userAvatar);c(ge)}else c(null);if(a.chatBackground)if(a.chatBackground.startsWith("data:"))u(a.chatBackground);else{const ge=await xt(a.chatBackground);u(ge)}else u(null)})()},[a.userAvatar,a.chatBackground]);const I=async()=>{try{const se=await ae.get(te.CHATS,"chat_settings");if(se){const ge={...se,enabledWorldBooks:se.enabledWorldBooks||[],timeAwareness:se.timeAwareness!==void 0?se.timeAwareness:!0,bubbleStyles:se.bubbleStyles||e,timestampStyle:se.timestampStyle||"default",theme:se.theme||(se.darkMode?"dark":"light")};s(ge),i(ge),Le.chatSettings=ge}else{const ge=await ae.get(te.USER_DATA,"userData");if(ge){const Me={userAvatar:null,userNickname:ge.name||"",contextMessageCount:10,chatBackground:null,enabledWorldBooks:[],timeAwareness:!0,bubbleStyles:e,timestampStyle:"default",theme:"light"};s(Me),i(Me),Le.chatSettings=Me}}}catch(se){console.error("Failed to load chat settings:",se)}},S=async()=>{try{const se=await ae.get(te.WORLD_BOOKS,"world_books");if(se){const ge=se.filter(Me=>Me.scope==="local");x(ge)}}catch(se){console.error("Failed to load world books:",se)}},L=async()=>{try{const se=await ae.get(te.BUBBLE_PRESETS,"bubble_presets");se&&C(se)}catch(se){console.error("Failed to load bubble presets:",se)}},z=async se=>{try{i(se),s(se),await ae.set(te.CHATS,"chat_settings",se),Le.chatSettings=se,window.dispatchEvent(new Event("chat-settings-updated"))}catch(ge){console.error("Failed to save settings instantly:",ge)}},R=se=>{const ge={...a,userNickname:se};z(ge)},U=se=>{const ge={...a,contextMessageCount:se};z(ge)},W=()=>{const se=document.createElement("input");se.type="file",se.accept="image/*",se.onchange=async ge=>{const Me=ge.target.files?.[0];if(Me){y(!0);try{const M=await bs("chat-avatar",Me),me={...a,userAvatar:"chat-avatar"};a.userAvatar==="chat-avatar-temp"&&await ka("chat-avatar-temp"),c(M),z(me)}catch(M){console.error(":",M)}finally{y(!1)}}},se.click()},Z=()=>{const se=document.createElement("input");se.type="file",se.accept="image/*",se.onchange=async ge=>{const Me=ge.target.files?.[0];if(Me){y(!0);try{const M=await bs("chat-background",Me),me={...a,chatBackground:"chat-background"};a.chatBackground==="chat-background-temp"&&await ka("chat-background-temp"),u(M),z(me)}catch(M){console.error(":",M)}finally{y(!1)}}},se.click()},O=()=>{const se={...a,chatBackground:null};u(null),z(se)},V=async()=>{try{await z(a),p(!0),setTimeout(()=>p(!1),2e3)}catch(se){console.error("Failed to apply bubble styles:",se)}},ee=()=>{D([...a.enabledWorldBooks]),B(!0)},q=se=>{$.includes(se)?D($.filter(ge=>ge!==se)):D([...$,se])},G=()=>{const se={...a,enabledWorldBooks:[...$]};z(se),B(!1)},Q=se=>{const ge={...a,enabledWorldBooks:a.enabledWorldBooks.filter(Me=>Me!==se)};z(ge)},le=se=>{const ge={};return se&&se.split(";").filter(M=>M.trim()).forEach(M=>{const[me,he]=M.split(":").map(J=>J.trim());if(me&&he){const J=me.replace(/-([a-z])/g,X=>X[1].toUpperCase());ge[J]=he}}),ge},ne=async()=>{if(!N.trim()){alert("");return}const se={id:Date.now().toString(),name:N.trim(),styles:a.bubbleStyles||e,createdAt:new Date().toISOString()},ge=[...w,se];C(ge),await ae.set(te.BUBBLE_PRESETS,"bubble_presets",ge),A(""),p(!0),setTimeout(()=>p(!1),1500)},ie=se=>{i({...a,bubbleStyles:se.styles})},ve=async se=>{const ge=w.filter(Me=>Me.id!==se);C(ge),await ae.set(te.BUBBLE_PRESETS,"bubble_presets",ge)};return t.jsxs("div",{className:`flex-1 overflow-y-auto flex flex-col ${a.theme==="light-frosted"||a.theme==="dark-frosted"?"bg-transparent":T?"bg-[#121212]":"bg-white"}`,children:[t.jsxs("div",{className:"flex-1 px-5 py-6",children:[t.jsxs("div",{className:"mb-8 flex flex-col items-center",children:[t.jsx("button",{onClick:W,className:`w-24 h-24 rounded-full flex items-center justify-center overflow-hidden active:opacity-70 hover:opacity-70 transition-opacity ${a.theme==="light-frosted"?"bg-white/40":a.theme==="dark-frosted"?"bg-black/40":T?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,children:l?t.jsx("img",{src:l,alt:"Avatar",className:"w-full h-full object-cover"}):t.jsx(tp,{className:"w-8 h-8 text-[#999]",strokeWidth:2})}),t.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[13px] mt-2 ${T?"text-[#888]":"text-[#999]"}`,children:""})]}),t.jsxs("div",{className:"mb-8",children:[t.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] mb-3 ${T?"text-white":"text-[#333]"}`,children:""}),t.jsx("input",{type:"text",value:a.userNickname,onChange:se=>R(se.target.value),placeholder:"",className:`w-full px-4 py-3 rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] outline-none transition-colors ${a.theme==="light-frosted"?"bg-white/40 text-[#333] placeholder:text-[#999] focus:bg-white/60":a.theme==="dark-frosted"?"bg-black/40 text-white placeholder:text-[#888] focus:bg-black/60":T?"bg-[#1e1e1e] text-white placeholder:text-[#888] focus:bg-[#2d2d2d]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999] focus:bg-[#ebebeb]"}`})]}),t.jsxs("div",{className:"mb-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] ${T?"text-white":"text-[#333]"}`,children:"AI"}),t.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] text-[#7B9E7B]",children:a.contextMessageCount})]}),t.jsx("div",{className:"px-1",children:t.jsx("input",{type:"range",min:"1",max:"2000",value:a.contextMessageCount,onChange:se=>U(parseInt(se.target.value)),className:`w-full h-2 rounded-lg appearance-none cursor-pointer slider ${a.theme==="light-frosted"?"bg-white/40":a.theme==="dark-frosted"?"bg-white/10":T?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,style:{background:`linear-gradient(to right, #7B9E7B 0%, #7B9E7B ${(a.contextMessageCount-1)/1999*100}%, ${a.theme==="light-frosted"?"rgba(255,255,255,0.4)":a.theme==="dark-frosted"?"rgba(255,255,255,0.1)":T?"#1e1e1e":"#f5f5f5"} ${(a.contextMessageCount-1)/1999*100}%, ${a.theme==="light-frosted"?"rgba(255,255,255,0.4)":a.theme==="dark-frosted"?"rgba(255,255,255,0.1)":T?"#1e1e1e":"#f5f5f5"} 100%)`}})}),t.jsxs("div",{className:"flex justify-between mt-2 px-1",children:[t.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] ${T?"text-[#888]":"text-[#999]"}`,children:"1"}),t.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] ${T?"text-[#888]":"text-[#999]"}`,children:"2000"})]}),t.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[13px] mt-3 ${T?"text-[#888]":"text-[#999]"}`,children:"AIAI"})]}),t.jsx("div",{className:"mb-8",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] mb-1 ${T?"text-white":"text-[#333]"}`,children:""}),t.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[13px] ${T?"text-[#888]":"text-[#999]"}`,children:""})]}),t.jsx("button",{onClick:()=>{const se={...a,timeAwareness:!a.timeAwareness};z(se)},className:`w-12 h-7 rounded-full transition-colors flex items-center px-0.5 hover:opacity-80 active:opacity-80 ${a.timeAwareness?"bg-[#7B9E7B]":"bg-[#d0d0d0]"}`,children:t.jsx("div",{className:`w-6 h-6 bg-white rounded-full transition-transform ${a.timeAwareness?"translate-x-5":"translate-x-0"}`})})]})}),t.jsxs("div",{className:"mb-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] ${T?"text-white":"text-[#333]"}`,children:""}),f.length>0&&t.jsx("button",{onClick:ee,className:"w-8 h-8 bg-[#7B9E7B] rounded-full flex items-center justify-center active:opacity-80 hover:opacity-80 transition-opacity",children:t.jsx(is,{className:"w-5 h-5 text-white",strokeWidth:2})})]}),f.length===0?t.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] ${T?"text-[#888]":"text-[#999]"}`,children:""}):a.enabledWorldBooks.length===0?t.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] ${T?"text-[#888]":"text-[#999]"}`,children:""}):t.jsx("div",{className:"flex flex-col gap-2",children:a.enabledWorldBooks.map(se=>{const ge=f.find(Me=>Me.id===se);return ge?t.jsxs("div",{className:`rounded-lg px-4 py-3 flex items-center justify-between ${a.theme==="light-frosted"?"bg-white/40":a.theme==="dark-frosted"?"bg-black/40":T?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,children:[t.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] ${T?"text-white":"text-[#333]"}`,children:ge.name}),t.jsx("button",{onClick:()=>Q(se),className:"text-[#999] hover:text-[#333] active:text-[#333] transition-colors",children:t.jsx(ht,{className:"w-5 h-5",strokeWidth:2})})]},se):null})})]}),t.jsxs("div",{className:"mb-8",children:[t.jsxs("button",{onClick:()=>k(!g),className:`w-full flex items-center justify-between p-4 rounded-lg transition-colors ${a.theme==="light-frosted"?"bg-white/40 active:bg-white/60 hover:bg-white/60":a.theme==="dark-frosted"?"bg-black/40 active:bg-black/60 hover:bg-black/60":T?"bg-[#1e1e1e] active:bg-[#2d2d2d] hover:bg-[#2d2d2d]":"bg-[#f5f5f5] active:bg-[#ebebeb] hover:bg-[#ebebeb]"}`,children:[t.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] ${T?"text-white":"text-[#333]"}`,children:""}),t.jsx(ba,{className:`w-5 h-5 transition-transform ${g?"rotate-180":""} ${T?"text-[#a0a0a0]":"text-[#666]"}`,strokeWidth:2})]}),t.jsx(Ie,{children:g&&t.jsx(xe.div,{initial:{height:0,opacity:0,marginTop:0},animate:{height:"auto",opacity:1,marginTop:16},exit:{height:0,opacity:0,marginTop:0},transition:{type:"spring",stiffness:300,damping:30},className:"overflow-hidden",children:t.jsxs("div",{className:"flex flex-col gap-6",children:[t.jsxs("div",{children:[t.jsx("h4",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] mb-3 ${T?"text-white":"text-[#333]"}`,children:""}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>{const se={...a,theme:"light",darkMode:!1};z(se)},className:`flex-1 py-3 rounded-lg border-2 font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] transition-all ${a.theme==="light"?"border-[#7B9E7B] bg-[#7B9E7B]/10 text-[#7B9E7B]":T?"border-[#2d2d2d] bg-[#1e1e1e] text-[#888]":"border-[#e5e5e5] bg-[#f5f5f5] text-[#666]"}`,children:""}),t.jsx("button",{onClick:()=>{const se={...a,theme:"dark",darkMode:!0};z(se)},className:`flex-1 py-3 rounded-lg border-2 font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] transition-all ${a.theme==="dark"?"border-[#7B9E7B] bg-[#7B9E7B]/10 text-[#7B9E7B]":T?"border-[#2d2d2d] bg-[#1e1e1e] text-[#888]":"border-[#e5e5e5] bg-[#f5f5f5] text-[#666]"}`,children:""}),t.jsx("button",{onClick:()=>{const se={...a,theme:"light-frosted",darkMode:!1};z(se)},className:`flex-1 py-3 rounded-lg border-2 font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] transition-all ${a.theme==="light-frosted"?"border-[#7B9E7B] bg-[#7B9E7B]/10 text-[#7B9E7B]":T?"border-[#2d2d2d] bg-[#1e1e1e] text-[#888]":"border-[#e5e5e5] bg-[#f5f5f5] text-[#666]"}`,children:""}),t.jsx("button",{onClick:()=>{const se={...a,theme:"dark-frosted",darkMode:!0};z(se)},className:`flex-1 py-3 rounded-lg border-2 font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] transition-all ${a.theme==="dark-frosted"?"border-[#7B9E7B] bg-[#7B9E7B]/10 text-[#7B9E7B]":T?"border-[#2d2d2d] bg-[#1e1e1e] text-[#888]":"border-[#e5e5e5] bg-[#f5f5f5] text-[#666]"}`,children:""})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] mb-3 ${T?"text-white":"text-[#333]"}`,children:""}),t.jsxs("button",{onClick:Z,className:`w-full px-4 py-3 rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] transition-colors flex items-center justify-center gap-2 ${a.theme==="light-frosted"?"bg-white/40 text-[#333] active:bg-white/60 hover:bg-white/60":a.theme==="dark-frosted"?"bg-black/40 text-white active:bg-black/60 hover:bg-black/60":T?"bg-[#1e1e1e] text-white active:bg-[#2d2d2d] hover:bg-[#2d2d2d]":"bg-[#f5f5f5] text-[#333] active:bg-[#ebebeb] hover:bg-[#ebebeb]"}`,children:[t.jsx(va,{className:`w-5 h-5 ${T?"text-[#a0a0a0]":"text-[#666]"}`,strokeWidth:2}),t.jsx("span",{children:a.chatBackground?"":""})]}),a.chatBackground&&t.jsxs("button",{onClick:O,className:`mt-2 w-full px-4 py-2.5 rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] transition-colors flex items-center justify-center gap-2 ${a.theme==="light-frosted"?"bg-red-50/50 text-[#ff4d4f] active:bg-red-50 hover:bg-red-50":a.theme==="dark-frosted"?"bg-red-900/20 text-[#ff6b6b] active:bg-red-900/30 hover:bg-red-900/30":T?"bg-[#2a1a1a] text-[#ff6b6b] active:bg-[#3a2a2a] hover:bg-[#3a2a2a]":"bg-[#fff0f0] text-[#ff4d4f] active:bg-[#ffe5e5] hover:bg-[#ffe5e5]"}`,children:[t.jsx(Dn,{className:"w-4 h-4",strokeWidth:2}),t.jsx("span",{children:""})]}),d&&t.jsx("div",{className:"mt-3 rounded-lg overflow-hidden",children:t.jsx("img",{src:d,alt:"Background Preview",className:"w-full h-32 object-cover"})})]}),t.jsxs("div",{children:[t.jsx("h4",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] mb-3 ${T?"text-white":"text-[#333]"}`,children:""}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>{const se={...a,timestampStyle:"default"};z(se)},className:`flex-1 py-3 rounded-lg border-2 font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] transition-all ${a.timestampStyle!=="inside"?"border-[#7B9E7B] bg-[#7B9E7B]/10 text-[#7B9E7B]":T?"border-[#2d2d2d] bg-[#1e1e1e] text-[#888]":"border-[#e5e5e5] bg-[#f5f5f5] text-[#666]"}`,children:" ()"}),t.jsx("button",{onClick:()=>{const se={...a,timestampStyle:"inside"};z(se)},className:`flex-1 py-3 rounded-lg border-2 font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] transition-all ${a.timestampStyle==="inside"?"border-[#7B9E7B] bg-[#7B9E7B]/10 text-[#7B9E7B]":T?"border-[#2d2d2d] bg-[#1e1e1e] text-[#888]":"border-[#e5e5e5] bg-[#f5f5f5] text-[#666]"}`,children:" ()"})]}),t.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] mt-2 ${T?"text-[#888]":"text-[#999]"}`,children:'""'})]}),t.jsxs("div",{children:[t.jsx("h4",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] mb-3 ${T?"text-white":"text-[#333]"}`,children:"CSS"}),t.jsxs("div",{className:`mb-4 p-3 rounded-lg ${a.theme==="light-frosted"?"bg-white/40":a.theme==="dark-frosted"?"bg-black/20":T?"bg-[#181818]":"bg-[#fafafa]"}`,children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("input",{type:"text",value:N,onChange:se=>A(se.target.value),placeholder:"",className:`flex-1 px-3 py-2 border rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] outline-none transition-colors ${a.theme==="light-frosted"?"bg-white/60 border-white/40 text-[#333] placeholder:text-[#999] focus:border-[#7B9E7B]":a.theme==="dark-frosted"?"bg-black/40 border-white/10 text-white placeholder:text-[#888] focus:border-[#7B9E7B]":T?"bg-[#1e1e1e] border-[#333] text-white placeholder:text-[#888] focus:border-[#7B9E7B]":"bg-white border-[#e0e0e0] text-[#333] placeholder:text-[#999] focus:border-[#7B9E7B]"}`}),t.jsxs("button",{onClick:ne,className:"px-3 py-2 bg-[#7B9E7B] rounded-lg text-white active:opacity-80 hover:opacity-80 transition-opacity flex items-center gap-1.5",children:[t.jsx(Ei,{className:"w-4 h-4",strokeWidth:2}),t.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[13px]",children:""})]})]}),w.length>0&&t.jsx("div",{className:"flex flex-col gap-2",children:w.map(se=>t.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg border ${a.theme==="light-frosted"?"bg-white/60 border-white/40":a.theme==="dark-frosted"?"bg-black/40 border-white/10":T?"bg-[#1e1e1e] border-[#333]":"bg-white border-[#e0e0e0]"}`,children:[t.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] flex-1 ${T?"text-white":"text-[#333]"}`,children:se.name}),t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("button",{onClick:()=>ie(se),className:"px-2.5 py-1.5 bg-[#7B9E7B] rounded font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[12px] text-white active:opacity-80 hover:opacity-80 transition-opacity",children:""}),t.jsx("button",{onClick:()=>ve(se.id),className:`p-1.5 rounded transition-colors ${a.theme==="light-frosted"?"bg-black/5 text-[#666] active:bg-black/10 hover:bg-black/10":a.theme==="dark-frosted"?"bg-white/10 text-[#a0a0a0] active:bg-white/20 hover:bg-white/20":T?"bg-[#2d2d2d] text-[#a0a0a0] active:bg-[#3d3d3d] hover:bg-[#3d3d3d]":"bg-[#f0f0f0] text-[#666] active:bg-[#e0e0e0] hover:bg-[#e0e0e0]"}`,children:t.jsx(Dn,{className:"w-3.5 h-3.5",strokeWidth:2})})]})]},se.id))})]}),t.jsx("textarea",{value:K(a.bubbleStyles||e),onChange:se=>{const ge=E(se.target.value);i({...a,bubbleStyles:ge})},placeholder:"CSS...",className:`w-full px-3 py-2 rounded-lg font-mono text-[11px] outline-none transition-colors resize-y min-h-[300px] ${a.theme==="light-frosted"?"bg-white/40 text-[#333] placeholder:text-[#999] focus:bg-white/60":a.theme==="dark-frosted"?"bg-black/40 text-white placeholder:text-[#888] focus:bg-black/60":T?"bg-[#1e1e1e] text-white placeholder:text-[#888] focus:bg-[#2d2d2d]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999] focus:bg-[#ebebeb]"}`,style:{whiteSpace:"pre",overflowWrap:"normal",overflowX:"auto"}}),t.jsxs("div",{className:`mt-4 p-3 rounded-lg bg-cover bg-center ${!d&&(a.theme==="light-frosted"?"bg-white/40":a.theme==="dark-frosted"?"bg-black/20":T?"bg-[#181818]":"bg-[#fafafa]")}`,style:d?{backgroundImage:`url(${d})`}:{},children:[t.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[12px] mb-3 drop-shadow-md ${T||d?"text-[#e0e0e0]":"text-[#999]"}`,children:""}),t.jsx("div",{className:"flex justify-start mb-3",children:t.jsxs("div",{style:le((a.bubbleStyles||e).character),children:[t.jsxs("div",{style:le((a.bubbleStyles||e).characterQuote),children:[t.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px]",children:""}),t.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px]",children:""})]}),t.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px]",children:""})]})}),t.jsx("div",{className:"flex justify-end",children:t.jsxs("div",{style:le((a.bubbleStyles||e).user),children:[t.jsxs("div",{style:le((a.bubbleStyles||e).userQuote),children:[t.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px]",children:""}),t.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px]",children:""})]}),t.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px]",children:""})]})})]}),t.jsx("button",{onClick:V,className:"mt-4 w-full py-3 bg-[#7B9E7B] rounded-lg font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[16px] text-white active:opacity-80 hover:opacity-80 transition-opacity flex items-center justify-center",children:""}),t.jsx("button",{onClick:()=>i({...a,bubbleStyles:e}),className:`mt-4 w-full px-4 py-2 border rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] transition-colors ${a.theme==="light-frosted"?"bg-white/40 border-white/40 text-[#666] active:bg-white/60 hover:bg-white/60":a.theme==="dark-frosted"?"bg-black/40 border-white/10 text-[#a0a0a0] active:bg-black/60 hover:bg-black/60":T?"bg-[#1e1e1e] border-[#333] text-[#a0a0a0] active:bg-[#2d2d2d] hover:bg-[#2d2d2d]":"bg-white border-[#d0d0d0] text-[#666] active:bg-[#f5f5f5] hover:bg-[#f5f5f5]"}`,children:""})]})]})})})]})]}),m&&t.jsx("div",{className:"fixed inset-0 bg-black/40 z-[80] flex items-center justify-center p-4",children:t.jsx("div",{className:`rounded-2xl w-64 px-6 py-5 shadow-2xl transition-all ${a.theme==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":a.theme==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":T?"bg-[#1e1e1e]":"bg-white"}`,children:t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-3 ${a.theme==="light-frosted"?"bg-[#7B9E7B]/90":"bg-[#7B9E7B]"}`,children:t.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),t.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[16px] ${T?"text-white":"text-[#333]"}`,children:""})]})})}),b&&t.jsx("div",{className:"fixed inset-0 bg-black/40 z-[80] flex items-center justify-center p-4",children:t.jsx("div",{className:`rounded-2xl w-64 px-6 py-5 shadow-2xl transition-all ${a.theme==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":a.theme==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":T?"bg-[#1e1e1e]":"bg-white"}`,children:t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("div",{className:"w-12 h-12 rounded-full bg-[#7B9E7B] flex items-center justify-center mb-3",children:t.jsx("div",{className:"w-6 h-6 border-3 border-white border-t-transparent rounded-full animate-spin"})}),t.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[16px] ${T?"text-white":"text-[#333]"}`,children:"..."})]})})}),P&&t.jsx("div",{className:"fixed inset-0 bg-black/40 z-[1200] flex items-center justify-center p-4",children:t.jsxs("div",{className:`rounded-2xl p-6 w-full max-w-[360px] shadow-xl max-h-[70vh] overflow-y-auto ${a.theme==="light-frosted"?"bg-white/80 backdrop-blur-md":T?"bg-[#1e1e1e]":"bg-white"}`,children:[t.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-4 ${T?"text-white":"text-[#333]"}`,children:""}),f.length===0?t.jsx("div",{className:"py-8 text-center",children:t.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] ${T?"text-[#888]":"text-[#999]"}`,children:""})}):t.jsx("div",{className:"flex flex-col gap-3 mb-6",children:f.map(se=>t.jsxs("button",{onClick:()=>q(se.id),className:"flex items-center gap-3 active:opacity-70 hover:opacity-70 transition-opacity",children:[t.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors flex-shrink-0 ${$.includes(se.id)?"bg-[#7B9E7B] border-[#7B9E7B]":a.theme==="light-frosted"?"bg-white/40 border-black/5":T?"bg-[#1e1e1e] border-[#333]":"bg-white border-[#d0d0d0]"}`,children:$.includes(se.id)&&t.jsx(wt,{className:"w-3.5 h-3.5 text-white",strokeWidth:3})}),t.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] text-left flex-1 ${T?"text-white":"text-[#333]"}`,children:se.name})]},se.id))}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>B(!1),className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors ${a.theme==="light-frosted"?"bg-black/5 text-[#666] hover:bg-black/10 active:bg-black/10":T?"bg-[#2d2d2d] text-[#a0a0a0] hover:bg-[#3d3d3d] active:bg-[#3d3d3d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),t.jsx("button",{onClick:G,className:"flex-1 py-2.5 rounded-xl bg-[#7B9E7B] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity",children:""})]})]})})]})}function d9({onClose:e,onOpenChat:n}){const[s,a]=j.useState("messages"),[i,l]=j.useState([]),[c,d]=j.useState(!1),[u,m]=j.useState(!1),[p,f]=j.useState([]),[x,b]=j.useState(()=>Le.chatSettings?.darkMode||!1),[y,g]=j.useState(()=>Le.chatSettings?.theme||(Le.chatSettings?.darkMode?"dark":"light")),[k,w]=j.useState(null);j.useEffect(()=>{N(),A(),P();const E=async()=>{const S=Le.chatSettings;b(S?.darkMode||!1);const L=S?.theme||(S?.darkMode?"dark":"light");if(g(L),(L==="light-frosted"||L==="dark-frosted")&&S?.chatBackground)if(S.chatBackground.startsWith("data:"))w(S.chatBackground);else try{const z=await xt(S.chatBackground);w(z)}catch(z){console.error("Failed to load background image:",z)}else w(null);A()};window.addEventListener("chat-settings-updated",E);const I=S=>{const{type:L,payload:z}=S.data;L==="AI_TASK_COMPLETED"&&(z?.taskType==="memory_extraction"?(console.log("[ChatList] "),window.dispatchEvent(new CustomEvent("character-memories-updated",{detail:{characterId:z.characterId,memories:z.result?.memories}}))):(console.log("[ChatList]  AI "),A()))};return"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",I),()=>{window.removeEventListener("chat-settings-updated",E),"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener("message",I)}},[]);const C=E=>{if(!E)return"";const I=new Date,S=new Date(E),L=new Date(I);L.setHours(0,0,0,0);const z=new Date(S);z.setHours(0,0,0,0);const R=Math.floor((L.getTime()-z.getTime())/(1e3*60*60*24)),U=S.getHours().toString().padStart(2,"0"),W=S.getMinutes().toString().padStart(2,"0");if(R===0)return`${U}:${W}`;if(R===1)return` ${U}:${W}`;if(R<7)return["","","","","","",""][S.getDay()];if(I.getFullYear()===S.getFullYear()){const ee=S.getMonth()+1,q=S.getDate();return`${ee}/${q}`}const Z=S.getFullYear(),O=S.getMonth()+1,V=S.getDate();return`${Z}/${O}/${V}`},N=async()=>{try{const E=await ae.get(te.CHATS,"chat_settings");if(E){Le.chatSettings?Le.chatSettings={...Le.chatSettings,...E}:Le.chatSettings=E,E.darkMode!==void 0&&b(E.darkMode);const I=E.theme||(E.darkMode?"dark":"light");if(g(I),(I==="light-frosted"||I==="dark-frosted")&&E.chatBackground)if(E.chatBackground.startsWith("data:"))w(E.chatBackground);else try{const S=await xt(E.chatBackground);w(S)}catch(S){console.error("Failed to load background image:",S)}}}catch(E){console.error("Failed to load global chat settings:",E)}},A=async()=>{try{const E=await ae.get(te.CHATS,"chat_list");if(E){const I=await Promise.all(E.map(async S=>{const L=`chat_detail_settings_${S.id}`,z=await ae.get(te.CHAT_SETTINGS,L),R=C(S.timestamp);return z?{...S,remark:z.remark||S.remark,isPinned:z.isPinned!==void 0?z.isPinned:S.isPinned,time:R}:{...S,time:R}}));I.sort((S,L)=>{if(S.isPinned&&!L.isPinned)return-1;if(!S.isPinned&&L.isPinned)return 1;const z=S.timestamp||0;return(L.timestamp||0)-z}),l(I)}else l([])}catch(E){console.error("Failed to load chats:",E),l([])}},P=async()=>{try{const E=await ae.get(te.CHARACTERS,"characters");E&&f(E)}catch(E){console.error("Failed to load characters:",E)}},B=()=>{d(!c)},$=()=>{d(!1),console.log("Create group")},D=()=>{d(!1),m(!0)},T=async E=>{m(!1);const I=th(E.id,E.name);if(I===E.name){const S=`chat_detail_settings_${E.id}`,z=(await ae.get(te.CHAT_SETTINGS,S))?.remark||E.name;n(E.id,z)}else n(E.id,I)},H=E=>{const I=i.find(S=>S.id===E);if(I){let S=I.name;if(S===""||!S){const z=p.find(R=>R.id===E);z&&(S=z.name)}const L=th(E,I.remark||S);n(E,L)}},K=()=>{switch(s){case"messages":return"";case"notifications":return"";case"settings":return"";default:return""}};return t.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col",children:[y==="light-frosted"||y==="dark-frosted"?t.jsxs(t.Fragment,{children:[k&&t.jsx("div",{className:"absolute inset-0 -z-20",children:t.jsx("img",{src:k,className:"w-full h-full object-cover"})}),t.jsx("div",{className:`absolute inset-0 -z-10 backdrop-blur-xl ${y==="light-frosted"?"bg-white/80":"bg-black/60"}`})]}):t.jsx("div",{className:`absolute inset-0 -z-10 ${x?"bg-[#121212]":"bg-white"}`}),t.jsx("div",{className:y==="light-frosted"||y==="dark-frosted"?"bg-transparent z-20":x?"bg-[#121212]":"bg-white",children:t.jsxs("div",{className:"h-16 flex items-center justify-between px-4 relative",children:[t.jsx("button",{onClick:e,className:"p-2 -ml-2 active:opacity-60 transition-opacity",children:t.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:x?"white":"black",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})}),t.jsx("h1",{className:`absolute left-1/2 -translate-x-1/2 font-semibold text-[18px] ${x?"text-white":"text-[#333]"}`,children:K()}),s==="messages"&&t.jsx("button",{onClick:B,className:"p-2 -mr-2 active:opacity-60 transition-opacity relative font-normal",children:t.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:x?"white":"#333333",strokeWidth:"2.5",children:[t.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),s!=="messages"&&t.jsx("div",{className:"w-11"})]})}),t.jsx(Ie,{children:c&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-[51]",onClick:()=>d(!1)}),t.jsxs(xe.div,{initial:{opacity:0,scale:.9,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-10},transition:{type:"spring",stiffness:400,damping:30},className:`absolute right-4 top-[68px] rounded-lg shadow-lg z-[52] overflow-hidden ${y==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":y==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20":x?"bg-[#1e1e1e] border border-[#2d2d2d]":"bg-white"}`,children:[t.jsxs("button",{onClick:$,className:`w-full flex items-center gap-3 px-4 py-3 transition-colors ${y==="light-frosted"?"active:bg-white/60 hover:bg-white/40":y==="dark-frosted"?"active:bg-white/10 hover:bg-white/5":x?"active:bg-[#2d2d2d]":"active:bg-[#f5f5f5]"}`,children:[t.jsx(qc,{className:`w-6 h-6 ${x||y==="dark-frosted"?"text-white":"text-[#333]"}`,strokeWidth:2.5,strokeLinecap:"round",strokeLinejoin:"round"}),t.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] whitespace-nowrap ${x||y==="dark-frosted"?"text-white":"text-[#333]"}`,children:""})]}),t.jsxs("button",{onClick:D,className:`w-full flex items-center gap-3 px-4 py-3 transition-colors ${y==="light-frosted"?"active:bg-white/60 hover:bg-white/40":y==="dark-frosted"?"active:bg-white/10 hover:bg-white/5":x?"active:bg-[#2d2d2d]":"active:bg-[#f5f5f5]"}`,children:[t.jsx(y7,{className:`w-6 h-6 ${x||y==="dark-frosted"?"text-white":"text-[#333]"}`,strokeWidth:2.5,strokeLinecap:"round",strokeLinejoin:"round"}),t.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] whitespace-nowrap ${x||y==="dark-frosted"?"text-white":"text-[#333]"}`,children:""})]})]})]})}),t.jsx(Ie,{children:u&&t.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[t.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40",onClick:()=>m(!1)}),t.jsxs(xe.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`rounded-xl w-64 max-h-96 flex flex-col shadow-2xl relative z-10 ${y==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":y==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":x?"bg-[#1e1e1e]":"bg-white"}`,children:[t.jsxs("div",{className:`flex items-center justify-between px-5 py-3 border-b ${y==="light-frosted"?"border-white/20":y==="dark-frosted"?"border-white/10":x?"border-[#2d2d2d]":"border-[#f0f0f0]"}`,children:[t.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] ${x?"text-white":"text-[#333]"}`,children:""}),t.jsx("button",{onClick:()=>m(!1),className:`p-1 rounded-full transition-colors ${y==="light-frosted"?"active:bg-white/40 hover:bg-white/20":y==="dark-frosted"?"active:bg-white/10 hover:bg-white/5":x?"active:bg-[#2d2d2d]":"active:bg-[#f5f5f5]"}`,children:t.jsx(ht,{className:`w-5 h-5 ${x?"text-[#a0a0a0]":"text-[#666]"}`,strokeWidth:2})})]}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:p.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center py-8 px-4",children:[t.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] ${x?"text-[#888]":"text-[#999]"}`,children:""}),t.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] mt-1 ${x?"text-[#666]":"text-[#ccc]"}`,children:""})]}):p.map(E=>t.jsx("button",{onClick:()=>T(E),className:`w-full flex items-center px-5 py-2.5 transition-colors ${y==="light-frosted"?"active:bg-white/40 hover:bg-white/20":x?"active:bg-[#2d2d2d]":"active:bg-[#f5f5f5]"}`,children:t.jsx("div",{className:"flex-1 text-center",children:t.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] ${x?"text-white":"text-[#333]"}`,children:E.name})})},E.id))})]})]})}),t.jsx("div",{className:`flex-1 overflow-hidden relative ${y==="light-frosted"||y==="dark-frosted"?"bg-transparent":x?"bg-[#121212]":"bg-white"}`,children:t.jsxs(Ie,{mode:"wait",children:[s==="messages"&&t.jsx(xe.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2,ease:"easeInOut"},className:"h-full overflow-y-auto",children:i.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center py-20 px-4 h-full",children:[t.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-3 ${y==="light-frosted"?"bg-white/40":y==="dark-frosted"?"bg-white/10":x?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,children:t.jsx(Mg,{className:`w-9 h-9 ${x?"text-[#666]":"text-[#ccc]"}`,strokeWidth:2.5})}),t.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] ${x?"text-[#888]":"text-[#999]"}`,children:""})]}):t.jsx("div",{className:y==="light-frosted"||y==="dark-frosted"?"bg-transparent":x?"bg-[#121212]":"bg-white",children:i.map((E,I)=>t.jsxs("div",{children:[t.jsx("button",{onClick:()=>H(E.id),className:`w-full px-4 py-3.5 transition-colors flex items-start text-left ${y==="light-frosted"?`active:bg-white/60 ${E.isPinned?"bg-white/40":"bg-transparent"}`:y==="dark-frosted"?`active:bg-white/10 ${E.isPinned?"bg-black/40":"bg-transparent"}`:x?`active:bg-[#1e1e1e] ${E.isPinned?"bg-[#1a1a1a]":"bg-[#121212]"}`:`active:bg-[#f5f5f5] ${E.isPinned?"bg-[#f9f9f9]":"bg-white"}`}`,children:t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[t.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[17px] truncate ${x?"text-white":"text-[#333]"}`,children:E.remark||(E.name===""||!E.name)&&p.find(S=>S.id===E.id)?.name||E.name}),E.memberCount&&t.jsxs("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] flex-shrink-0 ${x?"text-[#888]":"text-[#999]"}`,children:["(",E.memberCount,")"]})]}),E.time&&t.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] flex-shrink-0 ml-2 ${x?"text-[#888]":"text-[#999]"}`,children:E.time})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] truncate flex-1 pr-2 ${x?"text-[#888]":"text-[#999]"}`,children:(()=>{let S=E.lastSender;const L=p.find(z=>z.id===E.id)?.name||E.name;return(!S||S===""||S===L)&&(S=E.remark||L||S),S?`${S}${E.lastMessage}`:E.lastMessage})()}),E.unread!==void 0&&E.unread>0&&t.jsx("span",{className:"min-w-[18px] h-[18px] bg-[#ff4d4f] text-white text-[11px] font-medium flex items-center justify-center rounded-full px-1.5 flex-shrink-0",children:E.unread>99?"99+":E.unread})]})]})}),I<i.length-1&&t.jsx("div",{className:`border-b ${y==="light-frosted"?"border-white/20":y==="dark-frosted"?"border-white/10":x?"border-[#2d2d2d]":"border-[#f0f0f0]"}`})]},E.id))})},"messages"),s==="notifications"&&t.jsxs(xe.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2,ease:"easeInOut"},className:"flex flex-col items-center justify-center py-20 px-4 h-full overflow-y-auto",children:[t.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-3 ${y==="light-frosted"?"bg-white/40":y==="dark-frosted"?"bg-white/10":x?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,children:t.jsx(Fg,{className:`w-9 h-9 ${x?"text-[#666]":"text-[#ccc]"}`,strokeWidth:2.5})}),t.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] ${x?"text-[#888]":"text-[#999]"}`,children:""})]},"notifications"),s==="settings"&&t.jsx(xe.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2,ease:"easeInOut"},className:"h-full overflow-y-auto",children:t.jsx(c9,{})},"settings")]})}),t.jsxs("div",{className:`h-[64px] flex items-center justify-around px-4 safe-area-inset-bottom ${y==="light-frosted"||y==="dark-frosted"?"bg-transparent":x?"bg-[#121212]":"bg-white"}`,children:[t.jsxs("button",{onClick:()=>a("messages"),className:"flex flex-col items-center justify-center gap-1 py-1.5 px-6 active:opacity-60 transition-opacity",children:[t.jsx(Mg,{className:`w-6 h-6 ${s==="messages"?"text-[#7B9E7B]":x?"text-[#888]":"text-[#999]"}`,strokeWidth:2.5}),t.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] ${s==="messages"?"text-[#7B9E7B]":x?"text-[#888]":"text-[#999]"}`,children:""})]}),t.jsxs("button",{onClick:()=>a("notifications"),className:"flex flex-col items-center justify-center gap-1 py-1.5 px-6 active:opacity-60 transition-opacity",children:[t.jsx(Fg,{className:`w-6 h-6 ${s==="notifications"?"text-[#7B9E7B]":x?"text-[#888]":"text-[#999]"}`,strokeWidth:2.5}),t.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] ${s==="notifications"?"text-[#7B9E7B]":x?"text-[#888]":"text-[#999]"}`,children:""})]}),t.jsxs("button",{onClick:()=>a("settings"),className:"flex flex-col items-center justify-center gap-1 py-1.5 px-6 active:opacity-60 transition-opacity",children:[t.jsx(Bo,{className:`w-6 h-6 ${s==="settings"?"text-[#7B9E7B]":x?"text-[#888]":"text-[#999]"}`,strokeWidth:2.5}),t.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] ${s==="settings"?"text-[#7B9E7B]":x?"text-[#888]":"text-[#999]"}`,children:""})]})]})]})}function ai(e,n,s){let a=s.initialDeps??[],i,l=!0;function c(){var d,u,m;let p;s.key&&((d=s.debug)!=null&&d.call(s))&&(p=Date.now());const f=e();if(!(f.length!==a.length||f.some((y,g)=>a[g]!==y)))return i;a=f;let b;if(s.key&&((u=s.debug)!=null&&u.call(s))&&(b=Date.now()),i=n(...f),s.key&&((m=s.debug)!=null&&m.call(s))){const y=Math.round((Date.now()-p)*100)/100,g=Math.round((Date.now()-b)*100)/100,k=g/16,w=(C,N)=>{for(C=String(C);C.length<N;)C=" "+C;return C};console.info(`%c ${w(g,5)} /${w(y,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*k,120))}deg 100% 31%);`,s?.key)}return s?.onChange&&!(l&&s.skipInitialOnChange)&&s.onChange(i),l=!1,i}return c.updateDeps=d=>{a=d},c}function Hg(e,n){if(e===void 0)throw new Error("Unexpected undefined");return e}const u9=(e,n)=>Math.abs(e-n)<1.01,f9=(e,n,s)=>{let a;return function(...i){e.clearTimeout(a),a=e.setTimeout(()=>n.apply(this,i),s)}},Ug=e=>{const{offsetWidth:n,offsetHeight:s}=e;return{width:n,height:s}},h9=e=>e,p9=e=>{const n=Math.max(e.startIndex-e.overscan,0),s=Math.min(e.endIndex+e.overscan,e.count-1),a=[];for(let i=n;i<=s;i++)a.push(i);return a},m9=(e,n)=>{const s=e.scrollElement;if(!s)return;const a=e.targetWindow;if(!a)return;const i=c=>{const{width:d,height:u}=c;n({width:Math.round(d),height:Math.round(u)})};if(i(Ug(s)),!a.ResizeObserver)return()=>{};const l=new a.ResizeObserver(c=>{const d=()=>{const u=c[0];if(u?.borderBoxSize){const m=u.borderBoxSize[0];if(m){i({width:m.inlineSize,height:m.blockSize});return}}i(Ug(s))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(d):d()});return l.observe(s,{box:"border-box"}),()=>{l.unobserve(s)}},Wg={passive:!0},Kg=typeof window>"u"?!0:"onscrollend"in window,x9=(e,n)=>{const s=e.scrollElement;if(!s)return;const a=e.targetWindow;if(!a)return;let i=0;const l=e.options.useScrollendEvent&&Kg?()=>{}:f9(a,()=>{n(i,!1)},e.options.isScrollingResetDelay),c=p=>()=>{const{horizontal:f,isRtl:x}=e.options;i=f?s.scrollLeft*(x&&-1||1):s.scrollTop,l(),n(i,p)},d=c(!0),u=c(!1);u(),s.addEventListener("scroll",d,Wg);const m=e.options.useScrollendEvent&&Kg;return m&&s.addEventListener("scrollend",u,Wg),()=>{s.removeEventListener("scroll",d),m&&s.removeEventListener("scrollend",u)}},g9=(e,n,s)=>{if(n?.borderBoxSize){const a=n.borderBoxSize[0];if(a)return Math.round(a[s.options.horizontal?"inlineSize":"blockSize"])}return e[s.options.horizontal?"offsetWidth":"offsetHeight"]},b9=(e,{adjustments:n=0,behavior:s},a)=>{var i,l;const c=e+n;(l=(i=a.scrollElement)==null?void 0:i.scrollTo)==null||l.call(i,{[a.options.horizontal?"left":"top"]:c,behavior:s})};class v9{constructor(n){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let s=null;const a=()=>s||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:s=new this.targetWindow.ResizeObserver(i=>{i.forEach(l=>{const c=()=>{this._measureElement(l.target,l)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(c):c()})}));return{disconnect:()=>{var i;(i=a())==null||i.disconnect(),s=null},observe:i=>{var l;return(l=a())==null?void 0:l.observe(i,{box:"border-box"})},unobserve:i=>{var l;return(l=a())==null?void 0:l.unobserve(i)}}})(),this.range=null,this.setOptions=s=>{Object.entries(s).forEach(([a,i])=>{typeof i>"u"&&delete s[a]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:h9,rangeExtractor:p9,onChange:()=>{},measureElement:g9,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...s}},this.notify=s=>{var a,i;(i=(a=this.options).onChange)==null||i.call(a,this,s)},this.maybeNotify=ai(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),s=>{this.notify(s)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(s=>s()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var s;const a=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==a){if(this.cleanup(),!a){this.maybeNotify();return}this.scrollElement=a,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((s=this.scrollElement)==null?void 0:s.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,l)=>{this.scrollAdjustments=0,this.scrollDirection=l?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=l,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(s,a)=>{const i=new Map,l=new Map;for(let c=a-1;c>=0;c--){const d=s[c];if(i.has(d.lane))continue;const u=l.get(d.lane);if(u==null||d.end>u.end?l.set(d.lane,d):d.end<u.end&&i.set(d.lane,!0),i.size===this.options.lanes)break}return l.size===this.options.lanes?Array.from(l.values()).sort((c,d)=>c.end===d.end?c.index-d.index:c.end-d.end)[0]:void 0},this.getMeasurementOptions=ai(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(s,a,i,l,c,d)=>(this.prevLanes!==void 0&&this.prevLanes!==d&&(this.lanesChangedFlag=!0),this.prevLanes=d,this.pendingMeasuredCacheIndexes=[],{count:s,paddingStart:a,scrollMargin:i,getItemKey:l,enabled:c,lanes:d}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=ai(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:s,paddingStart:a,scrollMargin:i,getItemKey:l,enabled:c,lanes:d},u)=>{if(!c)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>s)for(const x of this.laneAssignments.keys())x>=s&&this.laneAssignments.delete(x);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(x=>{this.itemSizeCache.set(x.key,x.size)}));const m=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===s&&(this.lanesSettling=!1);const p=this.measurementsCache.slice(0,m),f=new Array(d).fill(void 0);for(let x=0;x<m;x++){const b=p[x];b&&(f[b.lane]=x)}for(let x=m;x<s;x++){const b=l(x),y=this.laneAssignments.get(x);let g,k;if(y!==void 0&&this.options.lanes>1){g=y;const A=f[g],P=A!==void 0?p[A]:void 0;k=P?P.end+this.options.gap:a+i}else{const A=this.options.lanes===1?p[x-1]:this.getFurthestMeasurement(p,x);k=A?A.end+this.options.gap:a+i,g=A?A.lane:x%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(x,g)}const w=u.get(b),C=typeof w=="number"?w:this.options.estimateSize(x),N=k+C;p[x]={index:x,start:k,size:C,end:N,key:b,lane:g},f[g]=x}return this.measurementsCache=p,p},{key:!1,debug:()=>this.options.debug}),this.calculateRange=ai(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(s,a,i,l)=>this.range=s.length>0&&a>0?y9({measurements:s,outerSize:a,scrollOffset:i,lanes:l}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=ai(()=>{let s=null,a=null;const i=this.calculateRange();return i&&(s=i.startIndex,a=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,s,a]),[this.options.rangeExtractor,this.options.overscan,this.options.count,s,a]},(s,a,i,l,c)=>l===null||c===null?[]:s({startIndex:l,endIndex:c,overscan:a,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=s=>{const a=this.options.indexAttribute,i=s.getAttribute(a);return i?parseInt(i,10):(console.warn(`Missing attribute name '${a}={index}' on measured element.`),-1)},this._measureElement=(s,a)=>{const i=this.indexFromElement(s),l=this.measurementsCache[i];if(!l)return;const c=l.key,d=this.elementsCache.get(c);d!==s&&(d&&this.observer.unobserve(d),this.observer.observe(s),this.elementsCache.set(c,s)),s.isConnected&&this.resizeItem(i,this.options.measureElement(s,a,this))},this.resizeItem=(s,a)=>{const i=this.measurementsCache[s];if(!i)return;const l=this.itemSizeCache.get(i.key)??i.size,c=a-l;c!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,c,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=c,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,a)),this.notify(!1))},this.measureElement=s=>{if(!s){this.elementsCache.forEach((a,i)=>{a.isConnected||(this.observer.unobserve(a),this.elementsCache.delete(i))});return}this._measureElement(s,void 0)},this.getVirtualItems=ai(()=>[this.getVirtualIndexes(),this.getMeasurements()],(s,a)=>{const i=[];for(let l=0,c=s.length;l<c;l++){const d=s[l],u=a[d];i.push(u)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=s=>{const a=this.getMeasurements();if(a.length!==0)return Hg(a[Ov(0,a.length-1,i=>Hg(a[i]).start,s)])},this.getOffsetForAlignment=(s,a,i=0)=>{const l=this.getSize(),c=this.getScrollOffset();a==="auto"&&(a=s>=c+l?"end":"start"),a==="center"?s+=(i-l)/2:a==="end"&&(s-=l);const d=this.getTotalSize()+this.options.scrollMargin-l;return Math.max(Math.min(d,s),0)},this.getOffsetForIndex=(s,a="auto")=>{s=Math.max(0,Math.min(s,this.options.count-1));const i=this.measurementsCache[s];if(!i)return;const l=this.getSize(),c=this.getScrollOffset();if(a==="auto")if(i.end>=c+l-this.options.scrollPaddingEnd)a="end";else if(i.start<=c+this.options.scrollPaddingStart)a="start";else return[c,a];const d=a==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(d,a,i.size),a]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(s,{align:a="start",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(s,a),{adjustments:void 0,behavior:i})},this.scrollToIndex=(s,{align:a="auto",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),s=Math.max(0,Math.min(s,this.options.count-1));let l=0;const c=10,d=m=>{if(!this.targetWindow)return;const p=this.getOffsetForIndex(s,m);if(!p){console.warn("Failed to get offset for index:",s);return}const[f,x]=p;this._scrollToOffset(f,{adjustments:void 0,behavior:i}),this.targetWindow.requestAnimationFrame(()=>{const b=this.getScrollOffset(),y=this.getOffsetForIndex(s,x);if(!y){console.warn("Failed to get offset for index:",s);return}u9(y[0],b)||u(x)})},u=m=>{this.targetWindow&&(l++,l<c?this.targetWindow.requestAnimationFrame(()=>d(m)):console.warn(`Failed to scroll to index ${s} after ${c} attempts.`))};d(a)},this.scrollBy=(s,{behavior:a}={})=>{a==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+s,{adjustments:void 0,behavior:a})},this.getTotalSize=()=>{var s;const a=this.getMeasurements();let i;if(a.length===0)i=this.options.paddingStart;else if(this.options.lanes===1)i=((s=a[a.length-1])==null?void 0:s.end)??0;else{const l=Array(this.options.lanes).fill(null);let c=a.length-1;for(;c>=0&&l.some(d=>d===null);){const d=a[c];l[d.lane]===null&&(l[d.lane]=d.end),c--}i=Math.max(...l.filter(d=>d!==null))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(s,{adjustments:a,behavior:i})=>{this.options.scrollToFn(s,{behavior:i,adjustments:a},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(n)}}const Ov=(e,n,s,a)=>{for(;e<=n;){const i=(e+n)/2|0,l=s(i);if(l<a)e=i+1;else if(l>a)n=i-1;else return i}return e>0?e-1:0};function y9({measurements:e,outerSize:n,scrollOffset:s,lanes:a}){const i=e.length-1,l=u=>e[u].start;if(e.length<=a)return{startIndex:0,endIndex:i};let c=Ov(0,i,l,s),d=c;if(a===1)for(;d<i&&e[d].end<s+n;)d++;else if(a>1){const u=Array(a).fill(0);for(;d<i&&u.some(p=>p<s+n);){const p=e[d];u[p.lane]=p.end,d++}const m=Array(a).fill(s+n);for(;c>=0&&m.some(p=>p>=s);){const p=e[c];m[p.lane]=p.start,c--}c=Math.max(0,c-c%a),d=Math.min(i,d+(a-1-d%a))}return{startIndex:c,endIndex:d}}const Gg=typeof document<"u"?j.useLayoutEffect:j.useEffect;function w9(e){const n=j.useReducer(()=>({}),{})[1],s={...e,onChange:(i,l)=>{var c;l?Us.flushSync(n):n(),(c=e.onChange)==null||c.call(e,i,l)}},[a]=j.useState(()=>new v9(s));return a.setOptions(s),Gg(()=>a._didMount(),[]),Gg(()=>a._willUpdate()),a}function S9(e){return w9({observeElementRect:m9,observeElementOffset:x9,scrollToFn:b9,...e})}async function pp(e,n,s){const a=`task_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,i={taskId:a,chatId:e,type:n,status:"pending",createdAt:Date.now(),updatedAt:Date.now(),payload:s};if(await ae.set(te.AI_TASKS,a,i),console.log(`[TaskQueue]  ${a} (: ${n}, : ${e})`),"serviceWorker"in navigator&&navigator.serviceWorker.controller){const l={apiKey:s.apiKey,baseUrl:s.baseUrl,modelName:s.modelName,temperature:s.temperature,maxTokens:s.maxTokens},c=[{role:"system",content:s.systemPrompt},{role:"user",content:s.userPrompt}];navigator.serviceWorker.controller.postMessage({type:"PROCESS_AI_TASK",payload:{taskId:a,taskType:n,characterId:e,characterName:s.characterName,displayName:s.displayName,apiConfig:l,messages:c,pendingImageBase64:s.pendingImageBase64,imageRecognitionPrompt:s.imageRecognitionPrompt,referenceDate:s.referenceDate}}),console.log(`[TaskQueue]  Service Worker: ${a}`)}else console.warn("[TaskQueue] Service Worker "),window.dispatchEvent(new CustomEvent("ai-task-needs-fallback",{detail:{taskId:a,task:i}}));return a}const k9=`


1. 
2. 
3. 
 JSON Markdown`;function ic(){return Date.now().toString(36)+Math.random().toString(36).substr(2,5)}async function j9(){const e=await ae.get(te.API_SETTINGS,"api_configs"),n=parseInt(await ae.get(te.API_SETTINGS,"current_config_index")||"0");if(!e)return null;try{return JSON.parse(e)[n]||null}catch(s){return console.error("[Memory] Failed to parse API configs",s),null}}function N9(e,n,s,a){if(!n)return e.map(c=>{if(c.senderId==="system")return null;let d=c.text;return c.stickerId?d="[]":c.imageKey?d="[]":c.isPlaceholderImage?d=`[: ${c.text}]`:c.redPacket?d=c.redPacket.opened?"[-]":"[]":c.isImageRecognition&&(d=`[: ${c.text}]`),`${c.senderId==="user"?s:a}: ${d}`}).filter(c=>c!==null).join(`
`);const i=[];let l=null;return e.forEach((c,d)=>{if(c.senderId==="system")return;const u=new Date(c.timestamp);if(isNaN(u.getTime()))return;const m=`${u.getFullYear()}-${String(u.getMonth()+1).padStart(2,"0")}-${String(u.getDate()).padStart(2,"0")}`;(d===0||l!==m)&&(i.push(`${m}`),l=m);const p=`${String(u.getHours()).padStart(2,"0")}:${String(u.getMinutes()).padStart(2,"0")}`;let f=c.text;c.stickerId?f="[]":c.imageKey?f="[]":c.isPlaceholderImage?f=`[: ${c.text}]`:c.redPacket?f=c.redPacket.opened?"[-]":"[]":c.isImageRecognition&&(f=`[: ${c.text}]`);const x=c.senderId==="user"?s:a;i.push(`[${p}] ${x}: ${f}`)}),i.join(`
`)}function C9(e,n,s=2){const a=[],i=e.toLowerCase();return n.forEach(l=>{if(l.active===!1&&l.tags&&l.tags.length>0){let d=0;l.tags.forEach(u=>{if(!u)return;const m=u.toLowerCase();i.includes(m)&&(d+=m.length)}),d>=s&&a.push({id:l.id,score:d})}}),a.sort((l,c)=>c.score-l.score).slice(0,5).map(l=>l.id)}async function $v(e,n,s){const a=await ae.get(te.MISC,"memory_extraction_settings"),i=a?.threshold??20,l=a?.auto_summary??!0,c=s?.manualCount!==void 0;if(!l&&!c)return;const d=await ae.get(te.MISC,`last_extraction_index_${e}`)||0;let u=[];if(c){const S=s.manualCount;if(S<=0)return;u=n.slice(-S)}else{if(n.length-d<i)return;u=n.slice(d)}const m=await ae.get(te.CHATS,"chat_settings")||{},p=m.timeAwareness!==void 0?m.timeAwareness:!0,x=(await ae.get(te.USER_DATA,"userData")||{}).name||"",y=(await ae.get(te.CHARACTERS,"characters")||[]).find(S=>S.id===e),g=y?y.name:"",k=N9(u,p,x,g),w=await j9();let C=!1;if(w&&w.enableAuxiliary&&w.auxApiKey&&w.auxBaseUrl&&(C=!0),!C){if(!w||!w.apiKey||!w.baseUrl){console.warn("[Memory] Missing or invalid Main API configuration, and Aux API not available. Skipping extraction.");return}}await ae.set(te.MISC,`last_extraction_index_${e}`,n.length);let N="",A="",P="",B="",$="",D=new Date;if(u.length>0){const S=u[u.length-1];if(S.timestamp){const L=new Date(S.timestamp);isNaN(L.getTime())||(D=L)}}const T=`${D.getFullYear()}-${String(D.getMonth()+1).padStart(2,"0")}-${String(D.getDate()).padStart(2,"0")}`,H=p?"":"",K=p?"3":"2";if(p){const L=["","","","","","",""][D.getDay()];N=`

- ${T} (${L})
- 
- YYYY-MM-DD`,A=`2  / event
- 
-  content YYYY.MM.DD
  "2025.10.01 "
- expire_at
  a)  "expire_at": "YYYY-MM-DD"
  b) 1225
  c)  "suggested_expire_days": 
-  suggested_expire_days
-  1-3 tags`,B=`${K} summary
- 
- 
-  content 
  -  "YYYY.MM.DD ..." ( "2025.12.28 ...")
  -  "YYYY.MM.DD-YYYY.MM.DD ..." ( "2025.12.28-2025.12.29 ...")
-  1-3 tags
- summary`,P=`  "event": [
    {
      "content": "2025.11.01",
      "suggested_expire_days": 1,
      "tags": ["", ""]
    },
    {
      "content": "2025.12.161231",
      "expire_at": "2025-12-31",
      "tags": ["", ""]
    }
  ],`,$=`  "summary": {
    "content": "2025.12.16 ",
    "tags": ["", ""]
  }`}else N="",A="",P="",B=`${K} summary
- 
- 
-  1-3 tags
- summary`,$=`  "summary": {
    "content": "",
    "tags": ["", ""]
  }`;const E=`${x}${g}
${N}

${k}

${g}${H}

1 permanent
- 
- 
- /
-  1 
-  []
-  tags

${A}

${B}

 JSON 
{
  "permanent": [
    ""
  ],
${P}
${$}
}`,I={apiKey:C?w.auxApiKey||"":w.apiKey||"",baseUrl:C?w.auxBaseUrl||"":w.baseUrl||"",modelName:C?w.auxModelName||"":w.modelName||"",temperature:C?w.auxTemperature!==void 0&&w.auxTemperature!==""?Number(w.auxTemperature):.7:w.temperature!==void 0&&w.temperature!==""?Number(w.temperature):void 0,maxTokens:w.maxTokens!==void 0&&w.maxTokens!==""?Number(w.maxTokens):void 0,systemPrompt:k9,userPrompt:E,characterName:g,userNickname:x,referenceDate:T};await pp(e,"memory_extraction",I),console.log(`[Memory] Extraction task created for ${g} using ${C?"Auxiliary":"Main"} API`)}function Vv(e,n){try{let s=e;const a=e.match(/```(?:json)?\s*(\{[\s\S]*?\})\s*```/);if(a)s=a[1];else{const u=e.indexOf("{"),m=e.lastIndexOf("}");u!==-1&&m!==-1&&(s=e.substring(u,m+1))}const i=JSON.parse(s),l=[],c=new Date().toISOString().split("T")[0],d=n?new Date(n):new Date;if(Array.isArray(i.permanent)&&i.permanent.forEach(u=>{typeof u=="string"&&u.trim()&&l.push({id:ic(),type:"permanent",content:u.trim(),created_at:c,active:!0,tags:[]})}),Array.isArray(i.event)&&i.event.forEach(u=>{if(u&&u.content){const m=Array.isArray(u.tags)?u.tags:typeof u.tags=="string"?[u.tags]:[];let p;if(u.expire_at&&/^\d{4}-\d{2}-\d{2}$/.test(u.expire_at))p=u.expire_at;else if(u.suggested_expire_days){const f=new Date(d);f.setDate(f.getDate()+Number(u.suggested_expire_days)),p=f.toISOString().split("T")[0]}l.push({id:ic(),type:"event",content:u.content,created_at:c,tags:m,active:!0,expires_at:p})}}),i.summary){const u=i.summary;if(typeof u=="object"&&u.content){const m=Array.isArray(u.tags)?u.tags:typeof u.tags=="string"?[u.tags]:[];l.push({id:ic(),type:"summary",content:u.content,created_at:c,active:!0,tags:m})}else typeof u=="string"&&l.push({id:ic(),type:"summary",content:u,created_at:c,active:!0,tags:[]})}return l}catch(s){return console.error("Failed to parse memory extraction JSON",s),[]}}async function Hv(e,n){const s=await ae.get(te.CHARACTERS,"characters")||[],a=s.findIndex(i=>i.id===e);if(a>=0){const i=s[a],l=i.memories||[];i.memories=[...l,...n],s[a]=i,await ae.set(te.CHARACTERS,"characters",s),console.log("[Memory] Saved",n.length,"memories for",i.name),window.dispatchEvent(new CustomEvent("character-memories-updated",{detail:{characterId:e,memories:i.memories}}))}}async function nh(e,n){if(e==="forever"&&n==="forever")return;const s=l=>{if(l==="forever")return null;const c=l==="7d"?7:30,d=new Date;d.setDate(d.getDate()-c);const u=d.getFullYear(),m=String(d.getMonth()+1).padStart(2,"0"),p=String(d.getDate()).padStart(2,"0");return`${u}-${m}-${p}`},a=s(e),i=s(n);try{const l=await ae.get(te.CHARACTERS,"characters")||[];let c=!1,d=0;const u=l.map(m=>{if(!m.memories||m.memories.length===0)return m;const p=m.memories.length,f=m.memories.filter(x=>x.active!==!1?!0:!(x.type==="summary"&&a&&x.created_at<a||x.type==="event"&&i&&x.expires_at&&x.expires_at<i));return f.length!==p?(c=!0,d+=p-f.length,{...m,memories:f}):m});c&&(await ae.set(te.CHARACTERS,"characters",u),console.log(`[Memory Cleanup] Removed ${d} expired inactive memories.`),window.dispatchEvent(new CustomEvent("character-memories-updated",{detail:{characterId:null}})))}catch(l){console.error("[Memory Cleanup] Failed:",l)}}const _9="modulepreload",A9=function(e){return"/"+e},Yg={},E9=function(n,s,a){let i=Promise.resolve();if(s&&s.length>0){let c=function(m){return Promise.all(m.map(p=>Promise.resolve(p).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),u=d?.nonce||d?.getAttribute("nonce");i=c(s.map(m=>{if(m=A9(m),m in Yg)return;Yg[m]=!0;const p=m.endsWith(".css"),f=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${f}`))return;const x=document.createElement("link");if(x.rel=p?"stylesheet":_9,p||(x.as="script"),x.crossOrigin="",x.href=m,u&&x.setAttribute("nonce",u),document.head.appendChild(x),p)return new Promise((b,y)=>{x.addEventListener("load",b),x.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${m}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return i.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return n().catch(l)})};var gc={exports:{}},T9=gc.exports,qg;function D9(){return qg||(qg=1,(function(e,n){(function(s,a){e.exports=a()})(T9,function(){return(function(s){function a(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,a),c.l=!0,c.exports}var i={};return a.m=s,a.c=i,a.d=function(l,c,d){a.o(l,c)||Object.defineProperty(l,c,{configurable:!1,enumerable:!0,get:d})},a.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return a.d(c,"a",c),c},a.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},a.p="",a(a.s=0)})([function(s,a,i){Object.defineProperty(a,"__esModule",{value:!0});var l=i(1),c=(function(d){return d&&d.__esModule?d:{default:d}})(l);a.default=c.default,s.exports=a.default},function(s,a,i){function l(I){return I&&I.__esModule?I:{default:I}}Object.defineProperty(a,"__esModule",{value:!0});var c=i(2),d=l(c),u=i(3),m=l(u),p=i(4),f=l(p),x=i(5),b=l(x),y=i(6),g=l(y),k=i(7),w=l(k),C=i(8),N=l(C),A=i(9),P=l(A),B=i(10),$=l(B),D=i(11),T=l(D),H=i(12),K=l(H),E={lunarInfo:d.default,solarMonth:m.default,gan:f.default,zhi:b.default,animals:g.default,lunarTerm:w.default,lTermInfo:N.default,nStr1:P.default,nStr2:$.default,nStr3:T.default,nStr4:K.default,lYearDays:function(I){var S,L=348;for(S=32768;S>8;S>>=1)L+=E.lunarInfo[I-1900]&S?1:0;return L+E.leapDays(I)},leapMonth:function(I){return 15&E.lunarInfo[I-1900]},leapDays:function(I){return E.leapMonth(I)?65536&E.lunarInfo[I-1900]?30:29:0},monthDays:function(I,S){return S>12||S<1?-1:E.lunarInfo[I-1900]&65536>>S?30:29},solarDays:function(I,S){if(S>12||S<1)return-1;var L=S-1;return L==1?I%4==0&&I%100!=0||I%400==0?29:28:E.solarMonth[L]},toGanZhi:function(I){return E.gan[I%10]+E.zhi[I%12]},getTerm:function(I,S){if(I<1900||I>2100||S<1||S>24)return-1;var L=E.lTermInfo[I-1900],z=[parseInt("0x"+L.substr(0,5)).toString(),parseInt("0x"+L.substr(5,5)).toString(),parseInt("0x"+L.substr(10,5)).toString(),parseInt("0x"+L.substr(15,5)).toString(),parseInt("0x"+L.substr(20,5)).toString(),parseInt("0x"+L.substr(25,5)).toString()],R=[z[0].substr(0,1),z[0].substr(1,2),z[0].substr(3,1),z[0].substr(4,2),z[1].substr(0,1),z[1].substr(1,2),z[1].substr(3,1),z[1].substr(4,2),z[2].substr(0,1),z[2].substr(1,2),z[2].substr(3,1),z[2].substr(4,2),z[3].substr(0,1),z[3].substr(1,2),z[3].substr(3,1),z[3].substr(4,2),z[4].substr(0,1),z[4].substr(1,2),z[4].substr(3,1),z[4].substr(4,2),z[5].substr(0,1),z[5].substr(1,2),z[5].substr(3,1),z[5].substr(4,2)];return parseInt(R[S-1])},toChinaYear:function(I){var S=parseInt(I/1e3),L=parseInt(I%1e3/100),z=parseInt(I%100/10),R=I%10;return E.nStr4[S]+E.nStr4[L]+E.nStr4[z]+E.nStr4[R]+""},toChinaMonth:function(I){if(I>12||I<1)return-1;var S=E.nStr3[I-1];return S+=""},toChinaDay:function(I){var S;switch(I){case 10:S="";break;case 20:S="";break;case 30:S="";break;default:S=E.nStr2[Math.floor(I/10)],S+=E.nStr1[I%10]}return S},getAnimal:function(I){return E.animals[(I-4)%12]},solar2lunar:function(W,Z,O){if(W<1900||W>2100||W==1900&&Z==1&&O<31)return-1;if(W)var z=new Date(W,parseInt(Z)-1,O);else var z=new Date;var R,ne=0,U=0,W=z.getFullYear(),Z=z.getMonth()+1,O=z.getDate(),V=(Date.UTC(z.getFullYear(),z.getMonth(),z.getDate())-Date.UTC(1900,0,31))/864e5;for(R=1900;R<2101&&V>0;R++)U=E.lYearDays(R),V-=U;V<0&&(V+=U,R--);var ee=new Date,q=!1;ee.getFullYear()==W&&ee.getMonth()+1==Z&&ee.getDate()==O&&(q=!0);var G=z.getDay(),Q=E.nStr1[G];G==0&&(G=7);var le=R,ne=E.leapMonth(R),ie=!1;for(R=1;R<13&&V>0;R++)ne>0&&R==ne+1&&ie==0?(--R,ie=!0,U=E.leapDays(le)):U=E.monthDays(le,R),ie==1&&R==ne+1&&(ie=!1),V-=U;V==0&&ne>0&&R==ne+1&&(ie?ie=!1:(ie=!0,--R)),V<0&&(V+=U,--R);var ve=R,se=V+1,ge=Z-1,Me=E.getTerm(W,3),M=E.toGanZhi(W-4),me=new Date(W,1,Me).getTime();new Date(W,ge,O).getTime()<me&&(M=E.toGanZhi(W-5));var he=E.getTerm(W,2*Z-1),J=E.getTerm(W,2*Z),X=E.toGanZhi(12*(W-1900)+Z+11);O>=he&&(X=E.toGanZhi(12*(W-1900)+Z+12));var oe=!1,ke="";he==O&&(oe=!0,ke=E.lunarTerm[2*Z-2]),J==O&&(oe=!0,ke=E.lunarTerm[2*Z-1]);var Ne=Date.UTC(W,ge,1,0,0,0,0)/864e5+25567+10,de=E.toGanZhi(Ne+O-1);return{lYear:le,lMonth:ve,lDay:se,animal:E.getAnimal(le),yearCn:E.toChinaYear(le),monthCn:(ie&&ne===ve?"":"")+E.toChinaMonth(ve),dayCn:E.toChinaDay(se),cYear:W,cMonth:Z,cDay:O,gzYear:M,gzMonth:X,gzDay:de,isToday:q,isLeap:ie,nWeek:G,ncWeek:""+Q,isTerm:oe,term:ke}},lunar2solar:function(I,S,L,z){var R=E.leapMonth(I);if(E.leapDays(I),z&&R!=S||I==2100&&S==12&&L>1||I==1900&&S==1&&L<31)return-1;var U=E.monthDays(I,S);if(I<1900||I>2100||L>U)return-1;for(var W=0,Z=1900;Z<I;Z++)W+=E.lYearDays(Z);for(var O=0,V=!1,Z=1;Z<S;Z++)O=E.leapMonth(I),V||O<=Z&&O>0&&(W+=E.leapDays(I),V=!0),W+=E.monthDays(I,Z);z&&(W+=U);var ee=Date.UTC(1900,1,30,0,0,0),q=new Date(864e5*(W+L-31)+ee),G=q.getUTCFullYear(),Q=q.getUTCMonth()+1,le=q.getUTCDate();return E.solar2lunar(G,Q,le)}};a.default=E,s.exports=a.default},function(s,a,i){Object.defineProperty(a,"__esModule",{value:!0}),a.default=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,23232,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19195,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835,37744,18936,18800,25776,92326,59984,27424,108228,43744,37600,53987,51552,54615,54432,55888,23893,22176,42704,21972,21200,43448,43344,46240,46758,44368,21920,43940,42416,21168,45683,26928,29495,27296,44368,84821,19296,42352,21732,53600,59752,54560,55968,92838,22224,19168,43476,42192,53584,62034,54560],s.exports=a.default},function(s,a,i){Object.defineProperty(a,"__esModule",{value:!0}),a.default=[31,28,31,30,31,30,31,31,30,31,30,31],s.exports=a.default},function(s,a,i){Object.defineProperty(a,"__esModule",{value:!0}),a.default=["","","","","","","","","",""],s.exports=a.default},function(s,a,i){Object.defineProperty(a,"__esModule",{value:!0}),a.default=["","","","","","","","","","","",""],s.exports=a.default},function(s,a,i){Object.defineProperty(a,"__esModule",{value:!0}),a.default=["","","","","","","","","","","",""],s.exports=a.default},function(s,a,i){Object.defineProperty(a,"__esModule",{value:!0}),a.default=["","","","","","","","","","","","","","","","","","","","","","","",""],s.exports=a.default},function(s,a,i){Object.defineProperty(a,"__esModule",{value:!0}),a.default=["9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","9778397bd19801ec9210c965cc920e","97b6b97bd19801ec95f8c965cc920f","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd197c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bcf97c3598082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd19801ec9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bd07f1487f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b97bd197c36c9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b70c9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","977837f0e37f149b0723b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0723b06bd","7f07e7f0e37f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f595b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e37f14998083b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14898082b0723b02d5","7f07e7f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66aa89801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e26665b66a449801e9808297c35","665f67f0e37f1489801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722"],s.exports=a.default},function(s,a,i){Object.defineProperty(a,"__esModule",{value:!0}),a.default=["","","","","","","","","","",""],s.exports=a.default},function(s,a,i){Object.defineProperty(a,"__esModule",{value:!0}),a.default=["","","",""],s.exports=a.default},function(s,a,i){Object.defineProperty(a,"__esModule",{value:!0}),a.default=["","","","","","","","","","","",""],s.exports=a.default},function(s,a,i){Object.defineProperty(a,"__esModule",{value:!0}),a.default=["","","","","","","","","","",""],s.exports=a.default}])})})(gc)),gc.exports}var F9=D9();const M9=$c(F9);function Uv(e,n){if(!e||e.length===0)return{type:"none",message:"",days:0};const a=[...e].sort((x,b)=>new Date(b.startDate).getTime()-new Date(x.startDate).getTime())[0],l=(x=>{const[b,y,g]=x.split("-").map(Number);return new Date(b,y-1,g)})(a.startDate),c=new Date;c.setHours(0,0,0,0);const d=c.getTime()-l.getTime(),u=Math.floor(d/(1e3*60*60*24));if(u>=0&&u<n.periodLength)return{type:"period",message:` ${u+1} `,days:Math.max(0,n.periodLength-u-1)};const m=new Date(l);m.setDate(l.getDate()+n.cycleLength);const p=m.getTime()-c.getTime(),f=Math.ceil(p/(1e3*60*60*24));return f<0?{type:"late",message:` ${Math.abs(f)} `,days:Math.abs(f)}:{type:"prediction",message:` ${f} `,days:f}}async function I9(e){try{const n=await ae.get(te.HEALTH,"health_settings");if(!n||!n.shareEnabled||n.shareScope==="specific"&&n.shareCharacterId!==e)return"";const s=[],a=await ae.get(te.HEALTH,"sleep_logs")||[];if(a.length>0){const m=new Date().toDateString(),p=a.find(f=>new Date(f.endTime).toDateString()===m);if(p){const f={good:"",average:"",poor:""},x=g=>{const k=new Date(g);return`${String(k.getHours()).padStart(2,"0")}:${String(k.getMinutes()).padStart(2,"0")}`},b=x(p.startTime),y=x(p.endTime);s.push(`${b}-${y}:${f[p.quality]||""}`)}}const i=await ae.get(te.HEALTH,"cycle_logs")||[],l=await ae.get(te.HEALTH,"cycle_settings")||{cycleLength:28,periodLength:5};if(i.length>0){const u=Uv(i,l);u.type==="period"?s.push(u.message.replace(/\s/g,"")):u.type==="late"?s.push(u.message.replace(/\s/g,"")):u.type==="prediction"&&s.push(`${u.days}`)}const d=(await ae.get(te.HEALTH,"diagnosis_logs")||[]).filter(u=>u.status==="treating");if(d.length>0){const u=d.map(m=>m.illnessName).join("");s.push(`:${u}`)}return s.join(" ")}catch(n){return console.error("Failed to get health status:",n),""}}const P9={totalPeriods:12,showWeekends:!0,periodTimes:Array.from({length:12},(e,n)=>({period:n+1,startTime:`${8+n}:00`,endTime:`${8+n}:45`})),startDate:new Date().toISOString().split("T")[0],totalWeeks:20},R9=e=>{const n=new Date(e),s=new Date,a=new Date(n.getFullYear(),n.getMonth(),n.getDate()),i=new Date(s.getFullYear(),s.getMonth(),s.getDate()),l=a.getDay()||7,c=new Date(a);c.setDate(a.getDate()-(l-1));const d=i.getTime()-c.getTime(),u=Math.floor(d/(1e3*60*60*24));return Math.floor(u/7)+1};async function B9(e){try{const n=await ae.get(te.SCHEDULE,"schedule_settings");if(!n||!n.shareEnabled||n.shareScope==="specific"&&n.shareCharacterId!==e)return"";const s=[],a=new Date,i=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`,c=(await ae.get(te.SCHEDULE,"todos")||[]).filter(f=>!f.completed);if(c.length>0){const f=c.map(x=>x.text).join("");s.push(`:${f}`)}const u=(await ae.get(te.SCHEDULE,"events")||[]).filter(f=>f.date===i);if(u.length>0){const f=u.map(x=>{let b="";return x.isAllDay?b="()":x.startTime&&(b=`(${x.startTime}${x.endTime?"-"+x.endTime:""})`),`${x.title}${b}`}).join("");s.push(`:${f}`)}const m=await ae.get(te.SCHEDULE,"timetable_settings"),p=await ae.get(te.SCHEDULE,"timetable_courses")||[];if(p.length>0){const f={...P9,...m};if(f.periodTimes.length<f.totalPeriods){const k=f.periodTimes.length;for(let w=k;w<f.totalPeriods;w++)f.periodTimes.push({period:w+1,startTime:`${8+w}:00`,endTime:`${8+w}:45`})}const x=R9(f.startDate),y=(a.getDay()+6)%7,g=p.filter(k=>k.day===y&&k.weeks.includes(x)).sort((k,w)=>k.startPeriod-w.startPeriod);if(g.length>0){const k=g.map(w=>{const C=w.room?`@${w.room}`:"",N=f.periodTimes.find(B=>B.period===w.startPeriod),A=f.periodTimes.find(B=>B.period===w.endPeriod);let P="";return N&&A?P=`(${N.startTime}-${A.endTime})`:N&&(P=`(${N.startTime})`),`${w.startPeriod}-${w.endPeriod}${P}:${w.subject}${C}`}).join("");s.push(`:${k}`)}else x>0&&x<=f.totalWeeks}return s.join(" ")}catch(n){return console.error("Failed to get schedule status:",n),""}}const gi={createMemory(e,n,s={}){const a=new Date().toISOString().split("T")[0];let i=!0;return e==="permanent"||e==="event"?i=!0:e==="summary"&&(i=!1),{id:crypto.randomUUID(),type:e,content:n,created_at:s.created_at||a,expires_at:s.expires_at,importance:s.importance??.5,active:s.active??i,tags:s.tags||[]}},async injectMemories(e,n){const s=await ae.get(te.CHARACTERS,"characters")||[],a=s.findIndex(m=>m.id===e);if(a===-1)throw new Error(`Character not found: ${e}`);const i=s[a],c=[...i.memories||[],...n];let d=3;try{const m=await ae.get(te.CHAT_SETTINGS,"chat_settings");m&&m.summary_limit&&(d=Number(m.summary_limit))}catch{console.warn("Failed to fetch summary limit setting, using default 3")}const u=this.processMemories(c,d);i.memories=u,s[a]=i,await ae.set(te.CHARACTERS,"characters",s)},processMemories(e,n=3){const s=new Date().toISOString().split("T")[0];let a=e.map(m=>{if(m.type==="event")if(m.expires_at){const p=m.expires_at<s;return{...m,active:!p}}else return{...m,active:!0};return m});const i=a.filter(m=>m.type==="summary"),l=a.filter(m=>m.type!=="summary"),c=i.map((m,p)=>({...m,_idx:p}));c.sort((m,p)=>m.created_at!==p.created_at?p.created_at.localeCompare(m.created_at):p._idx-m._idx);const u=c.map(({_idx:m,...p})=>p).map((m,p)=>({...m,active:p<n}));return[...l,...u.reverse()]},async getPromptMemories(e){const s=(await ae.get(te.CHARACTERS,"characters")||[]).find(l=>l.id===e);if(!s||!s.memories)return[];let a=3;try{const l=await ae.get(te.CHAT_SETTINGS,"chat_settings");l&&l.summary_limit&&(a=Number(l.summary_limit))}catch{}return this.processMemories(s.memories,a).filter(l=>l.active===!0&&(l.type==="permanent"||l.type==="event"||l.type==="summary"))},async buildPromptContext(e){const n=await this.getPromptMemories(e);if(n.length===0)return"";const s=n.filter(c=>c.type==="permanent"),a=n.filter(c=>c.type==="event"),i=n.filter(c=>c.type==="summary");let l=`
`;return s.length>0&&(l+=`[]
`,s.forEach(c=>l+=`- ${c.content}
`)),a.length>0&&(l+=`[]
`,a.forEach(c=>l+=`- ${c.content}
`)),i.length>0&&(l+=`[]
`,i.sort((d,u)=>d.created_at.localeCompare(u.created_at)).forEach(d=>l+=`- ${d.content}
`)),l},async refreshAllCharactersMemories(){try{const e=await ae.get(te.CHARACTERS,"characters")||[];if(e.length===0)return;let n=3;try{const i=await ae.get(te.CHAT_SETTINGS,"chat_settings");i&&i.summary_limit&&(n=Number(i.summary_limit))}catch{}let s=!1;const a=e.map(i=>{if(!i.memories||i.memories.length===0)return i;const l=this.processMemories(i.memories,n),c=JSON.stringify(i.memories),d=JSON.stringify(l);return c!==d?(s=!0,{...i,memories:l}):i});s?(await ae.set(te.CHARACTERS,"characters",a),console.log("[MemorySystem] Refreshed all character memories status."),window.dispatchEvent(new CustomEvent("character-memories-updated",{detail:{characterId:null}}))):console.log("[MemorySystem] Checked memories, no status updates needed.")}catch(e){console.error("[MemorySystem] Failed to refresh memories:",e)}}};function Ir(e){if(!e)return 0;let n=0;for(let s=0;s<e.length;s++)e.charCodeAt(s)>255?n+=1.5:n+=.3;return Math.ceil(n)}async function Wv(e,n,s){const a=await O9(),i=await $9(e,s),l=await V9(),c=await H9(e),d=await U9(i.enabledWorldBooks,c.worldBooks),u=await W9(l,n),m=await K9(i.enableStickers,i.stickerProbability),p=await I9(e),f=await B9(e);return{apiConfig:a,chatSettings:i,userData:l,characterData:c,worldBooks:d,timeInfo:u,stickerInfo:m,healthStatus:p,scheduleStatus:f}}async function L9(e){const{characterId:n,character:s,userNickname:a,allMessages:i,tempActiveMemoryIds:l,overrideSettings:c,displayName:d}=e,u=await Wv(n,s,c),{chatHistory:m,hasUnclaimedUserRedPacket:p}=await Kv(i,u.chatSettings.contextMessageCount,a,d||s.name,u.stickerInfo.stickerMeanings,u.chatSettings.timeAwareness),f=Gv({character:s,userData:u.userData,userNickname:a,worldBooks:u.worldBooks,timeInfo:u.timeInfo,chatHistory:m,stickerInfo:u.stickerInfo,chatSettings:u.chatSettings,hasUnclaimedUserRedPacket:p,healthStatus:u.healthStatus,scheduleStatus:u.scheduleStatus,memories:u.characterData.memories,tempActiveMemoryIds:l}),b={systemTemplate:Ir(f.intro+f.rolePlayRules+f.outputFormat+""),userPersona:Ir(f.userContext),characterPersona:Ir(f.characterContext),worldBook:Ir(f.worldBooksBefore+f.worldBooksAfter),memories:Ir(f.memories),chatHistory:Ir(f.chatHistory),functions:Ir(f.functions),other:Ir(f.timeContext+f.healthSchedule)};return{total:Object.values(b).reduce((g,k)=>g+k,0),breakdown:b}}async function z9(e){const{characterId:n,character:s,userNickname:a,allMessages:i,tempActiveMemoryIds:l}=e;try{const c=await Wv(n,s);let d=new Set(l||[]);if(c.characterData.memories&&c.characterData.memories.length>0){const b=i.slice(-10).map(y=>y.text||"").join(`
`);if(b.trim()){const y=C9(b,c.characterData.memories);y.forEach(g=>d.add(g)),y.length>0&&console.log(`[PrivateChatPromptBuilder] Auto-activated memories based on context: ${y.join(", ")}`)}}const{chatHistory:u,hasUnclaimedUserRedPacket:m}=await Kv(i,c.chatSettings.contextMessageCount,a,s.name,c.stickerInfo.stickerMeanings,c.chatSettings.timeAwareness);return{systemPrompt:G9({character:s,userData:c.userData,userNickname:a,worldBooks:c.worldBooks,timeInfo:c.timeInfo,chatHistory:u,stickerInfo:c.stickerInfo,chatSettings:c.chatSettings,hasUnclaimedUserRedPacket:m,healthStatus:c.healthStatus,scheduleStatus:c.scheduleStatus,memories:c.characterData.memories,tempActiveMemoryIds:Array.from(d)}),userPrompt:"",apiConfig:c.apiConfig,characterName:s.name}}catch(c){throw console.error("[PrivateChatPromptBuilder]  prompt :",c),c}}async function O9(){const e=await ae.get(te.API_SETTINGS,"api_configs"),n=parseInt(await ae.get(te.API_SETTINGS,"current_config_index")||"0");if(!e)throw new Error(" API");const a=JSON.parse(e)[n];if(!a||!a.apiKey||!a.baseUrl)throw new Error("API ");return{apiKey:a.apiKey,baseUrl:a.baseUrl,modelName:a.modelName,temperature:a.temperature||.9,maxTokens:a.maxTokens}}async function $9(e,n){const s=await ae.get(te.CHATS,"chat_settings")||{},a=await ae.get(te.CHAT_SETTINGS,`chat_detail_settings_${e}`)||{};return{contextMessageCount:s.contextMessageCount||10,enabledWorldBooks:s.enabledWorldBooks||[],timeAwareness:s.timeAwareness!==void 0?s.timeAwareness:!0,enableStickers:n?.enableStickers!==void 0?n.enableStickers:a.enableStickers!==void 0?a.enableStickers:!0,stickerProbability:n?.stickerProbability!==void 0?n.stickerProbability:a.stickerProbability!==void 0?a.stickerProbability:30,summaryLimit:s.summary_limit!==void 0?Number(s.summary_limit):3}}async function V9(){const e=await ae.get(te.USER_DATA,"userData")||{},n=await ae.get(te.USER_DATA,"user_description")||"";return{name:e.name||"",country:e.country||"",fortress:e.fortress||"",date:e.date||"",birthday:e.birthday||"",attendant:e.attendant||"",initialSword:e.initialSword||"",description:n}}async function H9(e){const s=(await ae.get(te.CHARACTERS,"characters")||[]).find(a=>a.id===e);return{worldBooks:s?.worldBooks||[],memories:s?.memories||[]}}async function U9(e,n){const s=await ae.get(te.WORLD_BOOKS,"world_books")||[],a=new Set([...e,...n]),i=s.filter(m=>m.scope==="global"),l=s.filter(m=>m.scope==="local"&&a.has(m.id)),c=[...i,...l],d=c.filter(m=>m.position==="before"),u=c.filter(m=>m.position==="after");return{before:d,after:u}}async function W9(e,n){const s=new Date,a=s.getHours(),i=s.getMonth()+1,l=s.getDate(),c=a<6?"":a<12?"":a<18?"":"";let d="",u="",m="";try{const g=M9.solar2lunar(s.getFullYear(),i,l);g.festival&&(u=g.festival),g.Term&&(m=g.Term),d=(C=>{if(!C)return null;const N=["","","","","",""],A=["","","","","",""],P=["","","","","",""],B=["","","","","",""];return N.includes(C)?"":A.includes(C)?"":P.includes(C)?"":B.includes(C)?"":null})(g.Term)||(i>=3&&i<=5?"":i>=6&&i<=8?"":i>=9&&i<=11?"":"")}catch(g){console.error(":",g),d=i>=3&&i<=5?"":i>=6&&i<=8?"":i>=9&&i<=11?"":""}const p=`${i}-${l}`,f={"1-1":"","2-3":"","2-4":"","2-14":"","3-3":"","3-8":"","4-1":"","5-1":"","5-4":"","6-1":"","8-13":"","8-14":"","8-15":"","10-1":"","12-24":"","12-25":"","12-31":""};!u&&f[p]&&(u=f[p]);let x="";if(e.date){const g=bf(e.date);if(g&&g.month===i&&g.day===l){const k=s.getFullYear()-g.year;k>0?x=`${k}`:k===0&&(x="")}}let b="";if(e.birthday){const g=bf(e.birthday);g&&g.month===i&&g.day===l&&(b="")}let y="";if(n?.manifestDate){const g=bf(n.manifestDate);if(g&&g.month===i&&g.day===l){const k=s.getFullYear()-g.year;k>0?y=`${k}`:k===0?y="":y=""}}return{timeOfDay:c,season:d,holiday:u,term:m,anniversary:x,birthday:b,manifestAnniversary:y,currentTime:`${s.getFullYear()}${i.toString().padStart(2,"0")}${l.toString().padStart(2,"0")} ${s.getHours().toString().padStart(2,"0")}:${s.getMinutes().toString().padStart(2,"0")}`}}function bf(e){try{if(e.includes("-")){const n=e.split("-");if(n.length>=3)return{year:parseInt(n[0]),month:parseInt(n[1]),day:parseInt(n[2])};if(n.length>=2)return{year:new Date().getFullYear(),month:parseInt(n[0]),day:parseInt(n[1])}}if(e.includes("")){const n=e.match(/(\d{4})/),s=e.match(/(\d+)/),a=e.match(/(\d+)/);if(s&&a)return{year:n?parseInt(n[1]):new Date().getFullYear(),month:parseInt(s[1]),day:parseInt(a[1])}}return null}catch(n){return console.error(":",n),null}}async function K9(e,n){if(!e)return{enabled:!1,stickers:[],stickerMeanings:{},stickerList:"",stickerGuidance:""};const{getAllStickers:s,getStickerMeaningsForAI:a}=await E9(async()=>{const{getAllStickers:u,getStickerMeaningsForAI:m}=await Promise.resolve().then(()=>Z9);return{getAllStickers:u,getStickerMeaningsForAI:m}},void 0),i=await s(),l=await a(),c=i.length>0?i.map(u=>`- ID: ${u.id} | : ${u.meaning}`).join(`
`):"";let d="";return i.length>0&&(n<=20?d="":n<=40?d="":n<=60?d="":n<=80?d="":d=""),{enabled:!0,stickers:i,stickerMeanings:l,stickerList:c,stickerGuidance:d}}async function Kv(e,n,s,a,i,l){const c=e.slice(-n);let d=!1;for(const p of c)if(p.senderId==="user"&&p.redPacket&&!p.redPacket.opened){d=!0;break}if(!l)return{chatHistory:c.map(f=>{if(f.senderId==="system")return null;if(f.isImageRecognition)return`${f.senderId==="user"?s:a}: ${f.text}`;if(f.isPlaceholderImage)return`${f.senderId==="user"?s:a}: [: ${f.text}]`;if(f.stickerId&&i[f.stickerId])return`${f.senderId==="user"?s:a}: [: ${i[f.stickerId]}]`;if(f.imageKey)return`${f.senderId==="user"?s:a}: []`;if(f.redPacket){const x=f.senderId==="user"?s:a;return f.redPacket.opened?`${x}: [-]`:`${x}: []`}return f.order?`${f.senderId==="user"?s:a}: ${f.text}`:`${f.senderId==="user"?s:a}: ${f.text}`}).filter(f=>f!==null).join(`
`),hasUnclaimedUserRedPacket:d};const u=[];let m=null;return c.forEach((p,f)=>{if(p.senderId==="system")return;const x=p.timestamp instanceof Date?p.timestamp:new Date(p.timestamp),b=`${x.getFullYear()}-${String(x.getMonth()+1).padStart(2,"0")}-${String(x.getDate()).padStart(2,"0")}`;(f===0||m!==b)&&(u.push(`${b}`),m=b);const y=`${String(x.getHours()).padStart(2,"0")}:${String(x.getMinutes()).padStart(2,"0")}`;let g="";const k=p.senderId==="user"?s:a;p.isImageRecognition?g=p.text:p.isPlaceholderImage?g=`[: ${p.text}]`:p.stickerId&&i[p.stickerId]?g=`[: ${i[p.stickerId]}]`:p.imageKey?g="[]":p.redPacket?p.redPacket.opened?g="[-]":g="[]":(p.order,g=p.text),u.push(`[${y}] ${k}: ${g}`)}),{chatHistory:u.join(`
`),hasUnclaimedUserRedPacket:d}}function Gv(e){const{character:n,userData:s,userNickname:a,worldBooks:i,timeInfo:l,chatHistory:c,stickerInfo:d,chatSettings:u,hasUnclaimedUserRedPacket:m,healthStatus:p,scheduleStatus:f,memories:x,tempActiveMemoryIds:b}=e,y=Array.isArray(b)?b.slice(-5):[];let g="";if(x&&x.length>0){const L=gi.processMemories(x,u.summaryLimit||3),z=V=>y.includes(V.id),R=V=>V.active!==!1||z(V),U=L.filter(V=>V.type==="permanent"&&R(V)).map(V=>`- ${V.content}`).join(`
`),W=L.filter(V=>V.type==="event"&&R(V)).map(V=>`- ${V.content} ${V.expires_at?`(: ${V.expires_at})`:""}`).join(`
`),O=L.filter(V=>V.type==="summary"&&R(V)).sort((V,ee)=>{const q=V.created_at||"",G=ee.created_at||"";return q.localeCompare(G)}).map(V=>`- ${V.content}`).join(`
`);(U||W||O)&&(g=`
** (Memory Context):**`,U&&(g+=`
[]
${U}`),W&&(g+=`
[]
${W}`),O&&(g+=`
[]
${O}`),g+=`
`)}const k=i.before.map((L,z)=>`- **${z+1}${L.name}:** ${L.content}`).join(`
`),w=i.after.map((L,z)=>`- **${z+1}${L.name}:** ${L.content}`).join(`
`);let C="";u.timeAwareness&&(C=`- **:** ${l.currentTime} (${l.timeOfDay}, ${l.season})`,l.term&&(C+=`
- **:** ${l.term}`),l.holiday&&(C+=`
- **:** ${l.holiday}`),l.anniversary&&(C+=`
- **:** ${l.anniversary}`),l.birthday&&(C+=`
- **:** ${l.birthday}`),l.manifestAnniversary&&(C+=`
- **:** ${l.manifestAnniversary}`));const N=u.timeAwareness?`** **
1. "" [HH:MM] YYYY-MM-DD
2. "23:15"23:15
3. 

`:"",A=d.enabled&&d.stickers.length>0?`${d.stickerGuidance}
${d.stickerList}
-  "stickerId" ID
- : { "sender": "${n.name}", "stickerId": "sticker_xxxxx" }
- 
- `:"",P=m?`

** ():**
- "[]"
- **"[-]"**
- : { "sender": "system", "content": "" }
- `:"",B=p?`
  - **:** ${p}
  - **:** - - - - `:"",$=f?`
  - **:** ${f}
  - **:** `:"",D=`""

**:**
- **:** 
- **:** `,T=`**:**
-  **** 
- 
- """"""""""
- 
-  emoji 
- **** """AI"""""""`,H=`**:**
- **:** ${n.name}
- **:** ${n.description||""}${n.manifestDate?`
- **:** ${n.manifestDate}`:""}`,K=`- ** ():**
  - **:** ${a}
  - **:** ${s.name}
  - **:** ${s.country}
  - **:** ${s.fortress}
  - **:** ${s.date}${s.birthday?`
  - **:** ${s.birthday}`:""}${s.attendant?`
  - **:** ${s.attendant}`:""}${s.initialSword?`
  - **:** ${s.initialSword}`:""}${s.description?`
  - **:** ${s.description}`:""}`,E=`** ():**
${A}

** ():**
- ""
- 
-  "isPlaceholderImage"  "content" 100
- : { "sender": "${n.name}", "content": "", "isPlaceholderImage": true }
- 100
- 
${P}

** ():**
- 
- 
- : { "sender": "${n.name}", "redPacket": { "amount": , "blessing": "" } }
- amount:  500-10000
- blessing: 
- `,I=`** ( JSON):**
{
    "messages": [
        { "sender": "${n.name}", "content": "" },
        {
            "sender": "${n.name}",
            "content": "",
            "quote": {
                "sender": "${a}",
                "content": ""
            }
        },
        {
            "sender": "${n.name}",
            "content": "/",
            "quote": {
                "sender": "${a}",
                "content": "[]"
            }
        },
        { "sender": "${n.name}", "stickerId": "sticker_xxxxx" },
        { "sender": "${n.name}", "content": "100", "isPlaceholderImage": true },
        { "sender": "${n.name}", "redPacket": { "amount": 200, "blessing": "" } }
    ]
}`,S=`
${T}

** ():**
- **:**  
    1. 

**:**
-  **${n.name}**  
- 1-4
- 
- quote

** ():**
- ****
- ****
- 
-   
    
  -   
  -   
  -   
  
- **** quotecontent"[]"
`;return{intro:D,worldBooksBefore:k?`
**:**
${k}`:`
**:**
- `,rolePlayAndFormat:S,characterContext:`
${H}`,timeContext:C?`
${C}`:"",userContext:`
${K}`,healthSchedule:`${B}${$}`,memories:g,chatHistory:`
${N}**:**
${c||""}`,worldBooksAfter:w?`

**:**
${w}`:`

**:**
- `,functions:`
${E}`,outputFormat:`

${I}`}}function G9(e){const n=Gv(e);return`${n.intro}
${n.worldBooksBefore}
${n.rolePlayAndFormat}
${n.characterContext}${n.timeContext}${n.userContext}${n.healthSchedule}
${n.memories}${n.chatHistory}
${n.worldBooksAfter}
${n.functions}
${n.outputFormat}`}function Y9({characterId:e,characterName:n,onClose:s,onUpdate:a,onDelete:i}){const[l,c]=j.useState(""),[d,u]=j.useState(!1),[m,p]=j.useState(!0),[f,x]=j.useState(30),[b,y]=j.useState(!1),[g,k]=j.useState(!1),[w,C]=j.useState(!1),[N,A]=j.useState(!1),[P,B]=j.useState(null),[$,D]=j.useState(!1),[T,H]=j.useState("50"),[K,E]=j.useState("idle"),[I,S]=j.useState(()=>Le.chatSettings?.darkMode||!1),[L,z]=j.useState(()=>Le.chatSettings?.theme||(Le.chatSettings?.darkMode?"dark":"light"));j.useEffect(()=>{(async()=>{if(!Le.chatSettings)try{const ie=await ae.get(te.CHATS,"chat_settings");ie&&(Le.chatSettings=ie,ie.darkMode!==void 0&&S(ie.darkMode),z(ie.theme||(ie.darkMode?"dark":"light")))}catch(ie){console.error("Failed to load global chat settings in ChatDetailSettings",ie)}})()},[]),j.useEffect(()=>{const ne=se=>{se.detail?.characterId===e&&K==="processing"&&(E("success"),setTimeout(()=>E("idle"),3e3))},ie=se=>{se.detail?.characterId===e&&K==="processing"&&(E("error"),setTimeout(()=>E("idle"),3e3))};window.addEventListener("character-memories-updated",ne),window.addEventListener("memory-extraction-failed",ie);const ve=se=>{const{type:ge,payload:Me}=se.data;ge==="AI_TASK_COMPLETED"&&Me?.taskType==="memory_extraction"&&Me?.characterId===e?(console.log("[ChatDetailSettings] Received SW memory extraction completion directly"),K==="processing"&&(E("success"),setTimeout(()=>E("idle"),3e3))):ge==="AI_TASK_FAILED"&&Me?.characterId===e&&(console.log("[ChatDetailSettings] Received SW memory extraction failure directly"),K==="processing"&&(E("error"),setTimeout(()=>E("idle"),3e3)))};return"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",ve),R(),()=>{window.removeEventListener("character-memories-updated",ne),window.removeEventListener("memory-extraction-failed",ie),"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener("message",ve)}},[e,K]);const R=async()=>{try{const ne=`chat_detail_settings_${e}`,ie=await ae.get(te.CHAT_SETTINGS,ne);ie?(c(ie.remark||""),u(ie.isPinned||!1),p(ie.enableStickers!==void 0?ie.enableStickers:!0),x(ie.stickerProbability!==void 0?ie.stickerProbability:30)):(c(""),u(!1),p(!0),x(30))}catch(ne){console.error("Failed to load settings:",ne)}},U=async(ne,ie,ve,se)=>{try{const ge=`chat_detail_settings_${e}`,Me={remark:ne,isPinned:ie,enableStickers:ve,stickerProbability:se};await ae.set(te.CHAT_SETTINGS,ge,Me),await W(ne,ie),window.dispatchEvent(new CustomEvent("chat-settings-updated")),a()}catch(ge){console.error("Failed to save settings:",ge)}},W=async(ne,ie)=>{try{const ve=await ae.get(te.CHATS,"chat_list");if(ve){const se=ve.findIndex(ge=>ge.id===e);if(se!==-1){ve[se].remark=ne,ve[se].isPinned=ie;try{const ge=await ae.get(te.CHAT_MESSAGES,`chat_messages_${e}`);ge&&ge.length>0&&ge[ge.length-1].senderId==="character"&&(ve[se].lastSender=ne)}catch(ge){console.error("Failed to check last message sender:",ge)}await ae.set(te.CHATS,"chat_list",ve)}}}catch(ve){console.error("Failed to update chat list:",ve)}},Z=ne=>{c(ne),U(ne,d,m,f)},O=()=>{const ne=!d;u(ne),U(l,ne,m,f)},V=()=>{const ne=!m;p(ne),U(l,d,ne,f)},ee=ne=>{const ie=parseInt(ne,10);!isNaN(ie)&&ie>=0&&ie<=100&&(x(ie),U(l,d,m,ie))},q=async()=>{try{const ne=parseInt(T,10);if(isNaN(ne)||ne<=0){Br.error("");return}const ie=`chat_messages_${e}`,ve=await ae.get(te.CHAT_MESSAGES,ie)||[];if(ve.length===0){Br.error("");return}await $v(e,ve,{manualCount:ne}),E("processing"),C(!1)}catch(ne){console.error("Failed to trigger manual extraction:",ne),Br.error("")}},G=async()=>{try{D(!0);const ne=`chat_messages_${e}`,ie=await ae.get(te.CHAT_MESSAGES,ne)||[],se=(await ae.get(te.CHARACTERS,"characters")||[]).find(he=>he.id===e)||{id:e,name:n,description:""},ge=await ae.get(te.CHAT_SETTINGS,`chat_detail_settings_${e}`),Me=await ae.get(te.CHATS,"chat_settings"),M=ge?.userNickname||Me?.userNickname||"",me=await L9({characterId:e,character:se,userNickname:M,displayName:l||n,allMessages:ie,overrideSettings:{enableStickers:m,stickerProbability:f}});B(me),A(!0)}catch(ne){console.error(ne),Br.error("")}finally{D(!1)}},Q=async()=>{try{const ne=`chat_messages_${e}`;await ae.delete(te.CHAT_MESSAGES,ne);const ie=await ae.get(te.CHATS,"chat_list");if(ie){const ve=ie.findIndex(se=>se.id===e);ve!==-1&&(ie[ve].lastMessage="",ie[ve].lastSender="",await ae.set(te.CHATS,"chat_list",ie))}y(!1),window.dispatchEvent(new CustomEvent("chat-settings-updated")),a(),setTimeout(()=>{window.dispatchEvent(new CustomEvent("chat-messages-cleared"))},100),s()}catch(ne){console.error("Failed to clear messages:",ne)}},le=async()=>{try{const ne=`chat_messages_${e}`;await ae.delete(te.CHAT_MESSAGES,ne);const ie=`chat_detail_settings_${e}`;await ae.delete(te.CHAT_SETTINGS,ie);const ve=await ae.get(te.CHATS,"chat_list");if(ve){const se=ve.filter(ge=>ge.id!==e);await ae.set(te.CHATS,"chat_list",se)}k(!1),window.dispatchEvent(new CustomEvent("chat-settings-updated")),i?i():s()}catch(ne){console.error("Failed to delete chat:",ne),k(!1)}};return t.jsxs(xe.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30,mass:1},className:`fixed inset-0 z-[70] flex flex-col shadow-[-10px_0_30px_rgba(0,0,0,0.1)] ${L==="light-frosted"?"bg-white/80 backdrop-blur-xl":L==="dark-frosted"?"bg-black/60 backdrop-blur-xl":I?"bg-[#121212]":"bg-white"}`,children:[t.jsxs("div",{className:`h-16 flex items-center justify-between px-4 ${L==="light-frosted"||L==="dark-frosted"?"bg-transparent":I?"bg-[#121212]":"bg-white"}`,children:[t.jsx("button",{onClick:s,className:"p-2 -ml-2 active:opacity-60 hover:opacity-60 transition-opacity",children:t.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:L==="dark-frosted"||I?"white":"black",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})}),t.jsx("h1",{className:`font-semibold text-[18px] ${L==="dark-frosted"||I?"text-white":"text-[#333]"}`,children:""}),t.jsx("div",{className:"w-11"})]}),t.jsx(Ie,{children:K!=="idle"&&t.jsx(xe.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"absolute top-20 left-4 right-4 z-50 flex justify-center pointer-events-none",children:t.jsxs("div",{className:`px-4 py-3 rounded-xl shadow-lg flex items-center gap-3 backdrop-blur-md ${L==="light-frosted"?"bg-white/80 text-[#333]":L==="dark-frosted"?"bg-black/60 text-white":I?"bg-[#2d2d2d] text-white":"bg-white text-[#333]"}`,children:[K==="processing"&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-current border-t-transparent animate-spin"}),t.jsx("span",{className:"text-[14px] font-medium",children:"..."})]}),K==="success"&&t.jsxs(t.Fragment,{children:[t.jsx(wt,{className:"w-5 h-5 text-[#7B9E7B]"}),t.jsx("span",{className:"text-[14px] font-medium",children:""})]}),K==="error"&&t.jsxs(t.Fragment,{children:[t.jsx(ht,{className:"w-5 h-5 text-[#ff3b30]"}),t.jsx("span",{className:"text-[14px] font-medium",children:""})]})]})})}),t.jsxs("div",{className:`flex-1 overflow-y-auto px-5 py-6 ${L==="light-frosted"||L==="dark-frosted"?"bg-transparent":I?"bg-[#121212]":"bg-white"}`,children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] mb-3 ${L==="dark-frosted"||I?"text-white":"text-[#333]"}`,children:""}),t.jsx("input",{type:"text",value:l,onChange:ne=>Z(ne.target.value),placeholder:n===""?"":n,className:`w-full px-4 py-3 rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] outline-none transition-colors ${L==="light-frosted"?"bg-white/40 text-[#333] placeholder:text-[#999] focus:bg-white/60":L==="dark-frosted"?"bg-black/40 text-white placeholder:text-[#888] focus:bg-black/60":I?"bg-[#2d2d2d] text-white placeholder:text-[#666] focus:bg-[#3d3d3d]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999] focus:bg-[#ebebeb]"}`})]}),t.jsx("div",{className:"mb-8",children:t.jsxs(xe.button,{whileTap:{scale:.98},onClick:O,className:`w-full px-4 py-3 rounded-lg transition-colors flex items-center justify-between ${L==="light-frosted"?"bg-white/40 active:bg-white/60 hover:bg-white/60":L==="dark-frosted"?"bg-black/40 active:bg-black/60 hover:bg-black/60":I?"bg-[#2d2d2d] active:bg-[#3d3d3d] hover:bg-[#3d3d3d]":"bg-[#f5f5f5] active:bg-[#ebebeb] hover:bg-[#ebebeb]"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(g8,{className:`w-5 h-5 ${L==="dark-frosted"||I?"text-[#aaa]":"text-[#666]"}`,strokeWidth:2}),t.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] ${L==="dark-frosted"||I?"text-white":"text-[#333]"}`,children:d?"":""})]}),d&&t.jsx(xe.div,{initial:{scale:0},animate:{scale:1},className:"w-5 h-5 rounded-full bg-[#7B9E7B] flex items-center justify-center",children:t.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})})]})}),t.jsxs("div",{className:"mb-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] mb-1 ${L==="dark-frosted"||I?"text-white":"text-[#333]"}`,children:""}),t.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[13px] ${L==="dark-frosted"||I?"text-[#aaa]":"text-[#999]"}`,children:""})]}),t.jsx(xe.button,{onClick:V,className:`w-12 h-7 rounded-full flex items-center px-0.5 relative ${m?"#7B9E7B":L==="dark-frosted"?"bg-black/40":I?"bg-[#3d3d3d]":"bg-[#d0d0d0]"}`,animate:{backgroundColor:m?"#7B9E7B":L==="dark-frosted"?"rgba(0,0,0,0.4)":I?"#3d3d3d":"#d0d0d0"},whileTap:{scale:.95},children:t.jsx(xe.div,{className:"w-6 h-6 rounded-full bg-white shadow-sm",animate:{x:m?20:0},transition:{type:"spring",stiffness:500,damping:30}})})]}),t.jsx(Ie,{children:m&&t.jsx(xe.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:t.jsxs("div",{className:"mt-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] ${L==="dark-frosted"||I?"text-[#aaa]":"text-[#666]"}`,children:""}),t.jsxs("span",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] text-[#7B9E7B]",children:[f,"%"]})]}),t.jsx("div",{className:"px-1",children:t.jsx("input",{type:"range",min:"0",max:"100",value:f,onChange:ne=>ee(ne.target.value),className:`w-full h-2 rounded-lg appearance-none cursor-pointer slider ${L==="light-frosted"?"bg-white/40":L==="dark-frosted"?"bg-black/40":I?"bg-[#2d2d2d]":"bg-[#f5f5f5]"}`,style:{background:`linear-gradient(to right, #7B9E7B 0%, #7B9E7B ${f}%, ${L==="light-frosted"?"rgba(255,255,255,0.4)":L==="dark-frosted"?"rgba(0,0,0,0.4)":I?"#2d2d2d":"#f5f5f5"} ${f}%, ${L==="light-frosted"?"rgba(255,255,255,0.4)":L==="dark-frosted"?"rgba(0,0,0,0.4)":I?"#2d2d2d":"#f5f5f5"} 100%)`}})}),t.jsxs("div",{className:"flex justify-between mt-2 px-1",children:[t.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] ${L==="dark-frosted"?"text-[#888]":I?"text-[#666]":"text-[#999]"}`,children:"0%"}),t.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] ${L==="dark-frosted"?"text-[#888]":I?"text-[#666]":"text-[#999]"}`,children:"100%"})]}),t.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] mt-2 ${L==="dark-frosted"?"text-[#888]":I?"text-[#666]":"text-[#999]"}`,children:""})]})})})]}),t.jsx("div",{className:"mb-8",children:t.jsxs(xe.button,{whileTap:{scale:.98},onClick:()=>C(!0),className:`w-full px-4 py-3 rounded-lg transition-colors flex items-center justify-between ${L==="light-frosted"?"bg-white/40 active:bg-white/60 hover:bg-white/60":L==="dark-frosted"?"bg-black/40 active:bg-black/60 hover:bg-black/60":I?"bg-[#2d2d2d] active:bg-[#3d3d3d] hover:bg-[#3d3d3d]":"bg-[#f5f5f5] active:bg-[#ebebeb] hover:bg-[#ebebeb]"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(ap,{className:`w-5 h-5 ${L==="dark-frosted"||I?"text-[#aaa]":"text-[#666]"}`,strokeWidth:2}),t.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] ${L==="dark-frosted"||I?"text-white":"text-[#333]"}`,children:""})]}),t.jsx("div",{className:`text-[12px] ${L==="dark-frosted"||I?"text-[#666]":"text-[#999]"}`,children:""})]})}),t.jsx("div",{className:"mb-8",children:t.jsxs(xe.button,{whileTap:{scale:.98},onClick:G,disabled:$,className:`w-full px-4 py-3 rounded-lg transition-colors flex items-center justify-between ${L==="light-frosted"?"bg-white/40 active:bg-white/60 hover:bg-white/60":L==="dark-frosted"?"bg-black/40 active:bg-black/60 hover:bg-black/60":I?"bg-[#2d2d2d] active:bg-[#3d3d3d] hover:bg-[#3d3d3d]":"bg-[#f5f5f5] active:bg-[#ebebeb] hover:bg-[#ebebeb]"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(mc,{className:`w-5 h-5 ${L==="dark-frosted"||I?"text-[#aaa]":"text-[#666]"}`,strokeWidth:2}),t.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] ${L==="dark-frosted"||I?"text-white":"text-[#333]"}`,children:$?"...":""})]}),t.jsx("div",{className:`text-[12px] ${L==="dark-frosted"||I?"text-[#666]":"text-[#999]"}`,children:"Prompt"})]})}),t.jsx("div",{className:"mb-8",children:t.jsxs(xe.button,{whileTap:{scale:.98},onClick:()=>y(!0),className:`w-full px-4 py-3 rounded-lg transition-colors flex items-center gap-3 ${L==="light-frosted"?"bg-[#ffe5e5]/60 active:bg-[#ffd0d0]/80 hover:bg-[#ffd0d0]/80":L==="dark-frosted"?"bg-[#3a1d1d]/80 active:bg-[#4a2d2d]/80 hover:bg-[#4a2d2d]/80":I?"bg-[#3a1d1d] active:bg-[#4a2d2d] hover:bg-[#4a2d2d]":"bg-[#ffe5e5] active:bg-[#ffd0d0] hover:bg-[#ffd0d0]"}`,children:[t.jsx(Dn,{className:"w-5 h-5 text-[#ff3b30]",strokeWidth:2}),t.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] text-[#ff3b30]",children:""})]})}),t.jsx("div",{className:"mb-8",children:t.jsxs(xe.button,{whileTap:{scale:.98},onClick:()=>k(!0),className:`w-full px-4 py-3 rounded-lg transition-colors flex items-center gap-3 ${L==="light-frosted"?"bg-[#ffe5e5]/60 active:bg-[#ffd0d0]/80 hover:bg-[#ffd0d0]/80":L==="dark-frosted"?"bg-[#3a1d1d]/80 active:bg-[#4a2d2d]/80 hover:bg-[#4a2d2d]/80":I?"bg-[#3a1d1d] active:bg-[#4a2d2d] hover:bg-[#4a2d2d]":"bg-[#ffe5e5] active:bg-[#ffd0d0] hover:bg-[#ffd0d0]"}`,children:[t.jsx(ht,{className:"w-5 h-5 text-[#ff3b30]",strokeWidth:2}),t.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] text-[#ff3b30]",children:""})]})})]}),Us.createPortal(t.jsx(Ie,{children:w&&t.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[t.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-black/40",onClick:()=>C(!1)}),t.jsxs(xe.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[320px] shadow-xl ${L==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":L==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":I?"bg-[#1e1e1e]":"bg-white"}`,children:[t.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-3 ${L==="dark-frosted"||I?"text-white":"text-black"}`,children:""}),t.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] text-center mb-4 ${L==="dark-frosted"||I?"text-[#aaa]":"text-[#666]"}`,children:""}),t.jsx("div",{className:"mb-6",children:t.jsx("input",{type:"number",value:T,onChange:ne=>H(ne.target.value),className:`w-full px-4 py-2 rounded-lg text-center outline-none font-['Source_Han_Sans_CN_VF:Regular',sans-serif] ${L==="light-frosted"?"bg-white/40 text-[#333] focus:bg-white/60":L==="dark-frosted"?"bg-black/40 text-white focus:bg-black/60":I?"bg-[#2d2d2d] text-white focus:bg-[#3d3d3d]":"bg-[#f5f5f5] text-[#333] focus:bg-[#ebebeb]"}`})}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>C(!1),className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors ${L==="light-frosted"?"bg-white/40 text-[#666] hover:bg-white/60":L==="dark-frosted"?"bg-white/10 text-white hover:bg-white/20":I?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),t.jsx("button",{onClick:q,className:"flex-1 py-2.5 rounded-xl bg-[#7B9E7B] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity",children:""})]})]})]})}),document.body),Us.createPortal(t.jsx(Ie,{children:b&&t.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[t.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-black/40",onClick:()=>y(!1)}),t.jsxs(xe.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[320px] shadow-xl ${L==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":L==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":I?"bg-[#1e1e1e]":"bg-white"}`,children:[t.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-3 ${L==="dark-frosted"||I?"text-white":"text-black"}`,children:""}),t.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] text-center mb-6 ${L==="dark-frosted"||I?"text-[#aaa]":"text-[#666]"}`,children:""}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>y(!1),className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors ${L==="light-frosted"?"bg-white/40 text-[#666] hover:bg-white/60":L==="dark-frosted"?"bg-white/10 text-white hover:bg-white/20":I?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),t.jsx("button",{onClick:Q,className:"flex-1 py-2.5 rounded-xl bg-[#ff3b30] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity",children:""})]})]})]})}),document.body),Us.createPortal(t.jsx(Ie,{children:g&&t.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[t.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-black/40",onClick:()=>k(!1)}),t.jsxs(xe.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[320px] shadow-xl ${L==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":L==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":I?"bg-[#1e1e1e]":"bg-white"}`,children:[t.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-3 ${L==="dark-frosted"||I?"text-white":"text-black"}`,children:""}),t.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] text-center mb-6 ${L==="dark-frosted"||I?"text-[#aaa]":"text-[#666]"}`,children:""}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>k(!1),className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors ${L==="light-frosted"?"bg-white/40 text-[#666] hover:bg-white/60":L==="dark-frosted"?"bg-white/10 text-white hover:bg-white/20":I?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),t.jsx("button",{onClick:le,className:"flex-1 py-2.5 rounded-xl bg-[#ff3b30] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity",children:""})]})]})]})}),document.body),Us.createPortal(t.jsx(Ie,{children:N&&P&&t.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[t.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-black/40",onClick:()=>A(!1)}),t.jsxs(xe.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[360px] shadow-xl max-h-[80vh] overflow-y-auto ${L==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":L==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":I?"bg-[#1e1e1e]":"bg-white"}`,children:[t.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-6 ${L==="dark-frosted"||I?"text-white":"text-black"}`,children:"Prompt "}),t.jsxs("div",{className:"space-y-4 mb-6",children:[t.jsxs("div",{className:`p-4 rounded-xl flex justify-between items-center ${L==="dark-frosted"?"bg-white/10":I?"bg-[#2d2d2d]":"bg-[#f5f5f5]"}`,children:[t.jsx("span",{className:`text-sm ${L==="dark-frosted"||I?"text-[#aaa]":"text-[#666]"}`,children:" Token "}),t.jsx("span",{className:`text-xl font-bold ${L==="dark-frosted"||I?"text-white":"text-[#333]"}`,children:P.total})]}),t.jsx("div",{className:"space-y-3",children:[{label:"",value:P.breakdown.systemTemplate,color:"#60a5fa"},{label:"",value:P.breakdown.userPersona,color:"#34d399"},{label:"",value:P.breakdown.characterPersona,color:"#f472b6"},{label:"",value:P.breakdown.worldBook,color:"#fbbf24"},{label:"",value:P.breakdown.memories,color:"#818cf8"},{label:"",value:P.breakdown.chatHistory,color:"#a78bfa"},{label:"",value:P.breakdown.functions,color:"#9ca3af"},{label:"",value:P.breakdown.other,color:"#cbd5e1"}].map((ne,ie)=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:ne.color}}),t.jsx("span",{className:`text-sm flex-1 ${L==="dark-frosted"||I?"text-[#ddd]":"text-[#555]"}`,children:ne.label}),t.jsx("span",{className:`text-sm font-medium ${L==="dark-frosted"||I?"text-white":"text-[#333]"}`,children:ne.value}),t.jsx("div",{className:"w-16 h-1.5 rounded-full bg-gray-200/20 overflow-hidden",children:t.jsx("div",{className:"h-full rounded-full",style:{width:`${Math.min(100,ne.value/P.total*100)}%`,backgroundColor:ne.color}})})]},ie))})]}),t.jsx("button",{onClick:()=>A(!1),className:`w-full py-3 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors ${L==="light-frosted"?"bg-white/40 text-[#666] hover:bg-white/60":L==="dark-frosted"?"bg-white/10 text-white hover:bg-white/20":I?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""})]})]})}),document.body)]})}const Yv=j.memo(({dateString:e})=>t.jsx("div",{className:"flex justify-center mb-3",children:t.jsx("div",{className:"bg-black/20 rounded-full px-2 py-0 flex items-center justify-center",children:t.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] text-white",children:e})})}));Yv.displayName="DateSeparator";const qv=async(e,n)=>{try{const s=await dp(e,{maxSizeMB:.2,maxWidthOrHeight:512,useWebWorker:!0}),a=`sticker_${Date.now()}`,i=`meme-${a}`;await bs(i,new File([s],e.name,{type:s.type}));const l={id:a,imageKey:i,meaning:n,createdAt:new Date().toISOString()},c=await Aa();return c.push(l),await ae.set(te.STICKERS,"stickers",c),l}catch(s){throw console.error("Failed to add sticker:",s),s}},Aa=async()=>{try{return await ae.get(te.STICKERS,"stickers")||[]}catch(e){return console.error("Failed to get stickers:",e),[]}},mp=async e=>{try{return await xt(e)}catch(n){return console.error("Failed to get sticker image:",n),null}},Zv=async e=>{try{const n=await Aa(),s=n.find(i=>i.id===e);if(!s)throw new Error("Sticker not found");s.imageKey&&await ka(s.imageKey);const a=n.filter(i=>i.id!==e);await ae.set(te.STICKERS,"stickers",a)}catch(n){throw console.error("Failed to delete sticker:",n),n}},q9=async()=>{try{const e=await Aa(),n={};return e.forEach(s=>{n[s.id]=s.meaning}),n}catch(e){return console.error("Failed to get sticker meanings:",e),{}}},Qv=async e=>{const n=e.split(`
`).map(a=>a.trim()).filter(a=>a.length>0),s={success:0,failed:0,errors:[]};for(const a of n)try{const i=a.indexOf("-");if(i===-1){s.failed++,s.errors.push(`: "${a}" (: -URL)`);continue}const l=a.substring(0,i).trim(),c=a.substring(i+1).trim();if(!l){s.failed++,s.errors.push(`: "${a}"`);continue}if(!c||!c.startsWith("http://")&&!c.startsWith("https://")){s.failed++,s.errors.push(`URL: "${c}"`);continue}const u={id:`sticker_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,imageUrl:c,meaning:l,createdAt:new Date().toISOString()},m=await Aa();m.push(u),await ae.set(te.STICKERS,"stickers",m),s.success++,await new Promise(p=>setTimeout(p,10))}catch(i){s.failed++,s.errors.push(`"${a.substring(0,30)}...": ${i.message||""}`)}return s},Z9=Object.freeze(Object.defineProperty({__proto__:null,addSticker:qv,batchImportStickersFromURL:Qv,deleteSticker:Zv,getAllStickers:Aa,getStickerImageURL:mp,getStickerMeaningsForAI:q9},Symbol.toStringTag,{value:"Module"}));function Q9({onClose:e,onSelect:n,theme:s,isDarkMode:a}){const[i,l]=j.useState([]),[c,d]=j.useState({}),[u,m]=j.useState(!1),[p,f]=j.useState(null),[x,b]=j.useState(""),[y,g]=j.useState(null),[k,w]=j.useState(!1),C=j.useRef(null),[N,A]=j.useState({show:!1,message:""}),[P,B]=j.useState(!1),[$,D]=j.useState(""),[T,H]=j.useState(!1),[K,E]=j.useState(null),[I,S]=j.useState(!1);j.useEffect(()=>{L()},[]);const L=async()=>{try{const ee=await Aa();l(ee);const q={};for(const G of ee)if(G.imageUrl)q[G.id]=G.imageUrl;else if(G.imageKey){const Q=await mp(G.imageKey);Q&&(q[G.id]=Q)}d(q)}catch(ee){console.error("Failed to load stickers:",ee)}},z=ee=>{const q=ee.target.files?.[0];if(q){g(q);const G=new FileReader;G.onload=Q=>{f(Q.target?.result)},G.readAsDataURL(q),m(!0)}C.current&&(C.current.value="")},R=async()=>{if(!y||!x.trim()){A({show:!0,message:""}),setTimeout(()=>A({show:!1,message:""}),3e3);return}w(!0);try{await qv(y,x.trim()),await L(),U()}catch(ee){console.error("Failed to upload sticker:",ee),A({show:!0,message:ee.message||""}),setTimeout(()=>A({show:!1,message:""}),5e3)}finally{w(!1)}},U=()=>{m(!1),f(null),b(""),g(null)},W=ee=>{n(ee),e()},Z=async(ee,q)=>{if(ee.stopPropagation(),confirm(""))try{await Zv(q),await L()}catch(G){console.error("Failed to delete sticker:",G),A({show:!0,message:G.message||""}),setTimeout(()=>A({show:!1,message:""}),5e3)}},O=async()=>{if(!$.trim()){A({show:!0,message:"URL"}),setTimeout(()=>A({show:!1,message:""}),3e3);return}H(!0),E(null);try{const ee=await Qv($.trim());E(ee),await L(),ee.success===0&&ee.failed>0&&(A({show:!0,message:"URL"}),setTimeout(()=>A({show:!1,message:""}),5e3))}catch(ee){console.error("Failed to batch import stickers:",ee),A({show:!0,message:ee.message||""}),setTimeout(()=>A({show:!1,message:""}),5e3)}finally{H(!1)}},V=()=>{B(!1),D(""),E(null)};return t.jsxs(t.Fragment,{children:[t.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 bg-transparent z-[1050]",onClick:e}),t.jsxs(xe.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{type:"spring",stiffness:400,damping:30},className:`absolute bottom-[70px] right-3 w-[320px] h-[300px] rounded-xl shadow-lg flex flex-col z-[1051] ${s==="light-frosted"?"bg-white/20 backdrop-blur-xl border border-white/20":s==="dark-frosted"?"bg-black/20 backdrop-blur-xl border border-white/10":a?"bg-[#1e1e1e]":"bg-white"}`,onClick:ee=>ee.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[t.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[16px] ${s==="light-frosted"?"text-[#333]":a||s==="dark-frosted"?"text-white":"text-[#333]"}`,children:I?"":""}),t.jsx("button",{onClick:()=>S(!I),className:`px-3 py-1.5 rounded-lg transition-colors ${I?"bg-[#88A588] text-white":s==="light-frosted"?"bg-white/30 text-[#333] hover:bg-white/40":s==="dark-frosted"?"bg-white/10 text-white hover:bg-white/20":a?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8]"}`,children:t.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[13px]",children:I?"":""})})]}),t.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:t.jsxs("div",{className:"grid grid-cols-[repeat(auto-fill,80px)] gap-2.5 justify-center",children:[!I&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>C.current?.click(),className:`w-20 h-20 rounded-lg flex items-center justify-center cursor-pointer transition-colors ${s==="light-frosted"?"bg-white/20 hover:bg-white/30 active:bg-white/40":s==="dark-frosted"?"bg-white/10 hover:bg-white/20 active:bg-white/30":a?"bg-[#2d2d2d] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#e8e8e8] hover:bg-[#d8d8d8] active:bg-[#c8c8c8]"}`,children:t.jsx(is,{className:`w-8 h-8 ${s==="light-frosted"?"text-[#333]":a||s==="dark-frosted"?"text-[#aaa]":"text-[#999]"}`,strokeWidth:2})}),t.jsx("button",{onClick:()=>B(!0),className:`w-20 h-20 rounded-lg flex items-center justify-center cursor-pointer transition-colors ${s==="light-frosted"?"bg-white/20 hover:bg-white/30 active:bg-white/40":s==="dark-frosted"?"bg-white/10 hover:bg-white/20 active:bg-white/30":a?"bg-[#2d2d2d] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#e8e8e8] hover:bg-[#d8d8d8] active:bg-[#c8c8c8]"}`,children:t.jsx(cp,{className:`w-8 h-8 ${s==="light-frosted"?"text-[#333]":a||s==="dark-frosted"?"text-[#aaa]":"text-[#999]"}`,strokeWidth:2})})]}),i.map(ee=>t.jsxs("div",{className:"relative w-20 h-20 group",children:[t.jsx("button",{onClick:()=>!I&&W(ee.id),className:`w-full h-full rounded-lg p-1 transition-colors ${I?"cursor-default":s==="light-frosted"?"cursor-pointer hover:bg-white/30 active:bg-white/40":s==="dark-frosted"?"cursor-pointer hover:bg-white/20 active:bg-white/30":a?"cursor-pointer hover:bg-[#2d2d2d] active:bg-[#3d3d3d]":"cursor-pointer hover:bg-[#f0f0f0] active:bg-[#e8e8e8]"} ${s==="light-frosted"?"bg-white/20":s==="dark-frosted"?"bg-white/5":a?"bg-[#2d2d2d]":"bg-[#f9f9f9]"}`,children:c[ee.id]&&t.jsx("img",{src:c[ee.id],alt:ee.meaning,className:"w-full h-full object-contain"})}),t.jsx("button",{onClick:q=>Z(q,ee.id),className:`absolute -top-1 -right-1 w-5 h-5 bg-[#ff3b30] rounded-full flex items-center justify-center transition-opacity ${I?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:t.jsx(ht,{className:"w-3 h-3 text-white",strokeWidth:3})})]},ee.id))]})})]}),t.jsx("input",{ref:C,type:"file",accept:"image/*",className:"hidden",onChange:z}),t.jsx(Ie,{children:u&&t.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[t.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40",onClick:U}),t.jsxs(xe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[320px] shadow-xl ${s==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":s==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":a?"bg-[#1e1e1e]":"bg-white"}`,children:[t.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-4 ${s==="light-frosted"?"text-[#333]":a||s==="dark-frosted"?"text-white":"text-black"}`,children:""}),p&&t.jsx("img",{src:p,alt:"preview",className:`w-[100px] h-[100px] object-cover rounded-lg mx-auto mb-4 ${s==="light-frosted"?"bg-white/50":s==="dark-frosted"?"bg-white/10":a?"bg-[#2d2d2d]":"bg-[#f0f0f0]"}`}),t.jsx("input",{type:"text",value:x,onChange:ee=>b(ee.target.value),placeholder:"AI(,:)",className:`w-full px-4 py-3 rounded-xl border-none outline-none font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] mb-6 ${s==="light-frosted"?"bg-white/40 text-[#333] placeholder:text-[#999]":s==="dark-frosted"?"bg-white/10 text-white placeholder:text-[#aaa]":a?"bg-[#2d2d2d] text-white placeholder:text-[#666]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999]"}`}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:U,disabled:k,className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors disabled:opacity-50 ${s==="light-frosted"?"bg-white/30 text-[#666] hover:bg-white/40":s==="dark-frosted"?"bg-white/10 text-[#ccc] hover:bg-white/20":a?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),t.jsx("button",{onClick:R,disabled:k,className:"flex-1 py-2.5 rounded-xl bg-[#88A588] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity disabled:opacity-50",children:k?"...":""})]})]})]})}),t.jsx(Ie,{children:P&&t.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[t.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40",onClick:V}),t.jsxs(xe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[400px] shadow-xl max-h-[80vh] overflow-y-auto ${s==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":s==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":a?"bg-[#1e1e1e]":"bg-white"}`,children:[t.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-3 ${s==="light-frosted"?"text-[#333]":a||s==="dark-frosted"?"text-white":"text-black"}`,children:""}),t.jsxs("div",{className:`rounded-xl p-3 mb-4 ${s==="light-frosted"?"bg-white/50":s==="dark-frosted"?"bg-white/10":a?"bg-[#2d2d2d]":"bg-[#f5f5f5]"}`,children:[t.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[13px] mb-2 ${s==="light-frosted"?"text-[#333]":a||s==="dark-frosted"?"text-[#aaa]":"text-[#666]"}`,children:""}),t.jsxs("p",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[12px] leading-relaxed ${s==="light-frosted"?"text-[#666]":a||s==="dark-frosted"?"text-[#888]":"text-[#999]"}`,children:["",t.jsx("br",{}),t.jsx("span",{className:"text-[#88A588]",children:"-URL"}),t.jsx("br",{}),t.jsx("br",{}),"",t.jsx("br",{}),"-https://example.com/happy.jpg",t.jsx("br",{}),"-https://example.com/sad.png",t.jsx("br",{}),"-https://example.com/angry.gif"]})]}),t.jsx("textarea",{value:$,onChange:ee=>D(ee.target.value),placeholder:`-https://example.com/happy.jpg
-https://example.com/sad.png`,className:`w-full px-4 py-3 rounded-xl border-none outline-none font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] mb-4 h-[150px] resize-y ${s==="light-frosted"?"bg-white/40 text-[#333] placeholder:text-[#999]":s==="dark-frosted"?"bg-white/10 text-white placeholder:text-[#aaa]":a?"bg-[#2d2d2d] text-white placeholder:text-[#666]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999]"}`}),K&&t.jsxs("div",{className:`rounded-xl p-4 mb-4 ${s==="light-frosted"?"bg-white/50":s==="dark-frosted"?"bg-white/10":a?"bg-[#2d2d2d]":"bg-[#f9f9f9]"}`,children:[t.jsxs("div",{className:"flex gap-4 mb-2",children:[t.jsxs("p",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-[#88A588]",children:[": ",K.success]}),t.jsxs("p",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-[#ff3b30]",children:[": ",K.failed]})]}),K.errors.length>0&&t.jsxs("div",{className:"max-h-[120px] overflow-y-auto",children:[t.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[13px] mb-1 ${s==="light-frosted"?"text-[#333]":a||s==="dark-frosted"?"text-[#aaa]":"text-[#666]"}`,children:""}),t.jsxs("ul",{className:"space-y-1",children:[K.errors.slice(0,5).map((ee,q)=>t.jsxs("li",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[12px] text-[#ff3b30] leading-relaxed",children:[" ",ee]},q)),K.errors.length>5&&t.jsxs("li",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[12px] ${s==="light-frosted"?"text-[#666]":a||s==="dark-frosted"?"text-[#888]":"text-[#999]"}`,children:["...  ",K.errors.length-5," "]})]})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:V,disabled:T,className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors disabled:opacity-50 ${s==="light-frosted"?"bg-white/30 text-[#666] hover:bg-white/40":s==="dark-frosted"?"bg-white/10 text-[#ccc] hover:bg-white/20":a?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),t.jsx("button",{onClick:O,disabled:T,className:"flex-1 py-2.5 rounded-xl bg-[#88A588] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity disabled:opacity-50",children:T?"...":""})]})]})]})}),N.show&&t.jsx("div",{className:"fixed top-16 left-1/2 -translate-x-1/2 z-[1300] px-4 w-full max-w-[90vw]",children:t.jsx("div",{className:"bg-[#ff3b30] rounded-[12px] px-5 py-4 shadow-lg max-w-md mx-auto max-h-[60vh] overflow-y-auto",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-white/20 flex items-center justify-center mt-0.5",children:t.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] text-white mb-1",children:""}),t.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] text-white/90 leading-relaxed break-words whitespace-pre-wrap",children:N.message})]})]})})})]})}function X9({onImageSelect:e,onError:n,children:s}){const a=j.useRef(null),i=async c=>{const d=c.target.files?.[0];if(d){if(!d.type.startsWith("image/")){n("");return}if(d.size>10*1024*1024){n("10MB");return}try{const u=await dp(d,{maxWidth:1024,maxHeight:1024,quality:.85}),m=new File([u],d.name,{type:u.type}),p=`chat-image-${Date.now()}`;await bs(p,m),e(p)}catch(u){console.error("Failed to compress image:",u),n(u.message||"")}finally{a.current&&(a.current.value="")}}},l=()=>{a.current?.click()};return t.jsxs(t.Fragment,{children:[t.jsx("div",{onClick:l,className:"cursor-pointer",children:s}),t.jsx("input",{ref:a,type:"file",accept:"image/*",className:"hidden",onChange:i})]})}async function J9(){const e=await ae.get(te.API_SETTINGS,"api_configs"),n=parseInt(await ae.get(te.API_SETTINGS,"current_config_index")||"0");if(!e)throw new Error(" API");const a=JSON.parse(e)[n];if(!a||!a.apiKey||!a.baseUrl)throw new Error("API ");return{apiKey:a.apiKey,baseUrl:a.baseUrl,modelName:a.modelName,temperature:a.temperature||.9,maxTokens:a.maxTokens}}async function eE(e){const{category:n}=e,s=await J9(),a=`



1.  6 
2. /
3. 
   -  /  / 
   - 
   - 
4.  OOC


 JSON  \`\`\`json 
{
  "items": [
    {
      "name": "",
      "price": 100,
      "description": "(30)",
      "category": "${n}"
    }
  ]
}`;let i="";if(e.keyword)i=`${e.keyword} 6 `;else switch(n){case"food":i=" 6 ";break;case"charm":i=" 6 ";break;case"stationery":i=" 6 ";break;case"furniture":i=" 6 ";break;case"attire":i=" 6 ";break;case"recommended":default:i=" 6 ";break}return{systemPrompt:a,userPrompt:i,apiConfig:{apiKey:s.apiKey,baseUrl:s.baseUrl,modelName:s.modelName,temperature:s.temperature,maxTokens:s.maxTokens||1500}}}async function tE(e,n=1024,s=1024,a=.8){return new Promise((i,l)=>{const c=new FileReader;c.onload=d=>{const u=new Image;u.onload=()=>{let m=u.width,p=u.height;if(m>n||p>s){const y=Math.min(n/m,s/p);m*=y,p*=y}const f=document.createElement("canvas");f.width=m,f.height=p;const x=f.getContext("2d");if(!x){l(new Error(" canvas context"));return}x.drawImage(u,0,0,m,p);const b=f.toDataURL("image/jpeg",a);i(b)},u.onerror=()=>l(new Error("")),u.src=d.target?.result},c.onerror=()=>l(new Error("")),c.readAsDataURL(e)})}async function Zg(e){try{console.log("[AITaskManager] ...");const n=await eE(e),s={apiKey:n.apiConfig.apiKey,baseUrl:n.apiConfig.baseUrl,modelName:n.apiConfig.modelName,temperature:n.apiConfig.temperature,maxTokens:n.apiConfig.maxTokens,systemPrompt:n.systemPrompt,userPrompt:n.userPrompt,characterName:"",userNickname:""},a=await pp("shop","shop_generation",s);return console.log(`[AITaskManager] : ${a}`),a}catch(n){throw console.error("[AITaskManager] :",n),n}}async function nE(e,n){try{console.log("[AITaskManager]  AI ...");const s=await z9(e);let a;n&&(console.log("[AITaskManager] ..."),a=await tE(n,1024,1024,.8));const i={apiKey:s.apiConfig.apiKey,baseUrl:s.apiConfig.baseUrl,modelName:s.apiConfig.modelName,temperature:s.apiConfig.temperature,maxTokens:s.apiConfig.maxTokens,systemPrompt:s.systemPrompt,userPrompt:s.userPrompt,pendingImageBase64:a,imageRecognitionPrompt:"100",characterName:s.characterName,userNickname:e.userNickname,displayName:e.displayName},l=await pp(e.characterId,"private_chat_reply",i);return console.log(`[AITaskManager] : ${l}`),l}catch(s){throw console.error("[AITaskManager] :",s),s}}function sE({characterId:e,characterName:n,onClose:s}){const[a,i]=j.useState([]),[l,c]=j.useState(""),d=j.useRef(!0);j.useEffect(()=>(d.current=!0,()=>{d.current=!1}),[]);const[u,m]=j.useState(()=>Le.chatSettings?.userAvatar||null),[p,f]=j.useState(()=>Le.characters?.find(Ae=>Ae.id===e)?.avatar||null),[x,b]=j.useState(()=>Le.chatSettings?.chatBackground||null),[y,g]=j.useState(null),[k,w]=j.useState(null),[C,N]=j.useState(null),[A,P]=j.useState(()=>Le.chatSettings?.userNickname||Le.userData?.name||""),[B,$]=j.useState(!1),[D,T]=j.useState(()=>Le.chatSettingsDetail?.[e]?.remark||n),[H,K]=j.useState(()=>Le.chatSettings?.bubbleStyles?.user||`background: linear-gradient(75deg, rgba(172, 188, 166, 1), rgba(172, 188, 166, 1), rgba(172, 188, 166, 1));
color: #ffffff;
border-radius: 8px;
padding: 0.625rem 0.875rem;
max-width: 70vw;`),[E,I]=j.useState(()=>Le.chatSettings?.bubbleStyles?.character||`background: linear-gradient(-75deg, rgba(245, 245, 245, 1), rgba(245, 245, 245, 1), rgba(245, 245, 245, 1));
color: #333333;
border-radius: 8px;
padding: 0.625rem 0.875rem;
max-width: 70vw;`),[S,L]=j.useState(()=>Le.chatSettings?.bubbleStyles?.userQuote||`background: #9BAD96;
color: rgba(255, 255, 255, 0.8);
border-radius: 4px;
padding: 0.5rem;
margin-bottom: 0.5rem;`),[z,R]=j.useState(()=>Le.chatSettings?.bubbleStyles?.characterQuote||`background: #e8e8e8;
color: #666666;
border-radius: 4px;
padding: 0.5rem;
margin-bottom: 0.5rem;`),[U,W]=j.useState(()=>Le.chatSettings?.timestampStyle||"default"),[Z,O]=j.useState([]),[V,ee]=j.useState(null),[q,G]=j.useState(()=>Le.chatSettings?.darkMode||!1),[Q,le]=j.useState(()=>Le.chatSettings?.theme||(Le.chatSettings?.darkMode?"dark":"light"));j.useEffect(()=>{const we=()=>{const pe=Le.chatSettings;G(pe?.darkMode||!1),le(pe?.theme||(pe?.darkMode?"dark":"light"))};return window.addEventListener("chat-settings-updated",we),(async()=>{if(!Le.chatSettings)try{const pe=await ae.get(te.CHATS,"chat_settings");pe&&(Le.chatSettings=pe,pe.darkMode!==void 0&&G(pe.darkMode),le(pe.theme||(pe.darkMode?"dark":"light")),pe.userAvatar&&m(pe.userAvatar),pe.chatBackground&&b(pe.chatBackground),pe.bubbleStyles&&(K(pe.bubbleStyles.user),I(pe.bubbleStyles.character),L(pe.bubbleStyles.userQuote),R(pe.bubbleStyles.characterQuote)),pe.timestampStyle&&W(pe.timestampStyle))}catch(pe){console.error("Failed to load global chat settings in PrivateChat",pe)}})(),()=>window.removeEventListener("chat-settings-updated",we)},[]),j.useEffect(()=>{const we=Ae=>{Ae.detail&&Ae.detail.characterId===e&&(console.log("[PrivateChat] ..."),ae.get(te.CHARACTERS,"characters").then(pe=>{const Je=pe?.find(Ge=>Ge.id===e);if(Je&&(ee(Je),Le.characters)){const Ge=Le.characters.findIndex(rt=>rt.id===e);Ge!==-1&&(Le.characters[Ge]=Je)}}))};return window.addEventListener("character-memories-updated",we),()=>window.removeEventListener("character-memories-updated",we)},[e]);const[ne,ie]=j.useState(!1);j.useRef(null);const ve=j.useRef(null),se=j.useRef(!0),ge=j.useRef(null),Me=j.useRef(!1),M=j.useRef([]),[me,he]=j.useState(!1),[J,X]=j.useState(null),[oe,ke]=j.useState({x:0,y:0}),[Ne,de]=j.useState(!1),[fe,_e]=j.useState(""),[Se,Be]=j.useState(null),ot=j.useRef(null),[Ce,Ue]=j.useState({show:!1,message:""}),[Ze,et]=j.useState(!1),[ut,tt]=j.useState(new Set),[Mt,Ct]=j.useState(!1),[_t,Fn]=j.useState(!1),[on,Zt]=j.useState(""),[Mn,pn]=j.useState(!1),[St,Qt]=j.useState({}),[Xe,kt]=j.useState(0),[Lt,jt]=j.useState(0),[Kt,Gt]=j.useState({}),[Xt,vs]=j.useState(null),[tn,zn]=j.useState(null),[Ps,bn]=j.useState(!1),[mr,Wr]=j.useState(""),[zo,Ii]=j.useState(""),[id,Rs]=j.useState(0),[Oo,od]=j.useState(new Set);j.useEffect(()=>{(async()=>{if(u)if(u.startsWith("data:"))g(u);else{const Ae=await xt(u);g(Ae)}else g(null);if(p)if(p.startsWith("data:"))w(p);else{const Ae=await xt(p);w(Ae)}else w(null);if(x)if(x.startsWith("data:"))N(x);else{const Ae=await xt(x);N(Ae)}else N(null)})()},[u,p,x]),j.useEffect(()=>{(async()=>{const Ae={},pe=await Aa(),Je=new Map(pe.map(Ge=>[Ge.id,Ge]));for(const Ge of M.current)if(Ge.stickerId&&!St[Ge.stickerId]){const rt=Je.get(Ge.stickerId);if(rt){if(rt.imageUrl)Ae[Ge.stickerId]=rt.imageUrl;else if(rt.imageKey){const Qe=await mp(rt.imageKey);Qe&&(Ae[Ge.stickerId]=Qe)}}}Object.keys(Ae).length>0&&Qt(Ge=>({...Ge,...Ae}))})()},[a]),j.useEffect(()=>{(async()=>{const Ae={};for(const pe of M.current)if(pe.imageKey&&!Kt[pe.imageKey]){const Je=await xt(pe.imageKey);Je&&(Ae[pe.imageKey]=Je)}Object.keys(Ae).length>0&&Gt(pe=>({...pe,...Ae}))})()},[a]);const Kr=we=>{const Ae=we.getHours().toString().padStart(2,"0"),pe=we.getMinutes().toString().padStart(2,"0");return`${Ae}:${pe}`},Gr=we=>{const Ae={};return we&&we.split(";").filter(Je=>Je.trim()).forEach(Je=>{const[Ge,rt]=Je.split(":").map(Qe=>Qe.trim());if(Ge&&rt){const Qe=Ge.replace(/-([a-z])/g,mt=>mt[1].toUpperCase());Ae[Qe]=rt}}),Ae},$o=(we,Ae)=>we.getFullYear()===Ae.getFullYear()&&we.getMonth()===Ae.getMonth()&&we.getDate()===Ae.getDate(),Vo=we=>{const Ae=we.getFullYear(),pe=(we.getMonth()+1).toString().padStart(2,"0"),Je=we.getDate().toString().padStart(2,"0");return`${Ae}/${pe}/${Je}`},xr=j.useMemo(()=>{const we=[],Ae=a.filter(pe=>!pe.isImageRecognition);return Ae.forEach((pe,Je)=>{(Je===0||!$o(pe.timestamp,Ae[Je-1].timestamp))&&we.push({type:"date",date:Vo(pe.timestamp),id:`date-${pe.timestamp.getTime()}`});const rt=pe.senderId==="user"&&Ae.slice(Je+1).some(Qe=>Qe.senderId==="character");we.push({type:"message",message:pe,isUserMessageRead:rt})}),we},[a,Xe]),Yr=S9({count:xr.length,getScrollElement:()=>ve.current,estimateSize:we=>{const Ae=xr[we];if(Ae?.type==="date")return 30;if(Ae?.type==="message"){const pe=Ae.message;return pe.imageKey||pe.stickerId||pe.order?280:80}return 80},overscan:10});j.useEffect(()=>{M.current.length>0&&!Me.current&&(Pi(),M.current.some(Ae=>Ae.senderId==="character"&&!Ae.isRead)?(Me.current=!0,M.current=M.current.map(Ae=>Ae.senderId==="character"?{...Ae,isRead:!0}:Ae),In(M.current),i([...M.current])):Me.current=!0)},[M.current.length]),j.useLayoutEffect(()=>{xr.length!==0&&(se.current?requestAnimationFrame(()=>{Yr.getTotalSize()>0&&ve.current&&(ve.current.scrollTop=ve.current.scrollHeight,se.current=!1)}):requestAnimationFrame(()=>{ve.current&&(ve.current.scrollTop=ve.current.scrollHeight)}))},[xr.length]),j.useEffect(()=>{se.current=!0,ge.current=null,Me.current=!1;const we=async()=>{try{const rt=Le.messages[e];if(rt&&rt.length>0&&(M.current=rt,i([...rt])),Le.chatSettings){const Ke=Le.chatSettings;Ke.userAvatar!==void 0&&m(Ke.userAvatar),Ke.chatBackground!==void 0&&b(Ke.chatBackground),Ke.userNickname!==void 0&&P(Ke.userNickname),Ke.bubbleStyles?.user&&K(Ke.bubbleStyles.user),Ke.bubbleStyles?.character&&I(Ke.bubbleStyles.character),Ke.bubbleStyles?.userQuote&&L(Ke.bubbleStyles.userQuote),Ke.bubbleStyles?.characterQuote&&R(Ke.bubbleStyles.characterQuote),Ke.timestampStyle&&W(Ke.timestampStyle)}const Qe=Le.chatSettingsDetail[e];if(Qe&&Qe.remark!==void 0&&T(Qe.remark),Le.userData&&!Le.chatSettings?.userNickname&&P(Le.userData.name||""),Le.characters){const Ke=Le.characters.find(lt=>lt.id===e);Ke&&(f(Ke.avatar),ee(Ke))}const mt=[ae.get(te.CHAT_MESSAGES,`chat_messages_${e}`),ae.get(te.CHAT_SETTINGS,`chat_detail_settings_${e}`)];yA()?(mt.push(Promise.resolve(Le.chatSettings)),mt.push(Promise.resolve(Le.userData)),mt.push(Promise.resolve(Le.characters))):(mt.push(ae.get(te.CHATS,"chat_settings").then(Ke=>(Le.chatSettings=Ke,Ke))),mt.push(ae.get(te.USER_DATA,"userData").then(Ke=>(Le.userData=Ke,Ke))),mt.push(ae.get(te.CHARACTERS,"characters").then(Ke=>(Le.characters=Ke,Le.lastUpdate=Date.now(),Ke))));const[It,Ye,dt,Et,nn]=await Promise.all(mt),Jt=await ae.get(te.USER_DATA,"balance");Jt!=null&&Rs(Jt);const ct={};if(It&&It.length>0){const Ke=It.map(gt=>({...gt,timestamp:new Date(gt.timestamp)}));(!rt||rt.length!==Ke.length||Ke.length>0&&rt.length>0&&Ke[Ke.length-1].id!==rt[rt.length-1].id)&&(Le.messages[e]=Ke,M.current=Ke,ct.messages=Ke)}else(!rt||rt.length>0)&&(ct.messages=[],Le.messages[e]=[],M.current=[]);if(dt){dt.userAvatar!==u&&(ct.userAvatarKey=dt.userAvatar),dt.chatBackground!==x&&(ct.chatBackgroundKey=dt.chatBackground);const Ke=dt.userNickname||"";Ke!==A&&(ct.userNickname=Ke),dt.bubbleStyles?.user&&K(dt.bubbleStyles.user),dt.bubbleStyles?.character&&I(dt.bubbleStyles.character),dt.bubbleStyles?.userQuote&&L(dt.bubbleStyles.userQuote),dt.bubbleStyles?.characterQuote&&R(dt.bubbleStyles.characterQuote),dt.timestampStyle!==U&&W(dt.timestampStyle||"default")}else if(Et){const Ke=Et.name||"";Ke!==A&&(ct.userNickname=Ke)}else A!==""&&(ct.userNickname="");Ye&&(Le.chatSettingsDetail[e]=Ye);let ln=n;if(nn){const Ke=nn.find(lt=>lt.id===e);Ke&&(ln=Ke.name)}let Vt=Ye?.remark;if((!Vt||!Vt.trim())&&(ln&&ln!==""?Vt=ln:n&&n!==""?Vt=n:Vt=D||""),Vt&&Vt!==D&&(ct.displayName=Vt),(!Ye||!Ye.remark)&&Vt&&Vt!==""){const Ke={...Ye||{},remark:Vt,isPinned:Ye?.isPinned||!1,background:Ye?.background};ae.set(te.CHAT_SETTINGS,`chat_detail_settings_${e}`,Ke).then(()=>{Le.chatSettingsDetail||(Le.chatSettingsDetail={}),Le.chatSettingsDetail[e]=Ke,console.log("[PrivateChat] Auto-fixed missing remark with:",Vt)}).catch(lt=>{console.warn("[PrivateChat] Failed to auto-save remark:",lt)})}if(nn){const Ke=nn.find(lt=>lt.id===e);Ke&&(Ke.avatar!==p&&(ct.characterAvatarKey=Ke.avatar),(!V||Ke.id!==V?.id||Ke.name!==V?.name)&&(ct.character=Ke))}ct.messages!==void 0&&i(ct.messages),ct.userAvatarKey!==void 0&&m(ct.userAvatarKey),ct.chatBackgroundKey!==void 0&&b(ct.chatBackgroundKey),ct.userNickname!==void 0&&P(ct.userNickname),ct.displayName!==void 0&&T(ct.displayName),ct.characterAvatarKey!==void 0&&f(ct.characterAvatarKey),ct.character!==void 0&&ee(ct.character),ge.current=e}catch(rt){console.error("Failed to load chat data:",rt)}};we();const Ae=()=>{i([]),M.current=[],Le.messages[e]=[]},pe=()=>{eh(),we()};window.addEventListener("chat-messages-cleared",Ae),window.addEventListener("chat-settings-updated",pe);const Je=rt=>{const{type:Qe,payload:mt}=rt.data;if(Qe==="AI_TASK_COMPLETED"){if(console.log("[PrivateChat]  AI :",mt),mt.characterId===e){const It=mt.messages.map(dt=>({...dt,timestamp:new Date(dt.timestamp)}));if(It.some(dt=>dt.senderId==="system"&&dt.text.includes(""))){for(let dt=M.current.length-1;dt>=0;dt--){const Et=M.current[dt];if(Et.senderId==="user"&&Et.redPacket&&!Et.redPacket.opened){M.current[dt]={...Et,redPacket:{...Et.redPacket,opened:!0}};break}}i([...M.current])}M.current=[...M.current,...It],In(M.current),Pn(M.current),document.hidden||!d.current?d.current&&(i([...M.current]),ie(!1)):(async()=>{for(let Et=0;Et<It.length;Et++){if(!d.current)return;if(document.hidden){i(ct=>{const Vt=It.slice(Et).filter(Ke=>!ct.some(lt=>lt.id===Ke.id));return[...ct,...Vt]}),ie(!1);return}const nn=Et===0?600:1e3+Math.random()*800;if(await new Promise(ct=>setTimeout(ct,nn)),!d.current)return;const Jt=It[Et];i(ct=>ct.some(ln=>ln.id===Jt.id)?ct:[...ct,Jt]),Et===0&&ie(!1)}d.current&&ie(!1)})()}}else Qe==="AI_TASK_FAILED"&&(console.error("[PrivateChat] AI :",mt),mt.characterId===e&&(Ue({show:!0,message:`AI: ${mt.error}`}),setTimeout(()=>Ue({show:!1,message:""}),5e3),ie(!1)))},Ge=async rt=>{const Qe=rt,{taskId:mt,task:It}=Qe.detail;if(console.log("[PrivateChat] Service Worker :",mt),It.chatId===e){if(It.type==="memory_extraction"){console.log("[] ...");try{const{payload:Ye}=It,dt=await fetch(`${Ye.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ye.apiKey}`},body:JSON.stringify({model:Ye.modelName,messages:[{role:"system",content:Ye.systemPrompt},{role:"user",content:Ye.userPrompt}],temperature:Ye.temperature,max_tokens:Ye.maxTokens})});if(!dt.ok)throw new Error(`API Error: ${dt.status}`);const Et=await dt.json();if(Et.error)throw new Error(`API Error Details: ${JSON.stringify(Et.error)}`);const nn=Et.choices?.[0]?.message?.content;if(!nn)throw console.error("[] :",Et),new Error("Empty response from AI (check console for details)");const Jt=Vv(nn,Ye.referenceDate);await Hv(e,Jt)}catch(Ye){console.error("[] ",Ye),window.dispatchEvent(new CustomEvent("memory-extraction-failed",{detail:{characterId:e,error:Ye.message}}))}return}try{const{payload:Ye}=It;let dt=[{role:"system",content:Ye.systemPrompt},{role:"user",content:Ye.userPrompt}];if(Ye.pendingImageBase64&&Ye.imageRecognitionPrompt){console.log("[] ...");const lt=await fetch(`${Ye.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ye.apiKey}`},body:JSON.stringify({model:Ye.modelName,messages:[{role:"user",content:[{type:"text",text:Ye.imageRecognitionPrompt},{type:"image_url",image_url:{url:Ye.pendingImageBase64}}]}],temperature:.7,max_tokens:500})});if(!lt.ok)throw new Error("");const cn=(await lt.json()).choices?.[0]?.message?.content||"";console.log("[] :",cn),dt=[dt[0],{role:"user",content:dt[1].content+`

[: ${cn}]`}]}const Et=await fetch(`${Ye.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ye.apiKey}`},body:JSON.stringify({model:Ye.modelName,messages:dt,temperature:Ye.temperature,max_tokens:Ye.maxTokens})});if(!Et.ok)throw new Error(`AI API : ${Et.status}`);const nn=await Et.json();if(nn.error)throw new Error(`API Error Details: ${JSON.stringify(nn.error)}`);const Jt=nn.choices?.[0]?.message?.content||"";if(!Jt)throw console.error("[] :",nn),new Error("AI (check console)");console.log("[] AI :",Jt);let ct,ln=[];try{ct=JSON.parse(Jt),ln=ct.messages||[]}catch{console.log("[]  JSON...");try{const gt=Jt.match(/```(?:json)?\s*(\{[\s\S]*?\})\s*```/);if(gt)ct=JSON.parse(gt[1]),ln=ct.messages||[];else{const cn=Jt.indexOf("{");if(cn===-1)throw new Error(" JSON ");let Xn=0,Vn=-1;for(let ys=cn;ys<Jt.length;ys++)if(Jt[ys]==="{"&&Xn++,Jt[ys]==="}"&&Xn--,Xn===0){Vn=ys+1;break}if(Vn===-1)throw new Error("JSON ");const Fa=Jt.substring(cn,Vn);ct=JSON.parse(Fa),ln=ct.messages||[]}}catch(gt){throw console.error("[] JSON :",gt.message),console.error("[] AI :",Jt),new Error(`AI: ${gt.message}`)}}if(ln.length===0)throw new Error("AI");console.log("[] :",ln);const Vt=ln.map((lt,gt)=>{if(lt.sender==="system")return{id:`${Date.now()}-${gt}`,text:lt.content,senderId:"system",senderName:"",timestamp:new Date,isRead:!0};if(lt.isPlaceholderImage){const Xn=(lt.content||"").slice(0,100);return{id:`${Date.now()}-${gt}`,text:Xn,senderId:"character",senderName:D,timestamp:new Date,isPlaceholderImage:!0,isRead:!0}}if(lt.redPacket)return{id:`${Date.now()}-${gt}`,text:"[]",senderId:"character",senderName:D,timestamp:new Date,redPacket:{amount:lt.redPacket.amount,blessing:lt.redPacket.blessing,opened:!1},isRead:!0};const cn={id:`${Date.now()}-${gt}`,text:lt.stickerId?"[]":lt.content||"",senderId:"character",senderName:D,timestamp:new Date,isRead:!0};return lt.stickerId&&(cn.stickerId=lt.stickerId),lt.quote&&(cn.quote={sender:lt.quote.sender,content:lt.quote.content}),cn});if(Vt.some(lt=>lt.senderId==="system"&&lt.text.includes(""))){for(let lt=M.current.length-1;lt>=0;lt--){const gt=M.current[lt];if(gt.senderId==="user"&&gt.redPacket&&!gt.redPacket.opened){M.current[lt]={...gt,redPacket:{...gt.redPacket,opened:!0}};break}}i([...M.current])}M.current=[...M.current,...Vt],await In(M.current),await Pn(M.current),document.hidden||!d.current?d.current&&(i([...M.current]),ie(!1)):(async()=>{for(let gt=0;gt<Vt.length;gt++){if(!d.current)return;if(document.hidden){i(Vn=>{const ys=Vt.slice(gt).filter(Ma=>!Vn.some($i=>$i.id===Ma.id));return[...Vn,...ys]}),ie(!1);return}const cn=gt===0?600:1e3+Math.random()*800;if(await new Promise(Vn=>setTimeout(Vn,cn)),!d.current)return;const Xn=Vt[gt];i(Vn=>Vn.some(Fa=>Fa.id===Xn.id)?Vn:[...Vn,Xn]),gt===0&&ie(!1)}d.current&&ie(!1)})()}catch(Ye){console.error("[PrivateChat]  AI :",Ye),Ue({show:!0,message:`AI: ${Ye.message}`}),setTimeout(()=>Ue({show:!1,message:""}),5e3),ie(!1)}}};return"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.addEventListener("message",Je),window.addEventListener("ai-task-needs-fallback",Ge),()=>{window.removeEventListener("chat-messages-cleared",Ae),window.removeEventListener("chat-settings-updated",pe),window.removeEventListener("ai-task-needs-fallback",Ge),"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener("message",Je),ot.current&&clearTimeout(ot.current),qr.current&&clearTimeout(qr.current)}},[e]);const qr=j.useRef(null),Dt=()=>{qr.current&&clearTimeout(qr.current),qr.current=setTimeout(()=>{kt(we=>we+1)},100)},In=async we=>{try{const Ae=`chat_messages_${e}`;await ae.set(te.CHAT_MESSAGES,Ae,we),Le.messages[e]=we}catch(Ae){console.error("Failed to save messages:",Ae)}},Pi=async()=>{try{const we=await ae.get(te.CHATS,"chat_list")||[],Ae=we.findIndex(pe=>pe.id===e);Ae!==-1&&we[Ae].unread&&(delete we[Ae].unread,await ae.set(te.CHATS,"chat_list",we))}catch(we){console.error("Failed to clear unread count:",we)}},Pn=async we=>{try{let Ae=await ae.get(te.CHATS,"chat_list")||[];const pe=Ae.findIndex(Ye=>Ye.id===e),Je=new Date,Ge=`${Je.getHours().toString().padStart(2,"0")}:${Je.getMinutes().toString().padStart(2,"0")}`;let rt="",Qe="";if(we.length>0){const Ye=we[we.length-1];Ye.senderId==="character"?Qe=D:Qe=A,rt=Ye.text}let mt=n;if(V?.name&&V.name!=="")mt=V.name;else if(!mt||mt===""){const Ye=Le.characters?.find(dt=>dt.id===e);Ye?.name&&Ye.name!==""&&(mt=Ye.name)}const It={id:e,name:mt||"",lastMessage:rt,lastSender:Qe,time:Ge,timestamp:Je.getTime()};if(pe!==-1){const Ye=Ae[pe];It.isPinned=Ye.isPinned,It.remark=Ye.remark,Ae[pe]=It}else Ae.unshift(It);await ae.set(te.CHATS,"chat_list",Ae)}catch(Ae){console.error("Failed to update chat list:",Ae)}},Zr=()=>{if(l.trim()){const we={id:Date.now().toString(),text:l.trim(),senderId:"user",senderName:A,timestamp:new Date};if(Se){let Ae=Se.text;Se.isPlaceholderImage||Se.imageUrl||Se.imageKey?Ae="[]":Se.stickerId&&(Ae="[]"),we.quote={sender:Se.senderId==="user"?A:D,content:Ae}}M.current=[...M.current,we],i([...M.current]),In(M.current),Pn(M.current),c(""),Be(null)}},ld=we=>{we.key==="Enter"&&!we.shiftKey&&(we.preventDefault(),Zr())},Ho=async we=>{const Ae={id:Date.now().toString(),text:"[]",senderId:"user",senderName:A,timestamp:new Date,stickerId:we};M.current=[...M.current,Ae],i([...M.current]),In(M.current),Pn(M.current),pn(!1),Ct(!1)},Qr=()=>{if(!on.trim())return;const we={id:Date.now().toString(),text:on.trim(),senderId:"user",senderName:A,timestamp:new Date,isPlaceholderImage:!0};M.current=[...M.current,we],i([...M.current]),In(M.current),Pn(M.current),Fn(!1),Zt("")},[At,Ea]=j.useState(null),On=(we,Ae)=>t.jsxs("div",{className:"w-[240px] overflow-hidden rounded-lg select-none cursor-pointer active:opacity-90 transition-opacity",onClick:async pe=>{if(pe.stopPropagation(),Ae.senderId==="character"&&!we.opened){const Je=id+we.amount;Rs(Je),await ae.set(te.USER_DATA,"balance",Je);const Ge=M.current.map(Qe=>Qe.id===Ae.id?{...Qe,redPacket:{...Qe.redPacket,opened:!0}}:Qe),rt={id:`${Date.now()}-system`,text:`${D}`,senderId:"system",senderName:"",timestamp:new Date,isRead:!0};Ge.push(rt),M.current=Ge,i([...Ge]),await In(Ge),Pn(Ge);try{const Qe={id:Ae.id,type:"receive",amount:we.amount,timestamp:Date.now(),partnerName:D||Ae.senderName,blessing:we.blessing};let mt=await ae.get(te.USER_DATA,"asset_transactions")||[];mt.push(Qe),await ae.set(te.USER_DATA,"asset_transactions",mt)}catch(Qe){console.error("Failed to record transaction",Qe)}Ea({...Ae,redPacket:{...we,opened:!0}})}else Ea(Ae)},children:[t.jsxs("div",{className:"bg-[#ea5e4f] p-4 flex items-center gap-4",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsxs("div",{className:"w-[36px] h-[52px] bg-[#f4d03f] rounded-[18px] border-2 border-[#e6b333] flex flex-col items-center justify-center gap-[5px] relative",children:[t.jsx("div",{className:"w-[20px] h-[2px] bg-[#dba830] rounded-full opacity-80"}),t.jsx("div",{className:"w-[20px] h-[2px] bg-[#dba830] rounded-full opacity-80"}),t.jsx("div",{className:"w-[20px] h-[2px] bg-[#dba830] rounded-full opacity-80"}),t.jsx("div",{className:"w-[20px] h-[2px] bg-[#dba830] rounded-full opacity-80"}),t.jsx("div",{className:"w-[20px] h-[2px] bg-[#dba830] rounded-full opacity-80"})]})}),t.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center text-white",children:[t.jsx("p",{className:"text-[15px] font-medium leading-snug truncate mb-1",children:we.blessing}),t.jsx("p",{className:"text-[12px] opacity-85 font-normal",children:we.opened?"":""})]})]}),t.jsx("div",{className:"bg-white px-4 py-2 border-t border-black/5",children:t.jsx("p",{className:"text-[#999] text-[11px] tracking-wide",children:""})})]}),Uo=we=>{const Ae=Array.isArray(we.items)?we.items:[],pe=Ae.reduce((Je,Ge)=>Je+(Ge.count||0),0);return t.jsxs("div",{className:"w-[240px] bg-[#F9F9F7] rounded-xl overflow-hidden shadow-sm border border-black/5 relative select-none cursor-default",children:[t.jsx("div",{className:"h-1.5 bg-[repeating-linear-gradient(45deg,#E5E5E0,#E5E5E0_10px,#F9F9F7_10px,#F9F9F7_20px)] opacity-60"}),t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"w-10 h-10 bg-white rounded-lg border border-black/5 flex items-center justify-center text-[#2D2D2D] shadow-sm",children:t.jsx(Sa,{className:"w-5 h-5",strokeWidth:1.5})}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-sm font-medium text-[#2D2D2D] tracking-wide",children:""}),t.jsxs("span",{className:"text-[10px] text-[#9CA3AF] font-mono tracking-widest",children:["NO.",we.id?we.id.slice(-6).toUpperCase():"------"]})]})]}),t.jsx("div",{className:"bg-white rounded-lg border border-black/5 p-3 mb-3 relative overflow-hidden",children:t.jsxs("div",{className:"space-y-2",children:[Ae.slice(0,3).map((Je,Ge)=>t.jsxs("div",{className:"flex justify-between items-center text-xs pb-2 last:pb-0",children:[t.jsx("span",{className:"text-[#2D2D2D] font-medium truncate pr-2 max-w-[140px]",children:Je.name}),t.jsxs("span",{className:"text-[#9CA3AF] font-mono whitespace-nowrap",children:["x",Je.count]})]},Ge)),Ae.length>3&&t.jsxs("div",{className:"text-[10px] text-[#9CA3AF] pt-2 text-center",children:["... ",pe," "]})]})}),t.jsxs("div",{className:"pt-2 flex justify-between items-end",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-[10px] text-[#9CA3AF] mb-0.5 tracking-wider",children:""}),t.jsxs("div",{className:"flex items-center gap-1.5 h-[20px]",children:[t.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-[#C93A40]"}),t.jsx("span",{className:"text-xs font-medium text-[#2D2D2D] truncate max-w-[80px]",children:we.recipient})]})]}),t.jsxs("div",{className:"flex flex-col items-end",children:[t.jsx("span",{className:"text-[10px] text-[#9CA3AF] mb-0.5 tracking-wider",children:""}),t.jsxs("div",{className:"flex items-baseline gap-1 h-[20px]",children:[t.jsx("span",{className:"text-lg font-mono font-light text-[#2D2D2D]",children:(we.total||0).toLocaleString()}),t.jsx("span",{className:"text-[10px] text-[#9CA3AF]",children:""})]})]})]})]})]})},cd=async()=>{const we=parseInt(mr);if(!we||we<=0){Ue({show:!0,message:""}),setTimeout(()=>Ue({show:!1,message:""}),3e3);return}const Ae=zo.trim()||"",pe={id:Date.now().toString(),text:"[]",senderId:"user",senderName:A,timestamp:new Date,redPacket:{amount:we,blessing:Ae,opened:!1}};M.current=[...M.current,pe],i([...M.current]),In(M.current),Pn(M.current);try{const Je={id:pe.id,type:"send",amount:we,timestamp:Date.now(),partnerName:D||n||"",blessing:Ae};let Ge=await ae.get(te.USER_DATA,"asset_transactions")||[];Ge.push(Je),await ae.set(te.USER_DATA,"asset_transactions",Ge)}catch(Je){console.error("Failed to record transaction",Je)}bn(!1),Wr(""),Ii(""),Ct(!1)},dd=async we=>{try{if(!await xt(we)){Ue({show:!0,message:""}),setTimeout(()=>Ue({show:!1,message:""}),3e3);return}const pe=we.replace("_chat_image",""),Je=await xt(pe);if(Je){const Qe=await(await fetch(Je)).blob(),mt=new File([Qe],`image_${Date.now()}.jpg`,{type:Qe.type});vs(mt)}const Ge={id:Date.now().toString(),text:"",senderId:"user",senderName:A||"",timestamp:new Date,imageKey:we};M.current.push(Ge),i([...M.current]),await In(M.current),await Pn(M.current),Ct(!1)}catch(Ae){console.error(":",Ae),Ue({show:!0,message:""}),setTimeout(()=>Ue({show:!1,message:""}),3e3)}},Ta=async()=>{if(!ne){ie(!0);try{if(l.trim()){const Ae={id:Date.now().toString(),text:l.trim(),senderId:"user",senderName:A,timestamp:new Date};if(Se){let pe=Se.text;Se.isPlaceholderImage||Se.imageUrl||Se.imageKey?pe="[]":Se.stickerId&&(pe="[]"),Ae.quote={sender:Se.senderId==="user"?A:D,content:pe}}M.current=[...M.current,Ae],i([...M.current]),await In(M.current),await Pn(M.current),c(""),Be(null)}const we=await nE({characterId:e,character:V||{id:e,name:n,description:"",manifestDate:void 0},userNickname:A,displayName:D,allMessages:M.current,tempActiveMemoryIds:Array.from(Oo)},Xt);console.log("[PrivateChat] AI :",we),Xt&&vs(null)}catch(we){console.error("[PrivateChat] :",we),Ue({show:!0,message:`AI: ${we.message}`}),setTimeout(()=>Ue({show:!1,message:""}),5e3),ie(!1)}}},Da=async()=>{try{let we=await ae.get(te.CHATS,"chat_list")||[];if(we.findIndex(pe=>pe.id===e)===-1&&a.length===0){const pe=new Date,Je=`${pe.getHours().toString().padStart(2,"0")}:${pe.getMinutes().toString().padStart(2,"0")}`,Ge={id:e,name:n,lastMessage:"",lastSender:"",time:Je,timestamp:pe.getTime()};we.unshift(Ge),await ae.set(te.CHATS,"chat_list",we)}s()}catch(we){console.error("Failed to save chat list:",we),s()}},ls=(we,Ae)=>{if(Ze){gr(we.id);return}const pe="touches"in Ae?Ae.touches[0]:Ae;ot.current=setTimeout(()=>{X(we),ke({x:pe.clientX,y:pe.clientY}),he(!0)},500)},$n=()=>{ot.current&&(clearTimeout(ot.current),ot.current=null)},ud=()=>{if(J){const we=J.text;navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(we).then(()=>{console.log("")}).catch(()=>{Wo(we)}):Wo(we),he(!1),X(null)}},Wo=we=>{const Ae=document.createElement("textarea");Ae.value=we,Ae.style.position="fixed",Ae.style.top="0",Ae.style.left="0",Ae.style.width="2em",Ae.style.height="2em",Ae.style.padding="0",Ae.style.border="none",Ae.style.outline="none",Ae.style.boxShadow="none",Ae.style.background="transparent",document.body.appendChild(Ae),Ae.focus(),Ae.select();try{document.execCommand("copy")&&console.log("fallback")}catch(pe){console.error(":",pe)}document.body.removeChild(Ae)},Ri=()=>{J&&(M.current=M.current.filter(we=>we.id!==J.id),he(!1),X(null),setTimeout(()=>{i([...M.current]),In(M.current),Pn(M.current),requestAnimationFrame(()=>{requestAnimationFrame(()=>{jt(we=>we+1)})})},0))},Ko=()=>{et(!0),he(!1),X(null)},Bi=()=>{et(!1),tt(new Set)},gr=we=>{tt(Ae=>{const pe=new Set(Ae);return pe.has(we)?pe.delete(we):pe.add(we),pe})},fd=()=>{ut.size!==0&&(M.current=M.current.filter(we=>!ut.has(we.id)),et(!1),tt(new Set),setTimeout(()=>{i([...M.current]),In(M.current),Pn(M.current),requestAnimationFrame(()=>{requestAnimationFrame(()=>{jt(we=>we+1)})})},0))},Li=()=>{J&&(_e(J.text),de(!0),he(!1))},yt=()=>{J&&fe.trim()&&(M.current=M.current.map(we=>we.id===J.id?{...we,text:fe}:we),de(!1),X(null),_e(""),setTimeout(()=>{i([...M.current]),In(M.current),Pn(M.current),requestAnimationFrame(()=>{requestAnimationFrame(()=>{jt(we=>we+1)})})},0))},zi=()=>{de(!1),X(null),_e("")},Go=()=>{J&&(Be(J),he(!1),X(null))},Oi=()=>{Be(null)},Yo=()=>{$(!1),eh(),(async()=>{try{const[Ae,pe,Je]=await Promise.all([ae.get(te.CHAT_MESSAGES,`chat_messages_${e}`),ae.get(te.CHATS,"chat_settings"),ae.get(te.CHAT_SETTINGS,`chat_detail_settings_${e}`)]);if(Ae&&Ae.length>0){const Ge=Ae.map(rt=>({...rt,timestamp:new Date(rt.timestamp)}));M.current=Ge,Le.messages[e]=Ge,i([...Ge])}else i([]),M.current=[],Le.messages[e]=[];if(pe&&(Le.chatSettings=pe,pe.chatBackground&&pe.chatBackground!==x&&b(pe.chatBackground)),Je){Le.chatSettingsDetail[e]=Je;const Ge=Je.remark||n;Ge!==D&&T(Ge)}else n!==D&&T(n)}catch(Ae){console.error("Failed to reload data:",Ae)}})()};return j.useEffect(()=>{ge.current===e&&a.length>0&&$v(e,a).catch(we=>{console.error("Failed to trigger memory extraction:",we)})},[a.length,e]),t.jsxs(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2,ease:"easeOut"},className:`fixed inset-0 z-[60] flex flex-col ${Q==="light-frosted"?"bg-transparent":q?"bg-[#121212]":"bg-white"}`,children:[(Q==="light-frosted"||Q==="dark-frosted")&&C&&t.jsx("div",{className:"absolute inset-0 -z-20",children:t.jsx("img",{src:C,className:"w-full h-full object-cover"})}),t.jsxs("div",{className:`h-16 flex items-center justify-between px-4 ${Q==="light-frosted"?"bg-white/20 backdrop-blur-md":Q==="dark-frosted"?"bg-black/20 backdrop-blur-md":q?"bg-[#121212]":"bg-white"}`,children:[t.jsx("button",{onClick:Da,className:"p-2 -ml-2 active:opacity-60 transition-opacity",children:t.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:Q==="light-frosted"?"#333":Q==="dark-frosted"||q?"white":"black",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})}),t.jsx("h1",{className:`font-semibold text-[18px] text-center ${Q==="light-frosted"?"text-[#333]":Q==="dark-frosted"||q?"text-white":"text-[#333]"}`,children:D}),t.jsx("button",{onClick:()=>$(!0),className:"p-2 -mr-2 active:opacity-60 transition-opacity",children:t.jsx(v_,{className:`w-6 h-6 ${Q==="light-frosted"?"text-[#333]":Q==="dark-frosted"||q?"text-white":"text-[#333]"}`,strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})]}),t.jsx("div",{ref:ve,className:"flex-1 overflow-y-auto px-4 py-4",style:{backgroundColor:Q==="light-frosted"||Q==="dark-frosted"||C?"transparent":q?"#121212":"white",backgroundImage:Q==="light-frosted"||Q==="dark-frosted"?"none":C?q?`linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url(${C})`:`url(${C})`:"none",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",position:"relative"},children:M.current.length===0?t.jsx("div",{className:"flex items-center justify-center h-full",children:t.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] text-[#999]",children:""})}):t.jsx("div",{style:{height:`${Yr.getTotalSize()}px`,position:"relative"},children:Yr.getVirtualItems().map(we=>{const Ae=xr[we.index];if(!Ae)return null;if(Ae.type==="date")return t.jsx("div",{ref:Yr.measureElement,"data-index":we.index,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${we.start}px)`},children:t.jsx(Yv,{dateString:Ae.date})},Ae.id);const{message:pe,isUserMessageRead:Je}=Ae,Ge=!(pe.stickerId||pe.isPlaceholderImage||pe.redPacket||pe.order||pe.imageKey&&(!pe.text||pe.text==="[]")),rt=U!=="inside";return t.jsx("div",{ref:Yr.measureElement,"data-index":we.index,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${we.start}px)`},children:t.jsx("div",{className:"pb-3",children:t.jsxs("div",{className:"flex items-start gap-2",children:[Ze&&t.jsx("div",{className:"w-6 h-6 flex items-center justify-center cursor-pointer flex-shrink-0",onClick:()=>gr(pe.id),children:t.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${ut.has(pe.id)?"bg-[#7B9E7B] border-[#7B9E7B]":"bg-white border-[#ccc]"}`,children:ut.has(pe.id)&&t.jsx(wt,{className:"w-3.5 h-3.5 text-white",strokeWidth:3})})}),t.jsxs("div",{className:`flex gap-2 items-start flex-1 ${pe.senderId==="user"?"justify-end":"justify-start"}`,children:[pe.senderId==="system"&&t.jsx("div",{className:"w-full flex justify-center py-1",children:t.jsx("div",{className:"bg-black/20 rounded-full px-2 py-0 flex items-center justify-center cursor-pointer active:opacity-70 transition-opacity select-none",onTouchStart:Qe=>ls(pe,Qe),onTouchEnd:$n,onMouseDown:Qe=>ls(pe,Qe),onMouseUp:$n,onMouseLeave:$n,children:t.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] text-white",children:pe.text.includes("")?`${D}`:pe.text})})}),pe.senderId==="character"&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-9 h-9 rounded-full bg-[#f5f5f5] flex items-center justify-center overflow-hidden flex-shrink-0",children:k?t.jsx("img",{src:k,alt:n,className:"w-full h-full object-cover"}):t.jsx(An,{className:"w-5 h-5 text-[#999]",strokeWidth:2})}),t.jsx("div",{style:pe.stickerId||pe.isPlaceholderImage||pe.redPacket||pe.order||pe.imageKey&&(!pe.text||pe.text==="[]")?{}:Gr(E),onTouchStart:Qe=>ls(pe,Qe),onTouchEnd:$n,onMouseDown:Qe=>ls(pe,Qe),onMouseUp:$n,onMouseLeave:$n,children:pe.stickerId&&St[pe.stickerId]?t.jsx("img",{src:St[pe.stickerId],alt:"",className:"max-w-[150px] max-h-[150px] rounded-lg",onLoad:Dt}):pe.isPlaceholderImage?t.jsx("div",{className:"w-[250px] h-[180px] bg-[#f0f0f0] rounded-lg flex items-center justify-center px-6 py-4",children:t.jsxs("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] text-[#666] text-center",children:["[",pe.text,".jpg]"]})}):pe.redPacket?On(pe.redPacket,pe):pe.order?Uo(pe.order):t.jsxs(t.Fragment,{children:[pe.quote&&t.jsxs("div",{style:Gr(z),children:[t.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px]",children:pe.quote.sender}),t.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] line-clamp-2",children:pe.quote.content})]}),pe.imageKey&&Kt[pe.imageKey]&&t.jsx("img",{src:Kt[pe.imageKey],alt:"",className:`max-w-[250px] max-h-[250px] rounded-lg ${pe.text&&pe.text!=="[]"?"mb-2":""}`,onLoad:Dt}),pe.text&&pe.text!=="[]"&&t.jsxs("div",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] break-words relative",children:[pe.text,U==="inside"&&Ge&&t.jsx("span",{className:"float-right text-[10px] opacity-70 ml-2 mt-1 select-none leading-none pt-2",children:Kr(pe.timestamp)})]})]})}),rt&&t.jsxs("div",{className:"flex flex-col items-start gap-0.5 ml-1 self-end",children:[t.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] text-[#999]",children:Kr(pe.timestamp)}),t.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] text-[#999]",children:pe.isRead?"":""})]})]}),pe.senderId==="user"&&t.jsxs(t.Fragment,{children:[rt&&t.jsxs("div",{className:"flex flex-col items-end gap-0.5 mr-1 self-end",children:[t.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] text-[#999]",children:Kr(pe.timestamp)}),t.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] text-[#999]",children:Je?"":""})]}),t.jsx("div",{style:pe.stickerId||pe.isPlaceholderImage||pe.redPacket||pe.order||pe.imageKey&&(!pe.text||pe.text==="[]")?{}:Gr(H),onTouchStart:Qe=>ls(pe,Qe),onTouchEnd:$n,onMouseDown:Qe=>ls(pe,Qe),onMouseUp:$n,onMouseLeave:$n,children:pe.stickerId&&St[pe.stickerId]?t.jsx("img",{src:St[pe.stickerId],alt:"",className:"max-w-[150px] max-h-[150px] rounded-lg",onLoad:Dt}):pe.isPlaceholderImage?t.jsx("div",{className:"w-[250px] h-[180px] bg-[#f0f0f0] rounded-lg flex items-center justify-center px-6 py-4",children:t.jsxs("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] text-[#666] text-center",children:["[",pe.text,".jpg]"]})}):pe.redPacket?On(pe.redPacket,pe):pe.order?Uo(pe.order):t.jsxs(t.Fragment,{children:[pe.quote&&t.jsxs("div",{style:Gr(S),children:[t.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px]",children:pe.quote.sender}),t.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] line-clamp-2",children:pe.quote.content})]}),pe.imageKey&&Kt[pe.imageKey]&&t.jsx("img",{src:Kt[pe.imageKey],alt:"",className:`max-w-[250px] max-h-[250px] rounded-lg ${pe.text&&pe.text!=="[]"?"mb-2":""}`,onLoad:Dt}),pe.text&&pe.text!=="[]"&&t.jsxs("div",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] break-words relative",children:[pe.text,U==="inside"&&Ge&&t.jsx("span",{className:"float-right text-[10px] opacity-70 ml-2 mt-1 select-none leading-none pt-2",children:Kr(pe.timestamp)})]})]})}),t.jsx("div",{className:"w-9 h-9 rounded-full bg-[#f5f5f5] flex items-center justify-center overflow-hidden flex-shrink-0",children:y?t.jsx("img",{src:y,alt:"User",className:"w-full h-full object-cover"}):t.jsx(An,{className:"w-5 h-5 text-[#999]",strokeWidth:2})})]})]})]})})},pe.id)})},`virtual-list-${Lt}`)}),Ze&&t.jsxs("div",{className:"bg-white border-t border-[#e5e5e5] px-4 py-3 safe-area-inset-bottom flex items-center justify-between",children:[t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs("span",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] text-[#666]",children:[" ",ut.size," "]})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:Bi,className:"px-4 py-2 rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] text-[#666] bg-[#f5f5f5] active:bg-[#e8e8e8] transition-colors",children:""}),t.jsx("button",{onClick:fd,disabled:ut.size===0,className:`px-4 py-2 rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] text-white transition-colors ${ut.size===0?"bg-[#ccc] cursor-not-allowed":"bg-red-500 active:opacity-80"}`,children:""})]})]}),!Ze&&t.jsxs("div",{className:`px-3 py-2 safe-area-inset-bottom ${Q==="light-frosted"?"bg-white/20 backdrop-blur-md":Q==="dark-frosted"?"bg-black/20 backdrop-blur-md":q?"bg-[#121212]":"bg-white"}`,children:[Se&&t.jsxs("div",{className:`mb-2 flex items-center justify-between p-2 rounded-lg ${Q==="light-frosted"?"bg-white/50":Q==="dark-frosted"?"bg-white/10":q?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] ${Q==="light-frosted"?"text-[#666]":Q==="dark-frosted"||q?"text-[#aaa]":"text-[#666]"}`,children:[" ",Se.senderId==="user"?A:D]}),t.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] truncate ${Q==="light-frosted"?"text-[#333]":Q==="dark-frosted"||q?"text-white":"text-[#333]"}`,children:Se.isPlaceholderImage||Se.imageUrl||Se.imageKey?"[]":Se.stickerId?"[]":Se.text})]}),t.jsx("button",{onClick:Oi,className:`ml-2 p-1 rounded transition-colors ${Q==="light-frosted"?"active:bg-white/60":Q==="dark-frosted"?"active:bg-white/10":q?"active:bg-[#2d2d2d]":"active:bg-[#e8e8e8]"}`,children:t.jsx(ht,{className:`w-4 h-4 ${Q==="light-frosted"?"text-[#666]":Q==="dark-frosted"||q?"text-[#aaa]":"text-[#666]"}`})})]}),tn&&t.jsxs("div",{className:`mb-2 flex items-start gap-2 p-2 rounded-lg ${Q==="light-frosted"?"bg-white/50":Q==="dark-frosted"?"bg-white/10":q?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,children:[t.jsx("img",{src:tn,alt:"",className:"w-20 h-20 object-cover rounded-lg"}),t.jsx("button",{onClick:handleCancelPendingImage,className:`ml-auto p-1 rounded transition-colors ${Q==="light-frosted"?"active:bg-white/60":Q==="dark-frosted"?"active:bg-white/10":q?"active:bg-[#2d2d2d]":"active:bg-[#e8e8e8]"}`,children:t.jsx(ht,{className:`w-4 h-4 ${Q==="light-frosted"?"text-[#666]":Q==="dark-frosted"||q?"text-[#aaa]":"text-[#666]"}`})})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:Ta,disabled:ne,className:`w-10 h-10 flex items-center justify-center transition-opacity flex-shrink-0 ${ne?"opacity-40":"active:opacity-60"}`,children:t.jsxs("svg",{className:`w-5 h-5 ${Q==="light-frosted"?"text-[#333]":Q==="dark-frosted"||q?"text-white":"text-[#333]"}`,viewBox:"0 0 24 24",stroke:"currentColor",fill:"none",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M12 2L15 9L22 12L15 15L12 22L9 15L2 12L9 9Z"}),t.jsx("path",{d:"M20 1L20.7 3.3L23 4L20.7 4.7L20 7L19.3 4.7L17 4L19.3 3.3Z",fill:"currentColor"}),t.jsx("path",{d:"M4 17L4.5 18.5L6 19L4.5 19.5L4 21L3.5 19.5L2 19L3.5 18.5Z",fill:"currentColor"})]})}),t.jsx("div",{className:`flex-1 rounded-lg px-4 py-2 min-h-[40px] max-h-[100px] flex items-center ${Q==="light-frosted"?"bg-white/20":Q==="dark-frosted"?"bg-white/10":q?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,children:t.jsx("textarea",{value:l,onChange:we=>c(we.target.value),onKeyPress:ld,onFocus:()=>{Ct(!1),pn(!1)},className:`w-full resize-none outline-none font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] bg-transparent leading-normal ${Q==="light-frosted"?"text-[#333] placeholder:text-[#999]":Q==="dark-frosted"?"text-white placeholder:text-[#aaa]":q?"text-white placeholder:text-[#666]":"text-[#333] placeholder:text-[#999]"}`,rows:1,style:{maxHeight:"68px",overflowY:"auto"}})}),l.trim()===""?t.jsx("button",{onClick:()=>Ct(!Mt),className:"w-10 h-10 flex items-center justify-center active:opacity-60 transition-opacity flex-shrink-0",children:t.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:Q==="light-frosted"?"#333":q?"white":"#333333",strokeWidth:"2.5",children:[t.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}):t.jsx("button",{onClick:Zr,className:"w-10 h-10 bg-[#7B9E7B] rounded-full flex items-center justify-center active:opacity-80 transition-opacity flex-shrink-0",children:t.jsx(F6,{className:"w-6 h-6 text-white",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),t.jsx(Ie,{children:Mt&&t.jsx(xe.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{type:"spring",stiffness:400,damping:30},className:`absolute bottom-[70px] right-3 rounded-xl shadow-lg z-[998] p-2 ${Q==="light-frosted"?"bg-white/20 backdrop-blur-xl border border-white/20":Q==="dark-frosted"?"bg-black/20 backdrop-blur-xl border border-white/10":q?"bg-[#1e1e1e]":"bg-white"}`,children:t.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[t.jsx("button",{onClick:()=>{pn(!0),Ct(!1)},className:"p-0 bg-transparent border-none cursor-pointer",children:t.jsx("div",{className:`w-[50px] h-[50px] rounded-lg flex items-center justify-center transition-colors ${Q==="light-frosted"?"bg-white/20 hover:bg-white/30 active:bg-white/40":Q==="dark-frosted"?"bg-white/10 hover:bg-white/20 active:bg-white/30":q?"bg-[#1e1e1e] hover:bg-[#2d2d2d] active:bg-[#3d3d3d]":"bg-white hover:bg-[#f5f5f5] active:bg-[#e8e8e8]"}`,children:t.jsx(V8,{className:`w-[24px] h-[24px] ${Q==="light-frosted"?"text-[#333]":Q==="dark-frosted"||q?"text-white":"text-[#333]"}`,strokeWidth:2.5})})}),t.jsx(X9,{onImageSelect:dd,onError:we=>{Ue({show:!0,message:we}),setTimeout(()=>Ue({show:!1,message:""}),3e3)},children:t.jsx("button",{className:"p-0 bg-transparent border-none cursor-pointer",children:t.jsx("div",{className:`w-[50px] h-[50px] rounded-lg flex items-center justify-center transition-colors ${Q==="light-frosted"?"bg-white/20 hover:bg-white/30 active:bg-white/40":Q==="dark-frosted"?"bg-white/10 hover:bg-white/20 active:bg-white/30":q?"bg-[#1e1e1e] hover:bg-[#2d2d2d] active:bg-[#3d3d3d]":"bg-white hover:bg-[#f5f5f5] active:bg-[#e8e8e8]"}`,children:t.jsx(va,{className:`w-[24px] h-[24px] ${Q==="light-frosted"?"text-[#333]":Q==="dark-frosted"||q?"text-white":"text-[#333]"}`,strokeWidth:2.5})})})}),t.jsx("button",{onClick:()=>{Ct(!1),Fn(!0)},className:"p-0 bg-transparent border-none cursor-pointer",children:t.jsx("div",{className:`w-[50px] h-[50px] rounded-lg flex items-center justify-center transition-colors ${Q==="light-frosted"?"bg-white/20 hover:bg-white/30 active:bg-white/40":Q==="dark-frosted"?"bg-white/10 hover:bg-white/20 active:bg-white/30":q?"bg-[#1e1e1e] hover:bg-[#2d2d2d] active:bg-[#3d3d3d]":"bg-white hover:bg-[#f5f5f5] active:bg-[#e8e8e8]"}`,children:t.jsx(tp,{className:`w-[24px] h-[24px] ${Q==="light-frosted"?"text-[#333]":q?"text-white":"text-[#333]"}`,strokeWidth:2.5})})}),t.jsx("button",{onClick:()=>{bn(!0),Ct(!1)},className:"p-0 bg-transparent border-none cursor-pointer",children:t.jsx("div",{className:`w-[50px] h-[50px] rounded-lg flex items-center justify-center transition-colors ${Q==="light-frosted"?"bg-white/20 hover:bg-white/30 active:bg-white/40":Q==="dark-frosted"?"bg-white/10 hover:bg-white/20 active:bg-white/30":q?"bg-[#1e1e1e] hover:bg-[#2d2d2d] active:bg-[#3d3d3d]":"bg-white hover:bg-[#f5f5f5] active:bg-[#e8e8e8]"}`,children:t.jsx("svg",{className:`w-[22px] h-[22px] ${Q==="light-frosted"?"text-[#333]":q?"text-white":"text-[#333]"}`,viewBox:"80 80 864 864",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",strokeWidth:"20",children:t.jsx("path",{d:"M604.928 416.682667a425.856 425.856 0 0 0 205.952-111.872V170.794667h-597.333333v134.016a425.813333 425.813333 0 0 0 205.952 111.872 106.666667 106.666667 0 0 1 185.429333 0z m8.874667 85.333333a106.709333 106.709333 0 0 1-203.178667 0 509.482667 509.482667 0 0 1-197.12-85.973333v437.418666h597.333333V416a509.525333 509.525333 0 0 1-197.034666 86.016zM170.88 85.504h682.666667a42.666667 42.666667 0 0 1 42.666666 42.666667v768a42.666667 42.666667 0 0 1-42.666666 42.666666h-682.666667a42.666667 42.666667 0 0 1-42.666667-42.666666v-768a42.666667 42.666667 0 0 1 42.666667-42.666667z"})})})})]})})}),t.jsx(Ie,{children:Mn&&t.jsx(Q9,{onClose:()=>pn(!1),onSelect:Ho,theme:Q,isDarkMode:q})}),t.jsx(Ie,{children:_t&&t.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[t.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40",onClick:()=>Fn(!1)}),t.jsxs(xe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[320px] shadow-xl ${Q==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":Q==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":q?"bg-[#1e1e1e] border border-[#2d2d2d] text-white shadow-xl":"bg-white text-[#333]"}`,children:[t.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-4 ${q?"text-white":"text-black"}`,children:""}),t.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] text-center mb-4 ${q?"text-[#aaa]":"text-[#666]"}`,children:""}),t.jsx("input",{type:"text",value:on,onChange:we=>Zt(we.target.value),placeholder:"",className:`w-full px-4 py-3 rounded-xl border-none outline-none font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] mb-6 transition-colors ${Q==="light-frosted"?"bg-white/40 text-[#333] placeholder:text-[#999]":Q==="dark-frosted"?"bg-white/10 text-white placeholder:text-[#aaa]":q?"bg-[#2d2d2d] text-white placeholder:text-[#666]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999]"}`,autoFocus:!0,onKeyPress:we=>{we.key==="Enter"&&on.trim()&&Qr()}}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>{Fn(!1),Zt("")},className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors disabled:opacity-50 ${Q==="light-frosted"?"bg-white/40 text-[#666] hover:bg-white/60":Q==="dark-frosted"?"bg-white/10 text-white hover:bg-white/20":q?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),t.jsx("button",{onClick:Qr,disabled:!on.trim(),className:"flex-1 py-2.5 rounded-xl bg-[#7B9E7B] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity disabled:opacity-50",children:""})]})]})]})}),t.jsx(Ie,{children:Ps&&t.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[t.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40",onClick:()=>bn(!1)}),t.jsxs(xe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[360px] shadow-xl ${Q==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":Q==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":q?"bg-[#1e1e1e] border border-[#2d2d2d] text-white shadow-xl":"bg-white text-[#333]"}`,children:[t.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-4 ${q?"text-white":"text-black"}`,children:""}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] mb-2 block ${q?"text-[#aaa]":"text-[#666]"}`,children:""}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:mr,onChange:we=>{const Ae=we.target.value;(Ae===""||/^\d+$/.test(Ae))&&Wr(Ae)},placeholder:"0",className:`w-full px-4 py-3 pr-16 rounded-xl border-none outline-none font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] transition-colors ${Q==="light-frosted"?"bg-white/40 text-[#333] placeholder:text-[#999]":Q==="dark-frosted"?"bg-white/10 text-white placeholder:text-[#aaa]":q?"bg-[#2d2d2d] text-white placeholder:text-[#666]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999]"}`,autoFocus:!0}),t.jsx("span",{className:`absolute right-4 top-1/2 -translate-y-1/2 font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] ${q?"text-[#aaa]":"text-[#999]"}`,children:""})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] mb-2 block ${q?"text-[#aaa]":"text-[#666]"}`,children:""}),t.jsx("input",{type:"text",value:zo,onChange:we=>Ii(we.target.value),placeholder:"",maxLength:20,className:`w-full px-4 py-3 rounded-xl border-none outline-none font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] transition-colors ${Q==="light-frosted"?"bg-white/40 text-[#333] placeholder:text-[#999]":Q==="dark-frosted"?"bg-white/10 text-white placeholder:text-[#aaa]":q?"bg-[#2d2d2d] text-white placeholder:text-[#666]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999]"}`})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>{bn(!1),Wr(""),Ii("")},className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors ${Q==="light-frosted"?"bg-white/40 text-[#666] hover:bg-white/60":Q==="dark-frosted"?"bg-white/10 text-white hover:bg-white/20":q?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),t.jsx("button",{onClick:cd,className:"flex-1 py-2.5 rounded-xl bg-[#ff6b6b] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity",children:""})]})]})]})}),t.jsx(Ie,{children:me&&t.jsx("div",{className:"fixed inset-0 z-[70]",onClick:()=>{he(!1),X(null)},children:t.jsxs(xe.div,{initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:10},transition:{type:"spring",stiffness:400,damping:30},className:`absolute rounded-lg shadow-lg py-1 min-w-[120px] ${Q==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":Q==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20":q?"bg-[#1e1e1e] border border-[#2d2d2d] text-white shadow-xl":"bg-white text-[#333] shadow-lg"}`,style:{left:Math.min(oe.x,window.innerWidth-140),top:Math.min(oe.y,window.innerHeight-200)},onClick:we=>we.stopPropagation(),children:[J?.senderId!=="system"&&t.jsxs("button",{onClick:ud,className:`w-full px-4 py-2.5 flex items-center gap-3 transition-colors ${Q==="light-frosted"?"hover:bg-white/40":Q==="dark-frosted"?"hover:bg-white/10":q?"hover:bg-[#2d2d2d]":"hover:bg-[#f5f5f5]"}`,children:[t.jsx(h_,{className:`w-4 h-4 ${q||Q==="dark-frosted"?"text-[#aaa]":"text-[#666]"}`}),t.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] ${q||Q==="dark-frosted"?"text-white":"text-[#333]"}`,children:""})]}),J?.senderId!=="system"&&t.jsxs("button",{onClick:Go,className:`w-full px-4 py-2.5 flex items-center gap-3 transition-colors ${Q==="light-frosted"?"hover:bg-white/40":Q==="dark-frosted"?"hover:bg-white/10":q?"hover:bg-[#2d2d2d]":"hover:bg-[#f5f5f5]"}`,children:[t.jsx(w8,{className:`w-4 h-4 ${q||Q==="dark-frosted"?"text-[#aaa]":"text-[#666]"}`}),t.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] ${q||Q==="dark-frosted"?"text-white":"text-[#333]"}`,children:""})]}),J?.senderId!=="system"&&t.jsxs("button",{onClick:Li,className:`w-full px-4 py-2.5 flex items-center gap-3 transition-colors ${Q==="light-frosted"?"hover:bg-white/40":Q==="dark-frosted"?"hover:bg-white/10":q?"hover:bg-[#2d2d2d]":"hover:bg-[#f5f5f5]"}`,children:[t.jsx(h8,{className:`w-4 h-4 ${q||Q==="dark-frosted"?"text-[#aaa]":"text-[#666]"}`}),t.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] ${q||Q==="dark-frosted"?"text-white":"text-[#333]"}`,children:""})]}),t.jsxs("button",{onClick:Ko,className:`w-full px-4 py-2.5 flex items-center gap-3 transition-colors ${Q==="light-frosted"?"hover:bg-white/40":Q==="dark-frosted"?"hover:bg-white/10":q?"hover:bg-[#2d2d2d]":"hover:bg-[#f5f5f5]"}`,children:[t.jsx(wt,{className:`w-4 h-4 ${q||Q==="dark-frosted"?"text-[#aaa]":"text-[#666]"}`}),t.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] ${q||Q==="dark-frosted"?"text-white":"text-[#333]"}`,children:""})]}),t.jsxs("button",{onClick:Ri,className:`w-full px-4 py-2.5 flex items-center gap-3 transition-colors ${Q==="light-frosted"?"hover:bg-white/40":Q==="dark-frosted"?"hover:bg-white/10":q?"hover:bg-[#2d2d2d]":"hover:bg-[#f5f5f5]"}`,children:[t.jsx(Dn,{className:"w-4 h-4 text-red-500"}),t.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] text-red-500",children:""})]})]})})}),t.jsx(Ie,{children:Ne&&J&&t.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[t.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40",onClick:zi}),t.jsxs(xe.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[360px] shadow-xl ${Q==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":Q==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":q?"bg-[#1e1e1e] border border-[#2d2d2d] text-white shadow-xl":"bg-white text-[#333]"}`,children:[t.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-4 ${q?"text-white":"text-black"}`,children:""}),t.jsx("textarea",{value:fe,onChange:we=>_e(we.target.value),className:`w-full px-4 py-3 rounded-xl border-none outline-none font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] resize-none mb-6 transition-colors ${Q==="light-frosted"?"bg-white/40 text-[#333] placeholder:text-[#999]":Q==="dark-frosted"?"bg-white/10 text-white placeholder:text-[#aaa]":q?"bg-[#2d2d2d] text-white placeholder:text-[#666]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999]"}`,rows:4,autoFocus:!0,placeholder:""}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:zi,className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors ${Q==="light-frosted"?"bg-white/40 text-[#666] hover:bg-white/60":Q==="dark-frosted"?"bg-white/10 text-white hover:bg-white/20":q?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),t.jsx("button",{onClick:yt,className:"flex-1 py-2.5 rounded-xl bg-[#7B9E7B] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity",children:""})]})]})]})}),t.jsx(Ie,{children:Ce.show&&t.jsx(xe.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},transition:{type:"spring",stiffness:400,damping:30},className:"fixed top-16 left-1/2 -translate-x-1/2 z-[80] px-4 w-full max-w-[90vw]",children:t.jsx("div",{className:"bg-[#ff3b30] rounded-[12px] px-5 py-4 shadow-lg max-w-md mx-auto max-h-[60vh] overflow-y-auto",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-white/20 flex items-center justify-center mt-0.5",children:t.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] text-white mb-1",children:""}),t.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] text-white/90 leading-relaxed break-words whitespace-pre-wrap",children:Ce.message})]})]})})})}),t.jsx(Ie,{children:At&&At.redPacket&&t.jsxs("div",{className:"fixed inset-0 z-[1300] flex items-center justify-center",children:[t.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},style:{backgroundColor:"rgba(0,0,0,0.5)"},className:"absolute inset-0",onClick:()=>Ea(null)}),t.jsxs(xe.div,{initial:{scale:.9,opacity:0,y:10},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"bg-[#ea5e4f] w-[320px] rounded-[8px] overflow-hidden relative shadow-2xl z-10",onClick:we=>we.stopPropagation(),children:[t.jsx("button",{onClick:()=>Ea(null),className:"absolute top-3 left-3 z-10 text-white/70 hover:text-white active:opacity-50 transition-colors",children:t.jsx(ht,{size:20})}),t.jsxs("div",{className:"pt-12 pb-8 px-6 flex flex-col items-center text-white relative",children:[t.jsx("div",{className:"absolute top-[-100px] w-[500px] h-[300px] bg-[#d95345] rounded-[50%] -z-0"}),t.jsx("div",{className:"w-16 h-16 rounded-full border-2 border-[#fcdb9a] bg-white p-0.5 mb-3 z-10 shadow-md",children:t.jsx("div",{className:"w-full h-full rounded-full overflow-hidden bg-gray-100",children:At.senderId==="user"?y?t.jsx("img",{src:y,alt:"User",className:"w-full h-full object-cover"}):t.jsx(An,{className:"w-full h-full p-3 text-gray-400"}):k?t.jsx("img",{src:k,alt:"Character",className:"w-full h-full object-cover"}):t.jsx(An,{className:"w-full h-full p-3 text-gray-400"})})}),t.jsxs("h3",{className:"text-[16px] font-medium mb-1 tracking-wide z-10",children:[At.senderId==="character"?D:At.senderName,""]}),t.jsx("p",{className:"text-[14px] opacity-80 mb-12 tracking-wide z-10",children:At.redPacket.blessing}),t.jsxs("div",{className:"z-10 flex flex-col items-center",children:[t.jsxs("div",{className:"text-[48px] font-bold leading-none tracking-tighter text-[#fcdb9a] mb-3 flex items-baseline gap-1",children:[t.jsx("span",{children:At.redPacket.amount.toLocaleString()}),t.jsx("span",{className:"text-[14px] font-normal tracking-normal opacity-80",children:""})]}),t.jsx("div",{className:"text-[12px] text-[#fcdb9a]/80 tracking-wide flex items-center gap-1",children:t.jsx("span",{children:At.senderId==="user"?At.redPacket.opened?"":"":""})})]})]}),t.jsxs("div",{className:"bg-white px-4 py-4 min-h-[80px]",children:[t.jsx("div",{className:"border-b border-gray-100 pb-2 mb-2",children:t.jsxs("p",{className:"text-[12px] text-gray-400 tracking-wide",children:["1",At.redPacket.amount,""]})}),At.redPacket.opened||At.senderId!=="user"?t.jsxs("div",{className:"flex items-center justify-between py-2",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 overflow-hidden flex-shrink-0",children:At.senderId==="user"?k?t.jsx("img",{src:k,alt:"Receiver",className:"w-full h-full object-cover"}):t.jsx(An,{className:"w-full h-full p-2 text-gray-400"}):y?t.jsx("img",{src:y,alt:"Receiver",className:"w-full h-full object-cover"}):t.jsx(An,{className:"w-full h-full p-2 text-gray-400"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[14px] text-[#333] font-medium leading-tight",children:At.senderId==="user"?D:A}),t.jsx("p",{className:"text-[12px] text-gray-400 mt-0.5",children:Kr(At.timestamp)})]})]}),t.jsx("div",{className:"text-right",children:t.jsxs("p",{className:"text-[14px] text-[#333] font-medium",children:[At.redPacket.amount.toLocaleString()," "]})})]}):t.jsx("div",{className:"py-8 text-center text-gray-400 text-[13px]",children:"..."})]})]})]})}),t.jsx(Ie,{children:B&&t.jsx(Y9,{characterId:e,characterName:n,onClose:Yo,onUpdate:()=>{},onDelete:s},"chat-settings")})]})}const rE={initial:{x:"100%"},animate:{x:0},exit:{x:"100%",zIndex:61}};function aE({onClose:e,initialChatId:n,onChatChange:s}){const[a,i]=j.useState(n||null),[l,c]=j.useState(""),[d,u]=j.useState(0),[m,p]=j.useState(()=>Le.chatSettings?.darkMode||!1);j.useEffect(()=>{const b=()=>{p(Le.chatSettings?.darkMode||!1)};return window.addEventListener("chat-settings-updated",b),()=>window.removeEventListener("chat-settings-updated",b)},[]),j.useEffect(()=>{if(n){i(n);const b=th(n,"");c(b)}},[n]);const f=(b,y)=>{i(b),c(y),s?.(b)},x=()=>{i(null),c(""),u(b=>b+1),s?.(null)};return t.jsxs("div",{className:`relative w-full h-full ${m?"bg-[#121212]":"bg-white"} overflow-hidden`,children:[t.jsx("div",{className:"absolute inset-0 w-full h-full",children:t.jsx(d9,{onClose:e,onOpenChat:f},d)}),t.jsx(Ie,{children:a&&t.jsx(xe.div,{variants:rE,initial:"initial",animate:"animate",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"absolute inset-0 z-[60] w-full h-full bg-transparent",children:t.jsx(sE,{characterId:a,characterName:l,onClose:x})},"chat")})]})}const Qg={shareEnabled:!1,shareScope:"all",shareCharacterId:""};function iE({onClose:e,onNavigate:n}){const[s,a]=j.useState(!1),[i,l]=j.useState(!1),[c,d]=j.useState(!1),[u,m]=j.useState(Qg),[p,f]=j.useState([]),[x,b]=j.useState(!1);j.useEffect(()=>{y(),g()},[]);const y=async()=>{try{const w=await ae.get(te.HEALTH,"health_settings");w&&m({...Qg,...w})}catch(w){console.error("Failed to load health settings",w)}},g=async()=>{try{const w=await ae.get(te.CHARACTERS,"characters");w&&f(w)}catch(w){console.error("Failed to load characters",w)}},k=async()=>{try{await ae.set(te.HEALTH,"health_settings",u),a(!1),l(!0),setTimeout(()=>l(!1),2e3)}catch{d(!0),setTimeout(()=>d(!1),2e3)}};return t.jsxs("div",{className:"flex flex-col h-full",children:[t.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10",children:[t.jsx("button",{onClick:e,className:"w-10 h-10 bg-white/40 backdrop-blur-md border border-white/40 rounded-2xl flex items-center justify-center text-[#6B7C93] transition-transform active:scale-90 active:bg-white/60",children:t.jsx(an,{className:"w-5 h-5",strokeWidth:2.5})}),t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("span",{className:"text-[11px] font-bold text-[#9FA8DA] tracking-[0.2em] uppercase mb-0.5",children:"Health Care"}),t.jsx("h1",{className:"text-lg font-black text-[#5C6B7F] tracking-wide",children:""})]}),t.jsx("button",{onClick:()=>a(!0),className:"w-10 h-10 bg-white/40 backdrop-blur-md border border-white/40 rounded-2xl flex items-center justify-center text-[#6B7C93] transition-transform active:scale-90 active:bg-white/60",children:t.jsx(op,{className:"w-5 h-5",strokeWidth:2.5})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[t.jsxs("div",{className:"text-center mb-8 relative",children:[t.jsx("div",{className:"inline-flex items-center justify-center p-4 rounded-3xl bg-white/30 backdrop-blur-sm border border-white/40 mb-4",children:t.jsx(Ec,{className:"w-8 h-8 text-[#88B04B]"})}),t.jsxs("p",{className:"text-sm text-[#7D8CA3] font-medium leading-relaxed max-w-[280px] mx-auto",children:["",t.jsx("br",{}),""]})]}),t.jsxs("div",{className:"grid gap-5",children:[t.jsxs("button",{onClick:()=>n("sleep"),className:"group relative bg-white/40 backdrop-blur-md border border-white/50 p-6 rounded-[2rem] text-left transition-transform active:scale-[0.96] overflow-hidden",children:[t.jsx("div",{className:"absolute top-[-20%] right-[-10%] w-32 h-32 bg-[#E6E6FA] rounded-full filter blur-[40px] opacity-60"}),t.jsxs("div",{className:"relative z-10 flex items-start justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{className:"w-12 h-12 bg-[#E6E6FA] text-[#6A5ACD] flex items-center justify-center rounded-2xl mb-4",children:t.jsx(fv,{className:"w-6 h-6 fill-current"})}),t.jsx("h3",{className:"text-xl font-black text-[#5C6B7F] mb-1",children:""}),t.jsxs("p",{className:"text-xs text-[#8E9CB3] font-medium",children:["",t.jsx("br",{}),""]})]}),t.jsx("div",{className:"w-8 h-8 rounded-full bg-white/40 flex items-center justify-center text-[#B39EB5]",children:t.jsx(an,{className:"w-5 h-5 rotate-180"})})]})]}),t.jsxs("button",{onClick:()=>n("cycle"),className:"group relative bg-white/40 backdrop-blur-md border border-white/50 p-6 rounded-[2rem] text-left transition-transform active:scale-[0.96] overflow-hidden",children:[t.jsx("div",{className:"absolute top-[-20%] right-[-10%] w-32 h-32 bg-[#FFD1DC] rounded-full filter blur-[40px] opacity-60"}),t.jsxs("div",{className:"relative z-10 flex items-start justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{className:"w-12 h-12 bg-[#FFD1DC] text-[#E57373] flex items-center justify-center rounded-2xl mb-4",children:t.jsx(cv,{className:"w-6 h-6"})}),t.jsx("h3",{className:"text-xl font-black text-[#5C6B7F] mb-1",children:""}),t.jsxs("p",{className:"text-xs text-[#8E9CB3] font-medium",children:["",t.jsx("br",{}),""]})]}),t.jsx("div",{className:"w-8 h-8 rounded-full bg-white/40 flex items-center justify-center text-[#FFB7B2]",children:t.jsx(an,{className:"w-5 h-5 rotate-180"})})]})]}),t.jsxs("button",{onClick:()=>n("diagnosis"),className:"group relative bg-white/40 backdrop-blur-md border border-white/50 p-6 rounded-[2rem] text-left transition-transform active:scale-[0.96] overflow-hidden",children:[t.jsx("div",{className:"absolute top-[-20%] right-[-10%] w-32 h-32 bg-[#C1E1C1] rounded-full filter blur-[40px] opacity-60"}),t.jsxs("div",{className:"relative z-10 flex items-start justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{className:"w-12 h-12 bg-[#C1E1C1] text-[#6B8E23] flex items-center justify-center rounded-2xl mb-4",children:t.jsx(pv,{className:"w-6 h-6"})}),t.jsx("h3",{className:"text-xl font-black text-[#5C6B7F] mb-1",children:""}),t.jsxs("p",{className:"text-xs text-[#8E9CB3] font-medium",children:["",t.jsx("br",{}),""]})]}),t.jsx("div",{className:"w-8 h-8 rounded-full bg-white/40 flex items-center justify-center text-[#8FBC8F]",children:t.jsx(an,{className:"w-5 h-5 rotate-180"})})]})]})]})]}),t.jsx(Ie,{children:s&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6",children:[t.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>a(!1),className:"absolute inset-0 bg-[#5C6B7F]/20 backdrop-blur-sm"}),t.jsxs(xe.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:300,damping:25},className:"bg-[#FDFBF7]/95 backdrop-blur-xl w-full max-w-[320px] rounded-[2rem] border border-white/50 shadow-md relative z-10",children:[t.jsxs("div",{className:"bg-white/40 border-b border-white/50 p-6 flex justify-between items-center rounded-t-[2rem]",children:[t.jsx("span",{className:"text-lg font-black tracking-wide text-[#5C6B7F]",children:""}),t.jsx("button",{onClick:()=>a(!1),className:"bg-white/40 p-1 rounded-full text-[#7D8CA3] active:bg-white/60 transition-colors",children:t.jsx(ht,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-bold text-[#5C6B7F]",children:""}),t.jsx("p",{className:"text-[10px] text-[#9FA8DA] mt-1",children:""})]}),t.jsx("button",{onClick:()=>m({...u,shareEnabled:!u.shareEnabled}),className:`w-12 h-7 rounded-full transition-colors relative ${u.shareEnabled?"bg-[#AEC6CF]":"bg-gray-200"}`,children:t.jsx(xe.div,{layout:!0,className:"absolute top-1 left-1 w-5 h-5 bg-white rounded-full shadow-sm",animate:{x:u.shareEnabled?20:0},transition:{type:"spring",stiffness:500,damping:30}})})]}),t.jsx(Ie,{children:u.shareEnabled&&t.jsxs(xe.div,{initial:{opacity:0,height:0,overflow:"hidden"},animate:{opacity:1,height:"auto",transitionEnd:{overflow:"visible"}},exit:{opacity:0,height:0,overflow:"hidden"},className:"space-y-4 pt-4 border-t border-[#7D8CA3]/10",children:[t.jsx("label",{className:"text-xs font-bold text-[#7D8CA3] uppercase tracking-wider block mb-2",children:""}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("button",{onClick:()=>m({...u,shareScope:"all"}),className:`p-3 rounded-2xl border flex flex-col items-center gap-2 transition-all ${u.shareScope==="all"?"bg-[#AEC6CF]/10 border-[#AEC6CF] text-[#5C6B7F]":"bg-white/40 border-transparent text-[#9FA8DA]"}`,children:[t.jsx(qc,{className:"w-5 h-5"}),t.jsx("span",{className:"text-xs font-bold",children:""})]}),t.jsxs("button",{onClick:()=>m({...u,shareScope:"specific"}),className:`p-3 rounded-2xl border flex flex-col items-center gap-2 transition-all ${u.shareScope==="specific"?"bg-[#AEC6CF]/10 border-[#AEC6CF] text-[#5C6B7F]":"bg-white/40 border-transparent text-[#9FA8DA]"}`,children:[t.jsx(An,{className:"w-5 h-5"}),t.jsx("span",{className:"text-xs font-bold",children:""})]})]}),u.shareScope==="specific"&&t.jsxs("div",{className:"relative mt-2",children:[t.jsxs("button",{onClick:()=>b(!x),className:"w-full bg-white/50 border border-white/60 px-4 py-3 rounded-2xl text-xs font-bold text-[#5C6B7F] flex items-center justify-between active:bg-white/70 transition-colors",children:[t.jsx("div",{className:"flex items-center gap-2 pl-1",children:t.jsx("span",{children:p.find(w=>w.id===u.shareCharacterId)?.name||""})}),t.jsx(os,{className:`w-4 h-4 transition-transform ${x?"rotate-90":""}`})]}),t.jsx(Ie,{children:x&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>b(!1)}),t.jsxs(xe.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},className:"absolute top-full left-0 right-0 mt-2 bg-white/90 backdrop-blur-xl border border-white/60 rounded-2xl shadow-lg z-20 max-h-48 overflow-y-auto p-1",children:[p.length===0&&t.jsx("div",{className:"p-3 text-center text-[10px] text-[#9FA8DA]",children:""}),p.map(w=>t.jsx("button",{onClick:()=>{m({...u,shareCharacterId:w.id}),b(!1)},className:`w-full text-left px-4 py-3 rounded-xl text-xs font-bold flex items-center gap-2 mb-1 ${u.shareCharacterId===w.id?"bg-[#AEC6CF]/20 text-[#5C6B7F]":"hover:bg-black/5 text-[#7D8CA3]"}`,children:w.name},w.id))]})]})})]})]})}),t.jsxs("button",{onClick:k,className:"w-full bg-[#AEC6CF] text-white py-3.5 rounded-2xl font-bold text-xs uppercase tracking-widest shadow-md shadow-[#AEC6CF]/30 active:scale-[0.98] transition-transform flex items-center justify-center gap-2 mt-4",children:[t.jsx(wt,{className:"w-4 h-4"}),""]})]})]})]})}),t.jsx(Ie,{children:i&&t.jsx("div",{className:"fixed top-[90px] inset-x-0 z-[100] flex justify-center pointer-events-none",children:t.jsxs(xe.div,{initial:{scale:.9,opacity:0,y:-10},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},className:"mx-auto w-fit flex items-center gap-2 px-4 py-3 pointer-events-auto",style:{background:"rgba(253, 251, 247, 0.85)",backdropFilter:"blur(12px)",border:"1px solid rgba(255, 255, 255, 0.6)",borderRadius:"20px",color:"#5C6B7F",boxShadow:"0 10px 40px -10px rgba(92, 107, 127, 0.15)",fontSize:"13px",fontWeight:"bold"},children:[t.jsx("div",{className:"w-5 h-5 rounded-full bg-[#AEC6CF] flex items-center justify-center text-white",children:t.jsx(wt,{className:"w-3 h-3",strokeWidth:3})}),t.jsx("span",{children:""})]})})}),t.jsx(Ie,{children:c&&t.jsx("div",{className:"fixed top-[90px] inset-x-0 z-[100] flex justify-center pointer-events-none",children:t.jsxs(xe.div,{initial:{scale:.9,opacity:0,y:-10},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},className:"mx-auto w-fit flex items-center gap-2 px-4 py-3 pointer-events-auto",style:{background:"rgba(253, 251, 247, 0.85)",backdropFilter:"blur(12px)",border:"1px solid rgba(255, 255, 255, 0.6)",borderRadius:"20px",color:"#5C6B7F",boxShadow:"0 10px 40px -10px rgba(92, 107, 127, 0.15)",fontSize:"13px",fontWeight:"bold"},children:[t.jsx("div",{className:"w-5 h-5 rounded-full bg-[#E57373] flex items-center justify-center text-white",children:t.jsx(ht,{className:"w-3 h-3",strokeWidth:3})}),t.jsx("span",{children:""})]})})})]})}function oE({onBack:e}){const[n,s]=j.useState([]),[a,i]=j.useState(""),[l,c]=j.useState(""),[d,u]=j.useState("good"),[m,p]=j.useState(null),f=(k,w)=>{p({show:!0,type:k,message:w}),setTimeout(()=>p(null),2e3)};j.useEffect(()=>{x()},[]);const x=async()=>{try{const k=await ae.get(te.HEALTH,"sleep_logs");if(k&&k.length>0){const C=new Date().toDateString(),N=k.find(A=>new Date(A.endTime).toDateString()===C);if(N){s([N]);const A=new Date(N.startTime),P=new Date(N.endTime),B=A.getHours().toString().padStart(2,"0"),$=A.getMinutes().toString().padStart(2,"0");i(`${B}:${$}`);const D=P.getHours().toString().padStart(2,"0"),T=P.getMinutes().toString().padStart(2,"0");c(`${D}:${T}`),u(N.quality),(k.length>1||!k.includes(N))&&await ae.set(te.HEALTH,"sleep_logs",[N])}else s([]),await ae.set(te.HEALTH,"sleep_logs",[])}}catch(k){console.error("Failed to load sleep logs",k)}},b=(k,w)=>{const C=k.replace(/\D/g,"");if(C.length<=4)if(C.length>=3){const N=C.slice(0,2),A=C.slice(2);if(parseInt(N)>23||parseInt(A)>59)return;w(`${N}:${A}`)}else w(C)},y=async()=>{if(a.length!==5||l.length!==5){f("error"," ( 23:00)");return}const k=new Date;k.setSeconds(0),k.setMilliseconds(0);const[w,C]=l.split(":").map(Number),N=new Date(k);N.setHours(w,C,0,0);const[A,P]=a.split(":").map(Number),B=new Date(k);B.setHours(A,P,0,0),B>N&&B.setDate(B.getDate()-1);const $={id:Date.now().toString(),startTime:B.toISOString(),endTime:N.toISOString(),quality:d,createdAt:new Date().toISOString()};try{const D=[$];await ae.set(te.HEALTH,"sleep_logs",D),s(D),f("success","")}catch{f("error","")}},g=async()=>{if(confirm(""))try{await ae.set(te.HEALTH,"sleep_logs",[]),s([]),i(""),c(""),u("good"),f("success","")}catch{f("error","")}};return t.jsxs("div",{className:"flex flex-col h-full",children:[t.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10",children:[t.jsx("button",{onClick:e,className:"w-10 h-10 bg-white/40 backdrop-blur-md border border-white/40 rounded-2xl flex items-center justify-center text-[#6B7C93] transition-transform active:scale-90 active:bg-white/60",children:t.jsx(an,{className:"w-5 h-5",strokeWidth:2.5})}),t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("span",{className:"text-[11px] font-bold text-[#9FA8DA] tracking-[0.2em] uppercase mb-0.5",children:"Sleep Log"}),t.jsx("h1",{className:"text-lg font-black text-[#5C6B7F] tracking-wide",children:""})]}),t.jsx("div",{className:"w-10"})," "]}),t.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:t.jsxs("div",{className:"bg-white/60 backdrop-blur-md border border-white/60 p-6 rounded-[2rem] shadow-sm",children:[t.jsxs("h3",{className:"text-xs font-bold text-[#9FA8DA] uppercase tracking-widest mb-6 flex items-center gap-2",children:[t.jsx(Eo,{className:"w-4 h-4"})," "]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-bold text-[#7D8CA3] uppercase tracking-wider pl-1",children:" (HH:MM)"}),t.jsx("input",{type:"tel",placeholder:"2300",value:a,onChange:k=>b(k.target.value,i),maxLength:5,className:"w-full bg-white/50 border border-white/60 text-center py-4 rounded-2xl text-lg font-mono font-bold text-[#5C6B7F] placeholder:text-[#D1D5DB] focus:border-[#AEC6CF] focus:outline-none focus:ring-2 focus:ring-[#AEC6CF]/20"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-bold text-[#7D8CA3] uppercase tracking-wider pl-1",children:" (HH:MM)"}),t.jsx("input",{type:"tel",placeholder:"0730",value:l,onChange:k=>b(k.target.value,c),maxLength:5,className:"w-full bg-white/50 border border-white/60 text-center py-4 rounded-2xl text-lg font-mono font-bold text-[#5C6B7F] placeholder:text-[#D1D5DB] focus:border-[#AEC6CF] focus:outline-none focus:ring-2 focus:ring-[#AEC6CF]/20"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-bold text-[#7D8CA3] uppercase tracking-wider pl-1",children:""}),t.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[t.jsxs("button",{type:"button",onClick:()=>u("good"),className:`py-3 rounded-2xl flex flex-col items-center gap-1 transition-all active:scale-95 ${d==="good"?"bg-[#E0F2F1] text-[#4DB6AC] shadow-inner ring-1 ring-[#4DB6AC]/20":"bg-white/40 text-[#B0BEC5] hover:bg-white/60"}`,children:[t.jsx(p7,{className:"w-5 h-5"}),t.jsx("span",{className:"text-[10px] font-bold",children:""})]}),t.jsxs("button",{type:"button",onClick:()=>u("average"),className:`py-3 rounded-2xl flex flex-col items-center gap-1 transition-all active:scale-95 ${d==="average"?"bg-[#FFF3E0] text-[#FFB74D] shadow-inner ring-1 ring-[#FFB74D]/20":"bg-white/40 text-[#B0BEC5] hover:bg-white/60"}`,children:[t.jsx(ip,{className:"w-5 h-5"}),t.jsx("span",{className:"text-[10px] font-bold",children:""})]}),t.jsxs("button",{type:"button",onClick:()=>u("poor"),className:`py-3 rounded-2xl flex flex-col items-center gap-1 transition-all active:scale-95 ${d==="poor"?"bg-[#FFEBEE] text-[#E57373] shadow-inner ring-1 ring-[#E57373]/20":"bg-white/40 text-[#B0BEC5] hover:bg-white/60"}`,children:[t.jsx(f7,{className:"w-5 h-5"}),t.jsx("span",{className:"text-[10px] font-bold",children:""})]})]})]}),t.jsxs("button",{onClick:y,className:"w-full bg-[#AEC6CF] text-white py-4 font-bold text-sm tracking-widest uppercase rounded-2xl shadow-md shadow-[#AEC6CF]/30 active:scale-[0.98] transition-transform flex items-center justify-center gap-2",children:[t.jsx(wt,{className:"w-5 h-5"}),n.length>0?"":""]}),n.length>0&&t.jsxs("button",{onClick:g,className:"w-full bg-[#FFEBEE] text-[#E57373] py-4 font-bold text-sm tracking-widest uppercase rounded-2xl shadow-sm active:scale-[0.98] transition-transform flex items-center justify-center gap-2",children:[t.jsx(Dn,{className:"w-5 h-5"}),""]})]})]})}),t.jsx(Ie,{children:m&&m.show&&t.jsx("div",{className:"fixed top-[90px] inset-x-0 z-[100] flex justify-center pointer-events-none",children:t.jsxs(xe.div,{initial:{scale:.9,opacity:0,y:-10},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},className:"mx-auto w-fit flex items-center gap-2 px-4 py-3 pointer-events-auto",style:{background:"rgba(253, 251, 247, 0.85)",backdropFilter:"blur(12px)",border:"1px solid rgba(255, 255, 255, 0.6)",borderRadius:"20px",color:"#5C6B7F",boxShadow:"0 10px 40px -10px rgba(92, 107, 127, 0.15)",fontSize:"13px",fontWeight:"bold"},children:[t.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-white ${m.type==="success"?"bg-[#AEC6CF]":"bg-[#E57373]"}`,children:m.type==="success"?t.jsx(wt,{className:"w-3 h-3",strokeWidth:3}):t.jsx(ht,{className:"w-3 h-3",strokeWidth:3})}),t.jsx("span",{children:m.message})]})})})]})}const vf={cycleLength:28,periodLength:5};function lE({onBack:e}){const[n,s]=j.useState([]),[a,i]=j.useState(vf),[l,c]=j.useState(!1),[d,u]=j.useState(!1),[m,p]=j.useState(new Date),[f,x]=j.useState(""),[b,y]=j.useState(vf),[g,k]=j.useState(null),w=(I,S)=>{k({show:!0,type:I,message:S}),setTimeout(()=>k(null),2e3)};j.useEffect(()=>{C()},[]);const C=async()=>{try{const I=await ae.get(te.HEALTH,"cycle_logs"),S=await ae.get(te.HEALTH,"cycle_settings");if(I&&s(I.sort((L,z)=>new Date(z.startDate).getTime()-new Date(L.startDate).getTime())),S){const L={...vf,...S};i(L),y(L)}}catch(I){console.error("Failed to load cycle data",I)}},N=()=>{x(new Date().toISOString().split("T")[0]),c(!0)},A=async()=>{if(!f)return;if(n.some(L=>L.startDate===f)){w("error","");return}const S=[{id:Date.now().toString(),startDate:f},...n].sort((L,z)=>new Date(z.startDate).getTime()-new Date(L.startDate).getTime());try{await ae.set(te.HEALTH,"cycle_logs",S),s(S),c(!1),w("success","")}catch{w("error","")}},P=async I=>{if(confirm(""))try{const S=n.filter(L=>L.id!==I);await ae.set(te.HEALTH,"cycle_logs",S),s(S),w("success","")}catch{w("error","")}},B=async()=>{try{await ae.set(te.HEALTH,"cycle_settings",b),i(b),u(!1),w("success","")}catch{w("error","")}},$=I=>new Date(I.getFullYear(),I.getMonth()+1,0).getDate(),D=I=>new Date(I.getFullYear(),I.getMonth(),1).getDay(),T=I=>{const S=new Date(m.getFullYear(),m.getMonth()+I,1);p(S)},H=I=>{const S=new Date(m.getFullYear(),m.getMonth(),I);S.getTime();for(const L of n){const z=new Date(L.startDate);z.setHours(12,0,0,0),S.setHours(12,0,0,0);const R=S.getTime()-z.getTime(),U=Math.round(R/(1e3*60*60*24));if(U>=0&&U<a.periodLength)return{type:"recorded",dayIndex:U}}if(n.length>0){const L=n[0],z=new Date(L.startDate);z.setHours(12,0,0,0),S.setHours(12,0,0,0);const U=(S.getTime()-z.getTime())/(1e3*60*60*24);if(U<0)return null;const W=Math.floor(U/a.cycleLength),Z=O=>{if(O<=0)return!1;const V=new Date(z);V.setDate(z.getDate()+O*a.cycleLength);const ee=S.getTime()-V.getTime(),q=Math.round(ee/(1e3*60*60*24));return q>=0&&q<a.periodLength};if(Z(W)||Z(W+1))return{type:"predicted"}}return null},E=Uv(n,a);return t.jsxs("div",{className:"flex flex-col h-full",children:[t.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10",children:[t.jsx("button",{onClick:e,className:"w-10 h-10 bg-white/40 backdrop-blur-md border border-white/40 rounded-2xl flex items-center justify-center text-[#6B7C93] transition-transform active:scale-90 active:bg-white/60",children:t.jsx(an,{className:"w-5 h-5",strokeWidth:2.5})}),t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("span",{className:"text-[11px] font-bold text-[#9FA8DA] tracking-[0.2em] uppercase mb-0.5",children:"Cycle Log"}),t.jsx("h1",{className:"text-lg font-black text-[#5C6B7F] tracking-wide",children:""})]}),t.jsx("button",{onClick:()=>u(!0),className:"w-10 h-10 bg-white/40 backdrop-blur-md border border-white/40 rounded-2xl flex items-center justify-center text-[#6B7C93] transition-transform active:scale-90 active:bg-white/60",children:t.jsx(Bo,{className:"w-5 h-5",strokeWidth:2.5})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[t.jsxs("div",{className:"bg-white/40 backdrop-blur-md border border-white/50 p-6 rounded-[2rem]",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("button",{onClick:()=>T(-1),className:"p-2 text-[#7D8CA3] active:bg-white/40 rounded-xl transition-colors",children:t.jsx(an,{className:"w-5 h-5"})}),t.jsxs("h2",{className:"text-lg font-black text-[#5C6B7F]",children:[m.getFullYear()," ",m.getMonth()+1,""]}),t.jsx("button",{onClick:()=>T(1),className:"p-2 text-[#7D8CA3] active:bg-white/40 rounded-xl transition-colors",children:t.jsx(os,{className:"w-5 h-5"})})]}),t.jsx("div",{className:"grid grid-cols-7 mb-4",children:["","","","","","",""].map((I,S)=>t.jsx("div",{className:"text-center text-xs font-bold text-[#9FA8DA]",children:I},S))}),t.jsxs("div",{className:"grid grid-cols-7 gap-y-4",children:[Array.from({length:D(m)}).map((I,S)=>t.jsx("div",{},`empty-${S}`)),Array.from({length:$(m)}).map((I,S)=>{const L=S+1,z=H(L),R=new Date().toDateString()===new Date(m.getFullYear(),m.getMonth(),L).toDateString();let U="",W="text-[#7D8CA3]";return z?.type==="recorded"?(U="bg-[#FFB7B2] shadow-sm",W="text-white font-bold"):z?.type==="predicted"?(U="bg-[#FFEBEE] border-2 border-dashed border-[#FFB7B2]",W="text-[#E57373] font-bold"):R&&(U="bg-white shadow-sm",W="text-[#5C6B7F] font-bold"),t.jsx("div",{className:"flex flex-col items-center justify-center relative",children:t.jsx("div",{className:`
                          w-8 h-8 flex items-center justify-center rounded-full text-sm font-medium transition-all
                          ${U} ${W}
                       `,children:L})},L)})]}),t.jsxs("div",{className:"flex justify-center gap-6 mt-6",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-[#FFB7B2]"}),t.jsx("span",{className:"text-[10px] text-[#7D8CA3]",children:""})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-[#FFEBEE] border border-dashed border-[#FFB7B2]"}),t.jsx("span",{className:"text-[10px] text-[#7D8CA3]",children:""})]})]})]}),t.jsxs("div",{className:"relative bg-gradient-to-br from-[#FFD1DC] to-[#FFB7B2] p-8 rounded-[2.5rem] text-center overflow-hidden shadow-md",children:[t.jsx("div",{className:"absolute top-[-20%] right-[-20%] w-48 h-48 bg-white/20 rounded-full blur-[40px] pointer-events-none"}),t.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-32 h-32 bg-[#E57373]/10 rounded-full blur-[30px] pointer-events-none mix-blend-overlay"}),t.jsxs("div",{className:"relative z-10",children:[t.jsx("div",{className:"w-16 h-16 mx-auto bg-white/30 backdrop-blur-sm rounded-full flex items-center justify-center mb-4 border border-white/40",children:t.jsx(cv,{className:"w-8 h-8 text-white drop-shadow-sm"})}),E.type==="none"?t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-black text-white mb-1 tracking-wide drop-shadow-sm",children:""}),t.jsx("p",{className:"text-xs text-white/80 font-medium",children:""})]}):E.type==="period"?t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-black text-white mb-1 tracking-wide drop-shadow-sm",children:E.message}),t.jsx("p",{className:"text-xs text-white/90 font-bold bg-white/20 inline-block px-3 py-1 rounded-full backdrop-blur-sm",children:E.days>0?` ${E.days} `:""})]}):t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] font-bold text-white/70 uppercase tracking-widest mb-2",children:E.message}),t.jsxs("div",{className:"flex items-baseline justify-center gap-2 text-white drop-shadow-sm",children:[t.jsx("span",{className:"text-5xl font-black leading-none",children:E.days}),t.jsx("span",{className:"text-lg font-bold opacity-80",children:""})]})]}),t.jsx("button",{onClick:N,className:"mt-6 bg-white text-[#FFB7B2] px-6 py-2.5 rounded-2xl text-[10px] font-black uppercase tracking-widest active:scale-95 transition-transform shadow-sm",children:""})]})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-xs font-bold text-[#9FA8DA] uppercase tracking-widest mb-4 flex items-center gap-2 pl-2",children:[t.jsx(ur,{className:"w-4 h-4"})," "]}),t.jsx("div",{className:"space-y-3 pb-8",children:n.length===0?t.jsx("div",{className:"p-8 text-center bg-white/40 border-2 border-dashed border-[#E0E0E0] rounded-[1.5rem] text-xs text-[#9E9E9E]",children:""}):n.map(I=>t.jsxs("div",{className:"bg-white/40 backdrop-blur-sm border border-white/50 p-4 rounded-2xl flex items-center justify-between active:bg-white/60 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-2 h-10 bg-[#FFD1DC] rounded-full"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-base font-bold text-[#5C6B7F]",children:new Date(I.startDate).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"})}),t.jsx("div",{className:"text-[10px] text-[#FFB7B2] font-black uppercase tracking-wider bg-[#FFEBEE] px-2 py-0.5 rounded-md inline-block mt-1",children:""})]})]}),t.jsx("button",{onClick:()=>P(I.id),className:"w-10 h-10 rounded-xl flex items-center justify-center text-[#D6D3CC] active:bg-[#FFEBEE] active:text-[#E57373] transition-colors",children:t.jsx(Dn,{className:"w-5 h-5"})})]},I.id))})]})]}),t.jsx(Ie,{children:l&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6",children:[t.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>c(!1),className:"absolute inset-0 bg-[#5C6B7F]/20 backdrop-blur-sm"}),t.jsxs(xe.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:300,damping:25},className:"bg-[#FDFBF7]/95 backdrop-blur-xl w-full max-w-[320px] rounded-[2rem] border border-white/50 shadow-md overflow-hidden relative z-10",children:[t.jsxs("div",{className:"bg-white/40 border-b border-white/50 p-6 flex justify-between items-center",children:[t.jsx("span",{className:"text-lg font-black tracking-wide text-[#5C6B7F]",children:""}),t.jsx("button",{onClick:()=>c(!1),className:"bg-white/40 p-1 rounded-full text-[#7D8CA3] active:bg-white/60 transition-colors",children:t.jsx(ht,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"p-8",children:[t.jsx("label",{className:"block text-xs font-bold text-[#9FA8DA] mb-4 uppercase tracking-wider text-center",children:""}),t.jsx("input",{type:"date",value:f,onChange:I=>x(I.target.value),className:"w-full bg-white/50 border border-white/60 px-4 py-4 rounded-2xl text-center font-mono font-bold text-[#5C6B7F] focus:border-[#FFB7B2] focus:outline-none focus:ring-2 focus:ring-[#FFB7B2]/20 mb-8"}),t.jsx("button",{onClick:A,className:"w-full bg-[#FFB7B2] text-white py-4 text-xs font-bold uppercase tracking-widest active:scale-95 transition-all rounded-2xl shadow-sm",children:""})]})]})]})}),t.jsx(Ie,{children:d&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6",children:[t.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>u(!1),className:"absolute inset-0 bg-[#5C6B7F]/20 backdrop-blur-sm"}),t.jsxs(xe.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:300,damping:25},className:"bg-[#FDFBF7]/95 backdrop-blur-xl w-full max-w-[320px] rounded-[2rem] border border-white/50 shadow-md overflow-hidden relative z-10",children:[t.jsxs("div",{className:"bg-white/40 border-b border-white/50 p-6 flex justify-between items-center",children:[t.jsx("span",{className:"text-lg font-black tracking-wide text-[#5C6B7F]",children:""}),t.jsx("button",{onClick:()=>u(!1),className:"bg-white/40 p-1 rounded-full text-[#7D8CA3] active:bg-white/60 transition-colors",children:t.jsx(ht,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"p-8 space-y-8",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"flex items-center justify-between text-xs font-bold text-[#7D8CA3] mb-3 uppercase tracking-wider",children:[t.jsx("span",{children:""}),t.jsxs("span",{className:"text-[#FFB7B2] bg-[#FFEBEE] px-2 py-1 rounded-md",children:[b.cycleLength,""]})]}),t.jsx("input",{type:"range",min:"20",max:"45",value:b.cycleLength,onChange:I=>y({...b,cycleLength:parseInt(I.target.value)}),className:"w-full accent-[#FFB7B2] h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"flex items-center justify-between text-xs font-bold text-[#7D8CA3] mb-3 uppercase tracking-wider",children:[t.jsx("span",{children:""}),t.jsxs("span",{className:"text-[#FFB7B2] bg-[#FFEBEE] px-2 py-1 rounded-md",children:[b.periodLength,""]})]}),t.jsx("input",{type:"range",min:"2",max:"10",value:b.periodLength,onChange:I=>y({...b,periodLength:parseInt(I.target.value)}),className:"w-full accent-[#FFB7B2] h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),t.jsx("div",{className:"pt-2",children:t.jsxs("button",{onClick:B,className:"w-full bg-[#5C6B7F] text-white py-4 text-xs font-bold uppercase tracking-widest active:bg-[#4A5568] transition-colors flex items-center justify-center gap-2 rounded-2xl shadow-sm",children:[t.jsx(Ei,{className:"w-4 h-4"}),""]})})]})]})]})}),t.jsx(Ie,{children:g&&g.show&&t.jsx("div",{className:"fixed top-[90px] inset-x-0 z-[100] flex justify-center pointer-events-none",children:t.jsxs(xe.div,{initial:{scale:.9,opacity:0,y:-10},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},className:"mx-auto w-fit flex items-center gap-2 px-4 py-3 pointer-events-auto",style:{background:"rgba(253, 251, 247, 0.85)",backdropFilter:"blur(12px)",border:"1px solid rgba(255, 255, 255, 0.6)",borderRadius:"20px",color:"#5C6B7F",boxShadow:"0 10px 40px -10px rgba(92, 107, 127, 0.15)",fontSize:"13px",fontWeight:"bold"},children:[t.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-white ${g.type==="success"?"bg-[#FFB7B2]":"bg-[#E57373]"}`,children:g.type==="success"?t.jsx(wt,{className:"w-3 h-3",strokeWidth:3}):t.jsx(ht,{className:"w-3 h-3",strokeWidth:3})}),t.jsx("span",{children:g.message})]})})})]})}function cE({onBack:e}){const[n,s]=j.useState([]),[a,i]=j.useState(!1),[l,c]=j.useState(null),[d,u]=j.useState(""),[m,p]=j.useState(""),[f,x]=j.useState("treating"),[b,y]=j.useState(""),[g,k]=j.useState(null),w=(T,H)=>{k({show:!0,type:T,message:H}),setTimeout(()=>k(null),2e3)};j.useEffect(()=>{C()},[]);const C=async()=>{try{const T=await ae.get(te.HEALTH,"diagnosis_logs");T&&s(T.sort((H,K)=>new Date(K.startDate).getTime()-new Date(H.startDate).getTime()))}catch(T){console.error("Failed to load diagnosis logs",T)}},N=()=>{u(""),p(""),x("treating");const T=new Date().toISOString().split("T")[0];y(T),c(null)},A=()=>{N(),i(!0)},P=T=>{u(T.illnessName),p(T.symptoms),x(T.status),y(T.startDate),c(T),i(!0)},B=async()=>{if(!d.trim()){w("error","");return}if(!b){w("error","");return}try{let T=[...n];l?(T=T.map(H=>H.id===l.id?{...H,illnessName:d,symptoms:m,status:f,startDate:b,endDate:f==="recovered"&&!H.endDate?new Date().toISOString().split("T")[0]:f==="treating"?void 0:H.endDate}:H),w("success","")):(T=[{id:Date.now().toString(),illnessName:d,symptoms:m,status:f,startDate:b,createdAt:new Date().toISOString()},...T],w("success","")),await ae.set(te.HEALTH,"diagnosis_logs",T),s(T.sort((H,K)=>new Date(K.startDate).getTime()-new Date(H.startDate).getTime())),i(!1),N()}catch{w("error","")}},$=async T=>{if(confirm(""))try{const H=n.filter(K=>K.id!==T);await ae.set(te.HEALTH,"diagnosis_logs",H),s(H),w("success","")}catch{w("error","")}},D=T=>{const H=new Date(T);return`${H.getFullYear()}${H.getMonth()+1}${H.getDate()}`};return t.jsxs("div",{className:"flex flex-col h-full",children:[t.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10",children:[t.jsx("button",{onClick:e,className:"w-10 h-10 bg-white/40 backdrop-blur-md border border-white/40 rounded-2xl flex items-center justify-center text-[#6B7C93] transition-transform active:scale-90 active:bg-white/60",children:t.jsx(an,{className:"w-5 h-5",strokeWidth:2.5})}),t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("span",{className:"text-[11px] font-bold text-[#9FA8DA] tracking-[0.2em] uppercase mb-0.5",children:"Medical Records"}),t.jsx("h1",{className:"text-lg font-black text-[#5C6B7F] tracking-wide",children:""})]}),t.jsx("button",{onClick:A,className:"w-10 h-10 bg-[#AEC6CF] text-white rounded-2xl flex items-center justify-center shadow-md shadow-[#AEC6CF]/30 transition-transform active:scale-90",children:t.jsx(is,{className:"w-5 h-5",strokeWidth:2.5})})]}),t.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:n.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-60",children:[t.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:t.jsx(pv,{className:"w-10 h-10 text-gray-300"})}),t.jsx("p",{className:"text-sm font-medium text-gray-400",children:""})]}):t.jsx("div",{className:"space-y-4",children:n.map(T=>t.jsxs("div",{onClick:()=>P(T),className:`group relative bg-white/60 border border-white/50 p-5 rounded-[2rem] text-left transition-transform active:scale-[0.98] overflow-hidden ${T.status==="recovered"?"opacity-70 grayscale-[0.5]":""}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-black text-[#5C6B7F] mb-1",children:T.illnessName}),t.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-lg text-[10px] font-bold uppercase tracking-wider ${T.status==="treating"?"bg-[#FFEBEE] text-[#E57373]":"bg-[#E0F2F1] text-[#4DB6AC]"}`,children:T.status==="treating"?"":""})]}),t.jsx("button",{onClick:H=>{H.stopPropagation(),$(T.id)},className:"p-2 rounded-xl text-[#B0BEC5] hover:bg-red-50 hover:text-red-400 transition-colors",children:t.jsx(Dn,{className:"w-4 h-4"})})]}),T.symptoms&&t.jsx("p",{className:"text-xs text-[#7D8CA3] mb-4 line-clamp-2 bg-white/30 p-3 rounded-xl",children:T.symptoms}),t.jsx("div",{className:"flex items-center gap-4 text-[10px] text-[#9FA8DA] font-bold tracking-wide",children:t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(ur,{className:"w-3 h-3"}),D(T.startDate)]})})]},T.id))})}),t.jsx(Ie,{children:a&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center sm:p-6",children:[t.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>i(!1),className:"absolute inset-0 bg-[#5C6B7F]/20 backdrop-blur-sm"}),t.jsxs(xe.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",stiffness:300,damping:30},className:"bg-[#FDFBF7] w-full max-w-[400px] h-[85vh] sm:h-auto sm:rounded-[2.5rem] rounded-t-[2.5rem] border border-white/50 shadow-2xl flex flex-col relative z-10",children:[t.jsxs("div",{className:"p-6 pb-2 flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-black text-[#5C6B7F]",children:l?"":""}),t.jsx("p",{className:"text-xs text-[#9FA8DA] mt-0.5",children:""})]}),t.jsx("button",{onClick:()=>i(!1),className:"w-8 h-8 rounded-full bg-black/5 flex items-center justify-center text-[#7D8CA3]",children:t.jsx(ht,{className:"w-4 h-4"})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-bold text-[#7D8CA3] uppercase tracking-wider pl-1",children:""}),t.jsx("input",{type:"text",placeholder:"",value:d,onChange:T=>u(T.target.value),className:"w-full bg-white border border-[#E0E0E0] p-4 rounded-2xl text-sm font-bold text-[#5C6B7F] placeholder:text-[#D1D5DB] focus:border-[#AEC6CF] focus:outline-none focus:ring-2 focus:ring-[#AEC6CF]/20 transition-all"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-bold text-[#7D8CA3] uppercase tracking-wider pl-1",children:""}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"date",value:b,onChange:T=>y(T.target.value),className:"w-full bg-white border border-[#E0E0E0] p-4 rounded-2xl text-sm font-bold text-[#5C6B7F] placeholder:text-[#D1D5DB] focus:border-[#AEC6CF] focus:outline-none focus:ring-2 focus:ring-[#AEC6CF]/20 transition-all appearance-none"}),t.jsx(ur,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 text-[#B0BEC5] pointer-events-none"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-bold text-[#7D8CA3] uppercase tracking-wider pl-1",children:""}),t.jsx("textarea",{placeholder:"...",value:m,onChange:T=>p(T.target.value),rows:4,className:"w-full bg-white border border-[#E0E0E0] p-4 rounded-2xl text-sm font-medium text-[#5C6B7F] placeholder:text-[#D1D5DB] focus:border-[#AEC6CF] focus:outline-none focus:ring-2 focus:ring-[#AEC6CF]/20 transition-all resize-none"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-bold text-[#7D8CA3] uppercase tracking-wider pl-1",children:""}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("button",{type:"button",onClick:()=>x("treating"),className:`p-4 rounded-2xl flex items-center justify-center gap-2 transition-all active:scale-[0.98] ${f==="treating"?"bg-[#FFEBEE] text-[#E57373] ring-1 ring-[#E57373]/20 shadow-inner":"bg-white border border-[#E0E0E0] text-[#B0BEC5]"}`,children:[t.jsx(np,{className:"w-4 h-4"}),t.jsx("span",{className:"text-xs font-bold",children:""})]}),t.jsxs("button",{type:"button",onClick:()=>x("recovered"),className:`p-4 rounded-2xl flex items-center justify-center gap-2 transition-all active:scale-[0.98] ${f==="recovered"?"bg-[#E0F2F1] text-[#4DB6AC] ring-1 ring-[#4DB6AC]/20 shadow-inner":"bg-white border border-[#E0E0E0] text-[#B0BEC5]"}`,children:[t.jsx(wt,{className:"w-4 h-4"}),t.jsx("span",{className:"text-xs font-bold",children:""})]})]})]})]}),t.jsx("div",{className:"p-6 border-t border-gray-100 bg-white/50 backdrop-blur-sm rounded-b-[2.5rem]",children:t.jsxs("button",{onClick:B,className:"w-full bg-[#AEC6CF] text-white py-4 rounded-2xl font-bold text-sm tracking-widest uppercase shadow-lg shadow-[#AEC6CF]/30 active:scale-[0.98] transition-transform flex items-center justify-center gap-2",children:[t.jsx(wt,{className:"w-5 h-5"}),""]})})]})]})}),t.jsx(Ie,{children:g&&g.show&&t.jsx("div",{className:"fixed top-[90px] inset-x-0 z-[100] flex justify-center pointer-events-none",children:t.jsxs(xe.div,{initial:{scale:.9,opacity:0,y:-10},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},className:"mx-auto w-fit flex items-center gap-2 px-4 py-3 pointer-events-auto",style:{background:"rgba(253, 251, 247, 0.85)",backdropFilter:"blur(12px)",border:"1px solid rgba(255, 255, 255, 0.6)",borderRadius:"20px",color:"#5C6B7F",boxShadow:"0 10px 40px -10px rgba(92, 107, 127, 0.15)",fontSize:"13px",fontWeight:"bold"},children:[t.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-white ${g.type==="success"?"bg-[#8FBC8F]":"bg-[#E57373]"}`,children:g.type==="success"?t.jsx(wt,{className:"w-3 h-3",strokeWidth:3}):t.jsx(ht,{className:"w-3 h-3",strokeWidth:3})}),t.jsx("span",{children:g.message})]})})})]})}function Xg(){return t.jsxs("div",{className:"absolute inset-0 opacity-60 pointer-events-none overflow-hidden",children:[t.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[70%] h-[70%] bg-[#FFD1DC] rounded-full mix-blend-multiply filter blur-[90px]"}),t.jsx("div",{className:"absolute top-[10%] right-[-10%] w-[60%] h-[60%] bg-[#C1E1C1] rounded-full mix-blend-multiply filter blur-[90px]"}),t.jsx("div",{className:"absolute bottom-[-20%] left-[20%] w-[80%] h-[80%] bg-[#AEC6CF] rounded-full mix-blend-multiply filter blur-[90px]"}),t.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[60%] h-[60%] bg-[#E6E6FA] rounded-full mix-blend-multiply filter blur-[90px]"})]})}const Jg={enter:e=>({x:e>0?"100%":"-25%",opacity:0}),center:{x:0,opacity:1},exit:e=>({x:e<0?"100%":"-25%",opacity:0})};function dE({onClose:e}){const[n,s]=j.useState("dashboard"),[a,i]=j.useState(0),l=j.useRef(!0);j.useEffect(()=>{const u=setTimeout(()=>{l.current=!1},500);return()=>clearTimeout(u)},[]);const c=u=>{i(1),s(u)},d=()=>{i(-1),s("dashboard")};return t.jsxs("div",{className:"fixed inset-0 z-50 bg-[#FDFBF7] font-['Source_Han_Sans_CN_VF',sans-serif] overflow-hidden",children:[t.jsx(Xg,{}),t.jsx("div",{className:"relative z-10 h-full w-full",children:t.jsx(Ie,{initial:!1,custom:a,children:n==="dashboard"?t.jsx(xe.div,{custom:a,variants:Jg,initial:l.current?"center":"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"absolute inset-0 w-full h-full",children:t.jsx(iE,{onClose:e,onNavigate:c})},"dashboard"):t.jsxs(xe.div,{custom:a,variants:Jg,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"absolute inset-0 w-full h-full bg-[#FDFBF7] will-change-transform",children:[t.jsx(Xg,{}),t.jsxs("div",{className:"relative z-10 h-full",children:[n==="sleep"&&t.jsx(oE,{onBack:d}),n==="cycle"&&t.jsx(lE,{onBack:d}),n==="diagnosis"&&t.jsx(cE,{onBack:d})]})]},n)})})]})}const uE={idle:"",loading:"",success:"",error:""};function fE({state:e,onDismiss:n,message:s}){return j.useEffect(()=>{if(e==="success"||e==="error"){const a=setTimeout(n,2e3);return()=>clearTimeout(a)}},[e,n]),e==="idle"?null:t.jsx(Ie,{children:t.jsx("div",{className:"fixed bottom-32 left-0 right-0 flex justify-center z-[100] pointer-events-none",children:t.jsxs(xe.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{type:"spring",stiffness:300,damping:30},className:"bg-[#4B4B4B] text-white/90 px-6 py-2.5 rounded-full text-sm tracking-wide font-medium shadow-xl flex items-center gap-2.5 backdrop-blur-sm",children:[e==="loading"&&t.jsx(xe.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-3.5 h-3.5 border-2 border-white/20 border-t-white/90 rounded-full"}),t.jsx("span",{children:s||uE[e]})]})})})}const hE=[{id:"recommended",label:""},{id:"food",label:""},{id:"charm",label:""},{id:"stationery",label:""},{id:"furniture",label:""},{id:"attire",label:""}],sh=[{id:"f1",category:"food",name:"",price:800,description:""},{id:"f2",category:"food",name:"",price:150,description:""},{id:"f3",category:"food",name:"",price:450,description:""},{id:"f4",category:"food",name:"",price:1200,description:""},{id:"f5",category:"food",name:"",price:300,description:""},{id:"f6",category:"food",name:"",price:500,description:""},{id:"c1",category:"charm",name:"",price:500,description:""},{id:"c2",category:"charm",name:"",price:1e3,description:""},{id:"c3",category:"charm",name:"",price:600,description:""},{id:"c4",category:"charm",name:"",price:300,description:""},{id:"st1",category:"stationery",name:"",price:100,description:""},{id:"st2",category:"stationery",name:"",price:450,description:""},{id:"st3",category:"stationery",name:"",price:600,description:""},{id:"st4",category:"stationery",name:"",price:300,description:""},{id:"d1",category:"furniture",name:"",price:500,description:""},{id:"d2",category:"furniture",name:"",price:1200,description:""},{id:"d3",category:"furniture",name:"",price:800,description:""},{id:"d4",category:"furniture",name:"",price:400,description:""},{id:"d5",category:"furniture",name:"",price:2500,description:""},{id:"a1",category:"attire",name:"",price:5e3,description:""},{id:"a2",category:"attire",name:"",price:800,description:""}],pE=["f1","c2","d5","f2","a1","st3"];function mE({onAddToCart:e}){const[n,s]=j.useState("recommended"),[a,i]=j.useState(""),[l,c]=j.useState([]),[d,u]=j.useState(!1),[m,p]=j.useState("idle"),[f,x]=j.useState(void 0);j.useEffect(()=>{(async()=>{const N=await ae.get(te.MISC,"shop_products");N&&N.length>0?c(N):(c(sh),ae.set(te.MISC,"shop_products",sh))})()},[]);const b=j.useCallback(C=>{const N=C.map(A=>({...A,category:A.category||"recommended"}));c(A=>{const P=N[0].category;let B=[...A];return P==="recommended"?(B=A.filter($=>$.category!=="recommended"),B=[...N,...B]):(B=A.filter($=>$.category!==P),B=[...N,...B]),ae.set(te.MISC,"shop_products",B),B}),u(!1),x(void 0),p("success")},[]);j.useEffect(()=>{const C=async A=>{if(A.data?.type==="AI_TASK_COMPLETED"&&A.data.payload?.taskType==="shop_generation"){const{shopItems:P}=A.data.payload.result;P&&P.length>0&&b(P)}else A.data?.type==="AI_TASK_FAILED"&&A.data.payload?.taskType==="shop_generation"&&(u(!1),x(void 0),p("error"))},N=async A=>{const P=A,{taskId:B,task:$}=P.detail;if($.type==="shop_generation"){console.log("[ShopStore] Service Worker :",B);try{const{payload:D}=$,T=await fetch(`${D.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${D.apiKey}`},body:JSON.stringify({model:D.modelName,messages:[{role:"system",content:D.systemPrompt},{role:"user",content:D.userPrompt}],temperature:D.temperature,max_tokens:D.maxTokens})});if(!T.ok)throw new Error(`API Error: ${T.status}`);const K=(await T.json()).choices?.[0]?.message?.content||"";if(!K)throw new Error("AI");let E=[];try{let I=K;const S=K.match(/```(?:json)?\s*(\{[\s\S]*?\})\s*```/);if(S)I=S[1];else{const z=K.indexOf("{"),R=K.lastIndexOf("}");z!==-1&&R!==-1&&(I=K.substring(z,R+1))}E=JSON.parse(I).items||[],E=E.map(z=>({...z,id:z.id||`gen-${Date.now()}-${Math.random().toString(36).substr(2,5)}`,category:z.category||"recommended"}))}catch(I){throw console.error("JSON Parse Failed",I),new Error("")}if(E.length>0)b(E);else throw new Error("")}catch(D){console.error("[ShopStore] Fallback failed",D),u(!1),x(void 0),p("error")}}};return"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",C),window.addEventListener("ai-task-needs-fallback",N),()=>{"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener("message",C),window.removeEventListener("ai-task-needs-fallback",N)}},[b]);const y=async()=>{if(!d){u(!0),x(void 0),p("loading");try{await Zg({category:n})}catch(C){console.error(C),u(!1),x(void 0),p("error")}}},g=async()=>{if(!(!a.trim()||d)){u(!0),x(`${a}...`),p("loading"),s("recommended");try{await Zg({category:"recommended",keyword:a.trim()}),i("")}catch(C){console.error(C),u(!1),x(void 0),p("error")}}},k=C=>{e?e(C):(x(""),p("success"))},w=l.filter(C=>a&&!C.name.toLowerCase().includes(a.toLowerCase())?!1:n==="recommended"?l.some(A=>A.category==="recommended")?C.category==="recommended":pE.includes(C.id):C.category===n);return t.jsxs("div",{className:"h-full flex flex-col overflow-hidden bg-[#FCFCFA] relative",children:[t.jsx("div",{className:"px-6 pb-2",children:t.jsxs("div",{className:"relative border-b border-black/5 focus-within:border-[#C93A40] transition-colors",children:[t.jsx("input",{type:"text",placeholder:"...",value:a,onChange:C=>i(C.target.value),onKeyDown:C=>{C.key==="Enter"&&g()},className:"w-full bg-transparent py-4 pl-0 pr-8 text-sm placeholder:text-[#9CA3AF] focus:outline-none text-[#2D2D2D]"}),t.jsx("button",{onClick:g,className:"absolute right-0 top-1/2 -translate-y-1/2 p-2 hover:bg-black/5 rounded-full transition-colors active:scale-90",children:t.jsx(_a,{className:"w-4 h-4 text-[#9CA3AF]",strokeWidth:1.5})})]})}),t.jsxs("div",{className:"pt-4 pb-2 flex items-center pr-4",children:[t.jsx("div",{className:"flex-1 flex gap-6 overflow-x-auto px-6 pb-2 no-scrollbar",children:hE.map(C=>t.jsxs("button",{onClick:()=>s(C.id),className:`whitespace-nowrap text-sm transition-colors relative flex flex-col items-center gap-1 pb-1
                        ${n===C.id?"font-medium text-[#2D2D2D]":"text-[#2D2D2D]/40 hover:text-[#2D2D2D]/70"}`,children:[C.label,n===C.id&&t.jsx(xe.div,{layoutId:"category-indicator",className:"absolute bottom-0 w-1 h-1 rounded-full bg-[#C93A40]"})]},C.id))}),t.jsx("button",{onClick:y,disabled:d,className:`p-2 rounded-full transition-all ${d?"opacity-50 cursor-not-allowed":"hover:bg-black/5 active:scale-90"}`,children:t.jsx(k8,{className:`w-4 h-4 text-[#9CA3AF] ${d?"animate-spin":""}`,strokeWidth:1.5})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto px-6 pb-32 no-scrollbar",children:[t.jsx(Ie,{children:n==="recommended"&&!a&&t.jsx(xe.div,{initial:{opacity:0,height:0,marginBottom:0},animate:{opacity:1,height:"auto",marginBottom:32},exit:{opacity:0,height:0,marginBottom:0},className:"overflow-hidden",children:t.jsxs("div",{className:"pt-4",children:[t.jsx("h2",{className:"text-3xl font-light text-[#2D2D2D] mb-1",children:""}),t.jsx("h2",{className:"text-3xl font-bold text-[#2D2D2D]",children:""}),t.jsx("p",{className:"text-xs text-[#9CA3AF] mt-2 tracking-widest",children:"LIMITED TIME OFFER"}),t.jsxs("div",{className:"mt-6 w-full aspect-[2.5/1] bg-[#F3F1EB] rounded-lg relative overflow-hidden flex items-center justify-center border border-black/5",children:[t.jsx("span",{className:"text-6xl opacity-20 filter blur-sm",children:""}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx("span",{className:"text-sm font-medium tracking-widest text-[#555]",children:"  "})})]})]})})}),t.jsx(xe.div,{layout:!0,className:"grid grid-cols-2 gap-x-4 gap-y-6",children:t.jsx(Ie,{mode:"popLayout",children:w.map(C=>t.jsxs(xe.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},whileTap:{scale:.98},className:"group cursor-pointer",onClick:()=>k({name:C.name,price:C.price,description:C.description}),children:[t.jsx("div",{className:"aspect-square bg-[#F5F5F0] rounded-xl mb-3 flex items-center justify-center p-4 group-hover:bg-[#EAEAE5] transition-colors relative overflow-hidden",children:t.jsx("p",{className:"text-xs text-[#9CA3AF] text-center leading-relaxed font-medium group-hover:text-[#555] transition-colors line-clamp-4",children:C.description})}),t.jsxs("div",{className:"flex justify-between items-start pl-1",children:[t.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[t.jsx("h3",{className:"text-sm font-medium text-[#2D2D2D] truncate",children:C.name}),t.jsxs("div",{className:"flex items-baseline gap-0.5 mt-1",children:[t.jsx("span",{className:"text-xs font-bold text-[#C93A40]",children:C.price}),t.jsx("span",{className:"text-[10px] text-[#9CA3AF]",children:""})]})]}),t.jsx("button",{onClick:N=>{N.stopPropagation(),k({name:C.name,price:C.price,description:C.description})},className:"w-7 h-7 flex items-center justify-center rounded-full bg-white border border-black/5 shadow-sm text-[#2D2D2D] hover:bg-[#2D2D2D] hover:text-white transition-all active:scale-90",children:t.jsx(is,{className:"w-3.5 h-3.5",strokeWidth:1.5})})]})]},C.id))})}),w.length===0&&t.jsx("div",{className:"py-20 text-center",children:t.jsx("span",{className:"text-sm text-[#9CA3AF]",children:""})})]}),t.jsx(fE,{state:m,message:f,onDismiss:()=>p("idle")})]})}function xE({cartItems:e=[],onRemove:n,onBulkRemove:s,onAdd:a,onCheckout:i}){const[l,c]=j.useState(!1),[d,u]=j.useState(new Set),m=e.reduce((y,g)=>y+g.price,0),p=j.useMemo(()=>{const y=new Map;return e.forEach(g=>{const k=`${g.name}-${g.price}`;if(!y.has(k))y.set(k,{name:g.name,price:g.price,ids:[g.id],count:1});else{const w=y.get(k);w.ids.push(g.id),w.count+=1}}),Array.from(y.values())},[e]),f=y=>{const g=new Set(d);g.has(y)?g.delete(y):g.add(y),u(g)},x=()=>{const y=[];p.forEach(g=>{const k=`${g.name}-${g.price}`;d.has(k)&&y.push(...g.ids)}),y.length>0&&(s?.(y),u(new Set),y.length===e.length&&c(!1))},b=()=>{if(d.size===p.length)u(new Set);else{const y=new Set;p.forEach(g=>{y.add(`${g.name}-${g.price}`)}),u(y)}};return e.length===0?t.jsxs("div",{className:"h-full flex flex-col relative bg-[#FCFCFA]",children:[t.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 -mt-20",children:[t.jsx(lp,{className:"w-8 h-8 text-[#E5E5E5] mb-4",strokeWidth:1}),t.jsx("span",{className:"text-xs text-[#9CA3AF] tracking-widest font-light",children:""})]}),t.jsxs("div",{className:"absolute bottom-4 left-8 right-8",children:[t.jsxs("div",{className:"flex justify-between items-end mb-6 px-1",children:[t.jsx("span",{className:"text-[10px] text-[#9CA3AF] tracking-widest uppercase",children:"Total"}),t.jsx("span",{className:"text-xl font-light font-mono text-[#2D2D2D]",children:"0"})]}),t.jsx("button",{disabled:!0,className:"w-full h-12 rounded-full bg-[#F3F3F3] text-[#A3A3A3] text-xs font-medium tracking-widest cursor-not-allowed hover:bg-[#EDEDED] transition-colors flex items-center justify-center",children:""})]})]}):t.jsxs("div",{className:"h-full flex flex-col relative bg-[#FCFCFA]",children:[t.jsxs("div",{className:"flex justify-between items-center px-6 py-2 shrink-0",children:[t.jsx("div",{className:"h-8 flex items-center",children:l&&t.jsx("button",{onClick:b,className:"text-xs text-[#2D2D2D] font-medium tracking-wide hover:opacity-70 transition-opacity",children:d.size===p.length?"":""})}),t.jsx("button",{onClick:()=>{c(!l),u(new Set)},className:"text-xs text-[#9CA3AF] hover:text-[#2D2D2D] transition-colors tracking-wide font-medium",children:l?"":""})]}),t.jsx("div",{className:"flex-1 overflow-y-auto px-6 pt-0 pb-48 no-scrollbar",children:t.jsx(Ie,{mode:"popLayout",initial:!1,children:p.map(y=>{const g=`${y.name}-${y.price}`,k=d.has(g);return t.jsxs(xe.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-20},onClick:()=>{l&&f(g)},className:`flex items-center gap-4 py-4 border-b border-black/5 ${l?"cursor-pointer":""}`,children:[t.jsx(Ie,{mode:"wait",children:l&&t.jsx(xe.div,{initial:{width:0,opacity:0,marginRight:0},animate:{width:"auto",opacity:1,marginRight:0},exit:{width:0,opacity:0,marginRight:0},className:"flex items-center justify-center",children:k?t.jsx(r_,{className:"w-5 h-5 text-[#C93A40] fill-[#C93A40]/10"}):t.jsx(i_,{className:"w-5 h-5 text-[#E5E5E5]"})})}),t.jsx("div",{className:"w-16 h-16 bg-[#F5F5F0] rounded-lg flex items-center justify-center text-[#9CA3AF] flex-shrink-0 relative border border-black/5",children:t.jsx(Sa,{className:"w-6 h-6",strokeWidth:1.5})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"text-sm font-medium text-[#2D2D2D] mb-1 truncate",children:y.name}),t.jsxs("div",{className:"flex items-baseline gap-0.5",children:[t.jsx("span",{className:"text-xs font-bold text-[#C93A40]",children:y.price}),t.jsx("span",{className:"text-[10px] text-[#9CA3AF]",children:""})]})]}),t.jsx("div",{className:"flex items-center",children:l?t.jsxs("span",{className:"text-sm font-mono text-[#9CA3AF] px-2",children:["x",y.count]}):t.jsxs("div",{className:"flex items-center gap-3 bg-[#F5F5F0] rounded-full p-1 px-1",children:[t.jsx("button",{onClick:w=>{w.stopPropagation();const C=y.ids[y.ids.length-1];n?.(C)},className:"w-6 h-6 flex items-center justify-center rounded-full bg-white shadow-sm text-[#2D2D2D] hover:text-[#C93A40] active:scale-90 transition-all",children:y.count===0?t.jsx(Dn,{className:"w-3 h-3",strokeWidth:2}):t.jsx(ip,{className:"w-3 h-3",strokeWidth:2})}),t.jsx("span",{className:"text-xs font-mono font-medium text-[#2D2D2D] w-4 text-center",children:y.count}),t.jsx("button",{onClick:w=>{w.stopPropagation(),a?.({name:y.name,price:y.price})},className:"w-6 h-6 flex items-center justify-center rounded-full bg-[#2D2D2D] text-white active:scale-90 transition-all shadow-sm",children:t.jsx(is,{className:"w-3 h-3",strokeWidth:2})})]})})]},g)})})}),t.jsx("div",{className:"absolute bottom-4 left-8 right-8 bg-[#FCFCFA] pt-4 border-t border-transparent",children:l?t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsx("div",{className:"h-6"})," ",t.jsxs("button",{onClick:x,disabled:d.size===0,className:`w-full h-12 rounded-full text-xs font-medium tracking-widest transition-all flex items-center justify-center shadow-lg
                        ${d.size>0?"bg-[#C93A40] text-white hover:bg-[#B02E34] shadow-[#C93A40]/20":"bg-[#F3F3F3] text-[#A3A3A3] cursor-not-allowed shadow-none"}`,children:[" (",d.size,")"]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex justify-between items-end mb-6 px-1",children:[t.jsx("span",{className:"text-[10px] text-[#9CA3AF] tracking-widest uppercase",children:"Total"}),t.jsxs("div",{className:"flex items-baseline gap-1",children:[t.jsx("span",{className:"text-xl font-light font-mono text-[#2D2D2D]",children:m}),t.jsx("span",{className:"text-[10px] text-[#9CA3AF]",children:""})]})]}),t.jsx("button",{onClick:i,className:"w-full h-12 rounded-full bg-[#2D2D2D] text-white text-xs font-medium tracking-widest hover:bg-black transition-colors flex items-center justify-center shadow-lg shadow-black/5",children:""})]})})]})}function gE({cartItems:e,onBack:n,onComplete:s}){const[a,i]=j.useState([]),[l,c]=j.useState("saniwa"),[d,u]=j.useState({}),[m,p]=j.useState(!1),f=e.reduce((g,k)=>g+k.price,0),x=e.reduce((g,k)=>{const w=`${k.name}-${k.price}`;return g[w]||(g[w]={name:k.name,price:k.price,count:0}),g[w].count+=1,g},{}),b=Object.values(x);j.useEffect(()=>{(async()=>{try{const[k,w,C]=await Promise.all([ae.get(te.CHARACTERS,"characters"),ae.get(te.USER_DATA,"userData"),ae.get(te.MISC,"organizations")]);let N="",A=null;if(C){let $=null;Array.isArray(C)?($=C.find(D=>D.name&&D.name.includes("")||D.role==="saniwa"||D.isUser===!0),!$&&C.length>0&&C[0].name&&C[0].country&&($=C[0])):typeof C=="object"&&($=C),$&&($.name&&(N=$.name),$.avatar&&(A=$.avatar))}if(N===""&&w?.saniwaName?N=w.saniwaName:N===""&&w?.name&&(N=w.name),!A&&w?.avatar&&(A=w.avatar),!A){const $=await xt("avatar");$&&(A=$)}const P=[{id:"saniwa",name:N,avatar:A,isUser:!0},...(k||[]).map($=>({id:$.id,name:$.name||$.kanjiName||"",avatar:$.avatar}))];i(P);const B={};for(const $ of P)if($.avatar)if($.avatar.startsWith("data:")||$.avatar.startsWith("http")||$.avatar.startsWith("blob:"))B[$.id]=$.avatar;else{const D=await xt($.avatar);D&&(B[$.id]=D)}u(B)}catch(k){console.error("Failed to load recipients",k)}})()},[]);const y=()=>{const g=a.find(k=>k.id===l);return g?g.name:""};return t.jsxs("div",{className:"h-full flex flex-col bg-[#F9F9F7] relative overflow-hidden font-['Source_Han_Sans_CN_VF:Regular',sans-serif]",children:[t.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-bl from-[#E5E5E0] to-transparent opacity-40 rounded-bl-full -mr-16 -mt-16 pointer-events-none"}),t.jsxs("div",{className:"px-6 py-5 flex items-center justify-between relative z-10",children:[t.jsx("button",{onClick:n,className:"w-10 h-10 -ml-2 rounded-full flex items-center justify-center hover:bg-black/5 transition-colors group",children:t.jsx(Zf,{className:"w-5 h-5 text-[#2D2D2D] group-hover:-translate-x-0.5 transition-transform"})}),t.jsx("span",{className:"text-sm font-medium tracking-widest text-[#2D2D2D] uppercase opacity-60",children:"Checkout"})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar pb-32",children:[t.jsxs("div",{className:"px-8 mb-8",children:[t.jsx("h1",{className:"text-3xl font-light text-[#2D2D2D] mb-2 tracking-wide font-serif",children:""}),t.jsx("p",{className:"text-xs text-[#9CA3AF] tracking-widest uppercase",children:"Payment Confirmation"})]}),t.jsxs("div",{className:"mb-10 px-8 relative z-30",children:[t.jsx("label",{className:"text-[10px] text-[#9CA3AF] tracking-[0.2em] uppercase font-medium mb-3 block",children:""}),t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>p(!m),className:"w-full bg-white rounded-xl h-16 flex items-center justify-between px-4 border border-black/5 shadow-sm hover:border-black/10 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border border-black/5 bg-[#F5F5F0]",children:(()=>{const g=a.find(k=>k.id===l);return g?g.isUser&&!d[g.id]?t.jsx("div",{className:"w-full h-full flex items-center justify-center text-[#9CA3AF]",children:t.jsx(An,{className:"w-5 h-5"})}):d[g.id]?t.jsx("img",{src:d[g.id],alt:g.name,className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full flex items-center justify-center text-[#C0C0C0]",children:t.jsx("span",{className:"text-xs",children:g.name[0]})}):null})()}),t.jsx("span",{className:"text-sm font-medium text-[#2D2D2D]",children:y()})]}),t.jsx(ba,{className:`w-4 h-4 text-[#9CA3AF] transition-transform duration-300 ${m?"rotate-180":""}`})]}),t.jsx(Ie,{children:m&&t.jsx(xe.div,{initial:{opacity:0,y:10,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:10,height:0},className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-xl border border-black/5 overflow-hidden max-h-64 overflow-y-auto no-scrollbar z-50",children:a.map(g=>t.jsxs("button",{onClick:()=>{c(g.id),p(!1)},className:`w-full flex items-center justify-between px-4 py-3 hover:bg-[#F9F9F7] transition-colors border-b border-black/5 last:border-0
                                        ${l===g.id?"bg-[#F9F9F7]":""}
                                    `,children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden border border-black/5 bg-[#F5F5F0]",children:g.isUser&&!d[g.id]?t.jsx("div",{className:"w-full h-full flex items-center justify-center text-[#9CA3AF]",children:t.jsx(An,{className:"w-4 h-4"})}):d[g.id]?t.jsx("img",{src:d[g.id],alt:g.name,className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full flex items-center justify-center text-[#C0C0C0]",children:t.jsx("span",{className:"text-[10px]",children:g.name[0]})})}),t.jsx("span",{className:`text-sm ${l===g.id?"font-medium text-[#C93A40]":"text-[#2D2D2D]"}`,children:g.name})]}),l===g.id&&t.jsx(wt,{className:"w-4 h-4 text-[#C93A40]"})]},g.id))})})]})]}),t.jsx("div",{className:"px-6",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl shadow-[#000000]/[0.03] overflow-hidden border border-black/5 relative",children:[t.jsx("div",{className:"h-1.5 bg-[repeating-linear-gradient(45deg,#F5F5F0,#F5F5F0_10px,#FFFFFF_10px,#FFFFFF_20px)] opacity-50"}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("p",{className:"text-[10px] text-[#9CA3AF] tracking-[0.2em] uppercase mb-4",children:""}),t.jsx("div",{className:"space-y-3",children:b.map((g,k)=>t.jsxs("div",{className:"flex justify-between items-center group",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 rounded bg-[#F5F5F0] flex items-center justify-center text-[#9CA3AF] border border-black/5 flex-shrink-0",children:t.jsx(Sa,{className:"w-4 h-4",strokeWidth:1.5})}),t.jsx("span",{className:"text-sm text-[#2D2D2D] font-medium",children:g.name}),g.count>1&&t.jsxs("span",{className:"text-xs text-[#9CA3AF] font-mono",children:["x",g.count]})]}),t.jsx("span",{className:"text-sm text-[#9CA3AF] font-mono",children:g.price.toLocaleString()})]},k))})]}),t.jsx("div",{className:"w-full h-px bg-dashed bg-black/10 border-t border-dashed border-[#E5E5E0] mb-6"}),t.jsxs("div",{className:"flex justify-between items-start mb-8",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] text-[#9CA3AF] tracking-[0.2em] uppercase mb-1",children:""}),t.jsxs("div",{className:"flex items-baseline gap-1",children:[t.jsx("span",{className:"text-4xl font-light text-[#2D2D2D] font-mono",children:f.toLocaleString()}),t.jsx("span",{className:"text-xs text-[#9CA3AF] font-medium",children:""})]})]}),t.jsx("div",{className:"w-10 h-10 bg-[#F9F9F7] rounded-full flex items-center justify-center text-[#C93A40]",children:t.jsx(u_,{className:"w-5 h-5 stroke-[1.5px]"})})]}),t.jsx("div",{className:"flex items-center gap-2 mb-6 opacity-30",children:t.jsx("div",{className:"w-full h-px bg-black/20"})}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center group cursor-default",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#2D2D2D] flex items-center justify-center text-white shadow-md shadow-black/10",children:t.jsx(sp,{className:"w-4 h-4"})}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-sm font-medium text-[#2D2D2D]",children:""}),t.jsx("span",{className:"text-[10px] text-[#9CA3AF]",children:"Koband Pay"})]})]}),t.jsx("div",{className:"w-4 h-4 rounded-full border border-[#C93A40] flex items-center justify-center",children:t.jsx("div",{className:"w-2 h-2 rounded-full bg-[#C93A40]"})})]}),t.jsxs("div",{className:"flex justify-between items-center opacity-60",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#F0F0F0] flex items-center justify-center text-[#9CA3AF]",children:t.jsx("div",{className:"w-2 h-2 bg-[#9CA3AF] rounded-full"})}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-sm font-medium text-[#2D2D2D]",children:""}),t.jsx("span",{className:"text-[10px] text-[#9CA3AF]",children:""})]})]}),t.jsx(os,{className:"w-4 h-4 text-[#9CA3AF]"})]})]})]}),t.jsx("div",{className:"relative h-4 bg-[#F9F9F7] mt-2 mx-[-1px] mb-[-1px]",children:t.jsx("div",{className:"absolute top-0 left-0 right-0 h-4 bg-white",style:{clipPath:"polygon(0 0, 100% 0, 98% 100%, 96% 0, 94% 100%, 92% 0, 90% 100%, 88% 0, 86% 100%, 84% 0, 82% 100%, 80% 0, 78% 100%, 76% 0, 74% 100%, 72% 0, 70% 100%, 68% 0, 66% 100%, 64% 0, 62% 100%, 60% 0, 58% 100%, 56% 0, 54% 100%, 52% 0, 50% 100%, 48% 0, 46% 100%, 44% 0, 42% 100%, 40% 0, 38% 100%, 36% 0, 34% 100%, 32% 0, 30% 100%, 28% 0, 26% 100%, 24% 0, 22% 100%, 20% 0, 18% 100%, 16% 0, 14% 100%, 12% 0, 10% 100%, 8% 0, 6% 100%, 4% 0, 2% 100%, 0 0)"}})})]})})]}),t.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 pb-8 bg-white/80 backdrop-blur-xl border-t border-black/5 z-20",children:t.jsxs("button",{onClick:()=>s(y()),className:"w-full h-14 rounded-2xl bg-[#2D2D2D] text-white overflow-hidden relative group shadow-lg shadow-[#2D2D2D]/20 active:scale-[0.98] transition-all",children:[t.jsxs("div",{className:"absolute inset-0 flex items-center justify-center gap-3 z-10",children:[t.jsx("span",{className:"text-sm font-medium tracking-[0.2em] uppercase",children:""}),t.jsx(Zf,{className:"w-4 h-4 rotate-180 group-hover:translate-x-1 transition-transform"})]}),t.jsx("div",{className:"absolute top-0 -left-[100%] w-[100%] h-full bg-gradient-to-r from-transparent via-white/10 to-transparent group-hover:left-[100%] transition-all duration-700 ease-in-out"})]})})]})}function bE({onBack:e,currentBalance:n}){const[s,a]=j.useState([]),[i,l]=j.useState(n||0),[c,d]=j.useState(!0);j.useEffect(()=>{(async()=>{try{if(d(!0),n===void 0){const g=await ae.get(te.USER_DATA,"userData");g&&typeof g.balance=="number"&&l(g.balance)}let p=await ae.get(te.USER_DATA,"asset_transactions")||[];const f=await ae.get(te.MISC,"transactions_migrated");if(p.length===0&&!f){console.log("Starting migration of red packet transactions...");const g=await ae.getAllKeys(te.CHAT_MESSAGES);for(const k of g)if(typeof k=="string"&&k.startsWith("chat_messages_")){const w=k.replace("chat_messages_","");let C=w;const N=await ae.get(te.CHARACTERS,"characters");if(N&&Array.isArray(N)){const P=N.find(B=>B.id===w);P&&(C=P.name)}const A=await ae.get(te.CHAT_MESSAGES,k);A&&Array.isArray(A)&&A.forEach(P=>{if(P.redPacket){let B=Date.now();if(P.id&&typeof P.id=="string"){const $=P.id.split("-"),D=parseInt($[0]);isNaN(D)||(B=D)}P.senderId==="user"?p.push({id:P.id,type:"send",amount:P.redPacket.amount,timestamp:B,partnerName:C,blessing:P.redPacket.blessing}):P.redPacket.opened&&p.push({id:P.id,type:"receive",amount:P.redPacket.amount,timestamp:B,partnerName:C||P.senderName||"",blessing:P.redPacket.blessing})}})}await ae.set(te.USER_DATA,"asset_transactions",p),await ae.set(te.MISC,"transactions_migrated",!0)}const b=(await ae.get(te.USER_DATA,"order_history")||[]).map(g=>({id:g.id,type:"purchase",amount:g.total,timestamp:g.timestamp,partnerName:""})),y=[...p,...b];y.sort((g,k)=>k.timestamp-g.timestamp),a(y)}catch(p){console.error("Failed to load asset details",p)}finally{d(!1)}})()},[]);const u=m=>{const p=new Date(m);return`${p.getFullYear()}/${(p.getMonth()+1).toString().padStart(2,"0")}/${p.getDate().toString().padStart(2,"0")} ${p.getHours().toString().padStart(2,"0")}:${p.getMinutes().toString().padStart(2,"0")}`};return t.jsxs("div",{className:"h-full flex flex-col bg-[#FCFCFA]",children:[t.jsxs("div",{className:"flex items-center px-4 py-4 border-b border-black/5",children:[t.jsx("button",{onClick:e,className:"w-10 h-10 flex items-center justify-center -ml-2 text-[#555] hover:text-[#2D2D2D]",children:t.jsx(an,{className:"w-6 h-6"})}),t.jsx("h2",{className:"text-lg font-medium text-[#2D2D2D] ml-2",children:""})]}),t.jsxs("div",{className:"px-8 py-6 bg-[#F5F5F0]",children:[t.jsx("p",{className:"text-xs text-[#9CA3AF] mb-1",children:" ()"}),t.jsx("p",{className:"text-3xl font-mono font-medium text-[#2D2D2D]",children:"+"})]}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:c?t.jsx("div",{className:"py-12 text-center text-[#9CA3AF] text-xs",children:"..."}):s.length===0?t.jsxs("div",{className:"py-20 flex flex-col items-center justify-center text-[#9CA3AF] opacity-60",children:[t.jsx(_a,{className:"w-12 h-12 mb-2 stroke-1"}),t.jsx("p",{className:"text-xs tracking-wider",children:""})]}):t.jsx("div",{className:"divide-y divide-black/5",children:s.map(m=>t.jsxs("div",{className:"px-6 py-4 flex items-center justify-between hover:bg-black/[0.02] transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${m.type==="receive"?"bg-[#FFF5F5] text-[#C93A40]":"bg-[#F5F5F5] text-[#555]"}`,children:m.type==="receive"?t.jsx(N6,{className:"w-5 h-5"}):m.type==="purchase"?t.jsx(lp,{className:"w-4 h-4"}):t.jsx(T6,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm font-medium text-[#2D2D2D]",children:[m.type==="receive"?"":m.type==="purchase"?"":"",t.jsxs("span",{className:"text-xs font-normal text-[#9CA3AF] ml-2",children:["- ",m.partnerName]})]}),t.jsx("p",{className:"text-[10px] text-[#9CA3AF] mt-0.5 font-mono",children:u(m.timestamp)})]})]}),t.jsxs("div",{className:`text-sm font-mono font-medium ${m.type==="receive"?"text-[#C93A40]":"text-[#2D2D2D]"}`,children:[m.type==="receive"?"+":"-",m.amount]})]},m.id))})})]})}const vE=({char:e,onSelect:n})=>{const[s,a]=j.useState(null);return j.useEffect(()=>{let i=!0;return(async()=>{if(e.avatar)if(e.avatar.startsWith("data:")||e.avatar.startsWith("http"))i&&a(e.avatar);else{const c=await xt(e.avatar);i&&c&&a(c)}})(),()=>{i=!1}},[e.avatar]),t.jsxs("button",{onClick:n,className:"w-full flex items-center justify-between p-4 hover:bg-black/5 active:bg-black/10 transition-colors group border-b border-black/5 last:border-0",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 rounded-full bg-[#F0F0F0] overflow-hidden flex-shrink-0 border border-black/5 relative shadow-sm",children:s?t.jsx("img",{src:s,alt:e.name,className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full flex items-center justify-center text-[#C0C0C0]",children:t.jsx(An,{className:"w-5 h-5 stroke-1"})})}),t.jsx("div",{className:"text-left",children:t.jsx("div",{className:"text-base font-medium text-[#2D2D2D] tracking-wide",children:e.name||e.kanjiName||""})})]}),t.jsx("div",{className:"w-8 h-8 rounded-full bg-transparent group-hover:bg-[#C93A40] flex items-center justify-center transition-colors",children:t.jsx(_8,{className:"w-4 h-4 text-[#C9C9C9] group-hover:text-white transition-colors -ml-0.5 mt-0.5",strokeWidth:1.5})})]})};function yE({onBack:e}){const[n,s]=j.useState([]),[a,i]=j.useState(!0),[l,c]=j.useState(!1),[d,u]=j.useState(null),[m,p]=j.useState([]),[f,x]=j.useState(""),[b,y]=j.useState(null);j.useEffect(()=>{(async()=>{try{i(!0);const A=await ae.get(te.USER_DATA,"order_history")||[];A.sort((P,B)=>B.timestamp-P.timestamp),s(A)}catch(A){console.error("Failed to load orders",A)}finally{i(!1)}})()},[]),j.useEffect(()=>{l&&(async()=>{const A=await ae.get(te.CHARACTERS,"characters")||[];p(A)})()},[l]);const g=N=>{const A=new Date(N);return`${A.getFullYear()}/${(A.getMonth()+1).toString().padStart(2,"0")}/${A.getDate().toString().padStart(2,"0")} ${A.getHours().toString().padStart(2,"0")}:${A.getMinutes().toString().padStart(2,"0")}`},k=N=>{y({message:N}),setTimeout(()=>{y(null)},2e3)},w=async(N,A)=>{if(d)try{const P=new Date,B=d.items.map(S=>{let L=S.description;if(!L){const z=sh.find(R=>R.name===S.name);z&&(L=z.description)}return{name:S.name,price:S.price,count:S.count,description:L||""}}),D=`[] ${B.map(S=>{const L=S.description?`(${S.description})`:"";return`${S.name}${L} x${S.count} (${S.price})`}).join("; ")} ${d.total} ${d.recipient}`,T={id:Date.now().toString(),text:D,senderId:"user",senderName:"",timestamp:P,isRead:!0,order:{id:d.id,items:B,total:d.total,recipient:d.recipient,timestamp:d.timestamp}},H=await ae.get(te.CHAT_MESSAGES,`chat_messages_${N}`)||[];H.push(T),await ae.set(te.CHAT_MESSAGES,`chat_messages_${N}`,H);const K=await ae.get(te.CHATS,"chat_list")||[],E=K.findIndex(S=>S.id===N),I={id:N,name:A,lastMessage:"[]",lastSender:"",time:`${P.getHours().toString().padStart(2,"0")}:${P.getMinutes().toString().padStart(2,"0")}`,timestamp:P.getTime()};if(E!==-1){const S=K[E];I.isPinned=S.isPinned,I.remark=S.remark,K[E]=I}else K.unshift(I);await ae.set(te.CHATS,"chat_list",K),k(""),c(!1),u(null)}catch(P){console.error("Failed to share order",P),Br.error("")}},C=m.filter(N=>N.name&&N.name.toLowerCase().includes(f.toLowerCase())||N.kanjiName&&N.kanjiName.includes(f));return t.jsxs("div",{className:"h-full flex flex-col bg-[#FCFCFA] relative",children:[t.jsxs("div",{className:"flex items-center px-4 py-4 border-b border-black/5",children:[t.jsx("button",{onClick:e,className:"w-10 h-10 flex items-center justify-center -ml-2 text-[#555] hover:text-[#2D2D2D]",children:t.jsx(an,{className:"w-6 h-6"})}),t.jsx("h2",{className:"text-lg font-medium text-[#2D2D2D] ml-2",children:""})]}),t.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:a?t.jsx("div",{className:"py-12 text-center text-[#9CA3AF] text-xs",children:"..."}):n.length===0?t.jsxs("div",{className:"py-20 flex flex-col items-center justify-center text-[#9CA3AF] opacity-60",children:[t.jsx(Sa,{className:"w-12 h-12 mb-2 stroke-1"}),t.jsx("p",{className:"text-xs tracking-wider",children:""})]}):t.jsx("div",{className:"space-y-6",children:n.map(N=>t.jsxs("div",{className:"bg-white rounded-xl border border-black/5 p-4 shadow-sm relative group",children:[t.jsxs("div",{className:"flex justify-between items-center mb-3 pb-3 border-b border-black/5",children:[t.jsx("span",{className:"text-[10px] text-[#9CA3AF] font-mono tracking-widest",children:g(N.timestamp)}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("span",{className:"text-[10px] text-[#9CA3AF] font-mono tracking-widest",children:["ID: ",N.id.slice(-6).toUpperCase()]}),t.jsx("button",{onClick:()=>{u(N),c(!0)},className:"p-1.5 -mr-1 rounded-full hover:bg-black/5 text-[#9CA3AF] hover:text-[#2D2D2D] transition-colors",title:"",children:t.jsx(op,{className:"w-4 h-4"})})]})]}),t.jsx("div",{className:"space-y-3 mb-4",children:N.items.map((A,P)=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-[#F5F5F0] rounded flex items-center justify-center text-[#9CA3AF] border border-black/5",children:t.jsx(Sa,{className:"w-5 h-5",strokeWidth:1.5})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-[#2D2D2D] truncate",children:A.name}),t.jsxs("p",{className:"text-xs text-[#9CA3AF]",children:["x",A.count]})]}),t.jsx("span",{className:"text-sm font-medium text-[#2D2D2D]",children:A.price*A.count})]},P))}),t.jsxs("div",{className:"pt-3 border-t border-dashed border-black/10 flex justify-between items-end",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-[10px] text-[#9CA3AF] mb-0.5 tracking-wider",children:""}),t.jsxs("div",{className:"flex items-center gap-1.5 h-[28px]",children:[t.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-[#C93A40]"}),t.jsx("span",{className:"text-xs font-medium text-[#2D2D2D]",children:N.recipient})]})]}),t.jsxs("div",{className:"flex flex-col items-end",children:[t.jsx("span",{className:"text-[10px] text-[#9CA3AF] mb-0.5 tracking-wider",children:""}),t.jsxs("div",{className:"flex items-baseline gap-1 h-[28px]",children:[t.jsx("span",{className:"text-lg font-mono font-medium text-[#2D2D2D]",children:N.total.toLocaleString()}),t.jsx("span",{className:"text-[10px] text-[#9CA3AF]",children:""})]})]})]})]},N.id))})}),t.jsx(Ie,{children:l&&t.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-50 bg-black/20 backdrop-blur-sm flex items-end sm:items-center justify-center",onClick:()=>c(!1),children:t.jsxs(xe.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"w-full h-[80%] sm:h-[600px] sm:max-w-md bg-white rounded-t-2xl sm:rounded-2xl flex flex-col overflow-hidden shadow-2xl",onClick:N=>N.stopPropagation(),children:[t.jsxs("div",{className:"px-6 py-5 flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-light text-[#2D2D2D] tracking-wide",children:""}),t.jsx("button",{onClick:()=>c(!1),className:"p-2 -mr-2 rounded-full hover:bg-black/5 transition-colors",children:t.jsx(ht,{className:"w-5 h-5 text-[#9CA3AF] stroke-1"})})]}),t.jsx("div",{className:"px-6 pb-2",children:t.jsxs("div",{className:"relative group",children:[t.jsx(_a,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-[#9CA3AF] group-focus-within:text-[#2D2D2D] transition-colors"}),t.jsx("input",{type:"text",placeholder:"...",value:f,onChange:N=>x(N.target.value),className:"w-full h-11 pl-10 pr-4 rounded-xl bg-[#F9F9F7] text-base text-[#2D2D2D] placeholder-[#9CA3AF] focus:outline-none focus:bg-[#F0F0F0] transition-colors font-light"})]})}),t.jsx("div",{className:"flex-1 overflow-y-auto px-2 py-2",children:C.length===0?t.jsx("div",{className:"py-12 text-center text-[#9CA3AF] text-xs font-light tracking-wider",children:""}):t.jsx("div",{className:"flex flex-col",children:C.map(N=>t.jsx(vE,{char:N,onSelect:()=>w(N.id,N.name||N.kanjiName||"")},N.id))})})]})})}),t.jsx(Ie,{children:b&&t.jsx(xe.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},className:"fixed bottom-32 left-1/2 -translate-x-1/2 bg-[#505050] text-white px-6 py-2.5 rounded-full shadow-lg z-[100] flex items-center justify-center min-w-[120px]",children:t.jsx("span",{className:"text-sm font-medium tracking-widest",children:b.message})})})]})}function wE({subView:e="menu",onSubViewChange:n}){const[s,a]=j.useState("menu"),i=n?e:s,l=n||a,[c,d]=j.useState(null),[u,m]=j.useState(null),[p,f]=j.useState(0);j.useEffect(()=>{(async()=>{try{const k=await ae.get(te.USER_DATA,"userData");k&&typeof k.balance=="number"&&f(k.balance);const w=await ae.get(te.MISC,"organizations");let C=!1;if(w){let N=null;if(Array.isArray(w)?(N=w.find(A=>A.name&&A.name.includes("")||A.role==="saniwa"||A.isSaniwa),!N&&w.length>0&&w[0].name&&w[0].country&&(N=w[0])):typeof w=="object"&&(N=w),N){if(d({saniwaName:N.name||N.saniwaName||"",country:N.country||"",honmaruName:N.honmaruName||N.fortress||""}),N.avatar)if(N.avatar.startsWith("data:")||N.avatar.startsWith("http"))m(N.avatar);else{const A=await xt(N.avatar);A&&m(A)}C=!0}}if(!C){const N=await ae.get(te.USER_DATA,"userData");N&&d(N);const A=await xt("avatar");A&&m(A)}}catch(k){console.error("Failed to load user profile",k)}})()},[]);const x=c?.name||c?.saniwaName||"",b=c?.country||"",y=c?.fortress||c?.honmaruName||"";return i==="assets"?t.jsx(bE,{onBack:()=>l("menu"),currentBalance:p}):i==="orders"?t.jsx(yE,{onBack:()=>l("menu")}):t.jsxs("div",{className:"h-full flex flex-col bg-[#FCFCFA] overflow-hidden",children:[t.jsxs("div",{className:"pt-8 pb-12 px-8 text-center",children:[t.jsx("div",{className:"w-20 h-20 mx-auto rounded-full bg-[#F5F5F0] flex items-center justify-center text-2xl mb-4 relative overflow-hidden",children:u?t.jsx("img",{src:u,alt:"Avatar",className:"w-full h-full object-cover"}):t.jsx("span",{children:""})}),t.jsx("h2",{className:"text-lg font-medium text-[#2D2D2D] mb-1",children:x}),t.jsx("p",{className:"text-[10px] text-[#9CA3AF] tracking-widest uppercase mb-1",children:b}),t.jsx("p",{className:"text-xs text-[#555] font-light tracking-wide",children:y})]}),t.jsxs("div",{className:"mx-8 mb-10 py-4 border-y border-black/5 flex justify-between items-center",children:[t.jsx("span",{className:"text-xs text-[#9CA3AF]",children:""}),t.jsxs("span",{className:"text-sm font-mono font-medium text-[#2D2D2D]",children:["+ ",t.jsx("span",{className:"text-[10px] text-[#9CA3AF]",children:""})]})]}),t.jsx("div",{className:"flex-1 px-8 space-y-1",children:[{icon:sp,label:"",action:()=>l("assets")},{icon:Sa,label:"",action:()=>l("orders")},{icon:Bo,label:""}].map((g,k)=>t.jsxs("button",{onClick:g.action,className:"w-full flex items-center justify-between py-4 group",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(g.icon,{className:"w-4 h-4 text-[#9CA3AF] group-hover:text-[#2D2D2D] transition-colors",strokeWidth:1.5}),t.jsx("span",{className:"text-sm text-[#555] group-hover:text-[#2D2D2D] transition-colors font-light",children:g.label})]}),t.jsx(os,{className:"w-3 h-3 text-[#E5E5E5] group-hover:text-[#2D2D2D] transition-colors"})]},k))})]})}function SE({item:e,quantity:n=1,onAddOne:s,onRemoveOne:a,onClose:i,onViewCart:l}){return t.jsx(Ie,{children:e&&t.jsxs(t.Fragment,{children:[t.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:i,className:"absolute inset-0 z-[60] bg-black/20 backdrop-blur-[1px]"}),t.jsx(xe.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"absolute bottom-0 left-0 right-0 z-[70] bg-white rounded-t-[24px] shadow-[0_-4px_30px_rgba(0,0,0,0.15)] overflow-hidden",children:t.jsxs("div",{className:"p-6 pb-12",children:[t.jsx("div",{className:"flex items-center justify-center mb-6 relative",children:t.jsxs("div",{className:"flex items-center gap-2 text-[#2D2D2D]",children:[t.jsx("div",{className:"w-5 h-5 rounded-full bg-[#4A7C59] flex items-center justify-center",children:t.jsx(wt,{className:"w-3 h-3 text-white",strokeWidth:3})}),t.jsx("span",{className:"font-medium text-sm",children:""})]})}),t.jsxs("div",{className:"flex gap-4 mb-8 bg-[#F9F9F7] p-4 rounded-xl items-center",children:[t.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center text-2xl flex-shrink-0 shadow-sm text-[#9CA3AF]",children:t.jsx(Sa,{className:"w-6 h-6",strokeWidth:1.5})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"text-sm font-medium text-[#2D2D2D] truncate",children:e.name}),t.jsxs("div",{className:"flex items-baseline gap-1 mt-0.5",children:[t.jsx("span",{className:"text-sm font-bold text-[#C93A40]",children:e.price}),t.jsx("span",{className:"text-[10px] text-[#9CA3AF]",children:""})]})]}),t.jsxs("div",{className:"flex items-center gap-3 bg-white rounded-full p-1.5 px-2 shadow-sm",children:[t.jsx("button",{onClick:a,className:"w-7 h-7 flex items-center justify-center rounded-full bg-[#F5F5F0] text-[#2D2D2D] hover:bg-[#E5E5E0] active:scale-90 transition-all",children:t.jsx(ip,{className:"w-3.5 h-3.5",strokeWidth:2})}),t.jsx("span",{className:"text-sm font-mono font-medium text-[#2D2D2D] min-w-[1ch] text-center",children:n}),t.jsx("button",{onClick:s,className:"w-7 h-7 flex items-center justify-center rounded-full bg-[#2D2D2D] text-white hover:bg-black active:scale-90 transition-all",children:t.jsx(is,{className:"w-3.5 h-3.5",strokeWidth:2})})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:i,className:"flex-1 h-12 rounded-full border border-black/10 text-[#2D2D2D] text-sm font-medium hover:bg-[#F5F5F0] active:scale-95 transition-all",children:""}),t.jsxs("button",{onClick:l,className:"flex-1 h-12 rounded-full bg-[#2D2D2D] text-white text-sm font-medium hover:bg-black active:scale-95 transition-all flex items-center justify-center gap-1",children:["",t.jsx(os,{className:"w-4 h-4 opacity-50"})]})]})]})})]})})}function kE({onClose:e}){const[n,s]=j.useState("store"),[a,i]=j.useState("menu"),[l,c]=j.useState([]),[d,u]=j.useState(null),[m,p]=j.useState(null);j.useEffect(()=>{(async()=>{try{const N=await ae.get(te.USER_DATA,"shopping_cart");N&&c(N)}catch(N){console.error("Failed to load cart",N)}})()},[]);const f=async C=>{c(C);try{await ae.set(te.USER_DATA,"shopping_cart",C)}catch(N){console.error("Failed to save cart",N)}},x=(C,N)=>{p({message:C,subtext:N}),setTimeout(()=>{p(null)},3e3)},b=(C,N=!0)=>{const A={...C,id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now()},P=[...l,A];f(P),N&&u({name:C.name,price:C.price})},y=C=>{const N=l.filter(A=>A.id!==C);f(N)},g=C=>{const N=new Set(C),A=l.filter(P=>!N.has(P.id));f(A)},k=async C=>{const N=l.reduce((B,$)=>B+$.price,0),A=l.reduce((B,$)=>{const D=`${$.name}-${$.price}`;return B[D]||(B[D]={name:$.name,price:$.price,description:$.description,count:0}),B[D].count+=1,B},{}),P={id:`${Date.now().toString(36).toUpperCase()}-${Math.random().toString(36).substr(2,4).toUpperCase()}`,items:Object.values(A),total:N,recipient:C,timestamp:Date.now()};try{const B=await ae.get(te.USER_DATA,"order_history")||[];await ae.set(te.USER_DATA,"order_history",[...B,P])}catch(B){console.error("Failed to save order history",B)}f([]),x("",` ${C}`),s("store")},w=n==="checkout"||n==="profile"&&(a==="assets"||a==="orders");return t.jsxs("div",{className:"fixed inset-0 z-50 bg-[#FCFCFA] font-sans overflow-hidden flex flex-col text-[#2D2D2D]",children:[t.jsx("div",{className:`relative z-20 flex items-center justify-between px-6 bg-transparent transition-all duration-200 ${w?"h-8":"pt-12 pb-2 min-h-[80px]"}`,children:!w&&t.jsxs(t.Fragment,{children:[t.jsxs("h1",{className:"text-2xl font-light tracking-widest",children:[n==="store"&&"",n==="cart"&&"",n==="profile"&&""]}),t.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full flex items-center justify-center hover:bg-black/5 transition-colors",children:t.jsx(ht,{className:"w-6 h-6 stroke-1 text-[#2D2D2D]"})})]})}),t.jsx("div",{className:"flex-1 relative z-10 overflow-hidden",children:t.jsx(Ie,{mode:"wait",children:t.jsxs(xe.div,{className:"absolute inset-0",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[n==="store"&&t.jsx(mE,{onAddToCart:C=>b(C,!0)}),n==="cart"&&t.jsx(xE,{cartItems:l,onRemove:y,onBulkRemove:g,onAdd:C=>b(C,!1),onCheckout:()=>s("checkout")}),n==="checkout"&&t.jsx(gE,{cartItems:l,onBack:()=>s("cart"),onComplete:k}),n==="profile"&&t.jsx(wE,{subView:a,onSubViewChange:i})]},n)})}),n!=="checkout"&&t.jsx("div",{className:"bg-white/80 backdrop-blur-xl border-t border-black/5 pb-8 pt-4 px-12 z-30 flex justify-between items-center",children:[{id:"store",icon:e7,label:""},{id:"cart",icon:lp,label:"",badge:l.length},{id:"profile",icon:An,label:""}].map(C=>{const N=n===C.id;return t.jsxs("button",{onClick:()=>{s(C.id),C.id==="profile"&&i("menu")},className:"flex flex-col items-center gap-1.5 w-16 group relative",children:[t.jsxs("div",{className:`relative transition-all duration-300 ${N?"text-[#C93A40] scale-110":"text-[#9CA3AF] group-hover:text-[#6B7280]"}`,children:[t.jsx(C.icon,{className:"w-6 h-6 stroke-[1.5px]"}),C.badge?t.jsx("span",{className:"absolute -top-1 -right-2 w-4 h-4 bg-[#C93A40] text-white text-[9px] flex items-center justify-center rounded-full shadow-sm",children:C.badge}):null]}),N&&t.jsx(xe.div,{layoutId:"indicator",className:"w-1 h-1 rounded-full bg-[#C93A40]"})]},C.id)})}),t.jsx(SE,{item:d,quantity:d?l.filter(C=>C.name===d.name&&C.price===d.price).length:0,onAddOne:()=>d&&b(d,!1),onRemoveOne:()=>{if(!d)return;const C=l.filter(N=>N.name===d.name&&N.price===d.price);C.length>0&&y(C[C.length-1].id)},onClose:()=>u(null),onViewCart:()=>{u(null),s("cart")}}),t.jsx(Ie,{children:m&&t.jsx(xe.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},className:"fixed bottom-32 left-1/2 -translate-x-1/2 bg-[#505050] text-white px-6 py-3 rounded-full shadow-lg z-[100] flex items-center gap-3 min-w-[200px] justify-center",children:t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("span",{className:"text-xs font-medium tracking-widest",children:m.message}),m.subtext&&t.jsx("span",{className:"text-[10px] text-white/60 tracking-wider mt-0.5",children:m.subtext})]})})})]})}function jE(){const[e,n]=j.useState([]),[s,a]=j.useState(""),[i,l]=j.useState(!1);j.useEffect(()=>{c()},[]);const c=async()=>{try{const f=await ae.get(te.SCHEDULE,"todos");f&&n(f.sort((x,b)=>b.createdAt-x.createdAt))}catch(f){console.error("Failed to load todos:",f)}},d=async f=>{try{await ae.set(te.SCHEDULE,"todos",f),n(f)}catch(x){console.error("Failed to save todos:",x)}},u=async()=>{if(!s.trim())return;const x=[{id:Date.now().toString(),text:s.trim(),completed:!1,createdAt:Date.now()},...e];await d(x),a(""),l(!1)},m=async f=>{const x=e.map(b=>b.id===f?{...b,completed:!b.completed}:b);await d(x)},p=async f=>{const x=e.filter(b=>b.id!==f);await d(x)};return t.jsxs("div",{className:"h-full flex flex-col p-4 overflow-y-auto custom-scrollbar",children:[t.jsxs("div",{className:"mb-6 ml-2 relative inline-block",children:[t.jsx("h2",{className:"text-2xl font-bold text-[#5A5A5A] relative z-10",children:"To-Do List"}),t.jsx("div",{className:"absolute bottom-1 left-0 w-full h-3 bg-[#FFE4E1] -rotate-2 z-0 opacity-70"})]}),t.jsxs("div",{className:"flex-1 space-y-3 pb-20",children:[t.jsx(Ie,{initial:!1,children:e.map(f=>t.jsxs(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,height:0,marginBottom:0},transition:{type:"spring",stiffness:400,damping:30},className:`group relative p-4 rounded-xl border-2 transition-all duration-200 active:scale-[0.99] ${f.completed?"bg-[#F0F0F0] border-transparent opacity-60":"bg-white border-[#F0F0F0] shadow-sm active:border-[#D4E0D6]"}`,children:[t.jsx("div",{className:"absolute -top-2 left-1/2 -translate-x-1/2 w-3 h-3 rounded-full bg-[#D4E0D6] border border-white shadow-sm z-10"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:()=>m(f.id),className:`w-6 h-6 rounded-md border-2 flex items-center justify-center transition-all duration-200 active:scale-90 ${f.completed?"bg-[#8CAE8C] border-[#8CAE8C]":"border-[#D1D1D1] active:border-[#8CAE8C]"}`,children:f.completed&&t.jsx(wt,{className:"w-4 h-4 text-white",strokeWidth:3})}),t.jsx("span",{className:`flex-1 text-[15px] font-medium leading-relaxed ${f.completed?"text-[#999] line-through decoration-2 decoration-[#999]/30":"text-[#5A5A5A]"}`,children:f.text}),t.jsx("button",{onClick:()=>p(f.id),className:"p-2 text-[#999] active:text-[#FF6B6B] active:scale-95 transition-colors duration-200",children:t.jsx(ht,{className:"w-5 h-5"})})]})]},f.id))}),e.length===0&&!i&&t.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-40",children:[t.jsx("div",{className:"w-20 h-20 border-4 border-dashed border-[#5A5A5A] rounded-full flex items-center justify-center mb-4",children:t.jsx(wt,{className:"w-10 h-10 text-[#5A5A5A]"})}),t.jsx("p",{className:"font-bold text-[#5A5A5A]",children:""}),t.jsx("p",{className:"text-sm",children:""})]})]}),t.jsx("div",{className:"absolute bottom-6 right-6 left-6 z-20 pointer-events-none",children:t.jsx("div",{className:"pointer-events-auto",children:t.jsx(Ie,{children:i?t.jsxs(xe.div,{initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"bg-white p-2 rounded-2xl shadow-xl border-2 border-[#5A5A5A]/10 flex gap-2",children:[t.jsx("input",{type:"text",value:s,onChange:f=>a(f.target.value),placeholder:"...",autoFocus:!0,className:"flex-1 bg-transparent px-4 py-2 outline-none text-[#5A5A5A] placeholder:text-[#999]",onKeyDown:f=>f.key==="Enter"&&u()}),t.jsx("button",{onClick:u,className:"w-10 h-10 bg-[#5A5A5A] rounded-xl flex items-center justify-center text-white shadow-lg active:scale-90 transition-transform duration-200",children:t.jsx(wt,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>l(!1),className:"w-10 h-10 bg-[#F5F5F5] rounded-xl flex items-center justify-center text-[#5A5A5A] active:scale-90 transition-transform duration-200",children:t.jsx(ht,{className:"w-5 h-5"})})]}):t.jsx("div",{className:"flex justify-end",children:t.jsx(xe.button,{whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:20},onClick:()=>l(!0),className:"w-14 h-14 bg-[#5A5A5A] rounded-full shadow-lg shadow-[#5A5A5A]/30 flex items-center justify-center text-white",children:t.jsx(is,{className:"w-7 h-7"})})})})})})]})}const yf=["#FFD1DC","#D4E0D6","#CCE5FF","#FFF5BA","#E6E6FA"];function NE(){const[e,n]=j.useState(new Date),[s,a]=j.useState([]),[i,l]=j.useState(null),[c,d]=j.useState(!1),[u,m]=j.useState(null),[p,f]=j.useState(""),[x,b]=j.useState(!1),[y,g]=j.useState("09:00"),[k,w]=j.useState("10:00"),[C,N]=j.useState(""),[A,P]=j.useState(""),[B,$]=j.useState(yf[0]);j.useEffect(()=>{D();const O=new Date;l(I(O.getFullYear(),O.getMonth(),O.getDate()))},[]);const D=async()=>{const O=await ae.get(te.SCHEDULE,"events");if(O){const V=new Date,ee=new Date(V.getFullYear(),V.getMonth(),V.getDate()),q=O.filter(G=>{const[Q,le,ne]=G.date.split("-").map(Number);return new Date(Q,le-1,ne)>=ee});q.length!==O.length?(await ae.set(te.SCHEDULE,"events",q),a(q)):a(O)}},T=async O=>{await ae.set(te.SCHEDULE,"events",O),a(O)},H=(O,V)=>new Date(O,V+1,0).getDate(),K=(O,V)=>new Date(O,V,1).getDay(),E=O=>{const V=new Date(e.getFullYear(),e.getMonth()+O,1);n(V)},I=(O,V,ee)=>`${O}-${String(V+1).padStart(2,"0")}-${String(ee).padStart(2,"0")}`,S=O=>{const V=I(e.getFullYear(),e.getMonth(),O);l(V)},L=()=>{m(null),f(""),P(""),N(""),b(!1),g("09:00"),w("10:00"),$(yf[0]),d(!0)},z=O=>{m(O.id),f(O.title),P(O.description||""),N(O.location||""),b(O.isAllDay),g(O.startTime||"09:00"),w(O.endTime||"10:00"),$(O.color),d(!0)},R=async()=>{if(!p.trim()||!i)return;if(!x&&y>=k){alert("");return}const O={id:u||Date.now().toString(),title:p,date:i,isAllDay:x,startTime:x?void 0:y,endTime:x?void 0:k,location:C,description:A,color:B};let V;u?V=s.map(ee=>ee.id===u?O:ee):V=[...s,O],await T(V),d(!1)},U=async(O,V)=>{if(O.stopPropagation(),confirm("")){const ee=s.filter(q=>q.id!==V);await T(ee)}},W=()=>{const O=e.getFullYear(),V=e.getMonth(),ee=H(O,V),q=K(O,V),G=[];for(let Q=0;Q<q;Q++)G.push(t.jsx("div",{className:"min-h-[3rem] sm:min-h-[4rem]"},`empty-${Q}`));for(let Q=1;Q<=ee;Q++){const le=I(O,V,Q),ne=s.filter(se=>se.date===le),ie=i===le,ve=new Date().toDateString()===new Date(O,V,Q).toDateString();G.push(t.jsxs("div",{onClick:()=>S(Q),className:"relative min-h-[3rem] sm:min-h-[4rem] flex flex-col items-center pt-1 cursor-pointer active:scale-95 transition-transform duration-100 group",children:[t.jsx("div",{className:`w-7 h-7 sm:w-8 sm:h-8 flex items-center justify-center rounded-full text-xs sm:text-sm font-medium transition-all z-10 ${ie?"bg-[#5A5A5A] text-white shadow-md scale-110":ve?"bg-[#FFD1DC] text-[#5A5A5A]":"text-[#5A5A5A] group-hover:bg-[#5A5A5A]/5"}`,children:Q}),t.jsxs("div",{className:"flex gap-0.5 sm:gap-1 mt-1 flex-wrap justify-center px-1",children:[ne.slice(0,4).map((se,ge)=>t.jsx("div",{className:"w-1 h-1 sm:w-1.5 sm:h-1.5 rounded-full",style:{backgroundColor:se.color}},ge)),ne.length>4&&t.jsx("div",{className:"w-1 h-1 sm:w-1.5 sm:h-1.5 rounded-full bg-gray-300"})]})]},Q))}return G},Z=i?s.filter(O=>O.date===i).sort((O,V)=>O.isAllDay&&!V.isAllDay?-1:!O.isAllDay&&V.isAllDay?1:O.isAllDay&&V.isAllDay?0:(O.startTime||"").localeCompare(V.startTime||"")):[];return t.jsxs("div",{className:"h-full flex flex-col overflow-hidden bg-[#F9F7F2]",children:[t.jsxs("div",{className:"px-6 py-4 flex items-center justify-between",children:[t.jsx("button",{onClick:()=>E(-1),className:"p-2 active:bg-[#5A5A5A]/10 active:scale-90 rounded-full transition-all duration-200",children:t.jsx(an,{className:"w-5 h-5 text-[#5A5A5A]"})}),t.jsxs("h2",{className:"text-lg font-bold text-[#5A5A5A] tracking-widest",children:[e.getFullYear()," ",e.getMonth()+1,""]}),t.jsx("button",{onClick:()=>E(1),className:"p-2 active:bg-[#5A5A5A]/10 active:scale-90 rounded-full transition-all duration-200",children:t.jsx(os,{className:"w-5 h-5 text-[#5A5A5A]"})})]}),t.jsx("div",{className:"grid grid-cols-7 px-4 mb-2",children:["","","","","","",""].map(O=>t.jsx("div",{className:"text-center text-xs font-bold text-[#9A9A9A]",children:O},O))}),t.jsxs("div",{className:"flex-1 overflow-y-auto px-4 pb-20 custom-scrollbar",children:[t.jsx("div",{className:"grid grid-cols-7 gap-y-2 mb-6 bg-white p-2 rounded-2xl border-2 border-dashed border-[#5A5A5A]/10 shadow-sm",children:W()}),t.jsx(Ie,{mode:"wait",children:i&&t.jsxs(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"space-y-4 px-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-[#5A5A5A] font-bold border-l-4 border-[#5A5A5A] pl-2",children:i}),t.jsxs("button",{onClick:L,className:"flex items-center gap-1 text-xs font-bold bg-[#5A5A5A] text-white px-3 py-1.5 rounded-full shadow-sm active:scale-95 transition-transform duration-200",children:[t.jsx(is,{className:"w-3 h-3"}),""]})]}),Z.length===0?t.jsx("div",{className:"text-center py-8 text-[#999] text-sm italic opacity-60",children:""}):t.jsx("div",{className:"space-y-3",children:Z.map(O=>t.jsxs(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},onClick:()=>z(O),className:"relative p-4 rounded-xl shadow-sm border border-black/5 flex gap-4 overflow-hidden active:scale-[0.98] transition-transform duration-150 bg-white cursor-pointer",children:[t.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1.5",style:{backgroundColor:O.color}}),t.jsx("div",{className:"flex flex-col items-center justify-center min-w-[50px] border-r border-black/5 pr-4 py-1",children:O.isAllDay?t.jsx("span",{className:"text-xs font-bold text-[#5A5A5A] bg-[#5A5A5A]/10 px-2 py-1 rounded",children:""}):t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-sm font-bold text-[#5A5A5A]",children:O.startTime}),t.jsx("span",{className:"text-xs text-[#999] mt-0.5",children:O.endTime})]})}),t.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center gap-1",children:[t.jsx("h4",{className:"font-bold text-[#5A5A5A] truncate text-sm",children:O.title}),O.location&&t.jsxs("div",{className:"flex items-center gap-1 text-xs text-[#5A5A5A]/70",children:[t.jsx(Qf,{className:"w-3 h-3"}),t.jsx("span",{className:"truncate",children:O.location})]}),O.description&&t.jsx("p",{className:"text-xs text-[#5A5A5A]/50 truncate",children:O.description})]}),t.jsx("button",{onClick:V=>U(V,O.id),className:"absolute top-2 right-2 p-2 text-[#5A5A5A]/30 active:text-[#FF6B6B] active:scale-110 transition-all z-10",children:t.jsx(ht,{className:"w-4 h-4"})})]},O.id))})]})})]}),t.jsx(Ie,{children:c&&t.jsxs("div",{className:"absolute inset-0 z-50 flex items-end justify-center sm:items-center p-0 sm:p-4 bg-black/20 backdrop-blur-[2px]",children:[t.jsx("div",{className:"absolute inset-0",onClick:()=>d(!1)}),t.jsxs(xe.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"tween",duration:.25,ease:"easeOut"},className:"bg-[#FDFBF7] w-full max-w-sm rounded-t-2xl sm:rounded-2xl shadow-2xl p-6 border-t-2 sm:border-2 border-[#5A5A5A]/10 relative z-10",children:[t.jsx("button",{onClick:()=>d(!1),className:"absolute top-4 right-4 p-2 bg-[#F5F5F5] rounded-full active:scale-90 transition-transform",children:t.jsx(ht,{className:"w-4 h-4 text-[#5A5A5A]"})}),t.jsxs("h3",{className:"text-lg font-bold text-[#5A5A5A] mb-6 flex items-center gap-2",children:[t.jsx("span",{className:"w-2 h-6 bg-[#5A5A5A] rounded-full"}),u?"":""]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-bold text-[#999] mb-1 block",children:""}),t.jsx("input",{type:"text",value:p,onChange:O=>f(O.target.value),className:"w-full bg-white border-b-2 border-[#E0E0E0] focus:border-[#5A5A5A] px-2 py-2 outline-none transition-colors rounded-t-md",placeholder:""})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"text-xs font-bold text-[#999] mb-1 block flex items-center gap-1",children:[t.jsx(Qf,{className:"w-3 h-3"})," "]}),t.jsx("input",{type:"text",value:C,onChange:O=>N(O.target.value),className:"w-full bg-white border-b-2 border-[#E0E0E0] focus:border-[#5A5A5A] px-2 py-2 outline-none transition-colors rounded-t-md text-sm",placeholder:""})]}),t.jsxs("div",{className:"flex items-center gap-2 pt-1 active:opacity-60 transition-opacity",onClick:()=>b(!x),children:[t.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center transition-colors ${x?"bg-[#5A5A5A] border-[#5A5A5A]":"border-[#999]"}`,children:x&&t.jsx(wt,{className:"w-3 h-3 text-white"})}),t.jsx("label",{className:"text-sm font-bold text-[#5A5A5A]",children:""})]}),t.jsx(Ie,{children:!x&&t.jsxs(xe.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.15},className:"flex gap-4 overflow-hidden",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("label",{className:"text-xs font-bold text-[#999] mb-1 block flex items-center gap-1",children:[t.jsx(Eo,{className:"w-3 h-3"})," "]}),t.jsx("input",{type:"time",value:y,onChange:O=>g(O.target.value),className:"w-full bg-white border-b-2 border-[#E0E0E0] focus:border-[#5A5A5A] px-2 py-2 outline-none transition-colors rounded-t-md text-sm"})]}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("label",{className:"text-xs font-bold text-[#999] mb-1 block flex items-center gap-1",children:[t.jsx(Eo,{className:"w-3 h-3"})," "]}),t.jsx("input",{type:"time",value:k,onChange:O=>w(O.target.value),className:"w-full bg-white border-b-2 border-[#E0E0E0] focus:border-[#5A5A5A] px-2 py-2 outline-none transition-colors rounded-t-md text-sm"})]})]})}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-bold text-[#999] mb-2 block",children:""}),t.jsx("div",{className:"flex gap-3",children:yf.map(O=>t.jsx("button",{onClick:()=>$(O),className:`w-8 h-8 rounded-full border-2 transition-transform ${B===O?"border-[#5A5A5A] scale-110 shadow-sm":"border-transparent active:scale-90"}`,style:{backgroundColor:O}},O))})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"text-xs font-bold text-[#999] mb-1 block flex items-center gap-1",children:[t.jsx(y6,{className:"w-3 h-3"})," "]}),t.jsx("textarea",{value:A,onChange:O=>P(O.target.value),className:"w-full bg-white border-2 border-[#F0F0F0] rounded-xl px-3 py-2 outline-none focus:border-[#5A5A5A]/30 resize-none h-20 text-sm",placeholder:"..."})]}),t.jsx("button",{onClick:R,className:"w-full bg-[#5A5A5A] text-white font-bold py-3.5 rounded-xl shadow-lg mt-2 active:scale-95 transition-transform duration-150",children:u?"":" "})]})]})]})})]})}const e1=["","","","","","",""],oc=["#FFD1DC","#D4E0D6","#CCE5FF","#FFF5BA","#E6E6FA","#FFABAB","#FFC3A0","#D5AAFF","#85E3FF","#B9FBC0"],wf={totalPeriods:12,showWeekends:!0,periodTimes:Array.from({length:12},(e,n)=>({period:n+1,startTime:`${8+n}:00`,endTime:`${8+n}:45`})),startDate:new Date().toISOString().split("T")[0],totalWeeks:20},CE=e=>{const n=new Date(e),s=new Date,a=new Date(n.getFullYear(),n.getMonth(),n.getDate()),i=new Date(s.getFullYear(),s.getMonth(),s.getDate()),l=a.getDay()||7,c=new Date(a);c.setDate(a.getDate()-(l-1));const d=i.getTime()-c.getTime(),u=Math.floor(d/(1e3*60*60*24));return{currentWeek:Math.floor(u/7)+1,firstMonday:c}},_E=(e,n,s)=>{const a=new Date(e);return a.setDate(e.getDate()+(n-1)*7+s),`${a.getMonth()+1}/${a.getDate()}`};function AE(){const[e,n]=j.useState([]),[s,a]=j.useState(null),[i,l]=j.useState(null),[c,d]=j.useState(wf),[u,m]=j.useState(!1),{currentWeek:p,firstMonday:f}=CE(c.startDate),[x,b]=j.useState(1);j.useEffect(()=>{p>0&&b(Math.min(Math.max(1,p),c.totalWeeks))},[p,c.totalWeeks]);const[y,g]=j.useState(""),[k,w]=j.useState(""),[C,N]=j.useState(oc[0]),[A,P]=j.useState(1),[B,$]=j.useState(1),[D,T]=j.useState([]),[H,K]=j.useState(!1);j.useEffect(()=>{E()},[]);const E=async()=>{const G=await ae.get(te.SCHEDULE,"timetable_courses");if(G)n(G);else{const le=await ae.get(te.SCHEDULE,"timetable");if(le&&le.length>0){const ne=le.map(ie=>({id:Math.random().toString(36).substr(2,9),day:ie.day,startPeriod:ie.period,endPeriod:ie.period,subject:ie.subject,room:ie.room,color:ie.color,weeks:Array.from({length:wf.totalWeeks},(ve,se)=>se+1)}));n(ne),await ae.set(te.SCHEDULE,"timetable_courses",ne)}}const Q=await ae.get(te.SCHEDULE,"timetable_settings");if(Q){const le={...wf,...Q};if(le.periodTimes.length<le.totalPeriods){const ne=le.periodTimes.length;for(let ie=ne;ie<le.totalPeriods;ie++)le.periodTimes.push({period:ie+1,startTime:`${8+ie}:00`,endTime:`${8+ie}:45`})}d(le)}},I=async G=>{await ae.set(te.SCHEDULE,"timetable_courses",G),n(G)},S=async G=>{const Q=[...G.periodTimes];if(Q.length<G.totalPeriods)for(let ne=Q.length;ne<G.totalPeriods;ne++)Q.push({period:ne+1,startTime:`${8+ne}:00`,endTime:`${8+ne}:45`});else Q.length>G.totalPeriods&&(Q.length=G.totalPeriods);const le={...G,periodTimes:Q};await ae.set(te.SCHEDULE,"timetable_settings",le),d(le)},L=(G,Q)=>{G?(l(G),a(null),g(G.subject),w(G.room),N(G.color),P(G.startPeriod),$(G.endPeriod),T(G.weeks)):Q&&(l(null),a(Q),g(""),w(""),N(oc[Math.floor(Math.random()*oc.length)]),P(Q.period),$(Q.period),T(Array.from({length:c.totalWeeks},(le,ne)=>ne+1))),K(!1)},z=()=>{l(null),a(null)},R=async()=>{if(!y.trim())return;let G=[...e];const Q={id:i?i.id:Math.random().toString(36).substr(2,9),day:i?i.day:s?.day||0,startPeriod:A,endPeriod:B,subject:y.trim(),room:k.trim(),color:C,weeks:D.length>0?D:[x]};i?G=G.map(le=>le.id===i.id?Q:le):G.push(Q),await I(G),z()},U=async()=>{if(!i)return;const G=e.filter(Q=>Q.id!==i.id);await I(G),z()},W=async()=>{window.confirm("")&&(await ae.delete(te.SCHEDULE,"timetable_courses"),await ae.delete(te.SCHEDULE,"timetable"),n([]),m(!1))},Z=()=>T(Array.from({length:c.totalWeeks},(G,Q)=>Q+1)),O=()=>T(Array.from({length:c.totalWeeks},(G,Q)=>Q+1).filter(G=>G%2!==0)),V=()=>T(Array.from({length:c.totalWeeks},(G,Q)=>Q+1).filter(G=>G%2===0)),ee=c.showWeekends?e1:e1.slice(0,5),q=Array.from({length:c.totalPeriods},(G,Q)=>Q+1);return t.jsxs("div",{className:"h-full flex flex-col relative",children:[t.jsxs("div",{className:"flex justify-between items-center px-4 py-2 bg-[#FDFBF7] border-b border-dashed border-[#5A5A5A]/10 sticky top-0 z-20",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>b(G=>Math.max(1,G-1)),disabled:x<=1,className:"p-1 rounded-full hover:bg-black/5 disabled:opacity-30 transition-colors",children:t.jsx(an,{className:"w-4 h-4 text-[#5A5A5A]"})}),t.jsxs("span",{className:"text-lg font-bold text-[#5A5A5A] min-w-[3rem] text-center",children:[" ",x," "]}),t.jsx("button",{onClick:()=>b(G=>Math.min(c.totalWeeks,G+1)),disabled:x>=c.totalWeeks,className:"p-1 rounded-full hover:bg-black/5 disabled:opacity-30 transition-colors",children:t.jsx(os,{className:"w-4 h-4 text-[#5A5A5A]"})})]}),p===x&&t.jsx("span",{className:"text-[10px] bg-[#5A5A5A] text-white px-1.5 py-0.5 rounded-full",children:""})]}),t.jsx("button",{onClick:()=>m(!0),className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-black/5 active:scale-90 transition-all text-[#999] hover:text-[#5A5A5A]",children:t.jsx(Bo,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"flex border-b border-[#5A5A5A]/10 bg-white/50 backdrop-blur-sm sticky top-[49px] z-10",children:[t.jsx("div",{className:"w-8 flex items-center justify-center border-r border-[#5A5A5A]/10 bg-[#FDFBF7]/80"}),ee.map((G,Q)=>t.jsxs("div",{className:"flex-1 py-2 text-center flex flex-col items-center justify-center text-[#5A5A5A]",children:[t.jsx("span",{className:"text-xs font-bold",children:G}),t.jsx("span",{className:"text-[10px] text-[#999] font-medium leading-none mt-0.5",children:_E(f,x,Q)})]},Q))]}),t.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pb-20",children:t.jsxs("div",{className:"flex min-h-full",children:[t.jsx("div",{className:"w-8 flex flex-col bg-[#FDFBF7] sticky left-0 z-10 border-r border-[#5A5A5A]/10 shrink-0",children:q.map(G=>{const Q=c.periodTimes[G-1];return t.jsxs("div",{className:"h-14 flex flex-col items-center justify-center text-[10px] font-bold text-[#999] border-b border-dashed border-[#5A5A5A]/10 last:border-b-0 box-border",children:[t.jsx("span",{children:G}),Q&&t.jsxs("span",{className:"text-[8px] font-normal scale-90 mt-0.5 opacity-60 flex flex-col items-center leading-none gap-0.5",children:[t.jsx("span",{children:Q.startTime}),t.jsx("span",{children:"|"}),t.jsx("span",{children:Q.endTime})]})]},G)})}),t.jsx("div",{className:"flex-1 flex",children:ee.map((G,Q)=>t.jsx("div",{className:"flex-1 flex flex-col border-r border-dashed border-[#5A5A5A]/10 last:border-r-0 min-w-[60px] relative",children:(()=>{const le=[];let ne=1;for(;ne<=c.totalPeriods;){const ve=ne,se=e.find(ge=>ge.day===Q&&ge.startPeriod===ve&&ge.weeks.includes(x));if(se){const ge=se.endPeriod-se.startPeriod+1;le.push(t.jsx("div",{onClick:()=>L(se),className:"w-full p-0.5 absolute z-10",style:{top:`${(se.startPeriod-1)*56}px`,height:`${ge*56}px`},children:t.jsxs(xe.div,{className:"w-full h-full rounded-lg p-1 flex flex-col justify-center items-center shadow-sm active:scale-95 transition-transform cursor-pointer border border-black/5",style:{backgroundColor:se.color},children:[t.jsx("span",{className:"text-[10px] font-bold text-[#5A5A5A] text-center leading-tight line-clamp-3 break-all",children:se.subject}),se.room&&t.jsxs("span",{className:"text-[8px] text-[#5A5A5A]/70 mt-0.5 scale-90",children:["@",se.room]})]})},`course-${se.id}`))}ne++}const ie=q.map(ve=>t.jsx("div",{onClick:()=>L(void 0,{day:Q,period:ve}),className:"h-14 border-b border-dashed border-[#5A5A5A]/10 w-full box-border"},`slot-${ve}`));return t.jsxs(t.Fragment,{children:[ie,le]})})()},Q))})]})}),t.jsx(Ie,{children:(i||s)&&t.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/20 backdrop-blur-[1px] p-6",children:t.jsxs(xe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:400,damping:30},className:"bg-[#FDFBF7] w-full max-w-xs max-h-[85vh] flex flex-col rounded-2xl shadow-xl border-2 border-[#5A5A5A]/10 relative",children:[t.jsxs("div",{className:"p-4 border-b border-[#5A5A5A]/10 flex justify-between items-center bg-white/50 rounded-t-2xl",children:[t.jsx("h3",{className:"font-bold text-[#5A5A5A]",children:i?"":""}),t.jsx("button",{onClick:z,className:"p-1 text-[#999] hover:text-[#5A5A5A] active:scale-90 transition-transform",children:t.jsx(ht,{className:"w-5 h-5"})})]}),t.jsx("div",{className:"overflow-y-auto p-5 space-y-4 custom-scrollbar",children:t.jsxs("div",{className:"space-y-3",children:[t.jsx("input",{type:"text",value:y,onChange:G=>g(G.target.value),placeholder:"",autoFocus:!i,className:"w-full bg-white border border-[#E0E0E0] rounded-lg px-3 py-2 text-sm outline-none focus:border-[#5A5A5A]"}),t.jsx("input",{type:"text",value:k,onChange:G=>w(G.target.value),placeholder:" ()",className:"w-full bg-white border border-[#E0E0E0] rounded-lg px-3 py-2 text-sm outline-none focus:border-[#5A5A5A]"}),t.jsxs("div",{className:"flex gap-2 items-center",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"text-xs text-[#999] block mb-1",children:""}),t.jsx("select",{value:A,onChange:G=>{const Q=parseInt(G.target.value);P(Q),Q>B&&$(Q)},className:"w-full bg-white border border-[#E0E0E0] rounded-lg px-2 py-1.5 text-sm outline-none focus:border-[#5A5A5A]",children:q.map(G=>t.jsxs("option",{value:G,children:[" ",G," "]},G))})]}),t.jsx("span",{className:"mt-5 text-[#999]",children:"-"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"text-xs text-[#999] block mb-1",children:""}),t.jsx("select",{value:B,onChange:G=>{const Q=parseInt(G.target.value);$(Q),Q<A&&P(Q)},className:"w-full bg-white border border-[#E0E0E0] rounded-lg px-2 py-1.5 text-sm outline-none focus:border-[#5A5A5A]",children:q.map(G=>t.jsxs("option",{value:G,children:[" ",G," "]},G))})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"text-xs text-[#999]",children:[": ",t.jsxs("span",{className:"text-[#5A5A5A] font-medium",children:[D.length,""]})]}),t.jsxs("div",{className:"flex gap-2 text-xs",children:[t.jsx("button",{onClick:Z,className:"flex-1 py-1.5 bg-white border border-[#E0E0E0] rounded hover:bg-[#F5F5F5]",children:""}),t.jsx("button",{onClick:O,className:"flex-1 py-1.5 bg-white border border-[#E0E0E0] rounded hover:bg-[#F5F5F5]",children:""}),t.jsx("button",{onClick:V,className:"flex-1 py-1.5 bg-white border border-[#E0E0E0] rounded hover:bg-[#F5F5F5]",children:""})]}),t.jsx("button",{onClick:()=>K(!H),className:"w-full py-1.5 text-xs text-[#5A5A5A] bg-[#F5F5F5] rounded flex items-center justify-center gap-1",children:H?"":""}),H&&t.jsx("div",{className:"grid grid-cols-5 gap-1.5 p-2 bg-white rounded-lg border border-[#E0E0E0]",children:Array.from({length:c.totalWeeks},(G,Q)=>Q+1).map(G=>{const Q=D.includes(G);return t.jsx("button",{onClick:()=>{T(Q?D.filter(le=>le!==G):[...D,G].sort((le,ne)=>le-ne))},className:`aspect-square flex items-center justify-center text-xs rounded transition-colors ${Q?"bg-[#5A5A5A] text-white":"bg-[#F9F9F9] text-[#999]"}`,children:G},G)})})]}),t.jsx("div",{className:"flex flex-wrap gap-2 mt-2 justify-center pt-2 border-t border-dashed border-[#5A5A5A]/10",children:oc.map(G=>t.jsx("button",{onClick:()=>N(G),className:`w-6 h-6 rounded-full border-2 transition-transform ${C===G?"border-[#5A5A5A] scale-110":"border-transparent active:scale-90"}`,style:{backgroundColor:G}},G))}),t.jsxs("div",{className:"flex gap-2 mt-4",children:[i&&t.jsx("button",{onClick:U,className:"flex-1 py-2 text-sm font-bold text-[#FF6B6B] bg-[#FFF0F0] rounded-lg active:scale-95 transition-transform",children:""}),t.jsx("button",{onClick:R,className:"flex-[2] py-2 text-sm font-bold text-white bg-[#5A5A5A] rounded-lg shadow-md active:scale-95 transition-transform",children:""})]})]})})]})})}),t.jsx(Ie,{children:u&&t.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/20 backdrop-blur-[1px] p-4",children:t.jsxs(xe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:400,damping:30},className:"bg-[#FDFBF7] w-full max-w-sm max-h-[80vh] flex flex-col rounded-2xl shadow-xl border-2 border-[#5A5A5A]/10 relative overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-[#5A5A5A]/10 flex justify-between items-center bg-white/50",children:[t.jsx("h3",{className:"font-bold text-[#5A5A5A]",children:""}),t.jsx("button",{onClick:()=>m(!1),className:"p-1 text-[#999] hover:text-[#5A5A5A] active:scale-90 transition-transform",children:t.jsx(ht,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"overflow-y-auto p-4 space-y-6 flex-1 custom-scrollbar",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm font-bold text-[#5A5A5A]",children:""}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"text-xs text-[#999] block mb-1",children:""}),t.jsx("input",{type:"date",value:c.startDate,onChange:G=>S({...c,startDate:G.target.value}),className:"w-full bg-white border border-[#E0E0E0] rounded-lg px-2 py-1.5 text-xs outline-none focus:border-[#5A5A5A]"})]}),t.jsxs("div",{className:"w-20",children:[t.jsx("span",{className:"text-xs text-[#999] block mb-1",children:""}),t.jsx("input",{type:"number",min:1,max:30,value:c.totalWeeks,onChange:G=>S({...c,totalWeeks:parseInt(G.target.value)||20}),className:"w-full bg-white border border-[#E0E0E0] rounded-lg px-2 py-1.5 text-xs text-center outline-none focus:border-[#5A5A5A]"})]})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("label",{className:"text-sm font-bold text-[#5A5A5A]",children:""}),t.jsx("button",{onClick:()=>S({...c,showWeekends:!c.showWeekends}),className:`w-12 h-6 rounded-full relative transition-colors duration-200 ${c.showWeekends?"bg-[#5A5A5A]":"bg-[#E0E0E0]"}`,children:t.jsx(xe.div,{animate:{x:c.showWeekends?26:2},className:"w-5 h-5 bg-white rounded-full absolute top-0.5 shadow-sm"})})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("label",{className:"text-sm font-bold text-[#5A5A5A]",children:""}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>c.totalPeriods>1&&S({...c,totalPeriods:c.totalPeriods-1}),className:"w-8 h-8 rounded-lg bg-[#F5F5F5] flex items-center justify-center text-[#5A5A5A] active:scale-90",children:"-"}),t.jsx("span",{className:"w-8 text-center font-bold text-[#5A5A5A]",children:c.totalPeriods}),t.jsx("button",{onClick:()=>c.totalPeriods<20&&S({...c,totalPeriods:c.totalPeriods+1}),className:"w-8 h-8 rounded-lg bg-[#F5F5F5] flex items-center justify-center text-[#5A5A5A] active:scale-90",children:"+"})]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-xs font-bold text-[#999] mb-3 uppercase tracking-wider",children:""}),t.jsx("div",{className:"space-y-2",children:Array.from({length:c.totalPeriods},(G,Q)=>{const le=c.periodTimes[Q]||{startTime:"08:00",endTime:"08:45"};return t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx("span",{className:"w-8 font-bold text-[#5A5A5A] text-center",children:Q+1}),t.jsx("input",{type:"time",value:le.startTime,onChange:ne=>{const ie=[...c.periodTimes];ie[Q]||(ie[Q]={period:Q+1,startTime:"08:00",endTime:"08:45"}),ie[Q].startTime=ne.target.value,S({...c,periodTimes:ie})},className:"flex-1 bg-white border border-[#E0E0E0] rounded px-2 py-1 text-xs text-center outline-none focus:border-[#5A5A5A]"}),t.jsx("span",{className:"text-[#999]",children:"-"}),t.jsx("input",{type:"time",value:le.endTime,onChange:ne=>{const ie=[...c.periodTimes];ie[Q]||(ie[Q]={period:Q+1,startTime:"08:00",endTime:"08:45"}),ie[Q].endTime=ne.target.value,S({...c,periodTimes:ie})},className:"flex-1 bg-white border border-[#E0E0E0] rounded px-2 py-1 text-xs text-center outline-none focus:border-[#5A5A5A]"})]},Q)})})]}),t.jsx("div",{className:"pt-4 border-t border-[#5A5A5A]/10",children:t.jsxs("button",{onClick:W,className:"w-full py-3 flex items-center justify-center gap-2 text-[#FF6B6B] bg-[#FFF0F0] rounded-xl font-bold active:scale-95 transition-transform",children:[t.jsx(Dn,{className:"w-4 h-4"})," ()"]})})]})]})})})]})}const t1={shareEnabled:!1,shareScope:"all",shareCharacterId:""};function EE({onBack:e}){const[n,s]=j.useState("todo"),[a,i]=j.useState(!1),[l,c]=j.useState(!1),[d,u]=j.useState(!1),[m,p]=j.useState(t1),[f,x]=j.useState([]),[b,y]=j.useState(!1),g=[{id:"todo",label:"",icon:K8},{id:"calendar",label:"",icon:ur},{id:"timetable",label:"",icon:l7}];j.useEffect(()=>{k(),w()},[]);const k=async()=>{try{const N=await ae.get(te.SCHEDULE,"schedule_settings");N&&p({...t1,...N})}catch(N){console.error("Failed to load schedule settings",N)}},w=async()=>{try{const N=await ae.get(te.CHARACTERS,"characters");N&&x(N)}catch(N){console.error("Failed to load characters",N)}},C=async()=>{try{await ae.set(te.SCHEDULE,"schedule_settings",m),i(!1),c(!0),setTimeout(()=>c(!1),2e3)}catch{u(!0),setTimeout(()=>u(!1),2e3)}};return t.jsxs("div",{className:"flex flex-col h-full bg-[#FDFBF7] text-[#5A5A5A] relative overflow-hidden",children:[t.jsxs("div",{className:"w-full relative z-10 pt-8 pb-4 px-6 flex items-center justify-between bg-[#FDFBF7]",children:[t.jsx("button",{onClick:e,className:"w-10 h-10 flex items-center justify-center rounded-full active:bg-black/10 active:scale-90 transition-all duration-200",children:t.jsx(Zf,{className:"w-6 h-6 text-[#5A5A5A]",strokeWidth:2})}),t.jsx("div",{className:"text-lg font-bold tracking-widest text-[#5A5A5A] border-b-2 border-dashed border-[#5A5A5A]/30 pb-1",children:g.find(N=>N.id===n)?.label}),t.jsx("button",{onClick:()=>i(!0),className:"w-10 h-10 flex items-center justify-center rounded-full active:bg-black/10 active:scale-90 transition-all duration-200 text-[#5A5A5A]",children:t.jsx(op,{className:"w-5 h-5",strokeWidth:2})})]}),t.jsx("div",{className:"absolute top-16 right-[-20px] w-24 h-6 bg-[#E8DCC4] rotate-[15deg] opacity-60 pointer-events-none z-0",style:{backgroundImage:"repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255,255,255,0.5) 10px, rgba(255,255,255,0.5) 20px)"}}),t.jsx("div",{className:"absolute top-20 left-[-10px] w-16 h-4 bg-[#D4E0D6] rotate-[-5deg] opacity-60 pointer-events-none z-0",style:{backgroundImage:"repeating-linear-gradient(-45deg, transparent, transparent 5px, rgba(255,255,255,0.5) 5px, rgba(255,255,255,0.5) 10px)"}}),t.jsx("div",{className:"flex-1 overflow-hidden relative w-full",children:t.jsx(Ie,{mode:"wait",children:t.jsxs(xe.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2,ease:"easeInOut"},className:"h-full w-full",children:[n==="todo"&&t.jsx(jE,{}),n==="calendar"&&t.jsx(NE,{}),n==="timetable"&&t.jsx(AE,{})]},n)})}),t.jsx("div",{className:"bg-[#FDFBF7] border-t border-dashed border-[#5A5A5A]/20 pb-safe pt-2 px-6 w-full",children:t.jsx("div",{className:"w-full flex justify-between items-center h-16 md:justify-center md:gap-32",children:g.map(N=>{const A=n===N.id;return t.jsxs("button",{onClick:()=>s(N.id),className:"flex flex-col items-center justify-center gap-1 w-20 relative group active:scale-95 transition-transform duration-150",children:[t.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center transition-all duration-300 ${A?"bg-[#5A5A5A] text-[#FDFBF7] shadow-lg scale-110 rotate-[-3deg]":"bg-transparent text-[#9A9A9A]"}`,children:t.jsx(N.icon,{className:"w-5 h-5",strokeWidth:A?2.5:2})}),t.jsx("span",{className:`text-[10px] font-bold tracking-wider transition-colors duration-300 ${A?"text-[#5A5A5A]":"text-[#9A9A9A]"}`,children:N.label}),A&&t.jsx(xe.div,{layoutId:"activeTabDot",className:"absolute -bottom-1 w-1 h-1 bg-[#5A5A5A] rounded-full",transition:{type:"spring",stiffness:300,damping:30}})]},N.id)})})}),a&&t.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-[1px] z-50 flex items-center justify-center p-6",children:t.jsxs(xe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:400,damping:30},className:"bg-[#FDFBF7] w-full max-w-[320px] rounded-2xl shadow-xl border-2 border-[#5A5A5A]/10 relative overflow-hidden",children:[t.jsxs("div",{className:"bg-white/50 border-b border-dashed border-[#5A5A5A]/10 p-4 flex justify-between items-center",children:[t.jsx("span",{className:"text-lg font-bold text-[#5A5A5A]",children:""}),t.jsx("button",{onClick:()=>i(!1),className:"p-1 text-[#999] hover:text-[#5A5A5A] active:scale-90 transition-transform",children:t.jsx(ht,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-bold text-[#5A5A5A]",children:""}),t.jsx("p",{className:"text-xs text-[#999] mt-1",children:""})]}),t.jsx("button",{onClick:()=>p({...m,shareEnabled:!m.shareEnabled}),className:`flex-shrink-0 w-12 h-6 rounded-full transition-colors relative ${m.shareEnabled?"bg-[#5A5A5A]":"bg-[#E0E0E0]"}`,children:t.jsx(xe.div,{animate:{x:m.shareEnabled?26:2},transition:{type:"spring",stiffness:500,damping:30},className:"w-5 h-5 bg-white rounded-full absolute top-0.5 shadow-sm"})})]}),t.jsx(Ie,{children:m.shareEnabled&&t.jsxs(xe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4 pt-4 border-t border-dashed border-[#5A5A5A]/10 overflow-hidden",children:[t.jsx("label",{className:"text-xs font-bold text-[#999] block mb-2",children:""}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("button",{onClick:()=>p({...m,shareScope:"all"}),className:`p-3 rounded-xl border flex flex-col items-center gap-2 transition-all ${m.shareScope==="all"?"bg-[#5A5A5A] border-[#5A5A5A] text-white":"bg-white border-[#E0E0E0] text-[#999]"}`,children:[t.jsx(qc,{className:"w-5 h-5"}),t.jsx("span",{className:"text-xs font-bold",children:""})]}),t.jsxs("button",{onClick:()=>p({...m,shareScope:"specific"}),className:`p-3 rounded-xl border flex flex-col items-center gap-2 transition-all ${m.shareScope==="specific"?"bg-[#5A5A5A] border-[#5A5A5A] text-white":"bg-white border-[#E0E0E0] text-[#999]"}`,children:[t.jsx(An,{className:"w-5 h-5"}),t.jsx("span",{className:"text-xs font-bold",children:""})]})]}),m.shareScope==="specific"&&t.jsxs("div",{className:"mt-2",children:[t.jsxs("button",{onClick:()=>y(!b),className:"w-full bg-white border border-[#E0E0E0] px-4 py-2.5 rounded-lg text-xs font-bold text-[#5A5A5A] flex items-center justify-between active:bg-[#F5F5F5] transition-colors",children:[t.jsx("div",{className:"flex items-center gap-2 pl-1",children:t.jsx("span",{children:f.find(N=>N.id===m.shareCharacterId)?.name||""})}),t.jsx(os,{className:`w-4 h-4 text-[#999] transition-transform ${b?"rotate-90":""}`})]}),t.jsx(Ie,{children:b&&t.jsx(xe.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:t.jsxs("div",{className:"mt-2 bg-white border border-[#E0E0E0] rounded-xl shadow-sm max-h-48 overflow-y-auto p-1 custom-scrollbar",children:[f.length===0&&t.jsx("div",{className:"p-3 text-center text-xs text-[#999]",children:""}),f.map(N=>t.jsx("button",{onClick:()=>{p({...m,shareCharacterId:N.id}),y(!1)},className:`w-full text-left px-3 py-2 rounded-lg text-xs font-bold flex items-center gap-2 mb-1 transition-colors ${m.shareCharacterId===N.id?"bg-[#5A5A5A] text-white":"hover:bg-[#F5F5F5] text-[#5A5A5A]"}`,children:N.name},N.id))]})})})]})]})}),t.jsxs("button",{onClick:C,className:"w-full bg-[#5A5A5A] text-white py-3 rounded-xl font-bold text-sm shadow-md active:scale-[0.98] transition-transform flex items-center justify-center gap-2",children:[t.jsx(wt,{className:"w-4 h-4"}),""]})]})]})}),l&&t.jsx("div",{className:"fixed top-[90px] inset-x-0 z-[100] flex justify-center pointer-events-none",children:t.jsxs(xe.div,{initial:{scale:.9,opacity:0,y:-10},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},className:"mx-auto w-fit flex items-center gap-2 px-4 py-3 pointer-events-auto shadow-sm",style:{background:"rgba(253, 251, 247, 0.95)",backdropFilter:"blur(4px)",border:"1px dashed rgba(90, 90, 90, 0.3)",borderRadius:"16px",color:"#5A5A5A",fontSize:"13px",fontWeight:"bold"},children:[t.jsx("div",{className:"w-5 h-5 rounded-full bg-[#5A5A5A] flex items-center justify-center text-[#FDFBF7]",children:t.jsx(wt,{className:"w-3 h-3",strokeWidth:3})}),t.jsx("span",{children:""})]})}),d&&t.jsx("div",{className:"fixed top-[90px] inset-x-0 z-[100] flex justify-center pointer-events-none",children:t.jsxs(xe.div,{initial:{scale:.9,opacity:0,y:-10},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},className:"mx-auto w-fit flex items-center gap-2 px-4 py-3 pointer-events-auto shadow-sm",style:{background:"rgba(253, 251, 247, 0.95)",backdropFilter:"blur(4px)",border:"1px dashed rgba(229, 115, 115, 0.5)",borderRadius:"16px",color:"#5A5A5A",fontSize:"13px",fontWeight:"bold"},children:[t.jsx("div",{className:"w-5 h-5 rounded-full bg-[#E57373] flex items-center justify-center text-white",children:t.jsx(ht,{className:"w-3 h-3",strokeWidth:3})}),t.jsx("span",{children:""})]})})]})}function TE({onClose:e}){return t.jsx("div",{className:"fixed inset-0 z-50 bg-[#FDFBF7] font-['Source_Han_Sans_CN_VF',sans-serif] overflow-hidden",children:t.jsx("div",{className:"h-full w-full",children:t.jsx(EE,{onBack:e})})})}function n1(e,[n,s]){return Math.min(s,Math.max(n,e))}function s1(e){const n=DE(e),s=j.forwardRef((a,i)=>{const{children:l,...c}=a,d=j.Children.toArray(l),u=d.find(ME);if(u){const m=u.props.children,p=d.map(f=>f===u?j.Children.count(m)>1?j.Children.only(null):j.isValidElement(m)?m.props.children:null:f);return t.jsx(n,{...c,ref:i,children:j.isValidElement(m)?j.cloneElement(m,void 0,p):null})}return t.jsx(n,{...c,ref:i,children:l})});return s.displayName=`${e}.Slot`,s}function DE(e){const n=j.forwardRef((s,a)=>{const{children:i,...l}=s;if(j.isValidElement(i)){const c=PE(i),d=IE(l,i.props);return i.type!==j.Fragment&&(d.ref=a?Ro(a,c):c),j.cloneElement(i,d)}return j.Children.count(i)>1?j.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var FE=Symbol("radix.slottable");function ME(e){return j.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===FE}function IE(e,n){const s={...n};for(const a in n){const i=e[a],l=n[a];/^on[A-Z]/.test(a)?i&&l?s[a]=(...d)=>{const u=l(...d);return i(...d),u}:i&&(s[a]=i):a==="style"?s[a]={...i,...l}:a==="className"&&(s[a]=[i,l].filter(Boolean).join(" "))}return{...e,...s}}function PE(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}function RE(e){const n=e+"CollectionProvider",[s,a]=Ci(n),[i,l]=s(n,{collectionRef:{current:null},itemMap:new Map}),c=g=>{const{scope:k,children:w}=g,C=Re.useRef(null),N=Re.useRef(new Map).current;return t.jsx(i,{scope:k,itemMap:N,collectionRef:C,children:w})};c.displayName=n;const d=e+"CollectionSlot",u=s1(d),m=Re.forwardRef((g,k)=>{const{scope:w,children:C}=g,N=l(d,w),A=Bt(k,N.collectionRef);return t.jsx(u,{ref:A,children:C})});m.displayName=d;const p=e+"CollectionItemSlot",f="data-radix-collection-item",x=s1(p),b=Re.forwardRef((g,k)=>{const{scope:w,children:C,...N}=g,A=Re.useRef(null),P=Bt(k,A),B=l(p,w);return Re.useEffect(()=>(B.itemMap.set(A,{ref:A,...N}),()=>void B.itemMap.delete(A))),t.jsx(x,{[f]:"",ref:P,children:C})});b.displayName=p;function y(g){const k=l(e+"CollectionConsumer",g);return Re.useCallback(()=>{const C=k.collectionRef.current;if(!C)return[];const N=Array.from(C.querySelectorAll(`[${f}]`));return Array.from(k.itemMap.values()).sort((B,$)=>N.indexOf(B.ref.current)-N.indexOf($.ref.current))},[k.collectionRef,k.itemMap])}return[{Provider:c,Slot:m,ItemSlot:b},y,a]}var BE=j.createContext(void 0);function LE(e){const n=j.useContext(BE);return e||n||"ltr"}const zE=["top","right","bottom","left"],Or=Math.min,ss=Math.max,Rc=Math.round,lc=Math.floor,qs=e=>({x:e,y:e}),OE={left:"right",right:"left",bottom:"top",top:"bottom"},$E={start:"end",end:"start"};function rh(e,n,s){return ss(e,Or(n,s))}function fr(e,n){return typeof e=="function"?e(n):e}function hr(e){return e.split("-")[0]}function Di(e){return e.split("-")[1]}function xp(e){return e==="x"?"y":"x"}function gp(e){return e==="y"?"height":"width"}const VE=new Set(["top","bottom"]);function Ws(e){return VE.has(hr(e))?"y":"x"}function bp(e){return xp(Ws(e))}function HE(e,n,s){s===void 0&&(s=!1);const a=Di(e),i=bp(e),l=gp(i);let c=i==="x"?a===(s?"end":"start")?"right":"left":a==="start"?"bottom":"top";return n.reference[l]>n.floating[l]&&(c=Bc(c)),[c,Bc(c)]}function UE(e){const n=Bc(e);return[ah(e),n,ah(n)]}function ah(e){return e.replace(/start|end/g,n=>$E[n])}const r1=["left","right"],a1=["right","left"],WE=["top","bottom"],KE=["bottom","top"];function GE(e,n,s){switch(e){case"top":case"bottom":return s?n?a1:r1:n?r1:a1;case"left":case"right":return n?WE:KE;default:return[]}}function YE(e,n,s,a){const i=Di(e);let l=GE(hr(e),s==="start",a);return i&&(l=l.map(c=>c+"-"+i),n&&(l=l.concat(l.map(ah)))),l}function Bc(e){return e.replace(/left|right|bottom|top/g,n=>OE[n])}function qE(e){return{top:0,right:0,bottom:0,left:0,...e}}function Xv(e){return typeof e!="number"?qE(e):{top:e,right:e,bottom:e,left:e}}function Lc(e){const{x:n,y:s,width:a,height:i}=e;return{width:a,height:i,top:s,left:n,right:n+a,bottom:s+i,x:n,y:s}}function i1(e,n,s){let{reference:a,floating:i}=e;const l=Ws(n),c=bp(n),d=gp(c),u=hr(n),m=l==="y",p=a.x+a.width/2-i.width/2,f=a.y+a.height/2-i.height/2,x=a[d]/2-i[d]/2;let b;switch(u){case"top":b={x:p,y:a.y-i.height};break;case"bottom":b={x:p,y:a.y+a.height};break;case"right":b={x:a.x+a.width,y:f};break;case"left":b={x:a.x-i.width,y:f};break;default:b={x:a.x,y:a.y}}switch(Di(n)){case"start":b[c]-=x*(s&&m?-1:1);break;case"end":b[c]+=x*(s&&m?-1:1);break}return b}const ZE=async(e,n,s)=>{const{placement:a="bottom",strategy:i="absolute",middleware:l=[],platform:c}=s,d=l.filter(Boolean),u=await(c.isRTL==null?void 0:c.isRTL(n));let m=await c.getElementRects({reference:e,floating:n,strategy:i}),{x:p,y:f}=i1(m,a,u),x=a,b={},y=0;for(let g=0;g<d.length;g++){const{name:k,fn:w}=d[g],{x:C,y:N,data:A,reset:P}=await w({x:p,y:f,initialPlacement:a,placement:x,strategy:i,middlewareData:b,rects:m,platform:c,elements:{reference:e,floating:n}});p=C??p,f=N??f,b={...b,[k]:{...b[k],...A}},P&&y<=50&&(y++,typeof P=="object"&&(P.placement&&(x=P.placement),P.rects&&(m=P.rects===!0?await c.getElementRects({reference:e,floating:n,strategy:i}):P.rects),{x:p,y:f}=i1(m,x,u)),g=-1)}return{x:p,y:f,placement:x,strategy:i,middlewareData:b}};async function To(e,n){var s;n===void 0&&(n={});const{x:a,y:i,platform:l,rects:c,elements:d,strategy:u}=e,{boundary:m="clippingAncestors",rootBoundary:p="viewport",elementContext:f="floating",altBoundary:x=!1,padding:b=0}=fr(n,e),y=Xv(b),k=d[x?f==="floating"?"reference":"floating":f],w=Lc(await l.getClippingRect({element:(s=await(l.isElement==null?void 0:l.isElement(k)))==null||s?k:k.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(d.floating)),boundary:m,rootBoundary:p,strategy:u})),C=f==="floating"?{x:a,y:i,width:c.floating.width,height:c.floating.height}:c.reference,N=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d.floating)),A=await(l.isElement==null?void 0:l.isElement(N))?await(l.getScale==null?void 0:l.getScale(N))||{x:1,y:1}:{x:1,y:1},P=Lc(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:C,offsetParent:N,strategy:u}):C);return{top:(w.top-P.top+y.top)/A.y,bottom:(P.bottom-w.bottom+y.bottom)/A.y,left:(w.left-P.left+y.left)/A.x,right:(P.right-w.right+y.right)/A.x}}const QE=e=>({name:"arrow",options:e,async fn(n){const{x:s,y:a,placement:i,rects:l,platform:c,elements:d,middlewareData:u}=n,{element:m,padding:p=0}=fr(e,n)||{};if(m==null)return{};const f=Xv(p),x={x:s,y:a},b=bp(i),y=gp(b),g=await c.getDimensions(m),k=b==="y",w=k?"top":"left",C=k?"bottom":"right",N=k?"clientHeight":"clientWidth",A=l.reference[y]+l.reference[b]-x[b]-l.floating[y],P=x[b]-l.reference[b],B=await(c.getOffsetParent==null?void 0:c.getOffsetParent(m));let $=B?B[N]:0;(!$||!await(c.isElement==null?void 0:c.isElement(B)))&&($=d.floating[N]||l.floating[y]);const D=A/2-P/2,T=$/2-g[y]/2-1,H=Or(f[w],T),K=Or(f[C],T),E=H,I=$-g[y]-K,S=$/2-g[y]/2+D,L=rh(E,S,I),z=!u.arrow&&Di(i)!=null&&S!==L&&l.reference[y]/2-(S<E?H:K)-g[y]/2<0,R=z?S<E?S-E:S-I:0;return{[b]:x[b]+R,data:{[b]:L,centerOffset:S-L-R,...z&&{alignmentOffset:R}},reset:z}}}),XE=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(n){var s,a;const{placement:i,middlewareData:l,rects:c,initialPlacement:d,platform:u,elements:m}=n,{mainAxis:p=!0,crossAxis:f=!0,fallbackPlacements:x,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:g=!0,...k}=fr(e,n);if((s=l.arrow)!=null&&s.alignmentOffset)return{};const w=hr(i),C=Ws(d),N=hr(d)===d,A=await(u.isRTL==null?void 0:u.isRTL(m.floating)),P=x||(N||!g?[Bc(d)]:UE(d)),B=y!=="none";!x&&B&&P.push(...YE(d,g,y,A));const $=[d,...P],D=await To(n,k),T=[];let H=((a=l.flip)==null?void 0:a.overflows)||[];if(p&&T.push(D[w]),f){const S=HE(i,c,A);T.push(D[S[0]],D[S[1]])}if(H=[...H,{placement:i,overflows:T}],!T.every(S=>S<=0)){var K,E;const S=(((K=l.flip)==null?void 0:K.index)||0)+1,L=$[S];if(L&&(!(f==="alignment"?C!==Ws(L):!1)||H.every(U=>Ws(U.placement)===C?U.overflows[0]>0:!0)))return{data:{index:S,overflows:H},reset:{placement:L}};let z=(E=H.filter(R=>R.overflows[0]<=0).sort((R,U)=>R.overflows[1]-U.overflows[1])[0])==null?void 0:E.placement;if(!z)switch(b){case"bestFit":{var I;const R=(I=H.filter(U=>{if(B){const W=Ws(U.placement);return W===C||W==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(W=>W>0).reduce((W,Z)=>W+Z,0)]).sort((U,W)=>U[1]-W[1])[0])==null?void 0:I[0];R&&(z=R);break}case"initialPlacement":z=d;break}if(i!==z)return{reset:{placement:z}}}return{}}}};function o1(e,n){return{top:e.top-n.height,right:e.right-n.width,bottom:e.bottom-n.height,left:e.left-n.width}}function l1(e){return zE.some(n=>e[n]>=0)}const JE=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(n){const{rects:s}=n,{strategy:a="referenceHidden",...i}=fr(e,n);switch(a){case"referenceHidden":{const l=await To(n,{...i,elementContext:"reference"}),c=o1(l,s.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:l1(c)}}}case"escaped":{const l=await To(n,{...i,altBoundary:!0}),c=o1(l,s.floating);return{data:{escapedOffsets:c,escaped:l1(c)}}}default:return{}}}}},Jv=new Set(["left","top"]);async function eT(e,n){const{placement:s,platform:a,elements:i}=e,l=await(a.isRTL==null?void 0:a.isRTL(i.floating)),c=hr(s),d=Di(s),u=Ws(s)==="y",m=Jv.has(c)?-1:1,p=l&&u?-1:1,f=fr(n,e);let{mainAxis:x,crossAxis:b,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return d&&typeof y=="number"&&(b=d==="end"?y*-1:y),u?{x:b*p,y:x*m}:{x:x*m,y:b*p}}const tT=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(n){var s,a;const{x:i,y:l,placement:c,middlewareData:d}=n,u=await eT(n,e);return c===((s=d.offset)==null?void 0:s.placement)&&(a=d.arrow)!=null&&a.alignmentOffset?{}:{x:i+u.x,y:l+u.y,data:{...u,placement:c}}}}},nT=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(n){const{x:s,y:a,placement:i}=n,{mainAxis:l=!0,crossAxis:c=!1,limiter:d={fn:k=>{let{x:w,y:C}=k;return{x:w,y:C}}},...u}=fr(e,n),m={x:s,y:a},p=await To(n,u),f=Ws(hr(i)),x=xp(f);let b=m[x],y=m[f];if(l){const k=x==="y"?"top":"left",w=x==="y"?"bottom":"right",C=b+p[k],N=b-p[w];b=rh(C,b,N)}if(c){const k=f==="y"?"top":"left",w=f==="y"?"bottom":"right",C=y+p[k],N=y-p[w];y=rh(C,y,N)}const g=d.fn({...n,[x]:b,[f]:y});return{...g,data:{x:g.x-s,y:g.y-a,enabled:{[x]:l,[f]:c}}}}}},sT=function(e){return e===void 0&&(e={}),{options:e,fn(n){const{x:s,y:a,placement:i,rects:l,middlewareData:c}=n,{offset:d=0,mainAxis:u=!0,crossAxis:m=!0}=fr(e,n),p={x:s,y:a},f=Ws(i),x=xp(f);let b=p[x],y=p[f];const g=fr(d,n),k=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(u){const N=x==="y"?"height":"width",A=l.reference[x]-l.floating[N]+k.mainAxis,P=l.reference[x]+l.reference[N]-k.mainAxis;b<A?b=A:b>P&&(b=P)}if(m){var w,C;const N=x==="y"?"width":"height",A=Jv.has(hr(i)),P=l.reference[f]-l.floating[N]+(A&&((w=c.offset)==null?void 0:w[f])||0)+(A?0:k.crossAxis),B=l.reference[f]+l.reference[N]+(A?0:((C=c.offset)==null?void 0:C[f])||0)-(A?k.crossAxis:0);y<P?y=P:y>B&&(y=B)}return{[x]:b,[f]:y}}}},rT=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(n){var s,a;const{placement:i,rects:l,platform:c,elements:d}=n,{apply:u=()=>{},...m}=fr(e,n),p=await To(n,m),f=hr(i),x=Di(i),b=Ws(i)==="y",{width:y,height:g}=l.floating;let k,w;f==="top"||f==="bottom"?(k=f,w=x===(await(c.isRTL==null?void 0:c.isRTL(d.floating))?"start":"end")?"left":"right"):(w=f,k=x==="end"?"top":"bottom");const C=g-p.top-p.bottom,N=y-p.left-p.right,A=Or(g-p[k],C),P=Or(y-p[w],N),B=!n.middlewareData.shift;let $=A,D=P;if((s=n.middlewareData.shift)!=null&&s.enabled.x&&(D=N),(a=n.middlewareData.shift)!=null&&a.enabled.y&&($=C),B&&!x){const H=ss(p.left,0),K=ss(p.right,0),E=ss(p.top,0),I=ss(p.bottom,0);b?D=y-2*(H!==0||K!==0?H+K:ss(p.left,p.right)):$=g-2*(E!==0||I!==0?E+I:ss(p.top,p.bottom))}await u({...n,availableWidth:D,availableHeight:$});const T=await c.getDimensions(d.floating);return y!==T.width||g!==T.height?{reset:{rects:!0}}:{}}}};function Jc(){return typeof window<"u"}function Fi(e){return ey(e)?(e.nodeName||"").toLowerCase():"#document"}function rs(e){var n;return(e==null||(n=e.ownerDocument)==null?void 0:n.defaultView)||window}function Qs(e){var n;return(n=(ey(e)?e.ownerDocument:e.document)||window.document)==null?void 0:n.documentElement}function ey(e){return Jc()?e instanceof Node||e instanceof rs(e).Node:!1}function Ds(e){return Jc()?e instanceof Element||e instanceof rs(e).Element:!1}function Zs(e){return Jc()?e instanceof HTMLElement||e instanceof rs(e).HTMLElement:!1}function c1(e){return!Jc()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof rs(e).ShadowRoot}const aT=new Set(["inline","contents"]);function Lo(e){const{overflow:n,overflowX:s,overflowY:a,display:i}=Fs(e);return/auto|scroll|overlay|hidden|clip/.test(n+a+s)&&!aT.has(i)}const iT=new Set(["table","td","th"]);function oT(e){return iT.has(Fi(e))}const lT=[":popover-open",":modal"];function ed(e){return lT.some(n=>{try{return e.matches(n)}catch{return!1}})}const cT=["transform","translate","scale","rotate","perspective"],dT=["transform","translate","scale","rotate","perspective","filter"],uT=["paint","layout","strict","content"];function vp(e){const n=yp(),s=Ds(e)?Fs(e):e;return cT.some(a=>s[a]?s[a]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!n&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!n&&(s.filter?s.filter!=="none":!1)||dT.some(a=>(s.willChange||"").includes(a))||uT.some(a=>(s.contain||"").includes(a))}function fT(e){let n=$r(e);for(;Zs(n)&&!Si(n);){if(vp(n))return n;if(ed(n))return null;n=$r(n)}return null}function yp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const hT=new Set(["html","body","#document"]);function Si(e){return hT.has(Fi(e))}function Fs(e){return rs(e).getComputedStyle(e)}function td(e){return Ds(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function $r(e){if(Fi(e)==="html")return e;const n=e.assignedSlot||e.parentNode||c1(e)&&e.host||Qs(e);return c1(n)?n.host:n}function ty(e){const n=$r(e);return Si(n)?e.ownerDocument?e.ownerDocument.body:e.body:Zs(n)&&Lo(n)?n:ty(n)}function Do(e,n,s){var a;n===void 0&&(n=[]),s===void 0&&(s=!0);const i=ty(e),l=i===((a=e.ownerDocument)==null?void 0:a.body),c=rs(i);if(l){const d=ih(c);return n.concat(c,c.visualViewport||[],Lo(i)?i:[],d&&s?Do(d):[])}return n.concat(i,Do(i,[],s))}function ih(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function ny(e){const n=Fs(e);let s=parseFloat(n.width)||0,a=parseFloat(n.height)||0;const i=Zs(e),l=i?e.offsetWidth:s,c=i?e.offsetHeight:a,d=Rc(s)!==l||Rc(a)!==c;return d&&(s=l,a=c),{width:s,height:a,$:d}}function wp(e){return Ds(e)?e:e.contextElement}function bi(e){const n=wp(e);if(!Zs(n))return qs(1);const s=n.getBoundingClientRect(),{width:a,height:i,$:l}=ny(n);let c=(l?Rc(s.width):s.width)/a,d=(l?Rc(s.height):s.height)/i;return(!c||!Number.isFinite(c))&&(c=1),(!d||!Number.isFinite(d))&&(d=1),{x:c,y:d}}const pT=qs(0);function sy(e){const n=rs(e);return!yp()||!n.visualViewport?pT:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function mT(e,n,s){return n===void 0&&(n=!1),!s||n&&s!==rs(e)?!1:n}function ja(e,n,s,a){n===void 0&&(n=!1),s===void 0&&(s=!1);const i=e.getBoundingClientRect(),l=wp(e);let c=qs(1);n&&(a?Ds(a)&&(c=bi(a)):c=bi(e));const d=mT(l,s,a)?sy(l):qs(0);let u=(i.left+d.x)/c.x,m=(i.top+d.y)/c.y,p=i.width/c.x,f=i.height/c.y;if(l){const x=rs(l),b=a&&Ds(a)?rs(a):a;let y=x,g=ih(y);for(;g&&a&&b!==y;){const k=bi(g),w=g.getBoundingClientRect(),C=Fs(g),N=w.left+(g.clientLeft+parseFloat(C.paddingLeft))*k.x,A=w.top+(g.clientTop+parseFloat(C.paddingTop))*k.y;u*=k.x,m*=k.y,p*=k.x,f*=k.y,u+=N,m+=A,y=rs(g),g=ih(y)}}return Lc({width:p,height:f,x:u,y:m})}function nd(e,n){const s=td(e).scrollLeft;return n?n.left+s:ja(Qs(e)).left+s}function ry(e,n){const s=e.getBoundingClientRect(),a=s.left+n.scrollLeft-nd(e,s),i=s.top+n.scrollTop;return{x:a,y:i}}function xT(e){let{elements:n,rect:s,offsetParent:a,strategy:i}=e;const l=i==="fixed",c=Qs(a),d=n?ed(n.floating):!1;if(a===c||d&&l)return s;let u={scrollLeft:0,scrollTop:0},m=qs(1);const p=qs(0),f=Zs(a);if((f||!f&&!l)&&((Fi(a)!=="body"||Lo(c))&&(u=td(a)),Zs(a))){const b=ja(a);m=bi(a),p.x=b.x+a.clientLeft,p.y=b.y+a.clientTop}const x=c&&!f&&!l?ry(c,u):qs(0);return{width:s.width*m.x,height:s.height*m.y,x:s.x*m.x-u.scrollLeft*m.x+p.x+x.x,y:s.y*m.y-u.scrollTop*m.y+p.y+x.y}}function gT(e){return Array.from(e.getClientRects())}function bT(e){const n=Qs(e),s=td(e),a=e.ownerDocument.body,i=ss(n.scrollWidth,n.clientWidth,a.scrollWidth,a.clientWidth),l=ss(n.scrollHeight,n.clientHeight,a.scrollHeight,a.clientHeight);let c=-s.scrollLeft+nd(e);const d=-s.scrollTop;return Fs(a).direction==="rtl"&&(c+=ss(n.clientWidth,a.clientWidth)-i),{width:i,height:l,x:c,y:d}}const d1=25;function vT(e,n){const s=rs(e),a=Qs(e),i=s.visualViewport;let l=a.clientWidth,c=a.clientHeight,d=0,u=0;if(i){l=i.width,c=i.height;const p=yp();(!p||p&&n==="fixed")&&(d=i.offsetLeft,u=i.offsetTop)}const m=nd(a);if(m<=0){const p=a.ownerDocument,f=p.body,x=getComputedStyle(f),b=p.compatMode==="CSS1Compat"&&parseFloat(x.marginLeft)+parseFloat(x.marginRight)||0,y=Math.abs(a.clientWidth-f.clientWidth-b);y<=d1&&(l-=y)}else m<=d1&&(l+=m);return{width:l,height:c,x:d,y:u}}const yT=new Set(["absolute","fixed"]);function wT(e,n){const s=ja(e,!0,n==="fixed"),a=s.top+e.clientTop,i=s.left+e.clientLeft,l=Zs(e)?bi(e):qs(1),c=e.clientWidth*l.x,d=e.clientHeight*l.y,u=i*l.x,m=a*l.y;return{width:c,height:d,x:u,y:m}}function u1(e,n,s){let a;if(n==="viewport")a=vT(e,s);else if(n==="document")a=bT(Qs(e));else if(Ds(n))a=wT(n,s);else{const i=sy(e);a={x:n.x-i.x,y:n.y-i.y,width:n.width,height:n.height}}return Lc(a)}function ay(e,n){const s=$r(e);return s===n||!Ds(s)||Si(s)?!1:Fs(s).position==="fixed"||ay(s,n)}function ST(e,n){const s=n.get(e);if(s)return s;let a=Do(e,[],!1).filter(d=>Ds(d)&&Fi(d)!=="body"),i=null;const l=Fs(e).position==="fixed";let c=l?$r(e):e;for(;Ds(c)&&!Si(c);){const d=Fs(c),u=vp(c);!u&&d.position==="fixed"&&(i=null),(l?!u&&!i:!u&&d.position==="static"&&!!i&&yT.has(i.position)||Lo(c)&&!u&&ay(e,c))?a=a.filter(p=>p!==c):i=d,c=$r(c)}return n.set(e,a),a}function kT(e){let{element:n,boundary:s,rootBoundary:a,strategy:i}=e;const c=[...s==="clippingAncestors"?ed(n)?[]:ST(n,this._c):[].concat(s),a],d=c[0],u=c.reduce((m,p)=>{const f=u1(n,p,i);return m.top=ss(f.top,m.top),m.right=Or(f.right,m.right),m.bottom=Or(f.bottom,m.bottom),m.left=ss(f.left,m.left),m},u1(n,d,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function jT(e){const{width:n,height:s}=ny(e);return{width:n,height:s}}function NT(e,n,s){const a=Zs(n),i=Qs(n),l=s==="fixed",c=ja(e,!0,l,n);let d={scrollLeft:0,scrollTop:0};const u=qs(0);function m(){u.x=nd(i)}if(a||!a&&!l)if((Fi(n)!=="body"||Lo(i))&&(d=td(n)),a){const b=ja(n,!0,l,n);u.x=b.x+n.clientLeft,u.y=b.y+n.clientTop}else i&&m();l&&!a&&i&&m();const p=i&&!a&&!l?ry(i,d):qs(0),f=c.left+d.scrollLeft-u.x-p.x,x=c.top+d.scrollTop-u.y-p.y;return{x:f,y:x,width:c.width,height:c.height}}function Sf(e){return Fs(e).position==="static"}function f1(e,n){if(!Zs(e)||Fs(e).position==="fixed")return null;if(n)return n(e);let s=e.offsetParent;return Qs(e)===s&&(s=s.ownerDocument.body),s}function iy(e,n){const s=rs(e);if(ed(e))return s;if(!Zs(e)){let i=$r(e);for(;i&&!Si(i);){if(Ds(i)&&!Sf(i))return i;i=$r(i)}return s}let a=f1(e,n);for(;a&&oT(a)&&Sf(a);)a=f1(a,n);return a&&Si(a)&&Sf(a)&&!vp(a)?s:a||fT(e)||s}const CT=async function(e){const n=this.getOffsetParent||iy,s=this.getDimensions,a=await s(e.floating);return{reference:NT(e.reference,await n(e.floating),e.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function _T(e){return Fs(e).direction==="rtl"}const AT={convertOffsetParentRelativeRectToViewportRelativeRect:xT,getDocumentElement:Qs,getClippingRect:kT,getOffsetParent:iy,getElementRects:CT,getClientRects:gT,getDimensions:jT,getScale:bi,isElement:Ds,isRTL:_T};function oy(e,n){return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height}function ET(e,n){let s=null,a;const i=Qs(e);function l(){var d;clearTimeout(a),(d=s)==null||d.disconnect(),s=null}function c(d,u){d===void 0&&(d=!1),u===void 0&&(u=1),l();const m=e.getBoundingClientRect(),{left:p,top:f,width:x,height:b}=m;if(d||n(),!x||!b)return;const y=lc(f),g=lc(i.clientWidth-(p+x)),k=lc(i.clientHeight-(f+b)),w=lc(p),N={rootMargin:-y+"px "+-g+"px "+-k+"px "+-w+"px",threshold:ss(0,Or(1,u))||1};let A=!0;function P(B){const $=B[0].intersectionRatio;if($!==u){if(!A)return c();$?c(!1,$):a=setTimeout(()=>{c(!1,1e-7)},1e3)}$===1&&!oy(m,e.getBoundingClientRect())&&c(),A=!1}try{s=new IntersectionObserver(P,{...N,root:i.ownerDocument})}catch{s=new IntersectionObserver(P,N)}s.observe(e)}return c(!0),l}function TT(e,n,s,a){a===void 0&&(a={});const{ancestorScroll:i=!0,ancestorResize:l=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:u=!1}=a,m=wp(e),p=i||l?[...m?Do(m):[],...Do(n)]:[];p.forEach(w=>{i&&w.addEventListener("scroll",s,{passive:!0}),l&&w.addEventListener("resize",s)});const f=m&&d?ET(m,s):null;let x=-1,b=null;c&&(b=new ResizeObserver(w=>{let[C]=w;C&&C.target===m&&b&&(b.unobserve(n),cancelAnimationFrame(x),x=requestAnimationFrame(()=>{var N;(N=b)==null||N.observe(n)})),s()}),m&&!u&&b.observe(m),b.observe(n));let y,g=u?ja(e):null;u&&k();function k(){const w=ja(e);g&&!oy(g,w)&&s(),g=w,y=requestAnimationFrame(k)}return s(),()=>{var w;p.forEach(C=>{i&&C.removeEventListener("scroll",s),l&&C.removeEventListener("resize",s)}),f?.(),(w=b)==null||w.disconnect(),b=null,u&&cancelAnimationFrame(y)}}const DT=tT,FT=nT,MT=XE,IT=rT,PT=JE,h1=QE,RT=sT,BT=(e,n,s)=>{const a=new Map,i={platform:AT,...s},l={...i.platform,_c:a};return ZE(e,n,{...i,platform:l})};var LT=typeof document<"u",zT=function(){},bc=LT?j.useLayoutEffect:zT;function zc(e,n){if(e===n)return!0;if(typeof e!=typeof n)return!1;if(typeof e=="function"&&e.toString()===n.toString())return!0;let s,a,i;if(e&&n&&typeof e=="object"){if(Array.isArray(e)){if(s=e.length,s!==n.length)return!1;for(a=s;a--!==0;)if(!zc(e[a],n[a]))return!1;return!0}if(i=Object.keys(e),s=i.length,s!==Object.keys(n).length)return!1;for(a=s;a--!==0;)if(!{}.hasOwnProperty.call(n,i[a]))return!1;for(a=s;a--!==0;){const l=i[a];if(!(l==="_owner"&&e.$$typeof)&&!zc(e[l],n[l]))return!1}return!0}return e!==e&&n!==n}function ly(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function p1(e,n){const s=ly(e);return Math.round(n*s)/s}function kf(e){const n=j.useRef(e);return bc(()=>{n.current=e}),n}function OT(e){e===void 0&&(e={});const{placement:n="bottom",strategy:s="absolute",middleware:a=[],platform:i,elements:{reference:l,floating:c}={},transform:d=!0,whileElementsMounted:u,open:m}=e,[p,f]=j.useState({x:0,y:0,strategy:s,placement:n,middlewareData:{},isPositioned:!1}),[x,b]=j.useState(a);zc(x,a)||b(a);const[y,g]=j.useState(null),[k,w]=j.useState(null),C=j.useCallback(U=>{U!==B.current&&(B.current=U,g(U))},[]),N=j.useCallback(U=>{U!==$.current&&($.current=U,w(U))},[]),A=l||y,P=c||k,B=j.useRef(null),$=j.useRef(null),D=j.useRef(p),T=u!=null,H=kf(u),K=kf(i),E=kf(m),I=j.useCallback(()=>{if(!B.current||!$.current)return;const U={placement:n,strategy:s,middleware:x};K.current&&(U.platform=K.current),BT(B.current,$.current,U).then(W=>{const Z={...W,isPositioned:E.current!==!1};S.current&&!zc(D.current,Z)&&(D.current=Z,Us.flushSync(()=>{f(Z)}))})},[x,n,s,K,E]);bc(()=>{m===!1&&D.current.isPositioned&&(D.current.isPositioned=!1,f(U=>({...U,isPositioned:!1})))},[m]);const S=j.useRef(!1);bc(()=>(S.current=!0,()=>{S.current=!1}),[]),bc(()=>{if(A&&(B.current=A),P&&($.current=P),A&&P){if(H.current)return H.current(A,P,I);I()}},[A,P,I,H,T]);const L=j.useMemo(()=>({reference:B,floating:$,setReference:C,setFloating:N}),[C,N]),z=j.useMemo(()=>({reference:A,floating:P}),[A,P]),R=j.useMemo(()=>{const U={position:s,left:0,top:0};if(!z.floating)return U;const W=p1(z.floating,p.x),Z=p1(z.floating,p.y);return d?{...U,transform:"translate("+W+"px, "+Z+"px)",...ly(z.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:W,top:Z}},[s,d,z.floating,p.x,p.y]);return j.useMemo(()=>({...p,update:I,refs:L,elements:z,floatingStyles:R}),[p,I,L,z,R])}const $T=e=>{function n(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:e,fn(s){const{element:a,padding:i}=typeof e=="function"?e(s):e;return a&&n(a)?a.current!=null?h1({element:a.current,padding:i}).fn(s):{}:a?h1({element:a,padding:i}).fn(s):{}}}},VT=(e,n)=>({...DT(e),options:[e,n]}),HT=(e,n)=>({...FT(e),options:[e,n]}),UT=(e,n)=>({...RT(e),options:[e,n]}),WT=(e,n)=>({...MT(e),options:[e,n]}),KT=(e,n)=>({...IT(e),options:[e,n]}),GT=(e,n)=>({...PT(e),options:[e,n]}),YT=(e,n)=>({...$T(e),options:[e,n]});var qT="Arrow",cy=j.forwardRef((e,n)=>{const{children:s,width:a=10,height:i=5,...l}=e;return t.jsx(Nt.svg,{...l,ref:n,width:a,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?s:t.jsx("polygon",{points:"0,0 30,0 15,10"})})});cy.displayName=qT;var ZT=cy,Sp="Popper",[dy,uy]=Ci(Sp),[QT,fy]=dy(Sp),hy=e=>{const{__scopePopper:n,children:s}=e,[a,i]=j.useState(null);return t.jsx(QT,{scope:n,anchor:a,onAnchorChange:i,children:s})};hy.displayName=Sp;var py="PopperAnchor",my=j.forwardRef((e,n)=>{const{__scopePopper:s,virtualRef:a,...i}=e,l=fy(py,s),c=j.useRef(null),d=Bt(n,c),u=j.useRef(null);return j.useEffect(()=>{const m=u.current;u.current=a?.current||c.current,m!==u.current&&l.onAnchorChange(u.current)}),a?null:t.jsx(Nt.div,{...i,ref:d})});my.displayName=py;var kp="PopperContent",[XT,JT]=dy(kp),xy=j.forwardRef((e,n)=>{const{__scopePopper:s,side:a="bottom",sideOffset:i=0,align:l="center",alignOffset:c=0,arrowPadding:d=0,avoidCollisions:u=!0,collisionBoundary:m=[],collisionPadding:p=0,sticky:f="partial",hideWhenDetached:x=!1,updatePositionStrategy:b="optimized",onPlaced:y,...g}=e,k=fy(kp,s),[w,C]=j.useState(null),N=Bt(n,le=>C(le)),[A,P]=j.useState(null),B=Sv(A),$=B?.width??0,D=B?.height??0,T=a+(l!=="center"?"-"+l:""),H=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},K=Array.isArray(m)?m:[m],E=K.length>0,I={padding:H,boundary:K.filter(tD),altBoundary:E},{refs:S,floatingStyles:L,placement:z,isPositioned:R,middlewareData:U}=OT({strategy:"fixed",placement:T,whileElementsMounted:(...le)=>TT(...le,{animationFrame:b==="always"}),elements:{reference:k.anchor},middleware:[VT({mainAxis:i+D,alignmentAxis:c}),u&&HT({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?UT():void 0,...I}),u&&WT({...I}),KT({...I,apply:({elements:le,rects:ne,availableWidth:ie,availableHeight:ve})=>{const{width:se,height:ge}=ne.reference,Me=le.floating.style;Me.setProperty("--radix-popper-available-width",`${ie}px`),Me.setProperty("--radix-popper-available-height",`${ve}px`),Me.setProperty("--radix-popper-anchor-width",`${se}px`),Me.setProperty("--radix-popper-anchor-height",`${ge}px`)}}),A&&YT({element:A,padding:d}),nD({arrowWidth:$,arrowHeight:D}),x&&GT({strategy:"referenceHidden",...I})]}),[W,Z]=vy(z),O=ya(y);Tn(()=>{R&&O?.()},[R,O]);const V=U.arrow?.x,ee=U.arrow?.y,q=U.arrow?.centerOffset!==0,[G,Q]=j.useState();return Tn(()=>{w&&Q(window.getComputedStyle(w).zIndex)},[w]),t.jsx("div",{ref:S.setFloating,"data-radix-popper-content-wrapper":"",style:{...L,transform:R?L.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:G,"--radix-popper-transform-origin":[U.transformOrigin?.x,U.transformOrigin?.y].join(" "),...U.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:t.jsx(XT,{scope:s,placedSide:W,onArrowChange:P,arrowX:V,arrowY:ee,shouldHideArrow:q,children:t.jsx(Nt.div,{"data-side":W,"data-align":Z,...g,ref:N,style:{...g.style,animation:R?void 0:"none"}})})})});xy.displayName=kp;var gy="PopperArrow",eD={top:"bottom",right:"left",bottom:"top",left:"right"},by=j.forwardRef(function(n,s){const{__scopePopper:a,...i}=n,l=JT(gy,a),c=eD[l.placedSide];return t.jsx("span",{ref:l.onArrowChange,style:{position:"absolute",left:l.arrowX,top:l.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[l.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[l.placedSide],visibility:l.shouldHideArrow?"hidden":void 0},children:t.jsx(ZT,{...i,ref:s,style:{...i.style,display:"block"}})})});by.displayName=gy;function tD(e){return e!==null}var nD=e=>({name:"transformOrigin",options:e,fn(n){const{placement:s,rects:a,middlewareData:i}=n,c=i.arrow?.centerOffset!==0,d=c?0:e.arrowWidth,u=c?0:e.arrowHeight,[m,p]=vy(s),f={start:"0%",center:"50%",end:"100%"}[p],x=(i.arrow?.x??0)+d/2,b=(i.arrow?.y??0)+u/2;let y="",g="";return m==="bottom"?(y=c?f:`${x}px`,g=`${-u}px`):m==="top"?(y=c?f:`${x}px`,g=`${a.floating.height+u}px`):m==="right"?(y=`${-u}px`,g=c?f:`${b}px`):m==="left"&&(y=`${a.floating.width+u}px`,g=c?f:`${b}px`),{data:{x:y,y:g}}}});function vy(e){const[n,s="center"]=e.split("-");return[n,s]}var sD=hy,rD=my,aD=xy,iD=by;function oD(e){const n=lD(e),s=j.forwardRef((a,i)=>{const{children:l,...c}=a,d=j.Children.toArray(l),u=d.find(dD);if(u){const m=u.props.children,p=d.map(f=>f===u?j.Children.count(m)>1?j.Children.only(null):j.isValidElement(m)?m.props.children:null:f);return t.jsx(n,{...c,ref:i,children:j.isValidElement(m)?j.cloneElement(m,void 0,p):null})}return t.jsx(n,{...c,ref:i,children:l})});return s.displayName=`${e}.Slot`,s}function lD(e){const n=j.forwardRef((s,a)=>{const{children:i,...l}=s;if(j.isValidElement(i)){const c=fD(i),d=uD(l,i.props);return i.type!==j.Fragment&&(d.ref=a?Ro(a,c):c),j.cloneElement(i,d)}return j.Children.count(i)>1?j.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var cD=Symbol("radix.slottable");function dD(e){return j.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===cD}function uD(e,n){const s={...n};for(const a in n){const i=e[a],l=n[a];/^on[A-Z]/.test(a)?i&&l?s[a]=(...d)=>{const u=l(...d);return i(...d),u}:i&&(s[a]=i):a==="style"?s[a]={...i,...l}:a==="className"&&(s[a]=[i,l].filter(Boolean).join(" "))}return{...e,...s}}function fD(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var yy=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),hD="VisuallyHidden",pD=j.forwardRef((e,n)=>t.jsx(Nt.span,{...e,ref:n,style:{...yy,...e.style}}));pD.displayName=hD;var mD=[" ","Enter","ArrowUp","ArrowDown"],xD=[" ","Enter"],Na="Select",[sd,rd,gD]=RE(Na),[Mi]=Ci(Na,[gD,uy]),ad=uy(),[bD,Hr]=Mi(Na),[vD,yD]=Mi(Na),wy=e=>{const{__scopeSelect:n,children:s,open:a,defaultOpen:i,onOpenChange:l,value:c,defaultValue:d,onValueChange:u,dir:m,name:p,autoComplete:f,disabled:x,required:b,form:y}=e,g=ad(n),[k,w]=j.useState(null),[C,N]=j.useState(null),[A,P]=j.useState(!1),B=LE(m),[$,D]=Nc({prop:a,defaultProp:i??!1,onChange:l,caller:Na}),[T,H]=Nc({prop:c,defaultProp:d,onChange:u,caller:Na}),K=j.useRef(null),E=k?y||!!k.closest("form"):!0,[I,S]=j.useState(new Set),L=Array.from(I).map(z=>z.props.value).join(";");return t.jsx(sD,{...g,children:t.jsxs(bD,{required:b,scope:n,trigger:k,onTriggerChange:w,valueNode:C,onValueNodeChange:N,valueNodeHasChildren:A,onValueNodeHasChildrenChange:P,contentId:pi(),value:T,onValueChange:H,open:$,onOpenChange:D,dir:B,triggerPointerDownPosRef:K,disabled:x,children:[t.jsx(sd.Provider,{scope:n,children:t.jsx(vD,{scope:e.__scopeSelect,onNativeOptionAdd:j.useCallback(z=>{S(R=>new Set(R).add(z))},[]),onNativeOptionRemove:j.useCallback(z=>{S(R=>{const U=new Set(R);return U.delete(z),U})},[]),children:s})}),E?t.jsxs(Hy,{"aria-hidden":!0,required:b,tabIndex:-1,name:p,autoComplete:f,value:T,onChange:z=>H(z.target.value),disabled:x,form:y,children:[T===void 0?t.jsx("option",{value:""}):null,Array.from(I)]},L):null]})})};wy.displayName=Na;var Sy="SelectTrigger",ky=j.forwardRef((e,n)=>{const{__scopeSelect:s,disabled:a=!1,...i}=e,l=ad(s),c=Hr(Sy,s),d=c.disabled||a,u=Bt(n,c.onTriggerChange),m=rd(s),p=j.useRef("touch"),[f,x,b]=Wy(g=>{const k=m().filter(N=>!N.disabled),w=k.find(N=>N.value===c.value),C=Ky(k,g,w);C!==void 0&&c.onValueChange(C.value)}),y=g=>{d||(c.onOpenChange(!0),b()),g&&(c.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return t.jsx(rD,{asChild:!0,...l,children:t.jsx(Nt.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:d,"data-disabled":d?"":void 0,"data-placeholder":Uy(c.value)?"":void 0,...i,ref:u,onClick:Tt(i.onClick,g=>{g.currentTarget.focus(),p.current!=="mouse"&&y(g)}),onPointerDown:Tt(i.onPointerDown,g=>{p.current=g.pointerType;const k=g.target;k.hasPointerCapture(g.pointerId)&&k.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(y(g),g.preventDefault())}),onKeyDown:Tt(i.onKeyDown,g=>{const k=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&x(g.key),!(k&&g.key===" ")&&mD.includes(g.key)&&(y(),g.preventDefault())})})})});ky.displayName=Sy;var jy="SelectValue",Ny=j.forwardRef((e,n)=>{const{__scopeSelect:s,className:a,style:i,children:l,placeholder:c="",...d}=e,u=Hr(jy,s),{onValueNodeHasChildrenChange:m}=u,p=l!==void 0,f=Bt(n,u.onValueNodeChange);return Tn(()=>{m(p)},[m,p]),t.jsx(Nt.span,{...d,ref:f,style:{pointerEvents:"none"},children:Uy(u.value)?t.jsx(t.Fragment,{children:c}):l})});Ny.displayName=jy;var wD="SelectIcon",Cy=j.forwardRef((e,n)=>{const{__scopeSelect:s,children:a,...i}=e;return t.jsx(Nt.span,{"aria-hidden":!0,...i,ref:n,children:a||""})});Cy.displayName=wD;var SD="SelectPortal",_y=e=>t.jsx(qh,{asChild:!0,...e});_y.displayName=SD;var Ca="SelectContent",Ay=j.forwardRef((e,n)=>{const s=Hr(Ca,e.__scopeSelect),[a,i]=j.useState();if(Tn(()=>{i(new DocumentFragment)},[]),!s.open){const l=a;return l?Us.createPortal(t.jsx(Ey,{scope:e.__scopeSelect,children:t.jsx(sd.Slot,{scope:e.__scopeSelect,children:t.jsx("div",{children:e.children})})}),l):null}return t.jsx(Ty,{...e,ref:n})});Ay.displayName=Ca;var Ts=10,[Ey,Ur]=Mi(Ca),kD="SelectContentImpl",jD=oD("SelectContent.RemoveScroll"),Ty=j.forwardRef((e,n)=>{const{__scopeSelect:s,position:a="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:l,onPointerDownOutside:c,side:d,sideOffset:u,align:m,alignOffset:p,arrowPadding:f,collisionBoundary:x,collisionPadding:b,sticky:y,hideWhenDetached:g,avoidCollisions:k,...w}=e,C=Hr(Ca,s),[N,A]=j.useState(null),[P,B]=j.useState(null),$=Bt(n,le=>A(le)),[D,T]=j.useState(null),[H,K]=j.useState(null),E=rd(s),[I,S]=j.useState(!1),L=j.useRef(!1);j.useEffect(()=>{if(N)return p2(N)},[N]),a2();const z=j.useCallback(le=>{const[ne,...ie]=E().map(ge=>ge.ref.current),[ve]=ie.slice(-1),se=document.activeElement;for(const ge of le)if(ge===se||(ge?.scrollIntoView({block:"nearest"}),ge===ne&&P&&(P.scrollTop=0),ge===ve&&P&&(P.scrollTop=P.scrollHeight),ge?.focus(),document.activeElement!==se))return},[E,P]),R=j.useCallback(()=>z([D,N]),[z,D,N]);j.useEffect(()=>{I&&R()},[I,R]);const{onOpenChange:U,triggerPointerDownPosRef:W}=C;j.useEffect(()=>{if(N){let le={x:0,y:0};const ne=ve=>{le={x:Math.abs(Math.round(ve.pageX)-(W.current?.x??0)),y:Math.abs(Math.round(ve.pageY)-(W.current?.y??0))}},ie=ve=>{le.x<=10&&le.y<=10?ve.preventDefault():N.contains(ve.target)||U(!1),document.removeEventListener("pointermove",ne),W.current=null};return W.current!==null&&(document.addEventListener("pointermove",ne),document.addEventListener("pointerup",ie,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ne),document.removeEventListener("pointerup",ie,{capture:!0})}}},[N,U,W]),j.useEffect(()=>{const le=()=>U(!1);return window.addEventListener("blur",le),window.addEventListener("resize",le),()=>{window.removeEventListener("blur",le),window.removeEventListener("resize",le)}},[U]);const[Z,O]=Wy(le=>{const ne=E().filter(se=>!se.disabled),ie=ne.find(se=>se.ref.current===document.activeElement),ve=Ky(ne,le,ie);ve&&setTimeout(()=>ve.ref.current.focus())}),V=j.useCallback((le,ne,ie)=>{const ve=!L.current&&!ie;(C.value!==void 0&&C.value===ne||ve)&&(T(le),ve&&(L.current=!0))},[C.value]),ee=j.useCallback(()=>N?.focus(),[N]),q=j.useCallback((le,ne,ie)=>{const ve=!L.current&&!ie;(C.value!==void 0&&C.value===ne||ve)&&K(le)},[C.value]),G=a==="popper"?oh:Dy,Q=G===oh?{side:d,sideOffset:u,align:m,alignOffset:p,arrowPadding:f,collisionBoundary:x,collisionPadding:b,sticky:y,hideWhenDetached:g,avoidCollisions:k}:{};return t.jsx(Ey,{scope:s,content:N,viewport:P,onViewportChange:B,itemRefCallback:V,selectedItem:D,onItemLeave:ee,itemTextRefCallback:q,focusSelectedItem:R,selectedItemText:H,position:a,isPositioned:I,searchRef:Z,children:t.jsx(Zh,{as:jD,allowPinchZoom:!0,children:t.jsx(Yh,{asChild:!0,trapped:C.open,onMountAutoFocus:le=>{le.preventDefault()},onUnmountAutoFocus:Tt(i,le=>{C.trigger?.focus({preventScroll:!0}),le.preventDefault()}),children:t.jsx(Gh,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:le=>le.preventDefault(),onDismiss:()=>C.onOpenChange(!1),children:t.jsx(G,{role:"listbox",id:C.contentId,"data-state":C.open?"open":"closed",dir:C.dir,onContextMenu:le=>le.preventDefault(),...w,...Q,onPlaced:()=>S(!0),ref:$,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:Tt(w.onKeyDown,le=>{const ne=le.ctrlKey||le.altKey||le.metaKey;if(le.key==="Tab"&&le.preventDefault(),!ne&&le.key.length===1&&O(le.key),["ArrowUp","ArrowDown","Home","End"].includes(le.key)){let ve=E().filter(se=>!se.disabled).map(se=>se.ref.current);if(["ArrowUp","End"].includes(le.key)&&(ve=ve.slice().reverse()),["ArrowUp","ArrowDown"].includes(le.key)){const se=le.target,ge=ve.indexOf(se);ve=ve.slice(ge+1)}setTimeout(()=>z(ve)),le.preventDefault()}})})})})})})});Ty.displayName=kD;var ND="SelectItemAlignedPosition",Dy=j.forwardRef((e,n)=>{const{__scopeSelect:s,onPlaced:a,...i}=e,l=Hr(Ca,s),c=Ur(Ca,s),[d,u]=j.useState(null),[m,p]=j.useState(null),f=Bt(n,$=>p($)),x=rd(s),b=j.useRef(!1),y=j.useRef(!0),{viewport:g,selectedItem:k,selectedItemText:w,focusSelectedItem:C}=c,N=j.useCallback(()=>{if(l.trigger&&l.valueNode&&d&&m&&g&&k&&w){const $=l.trigger.getBoundingClientRect(),D=m.getBoundingClientRect(),T=l.valueNode.getBoundingClientRect(),H=w.getBoundingClientRect();if(l.dir!=="rtl"){const se=H.left-D.left,ge=T.left-se,Me=$.left-ge,M=$.width+Me,me=Math.max(M,D.width),he=window.innerWidth-Ts,J=n1(ge,[Ts,Math.max(Ts,he-me)]);d.style.minWidth=M+"px",d.style.left=J+"px"}else{const se=D.right-H.right,ge=window.innerWidth-T.right-se,Me=window.innerWidth-$.right-ge,M=$.width+Me,me=Math.max(M,D.width),he=window.innerWidth-Ts,J=n1(ge,[Ts,Math.max(Ts,he-me)]);d.style.minWidth=M+"px",d.style.right=J+"px"}const K=x(),E=window.innerHeight-Ts*2,I=g.scrollHeight,S=window.getComputedStyle(m),L=parseInt(S.borderTopWidth,10),z=parseInt(S.paddingTop,10),R=parseInt(S.borderBottomWidth,10),U=parseInt(S.paddingBottom,10),W=L+z+I+U+R,Z=Math.min(k.offsetHeight*5,W),O=window.getComputedStyle(g),V=parseInt(O.paddingTop,10),ee=parseInt(O.paddingBottom,10),q=$.top+$.height/2-Ts,G=E-q,Q=k.offsetHeight/2,le=k.offsetTop+Q,ne=L+z+le,ie=W-ne;if(ne<=q){const se=K.length>0&&k===K[K.length-1].ref.current;d.style.bottom="0px";const ge=m.clientHeight-g.offsetTop-g.offsetHeight,Me=Math.max(G,Q+(se?ee:0)+ge+R),M=ne+Me;d.style.height=M+"px"}else{const se=K.length>0&&k===K[0].ref.current;d.style.top="0px";const Me=Math.max(q,L+g.offsetTop+(se?V:0)+Q)+ie;d.style.height=Me+"px",g.scrollTop=ne-q+g.offsetTop}d.style.margin=`${Ts}px 0`,d.style.minHeight=Z+"px",d.style.maxHeight=E+"px",a?.(),requestAnimationFrame(()=>b.current=!0)}},[x,l.trigger,l.valueNode,d,m,g,k,w,l.dir,a]);Tn(()=>N(),[N]);const[A,P]=j.useState();Tn(()=>{m&&P(window.getComputedStyle(m).zIndex)},[m]);const B=j.useCallback($=>{$&&y.current===!0&&(N(),C?.(),y.current=!1)},[N,C]);return t.jsx(_D,{scope:s,contentWrapper:d,shouldExpandOnScrollRef:b,onScrollButtonChange:B,children:t.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:t.jsx(Nt.div,{...i,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});Dy.displayName=ND;var CD="SelectPopperPosition",oh=j.forwardRef((e,n)=>{const{__scopeSelect:s,align:a="start",collisionPadding:i=Ts,...l}=e,c=ad(s);return t.jsx(aD,{...c,...l,ref:n,align:a,collisionPadding:i,style:{boxSizing:"border-box",...l.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});oh.displayName=CD;var[_D,jp]=Mi(Ca,{}),lh="SelectViewport",Fy=j.forwardRef((e,n)=>{const{__scopeSelect:s,nonce:a,...i}=e,l=Ur(lh,s),c=jp(lh,s),d=Bt(n,l.onViewportChange),u=j.useRef(0);return t.jsxs(t.Fragment,{children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),t.jsx(sd.Slot,{scope:s,children:t.jsx(Nt.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:d,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Tt(i.onScroll,m=>{const p=m.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:x}=c;if(x?.current&&f){const b=Math.abs(u.current-p.scrollTop);if(b>0){const y=window.innerHeight-Ts*2,g=parseFloat(f.style.minHeight),k=parseFloat(f.style.height),w=Math.max(g,k);if(w<y){const C=w+b,N=Math.min(y,C),A=C-N;f.style.height=N+"px",f.style.bottom==="0px"&&(p.scrollTop=A>0?A:0,f.style.justifyContent="flex-end")}}}u.current=p.scrollTop})})})]})});Fy.displayName=lh;var My="SelectGroup",[AD,ED]=Mi(My),TD=j.forwardRef((e,n)=>{const{__scopeSelect:s,...a}=e,i=pi();return t.jsx(AD,{scope:s,id:i,children:t.jsx(Nt.div,{role:"group","aria-labelledby":i,...a,ref:n})})});TD.displayName=My;var Iy="SelectLabel",DD=j.forwardRef((e,n)=>{const{__scopeSelect:s,...a}=e,i=ED(Iy,s);return t.jsx(Nt.div,{id:i.id,...a,ref:n})});DD.displayName=Iy;var Oc="SelectItem",[FD,Py]=Mi(Oc),Ry=j.forwardRef((e,n)=>{const{__scopeSelect:s,value:a,disabled:i=!1,textValue:l,...c}=e,d=Hr(Oc,s),u=Ur(Oc,s),m=d.value===a,[p,f]=j.useState(l??""),[x,b]=j.useState(!1),y=Bt(n,C=>u.itemRefCallback?.(C,a,i)),g=pi(),k=j.useRef("touch"),w=()=>{i||(d.onValueChange(a),d.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return t.jsx(FD,{scope:s,value:a,disabled:i,textId:g,isSelected:m,onItemTextChange:j.useCallback(C=>{f(N=>N||(C?.textContent??"").trim())},[]),children:t.jsx(sd.ItemSlot,{scope:s,value:a,disabled:i,textValue:p,children:t.jsx(Nt.div,{role:"option","aria-labelledby":g,"data-highlighted":x?"":void 0,"aria-selected":m&&x,"data-state":m?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...c,ref:y,onFocus:Tt(c.onFocus,()=>b(!0)),onBlur:Tt(c.onBlur,()=>b(!1)),onClick:Tt(c.onClick,()=>{k.current!=="mouse"&&w()}),onPointerUp:Tt(c.onPointerUp,()=>{k.current==="mouse"&&w()}),onPointerDown:Tt(c.onPointerDown,C=>{k.current=C.pointerType}),onPointerMove:Tt(c.onPointerMove,C=>{k.current=C.pointerType,i?u.onItemLeave?.():k.current==="mouse"&&C.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Tt(c.onPointerLeave,C=>{C.currentTarget===document.activeElement&&u.onItemLeave?.()}),onKeyDown:Tt(c.onKeyDown,C=>{u.searchRef?.current!==""&&C.key===" "||(xD.includes(C.key)&&w(),C.key===" "&&C.preventDefault())})})})})});Ry.displayName=Oc;var vo="SelectItemText",By=j.forwardRef((e,n)=>{const{__scopeSelect:s,className:a,style:i,...l}=e,c=Hr(vo,s),d=Ur(vo,s),u=Py(vo,s),m=yD(vo,s),[p,f]=j.useState(null),x=Bt(n,w=>f(w),u.onItemTextChange,w=>d.itemTextRefCallback?.(w,u.value,u.disabled)),b=p?.textContent,y=j.useMemo(()=>t.jsx("option",{value:u.value,disabled:u.disabled,children:b},u.value),[u.disabled,u.value,b]),{onNativeOptionAdd:g,onNativeOptionRemove:k}=m;return Tn(()=>(g(y),()=>k(y)),[g,k,y]),t.jsxs(t.Fragment,{children:[t.jsx(Nt.span,{id:u.textId,...l,ref:x}),u.isSelected&&c.valueNode&&!c.valueNodeHasChildren?Us.createPortal(l.children,c.valueNode):null]})});By.displayName=vo;var Ly="SelectItemIndicator",zy=j.forwardRef((e,n)=>{const{__scopeSelect:s,...a}=e;return Py(Ly,s).isSelected?t.jsx(Nt.span,{"aria-hidden":!0,...a,ref:n}):null});zy.displayName=Ly;var ch="SelectScrollUpButton",Oy=j.forwardRef((e,n)=>{const s=Ur(ch,e.__scopeSelect),a=jp(ch,e.__scopeSelect),[i,l]=j.useState(!1),c=Bt(n,a.onScrollButtonChange);return Tn(()=>{if(s.viewport&&s.isPositioned){let d=function(){const m=u.scrollTop>0;l(m)};const u=s.viewport;return d(),u.addEventListener("scroll",d),()=>u.removeEventListener("scroll",d)}},[s.viewport,s.isPositioned]),i?t.jsx(Vy,{...e,ref:c,onAutoScroll:()=>{const{viewport:d,selectedItem:u}=s;d&&u&&(d.scrollTop=d.scrollTop-u.offsetHeight)}}):null});Oy.displayName=ch;var dh="SelectScrollDownButton",$y=j.forwardRef((e,n)=>{const s=Ur(dh,e.__scopeSelect),a=jp(dh,e.__scopeSelect),[i,l]=j.useState(!1),c=Bt(n,a.onScrollButtonChange);return Tn(()=>{if(s.viewport&&s.isPositioned){let d=function(){const m=u.scrollHeight-u.clientHeight,p=Math.ceil(u.scrollTop)<m;l(p)};const u=s.viewport;return d(),u.addEventListener("scroll",d),()=>u.removeEventListener("scroll",d)}},[s.viewport,s.isPositioned]),i?t.jsx(Vy,{...e,ref:c,onAutoScroll:()=>{const{viewport:d,selectedItem:u}=s;d&&u&&(d.scrollTop=d.scrollTop+u.offsetHeight)}}):null});$y.displayName=dh;var Vy=j.forwardRef((e,n)=>{const{__scopeSelect:s,onAutoScroll:a,...i}=e,l=Ur("SelectScrollButton",s),c=j.useRef(null),d=rd(s),u=j.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return j.useEffect(()=>()=>u(),[u]),Tn(()=>{d().find(p=>p.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[d]),t.jsx(Nt.div,{"aria-hidden":!0,...i,ref:n,style:{flexShrink:0,...i.style},onPointerDown:Tt(i.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(a,50))}),onPointerMove:Tt(i.onPointerMove,()=>{l.onItemLeave?.(),c.current===null&&(c.current=window.setInterval(a,50))}),onPointerLeave:Tt(i.onPointerLeave,()=>{u()})})}),MD="SelectSeparator",ID=j.forwardRef((e,n)=>{const{__scopeSelect:s,...a}=e;return t.jsx(Nt.div,{"aria-hidden":!0,...a,ref:n})});ID.displayName=MD;var uh="SelectArrow",PD=j.forwardRef((e,n)=>{const{__scopeSelect:s,...a}=e,i=ad(s),l=Hr(uh,s),c=Ur(uh,s);return l.open&&c.position==="popper"?t.jsx(iD,{...i,...a,ref:n}):null});PD.displayName=uh;var RD="SelectBubbleInput",Hy=j.forwardRef(({__scopeSelect:e,value:n,...s},a)=>{const i=j.useRef(null),l=Bt(a,i),c=wv(n);return j.useEffect(()=>{const d=i.current;if(!d)return;const u=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(u,"value").set;if(c!==n&&p){const f=new Event("change",{bubbles:!0});p.call(d,n),d.dispatchEvent(f)}},[c,n]),t.jsx(Nt.select,{...s,style:{...yy,...s.style},ref:l,defaultValue:n})});Hy.displayName=RD;function Uy(e){return e===""||e===void 0}function Wy(e){const n=ya(e),s=j.useRef(""),a=j.useRef(0),i=j.useCallback(c=>{const d=s.current+c;n(d),(function u(m){s.current=m,window.clearTimeout(a.current),m!==""&&(a.current=window.setTimeout(()=>u(""),1e3))})(d)},[n]),l=j.useCallback(()=>{s.current="",window.clearTimeout(a.current)},[]);return j.useEffect(()=>()=>window.clearTimeout(a.current),[]),[s,i,l]}function Ky(e,n,s){const i=n.length>1&&Array.from(n).every(m=>m===n[0])?n[0]:n,l=s?e.indexOf(s):-1;let c=BD(e,Math.max(l,0));i.length===1&&(c=c.filter(m=>m!==s));const u=c.find(m=>m.textValue.toLowerCase().startsWith(i.toLowerCase()));return u!==s?u:void 0}function BD(e,n){return e.map((s,a)=>e[(n+a)%e.length])}var LD=wy,zD=ky,OD=Ny,$D=Cy,VD=_y,HD=Ay,UD=Fy,WD=Ry,KD=By,GD=zy,YD=Oy,qD=$y;function m1({...e}){return t.jsx(LD,{"data-slot":"select",...e})}function x1({...e}){return t.jsx(OD,{"data-slot":"select-value",...e})}function g1({className:e,size:n="default",children:s,...a}){return t.jsxs(zD,{"data-slot":"select-trigger","data-size":n,className:as("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...a,children:[s,t.jsx($D,{asChild:!0,children:t.jsx(ba,{className:"size-4 opacity-50"})})]})}function b1({className:e,children:n,position:s="popper",...a}){return t.jsx(VD,{children:t.jsxs(HD,{"data-slot":"select-content",className:as("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...a,children:[t.jsx(ZD,{}),t.jsx(UD,{className:as("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:n}),t.jsx(QD,{})]})})}function ii({className:e,children:n,...s}){return t.jsxs(WD,{"data-slot":"select-item",className:as("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...s,children:[t.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:t.jsx(GD,{children:t.jsx(wt,{className:"size-4"})})}),t.jsx(KD,{children:n})]})}function ZD({className:e,...n}){return t.jsx(YD,{"data-slot":"select-scroll-up-button",className:as("flex cursor-default items-center justify-center py-1",e),...n,children:t.jsx(J6,{className:"size-4"})})}function QD({className:e,...n}){return t.jsx(qD,{"data-slot":"select-scroll-down-button",className:as("flex cursor-default items-center justify-center py-1",e),...n,children:t.jsx(ba,{className:"size-4"})})}function XD({onSelect:e}){const[n,s]=j.useState([]),[a,i]=j.useState("");j.useEffect(()=>{l();const u=()=>l();return window.addEventListener("character-memories-updated",u),()=>window.removeEventListener("character-memories-updated",u)},[]);const l=async()=>{try{const u=await ae.get(te.CHARACTERS,"characters");if(u){const m=await Promise.all(u.map(async p=>{const f=p.memories?.filter(x=>x.type==="summary").length||0;if(p.avatar){if(p.avatar.startsWith("data:"))return{...p,avatarUrl:p.avatar,summaryCount:f};try{const x=await xt(p.avatar);return{...p,avatarUrl:x,summaryCount:f}}catch{return{...p,avatarUrl:null,summaryCount:f}}}return{...p,avatarUrl:null,summaryCount:f}}));s(m)}}catch(u){console.error("Failed to load characters:",u)}},c=n.filter(u=>u.name.toLowerCase().includes(a.toLowerCase())),d=u=>{let m=0;for(let f=0;f<u.length;f++)m=u.charCodeAt(f)+((m<<5)-m);const p=(m&16777215).toString(16).toUpperCase();return"#"+"00000".substring(0,6-p.length)+p};return t.jsxs("div",{className:"flex flex-col gap-6",children:[t.jsxs("div",{className:"relative group",children:[t.jsx(_a,{className:"absolute left-0 top-1/2 -translate-y-1/2 text-[#bdc3c7] transition-colors group-focus-within:text-[#2c3e50]",size:16}),t.jsx("input",{type:"text",placeholder:"...",value:a,onChange:u=>i(u.target.value),className:"w-full pl-8 py-2 bg-transparent border-b border-[#bdc3c7]/50 text-sm outline-none focus:border-[#2c3e50] transition-colors placeholder-[#bdc3c7] text-[#2c3e50]"})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[c.length===0?t.jsx("div",{className:"text-center py-8 text-[#bdc3c7] text-sm",children:""}):c.map((u,m)=>t.jsxs(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:m*.05,ease:"easeOut"},onClick:()=>e?.(u),className:"group relative overflow-hidden bg-white/40 backdrop-blur-sm rounded-xl p-3.5 border border-white/40 shadow-sm hover:shadow-md transition-all active:scale-[0.98] cursor-pointer flex items-center gap-4",children:[t.jsx("div",{className:"w-11 h-11 rounded-full flex items-center justify-center text-white font-serif text-lg shadow-inner relative overflow-hidden bg-[#2c3e50]",style:{backgroundColor:u.avatarUrl?void 0:d(u.name)},children:u.avatarUrl?t.jsx("img",{src:u.avatarUrl,alt:u.name,className:"w-full h-full object-cover"}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"absolute inset-0 bg-black/10"}),t.jsx("span",{className:"relative z-10",children:u.name[0]})]})}),t.jsx("div",{className:"flex-1 min-w-0",children:t.jsx("h3",{className:"text-[#2c3e50] font-serif font-medium text-lg leading-none truncate",children:u.name})}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("span",{className:"text-xs font-serif text-[#95a5a6]",children:[u.summaryCount||0," "]}),t.jsx(os,{size:14,className:"text-[#bdc3c7] group-hover:translate-x-1 transition-transform"})]})]},u.id)),c.length>0&&t.jsxs("div",{className:"py-12 flex flex-col items-center justify-center opacity-30",children:[t.jsx("div",{className:"w-1 h-12 bg-gradient-to-b from-[#2c3e50] to-transparent"}),t.jsx("p",{className:"mt-4 text-xs tracking-[0.3em] font-serif text-[#2c3e50]",children:"END OF LIST"})]})]})]})}function JD(){const e=[];return t.jsxs("div",{className:"flex flex-col gap-6",children:[t.jsxs("div",{className:"relative group",children:[t.jsx(_a,{className:"absolute left-0 top-1/2 -translate-y-1/2 text-[#bdc3c7] transition-colors group-focus-within:text-[#2c3e50]",size:16}),t.jsx("input",{type:"text",placeholder:"...",className:"w-full pl-8 py-2 bg-transparent border-b border-[#bdc3c7]/50 text-sm outline-none focus:border-[#2c3e50] transition-colors placeholder-[#bdc3c7] text-[#2c3e50]"})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[e.map((n,s)=>t.jsxs(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.08,ease:"easeOut"},className:"group relative w-full overflow-hidden bg-white/40 backdrop-blur-sm rounded-xl p-3.5 border border-white/40 shadow-sm hover:shadow-md transition-all active:scale-[0.98] cursor-pointer flex items-center gap-4",children:[t.jsx("div",{className:"w-11 h-11 rounded-full flex items-center justify-center bg-[#2c3e50]/5 text-[#2c3e50] border border-[#2c3e50]/10",children:t.jsx(qc,{size:20,className:"opacity-70"})}),t.jsx("div",{className:"flex-1 min-w-0",children:t.jsx("h3",{className:"text-[#2c3e50] font-serif font-medium text-lg leading-none truncate",children:n.title})}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("span",{className:"text-xs font-serif text-[#95a5a6]",children:[n.count," "]}),t.jsx(os,{size:14,className:"text-[#bdc3c7] group-hover:translate-x-1 transition-transform"})]})]},n.id)),t.jsxs("div",{className:"py-12 flex flex-col items-center justify-center opacity-30",children:[t.jsx("div",{className:"w-1 h-12 bg-gradient-to-b from-[#2c3e50] to-transparent"}),t.jsx("p",{className:"mt-4 text-xs tracking-[0.3em] font-serif text-[#2c3e50]",children:"END"})]})]})]})}function eF(){const e=[],n={hidden:{opacity:1},show:{opacity:1,transition:{staggerChildren:.05,delayChildren:.1}}},s={hidden:{x:-20,opacity:0},show:{x:0,opacity:1,transition:{x:{type:"tween",ease:"circOut",duration:.35},opacity:{duration:0}}}};return t.jsxs("div",{className:"flex flex-col gap-6",children:[t.jsxs("div",{className:"relative group",children:[t.jsx(_a,{className:"absolute left-0 top-1/2 -translate-y-1/2 text-[#bdc3c7] transition-colors group-focus-within:text-[#2c3e50]",size:16}),t.jsx("input",{type:"text",placeholder:"...",className:"w-full pl-8 py-2 bg-transparent border-b border-[#bdc3c7]/50 text-sm outline-none focus:border-[#2c3e50] transition-colors placeholder-[#bdc3c7] text-[#2c3e50]"})]}),t.jsxs("div",{className:"relative pl-4",children:[t.jsx("div",{className:"absolute left-[23px] top-4 bottom-0 w-[1px] bg-gradient-to-b from-[#bdc3c7] to-transparent z-0"}),t.jsxs(xe.div,{className:"flex flex-col gap-6",variants:n,initial:"hidden",animate:"show",children:[e.map(a=>{const i=a.icon;return t.jsxs(xe.div,{variants:s,className:"relative z-10 pl-8 group cursor-pointer",children:[t.jsx("div",{className:"absolute left-0 top-[22px] w-[14px] h-[14px] rounded-full bg-[#f5f5f5] border-[2px] border-[#bdc3c7] group-active:border-[#d4af37] group-active:scale-110 transition-all z-20"}),t.jsxs("div",{className:"group relative overflow-hidden bg-white/40 backdrop-blur-sm rounded-xl p-4 border border-white/40 shadow-sm active:shadow-md transition-all active:bg-white/60 flex items-center gap-4",children:[t.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-[#2c3e50] bg-white/50 shadow-sm",children:t.jsx(i,{size:18,strokeWidth:1.5})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-[#2c3e50] font-serif font-medium text-base leading-none",children:a.title}),t.jsx("p",{className:"text-[10px] text-[#7f8c8d] tracking-wider mt-1.5 font-mono",children:a.date})]}),t.jsx("div",{className:"flex items-center gap-3",children:t.jsx(os,{size:14,className:"text-[#bdc3c7] transition-colors group-active:text-[#2c3e50]"})})]})]},a.id)}),t.jsx(xe.div,{variants:s,className:"pl-8",children:t.jsxs("div",{className:"py-12 flex flex-col items-center justify-center opacity-30",children:[t.jsx("div",{className:"w-1 h-12 bg-gradient-to-b from-[#2c3e50] to-transparent"}),t.jsx("p",{className:"mt-4 text-xs tracking-[0.3em] font-serif text-[#2c3e50]",children:"END"})]})})]})]})]})}function tF({character:e,onBack:n,summaryLimit:s=3}){const[a,i]=j.useState("permanent"),[l,c]=j.useState(e.memories||[]),[d,u]=j.useState(null),[m,p]=j.useState(""),[f,x]=j.useState(""),[b,y]=j.useState([]),[g,k]=j.useState("");j.useEffect(()=>{if(e.memories){const S=gi.processMemories(e.memories,s);c(S)}},[e.memories,s]);const w=async S=>{try{const L=gi.processMemories(S,s);c(L);const z=await ae.get(te.CHARACTERS,"characters")||[],R=z.findIndex(U=>U.id===e.id);R!==-1&&(z[R].memories=L,await ae.set(te.CHARACTERS,"characters",z))}catch(L){console.error("Failed to save memories:",L)}},C=S=>{u(S.id),p(S.content),y(S.tags||[]),k(""),S.type==="event"?x(S.expires_at||""):x(S.created_at||S.date||"")},N=()=>{u(null),p(""),x(""),y([]),k("")},A=S=>{const L=l.map(z=>{if(z.id===S){const R={content:m,tags:b};return z.type==="event"?R.expires_at=f||void 0:(R.created_at=f||void 0,R.date=f||void 0),{...z,...R}}return z});w(L),u(null)},P=()=>{g.trim()&&!b.includes(g.trim())&&(y([...b,g.trim()]),k(""))},B=S=>{y(b.filter(L=>L!==S))},$=S=>{S.key==="Enter"&&(S.preventDefault(),P())},D=[{id:"permanent",label:"",sub:"Permanent",icon:S6,color:"text-blue-600",bg:"bg-blue-50"},{id:"event",label:"",sub:"Event",icon:hv,color:"text-yellow-600",bg:"bg-yellow-50"},{id:"summary",label:"",sub:"Summary",icon:n8,color:"text-green-600",bg:"bg-green-50"},{id:"date",label:"",sub:"Date",icon:B_,color:"text-pink-600",bg:"bg-pink-50"}],T=S=>{const L=l.filter(z=>z.id!==S);w(L)},H=S=>{const L=gi.createMemory(S,"...");L.date=L.created_at,w([...l,L])},K=D.find(S=>S.id===a),I=(()=>{const S=l.filter(L=>L.type===a);return a==="event"?[...S].sort((L,z)=>{const R=L.active!==!1,U=z.active!==!1;if(R!==U)return R?-1:1;const W=L.created_at||L.date||"";return(z.created_at||z.date||"").localeCompare(W)}):[...S].reverse()})();return t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-4 pt-2 shrink-0",children:[t.jsx("button",{onClick:n,className:"p-2 -ml-2 rounded-full hover:bg-black/5 transition-colors text-[#555] active:scale-90",children:t.jsx(an,{size:24})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h2",{className:"text-xl font-serif font-bold text-[#2c3e50]",children:e.name}),t.jsx("p",{className:"text-[10px] tracking-widest text-[#7f8c8d] uppercase",children:"Memory Summary"})]})]}),t.jsx("div",{className:"grid grid-cols-4 gap-1 px-2 mb-6 shrink-0",children:D.map(S=>{const L=a===S.id,z=S.icon;return t.jsxs("button",{onClick:()=>i(S.id),className:`flex flex-col items-center gap-1.5 p-1.5 rounded-xl transition-all ${L?"bg-white shadow-sm scale-105 z-10":"hover:bg-white/40 opacity-70"}`,children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center transition-colors ${L?`${S.bg} ${S.color}`:"bg-gray-100 text-gray-400"}`,children:t.jsx(z,{size:16,strokeWidth:L?2.5:2})}),t.jsx("span",{className:`text-[10px] font-bold whitespace-nowrap scale-90 ${L?"text-[#2c3e50]":"text-[#95a5a6]"}`,children:S.label})]},S.id)})}),t.jsx("div",{className:"flex-1 overflow-y-auto pb-20 pr-1 pl-1",children:t.jsx(Ie,{mode:"popLayout",initial:!1,children:t.jsxs(xe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"space-y-3",children:[t.jsxs("button",{onClick:()=>H(a),className:"w-full py-3 mb-2 flex items-center justify-center gap-2 text-sm text-[#95a5a6] hover:text-[#2c3e50] hover:bg-white/40 rounded-xl transition-all border border-dashed border-[#bdc3c7]/60 hover:border-[#bdc3c7]",children:[t.jsx(is,{size:16}),t.jsxs("span",{children:["",K.label]})]}),I.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[t.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-3 ${K.bg}`,children:t.jsx(K.icon,{size:32,className:`opacity-50 ${K.color}`})}),t.jsxs("p",{className:"text-sm text-[#95a5a6] font-medium",children:["",K.label]}),t.jsx("p",{className:"text-[10px] text-[#bdc3c7] mt-1",children:""})]}):I.map(S=>{const L=S.active!==!1,z=d===S.id,R=S.created_at||S.date;return t.jsx(xe.div,{initial:{opacity:0,y:10},animate:{opacity:!L&&!z?.75:1,y:0},className:`group relative rounded-xl p-4 text-sm border transition-all shadow-sm ${!L&&!z?"bg-gray-50 border-gray-200 text-gray-500":"bg-white/60 border-white/40 text-[#34495e] hover:bg-white/80"}`,children:z?t.jsxs("div",{className:"space-y-3",children:[t.jsx("textarea",{value:m,onChange:U=>p(U.target.value),className:"w-full bg-white border border-gray-200 rounded-lg p-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-100 min-h-[80px]",autoFocus:!0,placeholder:"..."}),(a==="event"||a==="date")&&t.jsxs("div",{className:"flex items-center gap-2",children:[a==="event"?t.jsx(Eg,{size:14,className:"text-orange-400"}):t.jsx(Eo,{size:14,className:"text-gray-400"}),t.jsx("input",{type:"date",value:f,onChange:U=>x(U.target.value),className:`bg-white border border-gray-200 rounded-md px-2 py-1.5 text-xs w-full focus:outline-none ${a==="event"?"focus:border-orange-300":"focus:border-blue-300"}`,placeholder:a==="event"?"":""})]}),(a==="event"||a==="summary")&&t.jsxs("div",{className:"space-y-2 pt-1",children:[t.jsx("div",{className:"flex flex-wrap gap-1.5 min-h-[24px]",children:b.map((U,W)=>t.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded bg-gray-100 text-gray-600 text-xs border border-gray-200",children:[t.jsx(mc,{size:10,className:"mr-1 opacity-50"}),U,t.jsx("button",{onClick:()=>B(U),className:"ml-1.5 hover:text-red-500 transition-colors",children:t.jsx(ht,{size:10})})]},W))}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(mc,{size:12,className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{value:g,onChange:U=>k(U.target.value),onKeyDown:$,placeholder:" ()",className:"w-full bg-gray-50 border border-gray-200 rounded-lg pl-7 pr-3 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-blue-200 focus:bg-white transition-all"})]}),t.jsx("button",{onClick:P,disabled:!g.trim(),className:"px-3 py-1.5 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-600 text-xs font-medium transition-colors disabled:opacity-50",children:t.jsx(is,{size:12})})]})]}),t.jsxs("div",{className:"flex justify-end gap-2 pt-1",children:[t.jsx("button",{onClick:N,className:"px-3 py-1.5 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-500 text-xs font-medium transition-colors",children:""}),t.jsxs("button",{onClick:()=>A(S.id),className:"px-3 py-1.5 rounded-lg bg-[#2c3e50] hover:bg-[#34495e] text-white text-xs font-medium transition-colors flex items-center gap-1",children:[t.jsx(wt,{size:12}),""]})]})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex justify-between items-start gap-2",children:t.jsx("p",{className:`pr-16 leading-relaxed ${L?"":"line-through decoration-gray-300"}`,children:S.content})}),(a==="event"||a==="summary")&&S.tags&&S.tags.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1.5 mt-2",children:S.tags.map((U,W)=>t.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-[10px] bg-gray-50 text-gray-500 border border-gray-100",children:[t.jsx(mc,{size:9,className:"mr-0.5 opacity-40"}),U]},W))}),t.jsxs("div",{className:"flex justify-between items-center mt-3 pt-2 border-t border-black/5",children:[t.jsx("div",{className:"flex items-center gap-2",children:R&&t.jsxs("div",{className:"flex flex-wrap items-center gap-12",children:[t.jsxs("p",{className:`text-[10px] font-mono flex items-center gap-1.5 ${L?"text-[#7f8c8d]":"text-gray-400"}`,children:[t.jsx(Eo,{size:12,className:L?"text-[#bdc3c7]":"text-gray-300"}),R]}),S.type==="event"&&S.expires_at&&t.jsxs("p",{className:`text-[10px] font-mono flex items-center gap-1.5 ${L?"text-orange-400":"text-gray-400"}`,children:[t.jsx(Eg,{size:12,className:L?"text-orange-300":"text-gray-300"}),S.expires_at]})]})}),t.jsxs("div",{className:"flex items-center gap-2",children:[S.type==="summary"&&t.jsxs("div",{className:`flex items-center gap-1 text-[10px] px-1.5 py-0.5 rounded-full border ${L?"bg-green-50 text-green-600 border-green-200":"bg-gray-100 text-gray-400 border-gray-200"}`,children:[L?t.jsx(iv,{size:10}):t.jsx(Tc,{size:10}),t.jsx("span",{children:L?"":""})]}),!L&&S.type==="event"&&t.jsx("span",{className:"flex items-center gap-1 text-[10px] px-2 py-0.5 rounded-full bg-gray-100 text-gray-400 border border-gray-200",children:t.jsx("span",{children:""})})]})]}),t.jsxs("div",{className:"absolute top-3 right-3 flex gap-1",children:[t.jsx("button",{onClick:()=>C(S),className:"p-1.5 text-[#bdc3c7] hover:text-[#2c3e50] hover:bg-black/5 rounded-lg transition-colors",children:t.jsx(m8,{size:14})}),t.jsx("button",{onClick:()=>T(S.id),className:"p-1.5 text-[#bdc3c7] hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:t.jsx(Dn,{size:14})})]})]})},S.id)}),t.jsx("div",{className:"h-10"})]},a)})})]})}function nF({onClose:e}){const[n,s]=j.useState("solitary"),[a,i]=j.useState(null),[l,c]=j.useState(!1),[d,u]=j.useState(200),[m,p]=j.useState(3),[f,x]=j.useState(!0),[b,y]=j.useState("forever"),[g,k]=j.useState("forever");j.useEffect(()=>{(async()=>{const N=await ae.get(te.MISC,"memory_extraction_settings");N&&(u(N.threshold??200),x(N.auto_summary??!0),y(N.summary_retention??"forever"),k(N.event_retention??"forever"),nh(N.summary_retention??"forever",N.event_retention??"forever"));const A=await ae.get(te.CHAT_SETTINGS,"chat_settings");A&&p(A.summary_limit??3)})()},[]),j.useEffect(()=>{const C=async N=>{if(a&&(!N.detail.characterId||N.detail.characterId===a.id))try{const P=(await ae.get(te.CHARACTERS,"characters")||[]).find(B=>B.id===a.id);P&&i(P)}catch(A){console.error("Failed to refresh selected character",A)}};return window.addEventListener("character-memories-updated",C),()=>window.removeEventListener("character-memories-updated",C)},[a]);const w=async()=>{await ae.set(te.MISC,"memory_extraction_settings",{threshold:d,auto_summary:f,summary_retention:b,event_retention:g});const C=await ae.get(te.CHAT_SETTINGS,"chat_settings")||{};await ae.set(te.CHAT_SETTINGS,"chat_settings",{...C,summary_limit:m}),await gi.refreshAllCharactersMemories(),await nh(b,g),c(!1)};return t.jsxs("div",{className:"fixed inset-0 z-50 font-sans overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"absolute inset-0 bg-[#f0f2f5]",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#e0eafc] to-[#cfdef3] opacity-60"}),t.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[50%] h-[50%] bg-purple-200/20 rounded-full blur-[100px]"}),t.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[60%] h-[60%] bg-blue-200/20 rounded-full blur-[100px]"})]}),t.jsx(Ie,{mode:"wait",children:a?t.jsx(xe.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},transition:{duration:.3,ease:"easeOut"},className:"relative z-30 h-full flex flex-col pt-12 px-6",children:t.jsx(tF,{character:a,onBack:()=>i(null),summaryLimit:m})},"detail"):t.jsxs(xe.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3,ease:"easeOut"},className:"relative z-20 flex flex-col h-full",children:[t.jsxs("div",{className:"flex flex-col pt-12 pb-4 px-6",children:[t.jsxs("div",{className:"flex justify-between items-start mb-6",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx(xe.h1,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-3xl text-[#2c3e50] font-serif tracking-widest font-bold",children:""}),t.jsx(xe.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-xs text-[#7f8c8d] mt-1 tracking-[0.2em] uppercase font-light",children:"Recollection"})]}),t.jsx("button",{onClick:e,className:"p-2 -mr-2 rounded-full hover:bg-black/5 transition-colors text-[#555] active:scale-90 duration-200 ml-2",children:t.jsx(ht,{size:24,strokeWidth:1.5})})]}),t.jsxs("div",{className:"flex items-end justify-between",children:[t.jsxs("div",{className:"flex gap-8",children:[t.jsx(jf,{isActive:n==="solitary",onClick:()=>s("solitary"),label:"",subLabel:"Solitary"}),t.jsx(jf,{isActive:n==="shared",onClick:()=>s("shared"),label:"",subLabel:"Shared"}),t.jsx(jf,{isActive:n==="trifling",onClick:()=>s("trifling"),label:"",subLabel:"Trifling"})]}),t.jsx("button",{onClick:()=>c(!0),className:"p-2 mb-1 text-[#95a5a6] hover:text-[#2c3e50] hover:bg-black/5 rounded-lg transition-colors",title:"",children:t.jsx(T8,{size:20,strokeWidth:1.5})})]})]}),t.jsxs("div",{className:"relative flex-1 z-10 overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 left-0 right-0 h-8 bg-gradient-to-b from-[#f0f2f5]/0 to-transparent z-20 pointer-events-none"}),t.jsxs(Ie,{mode:"wait",children:[n==="solitary"&&t.jsx(xe.div,{initial:{opacity:0,filter:"blur(10px)"},animate:{opacity:1,filter:"blur(0px)"},exit:{opacity:0,filter:"blur(10px)"},transition:{duration:.4,ease:"easeOut"},className:"h-full overflow-y-auto px-6 pb-20 pt-2",children:t.jsx(XD,{onSelect:i})},"solitary"),n==="shared"&&t.jsx(xe.div,{initial:{opacity:0,filter:"blur(10px)"},animate:{opacity:1,filter:"blur(0px)"},exit:{opacity:0,filter:"blur(10px)"},transition:{duration:.4,ease:"easeOut"},className:"h-full overflow-y-auto px-6 pb-20 pt-2",children:t.jsx(JD,{})},"shared"),n==="trifling"&&t.jsx(xe.div,{initial:{opacity:0,filter:"blur(10px)"},animate:{opacity:1,filter:"blur(0px)"},exit:{opacity:0,filter:"blur(10px)"},transition:{duration:.4,ease:"easeOut"},className:"h-full overflow-y-auto px-6 pb-20 pt-2",children:t.jsx(eF,{})},"trifling")]})]})]},"list")}),t.jsx(Ie,{children:l&&t.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] bg-black/20 backdrop-blur-sm flex items-center justify-center p-6",onClick:()=>c(!1),children:t.jsxs(xe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white/90 backdrop-blur-xl rounded-2xl p-6 w-full max-w-sm shadow-xl border border-white/50",onClick:C=>C.stopPropagation(),children:[t.jsx("h3",{className:"text-lg font-bold text-[#2c3e50] mb-4",children:""}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"space-y-0.5",children:[t.jsx("label",{className:"text-sm font-medium text-[#555]",children:""}),t.jsx("p",{className:"text-[10px] text-[#95a5a6]",children:""})]}),t.jsx(Av,{checked:f,onCheckedChange:x})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("label",{className:"text-sm font-medium text-[#555]",children:""}),t.jsxs("span",{className:"text-sm font-mono text-[#2c3e50]",children:[d," "]})]}),t.jsx("input",{type:"range",min:"10",max:"2000",step:"10",value:d,onChange:C=>u(Number(C.target.value)),className:"w-full accent-[#2c3e50] h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),t.jsx("p",{className:"text-[10px] text-[#95a5a6]",children:""})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("label",{className:"text-sm font-medium text-[#555]",children:""}),t.jsxs("span",{className:"text-sm font-mono text-[#2c3e50]",children:[m," "]})]}),t.jsx("input",{type:"range",min:"0",max:"100",step:"1",value:m,onChange:C=>p(Number(C.target.value)),className:"w-full accent-[#2c3e50] h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),t.jsx("p",{className:"text-[10px] text-[#95a5a6]",children:" Prompt "})]}),t.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-100",children:[t.jsx("h4",{className:"text-xs font-bold text-[#95a5a6] uppercase tracking-wider",children:""}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("label",{className:"text-sm font-medium text-[#555]",children:" (inactive)"}),t.jsxs(m1,{value:b,onValueChange:y,children:[t.jsx(g1,{className:"w-[100px] h-8 text-xs bg-gray-50 border-gray-200",children:t.jsx(x1,{placeholder:""})}),t.jsxs(b1,{children:[t.jsx(ii,{value:"7d",children:"7"}),t.jsx(ii,{value:"30d",children:"30"}),t.jsx(ii,{value:"forever",children:""})]})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("label",{className:"text-sm font-medium text-[#555]",children:" (inactive)"}),t.jsxs(m1,{value:g,onValueChange:k,children:[t.jsx(g1,{className:"w-[100px] h-8 text-xs bg-gray-50 border-gray-200",children:t.jsx(x1,{placeholder:""})}),t.jsxs(b1,{children:[t.jsx(ii,{value:"7d",children:"7"}),t.jsx(ii,{value:"30d",children:"30"}),t.jsx(ii,{value:"forever",children:""})]})]})]}),t.jsx("p",{className:"text-[10px] text-[#95a5a6]",children:"(active=false)"})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 mt-8",children:[t.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 rounded-lg text-sm text-[#7f8c8d] hover:bg-gray-100 transition-colors",children:""}),t.jsx("button",{onClick:w,className:"px-4 py-2 rounded-lg text-sm bg-[#2c3e50] text-white shadow-md hover:bg-[#34495e] transition-colors",children:""})]})]})})})]})}function jf({isActive:e,onClick:n,label:s,subLabel:a}){return t.jsxs("button",{onClick:n,className:"group flex flex-col items-start",children:[t.jsxs("div",{className:"relative",children:[t.jsx("span",{className:`text-base font-serif tracking-wide transition-colors duration-300 ${e?"text-[#2c3e50] font-medium":"text-[#95a5a6]"}`,children:s}),e&&t.jsx(xe.div,{layoutId:"activeDot",className:"absolute -right-2 top-0 w-1.5 h-1.5 bg-[#d4af37] rounded-full"})]}),t.jsx("span",{className:`text-[10px] tracking-wider uppercase transition-colors duration-300 ${e?"text-[#d4af37]":"text-transparent group-hover:text-[#bdc3c7]"}`,children:a})]})}function sF({onClose:e,onNavigate:n}){return t.jsxs("div",{className:"relative flex flex-col h-full bg-[#e6dbcc] text-[#1a1a1a] font-serif overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-60 mix-blend-multiply",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 500 500' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.4'/%3E%3C/svg%3E")`}}),t.jsx("div",{className:"absolute -bottom-20 -right-20 opacity-10 pointer-events-none text-[#2b4b64]",children:t.jsx(j7,{className:"w-96 h-96"})}),t.jsxs("div",{className:"relative z-20 flex items-center justify-between px-4 pt-12 pb-4",children:[t.jsx("button",{onClick:e,className:"group flex items-center justify-center w-12 h-12 rounded-full bg-[#1a1a1a] text-[#e6dbcc] border-2 border-[#1a1a1a] hover:bg-[#c93a40] hover:border-[#c93a40] transition-all shadow-lg active:scale-95 z-50",children:t.jsx(an,{className:"w-6 h-6"})}),t.jsx("div",{className:"absolute inset-x-0 top-12 flex justify-center pointer-events-none",children:t.jsx("div",{className:"bg-[#1a1a1a] text-[#e6dbcc] px-8 py-3 clip-path-plaque shadow-[4px_4px_0px_rgba(201,58,64,0.5)]",children:t.jsx("h1",{className:"text-2xl font-black tracking-[0.5em] font-serif",style:{textShadow:"1px 1px 0 #000"},children:""})})})]}),t.jsxs("div",{className:"flex-1 p-6 space-y-8 overflow-y-auto relative z-10 pb-12",children:[t.jsxs(xe.div,{whileHover:{scale:1.02,rotate:-1},whileTap:{scale:.98},onClick:()=>n("omikuji"),className:"group relative h-56 w-full bg-[#f4ebd9] border-4 border-[#1a1a1a] overflow-hidden cursor-pointer shadow-[8px_8px_0px_rgba(27,27,27,0.3)] hover:shadow-[12px_12px_0px_#c93a40] transition-shadow duration-300",children:[t.jsx("div",{className:"absolute inset-2 border border-[#1a1a1a]/20 pointer-events-none z-20"}),t.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-40 pointer-events-none z-0 opacity-90",children:t.jsxs("svg",{viewBox:"0 0 1000 300",preserveAspectRatio:"none",className:"w-full h-full",children:[t.jsx("path",{d:"M-100,60 h800 a10,10 0 0 1 10,10 v20 a10,10 0 0 1 -10,10 h-800 z",fill:"#c5a059",opacity:"0.4"}),t.jsx("path",{d:"M200,140 h900 a10,10 0 0 1 10,10 v25 a10,10 0 0 1 -10,10 h-900 z",fill:"#c93a40",opacity:"0.3"}),t.jsx("path",{d:"M-50,240 h600 a10,10 0 0 1 10,10 v15 a10,10 0 0 1 -10,10 h-600 z",fill:"#1a1a1a",opacity:"0.1"})]})}),t.jsx("div",{className:"absolute -top-8 -right-8 opacity-90 text-[#c93a40] z-10 pointer-events-none",children:t.jsxs("svg",{width:"240",height:"240",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{d:"M328.218327 1016.420563c133.098392 8.087855 201.861881-63.866624 230.921965-155.809944 48.400024 83.059391 131.165067 137.613944 259.192662 99.502688 14.931424-4.448655 26.190199-17.480202 27.695383-32.980251 0.080276-0.849593 0.153863-1.705875 0.22745-2.562158 1.732634-20.744779 18.978696-36.525795 39.770303-36.385311 0.856282 0.00669 1.712565 0.00669 2.568847 0 15.560256-0.107035 29.535052-10.161664 35.294889-24.651567 49.39679-124.221152 2.535399-211.622162-75.767611-267.320655 99.676621-21.962305 181.023447-90.384619 175.618164-240.80935-17.232683-11.37919-44.011576-21.380301-64.448628-24.417427 11.171809-17.460133 21.286645-44.299234 24.096321-64.809873-109.202762-103.028163-214.050526-86.651763-296.086391-25.741989C697.590449 138.918437 657.994078 40.713551 513.396081 0c-16.209158 12.931202-34.097432 35.361786-43.389433 53.892272-7.987509-9.726833-19.406837-20.142705-31.321204-28.819254-12.897753-9.385658-30.391335-9.974352-43.904541-1.371389C282.045976 95.435347 268.372217 193.894441 298.770241 285.115273c-88.023153-38.452431-187.164597-33.736188-268.625148 72.208688-9.760281 12.703752-10.750358 30.197333-2.568847 43.897851 0.367934 0.608763 0.735868 1.224216 1.110491 1.83298 10.563046 17.239373 5.860183 39.997753-10.69684 51.738186-0.588694 0.414762-1.164009 0.836213-1.746013 1.257665-12.957961 9.412416-18.992076 25.882473-15.051839 41.362453 32.899975 129.198294 122.254379 172.112758 218.51256 170.975508-64.18104 72.054824-90.799381 167.878174-15.573636 277.763286 9.011034 13.165342 25.333917 19.440286 40.920932 15.834535 0.695729-0.167243 1.391459-0.327796 2.093878-0.501728 19.694495-4.796519 39.850579 6.622809 45.824487 25.94937 0.214071 0.68904 0.428141 1.37139 0.648901 2.04705 4.883485 15.205702 18.650901 25.969439 34.59916 26.939446z m190.141516-487.478882c1.438287 0.441521 2.876574 0.876351 4.274723 1.244285 1.010146 0.990077 2.2745 1.966774 3.364922 2.95016-1.016835 0.90311-1.792841 2.020291-2.709331 3.030437a38.054393 38.054393 0 0 0-6.14115-3.478647c0.388003-1.257665 0.956628-2.455122 1.210836-3.746235z",fill:"currentColor"}),t.jsx("path",{d:"M694.064974 504.678117c-1.853049-12.683683-13.633621-21.420439-26.317304-19.513873-10.563046 1.58546-18.410071 10.054628-19.674426 20.169464l-108.741172 16.349642 73.098418-82.417179c9.131449 4.462034 20.48388 2.50195 27.581659-5.505629 8.529375-9.613108 7.679783-24.290323-1.893187-32.779559-9.572969-8.489237-24.243495-7.579437-32.766181 2.03367-7.104468 8.007578-7.693162 19.527252-2.167464 28.056628L530.093588 513.48177l3.244507-109.918561c9.887386-2.461812 17.359787-11.265465 17.674204-21.942236 0.381313-12.824167-9.700074-23.480868-22.517551-23.801974-12.810787-0.321106-23.507627 9.807109-23.88894 22.631276-0.314416 10.670081 6.616119 19.841668 16.342952 22.805208l-3.244508 109.911871-68.107897-85.989482c6.020735-8.241718 6.101012-19.761392-0.515108-28.116835-7.940681-10.034559-22.53762-11.680227-32.598938-3.692718-10.061318 7.994199-11.773883 22.604517-3.826511 32.639076 6.616119 8.348753 17.841446 10.884152 27.220414 6.890398l68.107897 85.976102L400.386877 499.052074c-0.668971-10.154974-8.007578-18.998765-18.45021-21.119402-12.556578-2.548778-24.832189 5.585905-27.434484 18.149172-2.595606 12.569958 5.47218 24.825499 18.022068 27.374278 10.449321 2.120637 20.71133-3.164231 25.353986-12.242162L505.475469 533.035781l-96.739839 52.547641c-7.037571-7.325228-18.363243-9.365589-27.76228-4.261343-11.285534 6.13446-15.506739 20.236361-9.425796 31.501826 6.080943 11.265465 20.156084 15.426462 31.441618 9.298692 9.399037-5.104246 13.88783-15.734189 11.62002-25.655023l96.746529-52.554331-40.626585 102.339124c-10.114836-1.063663-20.122636 4.669415-24.069562 14.603628-4.736312 11.941125 1.077043 25.420883 12.984719 30.110367 11.907677 4.689484 25.407504-1.184078 30.143816-13.118514 3.946927-9.940903 0.568625-20.94547-7.545989-27.059861l40.626585-102.345813 34.512194 104.24569c-8.469168 5.69294-12.489681 16.516884-9.138139 26.638409 4.027203 12.161886 17.152406 18.704418 29.327672 14.630388 12.168575-4.080721 18.771315-17.246062 14.744112-29.407948-3.351543-10.121525-13.018168-16.356331-23.186521-15.801086l-34.512194-104.24569 93.502022 57.377609c-2.843125 9.78704 1.010146 20.624364 10.094767 26.196889 10.910911 6.689706 25.206813 3.244507 31.943346-7.693162 6.729844-10.944359 3.351543-25.240261-7.552678-31.929967-9.084621-5.572525-20.517329-4.10748-27.976351 2.856504L541.131603 533.932201l108.734483-16.349641c4.10079 9.305381 14.028314 15.098667 24.591359 13.513206 12.676993-1.906566 21.453887-13.733967 19.607529-26.417649z",fill:"#c5a059"})]})}),t.jsxs("div",{className:"absolute top-4 left-6 z-30",children:[t.jsx("div",{className:"bg-[#f4ebd9] border-2 border-[#1a1a1a] inline-block px-3 py-1 mb-2 shadow-[2px_2px_0px_#1a1a1a]",children:t.jsx("span",{className:"text-xs font-black tracking-widest text-[#1a1a1a]",children:""})}),t.jsxs("h2",{className:"text-5xl font-black text-[#1a1a1a] mb-0 leading-none",style:{textShadow:"2px 2px 0px #f4ebd9"},children:["",t.jsx("br",{}),"",t.jsx("br",{}),""]})]}),t.jsx("div",{className:"absolute bottom-6 right-6 z-30",children:t.jsx("div",{className:"w-16 h-16 rounded-full border-4 border-[#c93a40] bg-[#f4ebd9] flex items-center justify-center rotate-12 shadow-lg",children:t.jsx("span",{className:"text-[#c93a40] font-black text-xl",children:""})})})]}),t.jsxs(xe.div,{whileHover:{scale:1.02,rotate:1},whileTap:{scale:.98},onClick:()=>n("hyakumonogatari"),className:"group relative h-56 w-full bg-[#1e3148] border-4 border-[#1a1a1a] overflow-hidden cursor-pointer shadow-[8px_8px_0px_rgba(27,27,27,0.3)] hover:shadow-[12px_12px_0px_#4a6fa5] transition-shadow duration-300",children:[t.jsx("div",{className:"absolute inset-2 border border-[#e6dbcc]/20 pointer-events-none z-20"}),t.jsx("div",{className:"absolute top-0 right-0 w-3/4 h-full bg-[#1a1a1a] opacity-30 skew-x-12"}),t.jsx(c_,{className:"absolute -bottom-4 -left-4 w-40 h-40 text-[#4a6fa5] opacity-20"}),t.jsx("div",{className:"absolute top-10 right-12 z-10 animate-pulse",children:t.jsx(lv,{className:"w-24 h-24 text-[#e6dbcc] fill-[#c5a059]"})}),t.jsxs("div",{className:"absolute top-4 left-6 z-30",children:[t.jsx("div",{className:"bg-[#1e3148] border-2 border-[#e6dbcc] inline-block px-3 py-1 mb-2 shadow-[2px_2px_0px_#000]",children:t.jsx("span",{className:"text-xs font-black tracking-widest text-[#e6dbcc]",children:""})}),t.jsxs("h2",{className:"text-5xl font-black text-[#e6dbcc] mb-0 leading-none",style:{textShadow:"3px 3px 0px #1a1a1a"},children:["",t.jsx("br",{}),"",t.jsx("br",{}),""]})]})]}),t.jsx("div",{className:"flex justify-center mt-8",children:t.jsx("div",{className:"border-2 border-[#c93a40] px-4 py-2 rotate-[-2deg] opacity-70",children:t.jsx("span",{className:"text-[#c93a40] font-serif font-bold tracking-[0.5em] text-xs",children:""})})})]}),t.jsx("style",{jsx:!0,global:!0,children:`
        .clip-path-plaque {
          clip-path: polygon(10% 0, 90% 0, 100% 50%, 90% 100%, 10% 100%, 0% 50%);
        }
      `})]})}function rF({onBack:e}){return t.jsxs("div",{className:"relative flex flex-col h-full bg-[#f2e6d8] text-[#1a1a1a] font-serif overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-40 mix-blend-multiply",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.5'/%3E%3C/svg%3E")`}}),t.jsx("div",{className:"absolute top-0 bottom-0 left-2 w-1 bg-[#c93a40]/30"}),t.jsx("div",{className:"absolute top-0 bottom-0 right-2 w-1 bg-[#c93a40]/30"}),t.jsxs("div",{className:"relative z-20 flex items-center justify-between px-4 pt-12 pb-4",children:[t.jsx("button",{onClick:e,className:"group flex items-center justify-center w-10 h-10 rounded-full border-2 border-[#1a1a1a] bg-[#f2e6d8] text-[#1a1a1a] hover:bg-[#c93a40] hover:text-[#f2e6d8] transition-colors shadow-[2px_2px_0px_rgba(0,0,0,1)] active:translate-x-[1px] active:translate-y-[1px] active:shadow-none",children:t.jsx(an,{className:"w-5 h-5"})}),t.jsx("div",{className:"border-y-2 border-[#1a1a1a] py-1 px-4 bg-[#c93a40] text-[#f2e6d8] shadow-[4px_4px_0px_rgba(0,0,0,0.2)]",children:t.jsx("h1",{className:"text-xl font-bold tracking-[0.3em]",children:""})}),t.jsx("div",{className:"w-10"})]}),t.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6 text-center relative z-10",children:[t.jsxs("div",{className:"w-40 h-64 bg-[#c93a40] border-4 border-[#1a1a1a] relative mb-8 shadow-[8px_8px_0px_rgba(0,0,0,0.2)] flex flex-col items-center justify-between py-6",children:[t.jsx("div",{className:"w-full h-4 border-y border-[#1a1a1a] bg-[#f2e6d8]"}),t.jsx("div",{className:"bg-[#f2e6d8] px-3 py-6 border-2 border-[#1a1a1a]",children:t.jsx("span",{className:"text-2xl font-bold text-[#1a1a1a] writing-vertical-rl tracking-widest",children:""})}),t.jsx("div",{className:"w-4 h-4 bg-[#1a1a1a] rounded-full"})]}),t.jsxs("div",{className:"bg-[#f2e6d8] border-2 border-[#1a1a1a] p-4 shadow-[4px_4px_0px_#1a1a1a] max-w-[80%]",children:[t.jsx("h2",{className:"text-xl font-bold mb-2 tracking-widest text-[#c93a40]",children:""}),t.jsx("div",{className:"w-full h-[1px] bg-[#1a1a1a] mb-2"}),t.jsxs("p",{className:"text-[#1a1a1a] text-sm tracking-wider font-medium",children:["",t.jsx("br",{}),""]})]})]})]})}function aF({onBack:e}){return t.jsxs("div",{className:"relative flex flex-col h-full bg-[#2b4b64] text-[#f2e6d8] font-serif overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-20 mix-blend-overlay",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.5'/%3E%3C/svg%3E")`}}),t.jsxs("div",{className:"relative z-20 flex items-center justify-between px-4 pt-12 pb-4",children:[t.jsx("button",{onClick:e,className:"group flex items-center justify-center w-10 h-10 rounded-full border-2 border-[#f2e6d8] bg-[#2b4b64] text-[#f2e6d8] hover:bg-[#f2e6d8] hover:text-[#2b4b64] transition-colors shadow-[2px_2px_0px_#1a1a1a] active:translate-x-[1px] active:translate-y-[1px] active:shadow-none",children:t.jsx(an,{className:"w-5 h-5"})}),t.jsx("div",{className:"border-y-2 border-[#f2e6d8] py-1 px-4 bg-[#1a1a1a] text-[#f2e6d8] shadow-[4px_4px_0px_rgba(0,0,0,0.5)]",children:t.jsx("h1",{className:"text-xl font-bold tracking-[0.3em]",children:""})}),t.jsx("div",{className:"w-10"})]}),t.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6 text-center relative z-10",children:[t.jsxs("div",{className:"relative mb-8",children:[t.jsx("div",{className:"absolute inset-0 bg-blue-400 blur-3xl opacity-20 animate-pulse"}),t.jsx(lv,{className:"w-32 h-32 text-[#d4af37] drop-shadow-[0_0_15px_#d4af37]"}),t.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-4 h-12 bg-[#f2e6d8] opacity-50 blur-sm"})]}),t.jsxs("div",{className:"bg-[#1a1a1a] border-2 border-[#f2e6d8] p-6 shadow-[4px_4px_0px_#f2e6d8] max-w-[80%] relative",children:[t.jsx("div",{className:"absolute top-[-4px] left-[-4px] w-3 h-3 border-t-2 border-l-2 border-[#f2e6d8]"}),t.jsx("div",{className:"absolute bottom-[-4px] right-[-4px] w-3 h-3 border-b-2 border-r-2 border-[#f2e6d8]"}),t.jsx("h2",{className:"text-xl font-bold mb-2 tracking-widest text-[#d4af37]",children:""}),t.jsx("div",{className:"w-full h-[1px] bg-[#f2e6d8]/30 mb-2"}),t.jsxs("p",{className:"text-[#f2e6d8]/90 text-sm tracking-wider font-medium",children:["",t.jsx("br",{}),""]})]})]})]})}const v1={enter:e=>({x:e>0?"100%":"-25%",opacity:0}),center:{x:0,opacity:1},exit:e=>({x:e<0?"100%":"-25%",opacity:0})};function iF({onClose:e}){const[n,s]=j.useState("hub"),[a,i]=j.useState(0),l=j.useRef(!0);j.useEffect(()=>{const u=setTimeout(()=>{l.current=!1},500);return()=>clearTimeout(u)},[]);const c=u=>{i(1),s(u)},d=()=>{i(-1),s("hub")};return t.jsx("div",{className:"fixed inset-0 z-50 bg-[#1c1c1e] font-['Source_Han_Sans_CN_VF',sans-serif] overflow-hidden",children:t.jsx("div",{className:"relative z-10 h-full w-full",children:t.jsx(Ie,{initial:!1,custom:a,children:n==="hub"?t.jsx(xe.div,{custom:a,variants:v1,initial:l.current?"center":"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"absolute inset-0 w-full h-full",children:t.jsx(sF,{onClose:e,onNavigate:c})},"hub"):t.jsxs(xe.div,{custom:a,variants:v1,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"absolute inset-0 w-full h-full",children:[n==="omikuji"&&t.jsx(rF,{onBack:d}),n==="hyakumonogatari"&&t.jsx(aF,{onBack:d})]},n)})})})}const or={initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20}},lr={duration:.2,ease:"easeInOut"};function oF({userData:e,preloadedImages:n={},initialChatId:s}){const[a,i]=j.useState(0),[l,c]=j.useState(0),[d,u]=j.useState(!1),[m,p]=j.useState(e),[f,x]=j.useState(!1),[b,y]=j.useState(!1),[g,k]=j.useState(!1),[w,C]=j.useState(!1),[N,A]=j.useState(!1),[P,B]=j.useState(!1),[$,D]=j.useState(!1),[T,H]=j.useState(!1),[K,E]=j.useState(!1),[I,S]=j.useState(s||null),[L,z]=j.useState(n.desktop_wallpaper||null),R=j.useRef(0),U=j.useRef(0),W=j.useRef(null),Z=j.useRef(K),O=j.useRef(I);j.useEffect(()=>{Z.current=K},[K]),j.useEffect(()=>{O.current=I},[I]),j.useEffect(()=>{s&&(E(!0),S(s))},[s]),j.useEffect(()=>{const Ce=Ue=>{if(Ue.data){if(Ue.data.type==="open-conversation"){const{conversationId:Ze}=Ue.data;E(!0),S(Ze)}if(Ue.data.type==="AI_TASK_COMPLETED"){const{messages:Ze,characterId:et,displayName:ut}=Ue.data.payload;if(!Ze||Ze.length===0)return;const tt=Ze[Ze.length-1];if(tt.text&&(tt.text.includes("")||tt.text.includes("")||tt.text.includes('"permanent":')||tt.text.includes('"summary":')||tt.text.includes("```json"))){console.log("[Memory] Received extraction result for",et);try{const _t=Vv(tt.text);Hv(et,_t).then(()=>{Br.success("",{description:` ${_t.length} `,duration:3e3})})}catch(_t){console.error("[Memory] Failed to parse/save memories",_t)}return}const Mt=ut||tt.senderName||"",Ct=Z.current;O.current,Ct||Br(Mt,{description:tt.text,action:{label:"",onClick:()=>{E(!0),S(et)}},duration:5e3})}if(Ue.data.type==="AI_TASK_FAILED"){const{characterId:Ze,error:et}=Ue.data.payload,ut=Z.current,tt=O.current;(!ut||tt!==Ze)&&Br.error("",{description:et,duration:5e3})}}};return"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",Ce),()=>{"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener("message",Ce)}},[]),j.useEffect(()=>{(async()=>{try{const Ze=await ae.get(te.MISC,"desktop_wallpaper");if(Ze)if(Ze.startsWith("data:"))z(Ze);else{const et=await xt(Ze);z(et)}}catch(Ze){console.error("Failed to load wallpaper:",Ze)}})();const Ue=Ze=>{z(Ze.detail)};return window.addEventListener("wallpaperChange",Ue),()=>{window.removeEventListener("wallpaperChange",Ue)}},[]);const V=Ce=>{p(Ce)},ee=()=>{E(!1),y(!1),k(!1),C(!1),A(!1),B(!1),D(!1),H(!1),x(!0)},q=()=>{x(!1)},G=()=>{y(!0)},Q=()=>{y(!1)},le=()=>{k(!0)},ne=()=>{k(!1)},ie=()=>{C(!0)},ve=()=>{C(!1)},se=()=>{A(!0)},ge=()=>{A(!1)},Me=()=>{B(!0)},M=()=>{B(!1)},me=()=>{D(!0)},he=()=>{D(!1)},J=()=>{H(!0)},X=()=>{H(!1)},oe=()=>{E(!0)},ke=()=>{E(!1)},Ne=Ce=>{S(Ce)},de=Ce=>{u(!0),R.current=Ce.touches[0].clientX,U.current=Ce.touches[0].clientX},fe=Ce=>{if(!d)return;U.current=Ce.touches[0].clientX;const Ue=U.current-R.current,et=a*-50+Ue/window.innerWidth*50;et<=0&&et>=-50&&c(et)},_e=()=>{if(!d)return;const Ce=U.current-R.current,Ue=window.innerWidth*.3;Ce<-Ue&&a===0?(i(1),c(-50)):Ce>Ue&&a===1?(i(0),c(0)):c(a*-50),u(!1)},Se=Ce=>{u(!0),R.current=Ce.clientX,U.current=Ce.clientX},Be=Ce=>{if(!d)return;U.current=Ce.clientX;const Ue=U.current-R.current,et=a*-50+Ue/window.innerWidth*50;et<=0&&et>=-50&&c(et)},ot=()=>{if(!d)return;const Ce=U.current-R.current,Ue=window.innerWidth*.3;Ce<-Ue&&a===0?(i(1),c(-50)):Ce>Ue&&a===1?(i(0),c(0)):c(a*-50),u(!1)};return j.useEffect(()=>{const Ce=()=>{d&&(u(!1),c(a*-50))};return window.addEventListener("mouseup",Ce),()=>window.removeEventListener("mouseup",Ce)},[d,a]),t.jsxs("div",{ref:W,className:"relative w-full h-screen overflow-hidden","data-name":"",onTouchStart:de,onTouchMove:fe,onTouchEnd:_e,onMouseDown:Se,onMouseMove:Be,onMouseUp:ot,children:[L?t.jsx("img",{alt:"",className:"absolute inset-0 w-full h-full object-cover pointer-events-none",src:L}):t.jsx("div",{className:"absolute inset-0 w-full h-full pointer-events-none",style:{backgroundColor:"#D5EAE3"}}),t.jsxs("div",{className:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full h-full max-w-[440px] max-h-[956px] aspect-[440/956] overflow-hidden",children:[t.jsxs("div",{className:"absolute inset-0 flex transition-transform",style:{transform:`translateX(${l}%)`,transitionDuration:d?"0ms":"300ms",width:"200%"},children:[t.jsx("div",{className:"relative w-1/2 h-full flex-shrink-0",children:t.jsx(kA,{userData:m,onUserDataChange:V,onChatClick:oe,onMemoryClick:me,preloadedImages:n})}),t.jsx("div",{className:"relative w-1/2 h-full flex-shrink-0",children:t.jsx(AA,{preloadedImages:n,onShopClick:ie,onHealthClick:se,onScheduleClick:Me,onEntertainmentClick:J})})]}),t.jsx(FA,{onSettingsClick:ee,onWorldBookClick:G,onCharacterClick:le,onChatClick:oe}),t.jsx(MA,{currentPage:a})]}),t.jsx(Ie,{children:f&&t.jsx(xe.div,{variants:or,initial:"initial",animate:"animate",exit:"exit",transition:lr,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:Ce=>Ce.stopPropagation(),onTouchStart:Ce=>Ce.stopPropagation(),onMouseDown:Ce=>Ce.stopPropagation(),children:t.jsx(t9,{onClose:q})},"settings")}),t.jsx(Ie,{children:b&&t.jsx(xe.div,{variants:or,initial:"initial",animate:"animate",exit:"exit",transition:lr,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:Ce=>Ce.stopPropagation(),onTouchStart:Ce=>Ce.stopPropagation(),onMouseDown:Ce=>Ce.stopPropagation(),children:t.jsx(r9,{onClose:Q})},"worldbook-app")}),t.jsx(Ie,{children:g&&t.jsx(xe.div,{variants:or,initial:"initial",animate:"animate",exit:"exit",transition:lr,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:Ce=>Ce.stopPropagation(),onTouchStart:Ce=>Ce.stopPropagation(),onMouseDown:Ce=>Ce.stopPropagation(),children:t.jsx(l9,{onClose:ne})},"character-app")}),t.jsx(Ie,{children:w&&t.jsx(xe.div,{variants:or,initial:"initial",animate:"animate",exit:"exit",transition:lr,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:Ce=>Ce.stopPropagation(),onTouchStart:Ce=>Ce.stopPropagation(),onMouseDown:Ce=>Ce.stopPropagation(),children:t.jsx(kE,{onClose:ve})},"shop-app")}),t.jsx(Ie,{children:N&&t.jsx(xe.div,{variants:or,initial:"initial",animate:"animate",exit:"exit",transition:lr,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:Ce=>Ce.stopPropagation(),onTouchStart:Ce=>Ce.stopPropagation(),onMouseDown:Ce=>Ce.stopPropagation(),children:t.jsx(dE,{onClose:ge})},"health-app")}),t.jsx(Ie,{children:P&&t.jsx(xe.div,{variants:or,initial:"initial",animate:"animate",exit:"exit",transition:lr,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:Ce=>Ce.stopPropagation(),onTouchStart:Ce=>Ce.stopPropagation(),onMouseDown:Ce=>Ce.stopPropagation(),children:t.jsx(TE,{onClose:M})},"schedule-app")}),t.jsx(Ie,{children:$&&t.jsx(xe.div,{variants:or,initial:"initial",animate:"animate",exit:"exit",transition:lr,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:Ce=>Ce.stopPropagation(),onTouchStart:Ce=>Ce.stopPropagation(),onMouseDown:Ce=>Ce.stopPropagation(),children:t.jsx(nF,{onClose:he})},"memory-app")}),t.jsx(Ie,{children:T&&t.jsx(xe.div,{variants:or,initial:"initial",animate:"animate",exit:"exit",transition:lr,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:Ce=>Ce.stopPropagation(),onTouchStart:Ce=>Ce.stopPropagation(),onMouseDown:Ce=>Ce.stopPropagation(),children:t.jsx(iF,{onClose:X})},"entertainment-app")}),t.jsx(Ie,{children:K&&t.jsx(xe.div,{variants:or,initial:"initial",animate:"animate",exit:"exit",transition:lr,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:Ce=>Ce.stopPropagation(),onTouchStart:Ce=>Ce.stopPropagation(),onMouseDown:Ce=>Ce.stopPropagation(),children:t.jsx(aE,{onClose:ke,initialChatId:I,onChatChange:Ne})},"chat-app")})]})}function lF(){const[e,n]=j.useState(null),[s,a]=j.useState(!1),[i,l]=j.useState(!1),[c,d]=j.useState(!1);j.useEffect(()=>{const p=/iPad|iPhone|iPod/.test(navigator.userAgent);l(p);const f=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||document.referrer.includes("android-app://");d(f);const x=y=>{y.preventDefault(),n(y),!localStorage.getItem("pwa-install-prompt-closed")&&!f&&a(!0)};window.addEventListener("beforeinstallprompt",x),p&&!f&&(localStorage.getItem("pwa-install-ios-prompt-closed")||a(!0));const b=()=>{a(!1),n(null),localStorage.removeItem("pwa-install-prompt-closed"),localStorage.removeItem("pwa-install-ios-prompt-closed")};return window.addEventListener("appinstalled",b),()=>{window.removeEventListener("beforeinstallprompt",x),window.removeEventListener("appinstalled",b)}},[]);const u=async()=>{if(!e)return;e.prompt();const{outcome:p}=await e.userChoice;console.log(p==="accepted"?"":""),n(null),a(!1)},m=()=>{a(!1),i?localStorage.setItem("pwa-install-ios-prompt-closed","true"):localStorage.setItem("pwa-install-prompt-closed","true")};return c||!s?null:i?t.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t-2 border-gray-200 shadow-lg z-50 animate-slide-up",children:t.jsx("div",{className:"max-w-[420px] mx-auto p-4",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] text-black mb-2",children:" Touken OS "}),t.jsxs("div",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[13px] text-[#666] space-y-1",children:[t.jsxs("p",{className:"flex items-center gap-1",children:[" ",t.jsx(I8,{className:"w-4 h-4 inline"})," "]}),t.jsx("p",{children:'""'})]})]}),t.jsx("button",{onClick:m,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:t.jsx(ht,{className:"w-5 h-5 text-gray-500"})})]})})}):t.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t-2 border-gray-200 shadow-lg z-50 animate-slide-up",children:t.jsx("div",{className:"max-w-[420px] mx-auto p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] text-black mb-1",children:" Touken OS"}),t.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[13px] text-[#666]",children:""})]}),t.jsxs("button",{onClick:u,className:"bg-black text-white px-4 py-2 rounded-lg font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] flex items-center gap-2 hover:bg-gray-800 transition-colors",children:[t.jsx(g_,{className:"w-4 h-4"}),""]}),t.jsx("button",{onClick:m,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:t.jsx(ht,{className:"w-5 h-5 text-gray-500"})})]})})})}function cF(){return j.useEffect(()=>{(async()=>{try{const n=new Image;n.crossOrigin="anonymous",await new Promise((i,l)=>{n.onload=i,n.onerror=l,n.src=Kh});const s=[192,512],a={};for(const i of s){const l=document.createElement("canvas");l.width=i,l.height=i;const c=l.getContext("2d");if(c){c.fillStyle="#ffffff",c.fillRect(0,0,i,i);const d=Math.min(i/n.width,i/n.height)*.9,u=(i-n.width*d)/2,m=(i-n.height*d)/2;c.drawImage(n,u,m,n.width*d,n.height*d);const p=l.toDataURL("image/png");if(a[i]=p,i===192){let f=document.querySelector('link[rel="icon"]');f||(f=document.createElement("link"),f.rel="icon",document.head.appendChild(f)),f.href=p;let x=document.querySelector('link[rel="apple-touch-icon"]');x||(x=document.createElement("link"),x.rel="apple-touch-icon",document.head.appendChild(x)),x.href=p}}}dF(a)}catch(n){console.error("PWA:",n)}})()},[]),null}function dF(e){const n={name:"Touken OS",short_name:"Touken OS",description:"",start_url:window.location.origin+"/",display:"standalone",background_color:"#ffffff",theme_color:"#000000",orientation:"portrait",scope:"/",icons:[{src:e[192]||"/icon-192.png",sizes:"192x192",type:"image/png",purpose:"any"},{src:e[192]||"/icon-192.png",sizes:"192x192",type:"image/png",purpose:"maskable"},{src:e[512]||"/icon-512.png",sizes:"512x512",type:"image/png",purpose:"any"},{src:e[512]||"/icon-512.png",sizes:"512x512",type:"image/png",purpose:"maskable"}],categories:["entertainment","lifestyle"],lang:"zh-CN",dir:"ltr"},s=new Blob([JSON.stringify(n)],{type:"application/json"}),a=URL.createObjectURL(s);let i=document.querySelector('link[rel="manifest"]');i||(i=document.createElement("link"),i.rel="manifest",document.head.appendChild(i)),i.href=a}function uF({onAnimationComplete:e}){const[n,s]=j.useState(0),[a,i]=j.useState([]);return j.useEffect(()=>{let u=0;const m=setInterval(()=>{u++;const p=Math.min(100,u/100*100);s(p),p>10&&a.length===0&&i(f=>[...f,">> ..."]),p>30&&a.length===1&&i(f=>[...f,">> ..."]),p>50&&a.length===2&&i(f=>[...f,">> ..."]),p>70&&a.length===3&&i(f=>[...f,">> ..."]),p>90&&a.length===4&&i(f=>[...f,">> Touken OS "]),u>=100&&(clearInterval(m),e&&setTimeout(e,200))},20);return()=>clearInterval(m)},[a.length]),t.jsxs("div",{className:"fixed inset-0 bg-[#F5F5F5] flex flex-col items-center justify-center font-['Source_Han_Sans_CN_VF',sans-serif] z-50",children:[t.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.03]",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),t.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-[#2C2C2C]"}),t.jsxs("div",{className:"w-full max-w-[320px] flex flex-col items-center relative z-10",children:[t.jsxs(xe.div,{initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0},transition:{duration:.8,ease:"easeOut"},className:"w-32 h-32 mb-12 relative",children:[t.jsx("div",{className:"absolute inset-0 bg-white rounded-full shadow-2xl opacity-50 blur-xl scale-90"}),t.jsx("img",{src:Kh,alt:"Touken OS Logo",className:"w-full h-full object-contain relative z-10 drop-shadow-lg"})]}),t.jsx("div",{className:"w-full h-1 bg-[#D6D3CC] mb-6 relative overflow-hidden rounded-full",children:t.jsx(xe.div,{className:"absolute top-0 left-0 bottom-0 bg-[#2C2C2C]",initial:{width:"0%"},animate:{width:`${n}%`},transition:{ease:"linear",duration:.1}})}),t.jsx("div",{className:"w-full h-24 font-mono text-[10px] text-[#5A5A55] space-y-1.5 overflow-hidden flex flex-col justify-end",children:t.jsx(Ie,{mode:"popLayout",children:a.map((l,c)=>t.jsxs(xe.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"flex items-center gap-2",children:[t.jsx("span",{className:"w-1 h-1 bg-[#34C759] rounded-full shrink-0 animate-pulse"}),t.jsx("span",{className:"truncate tracking-tight",children:l})]},c))})}),t.jsx("div",{className:"absolute -bottom-24 text-[9px] text-[#8C8C89] font-mono tracking-widest opacity-60",children:"CHRONOS GOVERNMENT TERMINAL V1.0"})]})]})}function fF(){j.useEffect(()=>{if("serviceWorker"in navigator){const s=()=>{navigator.serviceWorker.register("/sw.js").then(a=>{console.log("SW registered: ",a),a.addEventListener("updatefound",()=>{const i=a.installing;i&&i.addEventListener("statechange",()=>{i.state==="installed"&&navigator.serviceWorker.controller&&(console.log("New content is available; please refresh."),confirm("")&&(i.postMessage({type:"SKIP_WAITING"}),window.location.reload()))})})}).catch(a=>{if(a.message&&a.message.includes("MIME type")){console.warn("Service Worker registration skipped: sw.js not served with correct MIME type (likely dev environment issue).");return}console.log("SW registration failed: ",a)})};document.readyState==="complete"?s():window.addEventListener("load",s),navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()})}(()=>{let s=document.querySelector('meta[name="viewport"]');s||(s=document.createElement("meta"),s.setAttribute("name","viewport"),document.head.appendChild(s)),s.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover");let a=document.querySelector('meta[name="theme-color"]');a||(a=document.createElement("meta"),a.setAttribute("name","theme-color"),document.head.appendChild(a)),a.setAttribute("content","#000000");let i=document.querySelector('meta[name="apple-mobile-web-app-capable"]');i||(i=document.createElement("meta"),i.setAttribute("name","apple-mobile-web-app-capable"),document.head.appendChild(i)),i.setAttribute("content","yes");let l=document.querySelector('meta[name="apple-mobile-web-app-status-bar-style"]');l||(l=document.createElement("meta"),l.setAttribute("name","apple-mobile-web-app-status-bar-style"),document.head.appendChild(l)),l.setAttribute("content","default");let c=document.querySelector('meta[name="apple-mobile-web-app-title"]');c||(c=document.createElement("meta"),c.setAttribute("name","apple-mobile-web-app-title"),document.head.appendChild(c)),c.setAttribute("content","Touken OS");let d=document.querySelector('meta[name="description"]');d||(d=document.createElement("meta"),d.setAttribute("name","description"),document.head.appendChild(d)),d.setAttribute("content","");let u=document.querySelector('link[rel="manifest"]');u||(u=document.createElement("link"),u.setAttribute("rel","manifest"),document.head.appendChild(u)),u.setAttribute("href","/manifest.json");let m=document.querySelector('link[rel="apple-touch-icon"]');m||(m=document.createElement("link"),m.setAttribute("rel","apple-touch-icon"),document.head.appendChild(m)),m.setAttribute("href","/icon-192.png");let p=document.querySelector('link[rel="icon"]');p||(p=document.createElement("link"),p.setAttribute("rel","icon"),document.head.appendChild(p)),p.setAttribute("href","/icon-192.png")})(),document.addEventListener("gesturestart",s=>{s.preventDefault()}),document.addEventListener("gesturechange",s=>{s.preventDefault()}),document.addEventListener("gestureend",s=>{s.preventDefault()});let n=0;document.addEventListener("touchend",s=>{const a=Date.now();a-n<=300&&s.preventDefault(),n=a},!1)},[])}function hF(){const[e,n]=j.useState("loading"),[s,a]=j.useState(null),[i,l]=j.useState(!0),[c,d]=j.useState({}),[u,m]=j.useState(null),[p,f]=j.useState(!1),[x,b]=j.useState(null);fF(),j.useEffect(()=>{window.debugImageStorage=async()=>{console.log("=== Image Storage Debug ===");const g=await bv();console.log("Category stats:",g);const k=await up();return console.log("All images:",k),console.log("Total images:",k.length),{stats:g,images:k}},console.log("Debug tools available:"),console.log("- window.debugImageStorage() - ")},[]),j.useEffect(()=>{const g=[{name:"apple-mobile-web-app-capable",content:"yes"},{name:"apple-mobile-web-app-status-bar-style",content:"default"},{name:"apple-mobile-web-app-title",content:"Touken OS"},{name:"mobile-web-app-capable",content:"yes"}],k=[{rel:"apple-touch-icon",href:"/icon-192.png"}];g.forEach(C=>{let N=document.querySelector(`meta[name="${C.name}"]`);N||(N=document.createElement("meta"),N.setAttribute("name",C.name),document.head.appendChild(N)),N.setAttribute("content",C.content)}),k.forEach(C=>{let N=document.querySelector(`link[href="${C.href}"]`);N||(N=document.createElement("link"),N.setAttribute("rel",C.rel),N.setAttribute("href",C.href),document.head.appendChild(N))}),[{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:""},{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Bakbak+One&family=Bona+Nova:ital,wght@0,400;0,700;1,400&family=Braah+One&display=swap"}].forEach(C=>{if(!document.querySelector(`link[href="${C.href}"]`)){const N=document.createElement("link");N.rel=C.rel,N.href=C.href,C.crossOrigin!==void 0&&(N.crossOrigin=C.crossOrigin),document.head.appendChild(N)}})},[]),j.useEffect(()=>{(async()=>{try{console.log("Initializing application..."),console.log("Initializing database..."),await ae.init();try{console.log("Cleaning up stale AI tasks..."),await ae.clear(te.AI_TASKS)}catch($){console.warn("Failed to clear AI tasks store:",$)}(async()=>{try{const $=await ae.get(te.MISC,"memory_extraction_settings");$&&await nh($.summary_retention??"forever",$.event_retention??"forever"),await gi.refreshAllCharactersMemories()}catch($){console.warn("[App] Background memory cleanup failed",$)}})(),!1&&"Notification"in window&&Notification.permission;const C=new URLSearchParams(window.location.search).get("chatId");C&&(console.log("Found chatId in URL:",C),m(C),window.history.replaceState({},"","/"));const N=ae.get(te.USER_DATA,"userData"),A=(async()=>{const $=["desktop_wallpaper","profileBackground","avatar","anniversary","system-icon-desktop1-chat","system-icon-desktop1-forum","system-icon-desktop1-memory","system-icon-desktop1-transfer","desktop2_timeImage","desktop2_card1","desktop2_card2","desktop2_card3","desktop2_card4","system-icon-desktop2-shop","system-icon-desktop2-game","system-icon-desktop2-schedule","system-icon-desktop2-health"],D={};return await Promise.all($.map(async T=>{try{D[T]=await xt(T)}catch(H){console.warn(`Failed to preload image ${T}`,H),D[T]=null}})),D})(),[P,B]=await Promise.all([N,A]);b({userData:P||null,images:B})}catch(k){console.error("Failed to initialize app:",k),b({userData:null,images:{}})}})()},[]),j.useEffect(()=>{p&&x&&(console.log("Animation complete and data ready, transitioning..."),d(x.images),x.userData?(console.log("User data found, redirecting to desktop"),a(x.userData),n("desktop")):(console.log("No user data found, showing login page"),n("login")),setTimeout(()=>l(!1),100))},[p,x]);const y=g=>{a(g),n("desktop")};return t.jsxs(t.Fragment,{children:[t.jsx(cF,{}),t.jsxs(Ie,{mode:"wait",children:[e==="loading"&&t.jsx(xe.div,{className:"fixed inset-0 z-50",exit:{opacity:0,scale:1.1,filter:"blur(10px)"},transition:{duration:.8,ease:"easeInOut"},children:t.jsx(uF,{onAnimationComplete:()=>f(!0)})},"loading"),e==="login"&&t.jsx(xe.div,{className:"fixed inset-0 z-40",initial:{opacity:0,scale:.95,filter:"blur(10px)"},animate:{opacity:1,scale:1,filter:"blur(0px)"},exit:{opacity:0,scale:1.05,filter:"blur(10px)"},transition:{duration:.8,ease:"easeInOut"},children:t.jsx(E7,{onLoginSuccess:y})},"login"),e==="desktop"&&s&&t.jsx(xe.div,{className:"fixed inset-0 z-30",initial:{opacity:0,scale:.95,filter:"blur(10px)"},animate:{opacity:1,scale:1,filter:"blur(0px)"},exit:{opacity:0,scale:1.05,filter:"blur(10px)"},transition:{duration:.8,ease:"easeInOut"},children:t.jsx(oF,{userData:s,preloadedImages:c,initialChatId:u})},"desktop")]}),t.jsx(lF,{}),t.jsx(nA,{position:"top-center"})]})}A5.createRoot(document.getElementById("root")).render(t.jsx(hF,{}));
