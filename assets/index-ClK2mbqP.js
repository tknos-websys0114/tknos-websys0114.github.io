function pv(e,n){for(var s=0;s<n.length;s++){const i=n[s];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in e)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(e,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function s(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=s(o);fetch(o.href,l)}})();var tl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ll(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Dd={exports:{}},Di={},Fd={exports:{}},ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var im;function mv(){if(im)return ut;im=1;var e=Symbol.for("react.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.iterator;function m(M){return M===null||typeof M!="object"?null:(M=f&&M[f]||M["@@iterator"],typeof M=="function"?M:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,v={};function C(M,O,ee){this.props=M,this.context=O,this.refs=v,this.updater=ee||b}C.prototype.isReactComponent={},C.prototype.setState=function(M,O){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,O,"setState")},C.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function w(){}w.prototype=C.prototype;function F(M,O,ee){this.props=M,this.context=O,this.refs=v,this.updater=ee||b}var j=F.prototype=new w;j.constructor=F,y(j,C.prototype),j.isPureReactComponent=!0;var T=Array.isArray,z=Object.prototype.hasOwnProperty,B={current:null},U={key:!0,ref:!0,__self:!0,__source:!0};function D(M,O,ee){var W,V={},Z=null,ue=null;if(O!=null)for(W in O.ref!==void 0&&(ue=O.ref),O.key!==void 0&&(Z=""+O.key),O)z.call(O,W)&&!U.hasOwnProperty(W)&&(V[W]=O[W]);var ce=arguments.length-2;if(ce===1)V.children=ee;else if(1<ce){for(var me=Array(ce),Te=0;Te<ce;Te++)me[Te]=arguments[Te+2];V.children=me}if(M&&M.defaultProps)for(W in ce=M.defaultProps,ce)V[W]===void 0&&(V[W]=ce[W]);return{$$typeof:e,type:M,key:Z,ref:ue,props:V,_owner:B.current}}function A(M,O){return{$$typeof:e,type:M.type,key:O,ref:M.ref,props:M.props,_owner:M._owner}}function H(M){return typeof M=="object"&&M!==null&&M.$$typeof===e}function Y(M){var O={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ee){return O[ee]})}var _=/\/+/g;function L(M,O){return typeof M=="object"&&M!==null&&M.key!=null?Y(""+M.key):O.toString(36)}function k(M,O,ee,W,V){var Z=typeof M;(Z==="undefined"||Z==="boolean")&&(M=null);var ue=!1;if(M===null)ue=!0;else switch(Z){case"string":case"number":ue=!0;break;case"object":switch(M.$$typeof){case e:case n:ue=!0}}if(ue)return ue=M,V=V(ue),M=W===""?"."+L(ue,0):W,T(V)?(ee="",M!=null&&(ee=M.replace(_,"$&/")+"/"),k(V,O,ee,"",function(Te){return Te})):V!=null&&(H(V)&&(V=A(V,ee+(!V.key||ue&&ue.key===V.key?"":(""+V.key).replace(_,"$&/")+"/")+M)),O.push(V)),1;if(ue=0,W=W===""?".":W+":",T(M))for(var ce=0;ce<M.length;ce++){Z=M[ce];var me=W+L(Z,ce);ue+=k(Z,O,ee,me,V)}else if(me=m(M),typeof me=="function")for(M=me.call(M),ce=0;!(Z=M.next()).done;)Z=Z.value,me=W+L(Z,ce++),ue+=k(Z,O,ee,me,V);else if(Z==="object")throw O=String(M),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return ue}function $(M,O,ee){if(M==null)return M;var W=[],V=0;return k(M,W,"","",function(Z){return O.call(ee,Z,V++)}),W}function P(M){if(M._status===-1){var O=M._result;O=O(),O.then(function(ee){(M._status===0||M._status===-1)&&(M._status=1,M._result=ee)},function(ee){(M._status===0||M._status===-1)&&(M._status=2,M._result=ee)}),M._status===-1&&(M._status=0,M._result=O)}if(M._status===1)return M._result.default;throw M._result}var I={current:null},q={transition:null},G={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:q,ReactCurrentOwner:B};function Q(){throw Error("act(...) is not supported in production builds of React.")}return ut.Children={map:$,forEach:function(M,O,ee){$(M,function(){O.apply(this,arguments)},ee)},count:function(M){var O=0;return $(M,function(){O++}),O},toArray:function(M){return $(M,function(O){return O})||[]},only:function(M){if(!H(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},ut.Component=C,ut.Fragment=s,ut.Profiler=o,ut.PureComponent=F,ut.StrictMode=i,ut.Suspense=h,ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G,ut.act=Q,ut.cloneElement=function(M,O,ee){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var W=y({},M.props),V=M.key,Z=M.ref,ue=M._owner;if(O!=null){if(O.ref!==void 0&&(Z=O.ref,ue=B.current),O.key!==void 0&&(V=""+O.key),M.type&&M.type.defaultProps)var ce=M.type.defaultProps;for(me in O)z.call(O,me)&&!U.hasOwnProperty(me)&&(W[me]=O[me]===void 0&&ce!==void 0?ce[me]:O[me])}var me=arguments.length-2;if(me===1)W.children=ee;else if(1<me){ce=Array(me);for(var Te=0;Te<me;Te++)ce[Te]=arguments[Te+2];W.children=ce}return{$$typeof:e,type:M.type,key:V,ref:Z,props:W,_owner:ue}},ut.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:l,_context:M},M.Consumer=M},ut.createElement=D,ut.createFactory=function(M){var O=D.bind(null,M);return O.type=M,O},ut.createRef=function(){return{current:null}},ut.forwardRef=function(M){return{$$typeof:u,render:M}},ut.isValidElement=H,ut.lazy=function(M){return{$$typeof:p,_payload:{_status:-1,_result:M},_init:P}},ut.memo=function(M,O){return{$$typeof:g,type:M,compare:O===void 0?null:O}},ut.startTransition=function(M){var O=q.transition;q.transition={};try{M()}finally{q.transition=O}},ut.unstable_act=Q,ut.useCallback=function(M,O){return I.current.useCallback(M,O)},ut.useContext=function(M){return I.current.useContext(M)},ut.useDebugValue=function(){},ut.useDeferredValue=function(M){return I.current.useDeferredValue(M)},ut.useEffect=function(M,O){return I.current.useEffect(M,O)},ut.useId=function(){return I.current.useId()},ut.useImperativeHandle=function(M,O,ee){return I.current.useImperativeHandle(M,O,ee)},ut.useInsertionEffect=function(M,O){return I.current.useInsertionEffect(M,O)},ut.useLayoutEffect=function(M,O){return I.current.useLayoutEffect(M,O)},ut.useMemo=function(M,O){return I.current.useMemo(M,O)},ut.useReducer=function(M,O,ee){return I.current.useReducer(M,O,ee)},ut.useRef=function(M){return I.current.useRef(M)},ut.useState=function(M){return I.current.useState(M)},ut.useSyncExternalStore=function(M,O,ee){return I.current.useSyncExternalStore(M,O,ee)},ut.useTransition=function(){return I.current.useTransition()},ut.version="18.3.1",ut}var om;function Ku(){return om||(om=1,Fd.exports=mv()),Fd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lm;function gv(){if(lm)return Di;lm=1;var e=Ku(),n=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(u,h,g){var p,f={},m=null,b=null;g!==void 0&&(m=""+g),h.key!==void 0&&(m=""+h.key),h.ref!==void 0&&(b=h.ref);for(p in h)i.call(h,p)&&!l.hasOwnProperty(p)&&(f[p]=h[p]);if(u&&u.defaultProps)for(p in h=u.defaultProps,h)f[p]===void 0&&(f[p]=h[p]);return{$$typeof:n,type:u,key:m,ref:b,props:f,_owner:o.current}}return Di.Fragment=s,Di.jsx=c,Di.jsxs=c,Di}var cm;function xv(){return cm||(cm=1,Dd.exports=gv()),Dd.exports}var r=xv(),nl={},Md={exports:{}},Ln={},Id={exports:{}},Pd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dm;function bv(){return dm||(dm=1,(function(e){function n(q,G){var Q=q.length;q.push(G);e:for(;0<Q;){var M=Q-1>>>1,O=q[M];if(0<o(O,G))q[M]=G,q[Q]=O,Q=M;else break e}}function s(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var G=q[0],Q=q.pop();if(Q!==G){q[0]=Q;e:for(var M=0,O=q.length,ee=O>>>1;M<ee;){var W=2*(M+1)-1,V=q[W],Z=W+1,ue=q[Z];if(0>o(V,Q))Z<O&&0>o(ue,V)?(q[M]=ue,q[Z]=Q,M=Z):(q[M]=V,q[W]=Q,M=W);else if(Z<O&&0>o(ue,Q))q[M]=ue,q[Z]=Q,M=Z;else break e}}return G}function o(q,G){var Q=q.sortIndex-G.sortIndex;return Q!==0?Q:q.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,u=c.now();e.unstable_now=function(){return c.now()-u}}var h=[],g=[],p=1,f=null,m=3,b=!1,y=!1,v=!1,C=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(q){for(var G=s(g);G!==null;){if(G.callback===null)i(g);else if(G.startTime<=q)i(g),G.sortIndex=G.expirationTime,n(h,G);else break;G=s(g)}}function T(q){if(v=!1,j(q),!y)if(s(h)!==null)y=!0,P(z);else{var G=s(g);G!==null&&I(T,G.startTime-q)}}function z(q,G){y=!1,v&&(v=!1,w(D),D=-1),b=!0;var Q=m;try{for(j(G),f=s(h);f!==null&&(!(f.expirationTime>G)||q&&!Y());){var M=f.callback;if(typeof M=="function"){f.callback=null,m=f.priorityLevel;var O=M(f.expirationTime<=G);G=e.unstable_now(),typeof O=="function"?f.callback=O:f===s(h)&&i(h),j(G)}else i(h);f=s(h)}if(f!==null)var ee=!0;else{var W=s(g);W!==null&&I(T,W.startTime-G),ee=!1}return ee}finally{f=null,m=Q,b=!1}}var B=!1,U=null,D=-1,A=5,H=-1;function Y(){return!(e.unstable_now()-H<A)}function _(){if(U!==null){var q=e.unstable_now();H=q;var G=!0;try{G=U(!0,q)}finally{G?L():(B=!1,U=null)}}else B=!1}var L;if(typeof F=="function")L=function(){F(_)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,$=k.port2;k.port1.onmessage=_,L=function(){$.postMessage(null)}}else L=function(){C(_,0)};function P(q){U=q,B||(B=!0,L())}function I(q,G){D=C(function(){q(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_continueExecution=function(){y||b||(y=!0,P(z))},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return s(h)},e.unstable_next=function(q){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var Q=m;m=G;try{return q()}finally{m=Q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(q,G){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var Q=m;m=q;try{return G()}finally{m=Q}},e.unstable_scheduleCallback=function(q,G,Q){var M=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?M+Q:M):Q=M,q){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=Q+O,q={id:p++,callback:G,priorityLevel:q,startTime:Q,expirationTime:O,sortIndex:-1},Q>M?(q.sortIndex=Q,n(g,q),s(h)===null&&q===s(g)&&(v?(w(D),D=-1):v=!0,I(T,Q-M))):(q.sortIndex=O,n(h,q),y||b||(y=!0,P(z))),q},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function(q){var G=m;return function(){var Q=m;m=G;try{return q.apply(this,arguments)}finally{m=Q}}}})(Pd)),Pd}var um;function vv(){return um||(um=1,Id.exports=bv()),Id.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fm;function yv(){if(fm)return Ln;fm=1;var e=Ku(),n=vv();function s(t){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+t,d=1;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(t,a){c(t,a),c(t+"Capture",a)}function c(t,a){for(o[t]=a,t=0;t<a.length;t++)i.add(a[t])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(t){return h.call(f,t)?!0:h.call(p,t)?!1:g.test(t)?f[t]=!0:(p[t]=!0,!1)}function b(t,a,d,x){if(d!==null&&d.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return x?!1:d!==null?!d.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function y(t,a,d,x){if(a===null||typeof a>"u"||b(t,a,d,x))return!0;if(x)return!1;if(d!==null)switch(d.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function v(t,a,d,x,S,E,K){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=x,this.attributeNamespace=S,this.mustUseProperty=d,this.propertyName=t,this.type=a,this.sanitizeURL=E,this.removeEmptyString=K}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){C[t]=new v(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var a=t[0];C[a]=new v(a,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){C[t]=new v(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){C[t]=new v(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){C[t]=new v(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){C[t]=new v(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){C[t]=new v(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){C[t]=new v(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){C[t]=new v(t,5,!1,t.toLowerCase(),null,!1,!1)});var w=/[\-:]([a-z])/g;function F(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var a=t.replace(w,F);C[a]=new v(a,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var a=t.replace(w,F);C[a]=new v(a,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var a=t.replace(w,F);C[a]=new v(a,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){C[t]=new v(t,1,!1,t.toLowerCase(),null,!1,!1)}),C.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){C[t]=new v(t,1,!1,t.toLowerCase(),null,!0,!0)});function j(t,a,d,x){var S=C.hasOwnProperty(a)?C[a]:null;(S!==null?S.type!==0:x||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(y(a,d,S,x)&&(d=null),x||S===null?m(a)&&(d===null?t.removeAttribute(a):t.setAttribute(a,""+d)):S.mustUseProperty?t[S.propertyName]=d===null?S.type===3?!1:"":d:(a=S.attributeName,x=S.attributeNamespace,d===null?t.removeAttribute(a):(S=S.type,d=S===3||S===4&&d===!0?"":""+d,x?t.setAttributeNS(x,a,d):t.setAttribute(a,d))))}var T=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),B=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),Y=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),I=Symbol.for("react.offscreen"),q=Symbol.iterator;function G(t){return t===null||typeof t!="object"?null:(t=q&&t[q]||t["@@iterator"],typeof t=="function"?t:null)}var Q=Object.assign,M;function O(t){if(M===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);M=a&&a[1]||""}return`
`+M+t}var ee=!1;function W(t,a){if(!t||ee)return"";ee=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(xe){var x=xe}Reflect.construct(t,[],a)}else{try{a.call()}catch(xe){x=xe}t.call(a.prototype)}else{try{throw Error()}catch(xe){x=xe}t()}}catch(xe){if(xe&&x&&typeof xe.stack=="string"){for(var S=xe.stack.split(`
`),E=x.stack.split(`
`),K=S.length-1,ne=E.length-1;1<=K&&0<=ne&&S[K]!==E[ne];)ne--;for(;1<=K&&0<=ne;K--,ne--)if(S[K]!==E[ne]){if(K!==1||ne!==1)do if(K--,ne--,0>ne||S[K]!==E[ne]){var ae=`
`+S[K].replace(" at new "," at ");return t.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",t.displayName)),ae}while(1<=K&&0<=ne);break}}}finally{ee=!1,Error.prepareStackTrace=d}return(t=t?t.displayName||t.name:"")?O(t):""}function V(t){switch(t.tag){case 5:return O(t.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return t=W(t.type,!1),t;case 11:return t=W(t.type.render,!1),t;case 1:return t=W(t.type,!0),t;default:return""}}function Z(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case U:return"Fragment";case B:return"Portal";case A:return"Profiler";case D:return"StrictMode";case L:return"Suspense";case k:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Y:return(t.displayName||"Context")+".Consumer";case H:return(t._context.displayName||"Context")+".Provider";case _:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $:return a=t.displayName||null,a!==null?a:Z(t.type)||"Memo";case P:a=t._payload,t=t._init;try{return Z(t(a))}catch{}}return null}function ue(t){var a=t.type;switch(t.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=a.render,t=t.displayName||t.name||"",a.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Z(a);case 8:return a===D?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function ce(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function me(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Te(t){var a=me(t)?"checked":"value",d=Object.getOwnPropertyDescriptor(t.constructor.prototype,a),x=""+t[a];if(!t.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var S=d.get,E=d.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return S.call(this)},set:function(K){x=""+K,E.call(this,K)}}),Object.defineProperty(t,a,{enumerable:d.enumerable}),{getValue:function(){return x},setValue:function(K){x=""+K},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function ie(t){t._valueTracker||(t._valueTracker=Te(t))}function Ce(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var d=a.getValue(),x="";return t&&(x=me(t)?t.checked?"true":"false":t.value),t=x,t!==d?(a.setValue(t),!0):!1}function be(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function R(t,a){var d=a.checked;return Q({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??t._wrapperState.initialChecked})}function fe(t,a){var d=a.defaultValue==null?"":a.defaultValue,x=a.checked!=null?a.checked:a.defaultChecked;d=ce(a.value!=null?a.value:d),t._wrapperState={initialChecked:x,initialValue:d,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function te(t,a){a=a.checked,a!=null&&j(t,"checked",a,!1)}function J(t,a){te(t,a);var d=ce(a.value),x=a.type;if(d!=null)x==="number"?(d===0&&t.value===""||t.value!=d)&&(t.value=""+d):t.value!==""+d&&(t.value=""+d);else if(x==="submit"||x==="reset"){t.removeAttribute("value");return}a.hasOwnProperty("value")?se(t,a.type,d):a.hasOwnProperty("defaultValue")&&se(t,a.type,ce(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(t.defaultChecked=!!a.defaultChecked)}function X(t,a,d){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var x=a.type;if(!(x!=="submit"&&x!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+t._wrapperState.initialValue,d||a===t.value||(t.value=a),t.defaultValue=a}d=t.name,d!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,d!==""&&(t.name=d)}function se(t,a,d){(a!=="number"||be(t.ownerDocument)!==t)&&(d==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+d&&(t.defaultValue=""+d))}var ye=Array.isArray;function ve(t,a,d,x){if(t=t.options,a){a={};for(var S=0;S<d.length;S++)a["$"+d[S]]=!0;for(d=0;d<t.length;d++)S=a.hasOwnProperty("$"+t[d].value),t[d].selected!==S&&(t[d].selected=S),S&&x&&(t[d].defaultSelected=!0)}else{for(d=""+ce(d),a=null,S=0;S<t.length;S++){if(t[S].value===d){t[S].selected=!0,x&&(t[S].defaultSelected=!0);return}a!==null||t[S].disabled||(a=t[S])}a!==null&&(a.selected=!0)}}function le(t,a){if(a.dangerouslySetInnerHTML!=null)throw Error(s(91));return Q({},a,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ke(t,a){var d=a.value;if(d==null){if(d=a.children,a=a.defaultValue,d!=null){if(a!=null)throw Error(s(92));if(ye(d)){if(1<d.length)throw Error(s(93));d=d[0]}a=d}a==null&&(a=""),d=a}t._wrapperState={initialValue:ce(d)}}function Ne(t,a){var d=ce(a.value),x=ce(a.defaultValue);d!=null&&(d=""+d,d!==t.value&&(t.value=d),a.defaultValue==null&&t.defaultValue!==d&&(t.defaultValue=d)),x!=null&&(t.defaultValue=""+x)}function _e(t){var a=t.textContent;a===t._wrapperState.initialValue&&a!==""&&a!==null&&(t.value=a)}function Re(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function at(t,a){return t==null||t==="http://www.w3.org/1999/xhtml"?Re(a):t==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Be,mt=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,d,x,S){MSApp.execUnsafeLocalFunction(function(){return t(a,d,x,S)})}:t})(function(t,a){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=a;else{for(Be=Be||document.createElement("div"),Be.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Be.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;a.firstChild;)t.appendChild(a.firstChild)}});function ct(t,a){if(a){var d=t.firstChild;if(d&&d===t.lastChild&&d.nodeType===3){d.nodeValue=a;return}}t.textContent=a}var it={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bt=["Webkit","ms","Moz","O"];Object.keys(it).forEach(function(t){bt.forEach(function(a){a=a+t.charAt(0).toUpperCase()+t.substring(1),it[a]=it[t]})});function ot(t,a,d){return a==null||typeof a=="boolean"||a===""?"":d||typeof a!="number"||a===0||it.hasOwnProperty(t)&&it[t]?(""+a).trim():a+"px"}function kt(t,a){t=t.style;for(var d in a)if(a.hasOwnProperty(d)){var x=d.indexOf("--")===0,S=ot(d,a[d],x);d==="float"&&(d="cssFloat"),x?t.setProperty(d,S):t[d]=S}}var nn=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ft(t,a){if(a){if(nn[t]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(s(137,t));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(s(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(s(61))}if(a.style!=null&&typeof a.style!="object")throw Error(s(62))}}function bn(t,a){if(t.indexOf("-")===-1)return typeof a.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var un=null;function Yt(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var sn=null,Qt=null,jt=null;function Wt(t){if(t=gi(t)){if(typeof sn!="function")throw Error(s(280));var a=t.stateNode;a&&(a=go(a),sn(t.stateNode,t.type,a))}}function Ge(t){Qt?jt?jt.push(t):jt=[t]:Qt=t}function St(){if(Qt){var t=Qt,a=jt;if(jt=Qt=null,Wt(t),a)for(t=0;t<a.length;t++)Wt(a[t])}}function Nt(t,a){return t(a)}function wt(){}var rn=!1;function zt(t,a,d){if(rn)return t(a,d);rn=!0;try{return Nt(t,a,d)}finally{rn=!1,(Qt!==null||jt!==null)&&(wt(),St())}}function Kt(t,a){var d=t.stateNode;if(d===null)return null;var x=go(d);if(x===null)return null;d=x[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(t=t.type,x=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!x;break e;default:t=!1}if(t)return null;if(d&&typeof d!="function")throw Error(s(231,a,typeof d));return d}var ds=!1;if(u)try{var an={};Object.defineProperty(an,"passive",{get:function(){ds=!0}}),window.addEventListener("test",an,an),window.removeEventListener("test",an,an)}catch{ds=!1}function jn(t,a,d,x,S,E,K,ne,ae){var xe=Array.prototype.slice.call(arguments,3);try{a.apply(d,xe)}catch(Ae){this.onError(Ae)}}var Un=!1,Nn=null,Ps=!1,sa=null,ei={onError:function(t){Un=!0,Nn=t}};function Zl(t,a,d,x,S,E,K,ne,ae){Un=!1,Nn=null,jn.apply(ei,arguments)}function Qi(t,a,d,x,S,E,K,ne,ae){if(Zl.apply(this,arguments),Un){if(Un){var xe=Nn;Un=!1,Nn=null}else throw Error(s(198));Ps||(Ps=!0,sa=xe)}}function Wn(t){var a=t,d=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(d=a.return),t=a.return;while(t)}return a.tag===3?d:null}function jr(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function Xi(t){if(Wn(t)!==t)throw Error(s(188))}function Yl(t){var a=t.alternate;if(!a){if(a=Wn(t),a===null)throw Error(s(188));return a!==t?null:t}for(var d=t,x=a;;){var S=d.return;if(S===null)break;var E=S.alternate;if(E===null){if(x=S.return,x!==null){d=x;continue}break}if(S.child===E.child){for(E=S.child;E;){if(E===d)return Xi(S),t;if(E===x)return Xi(S),a;E=E.sibling}throw Error(s(188))}if(d.return!==x.return)d=S,x=E;else{for(var K=!1,ne=S.child;ne;){if(ne===d){K=!0,d=S,x=E;break}if(ne===x){K=!0,x=S,d=E;break}ne=ne.sibling}if(!K){for(ne=E.child;ne;){if(ne===d){K=!0,d=E,x=S;break}if(ne===x){K=!0,x=E,d=S;break}ne=ne.sibling}if(!K)throw Error(s(189))}}if(d.alternate!==x)throw Error(s(190))}if(d.tag!==3)throw Error(s(188));return d.stateNode.current===d?t:a}function Xs(t){return t=Yl(t),t!==null?Js(t):null}function Js(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var a=Js(t);if(a!==null)return a;t=t.sibling}return null}var er=n.unstable_scheduleCallback,Nr=n.unstable_cancelCallback,_n=n.unstable_shouldYield,Ql=n.unstable_requestPaint,ft=n.unstable_now,Ji=n.unstable_getCurrentPriorityLevel,ti=n.unstable_ImmediatePriority,eo=n.unstable_UserBlockingPriority,_r=n.unstable_NormalPriority,fn=n.unstable_LowPriority,Er=n.unstable_IdlePriority,Ar=null,Xn=null;function Xl(t){if(Xn&&typeof Xn.onCommitFiberRoot=="function")try{Xn.onCommitFiberRoot(Ar,t,void 0,(t.current.flags&128)===128)}catch{}}var Kn=Math.clz32?Math.clz32:us,Jl=Math.log,tr=Math.LN2;function us(t){return t>>>=0,t===0?32:31-(Jl(t)/tr|0)|0}var ra=64,Tr=4194304;function Dr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function aa(t,a){var d=t.pendingLanes;if(d===0)return 0;var x=0,S=t.suspendedLanes,E=t.pingedLanes,K=d&268435455;if(K!==0){var ne=K&~S;ne!==0?x=Dr(ne):(E&=K,E!==0&&(x=Dr(E)))}else K=d&~S,K!==0?x=Dr(K):E!==0&&(x=Dr(E));if(x===0)return 0;if(a!==0&&a!==x&&(a&S)===0&&(S=x&-x,E=a&-a,S>=E||S===16&&(E&4194240)!==0))return a;if((x&4)!==0&&(x|=d&16),a=t.entangledLanes,a!==0)for(t=t.entanglements,a&=x;0<a;)d=31-Kn(a),S=1<<d,x|=t[d],a&=~S;return x}function ec(t,a){switch(t){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function to(t,a){for(var d=t.suspendedLanes,x=t.pingedLanes,S=t.expirationTimes,E=t.pendingLanes;0<E;){var K=31-Kn(E),ne=1<<K,ae=S[K];ae===-1?((ne&d)===0||(ne&x)!==0)&&(S[K]=ec(ne,a)):ae<=a&&(t.expiredLanes|=ne),E&=~ne}}function ni(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function no(){var t=ra;return ra<<=1,(ra&4194240)===0&&(ra=64),t}function si(t){for(var a=[],d=0;31>d;d++)a.push(t);return a}function nr(t,a,d){t.pendingLanes|=a,a!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,a=31-Kn(a),t[a]=d}function tc(t,a){var d=t.pendingLanes&~a;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=a,t.mutableReadLanes&=a,t.entangledLanes&=a,a=t.entanglements;var x=t.eventTimes;for(t=t.expirationTimes;0<d;){var S=31-Kn(d),E=1<<S;a[S]=0,x[S]=-1,t[S]=-1,d&=~E}}function ri(t,a){var d=t.entangledLanes|=a;for(t=t.entanglements;d;){var x=31-Kn(d),S=1<<x;S&a|t[x]&a&&(t[x]|=a),d&=~S}}var vt=0;function we(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Se,de,dt,nt,tt,Je=!1,yt=[],_t=null,Ye=null,et=null,Mt=new Map,Gn=new Map,Et=[],st="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hn(t,a){switch(t){case"focusin":case"focusout":_t=null;break;case"dragenter":case"dragleave":Ye=null;break;case"mouseover":case"mouseout":et=null;break;case"pointerover":case"pointerout":Mt.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gn.delete(a.pointerId)}}function At(t,a,d,x,S,E){return t===null||t.nativeEvent!==E?(t={blockedOn:a,domEventName:d,eventSystemFlags:x,nativeEvent:E,targetContainers:[S]},a!==null&&(a=gi(a),a!==null&&de(a)),t):(t.eventSystemFlags|=x,a=t.targetContainers,S!==null&&a.indexOf(S)===-1&&a.push(S),t)}function We(t,a,d,x,S){switch(a){case"focusin":return _t=At(_t,t,a,d,x,S),!0;case"dragenter":return Ye=At(Ye,t,a,d,x,S),!0;case"mouseover":return et=At(et,t,a,d,x,S),!0;case"pointerover":var E=S.pointerId;return Mt.set(E,At(Mt.get(E)||null,t,a,d,x,S)),!0;case"gotpointercapture":return E=S.pointerId,Gn.set(E,At(Gn.get(E)||null,t,a,d,x,S)),!0}return!1}function rt(t){var a=Fr(t.target);if(a!==null){var d=Wn(a);if(d!==null){if(a=d.tag,a===13){if(a=jr(d),a!==null){t.blockedOn=a,tt(t.priority,function(){dt(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){t.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}t.blockedOn=null}function gt(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var d=rc(t.domEventName,t.eventSystemFlags,a[0],t.nativeEvent);if(d===null){d=t.nativeEvent;var x=new d.constructor(d.type,d);un=x,d.target.dispatchEvent(x),un=null}else return a=gi(d),a!==null&&de(a),t.blockedOn=d,!1;a.shift()}return!0}function En(t,a,d){gt(t)&&d.delete(a)}function Ss(){Je=!1,_t!==null&&gt(_t)&&(_t=null),Ye!==null&&gt(Ye)&&(Ye=null),et!==null&&gt(et)&&(et=null),Mt.forEach(En),Gn.forEach(En)}function on(t,a){t.blockedOn===a&&(t.blockedOn=null,Je||(Je=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Ss)))}function Cs(t){function a(S){return on(S,t)}if(0<yt.length){on(yt[0],t);for(var d=1;d<yt.length;d++){var x=yt[d];x.blockedOn===t&&(x.blockedOn=null)}}for(_t!==null&&on(_t,t),Ye!==null&&on(Ye,t),et!==null&&on(et,t),Mt.forEach(a),Gn.forEach(a),d=0;d<Et.length;d++)x=Et[d],x.blockedOn===t&&(x.blockedOn=null);for(;0<Et.length&&(d=Et[0],d.blockedOn===null);)rt(d),d.blockedOn===null&&Et.shift()}var Fn=T.ReactCurrentBatchConfig,ia=!0;function nc(t,a,d,x){var S=vt,E=Fn.transition;Fn.transition=null;try{vt=1,sc(t,a,d,x)}finally{vt=S,Fn.transition=E}}function Ob(t,a,d,x){var S=vt,E=Fn.transition;Fn.transition=null;try{vt=4,sc(t,a,d,x)}finally{vt=S,Fn.transition=E}}function sc(t,a,d,x){if(ia){var S=rc(t,a,d,x);if(S===null)wc(t,a,x,so,d),hn(t,x);else if(We(S,t,a,d,x))x.stopPropagation();else if(hn(t,x),a&4&&-1<st.indexOf(t)){for(;S!==null;){var E=gi(S);if(E!==null&&Se(E),E=rc(t,a,d,x),E===null&&wc(t,a,x,so,d),E===S)break;S=E}S!==null&&x.stopPropagation()}else wc(t,a,x,null,d)}}var so=null;function rc(t,a,d,x){if(so=null,t=Yt(x),t=Fr(t),t!==null)if(a=Wn(t),a===null)t=null;else if(d=a.tag,d===13){if(t=jr(a),t!==null)return t;t=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null);return so=t,null}function Kf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ji()){case ti:return 1;case eo:return 4;case _r:case fn:return 16;case Er:return 536870912;default:return 16}default:return 16}}var sr=null,ac=null,ro=null;function Gf(){if(ro)return ro;var t,a=ac,d=a.length,x,S="value"in sr?sr.value:sr.textContent,E=S.length;for(t=0;t<d&&a[t]===S[t];t++);var K=d-t;for(x=1;x<=K&&a[d-x]===S[E-x];x++);return ro=S.slice(t,1<x?1-x:void 0)}function ao(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function io(){return!0}function qf(){return!1}function qn(t){function a(d,x,S,E,K){this._reactName=d,this._targetInst=S,this.type=x,this.nativeEvent=E,this.target=K,this.currentTarget=null;for(var ne in t)t.hasOwnProperty(ne)&&(d=t[ne],this[ne]=d?d(E):E[ne]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?io:qf,this.isPropagationStopped=qf,this}return Q(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=io)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=io)},persist:function(){},isPersistent:io}),a}var oa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ic=qn(oa),ai=Q({},oa,{view:0,detail:0}),Vb=qn(ai),oc,lc,ii,oo=Q({},ai,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ii&&(ii&&t.type==="mousemove"?(oc=t.screenX-ii.screenX,lc=t.screenY-ii.screenY):lc=oc=0,ii=t),oc)},movementY:function(t){return"movementY"in t?t.movementY:lc}}),Zf=qn(oo),$b=Q({},oo,{dataTransfer:0}),Hb=qn($b),Ub=Q({},ai,{relatedTarget:0}),cc=qn(Ub),Wb=Q({},oa,{animationName:0,elapsedTime:0,pseudoElement:0}),Kb=qn(Wb),Gb=Q({},oa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qb=qn(Gb),Zb=Q({},oa,{data:0}),Yf=qn(Zb),Yb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jb(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=Xb[t])?!!a[t]:!1}function dc(){return Jb}var e2=Q({},ai,{key:function(t){if(t.key){var a=Yb[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=ao(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Qb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dc,charCode:function(t){return t.type==="keypress"?ao(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ao(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),t2=qn(e2),n2=Q({},oo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qf=qn(n2),s2=Q({},ai,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dc}),r2=qn(s2),a2=Q({},oa,{propertyName:0,elapsedTime:0,pseudoElement:0}),i2=qn(a2),o2=Q({},oo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),l2=qn(o2),c2=[9,13,27,32],uc=u&&"CompositionEvent"in window,oi=null;u&&"documentMode"in document&&(oi=document.documentMode);var d2=u&&"TextEvent"in window&&!oi,Xf=u&&(!uc||oi&&8<oi&&11>=oi),Jf=" ",eh=!1;function th(t,a){switch(t){case"keyup":return c2.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var la=!1;function u2(t,a){switch(t){case"compositionend":return nh(a);case"keypress":return a.which!==32?null:(eh=!0,Jf);case"textInput":return t=a.data,t===Jf&&eh?null:t;default:return null}}function f2(t,a){if(la)return t==="compositionend"||!uc&&th(t,a)?(t=Gf(),ro=ac=sr=null,la=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Xf&&a.locale!=="ko"?null:a.data;default:return null}}var h2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sh(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!h2[t.type]:a==="textarea"}function rh(t,a,d,x){Ge(x),a=ho(a,"onChange"),0<a.length&&(d=new ic("onChange","change",null,d,x),t.push({event:d,listeners:a}))}var li=null,ci=null;function p2(t){kh(t,0)}function lo(t){var a=ha(t);if(Ce(a))return t}function m2(t,a){if(t==="change")return a}var ah=!1;if(u){var fc;if(u){var hc="oninput"in document;if(!hc){var ih=document.createElement("div");ih.setAttribute("oninput","return;"),hc=typeof ih.oninput=="function"}fc=hc}else fc=!1;ah=fc&&(!document.documentMode||9<document.documentMode)}function oh(){li&&(li.detachEvent("onpropertychange",lh),ci=li=null)}function lh(t){if(t.propertyName==="value"&&lo(ci)){var a=[];rh(a,ci,t,Yt(t)),zt(p2,a)}}function g2(t,a,d){t==="focusin"?(oh(),li=a,ci=d,li.attachEvent("onpropertychange",lh)):t==="focusout"&&oh()}function x2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return lo(ci)}function b2(t,a){if(t==="click")return lo(a)}function v2(t,a){if(t==="input"||t==="change")return lo(a)}function y2(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var fs=typeof Object.is=="function"?Object.is:y2;function di(t,a){if(fs(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var d=Object.keys(t),x=Object.keys(a);if(d.length!==x.length)return!1;for(x=0;x<d.length;x++){var S=d[x];if(!h.call(a,S)||!fs(t[S],a[S]))return!1}return!0}function ch(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function dh(t,a){var d=ch(t);t=0;for(var x;d;){if(d.nodeType===3){if(x=t+d.textContent.length,t<=a&&x>=a)return{node:d,offset:a-t};t=x}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=ch(d)}}function uh(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?uh(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function fh(){for(var t=window,a=be();a instanceof t.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)t=a.contentWindow;else break;a=be(t.document)}return a}function pc(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}function w2(t){var a=fh(),d=t.focusedElem,x=t.selectionRange;if(a!==d&&d&&d.ownerDocument&&uh(d.ownerDocument.documentElement,d)){if(x!==null&&pc(d)){if(a=x.start,t=x.end,t===void 0&&(t=a),"selectionStart"in d)d.selectionStart=a,d.selectionEnd=Math.min(t,d.value.length);else if(t=(a=d.ownerDocument||document)&&a.defaultView||window,t.getSelection){t=t.getSelection();var S=d.textContent.length,E=Math.min(x.start,S);x=x.end===void 0?E:Math.min(x.end,S),!t.extend&&E>x&&(S=x,x=E,E=S),S=dh(d,E);var K=dh(d,x);S&&K&&(t.rangeCount!==1||t.anchorNode!==S.node||t.anchorOffset!==S.offset||t.focusNode!==K.node||t.focusOffset!==K.offset)&&(a=a.createRange(),a.setStart(S.node,S.offset),t.removeAllRanges(),E>x?(t.addRange(a),t.extend(K.node,K.offset)):(a.setEnd(K.node,K.offset),t.addRange(a)))}}for(a=[],t=d;t=t.parentNode;)t.nodeType===1&&a.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<a.length;d++)t=a[d],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var k2=u&&"documentMode"in document&&11>=document.documentMode,ca=null,mc=null,ui=null,gc=!1;function hh(t,a,d){var x=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;gc||ca==null||ca!==be(x)||(x=ca,"selectionStart"in x&&pc(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),ui&&di(ui,x)||(ui=x,x=ho(mc,"onSelect"),0<x.length&&(a=new ic("onSelect","select",null,a,d),t.push({event:a,listeners:x}),a.target=ca)))}function co(t,a){var d={};return d[t.toLowerCase()]=a.toLowerCase(),d["Webkit"+t]="webkit"+a,d["Moz"+t]="moz"+a,d}var da={animationend:co("Animation","AnimationEnd"),animationiteration:co("Animation","AnimationIteration"),animationstart:co("Animation","AnimationStart"),transitionend:co("Transition","TransitionEnd")},xc={},ph={};u&&(ph=document.createElement("div").style,"AnimationEvent"in window||(delete da.animationend.animation,delete da.animationiteration.animation,delete da.animationstart.animation),"TransitionEvent"in window||delete da.transitionend.transition);function uo(t){if(xc[t])return xc[t];if(!da[t])return t;var a=da[t],d;for(d in a)if(a.hasOwnProperty(d)&&d in ph)return xc[t]=a[d];return t}var mh=uo("animationend"),gh=uo("animationiteration"),xh=uo("animationstart"),bh=uo("transitionend"),vh=new Map,yh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rr(t,a){vh.set(t,a),l(a,[t])}for(var bc=0;bc<yh.length;bc++){var vc=yh[bc],S2=vc.toLowerCase(),C2=vc[0].toUpperCase()+vc.slice(1);rr(S2,"on"+C2)}rr(mh,"onAnimationEnd"),rr(gh,"onAnimationIteration"),rr(xh,"onAnimationStart"),rr("dblclick","onDoubleClick"),rr("focusin","onFocus"),rr("focusout","onBlur"),rr(bh,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),j2=new Set("cancel close invalid load scroll toggle".split(" ").concat(fi));function wh(t,a,d){var x=t.type||"unknown-event";t.currentTarget=d,Qi(x,a,void 0,t),t.currentTarget=null}function kh(t,a){a=(a&4)!==0;for(var d=0;d<t.length;d++){var x=t[d],S=x.event;x=x.listeners;e:{var E=void 0;if(a)for(var K=x.length-1;0<=K;K--){var ne=x[K],ae=ne.instance,xe=ne.currentTarget;if(ne=ne.listener,ae!==E&&S.isPropagationStopped())break e;wh(S,ne,xe),E=ae}else for(K=0;K<x.length;K++){if(ne=x[K],ae=ne.instance,xe=ne.currentTarget,ne=ne.listener,ae!==E&&S.isPropagationStopped())break e;wh(S,ne,xe),E=ae}}}if(Ps)throw t=sa,Ps=!1,sa=null,t}function It(t,a){var d=a[_c];d===void 0&&(d=a[_c]=new Set);var x=t+"__bubble";d.has(x)||(Sh(a,t,2,!1),d.add(x))}function yc(t,a,d){var x=0;a&&(x|=4),Sh(d,t,x,a)}var fo="_reactListening"+Math.random().toString(36).slice(2);function hi(t){if(!t[fo]){t[fo]=!0,i.forEach(function(d){d!=="selectionchange"&&(j2.has(d)||yc(d,!1,t),yc(d,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[fo]||(a[fo]=!0,yc("selectionchange",!1,a))}}function Sh(t,a,d,x){switch(Kf(a)){case 1:var S=nc;break;case 4:S=Ob;break;default:S=sc}d=S.bind(null,a,d,t),S=void 0,!ds||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(S=!0),x?S!==void 0?t.addEventListener(a,d,{capture:!0,passive:S}):t.addEventListener(a,d,!0):S!==void 0?t.addEventListener(a,d,{passive:S}):t.addEventListener(a,d,!1)}function wc(t,a,d,x,S){var E=x;if((a&1)===0&&(a&2)===0&&x!==null)e:for(;;){if(x===null)return;var K=x.tag;if(K===3||K===4){var ne=x.stateNode.containerInfo;if(ne===S||ne.nodeType===8&&ne.parentNode===S)break;if(K===4)for(K=x.return;K!==null;){var ae=K.tag;if((ae===3||ae===4)&&(ae=K.stateNode.containerInfo,ae===S||ae.nodeType===8&&ae.parentNode===S))return;K=K.return}for(;ne!==null;){if(K=Fr(ne),K===null)return;if(ae=K.tag,ae===5||ae===6){x=E=K;continue e}ne=ne.parentNode}}x=x.return}zt(function(){var xe=E,Ae=Yt(d),De=[];e:{var Ee=vh.get(t);if(Ee!==void 0){var Le=ic,Ve=t;switch(t){case"keypress":if(ao(d)===0)break e;case"keydown":case"keyup":Le=t2;break;case"focusin":Ve="focus",Le=cc;break;case"focusout":Ve="blur",Le=cc;break;case"beforeblur":case"afterblur":Le=cc;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Le=Zf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Le=Hb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Le=r2;break;case mh:case gh:case xh:Le=Kb;break;case bh:Le=i2;break;case"scroll":Le=Vb;break;case"wheel":Le=l2;break;case"copy":case"cut":case"paste":Le=qb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Le=Qf}var Ue=(a&4)!==0,Gt=!Ue&&t==="scroll",pe=Ue?Ee!==null?Ee+"Capture":null:Ee;Ue=[];for(var oe=xe,ge;oe!==null;){ge=oe;var Fe=ge.stateNode;if(ge.tag===5&&Fe!==null&&(ge=Fe,pe!==null&&(Fe=Kt(oe,pe),Fe!=null&&Ue.push(pi(oe,Fe,ge)))),Gt)break;oe=oe.return}0<Ue.length&&(Ee=new Le(Ee,Ve,null,d,Ae),De.push({event:Ee,listeners:Ue}))}}if((a&7)===0){e:{if(Ee=t==="mouseover"||t==="pointerover",Le=t==="mouseout"||t==="pointerout",Ee&&d!==un&&(Ve=d.relatedTarget||d.fromElement)&&(Fr(Ve)||Ve[Rs]))break e;if((Le||Ee)&&(Ee=Ae.window===Ae?Ae:(Ee=Ae.ownerDocument)?Ee.defaultView||Ee.parentWindow:window,Le?(Ve=d.relatedTarget||d.toElement,Le=xe,Ve=Ve?Fr(Ve):null,Ve!==null&&(Gt=Wn(Ve),Ve!==Gt||Ve.tag!==5&&Ve.tag!==6)&&(Ve=null)):(Le=null,Ve=xe),Le!==Ve)){if(Ue=Zf,Fe="onMouseLeave",pe="onMouseEnter",oe="mouse",(t==="pointerout"||t==="pointerover")&&(Ue=Qf,Fe="onPointerLeave",pe="onPointerEnter",oe="pointer"),Gt=Le==null?Ee:ha(Le),ge=Ve==null?Ee:ha(Ve),Ee=new Ue(Fe,oe+"leave",Le,d,Ae),Ee.target=Gt,Ee.relatedTarget=ge,Fe=null,Fr(Ae)===xe&&(Ue=new Ue(pe,oe+"enter",Ve,d,Ae),Ue.target=ge,Ue.relatedTarget=Gt,Fe=Ue),Gt=Fe,Le&&Ve)t:{for(Ue=Le,pe=Ve,oe=0,ge=Ue;ge;ge=ua(ge))oe++;for(ge=0,Fe=pe;Fe;Fe=ua(Fe))ge++;for(;0<oe-ge;)Ue=ua(Ue),oe--;for(;0<ge-oe;)pe=ua(pe),ge--;for(;oe--;){if(Ue===pe||pe!==null&&Ue===pe.alternate)break t;Ue=ua(Ue),pe=ua(pe)}Ue=null}else Ue=null;Le!==null&&Ch(De,Ee,Le,Ue,!1),Ve!==null&&Gt!==null&&Ch(De,Gt,Ve,Ue,!0)}}e:{if(Ee=xe?ha(xe):window,Le=Ee.nodeName&&Ee.nodeName.toLowerCase(),Le==="select"||Le==="input"&&Ee.type==="file")var Ke=m2;else if(sh(Ee))if(ah)Ke=v2;else{Ke=x2;var qe=g2}else(Le=Ee.nodeName)&&Le.toLowerCase()==="input"&&(Ee.type==="checkbox"||Ee.type==="radio")&&(Ke=b2);if(Ke&&(Ke=Ke(t,xe))){rh(De,Ke,d,Ae);break e}qe&&qe(t,Ee,xe),t==="focusout"&&(qe=Ee._wrapperState)&&qe.controlled&&Ee.type==="number"&&se(Ee,"number",Ee.value)}switch(qe=xe?ha(xe):window,t){case"focusin":(sh(qe)||qe.contentEditable==="true")&&(ca=qe,mc=xe,ui=null);break;case"focusout":ui=mc=ca=null;break;case"mousedown":gc=!0;break;case"contextmenu":case"mouseup":case"dragend":gc=!1,hh(De,d,Ae);break;case"selectionchange":if(k2)break;case"keydown":case"keyup":hh(De,d,Ae)}var Ze;if(uc)e:{switch(t){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else la?th(t,d)&&(Xe="onCompositionEnd"):t==="keydown"&&d.keyCode===229&&(Xe="onCompositionStart");Xe&&(Xf&&d.locale!=="ko"&&(la||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&la&&(Ze=Gf()):(sr=Ae,ac="value"in sr?sr.value:sr.textContent,la=!0)),qe=ho(xe,Xe),0<qe.length&&(Xe=new Yf(Xe,t,null,d,Ae),De.push({event:Xe,listeners:qe}),Ze?Xe.data=Ze:(Ze=nh(d),Ze!==null&&(Xe.data=Ze)))),(Ze=d2?u2(t,d):f2(t,d))&&(xe=ho(xe,"onBeforeInput"),0<xe.length&&(Ae=new Yf("onBeforeInput","beforeinput",null,d,Ae),De.push({event:Ae,listeners:xe}),Ae.data=Ze))}kh(De,a)})}function pi(t,a,d){return{instance:t,listener:a,currentTarget:d}}function ho(t,a){for(var d=a+"Capture",x=[];t!==null;){var S=t,E=S.stateNode;S.tag===5&&E!==null&&(S=E,E=Kt(t,d),E!=null&&x.unshift(pi(t,E,S)),E=Kt(t,a),E!=null&&x.push(pi(t,E,S))),t=t.return}return x}function ua(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ch(t,a,d,x,S){for(var E=a._reactName,K=[];d!==null&&d!==x;){var ne=d,ae=ne.alternate,xe=ne.stateNode;if(ae!==null&&ae===x)break;ne.tag===5&&xe!==null&&(ne=xe,S?(ae=Kt(d,E),ae!=null&&K.unshift(pi(d,ae,ne))):S||(ae=Kt(d,E),ae!=null&&K.push(pi(d,ae,ne)))),d=d.return}K.length!==0&&t.push({event:a,listeners:K})}var N2=/\r\n?/g,_2=/\u0000|\uFFFD/g;function jh(t){return(typeof t=="string"?t:""+t).replace(N2,`
`).replace(_2,"")}function po(t,a,d){if(a=jh(a),jh(t)!==a&&d)throw Error(s(425))}function mo(){}var kc=null,Sc=null;function Cc(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var jc=typeof setTimeout=="function"?setTimeout:void 0,E2=typeof clearTimeout=="function"?clearTimeout:void 0,Nh=typeof Promise=="function"?Promise:void 0,A2=typeof queueMicrotask=="function"?queueMicrotask:typeof Nh<"u"?function(t){return Nh.resolve(null).then(t).catch(T2)}:jc;function T2(t){setTimeout(function(){throw t})}function Nc(t,a){var d=a,x=0;do{var S=d.nextSibling;if(t.removeChild(d),S&&S.nodeType===8)if(d=S.data,d==="/$"){if(x===0){t.removeChild(S),Cs(a);return}x--}else d!=="$"&&d!=="$?"&&d!=="$!"||x++;d=S}while(d);Cs(a)}function ar(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return t}function _h(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var d=t.data;if(d==="$"||d==="$!"||d==="$?"){if(a===0)return t;a--}else d==="/$"&&a++}t=t.previousSibling}return null}var fa=Math.random().toString(36).slice(2),js="__reactFiber$"+fa,mi="__reactProps$"+fa,Rs="__reactContainer$"+fa,_c="__reactEvents$"+fa,D2="__reactListeners$"+fa,F2="__reactHandles$"+fa;function Fr(t){var a=t[js];if(a)return a;for(var d=t.parentNode;d;){if(a=d[Rs]||d[js]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(t=_h(t);t!==null;){if(d=t[js])return d;t=_h(t)}return a}t=d,d=t.parentNode}return null}function gi(t){return t=t[js]||t[Rs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ha(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(s(33))}function go(t){return t[mi]||null}var Ec=[],pa=-1;function ir(t){return{current:t}}function Pt(t){0>pa||(t.current=Ec[pa],Ec[pa]=null,pa--)}function Tt(t,a){pa++,Ec[pa]=t.current,t.current=a}var or={},vn=ir(or),Mn=ir(!1),Mr=or;function ma(t,a){var d=t.type.contextTypes;if(!d)return or;var x=t.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===a)return x.__reactInternalMemoizedMaskedChildContext;var S={},E;for(E in d)S[E]=a[E];return x&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=S),S}function In(t){return t=t.childContextTypes,t!=null}function xo(){Pt(Mn),Pt(vn)}function Eh(t,a,d){if(vn.current!==or)throw Error(s(168));Tt(vn,a),Tt(Mn,d)}function Ah(t,a,d){var x=t.stateNode;if(a=a.childContextTypes,typeof x.getChildContext!="function")return d;x=x.getChildContext();for(var S in x)if(!(S in a))throw Error(s(108,ue(t)||"Unknown",S));return Q({},d,x)}function bo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||or,Mr=vn.current,Tt(vn,t),Tt(Mn,Mn.current),!0}function Th(t,a,d){var x=t.stateNode;if(!x)throw Error(s(169));d?(t=Ah(t,a,Mr),x.__reactInternalMemoizedMergedChildContext=t,Pt(Mn),Pt(vn),Tt(vn,t)):Pt(Mn),Tt(Mn,d)}var Bs=null,vo=!1,Ac=!1;function Dh(t){Bs===null?Bs=[t]:Bs.push(t)}function M2(t){vo=!0,Dh(t)}function lr(){if(!Ac&&Bs!==null){Ac=!0;var t=0,a=vt;try{var d=Bs;for(vt=1;t<d.length;t++){var x=d[t];do x=x(!0);while(x!==null)}Bs=null,vo=!1}catch(S){throw Bs!==null&&(Bs=Bs.slice(t+1)),er(ti,lr),S}finally{vt=a,Ac=!1}}return null}var ga=[],xa=0,yo=null,wo=0,Jn=[],es=0,Ir=null,Ls=1,zs="";function Pr(t,a){ga[xa++]=wo,ga[xa++]=yo,yo=t,wo=a}function Fh(t,a,d){Jn[es++]=Ls,Jn[es++]=zs,Jn[es++]=Ir,Ir=t;var x=Ls;t=zs;var S=32-Kn(x)-1;x&=~(1<<S),d+=1;var E=32-Kn(a)+S;if(30<E){var K=S-S%5;E=(x&(1<<K)-1).toString(32),x>>=K,S-=K,Ls=1<<32-Kn(a)+S|d<<S|x,zs=E+t}else Ls=1<<E|d<<S|x,zs=t}function Tc(t){t.return!==null&&(Pr(t,1),Fh(t,1,0))}function Dc(t){for(;t===yo;)yo=ga[--xa],ga[xa]=null,wo=ga[--xa],ga[xa]=null;for(;t===Ir;)Ir=Jn[--es],Jn[es]=null,zs=Jn[--es],Jn[es]=null,Ls=Jn[--es],Jn[es]=null}var Zn=null,Yn=null,Rt=!1,hs=null;function Mh(t,a){var d=rs(5,null,null,0);d.elementType="DELETED",d.stateNode=a,d.return=t,a=t.deletions,a===null?(t.deletions=[d],t.flags|=16):a.push(d)}function Ih(t,a){switch(t.tag){case 5:var d=t.type;return a=a.nodeType!==1||d.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(t.stateNode=a,Zn=t,Yn=ar(a.firstChild),!0):!1;case 6:return a=t.pendingProps===""||a.nodeType!==3?null:a,a!==null?(t.stateNode=a,Zn=t,Yn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(d=Ir!==null?{id:Ls,overflow:zs}:null,t.memoizedState={dehydrated:a,treeContext:d,retryLane:1073741824},d=rs(18,null,null,0),d.stateNode=a,d.return=t,t.child=d,Zn=t,Yn=null,!0):!1;default:return!1}}function Fc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mc(t){if(Rt){var a=Yn;if(a){var d=a;if(!Ih(t,a)){if(Fc(t))throw Error(s(418));a=ar(d.nextSibling);var x=Zn;a&&Ih(t,a)?Mh(x,d):(t.flags=t.flags&-4097|2,Rt=!1,Zn=t)}}else{if(Fc(t))throw Error(s(418));t.flags=t.flags&-4097|2,Rt=!1,Zn=t}}}function Ph(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zn=t}function ko(t){if(t!==Zn)return!1;if(!Rt)return Ph(t),Rt=!0,!1;var a;if((a=t.tag!==3)&&!(a=t.tag!==5)&&(a=t.type,a=a!=="head"&&a!=="body"&&!Cc(t.type,t.memoizedProps)),a&&(a=Yn)){if(Fc(t))throw Rh(),Error(s(418));for(;a;)Mh(t,a),a=ar(a.nextSibling)}if(Ph(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,a=0;t;){if(t.nodeType===8){var d=t.data;if(d==="/$"){if(a===0){Yn=ar(t.nextSibling);break e}a--}else d!=="$"&&d!=="$!"&&d!=="$?"||a++}t=t.nextSibling}Yn=null}}else Yn=Zn?ar(t.stateNode.nextSibling):null;return!0}function Rh(){for(var t=Yn;t;)t=ar(t.nextSibling)}function ba(){Yn=Zn=null,Rt=!1}function Ic(t){hs===null?hs=[t]:hs.push(t)}var I2=T.ReactCurrentBatchConfig;function xi(t,a,d){if(t=d.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(s(309));var x=d.stateNode}if(!x)throw Error(s(147,t));var S=x,E=""+t;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===E?a.ref:(a=function(K){var ne=S.refs;K===null?delete ne[E]:ne[E]=K},a._stringRef=E,a)}if(typeof t!="string")throw Error(s(284));if(!d._owner)throw Error(s(290,t))}return t}function So(t,a){throw t=Object.prototype.toString.call(a),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t))}function Bh(t){var a=t._init;return a(t._payload)}function Lh(t){function a(pe,oe){if(t){var ge=pe.deletions;ge===null?(pe.deletions=[oe],pe.flags|=16):ge.push(oe)}}function d(pe,oe){if(!t)return null;for(;oe!==null;)a(pe,oe),oe=oe.sibling;return null}function x(pe,oe){for(pe=new Map;oe!==null;)oe.key!==null?pe.set(oe.key,oe):pe.set(oe.index,oe),oe=oe.sibling;return pe}function S(pe,oe){return pe=gr(pe,oe),pe.index=0,pe.sibling=null,pe}function E(pe,oe,ge){return pe.index=ge,t?(ge=pe.alternate,ge!==null?(ge=ge.index,ge<oe?(pe.flags|=2,oe):ge):(pe.flags|=2,oe)):(pe.flags|=1048576,oe)}function K(pe){return t&&pe.alternate===null&&(pe.flags|=2),pe}function ne(pe,oe,ge,Fe){return oe===null||oe.tag!==6?(oe=jd(ge,pe.mode,Fe),oe.return=pe,oe):(oe=S(oe,ge),oe.return=pe,oe)}function ae(pe,oe,ge,Fe){var Ke=ge.type;return Ke===U?Ae(pe,oe,ge.props.children,Fe,ge.key):oe!==null&&(oe.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===P&&Bh(Ke)===oe.type)?(Fe=S(oe,ge.props),Fe.ref=xi(pe,oe,ge),Fe.return=pe,Fe):(Fe=Go(ge.type,ge.key,ge.props,null,pe.mode,Fe),Fe.ref=xi(pe,oe,ge),Fe.return=pe,Fe)}function xe(pe,oe,ge,Fe){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==ge.containerInfo||oe.stateNode.implementation!==ge.implementation?(oe=Nd(ge,pe.mode,Fe),oe.return=pe,oe):(oe=S(oe,ge.children||[]),oe.return=pe,oe)}function Ae(pe,oe,ge,Fe,Ke){return oe===null||oe.tag!==7?(oe=Hr(ge,pe.mode,Fe,Ke),oe.return=pe,oe):(oe=S(oe,ge),oe.return=pe,oe)}function De(pe,oe,ge){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return oe=jd(""+oe,pe.mode,ge),oe.return=pe,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case z:return ge=Go(oe.type,oe.key,oe.props,null,pe.mode,ge),ge.ref=xi(pe,null,oe),ge.return=pe,ge;case B:return oe=Nd(oe,pe.mode,ge),oe.return=pe,oe;case P:var Fe=oe._init;return De(pe,Fe(oe._payload),ge)}if(ye(oe)||G(oe))return oe=Hr(oe,pe.mode,ge,null),oe.return=pe,oe;So(pe,oe)}return null}function Ee(pe,oe,ge,Fe){var Ke=oe!==null?oe.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number")return Ke!==null?null:ne(pe,oe,""+ge,Fe);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case z:return ge.key===Ke?ae(pe,oe,ge,Fe):null;case B:return ge.key===Ke?xe(pe,oe,ge,Fe):null;case P:return Ke=ge._init,Ee(pe,oe,Ke(ge._payload),Fe)}if(ye(ge)||G(ge))return Ke!==null?null:Ae(pe,oe,ge,Fe,null);So(pe,ge)}return null}function Le(pe,oe,ge,Fe,Ke){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return pe=pe.get(ge)||null,ne(oe,pe,""+Fe,Ke);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case z:return pe=pe.get(Fe.key===null?ge:Fe.key)||null,ae(oe,pe,Fe,Ke);case B:return pe=pe.get(Fe.key===null?ge:Fe.key)||null,xe(oe,pe,Fe,Ke);case P:var qe=Fe._init;return Le(pe,oe,ge,qe(Fe._payload),Ke)}if(ye(Fe)||G(Fe))return pe=pe.get(ge)||null,Ae(oe,pe,Fe,Ke,null);So(oe,Fe)}return null}function Ve(pe,oe,ge,Fe){for(var Ke=null,qe=null,Ze=oe,Xe=oe=0,dn=null;Ze!==null&&Xe<ge.length;Xe++){Ze.index>Xe?(dn=Ze,Ze=null):dn=Ze.sibling;var xt=Ee(pe,Ze,ge[Xe],Fe);if(xt===null){Ze===null&&(Ze=dn);break}t&&Ze&&xt.alternate===null&&a(pe,Ze),oe=E(xt,oe,Xe),qe===null?Ke=xt:qe.sibling=xt,qe=xt,Ze=dn}if(Xe===ge.length)return d(pe,Ze),Rt&&Pr(pe,Xe),Ke;if(Ze===null){for(;Xe<ge.length;Xe++)Ze=De(pe,ge[Xe],Fe),Ze!==null&&(oe=E(Ze,oe,Xe),qe===null?Ke=Ze:qe.sibling=Ze,qe=Ze);return Rt&&Pr(pe,Xe),Ke}for(Ze=x(pe,Ze);Xe<ge.length;Xe++)dn=Le(Ze,pe,Xe,ge[Xe],Fe),dn!==null&&(t&&dn.alternate!==null&&Ze.delete(dn.key===null?Xe:dn.key),oe=E(dn,oe,Xe),qe===null?Ke=dn:qe.sibling=dn,qe=dn);return t&&Ze.forEach(function(xr){return a(pe,xr)}),Rt&&Pr(pe,Xe),Ke}function Ue(pe,oe,ge,Fe){var Ke=G(ge);if(typeof Ke!="function")throw Error(s(150));if(ge=Ke.call(ge),ge==null)throw Error(s(151));for(var qe=Ke=null,Ze=oe,Xe=oe=0,dn=null,xt=ge.next();Ze!==null&&!xt.done;Xe++,xt=ge.next()){Ze.index>Xe?(dn=Ze,Ze=null):dn=Ze.sibling;var xr=Ee(pe,Ze,xt.value,Fe);if(xr===null){Ze===null&&(Ze=dn);break}t&&Ze&&xr.alternate===null&&a(pe,Ze),oe=E(xr,oe,Xe),qe===null?Ke=xr:qe.sibling=xr,qe=xr,Ze=dn}if(xt.done)return d(pe,Ze),Rt&&Pr(pe,Xe),Ke;if(Ze===null){for(;!xt.done;Xe++,xt=ge.next())xt=De(pe,xt.value,Fe),xt!==null&&(oe=E(xt,oe,Xe),qe===null?Ke=xt:qe.sibling=xt,qe=xt);return Rt&&Pr(pe,Xe),Ke}for(Ze=x(pe,Ze);!xt.done;Xe++,xt=ge.next())xt=Le(Ze,pe,Xe,xt.value,Fe),xt!==null&&(t&&xt.alternate!==null&&Ze.delete(xt.key===null?Xe:xt.key),oe=E(xt,oe,Xe),qe===null?Ke=xt:qe.sibling=xt,qe=xt);return t&&Ze.forEach(function(hv){return a(pe,hv)}),Rt&&Pr(pe,Xe),Ke}function Gt(pe,oe,ge,Fe){if(typeof ge=="object"&&ge!==null&&ge.type===U&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case z:e:{for(var Ke=ge.key,qe=oe;qe!==null;){if(qe.key===Ke){if(Ke=ge.type,Ke===U){if(qe.tag===7){d(pe,qe.sibling),oe=S(qe,ge.props.children),oe.return=pe,pe=oe;break e}}else if(qe.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===P&&Bh(Ke)===qe.type){d(pe,qe.sibling),oe=S(qe,ge.props),oe.ref=xi(pe,qe,ge),oe.return=pe,pe=oe;break e}d(pe,qe);break}else a(pe,qe);qe=qe.sibling}ge.type===U?(oe=Hr(ge.props.children,pe.mode,Fe,ge.key),oe.return=pe,pe=oe):(Fe=Go(ge.type,ge.key,ge.props,null,pe.mode,Fe),Fe.ref=xi(pe,oe,ge),Fe.return=pe,pe=Fe)}return K(pe);case B:e:{for(qe=ge.key;oe!==null;){if(oe.key===qe)if(oe.tag===4&&oe.stateNode.containerInfo===ge.containerInfo&&oe.stateNode.implementation===ge.implementation){d(pe,oe.sibling),oe=S(oe,ge.children||[]),oe.return=pe,pe=oe;break e}else{d(pe,oe);break}else a(pe,oe);oe=oe.sibling}oe=Nd(ge,pe.mode,Fe),oe.return=pe,pe=oe}return K(pe);case P:return qe=ge._init,Gt(pe,oe,qe(ge._payload),Fe)}if(ye(ge))return Ve(pe,oe,ge,Fe);if(G(ge))return Ue(pe,oe,ge,Fe);So(pe,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"?(ge=""+ge,oe!==null&&oe.tag===6?(d(pe,oe.sibling),oe=S(oe,ge),oe.return=pe,pe=oe):(d(pe,oe),oe=jd(ge,pe.mode,Fe),oe.return=pe,pe=oe),K(pe)):d(pe,oe)}return Gt}var va=Lh(!0),zh=Lh(!1),Co=ir(null),jo=null,ya=null,Pc=null;function Rc(){Pc=ya=jo=null}function Bc(t){var a=Co.current;Pt(Co),t._currentValue=a}function Lc(t,a,d){for(;t!==null;){var x=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,x!==null&&(x.childLanes|=a)):x!==null&&(x.childLanes&a)!==a&&(x.childLanes|=a),t===d)break;t=t.return}}function wa(t,a){jo=t,Pc=ya=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&a)!==0&&(Pn=!0),t.firstContext=null)}function ts(t){var a=t._currentValue;if(Pc!==t)if(t={context:t,memoizedValue:a,next:null},ya===null){if(jo===null)throw Error(s(308));ya=t,jo.dependencies={lanes:0,firstContext:t}}else ya=ya.next=t;return a}var Rr=null;function zc(t){Rr===null?Rr=[t]:Rr.push(t)}function Oh(t,a,d,x){var S=a.interleaved;return S===null?(d.next=d,zc(a)):(d.next=S.next,S.next=d),a.interleaved=d,Os(t,x)}function Os(t,a){t.lanes|=a;var d=t.alternate;for(d!==null&&(d.lanes|=a),d=t,t=t.return;t!==null;)t.childLanes|=a,d=t.alternate,d!==null&&(d.childLanes|=a),d=t,t=t.return;return d.tag===3?d.stateNode:null}var cr=!1;function Oc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vh(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vs(t,a){return{eventTime:t,lane:a,tag:0,payload:null,callback:null,next:null}}function dr(t,a,d){var x=t.updateQueue;if(x===null)return null;if(x=x.shared,(pt&2)!==0){var S=x.pending;return S===null?a.next=a:(a.next=S.next,S.next=a),x.pending=a,Os(t,d)}return S=x.interleaved,S===null?(a.next=a,zc(x)):(a.next=S.next,S.next=a),x.interleaved=a,Os(t,d)}function No(t,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194240)!==0)){var x=a.lanes;x&=t.pendingLanes,d|=x,a.lanes=d,ri(t,d)}}function $h(t,a){var d=t.updateQueue,x=t.alternate;if(x!==null&&(x=x.updateQueue,d===x)){var S=null,E=null;if(d=d.firstBaseUpdate,d!==null){do{var K={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};E===null?S=E=K:E=E.next=K,d=d.next}while(d!==null);E===null?S=E=a:E=E.next=a}else S=E=a;d={baseState:x.baseState,firstBaseUpdate:S,lastBaseUpdate:E,shared:x.shared,effects:x.effects},t.updateQueue=d;return}t=d.lastBaseUpdate,t===null?d.firstBaseUpdate=a:t.next=a,d.lastBaseUpdate=a}function _o(t,a,d,x){var S=t.updateQueue;cr=!1;var E=S.firstBaseUpdate,K=S.lastBaseUpdate,ne=S.shared.pending;if(ne!==null){S.shared.pending=null;var ae=ne,xe=ae.next;ae.next=null,K===null?E=xe:K.next=xe,K=ae;var Ae=t.alternate;Ae!==null&&(Ae=Ae.updateQueue,ne=Ae.lastBaseUpdate,ne!==K&&(ne===null?Ae.firstBaseUpdate=xe:ne.next=xe,Ae.lastBaseUpdate=ae))}if(E!==null){var De=S.baseState;K=0,Ae=xe=ae=null,ne=E;do{var Ee=ne.lane,Le=ne.eventTime;if((x&Ee)===Ee){Ae!==null&&(Ae=Ae.next={eventTime:Le,lane:0,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null});e:{var Ve=t,Ue=ne;switch(Ee=a,Le=d,Ue.tag){case 1:if(Ve=Ue.payload,typeof Ve=="function"){De=Ve.call(Le,De,Ee);break e}De=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=Ue.payload,Ee=typeof Ve=="function"?Ve.call(Le,De,Ee):Ve,Ee==null)break e;De=Q({},De,Ee);break e;case 2:cr=!0}}ne.callback!==null&&ne.lane!==0&&(t.flags|=64,Ee=S.effects,Ee===null?S.effects=[ne]:Ee.push(ne))}else Le={eventTime:Le,lane:Ee,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null},Ae===null?(xe=Ae=Le,ae=De):Ae=Ae.next=Le,K|=Ee;if(ne=ne.next,ne===null){if(ne=S.shared.pending,ne===null)break;Ee=ne,ne=Ee.next,Ee.next=null,S.lastBaseUpdate=Ee,S.shared.pending=null}}while(!0);if(Ae===null&&(ae=De),S.baseState=ae,S.firstBaseUpdate=xe,S.lastBaseUpdate=Ae,a=S.shared.interleaved,a!==null){S=a;do K|=S.lane,S=S.next;while(S!==a)}else E===null&&(S.shared.lanes=0);zr|=K,t.lanes=K,t.memoizedState=De}}function Hh(t,a,d){if(t=a.effects,a.effects=null,t!==null)for(a=0;a<t.length;a++){var x=t[a],S=x.callback;if(S!==null){if(x.callback=null,x=d,typeof S!="function")throw Error(s(191,S));S.call(x)}}}var bi={},Ns=ir(bi),vi=ir(bi),yi=ir(bi);function Br(t){if(t===bi)throw Error(s(174));return t}function Vc(t,a){switch(Tt(yi,a),Tt(vi,t),Tt(Ns,bi),t=a.nodeType,t){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:at(null,"");break;default:t=t===8?a.parentNode:a,a=t.namespaceURI||null,t=t.tagName,a=at(a,t)}Pt(Ns),Tt(Ns,a)}function ka(){Pt(Ns),Pt(vi),Pt(yi)}function Uh(t){Br(yi.current);var a=Br(Ns.current),d=at(a,t.type);a!==d&&(Tt(vi,t),Tt(Ns,d))}function $c(t){vi.current===t&&(Pt(Ns),Pt(vi))}var Ot=ir(0);function Eo(t){for(var a=t;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Hc=[];function Uc(){for(var t=0;t<Hc.length;t++)Hc[t]._workInProgressVersionPrimary=null;Hc.length=0}var Ao=T.ReactCurrentDispatcher,Wc=T.ReactCurrentBatchConfig,Lr=0,Vt=null,Xt=null,ln=null,To=!1,wi=!1,ki=0,P2=0;function yn(){throw Error(s(321))}function Kc(t,a){if(a===null)return!1;for(var d=0;d<a.length&&d<t.length;d++)if(!fs(t[d],a[d]))return!1;return!0}function Gc(t,a,d,x,S,E){if(Lr=E,Vt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Ao.current=t===null||t.memoizedState===null?z2:O2,t=d(x,S),wi){E=0;do{if(wi=!1,ki=0,25<=E)throw Error(s(301));E+=1,ln=Xt=null,a.updateQueue=null,Ao.current=V2,t=d(x,S)}while(wi)}if(Ao.current=Mo,a=Xt!==null&&Xt.next!==null,Lr=0,ln=Xt=Vt=null,To=!1,a)throw Error(s(300));return t}function qc(){var t=ki!==0;return ki=0,t}function _s(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ln===null?Vt.memoizedState=ln=t:ln=ln.next=t,ln}function ns(){if(Xt===null){var t=Vt.alternate;t=t!==null?t.memoizedState:null}else t=Xt.next;var a=ln===null?Vt.memoizedState:ln.next;if(a!==null)ln=a,Xt=t;else{if(t===null)throw Error(s(310));Xt=t,t={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},ln===null?Vt.memoizedState=ln=t:ln=ln.next=t}return ln}function Si(t,a){return typeof a=="function"?a(t):a}function Zc(t){var a=ns(),d=a.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=t;var x=Xt,S=x.baseQueue,E=d.pending;if(E!==null){if(S!==null){var K=S.next;S.next=E.next,E.next=K}x.baseQueue=S=E,d.pending=null}if(S!==null){E=S.next,x=x.baseState;var ne=K=null,ae=null,xe=E;do{var Ae=xe.lane;if((Lr&Ae)===Ae)ae!==null&&(ae=ae.next={lane:0,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null}),x=xe.hasEagerState?xe.eagerState:t(x,xe.action);else{var De={lane:Ae,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null};ae===null?(ne=ae=De,K=x):ae=ae.next=De,Vt.lanes|=Ae,zr|=Ae}xe=xe.next}while(xe!==null&&xe!==E);ae===null?K=x:ae.next=ne,fs(x,a.memoizedState)||(Pn=!0),a.memoizedState=x,a.baseState=K,a.baseQueue=ae,d.lastRenderedState=x}if(t=d.interleaved,t!==null){S=t;do E=S.lane,Vt.lanes|=E,zr|=E,S=S.next;while(S!==t)}else S===null&&(d.lanes=0);return[a.memoizedState,d.dispatch]}function Yc(t){var a=ns(),d=a.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=t;var x=d.dispatch,S=d.pending,E=a.memoizedState;if(S!==null){d.pending=null;var K=S=S.next;do E=t(E,K.action),K=K.next;while(K!==S);fs(E,a.memoizedState)||(Pn=!0),a.memoizedState=E,a.baseQueue===null&&(a.baseState=E),d.lastRenderedState=E}return[E,x]}function Wh(){}function Kh(t,a){var d=Vt,x=ns(),S=a(),E=!fs(x.memoizedState,S);if(E&&(x.memoizedState=S,Pn=!0),x=x.queue,Qc(Zh.bind(null,d,x,t),[t]),x.getSnapshot!==a||E||ln!==null&&ln.memoizedState.tag&1){if(d.flags|=2048,Ci(9,qh.bind(null,d,x,S,a),void 0,null),cn===null)throw Error(s(349));(Lr&30)!==0||Gh(d,a,S)}return S}function Gh(t,a,d){t.flags|=16384,t={getSnapshot:a,value:d},a=Vt.updateQueue,a===null?(a={lastEffect:null,stores:null},Vt.updateQueue=a,a.stores=[t]):(d=a.stores,d===null?a.stores=[t]:d.push(t))}function qh(t,a,d,x){a.value=d,a.getSnapshot=x,Yh(a)&&Qh(t)}function Zh(t,a,d){return d(function(){Yh(a)&&Qh(t)})}function Yh(t){var a=t.getSnapshot;t=t.value;try{var d=a();return!fs(t,d)}catch{return!0}}function Qh(t){var a=Os(t,1);a!==null&&xs(a,t,1,-1)}function Xh(t){var a=_s();return typeof t=="function"&&(t=t()),a.memoizedState=a.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Si,lastRenderedState:t},a.queue=t,t=t.dispatch=L2.bind(null,Vt,t),[a.memoizedState,t]}function Ci(t,a,d,x){return t={tag:t,create:a,destroy:d,deps:x,next:null},a=Vt.updateQueue,a===null?(a={lastEffect:null,stores:null},Vt.updateQueue=a,a.lastEffect=t.next=t):(d=a.lastEffect,d===null?a.lastEffect=t.next=t:(x=d.next,d.next=t,t.next=x,a.lastEffect=t)),t}function Jh(){return ns().memoizedState}function Do(t,a,d,x){var S=_s();Vt.flags|=t,S.memoizedState=Ci(1|a,d,void 0,x===void 0?null:x)}function Fo(t,a,d,x){var S=ns();x=x===void 0?null:x;var E=void 0;if(Xt!==null){var K=Xt.memoizedState;if(E=K.destroy,x!==null&&Kc(x,K.deps)){S.memoizedState=Ci(a,d,E,x);return}}Vt.flags|=t,S.memoizedState=Ci(1|a,d,E,x)}function ep(t,a){return Do(8390656,8,t,a)}function Qc(t,a){return Fo(2048,8,t,a)}function tp(t,a){return Fo(4,2,t,a)}function np(t,a){return Fo(4,4,t,a)}function sp(t,a){if(typeof a=="function")return t=t(),a(t),function(){a(null)};if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function rp(t,a,d){return d=d!=null?d.concat([t]):null,Fo(4,4,sp.bind(null,a,t),d)}function Xc(){}function ap(t,a){var d=ns();a=a===void 0?null:a;var x=d.memoizedState;return x!==null&&a!==null&&Kc(a,x[1])?x[0]:(d.memoizedState=[t,a],t)}function ip(t,a){var d=ns();a=a===void 0?null:a;var x=d.memoizedState;return x!==null&&a!==null&&Kc(a,x[1])?x[0]:(t=t(),d.memoizedState=[t,a],t)}function op(t,a,d){return(Lr&21)===0?(t.baseState&&(t.baseState=!1,Pn=!0),t.memoizedState=d):(fs(d,a)||(d=no(),Vt.lanes|=d,zr|=d,t.baseState=!0),a)}function R2(t,a){var d=vt;vt=d!==0&&4>d?d:4,t(!0);var x=Wc.transition;Wc.transition={};try{t(!1),a()}finally{vt=d,Wc.transition=x}}function lp(){return ns().memoizedState}function B2(t,a,d){var x=pr(t);if(d={lane:x,action:d,hasEagerState:!1,eagerState:null,next:null},cp(t))dp(a,d);else if(d=Oh(t,a,d,x),d!==null){var S=Tn();xs(d,t,x,S),up(d,a,x)}}function L2(t,a,d){var x=pr(t),S={lane:x,action:d,hasEagerState:!1,eagerState:null,next:null};if(cp(t))dp(a,S);else{var E=t.alternate;if(t.lanes===0&&(E===null||E.lanes===0)&&(E=a.lastRenderedReducer,E!==null))try{var K=a.lastRenderedState,ne=E(K,d);if(S.hasEagerState=!0,S.eagerState=ne,fs(ne,K)){var ae=a.interleaved;ae===null?(S.next=S,zc(a)):(S.next=ae.next,ae.next=S),a.interleaved=S;return}}catch{}finally{}d=Oh(t,a,S,x),d!==null&&(S=Tn(),xs(d,t,x,S),up(d,a,x))}}function cp(t){var a=t.alternate;return t===Vt||a!==null&&a===Vt}function dp(t,a){wi=To=!0;var d=t.pending;d===null?a.next=a:(a.next=d.next,d.next=a),t.pending=a}function up(t,a,d){if((d&4194240)!==0){var x=a.lanes;x&=t.pendingLanes,d|=x,a.lanes=d,ri(t,d)}}var Mo={readContext:ts,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useInsertionEffect:yn,useLayoutEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useMutableSource:yn,useSyncExternalStore:yn,useId:yn,unstable_isNewReconciler:!1},z2={readContext:ts,useCallback:function(t,a){return _s().memoizedState=[t,a===void 0?null:a],t},useContext:ts,useEffect:ep,useImperativeHandle:function(t,a,d){return d=d!=null?d.concat([t]):null,Do(4194308,4,sp.bind(null,a,t),d)},useLayoutEffect:function(t,a){return Do(4194308,4,t,a)},useInsertionEffect:function(t,a){return Do(4,2,t,a)},useMemo:function(t,a){var d=_s();return a=a===void 0?null:a,t=t(),d.memoizedState=[t,a],t},useReducer:function(t,a,d){var x=_s();return a=d!==void 0?d(a):a,x.memoizedState=x.baseState=a,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:a},x.queue=t,t=t.dispatch=B2.bind(null,Vt,t),[x.memoizedState,t]},useRef:function(t){var a=_s();return t={current:t},a.memoizedState=t},useState:Xh,useDebugValue:Xc,useDeferredValue:function(t){return _s().memoizedState=t},useTransition:function(){var t=Xh(!1),a=t[0];return t=R2.bind(null,t[1]),_s().memoizedState=t,[a,t]},useMutableSource:function(){},useSyncExternalStore:function(t,a,d){var x=Vt,S=_s();if(Rt){if(d===void 0)throw Error(s(407));d=d()}else{if(d=a(),cn===null)throw Error(s(349));(Lr&30)!==0||Gh(x,a,d)}S.memoizedState=d;var E={value:d,getSnapshot:a};return S.queue=E,ep(Zh.bind(null,x,E,t),[t]),x.flags|=2048,Ci(9,qh.bind(null,x,E,d,a),void 0,null),d},useId:function(){var t=_s(),a=cn.identifierPrefix;if(Rt){var d=zs,x=Ls;d=(x&~(1<<32-Kn(x)-1)).toString(32)+d,a=":"+a+"R"+d,d=ki++,0<d&&(a+="H"+d.toString(32)),a+=":"}else d=P2++,a=":"+a+"r"+d.toString(32)+":";return t.memoizedState=a},unstable_isNewReconciler:!1},O2={readContext:ts,useCallback:ap,useContext:ts,useEffect:Qc,useImperativeHandle:rp,useInsertionEffect:tp,useLayoutEffect:np,useMemo:ip,useReducer:Zc,useRef:Jh,useState:function(){return Zc(Si)},useDebugValue:Xc,useDeferredValue:function(t){var a=ns();return op(a,Xt.memoizedState,t)},useTransition:function(){var t=Zc(Si)[0],a=ns().memoizedState;return[t,a]},useMutableSource:Wh,useSyncExternalStore:Kh,useId:lp,unstable_isNewReconciler:!1},V2={readContext:ts,useCallback:ap,useContext:ts,useEffect:Qc,useImperativeHandle:rp,useInsertionEffect:tp,useLayoutEffect:np,useMemo:ip,useReducer:Yc,useRef:Jh,useState:function(){return Yc(Si)},useDebugValue:Xc,useDeferredValue:function(t){var a=ns();return Xt===null?a.memoizedState=t:op(a,Xt.memoizedState,t)},useTransition:function(){var t=Yc(Si)[0],a=ns().memoizedState;return[t,a]},useMutableSource:Wh,useSyncExternalStore:Kh,useId:lp,unstable_isNewReconciler:!1};function ps(t,a){if(t&&t.defaultProps){a=Q({},a),t=t.defaultProps;for(var d in t)a[d]===void 0&&(a[d]=t[d]);return a}return a}function Jc(t,a,d,x){a=t.memoizedState,d=d(x,a),d=d==null?a:Q({},a,d),t.memoizedState=d,t.lanes===0&&(t.updateQueue.baseState=d)}var Io={isMounted:function(t){return(t=t._reactInternals)?Wn(t)===t:!1},enqueueSetState:function(t,a,d){t=t._reactInternals;var x=Tn(),S=pr(t),E=Vs(x,S);E.payload=a,d!=null&&(E.callback=d),a=dr(t,E,S),a!==null&&(xs(a,t,S,x),No(a,t,S))},enqueueReplaceState:function(t,a,d){t=t._reactInternals;var x=Tn(),S=pr(t),E=Vs(x,S);E.tag=1,E.payload=a,d!=null&&(E.callback=d),a=dr(t,E,S),a!==null&&(xs(a,t,S,x),No(a,t,S))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var d=Tn(),x=pr(t),S=Vs(d,x);S.tag=2,a!=null&&(S.callback=a),a=dr(t,S,x),a!==null&&(xs(a,t,x,d),No(a,t,x))}};function fp(t,a,d,x,S,E,K){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(x,E,K):a.prototype&&a.prototype.isPureReactComponent?!di(d,x)||!di(S,E):!0}function hp(t,a,d){var x=!1,S=or,E=a.contextType;return typeof E=="object"&&E!==null?E=ts(E):(S=In(a)?Mr:vn.current,x=a.contextTypes,E=(x=x!=null)?ma(t,S):or),a=new a(d,E),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Io,t.stateNode=a,a._reactInternals=t,x&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=S,t.__reactInternalMemoizedMaskedChildContext=E),a}function pp(t,a,d,x){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,x),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,x),a.state!==t&&Io.enqueueReplaceState(a,a.state,null)}function ed(t,a,d,x){var S=t.stateNode;S.props=d,S.state=t.memoizedState,S.refs={},Oc(t);var E=a.contextType;typeof E=="object"&&E!==null?S.context=ts(E):(E=In(a)?Mr:vn.current,S.context=ma(t,E)),S.state=t.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(Jc(t,a,E,d),S.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(a=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),a!==S.state&&Io.enqueueReplaceState(S,S.state,null),_o(t,d,S,x),S.state=t.memoizedState),typeof S.componentDidMount=="function"&&(t.flags|=4194308)}function Sa(t,a){try{var d="",x=a;do d+=V(x),x=x.return;while(x);var S=d}catch(E){S=`
Error generating stack: `+E.message+`
`+E.stack}return{value:t,source:a,stack:S,digest:null}}function td(t,a,d){return{value:t,source:null,stack:d??null,digest:a??null}}function nd(t,a){try{console.error(a.value)}catch(d){setTimeout(function(){throw d})}}var $2=typeof WeakMap=="function"?WeakMap:Map;function mp(t,a,d){d=Vs(-1,d),d.tag=3,d.payload={element:null};var x=a.value;return d.callback=function(){Vo||(Vo=!0,xd=x),nd(t,a)},d}function gp(t,a,d){d=Vs(-1,d),d.tag=3;var x=t.type.getDerivedStateFromError;if(typeof x=="function"){var S=a.value;d.payload=function(){return x(S)},d.callback=function(){nd(t,a)}}var E=t.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(d.callback=function(){nd(t,a),typeof x!="function"&&(fr===null?fr=new Set([this]):fr.add(this));var K=a.stack;this.componentDidCatch(a.value,{componentStack:K!==null?K:""})}),d}function xp(t,a,d){var x=t.pingCache;if(x===null){x=t.pingCache=new $2;var S=new Set;x.set(a,S)}else S=x.get(a),S===void 0&&(S=new Set,x.set(a,S));S.has(d)||(S.add(d),t=nv.bind(null,t,a,d),a.then(t,t))}function bp(t){do{var a;if((a=t.tag===13)&&(a=t.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return t;t=t.return}while(t!==null);return null}function vp(t,a,d,x,S){return(t.mode&1)===0?(t===a?t.flags|=65536:(t.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(a=Vs(-1,1),a.tag=2,dr(d,a,1))),d.lanes|=1),t):(t.flags|=65536,t.lanes=S,t)}var H2=T.ReactCurrentOwner,Pn=!1;function An(t,a,d,x){a.child=t===null?zh(a,null,d,x):va(a,t.child,d,x)}function yp(t,a,d,x,S){d=d.render;var E=a.ref;return wa(a,S),x=Gc(t,a,d,x,E,S),d=qc(),t!==null&&!Pn?(a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~S,$s(t,a,S)):(Rt&&d&&Tc(a),a.flags|=1,An(t,a,x,S),a.child)}function wp(t,a,d,x,S){if(t===null){var E=d.type;return typeof E=="function"&&!Cd(E)&&E.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(a.tag=15,a.type=E,kp(t,a,E,x,S)):(t=Go(d.type,null,x,a,a.mode,S),t.ref=a.ref,t.return=a,a.child=t)}if(E=t.child,(t.lanes&S)===0){var K=E.memoizedProps;if(d=d.compare,d=d!==null?d:di,d(K,x)&&t.ref===a.ref)return $s(t,a,S)}return a.flags|=1,t=gr(E,x),t.ref=a.ref,t.return=a,a.child=t}function kp(t,a,d,x,S){if(t!==null){var E=t.memoizedProps;if(di(E,x)&&t.ref===a.ref)if(Pn=!1,a.pendingProps=x=E,(t.lanes&S)!==0)(t.flags&131072)!==0&&(Pn=!0);else return a.lanes=t.lanes,$s(t,a,S)}return sd(t,a,d,x,S)}function Sp(t,a,d){var x=a.pendingProps,S=x.children,E=t!==null?t.memoizedState:null;if(x.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tt(ja,Qn),Qn|=d;else{if((d&1073741824)===0)return t=E!==null?E.baseLanes|d:d,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:t,cachePool:null,transitions:null},a.updateQueue=null,Tt(ja,Qn),Qn|=t,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=E!==null?E.baseLanes:d,Tt(ja,Qn),Qn|=x}else E!==null?(x=E.baseLanes|d,a.memoizedState=null):x=d,Tt(ja,Qn),Qn|=x;return An(t,a,S,d),a.child}function Cp(t,a){var d=a.ref;(t===null&&d!==null||t!==null&&t.ref!==d)&&(a.flags|=512,a.flags|=2097152)}function sd(t,a,d,x,S){var E=In(d)?Mr:vn.current;return E=ma(a,E),wa(a,S),d=Gc(t,a,d,x,E,S),x=qc(),t!==null&&!Pn?(a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~S,$s(t,a,S)):(Rt&&x&&Tc(a),a.flags|=1,An(t,a,d,S),a.child)}function jp(t,a,d,x,S){if(In(d)){var E=!0;bo(a)}else E=!1;if(wa(a,S),a.stateNode===null)Ro(t,a),hp(a,d,x),ed(a,d,x,S),x=!0;else if(t===null){var K=a.stateNode,ne=a.memoizedProps;K.props=ne;var ae=K.context,xe=d.contextType;typeof xe=="object"&&xe!==null?xe=ts(xe):(xe=In(d)?Mr:vn.current,xe=ma(a,xe));var Ae=d.getDerivedStateFromProps,De=typeof Ae=="function"||typeof K.getSnapshotBeforeUpdate=="function";De||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(ne!==x||ae!==xe)&&pp(a,K,x,xe),cr=!1;var Ee=a.memoizedState;K.state=Ee,_o(a,x,K,S),ae=a.memoizedState,ne!==x||Ee!==ae||Mn.current||cr?(typeof Ae=="function"&&(Jc(a,d,Ae,x),ae=a.memoizedState),(ne=cr||fp(a,d,ne,x,Ee,ae,xe))?(De||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(a.flags|=4194308)):(typeof K.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=x,a.memoizedState=ae),K.props=x,K.state=ae,K.context=xe,x=ne):(typeof K.componentDidMount=="function"&&(a.flags|=4194308),x=!1)}else{K=a.stateNode,Vh(t,a),ne=a.memoizedProps,xe=a.type===a.elementType?ne:ps(a.type,ne),K.props=xe,De=a.pendingProps,Ee=K.context,ae=d.contextType,typeof ae=="object"&&ae!==null?ae=ts(ae):(ae=In(d)?Mr:vn.current,ae=ma(a,ae));var Le=d.getDerivedStateFromProps;(Ae=typeof Le=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(ne!==De||Ee!==ae)&&pp(a,K,x,ae),cr=!1,Ee=a.memoizedState,K.state=Ee,_o(a,x,K,S);var Ve=a.memoizedState;ne!==De||Ee!==Ve||Mn.current||cr?(typeof Le=="function"&&(Jc(a,d,Le,x),Ve=a.memoizedState),(xe=cr||fp(a,d,xe,x,Ee,Ve,ae)||!1)?(Ae||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(x,Ve,ae),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(x,Ve,ae)),typeof K.componentDidUpdate=="function"&&(a.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof K.componentDidUpdate!="function"||ne===t.memoizedProps&&Ee===t.memoizedState||(a.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||ne===t.memoizedProps&&Ee===t.memoizedState||(a.flags|=1024),a.memoizedProps=x,a.memoizedState=Ve),K.props=x,K.state=Ve,K.context=ae,x=xe):(typeof K.componentDidUpdate!="function"||ne===t.memoizedProps&&Ee===t.memoizedState||(a.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||ne===t.memoizedProps&&Ee===t.memoizedState||(a.flags|=1024),x=!1)}return rd(t,a,d,x,E,S)}function rd(t,a,d,x,S,E){Cp(t,a);var K=(a.flags&128)!==0;if(!x&&!K)return S&&Th(a,d,!1),$s(t,a,E);x=a.stateNode,H2.current=a;var ne=K&&typeof d.getDerivedStateFromError!="function"?null:x.render();return a.flags|=1,t!==null&&K?(a.child=va(a,t.child,null,E),a.child=va(a,null,ne,E)):An(t,a,ne,E),a.memoizedState=x.state,S&&Th(a,d,!0),a.child}function Np(t){var a=t.stateNode;a.pendingContext?Eh(t,a.pendingContext,a.pendingContext!==a.context):a.context&&Eh(t,a.context,!1),Vc(t,a.containerInfo)}function _p(t,a,d,x,S){return ba(),Ic(S),a.flags|=256,An(t,a,d,x),a.child}var ad={dehydrated:null,treeContext:null,retryLane:0};function id(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ep(t,a,d){var x=a.pendingProps,S=Ot.current,E=!1,K=(a.flags&128)!==0,ne;if((ne=K)||(ne=t!==null&&t.memoizedState===null?!1:(S&2)!==0),ne?(E=!0,a.flags&=-129):(t===null||t.memoizedState!==null)&&(S|=1),Tt(Ot,S&1),t===null)return Mc(a),t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((a.mode&1)===0?a.lanes=1:t.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(K=x.children,t=x.fallback,E?(x=a.mode,E=a.child,K={mode:"hidden",children:K},(x&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=K):E=qo(K,x,0,null),t=Hr(t,x,d,null),E.return=a,t.return=a,E.sibling=t,a.child=E,a.child.memoizedState=id(d),a.memoizedState=ad,t):od(a,K));if(S=t.memoizedState,S!==null&&(ne=S.dehydrated,ne!==null))return U2(t,a,K,x,ne,S,d);if(E){E=x.fallback,K=a.mode,S=t.child,ne=S.sibling;var ae={mode:"hidden",children:x.children};return(K&1)===0&&a.child!==S?(x=a.child,x.childLanes=0,x.pendingProps=ae,a.deletions=null):(x=gr(S,ae),x.subtreeFlags=S.subtreeFlags&14680064),ne!==null?E=gr(ne,E):(E=Hr(E,K,d,null),E.flags|=2),E.return=a,x.return=a,x.sibling=E,a.child=x,x=E,E=a.child,K=t.child.memoizedState,K=K===null?id(d):{baseLanes:K.baseLanes|d,cachePool:null,transitions:K.transitions},E.memoizedState=K,E.childLanes=t.childLanes&~d,a.memoizedState=ad,x}return E=t.child,t=E.sibling,x=gr(E,{mode:"visible",children:x.children}),(a.mode&1)===0&&(x.lanes=d),x.return=a,x.sibling=null,t!==null&&(d=a.deletions,d===null?(a.deletions=[t],a.flags|=16):d.push(t)),a.child=x,a.memoizedState=null,x}function od(t,a){return a=qo({mode:"visible",children:a},t.mode,0,null),a.return=t,t.child=a}function Po(t,a,d,x){return x!==null&&Ic(x),va(a,t.child,null,d),t=od(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function U2(t,a,d,x,S,E,K){if(d)return a.flags&256?(a.flags&=-257,x=td(Error(s(422))),Po(t,a,K,x)):a.memoizedState!==null?(a.child=t.child,a.flags|=128,null):(E=x.fallback,S=a.mode,x=qo({mode:"visible",children:x.children},S,0,null),E=Hr(E,S,K,null),E.flags|=2,x.return=a,E.return=a,x.sibling=E,a.child=x,(a.mode&1)!==0&&va(a,t.child,null,K),a.child.memoizedState=id(K),a.memoizedState=ad,E);if((a.mode&1)===0)return Po(t,a,K,null);if(S.data==="$!"){if(x=S.nextSibling&&S.nextSibling.dataset,x)var ne=x.dgst;return x=ne,E=Error(s(419)),x=td(E,x,void 0),Po(t,a,K,x)}if(ne=(K&t.childLanes)!==0,Pn||ne){if(x=cn,x!==null){switch(K&-K){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(x.suspendedLanes|K))!==0?0:S,S!==0&&S!==E.retryLane&&(E.retryLane=S,Os(t,S),xs(x,t,S,-1))}return Sd(),x=td(Error(s(421))),Po(t,a,K,x)}return S.data==="$?"?(a.flags|=128,a.child=t.child,a=sv.bind(null,t),S._reactRetry=a,null):(t=E.treeContext,Yn=ar(S.nextSibling),Zn=a,Rt=!0,hs=null,t!==null&&(Jn[es++]=Ls,Jn[es++]=zs,Jn[es++]=Ir,Ls=t.id,zs=t.overflow,Ir=a),a=od(a,x.children),a.flags|=4096,a)}function Ap(t,a,d){t.lanes|=a;var x=t.alternate;x!==null&&(x.lanes|=a),Lc(t.return,a,d)}function ld(t,a,d,x,S){var E=t.memoizedState;E===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:x,tail:d,tailMode:S}:(E.isBackwards=a,E.rendering=null,E.renderingStartTime=0,E.last=x,E.tail=d,E.tailMode=S)}function Tp(t,a,d){var x=a.pendingProps,S=x.revealOrder,E=x.tail;if(An(t,a,x.children,d),x=Ot.current,(x&2)!==0)x=x&1|2,a.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ap(t,d,a);else if(t.tag===19)Ap(t,d,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}x&=1}if(Tt(Ot,x),(a.mode&1)===0)a.memoizedState=null;else switch(S){case"forwards":for(d=a.child,S=null;d!==null;)t=d.alternate,t!==null&&Eo(t)===null&&(S=d),d=d.sibling;d=S,d===null?(S=a.child,a.child=null):(S=d.sibling,d.sibling=null),ld(a,!1,S,d,E);break;case"backwards":for(d=null,S=a.child,a.child=null;S!==null;){if(t=S.alternate,t!==null&&Eo(t)===null){a.child=S;break}t=S.sibling,S.sibling=d,d=S,S=t}ld(a,!0,d,null,E);break;case"together":ld(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Ro(t,a){(a.mode&1)===0&&t!==null&&(t.alternate=null,a.alternate=null,a.flags|=2)}function $s(t,a,d){if(t!==null&&(a.dependencies=t.dependencies),zr|=a.lanes,(d&a.childLanes)===0)return null;if(t!==null&&a.child!==t.child)throw Error(s(153));if(a.child!==null){for(t=a.child,d=gr(t,t.pendingProps),a.child=d,d.return=a;t.sibling!==null;)t=t.sibling,d=d.sibling=gr(t,t.pendingProps),d.return=a;d.sibling=null}return a.child}function W2(t,a,d){switch(a.tag){case 3:Np(a),ba();break;case 5:Uh(a);break;case 1:In(a.type)&&bo(a);break;case 4:Vc(a,a.stateNode.containerInfo);break;case 10:var x=a.type._context,S=a.memoizedProps.value;Tt(Co,x._currentValue),x._currentValue=S;break;case 13:if(x=a.memoizedState,x!==null)return x.dehydrated!==null?(Tt(Ot,Ot.current&1),a.flags|=128,null):(d&a.child.childLanes)!==0?Ep(t,a,d):(Tt(Ot,Ot.current&1),t=$s(t,a,d),t!==null?t.sibling:null);Tt(Ot,Ot.current&1);break;case 19:if(x=(d&a.childLanes)!==0,(t.flags&128)!==0){if(x)return Tp(t,a,d);a.flags|=128}if(S=a.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),Tt(Ot,Ot.current),x)break;return null;case 22:case 23:return a.lanes=0,Sp(t,a,d)}return $s(t,a,d)}var Dp,cd,Fp,Mp;Dp=function(t,a){for(var d=a.child;d!==null;){if(d.tag===5||d.tag===6)t.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},cd=function(){},Fp=function(t,a,d,x){var S=t.memoizedProps;if(S!==x){t=a.stateNode,Br(Ns.current);var E=null;switch(d){case"input":S=R(t,S),x=R(t,x),E=[];break;case"select":S=Q({},S,{value:void 0}),x=Q({},x,{value:void 0}),E=[];break;case"textarea":S=le(t,S),x=le(t,x),E=[];break;default:typeof S.onClick!="function"&&typeof x.onClick=="function"&&(t.onclick=mo)}Ft(d,x);var K;d=null;for(xe in S)if(!x.hasOwnProperty(xe)&&S.hasOwnProperty(xe)&&S[xe]!=null)if(xe==="style"){var ne=S[xe];for(K in ne)ne.hasOwnProperty(K)&&(d||(d={}),d[K]="")}else xe!=="dangerouslySetInnerHTML"&&xe!=="children"&&xe!=="suppressContentEditableWarning"&&xe!=="suppressHydrationWarning"&&xe!=="autoFocus"&&(o.hasOwnProperty(xe)?E||(E=[]):(E=E||[]).push(xe,null));for(xe in x){var ae=x[xe];if(ne=S?.[xe],x.hasOwnProperty(xe)&&ae!==ne&&(ae!=null||ne!=null))if(xe==="style")if(ne){for(K in ne)!ne.hasOwnProperty(K)||ae&&ae.hasOwnProperty(K)||(d||(d={}),d[K]="");for(K in ae)ae.hasOwnProperty(K)&&ne[K]!==ae[K]&&(d||(d={}),d[K]=ae[K])}else d||(E||(E=[]),E.push(xe,d)),d=ae;else xe==="dangerouslySetInnerHTML"?(ae=ae?ae.__html:void 0,ne=ne?ne.__html:void 0,ae!=null&&ne!==ae&&(E=E||[]).push(xe,ae)):xe==="children"?typeof ae!="string"&&typeof ae!="number"||(E=E||[]).push(xe,""+ae):xe!=="suppressContentEditableWarning"&&xe!=="suppressHydrationWarning"&&(o.hasOwnProperty(xe)?(ae!=null&&xe==="onScroll"&&It("scroll",t),E||ne===ae||(E=[])):(E=E||[]).push(xe,ae))}d&&(E=E||[]).push("style",d);var xe=E;(a.updateQueue=xe)&&(a.flags|=4)}},Mp=function(t,a,d,x){d!==x&&(a.flags|=4)};function ji(t,a){if(!Rt)switch(t.tailMode){case"hidden":a=t.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?t.tail=null:d.sibling=null;break;case"collapsed":d=t.tail;for(var x=null;d!==null;)d.alternate!==null&&(x=d),d=d.sibling;x===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:x.sibling=null}}function wn(t){var a=t.alternate!==null&&t.alternate.child===t.child,d=0,x=0;if(a)for(var S=t.child;S!==null;)d|=S.lanes|S.childLanes,x|=S.subtreeFlags&14680064,x|=S.flags&14680064,S.return=t,S=S.sibling;else for(S=t.child;S!==null;)d|=S.lanes|S.childLanes,x|=S.subtreeFlags,x|=S.flags,S.return=t,S=S.sibling;return t.subtreeFlags|=x,t.childLanes=d,a}function K2(t,a,d){var x=a.pendingProps;switch(Dc(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wn(a),null;case 1:return In(a.type)&&xo(),wn(a),null;case 3:return x=a.stateNode,ka(),Pt(Mn),Pt(vn),Uc(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(t===null||t.child===null)&&(ko(a)?a.flags|=4:t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,hs!==null&&(yd(hs),hs=null))),cd(t,a),wn(a),null;case 5:$c(a);var S=Br(yi.current);if(d=a.type,t!==null&&a.stateNode!=null)Fp(t,a,d,x,S),t.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!x){if(a.stateNode===null)throw Error(s(166));return wn(a),null}if(t=Br(Ns.current),ko(a)){x=a.stateNode,d=a.type;var E=a.memoizedProps;switch(x[js]=a,x[mi]=E,t=(a.mode&1)!==0,d){case"dialog":It("cancel",x),It("close",x);break;case"iframe":case"object":case"embed":It("load",x);break;case"video":case"audio":for(S=0;S<fi.length;S++)It(fi[S],x);break;case"source":It("error",x);break;case"img":case"image":case"link":It("error",x),It("load",x);break;case"details":It("toggle",x);break;case"input":fe(x,E),It("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!E.multiple},It("invalid",x);break;case"textarea":ke(x,E),It("invalid",x)}Ft(d,E),S=null;for(var K in E)if(E.hasOwnProperty(K)){var ne=E[K];K==="children"?typeof ne=="string"?x.textContent!==ne&&(E.suppressHydrationWarning!==!0&&po(x.textContent,ne,t),S=["children",ne]):typeof ne=="number"&&x.textContent!==""+ne&&(E.suppressHydrationWarning!==!0&&po(x.textContent,ne,t),S=["children",""+ne]):o.hasOwnProperty(K)&&ne!=null&&K==="onScroll"&&It("scroll",x)}switch(d){case"input":ie(x),X(x,E,!0);break;case"textarea":ie(x),_e(x);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(x.onclick=mo)}x=S,a.updateQueue=x,x!==null&&(a.flags|=4)}else{K=S.nodeType===9?S:S.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Re(d)),t==="http://www.w3.org/1999/xhtml"?d==="script"?(t=K.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof x.is=="string"?t=K.createElement(d,{is:x.is}):(t=K.createElement(d),d==="select"&&(K=t,x.multiple?K.multiple=!0:x.size&&(K.size=x.size))):t=K.createElementNS(t,d),t[js]=a,t[mi]=x,Dp(t,a,!1,!1),a.stateNode=t;e:{switch(K=bn(d,x),d){case"dialog":It("cancel",t),It("close",t),S=x;break;case"iframe":case"object":case"embed":It("load",t),S=x;break;case"video":case"audio":for(S=0;S<fi.length;S++)It(fi[S],t);S=x;break;case"source":It("error",t),S=x;break;case"img":case"image":case"link":It("error",t),It("load",t),S=x;break;case"details":It("toggle",t),S=x;break;case"input":fe(t,x),S=R(t,x),It("invalid",t);break;case"option":S=x;break;case"select":t._wrapperState={wasMultiple:!!x.multiple},S=Q({},x,{value:void 0}),It("invalid",t);break;case"textarea":ke(t,x),S=le(t,x),It("invalid",t);break;default:S=x}Ft(d,S),ne=S;for(E in ne)if(ne.hasOwnProperty(E)){var ae=ne[E];E==="style"?kt(t,ae):E==="dangerouslySetInnerHTML"?(ae=ae?ae.__html:void 0,ae!=null&&mt(t,ae)):E==="children"?typeof ae=="string"?(d!=="textarea"||ae!=="")&&ct(t,ae):typeof ae=="number"&&ct(t,""+ae):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(o.hasOwnProperty(E)?ae!=null&&E==="onScroll"&&It("scroll",t):ae!=null&&j(t,E,ae,K))}switch(d){case"input":ie(t),X(t,x,!1);break;case"textarea":ie(t),_e(t);break;case"option":x.value!=null&&t.setAttribute("value",""+ce(x.value));break;case"select":t.multiple=!!x.multiple,E=x.value,E!=null?ve(t,!!x.multiple,E,!1):x.defaultValue!=null&&ve(t,!!x.multiple,x.defaultValue,!0);break;default:typeof S.onClick=="function"&&(t.onclick=mo)}switch(d){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return wn(a),null;case 6:if(t&&a.stateNode!=null)Mp(t,a,t.memoizedProps,x);else{if(typeof x!="string"&&a.stateNode===null)throw Error(s(166));if(d=Br(yi.current),Br(Ns.current),ko(a)){if(x=a.stateNode,d=a.memoizedProps,x[js]=a,(E=x.nodeValue!==d)&&(t=Zn,t!==null))switch(t.tag){case 3:po(x.nodeValue,d,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&po(x.nodeValue,d,(t.mode&1)!==0)}E&&(a.flags|=4)}else x=(d.nodeType===9?d:d.ownerDocument).createTextNode(x),x[js]=a,a.stateNode=x}return wn(a),null;case 13:if(Pt(Ot),x=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Rt&&Yn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Rh(),ba(),a.flags|=98560,E=!1;else if(E=ko(a),x!==null&&x.dehydrated!==null){if(t===null){if(!E)throw Error(s(318));if(E=a.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(s(317));E[js]=a}else ba(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;wn(a),E=!1}else hs!==null&&(yd(hs),hs=null),E=!0;if(!E)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=d,a):(x=x!==null,x!==(t!==null&&t.memoizedState!==null)&&x&&(a.child.flags|=8192,(a.mode&1)!==0&&(t===null||(Ot.current&1)!==0?Jt===0&&(Jt=3):Sd())),a.updateQueue!==null&&(a.flags|=4),wn(a),null);case 4:return ka(),cd(t,a),t===null&&hi(a.stateNode.containerInfo),wn(a),null;case 10:return Bc(a.type._context),wn(a),null;case 17:return In(a.type)&&xo(),wn(a),null;case 19:if(Pt(Ot),E=a.memoizedState,E===null)return wn(a),null;if(x=(a.flags&128)!==0,K=E.rendering,K===null)if(x)ji(E,!1);else{if(Jt!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(K=Eo(t),K!==null){for(a.flags|=128,ji(E,!1),x=K.updateQueue,x!==null&&(a.updateQueue=x,a.flags|=4),a.subtreeFlags=0,x=d,d=a.child;d!==null;)E=d,t=x,E.flags&=14680066,K=E.alternate,K===null?(E.childLanes=0,E.lanes=t,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=K.childLanes,E.lanes=K.lanes,E.child=K.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=K.memoizedProps,E.memoizedState=K.memoizedState,E.updateQueue=K.updateQueue,E.type=K.type,t=K.dependencies,E.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),d=d.sibling;return Tt(Ot,Ot.current&1|2),a.child}t=t.sibling}E.tail!==null&&ft()>Na&&(a.flags|=128,x=!0,ji(E,!1),a.lanes=4194304)}else{if(!x)if(t=Eo(K),t!==null){if(a.flags|=128,x=!0,d=t.updateQueue,d!==null&&(a.updateQueue=d,a.flags|=4),ji(E,!0),E.tail===null&&E.tailMode==="hidden"&&!K.alternate&&!Rt)return wn(a),null}else 2*ft()-E.renderingStartTime>Na&&d!==1073741824&&(a.flags|=128,x=!0,ji(E,!1),a.lanes=4194304);E.isBackwards?(K.sibling=a.child,a.child=K):(d=E.last,d!==null?d.sibling=K:a.child=K,E.last=K)}return E.tail!==null?(a=E.tail,E.rendering=a,E.tail=a.sibling,E.renderingStartTime=ft(),a.sibling=null,d=Ot.current,Tt(Ot,x?d&1|2:d&1),a):(wn(a),null);case 22:case 23:return kd(),x=a.memoizedState!==null,t!==null&&t.memoizedState!==null!==x&&(a.flags|=8192),x&&(a.mode&1)!==0?(Qn&1073741824)!==0&&(wn(a),a.subtreeFlags&6&&(a.flags|=8192)):wn(a),null;case 24:return null;case 25:return null}throw Error(s(156,a.tag))}function G2(t,a){switch(Dc(a),a.tag){case 1:return In(a.type)&&xo(),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return ka(),Pt(Mn),Pt(vn),Uc(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 5:return $c(a),null;case 13:if(Pt(Ot),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(s(340));ba()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return Pt(Ot),null;case 4:return ka(),null;case 10:return Bc(a.type._context),null;case 22:case 23:return kd(),null;case 24:return null;default:return null}}var Bo=!1,kn=!1,q2=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function Ca(t,a){var d=t.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(x){Ht(t,a,x)}else d.current=null}function dd(t,a,d){try{d()}catch(x){Ht(t,a,x)}}var Ip=!1;function Z2(t,a){if(kc=ia,t=fh(),pc(t)){if("selectionStart"in t)var d={start:t.selectionStart,end:t.selectionEnd};else e:{d=(d=t.ownerDocument)&&d.defaultView||window;var x=d.getSelection&&d.getSelection();if(x&&x.rangeCount!==0){d=x.anchorNode;var S=x.anchorOffset,E=x.focusNode;x=x.focusOffset;try{d.nodeType,E.nodeType}catch{d=null;break e}var K=0,ne=-1,ae=-1,xe=0,Ae=0,De=t,Ee=null;t:for(;;){for(var Le;De!==d||S!==0&&De.nodeType!==3||(ne=K+S),De!==E||x!==0&&De.nodeType!==3||(ae=K+x),De.nodeType===3&&(K+=De.nodeValue.length),(Le=De.firstChild)!==null;)Ee=De,De=Le;for(;;){if(De===t)break t;if(Ee===d&&++xe===S&&(ne=K),Ee===E&&++Ae===x&&(ae=K),(Le=De.nextSibling)!==null)break;De=Ee,Ee=De.parentNode}De=Le}d=ne===-1||ae===-1?null:{start:ne,end:ae}}else d=null}d=d||{start:0,end:0}}else d=null;for(Sc={focusedElem:t,selectionRange:d},ia=!1,Oe=a;Oe!==null;)if(a=Oe,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,Oe=t;else for(;Oe!==null;){a=Oe;try{var Ve=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Ve!==null){var Ue=Ve.memoizedProps,Gt=Ve.memoizedState,pe=a.stateNode,oe=pe.getSnapshotBeforeUpdate(a.elementType===a.type?Ue:ps(a.type,Ue),Gt);pe.__reactInternalSnapshotBeforeUpdate=oe}break;case 3:var ge=a.stateNode.containerInfo;ge.nodeType===1?ge.textContent="":ge.nodeType===9&&ge.documentElement&&ge.removeChild(ge.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Fe){Ht(a,a.return,Fe)}if(t=a.sibling,t!==null){t.return=a.return,Oe=t;break}Oe=a.return}return Ve=Ip,Ip=!1,Ve}function Ni(t,a,d){var x=a.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var S=x=x.next;do{if((S.tag&t)===t){var E=S.destroy;S.destroy=void 0,E!==void 0&&dd(a,d,E)}S=S.next}while(S!==x)}}function Lo(t,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&t)===t){var x=d.create;d.destroy=x()}d=d.next}while(d!==a)}}function ud(t){var a=t.ref;if(a!==null){var d=t.stateNode;switch(t.tag){case 5:t=d;break;default:t=d}typeof a=="function"?a(t):a.current=t}}function Pp(t){var a=t.alternate;a!==null&&(t.alternate=null,Pp(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&(delete a[js],delete a[mi],delete a[_c],delete a[D2],delete a[F2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Rp(t){return t.tag===5||t.tag===3||t.tag===4}function Bp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Rp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fd(t,a,d){var x=t.tag;if(x===5||x===6)t=t.stateNode,a?d.nodeType===8?d.parentNode.insertBefore(t,a):d.insertBefore(t,a):(d.nodeType===8?(a=d.parentNode,a.insertBefore(t,d)):(a=d,a.appendChild(t)),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=mo));else if(x!==4&&(t=t.child,t!==null))for(fd(t,a,d),t=t.sibling;t!==null;)fd(t,a,d),t=t.sibling}function hd(t,a,d){var x=t.tag;if(x===5||x===6)t=t.stateNode,a?d.insertBefore(t,a):d.appendChild(t);else if(x!==4&&(t=t.child,t!==null))for(hd(t,a,d),t=t.sibling;t!==null;)hd(t,a,d),t=t.sibling}var pn=null,ms=!1;function ur(t,a,d){for(d=d.child;d!==null;)Lp(t,a,d),d=d.sibling}function Lp(t,a,d){if(Xn&&typeof Xn.onCommitFiberUnmount=="function")try{Xn.onCommitFiberUnmount(Ar,d)}catch{}switch(d.tag){case 5:kn||Ca(d,a);case 6:var x=pn,S=ms;pn=null,ur(t,a,d),pn=x,ms=S,pn!==null&&(ms?(t=pn,d=d.stateNode,t.nodeType===8?t.parentNode.removeChild(d):t.removeChild(d)):pn.removeChild(d.stateNode));break;case 18:pn!==null&&(ms?(t=pn,d=d.stateNode,t.nodeType===8?Nc(t.parentNode,d):t.nodeType===1&&Nc(t,d),Cs(t)):Nc(pn,d.stateNode));break;case 4:x=pn,S=ms,pn=d.stateNode.containerInfo,ms=!0,ur(t,a,d),pn=x,ms=S;break;case 0:case 11:case 14:case 15:if(!kn&&(x=d.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){S=x=x.next;do{var E=S,K=E.destroy;E=E.tag,K!==void 0&&((E&2)!==0||(E&4)!==0)&&dd(d,a,K),S=S.next}while(S!==x)}ur(t,a,d);break;case 1:if(!kn&&(Ca(d,a),x=d.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=d.memoizedProps,x.state=d.memoizedState,x.componentWillUnmount()}catch(ne){Ht(d,a,ne)}ur(t,a,d);break;case 21:ur(t,a,d);break;case 22:d.mode&1?(kn=(x=kn)||d.memoizedState!==null,ur(t,a,d),kn=x):ur(t,a,d);break;default:ur(t,a,d)}}function zp(t){var a=t.updateQueue;if(a!==null){t.updateQueue=null;var d=t.stateNode;d===null&&(d=t.stateNode=new q2),a.forEach(function(x){var S=rv.bind(null,t,x);d.has(x)||(d.add(x),x.then(S,S))})}}function gs(t,a){var d=a.deletions;if(d!==null)for(var x=0;x<d.length;x++){var S=d[x];try{var E=t,K=a,ne=K;e:for(;ne!==null;){switch(ne.tag){case 5:pn=ne.stateNode,ms=!1;break e;case 3:pn=ne.stateNode.containerInfo,ms=!0;break e;case 4:pn=ne.stateNode.containerInfo,ms=!0;break e}ne=ne.return}if(pn===null)throw Error(s(160));Lp(E,K,S),pn=null,ms=!1;var ae=S.alternate;ae!==null&&(ae.return=null),S.return=null}catch(xe){Ht(S,a,xe)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)Op(a,t),a=a.sibling}function Op(t,a){var d=t.alternate,x=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gs(a,t),Es(t),x&4){try{Ni(3,t,t.return),Lo(3,t)}catch(Ue){Ht(t,t.return,Ue)}try{Ni(5,t,t.return)}catch(Ue){Ht(t,t.return,Ue)}}break;case 1:gs(a,t),Es(t),x&512&&d!==null&&Ca(d,d.return);break;case 5:if(gs(a,t),Es(t),x&512&&d!==null&&Ca(d,d.return),t.flags&32){var S=t.stateNode;try{ct(S,"")}catch(Ue){Ht(t,t.return,Ue)}}if(x&4&&(S=t.stateNode,S!=null)){var E=t.memoizedProps,K=d!==null?d.memoizedProps:E,ne=t.type,ae=t.updateQueue;if(t.updateQueue=null,ae!==null)try{ne==="input"&&E.type==="radio"&&E.name!=null&&te(S,E),bn(ne,K);var xe=bn(ne,E);for(K=0;K<ae.length;K+=2){var Ae=ae[K],De=ae[K+1];Ae==="style"?kt(S,De):Ae==="dangerouslySetInnerHTML"?mt(S,De):Ae==="children"?ct(S,De):j(S,Ae,De,xe)}switch(ne){case"input":J(S,E);break;case"textarea":Ne(S,E);break;case"select":var Ee=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!E.multiple;var Le=E.value;Le!=null?ve(S,!!E.multiple,Le,!1):Ee!==!!E.multiple&&(E.defaultValue!=null?ve(S,!!E.multiple,E.defaultValue,!0):ve(S,!!E.multiple,E.multiple?[]:"",!1))}S[mi]=E}catch(Ue){Ht(t,t.return,Ue)}}break;case 6:if(gs(a,t),Es(t),x&4){if(t.stateNode===null)throw Error(s(162));S=t.stateNode,E=t.memoizedProps;try{S.nodeValue=E}catch(Ue){Ht(t,t.return,Ue)}}break;case 3:if(gs(a,t),Es(t),x&4&&d!==null&&d.memoizedState.isDehydrated)try{Cs(a.containerInfo)}catch(Ue){Ht(t,t.return,Ue)}break;case 4:gs(a,t),Es(t);break;case 13:gs(a,t),Es(t),S=t.child,S.flags&8192&&(E=S.memoizedState!==null,S.stateNode.isHidden=E,!E||S.alternate!==null&&S.alternate.memoizedState!==null||(gd=ft())),x&4&&zp(t);break;case 22:if(Ae=d!==null&&d.memoizedState!==null,t.mode&1?(kn=(xe=kn)||Ae,gs(a,t),kn=xe):gs(a,t),Es(t),x&8192){if(xe=t.memoizedState!==null,(t.stateNode.isHidden=xe)&&!Ae&&(t.mode&1)!==0)for(Oe=t,Ae=t.child;Ae!==null;){for(De=Oe=Ae;Oe!==null;){switch(Ee=Oe,Le=Ee.child,Ee.tag){case 0:case 11:case 14:case 15:Ni(4,Ee,Ee.return);break;case 1:Ca(Ee,Ee.return);var Ve=Ee.stateNode;if(typeof Ve.componentWillUnmount=="function"){x=Ee,d=Ee.return;try{a=x,Ve.props=a.memoizedProps,Ve.state=a.memoizedState,Ve.componentWillUnmount()}catch(Ue){Ht(x,d,Ue)}}break;case 5:Ca(Ee,Ee.return);break;case 22:if(Ee.memoizedState!==null){Hp(De);continue}}Le!==null?(Le.return=Ee,Oe=Le):Hp(De)}Ae=Ae.sibling}e:for(Ae=null,De=t;;){if(De.tag===5){if(Ae===null){Ae=De;try{S=De.stateNode,xe?(E=S.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(ne=De.stateNode,ae=De.memoizedProps.style,K=ae!=null&&ae.hasOwnProperty("display")?ae.display:null,ne.style.display=ot("display",K))}catch(Ue){Ht(t,t.return,Ue)}}}else if(De.tag===6){if(Ae===null)try{De.stateNode.nodeValue=xe?"":De.memoizedProps}catch(Ue){Ht(t,t.return,Ue)}}else if((De.tag!==22&&De.tag!==23||De.memoizedState===null||De===t)&&De.child!==null){De.child.return=De,De=De.child;continue}if(De===t)break e;for(;De.sibling===null;){if(De.return===null||De.return===t)break e;Ae===De&&(Ae=null),De=De.return}Ae===De&&(Ae=null),De.sibling.return=De.return,De=De.sibling}}break;case 19:gs(a,t),Es(t),x&4&&zp(t);break;case 21:break;default:gs(a,t),Es(t)}}function Es(t){var a=t.flags;if(a&2){try{e:{for(var d=t.return;d!==null;){if(Rp(d)){var x=d;break e}d=d.return}throw Error(s(160))}switch(x.tag){case 5:var S=x.stateNode;x.flags&32&&(ct(S,""),x.flags&=-33);var E=Bp(t);hd(t,E,S);break;case 3:case 4:var K=x.stateNode.containerInfo,ne=Bp(t);fd(t,ne,K);break;default:throw Error(s(161))}}catch(ae){Ht(t,t.return,ae)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function Y2(t,a,d){Oe=t,Vp(t)}function Vp(t,a,d){for(var x=(t.mode&1)!==0;Oe!==null;){var S=Oe,E=S.child;if(S.tag===22&&x){var K=S.memoizedState!==null||Bo;if(!K){var ne=S.alternate,ae=ne!==null&&ne.memoizedState!==null||kn;ne=Bo;var xe=kn;if(Bo=K,(kn=ae)&&!xe)for(Oe=S;Oe!==null;)K=Oe,ae=K.child,K.tag===22&&K.memoizedState!==null?Up(S):ae!==null?(ae.return=K,Oe=ae):Up(S);for(;E!==null;)Oe=E,Vp(E),E=E.sibling;Oe=S,Bo=ne,kn=xe}$p(t)}else(S.subtreeFlags&8772)!==0&&E!==null?(E.return=S,Oe=E):$p(t)}}function $p(t){for(;Oe!==null;){var a=Oe;if((a.flags&8772)!==0){var d=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:kn||Lo(5,a);break;case 1:var x=a.stateNode;if(a.flags&4&&!kn)if(d===null)x.componentDidMount();else{var S=a.elementType===a.type?d.memoizedProps:ps(a.type,d.memoizedProps);x.componentDidUpdate(S,d.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var E=a.updateQueue;E!==null&&Hh(a,E,x);break;case 3:var K=a.updateQueue;if(K!==null){if(d=null,a.child!==null)switch(a.child.tag){case 5:d=a.child.stateNode;break;case 1:d=a.child.stateNode}Hh(a,K,d)}break;case 5:var ne=a.stateNode;if(d===null&&a.flags&4){d=ne;var ae=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":ae.autoFocus&&d.focus();break;case"img":ae.src&&(d.src=ae.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var xe=a.alternate;if(xe!==null){var Ae=xe.memoizedState;if(Ae!==null){var De=Ae.dehydrated;De!==null&&Cs(De)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}kn||a.flags&512&&ud(a)}catch(Ee){Ht(a,a.return,Ee)}}if(a===t){Oe=null;break}if(d=a.sibling,d!==null){d.return=a.return,Oe=d;break}Oe=a.return}}function Hp(t){for(;Oe!==null;){var a=Oe;if(a===t){Oe=null;break}var d=a.sibling;if(d!==null){d.return=a.return,Oe=d;break}Oe=a.return}}function Up(t){for(;Oe!==null;){var a=Oe;try{switch(a.tag){case 0:case 11:case 15:var d=a.return;try{Lo(4,a)}catch(ae){Ht(a,d,ae)}break;case 1:var x=a.stateNode;if(typeof x.componentDidMount=="function"){var S=a.return;try{x.componentDidMount()}catch(ae){Ht(a,S,ae)}}var E=a.return;try{ud(a)}catch(ae){Ht(a,E,ae)}break;case 5:var K=a.return;try{ud(a)}catch(ae){Ht(a,K,ae)}}}catch(ae){Ht(a,a.return,ae)}if(a===t){Oe=null;break}var ne=a.sibling;if(ne!==null){ne.return=a.return,Oe=ne;break}Oe=a.return}}var Q2=Math.ceil,zo=T.ReactCurrentDispatcher,pd=T.ReactCurrentOwner,ss=T.ReactCurrentBatchConfig,pt=0,cn=null,qt=null,mn=0,Qn=0,ja=ir(0),Jt=0,_i=null,zr=0,Oo=0,md=0,Ei=null,Rn=null,gd=0,Na=1/0,Hs=null,Vo=!1,xd=null,fr=null,$o=!1,hr=null,Ho=0,Ai=0,bd=null,Uo=-1,Wo=0;function Tn(){return(pt&6)!==0?ft():Uo!==-1?Uo:Uo=ft()}function pr(t){return(t.mode&1)===0?1:(pt&2)!==0&&mn!==0?mn&-mn:I2.transition!==null?(Wo===0&&(Wo=no()),Wo):(t=vt,t!==0||(t=window.event,t=t===void 0?16:Kf(t.type)),t)}function xs(t,a,d,x){if(50<Ai)throw Ai=0,bd=null,Error(s(185));nr(t,d,x),((pt&2)===0||t!==cn)&&(t===cn&&((pt&2)===0&&(Oo|=d),Jt===4&&mr(t,mn)),Bn(t,x),d===1&&pt===0&&(a.mode&1)===0&&(Na=ft()+500,vo&&lr()))}function Bn(t,a){var d=t.callbackNode;to(t,a);var x=aa(t,t===cn?mn:0);if(x===0)d!==null&&Nr(d),t.callbackNode=null,t.callbackPriority=0;else if(a=x&-x,t.callbackPriority!==a){if(d!=null&&Nr(d),a===1)t.tag===0?M2(Kp.bind(null,t)):Dh(Kp.bind(null,t)),A2(function(){(pt&6)===0&&lr()}),d=null;else{switch(we(x)){case 1:d=ti;break;case 4:d=eo;break;case 16:d=_r;break;case 536870912:d=Er;break;default:d=_r}d=em(d,Wp.bind(null,t))}t.callbackPriority=a,t.callbackNode=d}}function Wp(t,a){if(Uo=-1,Wo=0,(pt&6)!==0)throw Error(s(327));var d=t.callbackNode;if(_a()&&t.callbackNode!==d)return null;var x=aa(t,t===cn?mn:0);if(x===0)return null;if((x&30)!==0||(x&t.expiredLanes)!==0||a)a=Ko(t,x);else{a=x;var S=pt;pt|=2;var E=qp();(cn!==t||mn!==a)&&(Hs=null,Na=ft()+500,Vr(t,a));do try{ev();break}catch(ne){Gp(t,ne)}while(!0);Rc(),zo.current=E,pt=S,qt!==null?a=0:(cn=null,mn=0,a=Jt)}if(a!==0){if(a===2&&(S=ni(t),S!==0&&(x=S,a=vd(t,S))),a===1)throw d=_i,Vr(t,0),mr(t,x),Bn(t,ft()),d;if(a===6)mr(t,x);else{if(S=t.current.alternate,(x&30)===0&&!X2(S)&&(a=Ko(t,x),a===2&&(E=ni(t),E!==0&&(x=E,a=vd(t,E))),a===1))throw d=_i,Vr(t,0),mr(t,x),Bn(t,ft()),d;switch(t.finishedWork=S,t.finishedLanes=x,a){case 0:case 1:throw Error(s(345));case 2:$r(t,Rn,Hs);break;case 3:if(mr(t,x),(x&130023424)===x&&(a=gd+500-ft(),10<a)){if(aa(t,0)!==0)break;if(S=t.suspendedLanes,(S&x)!==x){Tn(),t.pingedLanes|=t.suspendedLanes&S;break}t.timeoutHandle=jc($r.bind(null,t,Rn,Hs),a);break}$r(t,Rn,Hs);break;case 4:if(mr(t,x),(x&4194240)===x)break;for(a=t.eventTimes,S=-1;0<x;){var K=31-Kn(x);E=1<<K,K=a[K],K>S&&(S=K),x&=~E}if(x=S,x=ft()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*Q2(x/1960))-x,10<x){t.timeoutHandle=jc($r.bind(null,t,Rn,Hs),x);break}$r(t,Rn,Hs);break;case 5:$r(t,Rn,Hs);break;default:throw Error(s(329))}}}return Bn(t,ft()),t.callbackNode===d?Wp.bind(null,t):null}function vd(t,a){var d=Ei;return t.current.memoizedState.isDehydrated&&(Vr(t,a).flags|=256),t=Ko(t,a),t!==2&&(a=Rn,Rn=d,a!==null&&yd(a)),t}function yd(t){Rn===null?Rn=t:Rn.push.apply(Rn,t)}function X2(t){for(var a=t;;){if(a.flags&16384){var d=a.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var x=0;x<d.length;x++){var S=d[x],E=S.getSnapshot;S=S.value;try{if(!fs(E(),S))return!1}catch{return!1}}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function mr(t,a){for(a&=~md,a&=~Oo,t.suspendedLanes|=a,t.pingedLanes&=~a,t=t.expirationTimes;0<a;){var d=31-Kn(a),x=1<<d;t[d]=-1,a&=~x}}function Kp(t){if((pt&6)!==0)throw Error(s(327));_a();var a=aa(t,0);if((a&1)===0)return Bn(t,ft()),null;var d=Ko(t,a);if(t.tag!==0&&d===2){var x=ni(t);x!==0&&(a=x,d=vd(t,x))}if(d===1)throw d=_i,Vr(t,0),mr(t,a),Bn(t,ft()),d;if(d===6)throw Error(s(345));return t.finishedWork=t.current.alternate,t.finishedLanes=a,$r(t,Rn,Hs),Bn(t,ft()),null}function wd(t,a){var d=pt;pt|=1;try{return t(a)}finally{pt=d,pt===0&&(Na=ft()+500,vo&&lr())}}function Or(t){hr!==null&&hr.tag===0&&(pt&6)===0&&_a();var a=pt;pt|=1;var d=ss.transition,x=vt;try{if(ss.transition=null,vt=1,t)return t()}finally{vt=x,ss.transition=d,pt=a,(pt&6)===0&&lr()}}function kd(){Qn=ja.current,Pt(ja)}function Vr(t,a){t.finishedWork=null,t.finishedLanes=0;var d=t.timeoutHandle;if(d!==-1&&(t.timeoutHandle=-1,E2(d)),qt!==null)for(d=qt.return;d!==null;){var x=d;switch(Dc(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&xo();break;case 3:ka(),Pt(Mn),Pt(vn),Uc();break;case 5:$c(x);break;case 4:ka();break;case 13:Pt(Ot);break;case 19:Pt(Ot);break;case 10:Bc(x.type._context);break;case 22:case 23:kd()}d=d.return}if(cn=t,qt=t=gr(t.current,null),mn=Qn=a,Jt=0,_i=null,md=Oo=zr=0,Rn=Ei=null,Rr!==null){for(a=0;a<Rr.length;a++)if(d=Rr[a],x=d.interleaved,x!==null){d.interleaved=null;var S=x.next,E=d.pending;if(E!==null){var K=E.next;E.next=S,x.next=K}d.pending=x}Rr=null}return t}function Gp(t,a){do{var d=qt;try{if(Rc(),Ao.current=Mo,To){for(var x=Vt.memoizedState;x!==null;){var S=x.queue;S!==null&&(S.pending=null),x=x.next}To=!1}if(Lr=0,ln=Xt=Vt=null,wi=!1,ki=0,pd.current=null,d===null||d.return===null){Jt=1,_i=a,qt=null;break}e:{var E=t,K=d.return,ne=d,ae=a;if(a=mn,ne.flags|=32768,ae!==null&&typeof ae=="object"&&typeof ae.then=="function"){var xe=ae,Ae=ne,De=Ae.tag;if((Ae.mode&1)===0&&(De===0||De===11||De===15)){var Ee=Ae.alternate;Ee?(Ae.updateQueue=Ee.updateQueue,Ae.memoizedState=Ee.memoizedState,Ae.lanes=Ee.lanes):(Ae.updateQueue=null,Ae.memoizedState=null)}var Le=bp(K);if(Le!==null){Le.flags&=-257,vp(Le,K,ne,E,a),Le.mode&1&&xp(E,xe,a),a=Le,ae=xe;var Ve=a.updateQueue;if(Ve===null){var Ue=new Set;Ue.add(ae),a.updateQueue=Ue}else Ve.add(ae);break e}else{if((a&1)===0){xp(E,xe,a),Sd();break e}ae=Error(s(426))}}else if(Rt&&ne.mode&1){var Gt=bp(K);if(Gt!==null){(Gt.flags&65536)===0&&(Gt.flags|=256),vp(Gt,K,ne,E,a),Ic(Sa(ae,ne));break e}}E=ae=Sa(ae,ne),Jt!==4&&(Jt=2),Ei===null?Ei=[E]:Ei.push(E),E=K;do{switch(E.tag){case 3:E.flags|=65536,a&=-a,E.lanes|=a;var pe=mp(E,ae,a);$h(E,pe);break e;case 1:ne=ae;var oe=E.type,ge=E.stateNode;if((E.flags&128)===0&&(typeof oe.getDerivedStateFromError=="function"||ge!==null&&typeof ge.componentDidCatch=="function"&&(fr===null||!fr.has(ge)))){E.flags|=65536,a&=-a,E.lanes|=a;var Fe=gp(E,ne,a);$h(E,Fe);break e}}E=E.return}while(E!==null)}Yp(d)}catch(Ke){a=Ke,qt===d&&d!==null&&(qt=d=d.return);continue}break}while(!0)}function qp(){var t=zo.current;return zo.current=Mo,t===null?Mo:t}function Sd(){(Jt===0||Jt===3||Jt===2)&&(Jt=4),cn===null||(zr&268435455)===0&&(Oo&268435455)===0||mr(cn,mn)}function Ko(t,a){var d=pt;pt|=2;var x=qp();(cn!==t||mn!==a)&&(Hs=null,Vr(t,a));do try{J2();break}catch(S){Gp(t,S)}while(!0);if(Rc(),pt=d,zo.current=x,qt!==null)throw Error(s(261));return cn=null,mn=0,Jt}function J2(){for(;qt!==null;)Zp(qt)}function ev(){for(;qt!==null&&!_n();)Zp(qt)}function Zp(t){var a=Jp(t.alternate,t,Qn);t.memoizedProps=t.pendingProps,a===null?Yp(t):qt=a,pd.current=null}function Yp(t){var a=t;do{var d=a.alternate;if(t=a.return,(a.flags&32768)===0){if(d=K2(d,a,Qn),d!==null){qt=d;return}}else{if(d=G2(d,a),d!==null){d.flags&=32767,qt=d;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Jt=6,qt=null;return}}if(a=a.sibling,a!==null){qt=a;return}qt=a=t}while(a!==null);Jt===0&&(Jt=5)}function $r(t,a,d){var x=vt,S=ss.transition;try{ss.transition=null,vt=1,tv(t,a,d,x)}finally{ss.transition=S,vt=x}return null}function tv(t,a,d,x){do _a();while(hr!==null);if((pt&6)!==0)throw Error(s(327));d=t.finishedWork;var S=t.finishedLanes;if(d===null)return null;if(t.finishedWork=null,t.finishedLanes=0,d===t.current)throw Error(s(177));t.callbackNode=null,t.callbackPriority=0;var E=d.lanes|d.childLanes;if(tc(t,E),t===cn&&(qt=cn=null,mn=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||$o||($o=!0,em(_r,function(){return _a(),null})),E=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||E){E=ss.transition,ss.transition=null;var K=vt;vt=1;var ne=pt;pt|=4,pd.current=null,Z2(t,d),Op(d,t),w2(Sc),ia=!!kc,Sc=kc=null,t.current=d,Y2(d),Ql(),pt=ne,vt=K,ss.transition=E}else t.current=d;if($o&&($o=!1,hr=t,Ho=S),E=t.pendingLanes,E===0&&(fr=null),Xl(d.stateNode),Bn(t,ft()),a!==null)for(x=t.onRecoverableError,d=0;d<a.length;d++)S=a[d],x(S.value,{componentStack:S.stack,digest:S.digest});if(Vo)throw Vo=!1,t=xd,xd=null,t;return(Ho&1)!==0&&t.tag!==0&&_a(),E=t.pendingLanes,(E&1)!==0?t===bd?Ai++:(Ai=0,bd=t):Ai=0,lr(),null}function _a(){if(hr!==null){var t=we(Ho),a=ss.transition,d=vt;try{if(ss.transition=null,vt=16>t?16:t,hr===null)var x=!1;else{if(t=hr,hr=null,Ho=0,(pt&6)!==0)throw Error(s(331));var S=pt;for(pt|=4,Oe=t.current;Oe!==null;){var E=Oe,K=E.child;if((Oe.flags&16)!==0){var ne=E.deletions;if(ne!==null){for(var ae=0;ae<ne.length;ae++){var xe=ne[ae];for(Oe=xe;Oe!==null;){var Ae=Oe;switch(Ae.tag){case 0:case 11:case 15:Ni(8,Ae,E)}var De=Ae.child;if(De!==null)De.return=Ae,Oe=De;else for(;Oe!==null;){Ae=Oe;var Ee=Ae.sibling,Le=Ae.return;if(Pp(Ae),Ae===xe){Oe=null;break}if(Ee!==null){Ee.return=Le,Oe=Ee;break}Oe=Le}}}var Ve=E.alternate;if(Ve!==null){var Ue=Ve.child;if(Ue!==null){Ve.child=null;do{var Gt=Ue.sibling;Ue.sibling=null,Ue=Gt}while(Ue!==null)}}Oe=E}}if((E.subtreeFlags&2064)!==0&&K!==null)K.return=E,Oe=K;else e:for(;Oe!==null;){if(E=Oe,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:Ni(9,E,E.return)}var pe=E.sibling;if(pe!==null){pe.return=E.return,Oe=pe;break e}Oe=E.return}}var oe=t.current;for(Oe=oe;Oe!==null;){K=Oe;var ge=K.child;if((K.subtreeFlags&2064)!==0&&ge!==null)ge.return=K,Oe=ge;else e:for(K=oe;Oe!==null;){if(ne=Oe,(ne.flags&2048)!==0)try{switch(ne.tag){case 0:case 11:case 15:Lo(9,ne)}}catch(Ke){Ht(ne,ne.return,Ke)}if(ne===K){Oe=null;break e}var Fe=ne.sibling;if(Fe!==null){Fe.return=ne.return,Oe=Fe;break e}Oe=ne.return}}if(pt=S,lr(),Xn&&typeof Xn.onPostCommitFiberRoot=="function")try{Xn.onPostCommitFiberRoot(Ar,t)}catch{}x=!0}return x}finally{vt=d,ss.transition=a}}return!1}function Qp(t,a,d){a=Sa(d,a),a=mp(t,a,1),t=dr(t,a,1),a=Tn(),t!==null&&(nr(t,1,a),Bn(t,a))}function Ht(t,a,d){if(t.tag===3)Qp(t,t,d);else for(;a!==null;){if(a.tag===3){Qp(a,t,d);break}else if(a.tag===1){var x=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(fr===null||!fr.has(x))){t=Sa(d,t),t=gp(a,t,1),a=dr(a,t,1),t=Tn(),a!==null&&(nr(a,1,t),Bn(a,t));break}}a=a.return}}function nv(t,a,d){var x=t.pingCache;x!==null&&x.delete(a),a=Tn(),t.pingedLanes|=t.suspendedLanes&d,cn===t&&(mn&d)===d&&(Jt===4||Jt===3&&(mn&130023424)===mn&&500>ft()-gd?Vr(t,0):md|=d),Bn(t,a)}function Xp(t,a){a===0&&((t.mode&1)===0?a=1:(a=Tr,Tr<<=1,(Tr&130023424)===0&&(Tr=4194304)));var d=Tn();t=Os(t,a),t!==null&&(nr(t,a,d),Bn(t,d))}function sv(t){var a=t.memoizedState,d=0;a!==null&&(d=a.retryLane),Xp(t,d)}function rv(t,a){var d=0;switch(t.tag){case 13:var x=t.stateNode,S=t.memoizedState;S!==null&&(d=S.retryLane);break;case 19:x=t.stateNode;break;default:throw Error(s(314))}x!==null&&x.delete(a),Xp(t,d)}var Jp;Jp=function(t,a,d){if(t!==null)if(t.memoizedProps!==a.pendingProps||Mn.current)Pn=!0;else{if((t.lanes&d)===0&&(a.flags&128)===0)return Pn=!1,W2(t,a,d);Pn=(t.flags&131072)!==0}else Pn=!1,Rt&&(a.flags&1048576)!==0&&Fh(a,wo,a.index);switch(a.lanes=0,a.tag){case 2:var x=a.type;Ro(t,a),t=a.pendingProps;var S=ma(a,vn.current);wa(a,d),S=Gc(null,a,x,t,S,d);var E=qc();return a.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,In(x)?(E=!0,bo(a)):E=!1,a.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,Oc(a),S.updater=Io,a.stateNode=S,S._reactInternals=a,ed(a,x,t,d),a=rd(null,a,x,!0,E,d)):(a.tag=0,Rt&&E&&Tc(a),An(null,a,S,d),a=a.child),a;case 16:x=a.elementType;e:{switch(Ro(t,a),t=a.pendingProps,S=x._init,x=S(x._payload),a.type=x,S=a.tag=iv(x),t=ps(x,t),S){case 0:a=sd(null,a,x,t,d);break e;case 1:a=jp(null,a,x,t,d);break e;case 11:a=yp(null,a,x,t,d);break e;case 14:a=wp(null,a,x,ps(x.type,t),d);break e}throw Error(s(306,x,""))}return a;case 0:return x=a.type,S=a.pendingProps,S=a.elementType===x?S:ps(x,S),sd(t,a,x,S,d);case 1:return x=a.type,S=a.pendingProps,S=a.elementType===x?S:ps(x,S),jp(t,a,x,S,d);case 3:e:{if(Np(a),t===null)throw Error(s(387));x=a.pendingProps,E=a.memoizedState,S=E.element,Vh(t,a),_o(a,x,null,d);var K=a.memoizedState;if(x=K.element,E.isDehydrated)if(E={element:x,isDehydrated:!1,cache:K.cache,pendingSuspenseBoundaries:K.pendingSuspenseBoundaries,transitions:K.transitions},a.updateQueue.baseState=E,a.memoizedState=E,a.flags&256){S=Sa(Error(s(423)),a),a=_p(t,a,x,d,S);break e}else if(x!==S){S=Sa(Error(s(424)),a),a=_p(t,a,x,d,S);break e}else for(Yn=ar(a.stateNode.containerInfo.firstChild),Zn=a,Rt=!0,hs=null,d=zh(a,null,x,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(ba(),x===S){a=$s(t,a,d);break e}An(t,a,x,d)}a=a.child}return a;case 5:return Uh(a),t===null&&Mc(a),x=a.type,S=a.pendingProps,E=t!==null?t.memoizedProps:null,K=S.children,Cc(x,S)?K=null:E!==null&&Cc(x,E)&&(a.flags|=32),Cp(t,a),An(t,a,K,d),a.child;case 6:return t===null&&Mc(a),null;case 13:return Ep(t,a,d);case 4:return Vc(a,a.stateNode.containerInfo),x=a.pendingProps,t===null?a.child=va(a,null,x,d):An(t,a,x,d),a.child;case 11:return x=a.type,S=a.pendingProps,S=a.elementType===x?S:ps(x,S),yp(t,a,x,S,d);case 7:return An(t,a,a.pendingProps,d),a.child;case 8:return An(t,a,a.pendingProps.children,d),a.child;case 12:return An(t,a,a.pendingProps.children,d),a.child;case 10:e:{if(x=a.type._context,S=a.pendingProps,E=a.memoizedProps,K=S.value,Tt(Co,x._currentValue),x._currentValue=K,E!==null)if(fs(E.value,K)){if(E.children===S.children&&!Mn.current){a=$s(t,a,d);break e}}else for(E=a.child,E!==null&&(E.return=a);E!==null;){var ne=E.dependencies;if(ne!==null){K=E.child;for(var ae=ne.firstContext;ae!==null;){if(ae.context===x){if(E.tag===1){ae=Vs(-1,d&-d),ae.tag=2;var xe=E.updateQueue;if(xe!==null){xe=xe.shared;var Ae=xe.pending;Ae===null?ae.next=ae:(ae.next=Ae.next,Ae.next=ae),xe.pending=ae}}E.lanes|=d,ae=E.alternate,ae!==null&&(ae.lanes|=d),Lc(E.return,d,a),ne.lanes|=d;break}ae=ae.next}}else if(E.tag===10)K=E.type===a.type?null:E.child;else if(E.tag===18){if(K=E.return,K===null)throw Error(s(341));K.lanes|=d,ne=K.alternate,ne!==null&&(ne.lanes|=d),Lc(K,d,a),K=E.sibling}else K=E.child;if(K!==null)K.return=E;else for(K=E;K!==null;){if(K===a){K=null;break}if(E=K.sibling,E!==null){E.return=K.return,K=E;break}K=K.return}E=K}An(t,a,S.children,d),a=a.child}return a;case 9:return S=a.type,x=a.pendingProps.children,wa(a,d),S=ts(S),x=x(S),a.flags|=1,An(t,a,x,d),a.child;case 14:return x=a.type,S=ps(x,a.pendingProps),S=ps(x.type,S),wp(t,a,x,S,d);case 15:return kp(t,a,a.type,a.pendingProps,d);case 17:return x=a.type,S=a.pendingProps,S=a.elementType===x?S:ps(x,S),Ro(t,a),a.tag=1,In(x)?(t=!0,bo(a)):t=!1,wa(a,d),hp(a,x,S),ed(a,x,S,d),rd(null,a,x,!0,t,d);case 19:return Tp(t,a,d);case 22:return Sp(t,a,d)}throw Error(s(156,a.tag))};function em(t,a){return er(t,a)}function av(t,a,d,x){this.tag=t,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rs(t,a,d,x){return new av(t,a,d,x)}function Cd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function iv(t){if(typeof t=="function")return Cd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===_)return 11;if(t===$)return 14}return 2}function gr(t,a){var d=t.alternate;return d===null?(d=rs(t.tag,a,t.key,t.mode),d.elementType=t.elementType,d.type=t.type,d.stateNode=t.stateNode,d.alternate=t,t.alternate=d):(d.pendingProps=a,d.type=t.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=t.flags&14680064,d.childLanes=t.childLanes,d.lanes=t.lanes,d.child=t.child,d.memoizedProps=t.memoizedProps,d.memoizedState=t.memoizedState,d.updateQueue=t.updateQueue,a=t.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=t.sibling,d.index=t.index,d.ref=t.ref,d}function Go(t,a,d,x,S,E){var K=2;if(x=t,typeof t=="function")Cd(t)&&(K=1);else if(typeof t=="string")K=5;else e:switch(t){case U:return Hr(d.children,S,E,a);case D:K=8,S|=8;break;case A:return t=rs(12,d,a,S|2),t.elementType=A,t.lanes=E,t;case L:return t=rs(13,d,a,S),t.elementType=L,t.lanes=E,t;case k:return t=rs(19,d,a,S),t.elementType=k,t.lanes=E,t;case I:return qo(d,S,E,a);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case H:K=10;break e;case Y:K=9;break e;case _:K=11;break e;case $:K=14;break e;case P:K=16,x=null;break e}throw Error(s(130,t==null?t:typeof t,""))}return a=rs(K,d,a,S),a.elementType=t,a.type=x,a.lanes=E,a}function Hr(t,a,d,x){return t=rs(7,t,x,a),t.lanes=d,t}function qo(t,a,d,x){return t=rs(22,t,x,a),t.elementType=I,t.lanes=d,t.stateNode={isHidden:!1},t}function jd(t,a,d){return t=rs(6,t,null,a),t.lanes=d,t}function Nd(t,a,d){return a=rs(4,t.children!==null?t.children:[],t.key,a),a.lanes=d,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}function ov(t,a,d,x,S){this.tag=a,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=si(0),this.expirationTimes=si(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=si(0),this.identifierPrefix=x,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function _d(t,a,d,x,S,E,K,ne,ae){return t=new ov(t,a,d,ne,ae),a===1?(a=1,E===!0&&(a|=8)):a=0,E=rs(3,null,null,a),t.current=E,E.stateNode=t,E.memoizedState={element:x,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oc(E),t}function lv(t,a,d){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:x==null?null:""+x,children:t,containerInfo:a,implementation:d}}function tm(t){if(!t)return or;t=t._reactInternals;e:{if(Wn(t)!==t||t.tag!==1)throw Error(s(170));var a=t;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(In(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(s(171))}if(t.tag===1){var d=t.type;if(In(d))return Ah(t,d,a)}return a}function nm(t,a,d,x,S,E,K,ne,ae){return t=_d(d,x,!0,t,S,E,K,ne,ae),t.context=tm(null),d=t.current,x=Tn(),S=pr(d),E=Vs(x,S),E.callback=a??null,dr(d,E,S),t.current.lanes=S,nr(t,S,x),Bn(t,x),t}function Zo(t,a,d,x){var S=a.current,E=Tn(),K=pr(S);return d=tm(d),a.context===null?a.context=d:a.pendingContext=d,a=Vs(E,K),a.payload={element:t},x=x===void 0?null:x,x!==null&&(a.callback=x),t=dr(S,a,K),t!==null&&(xs(t,S,K,E),No(t,S,K)),K}function Yo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function sm(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var d=t.retryLane;t.retryLane=d!==0&&d<a?d:a}}function Ed(t,a){sm(t,a),(t=t.alternate)&&sm(t,a)}function cv(){return null}var rm=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ad(t){this._internalRoot=t}Qo.prototype.render=Ad.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(s(409));Zo(t,a,null,null)},Qo.prototype.unmount=Ad.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;Or(function(){Zo(null,t,null,null)}),a[Rs]=null}};function Qo(t){this._internalRoot=t}Qo.prototype.unstable_scheduleHydration=function(t){if(t){var a=nt();t={blockedOn:null,target:t,priority:a};for(var d=0;d<Et.length&&a!==0&&a<Et[d].priority;d++);Et.splice(d,0,t),d===0&&rt(t)}};function Td(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function am(){}function dv(t,a,d,x,S){if(S){if(typeof x=="function"){var E=x;x=function(){var xe=Yo(K);E.call(xe)}}var K=nm(a,x,t,0,null,!1,!1,"",am);return t._reactRootContainer=K,t[Rs]=K.current,hi(t.nodeType===8?t.parentNode:t),Or(),K}for(;S=t.lastChild;)t.removeChild(S);if(typeof x=="function"){var ne=x;x=function(){var xe=Yo(ae);ne.call(xe)}}var ae=_d(t,0,!1,null,null,!1,!1,"",am);return t._reactRootContainer=ae,t[Rs]=ae.current,hi(t.nodeType===8?t.parentNode:t),Or(function(){Zo(a,ae,d,x)}),ae}function Jo(t,a,d,x,S){var E=d._reactRootContainer;if(E){var K=E;if(typeof S=="function"){var ne=S;S=function(){var ae=Yo(K);ne.call(ae)}}Zo(a,K,t,S)}else K=dv(d,a,t,S,x);return Yo(K)}Se=function(t){switch(t.tag){case 3:var a=t.stateNode;if(a.current.memoizedState.isDehydrated){var d=Dr(a.pendingLanes);d!==0&&(ri(a,d|1),Bn(a,ft()),(pt&6)===0&&(Na=ft()+500,lr()))}break;case 13:Or(function(){var x=Os(t,1);if(x!==null){var S=Tn();xs(x,t,1,S)}}),Ed(t,1)}},de=function(t){if(t.tag===13){var a=Os(t,134217728);if(a!==null){var d=Tn();xs(a,t,134217728,d)}Ed(t,134217728)}},dt=function(t){if(t.tag===13){var a=pr(t),d=Os(t,a);if(d!==null){var x=Tn();xs(d,t,a,x)}Ed(t,a)}},nt=function(){return vt},tt=function(t,a){var d=vt;try{return vt=t,a()}finally{vt=d}},sn=function(t,a,d){switch(a){case"input":if(J(t,d),a=d.name,d.type==="radio"&&a!=null){for(d=t;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<d.length;a++){var x=d[a];if(x!==t&&x.form===t.form){var S=go(x);if(!S)throw Error(s(90));Ce(x),J(x,S)}}}break;case"textarea":Ne(t,d);break;case"select":a=d.value,a!=null&&ve(t,!!d.multiple,a,!1)}},Nt=wd,wt=Or;var uv={usingClientEntryPoint:!1,Events:[gi,ha,go,Ge,St,wd]},Ti={findFiberByHostInstance:Fr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fv={bundleType:Ti.bundleType,version:Ti.version,rendererPackageName:Ti.rendererPackageName,rendererConfig:Ti.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Xs(t),t===null?null:t.stateNode},findFiberByHostInstance:Ti.findFiberByHostInstance||cv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var el=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!el.isDisabled&&el.supportsFiber)try{Ar=el.inject(fv),Xn=el}catch{}}return Ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uv,Ln.createPortal=function(t,a){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Td(a))throw Error(s(200));return lv(t,a,null,d)},Ln.createRoot=function(t,a){if(!Td(t))throw Error(s(299));var d=!1,x="",S=rm;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(x=a.identifierPrefix),a.onRecoverableError!==void 0&&(S=a.onRecoverableError)),a=_d(t,1,!1,null,null,d,!1,x,S),t[Rs]=a.current,hi(t.nodeType===8?t.parentNode:t),new Ad(a)},Ln.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=Xs(a),t=t===null?null:t.stateNode,t},Ln.flushSync=function(t){return Or(t)},Ln.hydrate=function(t,a,d){if(!Xo(a))throw Error(s(200));return Jo(null,t,a,!0,d)},Ln.hydrateRoot=function(t,a,d){if(!Td(t))throw Error(s(405));var x=d!=null&&d.hydratedSources||null,S=!1,E="",K=rm;if(d!=null&&(d.unstable_strictMode===!0&&(S=!0),d.identifierPrefix!==void 0&&(E=d.identifierPrefix),d.onRecoverableError!==void 0&&(K=d.onRecoverableError)),a=nm(a,null,t,1,d??null,S,!1,E,K),t[Rs]=a.current,hi(t),x)for(t=0;t<x.length;t++)d=x[t],S=d._getVersion,S=S(d._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[d,S]:a.mutableSourceEagerHydrationData.push(d,S);return new Qo(a)},Ln.render=function(t,a,d){if(!Xo(a))throw Error(s(200));return Jo(null,t,a,!1,d)},Ln.unmountComponentAtNode=function(t){if(!Xo(t))throw Error(s(40));return t._reactRootContainer?(Or(function(){Jo(null,null,t,!1,function(){t._reactRootContainer=null,t[Rs]=null})}),!0):!1},Ln.unstable_batchedUpdates=wd,Ln.unstable_renderSubtreeIntoContainer=function(t,a,d,x){if(!Xo(d))throw Error(s(200));if(t==null||t._reactInternals===void 0)throw Error(s(38));return Jo(t,a,d,!1,x)},Ln.version="18.3.1-next-f1338f8080-20240426",Ln}var hm;function wg(){if(hm)return Md.exports;hm=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Md.exports=yv(),Md.exports}var pm;function wv(){if(pm)return nl;pm=1;var e=wg();return nl.createRoot=e.createRoot,nl.hydrateRoot=e.hydrateRoot,nl}var kv=wv(),N=Ku();const Ie=Ll(N),kg=pv({__proto__:null,default:Ie},[N]),Gu=N.createContext({});function qu(e){const n=N.useRef(null);return n.current===null&&(n.current=e()),n.current}const Zu=typeof window<"u",Sg=Zu?N.useLayoutEffect:N.useEffect,zl=N.createContext(null);function Yu(e,n){e.indexOf(n)===-1&&e.push(n)}function Qu(e,n){const s=e.indexOf(n);s>-1&&e.splice(s,1)}const Ks=(e,n,s)=>s>n?n:s<e?e:s;let Xu=()=>{};const Gs={},Cg=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function jg(e){return typeof e=="object"&&e!==null}const Ng=e=>/^0[^.\s]+$/u.test(e);function Ju(e){let n;return()=>(n===void 0&&(n=e()),n)}const ls=e=>e,Sv=(e,n)=>s=>n(e(s)),Ki=(...e)=>e.reduce(Sv),zi=(e,n,s)=>{const i=n-e;return i===0?1:(s-e)/i};class ef{constructor(){this.subscriptions=[]}add(n){return Yu(this.subscriptions,n),()=>Qu(this.subscriptions,n)}notify(n,s,i){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](n,s,i);else for(let l=0;l<o;l++){const c=this.subscriptions[l];c&&c(n,s,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Fs=e=>e*1e3,os=e=>e/1e3;function _g(e,n){return n?e*(1e3/n):0}const Eg=(e,n,s)=>(((1-3*s+3*n)*e+(3*s-6*n))*e+3*n)*e,Cv=1e-7,jv=12;function Nv(e,n,s,i,o){let l,c,u=0;do c=n+(s-n)/2,l=Eg(c,i,o)-e,l>0?s=c:n=c;while(Math.abs(l)>Cv&&++u<jv);return c}function Gi(e,n,s,i){if(e===n&&s===i)return ls;const o=l=>Nv(l,0,1,e,s);return l=>l===0||l===1?l:Eg(o(l),n,i)}const Ag=e=>n=>n<=.5?e(2*n)/2:(2-e(2*(1-n)))/2,Tg=e=>n=>1-e(1-n),Dg=Gi(.33,1.53,.69,.99),tf=Tg(Dg),Fg=Ag(tf),Mg=e=>(e*=2)<1?.5*tf(e):.5*(2-Math.pow(2,-10*(e-1))),nf=e=>1-Math.sin(Math.acos(e)),Ig=Tg(nf),Pg=Ag(nf),_v=Gi(.42,0,1,1),Ev=Gi(0,0,.58,1),Rg=Gi(.42,0,.58,1),Av=e=>Array.isArray(e)&&typeof e[0]!="number",Bg=e=>Array.isArray(e)&&typeof e[0]=="number",Tv={linear:ls,easeIn:_v,easeInOut:Rg,easeOut:Ev,circIn:nf,circInOut:Pg,circOut:Ig,backIn:tf,backInOut:Fg,backOut:Dg,anticipate:Mg},Dv=e=>typeof e=="string",mm=e=>{if(Bg(e)){Xu(e.length===4);const[n,s,i,o]=e;return Gi(n,s,i,o)}else if(Dv(e))return Tv[e];return e},sl=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Fv(e,n){let s=new Set,i=new Set,o=!1,l=!1;const c=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function h(p){c.has(p)&&(g.schedule(p),e()),p(u)}const g={schedule:(p,f=!1,m=!1)=>{const y=m&&o?s:i;return f&&c.add(p),y.has(p)||y.add(p),p},cancel:p=>{i.delete(p),c.delete(p)},process:p=>{if(u=p,o){l=!0;return}o=!0,[s,i]=[i,s],s.forEach(h),s.clear(),o=!1,l&&(l=!1,g.process(p))}};return g}const Mv=40;function Lg(e,n){let s=!1,i=!0;const o={delta:0,timestamp:0,isProcessing:!1},l=()=>s=!0,c=sl.reduce((j,T)=>(j[T]=Fv(l),j),{}),{setup:u,read:h,resolveKeyframes:g,preUpdate:p,update:f,preRender:m,render:b,postRender:y}=c,v=()=>{const j=Gs.useManualTiming?o.timestamp:performance.now();s=!1,Gs.useManualTiming||(o.delta=i?1e3/60:Math.max(Math.min(j-o.timestamp,Mv),1)),o.timestamp=j,o.isProcessing=!0,u.process(o),h.process(o),g.process(o),p.process(o),f.process(o),m.process(o),b.process(o),y.process(o),o.isProcessing=!1,s&&n&&(i=!1,e(v))},C=()=>{s=!0,i=!0,o.isProcessing||e(v)};return{schedule:sl.reduce((j,T)=>{const z=c[T];return j[T]=(B,U=!1,D=!1)=>(s||C(),z.schedule(B,U,D)),j},{}),cancel:j=>{for(let T=0;T<sl.length;T++)c[sl[T]].cancel(j)},state:o,steps:c}}const{schedule:Bt,cancel:wr,state:gn,steps:Rd}=Lg(typeof requestAnimationFrame<"u"?requestAnimationFrame:ls,!0);let xl;function Iv(){xl=void 0}const Vn={now:()=>(xl===void 0&&Vn.set(gn.isProcessing||Gs.useManualTiming?gn.timestamp:performance.now()),xl),set:e=>{xl=e,queueMicrotask(Iv)}},zg=e=>n=>typeof n=="string"&&n.startsWith(e),Og=zg("--"),Pv=zg("var(--"),sf=e=>Pv(e)?Rv.test(e.split("/*")[0].trim()):!1,Rv=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ga={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Oi={...Ga,transform:e=>Ks(0,1,e)},rl={...Ga,default:1},Pi=e=>Math.round(e*1e5)/1e5,rf=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Bv(e){return e==null}const Lv=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,af=(e,n)=>s=>!!(typeof s=="string"&&Lv.test(s)&&s.startsWith(e)||n&&!Bv(s)&&Object.prototype.hasOwnProperty.call(s,n)),Vg=(e,n,s)=>i=>{if(typeof i!="string")return i;const[o,l,c,u]=i.match(rf);return{[e]:parseFloat(o),[n]:parseFloat(l),[s]:parseFloat(c),alpha:u!==void 0?parseFloat(u):1}},zv=e=>Ks(0,255,e),Bd={...Ga,transform:e=>Math.round(zv(e))},Gr={test:af("rgb","red"),parse:Vg("red","green","blue"),transform:({red:e,green:n,blue:s,alpha:i=1})=>"rgba("+Bd.transform(e)+", "+Bd.transform(n)+", "+Bd.transform(s)+", "+Pi(Oi.transform(i))+")"};function Ov(e){let n="",s="",i="",o="";return e.length>5?(n=e.substring(1,3),s=e.substring(3,5),i=e.substring(5,7),o=e.substring(7,9)):(n=e.substring(1,2),s=e.substring(2,3),i=e.substring(3,4),o=e.substring(4,5),n+=n,s+=s,i+=i,o+=o),{red:parseInt(n,16),green:parseInt(s,16),blue:parseInt(i,16),alpha:o?parseInt(o,16)/255:1}}const hu={test:af("#"),parse:Ov,transform:Gr.transform},qi=e=>({test:n=>typeof n=="string"&&n.endsWith(e)&&n.split(" ").length===1,parse:parseFloat,transform:n=>`${n}${e}`}),vr=qi("deg"),Ms=qi("%"),Qe=qi("px"),Vv=qi("vh"),$v=qi("vw"),gm={...Ms,parse:e=>Ms.parse(e)/100,transform:e=>Ms.transform(e*100)},Pa={test:af("hsl","hue"),parse:Vg("hue","saturation","lightness"),transform:({hue:e,saturation:n,lightness:s,alpha:i=1})=>"hsla("+Math.round(e)+", "+Ms.transform(Pi(n))+", "+Ms.transform(Pi(s))+", "+Pi(Oi.transform(i))+")"},Zt={test:e=>Gr.test(e)||hu.test(e)||Pa.test(e),parse:e=>Gr.test(e)?Gr.parse(e):Pa.test(e)?Pa.parse(e):hu.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Gr.transform(e):Pa.transform(e),getAnimatableNone:e=>{const n=Zt.parse(e);return n.alpha=0,Zt.transform(n)}},Hv=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Uv(e){return isNaN(e)&&typeof e=="string"&&(e.match(rf)?.length||0)+(e.match(Hv)?.length||0)>0}const $g="number",Hg="color",Wv="var",Kv="var(",xm="${}",Gv=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Vi(e){const n=e.toString(),s=[],i={color:[],number:[],var:[]},o=[];let l=0;const u=n.replace(Gv,h=>(Zt.test(h)?(i.color.push(l),o.push(Hg),s.push(Zt.parse(h))):h.startsWith(Kv)?(i.var.push(l),o.push(Wv),s.push(h)):(i.number.push(l),o.push($g),s.push(parseFloat(h))),++l,xm)).split(xm);return{values:s,split:u,indexes:i,types:o}}function Ug(e){return Vi(e).values}function Wg(e){const{split:n,types:s}=Vi(e),i=n.length;return o=>{let l="";for(let c=0;c<i;c++)if(l+=n[c],o[c]!==void 0){const u=s[c];u===$g?l+=Pi(o[c]):u===Hg?l+=Zt.transform(o[c]):l+=o[c]}return l}}const qv=e=>typeof e=="number"?0:Zt.test(e)?Zt.getAnimatableNone(e):e;function Zv(e){const n=Ug(e);return Wg(e)(n.map(qv))}const kr={test:Uv,parse:Ug,createTransformer:Wg,getAnimatableNone:Zv};function Ld(e,n,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(n-e)*6*s:s<1/2?n:s<2/3?e+(n-e)*(2/3-s)*6:e}function Yv({hue:e,saturation:n,lightness:s,alpha:i}){e/=360,n/=100,s/=100;let o=0,l=0,c=0;if(!n)o=l=c=s;else{const u=s<.5?s*(1+n):s+n-s*n,h=2*s-u;o=Ld(h,u,e+1/3),l=Ld(h,u,e),c=Ld(h,u,e-1/3)}return{red:Math.round(o*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:i}}function jl(e,n){return s=>s>0?n:e}const $t=(e,n,s)=>e+(n-e)*s,zd=(e,n,s)=>{const i=e*e,o=s*(n*n-i)+i;return o<0?0:Math.sqrt(o)},Qv=[hu,Gr,Pa],Xv=e=>Qv.find(n=>n.test(e));function bm(e){const n=Xv(e);if(!n)return!1;let s=n.parse(e);return n===Pa&&(s=Yv(s)),s}const vm=(e,n)=>{const s=bm(e),i=bm(n);if(!s||!i)return jl(e,n);const o={...s};return l=>(o.red=zd(s.red,i.red,l),o.green=zd(s.green,i.green,l),o.blue=zd(s.blue,i.blue,l),o.alpha=$t(s.alpha,i.alpha,l),Gr.transform(o))},pu=new Set(["none","hidden"]);function Jv(e,n){return pu.has(e)?s=>s<=0?e:n:s=>s>=1?n:e}function ey(e,n){return s=>$t(e,n,s)}function of(e){return typeof e=="number"?ey:typeof e=="string"?sf(e)?jl:Zt.test(e)?vm:sy:Array.isArray(e)?Kg:typeof e=="object"?Zt.test(e)?vm:ty:jl}function Kg(e,n){const s=[...e],i=s.length,o=e.map((l,c)=>of(l)(l,n[c]));return l=>{for(let c=0;c<i;c++)s[c]=o[c](l);return s}}function ty(e,n){const s={...e,...n},i={};for(const o in s)e[o]!==void 0&&n[o]!==void 0&&(i[o]=of(e[o])(e[o],n[o]));return o=>{for(const l in i)s[l]=i[l](o);return s}}function ny(e,n){const s=[],i={color:0,var:0,number:0};for(let o=0;o<n.values.length;o++){const l=n.types[o],c=e.indexes[l][i[l]],u=e.values[c]??0;s[o]=u,i[l]++}return s}const sy=(e,n)=>{const s=kr.createTransformer(n),i=Vi(e),o=Vi(n);return i.indexes.var.length===o.indexes.var.length&&i.indexes.color.length===o.indexes.color.length&&i.indexes.number.length>=o.indexes.number.length?pu.has(e)&&!o.values.length||pu.has(n)&&!i.values.length?Jv(e,n):Ki(Kg(ny(i,o),o.values),s):jl(e,n)};function Gg(e,n,s){return typeof e=="number"&&typeof n=="number"&&typeof s=="number"?$t(e,n,s):of(e)(e,n)}const ry=e=>{const n=({timestamp:s})=>e(s);return{start:(s=!0)=>Bt.update(n,s),stop:()=>wr(n),now:()=>gn.isProcessing?gn.timestamp:Vn.now()}},qg=(e,n,s=10)=>{let i="";const o=Math.max(Math.round(n/s),2);for(let l=0;l<o;l++)i+=Math.round(e(l/(o-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Nl=2e4;function lf(e){let n=0;const s=50;let i=e.next(n);for(;!i.done&&n<Nl;)n+=s,i=e.next(n);return n>=Nl?1/0:n}function ay(e,n=100,s){const i=s({...e,keyframes:[0,n]}),o=Math.min(lf(i),Nl);return{type:"keyframes",ease:l=>i.next(o*l).value/n,duration:os(o)}}const iy=5;function Zg(e,n,s){const i=Math.max(n-iy,0);return _g(s-e(i),n-i)}const Ut={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Od=.001;function oy({duration:e=Ut.duration,bounce:n=Ut.bounce,velocity:s=Ut.velocity,mass:i=Ut.mass}){let o,l,c=1-n;c=Ks(Ut.minDamping,Ut.maxDamping,c),e=Ks(Ut.minDuration,Ut.maxDuration,os(e)),c<1?(o=g=>{const p=g*c,f=p*e,m=p-s,b=mu(g,c),y=Math.exp(-f);return Od-m/b*y},l=g=>{const f=g*c*e,m=f*s+s,b=Math.pow(c,2)*Math.pow(g,2)*e,y=Math.exp(-f),v=mu(Math.pow(g,2),c);return(-o(g)+Od>0?-1:1)*((m-b)*y)/v}):(o=g=>{const p=Math.exp(-g*e),f=(g-s)*e+1;return-Od+p*f},l=g=>{const p=Math.exp(-g*e),f=(s-g)*(e*e);return p*f});const u=5/e,h=cy(o,l,u);if(e=Fs(e),isNaN(h))return{stiffness:Ut.stiffness,damping:Ut.damping,duration:e};{const g=Math.pow(h,2)*i;return{stiffness:g,damping:c*2*Math.sqrt(i*g),duration:e}}}const ly=12;function cy(e,n,s){let i=s;for(let o=1;o<ly;o++)i=i-e(i)/n(i);return i}function mu(e,n){return e*Math.sqrt(1-n*n)}const dy=["duration","bounce"],uy=["stiffness","damping","mass"];function ym(e,n){return n.some(s=>e[s]!==void 0)}function fy(e){let n={velocity:Ut.velocity,stiffness:Ut.stiffness,damping:Ut.damping,mass:Ut.mass,isResolvedFromDuration:!1,...e};if(!ym(e,uy)&&ym(e,dy))if(e.visualDuration){const s=e.visualDuration,i=2*Math.PI/(s*1.2),o=i*i,l=2*Ks(.05,1,1-(e.bounce||0))*Math.sqrt(o);n={...n,mass:Ut.mass,stiffness:o,damping:l}}else{const s=oy(e);n={...n,...s,mass:Ut.mass},n.isResolvedFromDuration=!0}return n}function _l(e=Ut.visualDuration,n=Ut.bounce){const s=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:n}:e;let{restSpeed:i,restDelta:o}=s;const l=s.keyframes[0],c=s.keyframes[s.keyframes.length-1],u={done:!1,value:l},{stiffness:h,damping:g,mass:p,duration:f,velocity:m,isResolvedFromDuration:b}=fy({...s,velocity:-os(s.velocity||0)}),y=m||0,v=g/(2*Math.sqrt(h*p)),C=c-l,w=os(Math.sqrt(h/p)),F=Math.abs(C)<5;i||(i=F?Ut.restSpeed.granular:Ut.restSpeed.default),o||(o=F?Ut.restDelta.granular:Ut.restDelta.default);let j;if(v<1){const z=mu(w,v);j=B=>{const U=Math.exp(-v*w*B);return c-U*((y+v*w*C)/z*Math.sin(z*B)+C*Math.cos(z*B))}}else if(v===1)j=z=>c-Math.exp(-w*z)*(C+(y+w*C)*z);else{const z=w*Math.sqrt(v*v-1);j=B=>{const U=Math.exp(-v*w*B),D=Math.min(z*B,300);return c-U*((y+v*w*C)*Math.sinh(D)+z*C*Math.cosh(D))/z}}const T={calculatedDuration:b&&f||null,next:z=>{const B=j(z);if(b)u.done=z>=f;else{let U=z===0?y:0;v<1&&(U=z===0?Fs(y):Zg(j,z,B));const D=Math.abs(U)<=i,A=Math.abs(c-B)<=o;u.done=D&&A}return u.value=u.done?c:B,u},toString:()=>{const z=Math.min(lf(T),Nl),B=qg(U=>T.next(z*U).value,z,30);return z+"ms "+B},toTransition:()=>{}};return T}_l.applyToOptions=e=>{const n=ay(e,100,_l);return e.ease=n.ease,e.duration=Fs(n.duration),e.type="keyframes",e};function gu({keyframes:e,velocity:n=0,power:s=.8,timeConstant:i=325,bounceDamping:o=10,bounceStiffness:l=500,modifyTarget:c,min:u,max:h,restDelta:g=.5,restSpeed:p}){const f=e[0],m={done:!1,value:f},b=D=>u!==void 0&&D<u||h!==void 0&&D>h,y=D=>u===void 0?h:h===void 0||Math.abs(u-D)<Math.abs(h-D)?u:h;let v=s*n;const C=f+v,w=c===void 0?C:c(C);w!==C&&(v=w-f);const F=D=>-v*Math.exp(-D/i),j=D=>w+F(D),T=D=>{const A=F(D),H=j(D);m.done=Math.abs(A)<=g,m.value=m.done?w:H};let z,B;const U=D=>{b(m.value)&&(z=D,B=_l({keyframes:[m.value,y(m.value)],velocity:Zg(j,D,m.value),damping:o,stiffness:l,restDelta:g,restSpeed:p}))};return U(0),{calculatedDuration:null,next:D=>{let A=!1;return!B&&z===void 0&&(A=!0,T(D),U(D)),z!==void 0&&D>=z?B.next(D-z):(!A&&T(D),m)}}}function hy(e,n,s){const i=[],o=s||Gs.mix||Gg,l=e.length-1;for(let c=0;c<l;c++){let u=o(e[c],e[c+1]);if(n){const h=Array.isArray(n)?n[c]||ls:n;u=Ki(h,u)}i.push(u)}return i}function py(e,n,{clamp:s=!0,ease:i,mixer:o}={}){const l=e.length;if(Xu(l===n.length),l===1)return()=>n[0];if(l===2&&n[0]===n[1])return()=>n[1];const c=e[0]===e[1];e[0]>e[l-1]&&(e=[...e].reverse(),n=[...n].reverse());const u=hy(n,i,o),h=u.length,g=p=>{if(c&&p<e[0])return n[0];let f=0;if(h>1)for(;f<e.length-2&&!(p<e[f+1]);f++);const m=zi(e[f],e[f+1],p);return u[f](m)};return s?p=>g(Ks(e[0],e[l-1],p)):g}function my(e,n){const s=e[e.length-1];for(let i=1;i<=n;i++){const o=zi(0,n,i);e.push($t(s,1,o))}}function gy(e){const n=[0];return my(n,e.length-1),n}function xy(e,n){return e.map(s=>s*n)}function by(e,n){return e.map(()=>n||Rg).splice(0,e.length-1)}function Ri({duration:e=300,keyframes:n,times:s,ease:i="easeInOut"}){const o=Av(i)?i.map(mm):mm(i),l={done:!1,value:n[0]},c=xy(s&&s.length===n.length?s:gy(n),e),u=py(c,n,{ease:Array.isArray(o)?o:by(n,o)});return{calculatedDuration:e,next:h=>(l.value=u(h),l.done=h>=e,l)}}const vy=e=>e!==null;function cf(e,{repeat:n,repeatType:s="loop"},i,o=1){const l=e.filter(vy),u=o<0||n&&s!=="loop"&&n%2===1?0:l.length-1;return!u||i===void 0?l[u]:i}const yy={decay:gu,inertia:gu,tween:Ri,keyframes:Ri,spring:_l};function Yg(e){typeof e.type=="string"&&(e.type=yy[e.type])}class df{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(n=>{this.resolve=n})}notifyFinished(){this.resolve()}then(n,s){return this.finished.then(n,s)}}const wy=e=>e/100;class uf extends df{constructor(n){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:s}=this.options;s&&s.updatedAt!==Vn.now()&&this.tick(Vn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=n,this.initAnimation(),this.play(),n.autoplay===!1&&this.pause()}initAnimation(){const{options:n}=this;Yg(n);const{type:s=Ri,repeat:i=0,repeatDelay:o=0,repeatType:l,velocity:c=0}=n;let{keyframes:u}=n;const h=s||Ri;h!==Ri&&typeof u[0]!="number"&&(this.mixKeyframes=Ki(wy,Gg(u[0],u[1])),u=[0,100]);const g=h({...n,keyframes:u});l==="mirror"&&(this.mirroredGenerator=h({...n,keyframes:[...u].reverse(),velocity:-c})),g.calculatedDuration===null&&(g.calculatedDuration=lf(g));const{calculatedDuration:p}=g;this.calculatedDuration=p,this.resolvedDuration=p+o,this.totalDuration=this.resolvedDuration*(i+1)-o,this.generator=g}updateTime(n){const s=Math.round(n-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(n,s=!1){const{generator:i,totalDuration:o,mixKeyframes:l,mirroredGenerator:c,resolvedDuration:u,calculatedDuration:h}=this;if(this.startTime===null)return i.next(0);const{delay:g=0,keyframes:p,repeat:f,repeatType:m,repeatDelay:b,type:y,onUpdate:v,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,n):this.speed<0&&(this.startTime=Math.min(n-o/this.speed,this.startTime)),s?this.currentTime=n:this.updateTime(n);const w=this.currentTime-g*(this.playbackSpeed>=0?1:-1),F=this.playbackSpeed>=0?w<0:w>o;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let j=this.currentTime,T=i;if(f){const D=Math.min(this.currentTime,o)/u;let A=Math.floor(D),H=D%1;!H&&D>=1&&(H=1),H===1&&A--,A=Math.min(A,f+1),!!(A%2)&&(m==="reverse"?(H=1-H,b&&(H-=b/u)):m==="mirror"&&(T=c)),j=Ks(0,1,H)*u}const z=F?{done:!1,value:p[0]}:T.next(j);l&&(z.value=l(z.value));let{done:B}=z;!F&&h!==null&&(B=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const U=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&B);return U&&y!==gu&&(z.value=cf(p,this.options,C,this.speed)),v&&v(z.value),U&&this.finish(),z}then(n,s){return this.finished.then(n,s)}get duration(){return os(this.calculatedDuration)}get iterationDuration(){const{delay:n=0}=this.options||{};return this.duration+os(n)}get time(){return os(this.currentTime)}set time(n){n=Fs(n),this.currentTime=n,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=n:this.driver&&(this.startTime=this.driver.now()-n/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(n){this.updateTime(Vn.now());const s=this.playbackSpeed!==n;this.playbackSpeed=n,s&&(this.time=os(this.currentTime))}play(){if(this.isStopped)return;const{driver:n=ry,startTime:s}=this.options;this.driver||(this.driver=n(o=>this.tick(o))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=s??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Vn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(n){return this.startTime=0,this.tick(n,!0)}attachTimeline(n){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),n.observe(this)}}function ky(e){for(let n=1;n<e.length;n++)e[n]??(e[n]=e[n-1])}const qr=e=>e*180/Math.PI,xu=e=>{const n=qr(Math.atan2(e[1],e[0]));return bu(n)},Sy={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:xu,rotateZ:xu,skewX:e=>qr(Math.atan(e[1])),skewY:e=>qr(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},bu=e=>(e=e%360,e<0&&(e+=360),e),wm=xu,km=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Sm=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Cy={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:km,scaleY:Sm,scale:e=>(km(e)+Sm(e))/2,rotateX:e=>bu(qr(Math.atan2(e[6],e[5]))),rotateY:e=>bu(qr(Math.atan2(-e[2],e[0]))),rotateZ:wm,rotate:wm,skewX:e=>qr(Math.atan(e[4])),skewY:e=>qr(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function vu(e){return e.includes("scale")?1:0}function yu(e,n){if(!e||e==="none")return vu(n);const s=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,o;if(s)i=Cy,o=s;else{const u=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=Sy,o=u}if(!o)return vu(n);const l=i[n],c=o[1].split(",").map(Ny);return typeof l=="function"?l(c):c[l]}const jy=(e,n)=>{const{transform:s="none"}=getComputedStyle(e);return yu(s,n)};function Ny(e){return parseFloat(e.trim())}const qa=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Za=new Set(qa),Cm=e=>e===Ga||e===Qe,_y=new Set(["x","y","z"]),Ey=qa.filter(e=>!_y.has(e));function Ay(e){const n=[];return Ey.forEach(s=>{const i=e.getValue(s);i!==void 0&&(n.push([s,i.get()]),i.set(s.startsWith("scale")?1:0))}),n}const Yr={width:({x:e},{paddingLeft:n="0",paddingRight:s="0"})=>e.max-e.min-parseFloat(n)-parseFloat(s),height:({y:e},{paddingTop:n="0",paddingBottom:s="0"})=>e.max-e.min-parseFloat(n)-parseFloat(s),top:(e,{top:n})=>parseFloat(n),left:(e,{left:n})=>parseFloat(n),bottom:({y:e},{top:n})=>parseFloat(n)+(e.max-e.min),right:({x:e},{left:n})=>parseFloat(n)+(e.max-e.min),x:(e,{transform:n})=>yu(n,"x"),y:(e,{transform:n})=>yu(n,"y")};Yr.translateX=Yr.x;Yr.translateY=Yr.y;const Qr=new Set;let wu=!1,ku=!1,Su=!1;function Qg(){if(ku){const e=Array.from(Qr).filter(i=>i.needsMeasurement),n=new Set(e.map(i=>i.element)),s=new Map;n.forEach(i=>{const o=Ay(i);o.length&&(s.set(i,o),i.render())}),e.forEach(i=>i.measureInitialState()),n.forEach(i=>{i.render();const o=s.get(i);o&&o.forEach(([l,c])=>{i.getValue(l)?.set(c)})}),e.forEach(i=>i.measureEndState()),e.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}ku=!1,wu=!1,Qr.forEach(e=>e.complete(Su)),Qr.clear()}function Xg(){Qr.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(ku=!0)})}function Ty(){Su=!0,Xg(),Qg(),Su=!1}class ff{constructor(n,s,i,o,l,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...n],this.onComplete=s,this.name=i,this.motionValue=o,this.element=l,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(Qr.add(this),wu||(wu=!0,Bt.read(Xg),Bt.resolveKeyframes(Qg))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:n,name:s,element:i,motionValue:o}=this;if(n[0]===null){const l=o?.get(),c=n[n.length-1];if(l!==void 0)n[0]=l;else if(i&&s){const u=i.readValue(s,c);u!=null&&(n[0]=u)}n[0]===void 0&&(n[0]=c),o&&l===void 0&&o.set(n[0])}ky(n)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(n=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,n),Qr.delete(this)}cancel(){this.state==="scheduled"&&(Qr.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Dy=e=>e.startsWith("--");function Fy(e,n,s){Dy(n)?e.style.setProperty(n,s):e.style[n]=s}const My=Ju(()=>window.ScrollTimeline!==void 0),Iy={};function Py(e,n){const s=Ju(e);return()=>Iy[n]??s()}const Jg=Py(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ii=([e,n,s,i])=>`cubic-bezier(${e}, ${n}, ${s}, ${i})`,jm={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ii([0,.65,.55,1]),circOut:Ii([.55,0,1,.45]),backIn:Ii([.31,.01,.66,-.59]),backOut:Ii([.33,1.53,.69,.99])};function ex(e,n){if(e)return typeof e=="function"?Jg()?qg(e,n):"ease-out":Bg(e)?Ii(e):Array.isArray(e)?e.map(s=>ex(s,n)||jm.easeOut):jm[e]}function Ry(e,n,s,{delay:i=0,duration:o=300,repeat:l=0,repeatType:c="loop",ease:u="easeOut",times:h}={},g=void 0){const p={[n]:s};h&&(p.offset=h);const f=ex(u,o);Array.isArray(f)&&(p.easing=f);const m={delay:i,duration:o,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:l+1,direction:c==="reverse"?"alternate":"normal"};return g&&(m.pseudoElement=g),e.animate(p,m)}function tx(e){return typeof e=="function"&&"applyToOptions"in e}function By({type:e,...n}){return tx(e)&&Jg()?e.applyToOptions(n):(n.duration??(n.duration=300),n.ease??(n.ease="easeOut"),n)}class Ly extends df{constructor(n){if(super(),this.finishedTime=null,this.isStopped=!1,!n)return;const{element:s,name:i,keyframes:o,pseudoElement:l,allowFlatten:c=!1,finalKeyframe:u,onComplete:h}=n;this.isPseudoElement=!!l,this.allowFlatten=c,this.options=n,Xu(typeof n.type!="string");const g=By(n);this.animation=Ry(s,i,o,g,l),g.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const p=cf(o,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(p):Fy(s,i,p),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:n}=this;n==="idle"||n==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const n=this.animation.effect?.getComputedTiming?.().duration||0;return os(Number(n))}get iterationDuration(){const{delay:n=0}=this.options||{};return this.duration+os(n)}get time(){return os(Number(this.animation.currentTime)||0)}set time(n){this.finishedTime=null,this.animation.currentTime=Fs(n)}get speed(){return this.animation.playbackRate}set speed(n){n<0&&(this.finishedTime=null),this.animation.playbackRate=n}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(n){this.animation.startTime=n}attachTimeline({timeline:n,observe:s}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,n&&My()?(this.animation.timeline=n,ls):s(this)}}const nx={anticipate:Mg,backInOut:Fg,circInOut:Pg};function zy(e){return e in nx}function Oy(e){typeof e.ease=="string"&&zy(e.ease)&&(e.ease=nx[e.ease])}const Nm=10;class Vy extends Ly{constructor(n){Oy(n),Yg(n),super(n),n.startTime&&(this.startTime=n.startTime),this.options=n}updateMotionValue(n){const{motionValue:s,onUpdate:i,onComplete:o,element:l,...c}=this.options;if(!s)return;if(n!==void 0){s.set(n);return}const u=new uf({...c,autoplay:!1}),h=Fs(this.finishedTime??this.time);s.setWithVelocity(u.sample(h-Nm).value,u.sample(h).value,Nm),u.stop()}}const _m=(e,n)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(kr.test(e)||e==="0")&&!e.startsWith("url("));function $y(e){const n=e[0];if(e.length===1)return!0;for(let s=0;s<e.length;s++)if(e[s]!==n)return!0}function Hy(e,n,s,i){const o=e[0];if(o===null)return!1;if(n==="display"||n==="visibility")return!0;const l=e[e.length-1],c=_m(o,n),u=_m(l,n);return!c||!u?!1:$y(e)||(s==="spring"||tx(s))&&i}function Cu(e){e.duration=0,e.type="keyframes"}const Uy=new Set(["opacity","clipPath","filter","transform"]),Wy=Ju(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Ky(e){const{motionValue:n,name:s,repeatDelay:i,repeatType:o,damping:l,type:c}=e;if(!(n?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:g}=n.owner.getProps();return Wy()&&s&&Uy.has(s)&&(s!=="transform"||!g)&&!h&&!i&&o!=="mirror"&&l!==0&&c!=="inertia"}const Gy=40;class qy extends df{constructor({autoplay:n=!0,delay:s=0,type:i="keyframes",repeat:o=0,repeatDelay:l=0,repeatType:c="loop",keyframes:u,name:h,motionValue:g,element:p,...f}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Vn.now();const m={autoplay:n,delay:s,type:i,repeat:o,repeatDelay:l,repeatType:c,name:h,motionValue:g,element:p,...f},b=p?.KeyframeResolver||ff;this.keyframeResolver=new b(u,(y,v,C)=>this.onKeyframesResolved(y,v,m,!C),h,g,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(n,s,i,o){this.keyframeResolver=void 0;const{name:l,type:c,velocity:u,delay:h,isHandoff:g,onUpdate:p}=i;this.resolvedAt=Vn.now(),Hy(n,l,c,u)||((Gs.instantAnimations||!h)&&p?.(cf(n,i,s)),n[0]=n[n.length-1],Cu(i),i.repeat=0);const m={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>Gy?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...i,keyframes:n},b=!g&&Ky(m)?new Vy({...m,element:m.motionValue.owner.current}):new uf(m);b.finished.then(()=>this.notifyFinished()).catch(ls),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(n,s){return this.finished.finally(n).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Ty()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(n){this.animation.time=n}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(n){this.animation.speed=n}get startTime(){return this.animation.startTime}attachTimeline(n){return this._animation?this.stopTimeline=this.animation.attachTimeline(n):this.pendingTimeline=n,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const Zy=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Yy(e){const n=Zy.exec(e);if(!n)return[,];const[,s,i,o]=n;return[`--${s??i}`,o]}function sx(e,n,s=1){const[i,o]=Yy(e);if(!i)return;const l=window.getComputedStyle(n).getPropertyValue(i);if(l){const c=l.trim();return Cg(c)?parseFloat(c):c}return sf(o)?sx(o,n,s+1):o}function hf(e,n){return e?.[n]??e?.default??e}const rx=new Set(["width","height","top","left","right","bottom",...qa]),Qy={test:e=>e==="auto",parse:e=>e},ax=e=>n=>n.test(e),ix=[Ga,Qe,Ms,vr,$v,Vv,Qy],Em=e=>ix.find(ax(e));function Xy(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Ng(e):!0}const Jy=new Set(["brightness","contrast","saturate","opacity"]);function ew(e){const[n,s]=e.slice(0,-1).split("(");if(n==="drop-shadow")return e;const[i]=s.match(rf)||[];if(!i)return e;const o=s.replace(i,"");let l=Jy.has(n)?1:0;return i!==s&&(l*=100),n+"("+l+o+")"}const tw=/\b([a-z-]*)\(.*?\)/gu,ju={...kr,getAnimatableNone:e=>{const n=e.match(tw);return n?n.map(ew).join(" "):e}},Am={...Ga,transform:Math.round},nw={rotate:vr,rotateX:vr,rotateY:vr,rotateZ:vr,scale:rl,scaleX:rl,scaleY:rl,scaleZ:rl,skew:vr,skewX:vr,skewY:vr,distance:Qe,translateX:Qe,translateY:Qe,translateZ:Qe,x:Qe,y:Qe,z:Qe,perspective:Qe,transformPerspective:Qe,opacity:Oi,originX:gm,originY:gm,originZ:Qe},pf={borderWidth:Qe,borderTopWidth:Qe,borderRightWidth:Qe,borderBottomWidth:Qe,borderLeftWidth:Qe,borderRadius:Qe,radius:Qe,borderTopLeftRadius:Qe,borderTopRightRadius:Qe,borderBottomRightRadius:Qe,borderBottomLeftRadius:Qe,width:Qe,maxWidth:Qe,height:Qe,maxHeight:Qe,top:Qe,right:Qe,bottom:Qe,left:Qe,padding:Qe,paddingTop:Qe,paddingRight:Qe,paddingBottom:Qe,paddingLeft:Qe,margin:Qe,marginTop:Qe,marginRight:Qe,marginBottom:Qe,marginLeft:Qe,backgroundPositionX:Qe,backgroundPositionY:Qe,...nw,zIndex:Am,fillOpacity:Oi,strokeOpacity:Oi,numOctaves:Am},sw={...pf,color:Zt,backgroundColor:Zt,outlineColor:Zt,fill:Zt,stroke:Zt,borderColor:Zt,borderTopColor:Zt,borderRightColor:Zt,borderBottomColor:Zt,borderLeftColor:Zt,filter:ju,WebkitFilter:ju},ox=e=>sw[e];function lx(e,n){let s=ox(e);return s!==ju&&(s=kr),s.getAnimatableNone?s.getAnimatableNone(n):void 0}const rw=new Set(["auto","none","0"]);function aw(e,n,s){let i=0,o;for(;i<e.length&&!o;){const l=e[i];typeof l=="string"&&!rw.has(l)&&Vi(l).values.length&&(o=e[i]),i++}if(o&&s)for(const l of n)e[l]=lx(s,o)}class iw extends ff{constructor(n,s,i,o,l){super(n,s,i,o,l,!0)}readKeyframes(){const{unresolvedKeyframes:n,element:s,name:i}=this;if(!s||!s.current)return;super.readKeyframes();for(let h=0;h<n.length;h++){let g=n[h];if(typeof g=="string"&&(g=g.trim(),sf(g))){const p=sx(g,s.current);p!==void 0&&(n[h]=p),h===n.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!rx.has(i)||n.length!==2)return;const[o,l]=n,c=Em(o),u=Em(l);if(c!==u)if(Cm(c)&&Cm(u))for(let h=0;h<n.length;h++){const g=n[h];typeof g=="string"&&(n[h]=parseFloat(g))}else Yr[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:n,name:s}=this,i=[];for(let o=0;o<n.length;o++)(n[o]===null||Xy(n[o]))&&i.push(o);i.length&&aw(n,i,s)}measureInitialState(){const{element:n,unresolvedKeyframes:s,name:i}=this;if(!n||!n.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Yr[i](n.measureViewportBox(),window.getComputedStyle(n.current)),s[0]=this.measuredOrigin;const o=s[s.length-1];o!==void 0&&n.getValue(i,o).jump(o,!1)}measureEndState(){const{element:n,name:s,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const o=n.getValue(s);o&&o.jump(this.measuredOrigin,!1);const l=i.length-1,c=i[l];i[l]=Yr[s](n.measureViewportBox(),window.getComputedStyle(n.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,h])=>{n.getValue(u).set(h)}),this.resolveNoneKeyframes()}}function ow(e,n,s){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let i=document;const o=s?.[e]??i.querySelectorAll(e);return o?Array.from(o):[]}return Array.from(e)}const cx=(e,n)=>n&&typeof e=="number"?n.transform(e):e;function dx(e){return jg(e)&&"offsetHeight"in e}const Tm=30,lw=e=>!isNaN(parseFloat(e));class cw{constructor(n,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const o=Vn.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(n),this.owner=s.owner}setCurrent(n){this.current=n,this.updatedAt=Vn.now(),this.canTrackVelocity===null&&n!==void 0&&(this.canTrackVelocity=lw(this.current))}setPrevFrameValue(n=this.current){this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt}onChange(n){return this.on("change",n)}on(n,s){this.events[n]||(this.events[n]=new ef);const i=this.events[n].add(s);return n==="change"?()=>{i(),Bt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const n in this.events)this.events[n].clear()}attach(n,s){this.passiveEffect=n,this.stopPassiveEffect=s}set(n){this.passiveEffect?this.passiveEffect(n,this.updateAndNotify):this.updateAndNotify(n)}setWithVelocity(n,s,i){this.set(s),this.prev=void 0,this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt-i}jump(n,s=!0){this.updateAndNotify(n),this.prev=n,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(n){this.dependents||(this.dependents=new Set),this.dependents.add(n)}removeDependent(n){this.dependents&&this.dependents.delete(n)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const n=Vn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||n-this.updatedAt>Tm)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,Tm);return _g(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(n){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=n(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ua(e,n){return new cw(e,n)}const{schedule:mf}=Lg(queueMicrotask,!1),ys={x:!1,y:!1};function ux(){return ys.x||ys.y}function dw(e){return e==="x"||e==="y"?ys[e]?null:(ys[e]=!0,()=>{ys[e]=!1}):ys.x||ys.y?null:(ys.x=ys.y=!0,()=>{ys.x=ys.y=!1})}function fx(e,n){const s=ow(e),i=new AbortController,o={passive:!0,...n,signal:i.signal};return[s,o,()=>i.abort()]}function Dm(e){return!(e.pointerType==="touch"||ux())}function uw(e,n,s={}){const[i,o,l]=fx(e,s),c=u=>{if(!Dm(u))return;const{target:h}=u,g=n(h,u);if(typeof g!="function"||!h)return;const p=f=>{Dm(f)&&(g(f),h.removeEventListener("pointerleave",p))};h.addEventListener("pointerleave",p,o)};return i.forEach(u=>{u.addEventListener("pointerenter",c,o)}),l}const hx=(e,n)=>n?e===n?!0:hx(e,n.parentElement):!1,gf=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,fw=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function hw(e){return fw.has(e.tagName)||e.tabIndex!==-1}const bl=new WeakSet;function Fm(e){return n=>{n.key==="Enter"&&e(n)}}function Vd(e,n){e.dispatchEvent(new PointerEvent("pointer"+n,{isPrimary:!0,bubbles:!0}))}const pw=(e,n)=>{const s=e.currentTarget;if(!s)return;const i=Fm(()=>{if(bl.has(s))return;Vd(s,"down");const o=Fm(()=>{Vd(s,"up")}),l=()=>Vd(s,"cancel");s.addEventListener("keyup",o,n),s.addEventListener("blur",l,n)});s.addEventListener("keydown",i,n),s.addEventListener("blur",()=>s.removeEventListener("keydown",i),n)};function Mm(e){return gf(e)&&!ux()}function mw(e,n,s={}){const[i,o,l]=fx(e,s),c=u=>{const h=u.currentTarget;if(!Mm(u))return;bl.add(h);const g=n(h,u),p=(b,y)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",m),bl.has(h)&&bl.delete(h),Mm(b)&&typeof g=="function"&&g(b,{success:y})},f=b=>{p(b,h===window||h===document||s.useGlobalTarget||hx(h,b.target))},m=b=>{p(b,!1)};window.addEventListener("pointerup",f,o),window.addEventListener("pointercancel",m,o)};return i.forEach(u=>{(s.useGlobalTarget?window:u).addEventListener("pointerdown",c,o),dx(u)&&(u.addEventListener("focus",g=>pw(g,o)),!hw(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),l}function px(e){return jg(e)&&"ownerSVGElement"in e}function gw(e){return px(e)&&e.tagName==="svg"}const Cn=e=>!!(e&&e.getVelocity),xw=[...ix,Zt,kr],bw=e=>xw.find(ax(e)),xf=N.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function Im(e,n){if(typeof e=="function")return e(n);e!=null&&(e.current=n)}function vw(...e){return n=>{let s=!1;const i=e.map(o=>{const l=Im(o,n);return!s&&typeof l=="function"&&(s=!0),l});if(s)return()=>{for(let o=0;o<i.length;o++){const l=i[o];typeof l=="function"?l():Im(e[o],null)}}}}function yw(...e){return N.useCallback(vw(...e),e)}class ww extends N.Component{getSnapshotBeforeUpdate(n){const s=this.props.childRef.current;if(s&&n.isPresent&&!this.props.isPresent){const i=s.offsetParent,o=dx(i)&&i.offsetWidth||0,l=this.props.sizeRef.current;l.height=s.offsetHeight||0,l.width=s.offsetWidth||0,l.top=s.offsetTop,l.left=s.offsetLeft,l.right=o-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function kw({children:e,isPresent:n,anchorX:s,root:i}){const o=N.useId(),l=N.useRef(null),c=N.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=N.useContext(xf),h=yw(l,e?.ref);return N.useInsertionEffect(()=>{const{width:g,height:p,top:f,left:m,right:b}=c.current;if(n||!l.current||!g||!p)return;const y=s==="left"?`left: ${m}`:`right: ${b}`;l.current.dataset.motionPopId=o;const v=document.createElement("style");u&&(v.nonce=u);const C=i??document.head;return C.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${p}px !important;
            ${y}px !important;
            top: ${f}px !important;
          }
        `),()=>{C.contains(v)&&C.removeChild(v)}},[n]),r.jsx(ww,{isPresent:n,childRef:l,sizeRef:c,children:N.cloneElement(e,{ref:h})})}const Sw=({children:e,initial:n,isPresent:s,onExitComplete:i,custom:o,presenceAffectsLayout:l,mode:c,anchorX:u,root:h})=>{const g=qu(Cw),p=N.useId();let f=!0,m=N.useMemo(()=>(f=!1,{id:p,initial:n,isPresent:s,custom:o,onExitComplete:b=>{g.set(b,!0);for(const y of g.values())if(!y)return;i&&i()},register:b=>(g.set(b,!1),()=>g.delete(b))}),[s,g,i]);return l&&f&&(m={...m}),N.useMemo(()=>{g.forEach((b,y)=>g.set(y,!1))},[s]),N.useEffect(()=>{!s&&!g.size&&i&&i()},[s]),c==="popLayout"&&(e=r.jsx(kw,{isPresent:s,anchorX:u,root:h,children:e})),r.jsx(zl.Provider,{value:m,children:e})};function Cw(){return new Map}function mx(e=!0){const n=N.useContext(zl);if(n===null)return[!0,null];const{isPresent:s,onExitComplete:i,register:o}=n,l=N.useId();N.useEffect(()=>{if(e)return o(l)},[e]);const c=N.useCallback(()=>e&&i&&i(l),[l,i,e]);return!s&&i?[!1,c]:[!0]}const al=e=>e.key||"";function Pm(e){const n=[];return N.Children.forEach(e,s=>{N.isValidElement(s)&&n.push(s)}),n}const ze=({children:e,custom:n,initial:s=!0,onExitComplete:i,presenceAffectsLayout:o=!0,mode:l="sync",propagate:c=!1,anchorX:u="left",root:h})=>{const[g,p]=mx(c),f=N.useMemo(()=>Pm(e),[e]),m=c&&!g?[]:f.map(al),b=N.useRef(!0),y=N.useRef(f),v=qu(()=>new Map),[C,w]=N.useState(f),[F,j]=N.useState(f);Sg(()=>{b.current=!1,y.current=f;for(let B=0;B<F.length;B++){const U=al(F[B]);m.includes(U)?v.delete(U):v.get(U)!==!0&&v.set(U,!1)}},[F,m.length,m.join("-")]);const T=[];if(f!==C){let B=[...f];for(let U=0;U<F.length;U++){const D=F[U],A=al(D);m.includes(A)||(B.splice(U,0,D),T.push(D))}return l==="wait"&&T.length&&(B=T),j(Pm(B)),w(f),null}const{forceRender:z}=N.useContext(Gu);return r.jsx(r.Fragment,{children:F.map(B=>{const U=al(B),D=c&&!g?!1:f===F||m.includes(U),A=()=>{if(v.has(U))v.set(U,!0);else return;let H=!0;v.forEach(Y=>{Y||(H=!1)}),H&&(z?.(),j(y.current),c&&p?.(),i&&i())};return r.jsx(Sw,{isPresent:D,initial:!b.current||s?void 0:!1,custom:n,presenceAffectsLayout:o,mode:l,root:h,onExitComplete:D?void 0:A,anchorX:u,children:B},U)})})},gx=N.createContext({strict:!1}),Rm={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Wa={};for(const e in Rm)Wa[e]={isEnabled:n=>Rm[e].some(s=>!!n[s])};function jw(e){for(const n in e)Wa[n]={...Wa[n],...e[n]}}const Nw=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function El(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Nw.has(e)}let xx=e=>!El(e);function _w(e){typeof e=="function"&&(xx=n=>n.startsWith("on")?!El(n):e(n))}try{_w(require("@emotion/is-prop-valid").default)}catch{}function Ew(e,n,s){const i={};for(const o in e)o==="values"&&typeof e.values=="object"||(xx(o)||s===!0&&El(o)||!n&&!El(o)||e.draggable&&o.startsWith("onDrag"))&&(i[o]=e[o]);return i}const Ol=N.createContext({});function Vl(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function $i(e){return typeof e=="string"||Array.isArray(e)}const bf=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],vf=["initial",...bf];function $l(e){return Vl(e.animate)||vf.some(n=>$i(e[n]))}function bx(e){return!!($l(e)||e.variants)}function Aw(e,n){if($l(e)){const{initial:s,animate:i}=e;return{initial:s===!1||$i(s)?s:void 0,animate:$i(i)?i:void 0}}return e.inherit!==!1?n:{}}function Tw(e){const{initial:n,animate:s}=Aw(e,N.useContext(Ol));return N.useMemo(()=>({initial:n,animate:s}),[Bm(n),Bm(s)])}function Bm(e){return Array.isArray(e)?e.join(" "):e}function Lm(e,n){return n.max===n.min?0:e/(n.max-n.min)*100}const Fi={correct:(e,n)=>{if(!n.target)return e;if(typeof e=="string")if(Qe.test(e))e=parseFloat(e);else return e;const s=Lm(e,n.target.x),i=Lm(e,n.target.y);return`${s}% ${i}%`}},Dw={correct:(e,{treeScale:n,projectionDelta:s})=>{const i=e,o=kr.parse(e);if(o.length>5)return i;const l=kr.createTransformer(e),c=typeof o[0]!="number"?1:0,u=s.x.scale*n.x,h=s.y.scale*n.y;o[0+c]/=u,o[1+c]/=h;const g=$t(u,h,.5);return typeof o[2+c]=="number"&&(o[2+c]/=g),typeof o[3+c]=="number"&&(o[3+c]/=g),l(o)}},Nu={borderRadius:{...Fi,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Fi,borderTopRightRadius:Fi,borderBottomLeftRadius:Fi,borderBottomRightRadius:Fi,boxShadow:Dw};function vx(e,{layout:n,layoutId:s}){return Za.has(e)||e.startsWith("origin")||(n||s!==void 0)&&(!!Nu[e]||e==="opacity")}const Fw={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Mw=qa.length;function Iw(e,n,s){let i="",o=!0;for(let l=0;l<Mw;l++){const c=qa[l],u=e[c];if(u===void 0)continue;let h=!0;if(typeof u=="number"?h=u===(c.startsWith("scale")?1:0):h=parseFloat(u)===0,!h||s){const g=cx(u,pf[c]);if(!h){o=!1;const p=Fw[c]||c;i+=`${p}(${g}) `}s&&(n[c]=g)}}return i=i.trim(),s?i=s(n,o?"":i):o&&(i="none"),i}function yf(e,n,s){const{style:i,vars:o,transformOrigin:l}=e;let c=!1,u=!1;for(const h in n){const g=n[h];if(Za.has(h)){c=!0;continue}else if(Og(h)){o[h]=g;continue}else{const p=cx(g,pf[h]);h.startsWith("origin")?(u=!0,l[h]=p):i[h]=p}}if(n.transform||(c||s?i.transform=Iw(n,e.transform,s):i.transform&&(i.transform="none")),u){const{originX:h="50%",originY:g="50%",originZ:p=0}=l;i.transformOrigin=`${h} ${g} ${p}`}}const wf=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function yx(e,n,s){for(const i in n)!Cn(n[i])&&!vx(i,s)&&(e[i]=n[i])}function Pw({transformTemplate:e},n){return N.useMemo(()=>{const s=wf();return yf(s,n,e),Object.assign({},s.vars,s.style)},[n])}function Rw(e,n){const s=e.style||{},i={};return yx(i,s,e),Object.assign(i,Pw(e,n)),i}function Bw(e,n){const s={},i=Rw(e,n);return e.drag&&e.dragListener!==!1&&(s.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=i,s}const Lw={offset:"stroke-dashoffset",array:"stroke-dasharray"},zw={offset:"strokeDashoffset",array:"strokeDasharray"};function Ow(e,n,s=1,i=0,o=!0){e.pathLength=1;const l=o?Lw:zw;e[l.offset]=Qe.transform(-i);const c=Qe.transform(n),u=Qe.transform(s);e[l.array]=`${c} ${u}`}function wx(e,{attrX:n,attrY:s,attrScale:i,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...u},h,g,p){if(yf(e,u,g),h){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:m}=e;f.transform&&(m.transform=f.transform,delete f.transform),(m.transform||f.transformOrigin)&&(m.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),m.transform&&(m.transformBox=p?.transformBox??"fill-box",delete f.transformBox),n!==void 0&&(f.x=n),s!==void 0&&(f.y=s),i!==void 0&&(f.scale=i),o!==void 0&&Ow(f,o,l,c,!1)}const kx=()=>({...wf(),attrs:{}}),Sx=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Vw(e,n,s,i){const o=N.useMemo(()=>{const l=kx();return wx(l,n,Sx(i),e.transformTemplate,e.style),{...l.attrs,style:{...l.style}}},[n]);if(e.style){const l={};yx(l,e.style,e),o.style={...l,...o.style}}return o}const $w=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function kf(e){return typeof e!="string"||e.includes("-")?!1:!!($w.indexOf(e)>-1||/[A-Z]/u.test(e))}function Hw(e,n,s,{latestValues:i},o,l=!1){const u=(kf(e)?Vw:Bw)(n,i,o,e),h=Ew(n,typeof e=="string",l),g=e!==N.Fragment?{...h,...u,ref:s}:{},{children:p}=n,f=N.useMemo(()=>Cn(p)?p.get():p,[p]);return N.createElement(e,{...g,children:f})}function zm(e){const n=[{},{}];return e?.values.forEach((s,i)=>{n[0][i]=s.get(),n[1][i]=s.getVelocity()}),n}function Sf(e,n,s,i){if(typeof n=="function"){const[o,l]=zm(i);n=n(s!==void 0?s:e.custom,o,l)}if(typeof n=="string"&&(n=e.variants&&e.variants[n]),typeof n=="function"){const[o,l]=zm(i);n=n(s!==void 0?s:e.custom,o,l)}return n}function vl(e){return Cn(e)?e.get():e}function Uw({scrapeMotionValuesFromProps:e,createRenderState:n},s,i,o){return{latestValues:Ww(s,i,o,e),renderState:n()}}function Ww(e,n,s,i){const o={},l=i(e,{});for(const m in l)o[m]=vl(l[m]);let{initial:c,animate:u}=e;const h=$l(e),g=bx(e);n&&g&&!h&&e.inherit!==!1&&(c===void 0&&(c=n.initial),u===void 0&&(u=n.animate));let p=s?s.initial===!1:!1;p=p||c===!1;const f=p?u:c;if(f&&typeof f!="boolean"&&!Vl(f)){const m=Array.isArray(f)?f:[f];for(let b=0;b<m.length;b++){const y=Sf(e,m[b]);if(y){const{transitionEnd:v,transition:C,...w}=y;for(const F in w){let j=w[F];if(Array.isArray(j)){const T=p?j.length-1:0;j=j[T]}j!==null&&(o[F]=j)}for(const F in v)o[F]=v[F]}}}return o}const Cx=e=>(n,s)=>{const i=N.useContext(Ol),o=N.useContext(zl),l=()=>Uw(e,n,i,o);return s?l():qu(l)};function Cf(e,n,s){const{style:i}=e,o={};for(const l in i)(Cn(i[l])||n.style&&Cn(n.style[l])||vx(l,e)||s?.getValue(l)?.liveStyle!==void 0)&&(o[l]=i[l]);return o}const Kw=Cx({scrapeMotionValuesFromProps:Cf,createRenderState:wf});function jx(e,n,s){const i=Cf(e,n,s);for(const o in e)if(Cn(e[o])||Cn(n[o])){const l=qa.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;i[l]=e[o]}return i}const Gw=Cx({scrapeMotionValuesFromProps:jx,createRenderState:kx}),qw=Symbol.for("motionComponentSymbol");function Ra(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Zw(e,n,s){return N.useCallback(i=>{i&&e.onMount&&e.onMount(i),n&&(i?n.mount(i):n.unmount()),s&&(typeof s=="function"?s(i):Ra(s)&&(s.current=i))},[n])}const jf=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Yw="framerAppearId",Nx="data-"+jf(Yw),_x=N.createContext({});function Qw(e,n,s,i,o){const{visualElement:l}=N.useContext(Ol),c=N.useContext(gx),u=N.useContext(zl),h=N.useContext(xf).reducedMotion,g=N.useRef(null);i=i||c.renderer,!g.current&&i&&(g.current=i(e,{visualState:n,parent:l,props:s,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:h}));const p=g.current,f=N.useContext(_x);p&&!p.projection&&o&&(p.type==="html"||p.type==="svg")&&Xw(g.current,s,o,f);const m=N.useRef(!1);N.useInsertionEffect(()=>{p&&m.current&&p.update(s,u)});const b=s[Nx],y=N.useRef(!!b&&!window.MotionHandoffIsComplete?.(b)&&window.MotionHasOptimisedAnimation?.(b));return Sg(()=>{p&&(m.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),y.current&&p.animationState&&p.animationState.animateChanges())}),N.useEffect(()=>{p&&(!y.current&&p.animationState&&p.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(b)}),y.current=!1),p.enteringChildren=void 0)}),p}function Xw(e,n,s,i){const{layoutId:o,layout:l,drag:c,dragConstraints:u,layoutScroll:h,layoutRoot:g,layoutCrossfade:p}=n;e.projection=new s(e.latestValues,n["data-framer-portal-id"]?void 0:Ex(e.parent)),e.projection.setOptions({layoutId:o,layout:l,alwaysMeasureLayout:!!c||u&&Ra(u),visualElement:e,animationType:typeof l=="string"?l:"both",initialPromotionConfig:i,crossfade:p,layoutScroll:h,layoutRoot:g})}function Ex(e){if(e)return e.options.allowProjection!==!1?e.projection:Ex(e.parent)}function $d(e,{forwardMotionProps:n=!1}={},s,i){s&&jw(s);const o=kf(e)?Gw:Kw;function l(u,h){let g;const p={...N.useContext(xf),...u,layoutId:Jw(u)},{isStatic:f}=p,m=Tw(u),b=o(u,f);if(!f&&Zu){e5();const y=t5(p);g=y.MeasureLayout,m.visualElement=Qw(e,b,p,i,y.ProjectionNode)}return r.jsxs(Ol.Provider,{value:m,children:[g&&m.visualElement?r.jsx(g,{visualElement:m.visualElement,...p}):null,Hw(e,u,Zw(b,m.visualElement,h),b,f,n)]})}l.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const c=N.forwardRef(l);return c[qw]=e,c}function Jw({layoutId:e}){const n=N.useContext(Gu).id;return n&&e!==void 0?n+"-"+e:e}function e5(e,n){N.useContext(gx).strict}function t5(e){const{drag:n,layout:s}=Wa;if(!n&&!s)return{};const i={...n,...s};return{MeasureLayout:n?.isEnabled(e)||s?.isEnabled(e)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function n5(e,n){if(typeof Proxy>"u")return $d;const s=new Map,i=(l,c)=>$d(l,c,e,n),o=(l,c)=>i(l,c);return new Proxy(o,{get:(l,c)=>c==="create"?i:(s.has(c)||s.set(c,$d(c,void 0,e,n)),s.get(c))})}function Ax({top:e,left:n,right:s,bottom:i}){return{x:{min:n,max:s},y:{min:e,max:i}}}function s5({x:e,y:n}){return{top:n.min,right:e.max,bottom:n.max,left:e.min}}function r5(e,n){if(!n)return e;const s=n({x:e.left,y:e.top}),i=n({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:i.y,right:i.x}}function Hd(e){return e===void 0||e===1}function _u({scale:e,scaleX:n,scaleY:s}){return!Hd(e)||!Hd(n)||!Hd(s)}function Kr(e){return _u(e)||Tx(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Tx(e){return Om(e.x)||Om(e.y)}function Om(e){return e&&e!=="0%"}function Al(e,n,s){const i=e-s,o=n*i;return s+o}function Vm(e,n,s,i,o){return o!==void 0&&(e=Al(e,o,i)),Al(e,s,i)+n}function Eu(e,n=0,s=1,i,o){e.min=Vm(e.min,n,s,i,o),e.max=Vm(e.max,n,s,i,o)}function Dx(e,{x:n,y:s}){Eu(e.x,n.translate,n.scale,n.originPoint),Eu(e.y,s.translate,s.scale,s.originPoint)}const $m=.999999999999,Hm=1.0000000000001;function a5(e,n,s,i=!1){const o=s.length;if(!o)return;n.x=n.y=1;let l,c;for(let u=0;u<o;u++){l=s[u],c=l.projectionDelta;const{visualElement:h}=l.options;h&&h.props.style&&h.props.style.display==="contents"||(i&&l.options.layoutScroll&&l.scroll&&l!==l.root&&La(e,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),c&&(n.x*=c.x.scale,n.y*=c.y.scale,Dx(e,c)),i&&Kr(l.latestValues)&&La(e,l.latestValues))}n.x<Hm&&n.x>$m&&(n.x=1),n.y<Hm&&n.y>$m&&(n.y=1)}function Ba(e,n){e.min=e.min+n,e.max=e.max+n}function Um(e,n,s,i,o=.5){const l=$t(e.min,e.max,o);Eu(e,n,s,l,i)}function La(e,n){Um(e.x,n.x,n.scaleX,n.scale,n.originX),Um(e.y,n.y,n.scaleY,n.scale,n.originY)}function Fx(e,n){return Ax(r5(e.getBoundingClientRect(),n))}function i5(e,n,s){const i=Fx(e,s),{scroll:o}=n;return o&&(Ba(i.x,o.offset.x),Ba(i.y,o.offset.y)),i}const Wm=()=>({translate:0,scale:1,origin:0,originPoint:0}),za=()=>({x:Wm(),y:Wm()}),Km=()=>({min:0,max:0}),tn=()=>({x:Km(),y:Km()}),Au={current:null},Mx={current:!1};function o5(){if(Mx.current=!0,!!Zu)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),n=()=>Au.current=e.matches;e.addEventListener("change",n),n()}else Au.current=!1}const l5=new WeakMap;function c5(e,n,s){for(const i in n){const o=n[i],l=s[i];if(Cn(o))e.addValue(i,o);else if(Cn(l))e.addValue(i,Ua(o,{owner:e}));else if(l!==o)if(e.hasValue(i)){const c=e.getValue(i);c.liveStyle===!0?c.jump(o):c.hasAnimated||c.set(o)}else{const c=e.getStaticValue(i);e.addValue(i,Ua(c!==void 0?c:o,{owner:e}))}}for(const i in s)n[i]===void 0&&e.removeValue(i);return n}const Gm=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class d5{scrapeMotionValuesFromProps(n,s,i){return{}}constructor({parent:n,props:s,presenceContext:i,reducedMotionConfig:o,blockInitialAnimation:l,visualState:c},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ff,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Vn.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Bt.render(this.render,!1,!0))};const{latestValues:h,renderState:g}=c;this.latestValues=h,this.baseTarget={...h},this.initialValues=s.initial?{...h}:{},this.renderState=g,this.parent=n,this.props=s,this.presenceContext=i,this.depth=n?n.depth+1:0,this.reducedMotionConfig=o,this.options=u,this.blockInitialAnimation=!!l,this.isControllingVariants=$l(s),this.isVariantNode=bx(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(n&&n.current);const{willChange:p,...f}=this.scrapeMotionValuesFromProps(s,{},this);for(const m in f){const b=f[m];h[m]!==void 0&&Cn(b)&&b.set(h[m])}}mount(n){this.current=n,l5.set(n,this),this.projection&&!this.projection.instance&&this.projection.mount(n),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,i)=>this.bindToMotionValue(i,s)),Mx.current||o5(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Au.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),wr(this.notifyUpdate),wr(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const s=this.features[n];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(n){this.children.add(n),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(n)}removeChild(n){this.children.delete(n),this.enteringChildren&&this.enteringChildren.delete(n)}bindToMotionValue(n,s){this.valueSubscriptions.has(n)&&this.valueSubscriptions.get(n)();const i=Za.has(n);i&&this.onBindTransform&&this.onBindTransform();const o=s.on("change",c=>{this.latestValues[n]=c,this.props.onUpdate&&Bt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,n,s)),this.valueSubscriptions.set(n,()=>{o(),l&&l(),s.owner&&s.stop()})}sortNodePosition(n){return!this.current||!this.sortInstanceNodePosition||this.type!==n.type?0:this.sortInstanceNodePosition(this.current,n.current)}updateFeatures(){let n="animation";for(n in Wa){const s=Wa[n];if(!s)continue;const{isEnabled:i,Feature:o}=s;if(!this.features[n]&&o&&i(this.props)&&(this.features[n]=new o(this)),this.features[n]){const l=this.features[n];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):tn()}getStaticValue(n){return this.latestValues[n]}setStaticValue(n,s){this.latestValues[n]=s}update(n,s){(n.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=n,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let i=0;i<Gm.length;i++){const o=Gm[i];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const l="on"+o,c=n[l];c&&(this.propEventSubscriptions[o]=this.on(o,c))}this.prevMotionValues=c5(this,this.scrapeMotionValuesFromProps(n,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(n){return this.props.variants?this.props.variants[n]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(n){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(n),()=>s.variantChildren.delete(n)}addValue(n,s){const i=this.values.get(n);s!==i&&(i&&this.removeValue(n),this.bindToMotionValue(n,s),this.values.set(n,s),this.latestValues[n]=s.get())}removeValue(n){this.values.delete(n);const s=this.valueSubscriptions.get(n);s&&(s(),this.valueSubscriptions.delete(n)),delete this.latestValues[n],this.removeValueFromRenderState(n,this.renderState)}hasValue(n){return this.values.has(n)}getValue(n,s){if(this.props.values&&this.props.values[n])return this.props.values[n];let i=this.values.get(n);return i===void 0&&s!==void 0&&(i=Ua(s===null?void 0:s,{owner:this}),this.addValue(n,i)),i}readValue(n,s){let i=this.latestValues[n]!==void 0||!this.current?this.latestValues[n]:this.getBaseTargetFromProps(this.props,n)??this.readValueFromInstance(this.current,n,this.options);return i!=null&&(typeof i=="string"&&(Cg(i)||Ng(i))?i=parseFloat(i):!bw(i)&&kr.test(s)&&(i=lx(n,s)),this.setBaseTarget(n,Cn(i)?i.get():i)),Cn(i)?i.get():i}setBaseTarget(n,s){this.baseTarget[n]=s}getBaseTarget(n){const{initial:s}=this.props;let i;if(typeof s=="string"||typeof s=="object"){const l=Sf(this.props,s,this.presenceContext?.custom);l&&(i=l[n])}if(s&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,n);return o!==void 0&&!Cn(o)?o:this.initialValues[n]!==void 0&&i===void 0?void 0:this.baseTarget[n]}on(n,s){return this.events[n]||(this.events[n]=new ef),this.events[n].add(s)}notify(n,...s){this.events[n]&&this.events[n].notify(...s)}scheduleRenderMicrotask(){mf.render(this.render)}}class Ix extends d5{constructor(){super(...arguments),this.KeyframeResolver=iw}sortInstanceNodePosition(n,s){return n.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(n,s){return n.style?n.style[s]:void 0}removeValueFromRenderState(n,{vars:s,style:i}){delete s[n],delete i[n]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:n}=this.props;Cn(n)&&(this.childSubscription=n.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function Px(e,{style:n,vars:s},i,o){const l=e.style;let c;for(c in n)l[c]=n[c];o?.applyProjectionStyles(l,i);for(c in s)l.setProperty(c,s[c])}function u5(e){return window.getComputedStyle(e)}class f5 extends Ix{constructor(){super(...arguments),this.type="html",this.renderInstance=Px}readValueFromInstance(n,s){if(Za.has(s))return this.projection?.isProjecting?vu(s):jy(n,s);{const i=u5(n),o=(Og(s)?i.getPropertyValue(s):i[s])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(n,{transformPagePoint:s}){return Fx(n,s)}build(n,s,i){yf(n,s,i.transformTemplate)}scrapeMotionValuesFromProps(n,s,i){return Cf(n,s,i)}}const Rx=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function h5(e,n,s,i){Px(e,n,void 0,i);for(const o in n.attrs)e.setAttribute(Rx.has(o)?o:jf(o),n.attrs[o])}class p5 extends Ix{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=tn}getBaseTargetFromProps(n,s){return n[s]}readValueFromInstance(n,s){if(Za.has(s)){const i=ox(s);return i&&i.default||0}return s=Rx.has(s)?s:jf(s),n.getAttribute(s)}scrapeMotionValuesFromProps(n,s,i){return jx(n,s,i)}build(n,s,i){wx(n,s,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(n,s,i,o){h5(n,s,i,o)}mount(n){this.isSVGTag=Sx(n.tagName),super.mount(n)}}const m5=(e,n)=>kf(e)?new p5(n):new f5(n,{allowProjection:e!==N.Fragment});function Va(e,n,s){const i=e.getProps();return Sf(i,n,s!==void 0?s:i.custom,e)}const Tu=e=>Array.isArray(e);function g5(e,n,s){e.hasValue(n)?e.getValue(n).set(s):e.addValue(n,Ua(s))}function x5(e){return Tu(e)?e[e.length-1]||0:e}function b5(e,n){const s=Va(e,n);let{transitionEnd:i={},transition:o={},...l}=s||{};l={...l,...i};for(const c in l){const u=x5(l[c]);g5(e,c,u)}}function v5(e){return!!(Cn(e)&&e.add)}function Du(e,n){const s=e.getValue("willChange");if(v5(s))return s.add(n);if(!s&&Gs.WillChange){const i=new Gs.WillChange("auto");e.addValue("willChange",i),i.add(n)}}function Bx(e){return e.props[Nx]}const y5=e=>e!==null;function w5(e,{repeat:n,repeatType:s="loop"},i){const o=e.filter(y5),l=n&&s!=="loop"&&n%2===1?0:o.length-1;return o[l]}const k5={type:"spring",stiffness:500,damping:25,restSpeed:10},S5=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),C5={type:"keyframes",duration:.8},j5={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},N5=(e,{keyframes:n})=>n.length>2?C5:Za.has(e)?e.startsWith("scale")?S5(n[1]):k5:j5;function _5({when:e,delay:n,delayChildren:s,staggerChildren:i,staggerDirection:o,repeat:l,repeatType:c,repeatDelay:u,from:h,elapsed:g,...p}){return!!Object.keys(p).length}const Nf=(e,n,s,i={},o,l)=>c=>{const u=hf(i,e)||{},h=u.delay||i.delay||0;let{elapsed:g=0}=i;g=g-Fs(h);const p={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:n.getVelocity(),...u,delay:-g,onUpdate:m=>{n.set(m),u.onUpdate&&u.onUpdate(m)},onComplete:()=>{c(),u.onComplete&&u.onComplete()},name:e,motionValue:n,element:l?void 0:o};_5(u)||Object.assign(p,N5(e,p)),p.duration&&(p.duration=Fs(p.duration)),p.repeatDelay&&(p.repeatDelay=Fs(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let f=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(Cu(p),p.delay===0&&(f=!0)),(Gs.instantAnimations||Gs.skipAnimations)&&(f=!0,Cu(p),p.delay=0),p.allowFlatten=!u.type&&!u.ease,f&&!l&&n.get()!==void 0){const m=w5(p.keyframes,u);if(m!==void 0){Bt.update(()=>{p.onUpdate(m),p.onComplete()});return}}return u.isSync?new uf(p):new qy(p)};function E5({protectedKeys:e,needsAnimating:n},s){const i=e.hasOwnProperty(s)&&n[s]!==!0;return n[s]=!1,i}function Lx(e,n,{delay:s=0,transitionOverride:i,type:o}={}){let{transition:l=e.getDefaultTransition(),transitionEnd:c,...u}=n;i&&(l=i);const h=[],g=o&&e.animationState&&e.animationState.getState()[o];for(const p in u){const f=e.getValue(p,e.latestValues[p]??null),m=u[p];if(m===void 0||g&&E5(g,p))continue;const b={delay:s,...hf(l||{},p)},y=f.get();if(y!==void 0&&!f.isAnimating&&!Array.isArray(m)&&m===y&&!b.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const w=Bx(e);if(w){const F=window.MotionHandoffAnimation(w,p,Bt);F!==null&&(b.startTime=F,v=!0)}}Du(e,p),f.start(Nf(p,f,m,e.shouldReduceMotion&&rx.has(p)?{type:!1}:b,e,v));const C=f.animation;C&&h.push(C)}return c&&Promise.all(h).then(()=>{Bt.update(()=>{c&&b5(e,c)})}),h}function zx(e,n,s,i=0,o=1){const l=Array.from(e).sort((g,p)=>g.sortNodePosition(p)).indexOf(n),c=e.size,u=(c-1)*i;return typeof s=="function"?s(l,c):o===1?l*i:u-l*i}function Fu(e,n,s={}){const i=Va(e,n,s.type==="exit"?e.presenceContext?.custom:void 0);let{transition:o=e.getDefaultTransition()||{}}=i||{};s.transitionOverride&&(o=s.transitionOverride);const l=i?()=>Promise.all(Lx(e,i,s)):()=>Promise.resolve(),c=e.variantChildren&&e.variantChildren.size?(h=0)=>{const{delayChildren:g=0,staggerChildren:p,staggerDirection:f}=o;return A5(e,n,h,g,p,f,s)}:()=>Promise.resolve(),{when:u}=o;if(u){const[h,g]=u==="beforeChildren"?[l,c]:[c,l];return h().then(()=>g())}else return Promise.all([l(),c(s.delay)])}function A5(e,n,s=0,i=0,o=0,l=1,c){const u=[];for(const h of e.variantChildren)h.notify("AnimationStart",n),u.push(Fu(h,n,{...c,delay:s+(typeof i=="function"?0:i)+zx(e.variantChildren,h,i,o,l)}).then(()=>h.notify("AnimationComplete",n)));return Promise.all(u)}function T5(e,n,s={}){e.notify("AnimationStart",n);let i;if(Array.isArray(n)){const o=n.map(l=>Fu(e,l,s));i=Promise.all(o)}else if(typeof n=="string")i=Fu(e,n,s);else{const o=typeof n=="function"?Va(e,n,s.custom):n;i=Promise.all(Lx(e,o,s))}return i.then(()=>{e.notify("AnimationComplete",n)})}function Ox(e,n){if(!Array.isArray(n))return!1;const s=n.length;if(s!==e.length)return!1;for(let i=0;i<s;i++)if(n[i]!==e[i])return!1;return!0}const D5=vf.length;function Vx(e){if(!e)return;if(!e.isControllingVariants){const s=e.parent?Vx(e.parent)||{}:{};return e.props.initial!==void 0&&(s.initial=e.props.initial),s}const n={};for(let s=0;s<D5;s++){const i=vf[s],o=e.props[i];($i(o)||o===!1)&&(n[i]=o)}return n}const F5=[...bf].reverse(),M5=bf.length;function I5(e){return n=>Promise.all(n.map(({animation:s,options:i})=>T5(e,s,i)))}function P5(e){let n=I5(e),s=qm(),i=!0;const o=h=>(g,p)=>{const f=Va(e,p,h==="exit"?e.presenceContext?.custom:void 0);if(f){const{transition:m,transitionEnd:b,...y}=f;g={...g,...y,...b}}return g};function l(h){n=h(e)}function c(h){const{props:g}=e,p=Vx(e.parent)||{},f=[],m=new Set;let b={},y=1/0;for(let C=0;C<M5;C++){const w=F5[C],F=s[w],j=g[w]!==void 0?g[w]:p[w],T=$i(j),z=w===h?F.isActive:null;z===!1&&(y=C);let B=j===p[w]&&j!==g[w]&&T;if(B&&i&&e.manuallyAnimateOnMount&&(B=!1),F.protectedKeys={...b},!F.isActive&&z===null||!j&&!F.prevProp||Vl(j)||typeof j=="boolean")continue;const U=R5(F.prevProp,j);let D=U||w===h&&F.isActive&&!B&&T||C>y&&T,A=!1;const H=Array.isArray(j)?j:[j];let Y=H.reduce(o(w),{});z===!1&&(Y={});const{prevResolvedValues:_={}}=F,L={..._,...Y},k=I=>{D=!0,m.has(I)&&(A=!0,m.delete(I)),F.needsAnimating[I]=!0;const q=e.getValue(I);q&&(q.liveStyle=!1)};for(const I in L){const q=Y[I],G=_[I];if(b.hasOwnProperty(I))continue;let Q=!1;Tu(q)&&Tu(G)?Q=!Ox(q,G):Q=q!==G,Q?q!=null?k(I):m.add(I):q!==void 0&&m.has(I)?k(I):F.protectedKeys[I]=!0}F.prevProp=j,F.prevResolvedValues=Y,F.isActive&&(b={...b,...Y}),i&&e.blockInitialAnimation&&(D=!1);const $=B&&U;D&&(!$||A)&&f.push(...H.map(I=>{const q={type:w};if(typeof I=="string"&&i&&!$&&e.manuallyAnimateOnMount&&e.parent){const{parent:G}=e,Q=Va(G,I);if(G.enteringChildren&&Q){const{delayChildren:M}=Q.transition||{};q.delay=zx(G.enteringChildren,e,M)}}return{animation:I,options:q}}))}if(m.size){const C={};if(typeof g.initial!="boolean"){const w=Va(e,Array.isArray(g.initial)?g.initial[0]:g.initial);w&&w.transition&&(C.transition=w.transition)}m.forEach(w=>{const F=e.getBaseTarget(w),j=e.getValue(w);j&&(j.liveStyle=!0),C[w]=F??null}),f.push({animation:C})}let v=!!f.length;return i&&(g.initial===!1||g.initial===g.animate)&&!e.manuallyAnimateOnMount&&(v=!1),i=!1,v?n(f):Promise.resolve()}function u(h,g){if(s[h].isActive===g)return Promise.resolve();e.variantChildren?.forEach(f=>f.animationState?.setActive(h,g)),s[h].isActive=g;const p=c(h);for(const f in s)s[f].protectedKeys={};return p}return{animateChanges:c,setActive:u,setAnimateFunction:l,getState:()=>s,reset:()=>{s=qm()}}}function R5(e,n){return typeof n=="string"?n!==e:Array.isArray(n)?!Ox(n,e):!1}function Ur(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function qm(){return{animate:Ur(!0),whileInView:Ur(),whileHover:Ur(),whileTap:Ur(),whileDrag:Ur(),whileFocus:Ur(),exit:Ur()}}class Sr{constructor(n){this.isMounted=!1,this.node=n}update(){}}class B5 extends Sr{constructor(n){super(n),n.animationState||(n.animationState=P5(n))}updateAnimationControlsSubscription(){const{animate:n}=this.node.getProps();Vl(n)&&(this.unmountControls=n.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:n}=this.node.getProps(),{animate:s}=this.node.prevProps||{};n!==s&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let L5=0;class z5 extends Sr{constructor(){super(...arguments),this.id=L5++}update(){if(!this.node.presenceContext)return;const{isPresent:n,onExitComplete:s}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||n===i)return;const o=this.node.animationState.setActive("exit",!n);s&&!n&&o.then(()=>{s(this.id)})}mount(){const{register:n,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),n&&(this.unmount=n(this.id))}unmount(){}}const O5={animation:{Feature:B5},exit:{Feature:z5}};function Hi(e,n,s,i={passive:!0}){return e.addEventListener(n,s,i),()=>e.removeEventListener(n,s)}function Zi(e){return{point:{x:e.pageX,y:e.pageY}}}const V5=e=>n=>gf(n)&&e(n,Zi(n));function Bi(e,n,s,i){return Hi(e,n,V5(s),i)}const $x=1e-4,$5=1-$x,H5=1+$x,Hx=.01,U5=0-Hx,W5=0+Hx;function Dn(e){return e.max-e.min}function K5(e,n,s){return Math.abs(e-n)<=s}function Zm(e,n,s,i=.5){e.origin=i,e.originPoint=$t(n.min,n.max,e.origin),e.scale=Dn(s)/Dn(n),e.translate=$t(s.min,s.max,e.origin)-e.originPoint,(e.scale>=$5&&e.scale<=H5||isNaN(e.scale))&&(e.scale=1),(e.translate>=U5&&e.translate<=W5||isNaN(e.translate))&&(e.translate=0)}function Li(e,n,s,i){Zm(e.x,n.x,s.x,i?i.originX:void 0),Zm(e.y,n.y,s.y,i?i.originY:void 0)}function Ym(e,n,s){e.min=s.min+n.min,e.max=e.min+Dn(n)}function G5(e,n,s){Ym(e.x,n.x,s.x),Ym(e.y,n.y,s.y)}function Qm(e,n,s){e.min=n.min-s.min,e.max=e.min+Dn(n)}function Tl(e,n,s){Qm(e.x,n.x,s.x),Qm(e.y,n.y,s.y)}function as(e){return[e("x"),e("y")]}const Ux=({current:e})=>e?e.ownerDocument.defaultView:null,Xm=(e,n)=>Math.abs(e-n);function q5(e,n){const s=Xm(e.x,n.x),i=Xm(e.y,n.y);return Math.sqrt(s**2+i**2)}class Wx{constructor(n,s,{transformPagePoint:i,contextWindow:o=window,dragSnapToOrigin:l=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Wd(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,y=q5(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!y)return;const{point:v}=m,{timestamp:C}=gn;this.history.push({...v,timestamp:C});const{onStart:w,onMove:F}=this.handlers;b||(w&&w(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),F&&F(this.lastMoveEvent,m)},this.handlePointerMove=(m,b)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Ud(b,this.transformPagePoint),Bt.update(this.updatePoint,!0)},this.handlePointerUp=(m,b)=>{this.end();const{onEnd:y,onSessionEnd:v,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Wd(m.type==="pointercancel"?this.lastMoveEventInfo:Ud(b,this.transformPagePoint),this.history);this.startEvent&&y&&y(m,w),v&&v(m,w)},!gf(n))return;this.dragSnapToOrigin=l,this.handlers=s,this.transformPagePoint=i,this.distanceThreshold=c,this.contextWindow=o||window;const u=Zi(n),h=Ud(u,this.transformPagePoint),{point:g}=h,{timestamp:p}=gn;this.history=[{...g,timestamp:p}];const{onSessionStart:f}=s;f&&f(n,Wd(h,this.history)),this.removeListeners=Ki(Bi(this.contextWindow,"pointermove",this.handlePointerMove),Bi(this.contextWindow,"pointerup",this.handlePointerUp),Bi(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(n){this.handlers=n}end(){this.removeListeners&&this.removeListeners(),wr(this.updatePoint)}}function Ud(e,n){return n?{point:n(e.point)}:e}function Jm(e,n){return{x:e.x-n.x,y:e.y-n.y}}function Wd({point:e},n){return{point:e,delta:Jm(e,Kx(n)),offset:Jm(e,Z5(n)),velocity:Y5(n,.1)}}function Z5(e){return e[0]}function Kx(e){return e[e.length-1]}function Y5(e,n){if(e.length<2)return{x:0,y:0};let s=e.length-1,i=null;const o=Kx(e);for(;s>=0&&(i=e[s],!(o.timestamp-i.timestamp>Fs(n)));)s--;if(!i)return{x:0,y:0};const l=os(o.timestamp-i.timestamp);if(l===0)return{x:0,y:0};const c={x:(o.x-i.x)/l,y:(o.y-i.y)/l};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function Q5(e,{min:n,max:s},i){return n!==void 0&&e<n?e=i?$t(n,e,i.min):Math.max(e,n):s!==void 0&&e>s&&(e=i?$t(s,e,i.max):Math.min(e,s)),e}function e0(e,n,s){return{min:n!==void 0?e.min+n:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function X5(e,{top:n,left:s,bottom:i,right:o}){return{x:e0(e.x,s,o),y:e0(e.y,n,i)}}function t0(e,n){let s=n.min-e.min,i=n.max-e.max;return n.max-n.min<e.max-e.min&&([s,i]=[i,s]),{min:s,max:i}}function J5(e,n){return{x:t0(e.x,n.x),y:t0(e.y,n.y)}}function e3(e,n){let s=.5;const i=Dn(e),o=Dn(n);return o>i?s=zi(n.min,n.max-i,e.min):i>o&&(s=zi(e.min,e.max-o,n.min)),Ks(0,1,s)}function t3(e,n){const s={};return n.min!==void 0&&(s.min=n.min-e.min),n.max!==void 0&&(s.max=n.max-e.min),s}const Mu=.35;function n3(e=Mu){return e===!1?e=0:e===!0&&(e=Mu),{x:n0(e,"left","right"),y:n0(e,"top","bottom")}}function n0(e,n,s){return{min:s0(e,n),max:s0(e,s)}}function s0(e,n){return typeof e=="number"?e:e[n]||0}const s3=new WeakMap;class r3{constructor(n){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=tn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=n}start(n,{snapToCursor:s=!1,distanceThreshold:i}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const l=f=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(Zi(f).point)},c=(f,m)=>{const{drag:b,dragPropagation:y,onDragStart:v}=this.getProps();if(b&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=dw(b),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),as(w=>{let F=this.getAxisMotionValue(w).get()||0;if(Ms.test(F)){const{projection:j}=this.visualElement;if(j&&j.layout){const T=j.layout.layoutBox[w];T&&(F=Dn(T)*(parseFloat(F)/100))}}this.originPoint[w]=F}),v&&Bt.postRender(()=>v(f,m)),Du(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},u=(f,m)=>{this.latestPointerEvent=f,this.latestPanInfo=m;const{dragPropagation:b,dragDirectionLock:y,onDirectionLock:v,onDrag:C}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:w}=m;if(y&&this.currentDirection===null){this.currentDirection=a3(w),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",m.point,w),this.updateAxis("y",m.point,w),this.visualElement.render(),C&&C(f,m)},h=(f,m)=>{this.latestPointerEvent=f,this.latestPanInfo=m,this.stop(f,m),this.latestPointerEvent=null,this.latestPanInfo=null},g=()=>as(f=>this.getAnimationState(f)==="paused"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new Wx(n,{onSessionStart:l,onStart:c,onMove:u,onSessionEnd:h,resumeAnimation:g},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:i,contextWindow:Ux(this.visualElement)})}stop(n,s){const i=n||this.latestPointerEvent,o=s||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!o||!i)return;const{velocity:c}=o;this.startAnimation(c);const{onDragEnd:u}=this.getProps();u&&Bt.postRender(()=>u(i,o))}cancel(){this.isDragging=!1;const{projection:n,animationState:s}=this.visualElement;n&&(n.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(n,s,i){const{drag:o}=this.getProps();if(!i||!il(n,o,this.currentDirection))return;const l=this.getAxisMotionValue(n);let c=this.originPoint[n]+i[n];this.constraints&&this.constraints[n]&&(c=Q5(c,this.constraints[n],this.elastic[n])),l.set(c)}resolveConstraints(){const{dragConstraints:n,dragElastic:s}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,o=this.constraints;n&&Ra(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=X5(i.layoutBox,n):this.constraints=!1,this.elastic=n3(s),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&as(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=t3(i.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:n,onMeasureDragConstraints:s}=this.getProps();if(!n||!Ra(n))return!1;const i=n.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const l=i5(i,o.root,this.visualElement.getTransformPagePoint());let c=J5(o.layout.layoutBox,l);if(s){const u=s(s5(c));this.hasMutatedConstraints=!!u,u&&(c=Ax(u))}return c}startAnimation(n){const{drag:s,dragMomentum:i,dragElastic:o,dragTransition:l,dragSnapToOrigin:c,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},g=as(p=>{if(!il(p,s,this.currentDirection))return;let f=h&&h[p]||{};c&&(f={min:0,max:0});const m=o?200:1e6,b=o?40:1e7,y={type:"inertia",velocity:i?n[p]:0,bounceStiffness:m,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...l,...f};return this.startAxisValueAnimation(p,y)});return Promise.all(g).then(u)}startAxisValueAnimation(n,s){const i=this.getAxisMotionValue(n);return Du(this.visualElement,n),i.start(Nf(n,i,0,s,this.visualElement,!1))}stopAnimation(){as(n=>this.getAxisMotionValue(n).stop())}pauseAnimation(){as(n=>this.getAxisMotionValue(n).animation?.pause())}getAnimationState(n){return this.getAxisMotionValue(n).animation?.state}getAxisMotionValue(n){const s=`_drag${n.toUpperCase()}`,i=this.visualElement.getProps(),o=i[s];return o||this.visualElement.getValue(n,(i.initial?i.initial[n]:void 0)||0)}snapToCursor(n){as(s=>{const{drag:i}=this.getProps();if(!il(s,i,this.currentDirection))return;const{projection:o}=this.visualElement,l=this.getAxisMotionValue(s);if(o&&o.layout){const{min:c,max:u}=o.layout.layoutBox[s];l.set(n[s]-$t(c,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:n,dragConstraints:s}=this.getProps(),{projection:i}=this.visualElement;if(!Ra(s)||!i||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};as(c=>{const u=this.getAxisMotionValue(c);if(u&&this.constraints!==!1){const h=u.get();o[c]=e3({min:h,max:h},this.constraints[c])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),as(c=>{if(!il(c,n,null))return;const u=this.getAxisMotionValue(c),{min:h,max:g}=this.constraints[c];u.set($t(h,g,o[c]))})}addListeners(){if(!this.visualElement.current)return;s3.set(this.visualElement,this);const n=this.visualElement.current,s=Bi(n,"pointerdown",h=>{const{drag:g,dragListener:p=!0}=this.getProps();g&&p&&this.start(h)}),i=()=>{const{dragConstraints:h}=this.getProps();Ra(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,l=o.addEventListener("measure",i);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),Bt.read(i);const c=Hi(window,"resize",()=>this.scalePositionWithinConstraints()),u=o.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:g})=>{this.isDragging&&g&&(as(p=>{const f=this.getAxisMotionValue(p);f&&(this.originPoint[p]+=h[p].translate,f.set(f.get()+h[p].translate))}),this.visualElement.render())}));return()=>{c(),s(),l(),u&&u()}}getProps(){const n=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:i=!1,dragPropagation:o=!1,dragConstraints:l=!1,dragElastic:c=Mu,dragMomentum:u=!0}=n;return{...n,drag:s,dragDirectionLock:i,dragPropagation:o,dragConstraints:l,dragElastic:c,dragMomentum:u}}}function il(e,n,s){return(n===!0||n===e)&&(s===null||s===e)}function a3(e,n=10){let s=null;return Math.abs(e.y)>n?s="y":Math.abs(e.x)>n&&(s="x"),s}class i3 extends Sr{constructor(n){super(n),this.removeGroupControls=ls,this.removeListeners=ls,this.controls=new r3(n)}mount(){const{dragControls:n}=this.node.getProps();n&&(this.removeGroupControls=n.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ls}unmount(){this.removeGroupControls(),this.removeListeners()}}const r0=e=>(n,s)=>{e&&Bt.postRender(()=>e(n,s))};class o3 extends Sr{constructor(){super(...arguments),this.removePointerDownListener=ls}onPointerDown(n){this.session=new Wx(n,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ux(this.node)})}createPanHandlers(){const{onPanSessionStart:n,onPanStart:s,onPan:i,onPanEnd:o}=this.node.getProps();return{onSessionStart:r0(n),onStart:r0(s),onMove:i,onEnd:(l,c)=>{delete this.session,o&&Bt.postRender(()=>o(l,c))}}}mount(){this.removePointerDownListener=Bi(this.node.current,"pointerdown",n=>this.onPointerDown(n))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const yl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Kd=!1;class l3 extends N.Component{componentDidMount(){const{visualElement:n,layoutGroup:s,switchLayoutGroup:i,layoutId:o}=this.props,{projection:l}=n;l&&(s.group&&s.group.add(l),i&&i.register&&o&&i.register(l),Kd&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),yl.hasEverUpdated=!0}getSnapshotBeforeUpdate(n){const{layoutDependency:s,visualElement:i,drag:o,isPresent:l}=this.props,{projection:c}=i;return c&&(c.isPresent=l,Kd=!0,o||n.layoutDependency!==s||s===void 0||n.isPresent!==l?c.willUpdate():this.safeToRemove(),n.isPresent!==l&&(l?c.promote():c.relegate()||Bt.postRender(()=>{const u=c.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:n}=this.props.visualElement;n&&(n.root.didUpdate(),mf.postRender(()=>{!n.currentAnimation&&n.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:n,layoutGroup:s,switchLayoutGroup:i}=this.props,{projection:o}=n;Kd=!0,o&&(o.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(o),i&&i.deregister&&i.deregister(o))}safeToRemove(){const{safeToRemove:n}=this.props;n&&n()}render(){return null}}function Gx(e){const[n,s]=mx(),i=N.useContext(Gu);return r.jsx(l3,{...e,layoutGroup:i,switchLayoutGroup:N.useContext(_x),isPresent:n,safeToRemove:s})}function c3(e,n,s){const i=Cn(e)?e:Ua(e);return i.start(Nf("",i,n,s)),i.animation}const d3=(e,n)=>e.depth-n.depth;class u3{constructor(){this.children=[],this.isDirty=!1}add(n){Yu(this.children,n),this.isDirty=!0}remove(n){Qu(this.children,n),this.isDirty=!0}forEach(n){this.isDirty&&this.children.sort(d3),this.isDirty=!1,this.children.forEach(n)}}function f3(e,n){const s=Vn.now(),i=({timestamp:o})=>{const l=o-s;l>=n&&(wr(i),e(l-n))};return Bt.setup(i,!0),()=>wr(i)}const qx=["TopLeft","TopRight","BottomLeft","BottomRight"],h3=qx.length,a0=e=>typeof e=="string"?parseFloat(e):e,i0=e=>typeof e=="number"||Qe.test(e);function p3(e,n,s,i,o,l){o?(e.opacity=$t(0,s.opacity??1,m3(i)),e.opacityExit=$t(n.opacity??1,0,g3(i))):l&&(e.opacity=$t(n.opacity??1,s.opacity??1,i));for(let c=0;c<h3;c++){const u=`border${qx[c]}Radius`;let h=o0(n,u),g=o0(s,u);if(h===void 0&&g===void 0)continue;h||(h=0),g||(g=0),h===0||g===0||i0(h)===i0(g)?(e[u]=Math.max($t(a0(h),a0(g),i),0),(Ms.test(g)||Ms.test(h))&&(e[u]+="%")):e[u]=g}(n.rotate||s.rotate)&&(e.rotate=$t(n.rotate||0,s.rotate||0,i))}function o0(e,n){return e[n]!==void 0?e[n]:e.borderRadius}const m3=Zx(0,.5,Ig),g3=Zx(.5,.95,ls);function Zx(e,n,s){return i=>i<e?0:i>n?1:s(zi(e,n,i))}function l0(e,n){e.min=n.min,e.max=n.max}function bs(e,n){l0(e.x,n.x),l0(e.y,n.y)}function c0(e,n){e.translate=n.translate,e.scale=n.scale,e.originPoint=n.originPoint,e.origin=n.origin}function d0(e,n,s,i,o){return e-=n,e=Al(e,1/s,i),o!==void 0&&(e=Al(e,1/o,i)),e}function x3(e,n=0,s=1,i=.5,o,l=e,c=e){if(Ms.test(n)&&(n=parseFloat(n),n=$t(c.min,c.max,n/100)-c.min),typeof n!="number")return;let u=$t(l.min,l.max,i);e===l&&(u-=n),e.min=d0(e.min,n,s,u,o),e.max=d0(e.max,n,s,u,o)}function u0(e,n,[s,i,o],l,c){x3(e,n[s],n[i],n[o],n.scale,l,c)}const b3=["x","scaleX","originX"],v3=["y","scaleY","originY"];function f0(e,n,s,i){u0(e.x,n,b3,s?s.x:void 0,i?i.x:void 0),u0(e.y,n,v3,s?s.y:void 0,i?i.y:void 0)}function h0(e){return e.translate===0&&e.scale===1}function Yx(e){return h0(e.x)&&h0(e.y)}function p0(e,n){return e.min===n.min&&e.max===n.max}function y3(e,n){return p0(e.x,n.x)&&p0(e.y,n.y)}function m0(e,n){return Math.round(e.min)===Math.round(n.min)&&Math.round(e.max)===Math.round(n.max)}function Qx(e,n){return m0(e.x,n.x)&&m0(e.y,n.y)}function g0(e){return Dn(e.x)/Dn(e.y)}function x0(e,n){return e.translate===n.translate&&e.scale===n.scale&&e.originPoint===n.originPoint}class w3{constructor(){this.members=[]}add(n){Yu(this.members,n),n.scheduleRender()}remove(n){if(Qu(this.members,n),n===this.prevLead&&(this.prevLead=void 0),n===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(n){const s=this.members.findIndex(o=>n===o);if(s===0)return!1;let i;for(let o=s;o>=0;o--){const l=this.members[o];if(l.isPresent!==!1){i=l;break}}return i?(this.promote(i),!0):!1}promote(n,s){const i=this.lead;if(n!==i&&(this.prevLead=i,this.lead=n,n.show(),i)){i.instance&&i.scheduleRender(),n.scheduleRender(),n.resumeFrom=i,s&&(n.resumeFrom.preserveOpacity=!0),i.snapshot&&(n.snapshot=i.snapshot,n.snapshot.latestValues=i.animationValues||i.latestValues),n.root&&n.root.isUpdating&&(n.isLayoutDirty=!0);const{crossfade:o}=n.options;o===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(n=>{const{options:s,resumingFrom:i}=n;s.onExitComplete&&s.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(n=>{n.instance&&n.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function k3(e,n,s){let i="";const o=e.x.translate/n.x,l=e.y.translate/n.y,c=s?.z||0;if((o||l||c)&&(i=`translate3d(${o}px, ${l}px, ${c}px) `),(n.x!==1||n.y!==1)&&(i+=`scale(${1/n.x}, ${1/n.y}) `),s){const{transformPerspective:g,rotate:p,rotateX:f,rotateY:m,skewX:b,skewY:y}=s;g&&(i=`perspective(${g}px) ${i}`),p&&(i+=`rotate(${p}deg) `),f&&(i+=`rotateX(${f}deg) `),m&&(i+=`rotateY(${m}deg) `),b&&(i+=`skewX(${b}deg) `),y&&(i+=`skewY(${y}deg) `)}const u=e.x.scale*n.x,h=e.y.scale*n.y;return(u!==1||h!==1)&&(i+=`scale(${u}, ${h})`),i||"none"}const Gd=["","X","Y","Z"],S3=1e3;let C3=0;function qd(e,n,s,i){const{latestValues:o}=n;o[e]&&(s[e]=o[e],n.setStaticValue(e,0),i&&(i[e]=0))}function Xx(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:n}=e.options;if(!n)return;const s=Bx(n);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:o,layoutId:l}=e.options;window.MotionCancelOptimisedAnimation(s,"transform",Bt,!(o||l))}const{parent:i}=e;i&&!i.hasCheckedOptimisedAppear&&Xx(i)}function Jx({attachResizeListener:e,defaultParent:n,measureScroll:s,checkIsScrollRoot:i,resetTransform:o}){return class{constructor(c={},u=n?.()){this.id=C3++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(_3),this.nodes.forEach(D3),this.nodes.forEach(F3),this.nodes.forEach(E3)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new u3)}addEventListener(c,u){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new ef),this.eventHandlers.get(c).add(u)}notifyListeners(c,...u){const h=this.eventHandlers.get(c);h&&h.notify(...u)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=px(c)&&!gw(c),this.instance=c;const{layoutId:u,layout:h,visualElement:g}=this.options;if(g&&!g.current&&g.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||u)&&(this.isLayoutDirty=!0),e){let p,f=0;const m=()=>this.root.updateBlockedByResize=!1;Bt.read(()=>{f=window.innerWidth}),e(c,()=>{const b=window.innerWidth;b!==f&&(f=b,this.root.updateBlockedByResize=!0,p&&p(),p=f3(m,250),yl.hasAnimatedSinceResize&&(yl.hasAnimatedSinceResize=!1,this.nodes.forEach(y0)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&g&&(u||h)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:f,hasRelativeLayoutChanged:m,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||g.getDefaultTransition()||B3,{onLayoutAnimationStart:v,onLayoutAnimationComplete:C}=g.getProps(),w=!this.targetLayout||!Qx(this.targetLayout,b),F=!f&&m;if(this.options.layoutRoot||this.resumeFrom||F||f&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const j={...hf(y,"layout"),onPlay:v,onComplete:C};(g.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j),this.setAnimationOrigin(p,F)}else f||y0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),wr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(M3),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Xx(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const f=this.path[p];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(b0);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(v0);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(T3),this.nodes.forEach(j3),this.nodes.forEach(N3)):this.nodes.forEach(v0),this.clearAllSnapshots();const u=Vn.now();gn.delta=Ks(0,1e3/60,u-gn.timestamp),gn.timestamp=u,gn.isProcessing=!0,Rd.update.process(gn),Rd.preRender.process(gn),Rd.render.process(gn),gn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,mf.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(A3),this.sharedNodes.forEach(I3)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Bt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Bt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Dn(this.snapshot.measuredBox.x)&&!Dn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=tn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(u=!1),u&&this.instance){const h=i(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:h,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!o)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!Yx(this.projectionDelta),h=this.getTransformTemplate(),g=h?h(this.latestValues,""):void 0,p=g!==this.prevTransformTemplateValue;c&&this.instance&&(u||Kr(this.latestValues)||p)&&(o(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return c&&(h=this.removeTransform(h)),L3(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return tn();const u=c.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(z3))){const{scroll:g}=this.root;g&&(Ba(u.x,g.offset.x),Ba(u.y,g.offset.y))}return u}removeElementScroll(c){const u=tn();if(bs(u,c),this.scroll?.wasRoot)return u;for(let h=0;h<this.path.length;h++){const g=this.path[h],{scroll:p,options:f}=g;g!==this.root&&p&&f.layoutScroll&&(p.wasRoot&&bs(u,c),Ba(u.x,p.offset.x),Ba(u.y,p.offset.y))}return u}applyTransform(c,u=!1){const h=tn();bs(h,c);for(let g=0;g<this.path.length;g++){const p=this.path[g];!u&&p.options.layoutScroll&&p.scroll&&p!==p.root&&La(h,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Kr(p.latestValues)&&La(h,p.latestValues)}return Kr(this.latestValues)&&La(h,this.latestValues),h}removeTransform(c){const u=tn();bs(u,c);for(let h=0;h<this.path.length;h++){const g=this.path[h];if(!g.instance||!Kr(g.latestValues))continue;_u(g.latestValues)&&g.updateSnapshot();const p=tn(),f=g.measurePageBox();bs(p,f),f0(u,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,p)}return Kr(this.latestValues)&&f0(u,this.latestValues),u}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==gn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==u;if(!(c||h&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:f}=this.options;if(!this.layout||!(p||f))return;this.resolvedRelativeTargetAt=gn.timestamp;const m=this.getClosestProjectingParent();m&&this.linkedParentVersion!==m.layoutVersion&&!m.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(m&&m.layout?this.createRelativeTarget(m,this.layout.layoutBox,m.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=tn(),this.targetWithTransforms=tn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),G5(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):bs(this.target,this.layout.layoutBox),Dx(this.target,this.targetDelta)):bs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?this.createRelativeTarget(m,this.target,m.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||_u(this.parent.latestValues)||Tx(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(c,u,h){this.relativeParent=c,this.linkedParentVersion=c.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tn(),this.relativeTargetOrigin=tn(),Tl(this.relativeTargetOrigin,u,h),bs(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const c=this.getLead(),u=!!this.resumingFrom||this!==c;let h=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(h=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===gn.timestamp&&(h=!1),h)return;const{layout:g,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||p))return;bs(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;a5(this.layoutCorrected,this.treeScale,this.path,u),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=tn());const{target:b}=c;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(c0(this.prevProjectionDelta.x,this.projectionDelta.x),c0(this.prevProjectionDelta.y,this.projectionDelta.y)),Li(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!x0(this.projectionDelta.x,this.prevProjectionDelta.x)||!x0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.visualElement?.scheduleRender(),c){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=za(),this.projectionDelta=za(),this.projectionDeltaWithTransform=za()}setAnimationOrigin(c,u=!1){const h=this.snapshot,g=h?h.latestValues:{},p={...this.latestValues},f=za();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const m=tn(),b=h?h.source:void 0,y=this.layout?this.layout.source:void 0,v=b!==y,C=this.getStack(),w=!C||C.members.length<=1,F=!!(v&&!w&&this.options.crossfade===!0&&!this.path.some(R3));this.animationProgress=0;let j;this.mixTargetDelta=T=>{const z=T/1e3;w0(f.x,c.x,z),w0(f.y,c.y,z),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Tl(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),P3(this.relativeTarget,this.relativeTargetOrigin,m,z),j&&y3(this.relativeTarget,j)&&(this.isProjectionDirty=!1),j||(j=tn()),bs(j,this.relativeTarget)),v&&(this.animationValues=p,p3(p,g,this.latestValues,z,F,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(wr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Bt.update(()=>{yl.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ua(0)),this.currentAnimation=c3(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),c.onUpdate&&c.onUpdate(u)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(S3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:u,target:h,layout:g,latestValues:p}=c;if(!(!u||!h||!g)){if(this!==c&&this.layout&&g&&e1(this.options.animationType,this.layout.layoutBox,g.layoutBox)){h=this.target||tn();const f=Dn(this.layout.layoutBox.x);h.x.min=c.target.x.min,h.x.max=h.x.min+f;const m=Dn(this.layout.layoutBox.y);h.y.min=c.target.y.min,h.y.max=h.y.min+m}bs(u,h),La(u,p),Li(this.projectionDeltaWithTransform,this.layoutCorrected,u,p)}}registerSharedNode(c,u){this.sharedNodes.has(c)||this.sharedNodes.set(c,new w3),this.sharedNodes.get(c).add(u);const g=u.options.initialPromotionConfig;u.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(u):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){const{layoutId:c}=this.options;return c?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:c}=this.options;return c?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:u,preserveFollowOpacity:h}={}){const g=this.getStack();g&&g.promote(this,h),c&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let u=!1;const{latestValues:h}=c;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(u=!0),!u)return;const g={};h.z&&qd("z",c,g,this.animationValues);for(let p=0;p<Gd.length;p++)qd(`rotate${Gd[p]}`,c,g,this.animationValues),qd(`skew${Gd[p]}`,c,g,this.animationValues);c.render();for(const p in g)c.setStaticValue(p,g[p]),this.animationValues&&(this.animationValues[p]=g[p]);c.scheduleRender()}applyProjectionStyles(c,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=vl(u?.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none";return}const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=vl(u?.pointerEvents)||""),this.hasProjected&&!Kr(this.latestValues)&&(c.transform=h?h({},""):"none",this.hasProjected=!1);return}c.visibility="";const p=g.animationValues||g.latestValues;this.applyTransformsToTarget();let f=k3(this.projectionDeltaWithTransform,this.treeScale,p);h&&(f=h(p,f)),c.transform=f;const{x:m,y:b}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${b.origin*100}% 0`,g.animationValues?c.opacity=g===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=g===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const y in Nu){if(p[y]===void 0)continue;const{correct:v,applyTo:C,isCSSVariable:w}=Nu[y],F=f==="none"?p[y]:v(p[y],g);if(C){const j=C.length;for(let T=0;T<j;T++)c[C[T]]=F}else w?this.options.visualElement.renderState.vars[y]=F:c[y]=F}this.options.layoutId&&(c.pointerEvents=g===this?vl(u?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>c.currentAnimation?.stop()),this.root.nodes.forEach(b0),this.root.sharedNodes.clear()}}}function j3(e){e.updateLayout()}function N3(e){const n=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:i}=e.layout,{animationType:o}=e.options,l=n.source!==e.layout.source;o==="size"?as(p=>{const f=l?n.measuredBox[p]:n.layoutBox[p],m=Dn(f);f.min=s[p].min,f.max=f.min+m}):e1(o,n.layoutBox,s)&&as(p=>{const f=l?n.measuredBox[p]:n.layoutBox[p],m=Dn(s[p]);f.max=f.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[p].max=e.relativeTarget[p].min+m)});const c=za();Li(c,s,n.layoutBox);const u=za();l?Li(u,e.applyTransform(i,!0),n.measuredBox):Li(u,s,n.layoutBox);const h=!Yx(c);let g=!1;if(!e.resumeFrom){const p=e.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:f,layout:m}=p;if(f&&m){const b=tn();Tl(b,n.layoutBox,f.layoutBox);const y=tn();Tl(y,s,m.layoutBox),Qx(b,y)||(g=!0),p.options.layoutRoot&&(e.relativeTarget=y,e.relativeTargetOrigin=b,e.relativeParent=p)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:u,layoutDelta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:g})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function _3(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function E3(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function A3(e){e.clearSnapshot()}function b0(e){e.clearMeasurements()}function v0(e){e.isLayoutDirty=!1}function T3(e){const{visualElement:n}=e.options;n&&n.getProps().onBeforeLayoutMeasure&&n.notify("BeforeLayoutMeasure"),e.resetTransform()}function y0(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function D3(e){e.resolveTargetDelta()}function F3(e){e.calcProjection()}function M3(e){e.resetSkewAndRotation()}function I3(e){e.removeLeadSnapshot()}function w0(e,n,s){e.translate=$t(n.translate,0,s),e.scale=$t(n.scale,1,s),e.origin=n.origin,e.originPoint=n.originPoint}function k0(e,n,s,i){e.min=$t(n.min,s.min,i),e.max=$t(n.max,s.max,i)}function P3(e,n,s,i){k0(e.x,n.x,s.x,i),k0(e.y,n.y,s.y,i)}function R3(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const B3={duration:.45,ease:[.4,0,.1,1]},S0=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),C0=S0("applewebkit/")&&!S0("chrome/")?Math.round:ls;function j0(e){e.min=C0(e.min),e.max=C0(e.max)}function L3(e){j0(e.x),j0(e.y)}function e1(e,n,s){return e==="position"||e==="preserve-aspect"&&!K5(g0(n),g0(s),.2)}function z3(e){return e!==e.root&&e.scroll?.wasRoot}const O3=Jx({attachResizeListener:(e,n)=>Hi(e,"resize",n),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Zd={current:void 0},t1=Jx({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Zd.current){const e=new O3({});e.mount(window),e.setOptions({layoutScroll:!0}),Zd.current=e}return Zd.current},resetTransform:(e,n)=>{e.style.transform=n!==void 0?n:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),V3={pan:{Feature:o3},drag:{Feature:i3,ProjectionNode:t1,MeasureLayout:Gx}};function N0(e,n,s){const{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover",s==="Start");const o="onHover"+s,l=i[o];l&&Bt.postRender(()=>l(n,Zi(n)))}class $3 extends Sr{mount(){const{current:n}=this.node;n&&(this.unmount=uw(n,(s,i)=>(N0(this.node,i,"Start"),o=>N0(this.node,o,"End"))))}unmount(){}}class H3 extends Sr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let n=!1;try{n=this.node.current.matches(":focus-visible")}catch{n=!0}!n||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ki(Hi(this.node.current,"focus",()=>this.onFocus()),Hi(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function _0(e,n,s){const{props:i}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap",s==="Start");const o="onTap"+(s==="End"?"":s),l=i[o];l&&Bt.postRender(()=>l(n,Zi(n)))}class U3 extends Sr{mount(){const{current:n}=this.node;n&&(this.unmount=mw(n,(s,i)=>(_0(this.node,i,"Start"),(o,{success:l})=>_0(this.node,o,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Iu=new WeakMap,Yd=new WeakMap,W3=e=>{const n=Iu.get(e.target);n&&n(e)},K3=e=>{e.forEach(W3)};function G3({root:e,...n}){const s=e||document;Yd.has(s)||Yd.set(s,{});const i=Yd.get(s),o=JSON.stringify(n);return i[o]||(i[o]=new IntersectionObserver(K3,{root:e,...n})),i[o]}function q3(e,n,s){const i=G3(n);return Iu.set(e,s),i.observe(e),()=>{Iu.delete(e),i.unobserve(e)}}const Z3={some:0,all:1};class Y3 extends Sr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:n={}}=this.node.getProps(),{root:s,margin:i,amount:o="some",once:l}=n,c={root:s?s.current:void 0,rootMargin:i,threshold:typeof o=="number"?o:Z3[o]},u=h=>{const{isIntersecting:g}=h;if(this.isInView===g||(this.isInView=g,l&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:p,onViewportLeave:f}=this.node.getProps(),m=g?p:f;m&&m(h)};return q3(this.node.current,c,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:n,prevProps:s}=this.node;["amount","margin","root"].some(Q3(n,s))&&this.startObserver()}unmount(){}}function Q3({viewport:e={}},{viewport:n={}}={}){return s=>e[s]!==n[s]}const X3={inView:{Feature:Y3},tap:{Feature:U3},focus:{Feature:H3},hover:{Feature:$3}},J3={layout:{ProjectionNode:t1,MeasureLayout:Gx}},ek={...O5,...X3,...V3,...J3},je=n5(ek,m5),_f="/assets/5f8732ee23725e4e0895553baa1c8e03e361ca7a-DtxtzMCA.png";function tk(e,n){const s=N.createContext(n),i=l=>{const{children:c,...u}=l,h=N.useMemo(()=>u,Object.values(u));return r.jsx(s.Provider,{value:h,children:c})};i.displayName=e+"Provider";function o(l){const c=N.useContext(s);if(c)return c;if(n!==void 0)return n;throw new Error(`\`${l}\` must be used within \`${e}\``)}return[i,o]}function n1(e,n=[]){let s=[];function i(l,c){const u=N.createContext(c),h=s.length;s=[...s,c];const g=f=>{const{scope:m,children:b,...y}=f,v=m?.[e]?.[h]||u,C=N.useMemo(()=>y,Object.values(y));return r.jsx(v.Provider,{value:C,children:b})};g.displayName=l+"Provider";function p(f,m){const b=m?.[e]?.[h]||u,y=N.useContext(b);if(y)return y;if(c!==void 0)return c;throw new Error(`\`${f}\` must be used within \`${l}\``)}return[g,p]}const o=()=>{const l=s.map(c=>N.createContext(c));return function(u){const h=u?.[e]||l;return N.useMemo(()=>({[`__scope${e}`]:{...u,[e]:h}}),[u,h])}};return o.scopeName=e,[i,nk(o,...n)]}function nk(...e){const n=e[0];if(e.length===1)return n;const s=()=>{const i=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(l){const c=i.reduce((u,{useScope:h,scopeName:g})=>{const f=h(l)[`__scope${g}`];return{...u,...f}},{});return N.useMemo(()=>({[`__scope${n.scopeName}`]:c}),[c])}};return s.scopeName=n.scopeName,s}function E0(e,n){if(typeof e=="function")return e(n);e!=null&&(e.current=n)}function Ef(...e){return n=>{let s=!1;const i=e.map(o=>{const l=E0(o,n);return!s&&typeof l=="function"&&(s=!0),l});if(s)return()=>{for(let o=0;o<i.length;o++){const l=i[o];typeof l=="function"?l():E0(e[o],null)}}}}function Zs(...e){return N.useCallback(Ef(...e),e)}function Ws(e,n,{checkForDefaultPrevented:s=!0}={}){return function(o){if(e?.(o),s===!1||!o.defaultPrevented)return n?.(o)}}var Ui=globalThis?.document?N.useLayoutEffect:()=>{},sk=kg[" useId ".trim().toString()]||(()=>{}),rk=0;function Qd(e){const[n,s]=N.useState(sk());return Ui(()=>{s(i=>i??String(rk++))},[e]),e||(n?`radix-${n}`:"")}var ak=kg[" useInsertionEffect ".trim().toString()]||Ui;function ik({prop:e,defaultProp:n,onChange:s=()=>{},caller:i}){const[o,l,c]=ok({defaultProp:n,onChange:s}),u=e!==void 0,h=u?e:o;{const p=N.useRef(e!==void 0);N.useEffect(()=>{const f=p.current;f!==u&&console.warn(`${i} is changing from ${f?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=u},[u,i])}const g=N.useCallback(p=>{if(u){const f=lk(p)?p(e):p;f!==e&&c.current?.(f)}else l(p)},[u,e,l,c]);return[h,g]}function ok({defaultProp:e,onChange:n}){const[s,i]=N.useState(e),o=N.useRef(s),l=N.useRef(n);return ak(()=>{l.current=n},[n]),N.useEffect(()=>{o.current!==s&&(l.current?.(s),o.current=s)},[s,o]),[s,i,l]}function lk(e){return typeof e=="function"}var Af=wg();const s1=Ll(Af);function ck(e){const n=dk(e),s=N.forwardRef((i,o)=>{const{children:l,...c}=i,u=N.Children.toArray(l),h=u.find(fk);if(h){const g=h.props.children,p=u.map(f=>f===h?N.Children.count(g)>1?N.Children.only(null):N.isValidElement(g)?g.props.children:null:f);return r.jsx(n,{...c,ref:o,children:N.isValidElement(g)?N.cloneElement(g,void 0,p):null})}return r.jsx(n,{...c,ref:o,children:l})});return s.displayName=`${e}.Slot`,s}function dk(e){const n=N.forwardRef((s,i)=>{const{children:o,...l}=s;if(N.isValidElement(o)){const c=pk(o),u=hk(l,o.props);return o.type!==N.Fragment&&(u.ref=i?Ef(i,c):c),N.cloneElement(o,u)}return N.Children.count(o)>1?N.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var uk=Symbol("radix.slottable");function fk(e){return N.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===uk}function hk(e,n){const s={...n};for(const i in n){const o=e[i],l=n[i];/^on[A-Z]/.test(i)?o&&l?s[i]=(...u)=>{const h=l(...u);return o(...u),h}:o&&(s[i]=o):i==="style"?s[i]={...o,...l}:i==="className"&&(s[i]=[o,l].filter(Boolean).join(" "))}return{...e,...s}}function pk(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var mk=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ys=mk.reduce((e,n)=>{const s=ck(`Primitive.${n}`),i=N.forwardRef((o,l)=>{const{asChild:c,...u}=o,h=c?s:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(h,{...u,ref:l})});return i.displayName=`Primitive.${n}`,{...e,[n]:i}},{});function gk(e,n){e&&Af.flushSync(()=>e.dispatchEvent(n))}function Wi(e){const n=N.useRef(e);return N.useEffect(()=>{n.current=e}),N.useMemo(()=>(...s)=>n.current?.(...s),[])}function xk(e,n=globalThis?.document){const s=Wi(e);N.useEffect(()=>{const i=o=>{o.key==="Escape"&&s(o)};return n.addEventListener("keydown",i,{capture:!0}),()=>n.removeEventListener("keydown",i,{capture:!0})},[s,n])}var bk="DismissableLayer",Pu="dismissableLayer.update",vk="dismissableLayer.pointerDownOutside",yk="dismissableLayer.focusOutside",A0,r1=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),a1=N.forwardRef((e,n)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:l,onInteractOutside:c,onDismiss:u,...h}=e,g=N.useContext(r1),[p,f]=N.useState(null),m=p?.ownerDocument??globalThis?.document,[,b]=N.useState({}),y=Zs(n,U=>f(U)),v=Array.from(g.layers),[C]=[...g.layersWithOutsidePointerEventsDisabled].slice(-1),w=v.indexOf(C),F=p?v.indexOf(p):-1,j=g.layersWithOutsidePointerEventsDisabled.size>0,T=F>=w,z=Sk(U=>{const D=U.target,A=[...g.branches].some(H=>H.contains(D));!T||A||(o?.(U),c?.(U),U.defaultPrevented||u?.())},m),B=Ck(U=>{const D=U.target;[...g.branches].some(H=>H.contains(D))||(l?.(U),c?.(U),U.defaultPrevented||u?.())},m);return xk(U=>{F===g.layers.size-1&&(i?.(U),!U.defaultPrevented&&u&&(U.preventDefault(),u()))},m),N.useEffect(()=>{if(p)return s&&(g.layersWithOutsidePointerEventsDisabled.size===0&&(A0=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),g.layersWithOutsidePointerEventsDisabled.add(p)),g.layers.add(p),T0(),()=>{s&&g.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=A0)}},[p,m,s,g]),N.useEffect(()=>()=>{p&&(g.layers.delete(p),g.layersWithOutsidePointerEventsDisabled.delete(p),T0())},[p,g]),N.useEffect(()=>{const U=()=>b({});return document.addEventListener(Pu,U),()=>document.removeEventListener(Pu,U)},[]),r.jsx(Ys.div,{...h,ref:y,style:{pointerEvents:j?T?"auto":"none":void 0,...e.style},onFocusCapture:Ws(e.onFocusCapture,B.onFocusCapture),onBlurCapture:Ws(e.onBlurCapture,B.onBlurCapture),onPointerDownCapture:Ws(e.onPointerDownCapture,z.onPointerDownCapture)})});a1.displayName=bk;var wk="DismissableLayerBranch",kk=N.forwardRef((e,n)=>{const s=N.useContext(r1),i=N.useRef(null),o=Zs(n,i);return N.useEffect(()=>{const l=i.current;if(l)return s.branches.add(l),()=>{s.branches.delete(l)}},[s.branches]),r.jsx(Ys.div,{...e,ref:o})});kk.displayName=wk;function Sk(e,n=globalThis?.document){const s=Wi(e),i=N.useRef(!1),o=N.useRef(()=>{});return N.useEffect(()=>{const l=u=>{if(u.target&&!i.current){let h=function(){i1(vk,s,g,{discrete:!0})};const g={originalEvent:u};u.pointerType==="touch"?(n.removeEventListener("click",o.current),o.current=h,n.addEventListener("click",o.current,{once:!0})):h()}else n.removeEventListener("click",o.current);i.current=!1},c=window.setTimeout(()=>{n.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(c),n.removeEventListener("pointerdown",l),n.removeEventListener("click",o.current)}},[n,s]),{onPointerDownCapture:()=>i.current=!0}}function Ck(e,n=globalThis?.document){const s=Wi(e),i=N.useRef(!1);return N.useEffect(()=>{const o=l=>{l.target&&!i.current&&i1(yk,s,{originalEvent:l},{discrete:!1})};return n.addEventListener("focusin",o),()=>n.removeEventListener("focusin",o)},[n,s]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function T0(){const e=new CustomEvent(Pu);document.dispatchEvent(e)}function i1(e,n,s,{discrete:i}){const o=s.originalEvent.target,l=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});n&&o.addEventListener(e,n,{once:!0}),i?gk(o,l):o.dispatchEvent(l)}var Xd="focusScope.autoFocusOnMount",Jd="focusScope.autoFocusOnUnmount",D0={bubbles:!1,cancelable:!0},jk="FocusScope",o1=N.forwardRef((e,n)=>{const{loop:s=!1,trapped:i=!1,onMountAutoFocus:o,onUnmountAutoFocus:l,...c}=e,[u,h]=N.useState(null),g=Wi(o),p=Wi(l),f=N.useRef(null),m=Zs(n,v=>h(v)),b=N.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;N.useEffect(()=>{if(i){let v=function(j){if(b.paused||!u)return;const T=j.target;u.contains(T)?f.current=T:yr(f.current,{select:!0})},C=function(j){if(b.paused||!u)return;const T=j.relatedTarget;T!==null&&(u.contains(T)||yr(f.current,{select:!0}))},w=function(j){if(document.activeElement===document.body)for(const z of j)z.removedNodes.length>0&&yr(u)};document.addEventListener("focusin",v),document.addEventListener("focusout",C);const F=new MutationObserver(w);return u&&F.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",C),F.disconnect()}}},[i,u,b.paused]),N.useEffect(()=>{if(u){M0.add(b);const v=document.activeElement;if(!u.contains(v)){const w=new CustomEvent(Xd,D0);u.addEventListener(Xd,g),u.dispatchEvent(w),w.defaultPrevented||(Nk(Dk(l1(u)),{select:!0}),document.activeElement===v&&yr(u))}return()=>{u.removeEventListener(Xd,g),setTimeout(()=>{const w=new CustomEvent(Jd,D0);u.addEventListener(Jd,p),u.dispatchEvent(w),w.defaultPrevented||yr(v??document.body,{select:!0}),u.removeEventListener(Jd,p),M0.remove(b)},0)}}},[u,g,p,b]);const y=N.useCallback(v=>{if(!s&&!i||b.paused)return;const C=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,w=document.activeElement;if(C&&w){const F=v.currentTarget,[j,T]=_k(F);j&&T?!v.shiftKey&&w===T?(v.preventDefault(),s&&yr(j,{select:!0})):v.shiftKey&&w===j&&(v.preventDefault(),s&&yr(T,{select:!0})):w===F&&v.preventDefault()}},[s,i,b.paused]);return r.jsx(Ys.div,{tabIndex:-1,...c,ref:m,onKeyDown:y})});o1.displayName=jk;function Nk(e,{select:n=!1}={}){const s=document.activeElement;for(const i of e)if(yr(i,{select:n}),document.activeElement!==s)return}function _k(e){const n=l1(e),s=F0(n,e),i=F0(n.reverse(),e);return[s,i]}function l1(e){const n=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const o=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||o?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)n.push(s.currentNode);return n}function F0(e,n){for(const s of e)if(!Ek(s,{upTo:n}))return s}function Ek(e,{upTo:n}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(n!==void 0&&e===n)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Ak(e){return e instanceof HTMLInputElement&&"select"in e}function yr(e,{select:n=!1}={}){if(e&&e.focus){const s=document.activeElement;e.focus({preventScroll:!0}),e!==s&&Ak(e)&&n&&e.select()}}var M0=Tk();function Tk(){let e=[];return{add(n){const s=e[0];n!==s&&s?.pause(),e=I0(e,n),e.unshift(n)},remove(n){e=I0(e,n),e[0]?.resume()}}}function I0(e,n){const s=[...e],i=s.indexOf(n);return i!==-1&&s.splice(i,1),s}function Dk(e){return e.filter(n=>n.tagName!=="A")}var Fk="Portal",c1=N.forwardRef((e,n)=>{const{container:s,...i}=e,[o,l]=N.useState(!1);Ui(()=>l(!0),[]);const c=s||o&&globalThis?.document?.body;return c?s1.createPortal(r.jsx(Ys.div,{...i,ref:n}),c):null});c1.displayName=Fk;function Mk(e,n){return N.useReducer((s,i)=>n[s][i]??s,e)}var Hl=e=>{const{present:n,children:s}=e,i=Ik(n),o=typeof s=="function"?s({present:i.isPresent}):N.Children.only(s),l=Zs(i.ref,Pk(o));return typeof s=="function"||i.isPresent?N.cloneElement(o,{ref:l}):null};Hl.displayName="Presence";function Ik(e){const[n,s]=N.useState(),i=N.useRef(null),o=N.useRef(e),l=N.useRef("none"),c=e?"mounted":"unmounted",[u,h]=Mk(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const g=ol(i.current);l.current=u==="mounted"?g:"none"},[u]),Ui(()=>{const g=i.current,p=o.current;if(p!==e){const m=l.current,b=ol(g);e?h("MOUNT"):b==="none"||g?.display==="none"?h("UNMOUNT"):h(p&&m!==b?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,h]),Ui(()=>{if(n){let g;const p=n.ownerDocument.defaultView??window,f=b=>{const v=ol(i.current).includes(CSS.escape(b.animationName));if(b.target===n&&v&&(h("ANIMATION_END"),!o.current)){const C=n.style.animationFillMode;n.style.animationFillMode="forwards",g=p.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=C)})}},m=b=>{b.target===n&&(l.current=ol(i.current))};return n.addEventListener("animationstart",m),n.addEventListener("animationcancel",f),n.addEventListener("animationend",f),()=>{p.clearTimeout(g),n.removeEventListener("animationstart",m),n.removeEventListener("animationcancel",f),n.removeEventListener("animationend",f)}}else h("ANIMATION_END")},[n,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:N.useCallback(g=>{i.current=g?getComputedStyle(g):null,s(g)},[])}}function ol(e){return e?.animationName||"none"}function Pk(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var eu=0;function Rk(){N.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??P0()),document.body.insertAdjacentElement("beforeend",e[1]??P0()),eu++,()=>{eu===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),eu--}},[])}function P0(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Ds=function(){return Ds=Object.assign||function(n){for(var s,i=1,o=arguments.length;i<o;i++){s=arguments[i];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(n[l]=s[l])}return n},Ds.apply(this,arguments)};function d1(e,n){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&n.indexOf(i)<0&&(s[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)n.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(s[i[o]]=e[i[o]]);return s}function Bk(e,n,s){if(s||arguments.length===2)for(var i=0,o=n.length,l;i<o;i++)(l||!(i in n))&&(l||(l=Array.prototype.slice.call(n,0,i)),l[i]=n[i]);return e.concat(l||Array.prototype.slice.call(n))}var wl="right-scroll-bar-position",kl="width-before-scroll-bar",Lk="with-scroll-bars-hidden",zk="--removed-body-scroll-bar-size";function tu(e,n){return typeof e=="function"?e(n):e&&(e.current=n),e}function Ok(e,n){var s=N.useState(function(){return{value:e,callback:n,facade:{get current(){return s.value},set current(i){var o=s.value;o!==i&&(s.value=i,s.callback(i,o))}}}})[0];return s.callback=n,s.facade}var Vk=typeof window<"u"?N.useLayoutEffect:N.useEffect,R0=new WeakMap;function $k(e,n){var s=Ok(null,function(i){return e.forEach(function(o){return tu(o,i)})});return Vk(function(){var i=R0.get(s);if(i){var o=new Set(i),l=new Set(e),c=s.current;o.forEach(function(u){l.has(u)||tu(u,null)}),l.forEach(function(u){o.has(u)||tu(u,c)})}R0.set(s,e)},[e]),s}function Hk(e){return e}function Uk(e,n){n===void 0&&(n=Hk);var s=[],i=!1,o={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:e},useMedium:function(l){var c=n(l,i);return s.push(c),function(){s=s.filter(function(u){return u!==c})}},assignSyncMedium:function(l){for(i=!0;s.length;){var c=s;s=[],c.forEach(l)}s={push:function(u){return l(u)},filter:function(){return s}}},assignMedium:function(l){i=!0;var c=[];if(s.length){var u=s;s=[],u.forEach(l),c=s}var h=function(){var p=c;c=[],p.forEach(l)},g=function(){return Promise.resolve().then(h)};g(),s={push:function(p){c.push(p),g()},filter:function(p){return c=c.filter(p),s}}}};return o}function Wk(e){e===void 0&&(e={});var n=Uk(null);return n.options=Ds({async:!0,ssr:!1},e),n}var u1=function(e){var n=e.sideCar,s=d1(e,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=n.read();if(!i)throw new Error("Sidecar medium not found");return N.createElement(i,Ds({},s))};u1.isSideCarExport=!0;function Kk(e,n){return e.useMedium(n),u1}var f1=Wk(),nu=function(){},Ul=N.forwardRef(function(e,n){var s=N.useRef(null),i=N.useState({onScrollCapture:nu,onWheelCapture:nu,onTouchMoveCapture:nu}),o=i[0],l=i[1],c=e.forwardProps,u=e.children,h=e.className,g=e.removeScrollBar,p=e.enabled,f=e.shards,m=e.sideCar,b=e.noRelative,y=e.noIsolation,v=e.inert,C=e.allowPinchZoom,w=e.as,F=w===void 0?"div":w,j=e.gapMode,T=d1(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),z=m,B=$k([s,n]),U=Ds(Ds({},T),o);return N.createElement(N.Fragment,null,p&&N.createElement(z,{sideCar:f1,removeScrollBar:g,shards:f,noRelative:b,noIsolation:y,inert:v,setCallbacks:l,allowPinchZoom:!!C,lockRef:s,gapMode:j}),c?N.cloneElement(N.Children.only(u),Ds(Ds({},U),{ref:B})):N.createElement(F,Ds({},U,{className:h,ref:B}),u))});Ul.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ul.classNames={fullWidth:kl,zeroRight:wl};var Gk=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function qk(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var n=Gk();return n&&e.setAttribute("nonce",n),e}function Zk(e,n){e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n))}function Yk(e){var n=document.head||document.getElementsByTagName("head")[0];n.appendChild(e)}var Qk=function(){var e=0,n=null;return{add:function(s){e==0&&(n=qk())&&(Zk(n,s),Yk(n)),e++},remove:function(){e--,!e&&n&&(n.parentNode&&n.parentNode.removeChild(n),n=null)}}},Xk=function(){var e=Qk();return function(n,s){N.useEffect(function(){return e.add(n),function(){e.remove()}},[n&&s])}},h1=function(){var e=Xk(),n=function(s){var i=s.styles,o=s.dynamic;return e(i,o),null};return n},Jk={left:0,top:0,right:0,gap:0},su=function(e){return parseInt(e||"",10)||0},eS=function(e){var n=window.getComputedStyle(document.body),s=n[e==="padding"?"paddingLeft":"marginLeft"],i=n[e==="padding"?"paddingTop":"marginTop"],o=n[e==="padding"?"paddingRight":"marginRight"];return[su(s),su(i),su(o)]},tS=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Jk;var n=eS(e),s=document.documentElement.clientWidth,i=window.innerWidth;return{left:n[0],top:n[1],right:n[2],gap:Math.max(0,i-s+n[2]-n[0])}},nS=h1(),$a="data-scroll-locked",sS=function(e,n,s,i){var o=e.left,l=e.top,c=e.right,u=e.gap;return s===void 0&&(s="margin"),`
  .`.concat(Lk,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(u,"px ").concat(i,`;
  }
  body[`).concat($a,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([n&&"position: relative ".concat(i,";"),s==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(i,`;
    `),s==="padding"&&"padding-right: ".concat(u,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(wl,` {
    right: `).concat(u,"px ").concat(i,`;
  }
  
  .`).concat(kl,` {
    margin-right: `).concat(u,"px ").concat(i,`;
  }
  
  .`).concat(wl," .").concat(wl,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(kl," .").concat(kl,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat($a,`] {
    `).concat(zk,": ").concat(u,`px;
  }
`)},B0=function(){var e=parseInt(document.body.getAttribute($a)||"0",10);return isFinite(e)?e:0},rS=function(){N.useEffect(function(){return document.body.setAttribute($a,(B0()+1).toString()),function(){var e=B0()-1;e<=0?document.body.removeAttribute($a):document.body.setAttribute($a,e.toString())}},[])},aS=function(e){var n=e.noRelative,s=e.noImportant,i=e.gapMode,o=i===void 0?"margin":i;rS();var l=N.useMemo(function(){return tS(o)},[o]);return N.createElement(nS,{styles:sS(l,!n,o,s?"":"!important")})},Ru=!1;if(typeof window<"u")try{var ll=Object.defineProperty({},"passive",{get:function(){return Ru=!0,!0}});window.addEventListener("test",ll,ll),window.removeEventListener("test",ll,ll)}catch{Ru=!1}var Ea=Ru?{passive:!1}:!1,iS=function(e){return e.tagName==="TEXTAREA"},p1=function(e,n){if(!(e instanceof Element))return!1;var s=window.getComputedStyle(e);return s[n]!=="hidden"&&!(s.overflowY===s.overflowX&&!iS(e)&&s[n]==="visible")},oS=function(e){return p1(e,"overflowY")},lS=function(e){return p1(e,"overflowX")},L0=function(e,n){var s=n.ownerDocument,i=n;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var o=m1(e,i);if(o){var l=g1(e,i),c=l[1],u=l[2];if(c>u)return!0}i=i.parentNode}while(i&&i!==s.body);return!1},cS=function(e){var n=e.scrollTop,s=e.scrollHeight,i=e.clientHeight;return[n,s,i]},dS=function(e){var n=e.scrollLeft,s=e.scrollWidth,i=e.clientWidth;return[n,s,i]},m1=function(e,n){return e==="v"?oS(n):lS(n)},g1=function(e,n){return e==="v"?cS(n):dS(n)},uS=function(e,n){return e==="h"&&n==="rtl"?-1:1},fS=function(e,n,s,i,o){var l=uS(e,window.getComputedStyle(n).direction),c=l*i,u=s.target,h=n.contains(u),g=!1,p=c>0,f=0,m=0;do{if(!u)break;var b=g1(e,u),y=b[0],v=b[1],C=b[2],w=v-C-l*y;(y||w)&&m1(e,u)&&(f+=w,m+=y);var F=u.parentNode;u=F&&F.nodeType===Node.DOCUMENT_FRAGMENT_NODE?F.host:F}while(!h&&u!==document.body||h&&(n.contains(u)||n===u));return(p&&Math.abs(f)<1||!p&&Math.abs(m)<1)&&(g=!0),g},cl=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},z0=function(e){return[e.deltaX,e.deltaY]},O0=function(e){return e&&"current"in e?e.current:e},hS=function(e,n){return e[0]===n[0]&&e[1]===n[1]},pS=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},mS=0,Aa=[];function gS(e){var n=N.useRef([]),s=N.useRef([0,0]),i=N.useRef(),o=N.useState(mS++)[0],l=N.useState(h1)[0],c=N.useRef(e);N.useEffect(function(){c.current=e},[e]),N.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var v=Bk([e.lockRef.current],(e.shards||[]).map(O0),!0).filter(Boolean);return v.forEach(function(C){return C.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),v.forEach(function(C){return C.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var u=N.useCallback(function(v,C){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!c.current.allowPinchZoom;var w=cl(v),F=s.current,j="deltaX"in v?v.deltaX:F[0]-w[0],T="deltaY"in v?v.deltaY:F[1]-w[1],z,B=v.target,U=Math.abs(j)>Math.abs(T)?"h":"v";if("touches"in v&&U==="h"&&B.type==="range")return!1;var D=window.getSelection(),A=D&&D.anchorNode,H=A?A===B||A.contains(B):!1;if(H)return!1;var Y=L0(U,B);if(!Y)return!0;if(Y?z=U:(z=U==="v"?"h":"v",Y=L0(U,B)),!Y)return!1;if(!i.current&&"changedTouches"in v&&(j||T)&&(i.current=z),!z)return!0;var _=i.current||z;return fS(_,C,v,_==="h"?j:T)},[]),h=N.useCallback(function(v){var C=v;if(!(!Aa.length||Aa[Aa.length-1]!==l)){var w="deltaY"in C?z0(C):cl(C),F=n.current.filter(function(z){return z.name===C.type&&(z.target===C.target||C.target===z.shadowParent)&&hS(z.delta,w)})[0];if(F&&F.should){C.cancelable&&C.preventDefault();return}if(!F){var j=(c.current.shards||[]).map(O0).filter(Boolean).filter(function(z){return z.contains(C.target)}),T=j.length>0?u(C,j[0]):!c.current.noIsolation;T&&C.cancelable&&C.preventDefault()}}},[]),g=N.useCallback(function(v,C,w,F){var j={name:v,delta:C,target:w,should:F,shadowParent:xS(w)};n.current.push(j),setTimeout(function(){n.current=n.current.filter(function(T){return T!==j})},1)},[]),p=N.useCallback(function(v){s.current=cl(v),i.current=void 0},[]),f=N.useCallback(function(v){g(v.type,z0(v),v.target,u(v,e.lockRef.current))},[]),m=N.useCallback(function(v){g(v.type,cl(v),v.target,u(v,e.lockRef.current))},[]);N.useEffect(function(){return Aa.push(l),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",h,Ea),document.addEventListener("touchmove",h,Ea),document.addEventListener("touchstart",p,Ea),function(){Aa=Aa.filter(function(v){return v!==l}),document.removeEventListener("wheel",h,Ea),document.removeEventListener("touchmove",h,Ea),document.removeEventListener("touchstart",p,Ea)}},[]);var b=e.removeScrollBar,y=e.inert;return N.createElement(N.Fragment,null,y?N.createElement(l,{styles:pS(o)}):null,b?N.createElement(aS,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function xS(e){for(var n=null;e!==null;)e instanceof ShadowRoot&&(n=e.host,e=e.host),e=e.parentNode;return n}const bS=Kk(f1,gS);var x1=N.forwardRef(function(e,n){return N.createElement(Ul,Ds({},e,{ref:n,sideCar:bS}))});x1.classNames=Ul.classNames;var vS=function(e){if(typeof document>"u")return null;var n=Array.isArray(e)?e[0]:e;return n.ownerDocument.body},Ta=new WeakMap,dl=new WeakMap,ul={},ru=0,b1=function(e){return e&&(e.host||b1(e.parentNode))},yS=function(e,n){return n.map(function(s){if(e.contains(s))return s;var i=b1(s);return i&&e.contains(i)?i:(console.error("aria-hidden",s,"in not contained inside",e,". Doing nothing"),null)}).filter(function(s){return!!s})},wS=function(e,n,s,i){var o=yS(n,Array.isArray(e)?e:[e]);ul[s]||(ul[s]=new WeakMap);var l=ul[s],c=[],u=new Set,h=new Set(o),g=function(f){!f||u.has(f)||(u.add(f),g(f.parentNode))};o.forEach(g);var p=function(f){!f||h.has(f)||Array.prototype.forEach.call(f.children,function(m){if(u.has(m))p(m);else try{var b=m.getAttribute(i),y=b!==null&&b!=="false",v=(Ta.get(m)||0)+1,C=(l.get(m)||0)+1;Ta.set(m,v),l.set(m,C),c.push(m),v===1&&y&&dl.set(m,!0),C===1&&m.setAttribute(s,"true"),y||m.setAttribute(i,"true")}catch(w){console.error("aria-hidden: cannot operate on ",m,w)}})};return p(n),u.clear(),ru++,function(){c.forEach(function(f){var m=Ta.get(f)-1,b=l.get(f)-1;Ta.set(f,m),l.set(f,b),m||(dl.has(f)||f.removeAttribute(i),dl.delete(f)),b||f.removeAttribute(s)}),ru--,ru||(Ta=new WeakMap,Ta=new WeakMap,dl=new WeakMap,ul={})}},kS=function(e,n,s){s===void 0&&(s="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),o=vS(e);return o?(i.push.apply(i,Array.from(o.querySelectorAll("[aria-live], script"))),wS(i,o,s,"aria-hidden")):function(){return null}};function SS(e){const n=CS(e),s=N.forwardRef((i,o)=>{const{children:l,...c}=i,u=N.Children.toArray(l),h=u.find(NS);if(h){const g=h.props.children,p=u.map(f=>f===h?N.Children.count(g)>1?N.Children.only(null):N.isValidElement(g)?g.props.children:null:f);return r.jsx(n,{...c,ref:o,children:N.isValidElement(g)?N.cloneElement(g,void 0,p):null})}return r.jsx(n,{...c,ref:o,children:l})});return s.displayName=`${e}.Slot`,s}function CS(e){const n=N.forwardRef((s,i)=>{const{children:o,...l}=s;if(N.isValidElement(o)){const c=ES(o),u=_S(l,o.props);return o.type!==N.Fragment&&(u.ref=i?Ef(i,c):c),N.cloneElement(o,u)}return N.Children.count(o)>1?N.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var jS=Symbol("radix.slottable");function NS(e){return N.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===jS}function _S(e,n){const s={...n};for(const i in n){const o=e[i],l=n[i];/^on[A-Z]/.test(i)?o&&l?s[i]=(...u)=>{const h=l(...u);return o(...u),h}:o&&(s[i]=o):i==="style"?s[i]={...o,...l}:i==="className"&&(s[i]=[o,l].filter(Boolean).join(" "))}return{...e,...s}}function ES(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var Wl="Dialog",[v1,y1]=n1(Wl),[AS,ws]=v1(Wl),w1=e=>{const{__scopeDialog:n,children:s,open:i,defaultOpen:o,onOpenChange:l,modal:c=!0}=e,u=N.useRef(null),h=N.useRef(null),[g,p]=ik({prop:i,defaultProp:o??!1,onChange:l,caller:Wl});return r.jsx(AS,{scope:n,triggerRef:u,contentRef:h,contentId:Qd(),titleId:Qd(),descriptionId:Qd(),open:g,onOpenChange:p,onOpenToggle:N.useCallback(()=>p(f=>!f),[p]),modal:c,children:s})};w1.displayName=Wl;var k1="DialogTrigger",S1=N.forwardRef((e,n)=>{const{__scopeDialog:s,...i}=e,o=ws(k1,s),l=Zs(n,o.triggerRef);return r.jsx(Ys.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Ff(o.open),...i,ref:l,onClick:Ws(e.onClick,o.onOpenToggle)})});S1.displayName=k1;var Tf="DialogPortal",[TS,C1]=v1(Tf,{forceMount:void 0}),j1=e=>{const{__scopeDialog:n,forceMount:s,children:i,container:o}=e,l=ws(Tf,n);return r.jsx(TS,{scope:n,forceMount:s,children:N.Children.map(i,c=>r.jsx(Hl,{present:s||l.open,children:r.jsx(c1,{asChild:!0,container:o,children:c})}))})};j1.displayName=Tf;var Dl="DialogOverlay",N1=N.forwardRef((e,n)=>{const s=C1(Dl,e.__scopeDialog),{forceMount:i=s.forceMount,...o}=e,l=ws(Dl,e.__scopeDialog);return l.modal?r.jsx(Hl,{present:i||l.open,children:r.jsx(FS,{...o,ref:n})}):null});N1.displayName=Dl;var DS=SS("DialogOverlay.RemoveScroll"),FS=N.forwardRef((e,n)=>{const{__scopeDialog:s,...i}=e,o=ws(Dl,s);return r.jsx(x1,{as:DS,allowPinchZoom:!0,shards:[o.contentRef],children:r.jsx(Ys.div,{"data-state":Ff(o.open),...i,ref:n,style:{pointerEvents:"auto",...i.style}})})}),Jr="DialogContent",_1=N.forwardRef((e,n)=>{const s=C1(Jr,e.__scopeDialog),{forceMount:i=s.forceMount,...o}=e,l=ws(Jr,e.__scopeDialog);return r.jsx(Hl,{present:i||l.open,children:l.modal?r.jsx(MS,{...o,ref:n}):r.jsx(IS,{...o,ref:n})})});_1.displayName=Jr;var MS=N.forwardRef((e,n)=>{const s=ws(Jr,e.__scopeDialog),i=N.useRef(null),o=Zs(n,s.contentRef,i);return N.useEffect(()=>{const l=i.current;if(l)return kS(l)},[]),r.jsx(E1,{...e,ref:o,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ws(e.onCloseAutoFocus,l=>{l.preventDefault(),s.triggerRef.current?.focus()}),onPointerDownOutside:Ws(e.onPointerDownOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0;(c.button===2||u)&&l.preventDefault()}),onFocusOutside:Ws(e.onFocusOutside,l=>l.preventDefault())})}),IS=N.forwardRef((e,n)=>{const s=ws(Jr,e.__scopeDialog),i=N.useRef(!1),o=N.useRef(!1);return r.jsx(E1,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{e.onCloseAutoFocus?.(l),l.defaultPrevented||(i.current||s.triggerRef.current?.focus(),l.preventDefault()),i.current=!1,o.current=!1},onInteractOutside:l=>{e.onInteractOutside?.(l),l.defaultPrevented||(i.current=!0,l.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const c=l.target;s.triggerRef.current?.contains(c)&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&o.current&&l.preventDefault()}})}),E1=N.forwardRef((e,n)=>{const{__scopeDialog:s,trapFocus:i,onOpenAutoFocus:o,onCloseAutoFocus:l,...c}=e,u=ws(Jr,s),h=N.useRef(null),g=Zs(n,h);return Rk(),r.jsxs(r.Fragment,{children:[r.jsx(o1,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:o,onUnmountAutoFocus:l,children:r.jsx(a1,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":Ff(u.open),...c,ref:g,onDismiss:()=>u.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(RS,{titleId:u.titleId}),r.jsx(LS,{contentRef:h,descriptionId:u.descriptionId})]})]})}),Df="DialogTitle",A1=N.forwardRef((e,n)=>{const{__scopeDialog:s,...i}=e,o=ws(Df,s);return r.jsx(Ys.h2,{id:o.titleId,...i,ref:n})});A1.displayName=Df;var T1="DialogDescription",D1=N.forwardRef((e,n)=>{const{__scopeDialog:s,...i}=e,o=ws(T1,s);return r.jsx(Ys.p,{id:o.descriptionId,...i,ref:n})});D1.displayName=T1;var F1="DialogClose",M1=N.forwardRef((e,n)=>{const{__scopeDialog:s,...i}=e,o=ws(F1,s);return r.jsx(Ys.button,{type:"button",...i,ref:n,onClick:Ws(e.onClick,()=>o.onOpenChange(!1))})});M1.displayName=F1;function Ff(e){return e?"open":"closed"}var I1="DialogTitleWarning",[PS,P1]=tk(I1,{contentName:Jr,titleName:Df,docsSlug:"dialog"}),RS=({titleId:e})=>{const n=P1(I1),s=`\`${n.contentName}\` requires a \`${n.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${n.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${n.docsSlug}`;return N.useEffect(()=>{e&&(document.getElementById(e)||console.error(s))},[s,e]),null},BS="DialogDescriptionWarning",LS=({contentRef:e,descriptionId:n})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${P1(BS).contentName}}.`;return N.useEffect(()=>{const o=e.current?.getAttribute("aria-describedby");n&&o&&(document.getElementById(n)||console.warn(i))},[i,e,n]),null},zS=w1,OS=S1,VS=j1,$S=N1,HS=_1,US=A1,WS=D1,R1=M1,KS=Symbol("radix.slottable");function GS(e){const n=({children:s})=>r.jsx(r.Fragment,{children:s});return n.displayName=`${e}.Slottable`,n.__radixId=KS,n}var B1="AlertDialog",[qS]=n1(B1,[y1]),Qs=y1(),L1=e=>{const{__scopeAlertDialog:n,...s}=e,i=Qs(n);return r.jsx(zS,{...i,...s,modal:!0})};L1.displayName=B1;var ZS="AlertDialogTrigger",YS=N.forwardRef((e,n)=>{const{__scopeAlertDialog:s,...i}=e,o=Qs(s);return r.jsx(OS,{...o,...i,ref:n})});YS.displayName=ZS;var QS="AlertDialogPortal",z1=e=>{const{__scopeAlertDialog:n,...s}=e,i=Qs(n);return r.jsx(VS,{...i,...s})};z1.displayName=QS;var XS="AlertDialogOverlay",O1=N.forwardRef((e,n)=>{const{__scopeAlertDialog:s,...i}=e,o=Qs(s);return r.jsx($S,{...o,...i,ref:n})});O1.displayName=XS;var Ha="AlertDialogContent",[JS,eC]=qS(Ha),tC=GS("AlertDialogContent"),V1=N.forwardRef((e,n)=>{const{__scopeAlertDialog:s,children:i,...o}=e,l=Qs(s),c=N.useRef(null),u=Zs(n,c),h=N.useRef(null);return r.jsx(PS,{contentName:Ha,titleName:$1,docsSlug:"alert-dialog",children:r.jsx(JS,{scope:s,cancelRef:h,children:r.jsxs(HS,{role:"alertdialog",...l,...o,ref:u,onOpenAutoFocus:Ws(o.onOpenAutoFocus,g=>{g.preventDefault(),h.current?.focus({preventScroll:!0})}),onPointerDownOutside:g=>g.preventDefault(),onInteractOutside:g=>g.preventDefault(),children:[r.jsx(tC,{children:i}),r.jsx(rC,{contentRef:c})]})})})});V1.displayName=Ha;var $1="AlertDialogTitle",H1=N.forwardRef((e,n)=>{const{__scopeAlertDialog:s,...i}=e,o=Qs(s);return r.jsx(US,{...o,...i,ref:n})});H1.displayName=$1;var U1="AlertDialogDescription",W1=N.forwardRef((e,n)=>{const{__scopeAlertDialog:s,...i}=e,o=Qs(s);return r.jsx(WS,{...o,...i,ref:n})});W1.displayName=U1;var nC="AlertDialogAction",K1=N.forwardRef((e,n)=>{const{__scopeAlertDialog:s,...i}=e,o=Qs(s);return r.jsx(R1,{...o,...i,ref:n})});K1.displayName=nC;var G1="AlertDialogCancel",sC=N.forwardRef((e,n)=>{const{__scopeAlertDialog:s,...i}=e,{cancelRef:o}=eC(G1,s),l=Qs(s),c=Zs(n,o);return r.jsx(R1,{...l,...i,ref:c})});sC.displayName=G1;var rC=({contentRef:e})=>{const n=`\`${Ha}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ha}\` by passing a \`${U1}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ha}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return N.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(n)},[n,e]),null},aC=L1,iC=z1,oC=O1,lC=V1,cC=K1,dC=H1,uC=W1;function q1(e){var n,s,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(n=0;n<o;n++)e[n]&&(s=q1(e[n]))&&(i&&(i+=" "),i+=s)}else for(s in e)e[s]&&(i&&(i+=" "),i+=s);return i}function Z1(){for(var e,n,s=0,i="",o=arguments.length;s<o;s++)(e=arguments[s])&&(n=q1(e))&&(i&&(i+=" "),i+=n);return i}const fC=(e,n)=>{const s=new Array(e.length+n.length);for(let i=0;i<e.length;i++)s[i]=e[i];for(let i=0;i<n.length;i++)s[e.length+i]=n[i];return s},hC=(e,n)=>({classGroupId:e,validator:n}),Y1=(e=new Map,n=null,s)=>({nextPart:e,validators:n,classGroupId:s}),Fl="-",V0=[],pC="arbitrary..",mC=e=>{const n=xC(e),{conflictingClassGroups:s,conflictingClassGroupModifiers:i}=e;return{getClassGroupId:c=>{if(c.startsWith("[")&&c.endsWith("]"))return gC(c);const u=c.split(Fl),h=u[0]===""&&u.length>1?1:0;return Q1(u,h,n)},getConflictingClassGroupIds:(c,u)=>{if(u){const h=i[c],g=s[c];return h?g?fC(g,h):h:g||V0}return s[c]||V0}}},Q1=(e,n,s)=>{if(e.length-n===0)return s.classGroupId;const o=e[n],l=s.nextPart.get(o);if(l){const g=Q1(e,n+1,l);if(g)return g}const c=s.validators;if(c===null)return;const u=n===0?e.join(Fl):e.slice(n).join(Fl),h=c.length;for(let g=0;g<h;g++){const p=c[g];if(p.validator(u))return p.classGroupId}},gC=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const n=e.slice(1,-1),s=n.indexOf(":"),i=n.slice(0,s);return i?pC+i:void 0})(),xC=e=>{const{theme:n,classGroups:s}=e;return bC(s,n)},bC=(e,n)=>{const s=Y1();for(const i in e){const o=e[i];Mf(o,s,i,n)}return s},Mf=(e,n,s,i)=>{const o=e.length;for(let l=0;l<o;l++){const c=e[l];vC(c,n,s,i)}},vC=(e,n,s,i)=>{if(typeof e=="string"){yC(e,n,s);return}if(typeof e=="function"){wC(e,n,s,i);return}kC(e,n,s,i)},yC=(e,n,s)=>{const i=e===""?n:X1(n,e);i.classGroupId=s},wC=(e,n,s,i)=>{if(SC(e)){Mf(e(i),n,s,i);return}n.validators===null&&(n.validators=[]),n.validators.push(hC(s,e))},kC=(e,n,s,i)=>{const o=Object.entries(e),l=o.length;for(let c=0;c<l;c++){const[u,h]=o[c];Mf(h,X1(n,u),s,i)}},X1=(e,n)=>{let s=e;const i=n.split(Fl),o=i.length;for(let l=0;l<o;l++){const c=i[l];let u=s.nextPart.get(c);u||(u=Y1(),s.nextPart.set(c,u)),s=u}return s},SC=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,CC=e=>{if(e<1)return{get:()=>{},set:()=>{}};let n=0,s=Object.create(null),i=Object.create(null);const o=(l,c)=>{s[l]=c,n++,n>e&&(n=0,i=s,s=Object.create(null))};return{get(l){let c=s[l];if(c!==void 0)return c;if((c=i[l])!==void 0)return o(l,c),c},set(l,c){l in s?s[l]=c:o(l,c)}}},Bu="!",$0=":",jC=[],H0=(e,n,s,i,o)=>({modifiers:e,hasImportantModifier:n,baseClassName:s,maybePostfixModifierPosition:i,isExternal:o}),NC=e=>{const{prefix:n,experimentalParseClassName:s}=e;let i=o=>{const l=[];let c=0,u=0,h=0,g;const p=o.length;for(let v=0;v<p;v++){const C=o[v];if(c===0&&u===0){if(C===$0){l.push(o.slice(h,v)),h=v+1;continue}if(C==="/"){g=v;continue}}C==="["?c++:C==="]"?c--:C==="("?u++:C===")"&&u--}const f=l.length===0?o:o.slice(h);let m=f,b=!1;f.endsWith(Bu)?(m=f.slice(0,-1),b=!0):f.startsWith(Bu)&&(m=f.slice(1),b=!0);const y=g&&g>h?g-h:void 0;return H0(l,b,m,y)};if(n){const o=n+$0,l=i;i=c=>c.startsWith(o)?l(c.slice(o.length)):H0(jC,!1,c,void 0,!0)}if(s){const o=i;i=l=>s({className:l,parseClassName:o})}return i},_C=e=>{const n=new Map;return e.orderSensitiveModifiers.forEach((s,i)=>{n.set(s,1e6+i)}),s=>{const i=[];let o=[];for(let l=0;l<s.length;l++){const c=s[l],u=c[0]==="[",h=n.has(c);u||h?(o.length>0&&(o.sort(),i.push(...o),o=[]),i.push(c)):o.push(c)}return o.length>0&&(o.sort(),i.push(...o)),i}},EC=e=>({cache:CC(e.cacheSize),parseClassName:NC(e),sortModifiers:_C(e),...mC(e)}),AC=/\s+/,TC=(e,n)=>{const{parseClassName:s,getClassGroupId:i,getConflictingClassGroupIds:o,sortModifiers:l}=n,c=[],u=e.trim().split(AC);let h="";for(let g=u.length-1;g>=0;g-=1){const p=u[g],{isExternal:f,modifiers:m,hasImportantModifier:b,baseClassName:y,maybePostfixModifierPosition:v}=s(p);if(f){h=p+(h.length>0?" "+h:h);continue}let C=!!v,w=i(C?y.substring(0,v):y);if(!w){if(!C){h=p+(h.length>0?" "+h:h);continue}if(w=i(y),!w){h=p+(h.length>0?" "+h:h);continue}C=!1}const F=m.length===0?"":m.length===1?m[0]:l(m).join(":"),j=b?F+Bu:F,T=j+w;if(c.indexOf(T)>-1)continue;c.push(T);const z=o(w,C);for(let B=0;B<z.length;++B){const U=z[B];c.push(j+U)}h=p+(h.length>0?" "+h:h)}return h},DC=(...e)=>{let n=0,s,i,o="";for(;n<e.length;)(s=e[n++])&&(i=J1(s))&&(o&&(o+=" "),o+=i);return o},J1=e=>{if(typeof e=="string")return e;let n,s="";for(let i=0;i<e.length;i++)e[i]&&(n=J1(e[i]))&&(s&&(s+=" "),s+=n);return s},FC=(e,...n)=>{let s,i,o,l;const c=h=>{const g=n.reduce((p,f)=>f(p),e());return s=EC(g),i=s.cache.get,o=s.cache.set,l=u,u(h)},u=h=>{const g=i(h);if(g)return g;const p=TC(h,s);return o(h,p),p};return l=c,(...h)=>l(DC(...h))},MC=[],en=e=>{const n=s=>s[e]||MC;return n.isThemeGetter=!0,n},eb=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,tb=/^\((?:(\w[\w-]*):)?(.+)\)$/i,IC=/^\d+\/\d+$/,PC=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,RC=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,BC=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,LC=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,zC=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Da=e=>IC.test(e),lt=e=>!!e&&!Number.isNaN(Number(e)),br=e=>!!e&&Number.isInteger(Number(e)),au=e=>e.endsWith("%")&&lt(e.slice(0,-1)),Us=e=>PC.test(e),OC=()=>!0,VC=e=>RC.test(e)&&!BC.test(e),nb=()=>!1,$C=e=>LC.test(e),HC=e=>zC.test(e),UC=e=>!$e(e)&&!He(e),WC=e=>Ya(e,ab,nb),$e=e=>eb.test(e),Wr=e=>Ya(e,ib,VC),iu=e=>Ya(e,YC,lt),U0=e=>Ya(e,sb,nb),KC=e=>Ya(e,rb,HC),fl=e=>Ya(e,ob,$C),He=e=>tb.test(e),Mi=e=>Qa(e,ib),GC=e=>Qa(e,QC),W0=e=>Qa(e,sb),qC=e=>Qa(e,ab),ZC=e=>Qa(e,rb),hl=e=>Qa(e,ob,!0),Ya=(e,n,s)=>{const i=eb.exec(e);return i?i[1]?n(i[1]):s(i[2]):!1},Qa=(e,n,s=!1)=>{const i=tb.exec(e);return i?i[1]?n(i[1]):s:!1},sb=e=>e==="position"||e==="percentage",rb=e=>e==="image"||e==="url",ab=e=>e==="length"||e==="size"||e==="bg-size",ib=e=>e==="length",YC=e=>e==="number",QC=e=>e==="family-name",ob=e=>e==="shadow",XC=()=>{const e=en("color"),n=en("font"),s=en("text"),i=en("font-weight"),o=en("tracking"),l=en("leading"),c=en("breakpoint"),u=en("container"),h=en("spacing"),g=en("radius"),p=en("shadow"),f=en("inset-shadow"),m=en("text-shadow"),b=en("drop-shadow"),y=en("blur"),v=en("perspective"),C=en("aspect"),w=en("ease"),F=en("animate"),j=()=>["auto","avoid","all","avoid-page","page","left","right","column"],T=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],z=()=>[...T(),He,$e],B=()=>["auto","hidden","clip","visible","scroll"],U=()=>["auto","contain","none"],D=()=>[He,$e,h],A=()=>[Da,"full","auto",...D()],H=()=>[br,"none","subgrid",He,$e],Y=()=>["auto",{span:["full",br,He,$e]},br,He,$e],_=()=>[br,"auto",He,$e],L=()=>["auto","min","max","fr",He,$e],k=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],$=()=>["start","end","center","stretch","center-safe","end-safe"],P=()=>["auto",...D()],I=()=>[Da,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...D()],q=()=>[e,He,$e],G=()=>[...T(),W0,U0,{position:[He,$e]}],Q=()=>["no-repeat",{repeat:["","x","y","space","round"]}],M=()=>["auto","cover","contain",qC,WC,{size:[He,$e]}],O=()=>[au,Mi,Wr],ee=()=>["","none","full",g,He,$e],W=()=>["",lt,Mi,Wr],V=()=>["solid","dashed","dotted","double"],Z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ue=()=>[lt,au,W0,U0],ce=()=>["","none",y,He,$e],me=()=>["none",lt,He,$e],Te=()=>["none",lt,He,$e],ie=()=>[lt,He,$e],Ce=()=>[Da,"full",...D()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Us],breakpoint:[Us],color:[OC],container:[Us],"drop-shadow":[Us],ease:["in","out","in-out"],font:[UC],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Us],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Us],shadow:[Us],spacing:["px",lt],text:[Us],"text-shadow":[Us],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Da,$e,He,C]}],container:["container"],columns:[{columns:[lt,$e,He,u]}],"break-after":[{"break-after":j()}],"break-before":[{"break-before":j()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:z()}],overflow:[{overflow:B()}],"overflow-x":[{"overflow-x":B()}],"overflow-y":[{"overflow-y":B()}],overscroll:[{overscroll:U()}],"overscroll-x":[{"overscroll-x":U()}],"overscroll-y":[{"overscroll-y":U()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:A()}],"inset-x":[{"inset-x":A()}],"inset-y":[{"inset-y":A()}],start:[{start:A()}],end:[{end:A()}],top:[{top:A()}],right:[{right:A()}],bottom:[{bottom:A()}],left:[{left:A()}],visibility:["visible","invisible","collapse"],z:[{z:[br,"auto",He,$e]}],basis:[{basis:[Da,"full","auto",u,...D()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[lt,Da,"auto","initial","none",$e]}],grow:[{grow:["",lt,He,$e]}],shrink:[{shrink:["",lt,He,$e]}],order:[{order:[br,"first","last","none",He,$e]}],"grid-cols":[{"grid-cols":H()}],"col-start-end":[{col:Y()}],"col-start":[{"col-start":_()}],"col-end":[{"col-end":_()}],"grid-rows":[{"grid-rows":H()}],"row-start-end":[{row:Y()}],"row-start":[{"row-start":_()}],"row-end":[{"row-end":_()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":L()}],"auto-rows":[{"auto-rows":L()}],gap:[{gap:D()}],"gap-x":[{"gap-x":D()}],"gap-y":[{"gap-y":D()}],"justify-content":[{justify:[...k(),"normal"]}],"justify-items":[{"justify-items":[...$(),"normal"]}],"justify-self":[{"justify-self":["auto",...$()]}],"align-content":[{content:["normal",...k()]}],"align-items":[{items:[...$(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...$(),{baseline:["","last"]}]}],"place-content":[{"place-content":k()}],"place-items":[{"place-items":[...$(),"baseline"]}],"place-self":[{"place-self":["auto",...$()]}],p:[{p:D()}],px:[{px:D()}],py:[{py:D()}],ps:[{ps:D()}],pe:[{pe:D()}],pt:[{pt:D()}],pr:[{pr:D()}],pb:[{pb:D()}],pl:[{pl:D()}],m:[{m:P()}],mx:[{mx:P()}],my:[{my:P()}],ms:[{ms:P()}],me:[{me:P()}],mt:[{mt:P()}],mr:[{mr:P()}],mb:[{mb:P()}],ml:[{ml:P()}],"space-x":[{"space-x":D()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":D()}],"space-y-reverse":["space-y-reverse"],size:[{size:I()}],w:[{w:[u,"screen",...I()]}],"min-w":[{"min-w":[u,"screen","none",...I()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[c]},...I()]}],h:[{h:["screen","lh",...I()]}],"min-h":[{"min-h":["screen","lh","none",...I()]}],"max-h":[{"max-h":["screen","lh",...I()]}],"font-size":[{text:["base",s,Mi,Wr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,He,iu]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",au,$e]}],"font-family":[{font:[GC,$e,n]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,He,$e]}],"line-clamp":[{"line-clamp":[lt,"none",He,iu]}],leading:[{leading:[l,...D()]}],"list-image":[{"list-image":["none",He,$e]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",He,$e]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:q()}],"text-color":[{text:q()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...V(),"wavy"]}],"text-decoration-thickness":[{decoration:[lt,"from-font","auto",He,Wr]}],"text-decoration-color":[{decoration:q()}],"underline-offset":[{"underline-offset":[lt,"auto",He,$e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",He,$e]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",He,$e]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:G()}],"bg-repeat":[{bg:Q()}],"bg-size":[{bg:M()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},br,He,$e],radial:["",He,$e],conic:[br,He,$e]},ZC,KC]}],"bg-color":[{bg:q()}],"gradient-from-pos":[{from:O()}],"gradient-via-pos":[{via:O()}],"gradient-to-pos":[{to:O()}],"gradient-from":[{from:q()}],"gradient-via":[{via:q()}],"gradient-to":[{to:q()}],rounded:[{rounded:ee()}],"rounded-s":[{"rounded-s":ee()}],"rounded-e":[{"rounded-e":ee()}],"rounded-t":[{"rounded-t":ee()}],"rounded-r":[{"rounded-r":ee()}],"rounded-b":[{"rounded-b":ee()}],"rounded-l":[{"rounded-l":ee()}],"rounded-ss":[{"rounded-ss":ee()}],"rounded-se":[{"rounded-se":ee()}],"rounded-ee":[{"rounded-ee":ee()}],"rounded-es":[{"rounded-es":ee()}],"rounded-tl":[{"rounded-tl":ee()}],"rounded-tr":[{"rounded-tr":ee()}],"rounded-br":[{"rounded-br":ee()}],"rounded-bl":[{"rounded-bl":ee()}],"border-w":[{border:W()}],"border-w-x":[{"border-x":W()}],"border-w-y":[{"border-y":W()}],"border-w-s":[{"border-s":W()}],"border-w-e":[{"border-e":W()}],"border-w-t":[{"border-t":W()}],"border-w-r":[{"border-r":W()}],"border-w-b":[{"border-b":W()}],"border-w-l":[{"border-l":W()}],"divide-x":[{"divide-x":W()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":W()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...V(),"hidden","none"]}],"divide-style":[{divide:[...V(),"hidden","none"]}],"border-color":[{border:q()}],"border-color-x":[{"border-x":q()}],"border-color-y":[{"border-y":q()}],"border-color-s":[{"border-s":q()}],"border-color-e":[{"border-e":q()}],"border-color-t":[{"border-t":q()}],"border-color-r":[{"border-r":q()}],"border-color-b":[{"border-b":q()}],"border-color-l":[{"border-l":q()}],"divide-color":[{divide:q()}],"outline-style":[{outline:[...V(),"none","hidden"]}],"outline-offset":[{"outline-offset":[lt,He,$e]}],"outline-w":[{outline:["",lt,Mi,Wr]}],"outline-color":[{outline:q()}],shadow:[{shadow:["","none",p,hl,fl]}],"shadow-color":[{shadow:q()}],"inset-shadow":[{"inset-shadow":["none",f,hl,fl]}],"inset-shadow-color":[{"inset-shadow":q()}],"ring-w":[{ring:W()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:q()}],"ring-offset-w":[{"ring-offset":[lt,Wr]}],"ring-offset-color":[{"ring-offset":q()}],"inset-ring-w":[{"inset-ring":W()}],"inset-ring-color":[{"inset-ring":q()}],"text-shadow":[{"text-shadow":["none",m,hl,fl]}],"text-shadow-color":[{"text-shadow":q()}],opacity:[{opacity:[lt,He,$e]}],"mix-blend":[{"mix-blend":[...Z(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Z()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[lt]}],"mask-image-linear-from-pos":[{"mask-linear-from":ue()}],"mask-image-linear-to-pos":[{"mask-linear-to":ue()}],"mask-image-linear-from-color":[{"mask-linear-from":q()}],"mask-image-linear-to-color":[{"mask-linear-to":q()}],"mask-image-t-from-pos":[{"mask-t-from":ue()}],"mask-image-t-to-pos":[{"mask-t-to":ue()}],"mask-image-t-from-color":[{"mask-t-from":q()}],"mask-image-t-to-color":[{"mask-t-to":q()}],"mask-image-r-from-pos":[{"mask-r-from":ue()}],"mask-image-r-to-pos":[{"mask-r-to":ue()}],"mask-image-r-from-color":[{"mask-r-from":q()}],"mask-image-r-to-color":[{"mask-r-to":q()}],"mask-image-b-from-pos":[{"mask-b-from":ue()}],"mask-image-b-to-pos":[{"mask-b-to":ue()}],"mask-image-b-from-color":[{"mask-b-from":q()}],"mask-image-b-to-color":[{"mask-b-to":q()}],"mask-image-l-from-pos":[{"mask-l-from":ue()}],"mask-image-l-to-pos":[{"mask-l-to":ue()}],"mask-image-l-from-color":[{"mask-l-from":q()}],"mask-image-l-to-color":[{"mask-l-to":q()}],"mask-image-x-from-pos":[{"mask-x-from":ue()}],"mask-image-x-to-pos":[{"mask-x-to":ue()}],"mask-image-x-from-color":[{"mask-x-from":q()}],"mask-image-x-to-color":[{"mask-x-to":q()}],"mask-image-y-from-pos":[{"mask-y-from":ue()}],"mask-image-y-to-pos":[{"mask-y-to":ue()}],"mask-image-y-from-color":[{"mask-y-from":q()}],"mask-image-y-to-color":[{"mask-y-to":q()}],"mask-image-radial":[{"mask-radial":[He,$e]}],"mask-image-radial-from-pos":[{"mask-radial-from":ue()}],"mask-image-radial-to-pos":[{"mask-radial-to":ue()}],"mask-image-radial-from-color":[{"mask-radial-from":q()}],"mask-image-radial-to-color":[{"mask-radial-to":q()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":T()}],"mask-image-conic-pos":[{"mask-conic":[lt]}],"mask-image-conic-from-pos":[{"mask-conic-from":ue()}],"mask-image-conic-to-pos":[{"mask-conic-to":ue()}],"mask-image-conic-from-color":[{"mask-conic-from":q()}],"mask-image-conic-to-color":[{"mask-conic-to":q()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:G()}],"mask-repeat":[{mask:Q()}],"mask-size":[{mask:M()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",He,$e]}],filter:[{filter:["","none",He,$e]}],blur:[{blur:ce()}],brightness:[{brightness:[lt,He,$e]}],contrast:[{contrast:[lt,He,$e]}],"drop-shadow":[{"drop-shadow":["","none",b,hl,fl]}],"drop-shadow-color":[{"drop-shadow":q()}],grayscale:[{grayscale:["",lt,He,$e]}],"hue-rotate":[{"hue-rotate":[lt,He,$e]}],invert:[{invert:["",lt,He,$e]}],saturate:[{saturate:[lt,He,$e]}],sepia:[{sepia:["",lt,He,$e]}],"backdrop-filter":[{"backdrop-filter":["","none",He,$e]}],"backdrop-blur":[{"backdrop-blur":ce()}],"backdrop-brightness":[{"backdrop-brightness":[lt,He,$e]}],"backdrop-contrast":[{"backdrop-contrast":[lt,He,$e]}],"backdrop-grayscale":[{"backdrop-grayscale":["",lt,He,$e]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[lt,He,$e]}],"backdrop-invert":[{"backdrop-invert":["",lt,He,$e]}],"backdrop-opacity":[{"backdrop-opacity":[lt,He,$e]}],"backdrop-saturate":[{"backdrop-saturate":[lt,He,$e]}],"backdrop-sepia":[{"backdrop-sepia":["",lt,He,$e]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":D()}],"border-spacing-x":[{"border-spacing-x":D()}],"border-spacing-y":[{"border-spacing-y":D()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",He,$e]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[lt,"initial",He,$e]}],ease:[{ease:["linear","initial",w,He,$e]}],delay:[{delay:[lt,He,$e]}],animate:[{animate:["none",F,He,$e]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[v,He,$e]}],"perspective-origin":[{"perspective-origin":z()}],rotate:[{rotate:me()}],"rotate-x":[{"rotate-x":me()}],"rotate-y":[{"rotate-y":me()}],"rotate-z":[{"rotate-z":me()}],scale:[{scale:Te()}],"scale-x":[{"scale-x":Te()}],"scale-y":[{"scale-y":Te()}],"scale-z":[{"scale-z":Te()}],"scale-3d":["scale-3d"],skew:[{skew:ie()}],"skew-x":[{"skew-x":ie()}],"skew-y":[{"skew-y":ie()}],transform:[{transform:[He,$e,"","none","gpu","cpu"]}],"transform-origin":[{origin:z()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ce()}],"translate-x":[{"translate-x":Ce()}],"translate-y":[{"translate-y":Ce()}],"translate-z":[{"translate-z":Ce()}],"translate-none":["translate-none"],accent:[{accent:q()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:q()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",He,$e]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",He,$e]}],fill:[{fill:["none",...q()]}],"stroke-w":[{stroke:[lt,Mi,Wr,iu]}],stroke:[{stroke:["none",...q()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},JC=FC(XC);function Yi(...e){return JC(Z1(e))}const K0=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,G0=Z1,ej=(e,n)=>s=>{var i;if(n?.variants==null)return G0(e,s?.class,s?.className);const{variants:o,defaultVariants:l}=n,c=Object.keys(o).map(g=>{const p=s?.[g],f=l?.[g];if(p===null)return null;const m=K0(p)||K0(f);return o[g][m]}),u=s&&Object.entries(s).reduce((g,p)=>{let[f,m]=p;return m===void 0||(g[f]=m),g},{}),h=n==null||(i=n.compoundVariants)===null||i===void 0?void 0:i.reduce((g,p)=>{let{class:f,className:m,...b}=p;return Object.entries(b).every(y=>{let[v,C]=y;return Array.isArray(C)?C.includes({...l,...u}[v]):{...l,...u}[v]===C})?[...g,f,m]:g},[]);return G0(e,c,h,s?.class,s?.className)},tj=ej("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function nj({...e}){return r.jsx(aC,{"data-slot":"alert-dialog",...e})}function sj({...e}){return r.jsx(iC,{"data-slot":"alert-dialog-portal",...e})}const lb=N.forwardRef(({className:e,...n},s)=>r.jsx(oC,{ref:s,"data-slot":"alert-dialog-overlay",className:Yi("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...n}));lb.displayName="AlertDialogOverlay";function rj({className:e,...n}){return r.jsxs(sj,{children:[r.jsx(lb,{}),r.jsx(lC,{"data-slot":"alert-dialog-content",className:Yi("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n})]})}function aj({className:e,...n}){return r.jsx(dC,{"data-slot":"alert-dialog-title",className:Yi("text-lg font-semibold",e),...n})}function ij({className:e,...n}){return r.jsx(uC,{"data-slot":"alert-dialog-description",className:Yi("text-muted-foreground text-sm",e),...n})}function oj({className:e,...n}){return r.jsx(cC,{className:Yi(tj(),e),...n})}const Ml="ToukenRanbuDB",lj=9,re={USER_DATA:"userData",CHARACTERS:"characters",CHATS:"chats",CHAT_MESSAGES:"chatMessages",CHAT_SETTINGS:"chatSettings",WORLD_BOOKS:"worldBooks",API_SETTINGS:"apiSettings",APPEARANCE:"appearance",MISC:"misc",STICKERS:"stickers",BUBBLE_PRESETS:"bubblePresets",AI_TASKS:"aiTasks",HEALTH:"health",SCHEDULE:"schedule"};let cj=class{db=null;async init(){return new Promise((n,s)=>{const i=indexedDB.open(Ml,lj);i.onerror=()=>{console.error("Failed to open IndexedDB:",i.error),s(new Error("Failed to open database"))},i.onsuccess=()=>{this.db=i.result;const o=Object.values(re),l=o.filter(c=>!this.db.objectStoreNames.contains(c));if(l.length>0){console.error("Missing object stores:",l),console.log("Available stores:",Array.from(this.db.objectStoreNames)),console.log("Required stores:",o),this.db.close();const c=indexedDB.deleteDatabase(Ml);c.onsuccess=()=>{console.log("Database deleted, reinitializing..."),this.init().then(n).catch(s)},c.onerror=()=>{s(new Error("Failed to recreate database"))};return}console.log("IndexedDB initialized successfully with stores:",Array.from(this.db.objectStoreNames)),n()},i.onupgradeneeded=o=>{const l=o.target.result;console.log("Database upgrade needed from version",o.oldVersion,"to",o.newVersion),l.objectStoreNames.contains(re.USER_DATA)||(l.createObjectStore(re.USER_DATA),console.log("Created store:",re.USER_DATA)),l.objectStoreNames.contains(re.CHARACTERS)||(l.createObjectStore(re.CHARACTERS),console.log("Created store:",re.CHARACTERS)),l.objectStoreNames.contains(re.CHATS)||(l.createObjectStore(re.CHATS),console.log("Created store:",re.CHATS)),l.objectStoreNames.contains(re.CHAT_MESSAGES)||(l.createObjectStore(re.CHAT_MESSAGES),console.log("Created store:",re.CHAT_MESSAGES)),l.objectStoreNames.contains(re.CHAT_SETTINGS)||(l.createObjectStore(re.CHAT_SETTINGS),console.log("Created store:",re.CHAT_SETTINGS)),l.objectStoreNames.contains(re.WORLD_BOOKS)||(l.createObjectStore(re.WORLD_BOOKS),console.log("Created store:",re.WORLD_BOOKS)),l.objectStoreNames.contains(re.API_SETTINGS)||(l.createObjectStore(re.API_SETTINGS),console.log("Created store:",re.API_SETTINGS)),l.objectStoreNames.contains(re.APPEARANCE)||(l.createObjectStore(re.APPEARANCE),console.log("Created store:",re.APPEARANCE)),l.objectStoreNames.contains(re.MISC)||(l.createObjectStore(re.MISC),console.log("Created store:",re.MISC)),l.objectStoreNames.contains(re.STICKERS)||(l.createObjectStore(re.STICKERS),console.log("Created store:",re.STICKERS)),l.objectStoreNames.contains(re.BUBBLE_PRESETS)||(l.createObjectStore(re.BUBBLE_PRESETS),console.log("Created store:",re.BUBBLE_PRESETS)),l.objectStoreNames.contains(re.AI_TASKS)||(l.createObjectStore(re.AI_TASKS),console.log("Created store:",re.AI_TASKS)),l.objectStoreNames.contains(re.HEALTH)||(l.createObjectStore(re.HEALTH),console.log("Created store:",re.HEALTH)),l.objectStoreNames.contains(re.SCHEDULE)||(l.createObjectStore(re.SCHEDULE),console.log("Created store:",re.SCHEDULE))}})}validateStore(n){if(!this.db)throw new Error("Database not initialized");if(!this.db.objectStoreNames.contains(n))throw new Error(`Store "${n}" does not exist. Available stores: ${Array.from(this.db.objectStoreNames).join(", ")}`)}async get(n,s){return this.db||await this.init(),this.validateStore(n),new Promise((i,o)=>{try{const u=this.db.transaction(n,"readonly").objectStore(n).get(s);u.onsuccess=()=>{i(u.result||null)},u.onerror=()=>{o(new Error(`Failed to get data from ${n}: ${u.error}`))}}catch(l){o(l)}})}async set(n,s,i){return this.db||await this.init(),this.validateStore(n),new Promise((o,l)=>{try{const h=this.db.transaction(n,"readwrite").objectStore(n).put(i,s);h.onsuccess=()=>{o()},h.onerror=()=>{l(new Error(`Failed to set data in ${n}: ${h.error}`))}}catch(c){l(c)}})}async delete(n,s){return this.db||await this.init(),this.validateStore(n),new Promise((i,o)=>{try{const u=this.db.transaction(n,"readwrite").objectStore(n).delete(s);u.onsuccess=()=>{i()},u.onerror=()=>{o(new Error(`Failed to delete data from ${n}: ${u.error}`))}}catch(l){o(l)}})}async getAllKeys(n){return this.db||await this.init(),this.validateStore(n),new Promise((s,i)=>{try{const c=this.db.transaction(n,"readonly").objectStore(n).getAllKeys();c.onsuccess=()=>{s(c.result)},c.onerror=()=>{i(new Error(`Failed to get all keys from ${n}: ${c.error}`))}}catch(o){i(o)}})}async getAll(n){this.db||await this.init();const s=await this.getAllKeys(n),i={};for(const o of s){const l=await this.get(n,o);l!==null&&(i[o]=l)}return i}async clear(n){return this.db||await this.init(),this.validateStore(n),new Promise((s,i)=>{try{const c=this.db.transaction(n,"readwrite").objectStore(n).clear();c.onsuccess=()=>{s()},c.onerror=()=>{i(new Error(`Failed to clear ${n}: ${c.error}`))}}catch(o){i(o)}})}async clearAll(){this.db||await this.init();const n=Object.values(re);for(const s of n)await this.clear(s)}async getStoreSize(n){const s=await this.getAll(n),i=JSON.stringify(s);return new Blob([i]).size}async exportAll(){this.db||await this.init();const n={},s=Object.values(re);for(const i of s)n[i]=await this.getAll(i);return n}async importAll(n){this.db||await this.init();for(const[s,i]of Object.entries(n))if(Object.values(re).includes(s)){await this.clear(s);for(const[o,l]of Object.entries(i))await this.set(s,o,l)}}async migrateFromLocalStorage(){if(!await this.get(re.MISC,"migrated_from_localstorage")){console.log("localStorageIndexedDB...");try{const s=localStorage.getItem("userData");s&&await this.set(re.USER_DATA,"userData",JSON.parse(s));const i=localStorage.getItem("user_description");i&&await this.set(re.USER_DATA,"user_description",i);const o=localStorage.getItem("characters");o&&await this.set(re.CHARACTERS,"characters",JSON.parse(o));const l=localStorage.getItem("chat_list");l&&await this.set(re.CHATS,"chat_list",JSON.parse(l));for(let p=0;p<localStorage.length;p++){const f=localStorage.key(p);if(f&&f.startsWith("chat_messages_")){const m=localStorage.getItem(f);m&&await this.set(re.CHAT_MESSAGES,f,JSON.parse(m))}}const c=localStorage.getItem("chat_settings");c&&await this.set(re.CHAT_SETTINGS,"chat_settings",JSON.parse(c));for(let p=0;p<localStorage.length;p++){const f=localStorage.key(p);if(f&&f.startsWith("chat_detail_settings_")){const m=localStorage.getItem(f);m&&await this.set(re.CHAT_SETTINGS,f,JSON.parse(m))}}const u=localStorage.getItem("world_books");u&&await this.set(re.WORLD_BOOKS,"world_books",JSON.parse(u));for(let p=0;p<localStorage.length;p++){const f=localStorage.key(p);if(f&&f.startsWith("api_")){const m=localStorage.getItem(f);if(m)try{await this.set(re.API_SETTINGS,f,JSON.parse(m))}catch{await this.set(re.API_SETTINGS,f,m)}}}const h=localStorage.getItem("accent_color");h&&await this.set(re.APPEARANCE,"accent_color",h);const g=localStorage.getItem("dark_mode");g&&await this.set(re.APPEARANCE,"dark_mode",g);for(let p=0;p<localStorage.length;p++){const f=localStorage.key(p);if(f&&(f.startsWith("desktop")||f.startsWith("image_")||f.startsWith("customText")||f.includes("wallpaper")||f.includes("color")||f.includes("font")||f==="organizations")){const m=localStorage.getItem(f);if(m)try{await this.set(re.MISC,f,JSON.parse(m))}catch{await this.set(re.MISC,f,m)}}}await this.set(re.MISC,"migrated_from_localstorage",!0),console.log("")}catch(s){throw console.error(":",s),s}}}};const he=new cj;async function dj(){console.log("=== Database Diagnosis ===");try{await he.init(),console.log(" Database initialized successfully");const e=he.db;if(e){const n=Array.from(e.objectStoreNames);console.log("Available stores:",n);const i=Object.values(re).filter(l=>!n.includes(l));i.length>0?(console.error(" Missing stores:",i),console.log("Attempting to recreate database..."),e.close(),await new Promise((l,c)=>{const u=indexedDB.deleteDatabase(Ml);u.onsuccess=()=>{console.log("Database deleted successfully"),l()},u.onerror=()=>{console.error("Failed to delete database"),c(u.error)}}),await he.init(),console.log(" Database recreated successfully")):console.log(" All required stores are present"),await he.set(re.MISC,"test_key","test_value"),await he.get(re.MISC,"test_key")==="test_value"?(console.log(" Read/write operations working"),await he.delete(re.MISC,"test_key")):console.error(" Read/write operations failed")}console.log("=== Diagnosis Complete ===")}catch(e){throw console.error(" Database diagnosis failed:",e),e}}typeof window<"u"&&(window.diagnoseDatabaseIssues=dj,window.clearDatabase=async()=>{const e=he.db;e&&e.close(),await new Promise(n=>{const s=indexedDB.deleteDatabase(Ml);s.onsuccess=()=>{console.log("Database cleared successfully. Please refresh the page."),n()}})});/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fj=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,s,i)=>i?i.toUpperCase():s.toLowerCase()),q0=e=>{const n=fj(e);return n.charAt(0).toUpperCase()+n.slice(1)},cb=(...e)=>e.filter((n,s,i)=>!!n&&n.trim()!==""&&i.indexOf(n)===s).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=N.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:c,...u},h)=>N.createElement("svg",{ref:h,...hj,width:n,height:n,stroke:e,strokeWidth:i?Number(s)*24/Number(n):s,className:cb("lucide",o),...u},[...c.map(([g,p])=>N.createElement(g,p)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=(e,n)=>{const s=N.forwardRef(({className:i,...o},l)=>N.createElement(pj,{ref:l,iconNode:n,className:cb(`lucide-${uj(q0(e))}`,`lucide-${e}`,i),...o}));return s.displayName=q0(e),s};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],If=Me("activity",mj);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],xj=Me("align-left",gj);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Lu=Me("archive",bj);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],yj=Me("arrow-left",vj);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],kj=Me("arrow-right",wj);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Cj=Me("arrow-up",Sj);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]],Nj=Me("battery",jj);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Ej=Me("book-open",_j);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Tj=Me("book",Aj);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],Fj=Me("bookmark",Dj);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Ij=Me("box",Mj);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],qs=Me("calendar",Pj);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Pf=Me("camera",Rj);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=[["path",{d:"M22 20v-9H2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2Z",key:"109fe4"}],["path",{d:"M18 11V4H6v7",key:"mon5oj"}],["path",{d:"M15 22v-4a3 3 0 0 0-3-3a3 3 0 0 0-3 3v4",key:"1k4jtn"}],["path",{d:"M22 11V9",key:"3zbp94"}],["path",{d:"M2 11V9",key:"1x5rnq"}],["path",{d:"M6 4V2",key:"1rsq15"}],["path",{d:"M18 4V2",key:"1jsdo1"}],["path",{d:"M10 4V2",key:"75d9ly"}],["path",{d:"M14 4V2",key:"8nj3z6"}]],Lj=Me("castle",Bj);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Dt=Me("check",zj);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],zu=Me("chevron-down",Oj);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],$n=Me("chevron-left",Vj);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ta=Me("chevron-right",$j);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Rf=Me("circle-alert",Hj);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],Wj=Me("circle-arrow-up",Uj);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Ou=Me("clock",Kj);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],qj=Me("copy",Gj);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],db=Me("database",Zj);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Qj=Me("download",Yj);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Jj=Me("ellipsis",Xj);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]],tN=Me("eraser",eN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]],Bf=Me("file-pen-line",nN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ub=Me("file-text",sN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],aN=Me("flag",rN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=[["path",{d:"M12 5a3 3 0 1 1 3 3m-3-3a3 3 0 1 0-3 3m3-3v1M9 8a3 3 0 1 0 3 3M9 8h1m5 0a3 3 0 1 1-3 3m3-3h-1m-2 3v-1",key:"3pnvol"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M12 10v12",key:"6ubwww"}],["path",{d:"M12 22c4.2 0 7-1.667 7-5-4.2 0-7 1.667-7 5Z",key:"9hd38g"}],["path",{d:"M12 22c-4.2 0-7-1.667-7-5 4.2 0 7 1.667 7 5Z",key:"ufn41s"}]],fb=Me("flower-2",iN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],lN=Me("gift",oN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],hb=Me("globe",cN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],uN=Me("grid-3x3",dN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],hN=Me("hard-drive",fN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],mN=Me("house",pN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Xr=Me("image",gN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],bN=Me("info",xN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],yN=Me("key",vN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],kN=Me("layers",wN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],pb=Me("layout-grid",SN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],Z0=Me("library",CN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],NN=Me("list",jN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],EN=Me("loader-circle",_N);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Y0=Me("mail",AN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Vu=Me("map-pin",TN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],Q0=Me("message-circle",DN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],MN=Me("message-square",FN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=[["path",{d:"M5 12h14",key:"1ays0h"}]],PN=Me("minus",IN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],BN=Me("monitor",RN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],mb=Me("moon",LN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],ON=Me("palette",zN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],$N=Me("pen-line",VN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],UN=Me("pin",HN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Cr=Me("plus",WN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],X0=Me("refresh-cw",KN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]],qN=Me("reply",GN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Xa=Me("save",ZN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],QN=Me("search",YN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],Lf=Me("server",XN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Kl=Me("settings",JN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],gb=Me("share-2",e4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]],n4=Me("share",t4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],$u=Me("shield-check",s4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],a4=Me("shield",r4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],o4=Me("smartphone",i4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],c4=Me("smile",l4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],u4=Me("sparkles",d4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],h4=Me("square-check-big",f4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M19.27 13.73A2.5 2.5 0 0 0 17.5 13h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-1.5c0-.66-.26-1.3-.73-1.77Z",key:"1sy9ra"}],["path",{d:"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-3-3c-1.66 0-3 1-3 3s1 2 1 3.5V13",key:"cnxgux"}]],m4=Me("stamp",p4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],x4=Me("star",g4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],xb=Me("stethoscope",b4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M14 3v4a2 2 0 0 0 2 2h4",key:"36rjfy"}],["path",{d:"M8 13h.01",key:"1sbv64"}],["path",{d:"M16 13h.01",key:"wip0gl"}],["path",{d:"M10 16s.8 1 2 1c1.3 0 2-1 2-1",key:"1vvgv3"}]],y4=Me("sticker",v4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],k4=Me("sun",w4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],C4=Me("sword",S4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],N4=Me("swords",j4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],E4=Me("table",_4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],J0=Me("tag",A4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]],bb=Me("terminal",T4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],F4=Me("thumbs-down",D4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],I4=Me("thumbs-up",M4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Hn=Me("trash-2",P4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],B4=Me("triangle-alert",R4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],zf=Me("upload",L4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],O4=Me("user-plus",z4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],is=Me("user",V4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Of=Me("users",$4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],U4=Me("wifi",H4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ht=Me("x",W4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],G4=Me("zap",K4);function q4({onLoginSuccess:e}){const[n,s]=N.useState({name:"",country:"",fortress:"",date:""}),[i,o]=N.useState(!1),[l,c]=N.useState(!1),u=()=>{if(!n.name||!n.country||!n.fortress||!n.date){c(!0);return}o(!0),setTimeout(async()=>{await he.set(re.USER_DATA,"userData",n),e(n),o(!1)},2e3)};return r.jsxs("div",{className:"min-h-screen w-full bg-[#F2F0EB] flex flex-col items-center justify-center p-6 font-['Source_Han_Sans_CN_VF',sans-serif] relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.03]",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),r.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-blue-100/50 rounded-full blur-3xl pointer-events-none"}),r.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-gray-200/50 rounded-full blur-3xl pointer-events-none"}),r.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"w-full max-w-md relative z-10",children:[r.jsxs("div",{className:"flex flex-col items-center mb-8",children:[r.jsx(je.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8,delay:.2},className:"w-32 h-32 mb-6 drop-shadow-2xl",children:r.jsx("img",{alt:"Touken OS Logo",className:"w-full h-full object-contain",src:_f})}),r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("h1",{className:"text-2xl font-bold text-[#2C2C2C] tracking-tight",children:""}),r.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs font-mono text-[#8C8C89] uppercase tracking-widest bg-white/50 py-1 px-3 rounded-full border border-[#D6D3CC]",children:[r.jsx($u,{className:"w-3 h-3"}),"Secure Connection"]})]})]}),r.jsxs("div",{className:"bg-white/80 backdrop-blur-xl shadow-[0_8px_30px_rgb(0,0,0,0.04)] rounded-2xl overflow-hidden border border-white",children:[r.jsx("div",{className:"h-1.5 w-full bg-[#2C2C2C]"}),r.jsxs("div",{className:"p-8 space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-1.5",children:[r.jsxs("label",{className:"text-[10px] font-bold text-[#8C8C89] uppercase tracking-wider flex items-center gap-1.5",children:[r.jsx(is,{className:"w-3 h-3"})," "]}),r.jsx("input",{type:"text",value:n.name,onChange:h=>s({...n,name:h.target.value}),placeholder:"",className:"w-full bg-[#F9F9F7] border-b-2 border-[#E5E5E5] px-3 py-2.5 text-sm font-medium text-[#2C2C2C] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-all rounded-t-md placeholder:text-[#BBB]"})]}),r.jsxs("div",{className:"space-y-1.5",children:[r.jsxs("label",{className:"text-[10px] font-bold text-[#8C8C89] uppercase tracking-wider flex items-center gap-1.5",children:[r.jsx(Vu,{className:"w-3 h-3"})," "]}),r.jsx("input",{type:"text",value:n.country,onChange:h=>s({...n,country:h.target.value}),placeholder:" (: )",className:"w-full bg-[#F9F9F7] border-b-2 border-[#E5E5E5] px-3 py-2.5 text-sm font-medium text-[#2C2C2C] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-all rounded-t-md placeholder:text-[#BBB]"})]}),r.jsxs("div",{className:"space-y-1.5",children:[r.jsxs("label",{className:"text-[10px] font-bold text-[#8C8C89] uppercase tracking-wider flex items-center gap-1.5",children:[r.jsx(mN,{className:"w-3 h-3"})," "]}),r.jsx("input",{type:"text",value:n.fortress,onChange:h=>s({...n,fortress:h.target.value}),placeholder:"",className:"w-full bg-[#F9F9F7] border-b-2 border-[#E5E5E5] px-3 py-2.5 text-sm font-medium text-[#2C2C2C] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-all rounded-t-md placeholder:text-[#BBB]"})]}),r.jsxs("div",{className:"space-y-1.5",children:[r.jsxs("label",{className:"text-[10px] font-bold text-[#8C8C89] uppercase tracking-wider flex items-center gap-1.5",children:[r.jsx(qs,{className:"w-3 h-3"})," "]}),r.jsx("input",{type:"date",value:n.date,onChange:h=>s({...n,date:h.target.value}),className:"w-full bg-[#F9F9F7] border-b-2 border-[#E5E5E5] px-3 py-2.5 text-sm font-medium text-[#2C2C2C] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-all rounded-t-md placeholder:text-[#BBB] font-mono"})]})]}),r.jsx("button",{onClick:u,disabled:i,className:"w-full h-12 bg-[#2C2C2C] active:bg-black hover:bg-black text-white rounded-lg font-bold text-sm tracking-widest uppercase transition-all active:scale-[0.98] shadow-lg flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed group",children:i?r.jsxs(r.Fragment,{children:[r.jsx(EN,{className:"w-4 h-4 animate-spin"}),"Connecting..."]}):r.jsxs(r.Fragment,{children:["",r.jsx(kj,{className:"w-4 h-4 group-active:translate-x-1 group-hover:translate-x-1 transition-transform"})]})})]}),r.jsxs("div",{className:"px-8 py-4 bg-[#F9F9F7] border-t border-[#E5E5E5] flex justify-between items-center text-[10px] text-[#8C8C89] font-mono",children:[r.jsx("span",{children:"SYSTEM: ONLINE"}),r.jsx("span",{children:"VER: 1.0"})]})]})]}),r.jsx(nj,{open:l,onOpenChange:c,children:r.jsxs(rj,{className:"bg-[#F9F9F7] border border-[#D6D3CC] max-w-[320px] rounded-lg",children:[r.jsxs(aj,{className:"text-[#2C2C2C] font-bold flex items-center gap-2",children:[r.jsx($u,{className:"w-5 h-5 text-[#B93636]"}),""]}),r.jsx(ij,{className:"text-[#5A5A55] text-xs",children:""}),r.jsx("div",{className:"flex justify-end mt-4",children:r.jsx(oj,{onClick:()=>c(!1),className:"bg-[#2C2C2C] text-white active:bg-black hover:bg-black text-xs font-bold px-4 h-8 rounded-md",children:""})})]})})]})}function Z4(e){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",n.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}const Y4=e=>{switch(e){case"success":return J4;case"info":return t6;case"warning":return e6;case"error":return n6;default:return null}},Q4=Array(12).fill(0),X4=({visible:e,className:n})=>Ie.createElement("div",{className:["sonner-loading-wrapper",n].filter(Boolean).join(" "),"data-visible":e},Ie.createElement("div",{className:"sonner-spinner"},Q4.map((s,i)=>Ie.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),J4=Ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ie.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),e6=Ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ie.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),t6=Ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ie.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),n6=Ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ie.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),s6=Ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ie.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ie.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),r6=()=>{const[e,n]=Ie.useState(document.hidden);return Ie.useEffect(()=>{const s=()=>{n(document.hidden)};return document.addEventListener("visibilitychange",s),()=>window.removeEventListener("visibilitychange",s)},[]),e};let Hu=1;class a6{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{const s=this.subscribers.indexOf(n);this.subscribers.splice(s,1)}),this.publish=n=>{this.subscribers.forEach(s=>s(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var s;const{message:i,...o}=n,l=typeof n?.id=="number"||((s=n.id)==null?void 0:s.length)>0?n.id:Hu++,c=this.toasts.find(h=>h.id===l),u=n.dismissible===void 0?!0:n.dismissible;return this.dismissedToasts.has(l)&&this.dismissedToasts.delete(l),c?this.toasts=this.toasts.map(h=>h.id===l?(this.publish({...h,...n,id:l,title:i}),{...h,...n,id:l,dismissible:u,title:i}):h):this.addToast({title:i,...o,dismissible:u,id:l}),l},this.dismiss=n=>(n?(this.dismissedToasts.add(n),requestAnimationFrame(()=>this.subscribers.forEach(s=>s({id:n,dismiss:!0})))):this.toasts.forEach(s=>{this.subscribers.forEach(i=>i({id:s.id,dismiss:!0}))}),n),this.message=(n,s)=>this.create({...s,message:n}),this.error=(n,s)=>this.create({...s,message:n,type:"error"}),this.success=(n,s)=>this.create({...s,type:"success",message:n}),this.info=(n,s)=>this.create({...s,type:"info",message:n}),this.warning=(n,s)=>this.create({...s,type:"warning",message:n}),this.loading=(n,s)=>this.create({...s,type:"loading",message:n}),this.promise=(n,s)=>{if(!s)return;let i;s.loading!==void 0&&(i=this.create({...s,promise:n,type:"loading",message:s.loading,description:typeof s.description!="function"?s.description:void 0}));const o=Promise.resolve(n instanceof Function?n():n);let l=i!==void 0,c;const u=o.then(async g=>{if(c=["resolve",g],Ie.isValidElement(g))l=!1,this.create({id:i,type:"default",message:g});else if(o6(g)&&!g.ok){l=!1;const f=typeof s.error=="function"?await s.error(`HTTP error! status: ${g.status}`):s.error,m=typeof s.description=="function"?await s.description(`HTTP error! status: ${g.status}`):s.description,y=typeof f=="object"&&!Ie.isValidElement(f)?f:{message:f};this.create({id:i,type:"error",description:m,...y})}else if(g instanceof Error){l=!1;const f=typeof s.error=="function"?await s.error(g):s.error,m=typeof s.description=="function"?await s.description(g):s.description,y=typeof f=="object"&&!Ie.isValidElement(f)?f:{message:f};this.create({id:i,type:"error",description:m,...y})}else if(s.success!==void 0){l=!1;const f=typeof s.success=="function"?await s.success(g):s.success,m=typeof s.description=="function"?await s.description(g):s.description,y=typeof f=="object"&&!Ie.isValidElement(f)?f:{message:f};this.create({id:i,type:"success",description:m,...y})}}).catch(async g=>{if(c=["reject",g],s.error!==void 0){l=!1;const p=typeof s.error=="function"?await s.error(g):s.error,f=typeof s.description=="function"?await s.description(g):s.description,b=typeof p=="object"&&!Ie.isValidElement(p)?p:{message:p};this.create({id:i,type:"error",description:f,...b})}}).finally(()=>{l&&(this.dismiss(i),i=void 0),s.finally==null||s.finally.call(s)}),h=()=>new Promise((g,p)=>u.then(()=>c[0]==="reject"?p(c[1]):g(c[1])).catch(p));return typeof i!="string"&&typeof i!="number"?{unwrap:h}:Object.assign(i,{unwrap:h})},this.custom=(n,s)=>{const i=s?.id||Hu++;return this.create({jsx:n(i),id:i,...s}),i},this.getActiveToasts=()=>this.toasts.filter(n=>!this.dismissedToasts.has(n.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const zn=new a6,i6=(e,n)=>{const s=n?.id||Hu++;return zn.addToast({title:e,...n,id:s}),s},o6=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",l6=i6,c6=()=>zn.toasts,d6=()=>zn.getActiveToasts(),eg=Object.assign(l6,{success:zn.success,info:zn.info,warning:zn.warning,error:zn.error,custom:zn.custom,message:zn.message,promise:zn.promise,dismiss:zn.dismiss,loading:zn.loading},{getHistory:c6,getToasts:d6});Z4("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function pl(e){return e.label!==void 0}const u6=3,f6="24px",h6="16px",tg=4e3,p6=356,m6=14,g6=45,x6=200;function As(...e){return e.filter(Boolean).join(" ")}function b6(e){const[n,s]=e.split("-"),i=[];return n&&i.push(n),s&&i.push(s),i}const v6=e=>{var n,s,i,o,l,c,u,h,g;const{invert:p,toast:f,unstyled:m,interacting:b,setHeights:y,visibleToasts:v,heights:C,index:w,toasts:F,expanded:j,removeToast:T,defaultRichColors:z,closeButton:B,style:U,cancelButtonStyle:D,actionButtonStyle:A,className:H="",descriptionClassName:Y="",duration:_,position:L,gap:k,expandByDefault:$,classNames:P,icons:I,closeButtonAriaLabel:q="Close toast"}=e,[G,Q]=Ie.useState(null),[M,O]=Ie.useState(null),[ee,W]=Ie.useState(!1),[V,Z]=Ie.useState(!1),[ue,ce]=Ie.useState(!1),[me,Te]=Ie.useState(!1),[ie,Ce]=Ie.useState(!1),[be,R]=Ie.useState(0),[fe,te]=Ie.useState(0),J=Ie.useRef(f.duration||_||tg),X=Ie.useRef(null),se=Ie.useRef(null),ye=w===0,ve=w+1<=v,le=f.type,ke=f.dismissible!==!1,Ne=f.className||"",_e=f.descriptionClassName||"",Re=Ie.useMemo(()=>C.findIndex(Ge=>Ge.toastId===f.id)||0,[C,f.id]),at=Ie.useMemo(()=>{var Ge;return(Ge=f.closeButton)!=null?Ge:B},[f.closeButton,B]),Be=Ie.useMemo(()=>f.duration||_||tg,[f.duration,_]),mt=Ie.useRef(0),ct=Ie.useRef(0),it=Ie.useRef(0),bt=Ie.useRef(null),[ot,kt]=L.split("-"),nn=Ie.useMemo(()=>C.reduce((Ge,St,Nt)=>Nt>=Re?Ge:Ge+St.height,0),[C,Re]),Ft=r6(),bn=f.invert||p,un=le==="loading";ct.current=Ie.useMemo(()=>Re*k+nn,[Re,nn]),Ie.useEffect(()=>{J.current=Be},[Be]),Ie.useEffect(()=>{W(!0)},[]),Ie.useEffect(()=>{const Ge=se.current;if(Ge){const St=Ge.getBoundingClientRect().height;return te(St),y(Nt=>[{toastId:f.id,height:St,position:f.position},...Nt]),()=>y(Nt=>Nt.filter(wt=>wt.toastId!==f.id))}},[y,f.id]),Ie.useLayoutEffect(()=>{if(!ee)return;const Ge=se.current,St=Ge.style.height;Ge.style.height="auto";const Nt=Ge.getBoundingClientRect().height;Ge.style.height=St,te(Nt),y(wt=>wt.find(zt=>zt.toastId===f.id)?wt.map(zt=>zt.toastId===f.id?{...zt,height:Nt}:zt):[{toastId:f.id,height:Nt,position:f.position},...wt])},[ee,f.title,f.description,y,f.id,f.jsx,f.action,f.cancel]);const Yt=Ie.useCallback(()=>{Z(!0),R(ct.current),y(Ge=>Ge.filter(St=>St.toastId!==f.id)),setTimeout(()=>{T(f)},x6)},[f,T,y,ct]);Ie.useEffect(()=>{if(f.promise&&le==="loading"||f.duration===1/0||f.type==="loading")return;let Ge;return j||b||Ft?(()=>{if(it.current<mt.current){const wt=new Date().getTime()-mt.current;J.current=J.current-wt}it.current=new Date().getTime()})():(()=>{J.current!==1/0&&(mt.current=new Date().getTime(),Ge=setTimeout(()=>{f.onAutoClose==null||f.onAutoClose.call(f,f),Yt()},J.current))})(),()=>clearTimeout(Ge)},[j,b,f,le,Ft,Yt]),Ie.useEffect(()=>{f.delete&&(Yt(),f.onDismiss==null||f.onDismiss.call(f,f))},[Yt,f.delete]);function sn(){var Ge;if(I?.loading){var St;return Ie.createElement("div",{className:As(P?.loader,f==null||(St=f.classNames)==null?void 0:St.loader,"sonner-loader"),"data-visible":le==="loading"},I.loading)}return Ie.createElement(X4,{className:As(P?.loader,f==null||(Ge=f.classNames)==null?void 0:Ge.loader),visible:le==="loading"})}const Qt=f.icon||I?.[le]||Y4(le);var jt,Wt;return Ie.createElement("li",{tabIndex:0,ref:se,className:As(H,Ne,P?.toast,f==null||(n=f.classNames)==null?void 0:n.toast,P?.default,P?.[le],f==null||(s=f.classNames)==null?void 0:s[le]),"data-sonner-toast":"","data-rich-colors":(jt=f.richColors)!=null?jt:z,"data-styled":!(f.jsx||f.unstyled||m),"data-mounted":ee,"data-promise":!!f.promise,"data-swiped":ie,"data-removed":V,"data-visible":ve,"data-y-position":ot,"data-x-position":kt,"data-index":w,"data-front":ye,"data-swiping":ue,"data-dismissible":ke,"data-type":le,"data-invert":bn,"data-swipe-out":me,"data-swipe-direction":M,"data-expanded":!!(j||$&&ee),"data-testid":f.testId,style:{"--index":w,"--toasts-before":w,"--z-index":F.length-w,"--offset":`${V?be:ct.current}px`,"--initial-height":$?"auto":`${fe}px`,...U,...f.style},onDragEnd:()=>{ce(!1),Q(null),bt.current=null},onPointerDown:Ge=>{Ge.button!==2&&(un||!ke||(X.current=new Date,R(ct.current),Ge.target.setPointerCapture(Ge.pointerId),Ge.target.tagName!=="BUTTON"&&(ce(!0),bt.current={x:Ge.clientX,y:Ge.clientY})))},onPointerUp:()=>{var Ge,St,Nt;if(me||!ke)return;bt.current=null;const wt=Number(((Ge=se.current)==null?void 0:Ge.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),rn=Number(((St=se.current)==null?void 0:St.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),zt=new Date().getTime()-((Nt=X.current)==null?void 0:Nt.getTime()),Kt=G==="x"?wt:rn,ds=Math.abs(Kt)/zt;if(Math.abs(Kt)>=g6||ds>.11){R(ct.current),f.onDismiss==null||f.onDismiss.call(f,f),O(G==="x"?wt>0?"right":"left":rn>0?"down":"up"),Yt(),Te(!0);return}else{var an,jn;(an=se.current)==null||an.style.setProperty("--swipe-amount-x","0px"),(jn=se.current)==null||jn.style.setProperty("--swipe-amount-y","0px")}Ce(!1),ce(!1),Q(null)},onPointerMove:Ge=>{var St,Nt,wt;if(!bt.current||!ke||((St=window.getSelection())==null?void 0:St.toString().length)>0)return;const zt=Ge.clientY-bt.current.y,Kt=Ge.clientX-bt.current.x;var ds;const an=(ds=e.swipeDirections)!=null?ds:b6(L);!G&&(Math.abs(Kt)>1||Math.abs(zt)>1)&&Q(Math.abs(Kt)>Math.abs(zt)?"x":"y");let jn={x:0,y:0};const Un=Nn=>1/(1.5+Math.abs(Nn)/20);if(G==="y"){if(an.includes("top")||an.includes("bottom"))if(an.includes("top")&&zt<0||an.includes("bottom")&&zt>0)jn.y=zt;else{const Nn=zt*Un(zt);jn.y=Math.abs(Nn)<Math.abs(zt)?Nn:zt}}else if(G==="x"&&(an.includes("left")||an.includes("right")))if(an.includes("left")&&Kt<0||an.includes("right")&&Kt>0)jn.x=Kt;else{const Nn=Kt*Un(Kt);jn.x=Math.abs(Nn)<Math.abs(Kt)?Nn:Kt}(Math.abs(jn.x)>0||Math.abs(jn.y)>0)&&Ce(!0),(Nt=se.current)==null||Nt.style.setProperty("--swipe-amount-x",`${jn.x}px`),(wt=se.current)==null||wt.style.setProperty("--swipe-amount-y",`${jn.y}px`)}},at&&!f.jsx&&le!=="loading"?Ie.createElement("button",{"aria-label":q,"data-disabled":un,"data-close-button":!0,onClick:un||!ke?()=>{}:()=>{Yt(),f.onDismiss==null||f.onDismiss.call(f,f)},className:As(P?.closeButton,f==null||(i=f.classNames)==null?void 0:i.closeButton)},(Wt=I?.close)!=null?Wt:s6):null,(le||f.icon||f.promise)&&f.icon!==null&&(I?.[le]!==null||f.icon)?Ie.createElement("div",{"data-icon":"",className:As(P?.icon,f==null||(o=f.classNames)==null?void 0:o.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||sn():null,f.type!=="loading"?Qt:null):null,Ie.createElement("div",{"data-content":"",className:As(P?.content,f==null||(l=f.classNames)==null?void 0:l.content)},Ie.createElement("div",{"data-title":"",className:As(P?.title,f==null||(c=f.classNames)==null?void 0:c.title)},f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title),f.description?Ie.createElement("div",{"data-description":"",className:As(Y,_e,P?.description,f==null||(u=f.classNames)==null?void 0:u.description)},typeof f.description=="function"?f.description():f.description):null),Ie.isValidElement(f.cancel)?f.cancel:f.cancel&&pl(f.cancel)?Ie.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||D,onClick:Ge=>{pl(f.cancel)&&ke&&(f.cancel.onClick==null||f.cancel.onClick.call(f.cancel,Ge),Yt())},className:As(P?.cancelButton,f==null||(h=f.classNames)==null?void 0:h.cancelButton)},f.cancel.label):null,Ie.isValidElement(f.action)?f.action:f.action&&pl(f.action)?Ie.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||A,onClick:Ge=>{pl(f.action)&&(f.action.onClick==null||f.action.onClick.call(f.action,Ge),!Ge.defaultPrevented&&Yt())},className:As(P?.actionButton,f==null||(g=f.classNames)==null?void 0:g.actionButton)},f.action.label):null)};function ng(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function y6(e,n){const s={};return[e,n].forEach((i,o)=>{const l=o===1,c=l?"--mobile-offset":"--offset",u=l?h6:f6;function h(g){["top","right","bottom","left"].forEach(p=>{s[`${c}-${p}`]=typeof g=="number"?`${g}px`:g})}typeof i=="number"||typeof i=="string"?h(i):typeof i=="object"?["top","right","bottom","left"].forEach(g=>{i[g]===void 0?s[`${c}-${g}`]=u:s[`${c}-${g}`]=typeof i[g]=="number"?`${i[g]}px`:i[g]}):h(u)}),s}const w6=Ie.forwardRef(function(n,s){const{id:i,invert:o,position:l="bottom-right",hotkey:c=["altKey","KeyT"],expand:u,closeButton:h,className:g,offset:p,mobileOffset:f,theme:m="light",richColors:b,duration:y,style:v,visibleToasts:C=u6,toastOptions:w,dir:F=ng(),gap:j=m6,icons:T,containerAriaLabel:z="Notifications"}=n,[B,U]=Ie.useState([]),D=Ie.useMemo(()=>i?B.filter(ee=>ee.toasterId===i):B.filter(ee=>!ee.toasterId),[B,i]),A=Ie.useMemo(()=>Array.from(new Set([l].concat(D.filter(ee=>ee.position).map(ee=>ee.position)))),[D,l]),[H,Y]=Ie.useState([]),[_,L]=Ie.useState(!1),[k,$]=Ie.useState(!1),[P,I]=Ie.useState(m!=="system"?m:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),q=Ie.useRef(null),G=c.join("+").replace(/Key/g,"").replace(/Digit/g,""),Q=Ie.useRef(null),M=Ie.useRef(!1),O=Ie.useCallback(ee=>{U(W=>{var V;return(V=W.find(Z=>Z.id===ee.id))!=null&&V.delete||zn.dismiss(ee.id),W.filter(({id:Z})=>Z!==ee.id)})},[]);return Ie.useEffect(()=>zn.subscribe(ee=>{if(ee.dismiss){requestAnimationFrame(()=>{U(W=>W.map(V=>V.id===ee.id?{...V,delete:!0}:V))});return}setTimeout(()=>{s1.flushSync(()=>{U(W=>{const V=W.findIndex(Z=>Z.id===ee.id);return V!==-1?[...W.slice(0,V),{...W[V],...ee},...W.slice(V+1)]:[ee,...W]})})})}),[B]),Ie.useEffect(()=>{if(m!=="system"){I(m);return}if(m==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?I("dark"):I("light")),typeof window>"u")return;const ee=window.matchMedia("(prefers-color-scheme: dark)");try{ee.addEventListener("change",({matches:W})=>{I(W?"dark":"light")})}catch{ee.addListener(({matches:V})=>{try{I(V?"dark":"light")}catch(Z){console.error(Z)}})}},[m]),Ie.useEffect(()=>{B.length<=1&&L(!1)},[B]),Ie.useEffect(()=>{const ee=W=>{var V;if(c.every(ce=>W[ce]||W.code===ce)){var ue;L(!0),(ue=q.current)==null||ue.focus()}W.code==="Escape"&&(document.activeElement===q.current||(V=q.current)!=null&&V.contains(document.activeElement))&&L(!1)};return document.addEventListener("keydown",ee),()=>document.removeEventListener("keydown",ee)},[c]),Ie.useEffect(()=>{if(q.current)return()=>{Q.current&&(Q.current.focus({preventScroll:!0}),Q.current=null,M.current=!1)}},[q.current]),Ie.createElement("section",{ref:s,"aria-label":`${z} ${G}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},A.map((ee,W)=>{var V;const[Z,ue]=ee.split("-");return D.length?Ie.createElement("ol",{key:ee,dir:F==="auto"?ng():F,tabIndex:-1,ref:q,className:g,"data-sonner-toaster":!0,"data-sonner-theme":P,"data-y-position":Z,"data-x-position":ue,style:{"--front-toast-height":`${((V=H[0])==null?void 0:V.height)||0}px`,"--width":`${p6}px`,"--gap":`${j}px`,...v,...y6(p,f)},onBlur:ce=>{M.current&&!ce.currentTarget.contains(ce.relatedTarget)&&(M.current=!1,Q.current&&(Q.current.focus({preventScroll:!0}),Q.current=null))},onFocus:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||M.current||(M.current=!0,Q.current=ce.relatedTarget)},onMouseEnter:()=>L(!0),onMouseMove:()=>L(!0),onMouseLeave:()=>{k||L(!1)},onDragEnd:()=>L(!1),onPointerDown:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||$(!0)},onPointerUp:()=>$(!1)},D.filter(ce=>!ce.position&&W===0||ce.position===ee).map((ce,me)=>{var Te,ie;return Ie.createElement(v6,{key:ce.id,icons:T,index:me,toast:ce,defaultRichColors:b,duration:(Te=w?.duration)!=null?Te:y,className:w?.className,descriptionClassName:w?.descriptionClassName,invert:o,visibleToasts:C,closeButton:(ie=w?.closeButton)!=null?ie:h,interacting:k,position:ee,style:w?.style,unstyled:w?.unstyled,classNames:w?.classNames,cancelButtonStyle:w?.cancelButtonStyle,actionButtonStyle:w?.actionButtonStyle,closeButtonAriaLabel:w?.closeButtonAriaLabel,removeToast:O,toasts:D.filter(Ce=>Ce.position==ce.position),heights:H.filter(Ce=>Ce.position==ce.position),setHeights:Y,expandByDefault:u,gap:j,expanded:_,swipeDirections:n.swipeDirections})})):null}))}),sg={p15366300:"M94 47C94 72.9574 72.9574 94 47 94C21.0426 94 0 72.9574 0 47C0 21.0426 21.0426 0 47 0C72.9574 0 94 21.0426 94 47Z",p3086ef80:"M3.5 1.67073L0 5.77489e-08V4.04145L3.5 2.37073V1.67073ZM313.5 2.37073L317 4.04145V5.77489e-08L313.5 1.67073V2.37073ZM4.48585 2.02073V2.37073H7.47641V2.02073V1.67073H4.48585V2.02073ZM10.467 2.02073V2.37073H13.4575V2.02073V1.67073H10.467V2.02073ZM16.4481 2.02073V2.37073H19.4387V2.02073V1.67073H16.4481V2.02073ZM22.4292 2.02073V2.37073H25.4198V2.02073V1.67073H22.4292V2.02073ZM28.4104 2.02073V2.37073H31.4009V2.02073V1.67073H28.4104V2.02073ZM34.3915 2.02073V2.37073H37.3821V2.02073V1.67073H34.3915V2.02073ZM40.3726 2.02073V2.37073H43.3632V2.02073V1.67073H40.3726V2.02073ZM46.3538 2.02073V2.37073H49.3443V2.02073V1.67073H46.3538V2.02073ZM52.3349 2.02073V2.37073H55.3255V2.02073V1.67073H52.3349V2.02073ZM58.316 2.02073V2.37073H61.3066V2.02073V1.67073H58.316V2.02073ZM64.2972 2.02073V2.37073H67.2877V2.02073V1.67073H64.2972V2.02073ZM70.2783 2.02073V2.37073H73.2689V2.02073V1.67073H70.2783V2.02073ZM76.2594 2.02073V2.37073H79.25V2.02073V1.67073H76.2594V2.02073ZM82.2405 2.02073V2.37073H85.2311V2.02073V1.67073H82.2405V2.02073ZM88.2217 2.02073V2.37073H91.2122V2.02073V1.67073H88.2217V2.02073ZM94.2028 2.02073V2.37073H97.1934V2.02073V1.67073H94.2028V2.02073ZM100.184 2.02073V2.37073H103.174V2.02073V1.67073H100.184V2.02073ZM106.165 2.02073V2.37073H109.156V2.02073V1.67073H106.165V2.02073ZM112.146 2.02073V2.37073H115.137V2.02073V1.67073H112.146V2.02073ZM118.127 2.02073V2.37073H121.118V2.02073V1.67073H118.127V2.02073ZM124.108 2.02073V2.37073H127.099V2.02073V1.67073H124.108V2.02073ZM130.09 2.02073V2.37073H133.08V2.02073V1.67073H130.09V2.02073ZM136.071 2.02073V2.37073H139.061V2.02073V1.67073H136.071V2.02073ZM142.052 2.02073V2.37073H145.042V2.02073V1.67073H142.052V2.02073ZM148.033 2.02073V2.37073H151.024V2.02073V1.67073H148.033V2.02073ZM154.014 2.02073V2.37073H157.005V2.02073V1.67073H154.014V2.02073ZM159.995 2.02073V2.37073H162.986V2.02073V1.67073H159.995V2.02073ZM165.976 2.02073V2.37073H168.967V2.02073V1.67073H165.976V2.02073ZM171.958 2.02073V2.37073H174.948V2.02073V1.67073H171.958V2.02073ZM177.939 2.02073V2.37073H180.929V2.02073V1.67073H177.939V2.02073ZM183.92 2.02073V2.37073H186.91V2.02073V1.67073H183.92V2.02073ZM189.901 2.02073V2.37073H192.892V2.02073V1.67073H189.901V2.02073ZM195.882 2.02073V2.37073H198.873V2.02073V1.67073H195.882V2.02073ZM201.863 2.02073V2.37073H204.854V2.02073V1.67073H201.863V2.02073ZM207.844 2.02073V2.37073H210.835V2.02073V1.67073H207.844V2.02073ZM213.826 2.02073V2.37073H216.816V2.02073V1.67073H213.826V2.02073ZM219.807 2.02073V2.37073H222.797V2.02073V1.67073H219.807V2.02073ZM225.788 2.02073V2.37073H228.778V2.02073V1.67073H225.788V2.02073ZM231.769 2.02073V2.37073H234.76V2.02073V1.67073H231.769V2.02073ZM237.75 2.02073V2.37073H240.741V2.02073V1.67073H237.75V2.02073ZM243.731 2.02073V2.37073H246.722V2.02073V1.67073H243.731V2.02073ZM249.712 2.02073V2.37073H252.703V2.02073V1.67073H249.712V2.02073ZM255.693 2.02073V2.37073H258.684V2.02073V1.67073H255.693V2.02073ZM261.675 2.02073V2.37073H264.665V2.02073V1.67073H261.675V2.02073ZM267.656 2.02073V2.37073H270.646V2.02073V1.67073H267.656V2.02073ZM273.637 2.02073V2.37073H276.627V2.02073V1.67073H273.637V2.02073ZM279.618 2.02073V2.37073H282.609V2.02073V1.67073H279.618V2.02073ZM285.599 2.02073V2.37073H288.59V2.02073V1.67073H285.599V2.02073ZM291.58 2.02073V2.37073H294.571V2.02073V1.67073H291.58V2.02073ZM297.561 2.02073V2.37073H300.552V2.02073V1.67073H297.561V2.02073ZM303.543 2.02073V2.37073H306.533V2.02073V1.67073H303.543V2.02073ZM309.524 2.02073V2.37073H312.514V2.02073V1.67073H309.524V2.02073Z"},k6="/assets/8f74948c921008406168688e78dcbd91d8f4d681-x-mW1jEE.png",S6="/assets/a5993753075c329027b5d2cb65fd9ee64c4fcfce-D33ig08G.png",C6="/assets/bb6c57b71e6f8f321834896ce493dada3cf559c0-Yy02ktKg.png",j6="/assets/f2f6c119896a12e8176a39008632fd4e00350238-Cii0Sw53.png",N6={maxWidth:1024,maxHeight:1024,quality:.85,mimeType:"image/jpeg"};async function Vf(e,n={}){const s={...N6,...n};return new Promise((i,o)=>{const l=new FileReader;l.onload=c=>{const u=new Image;u.onload=()=>{try{const h=document.createElement("canvas"),g=h.getContext("2d");if(!g){o(new Error("canvas"));return}let{width:p,height:f}=u;const m=s.maxWidth,b=s.maxHeight;if(p>m||f>b){const y=Math.min(m/p,b/f);p=Math.round(p*y),f=Math.round(f*y)}h.width=p,h.height=f,g.drawImage(u,0,0,p,f),h.toBlob(y=>{y?i(y):o(new Error(""))},s.mimeType,s.quality)}catch(h){o(h)}},u.onerror=()=>{o(new Error(""))},u.src=c.target?.result},l.onerror=()=>{o(new Error(""))},l.readAsDataURL(e)})}async function _6(e){return Vf(e,{maxWidth:200,maxHeight:200,quality:.9,mimeType:"image/jpeg"})}function vb(e){const n=e.split(","),s=n[0].match(/:(.*?);/)?.[1]||"image/jpeg",i=atob(n[1]),o=new ArrayBuffer(i.length),l=new Uint8Array(o);for(let c=0;c<i.length;c++)l[c]=i.charCodeAt(c);return new Blob([o],{type:s})}const rg="DesktopImagesDB",Lt="images",E6=3,xn={AVATARS:"avatars",MEMES:"memes",CHAT_IMAGES:"chat_images",SYSTEM:"system"},Is=new Map;function A6(e){return e==="avatar"||e==="chat-avatar"||e.startsWith("character-avatar-")||e.startsWith("character-")&&e.endsWith("-avatar")?xn.AVATARS:e==="profileBackground"||e==="desktop-wallpaper"||e==="chat-background"||e==="anniversary"||e.startsWith("desktop2_")?xn.SYSTEM:e.startsWith("meme-")?xn.MEMES:e.startsWith("chat-image-")?xn.CHAT_IMAGES:xn.SYSTEM}function Ja(e,n){return e.includes("/")?e:`${A6(e)}/${e}`}function T6(e){const n=e.split("/");return n.length>1?n[1]:e}const ks=()=>new Promise((e,n)=>{const s=indexedDB.open(rg,E6);s.onerror=()=>{console.error("Failed to open image database:",s.error),n(s.error)},s.onsuccess=()=>{const i=s.result;if(!i.objectStoreNames.contains(Lt)){console.error("Image store not found, recreating database..."),i.close();const o=indexedDB.deleteDatabase(rg);o.onsuccess=()=>{ks().then(e).catch(n)},o.onerror=()=>{n(new Error("Failed to recreate image database"))};return}e(i)},s.onupgradeneeded=i=>{const o=i.target.result;console.log("Image database upgrade needed from version",i.oldVersion,"to",i.newVersion),o.objectStoreNames.contains(Lt)||(o.createObjectStore(Lt),console.log("Created image store:",Lt))}}),cs=async(e,n)=>{try{const s=await ks();let i;return e==="avatar"||e.includes("avatar")?i=await _6(n):i=n,new Promise((o,l)=>{try{const h=s.transaction([Lt],"readwrite").objectStore(Lt).put(i,Ja(e));h.onsuccess=()=>{s.close();const g=Ka(e,i);o(g)},h.onerror=()=>{console.error("Failed to save image:",h.error),s.close(),l(h.error)}}catch(c){console.error("Error in transaction:",c),s.close(),l(c)}})}catch(s){throw console.error("Failed to save image:",s),s}},Ct=async e=>{try{if(Is.has(e))return Is.get(e);const n=await ks(),s=Ja(e);return new Promise((i,o)=>{try{const c=n.transaction([Lt],"readonly").objectStore(Lt),u=c.get(s);u.onsuccess=()=>{let h=u.result;if(!h&&s!==e){const p=c.get(e);p.onsuccess=()=>{const f=p.result;if(n.close(),!f){i(null);return}if(console.log(`Migrating ${e} from old format to new format...`),M6(e,f).catch(console.error),typeof f=="string")i(f);else{const m=Ka(e,f);i(m)}},p.onerror=()=>{n.close(),i(null)};return}if(n.close(),!h){i(null);return}if(typeof h=="string"){F6(e,h).catch(console.error),i(h);return}const g=Ka(e,h);i(g)},u.onerror=()=>{console.error("Failed to get image:",u.error),n.close(),o(u.error)}}catch(l){console.error("Error in transaction:",l),n.close(),o(l)}})}catch(n){return console.error("Failed to get image:",n),null}};function Ka(e,n){Is.has(e)&&URL.revokeObjectURL(Is.get(e));const s=URL.createObjectURL(n);return Is.set(e,s),s}const D6=e=>{Is.has(e)&&(URL.revokeObjectURL(Is.get(e)),Is.delete(e))},ea=async e=>{try{D6(e);const n=await ks();return new Promise((s,i)=>{try{const c=n.transaction([Lt],"readwrite").objectStore(Lt).delete(Ja(e));c.onsuccess=()=>{n.close(),s()},c.onerror=()=>{console.error("Failed to delete image:",c.error),n.close(),i(c.error)}}catch(o){console.error("Error in transaction:",o),n.close(),i(o)}})}catch(n){throw console.error("Failed to delete image:",n),n}};async function F6(e,n){try{console.log(`Migrating ${e} from Base64 to Blob...`);const s=vb(n),i=await ks();return new Promise((o,l)=>{try{const h=i.transaction([Lt],"readwrite").objectStore(Lt).put(s,Ja(e));h.onsuccess=()=>{i.close(),console.log(`Successfully migrated ${e} to Blob`),Ka(e,s),o()},h.onerror=()=>{console.error("Failed to migrate image:",h.error),i.close(),l(h.error)}}catch(c){console.error("Error in migration transaction:",c),i.close(),l(c)}})}catch(s){console.error("Failed to migrate Base64 to Blob:",s)}}async function M6(e,n){try{const s=await ks();return new Promise((i,o)=>{try{const u=s.transaction([Lt],"readwrite").objectStore(Lt).put(n,Ja(e));u.onsuccess=()=>{s.close(),console.log(`Successfully migrated ${e} to new format`),n instanceof Blob&&Ka(e,n),i()},u.onerror=()=>{console.error("Failed to migrate image:",u.error),s.close(),o(u.error)}}catch(l){console.error("Error in migration transaction:",l),s.close(),o(l)}})}catch(s){console.error("Failed to migrate to new format:",s)}}const I6=()=>{Is.forEach(e=>URL.revokeObjectURL(e)),Is.clear()},P6=async()=>{try{I6();const e=await ks();return new Promise((n,s)=>{try{const l=e.transaction([Lt],"readwrite").objectStore(Lt).clear();l.onsuccess=()=>{e.close(),console.log("All images cleared successfully"),n()},l.onerror=()=>{console.error("Failed to clear all images:",l.error),e.close(),s(l.error)}}catch(i){console.error("Error in clear transaction:",i),e.close(),s(i)}})}catch(e){throw console.error("Failed to clear all images:",e),e}},R6=async()=>{try{const e=await ks(),n=await $f(),s={};for(const{originalKey:i,storageKey:o,category:l}of n)try{const h=e.transaction([Lt],"readonly").objectStore(Lt).get(o);await new Promise((g,p)=>{h.onsuccess=()=>{const f=h.result;f instanceof Blob?s[i]={blob:f,category:l}:typeof f=="string"&&(s[i]={blob:vb(f),category:l}),g()},h.onerror=p})}catch(c){console.error(`Failed to export image ${i}:`,c)}return e.close(),s}catch(e){return console.error("Failed to export all images with category:",e),{}}},B6=async e=>{try{const n=await ks();for(const[s,i]of Object.entries(e))try{await new Promise((o,l)=>{const h=n.transaction([Lt],"readwrite").objectStore(Lt).put(i,Ja(s));h.onsuccess=()=>{Ka(s,i),o()},h.onerror=()=>{console.error(`Failed to import image ${s}:`,h.error),l(h.error)}})}catch(o){console.error(`Failed to process image ${s}:`,o)}n.close(),console.log(`Successfully imported ${Object.keys(e).length} images`)}catch(n){throw console.error("Failed to import images:",n),n}},yb=async()=>{try{const e=await ks();return new Promise((n,s)=>{try{const o=e.transaction([Lt],"readonly").objectStore(Lt),l=o.getAll(),c=o.getAllKeys();let u=[],h=[];l.onsuccess=()=>{u=l.result},c.onsuccess=()=>{h=c.result;const g={[xn.AVATARS]:{count:0,size:0},[xn.SYSTEM]:{count:0,size:0},[xn.MEMES]:{count:0,size:0},[xn.CHAT_IMAGES]:{count:0,size:0},uncategorized:{count:0,size:0}};h.forEach((f,m)=>{const b=String(f),y=u[m],v=y instanceof Blob?y.size:0;if(b.includes("/")){const C=b.split("/")[0];C in g?(g[C].count++,g[C].size+=v):(g.uncategorized.count++,g.uncategorized.size+=v)}else g.uncategorized.count++,g.uncategorized.size+=v});const p={};for(const[f,m]of Object.entries(g))p[f]={count:m.count,size:(m.size/1024).toFixed(2)};e.close(),n(p)},l.onerror=()=>{console.error("Failed to get all data:",l.error),e.close(),s(l.error)},c.onerror=()=>{console.error("Failed to get all keys:",c.error),e.close(),s(c.error)}}catch(i){console.error("Error in transaction:",i),e.close(),s(i)}})}catch(e){return console.error("Failed to get category stats:",e),{[xn.AVATARS]:{count:0,size:"0.00"},[xn.SYSTEM]:{count:0,size:"0.00"},[xn.MEMES]:{count:0,size:"0.00"},[xn.CHAT_IMAGES]:{count:0,size:"0.00"},uncategorized:{count:0,size:"0.00"}}}},$f=async()=>{try{const e=await ks();return new Promise((n,s)=>{try{const l=e.transaction([Lt],"readonly").objectStore(Lt).getAllKeys();l.onsuccess=()=>{e.close();const u=l.result.map(h=>{const g=String(h),p=g.split("/");return{originalKey:T6(g),storageKey:g,category:p.length>1?p[0]:"uncategorized"}});n(u)},l.onerror=()=>{console.error("Failed to list all images:",l.error),e.close(),s(l.error)}}catch(i){console.error("Error in transaction:",i),e.close(),s(i)}})}catch(e){return console.error("Failed to list all images:",e),[]}},Pe={messages:{},chatSettingsDetail:{},userAvatar:void 0},L6=5e3,Uu=(e=!1)=>{Pe.chatSettings=void 0,Pe.userData=void 0,Pe.characters=void 0,Pe.lastUpdate=void 0,e&&(Pe.messages={},Pe.chatSettingsDetail={},Pe.userAvatar=void 0)},z6=()=>Pe.lastUpdate?Date.now()-Pe.lastUpdate<L6:!1,Wu=(e,n)=>Pe.chatSettingsDetail[e]?.remark||n,wb=()=>Pe.userAvatar,kb=e=>{Pe.userAvatar=e};function O6({userData:e,colorMode:n,preloadedImages:s}){const[i,o]=N.useState(0),[l,c]=N.useState(s?.anniversary||null),u=N.useRef(null);N.useEffect(()=>{const p=()=>{try{const m=new Date(e.date);m.setHours(0,0,0,0);const b=new Date;b.setHours(0,0,0,0);const y=Math.abs(b.getTime()-m.getTime()),v=Math.floor(y/(1e3*60*60*24))-1;o(Math.max(0,v))}catch{console.log(""),o(365)}};p();const f=setInterval(p,1e3*60*60*24);return()=>clearInterval(f)},[e.date]),N.useEffect(()=>{(async()=>{const f=await Ct("anniversary");f&&c(f)})()},[]);const h=()=>{u.current?.click()},g=async p=>{const f=p.target.files?.[0];if(f)try{const m=await cs("anniversary",f);c(m)}catch(m){console.error(":",m)}};return r.jsxs("div",{className:"absolute left-[54.1%] w-[38.65%] aspect-square top-[52.9%]","data-name":"",children:[r.jsx("input",{ref:u,type:"file",accept:"image/*",onChange:g,className:"hidden"}),r.jsx("div",{className:"absolute left-1/2 w-full aspect-square top-1/2 translate-x-[-50%] translate-y-[-50%] cursor-pointer hover:opacity-80 transition-opacity rounded-[24px] overflow-hidden",onClick:h,children:l?r.jsx("img",{alt:"",className:"block w-full h-full object-cover",src:l}):r.jsx("div",{className:"block w-full h-full",style:{backgroundColor:"#D5EAE3"}})}),r.jsxs("div",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[11.25%] leading-[normal] left-1/2 text-[clamp(14px,4vw,16px)] text-center top-[11.875%] translate-x-[-50%] w-[62.5%] pointer-events-none ${n==="dark"?"text-black":"text-white"}`,children:[r.jsx("p",{className:"mb-0",children:""}),r.jsx("p",{children:""})]}),r.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Normal',sans-serif] font-[350] h-[14.375%] leading-[normal] left-1/2 text-[clamp(11px,3.25vw,13px)] text-center top-[28.125%] translate-x-[-50%] w-[31.25%] pointer-events-none ${n==="dark"?"text-black":"text-white"}`,children:""}),r.jsxs("p",{className:`absolute font-['Actor:Regular',sans-serif] h-[33.75%] leading-[normal] left-1/2 not-italic text-[0px] text-center top-[calc(50%-16.875%)] translate-x-[-50%] w-[72.5%] pointer-events-none ${n==="dark"?"text-black":"text-white"}`,children:[r.jsx("span",{className:"font-['Actor:Regular',sans-serif] text-[clamp(36px,12vw,48px)]",children:i}),r.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal text-[clamp(11px,3.25vw,13px)]",children:""})]})]})}function V6({userData:e,onUserDataChange:n,colorMode:s,preloadedImages:i}){const[o,l]=N.useState(new Date),[c,u]=N.useState(30),[h,g]=N.useState(""),[p,f]=N.useState(!1),[m,b]=N.useState(i?.profileBackground||null),[y,v]=N.useState(()=>i?.avatar||wb()||null),C=N.useRef(null),w=N.useRef(null);N.useEffect(()=>{const Y=setInterval(()=>{l(new Date)},1e3);return()=>clearInterval(Y)},[]),N.useEffect(()=>{(async()=>{if("getBattery"in navigator)try{const _=await navigator.getBattery();u(Math.round(_.level*100)),_.addEventListener("levelchange",()=>{u(Math.round(_.level*100))})}catch{console.log("")}})()},[]),N.useEffect(()=>{(async()=>{try{const _=await he.get(re.MISC,"customText");_&&g(_);const L=await Ct("profileBackground");L&&b(L);const k=await Ct("avatar");k&&v(k)}catch(_){console.error("Failed to load settings:",_)}})()},[]);const F=Y=>Y.toLocaleTimeString("zh-CN",{hour12:!1}),j=Y=>{const _=Y.getMonth()+1,L=Y.getDate(),$=["","","","","","",""][Y.getDay()];return`${_}${L} ${$}`},T=()=>{f(!0)},z=async()=>{f(!1),await he.set(re.MISC,"customText",h)},B=Y=>{g(Y.target.value)},U=()=>{C.current?.click()},D=()=>{w.current?.click()},A=async Y=>{const _=Y.target.files?.[0];if(_)try{const L=await cs("profileBackground",_);b(L)}catch(L){console.error(":",L)}},H=async Y=>{const _=Y.target.files?.[0];if(_)try{const L=await cs("avatar",_);v(L),window.dispatchEvent(new Event("avatarChanged")),kb(L)}catch(L){console.error(":",L)}};return r.jsxs("div",{className:"absolute h-[41.6%] left-1/2 top-[6.6%] translate-x-[-50%] w-[88.4%]","data-name":"1",children:[r.jsxs("div",{className:`relative backdrop-blur-[15px] backdrop-filter h-full rounded-[24px] shadow-[0px_0px_2px_0px_inset_#ffffff,0px_1px_1px_0px_inset_rgba(255,255,255,0.5)] w-full ${s==="dark"?"bg-[rgba(0,0,0,0.3)]":"bg-[rgba(255,255,255,0.5)]"}`,children:[r.jsx("div",{className:"absolute left-0 right-0 top-0 h-[49.7%] rounded-tl-[24px] rounded-tr-[24px] cursor-pointer hover:opacity-80 transition-opacity overflow-hidden",onClick:U,children:m?r.jsx("img",{alt:"",className:"absolute inset-0 w-full h-full object-cover rounded-tl-[24px] rounded-tr-[24px]",src:m}):r.jsx("div",{className:"absolute inset-0 w-full h-full rounded-tl-[24px] rounded-tr-[24px]",style:{backgroundColor:"#D5EAE3"}})}),r.jsxs("div",{className:"absolute contents left-[1.37%] top-[39.43%]","data-name":"",children:[r.jsxs("div",{className:"flex items-center absolute left-[28.5%] top-[51%]",children:[r.jsx("p",{className:`text-[clamp(14px,4vw,16px)] mr-[6px] ${s==="dark"?"text-white":"text-black"}`,children:e.name}),r.jsx("div",{className:"flex-shrink-0","data-name":"",children:r.jsx("div",{className:"relative bg-[#609f60] h-[14px] rounded-[6px] px-[5px] flex items-center justify-center",children:r.jsx("p",{className:"text-[10px] text-white whitespace-nowrap",style:{fontFamily:"YShi NewHei T, sans-serif",fontWeight:"600"},children:""})})})]}),r.jsxs("p",{className:`absolute font-['Source_Han_Sans_Old_Style:Normal',sans-serif] h-[2.61%] leading-[normal] left-[28.5%] not-italic text-[clamp(12px,3.5vw,14px)] top-[58.5%] w-[68.03%] ${s==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:[e.country,"  ",e.fortress,"  ",e.date]}),r.jsx("div",{className:"absolute left-0 w-[25.68%] aspect-square top-[39.43%] cursor-pointer hover:opacity-80 transition-opacity","data-name":"",onClick:Y=>{Y.stopPropagation(),D()},children:y?r.jsx("img",{alt:"",className:"block w-full h-full object-cover rounded-full",src:y}):r.jsx("svg",{className:"block w-full h-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 94 94",children:r.jsx("path",{d:sg.p15366300,fill:s==="dark"?"rgba(0,0,0,0.5)":"white"})})})]}),r.jsx("div",{className:"absolute contents left-[5.19%] top-[66.5%]","data-name":"Group 1",children:r.jsxs("div",{className:"absolute flex items-center gap-[2.5%] left-[5.19%] top-[66.5%] w-[89.62%] h-[12.8%]",children:[r.jsxs("div",{className:`flex items-center rounded-[24px] px-[2.5%] py-[2.5%] gap-[3%] w-[59.5%] h-full justify-center ${s==="dark"?"bg-[rgba(0,0,0,0.3)]":"bg-[rgba(255,255,255,0.5)]"}`,children:[r.jsxs("div",{className:`relative h-[95%] aspect-[2.43/1] rounded-[8px] flex-shrink-0 ${s==="dark"?"bg-[rgba(0,0,0,0.3)]":"bg-[rgba(255,255,255,0.5)]"}`,children:[r.jsx("div",{className:`absolute left-[8.8%] top-[21.4%] w-[41.2%] h-[57.1%] rounded-[4px] ${s==="dark"?"bg-[rgba(255,255,255,0.2)]":"bg-[#d9d9d9]"}`,children:r.jsx("div",{className:`absolute left-0 top-0 h-full rounded-[4px] transition-all duration-300 ${s==="dark"?"bg-white":"bg-[#5c5c5c]"}`,style:{width:`${c}%`}})}),r.jsx("div",{className:"absolute right-[6%] top-0 h-full flex items-center",children:r.jsxs("p",{className:`font-['Didact_Gothic:Regular',sans-serif] text-[clamp(10px,1.4vh,14px)] ${s==="dark"?"text-white":"text-[#5c5c5c]"}`,children:[c,"%"]})})]}),r.jsxs("div",{className:"relative h-[95%] aspect-square flex-shrink-0",children:[r.jsx("svg",{className:"block w-full h-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 28 28",children:r.jsx("circle",{cx:"14",cy:"14",fill:s==="dark"?"rgba(0,0,0,0.5)":"white",fillOpacity:"0.5",r:"14"})}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx("p",{className:`font-['Didact_Gothic:Regular','Noto_Sans_Symbols2:Regular',sans-serif] text-[clamp(12px,2.1vh,19px)] ${s==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:""})})]}),r.jsxs("div",{className:"relative h-[95%] aspect-square flex-shrink-0",children:[r.jsx("svg",{className:"block w-full h-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 28 28",children:r.jsx("circle",{cx:"14",cy:"14",fill:s==="dark"?"rgba(0,0,0,0.5)":"white",fillOpacity:"0.5",r:"14"})}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx("p",{className:`font-['Arial','Noto_Sans_Symbols2:Regular',sans-serif] text-[clamp(12px,2.1vh,19px)] leading-none ${s==="dark"?"text-white/70":"text-[#5c5c5c]"}`,style:{transform:"translateY(5%)"},children:""})})]}),r.jsxs("div",{className:"relative h-[95%] aspect-square flex-shrink-0",children:[r.jsx("svg",{className:"block w-full h-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 28 28",children:r.jsx("circle",{cx:"14",cy:"14",fill:s==="dark"?"rgba(0,0,0,0.5)":"white",fillOpacity:"0.5",r:"14"})}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx("p",{className:`font-['Didact_Gothic:Regular','Noto_Sans_Symbols2:Regular',sans-serif] text-[clamp(12px,2.1vh,19px)] ${s==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:""})})]})]}),r.jsx("div",{className:`rounded-[24px] px-[3%] py-[2.5%] w-[38%] h-full flex items-center justify-center ${s==="dark"?"bg-[rgba(0,0,0,0.5)]":"bg-[rgba(255,255,255,0.5)]"}`,children:r.jsx("p",{className:`bakbak-one-regular text-[clamp(20px,6.5vw,26px)] text-center whitespace-nowrap overflow-hidden ${s==="dark"?"text-white/50":"text-[#afafaf]"}`,children:F(o)})})]})}),r.jsxs("div",{className:"absolute left-[calc(50%+0.41%)] top-[83.03%] translate-x-[-50%] w-[86.61%]","data-name":"Group 3",children:[p?r.jsx("input",{type:"text",value:h,onChange:B,onBlur:z,autoFocus:!0,className:`w-full font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal text-[clamp(12px,3.5vw,14px)] text-center bg-transparent border-none outline-none ${s==="dark"?"text-white/70":"text-[#5c5c5c]"}`}):r.jsx("p",{onClick:T,className:`w-full font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal text-[clamp(12px,3.5vw,14px)] text-center cursor-pointer hover:opacity-70 transition-opacity mb-2 ${s==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:h}),r.jsx("div",{className:"w-full h-[1.31%]",children:r.jsx("svg",{className:"w-full h-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 317 5",children:r.jsx("path",{d:sg.p3086ef80,fill:s==="dark"?"rgba(255,255,255,0.7)":"#5C5C5C"})})})]}),r.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Normal',sans-serif] font-[350] h-[6.27%] leading-[normal] left-[93.99%] text-[clamp(10px,3vw,12px)] text-right top-[92.43%] translate-x-[-100%] w-[28.42%] whitespace-pre-wrap ${s==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:j(o)})]}),r.jsx("input",{ref:C,type:"file",accept:"image/*",onChange:A,className:"hidden"}),r.jsx("input",{ref:w,type:"file",accept:"image/*",onChange:H,className:"hidden"})]})}function $6({userData:e,onUserDataChange:n,onChatClick:s,preloadedImages:i}){const[o,l]=N.useState("light"),[c,u]=N.useState({"desktop1-chat":i?.["system-icon-desktop1-chat"]||null,"desktop1-forum":i?.["system-icon-desktop1-forum"]||null,"desktop1-memory":i?.["system-icon-desktop1-memory"]||null,"desktop1-transfer":i?.["system-icon-desktop1-transfer"]||null});return N.useEffect(()=>{(async()=>{const m=await he.get(re.APPEARANCE,"desktop_color_mode");l(m||"light")})(),(async()=>{const m={},b=["desktop1-chat","desktop1-forum","desktop1-memory","desktop1-transfer"];for(const y of b){const v=await Ct(`system-icon-${y}`);v&&(m[y]=v)}u(m)})();const p=m=>{l(m.detail)},f=m=>{const b=m,{iconId:y,url:v}=b.detail;y.startsWith("desktop1-")&&u(C=>({...C,[y]:v}))};return window.addEventListener("colorModeChange",p),window.addEventListener("iconChange",f),()=>{window.removeEventListener("colorModeChange",p),window.removeEventListener("iconChange",f)}},[]),r.jsxs(r.Fragment,{children:[r.jsx(V6,{userData:e,onUserDataChange:n,colorMode:o}),r.jsxs("div",{className:"absolute contents left-[6.76%] top-[52.9%]","data-name":"",children:[r.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%-35.51%)] text-[clamp(10px,3vw,12px)] text-center top-[60.54%] translate-x-[-50%] w-[13.04%] pointer-events-none ${o==="dark"?"text-black":"text-white"}`,children:""}),r.jsx("button",{className:"absolute left-[6.76%] w-[14.98%] aspect-square top-[52.9%] cursor-pointer hover:opacity-80 active:opacity-60 transition-opacity overflow-hidden rounded-[18%]",onClick:s,children:r.jsx("img",{alt:"",className:"block w-full h-full object-cover pointer-events-none",src:c["desktop1-chat"]||j6})})]}),r.jsxs("div",{className:"absolute contents left-[30.43%] top-[52.9%]","data-name":"",children:[r.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%-11.84%)] text-[clamp(10px,3vw,12px)] text-center top-[60.54%] translate-x-[-50%] w-[13.04%] ${o==="dark"?"text-black":"text-white"}`,children:""}),r.jsx("div",{className:"absolute left-[30.43%] w-[14.98%] aspect-square top-[52.9%] overflow-hidden rounded-[18%]",children:r.jsx("img",{alt:"",className:"block w-full h-full object-cover",src:c["desktop1-forum"]||C6})})]}),r.jsxs("div",{className:"absolute contents left-[6.76%] top-[63.59%]","data-name":"",children:[r.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%-35.51%)] text-[clamp(10px,3vw,12px)] text-center top-[71.2%] translate-x-[-50%] w-[13.04%] ${o==="dark"?"text-black":"text-white"}`,children:""}),r.jsx("div",{className:"absolute left-[6.76%] w-[14.98%] aspect-square top-[63.59%] overflow-hidden rounded-[18%]",children:r.jsx("img",{alt:"",className:"block w-full h-full object-cover",src:c["desktop1-memory"]||S6})})]}),r.jsxs("div",{className:"absolute contents left-[30.43%] top-[63.59%]","data-name":"",children:[r.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%-11.84%)] text-[clamp(10px,3vw,12px)] text-center top-[71.2%] translate-x-[-50%] w-[13.04%] ${o==="dark"?"text-black":"text-white"}`,children:""}),r.jsx("div",{className:"absolute left-[30.43%] w-[14.98%] aspect-square top-[63.59%] overflow-hidden rounded-[18%]",children:r.jsx("img",{alt:"",className:"block w-full h-full object-cover",src:c["desktop1-transfer"]||k6})})]}),r.jsx(O6,{userData:e,colorMode:o})]})}const H6="/assets/2c4e24fb97d83db5e0d40da3356ff7df2f9fbf99-BUAfsKeI.png",U6="/assets/3b015cc5afccb7e9689502b97c0580e29782af83-CWB2UK3g.png",W6="/assets/d66caaf044e33e1487e4b0199ac46e1b563e30e2-C01H7kEO.png",K6="/assets/320f6f27a201a50ba3f60a7311ec793841dca491-CLzR-4Zh.png";function G6({preloadedImages:e,onHealthClick:n,onScheduleClick:s}){const[i,o]=N.useState(new Date),[l,c]=N.useState(""),[u,h]=N.useState(""),[g,p]=N.useState(!1),[f,m]=N.useState(!1),[b,y]=N.useState(e?.desktop2_timeImage||null),[v,C]=N.useState(e?.desktop2_card1||null),[w,F]=N.useState(e?.desktop2_card2||null),[j,T]=N.useState(e?.desktop2_card3||null),[z,B]=N.useState(e?.desktop2_card4||null),[U,D]=N.useState("light"),[A,H]=N.useState({"desktop2-shop":e?.["system-icon-desktop2-shop"]||null,"desktop2-game":e?.["system-icon-desktop2-game"]||null,"desktop2-schedule":e?.["system-icon-desktop2-schedule"]||null,"desktop2-health":e?.["system-icon-desktop2-health"]||null}),Y=N.useRef(null),_=[N.useRef(null),N.useRef(null),N.useRef(null),N.useRef(null)];N.useEffect(()=>{const W=setInterval(()=>{o(new Date)},1e3);return()=>clearInterval(W)},[]),N.useEffect(()=>{(async()=>{const ue=await he.get(re.MISC,"desktop2_customText1"),ce=await he.get(re.MISC,"desktop2_customText2"),me=await he.get(re.APPEARANCE,"desktop_color_mode");ue&&c(ue),ce&&h(ce),D(me||"light");const Te=await Ct("desktop2_timeImage");Te&&y(Te);const ie=await Ct("desktop2_card1");ie&&C(ie);const Ce=await Ct("desktop2_card2");Ce&&F(Ce);const be=await Ct("desktop2_card3");be&&T(be);const R=await Ct("desktop2_card4");R&&B(R);const fe={},te=["desktop2-shop","desktop2-game","desktop2-schedule","desktop2-health"];for(const J of te){const X=await Ct(`system-icon-${J}`);X&&(fe[J]=X)}H(fe)})();const V=ue=>{D(ue.detail)},Z=ue=>{const ce=ue,{iconId:me,url:Te}=ce.detail;me.startsWith("desktop2-")&&H(ie=>({...ie,[me]:Te}))};return window.addEventListener("colorModeChange",V),window.addEventListener("iconChange",Z),()=>{window.removeEventListener("colorModeChange",V),window.removeEventListener("iconChange",Z)}},[]);const L=W=>W.toLocaleTimeString("zh-CN",{hour12:!1,hour:"2-digit",minute:"2-digit"}),k=()=>{const W=i.getMonth()+1,V=i.getDate();return{month:W,day:V}},$=()=>["","","","","","",""][i.getDay()],P=()=>p(!0),I=()=>m(!0),q=async()=>{p(!1),await he.set(re.MISC,"desktop2_customText1",l)},G=async()=>{m(!1),await he.set(re.MISC,"desktop2_customText2",u)},Q=()=>{Y.current?.click()},M=W=>{_[W].current?.click()},O=async W=>{const V=W.target.files?.[0];if(V)try{const Z=await cs("desktop2_timeImage",V);y(Z)}catch(Z){console.error(":",Z)}},ee=async(W,V)=>{const Z=V.target.files?.[0];if(Z)try{const ue=await cs(`desktop2_card${W+1}`,Z);[C,F,T,B][W](ue)}catch(ue){console.error(":",ue)}};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"absolute h-[15%] left-1/2 top-[6.6%] translate-x-[-50%] w-[86%]","data-name":"",children:[r.jsx("div",{className:"absolute inset-0 rounded-[24px] cursor-pointer hover:opacity-80 active:opacity-80 transition-opacity",onClick:Q,children:b?r.jsx("img",{alt:"",className:"absolute inset-0 w-full h-full object-cover rounded-[24px]",src:b}):r.jsx("div",{className:"absolute inset-0 w-full h-full rounded-[24px]",style:{backgroundColor:"#D5EAE3"}})}),r.jsx("p",{className:`absolute bakbak-one-regular leading-[normal] left-1/2 top-1/2 text-[clamp(70px,12vh,120px)] text-center translate-x-[-50%] translate-y-[-50%] w-[87%] pointer-events-none ${U==="dark"?"text-[rgba(0,0,0,0.5)]":"text-[rgba(255,255,255,0.5)]"}`,children:L(i)}),r.jsx("input",{ref:Y,type:"file",accept:"image/*",onChange:O,className:"hidden"})]}),r.jsxs("div",{className:"absolute contents left-[6.76%] top-[26.3%]","data-name":"",children:[r.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%-35.51%)] text-[clamp(10px,3vw,12px)] text-center top-[33.94%] translate-x-[-50%] w-[13.04%] ${U==="dark"?"text-black":"text-white"}`,children:""}),r.jsx("div",{className:"absolute left-[6.76%] w-[14.98%] aspect-square top-[26.3%] overflow-hidden rounded-[18%]",children:r.jsx("img",{alt:"",className:"block w-full h-full object-cover",src:A["desktop2-shop"]||H6})})]}),r.jsxs("div",{className:"absolute contents left-[30.43%] top-[26.3%]","data-name":"",children:[r.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%-11.84%)] text-[clamp(10px,3vw,12px)] text-center top-[33.94%] translate-x-[-50%] w-[13.04%] ${U==="dark"?"text-black":"text-white"}`,children:""}),r.jsx("div",{className:"absolute left-[30.43%] w-[14.98%] aspect-square top-[26.3%] overflow-hidden rounded-[18%]",children:r.jsx("img",{alt:"",className:"block w-full h-full object-cover",src:A["desktop2-game"]||U6})})]}),r.jsxs("div",{className:"absolute contents left-[54.1%] top-[26.3%]","data-name":"",onClick:s,style:{cursor:"pointer"},children:[r.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%+11.84%)] text-[clamp(10px,3vw,12px)] text-center top-[33.94%] translate-x-[-50%] w-[13.04%] ${U==="dark"?"text-black":"text-white"}`,children:""}),r.jsx("div",{className:"absolute left-[54.1%] w-[14.98%] aspect-square top-[26.3%] overflow-hidden rounded-[18%] hover:opacity-80 active:opacity-60 transition-opacity",children:r.jsx("img",{alt:"",className:"block w-full h-full object-cover",src:A["desktop2-schedule"]||W6})})]}),r.jsxs("div",{className:"absolute contents left-[77.78%] top-[26.3%]","data-name":"",onClick:n,style:{cursor:"pointer"},children:[r.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%+35.51%)] text-[clamp(10px,3vw,12px)] text-center top-[33.94%] translate-x-[-50%] w-[13.04%] ${U==="dark"?"text-black":"text-white"}`,children:""}),r.jsx("div",{className:"absolute left-[77.78%] w-[14.98%] aspect-square top-[26.3%] overflow-hidden rounded-[18%] hover:opacity-80 active:opacity-60 transition-opacity",children:r.jsx("img",{alt:"",className:"block w-full h-full object-cover",src:A["desktop2-health"]||K6})})]}),r.jsxs("div",{className:"absolute h-[38.04%] left-1/2 top-[38.64%] translate-x-[-50%] w-[86%]","data-name":"2",children:[r.jsx("div",{className:`absolute backdrop-blur-[15px] backdrop-filter inset-0 rounded-[24px] shadow-[0px_0px_2px_0px_inset_#ffffff,0px_1px_1px_0px_inset_rgba(255,255,255,0.5)] ${U==="dark"?"bg-[rgba(0,0,0,0.3)]":"bg-[rgba(255,255,255,0.5)]"}`}),r.jsx("div",{className:"absolute h-[62%] left-[7.3%] rounded-[26px] top-[32.86%] w-[19.66%] cursor-pointer hover:opacity-80 active:opacity-80 transition-opacity",onClick:()=>M(0),children:v?r.jsx("img",{alt:"",className:"absolute inset-0 w-full h-full object-cover rounded-[26px]",src:v}):r.jsx("div",{className:"absolute inset-0 w-full h-full rounded-[26px]",style:{backgroundColor:"#D5EAE3"}})}),r.jsx("div",{className:"absolute h-[62%] left-[29.21%] rounded-[26px] top-[33.14%] w-[19.66%] cursor-pointer hover:opacity-80 active:opacity-80 transition-opacity",onClick:()=>M(1),children:w?r.jsx("img",{alt:"",className:"absolute inset-0 w-full h-full object-cover rounded-[26px]",src:w}):r.jsx("div",{className:"absolute inset-0 w-full h-full rounded-[26px]",style:{backgroundColor:"#D5EAE3"}})}),r.jsx("div",{className:"absolute h-[62%] left-[51.12%] rounded-[26px] top-[32.86%] w-[19.66%] cursor-pointer hover:opacity-80 active:opacity-80 transition-opacity",onClick:()=>M(2),children:j?r.jsx("img",{alt:"",className:"absolute inset-0 w-full h-full object-cover rounded-[26px]",src:j}):r.jsx("div",{className:"absolute inset-0 w-full h-full rounded-[26px]",style:{backgroundColor:"#D5EAE3"}})}),r.jsx("div",{className:"absolute h-[62%] left-[73.03%] rounded-[26px] top-[32.86%] w-[19.66%] cursor-pointer hover:opacity-80 active:opacity-80 transition-opacity",onClick:()=>M(3),children:z?r.jsx("img",{alt:"",className:"absolute inset-0 w-full h-full object-cover rounded-[26px]",src:z}):r.jsx("div",{className:"absolute inset-0 w-full h-full rounded-[26px]",style:{backgroundColor:"#D5EAE3"}})}),r.jsxs("p",{className:`absolute bona-nova-regular h-[22.29%] leading-[normal] left-[5.34%] not-italic top-0 w-[46.63%] ${U==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:[r.jsx("span",{className:"text-[clamp(48px,15vw,64px)]",children:k().month}),r.jsx("span",{className:"text-[clamp(36px,11.25vw,48px)]",children:"/"}),r.jsx("span",{className:"text-[clamp(48px,15vw,64px)]",children:k().day})]}),r.jsx("p",{className:"absolute font-['Bona_Nova:Bold','Noto_Sans_JP:Bold',sans-serif] h-[14.29%] leading-[normal] left-[6.18%] text-[clamp(18px,6vw,24px)] top-[21.3%] w-[44.66%] text-white",style:{fontVariationSettings:"'wght' 700",fontFamily:"YShi NewHei T, sans-serif",fontWeight:"bold"},children:$()}),g?r.jsx("input",{type:"text",value:l,onChange:W=>c(W.target.value),onBlur:q,autoFocus:!0,className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[7.43%] leading-[normal] left-[92.42%] text-[clamp(12px,4vw,16px)] text-right top-[12.29%] translate-x-[-100%] w-[40%] bg-transparent border-none outline-none ${U==="dark"?"text-white/70":"text-[#5c5c5c]"}`}):r.jsx("p",{onClick:P,className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[7.43%] leading-[normal] left-[92.42%] text-[clamp(12px,4vw,16px)] text-right top-[12.29%] translate-x-[-100%] w-[40%] cursor-pointer hover:opacity-70 active:opacity-70 transition-opacity ${U==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:l}),f?r.jsx("input",{type:"text",value:u,onChange:W=>h(W.target.value),onBlur:G,autoFocus:!0,className:`absolute h-[7.43%] leading-[normal] left-[92.42%] text-[clamp(12px,4vw,16px)] text-right top-[22.57%] translate-x-[-100%] w-[80%] bg-transparent border-none outline-none ${U==="dark"?"text-white/70":"text-[#5c5c5c]"}`}):r.jsx("p",{onClick:I,className:`absolute h-[7.43%] leading-[normal] left-[92.42%] text-[clamp(12px,4vw,16px)] text-right top-[22.57%] translate-x-[-100%] w-[80%] cursor-pointer hover:opacity-70 active:opacity-70 transition-opacity ${U==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:u})]}),_.map((W,V)=>r.jsx("input",{ref:W,type:"file",accept:"image/*",onChange:Z=>ee(V,Z),className:"hidden"},V))]})}const q6="/assets/c50f0278eb53f2dd6c95d7fda7f37649c4c89657-CgQEB29n.png",Z6="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHwAAAB8CAYAAACrHtS+AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAtYSURBVHgB7Z1bU1TZFcf/NNCAoNzEAS9DI14HFVCj5SURE52qTGoSTfKQ5Il8gJSmKu+j38B5SR51KqnUJBWjJsYxjpaIiDqo3ES50yAqdxoQ6KZvs9bhNDb0AWnYp+nus39Vm9Ocbuju8z9r7b3XXnvvGAjA6/Wm0eEUlUIqFipFVNLUIlkaVrXUqOVeTEyMFcskBktEFfkslWNUSiAJBSz8BSxD/KAF9xP6DKQFrySXqJwPVvigBCexz0EKHW6w6OcW++JFCU5CW+hwBdN1syT8sFI5vhhrN33oBSR2KR2qIcUOZyxUqkmrUx964YKCqy78IqQLjwRYoyuqZvMyr0tX//ALSCKReet1TcFV13AFkkimlET/au7JAMHVBhrX2dKNRzY2KsVzG3JagndguhEgiXxqSPBi/xOzGm1qvW2BJFooIk1ntcNmLFx15R3QEXoPpbicbkyMjGN4YJQeu+B2ueGmc/ycmDd6/14eDx09Hnj8HjPbijcjbW3wtZZzyomGR42wTziwVOLi45CUkoiU1GRkf7wO5iQzyBKhE+za8+j/25T39ntCtxY5X2j7uB1dTa/Q3tCJvlcDGOwZwpTdSaJ4SARVIAgSnPFO/1DuIa/v1PRNEBcXh7XZGUsS3DE5hcobVfQd+rFUTCYTTLEmxJvjkJqVim2Fm7H3eCFS167RQ3j+khwdPc+/KIKr1l0KwfDFfWcbR21FA+qpDJDIbM0rjdAbawl42ONQYe82SYbQ29mLlrp2lPzyKHmefD1EP0tafMlW7rPwEgiGxbY2vsKdr+/hbUcP3G4PJNqwF3rb0YsbF2+RtzuJ7fu2iBZ9xsp9jbYzEIiXXHhbvRVX/3Id3a1vpNiLZGRoDDf/egfdLW/EtWfeU8I/TKo7FxYn5w/a3mDFjUvfYmRwDJLgGBkcxcNvqpQ2j2BKeGibLbwEAuE66eHNpxjqHYYkeNhg2p5b8YqsXAd+wYIXQiDNz1rR1dgFydJxUJev7kEDHI4pCKaIBRfmzqccTrx43KR0tyTLo6upGwPdgxCMhQW3QBD2d5PofyP8QxqS8dEJdFIvRzBFQgXv6erHOEXQJMuH4xV8Pd0uoT2ctA9mvARDDwUQXGEQWIkWbP02CuUKrcfFCj4xNqlEkCRiYG/pmhJrQMIE5+6EfcKOFY5aRhVOZUBJrAGJE5yiazywIBGHy+lUBp5EItDCId25YDxur2JIIhFah0vCHym4wZCCGwwpuMGQghsMKbjBkIIbDCm4wZCCGwwpuMGQgmugQ8Zo2CAF18DWP4Ipe3QOBEnB5zA2PKakWNfef06DF9E3GBQHyQw89afq22q01LZj4O0gPspdh01bN+g50S/kSAv3QdV245NmPC2rU34d7hvBg+vfLWuWaDgiBcd0I22434ayyw9mJWG2kqU//v8T4WPSK4kUHDwF2IE7/yzHYM/s2TKcOVp1uxqtde2IFgwvOE90rC6rJ3feotkdGx+ZwO2vy5Vpz9GAoQVngbtbX+P+fx4qDbb56Hvdj/JrlQu+JlIwtODvqL6+f+0hJt8tPFOT6/Ca8no0V7ch0jGs4OzK71+tRPvzzkVF1ni+3N1/VWCo14ZIxrD98JfUBXtR1RRUcGXgzSAqyCNEcnauIQX3uDxoeNyoTMsNBmXudoMVsbGxiFQMKTgL51hiQIWXF+MSqch+uMGQghsMKbjBkIIbDCm4wZCCGwwpuMGQghsMKbjBkIIbDCm4wZCCGwwpuMEIm9Eyzv2OiY2hO3D+HHBl+xLv+5WNonlKkF6srOCkbWJSAjZuWY+NWzcg46M0xJrmdzpuEtrjdivZKlyUHYp0FN23FJlXeV+PcoO51Z2R+JzX7ZneKUmnz8Cb4CSuSoBIVkxw3sppz9ECFP9otzLDI55+jzFFwAwPr2+xSW9IVp0UfU1WRPBVq5Nw4OQ+HPrpfiQIvoN1J8a32VvMIndfDy9CLviajNU48ZsS7Dq0Q9m/SxJaQip4UkqSIvbuQzsjw31HISETnK254OAO7Ni3dUGxZcs7EJGzV0MmeFpWKg58WgxzYrzm8yw0T+uxDYzA6ZB7pjDx5nhk5mQo+5SKIiSC8x26+8gnWJuTqfn8+NgE6ioalNkdnOivWLnBDZ27Y0c/P4j1m3MgkpAInpq5BoVHCpQNVucy3GdTduNrqWmXy2+rmBPNOPyzA9h/Yi9dswjsluXtyqWgSnrAeZ5sf/sf99Bc0xZVc7CXA7dvCg5ux74fF1KsQvyEB937ReaEeOR9khvQZ2W3/fxRI5qfSbH9SUpOwv6fFCEhSZ/4hO6Cp6SnIDs3K+C8Y2IKVbeeKhuwS96TvSkLWRuzoBe6C55Jrjw1Y03Aed7ySm5qNxtu3G6gcQWOoeuF7oInpyYjNi6wLup40RWVy2ItB66/LTs36bpqlO6Cc3QNGoEWXg9NMhsTCZ22Lg16orvg3J80adyxjihd6XA5mOla6enOGd0F5x2HtaKl8QlmSGbjogasW+etPIUJzkaslbzA87C1dtdLSV0FyWxcTjdGh95BTwQKHgOTRuPMPunQ7Gdn566DZDZ8nV63vYGeiHPpZOFxGoKP0mCI1nJXOZZsoYMC0QAHo7j3oufyYEItPM4cOBJmGxwNWOGQSc1crSxcG4lZI3rS09kHW/8o9EJoo211WnLAWPfE6CT6XwcGWDinrfCHBTCbZePNnwkaOWyra9ctRiFU8Myc9IAVjtg9tdS2aY6EbdmTj21786Nqeerlwq30Z2W1ilfUIxlEqODpFEbViqp1NXbjbUdvwPmEJDOOnT6M/N15UnQ/+sgjVvz3Eezj4pfuFtrL55h5cmqSsjqxP+OjE6i+V49sy7oAD7B2fSY+Kz2Byv99B+vLLoxRt8QtQ67KIv05dL0OnNhHvR9xdilUcDNZbNb6tRjqmb08Jbumpmet2H14Jz7evnGWNfNjHiv/rPSkstcIu7LJcbvhM16YRLqe3K3ltG5RxHgFVxRllytQzstTalhp/i4LfvWHn2NVysJfQOYxvkd0TSc8tJpXkEuCavev2190ovxKJd21C69ezF9SFvFiM8IFz7Z8hM0FFs1GGEeSnlILtOxy5bTbloQc4YInJJqVDNX56h2n3Yknt6tx8293qK4flnnoIUZ4Hc7w0Gf51Uo8/uYJXPOM/nCAJmtDJoqP7cHWonykZ6UqPkx2zqbh66NHV1UXwRnuiv37z9fRVt+x4Os4dXl1RgoystKRQpE6vceDIwEWmrur2ykolZGdAZHoJjgzOjSGW3+/i8aqFrL0yN8vJJQo+W35Ofjdn34ttFumawIEzxQ9+dvj+MGnxViTniInEAaBMvWKvCQvgCASXS3ch9vlIWsfxcuqZnQ1vaIBAju10ifhdEirn4/E5ATs3L8NRz4/qAw0iYIF57FLfTPn/ODBAR5QcU65hN+90QMPNccpy6FoTc9a1n8mwblVZYHECFj59qmBxCgoglshMQo1LHgtJEahhutwbrANQ2IE8kzUwefB6zJIop0a0trqa/OXQRLtXOAfSuhLdevcPQtZf1wScvJmLFx16xcgiVYusdj8YCa4La08qsnzCT4Tt5NWHrWc84nNBAxfkaVX06EIkmjASmLn+Z/QisyfpmKDJNJhDY/PPRkguGr+f4Qk0vm9vyv3oTn2Ri+8RIdzkEQqXG9f1XpiwRQUqs+/gBQ+0mCxz8/35Adzjkj0U3S4CNldC3e4zj5LYn+10IsWlWRGolvocBcyUSJc4ZyG01p19lwWlT/D/0ht3p+DJJxgq2YXXrwYsZmg00hVa+e6vRSSlcIXJPtSDZgtmiXnDavCl1A5AxmoCRVlaglaaB9CEsX9xC/EtPgWyPp+OdjUwnWzVT1eW6rI/nwP7DSvuDGTUckAAAAASUVORK5CYII=",Y6="/assets/d12fb0f5a7c98f7ca307964198d2d0075ea990ff-CuWkxAA1.png";function Q6({onSettingsClick:e,onWorldBookClick:n,onCharacterClick:s}){const[i,o]=N.useState("light"),[l,c]=N.useState({"bottom-organization":null,"bottom-worldbook":null,"bottom-settings":null});return N.useEffect(()=>{(async()=>{const f=await he.get(re.APPEARANCE,"desktop_color_mode");o(f||"light")})(),(async()=>{const f={},m=["bottom-organization","bottom-worldbook","bottom-settings"];for(const b of m){const y=await Ct(`system-icon-${b}`);y&&(f[b]=y)}c(f)})();const g=f=>{o(f.detail)},p=f=>{const m=f,{iconId:b,url:y}=m.detail;b.startsWith("bottom-")&&c(v=>({...v,[b]:y}))};return window.addEventListener("colorModeChange",g),window.addEventListener("iconChange",p),()=>{window.removeEventListener("colorModeChange",g),window.removeEventListener("iconChange",p)}},[]),r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"absolute left-[13%] w-[14.98%] aspect-square top-[88%] cursor-pointer hover:opacity-80 active:opacity-60 transition-opacity overflow-hidden rounded-[18%]",onClick:s,"data-name":"",children:r.jsx("img",{alt:"",className:"block w-full h-full object-cover pointer-events-none",src:l["bottom-organization"]||Y6})}),r.jsx("button",{className:"absolute left-[42.51%] w-[14.98%] aspect-square top-[88%] cursor-pointer hover:opacity-80 active:opacity-60 transition-opacity overflow-hidden rounded-[18%]",onClick:n,"data-name":"",children:r.jsx("img",{alt:"",className:"block w-full h-full object-cover pointer-events-none",src:l["bottom-worldbook"]||Z6})}),r.jsx("button",{className:"absolute left-[72.02%] w-[14.98%] aspect-square top-[88%] cursor-pointer hover:opacity-80 active:opacity-60 transition-opacity overflow-hidden rounded-[18%]",onClick:e,"data-name":"",children:r.jsx("img",{alt:"",className:"block w-full h-full object-cover pointer-events-none",src:l["bottom-settings"]||q6})})]})}function X6({currentPage:e}){const[n,s]=N.useState("light");N.useEffect(()=>{(async()=>{const c=await he.get(re.APPEARANCE,"desktop_color_mode")||"light";s(c)})();const l=c=>{s(c.detail)};return window.addEventListener("colorModeChange",l),()=>{window.removeEventListener("colorModeChange",l)}},[]);const i=n==="dark";return r.jsxs("div",{className:"absolute h-[20px] left-1/2 top-[82%] translate-x-[-50%] w-[56px]","data-name":"",children:[r.jsx("div",{className:"absolute inset-0 rounded-[12px]",style:{backgroundColor:i?"rgba(0, 0, 0, 0.3)":"rgba(255, 255, 255, 0.3)"}}),r.jsx("div",{className:"absolute left-[14px] size-[8px] top-[6px]",children:r.jsx("svg",{className:"block size-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 8 8",children:r.jsx("circle",{cx:"4",cy:"4",fill:i?"black":"white",fillOpacity:e===0?"0.7":"0.3",r:"4"})})}),r.jsx("div",{className:"absolute left-[34px] size-[8px] top-[6px]",children:r.jsx("svg",{className:"block size-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 8 8",children:r.jsx("circle",{cx:"4",cy:"4",fill:i?"black":"white",fillOpacity:e===1?"0.7":"0.3",r:"4"})})})]})}function J6({onNavigate:e,onClose:n}){const[s,i]=N.useState(new Date),[o,l]=N.useState(100),[c,u]=N.useState(!1);N.useEffect(()=>{const g=setInterval(()=>i(new Date),1e3);return()=>clearInterval(g)},[]),N.useEffect(()=>{(async()=>{try{const p=navigator;if(p.getBattery){const f=await p.getBattery(),m=()=>{l(Math.round(f.level*100)),u(f.charging)};return m(),f.addEventListener("levelchange",m),f.addEventListener("chargingchange",m),()=>{f.removeEventListener("levelchange",m),f.removeEventListener("chargingchange",m)}}}catch{console.log("Battery Status API not supported")}})()},[]);const h=[{id:"beautify",label:"",sub:"INTERFACE MOD",desc:"    ",icon:ON},{id:"api",label:"",sub:"NEURAL LINK",desc:"AI   ",icon:u4},{id:"data",label:"",sub:"DATA ARCHIVE",desc:"    ",icon:db},{id:"disclaimer",label:"",sub:"SYSTEM INFO",desc:"    ",icon:bN}];return r.jsxs("div",{className:"w-full h-full bg-[#F0F2F5] overflow-hidden flex flex-col font-['Source_Han_Sans_CN_VF',sans-serif] text-slate-800",children:[r.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.05]",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),r.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border-b border-slate-300 px-6 py-2 flex justify-between items-center text-[10px] font-bold tracking-widest text-slate-500 z-20 sticky top-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(U4,{className:"w-3 h-3",strokeWidth:2.5}),r.jsx("span",{children:""})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{children:[o,"%"]}),r.jsxs("div",{className:"relative",children:[r.jsx(Nj,{className:`w-4 h-4 ${c?"text-green-600":"text-slate-500"}`,strokeWidth:2.5}),c&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx(G4,{className:"w-2 h-2 text-green-600 fill-current"})})]})]})]}),r.jsxs("div",{className:"px-6 pt-6 pb-4 flex items-center gap-4 z-20",children:[r.jsx("button",{onClick:n,className:"w-10 h-10 bg-white border border-slate-300 flex items-center justify-center text-slate-700 active:bg-slate-800 active:text-white active:border-slate-800 hover:bg-slate-800 hover:text-white hover:border-slate-800 transition-colors",children:r.jsx($n,{className:"w-6 h-6",strokeWidth:2})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-xl font-black text-slate-800 tracking-tighter flex items-center gap-2",children:[" ",r.jsx("span",{className:"text-[10px] px-1.5 py-0.5 border border-slate-800 text-slate-800 font-mono font-medium rounded-sm",children:"CONFIG"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-slate-500 tracking-wider mt-1",children:[r.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse shadow-[0_0_8px_rgba(34,197,94,0.6)]"}),r.jsxs("span",{children:["  ",s.toLocaleTimeString("zh-CN",{hour12:!1})]})]})]})]}),r.jsxs("div",{className:"mx-6 h-[1px] bg-slate-300 mb-6 flex justify-between items-center overflow-hidden",children:[r.jsx("div",{className:"w-1/3 h-full bg-slate-800"}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("div",{className:"w-1 h-1 bg-slate-300 rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-slate-300 rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-slate-300 rounded-full"})]})]}),r.jsxs("div",{className:"flex-1 px-6 pb-6 overflow-y-auto",children:[r.jsx("div",{className:"space-y-3",children:h.map((g,p)=>r.jsxs("button",{onClick:()=>e(g.id),className:"w-full bg-white border border-slate-300 p-0 flex items-stretch justify-between group active:border-slate-800 hover:border-slate-800 transition-colors relative overflow-hidden",children:[r.jsxs("div",{className:"absolute right-0 top-0 text-[60px] font-black text-slate-100 leading-none -translate-y-2 translate-x-4 pointer-events-none opacity-50 group-active:opacity-20 group-hover:opacity-20 transition-opacity",children:["0",p+1]}),r.jsxs("div",{className:"flex items-center gap-5 p-5 z-10",children:[r.jsx("div",{className:"w-12 h-12 bg-slate-100 border border-slate-200 flex items-center justify-center text-slate-600 group-active:bg-slate-800 group-active:text-white group-active:border-slate-800 group-hover:bg-slate-800 group-hover:text-white group-hover:border-slate-800 transition-colors duration-200",children:r.jsx(g.icon,{className:"w-6 h-6",strokeWidth:1.5})}),r.jsxs("div",{className:"text-left",children:[r.jsxs("div",{className:"flex items-baseline gap-2",children:[r.jsx("h3",{className:"text-base font-bold text-slate-800 group-active:text-blue-600 group-hover:text-blue-600 transition-colors",children:g.label}),r.jsx("span",{className:"text-[9px] font-bold text-slate-400 tracking-wider font-mono uppercase",children:g.sub})]}),r.jsx("p",{className:"text-xs text-slate-400 mt-1 font-medium tracking-wide",children:g.desc})]})]}),r.jsx("div",{className:"w-10 border-l border-slate-100 flex items-center justify-center bg-slate-50 group-active:bg-slate-100 group-hover:bg-slate-100 transition-colors",children:r.jsx(ta,{className:"w-5 h-5 text-slate-400 group-active:text-slate-800 group-hover:text-slate-800 transition-colors"})})]},g.id))}),r.jsxs("div",{className:"mt-10 border-t border-slate-300 pt-6",children:[r.jsxs("div",{className:"flex justify-between items-end opacity-60",children:[r.jsxs("div",{className:"text-[10px] font-bold tracking-widest space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Lf,{className:"w-3 h-3"})," ",r.jsx("span",{children:": "})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx($u,{className:"w-3 h-3"})," ",r.jsx("span",{children:": "})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(If,{className:"w-3 h-3"})," ",r.jsx("span",{children:": 12ms"})]})]}),r.jsx("div",{className:"text-right",children:r.jsx("div",{className:"w-12 h-12 border-2 border-slate-800 rounded-full flex items-center justify-center opacity-20",children:r.jsx("span",{className:"text-[10px] font-black",children:"OS"})})})]}),r.jsxs("div",{className:"mt-6 text-center",children:[r.jsx("div",{className:"inline-flex items-center justify-center px-3 py-1 border border-slate-800 bg-slate-800 text-white text-[10px] font-bold tracking-[0.2em] uppercase",children:" OS"}),r.jsx("p",{className:"text-[9px] text-slate-400 mt-2 font-mono tracking-widest",children:"TOUKEN RANBU ONLINE // CHIFU SYSTEM"})]})]})]})]})}function Gl({title:e,onBack:n,children:s,className:i=""}){return r.jsxs("div",{className:"w-full h-full bg-[#F0F2F5] overflow-hidden flex flex-col font-['Source_Han_Sans_CN_VF',sans-serif] text-slate-800",children:[r.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.05]",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),r.jsx("div",{className:"bg-white/90 backdrop-blur-sm border-b border-slate-300 sticky top-0 z-10 flex-shrink-0",children:r.jsxs("div",{className:"max-w-md mx-auto px-4 h-[60px] flex items-center justify-between relative",children:[r.jsxs("button",{onClick:n,className:"absolute left-4 p-2 -ml-2 flex items-center gap-1 text-slate-600 active:text-black active:bg-slate-100 hover:text-black hover:bg-slate-100 rounded-none border border-transparent active:border-slate-300 hover:border-slate-300 transition-colors",children:[r.jsx($n,{className:"w-5 h-5",strokeWidth:2}),r.jsx("span",{className:"text-xs font-bold tracking-wider",children:""})]}),r.jsxs("div",{className:"w-full text-center flex flex-col items-center justify-center pointer-events-none",children:[r.jsx("h1",{className:"text-sm font-bold tracking-[0.1em] text-slate-800 uppercase",children:e}),r.jsx("div",{className:"h-[2px] w-8 bg-slate-800 mt-1"})]}),r.jsx("div",{className:"absolute right-4 opacity-30",children:r.jsx(bb,{className:"w-5 h-5"})})]})}),r.jsx("div",{className:`flex-1 overflow-y-auto overscroll-contain ${i}`,children:r.jsx("div",{className:"max-w-md mx-auto min-h-full pb-10 pt-6 px-5",children:s})})]})}function e_({onBack:e}){const[n,s]=N.useState(""),[i,o]=N.useState(""),[l,c]=N.useState(""),[u,h]=N.useState(""),[g,p]=N.useState(.7),[f,m]=N.useState(!1),[b,y]=N.useState(!1),[v,C]=N.useState(!1),[w,F]=N.useState(null),[j,T]=N.useState(null),[z,B]=N.useState([]),[U,D]=N.useState(!1),[A,H]=N.useState(null),[Y,_]=N.useState([]),[L,k]=N.useState(0),[$,P]=N.useState(!1);N.useEffect(()=>{(async()=>{try{const V=await he.get(re.API_SETTINGS,"api_configs");if(V){const Z=JSON.parse(V);_(Z);const ue=parseInt(await he.get(re.API_SETTINGS,"current_config_index")||"0");k(ue),Z[ue]&&I(Z[ue])}}catch(V){console.error("Failed to load API settings:",V)}})()},[]);const I=W=>{s(W.name),c(W.baseUrl),o(W.apiKey),h(W.modelName),p(W.temperature)},q=()=>{const W={name:n||"",baseUrl:l,apiKey:i,modelName:u,temperature:g};let V=[...Y];const Z=V.findIndex(ue=>ue.name===W.name);Z>=0?(V[Z]=W,k(Z)):(V.push(W),k(V.length-1)),_(V),he.set(re.API_SETTINGS,"api_configs",JSON.stringify(V)),he.set(re.API_SETTINGS,"current_config_index",L.toString()),m(!0),setTimeout(()=>m(!1),2e3),F(null),T(null)},G=async W=>{k(W),await he.set(re.API_SETTINGS,"current_config_index",W.toString()),I(Y[W]),P(!1)},Q=async()=>{if(!i||!l){T({success:!1,message:" Key/URL"});return}y(!0);try{const W=await fetch(`${l}/models`,{headers:{Authorization:`Bearer ${i}`}});if(W.ok){const V=await W.json();if(V.data&&V.data.length>0){const Z=V.data.map(ue=>ue.id);B(Z),!u&&Z.length>0&&h(Z[0]),T({success:!0,message:` ${Z.length} `}),setTimeout(()=>T(null),2e3)}else T({success:!1,message:""})}else T({success:!1,message:""})}catch{T({success:!1,message:""})}finally{y(!1)}},M=W=>{const V=Y.filter((Z,ue)=>ue!==W);if(_(V),he.set(re.API_SETTINGS,"api_configs",JSON.stringify(V)),W===L)k(0),he.set(re.API_SETTINGS,"current_config_index","0"),V.length>0?I(V[0]):(s(""),c(""),o(""),h(""),p(.7),B([]));else if(W<L){const Z=L-1;k(Z),he.set(re.API_SETTINGS,"current_config_index",Z.toString())}H(null)},O=async()=>{if(!i||!l){F({success:!1,message:""});return}C(!0),F(null);try{const W=await fetch(`${l}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({model:u||"gpt-3.5-turbo",messages:[{role:"user",content:"test"}],temperature:g,max_tokens:10})});if(W.ok)F({success:!0,message:""}),setTimeout(()=>F(null),2e3);else{const V=await W.json().catch(()=>({})),Z=V.error?.message||V.message||`HTTP ${W.status}`;F({success:!1,message:`: ${Z}`}),setTimeout(()=>F(null),3e3)}}catch{F({success:!1,message:""}),setTimeout(()=>F(null),3e3)}finally{C(!1)}},ee=()=>{const W=` ${Y.length+1}`;s(W),c(""),o(""),h(""),p(.7),k(-1),P(!1)};return r.jsx(Gl,{title:"",onBack:e,children:r.jsxs("div",{className:"space-y-6 text-slate-800",children:[r.jsx(ze,{children:(f||w||j)&&r.jsx(je.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"fixed top-24 left-0 right-0 flex justify-center z-[60] pointer-events-none px-4",children:r.jsxs("div",{className:`
                   px-5 py-3 border-2 shadow-xl flex items-center gap-3 backdrop-blur-md text-sm font-bold tracking-wide
                   ${w?.success===!1||j?.success===!1?"bg-red-50 border-red-500 text-red-600":"bg-white border-slate-800 text-slate-800"}
                 `,children:[w?.success===!1||j?.success===!1?r.jsx(ht,{className:"w-4 h-4",strokeWidth:3}):r.jsx(Dt,{className:"w-4 h-4",strokeWidth:3}),r.jsxs("span",{children:[f&&"",w&&w.message,j&&j.message]})]})})}),r.jsxs("div",{className:"relative z-30",children:[r.jsxs("div",{onClick:()=>P(!$),className:"w-full bg-white p-4 border-2 border-slate-200 border-slate-200 active:border-slate-800 hover:border-slate-800 flex items-center justify-between cursor-pointer transition-all",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-10 h-10 bg-slate-100 flex items-center justify-center text-slate-600",children:r.jsx(Kl,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider",children:""}),r.jsx("div",{className:"text-base font-bold text-slate-800 font-mono",children:L===-1?"NEW_PROFILE (UNSAVED)":Y[L]?.name||"UNNAMED"})]})]}),r.jsx(zu,{className:`w-5 h-5 text-slate-400 transition-transform ${$?"rotate-180":""}`})]}),r.jsx(ze,{children:$&&r.jsxs(je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute top-full left-0 right-0 mt-2 bg-white border-2 border-slate-800 shadow-[8px_8px_0px_rgba(0,0,0,0.1)] z-50 max-h-[300px] overflow-y-auto",children:[Y.map((W,V)=>r.jsxs("div",{className:`p-3 flex justify-between items-center cursor-pointer transition-colors border-b border-slate-100 ${V===L?"bg-slate-50":"active:bg-slate-50 hover:bg-slate-50"}`,onClick:()=>G(V),children:[r.jsxs("div",{children:[r.jsx("div",{className:`text-sm font-bold font-mono ${V===L?"text-blue-600":"text-slate-700"}`,children:W.name}),r.jsx("div",{className:"text-[10px] text-slate-400 truncate max-w-[200px] font-mono",children:W.baseUrl})]}),r.jsx("button",{onClick:Z=>{Z.stopPropagation(),H(V)},className:"p-2 text-slate-300 active:text-red-500 active:bg-red-50 hover:text-red-500 hover:bg-red-50 rounded-sm transition-colors",children:r.jsx(Hn,{className:"w-4 h-4"})})]},V)),r.jsxs("button",{onClick:ee,className:"w-full p-3 text-center text-sm font-bold text-slate-600 active:bg-slate-100 hover:bg-slate-100 transition-colors flex items-center justify-center gap-2 uppercase tracking-wider",children:[r.jsx(Cr,{className:"w-4 h-4"})," "]})]})})]}),r.jsxs("div",{className:"bg-white p-6 border border-slate-200 space-y-6 relative",children:[r.jsx("div",{className:"absolute top-0 left-0 w-3 h-3 border-l-2 border-t-2 border-slate-300"}),r.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 border-r-2 border-b-2 border-slate-300"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:""}),r.jsx("input",{type:"text",value:n,onChange:W=>s(W.target.value),className:"w-full bg-slate-50 border border-slate-200 px-4 py-3 text-slate-800 font-bold focus:border-slate-800 focus:outline-none transition-all font-mono text-sm rounded-none",placeholder:"PROFILE_NAME"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1 flex items-center gap-2",children:[r.jsx(Lf,{className:"w-3 h-3"}),"  (Base URL)"]}),r.jsx("input",{type:"text",value:l,onChange:W=>c(W.target.value),className:"w-full bg-slate-50 border border-slate-200 px-4 py-3 text-slate-800 font-medium focus:border-slate-800 focus:outline-none transition-all placeholder:text-slate-300 font-mono text-xs rounded-none",placeholder:"https://api.example.com/v1"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1 flex items-center gap-2",children:[r.jsx(yN,{className:"w-3 h-3"}),"  (API Key)"]}),r.jsx("input",{type:"password",value:i,onChange:W=>o(W.target.value),className:"w-full bg-slate-50 border border-slate-200 px-4 py-3 text-slate-800 font-medium focus:border-slate-800 focus:outline-none transition-all placeholder:text-slate-300 font-mono text-xs rounded-none",placeholder:"sk-..."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center px-1",children:[r.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[r.jsx(Ij,{className:"w-3 h-3"})," "]}),r.jsxs("button",{onClick:Q,disabled:b,className:"text-[9px] font-bold border border-blue-200 text-blue-600 px-2 py-0.5 active:bg-blue-50 hover:bg-blue-50 transition-all flex items-center gap-1 disabled:opacity-50 uppercase",children:[r.jsx(X0,{className:`w-3 h-3 ${b?"animate-spin":""}`}),b?"SCANNING...":"AUTO SCAN"]})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",value:u,onChange:W=>h(W.target.value),className:"w-full bg-slate-50 border border-slate-200 px-4 py-3 text-slate-800 font-medium focus:border-slate-800 focus:outline-none transition-all placeholder:text-slate-300 font-mono text-xs rounded-none",placeholder:"gpt-3.5-turbo"}),z.length>0&&r.jsx("button",{onClick:()=>D(!U),className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 text-slate-400 active:bg-slate-200 hover:bg-slate-200 rounded-none transition-colors",children:r.jsx(zu,{className:"w-4 h-4"})}),r.jsx(ze,{children:U&&z.length>0&&r.jsx(je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute top-full left-0 right-0 mt-2 bg-white border border-slate-800 shadow-lg z-40 max-h-[200px] overflow-y-auto",children:z.map((W,V)=>r.jsx("div",{onClick:()=>{h(W),D(!1)},className:"px-4 py-2 text-xs text-slate-700 active:bg-slate-100 hover:bg-slate-100 cursor-pointer border-b border-slate-100 font-mono last:border-0",children:W},V))})})]})]}),r.jsxs("div",{className:"space-y-4 pt-2",children:[r.jsxs("div",{className:"flex justify-between items-center px-1",children:[r.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[r.jsx(If,{className:"w-3 h-3"}),"  (Temperature)"]}),r.jsx("span",{className:"bg-slate-100 border border-slate-200 text-slate-600 px-2 py-0.5 text-xs font-bold font-mono",children:g.toFixed(1)})]}),r.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:g,onChange:W=>p(parseFloat(W.target.value)),className:"w-full h-1 bg-slate-200 rounded-none appearance-none cursor-pointer accent-slate-800 hover:accent-blue-600 transition-all"}),r.jsxs("div",{className:"flex justify-between text-[9px] text-slate-400 font-bold uppercase tracking-widest px-1",children:[r.jsx("span",{children:"PRECISE"}),r.jsx("span",{children:"CREATIVE"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-3 pt-2",children:[r.jsxs("button",{onClick:O,disabled:v,className:"col-span-1 py-3.5 border border-slate-300 bg-white text-slate-600 font-bold text-xs active:border-slate-800 active:text-slate-800 hover:border-slate-800 hover:text-slate-800 transition-all flex items-center justify-center gap-2 disabled:opacity-50 uppercase tracking-wider",children:[v?r.jsx(X0,{className:"w-3 h-3 animate-spin"}):r.jsx(a4,{className:"w-3 h-3"}),"TEST"]}),r.jsxs("button",{onClick:q,className:"col-span-2 py-3.5 bg-slate-800 text-white font-bold text-xs active:bg-slate-900 hover:bg-slate-900 transition-all flex items-center justify-center gap-2 shadow-lg shadow-slate-200 uppercase tracking-wider",children:[r.jsx(Xa,{className:"w-3 h-3"}),""]})]}),r.jsx(ze,{children:A!==null&&r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[70] px-6",children:r.jsxs(je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"bg-white border-2 border-slate-800 p-6 w-full max-w-sm shadow-[8px_8px_0px_rgba(0,0,0,0.2)]",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("h3",{className:"text-lg font-black text-slate-800 mb-2 uppercase tracking-tight",children:""}),r.jsxs("p",{className:"text-xs font-mono text-slate-500",children:['PROFILE: "',Y[A]?.name,'"']}),r.jsx("p",{className:"text-sm text-slate-500 mt-2",children:""})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>H(null),className:"flex-1 py-3 border border-slate-300 text-slate-600 font-bold text-xs active:bg-slate-50 hover:bg-slate-50 transition-colors uppercase tracking-wider",children:""}),r.jsx("button",{onClick:()=>M(A),className:"flex-1 py-3 bg-red-600 text-white font-bold text-xs active:bg-red-700 hover:bg-red-700 transition-colors shadow-lg shadow-red-200 uppercase tracking-wider",children:""})]})]})})})]})})}function t_(e,n){return n.forEach((function(s){s&&typeof s!="string"&&!Array.isArray(s)&&Object.keys(s).forEach((function(i){if(i!=="default"&&!(i in e)){var o=Object.getOwnPropertyDescriptor(s,i);Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:function(){return s[i]}})}}))})),Object.freeze(e)}function Sb(e,n){return new Promise((function(s,i){let o;return n_(e).then((function(l){try{return o=l,s(new Blob([n.slice(0,2),o,n.slice(2)],{type:"image/jpeg"}))}catch(c){return i(c)}}),i)}))}const n_=e=>new Promise(((n,s)=>{const i=new FileReader;i.addEventListener("load",(({target:{result:o}})=>{const l=new DataView(o);let c=0;if(l.getUint16(c)!==65496)return s("not a valid JPEG");for(c+=2;;){const u=l.getUint16(c);if(u===65498)break;const h=l.getUint16(c+2);if(u===65505&&l.getUint32(c+4)===1165519206){const g=c+10;let p;switch(l.getUint16(g)){case 18761:p=!0;break;case 19789:p=!1;break;default:return s("TIFF header contains invalid endian")}if(l.getUint16(g+2,p)!==42)return s("TIFF header contains invalid version");const f=l.getUint32(g+4,p),m=g+f+2+12*l.getUint16(g+f,p);for(let b=g+f+2;b<m;b+=12)if(l.getUint16(b,p)==274){if(l.getUint16(b+2,p)!==3)return s("Orientation data type is invalid");if(l.getUint32(b+4,p)!==1)return s("Orientation data count is invalid");l.setUint16(b+8,1,p);break}return n(o.slice(c,c+2+h))}c+=2+h}return n(new Blob)})),i.readAsArrayBuffer(e)}));var Il={},s_={get exports(){return Il},set exports(e){Il=e}};(function(e){var n,s,i={};s_.exports=i,i.parse=function(o,l){for(var c=i.bin.readUshort,u=i.bin.readUint,h=0,g={},p=new Uint8Array(o),f=p.length-4;u(p,f)!=101010256;)f--;h=f,h+=4;var m=c(p,h+=4);c(p,h+=2);var b=u(p,h+=2),y=u(p,h+=4);h+=4,h=y;for(var v=0;v<m;v++){u(p,h),h+=4,h+=4,h+=4,u(p,h+=4),b=u(p,h+=4);var C=u(p,h+=4),w=c(p,h+=4),F=c(p,h+2),j=c(p,h+4);h+=6;var T=u(p,h+=8);h+=4,h+=w+F+j,i._readLocal(p,T,g,b,C,l)}return g},i._readLocal=function(o,l,c,u,h,g){var p=i.bin.readUshort,f=i.bin.readUint;f(o,l),p(o,l+=4),p(o,l+=2);var m=p(o,l+=2);f(o,l+=2),f(o,l+=4),l+=4;var b=p(o,l+=8),y=p(o,l+=2);l+=2;var v=i.bin.readUTF8(o,l,b);if(l+=b,l+=y,g)c[v]={size:h,csize:u};else{var C=new Uint8Array(o.buffer,l);if(m==0)c[v]=new Uint8Array(C.buffer.slice(l,l+u));else{if(m!=8)throw"unknown compression method: "+m;var w=new Uint8Array(h);i.inflateRaw(C,w),c[v]=w}}},i.inflateRaw=function(o,l){return i.F.inflate(o,l)},i.inflate=function(o,l){return o[0],o[1],i.inflateRaw(new Uint8Array(o.buffer,o.byteOffset+2,o.length-6),l)},i.deflate=function(o,l){l==null&&(l={level:6});var c=0,u=new Uint8Array(50+Math.floor(1.1*o.length));u[c]=120,u[c+1]=156,c+=2,c=i.F.deflateRaw(o,u,c,l.level);var h=i.adler(o,0,o.length);return u[c+0]=h>>>24&255,u[c+1]=h>>>16&255,u[c+2]=h>>>8&255,u[c+3]=h>>>0&255,new Uint8Array(u.buffer,0,c+4)},i.deflateRaw=function(o,l){l==null&&(l={level:6});var c=new Uint8Array(50+Math.floor(1.1*o.length)),u=i.F.deflateRaw(o,c,u,l.level);return new Uint8Array(c.buffer,0,u)},i.encode=function(o,l){l==null&&(l=!1);var c=0,u=i.bin.writeUint,h=i.bin.writeUshort,g={};for(var p in o){var f=!i._noNeed(p)&&!l,m=o[p],b=i.crc.crc(m,0,m.length);g[p]={cpr:f,usize:m.length,crc:b,file:f?i.deflateRaw(m):m}}for(var p in g)c+=g[p].file.length+30+46+2*i.bin.sizeUTF8(p);c+=22;var y=new Uint8Array(c),v=0,C=[];for(var p in g){var w=g[p];C.push(v),v=i._writeHeader(y,v,p,w,0)}var F=0,j=v;for(var p in g)w=g[p],C.push(v),v=i._writeHeader(y,v,p,w,1,C[F++]);var T=v-j;return u(y,v,101010256),v+=4,h(y,v+=4,F),h(y,v+=2,F),u(y,v+=2,T),u(y,v+=4,j),v+=4,v+=2,y.buffer},i._noNeed=function(o){var l=o.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(l)!=-1},i._writeHeader=function(o,l,c,u,h,g){var p=i.bin.writeUint,f=i.bin.writeUshort,m=u.file;return p(o,l,h==0?67324752:33639248),l+=4,h==1&&(l+=2),f(o,l,20),f(o,l+=2,0),f(o,l+=2,u.cpr?8:0),p(o,l+=2,0),p(o,l+=4,u.crc),p(o,l+=4,m.length),p(o,l+=4,u.usize),f(o,l+=4,i.bin.sizeUTF8(c)),f(o,l+=2,0),l+=2,h==1&&(l+=2,l+=2,p(o,l+=6,g),l+=4),l+=i.bin.writeUTF8(o,l,c),h==0&&(o.set(m,l),l+=m.length),l},i.crc={table:(function(){for(var o=new Uint32Array(256),l=0;l<256;l++){for(var c=l,u=0;u<8;u++)1&c?c=3988292384^c>>>1:c>>>=1;o[l]=c}return o})(),update:function(o,l,c,u){for(var h=0;h<u;h++)o=i.crc.table[255&(o^l[c+h])]^o>>>8;return o},crc:function(o,l,c){return 4294967295^i.crc.update(4294967295,o,l,c)}},i.adler=function(o,l,c){for(var u=1,h=0,g=l,p=l+c;g<p;){for(var f=Math.min(g+5552,p);g<f;)h+=u+=o[g++];u%=65521,h%=65521}return h<<16|u},i.bin={readUshort:function(o,l){return o[l]|o[l+1]<<8},writeUshort:function(o,l,c){o[l]=255&c,o[l+1]=c>>8&255},readUint:function(o,l){return 16777216*o[l+3]+(o[l+2]<<16|o[l+1]<<8|o[l])},writeUint:function(o,l,c){o[l]=255&c,o[l+1]=c>>8&255,o[l+2]=c>>16&255,o[l+3]=c>>24&255},readASCII:function(o,l,c){for(var u="",h=0;h<c;h++)u+=String.fromCharCode(o[l+h]);return u},writeASCII:function(o,l,c){for(var u=0;u<c.length;u++)o[l+u]=c.charCodeAt(u)},pad:function(o){return o.length<2?"0"+o:o},readUTF8:function(o,l,c){for(var u,h="",g=0;g<c;g++)h+="%"+i.bin.pad(o[l+g].toString(16));try{u=decodeURIComponent(h)}catch{return i.bin.readASCII(o,l,c)}return u},writeUTF8:function(o,l,c){for(var u=c.length,h=0,g=0;g<u;g++){var p=c.charCodeAt(g);if((4294967168&p)==0)o[l+h]=p,h++;else if((4294965248&p)==0)o[l+h]=192|p>>6,o[l+h+1]=128|p>>0&63,h+=2;else if((4294901760&p)==0)o[l+h]=224|p>>12,o[l+h+1]=128|p>>6&63,o[l+h+2]=128|p>>0&63,h+=3;else{if((4292870144&p)!=0)throw"e";o[l+h]=240|p>>18,o[l+h+1]=128|p>>12&63,o[l+h+2]=128|p>>6&63,o[l+h+3]=128|p>>0&63,h+=4}}return h},sizeUTF8:function(o){for(var l=o.length,c=0,u=0;u<l;u++){var h=o.charCodeAt(u);if((4294967168&h)==0)c++;else if((4294965248&h)==0)c+=2;else if((4294901760&h)==0)c+=3;else{if((4292870144&h)!=0)throw"e";c+=4}}return c}},i.F={},i.F.deflateRaw=function(o,l,c,u){var h=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][u],g=i.F.U,p=i.F._goodIndex;i.F._hash;var f=i.F._putsE,m=0,b=c<<3,y=0,v=o.length;if(u==0){for(;m<v;)f(l,b,m+(Y=Math.min(65535,v-m))==v?1:0),b=i.F._copyExact(o,m,Y,l,b+8),m+=Y;return b>>>3}var C=g.lits,w=g.strt,F=g.prev,j=0,T=0,z=0,B=0,U=0,D=0;for(v>2&&(w[D=i.F._hash(o,0)]=0),m=0;m<v;m++){if(U=D,m+1<v-2){D=i.F._hash(o,m+1);var A=m+1&32767;F[A]=w[D],w[D]=A}if(y<=m){(j>14e3||T>26697)&&v-m>100&&(y<m&&(C[j]=m-y,j+=2,y=m),b=i.F._writeBlock(m==v-1||y==v?1:0,C,j,B,o,z,m-z,l,b),j=T=B=0,z=m);var H=0;m<v-2&&(H=i.F._bestMatch(o,m,F,U,Math.min(h[2],v-m),h[3]));var Y=H>>>16,_=65535&H;if(H!=0){_=65535&H;var L=p(Y=H>>>16,g.of0);g.lhst[257+L]++;var k=p(_,g.df0);g.dhst[k]++,B+=g.exb[L]+g.dxb[k],C[j]=Y<<23|m-y,C[j+1]=_<<16|L<<8|k,j+=2,y=m+Y}else g.lhst[o[m]]++;T++}}for(z==m&&o.length!=0||(y<m&&(C[j]=m-y,j+=2,y=m),b=i.F._writeBlock(1,C,j,B,o,z,m-z,l,b),j=0,T=0,j=T=B=0,z=m);(7&b)!=0;)b++;return b>>>3},i.F._bestMatch=function(o,l,c,u,h,g){var p=32767&l,f=c[p],m=p-f+32768&32767;if(f==p||u!=i.F._hash(o,l-m))return 0;for(var b=0,y=0,v=Math.min(32767,l);m<=v&&--g!=0&&f!=p;){if(b==0||o[l+b]==o[l+b-m]){var C=i.F._howLong(o,l,m);if(C>b){if(y=m,(b=C)>=h)break;m+2<C&&(C=m+2);for(var w=0,F=0;F<C-2;F++){var j=l-m+F+32768&32767,T=j-c[j]+32768&32767;T>w&&(w=T,f=j)}}}m+=(p=f)-(f=c[p])+32768&32767}return b<<16|y},i.F._howLong=function(o,l,c){if(o[l]!=o[l-c]||o[l+1]!=o[l+1-c]||o[l+2]!=o[l+2-c])return 0;var u=l,h=Math.min(o.length,l+258);for(l+=3;l<h&&o[l]==o[l-c];)l++;return l-u},i.F._hash=function(o,l){return(o[l]<<8|o[l+1])+(o[l+2]<<4)&65535},i.saved=0,i.F._writeBlock=function(o,l,c,u,h,g,p,f,m){var b,y,v,C,w,F,j,T,z,B=i.F.U,U=i.F._putsF,D=i.F._putsE;B.lhst[256]++,y=(b=i.F.getTrees())[0],v=b[1],C=b[2],w=b[3],F=b[4],j=b[5],T=b[6],z=b[7];var A=32+((m+3&7)==0?0:8-(m+3&7))+(p<<3),H=u+i.F.contSize(B.fltree,B.lhst)+i.F.contSize(B.fdtree,B.dhst),Y=u+i.F.contSize(B.ltree,B.lhst)+i.F.contSize(B.dtree,B.dhst);Y+=14+3*j+i.F.contSize(B.itree,B.ihst)+(2*B.ihst[16]+3*B.ihst[17]+7*B.ihst[18]);for(var _=0;_<286;_++)B.lhst[_]=0;for(_=0;_<30;_++)B.dhst[_]=0;for(_=0;_<19;_++)B.ihst[_]=0;var L=A<H&&A<Y?0:H<Y?1:2;if(U(f,m,o),U(f,m+1,L),m+=3,L==0){for(;(7&m)!=0;)m++;m=i.F._copyExact(h,g,p,f,m)}else{var k,$;if(L==1&&(k=B.fltree,$=B.fdtree),L==2){i.F.makeCodes(B.ltree,y),i.F.revCodes(B.ltree,y),i.F.makeCodes(B.dtree,v),i.F.revCodes(B.dtree,v),i.F.makeCodes(B.itree,C),i.F.revCodes(B.itree,C),k=B.ltree,$=B.dtree,D(f,m,w-257),D(f,m+=5,F-1),D(f,m+=5,j-4),m+=4;for(var P=0;P<j;P++)D(f,m+3*P,B.itree[1+(B.ordr[P]<<1)]);m+=3*j,m=i.F._codeTiny(T,B.itree,f,m),m=i.F._codeTiny(z,B.itree,f,m)}for(var I=g,q=0;q<c;q+=2){for(var G=l[q],Q=G>>>23,M=I+(8388607&G);I<M;)m=i.F._writeLit(h[I++],k,f,m);if(Q!=0){var O=l[q+1],ee=O>>16,W=O>>8&255,V=255&O;D(f,m=i.F._writeLit(257+W,k,f,m),Q-B.of0[W]),m+=B.exb[W],U(f,m=i.F._writeLit(V,$,f,m),ee-B.df0[V]),m+=B.dxb[V],I+=Q}}m=i.F._writeLit(256,k,f,m)}return m},i.F._copyExact=function(o,l,c,u,h){var g=h>>>3;return u[g]=c,u[g+1]=c>>>8,u[g+2]=255-u[g],u[g+3]=255-u[g+1],g+=4,u.set(new Uint8Array(o.buffer,l,c),g),h+(c+4<<3)},i.F.getTrees=function(){for(var o=i.F.U,l=i.F._hufTree(o.lhst,o.ltree,15),c=i.F._hufTree(o.dhst,o.dtree,15),u=[],h=i.F._lenCodes(o.ltree,u),g=[],p=i.F._lenCodes(o.dtree,g),f=0;f<u.length;f+=2)o.ihst[u[f]]++;for(f=0;f<g.length;f+=2)o.ihst[g[f]]++;for(var m=i.F._hufTree(o.ihst,o.itree,7),b=19;b>4&&o.itree[1+(o.ordr[b-1]<<1)]==0;)b--;return[l,c,m,h,p,b,u,g]},i.F.getSecond=function(o){for(var l=[],c=0;c<o.length;c+=2)l.push(o[c+1]);return l},i.F.nonZero=function(o){for(var l="",c=0;c<o.length;c+=2)o[c+1]!=0&&(l+=(c>>1)+",");return l},i.F.contSize=function(o,l){for(var c=0,u=0;u<l.length;u++)c+=l[u]*o[1+(u<<1)];return c},i.F._codeTiny=function(o,l,c,u){for(var h=0;h<o.length;h+=2){var g=o[h],p=o[h+1];u=i.F._writeLit(g,l,c,u);var f=g==16?2:g==17?3:7;g>15&&(i.F._putsE(c,u,p,f),u+=f)}return u},i.F._lenCodes=function(o,l){for(var c=o.length;c!=2&&o[c-1]==0;)c-=2;for(var u=0;u<c;u+=2){var h=o[u+1],g=u+3<c?o[u+3]:-1,p=u+5<c?o[u+5]:-1,f=u==0?-1:o[u-1];if(h==0&&g==h&&p==h){for(var m=u+5;m+2<c&&o[m+2]==h;)m+=2;(b=Math.min(m+1-u>>>1,138))<11?l.push(17,b-3):l.push(18,b-11),u+=2*b-2}else if(h==f&&g==h&&p==h){for(m=u+5;m+2<c&&o[m+2]==h;)m+=2;var b=Math.min(m+1-u>>>1,6);l.push(16,b-3),u+=2*b-2}else l.push(h,0)}return c>>>1},i.F._hufTree=function(o,l,c){var u=[],h=o.length,g=l.length,p=0;for(p=0;p<g;p+=2)l[p]=0,l[p+1]=0;for(p=0;p<h;p++)o[p]!=0&&u.push({lit:p,f:o[p]});var f=u.length,m=u.slice(0);if(f==0)return 0;if(f==1){var b=u[0].lit;return m=b==0?1:0,l[1+(b<<1)]=1,l[1+(m<<1)]=1,1}u.sort((function(T,z){return T.f-z.f}));var y=u[0],v=u[1],C=0,w=1,F=2;for(u[0]={lit:-1,f:y.f+v.f,l:y,r:v,d:0};w!=f-1;)y=C!=w&&(F==f||u[C].f<u[F].f)?u[C++]:u[F++],v=C!=w&&(F==f||u[C].f<u[F].f)?u[C++]:u[F++],u[w++]={lit:-1,f:y.f+v.f,l:y,r:v};var j=i.F.setDepth(u[w-1],0);for(j>c&&(i.F.restrictDepth(m,c,j),j=c),p=0;p<f;p++)l[1+(m[p].lit<<1)]=m[p].d;return j},i.F.setDepth=function(o,l){return o.lit!=-1?(o.d=l,l):Math.max(i.F.setDepth(o.l,l+1),i.F.setDepth(o.r,l+1))},i.F.restrictDepth=function(o,l,c){var u=0,h=1<<c-l,g=0;for(o.sort((function(f,m){return m.d==f.d?f.f-m.f:m.d-f.d})),u=0;u<o.length&&o[u].d>l;u++){var p=o[u].d;o[u].d=l,g+=h-(1<<c-p)}for(g>>>=c-l;g>0;)(p=o[u].d)<l?(o[u].d++,g-=1<<l-p-1):u++;for(;u>=0;u--)o[u].d==l&&g<0&&(o[u].d--,g++);g!=0&&console.log("debt left")},i.F._goodIndex=function(o,l){var c=0;return l[16|c]<=o&&(c|=16),l[8|c]<=o&&(c|=8),l[4|c]<=o&&(c|=4),l[2|c]<=o&&(c|=2),l[1|c]<=o&&(c|=1),c},i.F._writeLit=function(o,l,c,u){return i.F._putsF(c,u,l[o<<1]),u+l[1+(o<<1)]},i.F.inflate=function(o,l){var c=Uint8Array;if(o[0]==3&&o[1]==0)return l||new c(0);var u=i.F,h=u._bitsF,g=u._bitsE,p=u._decodeTiny,f=u.makeCodes,m=u.codes2map,b=u._get17,y=u.U,v=l==null;v&&(l=new c(o.length>>>2<<3));for(var C,w,F=0,j=0,T=0,z=0,B=0,U=0,D=0,A=0,H=0;F==0;)if(F=h(o,H,1),j=h(o,H+1,2),H+=3,j!=0){if(v&&(l=i.F._check(l,A+(1<<17))),j==1&&(C=y.flmap,w=y.fdmap,U=511,D=31),j==2){T=g(o,H,5)+257,z=g(o,H+5,5)+1,B=g(o,H+10,4)+4,H+=14;for(var Y=0;Y<38;Y+=2)y.itree[Y]=0,y.itree[Y+1]=0;var _=1;for(Y=0;Y<B;Y++){var L=g(o,H+3*Y,3);y.itree[1+(y.ordr[Y]<<1)]=L,L>_&&(_=L)}H+=3*B,f(y.itree,_),m(y.itree,_,y.imap),C=y.lmap,w=y.dmap,H=p(y.imap,(1<<_)-1,T+z,o,H,y.ttree);var k=u._copyOut(y.ttree,0,T,y.ltree);U=(1<<k)-1;var $=u._copyOut(y.ttree,T,z,y.dtree);D=(1<<$)-1,f(y.ltree,k),m(y.ltree,k,C),f(y.dtree,$),m(y.dtree,$,w)}for(;;){var P=C[b(o,H)&U];H+=15&P;var I=P>>>4;if(!(I>>>8))l[A++]=I;else{if(I==256)break;var q=A+I-254;if(I>264){var G=y.ldef[I-257];q=A+(G>>>3)+g(o,H,7&G),H+=7&G}var Q=w[b(o,H)&D];H+=15&Q;var M=Q>>>4,O=y.ddef[M],ee=(O>>>4)+h(o,H,15&O);for(H+=15&O,v&&(l=i.F._check(l,A+(1<<17)));A<q;)l[A]=l[A++-ee],l[A]=l[A++-ee],l[A]=l[A++-ee],l[A]=l[A++-ee];A=q}}}else{(7&H)!=0&&(H+=8-(7&H));var W=4+(H>>>3),V=o[W-4]|o[W-3]<<8;v&&(l=i.F._check(l,A+V)),l.set(new c(o.buffer,o.byteOffset+W,V),A),H=W+V<<3,A+=V}return l.length==A?l:l.slice(0,A)},i.F._check=function(o,l){var c=o.length;if(l<=c)return o;var u=new Uint8Array(Math.max(c<<1,l));return u.set(o,0),u},i.F._decodeTiny=function(o,l,c,u,h,g){for(var p=i.F._bitsE,f=i.F._get17,m=0;m<c;){var b=o[f(u,h)&l];h+=15&b;var y=b>>>4;if(y<=15)g[m]=y,m++;else{var v=0,C=0;y==16?(C=3+p(u,h,2),h+=2,v=g[m-1]):y==17?(C=3+p(u,h,3),h+=3):y==18&&(C=11+p(u,h,7),h+=7);for(var w=m+C;m<w;)g[m]=v,m++}}return h},i.F._copyOut=function(o,l,c,u){for(var h=0,g=0,p=u.length>>>1;g<c;){var f=o[g+l];u[g<<1]=0,u[1+(g<<1)]=f,f>h&&(h=f),g++}for(;g<p;)u[g<<1]=0,u[1+(g<<1)]=0,g++;return h},i.F.makeCodes=function(o,l){for(var c,u,h,g,p=i.F.U,f=o.length,m=p.bl_count,b=0;b<=l;b++)m[b]=0;for(b=1;b<f;b+=2)m[o[b]]++;var y=p.next_code;for(c=0,m[0]=0,u=1;u<=l;u++)c=c+m[u-1]<<1,y[u]=c;for(h=0;h<f;h+=2)(g=o[h+1])!=0&&(o[h]=y[g],y[g]++)},i.F.codes2map=function(o,l,c){for(var u=o.length,h=i.F.U.rev15,g=0;g<u;g+=2)if(o[g+1]!=0)for(var p=g>>1,f=o[g+1],m=p<<4|f,b=l-f,y=o[g]<<b,v=y+(1<<b);y!=v;)c[h[y]>>>15-l]=m,y++},i.F.revCodes=function(o,l){for(var c=i.F.U.rev15,u=15-l,h=0;h<o.length;h+=2){var g=o[h]<<l-o[h+1];o[h]=c[g]>>>u}},i.F._putsE=function(o,l,c){c<<=7&l;var u=l>>>3;o[u]|=c,o[u+1]|=c>>>8},i.F._putsF=function(o,l,c){c<<=7&l;var u=l>>>3;o[u]|=c,o[u+1]|=c>>>8,o[u+2]|=c>>>16},i.F._bitsE=function(o,l,c){return(o[l>>>3]|o[1+(l>>>3)]<<8)>>>(7&l)&(1<<c)-1},i.F._bitsF=function(o,l,c){return(o[l>>>3]|o[1+(l>>>3)]<<8|o[2+(l>>>3)]<<16)>>>(7&l)&(1<<c)-1},i.F._get17=function(o,l){return(o[l>>>3]|o[1+(l>>>3)]<<8|o[2+(l>>>3)]<<16)>>>(7&l)},i.F._get25=function(o,l){return(o[l>>>3]|o[1+(l>>>3)]<<8|o[2+(l>>>3)]<<16|o[3+(l>>>3)]<<24)>>>(7&l)},i.F.U=(n=Uint16Array,s=Uint32Array,{next_code:new n(16),bl_count:new n(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new n(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new s(32),flmap:new n(512),fltree:[],fdmap:new n(32),fdtree:[],lmap:new n(32768),ltree:[],ttree:[],dmap:new n(32768),dtree:[],imap:new n(512),itree:[],rev15:new n(32768),lhst:new s(286),dhst:new s(30),ihst:new s(19),lits:new s(15e3),strt:new n(65536),prev:new n(32768)}),(function(){for(var o=i.F.U,l=0;l<32768;l++){var c=l;c=(4278255360&(c=(4042322160&(c=(3435973836&(c=(2863311530&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,o.rev15[l]=(c>>>16|c<<16)>>>17}function u(h,g,p){for(;g--!=0;)h.push(0,p)}for(l=0;l<32;l++)o.ldef[l]=o.of0[l]<<3|o.exb[l],o.ddef[l]=o.df0[l]<<4|o.dxb[l];u(o.fltree,144,8),u(o.fltree,112,9),u(o.fltree,24,7),u(o.fltree,8,8),i.F.makeCodes(o.fltree,9),i.F.codes2map(o.fltree,9,o.flmap),i.F.revCodes(o.fltree,9),u(o.fdtree,32,5),i.F.makeCodes(o.fdtree,5),i.F.codes2map(o.fdtree,5,o.fdmap),i.F.revCodes(o.fdtree,5),u(o.itree,19,0),u(o.ltree,286,0),u(o.dtree,30,0),u(o.ttree,320,0)})()})();var r_=t_({__proto__:null,default:Il},[Il]);const vs=(function(){var e={nextZero(p,f){for(;p[f]!=0;)f++;return f},readUshort:(p,f)=>p[f]<<8|p[f+1],writeUshort(p,f,m){p[f]=m>>8&255,p[f+1]=255&m},readUint:(p,f)=>16777216*p[f]+(p[f+1]<<16|p[f+2]<<8|p[f+3]),writeUint(p,f,m){p[f]=m>>24&255,p[f+1]=m>>16&255,p[f+2]=m>>8&255,p[f+3]=255&m},readASCII(p,f,m){let b="";for(let y=0;y<m;y++)b+=String.fromCharCode(p[f+y]);return b},writeASCII(p,f,m){for(let b=0;b<m.length;b++)p[f+b]=m.charCodeAt(b)},readBytes(p,f,m){const b=[];for(let y=0;y<m;y++)b.push(p[f+y]);return b},pad:p=>p.length<2?`0${p}`:p,readUTF8(p,f,m){let b,y="";for(let v=0;v<m;v++)y+=`%${e.pad(p[f+v].toString(16))}`;try{b=decodeURIComponent(y)}catch{return e.readASCII(p,f,m)}return b}};function n(p,f,m,b){const y=f*m,v=l(b),C=Math.ceil(f*v/8),w=new Uint8Array(4*y),F=new Uint32Array(w.buffer),{ctype:j}=b,{depth:T}=b,z=e.readUshort;if(j==6){const G=y<<2;if(T==8)for(var B=0;B<G;B+=4)w[B]=p[B],w[B+1]=p[B+1],w[B+2]=p[B+2],w[B+3]=p[B+3];if(T==16)for(B=0;B<G;B++)w[B]=p[B<<1]}else if(j==2){const G=b.tabs.tRNS;if(G==null){if(T==8)for(B=0;B<y;B++){var U=3*B;F[B]=255<<24|p[U+2]<<16|p[U+1]<<8|p[U]}if(T==16)for(B=0;B<y;B++)U=6*B,F[B]=255<<24|p[U+4]<<16|p[U+2]<<8|p[U]}else{var D=G[0];const Q=G[1],M=G[2];if(T==8)for(B=0;B<y;B++){var A=B<<2;U=3*B,F[B]=255<<24|p[U+2]<<16|p[U+1]<<8|p[U],p[U]==D&&p[U+1]==Q&&p[U+2]==M&&(w[A+3]=0)}if(T==16)for(B=0;B<y;B++)A=B<<2,U=6*B,F[B]=255<<24|p[U+4]<<16|p[U+2]<<8|p[U],z(p,U)==D&&z(p,U+2)==Q&&z(p,U+4)==M&&(w[A+3]=0)}}else if(j==3){const G=b.tabs.PLTE,Q=b.tabs.tRNS,M=Q?Q.length:0;if(T==1)for(var H=0;H<m;H++){var Y=H*C,_=H*f;for(B=0;B<f;B++){A=_+B<<2;var L=3*(k=p[Y+(B>>3)]>>7-((7&B)<<0)&1);w[A]=G[L],w[A+1]=G[L+1],w[A+2]=G[L+2],w[A+3]=k<M?Q[k]:255}}if(T==2)for(H=0;H<m;H++)for(Y=H*C,_=H*f,B=0;B<f;B++)A=_+B<<2,L=3*(k=p[Y+(B>>2)]>>6-((3&B)<<1)&3),w[A]=G[L],w[A+1]=G[L+1],w[A+2]=G[L+2],w[A+3]=k<M?Q[k]:255;if(T==4)for(H=0;H<m;H++)for(Y=H*C,_=H*f,B=0;B<f;B++)A=_+B<<2,L=3*(k=p[Y+(B>>1)]>>4-((1&B)<<2)&15),w[A]=G[L],w[A+1]=G[L+1],w[A+2]=G[L+2],w[A+3]=k<M?Q[k]:255;if(T==8)for(B=0;B<y;B++){var k;A=B<<2,L=3*(k=p[B]),w[A]=G[L],w[A+1]=G[L+1],w[A+2]=G[L+2],w[A+3]=k<M?Q[k]:255}}else if(j==4){if(T==8)for(B=0;B<y;B++){A=B<<2;var $=p[P=B<<1];w[A]=$,w[A+1]=$,w[A+2]=$,w[A+3]=p[P+1]}if(T==16)for(B=0;B<y;B++){var P;A=B<<2,$=p[P=B<<2],w[A]=$,w[A+1]=$,w[A+2]=$,w[A+3]=p[P+2]}}else if(j==0)for(D=b.tabs.tRNS?b.tabs.tRNS:-1,H=0;H<m;H++){const G=H*C,Q=H*f;if(T==1)for(var I=0;I<f;I++){var q=($=255*(p[G+(I>>>3)]>>>7-(7&I)&1))==255*D?0:255;F[Q+I]=q<<24|$<<16|$<<8|$}else if(T==2)for(I=0;I<f;I++)q=($=85*(p[G+(I>>>2)]>>>6-((3&I)<<1)&3))==85*D?0:255,F[Q+I]=q<<24|$<<16|$<<8|$;else if(T==4)for(I=0;I<f;I++)q=($=17*(p[G+(I>>>1)]>>>4-((1&I)<<2)&15))==17*D?0:255,F[Q+I]=q<<24|$<<16|$<<8|$;else if(T==8)for(I=0;I<f;I++)q=($=p[G+I])==D?0:255,F[Q+I]=q<<24|$<<16|$<<8|$;else if(T==16)for(I=0;I<f;I++)$=p[G+(I<<1)],q=z(p,G+(I<<1))==D?0:255,F[Q+I]=q<<24|$<<16|$<<8|$}return w}function s(p,f,m,b){const y=l(p),v=Math.ceil(m*y/8),C=new Uint8Array((v+1+p.interlace)*b);return f=p.tabs.CgBI?o(f,C):i(f,C),p.interlace==0?f=c(f,p,0,m,b):p.interlace==1&&(f=(function(F,j){const T=j.width,z=j.height,B=l(j),U=B>>3,D=Math.ceil(T*B/8),A=new Uint8Array(z*D);let H=0;const Y=[0,0,4,0,2,0,1],_=[0,4,0,2,0,1,0],L=[8,8,8,4,4,2,2],k=[8,8,4,4,2,2,1];let $=0;for(;$<7;){const I=L[$],q=k[$];let G=0,Q=0,M=Y[$];for(;M<z;)M+=I,Q++;let O=_[$];for(;O<T;)O+=q,G++;const ee=Math.ceil(G*B/8);c(F,j,H,G,Q);let W=0,V=Y[$];for(;V<z;){let Z=_[$],ue=H+W*ee<<3;for(;Z<T;){var P;if(B==1&&(P=(P=F[ue>>3])>>7-(7&ue)&1,A[V*D+(Z>>3)]|=P<<7-((7&Z)<<0)),B==2&&(P=(P=F[ue>>3])>>6-(7&ue)&3,A[V*D+(Z>>2)]|=P<<6-((3&Z)<<1)),B==4&&(P=(P=F[ue>>3])>>4-(7&ue)&15,A[V*D+(Z>>1)]|=P<<4-((1&Z)<<2)),B>=8){const ce=V*D+Z*U;for(let me=0;me<U;me++)A[ce+me]=F[(ue>>3)+me]}ue+=B,Z+=q}W++,V+=I}G*Q!=0&&(H+=Q*(1+ee)),$+=1}return A})(f,p)),f}function i(p,f){return o(new Uint8Array(p.buffer,2,p.length-6),f)}var o=(function(){const p={H:{}};return p.H.N=function(f,m){const b=Uint8Array;let y,v,C=0,w=0,F=0,j=0,T=0,z=0,B=0,U=0,D=0;if(f[0]==3&&f[1]==0)return m||new b(0);const A=p.H,H=A.b,Y=A.e,_=A.R,L=A.n,k=A.A,$=A.Z,P=A.m,I=m==null;for(I&&(m=new b(f.length>>>2<<5));C==0;)if(C=H(f,D,1),w=H(f,D+1,2),D+=3,w!=0){if(I&&(m=p.H.W(m,U+(1<<17))),w==1&&(y=P.J,v=P.h,z=511,B=31),w==2){F=Y(f,D,5)+257,j=Y(f,D+5,5)+1,T=Y(f,D+10,4)+4,D+=14;let G=1;for(var q=0;q<38;q+=2)P.Q[q]=0,P.Q[q+1]=0;for(q=0;q<T;q++){const O=Y(f,D+3*q,3);P.Q[1+(P.X[q]<<1)]=O,O>G&&(G=O)}D+=3*T,L(P.Q,G),k(P.Q,G,P.u),y=P.w,v=P.d,D=_(P.u,(1<<G)-1,F+j,f,D,P.v);const Q=A.V(P.v,0,F,P.C);z=(1<<Q)-1;const M=A.V(P.v,F,j,P.D);B=(1<<M)-1,L(P.C,Q),k(P.C,Q,y),L(P.D,M),k(P.D,M,v)}for(;;){const G=y[$(f,D)&z];D+=15&G;const Q=G>>>4;if(!(Q>>>8))m[U++]=Q;else{if(Q==256)break;{let M=U+Q-254;if(Q>264){const Z=P.q[Q-257];M=U+(Z>>>3)+Y(f,D,7&Z),D+=7&Z}const O=v[$(f,D)&B];D+=15&O;const ee=O>>>4,W=P.c[ee],V=(W>>>4)+H(f,D,15&W);for(D+=15&W;U<M;)m[U]=m[U++-V],m[U]=m[U++-V],m[U]=m[U++-V],m[U]=m[U++-V];U=M}}}}else{(7&D)!=0&&(D+=8-(7&D));const G=4+(D>>>3),Q=f[G-4]|f[G-3]<<8;I&&(m=p.H.W(m,U+Q)),m.set(new b(f.buffer,f.byteOffset+G,Q),U),D=G+Q<<3,U+=Q}return m.length==U?m:m.slice(0,U)},p.H.W=function(f,m){const b=f.length;if(m<=b)return f;const y=new Uint8Array(b<<1);return y.set(f,0),y},p.H.R=function(f,m,b,y,v,C){const w=p.H.e,F=p.H.Z;let j=0;for(;j<b;){const T=f[F(y,v)&m];v+=15&T;const z=T>>>4;if(z<=15)C[j]=z,j++;else{let B=0,U=0;z==16?(U=3+w(y,v,2),v+=2,B=C[j-1]):z==17?(U=3+w(y,v,3),v+=3):z==18&&(U=11+w(y,v,7),v+=7);const D=j+U;for(;j<D;)C[j]=B,j++}}return v},p.H.V=function(f,m,b,y){let v=0,C=0;const w=y.length>>>1;for(;C<b;){const F=f[C+m];y[C<<1]=0,y[1+(C<<1)]=F,F>v&&(v=F),C++}for(;C<w;)y[C<<1]=0,y[1+(C<<1)]=0,C++;return v},p.H.n=function(f,m){const b=p.H.m,y=f.length;let v,C,w,F;const j=b.j;for(var T=0;T<=m;T++)j[T]=0;for(T=1;T<y;T+=2)j[f[T]]++;const z=b.K;for(v=0,j[0]=0,C=1;C<=m;C++)v=v+j[C-1]<<1,z[C]=v;for(w=0;w<y;w+=2)F=f[w+1],F!=0&&(f[w]=z[F],z[F]++)},p.H.A=function(f,m,b){const y=f.length,v=p.H.m.r;for(let C=0;C<y;C+=2)if(f[C+1]!=0){const w=C>>1,F=f[C+1],j=w<<4|F,T=m-F;let z=f[C]<<T;const B=z+(1<<T);for(;z!=B;)b[v[z]>>>15-m]=j,z++}},p.H.l=function(f,m){const b=p.H.m.r,y=15-m;for(let v=0;v<f.length;v+=2){const C=f[v]<<m-f[v+1];f[v]=b[C]>>>y}},p.H.M=function(f,m,b){b<<=7&m;const y=m>>>3;f[y]|=b,f[y+1]|=b>>>8},p.H.I=function(f,m,b){b<<=7&m;const y=m>>>3;f[y]|=b,f[y+1]|=b>>>8,f[y+2]|=b>>>16},p.H.e=function(f,m,b){return(f[m>>>3]|f[1+(m>>>3)]<<8)>>>(7&m)&(1<<b)-1},p.H.b=function(f,m,b){return(f[m>>>3]|f[1+(m>>>3)]<<8|f[2+(m>>>3)]<<16)>>>(7&m)&(1<<b)-1},p.H.Z=function(f,m){return(f[m>>>3]|f[1+(m>>>3)]<<8|f[2+(m>>>3)]<<16)>>>(7&m)},p.H.i=function(f,m){return(f[m>>>3]|f[1+(m>>>3)]<<8|f[2+(m>>>3)]<<16|f[3+(m>>>3)]<<24)>>>(7&m)},p.H.m=(function(){const f=Uint16Array,m=Uint32Array;return{K:new f(16),j:new f(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new f(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new m(32),J:new f(512),_:[],h:new f(32),$:[],w:new f(32768),C:[],v:[],d:new f(32768),D:[],u:new f(512),Q:[],r:new f(32768),s:new m(286),Y:new m(30),a:new m(19),t:new m(15e3),k:new f(65536),g:new f(32768)}})(),(function(){const f=p.H.m;for(var m=0;m<32768;m++){let y=m;y=(2863311530&y)>>>1|(1431655765&y)<<1,y=(3435973836&y)>>>2|(858993459&y)<<2,y=(4042322160&y)>>>4|(252645135&y)<<4,y=(4278255360&y)>>>8|(16711935&y)<<8,f.r[m]=(y>>>16|y<<16)>>>17}function b(y,v,C){for(;v--!=0;)y.push(0,C)}for(m=0;m<32;m++)f.q[m]=f.S[m]<<3|f.T[m],f.c[m]=f.p[m]<<4|f.z[m];b(f._,144,8),b(f._,112,9),b(f._,24,7),b(f._,8,8),p.H.n(f._,9),p.H.A(f._,9,f.J),p.H.l(f._,9),b(f.$,32,5),p.H.n(f.$,5),p.H.A(f.$,5,f.h),p.H.l(f.$,5),b(f.Q,19,0),b(f.C,286,0),b(f.D,30,0),b(f.v,320,0)})(),p.H.N})();function l(p){return[1,null,3,1,2,null,4][p.ctype]*p.depth}function c(p,f,m,b,y){let v=l(f);const C=Math.ceil(b*v/8);let w,F;v=Math.ceil(v/8);let j=p[m],T=0;if(j>1&&(p[m]=[0,0,1][j-2]),j==3)for(T=v;T<C;T++)p[T+1]=p[T+1]+(p[T+1-v]>>>1)&255;for(let z=0;z<y;z++)if(w=m+z*C,F=w+z+1,j=p[F-1],T=0,j==0)for(;T<C;T++)p[w+T]=p[F+T];else if(j==1){for(;T<v;T++)p[w+T]=p[F+T];for(;T<C;T++)p[w+T]=p[F+T]+p[w+T-v]}else if(j==2)for(;T<C;T++)p[w+T]=p[F+T]+p[w+T-C];else if(j==3){for(;T<v;T++)p[w+T]=p[F+T]+(p[w+T-C]>>>1);for(;T<C;T++)p[w+T]=p[F+T]+(p[w+T-C]+p[w+T-v]>>>1)}else{for(;T<v;T++)p[w+T]=p[F+T]+u(0,p[w+T-C],0);for(;T<C;T++)p[w+T]=p[F+T]+u(p[w+T-v],p[w+T-C],p[w+T-v-C])}return p}function u(p,f,m){const b=p+f-m,y=b-p,v=b-f,C=b-m;return y*y<=v*v&&y*y<=C*C?p:v*v<=C*C?f:m}function h(p,f,m){m.width=e.readUint(p,f),f+=4,m.height=e.readUint(p,f),f+=4,m.depth=p[f],f++,m.ctype=p[f],f++,m.compress=p[f],f++,m.filter=p[f],f++,m.interlace=p[f],f++}function g(p,f,m,b,y,v,C,w,F){const j=Math.min(f,y),T=Math.min(m,v);let z=0,B=0;for(let $=0;$<T;$++)for(let P=0;P<j;P++)if(C>=0&&w>=0?(z=$*f+P<<2,B=(w+$)*y+C+P<<2):(z=(-w+$)*f-C+P<<2,B=$*y+P<<2),F==0)b[B]=p[z],b[B+1]=p[z+1],b[B+2]=p[z+2],b[B+3]=p[z+3];else if(F==1){var U=p[z+3]*.00392156862745098,D=p[z]*U,A=p[z+1]*U,H=p[z+2]*U,Y=b[B+3]*(1/255),_=b[B]*Y,L=b[B+1]*Y,k=b[B+2]*Y;const I=1-U,q=U+Y*I,G=q==0?0:1/q;b[B+3]=255*q,b[B+0]=(D+_*I)*G,b[B+1]=(A+L*I)*G,b[B+2]=(H+k*I)*G}else if(F==2)U=p[z+3],D=p[z],A=p[z+1],H=p[z+2],Y=b[B+3],_=b[B],L=b[B+1],k=b[B+2],U==Y&&D==_&&A==L&&H==k?(b[B]=0,b[B+1]=0,b[B+2]=0,b[B+3]=0):(b[B]=D,b[B+1]=A,b[B+2]=H,b[B+3]=U);else if(F==3){if(U=p[z+3],D=p[z],A=p[z+1],H=p[z+2],Y=b[B+3],_=b[B],L=b[B+1],k=b[B+2],U==Y&&D==_&&A==L&&H==k)continue;if(U<220&&Y>20)return!1}return!0}return{decode:function(f){const m=new Uint8Array(f);let b=8;const y=e,v=y.readUshort,C=y.readUint,w={tabs:{},frames:[]},F=new Uint8Array(m.length);let j,T=0,z=0;const B=[137,80,78,71,13,10,26,10];for(var U=0;U<8;U++)if(m[U]!=B[U])throw"The input is not a PNG file!";for(;b<m.length;){const $=y.readUint(m,b);b+=4;const P=y.readASCII(m,b,4);if(b+=4,P=="IHDR")h(m,b,w);else if(P=="iCCP"){for(var D=b;m[D]!=0;)D++;y.readASCII(m,b,D-b),m[D+1];const I=m.slice(D+2,b+$);let q=null;try{q=i(I)}catch{q=o(I)}w.tabs[P]=q}else if(P=="CgBI")w.tabs[P]=m.slice(b,b+4);else if(P=="IDAT"){for(U=0;U<$;U++)F[T+U]=m[b+U];T+=$}else if(P=="acTL")w.tabs[P]={num_frames:C(m,b),num_plays:C(m,b+4)},j=new Uint8Array(m.length);else if(P=="fcTL"){z!=0&&((k=w.frames[w.frames.length-1]).data=s(w,j.slice(0,z),k.rect.width,k.rect.height),z=0);const I={x:C(m,b+12),y:C(m,b+16),width:C(m,b+4),height:C(m,b+8)};let q=v(m,b+22);q=v(m,b+20)/(q==0?100:q);const G={rect:I,delay:Math.round(1e3*q),dispose:m[b+24],blend:m[b+25]};w.frames.push(G)}else if(P=="fdAT"){for(U=0;U<$-4;U++)j[z+U]=m[b+U+4];z+=$-4}else if(P=="pHYs")w.tabs[P]=[y.readUint(m,b),y.readUint(m,b+4),m[b+8]];else if(P=="cHRM")for(w.tabs[P]=[],U=0;U<8;U++)w.tabs[P].push(y.readUint(m,b+4*U));else if(P=="tEXt"||P=="zTXt"){w.tabs[P]==null&&(w.tabs[P]={});var A=y.nextZero(m,b),H=y.readASCII(m,b,A-b),Y=b+$-A-1;if(P=="tEXt")L=y.readASCII(m,A+1,Y);else{var _=i(m.slice(A+2,A+2+Y));L=y.readUTF8(_,0,_.length)}w.tabs[P][H]=L}else if(P=="iTXt"){w.tabs[P]==null&&(w.tabs[P]={}),A=0,D=b,A=y.nextZero(m,D),H=y.readASCII(m,D,A-D);const I=m[D=A+1];var L;m[D+1],D+=2,A=y.nextZero(m,D),y.readASCII(m,D,A-D),D=A+1,A=y.nextZero(m,D),y.readUTF8(m,D,A-D),Y=$-((D=A+1)-b),I==0?L=y.readUTF8(m,D,Y):(_=i(m.slice(D,D+Y)),L=y.readUTF8(_,0,_.length)),w.tabs[P][H]=L}else if(P=="PLTE")w.tabs[P]=y.readBytes(m,b,$);else if(P=="hIST"){const I=w.tabs.PLTE.length/3;for(w.tabs[P]=[],U=0;U<I;U++)w.tabs[P].push(v(m,b+2*U))}else if(P=="tRNS")w.ctype==3?w.tabs[P]=y.readBytes(m,b,$):w.ctype==0?w.tabs[P]=v(m,b):w.ctype==2&&(w.tabs[P]=[v(m,b),v(m,b+2),v(m,b+4)]);else if(P=="gAMA")w.tabs[P]=y.readUint(m,b)/1e5;else if(P=="sRGB")w.tabs[P]=m[b];else if(P=="bKGD")w.ctype==0||w.ctype==4?w.tabs[P]=[v(m,b)]:w.ctype==2||w.ctype==6?w.tabs[P]=[v(m,b),v(m,b+2),v(m,b+4)]:w.ctype==3&&(w.tabs[P]=m[b]);else if(P=="IEND")break;b+=$,y.readUint(m,b),b+=4}var k;return z!=0&&((k=w.frames[w.frames.length-1]).data=s(w,j.slice(0,z),k.rect.width,k.rect.height)),w.data=s(w,F,w.width,w.height),delete w.compress,delete w.interlace,delete w.filter,w},toRGBA8:function(f){const m=f.width,b=f.height;if(f.tabs.acTL==null)return[n(f.data,m,b,f).buffer];const y=[];f.frames[0].data==null&&(f.frames[0].data=f.data);const v=m*b*4,C=new Uint8Array(v),w=new Uint8Array(v),F=new Uint8Array(v);for(let T=0;T<f.frames.length;T++){const z=f.frames[T],B=z.rect.x,U=z.rect.y,D=z.rect.width,A=z.rect.height,H=n(z.data,D,A,f);if(T!=0)for(var j=0;j<v;j++)F[j]=C[j];if(z.blend==0?g(H,D,A,C,m,b,B,U,0):z.blend==1&&g(H,D,A,C,m,b,B,U,1),y.push(C.buffer.slice(0)),z.dispose!=0){if(z.dispose==1)g(w,D,A,C,m,b,B,U,0);else if(z.dispose==2)for(j=0;j<v;j++)C[j]=F[j]}}return y},_paeth:u,_copyTile:g,_bin:e}})();(function(){const{_copyTile:e}=vs,{_bin:n}=vs,s=vs._paeth;var i={table:(function(){const D=new Uint32Array(256);for(let A=0;A<256;A++){let H=A;for(let Y=0;Y<8;Y++)1&H?H=3988292384^H>>>1:H>>>=1;D[A]=H}return D})(),update(D,A,H,Y){for(let _=0;_<Y;_++)D=i.table[255&(D^A[H+_])]^D>>>8;return D},crc:(D,A,H)=>4294967295^i.update(4294967295,D,A,H)};function o(D,A,H,Y){A[H]+=D[0]*Y>>4,A[H+1]+=D[1]*Y>>4,A[H+2]+=D[2]*Y>>4,A[H+3]+=D[3]*Y>>4}function l(D){return Math.max(0,Math.min(255,D))}function c(D,A){const H=D[0]-A[0],Y=D[1]-A[1],_=D[2]-A[2],L=D[3]-A[3];return H*H+Y*Y+_*_+L*L}function u(D,A,H,Y,_,L,k){k==null&&(k=1);const $=Y.length,P=[];for(var I=0;I<$;I++){const V=Y[I];P.push([V>>>0&255,V>>>8&255,V>>>16&255,V>>>24&255])}for(I=0;I<$;I++){let V=4294967295;for(var q=0,G=0;G<$;G++){var Q=c(P[I],P[G]);G!=I&&Q<V&&(V=Q,q=G)}}const M=new Uint32Array(_.buffer),O=new Int16Array(A*H*4),ee=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(I=0;I<ee.length;I++)ee[I]=255*((ee[I]+.5)/16-.5);for(let V=0;V<H;V++)for(let Z=0;Z<A;Z++){var W;I=4*(V*A+Z),k!=2?W=[l(D[I]+O[I]),l(D[I+1]+O[I+1]),l(D[I+2]+O[I+2]),l(D[I+3]+O[I+3])]:(Q=ee[4*(3&V)+(3&Z)],W=[l(D[I]+Q),l(D[I+1]+Q),l(D[I+2]+Q),l(D[I+3]+Q)]),q=0;let ue=16777215;for(G=0;G<$;G++){const Te=c(W,P[G]);Te<ue&&(ue=Te,q=G)}const ce=P[q],me=[W[0]-ce[0],W[1]-ce[1],W[2]-ce[2],W[3]-ce[3]];k==1&&(Z!=A-1&&o(me,O,I+4,7),V!=H-1&&(Z!=0&&o(me,O,I+4*A-4,3),o(me,O,I+4*A,5),Z!=A-1&&o(me,O,I+4*A+4,1))),L[I>>2]=q,M[I>>2]=Y[q]}}function h(D,A,H,Y,_){_==null&&(_={});const{crc:L}=i,k=n.writeUint,$=n.writeUshort,P=n.writeASCII;let I=8;const q=D.frames.length>1;let G,Q=!1,M=33+(q?20:0);if(_.sRGB!=null&&(M+=13),_.pHYs!=null&&(M+=21),_.iCCP!=null&&(G=pako.deflate(_.iCCP),M+=21+G.length+4),D.ctype==3){for(var O=D.plte.length,ee=0;ee<O;ee++)D.plte[ee]>>>24!=255&&(Q=!0);M+=8+3*O+4+(Q?8+1*O+4:0)}for(var W=0;W<D.frames.length;W++)q&&(M+=38),M+=(ce=D.frames[W]).cimg.length+12,W!=0&&(M+=4);M+=12;const V=new Uint8Array(M),Z=[137,80,78,71,13,10,26,10];for(ee=0;ee<8;ee++)V[ee]=Z[ee];if(k(V,I,13),I+=4,P(V,I,"IHDR"),I+=4,k(V,I,A),I+=4,k(V,I,H),I+=4,V[I]=D.depth,I++,V[I]=D.ctype,I++,V[I]=0,I++,V[I]=0,I++,V[I]=0,I++,k(V,I,L(V,I-17,17)),I+=4,_.sRGB!=null&&(k(V,I,1),I+=4,P(V,I,"sRGB"),I+=4,V[I]=_.sRGB,I++,k(V,I,L(V,I-5,5)),I+=4),_.iCCP!=null){const me=13+G.length;k(V,I,me),I+=4,P(V,I,"iCCP"),I+=4,P(V,I,"ICC profile"),I+=11,I+=2,V.set(G,I),I+=G.length,k(V,I,L(V,I-(me+4),me+4)),I+=4}if(_.pHYs!=null&&(k(V,I,9),I+=4,P(V,I,"pHYs"),I+=4,k(V,I,_.pHYs[0]),I+=4,k(V,I,_.pHYs[1]),I+=4,V[I]=_.pHYs[2],I++,k(V,I,L(V,I-13,13)),I+=4),q&&(k(V,I,8),I+=4,P(V,I,"acTL"),I+=4,k(V,I,D.frames.length),I+=4,k(V,I,_.loop!=null?_.loop:0),I+=4,k(V,I,L(V,I-12,12)),I+=4),D.ctype==3){for(k(V,I,3*(O=D.plte.length)),I+=4,P(V,I,"PLTE"),I+=4,ee=0;ee<O;ee++){const me=3*ee,Te=D.plte[ee],ie=255&Te,Ce=Te>>>8&255,be=Te>>>16&255;V[I+me+0]=ie,V[I+me+1]=Ce,V[I+me+2]=be}if(I+=3*O,k(V,I,L(V,I-3*O-4,3*O+4)),I+=4,Q){for(k(V,I,O),I+=4,P(V,I,"tRNS"),I+=4,ee=0;ee<O;ee++)V[I+ee]=D.plte[ee]>>>24&255;I+=O,k(V,I,L(V,I-O-4,O+4)),I+=4}}let ue=0;for(W=0;W<D.frames.length;W++){var ce=D.frames[W];q&&(k(V,I,26),I+=4,P(V,I,"fcTL"),I+=4,k(V,I,ue++),I+=4,k(V,I,ce.rect.width),I+=4,k(V,I,ce.rect.height),I+=4,k(V,I,ce.rect.x),I+=4,k(V,I,ce.rect.y),I+=4,$(V,I,Y[W]),I+=2,$(V,I,1e3),I+=2,V[I]=ce.dispose,I++,V[I]=ce.blend,I++,k(V,I,L(V,I-30,30)),I+=4);const me=ce.cimg;k(V,I,(O=me.length)+(W==0?0:4)),I+=4;const Te=I;P(V,I,W==0?"IDAT":"fdAT"),I+=4,W!=0&&(k(V,I,ue++),I+=4),V.set(me,I),I+=O,k(V,I,L(V,Te,I-Te)),I+=4}return k(V,I,0),I+=4,P(V,I,"IEND"),I+=4,k(V,I,L(V,I-4,4)),I+=4,V.buffer}function g(D,A,H){for(let Y=0;Y<D.frames.length;Y++){const _=D.frames[Y];_.rect.width;const L=_.rect.height,k=new Uint8Array(L*_.bpl+L);_.cimg=b(_.img,L,_.bpp,_.bpl,k,A,H)}}function p(D,A,H,Y,_){const L=_[0],k=_[1],$=_[2],P=_[3],I=_[4],q=_[5];let G=6,Q=8,M=255;for(var O=0;O<D.length;O++){const te=new Uint8Array(D[O]);for(var ee=te.length,W=0;W<ee;W+=4)M&=te[W+3]}const V=M!=255,Z=(function(J,X,se,ye,ve,le){const ke=[];for(var Ne=0;Ne<J.length;Ne++){const ct=new Uint8Array(J[Ne]),it=new Uint32Array(ct.buffer);var _e;let bt=0,ot=0,kt=X,nn=se,Ft=ye?1:0;if(Ne!=0){const bn=le||ye||Ne==1||ke[Ne-2].dispose!=0?1:2;let un=0,Yt=1e9;for(let sn=0;sn<bn;sn++){var Re=new Uint8Array(J[Ne-1-sn]);const Qt=new Uint32Array(J[Ne-1-sn]);let jt=X,Wt=se,Ge=-1,St=-1;for(let wt=0;wt<se;wt++)for(let rn=0;rn<X;rn++)it[Be=wt*X+rn]!=Qt[Be]&&(rn<jt&&(jt=rn),rn>Ge&&(Ge=rn),wt<Wt&&(Wt=wt),wt>St&&(St=wt));Ge==-1&&(jt=Wt=Ge=St=0),ve&&((1&jt)==1&&jt--,(1&Wt)==1&&Wt--);const Nt=(Ge-jt+1)*(St-Wt+1);Nt<Yt&&(Yt=Nt,un=sn,bt=jt,ot=Wt,kt=Ge-jt+1,nn=St-Wt+1)}Re=new Uint8Array(J[Ne-1-un]),un==1&&(ke[Ne-1].dispose=2),_e=new Uint8Array(kt*nn*4),e(Re,X,se,_e,kt,nn,-bt,-ot,0),Ft=e(ct,X,se,_e,kt,nn,-bt,-ot,3)?1:0,Ft==1?m(ct,X,se,_e,{x:bt,y:ot,width:kt,height:nn}):e(ct,X,se,_e,kt,nn,-bt,-ot,0)}else _e=ct.slice(0);ke.push({rect:{x:bt,y:ot,width:kt,height:nn},img:_e,blend:Ft,dispose:0})}if(ye)for(Ne=0;Ne<ke.length;Ne++){if((mt=ke[Ne]).blend==1)continue;const ct=mt.rect,it=ke[Ne-1].rect,bt=Math.min(ct.x,it.x),ot=Math.min(ct.y,it.y),kt={x:bt,y:ot,width:Math.max(ct.x+ct.width,it.x+it.width)-bt,height:Math.max(ct.y+ct.height,it.y+it.height)-ot};ke[Ne-1].dispose=1,Ne-1!=0&&f(J,X,se,ke,Ne-1,kt,ve),f(J,X,se,ke,Ne,kt,ve)}let at=0;if(J.length!=1)for(var Be=0;Be<ke.length;Be++){var mt;at+=(mt=ke[Be]).rect.width*mt.rect.height}return ke})(D,A,H,L,k,$),ue={},ce=[],me=[];if(Y!=0){const te=[];for(W=0;W<Z.length;W++)te.push(Z[W].img.buffer);const J=(function(ve){let le=0;for(var ke=0;ke<ve.length;ke++)le+=ve[ke].byteLength;const Ne=new Uint8Array(le);let _e=0;for(ke=0;ke<ve.length;ke++){const Re=new Uint8Array(ve[ke]),at=Re.length;for(let Be=0;Be<at;Be+=4){let mt=Re[Be],ct=Re[Be+1],it=Re[Be+2];const bt=Re[Be+3];bt==0&&(mt=ct=it=0),Ne[_e+Be]=mt,Ne[_e+Be+1]=ct,Ne[_e+Be+2]=it,Ne[_e+Be+3]=bt}_e+=at}return Ne.buffer})(te),X=v(J,Y);for(W=0;W<X.plte.length;W++)ce.push(X.plte[W].est.rgba);let se=0;for(W=0;W<Z.length;W++){const ye=(ie=Z[W]).img.length;var Te=new Uint8Array(X.inds.buffer,se>>2,ye>>2);me.push(Te);const ve=new Uint8Array(X.abuf,se,ye);q&&u(ie.img,ie.rect.width,ie.rect.height,ce,ve,Te),ie.img.set(ve),se+=ye}}else for(O=0;O<Z.length;O++){var ie=Z[O];const te=new Uint32Array(ie.img.buffer);var Ce=ie.rect.width;for(ee=te.length,Te=new Uint8Array(ee),me.push(Te),W=0;W<ee;W++){const J=te[W];if(W!=0&&J==te[W-1])Te[W]=Te[W-1];else if(W>Ce&&J==te[W-Ce])Te[W]=Te[W-Ce];else{let X=ue[J];if(X==null&&(ue[J]=X=ce.length,ce.push(J),ce.length>=300))break;Te[W]=X}}}const be=ce.length;for(be<=256&&I==0&&(Q=be<=2?1:be<=4?2:be<=16?4:8,Q=Math.max(Q,P)),O=0;O<Z.length;O++){(ie=Z[O]).rect.x,ie.rect.y,Ce=ie.rect.width;const te=ie.rect.height;let J=ie.img;new Uint32Array(J.buffer);let X=4*Ce,se=4;if(be<=256&&I==0){X=Math.ceil(Q*Ce/8);var R=new Uint8Array(X*te);const ye=me[O];for(let ve=0;ve<te;ve++){W=ve*X;const le=ve*Ce;if(Q==8)for(var fe=0;fe<Ce;fe++)R[W+fe]=ye[le+fe];else if(Q==4)for(fe=0;fe<Ce;fe++)R[W+(fe>>1)]|=ye[le+fe]<<4-4*(1&fe);else if(Q==2)for(fe=0;fe<Ce;fe++)R[W+(fe>>2)]|=ye[le+fe]<<6-2*(3&fe);else if(Q==1)for(fe=0;fe<Ce;fe++)R[W+(fe>>3)]|=ye[le+fe]<<7-1*(7&fe)}J=R,G=3,se=1}else if(V==0&&Z.length==1){R=new Uint8Array(Ce*te*3);const ye=Ce*te;for(W=0;W<ye;W++){const ve=3*W,le=4*W;R[ve]=J[le],R[ve+1]=J[le+1],R[ve+2]=J[le+2]}J=R,G=2,se=3,X=3*Ce}ie.img=J,ie.bpl=X,ie.bpp=se}return{ctype:G,depth:Q,plte:ce,frames:Z}}function f(D,A,H,Y,_,L,k){const $=Uint8Array,P=Uint32Array,I=new $(D[_-1]),q=new P(D[_-1]),G=_+1<D.length?new $(D[_+1]):null,Q=new $(D[_]),M=new P(Q.buffer);let O=A,ee=H,W=-1,V=-1;for(let ue=0;ue<L.height;ue++)for(let ce=0;ce<L.width;ce++){const me=L.x+ce,Te=L.y+ue,ie=Te*A+me,Ce=M[ie];Ce==0||Y[_-1].dispose==0&&q[ie]==Ce&&(G==null||G[4*ie+3]!=0)||(me<O&&(O=me),me>W&&(W=me),Te<ee&&(ee=Te),Te>V&&(V=Te))}W==-1&&(O=ee=W=V=0),k&&((1&O)==1&&O--,(1&ee)==1&&ee--),L={x:O,y:ee,width:W-O+1,height:V-ee+1};const Z=Y[_];Z.rect=L,Z.blend=1,Z.img=new Uint8Array(L.width*L.height*4),Y[_-1].dispose==0?(e(I,A,H,Z.img,L.width,L.height,-L.x,-L.y,0),m(Q,A,H,Z.img,L)):e(Q,A,H,Z.img,L.width,L.height,-L.x,-L.y,0)}function m(D,A,H,Y,_){e(D,A,H,Y,_.width,_.height,-_.x,-_.y,2)}function b(D,A,H,Y,_,L,k){const $=[];let P,I=[0,1,2,3,4];L!=-1?I=[L]:(A*Y>5e5||H==1)&&(I=[0]),k&&(P={level:0});const q=r_;for(var G=0;G<I.length;G++){for(let O=0;O<A;O++)y(_,D,O,Y,H,I[G]);$.push(q.deflate(_,P))}let Q,M=1e9;for(G=0;G<$.length;G++)$[G].length<M&&(Q=G,M=$[G].length);return $[Q]}function y(D,A,H,Y,_,L){const k=H*Y;let $=k+H;if(D[$]=L,$++,L==0)if(Y<500)for(var P=0;P<Y;P++)D[$+P]=A[k+P];else D.set(new Uint8Array(A.buffer,k,Y),$);else if(L==1){for(P=0;P<_;P++)D[$+P]=A[k+P];for(P=_;P<Y;P++)D[$+P]=A[k+P]-A[k+P-_]+256&255}else if(H==0){for(P=0;P<_;P++)D[$+P]=A[k+P];if(L==2)for(P=_;P<Y;P++)D[$+P]=A[k+P];if(L==3)for(P=_;P<Y;P++)D[$+P]=A[k+P]-(A[k+P-_]>>1)+256&255;if(L==4)for(P=_;P<Y;P++)D[$+P]=A[k+P]-s(A[k+P-_],0,0)+256&255}else{if(L==2)for(P=0;P<Y;P++)D[$+P]=A[k+P]+256-A[k+P-Y]&255;if(L==3){for(P=0;P<_;P++)D[$+P]=A[k+P]+256-(A[k+P-Y]>>1)&255;for(P=_;P<Y;P++)D[$+P]=A[k+P]+256-(A[k+P-Y]+A[k+P-_]>>1)&255}if(L==4){for(P=0;P<_;P++)D[$+P]=A[k+P]+256-s(0,A[k+P-Y],0)&255;for(P=_;P<Y;P++)D[$+P]=A[k+P]+256-s(A[k+P-_],A[k+P-Y],A[k+P-_-Y])&255}}}function v(D,A){const H=new Uint8Array(D),Y=H.slice(0),_=new Uint32Array(Y.buffer),L=C(Y,A),k=L[0],$=L[1],P=H.length,I=new Uint8Array(P>>2);let q;if(H.length<2e7)for(var G=0;G<P;G+=4)q=w(k,Q=H[G]*(1/255),M=H[G+1]*(1/255),O=H[G+2]*(1/255),ee=H[G+3]*(1/255)),I[G>>2]=q.ind,_[G>>2]=q.est.rgba;else for(G=0;G<P;G+=4){var Q=H[G]*.00392156862745098,M=H[G+1]*(1/255),O=H[G+2]*(1/255),ee=H[G+3]*(1/255);for(q=k;q.left;)q=F(q.est,Q,M,O,ee)<=0?q.left:q.right;I[G>>2]=q.ind,_[G>>2]=q.est.rgba}return{abuf:Y.buffer,inds:I,plte:$}}function C(D,A,H){H==null&&(H=1e-4);const Y=new Uint32Array(D.buffer),_={i0:0,i1:D.length,bst:null,est:null,tdst:0,left:null,right:null};_.bst=z(D,_.i0,_.i1),_.est=B(_.bst);const L=[_];for(;L.length<A;){let $=0,P=0;for(var k=0;k<L.length;k++)L[k].est.L>$&&($=L[k].est.L,P=k);if($<H)break;const I=L[P],q=j(D,Y,I.i0,I.i1,I.est.e,I.est.eMq255);if(I.i0>=q||I.i1<=q){I.est.L=0;continue}const G={i0:I.i0,i1:q,bst:null,est:null,tdst:0,left:null,right:null};G.bst=z(D,G.i0,G.i1),G.est=B(G.bst);const Q={i0:q,i1:I.i1,bst:null,est:null,tdst:0,left:null,right:null};for(Q.bst={R:[],m:[],N:I.bst.N-G.bst.N},k=0;k<16;k++)Q.bst.R[k]=I.bst.R[k]-G.bst.R[k];for(k=0;k<4;k++)Q.bst.m[k]=I.bst.m[k]-G.bst.m[k];Q.est=B(Q.bst),I.left=G,I.right=Q,L[P]=G,L.push(Q)}for(L.sort((($,P)=>P.bst.N-$.bst.N)),k=0;k<L.length;k++)L[k].ind=k;return[_,L]}function w(D,A,H,Y,_){if(D.left==null)return D.tdst=(function(G,Q,M,O,ee){const W=Q-G[0],V=M-G[1],Z=O-G[2],ue=ee-G[3];return W*W+V*V+Z*Z+ue*ue})(D.est.q,A,H,Y,_),D;const L=F(D.est,A,H,Y,_);let k=D.left,$=D.right;L>0&&(k=D.right,$=D.left);const P=w(k,A,H,Y,_);if(P.tdst<=L*L)return P;const I=w($,A,H,Y,_);return I.tdst<P.tdst?I:P}function F(D,A,H,Y,_){const{e:L}=D;return L[0]*A+L[1]*H+L[2]*Y+L[3]*_-D.eMq}function j(D,A,H,Y,_,L){for(Y-=4;H<Y;){for(;T(D,H,_)<=L;)H+=4;for(;T(D,Y,_)>L;)Y-=4;if(H>=Y)break;const k=A[H>>2];A[H>>2]=A[Y>>2],A[Y>>2]=k,H+=4,Y-=4}for(;T(D,H,_)>L;)H-=4;return H+4}function T(D,A,H){return D[A]*H[0]+D[A+1]*H[1]+D[A+2]*H[2]+D[A+3]*H[3]}function z(D,A,H){const Y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],_=[0,0,0,0],L=H-A>>2;for(let k=A;k<H;k+=4){const $=D[k]*.00392156862745098,P=D[k+1]*(1/255),I=D[k+2]*(1/255),q=D[k+3]*(1/255);_[0]+=$,_[1]+=P,_[2]+=I,_[3]+=q,Y[0]+=$*$,Y[1]+=$*P,Y[2]+=$*I,Y[3]+=$*q,Y[5]+=P*P,Y[6]+=P*I,Y[7]+=P*q,Y[10]+=I*I,Y[11]+=I*q,Y[15]+=q*q}return Y[4]=Y[1],Y[8]=Y[2],Y[9]=Y[6],Y[12]=Y[3],Y[13]=Y[7],Y[14]=Y[11],{R:Y,m:_,N:L}}function B(D){const{R:A}=D,{m:H}=D,{N:Y}=D,_=H[0],L=H[1],k=H[2],$=H[3],P=Y==0?0:1/Y,I=[A[0]-_*_*P,A[1]-_*L*P,A[2]-_*k*P,A[3]-_*$*P,A[4]-L*_*P,A[5]-L*L*P,A[6]-L*k*P,A[7]-L*$*P,A[8]-k*_*P,A[9]-k*L*P,A[10]-k*k*P,A[11]-k*$*P,A[12]-$*_*P,A[13]-$*L*P,A[14]-$*k*P,A[15]-$*$*P],q=I,G=U;let Q=[Math.random(),Math.random(),Math.random(),Math.random()],M=0,O=0;if(Y!=0)for(let W=0;W<16&&(Q=G.multVec(q,Q),O=Math.sqrt(G.dot(Q,Q)),Q=G.sml(1/O,Q),!(W!=0&&Math.abs(O-M)<1e-9));W++)M=O;const ee=[_*P,L*P,k*P,$*P];return{Cov:I,q:ee,e:Q,L:M,eMq255:G.dot(G.sml(255,ee),Q),eMq:G.dot(Q,ee),rgba:(Math.round(255*ee[3])<<24|Math.round(255*ee[2])<<16|Math.round(255*ee[1])<<8|Math.round(255*ee[0])<<0)>>>0}}var U={multVec:(D,A)=>[D[0]*A[0]+D[1]*A[1]+D[2]*A[2]+D[3]*A[3],D[4]*A[0]+D[5]*A[1]+D[6]*A[2]+D[7]*A[3],D[8]*A[0]+D[9]*A[1]+D[10]*A[2]+D[11]*A[3],D[12]*A[0]+D[13]*A[1]+D[14]*A[2]+D[15]*A[3]],dot:(D,A)=>D[0]*A[0]+D[1]*A[1]+D[2]*A[2]+D[3]*A[3],sml:(D,A)=>[D*A[0],D*A[1],D*A[2],D*A[3]]};vs.encode=function(A,H,Y,_,L,k,$){_==null&&(_=0),$==null&&($=!1);const P=p(A,H,Y,_,[!1,!1,!1,0,$,!1]);return g(P,-1),h(P,H,Y,L,k)},vs.encodeLL=function(A,H,Y,_,L,k,$,P){const I={ctype:0+(_==1?0:2)+(L==0?0:4),depth:k,frames:[]},q=(_+L)*k,G=q*H;for(let Q=0;Q<A.length;Q++)I.frames.push({rect:{x:0,y:0,width:H,height:Y},img:new Uint8Array(A[Q]),blend:0,dispose:1,bpp:Math.ceil(q/8),bpl:Math.ceil(G/8)});return g(I,0,!0),h(I,H,Y,$,P)},vs.encode.compress=p,vs.encode.dither=u,vs.quantize=v,vs.quantize.getKDtree=C,vs.quantize.getNearest=w})();const Cb={toArrayBuffer(e,n){const s=e.width,i=e.height,o=s<<2,l=e.getContext("2d").getImageData(0,0,s,i),c=new Uint32Array(l.data.buffer),u=(32*s+31)/32<<2,h=u*i,g=122+h,p=new ArrayBuffer(g),f=new DataView(p),m=1<<20;let b,y,v,C,w=m,F=0,j=0,T=0;function z(D){f.setUint16(j,D,!0),j+=2}function B(D){f.setUint32(j,D,!0),j+=4}function U(D){j+=D}z(19778),B(g),U(4),B(122),B(108),B(s),B(-i>>>0),z(1),z(32),B(3),B(h),B(2835),B(2835),U(8),B(16711680),B(65280),B(255),B(4278190080),B(1466527264),(function D(){for(;F<i&&w>0;){for(C=122+F*u,b=0;b<o;)w--,y=c[T++],v=y>>>24,f.setUint32(C+b,y<<8|v),b+=4;F++}T<c.length?(w=m,setTimeout(D,Cb._dly)):n(p)})()},toBlob(e,n){this.toArrayBuffer(e,(s=>{n(new Blob([s],{type:"image/bmp"}))}))},_dly:9};var On={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},a_={[On.CHROME]:16384,[On.FIREFOX]:11180,[On.DESKTOP_SAFARI]:16384,[On.IE]:8192,[On.IOS]:4096,[On.ETC]:8192};const Hf=typeof window<"u",jb=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Pl=Hf&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),i_=(Hf||jb)&&(Pl&&Pl.getOriginalSymbol(window,"File")||typeof File<"u"&&File),Nb=(Hf||jb)&&(Pl&&Pl.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Uf(e,n,s=Date.now()){return new Promise((i=>{const o=e.split(","),l=o[0].match(/:(.*?);/)[1],c=globalThis.atob(o[1]);let u=c.length;const h=new Uint8Array(u);for(;u--;)h[u]=c.charCodeAt(u);const g=new Blob([h],{type:l});g.name=n,g.lastModified=s,i(g)}))}function _b(e){return new Promise(((n,s)=>{const i=new Nb;i.onload=()=>n(i.result),i.onerror=o=>s(o),i.readAsDataURL(e)}))}function Eb(e){return new Promise(((n,s)=>{const i=new Image;i.onload=()=>n(i),i.onerror=o=>s(o),i.src=e}))}function Zr(){if(Zr.cachedResult!==void 0)return Zr.cachedResult;let e=On.ETC;const{userAgent:n}=navigator;return/Chrom(e|ium)/i.test(n)?e=On.CHROME:/iP(ad|od|hone)/i.test(n)&&/WebKit/i.test(n)?e=On.IOS:/Safari/i.test(n)?e=On.DESKTOP_SAFARI:/Firefox/i.test(n)?e=On.FIREFOX:(/MSIE/i.test(n)||document.documentMode)&&(e=On.IE),Zr.cachedResult=e,Zr.cachedResult}function Ab(e,n){const s=Zr(),i=a_[s];let o=e,l=n,c=o*l;const u=o>l?l/o:o/l;for(;c>i*i;){const h=(i+o)/2,g=(i+l)/2;h<g?(l=g,o=g*u):(l=h*u,o=h),c=o*l}return{width:o,height:l}}function ql(e,n){let s,i;try{if(s=new OffscreenCanvas(e,n),i=s.getContext("2d"),i===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{s=document.createElement("canvas"),i=s.getContext("2d")}return s.width=e,s.height=n,[s,i]}function Tb(e,n){const{width:s,height:i}=Ab(e.width,e.height),[o,l]=ql(s,i);return n&&/jpe?g/.test(n)&&(l.fillStyle="white",l.fillRect(0,0,o.width,o.height)),l.drawImage(e,0,0,o.width,o.height),o}function Sl(){return Sl.cachedResult!==void 0||(Sl.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Sl.cachedResult}function Rl(e,n={}){return new Promise((function(s,i){let o,l;var c=function(){try{return l=Tb(o,n.fileType||e.type),s([o,l])}catch(h){return i(h)}},u=function(h){try{var g=function(p){try{throw p}catch(f){return i(f)}};try{let p;return _b(e).then((function(f){try{return p=f,Eb(p).then((function(m){try{return o=m,(function(){try{return c()}catch(b){return i(b)}})()}catch(b){return g(b)}}),g)}catch(m){return g(m)}}),g)}catch(p){g(p)}}catch(p){return i(p)}};try{if(Sl()||[On.DESKTOP_SAFARI,On.MOBILE_SAFARI].includes(Zr()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then((function(h){try{return o=h,c()}catch{return u()}}),u)}catch{u()}}))}function Bl(e,n,s,i,o=1){return new Promise((function(l,c){let u;if(n==="image/png"){let f,m,b;return f=e.getContext("2d"),{data:m}=f.getImageData(0,0,e.width,e.height),b=vs.encode([m.buffer],e.width,e.height,4096*o),u=new Blob([b],{type:n}),u.name=s,u.lastModified=i,h.call(this)}{let f=function(){return h.call(this)};var g=f;if(n==="image/bmp")return new Promise((m=>Cb.toBlob(e,m))).then(function(m){try{return u=m,u.name=s,u.lastModified=i,f.call(this)}catch(b){return c(b)}}.bind(this),c);{let m=function(){return f.call(this)};var p=m;if(typeof OffscreenCanvas=="function"&&e instanceof OffscreenCanvas)return e.convertToBlob({type:n,quality:o}).then(function(b){try{return u=b,u.name=s,u.lastModified=i,m.call(this)}catch(y){return c(y)}}.bind(this),c);{let b;return b=e.toDataURL(n,o),Uf(b,s,i).then(function(y){try{return u=y,m.call(this)}catch(v){return c(v)}}.bind(this),c)}}}function h(){return l(u)}}))}function Ts(e){e.width=0,e.height=0}function Oa(){return new Promise((function(e,n){let s,i,o,l;return Oa.cachedResult!==void 0?e(Oa.cachedResult):Uf("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(c){try{return s=c,Rl(s).then((function(u){try{return i=u[1],Bl(i,s.type,s.name,s.lastModified).then((function(h){try{return o=h,Ts(i),Rl(o).then((function(g){try{return l=g[0],Oa.cachedResult=l.width===1&&l.height===2,e(Oa.cachedResult)}catch(p){return n(p)}}),n)}catch(g){return n(g)}}),n)}catch(h){return n(h)}}),n)}catch(u){return n(u)}}),n)}))}function Db(e){return new Promise(((n,s)=>{const i=new Nb;i.onload=o=>{const l=new DataView(o.target.result);if(l.getUint16(0,!1)!=65496)return n(-2);const c=l.byteLength;let u=2;for(;u<c;){if(l.getUint16(u+2,!1)<=8)return n(-1);const h=l.getUint16(u,!1);if(u+=2,h==65505){if(l.getUint32(u+=2,!1)!=1165519206)return n(-1);const g=l.getUint16(u+=6,!1)==18761;u+=l.getUint32(u+4,g);const p=l.getUint16(u,g);u+=2;for(let f=0;f<p;f++)if(l.getUint16(u+12*f,g)==274)return n(l.getUint16(u+12*f+8,g))}else{if((65280&h)!=65280)break;u+=l.getUint16(u,!1)}}return n(-1)},i.onerror=o=>s(o),i.readAsArrayBuffer(e)}))}function Fb(e,n){const{width:s}=e,{height:i}=e,{maxWidthOrHeight:o}=n;let l,c=e;return isFinite(o)&&(s>o||i>o)&&([c,l]=ql(s,i),s>i?(c.width=o,c.height=i/s*o):(c.width=s/i*o,c.height=o),l.drawImage(e,0,0,c.width,c.height),Ts(e)),c}function Mb(e,n){const{width:s}=e,{height:i}=e,[o,l]=ql(s,i);switch(n>4&&n<9?(o.width=i,o.height=s):(o.width=s,o.height=i),n){case 2:l.transform(-1,0,0,1,s,0);break;case 3:l.transform(-1,0,0,-1,s,i);break;case 4:l.transform(1,0,0,-1,0,i);break;case 5:l.transform(0,1,1,0,0,0);break;case 6:l.transform(0,1,-1,0,i,0);break;case 7:l.transform(0,-1,-1,0,i,s);break;case 8:l.transform(0,-1,1,0,0,s)}return l.drawImage(e,0,0,s,i),Ts(e),o}function ag(e,n,s=0){return new Promise((function(i,o){let l,c,u,h,g,p,f,m,b,y,v,C,w,F,j,T,z,B,U,D;function A(Y=5){if(n.signal&&n.signal.aborted)throw n.signal.reason;l+=Y,n.onProgress(Math.min(l,100))}function H(Y){if(n.signal&&n.signal.aborted)throw n.signal.reason;l=Math.min(Math.max(Y,l),100),n.onProgress(l)}return l=s,c=n.maxIteration||10,u=1024*n.maxSizeMB*1024,A(),Rl(e,n).then(function(Y){try{return[,h]=Y,A(),g=Fb(h,n),A(),new Promise((function(_,L){var k;if(!(k=n.exifOrientation))return Db(e).then(function(P){try{return k=P,$.call(this)}catch(I){return L(I)}}.bind(this),L);function $(){return _(k)}return $.call(this)})).then(function(_){try{return p=_,A(),Oa().then(function(L){try{return f=L?g:Mb(g,p),A(),m=n.initialQuality||1,b=n.fileType||e.type,Bl(f,b,e.name,e.lastModified,m).then(function(k){try{{let q=function(){if(c--&&(j>u||j>w)){let Q,M;return Q=D?.95*U.width:U.width,M=D?.95*U.height:U.height,[z,B]=ql(Q,M),B.drawImage(U,0,0,Q,M),m*=b==="image/png"?.85:.95,Bl(z,b,e.name,e.lastModified,m).then((function(O){try{return T=O,Ts(U),U=z,j=T.size,H(Math.min(99,Math.floor((F-j)/(F-u)*100))),q}catch(ee){return o(ee)}}),o)}return[1]},G=function(){return Ts(U),Ts(z),Ts(g),Ts(f),Ts(h),H(100),i(T)};var P=q,I=G;if(y=k,A(),v=y.size>u,C=y.size>e.size,!v&&!C)return H(100),i(y);var $;return w=e.size,F=y.size,j=F,U=f,D=!n.alwaysKeepResolution&&v,($=function(Q){for(;Q;){if(Q.then)return void Q.then($,o);try{if(Q.pop){if(Q.length)return Q.pop()?G.call(this):Q;Q=q}else Q=Q.call(this)}catch(M){return o(M)}}}.bind(this))(q)}}catch(q){return o(q)}}.bind(this),o)}catch(k){return o(k)}}.bind(this),o)}catch(L){return o(L)}}.bind(this),o)}catch(_){return o(_)}}.bind(this),o)}))}const o_=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let ou;function l_(e,n){return new Promise(((s,i)=>{ou||(ou=(function(c){const u=[];return u.push(c),URL.createObjectURL(new Blob(u))})(o_));const o=new Worker(ou);o.addEventListener("message",(function(c){if(n.signal&&n.signal.aborted)o.terminate();else if(c.data.progress===void 0){if(c.data.error)return i(new Error(c.data.error)),void o.terminate();s(c.data.file),o.terminate()}else n.onProgress(c.data.progress)})),o.addEventListener("error",i),n.signal&&n.signal.addEventListener("abort",(()=>{i(n.signal.reason),o.terminate()})),o.postMessage({file:e,imageCompressionLibUrl:n.libURL,options:{...n,onProgress:void 0,signal:void 0}})}))}function Sn(e,n){return new Promise((function(s,i){let o,l,c,u,h,g;if(o={...n},c=0,{onProgress:u}=o,o.maxSizeMB=o.maxSizeMB||Number.POSITIVE_INFINITY,h=typeof o.useWebWorker!="boolean"||o.useWebWorker,delete o.useWebWorker,o.onProgress=b=>{c=b,typeof u=="function"&&u(c)},!(e instanceof Blob||e instanceof i_))return i(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return i(new Error("The file given is not an image"));if(g=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!h||typeof Worker!="function"||g)return ag(e,o).then(function(b){try{return l=b,m.call(this)}catch(y){return i(y)}}.bind(this),i);var p=function(){try{return m.call(this)}catch(b){return i(b)}}.bind(this),f=function(b){try{return ag(e,o).then((function(y){try{return l=y,p()}catch(v){return i(v)}}),i)}catch(y){return i(y)}};try{return o.libURL=o.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",l_(e,o).then((function(b){try{return l=b,p()}catch{return f()}}),f)}catch{f()}function m(){try{l.name=e.name,l.lastModified=e.lastModified}catch{}try{o.preserveExif&&e.type==="image/jpeg"&&(!o.fileType||o.fileType&&o.fileType===e.type)&&(l=Sb(e,l))}catch{}return s(l)}}))}Sn.getDataUrlFromFile=_b,Sn.getFilefromDataUrl=Uf,Sn.loadImage=Eb,Sn.drawImageInCanvas=Tb,Sn.drawFileInCanvas=Rl,Sn.canvasToFile=Bl,Sn.getExifOrientation=Db,Sn.handleMaxWidthOrHeight=Fb,Sn.followExifOrientation=Mb,Sn.cleanupCanvasMemory=Ts,Sn.isAutoOrientationInBrowser=Oa,Sn.approximateBelowMaximumCanvasSizeOfBrowser=Ab,Sn.copyExifWithoutOrientation=Sb,Sn.getBrowserName=Zr,Sn.version="2.0.2";const ig=[{id:"desktop1-chat",name:"",location:""},{id:"desktop1-forum",name:"",location:""},{id:"desktop1-memory",name:"",location:""},{id:"desktop1-transfer",name:"",location:""},{id:"desktop2-shop",name:"",location:""},{id:"desktop2-game",name:"",location:""},{id:"desktop2-schedule",name:"",location:""},{id:"desktop2-health",name:"",location:""},{id:"bottom-organization",name:"",location:""},{id:"bottom-worldbook",name:"",location:""},{id:"bottom-settings",name:"",location:""}];function c_({onBack:e}){const[n,s]=N.useState(null),[i,o]=N.useState(!1),[l,c]=N.useState("light"),[u,h]=N.useState({}),[g,p]=N.useState(!1),f=N.useRef(null),m=N.useRef({});N.useEffect(()=>{(async()=>{try{const z=await he.get(re.MISC,"desktop_wallpaper"),B=await he.get(re.APPEARANCE,"desktop_color_mode")||"light";if(z)if(z.startsWith("data:"))s(z);else{const D=await Ct(z);s(D)}c(B);const U={};for(const D of ig){const A=await Ct(`system-icon-${D.id}`);A&&(U[D.id]=A)}h(U)}catch(z){console.error("Failed to load settings:",z)}})()},[]);const b=async T=>{c(T),await he.set(re.APPEARANCE,"desktop_color_mode",T),window.dispatchEvent(new CustomEvent("colorModeChange",{detail:T}))},y=()=>{f.current?.click()},v=async T=>{const z=T.target.files?.[0];if(z)try{const B=await cs("desktop-wallpaper",z);s(B),await he.set(re.MISC,"desktop_wallpaper","desktop-wallpaper"),o(!0),setTimeout(()=>o(!1),2e3),window.dispatchEvent(new CustomEvent("wallpaperChange",{detail:B}))}catch(B){console.error("Failed to save wallpaper:",B)}},C=async T=>{T.stopPropagation(),s(null),await he.delete(re.MISC,"desktop_wallpaper"),await ea("desktop-wallpaper"),o(!0),setTimeout(()=>o(!1),2e3),window.dispatchEvent(new CustomEvent("wallpaperChange",{detail:null}))},w=T=>{m.current[T]?.click()},F=async(T,z)=>{const B=z.target.files?.[0];if(B)try{const D=await Sn(B,{maxSizeMB:.5,maxWidthOrHeight:512,useWebWorker:!0}),A=await cs(`system-icon-${T}`,D);h(H=>({...H,[T]:A})),p(!0),setTimeout(()=>p(!1),2e3),window.dispatchEvent(new CustomEvent("iconChange",{detail:{iconId:T,url:A}}))}catch(U){console.error("Failed to save icon:",U)}},j=async(T,z)=>{z.stopPropagation();try{await ea(`system-icon-${T}`),h(B=>({...B,[T]:null})),p(!0),setTimeout(()=>p(!1),2e3),window.dispatchEvent(new CustomEvent("iconChange",{detail:{iconId:T,url:null}}))}catch(B){console.error("Failed to reset icon:",B)}};return r.jsxs(Gl,{title:"",onBack:e,children:[r.jsxs("div",{className:"space-y-6 text-slate-800",children:[r.jsx(ze,{children:(i||g)&&r.jsx(je.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"fixed top-24 left-0 right-0 flex justify-center z-[60] pointer-events-none px-4",children:r.jsxs("div",{className:"bg-slate-800 text-white px-6 py-3 border border-slate-700 shadow-xl flex items-center gap-3 backdrop-blur-md",children:[r.jsx(Dt,{className:"w-4 h-4 text-green-400",strokeWidth:3}),r.jsx("span",{className:"text-xs font-bold tracking-wider uppercase",children:i?"WALLPAPER_UPDATED":"ICON_CACHE_REFRESHED"})]})})}),r.jsxs("section",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:[r.jsx(BN,{className:"w-3 h-3"})," "]}),r.jsx("div",{className:"grid grid-cols-2 gap-3 bg-white p-2 border border-slate-200 shadow-sm",children:[{label:" (LIGHT)",value:"light",icon:k4},{label:" (DARK)",value:"dark",icon:mb}].map(T=>r.jsxs("button",{onClick:()=>b(T.value),className:`flex items-center justify-center gap-2 py-3 border transition-all duration-200 ${l===T.value?"bg-slate-800 text-white border-slate-800 shadow-md":"bg-transparent text-slate-400 border-transparent active:bg-slate-50 active:text-slate-600 hover:bg-slate-50 hover:text-slate-600"}`,children:[r.jsx(T.icon,{className:"w-4 h-4",strokeWidth:1.5}),r.jsx("span",{className:"text-xs font-bold tracking-wide",children:T.label})]},T.value))})]}),r.jsxs("section",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:[r.jsx(o4,{className:"w-3 h-3"})," "]}),r.jsxs("div",{className:"bg-white p-4 border border-slate-200 shadow-sm relative",children:[r.jsx("div",{className:"absolute top-0 right-0 w-4 h-4 border-t-2 border-r-2 border-slate-200"}),r.jsxs("div",{className:"grid grid-cols-[80px_1fr] gap-5",children:[r.jsxs("div",{onClick:y,className:"w-[80px] aspect-[9/16] bg-slate-100 border border-slate-300 relative group cursor-pointer overflow-hidden",children:[n?r.jsx("img",{src:n,alt:"Wallpaper",className:"w-full h-full object-cover opacity-90 group-active:opacity-100 group-hover:opacity-100 transition-opacity"}):r.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-300",children:r.jsx(Xr,{className:"w-5 h-5",strokeWidth:1})}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-active:opacity-100 group-hover:opacity-100 bg-slate-900/30 transition-opacity",children:r.jsx(zf,{className:"w-4 h-4 text-white"})})]}),r.jsxs("div",{className:"flex flex-col justify-between py-1",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-bold text-slate-800 uppercase tracking-wider mb-1",children:""}),r.jsx("div",{className:"text-[10px] text-slate-400 font-mono",children:"RES: AUTO-FIT"}),r.jsx("div",{className:"text-[10px] text-slate-400 font-mono",children:"FMT: JPG/PNG"})]}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[r.jsx("button",{onClick:y,className:"px-4 py-2 border border-blue-200 bg-blue-50 text-blue-600 text-[10px] font-bold active:bg-blue-100 hover:bg-blue-100 transition-colors uppercase tracking-wider",children:""}),n&&r.jsx("button",{onClick:C,className:"px-3 py-2 border border-red-200 bg-red-50 text-red-500 text-[10px] font-bold active:bg-red-100 hover:bg-red-100 transition-colors",children:r.jsx(ht,{className:"w-3 h-3"})})]})]})]})]})]}),r.jsxs("section",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:[r.jsx(pb,{className:"w-3 h-3"})," "]}),r.jsx("div",{className:"space-y-2",children:ig.map((T,z)=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-white border border-slate-200 active:border-slate-400 hover:border-slate-400 transition-colors group",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{onClick:()=>w(T.id),className:"w-10 h-10 bg-slate-50 border border-slate-200 cursor-pointer overflow-hidden relative active:border-slate-400 hover:border-slate-400 transition-colors",children:u[T.id]?r.jsx("img",{src:u[T.id],alt:T.name,className:"w-full h-full object-cover opacity-90 group-active:opacity-100 group-hover:opacity-100 transition-opacity"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300",children:r.jsx(uN,{className:"w-4 h-4"})})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-bold text-slate-700 uppercase tracking-wide",children:T.name}),r.jsx("div",{className:"text-[9px] text-slate-400 font-mono",children:T.location})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>w(T.id),className:"p-1.5 text-slate-400 active:text-slate-800 active:bg-slate-100 hover:text-slate-800 hover:bg-slate-100 transition-colors",children:r.jsx(Wj,{className:"w-4 h-4",strokeWidth:1.5})}),u[T.id]&&r.jsx("button",{onClick:B=>j(T.id,B),className:"p-1.5 text-slate-300 active:text-red-500 active:bg-red-50 hover:text-red-500 hover:bg-red-50 transition-colors",children:r.jsx(ht,{className:"w-4 h-4",strokeWidth:1.5})})]}),r.jsx("input",{ref:B=>m.current[T.id]=B,type:"file",accept:"image/*",onChange:B=>F(T.id,B),className:"hidden"})]},T.id))})]})]}),r.jsx("input",{ref:f,type:"file",accept:"image/*",onChange:v,className:"hidden"})]})}function ml(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var lu={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var og;function d_(){return og||(og=1,(function(e,n){(function(s){e.exports=s()})(function(){return(function s(i,o,l){function c(g,p){if(!o[g]){if(!i[g]){var f=typeof ml=="function"&&ml;if(!p&&f)return f(g,!0);if(u)return u(g,!0);var m=new Error("Cannot find module '"+g+"'");throw m.code="MODULE_NOT_FOUND",m}var b=o[g]={exports:{}};i[g][0].call(b.exports,function(y){var v=i[g][1][y];return c(v||y)},b,b.exports,s,i,o,l)}return o[g].exports}for(var u=typeof ml=="function"&&ml,h=0;h<l.length;h++)c(l[h]);return c})({1:[function(s,i,o){var l=s("./utils"),c=s("./support"),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.encode=function(h){for(var g,p,f,m,b,y,v,C=[],w=0,F=h.length,j=F,T=l.getTypeOf(h)!=="string";w<h.length;)j=F-w,f=T?(g=h[w++],p=w<F?h[w++]:0,w<F?h[w++]:0):(g=h.charCodeAt(w++),p=w<F?h.charCodeAt(w++):0,w<F?h.charCodeAt(w++):0),m=g>>2,b=(3&g)<<4|p>>4,y=1<j?(15&p)<<2|f>>6:64,v=2<j?63&f:64,C.push(u.charAt(m)+u.charAt(b)+u.charAt(y)+u.charAt(v));return C.join("")},o.decode=function(h){var g,p,f,m,b,y,v=0,C=0,w="data:";if(h.substr(0,w.length)===w)throw new Error("Invalid base64 input, it looks like a data url.");var F,j=3*(h=h.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(h.charAt(h.length-1)===u.charAt(64)&&j--,h.charAt(h.length-2)===u.charAt(64)&&j--,j%1!=0)throw new Error("Invalid base64 input, bad content length.");for(F=c.uint8array?new Uint8Array(0|j):new Array(0|j);v<h.length;)g=u.indexOf(h.charAt(v++))<<2|(m=u.indexOf(h.charAt(v++)))>>4,p=(15&m)<<4|(b=u.indexOf(h.charAt(v++)))>>2,f=(3&b)<<6|(y=u.indexOf(h.charAt(v++))),F[C++]=g,b!==64&&(F[C++]=p),y!==64&&(F[C++]=f);return F}},{"./support":30,"./utils":32}],2:[function(s,i,o){var l=s("./external"),c=s("./stream/DataWorker"),u=s("./stream/Crc32Probe"),h=s("./stream/DataLengthProbe");function g(p,f,m,b,y){this.compressedSize=p,this.uncompressedSize=f,this.crc32=m,this.compression=b,this.compressedContent=y}g.prototype={getContentWorker:function(){var p=new c(l.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new h("data_length")),f=this;return p.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),p},getCompressedWorker:function(){return new c(l.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},g.createWorkerFrom=function(p,f,m){return p.pipe(new u).pipe(new h("uncompressedSize")).pipe(f.compressWorker(m)).pipe(new h("compressedSize")).withStreamInfo("compression",f)},i.exports=g},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(s,i,o){var l=s("./stream/GenericWorker");o.STORE={magic:"\0\0",compressWorker:function(){return new l("STORE compression")},uncompressWorker:function(){return new l("STORE decompression")}},o.DEFLATE=s("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(s,i,o){var l=s("./utils"),c=(function(){for(var u,h=[],g=0;g<256;g++){u=g;for(var p=0;p<8;p++)u=1&u?3988292384^u>>>1:u>>>1;h[g]=u}return h})();i.exports=function(u,h){return u!==void 0&&u.length?l.getTypeOf(u)!=="string"?(function(g,p,f,m){var b=c,y=m+f;g^=-1;for(var v=m;v<y;v++)g=g>>>8^b[255&(g^p[v])];return-1^g})(0|h,u,u.length,0):(function(g,p,f,m){var b=c,y=m+f;g^=-1;for(var v=m;v<y;v++)g=g>>>8^b[255&(g^p.charCodeAt(v))];return-1^g})(0|h,u,u.length,0):0}},{"./utils":32}],5:[function(s,i,o){o.base64=!1,o.binary=!1,o.dir=!1,o.createFolders=!0,o.date=null,o.compression=null,o.compressionOptions=null,o.comment=null,o.unixPermissions=null,o.dosPermissions=null},{}],6:[function(s,i,o){var l=null;l=typeof Promise<"u"?Promise:s("lie"),i.exports={Promise:l}},{lie:37}],7:[function(s,i,o){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",c=s("pako"),u=s("./utils"),h=s("./stream/GenericWorker"),g=l?"uint8array":"array";function p(f,m){h.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=m,this.meta={}}o.magic="\b\0",u.inherits(p,h),p.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(u.transformTo(g,f.data),!1)},p.prototype.flush=function(){h.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},p.prototype.cleanUp=function(){h.prototype.cleanUp.call(this),this._pako=null},p.prototype._createPako=function(){this._pako=new c[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(m){f.push({data:m,meta:f.meta})}},o.compressWorker=function(f){return new p("Deflate",f)},o.uncompressWorker=function(){return new p("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(s,i,o){function l(b,y){var v,C="";for(v=0;v<y;v++)C+=String.fromCharCode(255&b),b>>>=8;return C}function c(b,y,v,C,w,F){var j,T,z=b.file,B=b.compression,U=F!==g.utf8encode,D=u.transformTo("string",F(z.name)),A=u.transformTo("string",g.utf8encode(z.name)),H=z.comment,Y=u.transformTo("string",F(H)),_=u.transformTo("string",g.utf8encode(H)),L=A.length!==z.name.length,k=_.length!==H.length,$="",P="",I="",q=z.dir,G=z.date,Q={crc32:0,compressedSize:0,uncompressedSize:0};y&&!v||(Q.crc32=b.crc32,Q.compressedSize=b.compressedSize,Q.uncompressedSize=b.uncompressedSize);var M=0;y&&(M|=8),U||!L&&!k||(M|=2048);var O=0,ee=0;q&&(O|=16),w==="UNIX"?(ee=798,O|=(function(V,Z){var ue=V;return V||(ue=Z?16893:33204),(65535&ue)<<16})(z.unixPermissions,q)):(ee=20,O|=(function(V){return 63&(V||0)})(z.dosPermissions)),j=G.getUTCHours(),j<<=6,j|=G.getUTCMinutes(),j<<=5,j|=G.getUTCSeconds()/2,T=G.getUTCFullYear()-1980,T<<=4,T|=G.getUTCMonth()+1,T<<=5,T|=G.getUTCDate(),L&&(P=l(1,1)+l(p(D),4)+A,$+="up"+l(P.length,2)+P),k&&(I=l(1,1)+l(p(Y),4)+_,$+="uc"+l(I.length,2)+I);var W="";return W+=`
\0`,W+=l(M,2),W+=B.magic,W+=l(j,2),W+=l(T,2),W+=l(Q.crc32,4),W+=l(Q.compressedSize,4),W+=l(Q.uncompressedSize,4),W+=l(D.length,2),W+=l($.length,2),{fileRecord:f.LOCAL_FILE_HEADER+W+D+$,dirRecord:f.CENTRAL_FILE_HEADER+l(ee,2)+W+l(Y.length,2)+"\0\0\0\0"+l(O,4)+l(C,4)+D+$+Y}}var u=s("../utils"),h=s("../stream/GenericWorker"),g=s("../utf8"),p=s("../crc32"),f=s("../signature");function m(b,y,v,C){h.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=v,this.encodeFileName=C,this.streamFiles=b,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}u.inherits(m,h),m.prototype.push=function(b){var y=b.meta.percent||0,v=this.entriesCount,C=this._sources.length;this.accumulate?this.contentBuffer.push(b):(this.bytesWritten+=b.data.length,h.prototype.push.call(this,{data:b.data,meta:{currentFile:this.currentFile,percent:v?(y+100*(v-C-1))/v:100}}))},m.prototype.openedSource=function(b){this.currentSourceOffset=this.bytesWritten,this.currentFile=b.file.name;var y=this.streamFiles&&!b.file.dir;if(y){var v=c(b,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:v.fileRecord,meta:{percent:0}})}else this.accumulate=!0},m.prototype.closedSource=function(b){this.accumulate=!1;var y=this.streamFiles&&!b.file.dir,v=c(b,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(v.dirRecord),y)this.push({data:(function(C){return f.DATA_DESCRIPTOR+l(C.crc32,4)+l(C.compressedSize,4)+l(C.uncompressedSize,4)})(b),meta:{percent:100}});else for(this.push({data:v.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},m.prototype.flush=function(){for(var b=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var v=this.bytesWritten-b,C=(function(w,F,j,T,z){var B=u.transformTo("string",z(T));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+l(w,2)+l(w,2)+l(F,4)+l(j,4)+l(B.length,2)+B})(this.dirRecords.length,v,b,this.zipComment,this.encodeFileName);this.push({data:C,meta:{percent:100}})},m.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},m.prototype.registerPrevious=function(b){this._sources.push(b);var y=this;return b.on("data",function(v){y.processChunk(v)}),b.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),b.on("error",function(v){y.error(v)}),this},m.prototype.resume=function(){return!!h.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},m.prototype.error=function(b){var y=this._sources;if(!h.prototype.error.call(this,b))return!1;for(var v=0;v<y.length;v++)try{y[v].error(b)}catch{}return!0},m.prototype.lock=function(){h.prototype.lock.call(this);for(var b=this._sources,y=0;y<b.length;y++)b[y].lock()},i.exports=m},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(s,i,o){var l=s("../compressions"),c=s("./ZipFileWorker");o.generateWorker=function(u,h,g){var p=new c(h.streamFiles,g,h.platform,h.encodeFileName),f=0;try{u.forEach(function(m,b){f++;var y=(function(F,j){var T=F||j,z=l[T];if(!z)throw new Error(T+" is not a valid compression method !");return z})(b.options.compression,h.compression),v=b.options.compressionOptions||h.compressionOptions||{},C=b.dir,w=b.date;b._compressWorker(y,v).withStreamInfo("file",{name:m,dir:C,date:w,comment:b.comment||"",unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions}).pipe(p)}),p.entriesCount=f}catch(m){p.error(m)}return p}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(s,i,o){function l(){if(!(this instanceof l))return new l;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var c=new l;for(var u in this)typeof this[u]!="function"&&(c[u]=this[u]);return c}}(l.prototype=s("./object")).loadAsync=s("./load"),l.support=s("./support"),l.defaults=s("./defaults"),l.version="3.10.1",l.loadAsync=function(c,u){return new l().loadAsync(c,u)},l.external=s("./external"),i.exports=l},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(s,i,o){var l=s("./utils"),c=s("./external"),u=s("./utf8"),h=s("./zipEntries"),g=s("./stream/Crc32Probe"),p=s("./nodejsUtils");function f(m){return new c.Promise(function(b,y){var v=m.decompressed.getContentWorker().pipe(new g);v.on("error",function(C){y(C)}).on("end",function(){v.streamInfo.crc32!==m.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):b()}).resume()})}i.exports=function(m,b){var y=this;return b=l.extend(b||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:u.utf8decode}),p.isNode&&p.isStream(m)?c.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):l.prepareContent("the loaded zip file",m,!0,b.optimizedBinaryString,b.base64).then(function(v){var C=new h(b);return C.load(v),C}).then(function(v){var C=[c.Promise.resolve(v)],w=v.files;if(b.checkCRC32)for(var F=0;F<w.length;F++)C.push(f(w[F]));return c.Promise.all(C)}).then(function(v){for(var C=v.shift(),w=C.files,F=0;F<w.length;F++){var j=w[F],T=j.fileNameStr,z=l.resolve(j.fileNameStr);y.file(z,j.decompressed,{binary:!0,optimizedBinaryString:!0,date:j.date,dir:j.dir,comment:j.fileCommentStr.length?j.fileCommentStr:null,unixPermissions:j.unixPermissions,dosPermissions:j.dosPermissions,createFolders:b.createFolders}),j.dir||(y.file(z).unsafeOriginalName=T)}return C.zipComment.length&&(y.comment=C.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(s,i,o){var l=s("../utils"),c=s("../stream/GenericWorker");function u(h,g){c.call(this,"Nodejs stream input adapter for "+h),this._upstreamEnded=!1,this._bindStream(g)}l.inherits(u,c),u.prototype._bindStream=function(h){var g=this;(this._stream=h).pause(),h.on("data",function(p){g.push({data:p,meta:{percent:0}})}).on("error",function(p){g.isPaused?this.generatedError=p:g.error(p)}).on("end",function(){g.isPaused?g._upstreamEnded=!0:g.end()})},u.prototype.pause=function(){return!!c.prototype.pause.call(this)&&(this._stream.pause(),!0)},u.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=u},{"../stream/GenericWorker":28,"../utils":32}],13:[function(s,i,o){var l=s("readable-stream").Readable;function c(u,h,g){l.call(this,h),this._helper=u;var p=this;u.on("data",function(f,m){p.push(f)||p._helper.pause(),g&&g(m)}).on("error",function(f){p.emit("error",f)}).on("end",function(){p.push(null)})}s("../utils").inherits(c,l),c.prototype._read=function(){this._helper.resume()},i.exports=c},{"../utils":32,"readable-stream":16}],14:[function(s,i,o){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(l,c){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(l,c);if(typeof l=="number")throw new Error('The "data" argument must not be a number');return new Buffer(l,c)},allocBuffer:function(l){if(Buffer.alloc)return Buffer.alloc(l);var c=new Buffer(l);return c.fill(0),c},isBuffer:function(l){return Buffer.isBuffer(l)},isStream:function(l){return l&&typeof l.on=="function"&&typeof l.pause=="function"&&typeof l.resume=="function"}}},{}],15:[function(s,i,o){function l(z,B,U){var D,A=u.getTypeOf(B),H=u.extend(U||{},p);H.date=H.date||new Date,H.compression!==null&&(H.compression=H.compression.toUpperCase()),typeof H.unixPermissions=="string"&&(H.unixPermissions=parseInt(H.unixPermissions,8)),H.unixPermissions&&16384&H.unixPermissions&&(H.dir=!0),H.dosPermissions&&16&H.dosPermissions&&(H.dir=!0),H.dir&&(z=w(z)),H.createFolders&&(D=C(z))&&F.call(this,D,!0);var Y=A==="string"&&H.binary===!1&&H.base64===!1;U&&U.binary!==void 0||(H.binary=!Y),(B instanceof f&&B.uncompressedSize===0||H.dir||!B||B.length===0)&&(H.base64=!1,H.binary=!0,B="",H.compression="STORE",A="string");var _=null;_=B instanceof f||B instanceof h?B:y.isNode&&y.isStream(B)?new v(z,B):u.prepareContent(z,B,H.binary,H.optimizedBinaryString,H.base64);var L=new m(z,_,H);this.files[z]=L}var c=s("./utf8"),u=s("./utils"),h=s("./stream/GenericWorker"),g=s("./stream/StreamHelper"),p=s("./defaults"),f=s("./compressedObject"),m=s("./zipObject"),b=s("./generate"),y=s("./nodejsUtils"),v=s("./nodejs/NodejsStreamInputAdapter"),C=function(z){z.slice(-1)==="/"&&(z=z.substring(0,z.length-1));var B=z.lastIndexOf("/");return 0<B?z.substring(0,B):""},w=function(z){return z.slice(-1)!=="/"&&(z+="/"),z},F=function(z,B){return B=B!==void 0?B:p.createFolders,z=w(z),this.files[z]||l.call(this,z,null,{dir:!0,createFolders:B}),this.files[z]};function j(z){return Object.prototype.toString.call(z)==="[object RegExp]"}var T={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(z){var B,U,D;for(B in this.files)D=this.files[B],(U=B.slice(this.root.length,B.length))&&B.slice(0,this.root.length)===this.root&&z(U,D)},filter:function(z){var B=[];return this.forEach(function(U,D){z(U,D)&&B.push(D)}),B},file:function(z,B,U){if(arguments.length!==1)return z=this.root+z,l.call(this,z,B,U),this;if(j(z)){var D=z;return this.filter(function(H,Y){return!Y.dir&&D.test(H)})}var A=this.files[this.root+z];return A&&!A.dir?A:null},folder:function(z){if(!z)return this;if(j(z))return this.filter(function(A,H){return H.dir&&z.test(A)});var B=this.root+z,U=F.call(this,B),D=this.clone();return D.root=U.name,D},remove:function(z){z=this.root+z;var B=this.files[z];if(B||(z.slice(-1)!=="/"&&(z+="/"),B=this.files[z]),B&&!B.dir)delete this.files[z];else for(var U=this.filter(function(A,H){return H.name.slice(0,z.length)===z}),D=0;D<U.length;D++)delete this.files[U[D].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(z){var B,U={};try{if((U=u.extend(z||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:c.utf8encode})).type=U.type.toLowerCase(),U.compression=U.compression.toUpperCase(),U.type==="binarystring"&&(U.type="string"),!U.type)throw new Error("No output type specified.");u.checkSupport(U.type),U.platform!=="darwin"&&U.platform!=="freebsd"&&U.platform!=="linux"&&U.platform!=="sunos"||(U.platform="UNIX"),U.platform==="win32"&&(U.platform="DOS");var D=U.comment||this.comment||"";B=b.generateWorker(this,U,D)}catch(A){(B=new h("error")).error(A)}return new g(B,U.type||"string",U.mimeType)},generateAsync:function(z,B){return this.generateInternalStream(z).accumulate(B)},generateNodeStream:function(z,B){return(z=z||{}).type||(z.type="nodebuffer"),this.generateInternalStream(z).toNodejsStream(B)}};i.exports=T},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(s,i,o){i.exports=s("stream")},{stream:void 0}],17:[function(s,i,o){var l=s("./DataReader");function c(u){l.call(this,u);for(var h=0;h<this.data.length;h++)u[h]=255&u[h]}s("../utils").inherits(c,l),c.prototype.byteAt=function(u){return this.data[this.zero+u]},c.prototype.lastIndexOfSignature=function(u){for(var h=u.charCodeAt(0),g=u.charCodeAt(1),p=u.charCodeAt(2),f=u.charCodeAt(3),m=this.length-4;0<=m;--m)if(this.data[m]===h&&this.data[m+1]===g&&this.data[m+2]===p&&this.data[m+3]===f)return m-this.zero;return-1},c.prototype.readAndCheckSignature=function(u){var h=u.charCodeAt(0),g=u.charCodeAt(1),p=u.charCodeAt(2),f=u.charCodeAt(3),m=this.readData(4);return h===m[0]&&g===m[1]&&p===m[2]&&f===m[3]},c.prototype.readData=function(u){if(this.checkOffset(u),u===0)return[];var h=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,h},i.exports=c},{"../utils":32,"./DataReader":18}],18:[function(s,i,o){var l=s("../utils");function c(u){this.data=u,this.length=u.length,this.index=0,this.zero=0}c.prototype={checkOffset:function(u){this.checkIndex(this.index+u)},checkIndex:function(u){if(this.length<this.zero+u||u<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+u+"). Corrupted zip ?")},setIndex:function(u){this.checkIndex(u),this.index=u},skip:function(u){this.setIndex(this.index+u)},byteAt:function(){},readInt:function(u){var h,g=0;for(this.checkOffset(u),h=this.index+u-1;h>=this.index;h--)g=(g<<8)+this.byteAt(h);return this.index+=u,g},readString:function(u){return l.transformTo("string",this.readData(u))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var u=this.readInt(4);return new Date(Date.UTC(1980+(u>>25&127),(u>>21&15)-1,u>>16&31,u>>11&31,u>>5&63,(31&u)<<1))}},i.exports=c},{"../utils":32}],19:[function(s,i,o){var l=s("./Uint8ArrayReader");function c(u){l.call(this,u)}s("../utils").inherits(c,l),c.prototype.readData=function(u){this.checkOffset(u);var h=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,h},i.exports=c},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(s,i,o){var l=s("./DataReader");function c(u){l.call(this,u)}s("../utils").inherits(c,l),c.prototype.byteAt=function(u){return this.data.charCodeAt(this.zero+u)},c.prototype.lastIndexOfSignature=function(u){return this.data.lastIndexOf(u)-this.zero},c.prototype.readAndCheckSignature=function(u){return u===this.readData(4)},c.prototype.readData=function(u){this.checkOffset(u);var h=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,h},i.exports=c},{"../utils":32,"./DataReader":18}],21:[function(s,i,o){var l=s("./ArrayReader");function c(u){l.call(this,u)}s("../utils").inherits(c,l),c.prototype.readData=function(u){if(this.checkOffset(u),u===0)return new Uint8Array(0);var h=this.data.subarray(this.zero+this.index,this.zero+this.index+u);return this.index+=u,h},i.exports=c},{"../utils":32,"./ArrayReader":17}],22:[function(s,i,o){var l=s("../utils"),c=s("../support"),u=s("./ArrayReader"),h=s("./StringReader"),g=s("./NodeBufferReader"),p=s("./Uint8ArrayReader");i.exports=function(f){var m=l.getTypeOf(f);return l.checkSupport(m),m!=="string"||c.uint8array?m==="nodebuffer"?new g(f):c.uint8array?new p(l.transformTo("uint8array",f)):new u(l.transformTo("array",f)):new h(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(s,i,o){o.LOCAL_FILE_HEADER="PK",o.CENTRAL_FILE_HEADER="PK",o.CENTRAL_DIRECTORY_END="PK",o.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",o.ZIP64_CENTRAL_DIRECTORY_END="PK",o.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(s,i,o){var l=s("./GenericWorker"),c=s("../utils");function u(h){l.call(this,"ConvertWorker to "+h),this.destType=h}c.inherits(u,l),u.prototype.processChunk=function(h){this.push({data:c.transformTo(this.destType,h.data),meta:h.meta})},i.exports=u},{"../utils":32,"./GenericWorker":28}],25:[function(s,i,o){var l=s("./GenericWorker"),c=s("../crc32");function u(){l.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}s("../utils").inherits(u,l),u.prototype.processChunk=function(h){this.streamInfo.crc32=c(h.data,this.streamInfo.crc32||0),this.push(h)},i.exports=u},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(s,i,o){var l=s("../utils"),c=s("./GenericWorker");function u(h){c.call(this,"DataLengthProbe for "+h),this.propName=h,this.withStreamInfo(h,0)}l.inherits(u,c),u.prototype.processChunk=function(h){if(h){var g=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=g+h.data.length}c.prototype.processChunk.call(this,h)},i.exports=u},{"../utils":32,"./GenericWorker":28}],27:[function(s,i,o){var l=s("../utils"),c=s("./GenericWorker");function u(h){c.call(this,"DataWorker");var g=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,h.then(function(p){g.dataIsReady=!0,g.data=p,g.max=p&&p.length||0,g.type=l.getTypeOf(p),g.isPaused||g._tickAndRepeat()},function(p){g.error(p)})}l.inherits(u,c),u.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this.data=null},u.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,l.delay(this._tickAndRepeat,[],this)),!0)},u.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(l.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},u.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var h=null,g=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":h=this.data.substring(this.index,g);break;case"uint8array":h=this.data.subarray(this.index,g);break;case"array":case"nodebuffer":h=this.data.slice(this.index,g)}return this.index=g,this.push({data:h,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=u},{"../utils":32,"./GenericWorker":28}],28:[function(s,i,o){function l(c){this.name=c||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}l.prototype={push:function(c){this.emit("data",c)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(c){this.emit("error",c)}return!0},error:function(c){return!this.isFinished&&(this.isPaused?this.generatedError=c:(this.isFinished=!0,this.emit("error",c),this.previous&&this.previous.error(c),this.cleanUp()),!0)},on:function(c,u){return this._listeners[c].push(u),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(c,u){if(this._listeners[c])for(var h=0;h<this._listeners[c].length;h++)this._listeners[c][h].call(this,u)},pipe:function(c){return c.registerPrevious(this)},registerPrevious:function(c){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=c.streamInfo,this.mergeStreamInfo(),this.previous=c;var u=this;return c.on("data",function(h){u.processChunk(h)}),c.on("end",function(){u.end()}),c.on("error",function(h){u.error(h)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var c=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),c=!0),this.previous&&this.previous.resume(),!c},flush:function(){},processChunk:function(c){this.push(c)},withStreamInfo:function(c,u){return this.extraStreamInfo[c]=u,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var c in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,c)&&(this.streamInfo[c]=this.extraStreamInfo[c])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var c="Worker "+this.name;return this.previous?this.previous+" -> "+c:c}},i.exports=l},{}],29:[function(s,i,o){var l=s("../utils"),c=s("./ConvertWorker"),u=s("./GenericWorker"),h=s("../base64"),g=s("../support"),p=s("../external"),f=null;if(g.nodestream)try{f=s("../nodejs/NodejsStreamOutputAdapter")}catch{}function m(y,v){return new p.Promise(function(C,w){var F=[],j=y._internalType,T=y._outputType,z=y._mimeType;y.on("data",function(B,U){F.push(B),v&&v(U)}).on("error",function(B){F=[],w(B)}).on("end",function(){try{var B=(function(U,D,A){switch(U){case"blob":return l.newBlob(l.transformTo("arraybuffer",D),A);case"base64":return h.encode(D);default:return l.transformTo(U,D)}})(T,(function(U,D){var A,H=0,Y=null,_=0;for(A=0;A<D.length;A++)_+=D[A].length;switch(U){case"string":return D.join("");case"array":return Array.prototype.concat.apply([],D);case"uint8array":for(Y=new Uint8Array(_),A=0;A<D.length;A++)Y.set(D[A],H),H+=D[A].length;return Y;case"nodebuffer":return Buffer.concat(D);default:throw new Error("concat : unsupported type '"+U+"'")}})(j,F),z);C(B)}catch(U){w(U)}F=[]}).resume()})}function b(y,v,C){var w=v;switch(v){case"blob":case"arraybuffer":w="uint8array";break;case"base64":w="string"}try{this._internalType=w,this._outputType=v,this._mimeType=C,l.checkSupport(w),this._worker=y.pipe(new c(w)),y.lock()}catch(F){this._worker=new u("error"),this._worker.error(F)}}b.prototype={accumulate:function(y){return m(this,y)},on:function(y,v){var C=this;return y==="data"?this._worker.on(y,function(w){v.call(C,w.data,w.meta)}):this._worker.on(y,function(){l.delay(v,arguments,C)}),this},resume:function(){return l.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(l.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},y)}},i.exports=b},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(s,i,o){if(o.base64=!0,o.array=!0,o.string=!0,o.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",o.nodebuffer=typeof Buffer<"u",o.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")o.blob=!1;else{var l=new ArrayBuffer(0);try{o.blob=new Blob([l],{type:"application/zip"}).size===0}catch{try{var c=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);c.append(l),o.blob=c.getBlob("application/zip").size===0}catch{o.blob=!1}}}try{o.nodestream=!!s("readable-stream").Readable}catch{o.nodestream=!1}},{"readable-stream":16}],31:[function(s,i,o){for(var l=s("./utils"),c=s("./support"),u=s("./nodejsUtils"),h=s("./stream/GenericWorker"),g=new Array(256),p=0;p<256;p++)g[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;g[254]=g[254]=1;function f(){h.call(this,"utf-8 decode"),this.leftOver=null}function m(){h.call(this,"utf-8 encode")}o.utf8encode=function(b){return c.nodebuffer?u.newBufferFrom(b,"utf-8"):(function(y){var v,C,w,F,j,T=y.length,z=0;for(F=0;F<T;F++)(64512&(C=y.charCodeAt(F)))==55296&&F+1<T&&(64512&(w=y.charCodeAt(F+1)))==56320&&(C=65536+(C-55296<<10)+(w-56320),F++),z+=C<128?1:C<2048?2:C<65536?3:4;for(v=c.uint8array?new Uint8Array(z):new Array(z),F=j=0;j<z;F++)(64512&(C=y.charCodeAt(F)))==55296&&F+1<T&&(64512&(w=y.charCodeAt(F+1)))==56320&&(C=65536+(C-55296<<10)+(w-56320),F++),C<128?v[j++]=C:(C<2048?v[j++]=192|C>>>6:(C<65536?v[j++]=224|C>>>12:(v[j++]=240|C>>>18,v[j++]=128|C>>>12&63),v[j++]=128|C>>>6&63),v[j++]=128|63&C);return v})(b)},o.utf8decode=function(b){return c.nodebuffer?l.transformTo("nodebuffer",b).toString("utf-8"):(function(y){var v,C,w,F,j=y.length,T=new Array(2*j);for(v=C=0;v<j;)if((w=y[v++])<128)T[C++]=w;else if(4<(F=g[w]))T[C++]=65533,v+=F-1;else{for(w&=F===2?31:F===3?15:7;1<F&&v<j;)w=w<<6|63&y[v++],F--;1<F?T[C++]=65533:w<65536?T[C++]=w:(w-=65536,T[C++]=55296|w>>10&1023,T[C++]=56320|1023&w)}return T.length!==C&&(T.subarray?T=T.subarray(0,C):T.length=C),l.applyFromCharCode(T)})(b=l.transformTo(c.uint8array?"uint8array":"array",b))},l.inherits(f,h),f.prototype.processChunk=function(b){var y=l.transformTo(c.uint8array?"uint8array":"array",b.data);if(this.leftOver&&this.leftOver.length){if(c.uint8array){var v=y;(y=new Uint8Array(v.length+this.leftOver.length)).set(this.leftOver,0),y.set(v,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var C=(function(F,j){var T;for((j=j||F.length)>F.length&&(j=F.length),T=j-1;0<=T&&(192&F[T])==128;)T--;return T<0||T===0?j:T+g[F[T]]>j?T:j})(y),w=y;C!==y.length&&(c.uint8array?(w=y.subarray(0,C),this.leftOver=y.subarray(C,y.length)):(w=y.slice(0,C),this.leftOver=y.slice(C,y.length))),this.push({data:o.utf8decode(w),meta:b.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:o.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},o.Utf8DecodeWorker=f,l.inherits(m,h),m.prototype.processChunk=function(b){this.push({data:o.utf8encode(b.data),meta:b.meta})},o.Utf8EncodeWorker=m},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(s,i,o){var l=s("./support"),c=s("./base64"),u=s("./nodejsUtils"),h=s("./external");function g(v){return v}function p(v,C){for(var w=0;w<v.length;++w)C[w]=255&v.charCodeAt(w);return C}s("setimmediate"),o.newBlob=function(v,C){o.checkSupport("blob");try{return new Blob([v],{type:C})}catch{try{var w=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return w.append(v),w.getBlob(C)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(v,C,w){var F=[],j=0,T=v.length;if(T<=w)return String.fromCharCode.apply(null,v);for(;j<T;)C==="array"||C==="nodebuffer"?F.push(String.fromCharCode.apply(null,v.slice(j,Math.min(j+w,T)))):F.push(String.fromCharCode.apply(null,v.subarray(j,Math.min(j+w,T)))),j+=w;return F.join("")},stringifyByChar:function(v){for(var C="",w=0;w<v.length;w++)C+=String.fromCharCode(v[w]);return C},applyCanBeUsed:{uint8array:(function(){try{return l.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return l.nodebuffer&&String.fromCharCode.apply(null,u.allocBuffer(1)).length===1}catch{return!1}})()}};function m(v){var C=65536,w=o.getTypeOf(v),F=!0;if(w==="uint8array"?F=f.applyCanBeUsed.uint8array:w==="nodebuffer"&&(F=f.applyCanBeUsed.nodebuffer),F)for(;1<C;)try{return f.stringifyByChunk(v,w,C)}catch{C=Math.floor(C/2)}return f.stringifyByChar(v)}function b(v,C){for(var w=0;w<v.length;w++)C[w]=v[w];return C}o.applyFromCharCode=m;var y={};y.string={string:g,array:function(v){return p(v,new Array(v.length))},arraybuffer:function(v){return y.string.uint8array(v).buffer},uint8array:function(v){return p(v,new Uint8Array(v.length))},nodebuffer:function(v){return p(v,u.allocBuffer(v.length))}},y.array={string:m,array:g,arraybuffer:function(v){return new Uint8Array(v).buffer},uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return u.newBufferFrom(v)}},y.arraybuffer={string:function(v){return m(new Uint8Array(v))},array:function(v){return b(new Uint8Array(v),new Array(v.byteLength))},arraybuffer:g,uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return u.newBufferFrom(new Uint8Array(v))}},y.uint8array={string:m,array:function(v){return b(v,new Array(v.length))},arraybuffer:function(v){return v.buffer},uint8array:g,nodebuffer:function(v){return u.newBufferFrom(v)}},y.nodebuffer={string:m,array:function(v){return b(v,new Array(v.length))},arraybuffer:function(v){return y.nodebuffer.uint8array(v).buffer},uint8array:function(v){return b(v,new Uint8Array(v.length))},nodebuffer:g},o.transformTo=function(v,C){if(C=C||"",!v)return C;o.checkSupport(v);var w=o.getTypeOf(C);return y[w][v](C)},o.resolve=function(v){for(var C=v.split("/"),w=[],F=0;F<C.length;F++){var j=C[F];j==="."||j===""&&F!==0&&F!==C.length-1||(j===".."?w.pop():w.push(j))}return w.join("/")},o.getTypeOf=function(v){return typeof v=="string"?"string":Object.prototype.toString.call(v)==="[object Array]"?"array":l.nodebuffer&&u.isBuffer(v)?"nodebuffer":l.uint8array&&v instanceof Uint8Array?"uint8array":l.arraybuffer&&v instanceof ArrayBuffer?"arraybuffer":void 0},o.checkSupport=function(v){if(!l[v.toLowerCase()])throw new Error(v+" is not supported by this platform")},o.MAX_VALUE_16BITS=65535,o.MAX_VALUE_32BITS=-1,o.pretty=function(v){var C,w,F="";for(w=0;w<(v||"").length;w++)F+="\\x"+((C=v.charCodeAt(w))<16?"0":"")+C.toString(16).toUpperCase();return F},o.delay=function(v,C,w){setImmediate(function(){v.apply(w||null,C||[])})},o.inherits=function(v,C){function w(){}w.prototype=C.prototype,v.prototype=new w},o.extend=function(){var v,C,w={};for(v=0;v<arguments.length;v++)for(C in arguments[v])Object.prototype.hasOwnProperty.call(arguments[v],C)&&w[C]===void 0&&(w[C]=arguments[v][C]);return w},o.prepareContent=function(v,C,w,F,j){return h.Promise.resolve(C).then(function(T){return l.blob&&(T instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(T))!==-1)&&typeof FileReader<"u"?new h.Promise(function(z,B){var U=new FileReader;U.onload=function(D){z(D.target.result)},U.onerror=function(D){B(D.target.error)},U.readAsArrayBuffer(T)}):T}).then(function(T){var z=o.getTypeOf(T);return z?(z==="arraybuffer"?T=o.transformTo("uint8array",T):z==="string"&&(j?T=c.decode(T):w&&F!==!0&&(T=(function(B){return p(B,l.uint8array?new Uint8Array(B.length):new Array(B.length))})(T))),T):h.Promise.reject(new Error("Can't read the data of '"+v+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(s,i,o){var l=s("./reader/readerFor"),c=s("./utils"),u=s("./signature"),h=s("./zipEntry"),g=s("./support");function p(f){this.files=[],this.loadOptions=f}p.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var m=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+c.pretty(m)+", expected "+c.pretty(f)+")")}},isSignature:function(f,m){var b=this.reader.index;this.reader.setIndex(f);var y=this.reader.readString(4)===m;return this.reader.setIndex(b),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),m=g.uint8array?"uint8array":"array",b=c.transformTo(m,f);this.zipComment=this.loadOptions.decodeFileName(b)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,m,b,y=this.zip64EndOfCentralSize-44;0<y;)f=this.reader.readInt(2),m=this.reader.readInt(4),b=this.reader.readData(m),this.zip64ExtensibleData[f]={id:f,length:m,value:b}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,m;for(f=0;f<this.files.length;f++)m=this.files[f],this.reader.setIndex(m.localHeaderOffset),this.checkSignature(u.LOCAL_FILE_HEADER),m.readLocalPart(this.reader),m.handleUTF8(),m.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(u.CENTRAL_FILE_HEADER);)(f=new h({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(u.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,u.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var m=f;if(this.checkSignature(u.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===c.MAX_VALUE_16BITS||this.diskWithCentralDirStart===c.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===c.MAX_VALUE_16BITS||this.centralDirRecords===c.MAX_VALUE_16BITS||this.centralDirSize===c.MAX_VALUE_32BITS||this.centralDirOffset===c.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,u.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var b=this.centralDirOffset+this.centralDirSize;this.zip64&&(b+=20,b+=12+this.zip64EndOfCentralSize);var y=m-b;if(0<y)this.isSignature(m,u.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(f){this.reader=l(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=p},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(s,i,o){var l=s("./reader/readerFor"),c=s("./utils"),u=s("./compressedObject"),h=s("./crc32"),g=s("./utf8"),p=s("./compressions"),f=s("./support");function m(b,y){this.options=b,this.loadOptions=y}m.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(b){var y,v;if(b.skip(22),this.fileNameLength=b.readInt(2),v=b.readInt(2),this.fileName=b.readData(this.fileNameLength),b.skip(v),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=(function(C){for(var w in p)if(Object.prototype.hasOwnProperty.call(p,w)&&p[w].magic===C)return p[w];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+c.pretty(this.compressionMethod)+" unknown (inner file : "+c.transformTo("string",this.fileName)+")");this.decompressed=new u(this.compressedSize,this.uncompressedSize,this.crc32,y,b.readData(this.compressedSize))},readCentralPart:function(b){this.versionMadeBy=b.readInt(2),b.skip(2),this.bitFlag=b.readInt(2),this.compressionMethod=b.readString(2),this.date=b.readDate(),this.crc32=b.readInt(4),this.compressedSize=b.readInt(4),this.uncompressedSize=b.readInt(4);var y=b.readInt(2);if(this.extraFieldsLength=b.readInt(2),this.fileCommentLength=b.readInt(2),this.diskNumberStart=b.readInt(2),this.internalFileAttributes=b.readInt(2),this.externalFileAttributes=b.readInt(4),this.localHeaderOffset=b.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");b.skip(y),this.readExtraFields(b),this.parseZIP64ExtraField(b),this.fileComment=b.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var b=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),b==0&&(this.dosPermissions=63&this.externalFileAttributes),b==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var b=l(this.extraFields[1].value);this.uncompressedSize===c.MAX_VALUE_32BITS&&(this.uncompressedSize=b.readInt(8)),this.compressedSize===c.MAX_VALUE_32BITS&&(this.compressedSize=b.readInt(8)),this.localHeaderOffset===c.MAX_VALUE_32BITS&&(this.localHeaderOffset=b.readInt(8)),this.diskNumberStart===c.MAX_VALUE_32BITS&&(this.diskNumberStart=b.readInt(4))}},readExtraFields:function(b){var y,v,C,w=b.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});b.index+4<w;)y=b.readInt(2),v=b.readInt(2),C=b.readData(v),this.extraFields[y]={id:y,length:v,value:C};b.setIndex(w)},handleUTF8:function(){var b=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=g.utf8decode(this.fileName),this.fileCommentStr=g.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var v=c.transformTo(b,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(v)}var C=this.findExtraFieldUnicodeComment();if(C!==null)this.fileCommentStr=C;else{var w=c.transformTo(b,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(w)}}},findExtraFieldUnicodePath:function(){var b=this.extraFields[28789];if(b){var y=l(b.value);return y.readInt(1)!==1||h(this.fileName)!==y.readInt(4)?null:g.utf8decode(y.readData(b.length-5))}return null},findExtraFieldUnicodeComment:function(){var b=this.extraFields[25461];if(b){var y=l(b.value);return y.readInt(1)!==1||h(this.fileComment)!==y.readInt(4)?null:g.utf8decode(y.readData(b.length-5))}return null}},i.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(s,i,o){function l(y,v,C){this.name=y,this.dir=C.dir,this.date=C.date,this.comment=C.comment,this.unixPermissions=C.unixPermissions,this.dosPermissions=C.dosPermissions,this._data=v,this._dataBinary=C.binary,this.options={compression:C.compression,compressionOptions:C.compressionOptions}}var c=s("./stream/StreamHelper"),u=s("./stream/DataWorker"),h=s("./utf8"),g=s("./compressedObject"),p=s("./stream/GenericWorker");l.prototype={internalStream:function(y){var v=null,C="string";try{if(!y)throw new Error("No output type specified.");var w=(C=y.toLowerCase())==="string"||C==="text";C!=="binarystring"&&C!=="text"||(C="string"),v=this._decompressWorker();var F=!this._dataBinary;F&&!w&&(v=v.pipe(new h.Utf8EncodeWorker)),!F&&w&&(v=v.pipe(new h.Utf8DecodeWorker))}catch(j){(v=new p("error")).error(j)}return new c(v,C,"")},async:function(y,v){return this.internalStream(y).accumulate(v)},nodeStream:function(y,v){return this.internalStream(y||"nodebuffer").toNodejsStream(v)},_compressWorker:function(y,v){if(this._data instanceof g&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var C=this._decompressWorker();return this._dataBinary||(C=C.pipe(new h.Utf8EncodeWorker)),g.createWorkerFrom(C,y,v)},_decompressWorker:function(){return this._data instanceof g?this._data.getContentWorker():this._data instanceof p?this._data:new u(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],m=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},b=0;b<f.length;b++)l.prototype[f[b]]=m;i.exports=l},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(s,i,o){(function(l){var c,u,h=l.MutationObserver||l.WebKitMutationObserver;if(h){var g=0,p=new h(y),f=l.document.createTextNode("");p.observe(f,{characterData:!0}),c=function(){f.data=g=++g%2}}else if(l.setImmediate||l.MessageChannel===void 0)c="document"in l&&"onreadystatechange"in l.document.createElement("script")?function(){var v=l.document.createElement("script");v.onreadystatechange=function(){y(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},l.document.documentElement.appendChild(v)}:function(){setTimeout(y,0)};else{var m=new l.MessageChannel;m.port1.onmessage=y,c=function(){m.port2.postMessage(0)}}var b=[];function y(){var v,C;u=!0;for(var w=b.length;w;){for(C=b,b=[],v=-1;++v<w;)C[v]();w=b.length}u=!1}i.exports=function(v){b.push(v)!==1||u||c()}}).call(this,typeof tl<"u"?tl:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(s,i,o){var l=s("immediate");function c(){}var u={},h=["REJECTED"],g=["FULFILLED"],p=["PENDING"];function f(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,w!==c&&v(this,w)}function m(w,F,j){this.promise=w,typeof F=="function"&&(this.onFulfilled=F,this.callFulfilled=this.otherCallFulfilled),typeof j=="function"&&(this.onRejected=j,this.callRejected=this.otherCallRejected)}function b(w,F,j){l(function(){var T;try{T=F(j)}catch(z){return u.reject(w,z)}T===w?u.reject(w,new TypeError("Cannot resolve promise with itself")):u.resolve(w,T)})}function y(w){var F=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof F=="function")return function(){F.apply(w,arguments)}}function v(w,F){var j=!1;function T(U){j||(j=!0,u.reject(w,U))}function z(U){j||(j=!0,u.resolve(w,U))}var B=C(function(){F(z,T)});B.status==="error"&&T(B.value)}function C(w,F){var j={};try{j.value=w(F),j.status="success"}catch(T){j.status="error",j.value=T}return j}(i.exports=f).prototype.finally=function(w){if(typeof w!="function")return this;var F=this.constructor;return this.then(function(j){return F.resolve(w()).then(function(){return j})},function(j){return F.resolve(w()).then(function(){throw j})})},f.prototype.catch=function(w){return this.then(null,w)},f.prototype.then=function(w,F){if(typeof w!="function"&&this.state===g||typeof F!="function"&&this.state===h)return this;var j=new this.constructor(c);return this.state!==p?b(j,this.state===g?w:F,this.outcome):this.queue.push(new m(j,w,F)),j},m.prototype.callFulfilled=function(w){u.resolve(this.promise,w)},m.prototype.otherCallFulfilled=function(w){b(this.promise,this.onFulfilled,w)},m.prototype.callRejected=function(w){u.reject(this.promise,w)},m.prototype.otherCallRejected=function(w){b(this.promise,this.onRejected,w)},u.resolve=function(w,F){var j=C(y,F);if(j.status==="error")return u.reject(w,j.value);var T=j.value;if(T)v(w,T);else{w.state=g,w.outcome=F;for(var z=-1,B=w.queue.length;++z<B;)w.queue[z].callFulfilled(F)}return w},u.reject=function(w,F){w.state=h,w.outcome=F;for(var j=-1,T=w.queue.length;++j<T;)w.queue[j].callRejected(F);return w},f.resolve=function(w){return w instanceof this?w:u.resolve(new this(c),w)},f.reject=function(w){var F=new this(c);return u.reject(F,w)},f.all=function(w){var F=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=w.length,T=!1;if(!j)return this.resolve([]);for(var z=new Array(j),B=0,U=-1,D=new this(c);++U<j;)A(w[U],U);return D;function A(H,Y){F.resolve(H).then(function(_){z[Y]=_,++B!==j||T||(T=!0,u.resolve(D,z))},function(_){T||(T=!0,u.reject(D,_))})}},f.race=function(w){var F=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=w.length,T=!1;if(!j)return this.resolve([]);for(var z=-1,B=new this(c);++z<j;)U=w[z],F.resolve(U).then(function(D){T||(T=!0,u.resolve(B,D))},function(D){T||(T=!0,u.reject(B,D))});var U;return B}},{immediate:36}],38:[function(s,i,o){var l={};(0,s("./lib/utils/common").assign)(l,s("./lib/deflate"),s("./lib/inflate"),s("./lib/zlib/constants")),i.exports=l},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(s,i,o){var l=s("./zlib/deflate"),c=s("./utils/common"),u=s("./utils/strings"),h=s("./zlib/messages"),g=s("./zlib/zstream"),p=Object.prototype.toString,f=0,m=-1,b=0,y=8;function v(w){if(!(this instanceof v))return new v(w);this.options=c.assign({level:m,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:b,to:""},w||{});var F=this.options;F.raw&&0<F.windowBits?F.windowBits=-F.windowBits:F.gzip&&0<F.windowBits&&F.windowBits<16&&(F.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;var j=l.deflateInit2(this.strm,F.level,F.method,F.windowBits,F.memLevel,F.strategy);if(j!==f)throw new Error(h[j]);if(F.header&&l.deflateSetHeader(this.strm,F.header),F.dictionary){var T;if(T=typeof F.dictionary=="string"?u.string2buf(F.dictionary):p.call(F.dictionary)==="[object ArrayBuffer]"?new Uint8Array(F.dictionary):F.dictionary,(j=l.deflateSetDictionary(this.strm,T))!==f)throw new Error(h[j]);this._dict_set=!0}}function C(w,F){var j=new v(F);if(j.push(w,!0),j.err)throw j.msg||h[j.err];return j.result}v.prototype.push=function(w,F){var j,T,z=this.strm,B=this.options.chunkSize;if(this.ended)return!1;T=F===~~F?F:F===!0?4:0,typeof w=="string"?z.input=u.string2buf(w):p.call(w)==="[object ArrayBuffer]"?z.input=new Uint8Array(w):z.input=w,z.next_in=0,z.avail_in=z.input.length;do{if(z.avail_out===0&&(z.output=new c.Buf8(B),z.next_out=0,z.avail_out=B),(j=l.deflate(z,T))!==1&&j!==f)return this.onEnd(j),!(this.ended=!0);z.avail_out!==0&&(z.avail_in!==0||T!==4&&T!==2)||(this.options.to==="string"?this.onData(u.buf2binstring(c.shrinkBuf(z.output,z.next_out))):this.onData(c.shrinkBuf(z.output,z.next_out)))}while((0<z.avail_in||z.avail_out===0)&&j!==1);return T===4?(j=l.deflateEnd(this.strm),this.onEnd(j),this.ended=!0,j===f):T!==2||(this.onEnd(f),!(z.avail_out=0))},v.prototype.onData=function(w){this.chunks.push(w)},v.prototype.onEnd=function(w){w===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},o.Deflate=v,o.deflate=C,o.deflateRaw=function(w,F){return(F=F||{}).raw=!0,C(w,F)},o.gzip=function(w,F){return(F=F||{}).gzip=!0,C(w,F)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(s,i,o){var l=s("./zlib/inflate"),c=s("./utils/common"),u=s("./utils/strings"),h=s("./zlib/constants"),g=s("./zlib/messages"),p=s("./zlib/zstream"),f=s("./zlib/gzheader"),m=Object.prototype.toString;function b(v){if(!(this instanceof b))return new b(v);this.options=c.assign({chunkSize:16384,windowBits:0,to:""},v||{});var C=this.options;C.raw&&0<=C.windowBits&&C.windowBits<16&&(C.windowBits=-C.windowBits,C.windowBits===0&&(C.windowBits=-15)),!(0<=C.windowBits&&C.windowBits<16)||v&&v.windowBits||(C.windowBits+=32),15<C.windowBits&&C.windowBits<48&&(15&C.windowBits)==0&&(C.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var w=l.inflateInit2(this.strm,C.windowBits);if(w!==h.Z_OK)throw new Error(g[w]);this.header=new f,l.inflateGetHeader(this.strm,this.header)}function y(v,C){var w=new b(C);if(w.push(v,!0),w.err)throw w.msg||g[w.err];return w.result}b.prototype.push=function(v,C){var w,F,j,T,z,B,U=this.strm,D=this.options.chunkSize,A=this.options.dictionary,H=!1;if(this.ended)return!1;F=C===~~C?C:C===!0?h.Z_FINISH:h.Z_NO_FLUSH,typeof v=="string"?U.input=u.binstring2buf(v):m.call(v)==="[object ArrayBuffer]"?U.input=new Uint8Array(v):U.input=v,U.next_in=0,U.avail_in=U.input.length;do{if(U.avail_out===0&&(U.output=new c.Buf8(D),U.next_out=0,U.avail_out=D),(w=l.inflate(U,h.Z_NO_FLUSH))===h.Z_NEED_DICT&&A&&(B=typeof A=="string"?u.string2buf(A):m.call(A)==="[object ArrayBuffer]"?new Uint8Array(A):A,w=l.inflateSetDictionary(this.strm,B)),w===h.Z_BUF_ERROR&&H===!0&&(w=h.Z_OK,H=!1),w!==h.Z_STREAM_END&&w!==h.Z_OK)return this.onEnd(w),!(this.ended=!0);U.next_out&&(U.avail_out!==0&&w!==h.Z_STREAM_END&&(U.avail_in!==0||F!==h.Z_FINISH&&F!==h.Z_SYNC_FLUSH)||(this.options.to==="string"?(j=u.utf8border(U.output,U.next_out),T=U.next_out-j,z=u.buf2string(U.output,j),U.next_out=T,U.avail_out=D-T,T&&c.arraySet(U.output,U.output,j,T,0),this.onData(z)):this.onData(c.shrinkBuf(U.output,U.next_out)))),U.avail_in===0&&U.avail_out===0&&(H=!0)}while((0<U.avail_in||U.avail_out===0)&&w!==h.Z_STREAM_END);return w===h.Z_STREAM_END&&(F=h.Z_FINISH),F===h.Z_FINISH?(w=l.inflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===h.Z_OK):F!==h.Z_SYNC_FLUSH||(this.onEnd(h.Z_OK),!(U.avail_out=0))},b.prototype.onData=function(v){this.chunks.push(v)},b.prototype.onEnd=function(v){v===h.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},o.Inflate=b,o.inflate=y,o.inflateRaw=function(v,C){return(C=C||{}).raw=!0,y(v,C)},o.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(s,i,o){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";o.assign=function(h){for(var g=Array.prototype.slice.call(arguments,1);g.length;){var p=g.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(var f in p)p.hasOwnProperty(f)&&(h[f]=p[f])}}return h},o.shrinkBuf=function(h,g){return h.length===g?h:h.subarray?h.subarray(0,g):(h.length=g,h)};var c={arraySet:function(h,g,p,f,m){if(g.subarray&&h.subarray)h.set(g.subarray(p,p+f),m);else for(var b=0;b<f;b++)h[m+b]=g[p+b]},flattenChunks:function(h){var g,p,f,m,b,y;for(g=f=0,p=h.length;g<p;g++)f+=h[g].length;for(y=new Uint8Array(f),g=m=0,p=h.length;g<p;g++)b=h[g],y.set(b,m),m+=b.length;return y}},u={arraySet:function(h,g,p,f,m){for(var b=0;b<f;b++)h[m+b]=g[p+b]},flattenChunks:function(h){return[].concat.apply([],h)}};o.setTyped=function(h){h?(o.Buf8=Uint8Array,o.Buf16=Uint16Array,o.Buf32=Int32Array,o.assign(o,c)):(o.Buf8=Array,o.Buf16=Array,o.Buf32=Array,o.assign(o,u))},o.setTyped(l)},{}],42:[function(s,i,o){var l=s("./common"),c=!0,u=!0;try{String.fromCharCode.apply(null,[0])}catch{c=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{u=!1}for(var h=new l.Buf8(256),g=0;g<256;g++)h[g]=252<=g?6:248<=g?5:240<=g?4:224<=g?3:192<=g?2:1;function p(f,m){if(m<65537&&(f.subarray&&u||!f.subarray&&c))return String.fromCharCode.apply(null,l.shrinkBuf(f,m));for(var b="",y=0;y<m;y++)b+=String.fromCharCode(f[y]);return b}h[254]=h[254]=1,o.string2buf=function(f){var m,b,y,v,C,w=f.length,F=0;for(v=0;v<w;v++)(64512&(b=f.charCodeAt(v)))==55296&&v+1<w&&(64512&(y=f.charCodeAt(v+1)))==56320&&(b=65536+(b-55296<<10)+(y-56320),v++),F+=b<128?1:b<2048?2:b<65536?3:4;for(m=new l.Buf8(F),v=C=0;C<F;v++)(64512&(b=f.charCodeAt(v)))==55296&&v+1<w&&(64512&(y=f.charCodeAt(v+1)))==56320&&(b=65536+(b-55296<<10)+(y-56320),v++),b<128?m[C++]=b:(b<2048?m[C++]=192|b>>>6:(b<65536?m[C++]=224|b>>>12:(m[C++]=240|b>>>18,m[C++]=128|b>>>12&63),m[C++]=128|b>>>6&63),m[C++]=128|63&b);return m},o.buf2binstring=function(f){return p(f,f.length)},o.binstring2buf=function(f){for(var m=new l.Buf8(f.length),b=0,y=m.length;b<y;b++)m[b]=f.charCodeAt(b);return m},o.buf2string=function(f,m){var b,y,v,C,w=m||f.length,F=new Array(2*w);for(b=y=0;b<w;)if((v=f[b++])<128)F[y++]=v;else if(4<(C=h[v]))F[y++]=65533,b+=C-1;else{for(v&=C===2?31:C===3?15:7;1<C&&b<w;)v=v<<6|63&f[b++],C--;1<C?F[y++]=65533:v<65536?F[y++]=v:(v-=65536,F[y++]=55296|v>>10&1023,F[y++]=56320|1023&v)}return p(F,y)},o.utf8border=function(f,m){var b;for((m=m||f.length)>f.length&&(m=f.length),b=m-1;0<=b&&(192&f[b])==128;)b--;return b<0||b===0?m:b+h[f[b]]>m?b:m}},{"./common":41}],43:[function(s,i,o){i.exports=function(l,c,u,h){for(var g=65535&l|0,p=l>>>16&65535|0,f=0;u!==0;){for(u-=f=2e3<u?2e3:u;p=p+(g=g+c[h++]|0)|0,--f;);g%=65521,p%=65521}return g|p<<16|0}},{}],44:[function(s,i,o){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(s,i,o){var l=(function(){for(var c,u=[],h=0;h<256;h++){c=h;for(var g=0;g<8;g++)c=1&c?3988292384^c>>>1:c>>>1;u[h]=c}return u})();i.exports=function(c,u,h,g){var p=l,f=g+h;c^=-1;for(var m=g;m<f;m++)c=c>>>8^p[255&(c^u[m])];return-1^c}},{}],46:[function(s,i,o){var l,c=s("../utils/common"),u=s("./trees"),h=s("./adler32"),g=s("./crc32"),p=s("./messages"),f=0,m=4,b=0,y=-2,v=-1,C=4,w=2,F=8,j=9,T=286,z=30,B=19,U=2*T+1,D=15,A=3,H=258,Y=H+A+1,_=42,L=113,k=1,$=2,P=3,I=4;function q(R,fe){return R.msg=p[fe],fe}function G(R){return(R<<1)-(4<R?9:0)}function Q(R){for(var fe=R.length;0<=--fe;)R[fe]=0}function M(R){var fe=R.state,te=fe.pending;te>R.avail_out&&(te=R.avail_out),te!==0&&(c.arraySet(R.output,fe.pending_buf,fe.pending_out,te,R.next_out),R.next_out+=te,fe.pending_out+=te,R.total_out+=te,R.avail_out-=te,fe.pending-=te,fe.pending===0&&(fe.pending_out=0))}function O(R,fe){u._tr_flush_block(R,0<=R.block_start?R.block_start:-1,R.strstart-R.block_start,fe),R.block_start=R.strstart,M(R.strm)}function ee(R,fe){R.pending_buf[R.pending++]=fe}function W(R,fe){R.pending_buf[R.pending++]=fe>>>8&255,R.pending_buf[R.pending++]=255&fe}function V(R,fe){var te,J,X=R.max_chain_length,se=R.strstart,ye=R.prev_length,ve=R.nice_match,le=R.strstart>R.w_size-Y?R.strstart-(R.w_size-Y):0,ke=R.window,Ne=R.w_mask,_e=R.prev,Re=R.strstart+H,at=ke[se+ye-1],Be=ke[se+ye];R.prev_length>=R.good_match&&(X>>=2),ve>R.lookahead&&(ve=R.lookahead);do if(ke[(te=fe)+ye]===Be&&ke[te+ye-1]===at&&ke[te]===ke[se]&&ke[++te]===ke[se+1]){se+=2,te++;do;while(ke[++se]===ke[++te]&&ke[++se]===ke[++te]&&ke[++se]===ke[++te]&&ke[++se]===ke[++te]&&ke[++se]===ke[++te]&&ke[++se]===ke[++te]&&ke[++se]===ke[++te]&&ke[++se]===ke[++te]&&se<Re);if(J=H-(Re-se),se=Re-H,ye<J){if(R.match_start=fe,ve<=(ye=J))break;at=ke[se+ye-1],Be=ke[se+ye]}}while((fe=_e[fe&Ne])>le&&--X!=0);return ye<=R.lookahead?ye:R.lookahead}function Z(R){var fe,te,J,X,se,ye,ve,le,ke,Ne,_e=R.w_size;do{if(X=R.window_size-R.lookahead-R.strstart,R.strstart>=_e+(_e-Y)){for(c.arraySet(R.window,R.window,_e,_e,0),R.match_start-=_e,R.strstart-=_e,R.block_start-=_e,fe=te=R.hash_size;J=R.head[--fe],R.head[fe]=_e<=J?J-_e:0,--te;);for(fe=te=_e;J=R.prev[--fe],R.prev[fe]=_e<=J?J-_e:0,--te;);X+=_e}if(R.strm.avail_in===0)break;if(ye=R.strm,ve=R.window,le=R.strstart+R.lookahead,ke=X,Ne=void 0,Ne=ye.avail_in,ke<Ne&&(Ne=ke),te=Ne===0?0:(ye.avail_in-=Ne,c.arraySet(ve,ye.input,ye.next_in,Ne,le),ye.state.wrap===1?ye.adler=h(ye.adler,ve,Ne,le):ye.state.wrap===2&&(ye.adler=g(ye.adler,ve,Ne,le)),ye.next_in+=Ne,ye.total_in+=Ne,Ne),R.lookahead+=te,R.lookahead+R.insert>=A)for(se=R.strstart-R.insert,R.ins_h=R.window[se],R.ins_h=(R.ins_h<<R.hash_shift^R.window[se+1])&R.hash_mask;R.insert&&(R.ins_h=(R.ins_h<<R.hash_shift^R.window[se+A-1])&R.hash_mask,R.prev[se&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=se,se++,R.insert--,!(R.lookahead+R.insert<A)););}while(R.lookahead<Y&&R.strm.avail_in!==0)}function ue(R,fe){for(var te,J;;){if(R.lookahead<Y){if(Z(R),R.lookahead<Y&&fe===f)return k;if(R.lookahead===0)break}if(te=0,R.lookahead>=A&&(R.ins_h=(R.ins_h<<R.hash_shift^R.window[R.strstart+A-1])&R.hash_mask,te=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart),te!==0&&R.strstart-te<=R.w_size-Y&&(R.match_length=V(R,te)),R.match_length>=A)if(J=u._tr_tally(R,R.strstart-R.match_start,R.match_length-A),R.lookahead-=R.match_length,R.match_length<=R.max_lazy_match&&R.lookahead>=A){for(R.match_length--;R.strstart++,R.ins_h=(R.ins_h<<R.hash_shift^R.window[R.strstart+A-1])&R.hash_mask,te=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart,--R.match_length!=0;);R.strstart++}else R.strstart+=R.match_length,R.match_length=0,R.ins_h=R.window[R.strstart],R.ins_h=(R.ins_h<<R.hash_shift^R.window[R.strstart+1])&R.hash_mask;else J=u._tr_tally(R,0,R.window[R.strstart]),R.lookahead--,R.strstart++;if(J&&(O(R,!1),R.strm.avail_out===0))return k}return R.insert=R.strstart<A-1?R.strstart:A-1,fe===m?(O(R,!0),R.strm.avail_out===0?P:I):R.last_lit&&(O(R,!1),R.strm.avail_out===0)?k:$}function ce(R,fe){for(var te,J,X;;){if(R.lookahead<Y){if(Z(R),R.lookahead<Y&&fe===f)return k;if(R.lookahead===0)break}if(te=0,R.lookahead>=A&&(R.ins_h=(R.ins_h<<R.hash_shift^R.window[R.strstart+A-1])&R.hash_mask,te=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart),R.prev_length=R.match_length,R.prev_match=R.match_start,R.match_length=A-1,te!==0&&R.prev_length<R.max_lazy_match&&R.strstart-te<=R.w_size-Y&&(R.match_length=V(R,te),R.match_length<=5&&(R.strategy===1||R.match_length===A&&4096<R.strstart-R.match_start)&&(R.match_length=A-1)),R.prev_length>=A&&R.match_length<=R.prev_length){for(X=R.strstart+R.lookahead-A,J=u._tr_tally(R,R.strstart-1-R.prev_match,R.prev_length-A),R.lookahead-=R.prev_length-1,R.prev_length-=2;++R.strstart<=X&&(R.ins_h=(R.ins_h<<R.hash_shift^R.window[R.strstart+A-1])&R.hash_mask,te=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart),--R.prev_length!=0;);if(R.match_available=0,R.match_length=A-1,R.strstart++,J&&(O(R,!1),R.strm.avail_out===0))return k}else if(R.match_available){if((J=u._tr_tally(R,0,R.window[R.strstart-1]))&&O(R,!1),R.strstart++,R.lookahead--,R.strm.avail_out===0)return k}else R.match_available=1,R.strstart++,R.lookahead--}return R.match_available&&(J=u._tr_tally(R,0,R.window[R.strstart-1]),R.match_available=0),R.insert=R.strstart<A-1?R.strstart:A-1,fe===m?(O(R,!0),R.strm.avail_out===0?P:I):R.last_lit&&(O(R,!1),R.strm.avail_out===0)?k:$}function me(R,fe,te,J,X){this.good_length=R,this.max_lazy=fe,this.nice_length=te,this.max_chain=J,this.func=X}function Te(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=F,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new c.Buf16(2*U),this.dyn_dtree=new c.Buf16(2*(2*z+1)),this.bl_tree=new c.Buf16(2*(2*B+1)),Q(this.dyn_ltree),Q(this.dyn_dtree),Q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new c.Buf16(D+1),this.heap=new c.Buf16(2*T+1),Q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new c.Buf16(2*T+1),Q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ie(R){var fe;return R&&R.state?(R.total_in=R.total_out=0,R.data_type=w,(fe=R.state).pending=0,fe.pending_out=0,fe.wrap<0&&(fe.wrap=-fe.wrap),fe.status=fe.wrap?_:L,R.adler=fe.wrap===2?0:1,fe.last_flush=f,u._tr_init(fe),b):q(R,y)}function Ce(R){var fe=ie(R);return fe===b&&(function(te){te.window_size=2*te.w_size,Q(te.head),te.max_lazy_match=l[te.level].max_lazy,te.good_match=l[te.level].good_length,te.nice_match=l[te.level].nice_length,te.max_chain_length=l[te.level].max_chain,te.strstart=0,te.block_start=0,te.lookahead=0,te.insert=0,te.match_length=te.prev_length=A-1,te.match_available=0,te.ins_h=0})(R.state),fe}function be(R,fe,te,J,X,se){if(!R)return y;var ye=1;if(fe===v&&(fe=6),J<0?(ye=0,J=-J):15<J&&(ye=2,J-=16),X<1||j<X||te!==F||J<8||15<J||fe<0||9<fe||se<0||C<se)return q(R,y);J===8&&(J=9);var ve=new Te;return(R.state=ve).strm=R,ve.wrap=ye,ve.gzhead=null,ve.w_bits=J,ve.w_size=1<<ve.w_bits,ve.w_mask=ve.w_size-1,ve.hash_bits=X+7,ve.hash_size=1<<ve.hash_bits,ve.hash_mask=ve.hash_size-1,ve.hash_shift=~~((ve.hash_bits+A-1)/A),ve.window=new c.Buf8(2*ve.w_size),ve.head=new c.Buf16(ve.hash_size),ve.prev=new c.Buf16(ve.w_size),ve.lit_bufsize=1<<X+6,ve.pending_buf_size=4*ve.lit_bufsize,ve.pending_buf=new c.Buf8(ve.pending_buf_size),ve.d_buf=1*ve.lit_bufsize,ve.l_buf=3*ve.lit_bufsize,ve.level=fe,ve.strategy=se,ve.method=te,Ce(R)}l=[new me(0,0,0,0,function(R,fe){var te=65535;for(te>R.pending_buf_size-5&&(te=R.pending_buf_size-5);;){if(R.lookahead<=1){if(Z(R),R.lookahead===0&&fe===f)return k;if(R.lookahead===0)break}R.strstart+=R.lookahead,R.lookahead=0;var J=R.block_start+te;if((R.strstart===0||R.strstart>=J)&&(R.lookahead=R.strstart-J,R.strstart=J,O(R,!1),R.strm.avail_out===0)||R.strstart-R.block_start>=R.w_size-Y&&(O(R,!1),R.strm.avail_out===0))return k}return R.insert=0,fe===m?(O(R,!0),R.strm.avail_out===0?P:I):(R.strstart>R.block_start&&(O(R,!1),R.strm.avail_out),k)}),new me(4,4,8,4,ue),new me(4,5,16,8,ue),new me(4,6,32,32,ue),new me(4,4,16,16,ce),new me(8,16,32,32,ce),new me(8,16,128,128,ce),new me(8,32,128,256,ce),new me(32,128,258,1024,ce),new me(32,258,258,4096,ce)],o.deflateInit=function(R,fe){return be(R,fe,F,15,8,0)},o.deflateInit2=be,o.deflateReset=Ce,o.deflateResetKeep=ie,o.deflateSetHeader=function(R,fe){return R&&R.state?R.state.wrap!==2?y:(R.state.gzhead=fe,b):y},o.deflate=function(R,fe){var te,J,X,se;if(!R||!R.state||5<fe||fe<0)return R?q(R,y):y;if(J=R.state,!R.output||!R.input&&R.avail_in!==0||J.status===666&&fe!==m)return q(R,R.avail_out===0?-5:y);if(J.strm=R,te=J.last_flush,J.last_flush=fe,J.status===_)if(J.wrap===2)R.adler=0,ee(J,31),ee(J,139),ee(J,8),J.gzhead?(ee(J,(J.gzhead.text?1:0)+(J.gzhead.hcrc?2:0)+(J.gzhead.extra?4:0)+(J.gzhead.name?8:0)+(J.gzhead.comment?16:0)),ee(J,255&J.gzhead.time),ee(J,J.gzhead.time>>8&255),ee(J,J.gzhead.time>>16&255),ee(J,J.gzhead.time>>24&255),ee(J,J.level===9?2:2<=J.strategy||J.level<2?4:0),ee(J,255&J.gzhead.os),J.gzhead.extra&&J.gzhead.extra.length&&(ee(J,255&J.gzhead.extra.length),ee(J,J.gzhead.extra.length>>8&255)),J.gzhead.hcrc&&(R.adler=g(R.adler,J.pending_buf,J.pending,0)),J.gzindex=0,J.status=69):(ee(J,0),ee(J,0),ee(J,0),ee(J,0),ee(J,0),ee(J,J.level===9?2:2<=J.strategy||J.level<2?4:0),ee(J,3),J.status=L);else{var ye=F+(J.w_bits-8<<4)<<8;ye|=(2<=J.strategy||J.level<2?0:J.level<6?1:J.level===6?2:3)<<6,J.strstart!==0&&(ye|=32),ye+=31-ye%31,J.status=L,W(J,ye),J.strstart!==0&&(W(J,R.adler>>>16),W(J,65535&R.adler)),R.adler=1}if(J.status===69)if(J.gzhead.extra){for(X=J.pending;J.gzindex<(65535&J.gzhead.extra.length)&&(J.pending!==J.pending_buf_size||(J.gzhead.hcrc&&J.pending>X&&(R.adler=g(R.adler,J.pending_buf,J.pending-X,X)),M(R),X=J.pending,J.pending!==J.pending_buf_size));)ee(J,255&J.gzhead.extra[J.gzindex]),J.gzindex++;J.gzhead.hcrc&&J.pending>X&&(R.adler=g(R.adler,J.pending_buf,J.pending-X,X)),J.gzindex===J.gzhead.extra.length&&(J.gzindex=0,J.status=73)}else J.status=73;if(J.status===73)if(J.gzhead.name){X=J.pending;do{if(J.pending===J.pending_buf_size&&(J.gzhead.hcrc&&J.pending>X&&(R.adler=g(R.adler,J.pending_buf,J.pending-X,X)),M(R),X=J.pending,J.pending===J.pending_buf_size)){se=1;break}se=J.gzindex<J.gzhead.name.length?255&J.gzhead.name.charCodeAt(J.gzindex++):0,ee(J,se)}while(se!==0);J.gzhead.hcrc&&J.pending>X&&(R.adler=g(R.adler,J.pending_buf,J.pending-X,X)),se===0&&(J.gzindex=0,J.status=91)}else J.status=91;if(J.status===91)if(J.gzhead.comment){X=J.pending;do{if(J.pending===J.pending_buf_size&&(J.gzhead.hcrc&&J.pending>X&&(R.adler=g(R.adler,J.pending_buf,J.pending-X,X)),M(R),X=J.pending,J.pending===J.pending_buf_size)){se=1;break}se=J.gzindex<J.gzhead.comment.length?255&J.gzhead.comment.charCodeAt(J.gzindex++):0,ee(J,se)}while(se!==0);J.gzhead.hcrc&&J.pending>X&&(R.adler=g(R.adler,J.pending_buf,J.pending-X,X)),se===0&&(J.status=103)}else J.status=103;if(J.status===103&&(J.gzhead.hcrc?(J.pending+2>J.pending_buf_size&&M(R),J.pending+2<=J.pending_buf_size&&(ee(J,255&R.adler),ee(J,R.adler>>8&255),R.adler=0,J.status=L)):J.status=L),J.pending!==0){if(M(R),R.avail_out===0)return J.last_flush=-1,b}else if(R.avail_in===0&&G(fe)<=G(te)&&fe!==m)return q(R,-5);if(J.status===666&&R.avail_in!==0)return q(R,-5);if(R.avail_in!==0||J.lookahead!==0||fe!==f&&J.status!==666){var ve=J.strategy===2?(function(le,ke){for(var Ne;;){if(le.lookahead===0&&(Z(le),le.lookahead===0)){if(ke===f)return k;break}if(le.match_length=0,Ne=u._tr_tally(le,0,le.window[le.strstart]),le.lookahead--,le.strstart++,Ne&&(O(le,!1),le.strm.avail_out===0))return k}return le.insert=0,ke===m?(O(le,!0),le.strm.avail_out===0?P:I):le.last_lit&&(O(le,!1),le.strm.avail_out===0)?k:$})(J,fe):J.strategy===3?(function(le,ke){for(var Ne,_e,Re,at,Be=le.window;;){if(le.lookahead<=H){if(Z(le),le.lookahead<=H&&ke===f)return k;if(le.lookahead===0)break}if(le.match_length=0,le.lookahead>=A&&0<le.strstart&&(_e=Be[Re=le.strstart-1])===Be[++Re]&&_e===Be[++Re]&&_e===Be[++Re]){at=le.strstart+H;do;while(_e===Be[++Re]&&_e===Be[++Re]&&_e===Be[++Re]&&_e===Be[++Re]&&_e===Be[++Re]&&_e===Be[++Re]&&_e===Be[++Re]&&_e===Be[++Re]&&Re<at);le.match_length=H-(at-Re),le.match_length>le.lookahead&&(le.match_length=le.lookahead)}if(le.match_length>=A?(Ne=u._tr_tally(le,1,le.match_length-A),le.lookahead-=le.match_length,le.strstart+=le.match_length,le.match_length=0):(Ne=u._tr_tally(le,0,le.window[le.strstart]),le.lookahead--,le.strstart++),Ne&&(O(le,!1),le.strm.avail_out===0))return k}return le.insert=0,ke===m?(O(le,!0),le.strm.avail_out===0?P:I):le.last_lit&&(O(le,!1),le.strm.avail_out===0)?k:$})(J,fe):l[J.level].func(J,fe);if(ve!==P&&ve!==I||(J.status=666),ve===k||ve===P)return R.avail_out===0&&(J.last_flush=-1),b;if(ve===$&&(fe===1?u._tr_align(J):fe!==5&&(u._tr_stored_block(J,0,0,!1),fe===3&&(Q(J.head),J.lookahead===0&&(J.strstart=0,J.block_start=0,J.insert=0))),M(R),R.avail_out===0))return J.last_flush=-1,b}return fe!==m?b:J.wrap<=0?1:(J.wrap===2?(ee(J,255&R.adler),ee(J,R.adler>>8&255),ee(J,R.adler>>16&255),ee(J,R.adler>>24&255),ee(J,255&R.total_in),ee(J,R.total_in>>8&255),ee(J,R.total_in>>16&255),ee(J,R.total_in>>24&255)):(W(J,R.adler>>>16),W(J,65535&R.adler)),M(R),0<J.wrap&&(J.wrap=-J.wrap),J.pending!==0?b:1)},o.deflateEnd=function(R){var fe;return R&&R.state?(fe=R.state.status)!==_&&fe!==69&&fe!==73&&fe!==91&&fe!==103&&fe!==L&&fe!==666?q(R,y):(R.state=null,fe===L?q(R,-3):b):y},o.deflateSetDictionary=function(R,fe){var te,J,X,se,ye,ve,le,ke,Ne=fe.length;if(!R||!R.state||(se=(te=R.state).wrap)===2||se===1&&te.status!==_||te.lookahead)return y;for(se===1&&(R.adler=h(R.adler,fe,Ne,0)),te.wrap=0,Ne>=te.w_size&&(se===0&&(Q(te.head),te.strstart=0,te.block_start=0,te.insert=0),ke=new c.Buf8(te.w_size),c.arraySet(ke,fe,Ne-te.w_size,te.w_size,0),fe=ke,Ne=te.w_size),ye=R.avail_in,ve=R.next_in,le=R.input,R.avail_in=Ne,R.next_in=0,R.input=fe,Z(te);te.lookahead>=A;){for(J=te.strstart,X=te.lookahead-(A-1);te.ins_h=(te.ins_h<<te.hash_shift^te.window[J+A-1])&te.hash_mask,te.prev[J&te.w_mask]=te.head[te.ins_h],te.head[te.ins_h]=J,J++,--X;);te.strstart=J,te.lookahead=A-1,Z(te)}return te.strstart+=te.lookahead,te.block_start=te.strstart,te.insert=te.lookahead,te.lookahead=0,te.match_length=te.prev_length=A-1,te.match_available=0,R.next_in=ve,R.input=le,R.avail_in=ye,te.wrap=se,b},o.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(s,i,o){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(s,i,o){i.exports=function(l,c){var u,h,g,p,f,m,b,y,v,C,w,F,j,T,z,B,U,D,A,H,Y,_,L,k,$;u=l.state,h=l.next_in,k=l.input,g=h+(l.avail_in-5),p=l.next_out,$=l.output,f=p-(c-l.avail_out),m=p+(l.avail_out-257),b=u.dmax,y=u.wsize,v=u.whave,C=u.wnext,w=u.window,F=u.hold,j=u.bits,T=u.lencode,z=u.distcode,B=(1<<u.lenbits)-1,U=(1<<u.distbits)-1;e:do{j<15&&(F+=k[h++]<<j,j+=8,F+=k[h++]<<j,j+=8),D=T[F&B];t:for(;;){if(F>>>=A=D>>>24,j-=A,(A=D>>>16&255)===0)$[p++]=65535&D;else{if(!(16&A)){if((64&A)==0){D=T[(65535&D)+(F&(1<<A)-1)];continue t}if(32&A){u.mode=12;break e}l.msg="invalid literal/length code",u.mode=30;break e}H=65535&D,(A&=15)&&(j<A&&(F+=k[h++]<<j,j+=8),H+=F&(1<<A)-1,F>>>=A,j-=A),j<15&&(F+=k[h++]<<j,j+=8,F+=k[h++]<<j,j+=8),D=z[F&U];n:for(;;){if(F>>>=A=D>>>24,j-=A,!(16&(A=D>>>16&255))){if((64&A)==0){D=z[(65535&D)+(F&(1<<A)-1)];continue n}l.msg="invalid distance code",u.mode=30;break e}if(Y=65535&D,j<(A&=15)&&(F+=k[h++]<<j,(j+=8)<A&&(F+=k[h++]<<j,j+=8)),b<(Y+=F&(1<<A)-1)){l.msg="invalid distance too far back",u.mode=30;break e}if(F>>>=A,j-=A,(A=p-f)<Y){if(v<(A=Y-A)&&u.sane){l.msg="invalid distance too far back",u.mode=30;break e}if(L=w,(_=0)===C){if(_+=y-A,A<H){for(H-=A;$[p++]=w[_++],--A;);_=p-Y,L=$}}else if(C<A){if(_+=y+C-A,(A-=C)<H){for(H-=A;$[p++]=w[_++],--A;);if(_=0,C<H){for(H-=A=C;$[p++]=w[_++],--A;);_=p-Y,L=$}}}else if(_+=C-A,A<H){for(H-=A;$[p++]=w[_++],--A;);_=p-Y,L=$}for(;2<H;)$[p++]=L[_++],$[p++]=L[_++],$[p++]=L[_++],H-=3;H&&($[p++]=L[_++],1<H&&($[p++]=L[_++]))}else{for(_=p-Y;$[p++]=$[_++],$[p++]=$[_++],$[p++]=$[_++],2<(H-=3););H&&($[p++]=$[_++],1<H&&($[p++]=$[_++]))}break}}break}}while(h<g&&p<m);h-=H=j>>3,F&=(1<<(j-=H<<3))-1,l.next_in=h,l.next_out=p,l.avail_in=h<g?g-h+5:5-(h-g),l.avail_out=p<m?m-p+257:257-(p-m),u.hold=F,u.bits=j}},{}],49:[function(s,i,o){var l=s("../utils/common"),c=s("./adler32"),u=s("./crc32"),h=s("./inffast"),g=s("./inftrees"),p=1,f=2,m=0,b=-2,y=1,v=852,C=592;function w(_){return(_>>>24&255)+(_>>>8&65280)+((65280&_)<<8)+((255&_)<<24)}function F(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new l.Buf16(320),this.work=new l.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function j(_){var L;return _&&_.state?(L=_.state,_.total_in=_.total_out=L.total=0,_.msg="",L.wrap&&(_.adler=1&L.wrap),L.mode=y,L.last=0,L.havedict=0,L.dmax=32768,L.head=null,L.hold=0,L.bits=0,L.lencode=L.lendyn=new l.Buf32(v),L.distcode=L.distdyn=new l.Buf32(C),L.sane=1,L.back=-1,m):b}function T(_){var L;return _&&_.state?((L=_.state).wsize=0,L.whave=0,L.wnext=0,j(_)):b}function z(_,L){var k,$;return _&&_.state?($=_.state,L<0?(k=0,L=-L):(k=1+(L>>4),L<48&&(L&=15)),L&&(L<8||15<L)?b:($.window!==null&&$.wbits!==L&&($.window=null),$.wrap=k,$.wbits=L,T(_))):b}function B(_,L){var k,$;return _?($=new F,(_.state=$).window=null,(k=z(_,L))!==m&&(_.state=null),k):b}var U,D,A=!0;function H(_){if(A){var L;for(U=new l.Buf32(512),D=new l.Buf32(32),L=0;L<144;)_.lens[L++]=8;for(;L<256;)_.lens[L++]=9;for(;L<280;)_.lens[L++]=7;for(;L<288;)_.lens[L++]=8;for(g(p,_.lens,0,288,U,0,_.work,{bits:9}),L=0;L<32;)_.lens[L++]=5;g(f,_.lens,0,32,D,0,_.work,{bits:5}),A=!1}_.lencode=U,_.lenbits=9,_.distcode=D,_.distbits=5}function Y(_,L,k,$){var P,I=_.state;return I.window===null&&(I.wsize=1<<I.wbits,I.wnext=0,I.whave=0,I.window=new l.Buf8(I.wsize)),$>=I.wsize?(l.arraySet(I.window,L,k-I.wsize,I.wsize,0),I.wnext=0,I.whave=I.wsize):($<(P=I.wsize-I.wnext)&&(P=$),l.arraySet(I.window,L,k-$,P,I.wnext),($-=P)?(l.arraySet(I.window,L,k-$,$,0),I.wnext=$,I.whave=I.wsize):(I.wnext+=P,I.wnext===I.wsize&&(I.wnext=0),I.whave<I.wsize&&(I.whave+=P))),0}o.inflateReset=T,o.inflateReset2=z,o.inflateResetKeep=j,o.inflateInit=function(_){return B(_,15)},o.inflateInit2=B,o.inflate=function(_,L){var k,$,P,I,q,G,Q,M,O,ee,W,V,Z,ue,ce,me,Te,ie,Ce,be,R,fe,te,J,X=0,se=new l.Buf8(4),ye=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!_||!_.state||!_.output||!_.input&&_.avail_in!==0)return b;(k=_.state).mode===12&&(k.mode=13),q=_.next_out,P=_.output,Q=_.avail_out,I=_.next_in,$=_.input,G=_.avail_in,M=k.hold,O=k.bits,ee=G,W=Q,fe=m;e:for(;;)switch(k.mode){case y:if(k.wrap===0){k.mode=13;break}for(;O<16;){if(G===0)break e;G--,M+=$[I++]<<O,O+=8}if(2&k.wrap&&M===35615){se[k.check=0]=255&M,se[1]=M>>>8&255,k.check=u(k.check,se,2,0),O=M=0,k.mode=2;break}if(k.flags=0,k.head&&(k.head.done=!1),!(1&k.wrap)||(((255&M)<<8)+(M>>8))%31){_.msg="incorrect header check",k.mode=30;break}if((15&M)!=8){_.msg="unknown compression method",k.mode=30;break}if(O-=4,R=8+(15&(M>>>=4)),k.wbits===0)k.wbits=R;else if(R>k.wbits){_.msg="invalid window size",k.mode=30;break}k.dmax=1<<R,_.adler=k.check=1,k.mode=512&M?10:12,O=M=0;break;case 2:for(;O<16;){if(G===0)break e;G--,M+=$[I++]<<O,O+=8}if(k.flags=M,(255&k.flags)!=8){_.msg="unknown compression method",k.mode=30;break}if(57344&k.flags){_.msg="unknown header flags set",k.mode=30;break}k.head&&(k.head.text=M>>8&1),512&k.flags&&(se[0]=255&M,se[1]=M>>>8&255,k.check=u(k.check,se,2,0)),O=M=0,k.mode=3;case 3:for(;O<32;){if(G===0)break e;G--,M+=$[I++]<<O,O+=8}k.head&&(k.head.time=M),512&k.flags&&(se[0]=255&M,se[1]=M>>>8&255,se[2]=M>>>16&255,se[3]=M>>>24&255,k.check=u(k.check,se,4,0)),O=M=0,k.mode=4;case 4:for(;O<16;){if(G===0)break e;G--,M+=$[I++]<<O,O+=8}k.head&&(k.head.xflags=255&M,k.head.os=M>>8),512&k.flags&&(se[0]=255&M,se[1]=M>>>8&255,k.check=u(k.check,se,2,0)),O=M=0,k.mode=5;case 5:if(1024&k.flags){for(;O<16;){if(G===0)break e;G--,M+=$[I++]<<O,O+=8}k.length=M,k.head&&(k.head.extra_len=M),512&k.flags&&(se[0]=255&M,se[1]=M>>>8&255,k.check=u(k.check,se,2,0)),O=M=0}else k.head&&(k.head.extra=null);k.mode=6;case 6:if(1024&k.flags&&(G<(V=k.length)&&(V=G),V&&(k.head&&(R=k.head.extra_len-k.length,k.head.extra||(k.head.extra=new Array(k.head.extra_len)),l.arraySet(k.head.extra,$,I,V,R)),512&k.flags&&(k.check=u(k.check,$,V,I)),G-=V,I+=V,k.length-=V),k.length))break e;k.length=0,k.mode=7;case 7:if(2048&k.flags){if(G===0)break e;for(V=0;R=$[I+V++],k.head&&R&&k.length<65536&&(k.head.name+=String.fromCharCode(R)),R&&V<G;);if(512&k.flags&&(k.check=u(k.check,$,V,I)),G-=V,I+=V,R)break e}else k.head&&(k.head.name=null);k.length=0,k.mode=8;case 8:if(4096&k.flags){if(G===0)break e;for(V=0;R=$[I+V++],k.head&&R&&k.length<65536&&(k.head.comment+=String.fromCharCode(R)),R&&V<G;);if(512&k.flags&&(k.check=u(k.check,$,V,I)),G-=V,I+=V,R)break e}else k.head&&(k.head.comment=null);k.mode=9;case 9:if(512&k.flags){for(;O<16;){if(G===0)break e;G--,M+=$[I++]<<O,O+=8}if(M!==(65535&k.check)){_.msg="header crc mismatch",k.mode=30;break}O=M=0}k.head&&(k.head.hcrc=k.flags>>9&1,k.head.done=!0),_.adler=k.check=0,k.mode=12;break;case 10:for(;O<32;){if(G===0)break e;G--,M+=$[I++]<<O,O+=8}_.adler=k.check=w(M),O=M=0,k.mode=11;case 11:if(k.havedict===0)return _.next_out=q,_.avail_out=Q,_.next_in=I,_.avail_in=G,k.hold=M,k.bits=O,2;_.adler=k.check=1,k.mode=12;case 12:if(L===5||L===6)break e;case 13:if(k.last){M>>>=7&O,O-=7&O,k.mode=27;break}for(;O<3;){if(G===0)break e;G--,M+=$[I++]<<O,O+=8}switch(k.last=1&M,O-=1,3&(M>>>=1)){case 0:k.mode=14;break;case 1:if(H(k),k.mode=20,L!==6)break;M>>>=2,O-=2;break e;case 2:k.mode=17;break;case 3:_.msg="invalid block type",k.mode=30}M>>>=2,O-=2;break;case 14:for(M>>>=7&O,O-=7&O;O<32;){if(G===0)break e;G--,M+=$[I++]<<O,O+=8}if((65535&M)!=(M>>>16^65535)){_.msg="invalid stored block lengths",k.mode=30;break}if(k.length=65535&M,O=M=0,k.mode=15,L===6)break e;case 15:k.mode=16;case 16:if(V=k.length){if(G<V&&(V=G),Q<V&&(V=Q),V===0)break e;l.arraySet(P,$,I,V,q),G-=V,I+=V,Q-=V,q+=V,k.length-=V;break}k.mode=12;break;case 17:for(;O<14;){if(G===0)break e;G--,M+=$[I++]<<O,O+=8}if(k.nlen=257+(31&M),M>>>=5,O-=5,k.ndist=1+(31&M),M>>>=5,O-=5,k.ncode=4+(15&M),M>>>=4,O-=4,286<k.nlen||30<k.ndist){_.msg="too many length or distance symbols",k.mode=30;break}k.have=0,k.mode=18;case 18:for(;k.have<k.ncode;){for(;O<3;){if(G===0)break e;G--,M+=$[I++]<<O,O+=8}k.lens[ye[k.have++]]=7&M,M>>>=3,O-=3}for(;k.have<19;)k.lens[ye[k.have++]]=0;if(k.lencode=k.lendyn,k.lenbits=7,te={bits:k.lenbits},fe=g(0,k.lens,0,19,k.lencode,0,k.work,te),k.lenbits=te.bits,fe){_.msg="invalid code lengths set",k.mode=30;break}k.have=0,k.mode=19;case 19:for(;k.have<k.nlen+k.ndist;){for(;me=(X=k.lencode[M&(1<<k.lenbits)-1])>>>16&255,Te=65535&X,!((ce=X>>>24)<=O);){if(G===0)break e;G--,M+=$[I++]<<O,O+=8}if(Te<16)M>>>=ce,O-=ce,k.lens[k.have++]=Te;else{if(Te===16){for(J=ce+2;O<J;){if(G===0)break e;G--,M+=$[I++]<<O,O+=8}if(M>>>=ce,O-=ce,k.have===0){_.msg="invalid bit length repeat",k.mode=30;break}R=k.lens[k.have-1],V=3+(3&M),M>>>=2,O-=2}else if(Te===17){for(J=ce+3;O<J;){if(G===0)break e;G--,M+=$[I++]<<O,O+=8}O-=ce,R=0,V=3+(7&(M>>>=ce)),M>>>=3,O-=3}else{for(J=ce+7;O<J;){if(G===0)break e;G--,M+=$[I++]<<O,O+=8}O-=ce,R=0,V=11+(127&(M>>>=ce)),M>>>=7,O-=7}if(k.have+V>k.nlen+k.ndist){_.msg="invalid bit length repeat",k.mode=30;break}for(;V--;)k.lens[k.have++]=R}}if(k.mode===30)break;if(k.lens[256]===0){_.msg="invalid code -- missing end-of-block",k.mode=30;break}if(k.lenbits=9,te={bits:k.lenbits},fe=g(p,k.lens,0,k.nlen,k.lencode,0,k.work,te),k.lenbits=te.bits,fe){_.msg="invalid literal/lengths set",k.mode=30;break}if(k.distbits=6,k.distcode=k.distdyn,te={bits:k.distbits},fe=g(f,k.lens,k.nlen,k.ndist,k.distcode,0,k.work,te),k.distbits=te.bits,fe){_.msg="invalid distances set",k.mode=30;break}if(k.mode=20,L===6)break e;case 20:k.mode=21;case 21:if(6<=G&&258<=Q){_.next_out=q,_.avail_out=Q,_.next_in=I,_.avail_in=G,k.hold=M,k.bits=O,h(_,W),q=_.next_out,P=_.output,Q=_.avail_out,I=_.next_in,$=_.input,G=_.avail_in,M=k.hold,O=k.bits,k.mode===12&&(k.back=-1);break}for(k.back=0;me=(X=k.lencode[M&(1<<k.lenbits)-1])>>>16&255,Te=65535&X,!((ce=X>>>24)<=O);){if(G===0)break e;G--,M+=$[I++]<<O,O+=8}if(me&&(240&me)==0){for(ie=ce,Ce=me,be=Te;me=(X=k.lencode[be+((M&(1<<ie+Ce)-1)>>ie)])>>>16&255,Te=65535&X,!(ie+(ce=X>>>24)<=O);){if(G===0)break e;G--,M+=$[I++]<<O,O+=8}M>>>=ie,O-=ie,k.back+=ie}if(M>>>=ce,O-=ce,k.back+=ce,k.length=Te,me===0){k.mode=26;break}if(32&me){k.back=-1,k.mode=12;break}if(64&me){_.msg="invalid literal/length code",k.mode=30;break}k.extra=15&me,k.mode=22;case 22:if(k.extra){for(J=k.extra;O<J;){if(G===0)break e;G--,M+=$[I++]<<O,O+=8}k.length+=M&(1<<k.extra)-1,M>>>=k.extra,O-=k.extra,k.back+=k.extra}k.was=k.length,k.mode=23;case 23:for(;me=(X=k.distcode[M&(1<<k.distbits)-1])>>>16&255,Te=65535&X,!((ce=X>>>24)<=O);){if(G===0)break e;G--,M+=$[I++]<<O,O+=8}if((240&me)==0){for(ie=ce,Ce=me,be=Te;me=(X=k.distcode[be+((M&(1<<ie+Ce)-1)>>ie)])>>>16&255,Te=65535&X,!(ie+(ce=X>>>24)<=O);){if(G===0)break e;G--,M+=$[I++]<<O,O+=8}M>>>=ie,O-=ie,k.back+=ie}if(M>>>=ce,O-=ce,k.back+=ce,64&me){_.msg="invalid distance code",k.mode=30;break}k.offset=Te,k.extra=15&me,k.mode=24;case 24:if(k.extra){for(J=k.extra;O<J;){if(G===0)break e;G--,M+=$[I++]<<O,O+=8}k.offset+=M&(1<<k.extra)-1,M>>>=k.extra,O-=k.extra,k.back+=k.extra}if(k.offset>k.dmax){_.msg="invalid distance too far back",k.mode=30;break}k.mode=25;case 25:if(Q===0)break e;if(V=W-Q,k.offset>V){if((V=k.offset-V)>k.whave&&k.sane){_.msg="invalid distance too far back",k.mode=30;break}Z=V>k.wnext?(V-=k.wnext,k.wsize-V):k.wnext-V,V>k.length&&(V=k.length),ue=k.window}else ue=P,Z=q-k.offset,V=k.length;for(Q<V&&(V=Q),Q-=V,k.length-=V;P[q++]=ue[Z++],--V;);k.length===0&&(k.mode=21);break;case 26:if(Q===0)break e;P[q++]=k.length,Q--,k.mode=21;break;case 27:if(k.wrap){for(;O<32;){if(G===0)break e;G--,M|=$[I++]<<O,O+=8}if(W-=Q,_.total_out+=W,k.total+=W,W&&(_.adler=k.check=k.flags?u(k.check,P,W,q-W):c(k.check,P,W,q-W)),W=Q,(k.flags?M:w(M))!==k.check){_.msg="incorrect data check",k.mode=30;break}O=M=0}k.mode=28;case 28:if(k.wrap&&k.flags){for(;O<32;){if(G===0)break e;G--,M+=$[I++]<<O,O+=8}if(M!==(4294967295&k.total)){_.msg="incorrect length check",k.mode=30;break}O=M=0}k.mode=29;case 29:fe=1;break e;case 30:fe=-3;break e;case 31:return-4;case 32:default:return b}return _.next_out=q,_.avail_out=Q,_.next_in=I,_.avail_in=G,k.hold=M,k.bits=O,(k.wsize||W!==_.avail_out&&k.mode<30&&(k.mode<27||L!==4))&&Y(_,_.output,_.next_out,W-_.avail_out)?(k.mode=31,-4):(ee-=_.avail_in,W-=_.avail_out,_.total_in+=ee,_.total_out+=W,k.total+=W,k.wrap&&W&&(_.adler=k.check=k.flags?u(k.check,P,W,_.next_out-W):c(k.check,P,W,_.next_out-W)),_.data_type=k.bits+(k.last?64:0)+(k.mode===12?128:0)+(k.mode===20||k.mode===15?256:0),(ee==0&&W===0||L===4)&&fe===m&&(fe=-5),fe)},o.inflateEnd=function(_){if(!_||!_.state)return b;var L=_.state;return L.window&&(L.window=null),_.state=null,m},o.inflateGetHeader=function(_,L){var k;return _&&_.state?(2&(k=_.state).wrap)==0?b:((k.head=L).done=!1,m):b},o.inflateSetDictionary=function(_,L){var k,$=L.length;return _&&_.state?(k=_.state).wrap!==0&&k.mode!==11?b:k.mode===11&&c(1,L,$,0)!==k.check?-3:Y(_,L,$,$)?(k.mode=31,-4):(k.havedict=1,m):b},o.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(s,i,o){var l=s("../utils/common"),c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],g=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(p,f,m,b,y,v,C,w){var F,j,T,z,B,U,D,A,H,Y=w.bits,_=0,L=0,k=0,$=0,P=0,I=0,q=0,G=0,Q=0,M=0,O=null,ee=0,W=new l.Buf16(16),V=new l.Buf16(16),Z=null,ue=0;for(_=0;_<=15;_++)W[_]=0;for(L=0;L<b;L++)W[f[m+L]]++;for(P=Y,$=15;1<=$&&W[$]===0;$--);if($<P&&(P=$),$===0)return y[v++]=20971520,y[v++]=20971520,w.bits=1,0;for(k=1;k<$&&W[k]===0;k++);for(P<k&&(P=k),_=G=1;_<=15;_++)if(G<<=1,(G-=W[_])<0)return-1;if(0<G&&(p===0||$!==1))return-1;for(V[1]=0,_=1;_<15;_++)V[_+1]=V[_]+W[_];for(L=0;L<b;L++)f[m+L]!==0&&(C[V[f[m+L]]++]=L);if(U=p===0?(O=Z=C,19):p===1?(O=c,ee-=257,Z=u,ue-=257,256):(O=h,Z=g,-1),_=k,B=v,q=L=M=0,T=-1,z=(Q=1<<(I=P))-1,p===1&&852<Q||p===2&&592<Q)return 1;for(;;){for(D=_-q,H=C[L]<U?(A=0,C[L]):C[L]>U?(A=Z[ue+C[L]],O[ee+C[L]]):(A=96,0),F=1<<_-q,k=j=1<<I;y[B+(M>>q)+(j-=F)]=D<<24|A<<16|H|0,j!==0;);for(F=1<<_-1;M&F;)F>>=1;if(F!==0?(M&=F-1,M+=F):M=0,L++,--W[_]==0){if(_===$)break;_=f[m+C[L]]}if(P<_&&(M&z)!==T){for(q===0&&(q=P),B+=k,G=1<<(I=_-q);I+q<$&&!((G-=W[I+q])<=0);)I++,G<<=1;if(Q+=1<<I,p===1&&852<Q||p===2&&592<Q)return 1;y[T=M&z]=P<<24|I<<16|B-v|0}}return M!==0&&(y[B+M]=_-q<<24|64<<16|0),w.bits=P,0}},{"../utils/common":41}],51:[function(s,i,o){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(s,i,o){var l=s("../utils/common"),c=0,u=1;function h(X){for(var se=X.length;0<=--se;)X[se]=0}var g=0,p=29,f=256,m=f+1+p,b=30,y=19,v=2*m+1,C=15,w=16,F=7,j=256,T=16,z=17,B=18,U=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],D=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Y=new Array(2*(m+2));h(Y);var _=new Array(2*b);h(_);var L=new Array(512);h(L);var k=new Array(256);h(k);var $=new Array(p);h($);var P,I,q,G=new Array(b);function Q(X,se,ye,ve,le){this.static_tree=X,this.extra_bits=se,this.extra_base=ye,this.elems=ve,this.max_length=le,this.has_stree=X&&X.length}function M(X,se){this.dyn_tree=X,this.max_code=0,this.stat_desc=se}function O(X){return X<256?L[X]:L[256+(X>>>7)]}function ee(X,se){X.pending_buf[X.pending++]=255&se,X.pending_buf[X.pending++]=se>>>8&255}function W(X,se,ye){X.bi_valid>w-ye?(X.bi_buf|=se<<X.bi_valid&65535,ee(X,X.bi_buf),X.bi_buf=se>>w-X.bi_valid,X.bi_valid+=ye-w):(X.bi_buf|=se<<X.bi_valid&65535,X.bi_valid+=ye)}function V(X,se,ye){W(X,ye[2*se],ye[2*se+1])}function Z(X,se){for(var ye=0;ye|=1&X,X>>>=1,ye<<=1,0<--se;);return ye>>>1}function ue(X,se,ye){var ve,le,ke=new Array(C+1),Ne=0;for(ve=1;ve<=C;ve++)ke[ve]=Ne=Ne+ye[ve-1]<<1;for(le=0;le<=se;le++){var _e=X[2*le+1];_e!==0&&(X[2*le]=Z(ke[_e]++,_e))}}function ce(X){var se;for(se=0;se<m;se++)X.dyn_ltree[2*se]=0;for(se=0;se<b;se++)X.dyn_dtree[2*se]=0;for(se=0;se<y;se++)X.bl_tree[2*se]=0;X.dyn_ltree[2*j]=1,X.opt_len=X.static_len=0,X.last_lit=X.matches=0}function me(X){8<X.bi_valid?ee(X,X.bi_buf):0<X.bi_valid&&(X.pending_buf[X.pending++]=X.bi_buf),X.bi_buf=0,X.bi_valid=0}function Te(X,se,ye,ve){var le=2*se,ke=2*ye;return X[le]<X[ke]||X[le]===X[ke]&&ve[se]<=ve[ye]}function ie(X,se,ye){for(var ve=X.heap[ye],le=ye<<1;le<=X.heap_len&&(le<X.heap_len&&Te(se,X.heap[le+1],X.heap[le],X.depth)&&le++,!Te(se,ve,X.heap[le],X.depth));)X.heap[ye]=X.heap[le],ye=le,le<<=1;X.heap[ye]=ve}function Ce(X,se,ye){var ve,le,ke,Ne,_e=0;if(X.last_lit!==0)for(;ve=X.pending_buf[X.d_buf+2*_e]<<8|X.pending_buf[X.d_buf+2*_e+1],le=X.pending_buf[X.l_buf+_e],_e++,ve===0?V(X,le,se):(V(X,(ke=k[le])+f+1,se),(Ne=U[ke])!==0&&W(X,le-=$[ke],Ne),V(X,ke=O(--ve),ye),(Ne=D[ke])!==0&&W(X,ve-=G[ke],Ne)),_e<X.last_lit;);V(X,j,se)}function be(X,se){var ye,ve,le,ke=se.dyn_tree,Ne=se.stat_desc.static_tree,_e=se.stat_desc.has_stree,Re=se.stat_desc.elems,at=-1;for(X.heap_len=0,X.heap_max=v,ye=0;ye<Re;ye++)ke[2*ye]!==0?(X.heap[++X.heap_len]=at=ye,X.depth[ye]=0):ke[2*ye+1]=0;for(;X.heap_len<2;)ke[2*(le=X.heap[++X.heap_len]=at<2?++at:0)]=1,X.depth[le]=0,X.opt_len--,_e&&(X.static_len-=Ne[2*le+1]);for(se.max_code=at,ye=X.heap_len>>1;1<=ye;ye--)ie(X,ke,ye);for(le=Re;ye=X.heap[1],X.heap[1]=X.heap[X.heap_len--],ie(X,ke,1),ve=X.heap[1],X.heap[--X.heap_max]=ye,X.heap[--X.heap_max]=ve,ke[2*le]=ke[2*ye]+ke[2*ve],X.depth[le]=(X.depth[ye]>=X.depth[ve]?X.depth[ye]:X.depth[ve])+1,ke[2*ye+1]=ke[2*ve+1]=le,X.heap[1]=le++,ie(X,ke,1),2<=X.heap_len;);X.heap[--X.heap_max]=X.heap[1],(function(Be,mt){var ct,it,bt,ot,kt,nn,Ft=mt.dyn_tree,bn=mt.max_code,un=mt.stat_desc.static_tree,Yt=mt.stat_desc.has_stree,sn=mt.stat_desc.extra_bits,Qt=mt.stat_desc.extra_base,jt=mt.stat_desc.max_length,Wt=0;for(ot=0;ot<=C;ot++)Be.bl_count[ot]=0;for(Ft[2*Be.heap[Be.heap_max]+1]=0,ct=Be.heap_max+1;ct<v;ct++)jt<(ot=Ft[2*Ft[2*(it=Be.heap[ct])+1]+1]+1)&&(ot=jt,Wt++),Ft[2*it+1]=ot,bn<it||(Be.bl_count[ot]++,kt=0,Qt<=it&&(kt=sn[it-Qt]),nn=Ft[2*it],Be.opt_len+=nn*(ot+kt),Yt&&(Be.static_len+=nn*(un[2*it+1]+kt)));if(Wt!==0){do{for(ot=jt-1;Be.bl_count[ot]===0;)ot--;Be.bl_count[ot]--,Be.bl_count[ot+1]+=2,Be.bl_count[jt]--,Wt-=2}while(0<Wt);for(ot=jt;ot!==0;ot--)for(it=Be.bl_count[ot];it!==0;)bn<(bt=Be.heap[--ct])||(Ft[2*bt+1]!==ot&&(Be.opt_len+=(ot-Ft[2*bt+1])*Ft[2*bt],Ft[2*bt+1]=ot),it--)}})(X,se),ue(ke,at,X.bl_count)}function R(X,se,ye){var ve,le,ke=-1,Ne=se[1],_e=0,Re=7,at=4;for(Ne===0&&(Re=138,at=3),se[2*(ye+1)+1]=65535,ve=0;ve<=ye;ve++)le=Ne,Ne=se[2*(ve+1)+1],++_e<Re&&le===Ne||(_e<at?X.bl_tree[2*le]+=_e:le!==0?(le!==ke&&X.bl_tree[2*le]++,X.bl_tree[2*T]++):_e<=10?X.bl_tree[2*z]++:X.bl_tree[2*B]++,ke=le,at=(_e=0)===Ne?(Re=138,3):le===Ne?(Re=6,3):(Re=7,4))}function fe(X,se,ye){var ve,le,ke=-1,Ne=se[1],_e=0,Re=7,at=4;for(Ne===0&&(Re=138,at=3),ve=0;ve<=ye;ve++)if(le=Ne,Ne=se[2*(ve+1)+1],!(++_e<Re&&le===Ne)){if(_e<at)for(;V(X,le,X.bl_tree),--_e!=0;);else le!==0?(le!==ke&&(V(X,le,X.bl_tree),_e--),V(X,T,X.bl_tree),W(X,_e-3,2)):_e<=10?(V(X,z,X.bl_tree),W(X,_e-3,3)):(V(X,B,X.bl_tree),W(X,_e-11,7));ke=le,at=(_e=0)===Ne?(Re=138,3):le===Ne?(Re=6,3):(Re=7,4)}}h(G);var te=!1;function J(X,se,ye,ve){W(X,(g<<1)+(ve?1:0),3),(function(le,ke,Ne,_e){me(le),ee(le,Ne),ee(le,~Ne),l.arraySet(le.pending_buf,le.window,ke,Ne,le.pending),le.pending+=Ne})(X,se,ye)}o._tr_init=function(X){te||((function(){var se,ye,ve,le,ke,Ne=new Array(C+1);for(le=ve=0;le<p-1;le++)for($[le]=ve,se=0;se<1<<U[le];se++)k[ve++]=le;for(k[ve-1]=le,le=ke=0;le<16;le++)for(G[le]=ke,se=0;se<1<<D[le];se++)L[ke++]=le;for(ke>>=7;le<b;le++)for(G[le]=ke<<7,se=0;se<1<<D[le]-7;se++)L[256+ke++]=le;for(ye=0;ye<=C;ye++)Ne[ye]=0;for(se=0;se<=143;)Y[2*se+1]=8,se++,Ne[8]++;for(;se<=255;)Y[2*se+1]=9,se++,Ne[9]++;for(;se<=279;)Y[2*se+1]=7,se++,Ne[7]++;for(;se<=287;)Y[2*se+1]=8,se++,Ne[8]++;for(ue(Y,m+1,Ne),se=0;se<b;se++)_[2*se+1]=5,_[2*se]=Z(se,5);P=new Q(Y,U,f+1,m,C),I=new Q(_,D,0,b,C),q=new Q(new Array(0),A,0,y,F)})(),te=!0),X.l_desc=new M(X.dyn_ltree,P),X.d_desc=new M(X.dyn_dtree,I),X.bl_desc=new M(X.bl_tree,q),X.bi_buf=0,X.bi_valid=0,ce(X)},o._tr_stored_block=J,o._tr_flush_block=function(X,se,ye,ve){var le,ke,Ne=0;0<X.level?(X.strm.data_type===2&&(X.strm.data_type=(function(_e){var Re,at=4093624447;for(Re=0;Re<=31;Re++,at>>>=1)if(1&at&&_e.dyn_ltree[2*Re]!==0)return c;if(_e.dyn_ltree[18]!==0||_e.dyn_ltree[20]!==0||_e.dyn_ltree[26]!==0)return u;for(Re=32;Re<f;Re++)if(_e.dyn_ltree[2*Re]!==0)return u;return c})(X)),be(X,X.l_desc),be(X,X.d_desc),Ne=(function(_e){var Re;for(R(_e,_e.dyn_ltree,_e.l_desc.max_code),R(_e,_e.dyn_dtree,_e.d_desc.max_code),be(_e,_e.bl_desc),Re=y-1;3<=Re&&_e.bl_tree[2*H[Re]+1]===0;Re--);return _e.opt_len+=3*(Re+1)+5+5+4,Re})(X),le=X.opt_len+3+7>>>3,(ke=X.static_len+3+7>>>3)<=le&&(le=ke)):le=ke=ye+5,ye+4<=le&&se!==-1?J(X,se,ye,ve):X.strategy===4||ke===le?(W(X,2+(ve?1:0),3),Ce(X,Y,_)):(W(X,4+(ve?1:0),3),(function(_e,Re,at,Be){var mt;for(W(_e,Re-257,5),W(_e,at-1,5),W(_e,Be-4,4),mt=0;mt<Be;mt++)W(_e,_e.bl_tree[2*H[mt]+1],3);fe(_e,_e.dyn_ltree,Re-1),fe(_e,_e.dyn_dtree,at-1)})(X,X.l_desc.max_code+1,X.d_desc.max_code+1,Ne+1),Ce(X,X.dyn_ltree,X.dyn_dtree)),ce(X),ve&&me(X)},o._tr_tally=function(X,se,ye){return X.pending_buf[X.d_buf+2*X.last_lit]=se>>>8&255,X.pending_buf[X.d_buf+2*X.last_lit+1]=255&se,X.pending_buf[X.l_buf+X.last_lit]=255&ye,X.last_lit++,se===0?X.dyn_ltree[2*ye]++:(X.matches++,se--,X.dyn_ltree[2*(k[ye]+f+1)]++,X.dyn_dtree[2*O(se)]++),X.last_lit===X.lit_bufsize-1},o._tr_align=function(X){W(X,2,3),V(X,j,Y),(function(se){se.bi_valid===16?(ee(se,se.bi_buf),se.bi_buf=0,se.bi_valid=0):8<=se.bi_valid&&(se.pending_buf[se.pending++]=255&se.bi_buf,se.bi_buf>>=8,se.bi_valid-=8)})(X)}},{"../utils/common":41}],53:[function(s,i,o){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(s,i,o){(function(l){(function(c,u){if(!c.setImmediate){var h,g,p,f,m=1,b={},y=!1,v=c.document,C=Object.getPrototypeOf&&Object.getPrototypeOf(c);C=C&&C.setTimeout?C:c,h={}.toString.call(c.process)==="[object process]"?function(T){process.nextTick(function(){F(T)})}:(function(){if(c.postMessage&&!c.importScripts){var T=!0,z=c.onmessage;return c.onmessage=function(){T=!1},c.postMessage("","*"),c.onmessage=z,T}})()?(f="setImmediate$"+Math.random()+"$",c.addEventListener?c.addEventListener("message",j,!1):c.attachEvent("onmessage",j),function(T){c.postMessage(f+T,"*")}):c.MessageChannel?((p=new MessageChannel).port1.onmessage=function(T){F(T.data)},function(T){p.port2.postMessage(T)}):v&&"onreadystatechange"in v.createElement("script")?(g=v.documentElement,function(T){var z=v.createElement("script");z.onreadystatechange=function(){F(T),z.onreadystatechange=null,g.removeChild(z),z=null},g.appendChild(z)}):function(T){setTimeout(F,0,T)},C.setImmediate=function(T){typeof T!="function"&&(T=new Function(""+T));for(var z=new Array(arguments.length-1),B=0;B<z.length;B++)z[B]=arguments[B+1];var U={callback:T,args:z};return b[m]=U,h(m),m++},C.clearImmediate=w}function w(T){delete b[T]}function F(T){if(y)setTimeout(F,0,T);else{var z=b[T];if(z){y=!0;try{(function(B){var U=B.callback,D=B.args;switch(D.length){case 0:U();break;case 1:U(D[0]);break;case 2:U(D[0],D[1]);break;case 3:U(D[0],D[1],D[2]);break;default:U.apply(u,D)}})(z)}finally{w(T),y=!1}}}}function j(T){T.source===c&&typeof T.data=="string"&&T.data.indexOf(f)===0&&F(+T.data.slice(f.length))}})(typeof self>"u"?l===void 0?this:l:self)}).call(this,typeof tl<"u"?tl:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(lu)),lu.exports}var u_=d_();const lg=Ll(u_);function f_({onBack:e}){const[n,s]=N.useState(!1),[i,o]=N.useState(!1),[l,c]=N.useState(!1),[u,h]=N.useState(!1),[g,p]=N.useState(!1),[f,m]=N.useState(!1),[b,y]=N.useState(!1),[v,C]=N.useState(!1),[w,F]=N.useState({totalSize:0,userDataSize:0,chatMessagesSize:0,characterDataSize:0,chatSettingsSize:0,worldBooksSize:0,otherDataSize:0,chatImagesSize:0,otherImagesSize:0,stickersSize:0,healthScheduleSize:0,imageStats:{totalImages:0,totalSize:0,categories:{}}});N.useEffect(()=>{T()},[]);const j=(H,Y=2)=>{if(H===0)return"0 B";const _=1024,L=Y<0?0:Y,k=["B","KB","MB","GB","TB"],$=Math.floor(Math.log(H)/Math.log(_));return parseFloat((H/Math.pow(_,$)).toFixed(L))+" "+k[$]},T=async()=>{try{const H=await he.getStoreSize(re.USER_DATA),Y=await he.getStoreSize(re.CHAT_MESSAGES),_=await he.getStoreSize(re.CHARACTERS),L=await he.getStoreSize(re.CHAT_SETTINGS),k=await he.getStoreSize(re.WORLD_BOOKS),$=await he.getStoreSize(re.API_SETTINGS),P=await he.getStoreSize(re.APPEARANCE),I=await he.getStoreSize(re.MISC),q=await he.getStoreSize(re.CHATS),G=await he.getStoreSize(re.HEALTH),Q=await he.getStoreSize(re.SCHEDULE),M=await he.getStoreSize(re.STICKERS),O=await he.getStoreSize(re.BUBBLE_PRESETS),ee=await he.getStoreSize(re.AI_TASKS),W=$+P+I+q+H+L+O+ee,V=G+Q,Z=await yb(),ue=Object.values(Z).reduce((te,{count:J})=>te+J,0),me=Object.values(Z).reduce((te,{size:J})=>te+parseFloat(J),0)*1024,ie=parseFloat(Z[xn.CHAT_IMAGES]?.size||"0.00")*1024,be=parseFloat(Z[xn.MEMES]?.size||"0.00")*1024,R=me-ie-be,fe=Y+_+k+W+me+M+V;F({totalSize:fe,userDataSize:H,chatMessagesSize:Y,characterDataSize:_,chatSettingsSize:L,worldBooksSize:k,otherDataSize:W,chatImagesSize:ie,otherImagesSize:R,stickersSize:M+be,healthScheduleSize:V,imageStats:{totalImages:ue,totalSize:me,categories:Z}})}catch(H){console.error("Failed to load stats:",H)}},z=async()=>{m(!0);try{const Y={...await he.exportAll(),exportTime:new Date().toISOString(),version:2},_=JSON.stringify(Y,null,2),L=new Blob([_],{type:"application/json"}),k=URL.createObjectURL(L),$=document.createElement("a");$.href=k,$.download=`touken-os-data-${new Date().getTime()}.json`,$.click(),URL.revokeObjectURL(k),h(!0),setTimeout(()=>h(!1),2e3)}catch(H){console.error("Export JSON failed:",H),alert("")}finally{m(!1)}},B=async()=>{m(!0);try{const H=new lg,_={...await he.exportAll(),exportTime:new Date().toISOString(),version:2};H.file("data.json",JSON.stringify(_,null,2));const L=await R6(),k=H.folder("images");for(const[q,{blob:G,category:Q}]of Object.entries(L)){const M=G.type.split("/")[1]||"png";k?.folder(Q)?.file(`${q}.${M}`,G)}const $=await H.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}}),P=URL.createObjectURL($),I=document.createElement("a");I.href=P,I.download=`touken-os-backup-${new Date().getTime()}.zip`,I.click(),URL.revokeObjectURL(P),h(!0),setTimeout(()=>h(!1),2e3)}catch(H){console.error("Export Data failed:",H),alert("")}finally{m(!1)}},U=()=>{const H=document.createElement("input");H.type="file",H.accept=".zip,.json,application/zip,application/json",H.onchange=async Y=>{const _=Y.target.files?.[0];if(_){y(!0);try{if(_.name.endsWith(".json")){const k=await _.text(),{exportTime:$,version:P,...I}=JSON.parse(k);await he.importAll(I)}else{const k=await lg.loadAsync(_),$=k.file("data.json");if(!$)throw new Error("Invalid backup file: missing data.json");const P=await $.async("text"),{exportTime:I,version:q,...G}=JSON.parse(P);await he.importAll(G);const Q=k.folder("images");if(Q){const M={},O=[];Q.forEach((ee,W)=>{W.dir||O.push(W.async("blob").then(V=>{const Z=ee.split("/"),ce=Z[Z.length-1].replace(/\.[^/.]+$/,"");M[ce]=V}))}),await Promise.all(O),Object.keys(M).length>0&&await B6(M)}}p(!0),setTimeout(()=>window.location.reload(),1500)}catch(L){console.error("Import failed:",L),alert("")}finally{y(!1)}}},H.click()},D=async()=>{C(!0);try{await he.clearAll(),await P6(),Uu(!0),c(!0),s(!1),setTimeout(()=>window.location.reload(),1500)}catch(H){console.error("Clear failed:",H),alert("")}finally{C(!1)}},A=async()=>{C(!0);try{const Y=(await $f()).filter(_=>_.category===xn.CHAT_IMAGES);console.log(`Deleting ${Y.length} chat images...`);for(const _ of Y)await ea(_.originalKey);c(!0),o(!1),await T(),setTimeout(()=>c(!1),2e3)}catch(H){console.error("Clear chat images failed:",H),alert("")}finally{C(!1)}};return r.jsx(Gl,{title:"",onBack:e,children:r.jsxs("div",{className:"space-y-6 text-slate-800",children:[r.jsx(ze,{children:(u||g||l)&&r.jsx(je.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"fixed top-24 left-0 right-0 flex justify-center z-[60] pointer-events-none px-4",children:r.jsxs("div",{className:"bg-slate-800 text-white px-5 py-3 border border-slate-700 shadow-xl flex items-center gap-3 backdrop-blur-md",children:[r.jsx(Dt,{className:"w-4 h-4 text-green-400",strokeWidth:3}),r.jsxs("span",{className:"text-xs font-bold tracking-wider uppercase",children:[u&&"ARCHIVE_EXPORT_COMPLETE",g&&"DATA_RESTORED_REBOOTING",l&&"OPERATION_COMPLETE"]})]})})}),r.jsxs("div",{className:"bg-white p-5 border border-slate-300 relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-0 w-2 h-2 border-l-2 border-t-2 border-slate-800"}),r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(hN,{className:"w-5 h-5 text-slate-600"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xs font-bold text-slate-500 tracking-widest uppercase",children:""}),r.jsx("p",{className:"text-[10px] text-slate-400 font-mono",children:"STATUS: MOUNTED"})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:"text-xl font-black text-slate-800 tracking-tighter",children:j(w.totalSize).split(" ")[0]}),r.jsx("span",{className:"text-xs text-slate-400 font-bold ml-1",children:j(w.totalSize).split(" ")[1]})]})]}),r.jsxs("div",{className:"h-3 w-full bg-slate-100 border border-slate-200 flex mb-6",children:[r.jsx("div",{className:"bg-blue-600 h-full border-r border-white",style:{width:`${Math.min(100,w.chatMessagesSize/w.totalSize*100)}%`}}),r.jsx("div",{className:"bg-purple-500 h-full border-r border-white",style:{width:`${Math.min(100,w.characterDataSize/w.totalSize*100)}%`}}),r.jsx("div",{className:"bg-emerald-500 h-full border-r border-white",style:{width:`${Math.min(100,w.chatImagesSize/w.totalSize*100)}%`}}),r.jsx("div",{className:"bg-teal-500 h-full border-r border-white",style:{width:`${Math.min(100,w.otherImagesSize/w.totalSize*100)}%`}}),r.jsx("div",{className:"bg-orange-500 h-full border-r border-white",style:{width:`${Math.min(100,w.worldBooksSize/w.totalSize*100)}%`}}),r.jsx("div",{className:"bg-pink-500 h-full border-r border-white",style:{width:`${Math.min(100,w.stickersSize/w.totalSize*100)}%`}}),r.jsx("div",{className:"bg-cyan-500 h-full border-r border-white",style:{width:`${Math.min(100,w.healthScheduleSize/w.totalSize*100)}%`}}),r.jsx("div",{className:"bg-slate-500 h-full",style:{width:`${Math.min(100,w.otherDataSize/w.totalSize*100)}%`}})]}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{label:"",value:w.chatMessagesSize,icon:MN,color:"text-blue-600"},{label:"",value:w.characterDataSize,icon:is,color:"text-purple-600"},{label:"",value:w.chatImagesSize,icon:Xr,color:"text-emerald-600"},{label:"",value:w.stickersSize,icon:y4,color:"text-pink-600"},{label:"",value:w.otherImagesSize,icon:Xr,color:"text-teal-600"},{label:"",value:w.worldBooksSize,icon:db,color:"text-orange-600"},{label:"",value:w.otherDataSize,icon:Lu,color:"text-slate-600"},{label:"",value:w.healthScheduleSize,icon:qs,color:"text-cyan-600"}].map((H,Y)=>r.jsxs("div",{className:"flex items-center justify-between p-2 border border-slate-100 bg-slate-50/50",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(H.icon,{className:`w-3 h-3 ${H.color}`}),r.jsx("span",{className:`text-[10px] font-bold ${H.color}`,children:H.label})]}),r.jsx("span",{className:"text-[10px] font-mono text-slate-500",children:j(H.value)})]},Y))})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-3 ml-1 flex items-center gap-2",children:[r.jsx(Lf,{className:"w-3 h-3"})," "]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("button",{onClick:z,disabled:f,className:"p-4 bg-white border border-slate-300 active:border-slate-800 hover:border-slate-800 active:bg-slate-50 transition-all flex flex-col gap-2 group",children:[r.jsxs("div",{className:"flex items-center justify-between w-full mb-1",children:[r.jsx(ub,{className:"w-5 h-5 text-slate-400 group-active:text-slate-800 group-hover:text-slate-800 transition-colors"}),r.jsx("span",{className:"text-[9px] font-mono text-slate-300 group-active:text-slate-500 group-hover:text-slate-500",children:"JSON"})]}),r.jsxs("div",{className:"text-left",children:[r.jsx("h3",{className:"text-sm font-bold text-slate-800",children:""}),r.jsx("p",{className:"text-[10px] text-slate-400",children:""})]})]}),r.jsxs("button",{onClick:B,disabled:f,className:"p-4 bg-white border border-slate-300 active:border-slate-800 hover:border-slate-800 active:bg-slate-50 transition-all flex flex-col gap-2 group",children:[r.jsxs("div",{className:"flex items-center justify-between w-full mb-1",children:[r.jsx(Lu,{className:"w-5 h-5 text-slate-400 group-active:text-slate-800 group-hover:text-slate-800 transition-colors"}),r.jsx("span",{className:"text-[9px] font-mono text-slate-300 group-active:text-slate-500 group-hover:text-slate-500",children:"ZIP"})]}),r.jsxs("div",{className:"text-left",children:[r.jsx("h3",{className:"text-sm font-bold text-slate-800",children:""}),r.jsx("p",{className:"text-[10px] text-slate-400",children:""})]})]})]}),r.jsxs("button",{onClick:U,disabled:b,className:"w-full p-4 bg-white border border-slate-300 active:border-slate-800 hover:border-slate-800 active:bg-slate-50 transition-all flex items-center justify-between group",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-10 h-10 border border-slate-200 bg-slate-50 flex items-center justify-center text-slate-600 group-active:bg-slate-800 group-active:text-white group-hover:bg-slate-800 group-hover:text-white transition-colors",children:r.jsx(zf,{className:"w-5 h-5"})}),r.jsxs("div",{className:"text-left",children:[r.jsx("h3",{className:"text-sm font-bold text-slate-800",children:""}),r.jsx("p",{className:"text-[10px] text-slate-400",children:"RESTORE FROM ARCHIVE"})]})]}),r.jsx("div",{className:"border border-slate-300 px-3 py-1 text-[10px] font-bold text-slate-600 uppercase active:bg-slate-800 active:text-white hover:bg-slate-800 hover:text-white transition-colors",children:""})]}),r.jsxs("button",{onClick:()=>o(!0),className:"w-full p-4 border border-slate-200 bg-slate-50/50 text-slate-600 font-bold text-sm flex items-center justify-center gap-2 active:bg-slate-100 active:border-slate-300 hover:bg-slate-100 hover:border-slate-300 transition-all group",children:[r.jsx(tN,{className:"w-4 h-4 text-slate-400 group-hover:text-slate-600"})," (CLEAR CACHE IMAGES)"]}),r.jsxs("button",{onClick:()=>s(!0),className:"w-full mt-6 p-4 border border-red-200 bg-red-50/30 text-red-600 font-bold text-sm flex items-center justify-center gap-2 active:bg-red-50 active:border-red-300 hover:bg-red-50 hover:border-red-300 transition-all",children:[r.jsx(Hn,{className:"w-4 h-4"})," (ERASE ALL DATA)"]})]})]}),r.jsx(ze,{children:n&&r.jsx(je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[70] px-6",children:r.jsxs(je.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:350,damping:30},className:"bg-white border-2 border-slate-800 p-6 w-full max-w-sm shadow-[8px_8px_0px_rgba(0,0,0,0.2)] relative",onClick:H=>H.stopPropagation(),children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-slate-100 pb-4",children:[r.jsx(B4,{className:"w-6 h-6 text-red-600"}),r.jsx("h3",{className:"text-lg font-black text-slate-800 tracking-tight uppercase",children:""})]}),r.jsxs("p",{className:"text-sm text-slate-600 mb-8 leading-relaxed font-medium",children:["",r.jsx("span",{className:"text-red-600 font-bold bg-red-50 px-1",children:""}),"",r.jsx("br",{}),r.jsx("br",{}),r.jsx("span",{className:"text-xs text-slate-400",children:"SYSTEM ID: LOCAL_USER"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>s(!1),className:"flex-1 py-3 border border-slate-300 text-slate-600 font-bold text-sm active:bg-slate-50 hover:bg-slate-50 transition-colors uppercase tracking-wider",children:""}),r.jsx("button",{onClick:D,className:"flex-1 py-3 bg-red-600 text-white font-bold text-sm active:bg-red-700 hover:bg-red-700 transition-colors shadow-lg shadow-red-200 uppercase tracking-wider",children:""})]})]})},"clear-modal-overlay")}),r.jsx(ze,{children:i&&r.jsx(je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[70] px-6",children:r.jsxs(je.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:350,damping:30},className:"bg-white border-2 border-slate-800 p-6 w-full max-w-sm shadow-[8px_8px_0px_rgba(0,0,0,0.2)] relative",onClick:H=>H.stopPropagation(),children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-slate-100 pb-4",children:[r.jsx(Xr,{className:"w-6 h-6 text-orange-500"}),r.jsx("h3",{className:"text-lg font-black text-slate-800 tracking-tight uppercase",children:""})]}),r.jsxs("p",{className:"text-sm text-slate-600 mb-8 leading-relaxed font-medium",children:["",r.jsx("br",{}),r.jsx("span",{className:"text-orange-500 font-bold",children:""}),r.jsx("br",{}),r.jsx("br",{}),r.jsxs("span",{className:"text-xs text-slate-400",children:["TARGET: ",j(w.chatImagesSize)," / ",w.imageStats.categories[xn.CHAT_IMAGES]?.count||0," FILES"]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>o(!1),className:"flex-1 py-3 border border-slate-300 text-slate-600 font-bold text-sm active:bg-slate-50 hover:bg-slate-50 transition-colors uppercase tracking-wider",children:""}),r.jsx("button",{onClick:A,disabled:v,className:"flex-1 py-3 bg-slate-800 text-white font-bold text-sm active:bg-slate-900 hover:bg-slate-900 transition-colors shadow-lg shadow-slate-200 uppercase tracking-wider",children:v?"...":""})]})]})},"images-modal-overlay")})]})})}function h_({onBack:e}){return r.jsx(Gl,{title:"",onBack:e,children:r.jsxs("div",{className:"space-y-8 text-slate-800",children:[r.jsxs("div",{className:"bg-white border border-slate-200 p-6 relative overflow-hidden shadow-sm group",children:[r.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-slate-50 -mr-8 -mt-8 rotate-45 transform transition-transform group-hover:scale-150 duration-700 ease-out"}),r.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-slate-800 text-white flex items-center justify-center mb-4 shadow-lg shadow-slate-200",children:r.jsx(bb,{className:"w-8 h-8"})}),r.jsx("h2",{className:"text-xl font-black tracking-tight uppercase",children:"Touken OS"}),r.jsx("p",{className:"text-[10px] font-bold text-slate-400 tracking-[0.3em] uppercase mt-1",children:"Government Terminal"}),r.jsx("div",{className:"mt-4 inline-flex items-center px-3 py-1 bg-slate-100 border border-slate-200 rounded-none text-xs font-mono text-slate-600",children:"v1.0 (Beta)"})]})]}),r.jsxs("section",{className:"bg-slate-50 border border-slate-200 p-5 relative",children:[r.jsx("div",{className:"absolute top-0 left-0 w-2 h-2 bg-slate-300"}),r.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 bg-slate-300"}),r.jsx("div",{className:"absolute bottom-0 left-0 w-2 h-2 bg-slate-300"}),r.jsx("div",{className:"absolute bottom-0 right-0 w-2 h-2 bg-slate-300"}),r.jsxs("div",{className:"flex items-center gap-2 text-slate-800 mb-4",children:[r.jsx(Rf,{className:"w-4 h-4"}),r.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider",children:""})]}),r.jsxs("div",{className:"text-xs text-slate-600 leading-relaxed space-y-4 text-justify h-64 overflow-y-auto pr-2 custom-scrollbar",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-slate-800 mb-1",children:"1. "}),r.jsxs("p",{children:["-ONLINE-  ",r.jsx("span",{className:"font-bold",children:"Nitroplus"}),"  ",r.jsx("span",{className:"font-bold",children:"DMM GAMES (EXNOA LLC)"}),"  "]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-slate-800 mb-1",children:"2. "}),r.jsxs("p",{children:["",r.jsx("span",{className:"font-bold text-red-500",children:""})," "]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-slate-800 mb-1",children:"3. "}),r.jsx("p",{children:" "})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-slate-800 mb-1",children:"4. "}),r.jsx("p",{children:" AI  IndexedDB  "})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-slate-800 mb-1",children:"5. AI "}),r.jsx("p",{children:"LLMAI   AI "})]})]})]}),r.jsx("div",{className:"text-center py-4 opacity-50",children:r.jsx("p",{className:"text-[9px] text-slate-400 font-mono tracking-widest",children:"MADE WITH  FOR TOUKEN RANBU"})})]})})}function p_({onClose:e}){const[n,s]=N.useState("main"),i=c=>{s(c)},o=()=>{s("main")},l=()=>{switch(n){case"api":return r.jsx(e_,{onBack:o});case"beautify":return r.jsx(c_,{onBack:o});case"data":return r.jsx(f_,{onBack:o});case"disclaimer":return r.jsx(h_,{onBack:o});default:return null}};return r.jsxs("div",{className:"w-full h-full bg-[#F0F2F5] relative overflow-hidden",children:[r.jsx(je.div,{initial:!1,animate:n==="main"?{x:0,opacity:1}:{x:"-25%",opacity:1},transition:{duration:.4,ease:[.32,.72,0,1]},className:"absolute inset-0 w-full h-full",children:r.jsx(J6,{onNavigate:i,onClose:e})}),r.jsx(ze,{children:n!=="main"&&r.jsx(je.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{duration:.4,ease:[.32,.72,0,1]},className:"absolute inset-0 w-full h-full z-20 shadow-[-10px_0_30px_rgba(0,0,0,0.15)]",children:l()},"subpage")})]})}function m_({onBack:e,onEdit:n,lastUpdated:s=0}){const[i,o]=N.useState([]),[l,c]=N.useState(""),[u,h]=N.useState("all"),[g,p]=N.useState("grid");N.useEffect(()=>{f()},[s]);const f=async()=>{try{const v=await he.get(re.WORLD_BOOKS,"world_books");v&&o(v)}catch(v){console.error("Failed to load world books:",v)}},m=()=>{n(null)},b=v=>{n(v)},y=i.filter(v=>u==="all"||v.scope===u).filter(v=>v.name.toLowerCase().includes(l.toLowerCase())||v.content.toLowerCase().includes(l.toLowerCase()));return r.jsxs("div",{className:"w-full h-full relative bg-[#F5F2EB] z-50 overflow-hidden flex flex-col font-['Source_Han_Sans_CN_VF',sans-serif]",children:[r.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-20 mix-blend-multiply",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%239C92AC' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E")`}}),r.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-20 bg-[#F5F2EB]/95 backdrop-blur-xl border-b border-[#D6D3CC] shadow-sm",children:[r.jsx("button",{onClick:e,className:"w-10 h-10 bg-white/50 border border-[#D6D3CC] rounded-lg flex items-center justify-center text-[#5A5A55] transition-colors hover:bg-white hover:text-[#2C2C2C] shadow-[0_2px_0_#E5E5E5]",children:r.jsx($n,{className:"w-5 h-5",strokeWidth:2})}),r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Z0,{className:"w-3 h-3 text-[#8C8C89]"}),r.jsx("span",{className:"text-[10px] font-bold text-[#8C8C89] tracking-[0.2em] uppercase",children:""})]}),r.jsx("h1",{className:"text-lg font-serif font-bold text-[#2C2C2C] tracking-tight flex items-center gap-2",children:""})]}),r.jsx("button",{onClick:m,className:"w-10 h-10 bg-[#2C2C2C] text-[#F2F0EB] rounded-lg flex items-center justify-center transition-colors shadow-lg hover:bg-black",children:r.jsx(Cr,{className:"w-5 h-5",strokeWidth:2})})]}),r.jsxs("div",{className:"px-6 py-4 z-10 bg-[#F5F2EB]",children:[r.jsxs("div",{className:"flex gap-2 mb-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(QN,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-[#8C8C89]"}),r.jsx("input",{type:"text",value:l,onChange:v=>c(v.target.value),placeholder:"...",className:"w-full bg-white border border-[#D6D3CC] rounded-full px-4 py-2.5 pl-10 text-xs font-medium text-[#2C2C2C] placeholder:text-[#AAA] focus:outline-none focus:border-[#2C2C2C] focus:ring-1 focus:ring-[#2C2C2C] transition-colors shadow-sm"}),l&&r.jsx("button",{onClick:()=>c(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#BBB] hover:text-[#2C2C2C]",children:r.jsx(ht,{className:"w-3 h-3"})})]}),r.jsxs("div",{className:"flex bg-white border border-[#D6D3CC] rounded-lg p-1 shrink-0 shadow-sm",children:[r.jsx("button",{onClick:()=>p("grid"),className:`p-1.5 rounded-md transition-all ${g==="grid"?"bg-[#F5F2EB] text-[#2C2C2C]":"text-[#8C8C89]"}`,children:r.jsx(pb,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>p("list"),className:`p-1.5 rounded-md transition-all ${g==="list"?"bg-[#F5F2EB] text-[#2C2C2C]":"text-[#8C8C89]"}`,children:r.jsx(NN,{className:"w-4 h-4"})})]})]}),r.jsx("div",{className:"flex gap-6 border-b border-[#D6D3CC] px-2",children:[{id:"all",label:""},{id:"global",label:""},{id:"local",label:""}].map(v=>r.jsxs("button",{onClick:()=>h(v.id),className:`pb-3 text-[11px] font-bold uppercase tracking-wider transition-colors relative ${u===v.id?"text-[#2C2C2C]":"text-[#8C8C89] active:text-[#5A5A55] hover:text-[#5A5A55]"}`,children:[v.label,u===v.id&&r.jsx(je.div,{layoutId:"worldbook-tab-indicator",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#2C2C2C]",transition:{duration:.25,ease:"easeInOut"}})]},v.id))})]}),r.jsx("div",{className:"flex-1 overflow-y-auto px-6 pb-24",children:y.length===0?r.jsxs("div",{className:"h-64 flex flex-col items-center justify-center text-[#8C8C89] opacity-60",children:[r.jsx(Z0,{className:"w-16 h-16 mb-4 stroke-1"}),r.jsx("p",{className:"text-xs font-serif italic",children:""})]}):r.jsx(je.div,{layout:!0,className:g==="grid"?"grid grid-cols-2 gap-4 pt-2":"flex flex-col gap-3 pt-2",children:r.jsx(ze,{mode:"popLayout",children:y.map((v,C)=>r.jsx(je.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{layout:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}},onClick:()=>b(v),className:`group cursor-pointer relative ${g==="grid"?"aspect-[3/4]":"h-24"}`,children:g==="grid"?r.jsxs(je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-white border border-[#E5E5E5] rounded-r-md rounded-l-sm shadow-[4px_4px_10px_rgba(0,0,0,0.05)] transition-all overflow-hidden flex flex-col group-active:shadow-[6px_6px_15px_rgba(0,0,0,0.1)] group-hover:shadow-[6px_6px_15px_rgba(0,0,0,0.1)]",children:[r.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-3 ${v.scope==="global"?"bg-[#2C2C2C]":"bg-[#8C8C89]"} opacity-10 border-r border-black/5`}),r.jsxs("div",{className:"mt-4 mx-4 flex justify-between items-start",children:[r.jsx("span",{className:`text-[8px] font-bold uppercase tracking-wider px-1.5 py-0.5 rounded-sm ${v.scope==="global"?"bg-[#F0F0F0] text-[#2C2C2C]":"bg-[#F5F5F5] text-[#8C8C89]"}`,children:v.scope==="global"?" I":" II"}),v.scope==="global"?r.jsx(hb,{className:"w-3 h-3 text-[#2C2C2C]"}):r.jsx(Fj,{className:"w-3 h-3 text-[#8C8C89]"})]}),r.jsxs("div",{className:"flex-1 px-4 flex flex-col justify-center",children:[r.jsx("h3",{className:"font-serif text-lg leading-tight font-bold text-[#2C2C2C] line-clamp-3",children:v.name||""}),r.jsx("div",{className:"w-8 h-0.5 bg-[#D6D3CC] mt-3"})]}),r.jsxs("div",{className:"px-4 pb-4 pt-2 bg-[#F9F9F7] border-t border-[#F0F0F0]",children:[r.jsx("p",{className:"text-[9px] text-[#8C8C89] font-mono line-clamp-2 mb-2",children:v.content||"..."}),r.jsxs("div",{className:"flex items-center gap-2 text-[8px] font-bold text-[#AAA] uppercase",children:[r.jsx(qs,{className:"w-2.5 h-2.5"}),new Date(v.updatedAt).toLocaleDateString()]})]})]}):r.jsxs(je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"w-full h-full bg-white border border-[#E5E5E5] rounded-md shadow-sm transition-all flex overflow-hidden group-active:shadow-md group-hover:shadow-md",children:[r.jsx("div",{className:`w-2 h-full ${v.scope==="global"?"bg-[#2C2C2C]":"bg-[#D6D3CC]"}`}),r.jsxs("div",{className:"flex-1 p-3 flex flex-col justify-center",children:[r.jsxs("div",{className:"flex justify-between items-start mb-1",children:[r.jsx("h3",{className:"font-serif text-base font-bold text-[#2C2C2C]",children:v.name||""}),r.jsx("span",{className:"text-[9px] px-2 py-0.5 bg-[#F5F5F5] rounded text-[#8C8C89] font-bold uppercase",children:v.scope==="global"?"":""})]}),r.jsx("p",{className:"text-[10px] text-[#666] line-clamp-2 pr-8",children:v.content})]}),r.jsxs("div",{className:"w-12 border-l border-[#F0F0F0] flex flex-col items-center justify-center gap-1 text-[#AAA]",children:[r.jsx(ub,{className:"w-4 h-4"}),r.jsx("span",{className:"text-[9px] font-mono",children:v.content.length})]})]})},v.id))})})}),r.jsxs("div",{className:"bg-[#EAE8E3] border-t border-[#D6D3CC] px-6 py-3 flex justify-between items-center text-[9px] font-mono text-[#8C8C89] uppercase tracking-wider",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-[#34C759]"}),r.jsx("span",{children:""})]}),r.jsxs("span",{children:[": ",i.length]})]})]})}function g_({onBack:e,worldBook:n}){const[s,i]=N.useState(""),[o,l]=N.useState("local"),[c,u]=N.useState("before"),[h,g]=N.useState(""),[p,f]=N.useState(!1),[m,b]=N.useState(!1),[y,v]=N.useState(!1),C=n===null;N.useEffect(()=>{n&&(i(n.name),l(n.scope),u(n.position),g(n.content))},[n]);const w=async()=>{if(!s.trim()){v(!0);return}v(!1);try{let T=await he.get(re.WORLD_BOOKS,"world_books")||[];const z=new Date().toISOString();if(C){const B={id:`wb_${Date.now()}`,name:s.trim(),scope:o,position:c,content:h.trim(),createdAt:z,updatedAt:z};T.push(B)}else T=T.map(B=>B.id===n.id?{...B,name:s.trim(),scope:o,position:c,content:h.trim(),updatedAt:z}:B);await he.set(re.WORLD_BOOKS,"world_books",T),window.dispatchEvent(new Event("chat-settings-updated")),b(!0),setTimeout(()=>{b(!1),e()},1500)}catch(j){console.error("Failed to save world book:",j)}},F=async()=>{if(n)try{const j=await he.get(re.WORLD_BOOKS,"world_books");if(j){const T=j.filter(z=>z.id!==n.id);await he.set(re.WORLD_BOOKS,"world_books",T)}window.dispatchEvent(new Event("chat-settings-updated")),f(!1),setTimeout(()=>e(),300)}catch(j){console.error("Failed to delete world book:",j)}};return r.jsxs("div",{className:"w-full h-full relative bg-[#F2F0EB] z-50 overflow-hidden flex flex-col font-['Source_Han_Sans_CN_VF',sans-serif]",children:[r.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),r.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10 bg-[#F2F0EB]/95 backdrop-blur-sm border-b border-[#D6D3CC]",children:[r.jsx("button",{onClick:e,className:"w-10 h-10 bg-[#EAE8E3] border border-[#D6D3CC] rounded-md flex items-center justify-center text-[#5A5A55] transition-colors active:bg-white active:text-[#B93636] hover:bg-white hover:text-[#B93636]",children:r.jsx(ht,{className:"w-5 h-5",strokeWidth:2})}),r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Ej,{className:"w-3 h-3 text-[#8C8C89]"}),r.jsx("span",{className:"text-[10px] font-bold text-[#8C8C89] tracking-[0.2em] uppercase",children:C?"":""})]}),r.jsx("h1",{className:"text-base font-bold text-[#2C2C2C] tracking-wide",children:C?"":""})]}),r.jsx("div",{className:"w-10"})]}),r.jsxs("div",{className:"flex-1 px-5 pb-28 overflow-y-auto",children:[r.jsxs("div",{className:"mt-6 mb-8 text-center",children:[r.jsx("div",{className:"inline-block border-b-2 border-[#2C2C2C] pb-1 mb-2",children:r.jsxs("h2",{className:"text-xl font-black text-[#2C2C2C] uppercase tracking-tighter flex items-center gap-2",children:[r.jsx(Bf,{className:"w-5 h-5"}),""]})}),r.jsx("p",{className:"text-[10px] font-mono text-[#8C8C89] uppercase tracking-widest",children:""})]}),r.jsxs("div",{className:"space-y-6 max-w-[420px] mx-auto",children:[r.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)]",children:[r.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:""}),r.jsxs("div",{className:"space-y-4 mt-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1",children:""}),r.jsx("input",{type:"text",value:s,onChange:j=>{i(j.target.value),v(!1)},className:`w-full bg-[#EAE8E3] border-b-2 px-3 py-2 text-lg font-bold text-[#2C2C2C] focus:outline-none focus:bg-white transition-colors placeholder:text-[#CCC] ${y?"border-[#B93636] bg-[#FFF5F5]":"border-[#D6D3CC] focus:border-[#2C2C2C]"}`,placeholder:""}),y&&r.jsxs("p",{className:"text-[10px] text-[#B93636] font-bold mt-1 uppercase flex items-center gap-1",children:[r.jsx(Rf,{className:"w-3 h-3"})," "]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[r.jsx(hb,{className:"w-3 h-3"})," "]}),r.jsx("div",{className:"flex flex-col gap-1",children:[{id:"global",label:" ()"},{id:"local",label:""}].map(j=>r.jsxs("button",{onClick:()=>l(j.id),className:`w-full py-2 px-3 text-xs font-bold text-left transition-all border ${o===j.id?"bg-[#2C2C2C] text-[#F2F0EB] border-[#2C2C2C]":"bg-white border-[#D6D3CC] text-[#8C8C89] active:border-[#8C8C89] hover:border-[#8C8C89]"}`,children:[o===j.id&&r.jsx(Dt,{className:"w-3 h-3 inline mr-1"}),j.label]},j.id))})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[r.jsx(kN,{className:"w-3 h-3"})," "]}),r.jsx("div",{className:"flex flex-col gap-1",children:[{id:"before",label:" (Prepend)"},{id:"after",label:" (Append)"}].map(j=>r.jsxs("button",{onClick:()=>u(j.id),className:`w-full py-2 px-3 text-xs font-bold text-left transition-all border ${c===j.id?"bg-[#2C2C2C] text-[#F2F0EB] border-[#2C2C2C]":"bg-white border-[#D6D3CC] text-[#8C8C89] active:border-[#8C8C89] hover:border-[#8C8C89]"}`,children:[c===j.id&&r.jsx(Dt,{className:"w-3 h-3 inline mr-1"}),j.label]},j.id))})]})]})]})]}),r.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 pb-2 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)] h-[360px] flex flex-col",children:[r.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:""}),r.jsxs("div",{className:"flex-1 mt-2 relative",children:[r.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-10",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px)",backgroundSize:"100% 2rem",marginTop:"1.9rem"}}),r.jsx("textarea",{value:h,onChange:j=>g(j.target.value),className:"w-full h-full bg-transparent border-none text-sm text-[#4A4A4A] focus:outline-none resize-none leading-[2rem] font-mono",placeholder:"...",style:{lineHeight:"2rem"}})]}),r.jsx("div",{className:"text-right border-t border-[#E5E5E5] pt-2 mt-2",children:r.jsxs("span",{className:"text-[10px] font-mono text-[#8C8C89]",children:[": ",h.length]})})]})]})]}),r.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-6 bg-[#F2F0EB]/90 backdrop-blur-md border-t border-[#D6D3CC] z-40 flex gap-3 justify-center",children:[!C&&r.jsx("button",{onClick:()=>f(!0),className:"w-12 h-12 border-2 border-[#FF3B30] text-[#FF3B30] flex items-center justify-center active:bg-[#FF3B30] active:text-white hover:bg-[#FF3B30] hover:text-white transition-colors rounded-[2px]",children:r.jsx(Hn,{className:"w-5 h-5"})}),r.jsxs("button",{onClick:w,className:"flex-1 max-w-[300px] bg-[#2C2C2C] text-[#F2F0EB] h-12 rounded-[2px] font-bold text-sm tracking-wider uppercase active:bg-black hover:bg-black transition-colors shadow-lg flex items-center justify-center gap-2",children:[r.jsx(Xa,{className:"w-4 h-4"}),C?"":""]})]}),r.jsx(ze,{children:p&&r.jsx(je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-[70] px-4",children:r.jsxs(je.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:350,damping:30},className:"bg-[#F2F0EB] border-2 border-[#FF3B30] p-6 max-w-xs w-full text-center shadow-2xl",children:[r.jsx("div",{className:"w-12 h-12 bg-[#FF3B30] text-white rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Hn,{className:"w-6 h-6"})}),r.jsx("h3",{className:"text-lg font-black text-[#2C2C2C] uppercase mb-2",children:""}),r.jsx("p",{className:"text-xs font-mono text-[#5A5A55] mb-6",children:""}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>f(!1),className:"flex-1 py-3 border border-[#D6D3CC] font-bold text-xs active:bg-white hover:bg-white transition-colors",children:""}),r.jsx("button",{onClick:F,className:"flex-1 py-3 bg-[#FF3B30] text-white font-bold text-xs active:bg-[#D32F2F] hover:bg-[#D32F2F] transition-colors",children:""})]})]})})}),r.jsx(ze,{children:m&&r.jsx(je.div,{initial:{opacity:0,scale:1.5,rotate:-10},animate:{opacity:1,scale:1,rotate:-5},exit:{opacity:0},className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[70] pointer-events-none",children:r.jsxs("div",{className:"w-40 h-40 rounded-full border-[6px] border-[#34C759] flex flex-col items-center justify-center text-[#34C759] opacity-90 mix-blend-multiply bg-white/50 backdrop-blur-sm",children:[r.jsx(Dt,{className:"w-12 h-12 mb-1",strokeWidth:4}),r.jsx("span",{className:"text-xl font-black uppercase tracking-tight",children:""}),r.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest mt-1",children:new Date().toLocaleDateString()})]})})})]})}function x_({onClose:e}){const[n,s]=N.useState("list"),[i,o]=N.useState(null),[l,c]=N.useState(Date.now()),u=g=>{o(g),s("editor")},h=()=>{s("list"),c(Date.now()),setTimeout(()=>o(null),300)};return r.jsxs("div",{className:"absolute inset-0 w-full h-full bg-black overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 w-full h-full bg-[#F5F2EB] z-10",style:{pointerEvents:n==="editor"?"none":"auto"},children:r.jsx(m_,{onBack:e,onEdit:u,lastUpdated:l})}),r.jsx("div",{className:"absolute inset-0 bg-black -z-10"}),r.jsx(ze,{children:n==="editor"&&r.jsx(je.div,{initial:{y:"100%",borderRadius:"16px 16px 0 0"},animate:{y:0,borderRadius:"0px"},exit:{y:"100%",borderRadius:"16px 16px 0 0"},transition:{type:"spring",stiffness:300,damping:30},className:"absolute inset-0 w-full h-full z-20 shadow-2xl overflow-hidden",children:r.jsx(g_,{onBack:h,worldBook:i})},"editor")})]})}function b_({onClose:e,onEditUser:n,onEditCharacter:s,isBackground:i=!1,lastUpdated:o=0}){const[l,c]=N.useState([]),[u,h]=N.useState({name:"",country:"",fortress:"",date:"",attendant:""}),[g,p]=N.useState(()=>{const y=wb();return y!==void 0?y:null});N.useEffect(()=>{f(),m();const y=()=>{m()};return window.addEventListener("avatarChanged",y),window.addEventListener("userDataChanged",y),()=>{window.removeEventListener("avatarChanged",y),window.removeEventListener("userDataChanged",y)}},[o]);const f=async()=>{try{const y=await he.get(re.CHARACTERS,"characters");if(y){const v=await Promise.all(y.map(async C=>{if(C.avatar){if(C.avatar.startsWith("data:"))return{...C,avatarUrl:C.avatar};{const w=await Ct(C.avatar);return{...C,avatarUrl:w}}}return{...C,avatarUrl:null}}));c(v)}}catch(y){console.error("Failed to load characters:",y)}},m=async()=>{try{const y=await he.get(re.USER_DATA,"userData");y&&h(y);const v=await Ct("avatar");p(v),kb(v)}catch(y){console.error("Failed to load user data:",y)}},b=()=>{s(null)};return r.jsxs(je.div,{className:"absolute inset-0 bg-[#F2F0EB] z-0 overflow-hidden flex flex-col font-['Source_Han_Sans_CN_VF',sans-serif]",animate:{scale:i?.92:1,borderRadius:i?"16px":"0px",filter:i?"brightness(0.9)":"brightness(1)"},transition:{type:"spring",stiffness:300,damping:30},children:[r.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),r.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10 bg-[#F2F0EB]/95 backdrop-blur-sm border-b border-stone-200",children:[r.jsx("button",{onClick:e,className:"w-10 h-10 bg-[#EAE8E3] border border-[#D6D3CC] rounded-md flex items-center justify-center text-[#5A5A55] transition-colors hover:bg-white hover:text-black hover:border-[#999]",children:r.jsx($n,{className:"w-5 h-5",strokeWidth:2})}),r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("span",{className:"text-[10px] font-bold text-[#8C8C89] tracking-[0.2em] uppercase",children:""}),r.jsx("h1",{className:"text-base font-bold text-[#2C2C2C] tracking-wide",children:""})]}),r.jsx("button",{onClick:b,className:"w-10 h-10 bg-[#2C2C2C] text-[#F2F0EB] rounded-md flex items-center justify-center transition-colors hover:bg-black shadow-sm",children:r.jsx(Cr,{className:"w-5 h-5",strokeWidth:2})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-24",children:r.jsxs("div",{children:[r.jsx("div",{className:"flex justify-end mt-6 mb-2",children:r.jsxs("div",{className:"border border-[#8C8C89] text-[#8C8C89] px-2 py-0.5 text-[10px] font-mono uppercase tracking-widest flex items-center gap-2 opacity-60",children:[r.jsx(Lu,{className:"w-3 h-3"}),"-",new Date().getFullYear(),"-A"]})}),r.jsxs("div",{className:"relative mb-8 group cursor-pointer",onClick:n,children:[r.jsx("div",{className:"absolute -top-2 left-1/2 -translate-x-1/2 w-12 h-4 bg-[#D6D3CC] rounded-sm z-0"}),r.jsxs("div",{className:"relative bg-[#F9F9F7] border border-[#D6D3CC] p-5 shadow-[0_2px_8px_rgba(0,0,0,0.04)] z-10 transition-all group-active:border-[#B93636] group-active:shadow-md group-hover:border-[#B93636] group-hover:shadow-md",children:[r.jsx("div",{className:"absolute top-0 left-0 w-3 h-3 border-t border-l border-[#B93636] opacity-0 group-active:opacity-100 group-hover:opacity-100 transition-opacity"}),r.jsx("div",{className:"absolute top-0 right-0 w-3 h-3 border-t border-r border-[#B93636] opacity-0 group-active:opacity-100 group-hover:opacity-100 transition-opacity"}),r.jsx("div",{className:"absolute bottom-0 left-0 w-3 h-3 border-b border-l border-[#B93636] opacity-0 group-active:opacity-100 group-hover:opacity-100 transition-opacity"}),r.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 border-b border-r border-[#B93636] opacity-0 group-active:opacity-100 group-hover:opacity-100 transition-opacity"}),r.jsxs("div",{className:"flex gap-5",children:[r.jsxs("div",{className:"w-24 h-32 bg-[#E5E5E5] border border-[#D6D3CC] p-1 flex-shrink-0 relative overflow-hidden",children:[g?r.jsx("img",{src:g,alt:"Saniwa",className:"w-full h-full object-cover grayscale-[0.2] group-active:grayscale-0 group-hover:grayscale-0 transition-all"}):r.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-[#999] bg-[#F0F0F0]",children:[r.jsx(is,{className:"w-8 h-8 mb-1",strokeWidth:1.5}),r.jsx("span",{className:"text-[9px] uppercase",children:""})]}),r.jsx("div",{className:"absolute inset-0 border border-black/5 pointer-events-none"})]}),r.jsxs("div",{className:"flex-1 flex flex-col justify-between py-0.5",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"text-[10px] font-bold bg-[#2C2C2C] text-white px-1.5 py-0.5",children:""}),r.jsx("span",{className:"text-[10px] font-bold text-[#B93636] border border-[#B93636] px-1.5 py-0.5",children:""})]}),r.jsx("h2",{className:"text-xl font-bold text-[#2C2C2C] leading-tight mb-0.5 border-b border-[#D6D3CC] pb-2 inline-block min-w-[120px]",children:u.name||""})]}),r.jsxs("div",{className:"space-y-2 mt-2",children:[r.jsxs("div",{className:"grid grid-cols-[60px_1fr] text-xs",children:[r.jsx("span",{className:"text-[#8C8C89] font-bold uppercase text-[10px] tracking-wider mt-0.5",children:""}),r.jsx("span",{className:"font-medium text-[#4A4A4A] font-mono",children:u.fortress||"---"})]}),r.jsxs("div",{className:"grid grid-cols-[60px_1fr] text-xs",children:[r.jsx("span",{className:"text-[#8C8C89] font-bold uppercase text-[10px] tracking-wider mt-0.5",children:""}),r.jsx("span",{className:"font-medium text-[#4A4A4A] font-mono",children:u.country||"---"})]}),u.attendant&&r.jsxs("div",{className:"grid grid-cols-[60px_1fr] text-xs",children:[r.jsx("span",{className:"text-[#8C8C89] font-bold uppercase text-[10px] tracking-wider mt-0.5",children:""}),r.jsx("span",{className:"font-medium text-[#4A4A4A] flex items-center gap-1",children:u.attendant})]})]})]})]}),r.jsx("div",{className:"absolute right-4 bottom-4 opacity-10 pointer-events-none rotate-[-15deg]",children:r.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-[#2C2C2C] flex items-center justify-center",children:r.jsx("span",{className:"text-[10px] font-black uppercase text-[#2C2C2C]",children:""})})})]})]}),r.jsxs("div",{className:"flex items-end justify-between mb-4 border-b-2 border-[#2C2C2C] pb-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(N4,{className:"w-5 h-5 text-[#2C2C2C]"}),r.jsx("h3",{className:"text-base font-black text-[#2C2C2C] uppercase tracking-tight",children:""})]}),r.jsxs("span",{className:"text-xs font-mono font-bold text-[#2C2C2C]",children:[": ",l.length.toString().padStart(2,"0")]})]}),r.jsx("div",{className:"space-y-2",children:l.length===0?r.jsxs("div",{className:"py-16 text-center border border-dashed border-[#BBB] bg-[#F9F9F7]",children:[r.jsx(m4,{className:"w-12 h-12 text-[#D6D3CC] mx-auto mb-3",strokeWidth:1}),r.jsx("p",{className:"text-[#8C8C89] text-sm font-medium uppercase tracking-wider",children:""}),r.jsx("button",{onClick:b,className:"mt-4 text-xs font-bold text-[#2C2C2C] underline hover:text-[#B93636]",children:"+ "})]}):l.map((y,v)=>r.jsx("div",{onClick:()=>s(y),className:"group relative bg-[#F9F9F7] border-l-[3px] border-l-[#D6D3CC] border-y border-r border-[#E5E5E5] p-3 pl-4 transition-colors cursor-pointer active:bg-[#EAE8E3] active:border-l-[#2C2C2C] hover:bg-[#EAE8E3] hover:border-l-[#2C2C2C]",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("span",{className:"text-[10px] font-mono text-[#8C8C89] w-6 text-right transition-colors group-active:text-[#B93636] group-hover:text-[#B93636]",children:y.serialNumber||(v+1).toString().padStart(3,"0")}),r.jsx("div",{className:"w-10 h-10 bg-[#E5E5E5] border border-[#D6D3CC] flex-shrink-0 overflow-hidden transition-all",children:y.avatarUrl?r.jsx("img",{src:y.avatarUrl,alt:"",className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:r.jsx(is,{className:"w-4 h-4 text-[#999]"})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[r.jsx("h4",{className:"text-sm font-bold text-[#2C2C2C] tracking-wide group-active:text-black group-hover:text-black",children:y.name}),r.jsx("span",{className:"text-[9px] font-bold uppercase text-[#B93636] opacity-0 transition-opacity border border-[#B93636] px-1 group-active:opacity-100 group-hover:opacity-100",children:""})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-[10px] text-[#8C8C89] font-mono uppercase tracking-wider",children:""}),r.jsx("p",{className:"text-xs text-[#5A5A55] truncate font-medium",children:y.description||"---"})]})]}),r.jsx(ta,{className:"w-4 h-4 text-[#D6D3CC] transition-colors group-active:text-[#2C2C2C] group-hover:text-[#2C2C2C]"})]})},y.id))})]})})]})}function v_({onBack:e,character:n}){const[s,i]=N.useState(""),[o,l]=N.useState(""),[c,u]=N.useState(null),[h,g]=N.useState(null),[p,f]=N.useState(""),[m,b]=N.useState(""),[y,v]=N.useState([]),[C,w]=N.useState([]),[F,j]=N.useState(!1),[T,z]=N.useState(!1),[B,U]=N.useState(!1),[D,A]=N.useState([]),H=N.useRef(null),Y=n===null;N.useEffect(()=>{n&&(i(n.name),l(n.serialNumber||""),f(n.description),b(n.manifestDate||""),v(n.worldBooks||[]),(async()=>{if(n.avatar)if(n.avatar.startsWith("data:"))u(n.avatar),g(null);else{const M=await Ct(n.avatar);u(M),g(n.avatar)}})())},[n]),N.useEffect(()=>{(async()=>{const M=await he.get(re.WORLD_BOOKS,"world_books");M&&A(M.filter(O=>O.scope==="local"))})()},[]);const _=()=>{H.current?.click()},L=async Q=>{const M=Q.target.files?.[0];if(M){const O=Date.now(),ee=`character-${n?.id||O}-avatar`,W=await cs(ee,M);u(W),g(ee)}},k=async()=>{try{let M=await he.get(re.CHARACTERS,"characters")||[];const O=new Date().toISOString();if(Y){const ee={id:`char_${Date.now()}`,name:s.trim()||"",serialNumber:o.trim(),avatar:h,description:p.trim(),manifestDate:m.trim()||void 0,worldBooks:y,createdAt:O,updatedAt:O};M.push(ee)}else M=M.map(ee=>ee.id===n.id?{...ee,name:s.trim()||"",serialNumber:o.trim(),avatar:h,description:p.trim(),manifestDate:m.trim()||void 0,worldBooks:y,updatedAt:O}:ee);await he.set(re.CHARACTERS,"characters",M),window.dispatchEvent(new Event("chat-settings-updated")),z(!0),setTimeout(()=>{z(!1),e()},1500)}catch(Q){console.error("Failed to save character:",Q)}},$=async()=>{if(n)try{const Q=await he.get(re.CHARACTERS,"characters");if(Q){const M=Q.filter(O=>O.id!==n.id);await he.set(re.CHARACTERS,"characters",M)}window.dispatchEvent(new Event("chat-settings-updated")),n.avatar&&await ea(n.avatar),j(!1),setTimeout(()=>e(),300)}catch(Q){console.error("Failed to delete character:",Q)}},P=Q=>{v(y.filter(M=>M!==Q))},I=()=>{w([...y]),U(!0)},q=Q=>{C.includes(Q)?w(C.filter(M=>M!==Q)):w([...C,Q])},G=()=>{v([...C]),U(!1)};return r.jsxs("div",{className:"fixed inset-0 bg-[#F2F0EB] z-50 overflow-hidden flex flex-col font-['Source_Han_Sans_CN_VF',sans-serif]",children:[r.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),r.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10 bg-[#F2F0EB]/95 backdrop-blur-sm border-b border-stone-200",children:[r.jsx("button",{onClick:e,className:"w-10 h-10 bg-[#EAE8E3] border border-[#D6D3CC] rounded-md flex items-center justify-center text-[#5A5A55] transition-colors active:bg-white active:text-[#B93636] hover:bg-white hover:text-[#B93636]",children:r.jsx(ht,{className:"w-5 h-5",strokeWidth:2})}),r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("span",{className:"text-[10px] font-bold text-[#8C8C89] tracking-[0.2em] uppercase",children:Y?"":""}),r.jsx("h1",{className:"text-base font-bold text-[#2C2C2C] tracking-wide",children:Y?"":""})]}),r.jsx("div",{className:"w-10"})]}),r.jsxs("div",{className:"flex-1 px-5 pb-28 overflow-y-auto",children:[r.jsxs("div",{className:"mt-6 mb-8 text-center",children:[r.jsx("div",{className:"inline-block border-b-2 border-[#2C2C2C] pb-1 mb-2",children:r.jsxs("h2",{className:"text-xl font-black text-[#2C2C2C] uppercase tracking-tighter flex items-center gap-2",children:[r.jsx(Bf,{className:"w-5 h-5"}),""]})}),r.jsx("p",{className:"text-[10px] font-mono text-[#8C8C89] uppercase tracking-widest",children:""})]}),r.jsxs("div",{className:"space-y-6 max-w-[420px] mx-auto",children:[r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("input",{ref:H,type:"file",accept:"image/*",onChange:L,className:"hidden"}),r.jsxs("div",{onClick:_,className:"relative w-32 h-40 bg-[#E5E5E5] border-2 border-[#D6D3CC] p-2 cursor-pointer group transition-colors active:border-[#2C2C2C] hover:border-[#2C2C2C]",children:[r.jsxs("div",{className:"w-full h-full bg-[#F0F0F0] overflow-hidden relative",children:[c?r.jsx("img",{src:c,alt:"Avatar",className:"w-full h-full object-cover grayscale-[0.2] group-active:grayscale-0 group-hover:grayscale-0 transition-all"}):r.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-[#999]",children:[r.jsx(Xr,{className:"w-8 h-8 mb-1",strokeWidth:1.5}),r.jsx("span",{className:"text-[9px] uppercase tracking-widest",children:""})]}),r.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-active:opacity-100 group-hover:opacity-100 transition-opacity",children:r.jsx(Pf,{className:"w-8 h-8 text-white"})})]}),r.jsx("div",{className:"absolute -top-1 -left-1 w-3 h-3 border-t-2 border-l-2 border-[#2C2C2C]"}),r.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 border-t-2 border-r-2 border-[#2C2C2C]"}),r.jsx("div",{className:"absolute -bottom-1 -left-1 w-3 h-3 border-b-2 border-l-2 border-[#2C2C2C]"}),r.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 border-b-2 border-r-2 border-[#2C2C2C]"})]}),r.jsx("p",{className:"mt-2 text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider",children:"1. "})]}),r.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)]",children:[r.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:" : "}),r.jsxs("div",{className:"space-y-4 mt-2",children:[r.jsxs("div",{className:"grid grid-cols-[1fr_80px] gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1",children:" / "}),r.jsx("input",{type:"text",value:s,onChange:Q=>i(Q.target.value),className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-lg font-bold text-[#2C2C2C] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors placeholder:text-[#CCC]",placeholder:""})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[r.jsx(J0,{className:"w-3 h-3"})," "]}),r.jsx("input",{type:"text",value:o,onChange:Q=>l(Q.target.value),className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-lg font-bold text-[#2C2C2C] font-mono text-center focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors placeholder:text-[#CCC]",placeholder:"NO."})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[r.jsx(qs,{className:"w-3 h-3"})," "]}),r.jsx("input",{type:"text",value:m,onChange:Q=>b(Q.target.value),placeholder:"YYYY-MM-DD",className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-sm font-mono font-medium text-[#4A4A4A] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors"})]})]})]}),r.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)]",children:[r.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:" : "}),r.jsxs("div",{className:"mt-2",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("label",{className:"text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider flex items-center gap-1",children:[r.jsx(Tj,{className:"w-3 h-3"})," "]}),r.jsx("button",{onClick:I,className:"text-[10px] font-bold text-[#2C2C2C] border border-[#2C2C2C] px-2 py-0.5 active:bg-[#2C2C2C] active:text-white hover:bg-[#2C2C2C] hover:text-white transition-colors uppercase",children:"+ "})]}),r.jsx("div",{className:"space-y-2",children:y.length===0?r.jsx("div",{className:"py-4 text-center border border-dashed border-[#D6D3CC] bg-[#F0F0F0]",children:r.jsx("span",{className:"text-[10px] text-[#999] font-mono uppercase",children:""})}):y.map(Q=>{const M=D.find(O=>O.id===Q);return M?r.jsxs("div",{className:"bg-white border border-[#E5E5E5] px-3 py-2 flex items-center justify-between group",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(J0,{className:"w-3 h-3 text-[#8C8C89]"}),r.jsx("span",{className:"text-sm font-bold text-[#4A4A4A]",children:M.name})]}),r.jsx("button",{onClick:()=>P(Q),className:"text-[#D6D3CC] active:text-[#FF3B30] hover:text-[#FF3B30] transition-colors",children:r.jsx(ht,{className:"w-4 h-4"})})]},Q):null})})]})]}),r.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 pb-2 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)] h-[300px] flex flex-col",children:[r.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:" : "}),r.jsxs("div",{className:"flex-1 mt-2 relative",children:[r.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-10",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px)",backgroundSize:"100% 2rem",marginTop:"1.9rem"}}),r.jsx("textarea",{value:p,onChange:Q=>f(Q.target.value),className:"w-full h-full bg-transparent border-none text-sm text-[#4A4A4A] focus:outline-none resize-none leading-[2rem]",placeholder:"...",style:{lineHeight:"2rem"}})]}),r.jsx("div",{className:"text-right border-t border-[#E5E5E5] pt-2 mt-2",children:r.jsxs("span",{className:"text-[10px] font-mono text-[#8C8C89]",children:[": ",p.length]})})]})]})]}),r.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-6 bg-[#F2F0EB]/90 backdrop-blur-md border-t border-[#D6D3CC] z-40 flex gap-3 justify-center",children:[!Y&&r.jsx("button",{onClick:()=>j(!0),className:"w-12 h-12 border-2 border-[#FF3B30] text-[#FF3B30] flex items-center justify-center active:bg-[#FF3B30] active:text-white hover:bg-[#FF3B30] hover:text-white transition-colors rounded-[2px]",children:r.jsx(Hn,{className:"w-5 h-5"})}),r.jsxs("button",{onClick:k,className:"flex-1 max-w-[300px] bg-[#2C2C2C] text-[#F2F0EB] h-12 rounded-[2px] font-bold text-sm tracking-wider uppercase active:bg-black hover:bg-black transition-colors shadow-lg flex items-center justify-center gap-2",children:[r.jsx(Xa,{className:"w-4 h-4"}),Y?"":""]})]}),r.jsx(ze,{children:B&&r.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center px-4",children:[r.jsx(je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>U(!1),className:"absolute inset-0 bg-black/40 backdrop-blur-sm"}),r.jsxs(je.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",duration:.3,bounce:0},className:"bg-[#F2F0EB] w-full max-w-[340px] border border-[#D6D3CC] shadow-2xl relative z-10",children:[r.jsxs("div",{className:"bg-[#2C2C2C] text-[#F2F0EB] px-4 py-3 flex justify-between items-center",children:[r.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:""}),r.jsx("button",{onClick:()=>U(!1),children:r.jsx(ht,{className:"w-4 h-4"})})]}),r.jsx("div",{className:"max-h-[50vh] overflow-y-auto p-2",children:D.length===0?r.jsx("div",{className:"p-4 text-center text-xs text-[#8C8C89] font-mono",children:""}):r.jsx("div",{className:"space-y-1",children:D.map(Q=>r.jsxs("button",{onClick:()=>q(Q.id),className:`w-full px-4 py-3 text-left text-sm font-bold border transition-all flex justify-between items-center ${C.includes(Q.id)?"bg-white border-[#2C2C2C] text-[#2C2C2C]":"bg-[#F9F9F7] border-transparent text-[#8C8C89] active:border-[#D6D3CC] hover:border-[#D6D3CC]"}`,children:[Q.name,C.includes(Q.id)&&r.jsx(Dt,{className:"w-4 h-4"})]},Q.id))})}),r.jsxs("div",{className:"p-3 border-t border-[#D6D3CC] flex gap-2",children:[r.jsx("button",{onClick:()=>U(!1),className:"flex-1 py-2 text-xs font-bold text-[#5A5A55] active:bg-[#E5E5E5] hover:bg-[#E5E5E5]",children:""}),r.jsx("button",{onClick:G,className:"flex-1 py-2 bg-[#2C2C2C] text-[#F2F0EB] text-xs font-bold active:bg-black hover:bg-black",children:""})]})]})]})}),r.jsx(ze,{children:T&&r.jsx(je.div,{initial:{opacity:0,scale:1.5,rotate:-10},animate:{opacity:1,scale:1,rotate:-5},exit:{opacity:0},className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[70] pointer-events-none",children:r.jsxs("div",{className:"w-40 h-40 rounded-full border-[6px] border-[#34C759] flex flex-col items-center justify-center text-[#34C759] opacity-90 mix-blend-multiply bg-white/50 backdrop-blur-sm",children:[r.jsx(Dt,{className:"w-12 h-12 mb-1",strokeWidth:4}),r.jsx("span",{className:"text-xl font-black uppercase tracking-tight",children:""}),r.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest mt-1",children:new Date().toLocaleDateString()})]})})}),r.jsx(ze,{children:F&&r.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center px-4",children:[r.jsx(je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>j(!1),className:"absolute inset-0 bg-black/40 backdrop-blur-sm"}),r.jsxs(je.div,{initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:10},transition:{type:"spring",duration:.3,bounce:0},className:"bg-[#F2F0EB] border-2 border-[#FF3B30] p-6 max-w-xs w-full text-center shadow-2xl relative z-10",children:[r.jsx("div",{className:"w-12 h-12 bg-[#FF3B30] text-white rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Hn,{className:"w-6 h-6"})}),r.jsx("h3",{className:"text-lg font-black text-[#2C2C2C] uppercase mb-2",children:""}),r.jsx("p",{className:"text-xs font-mono text-[#5A5A55] mb-6",children:""}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>j(!1),className:"flex-1 py-3 border border-[#D6D3CC] font-bold text-xs active:bg-white hover:bg-white transition-colors",children:""}),r.jsx("button",{onClick:$,className:"flex-1 py-3 bg-[#FF3B30] text-white font-bold text-xs active:bg-[#D32F2F] hover:bg-[#D32F2F] transition-colors",children:""})]})]})]})})]})}function y_({onBack:e}){const[n,s]=N.useState(""),[i,o]=N.useState(""),[l,c]=N.useState(""),[u,h]=N.useState(""),[g,p]=N.useState(""),[f,m]=N.useState(""),[b,y]=N.useState(""),[v,C]=N.useState(""),[w,F]=N.useState(!1);N.useEffect(()=>{(async()=>{try{const z=await he.get(re.USER_DATA,"userData");z&&(s(z.name||""),o(z.country||""),c(z.fortress||""),h(z.attendant||""),p(z.initialSword||""),m(z.date||""),y(z.birthday||""));const B=await he.get(re.USER_DATA,"user_description");B&&C(B)}catch(z){console.error("Failed to load user data:",z)}})()},[]);const j=async()=>{try{const T={name:n,country:i,fortress:l,attendant:u,initialSword:g,date:f,birthday:b};await he.set(re.USER_DATA,"userData",T),await he.set(re.USER_DATA,"user_description",v);const z=new CustomEvent("userDataChanged",{detail:T});window.dispatchEvent(z),window.dispatchEvent(new Event("chat-settings-updated")),F(!0),setTimeout(()=>{F(!1),e()},1500)}catch(T){console.error("Failed to save user data:",T)}};return r.jsxs("div",{className:"fixed inset-0 bg-[#F2F0EB] z-50 overflow-hidden flex flex-col font-['Source_Han_Sans_CN_VF',sans-serif]",children:[r.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),r.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10 bg-[#F2F0EB]/95 backdrop-blur-sm border-b border-stone-200",children:[r.jsx("button",{onClick:e,className:"w-10 h-10 bg-[#EAE8E3] border border-[#D6D3CC] rounded-md flex items-center justify-center text-[#5A5A55] transition-colors active:bg-white active:text-[#B93636] hover:bg-white hover:text-[#B93636]",children:r.jsx(ht,{className:"w-5 h-5",strokeWidth:2})}),r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("span",{className:"text-[10px] font-bold text-[#8C8C89] tracking-[0.2em] uppercase",children:"Form 10-24"}),r.jsx("h1",{className:"text-base font-bold text-[#2C2C2C] tracking-wide",children:""})]}),r.jsx("div",{className:"w-10"})," "]}),r.jsxs("div",{className:"flex-1 px-5 pb-28 overflow-y-auto",children:[r.jsxs("div",{className:"mt-6 mb-8 text-center",children:[r.jsx("div",{className:"inline-block border-b-2 border-[#2C2C2C] pb-1 mb-2",children:r.jsxs("h2",{className:"text-xl font-black text-[#2C2C2C] uppercase tracking-tighter flex items-center gap-2",children:[r.jsx(Bf,{className:"w-5 h-5"}),""]})}),r.jsx("p",{className:"text-[10px] font-mono text-[#8C8C89] uppercase tracking-widest",children:""})]}),r.jsxs("div",{className:"space-y-6 max-w-[420px] mx-auto",children:[r.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)]",children:[r.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:""}),r.jsxs("div",{className:"space-y-4 mt-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1",children:""}),r.jsx("input",{type:"text",value:n,onChange:T=>s(T.target.value),className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-lg font-bold text-[#2C2C2C] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors placeholder:text-[#CCC]",placeholder:""})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[r.jsx(Lj,{className:"w-3 h-3"})," "]}),r.jsx("input",{type:"text",value:l,onChange:T=>c(T.target.value),className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-sm font-medium text-[#4A4A4A] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[r.jsx(aN,{className:"w-3 h-3"})," "]}),r.jsx("input",{type:"text",value:i,onChange:T=>o(T.target.value),className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-sm font-medium text-[#4A4A4A] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors"})]})]})]})]}),r.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)]",children:[r.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:""}),r.jsxs("div",{className:"mt-2 space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-[10px] font-mono text-[#B93636] uppercase tracking-wider mb-1 flex items-center gap-1",children:[r.jsx(x4,{className:"w-3 h-3",fill:"currentColor"})," "]}),r.jsx("div",{className:"relative",children:r.jsx("input",{type:"text",value:u,onChange:T=>h(T.target.value),className:"w-full bg-[#FFF5F5] border-b-2 border-[#EFCACA] px-3 py-2 text-sm font-bold text-[#B93636] focus:outline-none focus:border-[#B93636] focus:bg-white transition-colors",placeholder:""})})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[r.jsx(C4,{className:"w-3 h-3"})," "]}),r.jsx("input",{type:"text",value:g,onChange:T=>p(T.target.value),className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-sm font-medium text-[#4A4A4A] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors",placeholder:""})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[r.jsx(qs,{className:"w-3 h-3"})," "]}),r.jsx("input",{type:"date",value:f,onChange:T=>m(T.target.value),className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-2 py-2 text-xs font-mono font-medium text-[#4A4A4A] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[r.jsx(lN,{className:"w-3 h-3"})," "]}),r.jsx("input",{type:"text",value:b,onChange:T=>y(T.target.value),placeholder:"MM-DD",className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-xs font-mono font-medium text-[#4A4A4A] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors"})]})]})]})]}),r.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 pb-2 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)] h-[240px] flex flex-col",children:[r.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:""}),r.jsxs("div",{className:"flex-1 mt-2 relative",children:[r.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-10",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px)",backgroundSize:"100% 2rem",marginTop:"1.9rem"}}),r.jsx("textarea",{value:v,onChange:T=>C(T.target.value),className:"w-full h-full bg-transparent border-none text-sm text-[#4A4A4A] focus:outline-none resize-none leading-[2rem]",placeholder:"...",style:{lineHeight:"2rem"}})]}),r.jsx("div",{className:"text-right border-t border-[#E5E5E5] pt-2 mt-2",children:r.jsxs("span",{className:"text-[10px] font-mono text-[#8C8C89]",children:[": ",v.length]})})]})]})]}),r.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-6 bg-[#F2F0EB]/90 backdrop-blur-md border-t border-[#D6D3CC] z-40",children:r.jsxs("div",{className:"max-w-[420px] mx-auto flex gap-4 items-center justify-between",children:[r.jsx("div",{className:"text-[10px] font-mono text-[#8C8C89] max-w-[150px]",children:""}),r.jsxs("button",{onClick:j,className:"bg-[#2C2C2C] text-[#F2F0EB] px-8 py-3 rounded-[2px] font-bold text-sm tracking-wider uppercase active:bg-black hover:bg-black transition-colors shadow-lg flex items-center gap-2",children:[r.jsx(Xa,{className:"w-4 h-4"}),""]})]})}),r.jsx(ze,{children:w&&r.jsx(je.div,{initial:{opacity:0,scale:1.5,rotate:-10},animate:{opacity:1,scale:1,rotate:-5},exit:{opacity:0},className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[60] pointer-events-none",children:r.jsxs("div",{className:"w-40 h-40 rounded-full border-[6px] border-[#34C759] flex flex-col items-center justify-center text-[#34C759] opacity-90 mix-blend-multiply bg-white/50 backdrop-blur-sm",children:[r.jsx(Dt,{className:"w-12 h-12 mb-1",strokeWidth:4}),r.jsx("span",{className:"text-xl font-black uppercase tracking-tight",children:""}),r.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest mt-1",children:new Date().toLocaleDateString()})]})})})]})}function w_({onClose:e}){const[n,s]=N.useState("list"),[i,o]=N.useState(null),[l,c]=N.useState(Date.now()),u=()=>{s("editUser")},h=p=>{o(p),s("editCharacter")},g=()=>{s("list"),o(null),c(Date.now())};return r.jsxs("div",{className:"relative w-full h-full bg-[#F2F0EB]",children:[r.jsx(b_,{onClose:e,onEditUser:u,onEditCharacter:h,isBackground:n!=="list",lastUpdated:l}),r.jsxs(ze,{children:[n==="editUser"&&r.jsx(je.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"absolute inset-0 z-20",style:{willChange:"transform"},children:r.jsx(y_,{onBack:g})},"editUser"),n==="editCharacter"&&r.jsx(je.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"absolute inset-0 z-20",style:{willChange:"transform"},children:r.jsx(v_,{onBack:g,character:i})},"editCharacter")]}),r.jsx(ze,{children:n!=="list"&&r.jsx(je.div,{initial:{opacity:0},animate:{opacity:.3},exit:{opacity:0},className:"absolute inset-0 bg-black z-10 pointer-events-none"})})]})}function k_(){const e={user:`background: linear-gradient(75deg, rgba(172, 188, 166, 1), rgba(172, 188, 166, 1), rgba(172, 188, 166, 1));
color: #ffffff;
border-radius: 8px;
padding: 0.625rem 0.875rem;
max-width: 70vw;`,character:`background: linear-gradient(-75deg, rgba(245, 245, 245, 1), rgba(245, 245, 245, 1), rgba(245, 245, 245, 1));
color: #333333;
border-radius: 8px;
padding: 0.625rem 0.875rem;
max-width: 70vw;`,userQuote:`background: #9BAD96;
color: rgba(255, 255, 255, 0.8);
border-radius: 4px;
padding: 0.5rem;
margin-bottom: 0.5rem;`,characterQuote:`background: #e8e8e8;
color: #666666;
border-radius: 4px;
padding: 0.5rem;
margin-bottom: 0.5rem;`},[n,s]=N.useState(()=>Pe.chatSettings||{userAvatar:null,userNickname:"",contextMessageCount:10,chatBackground:null,enabledWorldBooks:[],timeAwareness:!0,bubbleStyles:e,timestampStyle:"default",theme:"light"}),[i,o]=N.useState(()=>Pe.chatSettings||{userAvatar:null,userNickname:"",contextMessageCount:10,chatBackground:null,enabledWorldBooks:[],timeAwareness:!0,bubbleStyles:e,timestampStyle:"default",theme:"light"}),[l,c]=N.useState(null),[u,h]=N.useState(null),[g,p]=N.useState(!1),[f,m]=N.useState([]),[b,y]=N.useState(!1),[v,C]=N.useState(!1),[w,F]=N.useState([]),[j,T]=N.useState(""),[z,B]=N.useState(!1),[U,D]=N.useState([]),[A,H]=N.useState(()=>{const ie=Pe.chatSettings;return ie?.theme?ie.theme==="dark"||ie.theme==="dark-frosted":ie?.darkMode||!1});N.useEffect(()=>{H(i.theme==="dark"||i.theme==="dark-frosted")},[i.theme]);const Y=ie=>{const Ce={user:ie?.user||e.user,userQuote:ie?.userQuote||e.userQuote,character:ie?.character||e.character,characterQuote:ie?.characterQuote||e.characterQuote};return`/*  */
.user-bubble {
  ${Ce.user.split(`
`).join(`
  `)}
}

/*  */
.user-quote {
  ${Ce.userQuote.split(`
`).join(`
  `)}
}

/*  */
.character-bubble {
  ${Ce.character.split(`
`).join(`
  `)}
}

/*  */
.character-quote {
  ${Ce.characterQuote.split(`
`).join(`
  `)}
}`},_=ie=>{const Ce={...e},be=ie.match(/\.user-bubble\s*\{([^}]*)\}/),R=ie.match(/\.user-quote\s*\{([^}]*)\}/),fe=ie.match(/\.character-bubble\s*\{([^}]*)\}/),te=ie.match(/\.character-quote\s*\{([^}]*)\}/);return be&&(Ce.user=be[1].trim().replace(/\s+/g," ").replace(/; /g,`;
`)),R&&(Ce.userQuote=R[1].trim().replace(/\s+/g," ").replace(/; /g,`;
`)),fe&&(Ce.character=fe[1].trim().replace(/\s+/g," ").replace(/; /g,`;
`)),te&&(Ce.characterQuote=te[1].trim().replace(/\s+/g," ").replace(/; /g,`;
`)),Ce};N.useEffect(()=>{L(),k(),$()},[]),N.useEffect(()=>{(async()=>{if(i.userAvatar)if(i.userAvatar.startsWith("data:"))c(i.userAvatar);else{const Ce=await Ct(i.userAvatar);c(Ce)}else c(null);if(i.chatBackground)if(i.chatBackground.startsWith("data:"))h(i.chatBackground);else{const Ce=await Ct(i.chatBackground);h(Ce)}else h(null)})()},[i.userAvatar,i.chatBackground]);const L=async()=>{try{const ie=await he.get(re.CHATS,"chat_settings");if(ie){const Ce={...ie,enabledWorldBooks:ie.enabledWorldBooks||[],timeAwareness:ie.timeAwareness!==void 0?ie.timeAwareness:!0,bubbleStyles:ie.bubbleStyles||e,timestampStyle:ie.timestampStyle||"default",theme:ie.theme||(ie.darkMode?"dark":"light")};s(Ce),o(Ce),Pe.chatSettings=Ce}else{const Ce=await he.get(re.USER_DATA,"userData");if(Ce){const be={userAvatar:null,userNickname:Ce.name||"",contextMessageCount:10,chatBackground:null,enabledWorldBooks:[],timeAwareness:!0,bubbleStyles:e,timestampStyle:"default",theme:"light"};s(be),o(be),Pe.chatSettings=be}}}catch(ie){console.error("Failed to load chat settings:",ie)}},k=async()=>{try{const ie=await he.get(re.WORLD_BOOKS,"world_books");if(ie){const Ce=ie.filter(be=>be.scope==="local");m(Ce)}}catch(ie){console.error("Failed to load world books:",ie)}},$=async()=>{try{const ie=await he.get(re.BUBBLE_PRESETS,"bubble_presets");ie&&F(ie)}catch(ie){console.error("Failed to load bubble presets:",ie)}},P=async ie=>{try{o(ie),s(ie),await he.set(re.CHATS,"chat_settings",ie),Pe.chatSettings=ie,window.dispatchEvent(new Event("chat-settings-updated"))}catch(Ce){console.error("Failed to save settings instantly:",Ce)}},I=ie=>{const Ce={...i,userNickname:ie};P(Ce)},q=ie=>{const Ce={...i,contextMessageCount:ie};P(Ce)},G=()=>{const ie=document.createElement("input");ie.type="file",ie.accept="image/*",ie.onchange=async Ce=>{const be=Ce.target.files?.[0];if(be){y(!0);try{const R=await cs("chat-avatar",be),fe={...i,userAvatar:"chat-avatar"};i.userAvatar==="chat-avatar-temp"&&await ea("chat-avatar-temp"),c(R),P(fe)}catch(R){console.error(":",R)}finally{y(!1)}}},ie.click()},Q=()=>{const ie=document.createElement("input");ie.type="file",ie.accept="image/*",ie.onchange=async Ce=>{const be=Ce.target.files?.[0];if(be){y(!0);try{const R=await cs("chat-background",be),fe={...i,chatBackground:"chat-background"};i.chatBackground==="chat-background-temp"&&await ea("chat-background-temp"),h(R),P(fe)}catch(R){console.error(":",R)}finally{y(!1)}}},ie.click()},M=()=>{const ie={...i,chatBackground:null};h(null),P(ie)},O=async()=>{try{await P(i),p(!0),setTimeout(()=>p(!1),2e3)}catch(ie){console.error("Failed to apply bubble styles:",ie)}},ee=()=>{D([...i.enabledWorldBooks]),B(!0)},W=ie=>{U.includes(ie)?D(U.filter(Ce=>Ce!==ie)):D([...U,ie])},V=()=>{const ie={...i,enabledWorldBooks:[...U]};P(ie),B(!1)},Z=ie=>{const Ce={...i,enabledWorldBooks:i.enabledWorldBooks.filter(be=>be!==ie)};P(Ce)},ue=ie=>{const Ce={};return ie&&ie.split(";").filter(R=>R.trim()).forEach(R=>{const[fe,te]=R.split(":").map(J=>J.trim());if(fe&&te){const J=fe.replace(/-([a-z])/g,X=>X[1].toUpperCase());Ce[J]=te}}),Ce},ce=async()=>{if(!j.trim()){alert("");return}const ie={id:Date.now().toString(),name:j.trim(),styles:i.bubbleStyles||e,createdAt:new Date().toISOString()},Ce=[...w,ie];F(Ce),await he.set(re.BUBBLE_PRESETS,"bubble_presets",Ce),T(""),p(!0),setTimeout(()=>p(!1),1500)},me=ie=>{o({...i,bubbleStyles:ie.styles})},Te=async ie=>{const Ce=w.filter(be=>be.id!==ie);F(Ce),await he.set(re.BUBBLE_PRESETS,"bubble_presets",Ce)};return r.jsxs("div",{className:`flex-1 overflow-y-auto flex flex-col ${i.theme==="light-frosted"||i.theme==="dark-frosted"?"bg-transparent":A?"bg-[#121212]":"bg-white"}`,children:[r.jsxs("div",{className:"flex-1 px-5 py-6",children:[r.jsxs("div",{className:"mb-8 flex flex-col items-center",children:[r.jsx("button",{onClick:G,className:`w-24 h-24 rounded-full flex items-center justify-center overflow-hidden active:opacity-70 hover:opacity-70 transition-opacity ${i.theme==="light-frosted"?"bg-white/40":i.theme==="dark-frosted"?"bg-black/40":A?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,children:l?r.jsx("img",{src:l,alt:"Avatar",className:"w-full h-full object-cover"}):r.jsx(Pf,{className:"w-8 h-8 text-[#999]",strokeWidth:2})}),r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[13px] mt-2 ${A?"text-[#888]":"text-[#999]"}`,children:""})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] mb-3 ${A?"text-white":"text-[#333]"}`,children:""}),r.jsx("input",{type:"text",value:i.userNickname,onChange:ie=>I(ie.target.value),placeholder:"",className:`w-full px-4 py-3 rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] outline-none transition-colors ${i.theme==="light-frosted"?"bg-white/40 text-[#333] placeholder:text-[#999] focus:bg-white/60":i.theme==="dark-frosted"?"bg-black/40 text-white placeholder:text-[#888] focus:bg-black/60":A?"bg-[#1e1e1e] text-white placeholder:text-[#888] focus:bg-[#2d2d2d]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999] focus:bg-[#ebebeb]"}`})]}),r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] ${A?"text-white":"text-[#333]"}`,children:"AI"}),r.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] text-[#7B9E7B]",children:i.contextMessageCount})]}),r.jsx("div",{className:"px-1",children:r.jsx("input",{type:"range",min:"1",max:"1000",value:i.contextMessageCount,onChange:ie=>q(parseInt(ie.target.value)),className:`w-full h-2 rounded-lg appearance-none cursor-pointer slider ${i.theme==="light-frosted"?"bg-white/40":i.theme==="dark-frosted"?"bg-white/10":A?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,style:{background:`linear-gradient(to right, #7B9E7B 0%, #7B9E7B ${(i.contextMessageCount-1)/999*100}%, ${i.theme==="light-frosted"?"rgba(255,255,255,0.4)":i.theme==="dark-frosted"?"rgba(255,255,255,0.1)":A?"#1e1e1e":"#f5f5f5"} ${(i.contextMessageCount-1)/999*100}%, ${i.theme==="light-frosted"?"rgba(255,255,255,0.4)":i.theme==="dark-frosted"?"rgba(255,255,255,0.1)":A?"#1e1e1e":"#f5f5f5"} 100%)`}})}),r.jsxs("div",{className:"flex justify-between mt-2 px-1",children:[r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] ${A?"text-[#888]":"text-[#999]"}`,children:"1"}),r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] ${A?"text-[#888]":"text-[#999]"}`,children:"1000"})]}),r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[13px] mt-3 ${A?"text-[#888]":"text-[#999]"}`,children:"AIAI"})]}),r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] mb-1 ${A?"text-white":"text-[#333]"}`,children:""}),r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[13px] ${A?"text-[#888]":"text-[#999]"}`,children:""})]}),r.jsx("button",{onClick:()=>{const ie={...i,timeAwareness:!i.timeAwareness};P(ie)},className:`w-12 h-7 rounded-full transition-colors flex items-center px-0.5 hover:opacity-80 active:opacity-80 ${i.timeAwareness?"bg-[#7B9E7B]":"bg-[#d0d0d0]"}`,children:r.jsx("div",{className:`w-6 h-6 bg-white rounded-full transition-transform ${i.timeAwareness?"translate-x-5":"translate-x-0"}`})})]})}),r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] ${A?"text-white":"text-[#333]"}`,children:""}),f.length>0&&r.jsx("button",{onClick:ee,className:"w-8 h-8 bg-[#7B9E7B] rounded-full flex items-center justify-center active:opacity-80 hover:opacity-80 transition-opacity",children:r.jsx(Cr,{className:"w-5 h-5 text-white",strokeWidth:2})})]}),f.length===0?r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] ${A?"text-[#888]":"text-[#999]"}`,children:""}):i.enabledWorldBooks.length===0?r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] ${A?"text-[#888]":"text-[#999]"}`,children:""}):r.jsx("div",{className:"flex flex-col gap-2",children:i.enabledWorldBooks.map(ie=>{const Ce=f.find(be=>be.id===ie);return Ce?r.jsxs("div",{className:`rounded-lg px-4 py-3 flex items-center justify-between ${i.theme==="light-frosted"?"bg-white/40":i.theme==="dark-frosted"?"bg-black/40":A?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,children:[r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] ${A?"text-white":"text-[#333]"}`,children:Ce.name}),r.jsx("button",{onClick:()=>Z(ie),className:"text-[#999] hover:text-[#333] active:text-[#333] transition-colors",children:r.jsx(ht,{className:"w-5 h-5",strokeWidth:2})})]},ie):null})})]}),r.jsxs("div",{className:"mb-8",children:[r.jsxs("button",{onClick:()=>C(!v),className:`w-full flex items-center justify-between p-4 rounded-lg transition-colors ${i.theme==="light-frosted"?"bg-white/40 active:bg-white/60 hover:bg-white/60":i.theme==="dark-frosted"?"bg-black/40 active:bg-black/60 hover:bg-black/60":A?"bg-[#1e1e1e] active:bg-[#2d2d2d] hover:bg-[#2d2d2d]":"bg-[#f5f5f5] active:bg-[#ebebeb] hover:bg-[#ebebeb]"}`,children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] ${A?"text-white":"text-[#333]"}`,children:""}),r.jsx(zu,{className:`w-5 h-5 transition-transform ${v?"rotate-180":""} ${A?"text-[#a0a0a0]":"text-[#666]"}`,strokeWidth:2})]}),r.jsx(ze,{children:v&&r.jsx(je.div,{initial:{height:0,opacity:0,marginTop:0},animate:{height:"auto",opacity:1,marginTop:16},exit:{height:0,opacity:0,marginTop:0},transition:{type:"spring",stiffness:300,damping:30},className:"overflow-hidden",children:r.jsxs("div",{className:"flex flex-col gap-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] mb-3 ${A?"text-white":"text-[#333]"}`,children:""}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{const ie={...i,theme:"light",darkMode:!1};P(ie)},className:`flex-1 py-3 rounded-lg border-2 font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] transition-all ${i.theme==="light"?"border-[#7B9E7B] bg-[#7B9E7B]/10 text-[#7B9E7B]":A?"border-[#2d2d2d] bg-[#1e1e1e] text-[#888]":"border-[#e5e5e5] bg-[#f5f5f5] text-[#666]"}`,children:""}),r.jsx("button",{onClick:()=>{const ie={...i,theme:"dark",darkMode:!0};P(ie)},className:`flex-1 py-3 rounded-lg border-2 font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] transition-all ${i.theme==="dark"?"border-[#7B9E7B] bg-[#7B9E7B]/10 text-[#7B9E7B]":A?"border-[#2d2d2d] bg-[#1e1e1e] text-[#888]":"border-[#e5e5e5] bg-[#f5f5f5] text-[#666]"}`,children:""}),r.jsx("button",{onClick:()=>{const ie={...i,theme:"light-frosted",darkMode:!1};P(ie)},className:`flex-1 py-3 rounded-lg border-2 font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] transition-all ${i.theme==="light-frosted"?"border-[#7B9E7B] bg-[#7B9E7B]/10 text-[#7B9E7B]":A?"border-[#2d2d2d] bg-[#1e1e1e] text-[#888]":"border-[#e5e5e5] bg-[#f5f5f5] text-[#666]"}`,children:""}),r.jsx("button",{onClick:()=>{const ie={...i,theme:"dark-frosted",darkMode:!0};P(ie)},className:`flex-1 py-3 rounded-lg border-2 font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] transition-all ${i.theme==="dark-frosted"?"border-[#7B9E7B] bg-[#7B9E7B]/10 text-[#7B9E7B]":A?"border-[#2d2d2d] bg-[#1e1e1e] text-[#888]":"border-[#e5e5e5] bg-[#f5f5f5] text-[#666]"}`,children:""})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] mb-3 ${A?"text-white":"text-[#333]"}`,children:""}),r.jsxs("button",{onClick:Q,className:`w-full px-4 py-3 rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] transition-colors flex items-center justify-center gap-2 ${i.theme==="light-frosted"?"bg-white/40 text-[#333] active:bg-white/60 hover:bg-white/60":i.theme==="dark-frosted"?"bg-black/40 text-white active:bg-black/60 hover:bg-black/60":A?"bg-[#1e1e1e] text-white active:bg-[#2d2d2d] hover:bg-[#2d2d2d]":"bg-[#f5f5f5] text-[#333] active:bg-[#ebebeb] hover:bg-[#ebebeb]"}`,children:[r.jsx(Xr,{className:`w-5 h-5 ${A?"text-[#a0a0a0]":"text-[#666]"}`,strokeWidth:2}),r.jsx("span",{children:i.chatBackground?"":""})]}),i.chatBackground&&r.jsxs("button",{onClick:M,className:`mt-2 w-full px-4 py-2.5 rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] transition-colors flex items-center justify-center gap-2 ${i.theme==="light-frosted"?"bg-red-50/50 text-[#ff4d4f] active:bg-red-50 hover:bg-red-50":i.theme==="dark-frosted"?"bg-red-900/20 text-[#ff6b6b] active:bg-red-900/30 hover:bg-red-900/30":A?"bg-[#2a1a1a] text-[#ff6b6b] active:bg-[#3a2a2a] hover:bg-[#3a2a2a]":"bg-[#fff0f0] text-[#ff4d4f] active:bg-[#ffe5e5] hover:bg-[#ffe5e5]"}`,children:[r.jsx(Hn,{className:"w-4 h-4",strokeWidth:2}),r.jsx("span",{children:""})]}),u&&r.jsx("div",{className:"mt-3 rounded-lg overflow-hidden",children:r.jsx("img",{src:u,alt:"Background Preview",className:"w-full h-32 object-cover"})})]}),r.jsxs("div",{children:[r.jsx("h4",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] mb-3 ${A?"text-white":"text-[#333]"}`,children:""}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{const ie={...i,timestampStyle:"default"};P(ie)},className:`flex-1 py-3 rounded-lg border-2 font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] transition-all ${i.timestampStyle!=="inside"?"border-[#7B9E7B] bg-[#7B9E7B]/10 text-[#7B9E7B]":A?"border-[#2d2d2d] bg-[#1e1e1e] text-[#888]":"border-[#e5e5e5] bg-[#f5f5f5] text-[#666]"}`,children:" ()"}),r.jsx("button",{onClick:()=>{const ie={...i,timestampStyle:"inside"};P(ie)},className:`flex-1 py-3 rounded-lg border-2 font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] transition-all ${i.timestampStyle==="inside"?"border-[#7B9E7B] bg-[#7B9E7B]/10 text-[#7B9E7B]":A?"border-[#2d2d2d] bg-[#1e1e1e] text-[#888]":"border-[#e5e5e5] bg-[#f5f5f5] text-[#666]"}`,children:" ()"})]}),r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] mt-2 ${A?"text-[#888]":"text-[#999]"}`,children:'""'})]}),r.jsxs("div",{children:[r.jsx("h4",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] mb-3 ${A?"text-white":"text-[#333]"}`,children:"CSS"}),r.jsxs("div",{className:`mb-4 p-3 rounded-lg ${i.theme==="light-frosted"?"bg-white/40":i.theme==="dark-frosted"?"bg-black/20":A?"bg-[#181818]":"bg-[#fafafa]"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("input",{type:"text",value:j,onChange:ie=>T(ie.target.value),placeholder:"",className:`flex-1 px-3 py-2 border rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] outline-none transition-colors ${i.theme==="light-frosted"?"bg-white/60 border-white/40 text-[#333] placeholder:text-[#999] focus:border-[#7B9E7B]":i.theme==="dark-frosted"?"bg-black/40 border-white/10 text-white placeholder:text-[#888] focus:border-[#7B9E7B]":A?"bg-[#1e1e1e] border-[#333] text-white placeholder:text-[#888] focus:border-[#7B9E7B]":"bg-white border-[#e0e0e0] text-[#333] placeholder:text-[#999] focus:border-[#7B9E7B]"}`}),r.jsxs("button",{onClick:ce,className:"px-3 py-2 bg-[#7B9E7B] rounded-lg text-white active:opacity-80 hover:opacity-80 transition-opacity flex items-center gap-1.5",children:[r.jsx(Xa,{className:"w-4 h-4",strokeWidth:2}),r.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[13px]",children:""})]})]}),w.length>0&&r.jsx("div",{className:"flex flex-col gap-2",children:w.map(ie=>r.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg border ${i.theme==="light-frosted"?"bg-white/60 border-white/40":i.theme==="dark-frosted"?"bg-black/40 border-white/10":A?"bg-[#1e1e1e] border-[#333]":"bg-white border-[#e0e0e0]"}`,children:[r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] flex-1 ${A?"text-white":"text-[#333]"}`,children:ie.name}),r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx("button",{onClick:()=>me(ie),className:"px-2.5 py-1.5 bg-[#7B9E7B] rounded font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[12px] text-white active:opacity-80 hover:opacity-80 transition-opacity",children:""}),r.jsx("button",{onClick:()=>Te(ie.id),className:`p-1.5 rounded transition-colors ${i.theme==="light-frosted"?"bg-black/5 text-[#666] active:bg-black/10 hover:bg-black/10":i.theme==="dark-frosted"?"bg-white/10 text-[#a0a0a0] active:bg-white/20 hover:bg-white/20":A?"bg-[#2d2d2d] text-[#a0a0a0] active:bg-[#3d3d3d] hover:bg-[#3d3d3d]":"bg-[#f0f0f0] text-[#666] active:bg-[#e0e0e0] hover:bg-[#e0e0e0]"}`,children:r.jsx(Hn,{className:"w-3.5 h-3.5",strokeWidth:2})})]})]},ie.id))})]}),r.jsx("textarea",{value:Y(i.bubbleStyles||e),onChange:ie=>{const Ce=_(ie.target.value);o({...i,bubbleStyles:Ce})},placeholder:"CSS...",className:`w-full px-3 py-2 rounded-lg font-mono text-[11px] outline-none transition-colors resize-y min-h-[300px] ${i.theme==="light-frosted"?"bg-white/40 text-[#333] placeholder:text-[#999] focus:bg-white/60":i.theme==="dark-frosted"?"bg-black/40 text-white placeholder:text-[#888] focus:bg-black/60":A?"bg-[#1e1e1e] text-white placeholder:text-[#888] focus:bg-[#2d2d2d]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999] focus:bg-[#ebebeb]"}`,style:{whiteSpace:"pre",overflowWrap:"normal",overflowX:"auto"}}),r.jsxs("div",{className:`mt-4 p-3 rounded-lg bg-cover bg-center ${!u&&(i.theme==="light-frosted"?"bg-white/40":i.theme==="dark-frosted"?"bg-black/20":A?"bg-[#181818]":"bg-[#fafafa]")}`,style:u?{backgroundImage:`url(${u})`}:{},children:[r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[12px] mb-3 drop-shadow-md ${A||u?"text-[#e0e0e0]":"text-[#999]"}`,children:""}),r.jsx("div",{className:"flex justify-start mb-3",children:r.jsxs("div",{style:ue((i.bubbleStyles||e).character),children:[r.jsxs("div",{style:ue((i.bubbleStyles||e).characterQuote),children:[r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px]",children:""}),r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px]",children:""})]}),r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px]",children:""})]})}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("div",{style:ue((i.bubbleStyles||e).user),children:[r.jsxs("div",{style:ue((i.bubbleStyles||e).userQuote),children:[r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px]",children:""}),r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px]",children:""})]}),r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px]",children:""})]})})]}),r.jsx("button",{onClick:O,className:"mt-4 w-full py-3 bg-[#7B9E7B] rounded-lg font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[16px] text-white active:opacity-80 hover:opacity-80 transition-opacity flex items-center justify-center",children:""}),r.jsx("button",{onClick:()=>o({...i,bubbleStyles:e}),className:`mt-4 w-full px-4 py-2 border rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] transition-colors ${i.theme==="light-frosted"?"bg-white/40 border-white/40 text-[#666] active:bg-white/60 hover:bg-white/60":i.theme==="dark-frosted"?"bg-black/40 border-white/10 text-[#a0a0a0] active:bg-black/60 hover:bg-black/60":A?"bg-[#1e1e1e] border-[#333] text-[#a0a0a0] active:bg-[#2d2d2d] hover:bg-[#2d2d2d]":"bg-white border-[#d0d0d0] text-[#666] active:bg-[#f5f5f5] hover:bg-[#f5f5f5]"}`,children:""})]})]})})})]})]}),g&&r.jsx("div",{className:"fixed inset-0 bg-black/40 z-[80] flex items-center justify-center p-4",children:r.jsx("div",{className:`rounded-xl w-64 px-6 py-5 shadow-2xl ${i.theme==="light-frosted"?"bg-white/80 backdrop-blur-md":A?"bg-[#1e1e1e]":"bg-white"}`,children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-[#7B9E7B] flex items-center justify-center mb-3",children:r.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[16px] ${A?"text-white":"text-[#333]"}`,children:""})]})})}),b&&r.jsx("div",{className:"fixed inset-0 bg-black/40 z-[80] flex items-center justify-center p-4",children:r.jsx("div",{className:`rounded-xl w-64 px-6 py-5 shadow-2xl ${i.theme==="light-frosted"?"bg-white/80 backdrop-blur-md":A?"bg-[#1e1e1e]":"bg-white"}`,children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-[#7B9E7B] flex items-center justify-center mb-3",children:r.jsx("div",{className:"w-6 h-6 border-3 border-white border-t-transparent rounded-full animate-spin"})}),r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[16px] ${A?"text-white":"text-[#333]"}`,children:"..."})]})})}),z&&r.jsx("div",{className:"fixed inset-0 bg-black/40 z-[1200] flex items-center justify-center p-4",children:r.jsxs("div",{className:`rounded-2xl p-6 w-full max-w-[360px] shadow-xl max-h-[70vh] overflow-y-auto ${i.theme==="light-frosted"?"bg-white/80 backdrop-blur-md":A?"bg-[#1e1e1e]":"bg-white"}`,children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-4 ${A?"text-white":"text-[#333]"}`,children:""}),f.length===0?r.jsx("div",{className:"py-8 text-center",children:r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] ${A?"text-[#888]":"text-[#999]"}`,children:""})}):r.jsx("div",{className:"flex flex-col gap-3 mb-6",children:f.map(ie=>r.jsxs("button",{onClick:()=>W(ie.id),className:"flex items-center gap-3 active:opacity-70 hover:opacity-70 transition-opacity",children:[r.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors flex-shrink-0 ${U.includes(ie.id)?"bg-[#7B9E7B] border-[#7B9E7B]":i.theme==="light-frosted"?"bg-white/40 border-black/5":A?"bg-[#1e1e1e] border-[#333]":"bg-white border-[#d0d0d0]"}`,children:U.includes(ie.id)&&r.jsx(Dt,{className:"w-3.5 h-3.5 text-white",strokeWidth:3})}),r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] text-left flex-1 ${A?"text-white":"text-[#333]"}`,children:ie.name})]},ie.id))}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>B(!1),className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors ${i.theme==="light-frosted"?"bg-black/5 text-[#666] hover:bg-black/10 active:bg-black/10":A?"bg-[#2d2d2d] text-[#a0a0a0] hover:bg-[#3d3d3d] active:bg-[#3d3d3d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),r.jsx("button",{onClick:V,className:"flex-1 py-2.5 rounded-xl bg-[#7B9E7B] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity",children:""})]})]})})]})}function S_({onClose:e,onOpenChat:n}){const[s,i]=N.useState("messages"),[o,l]=N.useState([]),[c,u]=N.useState(!1),[h,g]=N.useState(!1),[p,f]=N.useState([]),[m,b]=N.useState(()=>Pe.chatSettings?.darkMode||!1),[y,v]=N.useState(()=>Pe.chatSettings?.theme||(Pe.chatSettings?.darkMode?"dark":"light")),[C,w]=N.useState(null);N.useEffect(()=>{j(),T(),z();const _=async()=>{const k=Pe.chatSettings;b(k?.darkMode||!1);const $=k?.theme||(k?.darkMode?"dark":"light");if(v($),($==="light-frosted"||$==="dark-frosted")&&k?.chatBackground)if(k.chatBackground.startsWith("data:"))w(k.chatBackground);else try{const P=await Ct(k.chatBackground);w(P)}catch(P){console.error("Failed to load background image:",P)}else w(null);T()};window.addEventListener("chat-settings-updated",_);const L=k=>{const{type:$,payload:P}=k.data;$==="AI_TASK_COMPLETED"&&(console.log("[ChatList]  AI "),T())};return"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",L),()=>{window.removeEventListener("chat-settings-updated",_),"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener("message",L)}},[]);const F=_=>{if(!_)return"";const L=new Date,k=new Date(_),$=new Date(L);$.setHours(0,0,0,0);const P=new Date(k);P.setHours(0,0,0,0);const I=Math.floor(($.getTime()-P.getTime())/(1e3*60*60*24)),q=k.getHours().toString().padStart(2,"0"),G=k.getMinutes().toString().padStart(2,"0");if(I===0)return`${q}:${G}`;if(I===1)return` ${q}:${G}`;if(I<7)return["","","","","","",""][k.getDay()];if(L.getFullYear()===k.getFullYear()){const ee=k.getMonth()+1,W=k.getDate();return`${ee}/${W}`}const Q=k.getFullYear(),M=k.getMonth()+1,O=k.getDate();return`${Q}/${M}/${O}`},j=async()=>{try{const _=await he.get(re.CHATS,"chat_settings");if(_){Pe.chatSettings?Pe.chatSettings={...Pe.chatSettings,..._}:Pe.chatSettings=_,_.darkMode!==void 0&&b(_.darkMode);const L=_.theme||(_.darkMode?"dark":"light");if(v(L),(L==="light-frosted"||L==="dark-frosted")&&_.chatBackground)if(_.chatBackground.startsWith("data:"))w(_.chatBackground);else try{const k=await Ct(_.chatBackground);w(k)}catch(k){console.error("Failed to load background image:",k)}}}catch(_){console.error("Failed to load global chat settings:",_)}},T=async()=>{try{const _=await he.get(re.CHATS,"chat_list");if(_){const L=await Promise.all(_.map(async k=>{const $=`chat_detail_settings_${k.id}`,P=await he.get(re.CHAT_SETTINGS,$),I=F(k.timestamp);return P?{...k,remark:P.remark||k.remark,isPinned:P.isPinned!==void 0?P.isPinned:k.isPinned,time:I}:{...k,time:I}}));L.sort((k,$)=>{if(k.isPinned&&!$.isPinned)return-1;if(!k.isPinned&&$.isPinned)return 1;const P=k.timestamp||0;return($.timestamp||0)-P}),l(L)}else l([])}catch(_){console.error("Failed to load chats:",_),l([])}},z=async()=>{try{const _=await he.get(re.CHARACTERS,"characters");_&&f(_)}catch(_){console.error("Failed to load characters:",_)}},B=()=>{u(!c)},U=()=>{u(!1),console.log("Create group")},D=()=>{u(!1),g(!0)},A=async _=>{g(!1);const L=Wu(_.id,_.name);if(L===_.name){const k=`chat_detail_settings_${_.id}`,P=(await he.get(re.CHAT_SETTINGS,k))?.remark||_.name;n(_.id,P)}else n(_.id,L)},H=_=>{const L=o.find(k=>k.id===_);if(L){let k=L.name;if(k===""||!k){const P=p.find(I=>I.id===_);P&&(k=P.name)}const $=Wu(_,L.remark||k);n(_,$)}},Y=()=>{switch(s){case"messages":return"";case"notifications":return"";case"settings":return"";default:return""}};return r.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col",children:[y==="light-frosted"||y==="dark-frosted"?r.jsxs(r.Fragment,{children:[C&&r.jsx("div",{className:"absolute inset-0 -z-20",children:r.jsx("img",{src:C,className:"w-full h-full object-cover"})}),r.jsx("div",{className:`absolute inset-0 -z-10 backdrop-blur-xl ${y==="light-frosted"?"bg-white/80":"bg-black/60"}`})]}):r.jsx("div",{className:`absolute inset-0 -z-10 ${m?"bg-[#121212]":"bg-white"}`}),r.jsx("div",{className:y==="light-frosted"||y==="dark-frosted"?"bg-transparent z-20":m?"bg-[#121212]":"bg-white",children:r.jsxs("div",{className:"h-16 flex items-center justify-between px-4 relative",children:[r.jsx("button",{onClick:e,className:"p-2 -ml-2 active:opacity-60 transition-opacity",children:r.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:m?"white":"black",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M15 18l-6-6 6-6"})})}),r.jsx("h1",{className:`absolute left-1/2 -translate-x-1/2 font-semibold text-[18px] ${m?"text-white":"text-[#333]"}`,children:Y()}),s==="messages"&&r.jsx("button",{onClick:B,className:"p-2 -mr-2 active:opacity-60 transition-opacity relative font-normal",children:r.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:m?"white":"#333333",strokeWidth:"2.5",children:[r.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),r.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),s!=="messages"&&r.jsx("div",{className:"w-11"})]})}),r.jsx(ze,{children:c&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-[51]",onClick:()=>u(!1)}),r.jsxs(je.div,{initial:{opacity:0,scale:.9,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-10},transition:{type:"spring",stiffness:400,damping:30},className:`absolute right-4 top-[68px] rounded-lg shadow-lg z-[52] overflow-hidden ${y==="light-frosted"?"bg-white/80 backdrop-blur-xl border border-white/20":y==="dark-frosted"?"bg-black/40 backdrop-blur-xl border border-white/10":m?"bg-[#1e1e1e] border border-[#2d2d2d]":"bg-white"}`,children:[r.jsxs("button",{onClick:U,className:`w-full flex items-center gap-3 px-4 py-3 transition-colors ${y==="light-frosted"?"active:bg-white/60 hover:bg-white/40":y==="dark-frosted"?"active:bg-white/10 hover:bg-white/5":m?"active:bg-[#2d2d2d]":"active:bg-[#f5f5f5]"}`,children:[r.jsx(Of,{className:`w-6 h-6 ${m||y==="dark-frosted"?"text-white":"text-[#333]"}`,strokeWidth:2.5,strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] whitespace-nowrap ${m||y==="dark-frosted"?"text-white":"text-[#333]"}`,children:""})]}),r.jsxs("button",{onClick:D,className:`w-full flex items-center gap-3 px-4 py-3 transition-colors ${y==="light-frosted"?"active:bg-white/60 hover:bg-white/40":y==="dark-frosted"?"active:bg-white/10 hover:bg-white/5":m?"active:bg-[#2d2d2d]":"active:bg-[#f5f5f5]"}`,children:[r.jsx(O4,{className:`w-6 h-6 ${m||y==="dark-frosted"?"text-white":"text-[#333]"}`,strokeWidth:2.5,strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] whitespace-nowrap ${m||y==="dark-frosted"?"text-white":"text-[#333]"}`,children:""})]})]})]})}),r.jsx(ze,{children:h&&r.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[r.jsx(je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`absolute inset-0 ${y==="light-frosted"||y==="dark-frosted"?"bg-black/30 backdrop-blur-sm":"bg-black/50"}`,onClick:()=>g(!1)}),r.jsxs(je.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`rounded-xl w-64 max-h-96 flex flex-col shadow-2xl relative z-10 ${y==="light-frosted"?"bg-white/40 backdrop-blur-xl border border-white/20":y==="dark-frosted"?"bg-black/40 backdrop-blur-xl border border-white/10":m?"bg-[#1e1e1e]":"bg-white"}`,children:[r.jsxs("div",{className:`flex items-center justify-between px-5 py-3 border-b ${y==="light-frosted"?"border-white/20":y==="dark-frosted"?"border-white/10":m?"border-[#2d2d2d]":"border-[#f0f0f0]"}`,children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] ${m?"text-white":"text-[#333]"}`,children:""}),r.jsx("button",{onClick:()=>g(!1),className:`p-1 rounded-full transition-colors ${y==="light-frosted"?"active:bg-white/40 hover:bg-white/20":y==="dark-frosted"?"active:bg-white/10 hover:bg-white/5":m?"active:bg-[#2d2d2d]":"active:bg-[#f5f5f5]"}`,children:r.jsx(ht,{className:`w-5 h-5 ${m?"text-[#a0a0a0]":"text-[#666]"}`,strokeWidth:2})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:p.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-8 px-4",children:[r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] ${m?"text-[#888]":"text-[#999]"}`,children:""}),r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] mt-1 ${m?"text-[#666]":"text-[#ccc]"}`,children:""})]}):p.map(_=>r.jsx("button",{onClick:()=>A(_),className:`w-full flex items-center px-5 py-2.5 transition-colors ${y==="light-frosted"?"active:bg-white/40 hover:bg-white/20":m?"active:bg-[#2d2d2d]":"active:bg-[#f5f5f5]"}`,children:r.jsx("div",{className:"flex-1 text-center",children:r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] ${m?"text-white":"text-[#333]"}`,children:_.name})})},_.id))})]})]})}),r.jsx("div",{className:`flex-1 overflow-hidden relative ${y==="light-frosted"||y==="dark-frosted"?"bg-transparent":m?"bg-[#121212]":"bg-white"}`,children:r.jsxs(ze,{mode:"wait",children:[s==="messages"&&r.jsx(je.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2,ease:"easeInOut"},className:"h-full overflow-y-auto",children:o.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-20 px-4 h-full",children:[r.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-3 ${y==="light-frosted"?"bg-white/40":y==="dark-frosted"?"bg-white/10":m?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,children:r.jsx(Q0,{className:`w-9 h-9 ${m?"text-[#666]":"text-[#ccc]"}`,strokeWidth:2.5})}),r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] ${m?"text-[#888]":"text-[#999]"}`,children:""})]}):r.jsx("div",{className:y==="light-frosted"||y==="dark-frosted"?"bg-transparent":m?"bg-[#121212]":"bg-white",children:o.map((_,L)=>r.jsxs("div",{children:[r.jsx("button",{onClick:()=>H(_.id),className:`w-full px-4 py-3.5 transition-colors flex items-start text-left ${y==="light-frosted"?`active:bg-white/60 hover:bg-white/40 ${_.isPinned?"bg-white/40":"bg-transparent"}`:y==="dark-frosted"?`active:bg-white/10 hover:bg-white/5 ${_.isPinned?"bg-white/5":"bg-transparent"}`:m?`active:bg-[#1e1e1e] ${_.isPinned?"bg-[#1a1a1a]":"bg-[#121212]"}`:`active:bg-[#f5f5f5] ${_.isPinned?"bg-[#f9f9f9]":"bg-white"}`}`,children:r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[17px] truncate ${m?"text-white":"text-[#333]"}`,children:_.remark||(_.name===""||!_.name)&&p.find(k=>k.id===_.id)?.name||_.name}),_.memberCount&&r.jsxs("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] flex-shrink-0 ${m?"text-[#888]":"text-[#999]"}`,children:["(",_.memberCount,")"]})]}),_.time&&r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] flex-shrink-0 ml-2 ${m?"text-[#888]":"text-[#999]"}`,children:_.time})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] truncate flex-1 pr-2 ${m?"text-[#888]":"text-[#999]"}`,children:(()=>{let k=_.lastSender;if(!k||k===""){const $=p.find(P=>P.id===_.id)?.name;$&&$!==""&&(k=_.remark||$)}return k?`${k}${_.lastMessage}`:_.lastMessage})()}),_.unread!==void 0&&_.unread>0&&r.jsx("span",{className:"min-w-[18px] h-[18px] bg-[#ff4d4f] text-white text-[11px] font-medium flex items-center justify-center rounded-full px-1.5 flex-shrink-0",children:_.unread>99?"99+":_.unread})]})]})}),L<o.length-1&&r.jsx("div",{className:`border-b ${y==="light-frosted"?"border-white/20":y==="dark-frosted"?"border-white/10":m?"border-[#2d2d2d]":"border-[#f0f0f0]"}`})]},_.id))})},"messages"),s==="notifications"&&r.jsxs(je.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2,ease:"easeInOut"},className:"flex flex-col items-center justify-center py-20 px-4 h-full overflow-y-auto",children:[r.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-3 ${y==="light-frosted"?"bg-white/40":y==="dark-frosted"?"bg-white/10":m?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,children:r.jsx(Y0,{className:`w-9 h-9 ${m?"text-[#666]":"text-[#ccc]"}`,strokeWidth:2.5})}),r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] ${m?"text-[#888]":"text-[#999]"}`,children:""})]},"notifications"),s==="settings"&&r.jsx(je.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2,ease:"easeInOut"},className:"h-full overflow-y-auto",children:r.jsx(k_,{})},"settings")]})}),r.jsxs("div",{className:`h-[64px] flex items-center justify-around px-4 safe-area-inset-bottom ${y==="light-frosted"||y==="dark-frosted"?"bg-transparent":m?"bg-[#121212]":"bg-white"}`,children:[r.jsxs("button",{onClick:()=>i("messages"),className:"flex flex-col items-center justify-center gap-1 py-1.5 px-6 active:opacity-60 transition-opacity",children:[r.jsx(Q0,{className:`w-6 h-6 ${s==="messages"?"text-[#7B9E7B]":m?"text-[#888]":"text-[#999]"}`,strokeWidth:2.5}),r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] ${s==="messages"?"text-[#7B9E7B]":m?"text-[#888]":"text-[#999]"}`,children:""})]}),r.jsxs("button",{onClick:()=>i("notifications"),className:"flex flex-col items-center justify-center gap-1 py-1.5 px-6 active:opacity-60 transition-opacity",children:[r.jsx(Y0,{className:`w-6 h-6 ${s==="notifications"?"text-[#7B9E7B]":m?"text-[#888]":"text-[#999]"}`,strokeWidth:2.5}),r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] ${s==="notifications"?"text-[#7B9E7B]":m?"text-[#888]":"text-[#999]"}`,children:""})]}),r.jsxs("button",{onClick:()=>i("settings"),className:"flex flex-col items-center justify-center gap-1 py-1.5 px-6 active:opacity-60 transition-opacity",children:[r.jsx(Kl,{className:`w-6 h-6 ${s==="settings"?"text-[#7B9E7B]":m?"text-[#888]":"text-[#999]"}`,strokeWidth:2.5}),r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] ${s==="settings"?"text-[#7B9E7B]":m?"text-[#888]":"text-[#999]"}`,children:""})]})]})]})}function Fa(e,n,s){let i=s.initialDeps??[],o,l=!0;function c(){var u,h,g;let p;s.key&&((u=s.debug)!=null&&u.call(s))&&(p=Date.now());const f=e();if(!(f.length!==i.length||f.some((y,v)=>i[v]!==y)))return o;i=f;let b;if(s.key&&((h=s.debug)!=null&&h.call(s))&&(b=Date.now()),o=n(...f),s.key&&((g=s.debug)!=null&&g.call(s))){const y=Math.round((Date.now()-p)*100)/100,v=Math.round((Date.now()-b)*100)/100,C=v/16,w=(F,j)=>{for(F=String(F);F.length<j;)F=" "+F;return F};console.info(`%c ${w(v,5)} /${w(y,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*C,120))}deg 100% 31%);`,s?.key)}return s?.onChange&&!(l&&s.skipInitialOnChange)&&s.onChange(o),l=!1,o}return c.updateDeps=u=>{i=u},c}function cg(e,n){if(e===void 0)throw new Error("Unexpected undefined");return e}const C_=(e,n)=>Math.abs(e-n)<1.01,j_=(e,n,s)=>{let i;return function(...o){e.clearTimeout(i),i=e.setTimeout(()=>n.apply(this,o),s)}},dg=e=>{const{offsetWidth:n,offsetHeight:s}=e;return{width:n,height:s}},N_=e=>e,__=e=>{const n=Math.max(e.startIndex-e.overscan,0),s=Math.min(e.endIndex+e.overscan,e.count-1),i=[];for(let o=n;o<=s;o++)i.push(o);return i},E_=(e,n)=>{const s=e.scrollElement;if(!s)return;const i=e.targetWindow;if(!i)return;const o=c=>{const{width:u,height:h}=c;n({width:Math.round(u),height:Math.round(h)})};if(o(dg(s)),!i.ResizeObserver)return()=>{};const l=new i.ResizeObserver(c=>{const u=()=>{const h=c[0];if(h?.borderBoxSize){const g=h.borderBoxSize[0];if(g){o({width:g.inlineSize,height:g.blockSize});return}}o(dg(s))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(u):u()});return l.observe(s,{box:"border-box"}),()=>{l.unobserve(s)}},ug={passive:!0},fg=typeof window>"u"?!0:"onscrollend"in window,A_=(e,n)=>{const s=e.scrollElement;if(!s)return;const i=e.targetWindow;if(!i)return;let o=0;const l=e.options.useScrollendEvent&&fg?()=>{}:j_(i,()=>{n(o,!1)},e.options.isScrollingResetDelay),c=p=>()=>{const{horizontal:f,isRtl:m}=e.options;o=f?s.scrollLeft*(m&&-1||1):s.scrollTop,l(),n(o,p)},u=c(!0),h=c(!1);h(),s.addEventListener("scroll",u,ug);const g=e.options.useScrollendEvent&&fg;return g&&s.addEventListener("scrollend",h,ug),()=>{s.removeEventListener("scroll",u),g&&s.removeEventListener("scrollend",h)}},T_=(e,n,s)=>{if(n?.borderBoxSize){const i=n.borderBoxSize[0];if(i)return Math.round(i[s.options.horizontal?"inlineSize":"blockSize"])}return e[s.options.horizontal?"offsetWidth":"offsetHeight"]},D_=(e,{adjustments:n=0,behavior:s},i)=>{var o,l;const c=e+n;(l=(o=i.scrollElement)==null?void 0:o.scrollTo)==null||l.call(o,{[i.options.horizontal?"left":"top"]:c,behavior:s})};class F_{constructor(n){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let s=null;const i=()=>s||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:s=new this.targetWindow.ResizeObserver(o=>{o.forEach(l=>{const c=()=>{this._measureElement(l.target,l)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(c):c()})}));return{disconnect:()=>{var o;(o=i())==null||o.disconnect(),s=null},observe:o=>{var l;return(l=i())==null?void 0:l.observe(o,{box:"border-box"})},unobserve:o=>{var l;return(l=i())==null?void 0:l.unobserve(o)}}})(),this.range=null,this.setOptions=s=>{Object.entries(s).forEach(([i,o])=>{typeof o>"u"&&delete s[i]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:N_,rangeExtractor:__,onChange:()=>{},measureElement:T_,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...s}},this.notify=s=>{var i,o;(o=(i=this.options).onChange)==null||o.call(i,this,s)},this.maybeNotify=Fa(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),s=>{this.notify(s)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(s=>s()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var s;const i=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==i){if(this.cleanup(),!i){this.maybeNotify();return}this.scrollElement=i,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((s=this.scrollElement)==null?void 0:s.window)??null,this.elementsCache.forEach(o=>{this.observer.observe(o)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,o=>{this.scrollRect=o,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(o,l)=>{this.scrollAdjustments=0,this.scrollDirection=l?this.getScrollOffset()<o?"forward":"backward":null,this.scrollOffset=o,this.isScrolling=l,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(s,i)=>{const o=new Map,l=new Map;for(let c=i-1;c>=0;c--){const u=s[c];if(o.has(u.lane))continue;const h=l.get(u.lane);if(h==null||u.end>h.end?l.set(u.lane,u):u.end<h.end&&o.set(u.lane,!0),o.size===this.options.lanes)break}return l.size===this.options.lanes?Array.from(l.values()).sort((c,u)=>c.end===u.end?c.index-u.index:c.end-u.end)[0]:void 0},this.getMeasurementOptions=Fa(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(s,i,o,l,c,u)=>(this.prevLanes!==void 0&&this.prevLanes!==u&&(this.lanesChangedFlag=!0),this.prevLanes=u,this.pendingMeasuredCacheIndexes=[],{count:s,paddingStart:i,scrollMargin:o,getItemKey:l,enabled:c,lanes:u}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=Fa(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:s,paddingStart:i,scrollMargin:o,getItemKey:l,enabled:c,lanes:u},h)=>{if(!c)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>s)for(const m of this.laneAssignments.keys())m>=s&&this.laneAssignments.delete(m);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(m=>{this.itemSizeCache.set(m.key,m.size)}));const g=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===s&&(this.lanesSettling=!1);const p=this.measurementsCache.slice(0,g),f=new Array(u).fill(void 0);for(let m=0;m<g;m++){const b=p[m];b&&(f[b.lane]=m)}for(let m=g;m<s;m++){const b=l(m),y=this.laneAssignments.get(m);let v,C;if(y!==void 0&&this.options.lanes>1){v=y;const T=f[v],z=T!==void 0?p[T]:void 0;C=z?z.end+this.options.gap:i+o}else{const T=this.options.lanes===1?p[m-1]:this.getFurthestMeasurement(p,m);C=T?T.end+this.options.gap:i+o,v=T?T.lane:m%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(m,v)}const w=h.get(b),F=typeof w=="number"?w:this.options.estimateSize(m),j=C+F;p[m]={index:m,start:C,size:F,end:j,key:b,lane:v},f[v]=m}return this.measurementsCache=p,p},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Fa(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(s,i,o,l)=>this.range=s.length>0&&i>0?M_({measurements:s,outerSize:i,scrollOffset:o,lanes:l}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Fa(()=>{let s=null,i=null;const o=this.calculateRange();return o&&(s=o.startIndex,i=o.endIndex),this.maybeNotify.updateDeps([this.isScrolling,s,i]),[this.options.rangeExtractor,this.options.overscan,this.options.count,s,i]},(s,i,o,l,c)=>l===null||c===null?[]:s({startIndex:l,endIndex:c,overscan:i,count:o}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=s=>{const i=this.options.indexAttribute,o=s.getAttribute(i);return o?parseInt(o,10):(console.warn(`Missing attribute name '${i}={index}' on measured element.`),-1)},this._measureElement=(s,i)=>{const o=this.indexFromElement(s),l=this.measurementsCache[o];if(!l)return;const c=l.key,u=this.elementsCache.get(c);u!==s&&(u&&this.observer.unobserve(u),this.observer.observe(s),this.elementsCache.set(c,s)),s.isConnected&&this.resizeItem(o,this.options.measureElement(s,i,this))},this.resizeItem=(s,i)=>{const o=this.measurementsCache[s];if(!o)return;const l=this.itemSizeCache.get(o.key)??o.size,c=i-l;c!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(o,c,this):o.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=c,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(o.index),this.itemSizeCache=new Map(this.itemSizeCache.set(o.key,i)),this.notify(!1))},this.measureElement=s=>{if(!s){this.elementsCache.forEach((i,o)=>{i.isConnected||(this.observer.unobserve(i),this.elementsCache.delete(o))});return}this._measureElement(s,void 0)},this.getVirtualItems=Fa(()=>[this.getVirtualIndexes(),this.getMeasurements()],(s,i)=>{const o=[];for(let l=0,c=s.length;l<c;l++){const u=s[l],h=i[u];o.push(h)}return o},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=s=>{const i=this.getMeasurements();if(i.length!==0)return cg(i[Ib(0,i.length-1,o=>cg(i[o]).start,s)])},this.getOffsetForAlignment=(s,i,o=0)=>{const l=this.getSize(),c=this.getScrollOffset();i==="auto"&&(i=s>=c+l?"end":"start"),i==="center"?s+=(o-l)/2:i==="end"&&(s-=l);const u=this.getTotalSize()+this.options.scrollMargin-l;return Math.max(Math.min(u,s),0)},this.getOffsetForIndex=(s,i="auto")=>{s=Math.max(0,Math.min(s,this.options.count-1));const o=this.measurementsCache[s];if(!o)return;const l=this.getSize(),c=this.getScrollOffset();if(i==="auto")if(o.end>=c+l-this.options.scrollPaddingEnd)i="end";else if(o.start<=c+this.options.scrollPaddingStart)i="start";else return[c,i];const u=i==="end"?o.end+this.options.scrollPaddingEnd:o.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(u,i,o.size),i]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(s,{align:i="start",behavior:o}={})=>{o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(s,i),{adjustments:void 0,behavior:o})},this.scrollToIndex=(s,{align:i="auto",behavior:o}={})=>{o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),s=Math.max(0,Math.min(s,this.options.count-1));let l=0;const c=10,u=g=>{if(!this.targetWindow)return;const p=this.getOffsetForIndex(s,g);if(!p){console.warn("Failed to get offset for index:",s);return}const[f,m]=p;this._scrollToOffset(f,{adjustments:void 0,behavior:o}),this.targetWindow.requestAnimationFrame(()=>{const b=this.getScrollOffset(),y=this.getOffsetForIndex(s,m);if(!y){console.warn("Failed to get offset for index:",s);return}C_(y[0],b)||h(m)})},h=g=>{this.targetWindow&&(l++,l<c?this.targetWindow.requestAnimationFrame(()=>u(g)):console.warn(`Failed to scroll to index ${s} after ${c} attempts.`))};u(i)},this.scrollBy=(s,{behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+s,{adjustments:void 0,behavior:i})},this.getTotalSize=()=>{var s;const i=this.getMeasurements();let o;if(i.length===0)o=this.options.paddingStart;else if(this.options.lanes===1)o=((s=i[i.length-1])==null?void 0:s.end)??0;else{const l=Array(this.options.lanes).fill(null);let c=i.length-1;for(;c>=0&&l.some(u=>u===null);){const u=i[c];l[u.lane]===null&&(l[u.lane]=u.end),c--}o=Math.max(...l.filter(u=>u!==null))}return Math.max(o-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(s,{adjustments:i,behavior:o})=>{this.options.scrollToFn(s,{behavior:o,adjustments:i},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(n)}}const Ib=(e,n,s,i)=>{for(;e<=n;){const o=(e+n)/2|0,l=s(o);if(l<i)e=o+1;else if(l>i)n=o-1;else return o}return e>0?e-1:0};function M_({measurements:e,outerSize:n,scrollOffset:s,lanes:i}){const o=e.length-1,l=h=>e[h].start;if(e.length<=i)return{startIndex:0,endIndex:o};let c=Ib(0,o,l,s),u=c;if(i===1)for(;u<o&&e[u].end<s+n;)u++;else if(i>1){const h=Array(i).fill(0);for(;u<o&&h.some(p=>p<s+n);){const p=e[u];h[p.lane]=p.end,u++}const g=Array(i).fill(s+n);for(;c>=0&&g.some(p=>p>=s);){const p=e[c];g[p.lane]=p.start,c--}c=Math.max(0,c-c%i),u=Math.min(o,u+(i-1-u%i))}return{startIndex:c,endIndex:u}}const hg=typeof document<"u"?N.useLayoutEffect:N.useEffect;function I_(e){const n=N.useReducer(()=>({}),{})[1],s={...e,onChange:(o,l)=>{var c;l?Af.flushSync(n):n(),(c=e.onChange)==null||c.call(e,o,l)}},[i]=N.useState(()=>new F_(s));return i.setOptions(s),hg(()=>i._didMount(),[]),hg(()=>i._willUpdate()),i}function P_(e){return I_({observeElementRect:E_,observeElementOffset:A_,scrollToFn:D_,...e})}function R_({characterId:e,characterName:n,onClose:s,onUpdate:i,onDelete:o}){const[l,c]=N.useState(""),[u,h]=N.useState(!1),[g,p]=N.useState(!0),[f,m]=N.useState(30),[b,y]=N.useState(!1),[v,C]=N.useState(!1),[w,F]=N.useState(()=>Pe.chatSettings?.darkMode||!1),[j,T]=N.useState(()=>Pe.chatSettings?.theme||(Pe.chatSettings?.darkMode?"dark":"light"));N.useEffect(()=>{const k=()=>{const P=Pe.chatSettings;F(P?.darkMode||!1),T(P?.theme||(P?.darkMode?"dark":"light"))};return window.addEventListener("chat-settings-updated",k),(async()=>{if(!Pe.chatSettings)try{const P=await he.get(re.CHATS,"chat_settings");P&&(Pe.chatSettings=P,P.darkMode!==void 0&&F(P.darkMode),T(P.theme||(P.darkMode?"dark":"light")))}catch(P){console.error("Failed to load global chat settings in ChatDetailSettings",P)}})(),()=>window.removeEventListener("chat-settings-updated",k)},[]),N.useEffect(()=>{z()},[e]);const z=async()=>{try{const k=`chat_detail_settings_${e}`,$=await he.get(re.CHAT_SETTINGS,k);$&&(c($.remark||""),h($.isPinned||!1),p($.enableStickers!==void 0?$.enableStickers:!0),m($.stickerProbability!==void 0?$.stickerProbability:30))}catch(k){console.error("Failed to load settings:",k)}},B=async(k,$,P,I)=>{try{const q=`chat_detail_settings_${e}`,G={remark:k,isPinned:$,enableStickers:P,stickerProbability:I};await he.set(re.CHAT_SETTINGS,q,G),await U(k,$),i()}catch(q){console.error("Failed to save settings:",q)}},U=async(k,$)=>{try{const P=await he.get(re.CHATS,"chat_list");if(P){const I=P.findIndex(q=>q.id===e);I!==-1&&(P[I].remark=k,P[I].isPinned=$,await he.set(re.CHATS,"chat_list",P))}}catch(P){console.error("Failed to update chat list:",P)}},D=k=>{c(k),B(k,u,g,f)},A=()=>{const k=!u;h(k),B(l,k,g,f)},H=()=>{const k=!g;p(k),B(l,u,k,f)},Y=k=>{const $=parseInt(k,10);!isNaN($)&&$>=0&&$<=100&&(m($),B(l,u,g,$))},_=async()=>{try{const k=`chat_messages_${e}`;await he.delete(re.CHAT_MESSAGES,k);const $=await he.get(re.CHATS,"chat_list");if($){const P=$.findIndex(I=>I.id===e);P!==-1&&($[P].lastMessage="",$[P].lastSender="",await he.set(re.CHATS,"chat_list",$))}y(!1),i(),setTimeout(()=>{window.dispatchEvent(new CustomEvent("chat-messages-cleared"))},100),s()}catch(k){console.error("Failed to clear messages:",k)}},L=async()=>{try{const k=`chat_messages_${e}`;await he.delete(re.CHAT_MESSAGES,k);const $=`chat_detail_settings_${e}`;await he.delete(re.CHAT_SETTINGS,$);const P=await he.get(re.CHATS,"chat_list");if(P){const I=P.filter(q=>q.id!==e);await he.set(re.CHATS,"chat_list",I)}C(!1),o?o():s()}catch(k){console.error("Failed to delete chat:",k),C(!1)}};return r.jsxs(je.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30,mass:1},className:`fixed inset-0 z-[70] flex flex-col shadow-[-10px_0_30px_rgba(0,0,0,0.1)] ${j==="light-frosted"?"bg-white/80 backdrop-blur-xl":j==="dark-frosted"?"bg-black/60 backdrop-blur-xl":w?"bg-[#121212]":"bg-white"}`,children:[r.jsxs("div",{className:`h-16 flex items-center justify-between px-4 ${j==="light-frosted"||j==="dark-frosted"?"bg-transparent":w?"bg-[#121212]":"bg-white"}`,children:[r.jsx("button",{onClick:s,className:"p-2 -ml-2 active:opacity-60 hover:opacity-60 transition-opacity",children:r.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:j==="dark-frosted"||w?"white":"black",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M15 18l-6-6 6-6"})})}),r.jsx("h1",{className:`font-semibold text-[18px] ${j==="dark-frosted"||w?"text-white":"text-[#333]"}`,children:""}),r.jsx("div",{className:"w-11"})]}),r.jsxs("div",{className:`flex-1 overflow-y-auto px-5 py-6 ${j==="light-frosted"||j==="dark-frosted"?"bg-transparent":w?"bg-[#121212]":"bg-white"}`,children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] mb-3 ${j==="dark-frosted"||w?"text-white":"text-[#333]"}`,children:""}),r.jsx("input",{type:"text",value:l,onChange:k=>D(k.target.value),placeholder:n===""?"":n,className:`w-full px-4 py-3 rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] outline-none transition-colors ${j==="light-frosted"?"bg-white/40 text-[#333] placeholder:text-[#999] focus:bg-white/60":j==="dark-frosted"?"bg-white/10 text-white placeholder:text-[#aaa] focus:bg-white/20":w?"bg-[#2d2d2d] text-white placeholder:text-[#666] focus:bg-[#3d3d3d]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999] focus:bg-[#ebebeb]"}`})]}),r.jsx("div",{className:"mb-8",children:r.jsxs(je.button,{whileTap:{scale:.98},onClick:A,className:`w-full px-4 py-3 rounded-lg transition-colors flex items-center justify-between ${j==="light-frosted"?"bg-white/40 active:bg-white/60 hover:bg-white/60":j==="dark-frosted"?"bg-white/10 active:bg-white/20 hover:bg-white/20":w?"bg-[#2d2d2d] active:bg-[#3d3d3d] hover:bg-[#3d3d3d]":"bg-[#f5f5f5] active:bg-[#ebebeb] hover:bg-[#ebebeb]"}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(UN,{className:`w-5 h-5 ${j==="dark-frosted"||w?"text-[#aaa]":"text-[#666]"}`,strokeWidth:2}),r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] ${j==="dark-frosted"||w?"text-white":"text-[#333]"}`,children:u?"":""})]}),u&&r.jsx(je.div,{initial:{scale:0},animate:{scale:1},className:"w-5 h-5 rounded-full bg-[#7B9E7B] flex items-center justify-center",children:r.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})})]})}),r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] mb-1 ${j==="dark-frosted"||w?"text-white":"text-[#333]"}`,children:""}),r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[13px] ${j==="dark-frosted"||w?"text-[#aaa]":"text-[#999]"}`,children:""})]}),r.jsx(je.button,{onClick:H,className:`w-12 h-7 rounded-full flex items-center px-0.5 relative ${g?"#7B9E7B":j==="dark-frosted"?"bg-white/10":w?"bg-[#3d3d3d]":"bg-[#d0d0d0]"}`,animate:{backgroundColor:g?"#7B9E7B":j==="dark-frosted"?"rgba(255,255,255,0.1)":w?"#3d3d3d":"#d0d0d0"},whileTap:{scale:.95},children:r.jsx(je.div,{className:"w-6 h-6 rounded-full bg-white shadow-sm",animate:{x:g?20:0},transition:{type:"spring",stiffness:500,damping:30}})})]}),r.jsx(ze,{children:g&&r.jsx(je.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:r.jsxs("div",{className:"mt-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] ${j==="dark-frosted"||w?"text-[#aaa]":"text-[#666]"}`,children:""}),r.jsxs("span",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] text-[#7B9E7B]",children:[f,"%"]})]}),r.jsx("div",{className:"px-1",children:r.jsx("input",{type:"range",min:"0",max:"100",value:f,onChange:k=>Y(k.target.value),className:`w-full h-2 rounded-lg appearance-none cursor-pointer slider ${j==="light-frosted"?"bg-white/40":j==="dark-frosted"?"bg-white/10":w?"bg-[#2d2d2d]":"bg-[#f5f5f5]"}`,style:{background:`linear-gradient(to right, #7B9E7B 0%, #7B9E7B ${f}%, ${j==="light-frosted"?"rgba(255,255,255,0.4)":j==="dark-frosted"?"rgba(255,255,255,0.1)":w?"#2d2d2d":"#f5f5f5"} ${f}%, ${j==="light-frosted"?"rgba(255,255,255,0.4)":j==="dark-frosted"?"rgba(255,255,255,0.1)":w?"#2d2d2d":"#f5f5f5"} 100%)`}})}),r.jsxs("div",{className:"flex justify-between mt-2 px-1",children:[r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] ${j==="dark-frosted"?"text-[#888]":w?"text-[#666]":"text-[#999]"}`,children:"0%"}),r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] ${j==="dark-frosted"?"text-[#888]":w?"text-[#666]":"text-[#999]"}`,children:"100%"})]}),r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] mt-2 ${j==="dark-frosted"?"text-[#888]":w?"text-[#666]":"text-[#999]"}`,children:""})]})})})]}),r.jsx("div",{className:"mb-8",children:r.jsxs(je.button,{whileTap:{scale:.98},onClick:()=>y(!0),className:`w-full px-4 py-3 rounded-lg transition-colors flex items-center gap-3 ${j==="light-frosted"?"bg-[#ffe5e5]/60 active:bg-[#ffd0d0]/80 hover:bg-[#ffd0d0]/80":j==="dark-frosted"?"bg-[#3a1d1d]/80 active:bg-[#4a2d2d]/80 hover:bg-[#4a2d2d]/80":w?"bg-[#3a1d1d] active:bg-[#4a2d2d] hover:bg-[#4a2d2d]":"bg-[#ffe5e5] active:bg-[#ffd0d0] hover:bg-[#ffd0d0]"}`,children:[r.jsx(Hn,{className:"w-5 h-5 text-[#ff3b30]",strokeWidth:2}),r.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] text-[#ff3b30]",children:""})]})}),r.jsx("div",{className:"mb-8",children:r.jsxs(je.button,{whileTap:{scale:.98},onClick:()=>C(!0),className:`w-full px-4 py-3 rounded-lg transition-colors flex items-center gap-3 ${j==="light-frosted"?"bg-[#ffe5e5]/60 active:bg-[#ffd0d0]/80 hover:bg-[#ffd0d0]/80":j==="dark-frosted"?"bg-[#3a1d1d]/80 active:bg-[#4a2d2d]/80 hover:bg-[#4a2d2d]/80":w?"bg-[#3a1d1d] active:bg-[#4a2d2d] hover:bg-[#4a2d2d]":"bg-[#ffe5e5] active:bg-[#ffd0d0] hover:bg-[#ffd0d0]"}`,children:[r.jsx(ht,{className:"w-5 h-5 text-[#ff3b30]",strokeWidth:2}),r.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] text-[#ff3b30]",children:""})]})})]}),r.jsx(ze,{children:b&&r.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[r.jsx(je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-black/40",onClick:()=>y(!1)}),r.jsxs(je.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[320px] shadow-xl ${j==="light-frosted"?"bg-white/80 backdrop-blur-xl":j==="dark-frosted"?"bg-black/80 backdrop-blur-xl border border-white/10":w?"bg-[#1e1e1e]":"bg-white"}`,children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-3 ${j==="dark-frosted"||w?"text-white":"text-black"}`,children:""}),r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] text-center mb-6 ${j==="dark-frosted"||w?"text-[#aaa]":"text-[#666]"}`,children:""}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>y(!1),className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors ${j==="light-frosted"?"bg-white/40 text-[#666] hover:bg-white/60":j==="dark-frosted"?"bg-white/10 text-[#aaa] hover:bg-white/20":w?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),r.jsx("button",{onClick:_,className:"flex-1 py-2.5 rounded-xl bg-[#ff3b30] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity",children:""})]})]})]})}),r.jsx(ze,{children:v&&r.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[r.jsx(je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-black/40",onClick:()=>C(!1)}),r.jsxs(je.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[320px] shadow-xl ${j==="light-frosted"?"bg-white/80 backdrop-blur-xl":j==="dark-frosted"?"bg-black/80 backdrop-blur-xl border border-white/10":w?"bg-[#1e1e1e]":"bg-white"}`,children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-3 ${j==="dark-frosted"||w?"text-white":"text-black"}`,children:""}),r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] text-center mb-6 ${j==="dark-frosted"||w?"text-[#aaa]":"text-[#666]"}`,children:""}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>C(!1),className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors ${j==="light-frosted"?"bg-white/40 text-[#666] hover:bg-white/60":j==="dark-frosted"?"bg-white/10 text-[#aaa] hover:bg-white/20":w?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),r.jsx("button",{onClick:L,className:"flex-1 py-2.5 rounded-xl bg-[#ff3b30] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity",children:""})]})]})]})})]})}const Pb=N.memo(({dateString:e})=>r.jsx("div",{className:"flex justify-center mb-3",children:r.jsx("div",{className:"bg-black/20 rounded-full px-2 py-0 flex items-center justify-center",children:r.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] text-white",children:e})})}));Pb.displayName="DateSeparator";const Rb=async(e,n)=>{try{const s=await Vf(e,{maxSizeMB:.2,maxWidthOrHeight:512,useWebWorker:!0}),i=`sticker_${Date.now()}`,o=`meme-${i}`;await cs(o,new File([s],e.name,{type:s.type}));const l={id:i,imageKey:o,meaning:n,createdAt:new Date().toISOString()},c=await na();return c.push(l),await he.set(re.STICKERS,"stickers",c),l}catch(s){throw console.error("Failed to add sticker:",s),s}},na=async()=>{try{return await he.get(re.STICKERS,"stickers")||[]}catch(e){return console.error("Failed to get stickers:",e),[]}},Wf=async e=>{try{return await Ct(e)}catch(n){return console.error("Failed to get sticker image:",n),null}},Bb=async e=>{try{const n=await na(),s=n.find(o=>o.id===e);if(!s)throw new Error("Sticker not found");s.imageKey&&await ea(s.imageKey);const i=n.filter(o=>o.id!==e);await he.set(re.STICKERS,"stickers",i)}catch(n){throw console.error("Failed to delete sticker:",n),n}},B_=async()=>{try{const e=await na(),n={};return e.forEach(s=>{n[s.id]=s.meaning}),n}catch(e){return console.error("Failed to get sticker meanings:",e),{}}},Lb=async e=>{const n=e.split(`
`).map(i=>i.trim()).filter(i=>i.length>0),s={success:0,failed:0,errors:[]};for(const i of n)try{const o=i.indexOf("-");if(o===-1){s.failed++,s.errors.push(`: "${i}" (: -URL)`);continue}const l=i.substring(0,o).trim(),c=i.substring(o+1).trim();if(!l){s.failed++,s.errors.push(`: "${i}"`);continue}if(!c||!c.startsWith("http://")&&!c.startsWith("https://")){s.failed++,s.errors.push(`URL: "${c}"`);continue}const h={id:`sticker_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,imageUrl:c,meaning:l,createdAt:new Date().toISOString()},g=await na();g.push(h),await he.set(re.STICKERS,"stickers",g),s.success++,await new Promise(p=>setTimeout(p,10))}catch(o){s.failed++,s.errors.push(`"${i.substring(0,30)}...": ${o.message||""}`)}return s},L_=Object.freeze(Object.defineProperty({__proto__:null,addSticker:Rb,batchImportStickersFromURL:Lb,deleteSticker:Bb,getAllStickers:na,getStickerImageURL:Wf,getStickerMeaningsForAI:B_},Symbol.toStringTag,{value:"Module"}));function z_({onClose:e,onSelect:n,theme:s,isDarkMode:i}){const[o,l]=N.useState([]),[c,u]=N.useState({}),[h,g]=N.useState(!1),[p,f]=N.useState(null),[m,b]=N.useState(""),[y,v]=N.useState(null),[C,w]=N.useState(!1),F=N.useRef(null),[j,T]=N.useState({show:!1,message:""}),[z,B]=N.useState(!1),[U,D]=N.useState(""),[A,H]=N.useState(!1),[Y,_]=N.useState(null),[L,k]=N.useState(!1);N.useEffect(()=>{$()},[]);const $=async()=>{try{const ee=await na();l(ee);const W={};for(const V of ee)if(V.imageUrl)W[V.id]=V.imageUrl;else if(V.imageKey){const Z=await Wf(V.imageKey);Z&&(W[V.id]=Z)}u(W)}catch(ee){console.error("Failed to load stickers:",ee)}},P=ee=>{const W=ee.target.files?.[0];if(W){v(W);const V=new FileReader;V.onload=Z=>{f(Z.target?.result)},V.readAsDataURL(W),g(!0)}F.current&&(F.current.value="")},I=async()=>{if(!y||!m.trim()){T({show:!0,message:""}),setTimeout(()=>T({show:!1,message:""}),3e3);return}w(!0);try{await Rb(y,m.trim()),await $(),q()}catch(ee){console.error("Failed to upload sticker:",ee),T({show:!0,message:ee.message||""}),setTimeout(()=>T({show:!1,message:""}),5e3)}finally{w(!1)}},q=()=>{g(!1),f(null),b(""),v(null)},G=ee=>{n(ee),e()},Q=async(ee,W)=>{if(ee.stopPropagation(),confirm(""))try{await Bb(W),await $()}catch(V){console.error("Failed to delete sticker:",V),T({show:!0,message:V.message||""}),setTimeout(()=>T({show:!1,message:""}),5e3)}},M=async()=>{if(!U.trim()){T({show:!0,message:"URL"}),setTimeout(()=>T({show:!1,message:""}),3e3);return}H(!0),_(null);try{const ee=await Lb(U.trim());_(ee),await $(),ee.success===0&&ee.failed>0&&(T({show:!0,message:"URL"}),setTimeout(()=>T({show:!1,message:""}),5e3))}catch(ee){console.error("Failed to batch import stickers:",ee),T({show:!0,message:ee.message||""}),setTimeout(()=>T({show:!1,message:""}),5e3)}finally{H(!1)}},O=()=>{B(!1),D(""),_(null)};return r.jsxs(r.Fragment,{children:[r.jsx(je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 bg-transparent z-[1050]",onClick:e}),r.jsxs(je.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{type:"spring",stiffness:400,damping:30},className:`absolute bottom-[70px] right-3 w-[320px] h-[300px] rounded-xl shadow-lg flex flex-col z-[1051] ${s==="light-frosted"?"bg-white/40 backdrop-blur-md border border-white/20":s==="dark-frosted"?"bg-black/40 backdrop-blur-md border border-white/10":i?"bg-[#1e1e1e]":"bg-white"}`,onClick:ee=>ee.stopPropagation(),children:[r.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[16px] ${s==="light-frosted"?"text-[#333]":i||s==="dark-frosted"?"text-white":"text-[#333]"}`,children:L?"":""}),r.jsx("button",{onClick:()=>k(!L),className:`px-3 py-1.5 rounded-lg transition-colors ${L?"bg-[#88A588] text-white":s==="light-frosted"?"bg-white/30 text-[#333] hover:bg-white/40":s==="dark-frosted"?"bg-white/10 text-white hover:bg-white/20":i?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8]"}`,children:r.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[13px]",children:L?"":""})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:r.jsxs("div",{className:"grid grid-cols-[repeat(auto-fill,80px)] gap-2.5 justify-center",children:[!L&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>F.current?.click(),className:`w-20 h-20 rounded-lg flex items-center justify-center cursor-pointer transition-colors ${s==="light-frosted"?"bg-white/20 hover:bg-white/30 active:bg-white/40":s==="dark-frosted"?"bg-white/10 hover:bg-white/20 active:bg-white/30":i?"bg-[#2d2d2d] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#e8e8e8] hover:bg-[#d8d8d8] active:bg-[#c8c8c8]"}`,children:r.jsx(Cr,{className:`w-8 h-8 ${s==="light-frosted"?"text-[#333]":i||s==="dark-frosted"?"text-[#aaa]":"text-[#999]"}`,strokeWidth:2})}),r.jsx("button",{onClick:()=>B(!0),className:`w-20 h-20 rounded-lg flex items-center justify-center cursor-pointer transition-colors ${s==="light-frosted"?"bg-white/20 hover:bg-white/30 active:bg-white/40":s==="dark-frosted"?"bg-white/10 hover:bg-white/20 active:bg-white/30":i?"bg-[#2d2d2d] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#e8e8e8] hover:bg-[#d8d8d8] active:bg-[#c8c8c8]"}`,children:r.jsx(zf,{className:`w-8 h-8 ${s==="light-frosted"?"text-[#333]":i||s==="dark-frosted"?"text-[#aaa]":"text-[#999]"}`,strokeWidth:2})})]}),o.map(ee=>r.jsxs("div",{className:"relative w-20 h-20 group",children:[r.jsx("button",{onClick:()=>!L&&G(ee.id),className:`w-full h-full rounded-lg p-1 transition-colors ${L?"cursor-default":s==="light-frosted"?"cursor-pointer hover:bg-white/30 active:bg-white/40":s==="dark-frosted"?"cursor-pointer hover:bg-white/20 active:bg-white/30":i?"cursor-pointer hover:bg-[#2d2d2d] active:bg-[#3d3d3d]":"cursor-pointer hover:bg-[#f0f0f0] active:bg-[#e8e8e8]"} ${s==="light-frosted"?"bg-white/20":s==="dark-frosted"?"bg-white/5":i?"bg-[#2d2d2d]":"bg-[#f9f9f9]"}`,children:c[ee.id]&&r.jsx("img",{src:c[ee.id],alt:ee.meaning,className:"w-full h-full object-contain"})}),r.jsx("button",{onClick:W=>Q(W,ee.id),className:`absolute -top-1 -right-1 w-5 h-5 bg-[#ff3b30] rounded-full flex items-center justify-center transition-opacity ${L?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:r.jsx(ht,{className:"w-3 h-3 text-white",strokeWidth:3})})]},ee.id))]})})]}),r.jsx("input",{ref:F,type:"file",accept:"image/*",className:"hidden",onChange:P}),r.jsx(ze,{children:h&&r.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[r.jsx(je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40",onClick:q}),r.jsxs(je.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[320px] shadow-xl ${s==="light-frosted"?"bg-white/40 backdrop-blur-xl border border-white/20":s==="dark-frosted"?"bg-black/40 backdrop-blur-xl border border-white/10":i?"bg-[#1e1e1e]":"bg-white"}`,children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-4 ${s==="light-frosted"?"text-[#333]":i||s==="dark-frosted"?"text-white":"text-black"}`,children:""}),p&&r.jsx("img",{src:p,alt:"preview",className:`w-[100px] h-[100px] object-cover rounded-lg mx-auto mb-4 ${s==="light-frosted"?"bg-white/50":s==="dark-frosted"?"bg-white/10":i?"bg-[#2d2d2d]":"bg-[#f0f0f0]"}`}),r.jsx("input",{type:"text",value:m,onChange:ee=>b(ee.target.value),placeholder:"AI(,:)",className:`w-full px-4 py-3 rounded-xl border-none outline-none font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] mb-6 ${s==="light-frosted"?"bg-white/50 text-[#333] placeholder:text-[#999]":s==="dark-frosted"?"bg-white/10 text-white placeholder:text-[#aaa]":i?"bg-[#2d2d2d] text-white placeholder:text-[#666]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999]"}`}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:q,disabled:C,className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors disabled:opacity-50 ${s==="light-frosted"?"bg-white/30 text-[#666] hover:bg-white/40":s==="dark-frosted"?"bg-white/10 text-[#ccc] hover:bg-white/20":i?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),r.jsx("button",{onClick:I,disabled:C,className:"flex-1 py-2.5 rounded-xl bg-[#88A588] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity disabled:opacity-50",children:C?"...":""})]})]})]})}),r.jsx(ze,{children:z&&r.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[r.jsx(je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40",onClick:O}),r.jsxs(je.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[400px] shadow-xl max-h-[80vh] overflow-y-auto ${s==="light-frosted"?"bg-white/40 backdrop-blur-xl border border-white/20":s==="dark-frosted"?"bg-black/40 backdrop-blur-xl border border-white/10":i?"bg-[#1e1e1e]":"bg-white"}`,children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-3 ${s==="light-frosted"?"text-[#333]":i||s==="dark-frosted"?"text-white":"text-black"}`,children:""}),r.jsxs("div",{className:`rounded-xl p-3 mb-4 ${s==="light-frosted"?"bg-white/50":s==="dark-frosted"?"bg-white/10":i?"bg-[#2d2d2d]":"bg-[#f5f5f5]"}`,children:[r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[13px] mb-2 ${s==="light-frosted"?"text-[#333]":i||s==="dark-frosted"?"text-[#aaa]":"text-[#666]"}`,children:""}),r.jsxs("p",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[12px] leading-relaxed ${s==="light-frosted"?"text-[#666]":i||s==="dark-frosted"?"text-[#888]":"text-[#999]"}`,children:["",r.jsx("br",{}),r.jsx("span",{className:"text-[#88A588]",children:"-URL"}),r.jsx("br",{}),r.jsx("br",{}),"",r.jsx("br",{}),"-https://example.com/happy.jpg",r.jsx("br",{}),"-https://example.com/sad.png",r.jsx("br",{}),"-https://example.com/angry.gif"]})]}),r.jsx("textarea",{value:U,onChange:ee=>D(ee.target.value),placeholder:`-https://example.com/happy.jpg
-https://example.com/sad.png`,className:`w-full px-4 py-3 rounded-xl border-none outline-none font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] mb-4 h-[150px] resize-y ${s==="light-frosted"?"bg-white/50 text-[#333] placeholder:text-[#999]":s==="dark-frosted"?"bg-white/10 text-white placeholder:text-[#aaa]":i?"bg-[#2d2d2d] text-white placeholder:text-[#666]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999]"}`}),Y&&r.jsxs("div",{className:`rounded-xl p-4 mb-4 ${s==="light-frosted"?"bg-white/50":s==="dark-frosted"?"bg-white/10":i?"bg-[#2d2d2d]":"bg-[#f9f9f9]"}`,children:[r.jsxs("div",{className:"flex gap-4 mb-2",children:[r.jsxs("p",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-[#88A588]",children:[": ",Y.success]}),r.jsxs("p",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-[#ff3b30]",children:[": ",Y.failed]})]}),Y.errors.length>0&&r.jsxs("div",{className:"max-h-[120px] overflow-y-auto",children:[r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[13px] mb-1 ${s==="light-frosted"?"text-[#333]":i||s==="dark-frosted"?"text-[#aaa]":"text-[#666]"}`,children:""}),r.jsxs("ul",{className:"space-y-1",children:[Y.errors.slice(0,5).map((ee,W)=>r.jsxs("li",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[12px] text-[#ff3b30] leading-relaxed",children:[" ",ee]},W)),Y.errors.length>5&&r.jsxs("li",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[12px] ${s==="light-frosted"?"text-[#666]":i||s==="dark-frosted"?"text-[#888]":"text-[#999]"}`,children:["...  ",Y.errors.length-5," "]})]})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:O,disabled:A,className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors disabled:opacity-50 ${s==="light-frosted"?"bg-white/30 text-[#666] hover:bg-white/40":s==="dark-frosted"?"bg-white/10 text-[#ccc] hover:bg-white/20":i?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),r.jsx("button",{onClick:M,disabled:A,className:"flex-1 py-2.5 rounded-xl bg-[#88A588] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity disabled:opacity-50",children:A?"...":""})]})]})]})}),j.show&&r.jsx("div",{className:"fixed top-16 left-1/2 -translate-x-1/2 z-[1300] px-4 w-full max-w-[90vw]",children:r.jsx("div",{className:"bg-[#ff3b30] rounded-[12px] px-5 py-4 shadow-lg max-w-md mx-auto max-h-[60vh] overflow-y-auto",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-white/20 flex items-center justify-center mt-0.5",children:r.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] text-white mb-1",children:""}),r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] text-white/90 leading-relaxed break-words whitespace-pre-wrap",children:j.message})]})]})})})]})}function O_({onImageSelect:e,onError:n,children:s}){const i=N.useRef(null),o=async c=>{const u=c.target.files?.[0];if(u){if(!u.type.startsWith("image/")){n("");return}if(u.size>10*1024*1024){n("10MB");return}try{const h=await Vf(u,{maxWidth:1024,maxHeight:1024,quality:.85}),g=new File([h],u.name,{type:h.type}),p=`chat-image-${Date.now()}`;await cs(p,g),e(p)}catch(h){console.error("Failed to compress image:",h),n(h.message||"")}finally{i.current&&(i.current.value="")}}},l=()=>{i.current?.click()};return r.jsxs(r.Fragment,{children:[r.jsx("div",{onClick:l,className:"cursor-pointer",children:s}),r.jsx("input",{ref:i,type:"file",accept:"image/*",className:"hidden",onChange:o})]})}async function V_(e,n,s){const i=`task_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,o={taskId:i,chatId:e,type:n,status:"pending",createdAt:Date.now(),updatedAt:Date.now(),payload:s};if(await he.set(re.AI_TASKS,i,o),console.log(`[TaskQueue]  ${i} (: ${n}, : ${e})`),"serviceWorker"in navigator&&navigator.serviceWorker.controller){const l={apiKey:s.apiKey,baseUrl:s.baseUrl,modelName:s.modelName,temperature:s.temperature,maxTokens:s.maxTokens},c=[{role:"system",content:s.systemPrompt},{role:"user",content:s.userPrompt}];navigator.serviceWorker.controller.postMessage({type:"PROCESS_AI_TASK",payload:{taskId:i,characterId:e,characterName:s.characterName,displayName:s.displayName,apiConfig:l,messages:c,pendingImageBase64:s.pendingImageBase64,imageRecognitionPrompt:s.imageRecognitionPrompt}}),console.log(`[TaskQueue]  Service Worker: ${i}`)}else console.warn("[TaskQueue] Service Worker "),window.dispatchEvent(new CustomEvent("ai-task-needs-fallback",{detail:{taskId:i,task:o}}));return i}const $_="modulepreload",H_=function(e){return"/"+e},pg={},U_=function(n,s,i){let o=Promise.resolve();if(s&&s.length>0){let c=function(g){return Promise.all(g.map(p=>Promise.resolve(p).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=u?.nonce||u?.getAttribute("nonce");o=c(s.map(g=>{if(g=H_(g),g in pg)return;pg[g]=!0;const p=g.endsWith(".css"),f=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${f}`))return;const m=document.createElement("link");if(m.rel=p?"stylesheet":$_,p||(m.as="script"),m.crossOrigin="",m.href=g,h&&m.setAttribute("nonce",h),document.head.appendChild(m),p)return new Promise((b,y)=>{m.addEventListener("load",b),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${g}`)))})}))}function l(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return o.then(c=>{for(const u of c||[])u.status==="rejected"&&l(u.reason);return n().catch(l)})};var Cl={exports:{}},W_=Cl.exports,mg;function K_(){return mg||(mg=1,(function(e,n){(function(s,i){e.exports=i()})(W_,function(){return(function(s){function i(l){if(o[l])return o[l].exports;var c=o[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,i),c.l=!0,c.exports}var o={};return i.m=s,i.c=o,i.d=function(l,c,u){i.o(l,c)||Object.defineProperty(l,c,{configurable:!1,enumerable:!0,get:u})},i.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return i.d(c,"a",c),c},i.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},i.p="",i(i.s=0)})([function(s,i,o){Object.defineProperty(i,"__esModule",{value:!0});var l=o(1),c=(function(u){return u&&u.__esModule?u:{default:u}})(l);i.default=c.default,s.exports=i.default},function(s,i,o){function l(L){return L&&L.__esModule?L:{default:L}}Object.defineProperty(i,"__esModule",{value:!0});var c=o(2),u=l(c),h=o(3),g=l(h),p=o(4),f=l(p),m=o(5),b=l(m),y=o(6),v=l(y),C=o(7),w=l(C),F=o(8),j=l(F),T=o(9),z=l(T),B=o(10),U=l(B),D=o(11),A=l(D),H=o(12),Y=l(H),_={lunarInfo:u.default,solarMonth:g.default,gan:f.default,zhi:b.default,animals:v.default,lunarTerm:w.default,lTermInfo:j.default,nStr1:z.default,nStr2:U.default,nStr3:A.default,nStr4:Y.default,lYearDays:function(L){var k,$=348;for(k=32768;k>8;k>>=1)$+=_.lunarInfo[L-1900]&k?1:0;return $+_.leapDays(L)},leapMonth:function(L){return 15&_.lunarInfo[L-1900]},leapDays:function(L){return _.leapMonth(L)?65536&_.lunarInfo[L-1900]?30:29:0},monthDays:function(L,k){return k>12||k<1?-1:_.lunarInfo[L-1900]&65536>>k?30:29},solarDays:function(L,k){if(k>12||k<1)return-1;var $=k-1;return $==1?L%4==0&&L%100!=0||L%400==0?29:28:_.solarMonth[$]},toGanZhi:function(L){return _.gan[L%10]+_.zhi[L%12]},getTerm:function(L,k){if(L<1900||L>2100||k<1||k>24)return-1;var $=_.lTermInfo[L-1900],P=[parseInt("0x"+$.substr(0,5)).toString(),parseInt("0x"+$.substr(5,5)).toString(),parseInt("0x"+$.substr(10,5)).toString(),parseInt("0x"+$.substr(15,5)).toString(),parseInt("0x"+$.substr(20,5)).toString(),parseInt("0x"+$.substr(25,5)).toString()],I=[P[0].substr(0,1),P[0].substr(1,2),P[0].substr(3,1),P[0].substr(4,2),P[1].substr(0,1),P[1].substr(1,2),P[1].substr(3,1),P[1].substr(4,2),P[2].substr(0,1),P[2].substr(1,2),P[2].substr(3,1),P[2].substr(4,2),P[3].substr(0,1),P[3].substr(1,2),P[3].substr(3,1),P[3].substr(4,2),P[4].substr(0,1),P[4].substr(1,2),P[4].substr(3,1),P[4].substr(4,2),P[5].substr(0,1),P[5].substr(1,2),P[5].substr(3,1),P[5].substr(4,2)];return parseInt(I[k-1])},toChinaYear:function(L){var k=parseInt(L/1e3),$=parseInt(L%1e3/100),P=parseInt(L%100/10),I=L%10;return _.nStr4[k]+_.nStr4[$]+_.nStr4[P]+_.nStr4[I]+""},toChinaMonth:function(L){if(L>12||L<1)return-1;var k=_.nStr3[L-1];return k+=""},toChinaDay:function(L){var k;switch(L){case 10:k="";break;case 20:k="";break;case 30:k="";break;default:k=_.nStr2[Math.floor(L/10)],k+=_.nStr1[L%10]}return k},getAnimal:function(L){return _.animals[(L-4)%12]},solar2lunar:function(G,Q,M){if(G<1900||G>2100||G==1900&&Q==1&&M<31)return-1;if(G)var P=new Date(G,parseInt(Q)-1,M);else var P=new Date;var I,ce=0,q=0,G=P.getFullYear(),Q=P.getMonth()+1,M=P.getDate(),O=(Date.UTC(P.getFullYear(),P.getMonth(),P.getDate())-Date.UTC(1900,0,31))/864e5;for(I=1900;I<2101&&O>0;I++)q=_.lYearDays(I),O-=q;O<0&&(O+=q,I--);var ee=new Date,W=!1;ee.getFullYear()==G&&ee.getMonth()+1==Q&&ee.getDate()==M&&(W=!0);var V=P.getDay(),Z=_.nStr1[V];V==0&&(V=7);var ue=I,ce=_.leapMonth(I),me=!1;for(I=1;I<13&&O>0;I++)ce>0&&I==ce+1&&me==0?(--I,me=!0,q=_.leapDays(ue)):q=_.monthDays(ue,I),me==1&&I==ce+1&&(me=!1),O-=q;O==0&&ce>0&&I==ce+1&&(me?me=!1:(me=!0,--I)),O<0&&(O+=q,--I);var Te=I,ie=O+1,Ce=Q-1,be=_.getTerm(G,3),R=_.toGanZhi(G-4),fe=new Date(G,1,be).getTime();new Date(G,Ce,M).getTime()<fe&&(R=_.toGanZhi(G-5));var te=_.getTerm(G,2*Q-1),J=_.getTerm(G,2*Q),X=_.toGanZhi(12*(G-1900)+Q+11);M>=te&&(X=_.toGanZhi(12*(G-1900)+Q+12));var se=!1,ye="";te==M&&(se=!0,ye=_.lunarTerm[2*Q-2]),J==M&&(se=!0,ye=_.lunarTerm[2*Q-1]);var ve=Date.UTC(G,Ce,1,0,0,0,0)/864e5+25567+10,le=_.toGanZhi(ve+M-1);return{lYear:ue,lMonth:Te,lDay:ie,animal:_.getAnimal(ue),yearCn:_.toChinaYear(ue),monthCn:(me&&ce===Te?"":"")+_.toChinaMonth(Te),dayCn:_.toChinaDay(ie),cYear:G,cMonth:Q,cDay:M,gzYear:R,gzMonth:X,gzDay:le,isToday:W,isLeap:me,nWeek:V,ncWeek:""+Z,isTerm:se,term:ye}},lunar2solar:function(L,k,$,P){var I=_.leapMonth(L);if(_.leapDays(L),P&&I!=k||L==2100&&k==12&&$>1||L==1900&&k==1&&$<31)return-1;var q=_.monthDays(L,k);if(L<1900||L>2100||$>q)return-1;for(var G=0,Q=1900;Q<L;Q++)G+=_.lYearDays(Q);for(var M=0,O=!1,Q=1;Q<k;Q++)M=_.leapMonth(L),O||M<=Q&&M>0&&(G+=_.leapDays(L),O=!0),G+=_.monthDays(L,Q);P&&(G+=q);var ee=Date.UTC(1900,1,30,0,0,0),W=new Date(864e5*(G+$-31)+ee),V=W.getUTCFullYear(),Z=W.getUTCMonth()+1,ue=W.getUTCDate();return _.solar2lunar(V,Z,ue)}};i.default=_,s.exports=i.default},function(s,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,23232,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19195,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835,37744,18936,18800,25776,92326,59984,27424,108228,43744,37600,53987,51552,54615,54432,55888,23893,22176,42704,21972,21200,43448,43344,46240,46758,44368,21920,43940,42416,21168,45683,26928,29495,27296,44368,84821,19296,42352,21732,53600,59752,54560,55968,92838,22224,19168,43476,42192,53584,62034,54560],s.exports=i.default},function(s,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=[31,28,31,30,31,30,31,31,30,31,30,31],s.exports=i.default},function(s,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","",""],s.exports=i.default},function(s,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","","","",""],s.exports=i.default},function(s,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","","","",""],s.exports=i.default},function(s,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","","","","","","","","","","","","","","","",""],s.exports=i.default},function(s,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","9778397bd19801ec9210c965cc920e","97b6b97bd19801ec95f8c965cc920f","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd197c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bcf97c3598082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd19801ec9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bd07f1487f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b97bd197c36c9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b70c9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","977837f0e37f149b0723b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0723b06bd","7f07e7f0e37f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f595b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e37f14998083b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14898082b0723b02d5","7f07e7f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66aa89801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e26665b66a449801e9808297c35","665f67f0e37f1489801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722"],s.exports=i.default},function(s,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","","",""],s.exports=i.default},function(s,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","",""],s.exports=i.default},function(s,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","","","",""],s.exports=i.default},function(s,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","","",""],s.exports=i.default}])})})(Cl)),Cl.exports}var G_=K_();const q_=Ll(G_);function zb(e,n){if(!e||e.length===0)return{type:"none",message:"",days:0};const i=[...e].sort((m,b)=>new Date(b.startDate).getTime()-new Date(m.startDate).getTime())[0],l=(m=>{const[b,y,v]=m.split("-").map(Number);return new Date(b,y-1,v)})(i.startDate),c=new Date;c.setHours(0,0,0,0);const u=c.getTime()-l.getTime(),h=Math.floor(u/(1e3*60*60*24));if(h>=0&&h<n.periodLength)return{type:"period",message:` ${h+1} `,days:n.periodLength-h};const g=new Date(l);g.setDate(l.getDate()+n.cycleLength);const p=g.getTime()-c.getTime(),f=Math.ceil(p/(1e3*60*60*24));return f<0?{type:"late",message:` ${Math.abs(f)} `,days:Math.abs(f)}:{type:"prediction",message:` ${f} `,days:f}}async function Z_(e){try{const n=await he.get(re.HEALTH,"health_settings");if(!n||!n.shareEnabled||n.shareScope==="specific"&&n.shareCharacterId!==e)return"";const s=[],i=await he.get(re.HEALTH,"sleep_logs")||[];if(i.length>0){const g=new Date().toDateString(),p=i.find(f=>new Date(f.endTime).toDateString()===g);if(p){const f={good:"",average:"",poor:""},m=v=>{const C=new Date(v);return`${String(C.getHours()).padStart(2,"0")}:${String(C.getMinutes()).padStart(2,"0")}`},b=m(p.startTime),y=m(p.endTime);s.push(`${b}-${y}:${f[p.quality]||""}`)}}const o=await he.get(re.HEALTH,"cycle_logs")||[],l=await he.get(re.HEALTH,"cycle_settings")||{cycleLength:28,periodLength:5};if(o.length>0){const h=zb(o,l);h.type==="period"?s.push(h.message.replace(/\s/g,"")):h.type==="late"?s.push(h.message.replace(/\s/g,"")):h.type==="prediction"&&s.push(`${h.days}`)}const u=(await he.get(re.HEALTH,"diagnosis_logs")||[]).filter(h=>h.status==="treating");if(u.length>0){const h=u.map(g=>g.illnessName).join("");s.push(`:${h}`)}return s.join(" ")}catch(n){return console.error("Failed to get health status:",n),""}}const Y_={totalPeriods:12,showWeekends:!0,periodTimes:Array.from({length:12},(e,n)=>({period:n+1,startTime:`${8+n}:00`,endTime:`${8+n}:45`})),startDate:new Date().toISOString().split("T")[0],totalWeeks:20},Q_=e=>{const n=new Date(e),s=new Date,i=new Date(n.getFullYear(),n.getMonth(),n.getDate()),o=new Date(s.getFullYear(),s.getMonth(),s.getDate()),l=i.getDay()||7,c=new Date(i);c.setDate(i.getDate()-(l-1));const u=o.getTime()-c.getTime(),h=Math.floor(u/(1e3*60*60*24));return Math.floor(h/7)+1};async function X_(e){try{const n=await he.get(re.SCHEDULE,"schedule_settings");if(!n||!n.shareEnabled||n.shareScope==="specific"&&n.shareCharacterId!==e)return"";const s=[],i=new Date,o=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(i.getDate()).padStart(2,"0")}`,c=(await he.get(re.SCHEDULE,"todos")||[]).filter(f=>!f.completed);if(c.length>0){const f=c.map(m=>m.text).join("");s.push(`:${f}`)}const h=(await he.get(re.SCHEDULE,"events")||[]).filter(f=>f.date===o);if(h.length>0){const f=h.map(m=>{let b="";return m.isAllDay?b="()":m.startTime&&(b=`(${m.startTime}${m.endTime?"-"+m.endTime:""})`),`${m.title}${b}`}).join("");s.push(`:${f}`)}const g=await he.get(re.SCHEDULE,"timetable_settings"),p=await he.get(re.SCHEDULE,"timetable_courses")||[];if(p.length>0){const f={...Y_,...g};if(f.periodTimes.length<f.totalPeriods){const C=f.periodTimes.length;for(let w=C;w<f.totalPeriods;w++)f.periodTimes.push({period:w+1,startTime:`${8+w}:00`,endTime:`${8+w}:45`})}const m=Q_(f.startDate),y=(i.getDay()+6)%7,v=p.filter(C=>C.day===y&&C.weeks.includes(m)).sort((C,w)=>C.startPeriod-w.startPeriod);if(v.length>0){const C=v.map(w=>{const F=w.room?`@${w.room}`:"",j=f.periodTimes.find(B=>B.period===w.startPeriod),T=f.periodTimes.find(B=>B.period===w.endPeriod);let z="";return j&&T?z=`(${j.startTime}-${T.endTime})`:j&&(z=`(${j.startTime})`),`${w.startPeriod}-${w.endPeriod}${z}:${w.subject}${F}`}).join("");s.push(`:${C}`)}else m>0&&m<=f.totalWeeks}return s.join(" ")}catch(n){return console.error("Failed to get schedule status:",n),""}}async function J_(e){const{characterId:n,character:s,userNickname:i,allMessages:o}=e;try{const l=await e8(),c=await t8(n),u=await n8(),h=await s8(n),g=await r8(c.enabledWorldBooks,h.worldBooks),p=await a8(u,s),f=await i8(c.enableStickers,c.stickerProbability),m=await Z_(n),b=await X_(n),{chatHistory:y,hasUnclaimedUserRedPacket:v}=await o8(o,c.contextMessageCount,i,s.name,f.stickerMeanings,c.timeAwareness);return{systemPrompt:l8({character:s,userData:u,userNickname:i,worldBooks:g,timeInfo:p,chatHistory:y,stickerInfo:f,chatSettings:c,hasUnclaimedUserRedPacket:v,healthStatus:m,scheduleStatus:b}),userPrompt:"",apiConfig:l,characterName:s.name}}catch(l){throw console.error("[PrivateChatPromptBuilder]  prompt :",l),l}}async function e8(){const e=await he.get(re.API_SETTINGS,"api_configs"),n=parseInt(await he.get(re.API_SETTINGS,"current_config_index")||"0");if(!e)throw new Error(" API");const i=JSON.parse(e)[n];if(!i||!i.apiKey||!i.baseUrl)throw new Error("API ");return{apiKey:i.apiKey,baseUrl:i.baseUrl,modelName:i.modelName,temperature:i.temperature||.9,maxTokens:i.maxTokens}}async function t8(e){const n=await he.get(re.CHATS,"chat_settings")||{},s=await he.get(re.CHAT_SETTINGS,`chat_detail_settings_${e}`)||{};return{contextMessageCount:n.contextMessageCount||10,enabledWorldBooks:n.enabledWorldBooks||[],timeAwareness:n.timeAwareness!==void 0?n.timeAwareness:!0,enableStickers:s.enableStickers!==void 0?s.enableStickers:!0,stickerProbability:s.stickerProbability!==void 0?s.stickerProbability:30}}async function n8(){const e=await he.get(re.USER_DATA,"userData")||{},n=await he.get(re.USER_DATA,"user_description")||"";return{name:e.name||"",country:e.country||"",fortress:e.fortress||"",date:e.date||"",birthday:e.birthday||"",attendant:e.attendant||"",initialSword:e.initialSword||"",description:n}}async function s8(e){return{worldBooks:(await he.get(re.CHARACTERS,"characters")||[]).find(i=>i.id===e)?.worldBooks||[]}}async function r8(e,n){const s=await he.get(re.WORLD_BOOKS,"world_books")||[],i=new Set([...e,...n]),o=s.filter(g=>g.scope==="global"),l=s.filter(g=>g.scope==="local"&&i.has(g.id)),c=[...o,...l],u=c.filter(g=>g.position==="before"),h=c.filter(g=>g.position==="after");return{before:u,after:h}}async function a8(e,n){const s=new Date,i=s.getHours(),o=s.getMonth()+1,l=s.getDate(),c=i<6?"":i<12?"":i<18?"":"";let u="",h="",g="";try{const v=q_.solar2lunar(s.getFullYear(),o,l);v.festival&&(h=v.festival),v.Term&&(g=v.Term),u=(F=>{if(!F)return null;const j=["","","","","",""],T=["","","","","",""],z=["","","","","",""],B=["","","","","",""];return j.includes(F)?"":T.includes(F)?"":z.includes(F)?"":B.includes(F)?"":null})(v.Term)||(o>=3&&o<=5?"":o>=6&&o<=8?"":o>=9&&o<=11?"":"")}catch(v){console.error(":",v),u=o>=3&&o<=5?"":o>=6&&o<=8?"":o>=9&&o<=11?"":""}const p=`${o}-${l}`,f={"1-1":"","2-3":"","2-4":"","2-14":"","3-3":"","3-8":"","4-1":"","5-1":"","5-4":"","6-1":"","8-13":"","8-14":"","8-15":"","10-1":"","12-24":"","12-25":"","12-31":""};!h&&f[p]&&(h=f[p]);let m="";if(e.date){const v=cu(e.date);if(v&&v.month===o&&v.day===l){const C=s.getFullYear()-v.year;C>0?m=`${C}`:C===0&&(m="")}}let b="";if(e.birthday){const v=cu(e.birthday);v&&v.month===o&&v.day===l&&(b="")}let y="";if(n?.manifestDate){const v=cu(n.manifestDate);if(v&&v.month===o&&v.day===l){const C=s.getFullYear()-v.year;C>0?y=`${C}`:C===0?y="":y=""}}return{timeOfDay:c,season:u,holiday:h,term:g,anniversary:m,birthday:b,manifestAnniversary:y,currentTime:`${s.getFullYear()}${o.toString().padStart(2,"0")}${l.toString().padStart(2,"0")} ${s.getHours().toString().padStart(2,"0")}:${s.getMinutes().toString().padStart(2,"0")}`}}function cu(e){try{if(e.includes("-")){const n=e.split("-");if(n.length>=3)return{year:parseInt(n[0]),month:parseInt(n[1]),day:parseInt(n[2])};if(n.length>=2)return{year:new Date().getFullYear(),month:parseInt(n[0]),day:parseInt(n[1])}}if(e.includes("")){const n=e.match(/(\d{4})/),s=e.match(/(\d+)/),i=e.match(/(\d+)/);if(s&&i)return{year:n?parseInt(n[1]):new Date().getFullYear(),month:parseInt(s[1]),day:parseInt(i[1])}}return null}catch(n){return console.error(":",n),null}}async function i8(e,n){if(!e)return{enabled:!1,stickers:[],stickerMeanings:{},stickerList:"",stickerGuidance:""};const{getAllStickers:s,getStickerMeaningsForAI:i}=await U_(async()=>{const{getAllStickers:h,getStickerMeaningsForAI:g}=await Promise.resolve().then(()=>L_);return{getAllStickers:h,getStickerMeaningsForAI:g}},void 0),o=await s(),l=await i(),c=o.length>0?o.map(h=>`- ID: ${h.id} | : ${h.meaning}`).join(`
`):"";let u="";return o.length>0&&(n<=20?u="":n<=40?u="":n<=60?u="":n<=80?u="":u=""),{enabled:!0,stickers:o,stickerMeanings:l,stickerList:c,stickerGuidance:u}}async function o8(e,n,s,i,o,l){const c=e.slice(-n);let u=!1;for(const p of c)if(p.senderId==="user"&&p.redPacket&&!p.redPacket.opened){u=!0;break}if(!l)return{chatHistory:c.map(f=>{if(f.senderId==="system")return null;if(f.isImageRecognition)return`${f.senderId==="user"?s:i}: ${f.text}`;if(f.isPlaceholderImage)return`${f.senderId==="user"?s:i}: [: ${f.text}]`;if(f.stickerId&&o[f.stickerId])return`${f.senderId==="user"?s:i}: [: ${o[f.stickerId]}]`;if(f.imageKey)return`${f.senderId==="user"?s:i}: []`;if(f.redPacket){const m=f.senderId==="user"?s:i;return f.redPacket.opened?`${m}: [-]`:`${m}: []`}return`${f.senderId==="user"?s:i}: ${f.text}`}).filter(f=>f!==null).join(`
`),hasUnclaimedUserRedPacket:u};const h=[];let g=null;return c.forEach((p,f)=>{if(p.senderId==="system")return;const m=p.timestamp instanceof Date?p.timestamp:new Date(p.timestamp),b=`${m.getFullYear()}-${String(m.getMonth()+1).padStart(2,"0")}-${String(m.getDate()).padStart(2,"0")}`;(f===0||g!==b)&&(h.push(`${b}`),g=b);const y=`${String(m.getHours()).padStart(2,"0")}:${String(m.getMinutes()).padStart(2,"0")}`;let v="";const C=p.senderId==="user"?s:i;p.isImageRecognition?v=p.text:p.isPlaceholderImage?v=`[: ${p.text}]`:p.stickerId&&o[p.stickerId]?v=`[: ${o[p.stickerId]}]`:p.imageKey?v="[]":p.redPacket?p.redPacket.opened?v="[-]":v="[]":v=p.text,h.push(`[${y}] ${C}: ${v}`)}),{chatHistory:h.join(`
`),hasUnclaimedUserRedPacket:u}}function l8(e){const{character:n,userData:s,userNickname:i,worldBooks:o,timeInfo:l,chatHistory:c,stickerInfo:u,chatSettings:h,hasUnclaimedUserRedPacket:g,healthStatus:p,scheduleStatus:f}=e,m=o.before.map((T,z)=>`- **${z+1}${T.name}:** ${T.content}`).join(`
`),b=o.after.map((T,z)=>`- **${z+1}${T.name}:** ${T.content}`).join(`
`);let y="";h.timeAwareness&&(y=`- **:** ${l.currentTime} (${l.timeOfDay}, ${l.season})`,l.term&&(y+=`
- **:** ${l.term}`),l.holiday&&(y+=`
- **:** ${l.holiday}`),l.anniversary&&(y+=`
- **:** ${l.anniversary}`),l.birthday&&(y+=`
- **:** ${l.birthday}`),l.manifestAnniversary&&(y+=`
- **:** ${l.manifestAnniversary}`));const v=h.timeAwareness?`** **
1. "" [HH:MM] YYYY-MM-DD
2. "23:15"23:15
3. 

`:"",C=u.enabled&&u.stickers.length>0?`${u.stickerGuidance}
${u.stickerList}
-  "stickerId" ID
- : { "sender": "${n.name}", "stickerId": "sticker_xxxxx" }
- 
- `:"",w=g?`

** ():**
- "[]"
- **"[-]"**
- : { "sender": "system", "content": "" }
- `:"",F=p?`
  - **:** ${p}
  - **:** - - - - `:"",j=f?`
  - **:** ${f}
  - **:** `:"";return`""

**:**
- **:** 
- **:** 

**:**
${m||"- "}

**:**
-  **** 
- 
- """"""""""
- 
-  emoji 
- **** """AI"""""""

**:**
- **:** ${n.name}
- **:** ${n.description||""}${n.manifestDate?`
- **:** ${n.manifestDate}`:""}
${y?`- ${y}`:""}
- ** ():**
  - **:** ${i}
  - **:** ${s.name}
  - **:** ${s.country}
  - **:** ${s.fortress}
  - **:** ${s.date}${s.birthday?`
  - **:** ${s.birthday}`:""}${s.attendant?`
  - **:** ${s.attendant}`:""}${s.initialSword?`
  - **:** ${s.initialSword}`:""}${s.description?`
  - **:** ${s.description}`:""}${F}${j}

** ():**
- **:**  
    1. 

**:**
-  **${n.name}**  
- 1-4
- 
- quote

** ():**
- ****
- ****
- 
-   
    
  -   
  -   
  -   
  
- **** quotecontent"[]"

${v}
**:**
${c||""}

**:**
${b||"- "}

** ():**
${C}

** ():**
- ""
- 
-  "isPlaceholderImage"  "content" 100
- : { "sender": "${n.name}", "content": "", "isPlaceholderImage": true }
- 100
- 
${w}

** ():**
- 
- 
- : { "sender": "${n.name}", "redPacket": { "amount": , "blessing": "" } }
- amount:  500-10000
- blessing: 
- 

** ( JSON):**
{
    "messages": [
        { "sender": "${n.name}", "content": "" },
        {
            "sender": "${n.name}",
            "content": "",
            "quote": {
                "sender": "${i}",
                "content": ""
            }
        },
        {
            "sender": "${n.name}",
            "content": "/",
            "quote": {
                "sender": "${i}",
                "content": "[]"
            }
        },
        { "sender": "${n.name}", "stickerId": "sticker_xxxxx" },
        { "sender": "${n.name}", "content": "100", "isPlaceholderImage": true },
        { "sender": "${n.name}", "redPacket": { "amount": 200, "blessing": "" } }
    ]
}`}async function c8(e,n=1024,s=1024,i=.8){return new Promise((o,l)=>{const c=new FileReader;c.onload=u=>{const h=new Image;h.onload=()=>{let g=h.width,p=h.height;if(g>n||p>s){const y=Math.min(n/g,s/p);g*=y,p*=y}const f=document.createElement("canvas");f.width=g,f.height=p;const m=f.getContext("2d");if(!m){l(new Error(" canvas context"));return}m.drawImage(h,0,0,g,p);const b=f.toDataURL("image/jpeg",i);o(b)},h.onerror=()=>l(new Error("")),h.src=u.target?.result},c.onerror=()=>l(new Error("")),c.readAsDataURL(e)})}async function d8(e,n){try{console.log("[AITaskManager]  AI ...");const s=await J_(e);let i;n&&(console.log("[AITaskManager] ..."),i=await c8(n,1024,1024,.8));const o={apiKey:s.apiConfig.apiKey,baseUrl:s.apiConfig.baseUrl,modelName:s.apiConfig.modelName,temperature:s.apiConfig.temperature,maxTokens:s.apiConfig.maxTokens,systemPrompt:s.systemPrompt,userPrompt:s.userPrompt,pendingImageBase64:i,imageRecognitionPrompt:"100",characterName:s.characterName,userNickname:e.userNickname,displayName:e.displayName},l=await V_(e.characterId,"private_chat_reply",o);return console.log(`[AITaskManager] : ${l}`),l}catch(s){throw console.error("[AITaskManager] :",s),s}}function u8({characterId:e,characterName:n,onClose:s}){const[i,o]=N.useState([]),[l,c]=N.useState(""),u=N.useRef(!0);N.useEffect(()=>(u.current=!0,()=>{u.current=!1}),[]);const[h,g]=N.useState(()=>Pe.chatSettings?.userAvatar||null),[p,f]=N.useState(()=>Pe.characters?.find(Se=>Se.id===e)?.avatar||null),[m,b]=N.useState(()=>Pe.chatSettings?.chatBackground||null),[y,v]=N.useState(null),[C,w]=N.useState(null),[F,j]=N.useState(null),[T,z]=N.useState(()=>Pe.chatSettings?.userNickname||Pe.userData?.name||""),[B,U]=N.useState(!1),[D,A]=N.useState(()=>Pe.chatSettingsDetail?.[e]?.remark||n),[H,Y]=N.useState(()=>Pe.chatSettings?.bubbleStyles?.user||`background: linear-gradient(75deg, rgba(172, 188, 166, 1), rgba(172, 188, 166, 1), rgba(172, 188, 166, 1));
color: #ffffff;
border-radius: 8px;
padding: 0.625rem 0.875rem;
max-width: 70vw;`),[_,L]=N.useState(()=>Pe.chatSettings?.bubbleStyles?.character||`background: linear-gradient(-75deg, rgba(245, 245, 245, 1), rgba(245, 245, 245, 1), rgba(245, 245, 245, 1));
color: #333333;
border-radius: 8px;
padding: 0.625rem 0.875rem;
max-width: 70vw;`),[k,$]=N.useState(()=>Pe.chatSettings?.bubbleStyles?.userQuote||`background: #9BAD96;
color: rgba(255, 255, 255, 0.8);
border-radius: 4px;
padding: 0.5rem;
margin-bottom: 0.5rem;`),[P,I]=N.useState(()=>Pe.chatSettings?.bubbleStyles?.characterQuote||`background: #e8e8e8;
color: #666666;
border-radius: 4px;
padding: 0.5rem;
margin-bottom: 0.5rem;`),[q,G]=N.useState(()=>Pe.chatSettings?.timestampStyle||"default"),[Q,M]=N.useState([]),[O,ee]=N.useState(null),[W,V]=N.useState(()=>Pe.chatSettings?.darkMode||!1),[Z,ue]=N.useState(()=>Pe.chatSettings?.theme||(Pe.chatSettings?.darkMode?"dark":"light"));N.useEffect(()=>{const we=()=>{const de=Pe.chatSettings;V(de?.darkMode||!1),ue(de?.theme||(de?.darkMode?"dark":"light"))};return window.addEventListener("chat-settings-updated",we),(async()=>{if(!Pe.chatSettings)try{const de=await he.get(re.CHATS,"chat_settings");de&&(Pe.chatSettings=de,de.darkMode!==void 0&&V(de.darkMode),ue(de.theme||(de.darkMode?"dark":"light")),de.userAvatar&&g(de.userAvatar),de.chatBackground&&b(de.chatBackground),de.bubbleStyles&&(Y(de.bubbleStyles.user),L(de.bubbleStyles.character),$(de.bubbleStyles.userQuote),I(de.bubbleStyles.characterQuote)),de.timestampStyle&&G(de.timestampStyle))}catch(de){console.error("Failed to load global chat settings in PrivateChat",de)}})(),()=>window.removeEventListener("chat-settings-updated",we)},[]);const[ce,me]=N.useState(!1);N.useRef(null);const Te=N.useRef(null),ie=N.useRef(!0),Ce=N.useRef(!1),be=N.useRef([]),[R,fe]=N.useState(!1),[te,J]=N.useState(null),[X,se]=N.useState({x:0,y:0}),[ye,ve]=N.useState(!1),[le,ke]=N.useState(""),[Ne,_e]=N.useState(null),Re=N.useRef(null),[at,Be]=N.useState({show:!1,message:""}),[mt,ct]=N.useState(!1),[it,bt]=N.useState(new Set),[ot,kt]=N.useState(!1),[nn,Ft]=N.useState(!1),[bn,un]=N.useState(""),[Yt,sn]=N.useState(!1),[Qt,jt]=N.useState({}),[Wt,Ge]=N.useState(0),[St,Nt]=N.useState(0),[wt,rn]=N.useState({}),[zt,Kt]=N.useState(null),[ds,an]=N.useState(null),[jn,Un]=N.useState(!1),[Nn,Ps]=N.useState(""),[sa,ei]=N.useState(""),[Zl,Qi]=N.useState(0);N.useEffect(()=>{(async()=>{if(h)if(h.startsWith("data:"))v(h);else{const Se=await Ct(h);v(Se)}else v(null);if(p)if(p.startsWith("data:"))w(p);else{const Se=await Ct(p);w(Se)}else w(null);if(m)if(m.startsWith("data:"))j(m);else{const Se=await Ct(m);j(Se)}else j(null)})()},[h,p,m]),N.useEffect(()=>{(async()=>{const Se={},de=await na(),dt=new Map(de.map(nt=>[nt.id,nt]));for(const nt of be.current)if(nt.stickerId&&!Qt[nt.stickerId]){const tt=dt.get(nt.stickerId);if(tt){if(tt.imageUrl)Se[nt.stickerId]=tt.imageUrl;else if(tt.imageKey){const Je=await Wf(tt.imageKey);Je&&(Se[nt.stickerId]=Je)}}}Object.keys(Se).length>0&&jt(nt=>({...nt,...Se}))})()},[i]),N.useEffect(()=>{(async()=>{const Se={};for(const de of be.current)if(de.imageKey&&!wt[de.imageKey]){const dt=await Ct(de.imageKey);dt&&(Se[de.imageKey]=dt)}Object.keys(Se).length>0&&rn(de=>({...de,...Se}))})()},[i]);const Wn=we=>{const Se=we.getHours().toString().padStart(2,"0"),de=we.getMinutes().toString().padStart(2,"0");return`${Se}:${de}`},jr=we=>{const Se={};return we&&we.split(";").filter(dt=>dt.trim()).forEach(dt=>{const[nt,tt]=dt.split(":").map(Je=>Je.trim());if(nt&&tt){const Je=nt.replace(/-([a-z])/g,yt=>yt[1].toUpperCase());Se[Je]=tt}}),Se},Xi=(we,Se)=>we.getFullYear()===Se.getFullYear()&&we.getMonth()===Se.getMonth()&&we.getDate()===Se.getDate(),Yl=we=>{const Se=we.getFullYear(),de=(we.getMonth()+1).toString().padStart(2,"0"),dt=we.getDate().toString().padStart(2,"0");return`${Se}/${de}/${dt}`},Xs=N.useMemo(()=>{const we=[],Se=i.filter(de=>!de.isImageRecognition);return Se.forEach((de,dt)=>{(dt===0||!Xi(de.timestamp,Se[dt-1].timestamp))&&we.push({type:"date",date:Yl(de.timestamp),id:`date-${de.timestamp.getTime()}`});const tt=de.senderId==="user"&&Se.slice(dt+1).some(Je=>Je.senderId==="character");we.push({type:"message",message:de,isUserMessageRead:tt})}),we},[i,Wt]),Js=P_({count:Xs.length,getScrollElement:()=>Te.current,estimateSize:we=>{const Se=Xs[we];if(Se?.type==="date")return 30;if(Se?.type==="message"){const de=Se.message;return de.imageKey||de.stickerId?280:80}return 80},overscan:10});N.useEffect(()=>{be.current.length>0&&!Ce.current&&(Ql(),be.current.some(Se=>Se.senderId==="character"&&!Se.isRead)?(Ce.current=!0,be.current=be.current.map(Se=>Se.senderId==="character"?{...Se,isRead:!0}:Se),_n(be.current),o([...be.current])):Ce.current=!0)},[be.current.length]),N.useLayoutEffect(()=>{Xs.length!==0&&(ie.current?requestAnimationFrame(()=>{Js.getTotalSize()>0&&Te.current&&(Te.current.scrollTop=Te.current.scrollHeight,ie.current=!1)}):requestAnimationFrame(()=>{Te.current&&(Te.current.scrollTop=Te.current.scrollHeight)}))},[Xs.length]),N.useEffect(()=>{ie.current=!0,Ce.current=!1;const we=async()=>{try{const tt=Pe.messages[e];if(tt&&tt.length>0&&(be.current=tt,o([...tt])),Pe.chatSettings){const We=Pe.chatSettings;We.userAvatar!==void 0&&g(We.userAvatar),We.chatBackground!==void 0&&b(We.chatBackground),We.userNickname!==void 0&&z(We.userNickname),We.bubbleStyles?.user&&Y(We.bubbleStyles.user),We.bubbleStyles?.character&&L(We.bubbleStyles.character),We.bubbleStyles?.userQuote&&$(We.bubbleStyles.userQuote),We.bubbleStyles?.characterQuote&&I(We.bubbleStyles.characterQuote),We.timestampStyle&&G(We.timestampStyle)}const Je=Pe.chatSettingsDetail[e];if(Je&&Je.remark!==void 0&&A(Je.remark),Pe.userData&&!Pe.chatSettings?.userNickname&&z(Pe.userData.name||""),Pe.characters){const We=Pe.characters.find(rt=>rt.id===e);We&&(f(We.avatar),ee(We))}const yt=[he.get(re.CHAT_MESSAGES,`chat_messages_${e}`),he.get(re.CHAT_SETTINGS,`chat_detail_settings_${e}`)];z6()?(yt.push(Promise.resolve(Pe.chatSettings)),yt.push(Promise.resolve(Pe.userData)),yt.push(Promise.resolve(Pe.characters))):(yt.push(he.get(re.CHATS,"chat_settings").then(We=>(Pe.chatSettings=We,We))),yt.push(he.get(re.USER_DATA,"userData").then(We=>(Pe.userData=We,We))),yt.push(he.get(re.CHARACTERS,"characters").then(We=>(Pe.characters=We,Pe.lastUpdate=Date.now(),We))));const[_t,Ye,et,Mt,Gn]=await Promise.all(yt),Et=await he.get(re.USER_DATA,"balance");Et!=null&&Qi(Et);const st={};if(_t&&_t.length>0){const We=_t.map(gt=>({...gt,timestamp:new Date(gt.timestamp)}));(!tt||tt.length!==We.length||We.length>0&&tt.length>0&&We[We.length-1].id!==tt[tt.length-1].id)&&(Pe.messages[e]=We,be.current=We,st.messages=We)}else(!tt||tt.length>0)&&(st.messages=[],Pe.messages[e]=[],be.current=[]);if(et){et.userAvatar!==h&&(st.userAvatarKey=et.userAvatar),et.chatBackground!==m&&(st.chatBackgroundKey=et.chatBackground);const We=et.userNickname||"";We!==T&&(st.userNickname=We),et.bubbleStyles?.user&&Y(et.bubbleStyles.user),et.bubbleStyles?.character&&L(et.bubbleStyles.character),et.bubbleStyles?.userQuote&&$(et.bubbleStyles.userQuote),et.bubbleStyles?.characterQuote&&I(et.bubbleStyles.characterQuote),et.timestampStyle!==q&&G(et.timestampStyle||"default")}else if(Mt){const We=Mt.name||"";We!==T&&(st.userNickname=We)}else T!==""&&(st.userNickname="");Ye&&(Pe.chatSettingsDetail[e]=Ye);let hn=n;if(Gn){const We=Gn.find(rt=>rt.id===e);We&&(hn=We.name)}let At=Ye?.remark;if((!At||!At.trim())&&(hn&&hn!==""?At=hn:n&&n!==""?At=n:At=D||""),At&&At!==D&&(st.displayName=At),(!Ye||!Ye.remark)&&At&&At!==""){const We={...Ye||{},remark:At,isPinned:Ye?.isPinned||!1,background:Ye?.background};he.set(re.CHAT_SETTINGS,`chat_detail_settings_${e}`,We).then(()=>{Pe.chatSettingsDetail||(Pe.chatSettingsDetail={}),Pe.chatSettingsDetail[e]=We,console.log("[PrivateChat] Auto-fixed missing remark with:",At)}).catch(rt=>{console.warn("[PrivateChat] Failed to auto-save remark:",rt)})}if(Gn){const We=Gn.find(rt=>rt.id===e);We&&(We.avatar!==p&&(st.characterAvatarKey=We.avatar),(!O||We.id!==O?.id||We.name!==O?.name)&&(st.character=We))}st.messages!==void 0&&o(st.messages),st.userAvatarKey!==void 0&&g(st.userAvatarKey),st.chatBackgroundKey!==void 0&&b(st.chatBackgroundKey),st.userNickname!==void 0&&z(st.userNickname),st.displayName!==void 0&&A(st.displayName),st.characterAvatarKey!==void 0&&f(st.characterAvatarKey),st.character!==void 0&&ee(st.character)}catch(tt){console.error("Failed to load chat data:",tt)}};we();const Se=()=>{o([]),be.current=[],Pe.messages[e]=[]},de=()=>{Uu(),we()};window.addEventListener("chat-messages-cleared",Se),window.addEventListener("chat-settings-updated",de);const dt=tt=>{const{type:Je,payload:yt}=tt.data;if(Je==="AI_TASK_COMPLETED"){if(console.log("[PrivateChat]  AI :",yt),yt.characterId===e){const _t=yt.messages.map(et=>({...et,timestamp:new Date(et.timestamp)}));if(_t.some(et=>et.senderId==="system"&&et.text.includes(""))){for(let et=be.current.length-1;et>=0;et--){const Mt=be.current[et];if(Mt.senderId==="user"&&Mt.redPacket&&!Mt.redPacket.opened){be.current[et]={...Mt,redPacket:{...Mt.redPacket,opened:!0}};break}}o([...be.current])}be.current=[...be.current,..._t],_n(be.current),ft(be.current),document.hidden||!u.current?u.current&&(o([...be.current]),me(!1)):(async()=>{for(let Mt=0;Mt<_t.length;Mt++){if(!u.current)return;if(document.hidden){o(st=>{const At=_t.slice(Mt).filter(We=>!st.some(rt=>rt.id===We.id));return[...st,...At]}),me(!1);return}const Gn=Mt===0?600:1e3+Math.random()*800;if(await new Promise(st=>setTimeout(st,Gn)),!u.current)return;const Et=_t[Mt];o(st=>st.some(hn=>hn.id===Et.id)?st:[...st,Et]),Mt===0&&me(!1)}u.current&&me(!1)})()}}else Je==="AI_TASK_FAILED"&&(console.error("[PrivateChat] AI :",yt),yt.characterId===e&&(Be({show:!0,message:`AI: ${yt.error}`}),setTimeout(()=>Be({show:!1,message:""}),5e3),me(!1)))},nt=async tt=>{const Je=tt,{taskId:yt,task:_t}=Je.detail;if(console.log("[PrivateChat] Service Worker :",yt),_t.chatId===e)try{const{payload:Ye}=_t;let et=[{role:"system",content:Ye.systemPrompt},{role:"user",content:Ye.userPrompt}];if(Ye.pendingImageBase64&&Ye.imageRecognitionPrompt){console.log("[] ...");const rt=await fetch(`${Ye.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ye.apiKey}`},body:JSON.stringify({model:Ye.modelName,messages:[{role:"user",content:[{type:"text",text:Ye.imageRecognitionPrompt},{type:"image_url",image_url:{url:Ye.pendingImageBase64}}]}],temperature:.7,max_tokens:500})});if(!rt.ok)throw new Error("");const En=(await rt.json()).choices?.[0]?.message?.content||"";console.log("[] :",En),et=[et[0],{role:"user",content:et[1].content+`

[: ${En}]`}]}const Mt=await fetch(`${Ye.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ye.apiKey}`},body:JSON.stringify({model:Ye.modelName,messages:et,temperature:Ye.temperature,max_tokens:Ye.maxTokens})});if(!Mt.ok)throw new Error(`AI API : ${Mt.status}`);const Et=(await Mt.json()).choices[0]?.message?.content||"";if(!Et)throw new Error("AI");console.log("[] AI :",Et);let st,hn=[];try{st=JSON.parse(Et),hn=st.messages||[]}catch{console.log("[]  JSON...");try{const gt=Et.match(/```(?:json)?\s*(\{[\s\S]*?\})\s*```/);if(gt)st=JSON.parse(gt[1]),hn=st.messages||[];else{const En=Et.indexOf("{");if(En===-1)throw new Error(" JSON ");let Ss=0,on=-1;for(let Fn=En;Fn<Et.length;Fn++)if(Et[Fn]==="{"&&Ss++,Et[Fn]==="}"&&Ss--,Ss===0){on=Fn+1;break}if(on===-1)throw new Error("JSON ");const Cs=Et.substring(En,on);st=JSON.parse(Cs),hn=st.messages||[]}}catch(gt){throw console.error("[] JSON :",gt.message),console.error("[] AI :",Et),new Error(`AI: ${gt.message}`)}}if(hn.length===0)throw new Error("AI");console.log("[] :",hn);const At=hn.map((rt,gt)=>{if(rt.sender==="system")return{id:`${Date.now()}-${gt}`,text:rt.content,senderId:"system",senderName:"",timestamp:new Date,isRead:!0};if(rt.isPlaceholderImage){const Ss=(rt.content||"").slice(0,100);return{id:`${Date.now()}-${gt}`,text:Ss,senderId:"character",senderName:D,timestamp:new Date,isPlaceholderImage:!0,isRead:!0}}if(rt.redPacket)return{id:`${Date.now()}-${gt}`,text:"[]",senderId:"character",senderName:D,timestamp:new Date,redPacket:{amount:rt.redPacket.amount,blessing:rt.redPacket.blessing,opened:!1},isRead:!0};const En={id:`${Date.now()}-${gt}`,text:rt.stickerId?"[]":rt.content||"",senderId:"character",senderName:D,timestamp:new Date,isRead:!0};return rt.stickerId&&(En.stickerId=rt.stickerId),rt.quote&&(En.quote={sender:rt.quote.sender,content:rt.quote.content}),En});if(At.some(rt=>rt.senderId==="system"&&rt.text.includes(""))){for(let rt=be.current.length-1;rt>=0;rt--){const gt=be.current[rt];if(gt.senderId==="user"&&gt.redPacket&&!gt.redPacket.opened){be.current[rt]={...gt,redPacket:{...gt.redPacket,opened:!0}};break}}o([...be.current])}be.current=[...be.current,...At],await _n(be.current),await ft(be.current),document.hidden||!u.current?u.current&&(o([...be.current]),me(!1)):(async()=>{for(let gt=0;gt<At.length;gt++){if(!u.current)return;if(document.hidden){o(on=>{const Fn=At.slice(gt).filter(ia=>!on.some(nc=>nc.id===ia.id));return[...on,...Fn]}),me(!1);return}const En=gt===0?600:1e3+Math.random()*800;if(await new Promise(on=>setTimeout(on,En)),!u.current)return;const Ss=At[gt];o(on=>on.some(Cs=>Cs.id===Ss.id)?on:[...on,Ss]),gt===0&&me(!1)}u.current&&me(!1)})()}catch(Ye){console.error("[PrivateChat]  AI :",Ye),Be({show:!0,message:`AI: ${Ye.message}`}),setTimeout(()=>Be({show:!1,message:""}),5e3),me(!1)}};return"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.addEventListener("message",dt),window.addEventListener("ai-task-needs-fallback",nt),()=>{window.removeEventListener("chat-messages-cleared",Se),window.removeEventListener("chat-settings-updated",de),window.removeEventListener("ai-task-needs-fallback",nt),"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener("message",dt),Re.current&&clearTimeout(Re.current),er.current&&clearTimeout(er.current)}},[e]);const er=N.useRef(null),Nr=()=>{er.current&&clearTimeout(er.current),er.current=setTimeout(()=>{Ge(we=>we+1)},100)},_n=async we=>{try{const Se=`chat_messages_${e}`;await he.set(re.CHAT_MESSAGES,Se,we),Pe.messages[e]=we}catch(Se){console.error("Failed to save messages:",Se)}},Ql=async()=>{try{const we=await he.get(re.CHATS,"chat_list")||[],Se=we.findIndex(de=>de.id===e);Se!==-1&&we[Se].unread&&(delete we[Se].unread,await he.set(re.CHATS,"chat_list",we))}catch(we){console.error("Failed to clear unread count:",we)}},ft=async we=>{try{let Se=await he.get(re.CHATS,"chat_list")||[];const de=Se.findIndex(Ye=>Ye.id===e),dt=new Date,nt=`${dt.getHours().toString().padStart(2,"0")}:${dt.getMinutes().toString().padStart(2,"0")}`;let tt="",Je="";if(we.length>0){const Ye=we[we.length-1];Ye.senderId==="character"?Je=D:Je=T,tt=Ye.text}let yt=n;if(O?.name&&O.name!=="")yt=O.name;else if(!yt||yt===""){const Ye=Pe.characters?.find(et=>et.id===e);Ye?.name&&Ye.name!==""&&(yt=Ye.name)}const _t={id:e,name:yt||"",lastMessage:tt,lastSender:Je,time:nt,timestamp:dt.getTime()};if(de!==-1){const Ye=Se[de];_t.isPinned=Ye.isPinned,_t.remark=Ye.remark,Se[de]=_t}else Se.unshift(_t);await he.set(re.CHATS,"chat_list",Se)}catch(Se){console.error("Failed to update chat list:",Se)}},Ji=()=>{if(l.trim()){const we={id:Date.now().toString(),text:l.trim(),senderId:"user",senderName:T,timestamp:new Date};if(Ne){let Se=Ne.text;Ne.isPlaceholderImage||Ne.imageUrl||Ne.imageKey?Se="[]":Ne.stickerId&&(Se="[]"),we.quote={sender:Ne.senderId==="user"?T:D,content:Se}}be.current=[...be.current,we],o([...be.current]),_n(be.current),ft(be.current),c(""),_e(null)}},ti=we=>{we.key==="Enter"&&!we.shiftKey&&(we.preventDefault(),Ji())},eo=async we=>{const Se={id:Date.now().toString(),text:"[]",senderId:"user",senderName:T,timestamp:new Date,stickerId:we};be.current=[...be.current,Se],o([...be.current]),_n(be.current),ft(be.current),sn(!1),kt(!1)},_r=()=>{if(!bn.trim())return;const we={id:Date.now().toString(),text:bn.trim(),senderId:"user",senderName:T,timestamp:new Date,isPlaceholderImage:!0};be.current=[...be.current,we],o([...be.current]),_n(be.current),ft(be.current),Ft(!1),un("")},[fn,Er]=N.useState(null),Ar=(we,Se)=>r.jsxs("div",{className:"w-[240px] overflow-hidden rounded-lg select-none cursor-pointer active:opacity-90 transition-opacity",onClick:async de=>{if(de.stopPropagation(),Se.senderId==="character"&&!we.opened){const dt=Zl+we.amount;Qi(dt),await he.set(re.USER_DATA,"balance",dt);const nt=be.current.map(Je=>Je.id===Se.id?{...Je,redPacket:{...Je.redPacket,opened:!0}}:Je),tt={id:`${Date.now()}-system`,text:`${D}`,senderId:"system",senderName:"",timestamp:new Date,isRead:!0};nt.push(tt),be.current=nt,o([...nt]),await _n(nt),ft(nt),Er({...Se,redPacket:{...we,opened:!0}})}else Er(Se)},children:[r.jsxs("div",{className:"bg-[#ea5e4f] p-4 flex items-center gap-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsxs("div",{className:"w-[36px] h-[52px] bg-[#f4d03f] rounded-[18px] border-2 border-[#e6b333] flex flex-col items-center justify-center gap-[5px] relative",children:[r.jsx("div",{className:"w-[20px] h-[2px] bg-[#dba830] rounded-full opacity-80"}),r.jsx("div",{className:"w-[20px] h-[2px] bg-[#dba830] rounded-full opacity-80"}),r.jsx("div",{className:"w-[20px] h-[2px] bg-[#dba830] rounded-full opacity-80"}),r.jsx("div",{className:"w-[20px] h-[2px] bg-[#dba830] rounded-full opacity-80"}),r.jsx("div",{className:"w-[20px] h-[2px] bg-[#dba830] rounded-full opacity-80"})]})}),r.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center text-white",children:[r.jsx("p",{className:"text-[15px] font-medium leading-snug truncate mb-1",children:we.blessing}),r.jsx("p",{className:"text-[12px] opacity-85 font-normal",children:we.opened?"":""})]})]}),r.jsx("div",{className:"bg-white px-4 py-2 border-t border-black/5",children:r.jsx("p",{className:"text-[#999] text-[11px] tracking-wide",children:""})})]}),Xn=async()=>{const we=parseInt(Nn);if(!we||we<=0){Be({show:!0,message:""}),setTimeout(()=>Be({show:!1,message:""}),3e3);return}const Se=sa.trim()||"",de={id:Date.now().toString(),text:"[]",senderId:"user",senderName:T,timestamp:new Date,redPacket:{amount:we,blessing:Se,opened:!1}};be.current=[...be.current,de],o([...be.current]),_n(be.current),ft(be.current),Un(!1),Ps(""),ei(""),kt(!1)},Xl=async we=>{try{if(!await Ct(we)){Be({show:!0,message:""}),setTimeout(()=>Be({show:!1,message:""}),3e3);return}const de=we.replace("_chat_image",""),dt=await Ct(de);if(dt){const Je=await(await fetch(dt)).blob(),yt=new File([Je],`image_${Date.now()}.jpg`,{type:Je.type});Kt(yt)}const nt={id:Date.now().toString(),text:"",senderId:"user",senderName:T||"",timestamp:new Date,imageKey:we};be.current.push(nt),o([...be.current]),await _n(be.current),await ft(be.current),kt(!1)}catch(Se){console.error(":",Se),Be({show:!0,message:""}),setTimeout(()=>Be({show:!1,message:""}),3e3)}},Kn=async()=>{if(!ce){me(!0);try{if(l.trim()){const Se={id:Date.now().toString(),text:l.trim(),senderId:"user",senderName:T,timestamp:new Date};if(Ne){let de=Ne.text;Ne.isPlaceholderImage||Ne.imageUrl||Ne.imageKey?de="[]":Ne.stickerId&&(de="[]"),Se.quote={sender:Ne.senderId==="user"?T:D,content:de}}be.current=[...be.current,Se],o([...be.current]),await _n(be.current),await ft(be.current),c(""),_e(null)}const we=await d8({characterId:e,character:O||{id:e,name:n,description:"",manifestDate:void 0},userNickname:T,displayName:D,allMessages:be.current},zt);console.log("[PrivateChat] AI :",we),zt&&Kt(null)}catch(we){console.error("[PrivateChat] :",we),Be({show:!0,message:`AI: ${we.message}`}),setTimeout(()=>Be({show:!1,message:""}),5e3),me(!1)}}},Jl=async()=>{try{let we=await he.get(re.CHATS,"chat_list")||[];if(we.findIndex(de=>de.id===e)===-1&&i.length===0){const de=new Date,dt=`${de.getHours().toString().padStart(2,"0")}:${de.getMinutes().toString().padStart(2,"0")}`,nt={id:e,name:n,lastMessage:"",lastSender:"",time:dt,timestamp:de.getTime()};we.unshift(nt),await he.set(re.CHATS,"chat_list",we)}s()}catch(we){console.error("Failed to save chat list:",we),s()}},tr=(we,Se)=>{if(mt){to(we.id);return}const de="touches"in Se?Se.touches[0]:Se;Re.current=setTimeout(()=>{J(we),se({x:de.clientX,y:de.clientY}),fe(!0)},500)},us=()=>{Re.current&&(clearTimeout(Re.current),Re.current=null)},ra=()=>{if(te){const we=te.text;navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(we).then(()=>{console.log("")}).catch(()=>{Tr(we)}):Tr(we),fe(!1),J(null)}},Tr=we=>{const Se=document.createElement("textarea");Se.value=we,Se.style.position="fixed",Se.style.top="0",Se.style.left="0",Se.style.width="2em",Se.style.height="2em",Se.style.padding="0",Se.style.border="none",Se.style.outline="none",Se.style.boxShadow="none",Se.style.background="transparent",document.body.appendChild(Se),Se.focus(),Se.select();try{document.execCommand("copy")&&console.log("fallback")}catch(de){console.error(":",de)}document.body.removeChild(Se)},Dr=()=>{te&&(be.current=be.current.filter(we=>we.id!==te.id),fe(!1),J(null),setTimeout(()=>{o([...be.current]),_n(be.current),ft(be.current),requestAnimationFrame(()=>{requestAnimationFrame(()=>{Nt(we=>we+1)})})},0))},aa=()=>{ct(!0),fe(!1),J(null)},ec=()=>{ct(!1),bt(new Set)},to=we=>{bt(Se=>{const de=new Set(Se);return de.has(we)?de.delete(we):de.add(we),de})},ni=()=>{it.size!==0&&(be.current=be.current.filter(we=>!it.has(we.id)),ct(!1),bt(new Set),setTimeout(()=>{o([...be.current]),_n(be.current),ft(be.current),requestAnimationFrame(()=>{requestAnimationFrame(()=>{Nt(we=>we+1)})})},0))},no=()=>{te&&(ke(te.text),ve(!0),fe(!1))},si=()=>{te&&le.trim()&&(be.current=be.current.map(we=>we.id===te.id?{...we,text:le}:we),ve(!1),J(null),ke(""),setTimeout(()=>{o([...be.current]),_n(be.current),ft(be.current),requestAnimationFrame(()=>{requestAnimationFrame(()=>{Nt(we=>we+1)})})},0))},nr=()=>{ve(!1),J(null),ke("")},tc=()=>{te&&(_e(te),fe(!1),J(null))},ri=()=>{_e(null)},vt=()=>{U(!1),Uu(),(async()=>{try{const[Se,de,dt]=await Promise.all([he.get(re.CHAT_MESSAGES,`chat_messages_${e}`),he.get(re.CHATS,"chat_settings"),he.get(re.CHAT_SETTINGS,`chat_detail_settings_${e}`)]);if(Se&&Se.length>0){const nt=Se.map(tt=>({...tt,timestamp:new Date(tt.timestamp)}));be.current=nt,Pe.messages[e]=nt,o([...nt])}else o([]),be.current=[],Pe.messages[e]=[];if(de&&(Pe.chatSettings=de,de.chatBackground&&de.chatBackground!==m&&b(de.chatBackground)),dt){Pe.chatSettingsDetail[e]=dt;const nt=dt.remark||n;nt!==D&&A(nt)}else n!==D&&A(n)}catch(Se){console.error("Failed to reload data:",Se)}})()};return r.jsxs(je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2,ease:"easeOut"},className:`fixed inset-0 z-[60] flex flex-col ${Z==="light-frosted"?"bg-transparent":W?"bg-[#121212]":"bg-white"}`,children:[(Z==="light-frosted"||Z==="dark-frosted")&&F&&r.jsx("div",{className:"absolute inset-0 -z-20",children:r.jsx("img",{src:F,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:`h-16 flex items-center justify-between px-4 ${Z==="light-frosted"?"bg-white/20 backdrop-blur-md":Z==="dark-frosted"?"bg-black/20 backdrop-blur-md":W?"bg-[#121212]":"bg-white"}`,children:[r.jsx("button",{onClick:Jl,className:"p-2 -ml-2 active:opacity-60 transition-opacity",children:r.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:Z==="light-frosted"?"#333":Z==="dark-frosted"||W?"white":"black",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M15 18l-6-6 6-6"})})}),r.jsx("h1",{className:`font-semibold text-[18px] text-center ${Z==="light-frosted"?"text-[#333]":Z==="dark-frosted"||W?"text-white":"text-[#333]"}`,children:D}),r.jsx("button",{onClick:()=>U(!0),className:"p-2 -mr-2 active:opacity-60 transition-opacity",children:r.jsx(Jj,{className:`w-6 h-6 ${Z==="light-frosted"?"text-[#333]":Z==="dark-frosted"||W?"text-white":"text-[#333]"}`,strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})]}),r.jsx("div",{ref:Te,className:"flex-1 overflow-y-auto px-4 py-4",style:{backgroundColor:Z==="light-frosted"||Z==="dark-frosted"||F?"transparent":W?"#121212":"white",backgroundImage:Z==="light-frosted"||Z==="dark-frosted"?"none":F?W?`linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url(${F})`:`url(${F})`:"none",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",position:"relative"},children:be.current.length===0?r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] text-[#999]",children:""})}):r.jsx("div",{style:{height:`${Js.getTotalSize()}px`,position:"relative"},children:Js.getVirtualItems().map(we=>{const Se=Xs[we.index];if(!Se)return null;if(Se.type==="date")return r.jsx("div",{ref:Js.measureElement,"data-index":we.index,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${we.start}px)`},children:r.jsx(Pb,{dateString:Se.date})},Se.id);const{message:de,isUserMessageRead:dt}=Se,nt=!(de.stickerId||de.isPlaceholderImage||de.redPacket||de.imageKey&&(!de.text||de.text==="[]")),tt=q!=="inside";return r.jsx("div",{ref:Js.measureElement,"data-index":we.index,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${we.start}px)`},children:r.jsx("div",{className:"pb-3",children:r.jsxs("div",{className:"flex items-start gap-2",children:[mt&&r.jsx("div",{className:"w-6 h-6 flex items-center justify-center cursor-pointer flex-shrink-0",onClick:()=>to(de.id),children:r.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${it.has(de.id)?"bg-[#7B9E7B] border-[#7B9E7B]":"bg-white border-[#ccc]"}`,children:it.has(de.id)&&r.jsx(Dt,{className:"w-3.5 h-3.5 text-white",strokeWidth:3})})}),r.jsxs("div",{className:`flex gap-2 items-start flex-1 ${de.senderId==="user"?"justify-end":"justify-start"}`,children:[de.senderId==="system"&&r.jsx("div",{className:"w-full flex justify-center py-1",children:r.jsx("div",{className:"bg-black/20 rounded-full px-2 py-0 flex items-center justify-center cursor-pointer active:opacity-70 transition-opacity select-none",onTouchStart:Je=>tr(de,Je),onTouchEnd:us,onMouseDown:Je=>tr(de,Je),onMouseUp:us,onMouseLeave:us,children:r.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] text-white",children:de.text.includes("")?`${D}`:de.text})})}),de.senderId==="character"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-9 h-9 rounded-full bg-[#f5f5f5] flex items-center justify-center overflow-hidden flex-shrink-0",children:C?r.jsx("img",{src:C,alt:n,className:"w-full h-full object-cover"}):r.jsx(is,{className:"w-5 h-5 text-[#999]",strokeWidth:2})}),r.jsx("div",{style:de.stickerId||de.isPlaceholderImage||de.redPacket||de.imageKey&&(!de.text||de.text==="[]")?{}:jr(_),onTouchStart:Je=>tr(de,Je),onTouchEnd:us,onMouseDown:Je=>tr(de,Je),onMouseUp:us,onMouseLeave:us,children:de.stickerId&&Qt[de.stickerId]?r.jsx("img",{src:Qt[de.stickerId],alt:"",className:"max-w-[150px] max-h-[150px] rounded-lg",onLoad:Nr}):de.isPlaceholderImage?r.jsx("div",{className:"w-[250px] h-[180px] bg-[#f0f0f0] rounded-lg flex items-center justify-center px-6 py-4",children:r.jsxs("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] text-[#666] text-center",children:["[",de.text,".jpg]"]})}):de.redPacket?Ar(de.redPacket,de):r.jsxs(r.Fragment,{children:[de.quote&&r.jsxs("div",{style:jr(P),children:[r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px]",children:de.quote.sender}),r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] line-clamp-2",children:de.quote.content})]}),de.imageKey&&wt[de.imageKey]&&r.jsx("img",{src:wt[de.imageKey],alt:"",className:`max-w-[250px] max-h-[250px] rounded-lg ${de.text&&de.text!=="[]"?"mb-2":""}`,onLoad:Nr}),de.text&&de.text!=="[]"&&r.jsxs("div",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] break-words relative",children:[de.text,q==="inside"&&nt&&r.jsx("span",{className:"float-right text-[10px] opacity-70 ml-2 mt-1 select-none leading-none pt-2",children:Wn(de.timestamp)})]})]})}),tt&&r.jsxs("div",{className:"flex flex-col items-start gap-0.5 ml-1 self-end",children:[r.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] text-[#999]",children:Wn(de.timestamp)}),r.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] text-[#999]",children:de.isRead?"":""})]})]}),de.senderId==="user"&&r.jsxs(r.Fragment,{children:[tt&&r.jsxs("div",{className:"flex flex-col items-end gap-0.5 mr-1 self-end",children:[r.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] text-[#999]",children:Wn(de.timestamp)}),r.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] text-[#999]",children:dt?"":""})]}),r.jsx("div",{style:de.stickerId||de.isPlaceholderImage||de.redPacket||de.imageKey&&(!de.text||de.text==="[]")?{}:jr(H),onTouchStart:Je=>tr(de,Je),onTouchEnd:us,onMouseDown:Je=>tr(de,Je),onMouseUp:us,onMouseLeave:us,children:de.stickerId&&Qt[de.stickerId]?r.jsx("img",{src:Qt[de.stickerId],alt:"",className:"max-w-[150px] max-h-[150px] rounded-lg",onLoad:Nr}):de.isPlaceholderImage?r.jsx("div",{className:"w-[250px] h-[180px] bg-[#f0f0f0] rounded-lg flex items-center justify-center px-6 py-4",children:r.jsxs("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] text-[#666] text-center",children:["[",de.text,".jpg]"]})}):de.redPacket?Ar(de.redPacket,de):r.jsxs(r.Fragment,{children:[de.quote&&r.jsxs("div",{style:jr(k),children:[r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px]",children:de.quote.sender}),r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] line-clamp-2",children:de.quote.content})]}),de.imageKey&&wt[de.imageKey]&&r.jsx("img",{src:wt[de.imageKey],alt:"",className:`max-w-[250px] max-h-[250px] rounded-lg ${de.text&&de.text!=="[]"?"mb-2":""}`,onLoad:Nr}),de.text&&de.text!=="[]"&&r.jsxs("div",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] break-words relative",children:[de.text,q==="inside"&&nt&&r.jsx("span",{className:"float-right text-[10px] opacity-70 ml-2 mt-1 select-none leading-none pt-2",children:Wn(de.timestamp)})]})]})}),r.jsx("div",{className:"w-9 h-9 rounded-full bg-[#f5f5f5] flex items-center justify-center overflow-hidden flex-shrink-0",children:y?r.jsx("img",{src:y,alt:"User",className:"w-full h-full object-cover"}):r.jsx(is,{className:"w-5 h-5 text-[#999]",strokeWidth:2})})]})]})]})})},de.id)})},`virtual-list-${St}`)}),mt&&r.jsxs("div",{className:"bg-white border-t border-[#e5e5e5] px-4 py-3 safe-area-inset-bottom flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("span",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] text-[#666]",children:[" ",it.size," "]})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:ec,className:"px-4 py-2 rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] text-[#666] bg-[#f5f5f5] active:bg-[#e8e8e8] transition-colors",children:""}),r.jsx("button",{onClick:ni,disabled:it.size===0,className:`px-4 py-2 rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] text-white transition-colors ${it.size===0?"bg-[#ccc] cursor-not-allowed":"bg-red-500 active:opacity-80"}`,children:""})]})]}),!mt&&r.jsxs("div",{className:`px-3 py-2 safe-area-inset-bottom ${Z==="light-frosted"?"bg-white/20 backdrop-blur-md":Z==="dark-frosted"?"bg-black/20 backdrop-blur-md":W?"bg-[#121212]":"bg-white"}`,children:[Ne&&r.jsxs("div",{className:`mb-2 flex items-center justify-between p-2 rounded-lg ${Z==="light-frosted"?"bg-white/50":Z==="dark-frosted"?"bg-white/10":W?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] ${Z==="light-frosted"?"text-[#666]":Z==="dark-frosted"||W?"text-[#aaa]":"text-[#666]"}`,children:[" ",Ne.senderId==="user"?T:D]}),r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] truncate ${Z==="light-frosted"?"text-[#333]":Z==="dark-frosted"||W?"text-white":"text-[#333]"}`,children:Ne.isPlaceholderImage||Ne.imageUrl||Ne.imageKey?"[]":Ne.stickerId?"[]":Ne.text})]}),r.jsx("button",{onClick:ri,className:`ml-2 p-1 rounded transition-colors ${Z==="light-frosted"?"active:bg-white/60":Z==="dark-frosted"?"active:bg-white/10":W?"active:bg-[#2d2d2d]":"active:bg-[#e8e8e8]"}`,children:r.jsx(ht,{className:`w-4 h-4 ${Z==="light-frosted"?"text-[#666]":Z==="dark-frosted"||W?"text-[#aaa]":"text-[#666]"}`})})]}),ds&&r.jsxs("div",{className:`mb-2 flex items-start gap-2 p-2 rounded-lg ${Z==="light-frosted"?"bg-white/50":Z==="dark-frosted"?"bg-white/10":W?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,children:[r.jsx("img",{src:ds,alt:"",className:"w-20 h-20 object-cover rounded-lg"}),r.jsx("button",{onClick:handleCancelPendingImage,className:`ml-auto p-1 rounded transition-colors ${Z==="light-frosted"?"active:bg-white/60":Z==="dark-frosted"?"active:bg-white/10":W?"active:bg-[#2d2d2d]":"active:bg-[#e8e8e8]"}`,children:r.jsx(ht,{className:`w-4 h-4 ${Z==="light-frosted"?"text-[#666]":Z==="dark-frosted"||W?"text-[#aaa]":"text-[#666]"}`})})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:Kn,disabled:ce,className:`w-10 h-10 flex items-center justify-center transition-opacity flex-shrink-0 ${ce?"opacity-40":"active:opacity-60"}`,children:r.jsxs("svg",{className:`w-5 h-5 ${Z==="light-frosted"?"text-[#333]":Z==="dark-frosted"||W?"text-white":"text-[#333]"}`,viewBox:"0 0 24 24",stroke:"currentColor",fill:"none",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M12 2L15 9L22 12L15 15L12 22L9 15L2 12L9 9Z"}),r.jsx("path",{d:"M20 1L20.7 3.3L23 4L20.7 4.7L20 7L19.3 4.7L17 4L19.3 3.3Z",fill:"currentColor"}),r.jsx("path",{d:"M4 17L4.5 18.5L6 19L4.5 19.5L4 21L3.5 19.5L2 19L3.5 18.5Z",fill:"currentColor"})]})}),r.jsx("div",{className:`flex-1 rounded-lg px-4 py-2 min-h-[40px] max-h-[100px] flex items-center ${Z==="light-frosted"?"bg-white/50":Z==="dark-frosted"?"bg-white/10":W?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,children:r.jsx("textarea",{value:l,onChange:we=>c(we.target.value),onKeyPress:ti,onFocus:()=>{kt(!1),sn(!1)},className:`w-full resize-none outline-none font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] bg-transparent leading-normal ${Z==="light-frosted"?"text-[#333] placeholder:text-[#999]":Z==="dark-frosted"?"text-white placeholder:text-[#aaa]":W?"text-white placeholder:text-[#666]":"text-[#333] placeholder:text-[#999]"}`,rows:1,style:{maxHeight:"68px",overflowY:"auto"}})}),l.trim()===""?r.jsx("button",{onClick:()=>kt(!ot),className:"w-10 h-10 flex items-center justify-center active:opacity-60 transition-opacity flex-shrink-0",children:r.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:Z==="light-frosted"?"#333":W?"white":"#333333",strokeWidth:"2.5",children:[r.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),r.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}):r.jsx("button",{onClick:Ji,className:"w-10 h-10 bg-[#7B9E7B] rounded-full flex items-center justify-center active:opacity-80 transition-opacity flex-shrink-0",children:r.jsx(Cj,{className:"w-6 h-6 text-white",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),r.jsx(ze,{children:ot&&r.jsx(je.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{type:"spring",stiffness:400,damping:30},className:`absolute bottom-[70px] right-3 rounded-xl shadow-lg z-[998] p-2 ${Z==="light-frosted"?"bg-white/20 backdrop-blur-xl border border-white/20":Z==="dark-frosted"?"bg-black/20 backdrop-blur-xl border border-white/10":W?"bg-[#1e1e1e]":"bg-white"}`,children:r.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[r.jsx("button",{onClick:()=>{sn(!0),kt(!1)},className:"p-0 bg-transparent border-none cursor-pointer",children:r.jsx("div",{className:`w-[50px] h-[50px] rounded-lg flex items-center justify-center transition-colors ${Z==="light-frosted"?"bg-white/20 hover:bg-white/30 active:bg-white/40":Z==="dark-frosted"?"bg-white/10 hover:bg-white/20 active:bg-white/30":W?"bg-[#1e1e1e] hover:bg-[#2d2d2d] active:bg-[#3d3d3d]":"bg-white hover:bg-[#f5f5f5] active:bg-[#e8e8e8]"}`,children:r.jsx(c4,{className:`w-[24px] h-[24px] ${Z==="light-frosted"?"text-[#333]":Z==="dark-frosted"||W?"text-white":"text-[#333]"}`,strokeWidth:2.5})})}),r.jsx(O_,{onImageSelect:Xl,onError:we=>{Be({show:!0,message:we}),setTimeout(()=>Be({show:!1,message:""}),3e3)},children:r.jsx("button",{className:"p-0 bg-transparent border-none cursor-pointer",children:r.jsx("div",{className:`w-[50px] h-[50px] rounded-lg flex items-center justify-center transition-colors ${Z==="light-frosted"?"bg-white/20 hover:bg-white/30 active:bg-white/40":Z==="dark-frosted"?"bg-white/10 hover:bg-white/20 active:bg-white/30":W?"bg-[#1e1e1e] hover:bg-[#2d2d2d] active:bg-[#3d3d3d]":"bg-white hover:bg-[#f5f5f5] active:bg-[#e8e8e8]"}`,children:r.jsx(Xr,{className:`w-[24px] h-[24px] ${Z==="light-frosted"?"text-[#333]":Z==="dark-frosted"||W?"text-white":"text-[#333]"}`,strokeWidth:2.5})})})}),r.jsx("button",{onClick:()=>{kt(!1),Ft(!0)},className:"p-0 bg-transparent border-none cursor-pointer",children:r.jsx("div",{className:`w-[50px] h-[50px] rounded-lg flex items-center justify-center transition-colors ${Z==="light-frosted"?"bg-white/20 hover:bg-white/30 active:bg-white/40":Z==="dark-frosted"?"bg-white/10 hover:bg-white/20 active:bg-white/30":W?"bg-[#1e1e1e] hover:bg-[#2d2d2d] active:bg-[#3d3d3d]":"bg-white hover:bg-[#f5f5f5] active:bg-[#e8e8e8]"}`,children:r.jsx(Pf,{className:`w-[24px] h-[24px] ${Z==="light-frosted"?"text-[#333]":W?"text-white":"text-[#333]"}`,strokeWidth:2.5})})}),r.jsx("button",{onClick:()=>{Un(!0),kt(!1)},className:"p-0 bg-transparent border-none cursor-pointer",children:r.jsx("div",{className:`w-[50px] h-[50px] rounded-lg flex items-center justify-center transition-colors ${Z==="light-frosted"?"bg-white/20 hover:bg-white/30 active:bg-white/40":Z==="dark-frosted"?"bg-white/10 hover:bg-white/20 active:bg-white/30":W?"bg-[#1e1e1e] hover:bg-[#2d2d2d] active:bg-[#3d3d3d]":"bg-white hover:bg-[#f5f5f5] active:bg-[#e8e8e8]"}`,children:r.jsx("svg",{className:`w-[22px] h-[22px] ${Z==="light-frosted"?"text-[#333]":W?"text-white":"text-[#333]"}`,viewBox:"80 80 864 864",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",strokeWidth:"20",children:r.jsx("path",{d:"M604.928 416.682667a425.856 425.856 0 0 0 205.952-111.872V170.794667h-597.333333v134.016a425.813333 425.813333 0 0 0 205.952 111.872 106.666667 106.666667 0 0 1 185.429333 0z m8.874667 85.333333a106.709333 106.709333 0 0 1-203.178667 0 509.482667 509.482667 0 0 1-197.12-85.973333v437.418666h597.333333V416a509.525333 509.525333 0 0 1-197.034666 86.016zM170.88 85.504h682.666667a42.666667 42.666667 0 0 1 42.666666 42.666667v768a42.666667 42.666667 0 0 1-42.666666 42.666666h-682.666667a42.666667 42.666667 0 0 1-42.666667-42.666666v-768a42.666667 42.666667 0 0 1 42.666667-42.666667z"})})})})]})})}),r.jsx(ze,{children:Yt&&r.jsx(z_,{onClose:()=>sn(!1),onSelect:eo,theme:Z,isDarkMode:W})}),r.jsx(ze,{children:nn&&r.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[r.jsx(je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40",onClick:()=>Ft(!1)}),r.jsxs(je.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[320px] shadow-xl ${Z==="light-frosted"?"bg-white/20 backdrop-blur-xl border border-white/20":Z==="dark-frosted"?"bg-black/20 backdrop-blur-xl border border-white/10":W?"bg-[#1e1e1e]":"bg-white"}`,children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-4 ${W?"text-white":"text-black"}`,children:""}),r.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] text-center mb-4 ${W?"text-[#aaa]":"text-[#666]"}`,children:""}),r.jsx("input",{type:"text",value:bn,onChange:we=>un(we.target.value),placeholder:"",className:`w-full px-4 py-3 rounded-xl border-none outline-none font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] mb-6 ${Z==="light-frosted"?"bg-white/20 text-[#333] placeholder:text-[#999]":Z==="dark-frosted"?"bg-white/10 text-white placeholder:text-[#aaa]":W?"bg-[#2d2d2d] text-white placeholder:text-[#666]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999]"}`,autoFocus:!0,onKeyPress:we=>{we.key==="Enter"&&bn.trim()&&_r()}}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{Ft(!1),un("")},className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors disabled:opacity-50 ${Z==="light-frosted"?"bg-white/40 text-[#666] hover:bg-white/60":Z==="dark-frosted"?"bg-white/10 text-[#aaa] hover:bg-white/20":W?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),r.jsx("button",{onClick:_r,disabled:!bn.trim(),className:"flex-1 py-2.5 rounded-xl bg-[#7B9E7B] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity disabled:opacity-50",children:""})]})]})]})}),r.jsx(ze,{children:jn&&r.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[r.jsx(je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40",onClick:()=>Un(!1)}),r.jsxs(je.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[360px] shadow-xl ${Z==="light-frosted"?"bg-white/20 backdrop-blur-xl border border-white/20":Z==="dark-frosted"?"bg-black/20 backdrop-blur-xl border border-white/10":W?"bg-[#1e1e1e]":"bg-white"}`,children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-4 ${W?"text-white":"text-black"}`,children:""}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] mb-2 block ${W?"text-[#aaa]":"text-[#666]"}`,children:""}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:Nn,onChange:we=>{const Se=we.target.value;(Se===""||/^\d+$/.test(Se))&&Ps(Se)},placeholder:"0",className:`w-full px-4 py-3 pr-16 rounded-xl border-none outline-none font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] ${Z==="light-frosted"?"bg-white/20 text-[#333] placeholder:text-[#999]":Z==="dark-frosted"?"bg-white/10 text-white placeholder:text-[#aaa]":W?"bg-[#2d2d2d] text-white placeholder:text-[#666]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999]"}`,autoFocus:!0}),r.jsx("span",{className:`absolute right-4 top-1/2 -translate-y-1/2 font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] ${W?"text-[#aaa]":"text-[#999]"}`,children:""})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] mb-2 block ${W?"text-[#aaa]":"text-[#666]"}`,children:""}),r.jsx("input",{type:"text",value:sa,onChange:we=>ei(we.target.value),placeholder:"",maxLength:20,className:`w-full px-4 py-3 rounded-xl border-none outline-none font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] ${Z==="light-frosted"?"bg-white/50 text-[#333] placeholder:text-[#999]":Z==="dark-frosted"?"bg-white/10 text-white placeholder:text-[#aaa]":W?"bg-[#2d2d2d] text-white placeholder:text-[#666]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999]"}`})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{Un(!1),Ps(""),ei("")},className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors ${Z==="light-frosted"?"bg-white/40 text-[#666] hover:bg-white/60":W?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),r.jsx("button",{onClick:Xn,className:"flex-1 py-2.5 rounded-xl bg-[#ff6b6b] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity",children:""})]})]})]})}),r.jsx(ze,{children:R&&r.jsx("div",{className:"fixed inset-0 z-[70]",onClick:()=>{fe(!1),J(null)},children:r.jsxs(je.div,{initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:10},transition:{type:"spring",stiffness:400,damping:30},className:`absolute rounded-lg shadow-lg py-1 min-w-[120px] ${Z==="light-frosted"?"bg-white/80 backdrop-blur-xl border border-white/20":Z==="dark-frosted"?"bg-black/80 backdrop-blur-xl border border-white/10":"bg-white"}`,style:{left:Math.min(X.x,window.innerWidth-140),top:Math.min(X.y,window.innerHeight-200)},onClick:we=>we.stopPropagation(),children:[te?.senderId!=="system"&&r.jsxs("button",{onClick:ra,className:`w-full px-4 py-2.5 flex items-center gap-3 transition-colors ${Z==="light-frosted"?"hover:bg-white/40":Z==="dark-frosted"?"hover:bg-white/10":"hover:bg-[#f5f5f5]"}`,children:[r.jsx(qj,{className:`w-4 h-4 ${Z==="dark-frosted"?"text-[#aaa]":"text-[#666]"}`}),r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] ${Z==="dark-frosted"?"text-white":"text-[#333]"}`,children:""})]}),te?.senderId!=="system"&&r.jsxs("button",{onClick:tc,className:`w-full px-4 py-2.5 flex items-center gap-3 transition-colors ${Z==="light-frosted"?"hover:bg-white/40":Z==="dark-frosted"?"hover:bg-white/10":"hover:bg-[#f5f5f5]"}`,children:[r.jsx(qN,{className:`w-4 h-4 ${Z==="dark-frosted"?"text-[#aaa]":"text-[#666]"}`}),r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] ${Z==="dark-frosted"?"text-white":"text-[#333]"}`,children:""})]}),te?.senderId!=="system"&&r.jsxs("button",{onClick:no,className:`w-full px-4 py-2.5 flex items-center gap-3 transition-colors ${Z==="light-frosted"?"hover:bg-white/40":Z==="dark-frosted"?"hover:bg-white/10":"hover:bg-[#f5f5f5]"}`,children:[r.jsx($N,{className:`w-4 h-4 ${Z==="dark-frosted"?"text-[#aaa]":"text-[#666]"}`}),r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] ${Z==="dark-frosted"?"text-white":"text-[#333]"}`,children:""})]}),r.jsxs("button",{onClick:aa,className:`w-full px-4 py-2.5 flex items-center gap-3 transition-colors ${Z==="light-frosted"?"hover:bg-white/40":Z==="dark-frosted"?"hover:bg-white/10":"hover:bg-[#f5f5f5]"}`,children:[r.jsx(Dt,{className:`w-4 h-4 ${Z==="dark-frosted"?"text-[#aaa]":"text-[#666]"}`}),r.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] ${Z==="dark-frosted"?"text-white":"text-[#333]"}`,children:""})]}),r.jsxs("button",{onClick:Dr,className:`w-full px-4 py-2.5 flex items-center gap-3 transition-colors ${Z==="light-frosted"?"hover:bg-white/40":Z==="dark-frosted"?"hover:bg-white/10":"hover:bg-[#f5f5f5]"}`,children:[r.jsx(Hn,{className:"w-4 h-4 text-red-500"}),r.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] text-red-500",children:""})]})]})})}),r.jsx(ze,{children:ye&&te&&r.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[r.jsx(je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40",onClick:nr}),r.jsxs(je.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[360px] shadow-xl ${Z==="light-frosted"?"bg-white/80 backdrop-blur-xl border border-white/20":W?"bg-[#1e1e1e]":"bg-white"}`,children:[r.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-4 ${W?"text-white":"text-black"}`,children:""}),r.jsx("textarea",{value:le,onChange:we=>ke(we.target.value),className:`w-full px-4 py-3 rounded-xl border-none outline-none font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] resize-none mb-6 transition-colors ${Z==="light-frosted"?"bg-white/40 text-[#333] placeholder:text-[#999] focus:bg-white/60":W?"bg-[#2d2d2d] text-white placeholder:text-[#666] focus:bg-[#3d3d3d]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999] focus:bg-[#ebebeb]"}`,rows:4,autoFocus:!0,placeholder:""}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:nr,className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors ${Z==="light-frosted"?"bg-white/40 text-[#666] hover:bg-white/60":W?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),r.jsx("button",{onClick:si,className:"flex-1 py-2.5 rounded-xl bg-[#7B9E7B] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity",children:""})]})]})]})}),r.jsx(ze,{children:at.show&&r.jsx(je.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},transition:{type:"spring",stiffness:400,damping:30},className:"fixed top-16 left-1/2 -translate-x-1/2 z-[80] px-4 w-full max-w-[90vw]",children:r.jsx("div",{className:"bg-[#ff3b30] rounded-[12px] px-5 py-4 shadow-lg max-w-md mx-auto max-h-[60vh] overflow-y-auto",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-white/20 flex items-center justify-center mt-0.5",children:r.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] text-white mb-1",children:""}),r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] text-white/90 leading-relaxed break-words whitespace-pre-wrap",children:at.message})]})]})})})}),r.jsx(ze,{children:fn&&fn.redPacket&&r.jsxs("div",{className:"fixed inset-0 z-[1300] flex items-center justify-center",children:[r.jsx(je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},style:{backgroundColor:"rgba(0,0,0,0.5)"},className:"absolute inset-0",onClick:()=>Er(null)}),r.jsxs(je.div,{initial:{scale:.9,opacity:0,y:10},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"bg-[#ea5e4f] w-[320px] rounded-[8px] overflow-hidden relative shadow-2xl z-10",onClick:we=>we.stopPropagation(),children:[r.jsx("button",{onClick:()=>Er(null),className:"absolute top-3 left-3 z-10 text-white/70 hover:text-white active:opacity-50 transition-colors",children:r.jsx(ht,{size:20})}),r.jsxs("div",{className:"pt-12 pb-8 px-6 flex flex-col items-center text-white relative",children:[r.jsx("div",{className:"absolute top-[-100px] w-[500px] h-[300px] bg-[#d95345] rounded-[50%] -z-0"}),r.jsx("div",{className:"w-16 h-16 rounded-full border-2 border-[#fcdb9a] bg-white p-0.5 mb-3 z-10 shadow-md",children:r.jsx("div",{className:"w-full h-full rounded-full overflow-hidden bg-gray-100",children:fn.senderId==="user"?y?r.jsx("img",{src:y,alt:"User",className:"w-full h-full object-cover"}):r.jsx(is,{className:"w-full h-full p-3 text-gray-400"}):C?r.jsx("img",{src:C,alt:"Character",className:"w-full h-full object-cover"}):r.jsx(is,{className:"w-full h-full p-3 text-gray-400"})})}),r.jsxs("h3",{className:"text-[16px] font-medium mb-1 tracking-wide z-10",children:[fn.senderName,""]}),r.jsx("p",{className:"text-[14px] opacity-80 mb-12 tracking-wide z-10",children:fn.redPacket.blessing}),r.jsxs("div",{className:"z-10 flex flex-col items-center",children:[r.jsxs("div",{className:"text-[48px] font-bold leading-none tracking-tighter text-[#fcdb9a] mb-3 flex items-baseline gap-1",children:[r.jsx("span",{children:fn.redPacket.amount.toLocaleString()}),r.jsx("span",{className:"text-[14px] font-normal tracking-normal opacity-80",children:""})]}),r.jsx("div",{className:"text-[12px] text-[#fcdb9a]/80 tracking-wide flex items-center gap-1",children:r.jsx("span",{children:fn.senderId==="user"?fn.redPacket.opened?"":"":""})})]})]}),r.jsxs("div",{className:"bg-white px-4 py-4 min-h-[80px]",children:[r.jsx("div",{className:"border-b border-gray-100 pb-2 mb-2",children:r.jsxs("p",{className:"text-[12px] text-gray-400 tracking-wide",children:["1",fn.redPacket.amount,""]})}),fn.redPacket.opened||fn.senderId!=="user"?r.jsxs("div",{className:"flex items-center justify-between py-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 overflow-hidden flex-shrink-0",children:fn.senderId==="user"?C?r.jsx("img",{src:C,alt:"Receiver",className:"w-full h-full object-cover"}):r.jsx(is,{className:"w-full h-full p-2 text-gray-400"}):y?r.jsx("img",{src:y,alt:"Receiver",className:"w-full h-full object-cover"}):r.jsx(is,{className:"w-full h-full p-2 text-gray-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[14px] text-[#333] font-medium leading-tight",children:fn.senderId==="user"?D:T}),r.jsx("p",{className:"text-[12px] text-gray-400 mt-0.5",children:Wn(fn.timestamp)})]})]}),r.jsx("div",{className:"text-right",children:r.jsxs("p",{className:"text-[14px] text-[#333] font-medium",children:[fn.redPacket.amount.toLocaleString()," "]})})]}):r.jsx("div",{className:"py-8 text-center text-gray-400 text-[13px]",children:"..."})]})]})]})}),r.jsx(ze,{children:B&&r.jsx(R_,{characterId:e,characterName:n,onClose:vt,onUpdate:()=>{},onDelete:s},"chat-settings")})]})}const f8={initial:{x:"100%"},animate:{x:0},exit:{x:"100%",zIndex:61}};function h8({onClose:e,initialChatId:n,onChatChange:s}){const[i,o]=N.useState(n||null),[l,c]=N.useState(""),[u,h]=N.useState(0),[g,p]=N.useState(()=>Pe.chatSettings?.darkMode||!1);N.useEffect(()=>{const b=()=>{p(Pe.chatSettings?.darkMode||!1)};return window.addEventListener("chat-settings-updated",b),()=>window.removeEventListener("chat-settings-updated",b)},[]),N.useEffect(()=>{if(n){o(n);const b=Wu(n,"");c(b)}},[n]);const f=(b,y)=>{o(b),c(y),s?.(b)},m=()=>{o(null),c(""),h(b=>b+1),s?.(null)};return r.jsxs("div",{className:`relative w-full h-full ${g?"bg-[#121212]":"bg-white"} overflow-hidden`,children:[r.jsx("div",{className:"absolute inset-0 w-full h-full",children:r.jsx(S_,{onClose:e,onOpenChat:f},u)}),r.jsx(ze,{children:i&&r.jsx(je.div,{variants:f8,initial:"initial",animate:"animate",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:`absolute inset-0 z-[60] w-full h-full ${g?"bg-[#121212]":"bg-white"}`,children:r.jsx(u8,{characterId:i,characterName:l,onClose:m})},"chat")})]})}const gg={shareEnabled:!1,shareScope:"all",shareCharacterId:""};function p8({onClose:e,onNavigate:n}){const[s,i]=N.useState(!1),[o,l]=N.useState(!1),[c,u]=N.useState(!1),[h,g]=N.useState(gg),[p,f]=N.useState([]),[m,b]=N.useState(!1);N.useEffect(()=>{y(),v()},[]);const y=async()=>{try{const w=await he.get(re.HEALTH,"health_settings");w&&g({...gg,...w})}catch(w){console.error("Failed to load health settings",w)}},v=async()=>{try{const w=await he.get(re.CHARACTERS,"characters");w&&f(w)}catch(w){console.error("Failed to load characters",w)}},C=async()=>{try{await he.set(re.HEALTH,"health_settings",h),i(!1),l(!0),setTimeout(()=>l(!1),2e3)}catch{u(!0),setTimeout(()=>u(!1),2e3)}};return r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10",children:[r.jsx("button",{onClick:e,className:"w-10 h-10 bg-white/40 backdrop-blur-md border border-white/40 rounded-2xl flex items-center justify-center text-[#6B7C93] transition-transform active:scale-90 active:bg-white/60",children:r.jsx($n,{className:"w-5 h-5",strokeWidth:2.5})}),r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("span",{className:"text-[11px] font-bold text-[#9FA8DA] tracking-[0.2em] uppercase mb-0.5",children:"Health Care"}),r.jsx("h1",{className:"text-lg font-black text-[#5C6B7F] tracking-wide",children:""})]}),r.jsx("button",{onClick:()=>i(!0),className:"w-10 h-10 bg-white/40 backdrop-blur-md border border-white/40 rounded-2xl flex items-center justify-center text-[#6B7C93] transition-transform active:scale-90 active:bg-white/60",children:r.jsx(gb,{className:"w-5 h-5",strokeWidth:2.5})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[r.jsxs("div",{className:"text-center mb-8 relative",children:[r.jsx("div",{className:"inline-flex items-center justify-center p-4 rounded-3xl bg-white/30 backdrop-blur-sm border border-white/40 mb-4",children:r.jsx(If,{className:"w-8 h-8 text-[#88B04B]"})}),r.jsxs("p",{className:"text-sm text-[#7D8CA3] font-medium leading-relaxed max-w-[280px] mx-auto",children:["",r.jsx("br",{}),""]})]}),r.jsxs("div",{className:"grid gap-5",children:[r.jsxs("button",{onClick:()=>n("sleep"),className:"group relative bg-white/40 backdrop-blur-md border border-white/50 p-6 rounded-[2rem] text-left transition-transform active:scale-[0.96] overflow-hidden",children:[r.jsx("div",{className:"absolute top-[-20%] right-[-10%] w-32 h-32 bg-[#E6E6FA] rounded-full filter blur-[40px] opacity-60"}),r.jsxs("div",{className:"relative z-10 flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"w-12 h-12 bg-[#E6E6FA] text-[#6A5ACD] flex items-center justify-center rounded-2xl mb-4",children:r.jsx(mb,{className:"w-6 h-6 fill-current"})}),r.jsx("h3",{className:"text-xl font-black text-[#5C6B7F] mb-1",children:""}),r.jsxs("p",{className:"text-xs text-[#8E9CB3] font-medium",children:["",r.jsx("br",{}),""]})]}),r.jsx("div",{className:"w-8 h-8 rounded-full bg-white/40 flex items-center justify-center text-[#B39EB5]",children:r.jsx($n,{className:"w-5 h-5 rotate-180"})})]})]}),r.jsxs("button",{onClick:()=>n("cycle"),className:"group relative bg-white/40 backdrop-blur-md border border-white/50 p-6 rounded-[2rem] text-left transition-transform active:scale-[0.96] overflow-hidden",children:[r.jsx("div",{className:"absolute top-[-20%] right-[-10%] w-32 h-32 bg-[#FFD1DC] rounded-full filter blur-[40px] opacity-60"}),r.jsxs("div",{className:"relative z-10 flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"w-12 h-12 bg-[#FFD1DC] text-[#E57373] flex items-center justify-center rounded-2xl mb-4",children:r.jsx(fb,{className:"w-6 h-6"})}),r.jsx("h3",{className:"text-xl font-black text-[#5C6B7F] mb-1",children:""}),r.jsxs("p",{className:"text-xs text-[#8E9CB3] font-medium",children:["",r.jsx("br",{}),""]})]}),r.jsx("div",{className:"w-8 h-8 rounded-full bg-white/40 flex items-center justify-center text-[#FFB7B2]",children:r.jsx($n,{className:"w-5 h-5 rotate-180"})})]})]}),r.jsxs("button",{onClick:()=>n("diagnosis"),className:"group relative bg-white/40 backdrop-blur-md border border-white/50 p-6 rounded-[2rem] text-left transition-transform active:scale-[0.96] overflow-hidden",children:[r.jsx("div",{className:"absolute top-[-20%] right-[-10%] w-32 h-32 bg-[#C1E1C1] rounded-full filter blur-[40px] opacity-60"}),r.jsxs("div",{className:"relative z-10 flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"w-12 h-12 bg-[#C1E1C1] text-[#6B8E23] flex items-center justify-center rounded-2xl mb-4",children:r.jsx(xb,{className:"w-6 h-6"})}),r.jsx("h3",{className:"text-xl font-black text-[#5C6B7F] mb-1",children:""}),r.jsxs("p",{className:"text-xs text-[#8E9CB3] font-medium",children:["",r.jsx("br",{}),""]})]}),r.jsx("div",{className:"w-8 h-8 rounded-full bg-white/40 flex items-center justify-center text-[#8FBC8F]",children:r.jsx($n,{className:"w-5 h-5 rotate-180"})})]})]})]})]}),r.jsx(ze,{children:s&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6",children:[r.jsx(je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>i(!1),className:"absolute inset-0 bg-[#5C6B7F]/20 backdrop-blur-sm"}),r.jsxs(je.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:300,damping:25},className:"bg-[#FDFBF7]/95 backdrop-blur-xl w-full max-w-[320px] rounded-[2rem] border border-white/50 shadow-md relative z-10",children:[r.jsxs("div",{className:"bg-white/40 border-b border-white/50 p-6 flex justify-between items-center rounded-t-[2rem]",children:[r.jsx("span",{className:"text-lg font-black tracking-wide text-[#5C6B7F]",children:""}),r.jsx("button",{onClick:()=>i(!1),className:"bg-white/40 p-1 rounded-full text-[#7D8CA3] active:bg-white/60 transition-colors",children:r.jsx(ht,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-bold text-[#5C6B7F]",children:""}),r.jsx("p",{className:"text-[10px] text-[#9FA8DA] mt-1",children:""})]}),r.jsx("button",{onClick:()=>g({...h,shareEnabled:!h.shareEnabled}),className:`w-12 h-7 rounded-full transition-colors relative ${h.shareEnabled?"bg-[#AEC6CF]":"bg-gray-200"}`,children:r.jsx(je.div,{layout:!0,className:"absolute top-1 left-1 w-5 h-5 bg-white rounded-full shadow-sm",animate:{x:h.shareEnabled?20:0},transition:{type:"spring",stiffness:500,damping:30}})})]}),r.jsx(ze,{children:h.shareEnabled&&r.jsxs(je.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4 pt-4 border-t border-[#7D8CA3]/10 overflow-hidden",children:[r.jsx("label",{className:"text-xs font-bold text-[#7D8CA3] uppercase tracking-wider block mb-2",children:""}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("button",{onClick:()=>g({...h,shareScope:"all"}),className:`p-3 rounded-2xl border flex flex-col items-center gap-2 transition-all ${h.shareScope==="all"?"bg-[#AEC6CF]/10 border-[#AEC6CF] text-[#5C6B7F]":"bg-white/40 border-transparent text-[#9FA8DA]"}`,children:[r.jsx(Of,{className:"w-5 h-5"}),r.jsx("span",{className:"text-xs font-bold",children:""})]}),r.jsxs("button",{onClick:()=>g({...h,shareScope:"specific"}),className:`p-3 rounded-2xl border flex flex-col items-center gap-2 transition-all ${h.shareScope==="specific"?"bg-[#AEC6CF]/10 border-[#AEC6CF] text-[#5C6B7F]":"bg-white/40 border-transparent text-[#9FA8DA]"}`,children:[r.jsx(is,{className:"w-5 h-5"}),r.jsx("span",{className:"text-xs font-bold",children:""})]})]}),h.shareScope==="specific"&&r.jsxs("div",{className:"relative mt-2",children:[r.jsxs("button",{onClick:()=>b(!m),className:"w-full bg-white/50 border border-white/60 px-4 py-3 rounded-2xl text-xs font-bold text-[#5C6B7F] flex items-center justify-between active:bg-white/70 transition-colors",children:[r.jsx("div",{className:"flex items-center gap-2 pl-1",children:r.jsx("span",{children:p.find(w=>w.id===h.shareCharacterId)?.name||""})}),r.jsx(ta,{className:`w-4 h-4 transition-transform ${m?"rotate-90":""}`})]}),r.jsx(ze,{children:m&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>b(!1)}),r.jsxs(je.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},className:"absolute top-full left-0 right-0 mt-2 bg-white/90 backdrop-blur-xl border border-white/60 rounded-2xl shadow-lg z-20 max-h-48 overflow-y-auto p-1",children:[p.length===0&&r.jsx("div",{className:"p-3 text-center text-[10px] text-[#9FA8DA]",children:""}),p.map(w=>r.jsx("button",{onClick:()=>{g({...h,shareCharacterId:w.id}),b(!1)},className:`w-full text-left px-4 py-3 rounded-xl text-xs font-bold flex items-center gap-2 mb-1 ${h.shareCharacterId===w.id?"bg-[#AEC6CF]/20 text-[#5C6B7F]":"hover:bg-black/5 text-[#7D8CA3]"}`,children:w.name},w.id))]})]})})]})]})}),r.jsxs("button",{onClick:C,className:"w-full bg-[#AEC6CF] text-white py-3.5 rounded-2xl font-bold text-xs uppercase tracking-widest shadow-md shadow-[#AEC6CF]/30 active:scale-[0.98] transition-transform flex items-center justify-center gap-2 mt-4",children:[r.jsx(Dt,{className:"w-4 h-4"}),""]})]})]})]})}),r.jsx(ze,{children:o&&r.jsx("div",{className:"fixed top-[90px] inset-x-0 z-[100] flex justify-center pointer-events-none",children:r.jsxs(je.div,{initial:{scale:.9,opacity:0,y:-10},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},className:"mx-auto w-fit flex items-center gap-2 px-4 py-3 pointer-events-auto",style:{background:"rgba(253, 251, 247, 0.85)",backdropFilter:"blur(12px)",border:"1px solid rgba(255, 255, 255, 0.6)",borderRadius:"20px",color:"#5C6B7F",boxShadow:"0 10px 40px -10px rgba(92, 107, 127, 0.15)",fontSize:"13px",fontWeight:"bold"},children:[r.jsx("div",{className:"w-5 h-5 rounded-full bg-[#AEC6CF] flex items-center justify-center text-white",children:r.jsx(Dt,{className:"w-3 h-3",strokeWidth:3})}),r.jsx("span",{children:""})]})})}),r.jsx(ze,{children:c&&r.jsx("div",{className:"fixed top-[90px] inset-x-0 z-[100] flex justify-center pointer-events-none",children:r.jsxs(je.div,{initial:{scale:.9,opacity:0,y:-10},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},className:"mx-auto w-fit flex items-center gap-2 px-4 py-3 pointer-events-auto",style:{background:"rgba(253, 251, 247, 0.85)",backdropFilter:"blur(12px)",border:"1px solid rgba(255, 255, 255, 0.6)",borderRadius:"20px",color:"#5C6B7F",boxShadow:"0 10px 40px -10px rgba(92, 107, 127, 0.15)",fontSize:"13px",fontWeight:"bold"},children:[r.jsx("div",{className:"w-5 h-5 rounded-full bg-[#E57373] flex items-center justify-center text-white",children:r.jsx(ht,{className:"w-3 h-3",strokeWidth:3})}),r.jsx("span",{children:""})]})})})]})}function m8({onBack:e}){const[n,s]=N.useState([]),[i,o]=N.useState(""),[l,c]=N.useState(""),[u,h]=N.useState("good"),[g,p]=N.useState(null),f=(C,w)=>{p({show:!0,type:C,message:w}),setTimeout(()=>p(null),2e3)};N.useEffect(()=>{m()},[]);const m=async()=>{try{const C=await he.get(re.HEALTH,"sleep_logs");if(C&&C.length>0){const F=new Date().toDateString(),j=C.find(T=>new Date(T.endTime).toDateString()===F);if(j){s([j]);const T=new Date(j.startTime),z=new Date(j.endTime),B=T.getHours().toString().padStart(2,"0"),U=T.getMinutes().toString().padStart(2,"0");o(`${B}:${U}`);const D=z.getHours().toString().padStart(2,"0"),A=z.getMinutes().toString().padStart(2,"0");c(`${D}:${A}`),h(j.quality),(C.length>1||!C.includes(j))&&await he.set(re.HEALTH,"sleep_logs",[j])}else s([]),await he.set(re.HEALTH,"sleep_logs",[])}}catch(C){console.error("Failed to load sleep logs",C)}},b=(C,w)=>{const F=C.replace(/\D/g,"");if(F.length<=4)if(F.length>=3){const j=F.slice(0,2),T=F.slice(2);if(parseInt(j)>23||parseInt(T)>59)return;w(`${j}:${T}`)}else w(F)},y=async()=>{if(i.length!==5||l.length!==5){f("error"," ( 23:00)");return}const C=new Date;C.setSeconds(0),C.setMilliseconds(0);const[w,F]=l.split(":").map(Number),j=new Date(C);j.setHours(w,F,0,0);const[T,z]=i.split(":").map(Number),B=new Date(C);B.setHours(T,z,0,0),B>j&&B.setDate(B.getDate()-1);const U={id:Date.now().toString(),startTime:B.toISOString(),endTime:j.toISOString(),quality:u,createdAt:new Date().toISOString()};try{const D=[U];await he.set(re.HEALTH,"sleep_logs",D),s(D),f("success","")}catch{f("error","")}},v=async()=>{if(confirm(""))try{await he.set(re.HEALTH,"sleep_logs",[]),s([]),o(""),c(""),h("good"),f("success","")}catch{f("error","")}};return r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10",children:[r.jsx("button",{onClick:e,className:"w-10 h-10 bg-white/40 backdrop-blur-md border border-white/40 rounded-2xl flex items-center justify-center text-[#6B7C93] transition-transform active:scale-90 active:bg-white/60",children:r.jsx($n,{className:"w-5 h-5",strokeWidth:2.5})}),r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("span",{className:"text-[11px] font-bold text-[#9FA8DA] tracking-[0.2em] uppercase mb-0.5",children:"Sleep Log"}),r.jsx("h1",{className:"text-lg font-black text-[#5C6B7F] tracking-wide",children:""})]}),r.jsx("div",{className:"w-10"})," "]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:r.jsxs("div",{className:"bg-white/60 backdrop-blur-md border border-white/60 p-6 rounded-[2rem] shadow-sm",children:[r.jsxs("h3",{className:"text-xs font-bold text-[#9FA8DA] uppercase tracking-widest mb-6 flex items-center gap-2",children:[r.jsx(Ou,{className:"w-4 h-4"})," "]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-[10px] font-bold text-[#7D8CA3] uppercase tracking-wider pl-1",children:" (HH:MM)"}),r.jsx("input",{type:"tel",placeholder:"2300",value:i,onChange:C=>b(C.target.value,o),maxLength:5,className:"w-full bg-white/50 border border-white/60 text-center py-4 rounded-2xl text-lg font-mono font-bold text-[#5C6B7F] placeholder:text-[#D1D5DB] focus:border-[#AEC6CF] focus:outline-none focus:ring-2 focus:ring-[#AEC6CF]/20"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-[10px] font-bold text-[#7D8CA3] uppercase tracking-wider pl-1",children:" (HH:MM)"}),r.jsx("input",{type:"tel",placeholder:"0730",value:l,onChange:C=>b(C.target.value,c),maxLength:5,className:"w-full bg-white/50 border border-white/60 text-center py-4 rounded-2xl text-lg font-mono font-bold text-[#5C6B7F] placeholder:text-[#D1D5DB] focus:border-[#AEC6CF] focus:outline-none focus:ring-2 focus:ring-[#AEC6CF]/20"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-[10px] font-bold text-[#7D8CA3] uppercase tracking-wider pl-1",children:""}),r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsxs("button",{type:"button",onClick:()=>h("good"),className:`py-3 rounded-2xl flex flex-col items-center gap-1 transition-all active:scale-95 ${u==="good"?"bg-[#E0F2F1] text-[#4DB6AC] shadow-inner ring-1 ring-[#4DB6AC]/20":"bg-white/40 text-[#B0BEC5] hover:bg-white/60"}`,children:[r.jsx(I4,{className:"w-5 h-5"}),r.jsx("span",{className:"text-[10px] font-bold",children:""})]}),r.jsxs("button",{type:"button",onClick:()=>h("average"),className:`py-3 rounded-2xl flex flex-col items-center gap-1 transition-all active:scale-95 ${u==="average"?"bg-[#FFF3E0] text-[#FFB74D] shadow-inner ring-1 ring-[#FFB74D]/20":"bg-white/40 text-[#B0BEC5] hover:bg-white/60"}`,children:[r.jsx(PN,{className:"w-5 h-5"}),r.jsx("span",{className:"text-[10px] font-bold",children:""})]}),r.jsxs("button",{type:"button",onClick:()=>h("poor"),className:`py-3 rounded-2xl flex flex-col items-center gap-1 transition-all active:scale-95 ${u==="poor"?"bg-[#FFEBEE] text-[#E57373] shadow-inner ring-1 ring-[#E57373]/20":"bg-white/40 text-[#B0BEC5] hover:bg-white/60"}`,children:[r.jsx(F4,{className:"w-5 h-5"}),r.jsx("span",{className:"text-[10px] font-bold",children:""})]})]})]}),r.jsxs("button",{onClick:y,className:"w-full bg-[#AEC6CF] text-white py-4 font-bold text-sm tracking-widest uppercase rounded-2xl shadow-md shadow-[#AEC6CF]/30 active:scale-[0.98] transition-transform flex items-center justify-center gap-2",children:[r.jsx(Dt,{className:"w-5 h-5"}),n.length>0?"":""]}),n.length>0&&r.jsxs("button",{onClick:v,className:"w-full bg-[#FFEBEE] text-[#E57373] py-4 font-bold text-sm tracking-widest uppercase rounded-2xl shadow-sm active:scale-[0.98] transition-transform flex items-center justify-center gap-2",children:[r.jsx(Hn,{className:"w-5 h-5"}),""]})]})]})}),r.jsx(ze,{children:g&&g.show&&r.jsx("div",{className:"fixed top-[90px] inset-x-0 z-[100] flex justify-center pointer-events-none",children:r.jsxs(je.div,{initial:{scale:.9,opacity:0,y:-10},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},className:"mx-auto w-fit flex items-center gap-2 px-4 py-3 pointer-events-auto",style:{background:"rgba(253, 251, 247, 0.85)",backdropFilter:"blur(12px)",border:"1px solid rgba(255, 255, 255, 0.6)",borderRadius:"20px",color:"#5C6B7F",boxShadow:"0 10px 40px -10px rgba(92, 107, 127, 0.15)",fontSize:"13px",fontWeight:"bold"},children:[r.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-white ${g.type==="success"?"bg-[#AEC6CF]":"bg-[#E57373]"}`,children:g.type==="success"?r.jsx(Dt,{className:"w-3 h-3",strokeWidth:3}):r.jsx(ht,{className:"w-3 h-3",strokeWidth:3})}),r.jsx("span",{children:g.message})]})})})]})}const du={cycleLength:28,periodLength:5};function g8({onBack:e}){const[n,s]=N.useState([]),[i,o]=N.useState(du),[l,c]=N.useState(!1),[u,h]=N.useState(!1),[g,p]=N.useState(new Date),[f,m]=N.useState(""),[b,y]=N.useState(du),[v,C]=N.useState(null),w=(L,k)=>{C({show:!0,type:L,message:k}),setTimeout(()=>C(null),2e3)};N.useEffect(()=>{F()},[]);const F=async()=>{try{const L=await he.get(re.HEALTH,"cycle_logs"),k=await he.get(re.HEALTH,"cycle_settings");if(L&&s(L.sort(($,P)=>new Date(P.startDate).getTime()-new Date($.startDate).getTime())),k){const $={...du,...k};o($),y($)}}catch(L){console.error("Failed to load cycle data",L)}},j=()=>{m(new Date().toISOString().split("T")[0]),c(!0)},T=async()=>{if(!f)return;if(n.some($=>$.startDate===f)){w("error","");return}const k=[{id:Date.now().toString(),startDate:f},...n].sort(($,P)=>new Date(P.startDate).getTime()-new Date($.startDate).getTime());try{await he.set(re.HEALTH,"cycle_logs",k),s(k),c(!1),w("success","")}catch{w("error","")}},z=async L=>{if(confirm(""))try{const k=n.filter($=>$.id!==L);await he.set(re.HEALTH,"cycle_logs",k),s(k),w("success","")}catch{w("error","")}},B=async()=>{try{await he.set(re.HEALTH,"cycle_settings",b),o(b),h(!1),w("success","")}catch{w("error","")}},U=L=>new Date(L.getFullYear(),L.getMonth()+1,0).getDate(),D=L=>new Date(L.getFullYear(),L.getMonth(),1).getDay(),A=L=>{const k=new Date(g.getFullYear(),g.getMonth()+L,1);p(k)},H=L=>{const k=new Date(g.getFullYear(),g.getMonth(),L);k.getTime();for(const $ of n){const P=new Date($.startDate);P.setHours(12,0,0,0),k.setHours(12,0,0,0);const I=k.getTime()-P.getTime(),q=Math.round(I/(1e3*60*60*24));if(q>=0&&q<i.periodLength)return{type:"recorded",dayIndex:q}}if(n.length>0){const $=n[0],P=new Date($.startDate);P.setHours(12,0,0,0),k.setHours(12,0,0,0);const q=(k.getTime()-P.getTime())/(1e3*60*60*24);if(q<0)return null;const G=Math.floor(q/i.cycleLength),Q=M=>{if(M<=0)return!1;const O=new Date(P);O.setDate(P.getDate()+M*i.cycleLength);const ee=k.getTime()-O.getTime(),W=Math.round(ee/(1e3*60*60*24));return W>=0&&W<i.periodLength};if(Q(G)||Q(G+1))return{type:"predicted"}}return null},_=zb(n,i);return r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10",children:[r.jsx("button",{onClick:e,className:"w-10 h-10 bg-white/40 backdrop-blur-md border border-white/40 rounded-2xl flex items-center justify-center text-[#6B7C93] transition-transform active:scale-90 active:bg-white/60",children:r.jsx($n,{className:"w-5 h-5",strokeWidth:2.5})}),r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("span",{className:"text-[11px] font-bold text-[#9FA8DA] tracking-[0.2em] uppercase mb-0.5",children:"Cycle Log"}),r.jsx("h1",{className:"text-lg font-black text-[#5C6B7F] tracking-wide",children:""})]}),r.jsx("button",{onClick:()=>h(!0),className:"w-10 h-10 bg-white/40 backdrop-blur-md border border-white/40 rounded-2xl flex items-center justify-center text-[#6B7C93] transition-transform active:scale-90 active:bg-white/60",children:r.jsx(Kl,{className:"w-5 h-5",strokeWidth:2.5})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[r.jsxs("div",{className:"bg-white/40 backdrop-blur-md border border-white/50 p-6 rounded-[2rem]",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("button",{onClick:()=>A(-1),className:"p-2 text-[#7D8CA3] active:bg-white/40 rounded-xl transition-colors",children:r.jsx($n,{className:"w-5 h-5"})}),r.jsxs("h2",{className:"text-lg font-black text-[#5C6B7F]",children:[g.getFullYear()," ",g.getMonth()+1,""]}),r.jsx("button",{onClick:()=>A(1),className:"p-2 text-[#7D8CA3] active:bg-white/40 rounded-xl transition-colors",children:r.jsx(ta,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"grid grid-cols-7 mb-4",children:["","","","","","",""].map((L,k)=>r.jsx("div",{className:"text-center text-xs font-bold text-[#9FA8DA]",children:L},k))}),r.jsxs("div",{className:"grid grid-cols-7 gap-y-4",children:[Array.from({length:D(g)}).map((L,k)=>r.jsx("div",{},`empty-${k}`)),Array.from({length:U(g)}).map((L,k)=>{const $=k+1,P=H($),I=new Date().toDateString()===new Date(g.getFullYear(),g.getMonth(),$).toDateString();let q="",G="text-[#7D8CA3]";return P?.type==="recorded"?(q="bg-[#FFB7B2] shadow-sm",G="text-white font-bold"):P?.type==="predicted"?(q="bg-[#FFEBEE] border-2 border-dashed border-[#FFB7B2]",G="text-[#E57373] font-bold"):I&&(q="bg-white shadow-sm",G="text-[#5C6B7F] font-bold"),r.jsx("div",{className:"flex flex-col items-center justify-center relative",children:r.jsx("div",{className:`
                          w-8 h-8 flex items-center justify-center rounded-full text-sm font-medium transition-all
                          ${q} ${G}
                       `,children:$})},$)})]}),r.jsxs("div",{className:"flex justify-center gap-6 mt-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-[#FFB7B2]"}),r.jsx("span",{className:"text-[10px] text-[#7D8CA3]",children:""})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-[#FFEBEE] border border-dashed border-[#FFB7B2]"}),r.jsx("span",{className:"text-[10px] text-[#7D8CA3]",children:""})]})]})]}),r.jsxs("div",{className:"relative bg-gradient-to-br from-[#FFD1DC] to-[#FFB7B2] p-8 rounded-[2.5rem] text-center overflow-hidden shadow-md",children:[r.jsx("div",{className:"absolute top-[-20%] right-[-20%] w-48 h-48 bg-white/20 rounded-full blur-[40px] pointer-events-none"}),r.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-32 h-32 bg-[#E57373]/10 rounded-full blur-[30px] pointer-events-none mix-blend-overlay"}),r.jsxs("div",{className:"relative z-10",children:[r.jsx("div",{className:"w-16 h-16 mx-auto bg-white/30 backdrop-blur-sm rounded-full flex items-center justify-center mb-4 border border-white/40",children:r.jsx(fb,{className:"w-8 h-8 text-white drop-shadow-sm"})}),_.type==="none"?r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-black text-white mb-1 tracking-wide drop-shadow-sm",children:""}),r.jsx("p",{className:"text-xs text-white/80 font-medium",children:""})]}):_.type==="period"?r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-black text-white mb-1 tracking-wide drop-shadow-sm",children:_.message}),r.jsxs("p",{className:"text-xs text-white/90 font-bold bg-white/20 inline-block px-3 py-1 rounded-full backdrop-blur-sm",children:[" ",_.days," "]})]}):r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-bold text-white/70 uppercase tracking-widest mb-2",children:_.message}),r.jsxs("div",{className:"flex items-baseline justify-center gap-2 text-white drop-shadow-sm",children:[r.jsx("span",{className:"text-5xl font-black leading-none",children:_.days}),r.jsx("span",{className:"text-lg font-bold opacity-80",children:""})]})]}),r.jsx("button",{onClick:j,className:"mt-6 bg-white text-[#FFB7B2] px-6 py-2.5 rounded-2xl text-[10px] font-black uppercase tracking-widest active:scale-95 transition-transform shadow-sm",children:""})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-xs font-bold text-[#9FA8DA] uppercase tracking-widest mb-4 flex items-center gap-2 pl-2",children:[r.jsx(qs,{className:"w-4 h-4"})," "]}),r.jsx("div",{className:"space-y-3 pb-8",children:n.length===0?r.jsx("div",{className:"p-8 text-center bg-white/40 border-2 border-dashed border-[#E0E0E0] rounded-[1.5rem] text-xs text-[#9E9E9E]",children:""}):n.map(L=>r.jsxs("div",{className:"bg-white/40 backdrop-blur-sm border border-white/50 p-4 rounded-2xl flex items-center justify-between active:bg-white/60 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-2 h-10 bg-[#FFD1DC] rounded-full"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-base font-bold text-[#5C6B7F]",children:new Date(L.startDate).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"})}),r.jsx("div",{className:"text-[10px] text-[#FFB7B2] font-black uppercase tracking-wider bg-[#FFEBEE] px-2 py-0.5 rounded-md inline-block mt-1",children:""})]})]}),r.jsx("button",{onClick:()=>z(L.id),className:"w-10 h-10 rounded-xl flex items-center justify-center text-[#D6D3CC] active:bg-[#FFEBEE] active:text-[#E57373] transition-colors",children:r.jsx(Hn,{className:"w-5 h-5"})})]},L.id))})]})]}),r.jsx(ze,{children:l&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6",children:[r.jsx(je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>c(!1),className:"absolute inset-0 bg-[#5C6B7F]/20 backdrop-blur-sm"}),r.jsxs(je.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:300,damping:25},className:"bg-[#FDFBF7]/95 backdrop-blur-xl w-full max-w-[320px] rounded-[2rem] border border-white/50 shadow-md overflow-hidden relative z-10",children:[r.jsxs("div",{className:"bg-white/40 border-b border-white/50 p-6 flex justify-between items-center",children:[r.jsx("span",{className:"text-lg font-black tracking-wide text-[#5C6B7F]",children:""}),r.jsx("button",{onClick:()=>c(!1),className:"bg-white/40 p-1 rounded-full text-[#7D8CA3] active:bg-white/60 transition-colors",children:r.jsx(ht,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-8",children:[r.jsx("label",{className:"block text-xs font-bold text-[#9FA8DA] mb-4 uppercase tracking-wider text-center",children:""}),r.jsx("input",{type:"date",value:f,onChange:L=>m(L.target.value),className:"w-full bg-white/50 border border-white/60 px-4 py-4 rounded-2xl text-center font-mono font-bold text-[#5C6B7F] focus:border-[#FFB7B2] focus:outline-none focus:ring-2 focus:ring-[#FFB7B2]/20 mb-8"}),r.jsx("button",{onClick:T,className:"w-full bg-[#FFB7B2] text-white py-4 text-xs font-bold uppercase tracking-widest active:scale-95 transition-all rounded-2xl shadow-sm",children:""})]})]})]})}),r.jsx(ze,{children:u&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6",children:[r.jsx(je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>h(!1),className:"absolute inset-0 bg-[#5C6B7F]/20 backdrop-blur-sm"}),r.jsxs(je.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:300,damping:25},className:"bg-[#FDFBF7]/95 backdrop-blur-xl w-full max-w-[320px] rounded-[2rem] border border-white/50 shadow-md overflow-hidden relative z-10",children:[r.jsxs("div",{className:"bg-white/40 border-b border-white/50 p-6 flex justify-between items-center",children:[r.jsx("span",{className:"text-lg font-black tracking-wide text-[#5C6B7F]",children:""}),r.jsx("button",{onClick:()=>h(!1),className:"bg-white/40 p-1 rounded-full text-[#7D8CA3] active:bg-white/60 transition-colors",children:r.jsx(ht,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-8 space-y-8",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center justify-between text-xs font-bold text-[#7D8CA3] mb-3 uppercase tracking-wider",children:[r.jsx("span",{children:""}),r.jsxs("span",{className:"text-[#FFB7B2] bg-[#FFEBEE] px-2 py-1 rounded-md",children:[b.cycleLength,""]})]}),r.jsx("input",{type:"range",min:"20",max:"45",value:b.cycleLength,onChange:L=>y({...b,cycleLength:parseInt(L.target.value)}),className:"w-full accent-[#FFB7B2] h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center justify-between text-xs font-bold text-[#7D8CA3] mb-3 uppercase tracking-wider",children:[r.jsx("span",{children:""}),r.jsxs("span",{className:"text-[#FFB7B2] bg-[#FFEBEE] px-2 py-1 rounded-md",children:[b.periodLength,""]})]}),r.jsx("input",{type:"range",min:"2",max:"10",value:b.periodLength,onChange:L=>y({...b,periodLength:parseInt(L.target.value)}),className:"w-full accent-[#FFB7B2] h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),r.jsx("div",{className:"pt-2",children:r.jsxs("button",{onClick:B,className:"w-full bg-[#5C6B7F] text-white py-4 text-xs font-bold uppercase tracking-widest active:bg-[#4A5568] transition-colors flex items-center justify-center gap-2 rounded-2xl shadow-sm",children:[r.jsx(Xa,{className:"w-4 h-4"}),""]})})]})]})]})}),r.jsx(ze,{children:v&&v.show&&r.jsx("div",{className:"fixed top-[90px] inset-x-0 z-[100] flex justify-center pointer-events-none",children:r.jsxs(je.div,{initial:{scale:.9,opacity:0,y:-10},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},className:"mx-auto w-fit flex items-center gap-2 px-4 py-3 pointer-events-auto",style:{background:"rgba(253, 251, 247, 0.85)",backdropFilter:"blur(12px)",border:"1px solid rgba(255, 255, 255, 0.6)",borderRadius:"20px",color:"#5C6B7F",boxShadow:"0 10px 40px -10px rgba(92, 107, 127, 0.15)",fontSize:"13px",fontWeight:"bold"},children:[r.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-white ${v.type==="success"?"bg-[#FFB7B2]":"bg-[#E57373]"}`,children:v.type==="success"?r.jsx(Dt,{className:"w-3 h-3",strokeWidth:3}):r.jsx(ht,{className:"w-3 h-3",strokeWidth:3})}),r.jsx("span",{children:v.message})]})})})]})}function x8({onBack:e}){const[n,s]=N.useState([]),[i,o]=N.useState(!1),[l,c]=N.useState(null),[u,h]=N.useState(""),[g,p]=N.useState(""),[f,m]=N.useState("treating"),[b,y]=N.useState(""),[v,C]=N.useState(null),w=(A,H)=>{C({show:!0,type:A,message:H}),setTimeout(()=>C(null),2e3)};N.useEffect(()=>{F()},[]);const F=async()=>{try{const A=await he.get(re.HEALTH,"diagnosis_logs");A&&s(A.sort((H,Y)=>new Date(Y.startDate).getTime()-new Date(H.startDate).getTime()))}catch(A){console.error("Failed to load diagnosis logs",A)}},j=()=>{h(""),p(""),m("treating");const A=new Date().toISOString().split("T")[0];y(A),c(null)},T=()=>{j(),o(!0)},z=A=>{h(A.illnessName),p(A.symptoms),m(A.status),y(A.startDate),c(A),o(!0)},B=async()=>{if(!u.trim()){w("error","");return}if(!b){w("error","");return}try{let A=[...n];l?(A=A.map(H=>H.id===l.id?{...H,illnessName:u,symptoms:g,status:f,startDate:b,endDate:f==="recovered"&&!H.endDate?new Date().toISOString().split("T")[0]:f==="treating"?void 0:H.endDate}:H),w("success","")):(A=[{id:Date.now().toString(),illnessName:u,symptoms:g,status:f,startDate:b,createdAt:new Date().toISOString()},...A],w("success","")),await he.set(re.HEALTH,"diagnosis_logs",A),s(A.sort((H,Y)=>new Date(Y.startDate).getTime()-new Date(H.startDate).getTime())),o(!1),j()}catch{w("error","")}},U=async A=>{if(confirm(""))try{const H=n.filter(Y=>Y.id!==A);await he.set(re.HEALTH,"diagnosis_logs",H),s(H),w("success","")}catch{w("error","")}},D=A=>{const H=new Date(A);return`${H.getFullYear()}${H.getMonth()+1}${H.getDate()}`};return r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10",children:[r.jsx("button",{onClick:e,className:"w-10 h-10 bg-white/40 backdrop-blur-md border border-white/40 rounded-2xl flex items-center justify-center text-[#6B7C93] transition-transform active:scale-90 active:bg-white/60",children:r.jsx($n,{className:"w-5 h-5",strokeWidth:2.5})}),r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("span",{className:"text-[11px] font-bold text-[#9FA8DA] tracking-[0.2em] uppercase mb-0.5",children:"Medical Records"}),r.jsx("h1",{className:"text-lg font-black text-[#5C6B7F] tracking-wide",children:""})]}),r.jsx("button",{onClick:T,className:"w-10 h-10 bg-[#AEC6CF] text-white rounded-2xl flex items-center justify-center shadow-md shadow-[#AEC6CF]/30 transition-transform active:scale-90",children:r.jsx(Cr,{className:"w-5 h-5",strokeWidth:2.5})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:n.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-60",children:[r.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:r.jsx(xb,{className:"w-10 h-10 text-gray-300"})}),r.jsx("p",{className:"text-sm font-medium text-gray-400",children:""})]}):r.jsx("div",{className:"space-y-4",children:n.map(A=>r.jsxs("div",{onClick:()=>z(A),className:`group relative bg-white/40 backdrop-blur-md border border-white/50 p-5 rounded-[2rem] text-left transition-transform active:scale-[0.98] overflow-hidden ${A.status==="recovered"?"opacity-70 grayscale-[0.5]":""}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-black text-[#5C6B7F] mb-1",children:A.illnessName}),r.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-lg text-[10px] font-bold uppercase tracking-wider ${A.status==="treating"?"bg-[#FFEBEE] text-[#E57373]":"bg-[#E0F2F1] text-[#4DB6AC]"}`,children:A.status==="treating"?"":""})]}),r.jsx("button",{onClick:H=>{H.stopPropagation(),U(A.id)},className:"p-2 rounded-xl text-[#B0BEC5] hover:bg-red-50 hover:text-red-400 transition-colors",children:r.jsx(Hn,{className:"w-4 h-4"})})]}),A.symptoms&&r.jsx("p",{className:"text-xs text-[#7D8CA3] mb-4 line-clamp-2 bg-white/30 p-3 rounded-xl",children:A.symptoms}),r.jsx("div",{className:"flex items-center gap-4 text-[10px] text-[#9FA8DA] font-bold tracking-wide",children:r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(qs,{className:"w-3 h-3"}),D(A.startDate)]})})]},A.id))})}),r.jsx(ze,{children:i&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center sm:p-6",children:[r.jsx(je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>o(!1),className:"absolute inset-0 bg-[#5C6B7F]/20 backdrop-blur-sm"}),r.jsxs(je.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",stiffness:300,damping:30},className:"bg-[#FDFBF7] w-full max-w-[400px] h-[85vh] sm:h-auto sm:rounded-[2.5rem] rounded-t-[2.5rem] border border-white/50 shadow-2xl flex flex-col relative z-10",children:[r.jsxs("div",{className:"p-6 pb-2 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-black text-[#5C6B7F]",children:l?"":""}),r.jsx("p",{className:"text-xs text-[#9FA8DA] mt-0.5",children:""})]}),r.jsx("button",{onClick:()=>o(!1),className:"w-8 h-8 rounded-full bg-black/5 flex items-center justify-center text-[#7D8CA3]",children:r.jsx(ht,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-[10px] font-bold text-[#7D8CA3] uppercase tracking-wider pl-1",children:""}),r.jsx("input",{type:"text",placeholder:"",value:u,onChange:A=>h(A.target.value),className:"w-full bg-white border border-[#E0E0E0] p-4 rounded-2xl text-sm font-bold text-[#5C6B7F] placeholder:text-[#D1D5DB] focus:border-[#AEC6CF] focus:outline-none focus:ring-2 focus:ring-[#AEC6CF]/20 transition-all"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-[10px] font-bold text-[#7D8CA3] uppercase tracking-wider pl-1",children:""}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"date",value:b,onChange:A=>y(A.target.value),className:"w-full bg-white border border-[#E0E0E0] p-4 rounded-2xl text-sm font-bold text-[#5C6B7F] placeholder:text-[#D1D5DB] focus:border-[#AEC6CF] focus:outline-none focus:ring-2 focus:ring-[#AEC6CF]/20 transition-all appearance-none"}),r.jsx(qs,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 text-[#B0BEC5] pointer-events-none"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-[10px] font-bold text-[#7D8CA3] uppercase tracking-wider pl-1",children:""}),r.jsx("textarea",{placeholder:"...",value:g,onChange:A=>p(A.target.value),rows:4,className:"w-full bg-white border border-[#E0E0E0] p-4 rounded-2xl text-sm font-medium text-[#5C6B7F] placeholder:text-[#D1D5DB] focus:border-[#AEC6CF] focus:outline-none focus:ring-2 focus:ring-[#AEC6CF]/20 transition-all resize-none"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-[10px] font-bold text-[#7D8CA3] uppercase tracking-wider pl-1",children:""}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("button",{type:"button",onClick:()=>m("treating"),className:`p-4 rounded-2xl flex items-center justify-center gap-2 transition-all active:scale-[0.98] ${f==="treating"?"bg-[#FFEBEE] text-[#E57373] ring-1 ring-[#E57373]/20 shadow-inner":"bg-white border border-[#E0E0E0] text-[#B0BEC5]"}`,children:[r.jsx(Rf,{className:"w-4 h-4"}),r.jsx("span",{className:"text-xs font-bold",children:""})]}),r.jsxs("button",{type:"button",onClick:()=>m("recovered"),className:`p-4 rounded-2xl flex items-center justify-center gap-2 transition-all active:scale-[0.98] ${f==="recovered"?"bg-[#E0F2F1] text-[#4DB6AC] ring-1 ring-[#4DB6AC]/20 shadow-inner":"bg-white border border-[#E0E0E0] text-[#B0BEC5]"}`,children:[r.jsx(Dt,{className:"w-4 h-4"}),r.jsx("span",{className:"text-xs font-bold",children:""})]})]})]})]}),r.jsx("div",{className:"p-6 border-t border-gray-100 bg-white/50 backdrop-blur-sm rounded-b-[2.5rem]",children:r.jsxs("button",{onClick:B,className:"w-full bg-[#AEC6CF] text-white py-4 rounded-2xl font-bold text-sm tracking-widest uppercase shadow-lg shadow-[#AEC6CF]/30 active:scale-[0.98] transition-transform flex items-center justify-center gap-2",children:[r.jsx(Dt,{className:"w-5 h-5"}),""]})})]})]})}),r.jsx(ze,{children:v&&v.show&&r.jsx("div",{className:"fixed top-[90px] inset-x-0 z-[100] flex justify-center pointer-events-none",children:r.jsxs(je.div,{initial:{scale:.9,opacity:0,y:-10},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},className:"mx-auto w-fit flex items-center gap-2 px-4 py-3 pointer-events-auto",style:{background:"rgba(253, 251, 247, 0.85)",backdropFilter:"blur(12px)",border:"1px solid rgba(255, 255, 255, 0.6)",borderRadius:"20px",color:"#5C6B7F",boxShadow:"0 10px 40px -10px rgba(92, 107, 127, 0.15)",fontSize:"13px",fontWeight:"bold"},children:[r.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-white ${v.type==="success"?"bg-[#8FBC8F]":"bg-[#E57373]"}`,children:v.type==="success"?r.jsx(Dt,{className:"w-3 h-3",strokeWidth:3}):r.jsx(ht,{className:"w-3 h-3",strokeWidth:3})}),r.jsx("span",{children:v.message})]})})})]})}function xg(){return r.jsxs("div",{className:"absolute inset-0 opacity-60 pointer-events-none overflow-hidden",children:[r.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[70%] h-[70%] bg-[#FFD1DC] rounded-full mix-blend-multiply filter blur-[90px]"}),r.jsx("div",{className:"absolute top-[10%] right-[-10%] w-[60%] h-[60%] bg-[#C1E1C1] rounded-full mix-blend-multiply filter blur-[90px]"}),r.jsx("div",{className:"absolute bottom-[-20%] left-[20%] w-[80%] h-[80%] bg-[#AEC6CF] rounded-full mix-blend-multiply filter blur-[90px]"}),r.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[60%] h-[60%] bg-[#E6E6FA] rounded-full mix-blend-multiply filter blur-[90px]"})]})}const bg={enter:e=>({x:e>0?"100%":"-25%",opacity:0}),center:{x:0,opacity:1},exit:e=>({x:e<0?"100%":"-25%",opacity:0})};function b8({onClose:e}){const[n,s]=N.useState("dashboard"),[i,o]=N.useState(0),l=N.useRef(!0);N.useEffect(()=>{const h=setTimeout(()=>{l.current=!1},500);return()=>clearTimeout(h)},[]);const c=h=>{o(1),s(h)},u=()=>{o(-1),s("dashboard")};return r.jsxs("div",{className:"fixed inset-0 z-50 bg-[#FDFBF7] font-['Source_Han_Sans_CN_VF',sans-serif] overflow-hidden",children:[r.jsx(xg,{}),r.jsx("div",{className:"relative z-10 h-full w-full",children:r.jsx(ze,{initial:!1,custom:i,children:n==="dashboard"?r.jsx(je.div,{custom:i,variants:bg,initial:l.current?"center":"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"absolute inset-0 w-full h-full",children:r.jsx(p8,{onClose:e,onNavigate:c})},"dashboard"):r.jsxs(je.div,{custom:i,variants:bg,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"absolute inset-0 w-full h-full bg-[#FDFBF7]",children:[r.jsx(xg,{}),r.jsxs("div",{className:"relative z-10 h-full",children:[n==="sleep"&&r.jsx(m8,{onBack:u}),n==="cycle"&&r.jsx(g8,{onBack:u}),n==="diagnosis"&&r.jsx(x8,{onBack:u})]})]},n)})})]})}function v8(){const[e,n]=N.useState([]),[s,i]=N.useState(""),[o,l]=N.useState(!1);N.useEffect(()=>{c()},[]);const c=async()=>{try{const f=await he.get(re.SCHEDULE,"todos");f&&n(f.sort((m,b)=>b.createdAt-m.createdAt))}catch(f){console.error("Failed to load todos:",f)}},u=async f=>{try{await he.set(re.SCHEDULE,"todos",f),n(f)}catch(m){console.error("Failed to save todos:",m)}},h=async()=>{if(!s.trim())return;const m=[{id:Date.now().toString(),text:s.trim(),completed:!1,createdAt:Date.now()},...e];await u(m),i(""),l(!1)},g=async f=>{const m=e.map(b=>b.id===f?{...b,completed:!b.completed}:b);await u(m)},p=async f=>{const m=e.filter(b=>b.id!==f);await u(m)};return r.jsxs("div",{className:"h-full flex flex-col p-4 overflow-y-auto custom-scrollbar",children:[r.jsxs("div",{className:"mb-6 ml-2 relative inline-block",children:[r.jsx("h2",{className:"text-2xl font-bold text-[#5A5A5A] relative z-10",children:"To-Do List"}),r.jsx("div",{className:"absolute bottom-1 left-0 w-full h-3 bg-[#FFE4E1] -rotate-2 z-0 opacity-70"})]}),r.jsxs("div",{className:"flex-1 space-y-3 pb-20",children:[r.jsx(ze,{initial:!1,children:e.map(f=>r.jsxs(je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,height:0,marginBottom:0},transition:{type:"spring",stiffness:400,damping:30},className:`group relative p-4 rounded-xl border-2 transition-all duration-200 active:scale-[0.99] ${f.completed?"bg-[#F0F0F0] border-transparent opacity-60":"bg-white border-[#F0F0F0] shadow-sm active:border-[#D4E0D6]"}`,children:[r.jsx("div",{className:"absolute -top-2 left-1/2 -translate-x-1/2 w-3 h-3 rounded-full bg-[#D4E0D6] border border-white shadow-sm z-10"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>g(f.id),className:`w-6 h-6 rounded-md border-2 flex items-center justify-center transition-all duration-200 active:scale-90 ${f.completed?"bg-[#8CAE8C] border-[#8CAE8C]":"border-[#D1D1D1] active:border-[#8CAE8C]"}`,children:f.completed&&r.jsx(Dt,{className:"w-4 h-4 text-white",strokeWidth:3})}),r.jsx("span",{className:`flex-1 text-[15px] font-medium leading-relaxed ${f.completed?"text-[#999] line-through decoration-2 decoration-[#999]/30":"text-[#5A5A5A]"}`,children:f.text}),r.jsx("button",{onClick:()=>p(f.id),className:"p-2 text-[#999] active:text-[#FF6B6B] active:scale-95 transition-colors duration-200",children:r.jsx(ht,{className:"w-5 h-5"})})]})]},f.id))}),e.length===0&&!o&&r.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-40",children:[r.jsx("div",{className:"w-20 h-20 border-4 border-dashed border-[#5A5A5A] rounded-full flex items-center justify-center mb-4",children:r.jsx(Dt,{className:"w-10 h-10 text-[#5A5A5A]"})}),r.jsx("p",{className:"font-bold text-[#5A5A5A]",children:""}),r.jsx("p",{className:"text-sm",children:""})]})]}),r.jsx("div",{className:"absolute bottom-6 right-6 left-6 z-20 pointer-events-none",children:r.jsx("div",{className:"pointer-events-auto",children:r.jsx(ze,{children:o?r.jsxs(je.div,{initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"bg-white p-2 rounded-2xl shadow-xl border-2 border-[#5A5A5A]/10 flex gap-2",children:[r.jsx("input",{type:"text",value:s,onChange:f=>i(f.target.value),placeholder:"...",autoFocus:!0,className:"flex-1 bg-transparent px-4 py-2 outline-none text-[#5A5A5A] placeholder:text-[#999]",onKeyDown:f=>f.key==="Enter"&&h()}),r.jsx("button",{onClick:h,className:"w-10 h-10 bg-[#5A5A5A] rounded-xl flex items-center justify-center text-white shadow-lg active:scale-90 transition-transform duration-200",children:r.jsx(Dt,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>l(!1),className:"w-10 h-10 bg-[#F5F5F5] rounded-xl flex items-center justify-center text-[#5A5A5A] active:scale-90 transition-transform duration-200",children:r.jsx(ht,{className:"w-5 h-5"})})]}):r.jsx("div",{className:"flex justify-end",children:r.jsx(je.button,{whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:20},onClick:()=>l(!0),className:"w-14 h-14 bg-[#5A5A5A] rounded-full shadow-lg shadow-[#5A5A5A]/30 flex items-center justify-center text-white",children:r.jsx(Cr,{className:"w-7 h-7"})})})})})})]})}const uu=["#FFD1DC","#D4E0D6","#CCE5FF","#FFF5BA","#E6E6FA"];function y8(){const[e,n]=N.useState(new Date),[s,i]=N.useState([]),[o,l]=N.useState(null),[c,u]=N.useState(!1),[h,g]=N.useState(null),[p,f]=N.useState(""),[m,b]=N.useState(!1),[y,v]=N.useState("09:00"),[C,w]=N.useState("10:00"),[F,j]=N.useState(""),[T,z]=N.useState(""),[B,U]=N.useState(uu[0]);N.useEffect(()=>{D();const M=new Date;l(L(M.getFullYear(),M.getMonth(),M.getDate()))},[]);const D=async()=>{const M=await he.get(re.SCHEDULE,"events");if(M){const O=new Date,ee=new Date(O.getFullYear(),O.getMonth(),O.getDate()),W=M.filter(V=>{const[Z,ue,ce]=V.date.split("-").map(Number);return new Date(Z,ue-1,ce)>=ee});W.length!==M.length?(await he.set(re.SCHEDULE,"events",W),i(W)):i(M)}},A=async M=>{await he.set(re.SCHEDULE,"events",M),i(M)},H=(M,O)=>new Date(M,O+1,0).getDate(),Y=(M,O)=>new Date(M,O,1).getDay(),_=M=>{const O=new Date(e.getFullYear(),e.getMonth()+M,1);n(O)},L=(M,O,ee)=>`${M}-${String(O+1).padStart(2,"0")}-${String(ee).padStart(2,"0")}`,k=M=>{const O=L(e.getFullYear(),e.getMonth(),M);l(O)},$=()=>{g(null),f(""),z(""),j(""),b(!1),v("09:00"),w("10:00"),U(uu[0]),u(!0)},P=M=>{g(M.id),f(M.title),z(M.description||""),j(M.location||""),b(M.isAllDay),v(M.startTime||"09:00"),w(M.endTime||"10:00"),U(M.color),u(!0)},I=async()=>{if(!p.trim()||!o)return;if(!m&&y>=C){alert("");return}const M={id:h||Date.now().toString(),title:p,date:o,isAllDay:m,startTime:m?void 0:y,endTime:m?void 0:C,location:F,description:T,color:B};let O;h?O=s.map(ee=>ee.id===h?M:ee):O=[...s,M],await A(O),u(!1)},q=async(M,O)=>{if(M.stopPropagation(),confirm("")){const ee=s.filter(W=>W.id!==O);await A(ee)}},G=()=>{const M=e.getFullYear(),O=e.getMonth(),ee=H(M,O),W=Y(M,O),V=[];for(let Z=0;Z<W;Z++)V.push(r.jsx("div",{className:"min-h-[3rem] sm:min-h-[4rem]"},`empty-${Z}`));for(let Z=1;Z<=ee;Z++){const ue=L(M,O,Z),ce=s.filter(ie=>ie.date===ue),me=o===ue,Te=new Date().toDateString()===new Date(M,O,Z).toDateString();V.push(r.jsxs("div",{onClick:()=>k(Z),className:"relative min-h-[3rem] sm:min-h-[4rem] flex flex-col items-center pt-1 cursor-pointer active:scale-95 transition-transform duration-100 group",children:[r.jsx("div",{className:`w-7 h-7 sm:w-8 sm:h-8 flex items-center justify-center rounded-full text-xs sm:text-sm font-medium transition-all z-10 ${me?"bg-[#5A5A5A] text-white shadow-md scale-110":Te?"bg-[#FFD1DC] text-[#5A5A5A]":"text-[#5A5A5A] group-hover:bg-[#5A5A5A]/5"}`,children:Z}),r.jsxs("div",{className:"flex gap-0.5 sm:gap-1 mt-1 flex-wrap justify-center px-1",children:[ce.slice(0,4).map((ie,Ce)=>r.jsx("div",{className:"w-1 h-1 sm:w-1.5 sm:h-1.5 rounded-full",style:{backgroundColor:ie.color}},Ce)),ce.length>4&&r.jsx("div",{className:"w-1 h-1 sm:w-1.5 sm:h-1.5 rounded-full bg-gray-300"})]})]},Z))}return V},Q=o?s.filter(M=>M.date===o).sort((M,O)=>M.isAllDay&&!O.isAllDay?-1:!M.isAllDay&&O.isAllDay?1:M.isAllDay&&O.isAllDay?0:(M.startTime||"").localeCompare(O.startTime||"")):[];return r.jsxs("div",{className:"h-full flex flex-col overflow-hidden bg-[#F9F7F2]",children:[r.jsxs("div",{className:"px-6 py-4 flex items-center justify-between",children:[r.jsx("button",{onClick:()=>_(-1),className:"p-2 active:bg-[#5A5A5A]/10 active:scale-90 rounded-full transition-all duration-200",children:r.jsx($n,{className:"w-5 h-5 text-[#5A5A5A]"})}),r.jsxs("h2",{className:"text-lg font-bold text-[#5A5A5A] tracking-widest",children:[e.getFullYear()," ",e.getMonth()+1,""]}),r.jsx("button",{onClick:()=>_(1),className:"p-2 active:bg-[#5A5A5A]/10 active:scale-90 rounded-full transition-all duration-200",children:r.jsx(ta,{className:"w-5 h-5 text-[#5A5A5A]"})})]}),r.jsx("div",{className:"grid grid-cols-7 px-4 mb-2",children:["","","","","","",""].map(M=>r.jsx("div",{className:"text-center text-xs font-bold text-[#9A9A9A]",children:M},M))}),r.jsxs("div",{className:"flex-1 overflow-y-auto px-4 pb-20 custom-scrollbar",children:[r.jsx("div",{className:"grid grid-cols-7 gap-y-2 mb-6 bg-white p-2 rounded-2xl border-2 border-dashed border-[#5A5A5A]/10 shadow-sm",children:G()}),r.jsx(ze,{mode:"wait",children:o&&r.jsxs(je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"space-y-4 px-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-[#5A5A5A] font-bold border-l-4 border-[#5A5A5A] pl-2",children:o}),r.jsxs("button",{onClick:$,className:"flex items-center gap-1 text-xs font-bold bg-[#5A5A5A] text-white px-3 py-1.5 rounded-full shadow-sm active:scale-95 transition-transform duration-200",children:[r.jsx(Cr,{className:"w-3 h-3"}),""]})]}),Q.length===0?r.jsx("div",{className:"text-center py-8 text-[#999] text-sm italic opacity-60",children:""}):r.jsx("div",{className:"space-y-3",children:Q.map(M=>r.jsxs(je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},onClick:()=>P(M),className:"relative p-4 rounded-xl shadow-sm border border-black/5 flex gap-4 overflow-hidden active:scale-[0.98] transition-transform duration-150 bg-white cursor-pointer",children:[r.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1.5",style:{backgroundColor:M.color}}),r.jsx("div",{className:"flex flex-col items-center justify-center min-w-[50px] border-r border-black/5 pr-4 py-1",children:M.isAllDay?r.jsx("span",{className:"text-xs font-bold text-[#5A5A5A] bg-[#5A5A5A]/10 px-2 py-1 rounded",children:""}):r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-sm font-bold text-[#5A5A5A]",children:M.startTime}),r.jsx("span",{className:"text-xs text-[#999] mt-0.5",children:M.endTime})]})}),r.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center gap-1",children:[r.jsx("h4",{className:"font-bold text-[#5A5A5A] truncate text-sm",children:M.title}),M.location&&r.jsxs("div",{className:"flex items-center gap-1 text-xs text-[#5A5A5A]/70",children:[r.jsx(Vu,{className:"w-3 h-3"}),r.jsx("span",{className:"truncate",children:M.location})]}),M.description&&r.jsx("p",{className:"text-xs text-[#5A5A5A]/50 truncate",children:M.description})]}),r.jsx("button",{onClick:O=>q(O,M.id),className:"absolute top-2 right-2 p-2 text-[#5A5A5A]/30 active:text-[#FF6B6B] active:scale-110 transition-all z-10",children:r.jsx(ht,{className:"w-4 h-4"})})]},M.id))})]})})]}),r.jsx(ze,{children:c&&r.jsxs("div",{className:"absolute inset-0 z-50 flex items-end justify-center sm:items-center p-0 sm:p-4 bg-black/20 backdrop-blur-[2px]",children:[r.jsx("div",{className:"absolute inset-0",onClick:()=>u(!1)}),r.jsxs(je.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"tween",duration:.25,ease:"easeOut"},className:"bg-[#FDFBF7] w-full max-w-sm rounded-t-2xl sm:rounded-2xl shadow-2xl p-6 border-t-2 sm:border-2 border-[#5A5A5A]/10 relative z-10",children:[r.jsx("button",{onClick:()=>u(!1),className:"absolute top-4 right-4 p-2 bg-[#F5F5F5] rounded-full active:scale-90 transition-transform",children:r.jsx(ht,{className:"w-4 h-4 text-[#5A5A5A]"})}),r.jsxs("h3",{className:"text-lg font-bold text-[#5A5A5A] mb-6 flex items-center gap-2",children:[r.jsx("span",{className:"w-2 h-6 bg-[#5A5A5A] rounded-full"}),h?"":""]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-[#999] mb-1 block",children:""}),r.jsx("input",{type:"text",value:p,onChange:M=>f(M.target.value),className:"w-full bg-white border-b-2 border-[#E0E0E0] focus:border-[#5A5A5A] px-2 py-2 outline-none transition-colors rounded-t-md",placeholder:""})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-xs font-bold text-[#999] mb-1 block flex items-center gap-1",children:[r.jsx(Vu,{className:"w-3 h-3"})," "]}),r.jsx("input",{type:"text",value:F,onChange:M=>j(M.target.value),className:"w-full bg-white border-b-2 border-[#E0E0E0] focus:border-[#5A5A5A] px-2 py-2 outline-none transition-colors rounded-t-md text-sm",placeholder:""})]}),r.jsxs("div",{className:"flex items-center gap-2 pt-1 active:opacity-60 transition-opacity",onClick:()=>b(!m),children:[r.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center transition-colors ${m?"bg-[#5A5A5A] border-[#5A5A5A]":"border-[#999]"}`,children:m&&r.jsx(Dt,{className:"w-3 h-3 text-white"})}),r.jsx("label",{className:"text-sm font-bold text-[#5A5A5A]",children:""})]}),r.jsx(ze,{children:!m&&r.jsxs(je.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.15},className:"flex gap-4 overflow-hidden",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("label",{className:"text-xs font-bold text-[#999] mb-1 block flex items-center gap-1",children:[r.jsx(Ou,{className:"w-3 h-3"})," "]}),r.jsx("input",{type:"time",value:y,onChange:M=>v(M.target.value),className:"w-full bg-white border-b-2 border-[#E0E0E0] focus:border-[#5A5A5A] px-2 py-2 outline-none transition-colors rounded-t-md text-sm"})]}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("label",{className:"text-xs font-bold text-[#999] mb-1 block flex items-center gap-1",children:[r.jsx(Ou,{className:"w-3 h-3"})," "]}),r.jsx("input",{type:"time",value:C,onChange:M=>w(M.target.value),className:"w-full bg-white border-b-2 border-[#E0E0E0] focus:border-[#5A5A5A] px-2 py-2 outline-none transition-colors rounded-t-md text-sm"})]})]})}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-[#999] mb-2 block",children:""}),r.jsx("div",{className:"flex gap-3",children:uu.map(M=>r.jsx("button",{onClick:()=>U(M),className:`w-8 h-8 rounded-full border-2 transition-transform ${B===M?"border-[#5A5A5A] scale-110 shadow-sm":"border-transparent active:scale-90"}`,style:{backgroundColor:M}},M))})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-xs font-bold text-[#999] mb-1 block flex items-center gap-1",children:[r.jsx(xj,{className:"w-3 h-3"})," "]}),r.jsx("textarea",{value:T,onChange:M=>z(M.target.value),className:"w-full bg-white border-2 border-[#F0F0F0] rounded-xl px-3 py-2 outline-none focus:border-[#5A5A5A]/30 resize-none h-20 text-sm",placeholder:"..."})]}),r.jsx("button",{onClick:I,className:"w-full bg-[#5A5A5A] text-white font-bold py-3.5 rounded-xl shadow-lg mt-2 active:scale-95 transition-transform duration-150",children:h?"":" "})]})]})]})})]})}const vg=["","","","","","",""],gl=["#FFD1DC","#D4E0D6","#CCE5FF","#FFF5BA","#E6E6FA","#FFABAB","#FFC3A0","#D5AAFF","#85E3FF","#B9FBC0"],fu={totalPeriods:12,showWeekends:!0,periodTimes:Array.from({length:12},(e,n)=>({period:n+1,startTime:`${8+n}:00`,endTime:`${8+n}:45`})),startDate:new Date().toISOString().split("T")[0],totalWeeks:20},w8=e=>{const n=new Date(e),s=new Date,i=new Date(n.getFullYear(),n.getMonth(),n.getDate()),o=new Date(s.getFullYear(),s.getMonth(),s.getDate()),l=i.getDay()||7,c=new Date(i);c.setDate(i.getDate()-(l-1));const u=o.getTime()-c.getTime(),h=Math.floor(u/(1e3*60*60*24));return{currentWeek:Math.floor(h/7)+1,firstMonday:c}},k8=(e,n,s)=>{const i=new Date(e);return i.setDate(e.getDate()+(n-1)*7+s),`${i.getMonth()+1}/${i.getDate()}`};function S8(){const[e,n]=N.useState([]),[s,i]=N.useState(null),[o,l]=N.useState(null),[c,u]=N.useState(fu),[h,g]=N.useState(!1),{currentWeek:p,firstMonday:f}=w8(c.startDate),[m,b]=N.useState(1);N.useEffect(()=>{p>0&&b(Math.min(Math.max(1,p),c.totalWeeks))},[p,c.totalWeeks]);const[y,v]=N.useState(""),[C,w]=N.useState(""),[F,j]=N.useState(gl[0]),[T,z]=N.useState(1),[B,U]=N.useState(1),[D,A]=N.useState([]),[H,Y]=N.useState(!1);N.useEffect(()=>{_()},[]);const _=async()=>{const V=await he.get(re.SCHEDULE,"timetable_courses");if(V)n(V);else{const ue=await he.get(re.SCHEDULE,"timetable");if(ue&&ue.length>0){const ce=ue.map(me=>({id:Math.random().toString(36).substr(2,9),day:me.day,startPeriod:me.period,endPeriod:me.period,subject:me.subject,room:me.room,color:me.color,weeks:Array.from({length:fu.totalWeeks},(Te,ie)=>ie+1)}));n(ce),await he.set(re.SCHEDULE,"timetable_courses",ce)}}const Z=await he.get(re.SCHEDULE,"timetable_settings");if(Z){const ue={...fu,...Z};if(ue.periodTimes.length<ue.totalPeriods){const ce=ue.periodTimes.length;for(let me=ce;me<ue.totalPeriods;me++)ue.periodTimes.push({period:me+1,startTime:`${8+me}:00`,endTime:`${8+me}:45`})}u(ue)}},L=async V=>{await he.set(re.SCHEDULE,"timetable_courses",V),n(V)},k=async V=>{const Z=[...V.periodTimes];if(Z.length<V.totalPeriods)for(let ce=Z.length;ce<V.totalPeriods;ce++)Z.push({period:ce+1,startTime:`${8+ce}:00`,endTime:`${8+ce}:45`});else Z.length>V.totalPeriods&&(Z.length=V.totalPeriods);const ue={...V,periodTimes:Z};await he.set(re.SCHEDULE,"timetable_settings",ue),u(ue)},$=(V,Z)=>{V?(l(V),i(null),v(V.subject),w(V.room),j(V.color),z(V.startPeriod),U(V.endPeriod),A(V.weeks)):Z&&(l(null),i(Z),v(""),w(""),j(gl[Math.floor(Math.random()*gl.length)]),z(Z.period),U(Z.period),A(Array.from({length:c.totalWeeks},(ue,ce)=>ce+1))),Y(!1)},P=()=>{l(null),i(null)},I=async()=>{if(!y.trim())return;let V=[...e];const Z={id:o?o.id:Math.random().toString(36).substr(2,9),day:o?o.day:s?.day||0,startPeriod:T,endPeriod:B,subject:y.trim(),room:C.trim(),color:F,weeks:D.length>0?D:[m]};o?V=V.map(ue=>ue.id===o.id?Z:ue):V.push(Z),await L(V),P()},q=async()=>{if(!o)return;const V=e.filter(Z=>Z.id!==o.id);await L(V),P()},G=async()=>{window.confirm("")&&(await he.delete(re.SCHEDULE,"timetable_courses"),await he.delete(re.SCHEDULE,"timetable"),n([]),g(!1))},Q=()=>A(Array.from({length:c.totalWeeks},(V,Z)=>Z+1)),M=()=>A(Array.from({length:c.totalWeeks},(V,Z)=>Z+1).filter(V=>V%2!==0)),O=()=>A(Array.from({length:c.totalWeeks},(V,Z)=>Z+1).filter(V=>V%2===0)),ee=c.showWeekends?vg:vg.slice(0,5),W=Array.from({length:c.totalPeriods},(V,Z)=>Z+1);return r.jsxs("div",{className:"h-full flex flex-col relative",children:[r.jsxs("div",{className:"flex justify-between items-center px-4 py-2 bg-[#FDFBF7] border-b border-dashed border-[#5A5A5A]/10 sticky top-0 z-20",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:()=>b(V=>Math.max(1,V-1)),disabled:m<=1,className:"p-1 rounded-full hover:bg-black/5 disabled:opacity-30 transition-colors",children:r.jsx($n,{className:"w-4 h-4 text-[#5A5A5A]"})}),r.jsxs("span",{className:"text-lg font-bold text-[#5A5A5A] min-w-[3rem] text-center",children:[" ",m," "]}),r.jsx("button",{onClick:()=>b(V=>Math.min(c.totalWeeks,V+1)),disabled:m>=c.totalWeeks,className:"p-1 rounded-full hover:bg-black/5 disabled:opacity-30 transition-colors",children:r.jsx(ta,{className:"w-4 h-4 text-[#5A5A5A]"})})]}),p===m&&r.jsx("span",{className:"text-[10px] bg-[#5A5A5A] text-white px-1.5 py-0.5 rounded-full",children:""})]}),r.jsx("button",{onClick:()=>g(!0),className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-black/5 active:scale-90 transition-all text-[#999] hover:text-[#5A5A5A]",children:r.jsx(Kl,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"flex border-b border-[#5A5A5A]/10 bg-white/50 backdrop-blur-sm sticky top-[49px] z-10",children:[r.jsx("div",{className:"w-8 flex items-center justify-center border-r border-[#5A5A5A]/10 bg-[#FDFBF7]/80"}),ee.map((V,Z)=>r.jsxs("div",{className:"flex-1 py-2 text-center flex flex-col items-center justify-center text-[#5A5A5A]",children:[r.jsx("span",{className:"text-xs font-bold",children:V}),r.jsx("span",{className:"text-[10px] text-[#999] font-medium leading-none mt-0.5",children:k8(f,m,Z)})]},Z))]}),r.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pb-20",children:r.jsxs("div",{className:"flex min-h-full",children:[r.jsx("div",{className:"w-8 flex flex-col bg-[#FDFBF7] sticky left-0 z-10 border-r border-[#5A5A5A]/10 shrink-0",children:W.map(V=>{const Z=c.periodTimes[V-1];return r.jsxs("div",{className:"h-14 flex flex-col items-center justify-center text-[10px] font-bold text-[#999] border-b border-dashed border-[#5A5A5A]/10 last:border-b-0 box-border",children:[r.jsx("span",{children:V}),Z&&r.jsxs("span",{className:"text-[8px] font-normal scale-90 mt-0.5 opacity-60 flex flex-col items-center leading-none gap-0.5",children:[r.jsx("span",{children:Z.startTime}),r.jsx("span",{children:"|"}),r.jsx("span",{children:Z.endTime})]})]},V)})}),r.jsx("div",{className:"flex-1 flex",children:ee.map((V,Z)=>r.jsx("div",{className:"flex-1 flex flex-col border-r border-dashed border-[#5A5A5A]/10 last:border-r-0 min-w-[60px] relative",children:(()=>{const ue=[];let ce=1;for(;ce<=c.totalPeriods;){const Te=ce,ie=e.find(Ce=>Ce.day===Z&&Ce.startPeriod===Te&&Ce.weeks.includes(m));if(ie){const Ce=ie.endPeriod-ie.startPeriod+1;ue.push(r.jsx("div",{onClick:()=>$(ie),className:"w-full p-0.5 absolute z-10",style:{top:`${(ie.startPeriod-1)*56}px`,height:`${Ce*56}px`},children:r.jsxs(je.div,{className:"w-full h-full rounded-lg p-1 flex flex-col justify-center items-center shadow-sm active:scale-95 transition-transform cursor-pointer border border-black/5",style:{backgroundColor:ie.color},children:[r.jsx("span",{className:"text-[10px] font-bold text-[#5A5A5A] text-center leading-tight line-clamp-3 break-all",children:ie.subject}),ie.room&&r.jsxs("span",{className:"text-[8px] text-[#5A5A5A]/70 mt-0.5 scale-90",children:["@",ie.room]})]})},`course-${ie.id}`))}ce++}const me=W.map(Te=>r.jsx("div",{onClick:()=>$(void 0,{day:Z,period:Te}),className:"h-14 border-b border-dashed border-[#5A5A5A]/10 w-full box-border"},`slot-${Te}`));return r.jsxs(r.Fragment,{children:[me,ue]})})()},Z))})]})}),r.jsx(ze,{children:(o||s)&&r.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/20 backdrop-blur-[1px] p-6",children:r.jsxs(je.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:400,damping:30},className:"bg-[#FDFBF7] w-full max-w-xs max-h-[85vh] flex flex-col rounded-2xl shadow-xl border-2 border-[#5A5A5A]/10 relative",children:[r.jsxs("div",{className:"p-4 border-b border-[#5A5A5A]/10 flex justify-between items-center bg-white/50 rounded-t-2xl",children:[r.jsx("h3",{className:"font-bold text-[#5A5A5A]",children:o?"":""}),r.jsx("button",{onClick:P,className:"p-1 text-[#999] hover:text-[#5A5A5A] active:scale-90 transition-transform",children:r.jsx(ht,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"overflow-y-auto p-5 space-y-4 custom-scrollbar",children:r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{type:"text",value:y,onChange:V=>v(V.target.value),placeholder:"",autoFocus:!o,className:"w-full bg-white border border-[#E0E0E0] rounded-lg px-3 py-2 text-sm outline-none focus:border-[#5A5A5A]"}),r.jsx("input",{type:"text",value:C,onChange:V=>w(V.target.value),placeholder:" ()",className:"w-full bg-white border border-[#E0E0E0] rounded-lg px-3 py-2 text-sm outline-none focus:border-[#5A5A5A]"}),r.jsxs("div",{className:"flex gap-2 items-center",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"text-xs text-[#999] block mb-1",children:""}),r.jsx("select",{value:T,onChange:V=>{const Z=parseInt(V.target.value);z(Z),Z>B&&U(Z)},className:"w-full bg-white border border-[#E0E0E0] rounded-lg px-2 py-1.5 text-sm outline-none focus:border-[#5A5A5A]",children:W.map(V=>r.jsxs("option",{value:V,children:[" ",V," "]},V))})]}),r.jsx("span",{className:"mt-5 text-[#999]",children:"-"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"text-xs text-[#999] block mb-1",children:""}),r.jsx("select",{value:B,onChange:V=>{const Z=parseInt(V.target.value);U(Z),Z<T&&z(Z)},className:"w-full bg-white border border-[#E0E0E0] rounded-lg px-2 py-1.5 text-sm outline-none focus:border-[#5A5A5A]",children:W.map(V=>r.jsxs("option",{value:V,children:[" ",V," "]},V))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-xs text-[#999]",children:[": ",r.jsxs("span",{className:"text-[#5A5A5A] font-medium",children:[D.length,""]})]}),r.jsxs("div",{className:"flex gap-2 text-xs",children:[r.jsx("button",{onClick:Q,className:"flex-1 py-1.5 bg-white border border-[#E0E0E0] rounded hover:bg-[#F5F5F5]",children:""}),r.jsx("button",{onClick:M,className:"flex-1 py-1.5 bg-white border border-[#E0E0E0] rounded hover:bg-[#F5F5F5]",children:""}),r.jsx("button",{onClick:O,className:"flex-1 py-1.5 bg-white border border-[#E0E0E0] rounded hover:bg-[#F5F5F5]",children:""})]}),r.jsx("button",{onClick:()=>Y(!H),className:"w-full py-1.5 text-xs text-[#5A5A5A] bg-[#F5F5F5] rounded flex items-center justify-center gap-1",children:H?"":""}),H&&r.jsx("div",{className:"grid grid-cols-5 gap-1.5 p-2 bg-white rounded-lg border border-[#E0E0E0]",children:Array.from({length:c.totalWeeks},(V,Z)=>Z+1).map(V=>{const Z=D.includes(V);return r.jsx("button",{onClick:()=>{A(Z?D.filter(ue=>ue!==V):[...D,V].sort((ue,ce)=>ue-ce))},className:`aspect-square flex items-center justify-center text-xs rounded transition-colors ${Z?"bg-[#5A5A5A] text-white":"bg-[#F9F9F9] text-[#999]"}`,children:V},V)})})]}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-2 justify-center pt-2 border-t border-dashed border-[#5A5A5A]/10",children:gl.map(V=>r.jsx("button",{onClick:()=>j(V),className:`w-6 h-6 rounded-full border-2 transition-transform ${F===V?"border-[#5A5A5A] scale-110":"border-transparent active:scale-90"}`,style:{backgroundColor:V}},V))}),r.jsxs("div",{className:"flex gap-2 mt-4",children:[o&&r.jsx("button",{onClick:q,className:"flex-1 py-2 text-sm font-bold text-[#FF6B6B] bg-[#FFF0F0] rounded-lg active:scale-95 transition-transform",children:""}),r.jsx("button",{onClick:I,className:"flex-[2] py-2 text-sm font-bold text-white bg-[#5A5A5A] rounded-lg shadow-md active:scale-95 transition-transform",children:""})]})]})})]})})}),r.jsx(ze,{children:h&&r.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/20 backdrop-blur-[1px] p-4",children:r.jsxs(je.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:400,damping:30},className:"bg-[#FDFBF7] w-full max-w-sm max-h-[80vh] flex flex-col rounded-2xl shadow-xl border-2 border-[#5A5A5A]/10 relative overflow-hidden",children:[r.jsxs("div",{className:"p-4 border-b border-[#5A5A5A]/10 flex justify-between items-center bg-white/50",children:[r.jsx("h3",{className:"font-bold text-[#5A5A5A]",children:""}),r.jsx("button",{onClick:()=>g(!1),className:"p-1 text-[#999] hover:text-[#5A5A5A] active:scale-90 transition-transform",children:r.jsx(ht,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"overflow-y-auto p-4 space-y-6 flex-1 custom-scrollbar",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-bold text-[#5A5A5A]",children:""}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("span",{className:"text-xs text-[#999] block mb-1",children:""}),r.jsx("input",{type:"date",value:c.startDate,onChange:V=>k({...c,startDate:V.target.value}),className:"w-full bg-white border border-[#E0E0E0] rounded-lg px-2 py-1.5 text-xs outline-none focus:border-[#5A5A5A]"})]}),r.jsxs("div",{className:"w-20",children:[r.jsx("span",{className:"text-xs text-[#999] block mb-1",children:""}),r.jsx("input",{type:"number",min:1,max:30,value:c.totalWeeks,onChange:V=>k({...c,totalWeeks:parseInt(V.target.value)||20}),className:"w-full bg-white border border-[#E0E0E0] rounded-lg px-2 py-1.5 text-xs text-center outline-none focus:border-[#5A5A5A]"})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-bold text-[#5A5A5A]",children:""}),r.jsx("button",{onClick:()=>k({...c,showWeekends:!c.showWeekends}),className:`w-12 h-6 rounded-full relative transition-colors duration-200 ${c.showWeekends?"bg-[#5A5A5A]":"bg-[#E0E0E0]"}`,children:r.jsx(je.div,{animate:{x:c.showWeekends?26:2},className:"w-5 h-5 bg-white rounded-full absolute top-0.5 shadow-sm"})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-bold text-[#5A5A5A]",children:""}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>c.totalPeriods>1&&k({...c,totalPeriods:c.totalPeriods-1}),className:"w-8 h-8 rounded-lg bg-[#F5F5F5] flex items-center justify-center text-[#5A5A5A] active:scale-90",children:"-"}),r.jsx("span",{className:"w-8 text-center font-bold text-[#5A5A5A]",children:c.totalPeriods}),r.jsx("button",{onClick:()=>c.totalPeriods<20&&k({...c,totalPeriods:c.totalPeriods+1}),className:"w-8 h-8 rounded-lg bg-[#F5F5F5] flex items-center justify-center text-[#5A5A5A] active:scale-90",children:"+"})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-xs font-bold text-[#999] mb-3 uppercase tracking-wider",children:""}),r.jsx("div",{className:"space-y-2",children:Array.from({length:c.totalPeriods},(V,Z)=>{const ue=c.periodTimes[Z]||{startTime:"08:00",endTime:"08:45"};return r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("span",{className:"w-8 font-bold text-[#5A5A5A] text-center",children:Z+1}),r.jsx("input",{type:"time",value:ue.startTime,onChange:ce=>{const me=[...c.periodTimes];me[Z]||(me[Z]={period:Z+1,startTime:"08:00",endTime:"08:45"}),me[Z].startTime=ce.target.value,k({...c,periodTimes:me})},className:"flex-1 bg-white border border-[#E0E0E0] rounded px-2 py-1 text-xs text-center outline-none focus:border-[#5A5A5A]"}),r.jsx("span",{className:"text-[#999]",children:"-"}),r.jsx("input",{type:"time",value:ue.endTime,onChange:ce=>{const me=[...c.periodTimes];me[Z]||(me[Z]={period:Z+1,startTime:"08:00",endTime:"08:45"}),me[Z].endTime=ce.target.value,k({...c,periodTimes:me})},className:"flex-1 bg-white border border-[#E0E0E0] rounded px-2 py-1 text-xs text-center outline-none focus:border-[#5A5A5A]"})]},Z)})})]}),r.jsx("div",{className:"pt-4 border-t border-[#5A5A5A]/10",children:r.jsxs("button",{onClick:G,className:"w-full py-3 flex items-center justify-center gap-2 text-[#FF6B6B] bg-[#FFF0F0] rounded-xl font-bold active:scale-95 transition-transform",children:[r.jsx(Hn,{className:"w-4 h-4"})," ()"]})})]})]})})})]})}const yg={shareEnabled:!1,shareScope:"all",shareCharacterId:""};function C8({onBack:e}){const[n,s]=N.useState("todo"),[i,o]=N.useState(!1),[l,c]=N.useState(!1),[u,h]=N.useState(!1),[g,p]=N.useState(yg),[f,m]=N.useState([]),[b,y]=N.useState(!1),v=[{id:"todo",label:"",icon:h4},{id:"calendar",label:"",icon:qs},{id:"timetable",label:"",icon:E4}];N.useEffect(()=>{C(),w()},[]);const C=async()=>{try{const j=await he.get(re.SCHEDULE,"schedule_settings");j&&p({...yg,...j})}catch(j){console.error("Failed to load schedule settings",j)}},w=async()=>{try{const j=await he.get(re.CHARACTERS,"characters");j&&m(j)}catch(j){console.error("Failed to load characters",j)}},F=async()=>{try{await he.set(re.SCHEDULE,"schedule_settings",g),o(!1),c(!0),setTimeout(()=>c(!1),2e3)}catch{h(!0),setTimeout(()=>h(!1),2e3)}};return r.jsxs("div",{className:"flex flex-col h-full bg-[#FDFBF7] text-[#5A5A5A] relative overflow-hidden",children:[r.jsxs("div",{className:"w-full relative z-10 pt-8 pb-4 px-6 flex items-center justify-between bg-[#FDFBF7]",children:[r.jsx("button",{onClick:e,className:"w-10 h-10 flex items-center justify-center rounded-full active:bg-black/10 active:scale-90 transition-all duration-200",children:r.jsx(yj,{className:"w-6 h-6 text-[#5A5A5A]",strokeWidth:2})}),r.jsx("div",{className:"text-lg font-bold tracking-widest text-[#5A5A5A] border-b-2 border-dashed border-[#5A5A5A]/30 pb-1",children:v.find(j=>j.id===n)?.label}),r.jsx("button",{onClick:()=>o(!0),className:"w-10 h-10 flex items-center justify-center rounded-full active:bg-black/10 active:scale-90 transition-all duration-200 text-[#5A5A5A]",children:r.jsx(gb,{className:"w-5 h-5",strokeWidth:2})})]}),r.jsx("div",{className:"absolute top-16 right-[-20px] w-24 h-6 bg-[#E8DCC4] rotate-[15deg] opacity-60 pointer-events-none z-0",style:{backgroundImage:"repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255,255,255,0.5) 10px, rgba(255,255,255,0.5) 20px)"}}),r.jsx("div",{className:"absolute top-20 left-[-10px] w-16 h-4 bg-[#D4E0D6] rotate-[-5deg] opacity-60 pointer-events-none z-0",style:{backgroundImage:"repeating-linear-gradient(-45deg, transparent, transparent 5px, rgba(255,255,255,0.5) 5px, rgba(255,255,255,0.5) 10px)"}}),r.jsx("div",{className:"flex-1 overflow-hidden relative w-full",children:r.jsx(ze,{mode:"wait",children:r.jsxs(je.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2,ease:"easeInOut"},className:"h-full w-full",children:[n==="todo"&&r.jsx(v8,{}),n==="calendar"&&r.jsx(y8,{}),n==="timetable"&&r.jsx(S8,{})]},n)})}),r.jsx("div",{className:"bg-[#FDFBF7] border-t border-dashed border-[#5A5A5A]/20 pb-safe pt-2 px-6 w-full",children:r.jsx("div",{className:"w-full flex justify-between items-center h-16 md:justify-center md:gap-32",children:v.map(j=>{const T=n===j.id;return r.jsxs("button",{onClick:()=>s(j.id),className:"flex flex-col items-center justify-center gap-1 w-20 relative group active:scale-95 transition-transform duration-150",children:[r.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center transition-all duration-300 ${T?"bg-[#5A5A5A] text-[#FDFBF7] shadow-lg scale-110 rotate-[-3deg]":"bg-transparent text-[#9A9A9A]"}`,children:r.jsx(j.icon,{className:"w-5 h-5",strokeWidth:T?2.5:2})}),r.jsx("span",{className:`text-[10px] font-bold tracking-wider transition-colors duration-300 ${T?"text-[#5A5A5A]":"text-[#9A9A9A]"}`,children:j.label}),T&&r.jsx(je.div,{layoutId:"activeTabDot",className:"absolute -bottom-1 w-1 h-1 bg-[#5A5A5A] rounded-full",transition:{type:"spring",stiffness:300,damping:30}})]},j.id)})})}),i&&r.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-[1px] z-50 flex items-center justify-center p-6",children:r.jsxs(je.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:400,damping:30},className:"bg-[#FDFBF7] w-full max-w-[320px] rounded-2xl shadow-xl border-2 border-[#5A5A5A]/10 relative overflow-hidden",children:[r.jsxs("div",{className:"bg-white/50 border-b border-dashed border-[#5A5A5A]/10 p-4 flex justify-between items-center",children:[r.jsx("span",{className:"text-lg font-bold text-[#5A5A5A]",children:""}),r.jsx("button",{onClick:()=>o(!1),className:"p-1 text-[#999] hover:text-[#5A5A5A] active:scale-90 transition-transform",children:r.jsx(ht,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-bold text-[#5A5A5A]",children:""}),r.jsx("p",{className:"text-xs text-[#999] mt-1",children:""})]}),r.jsx("button",{onClick:()=>p({...g,shareEnabled:!g.shareEnabled}),className:`flex-shrink-0 w-12 h-6 rounded-full transition-colors relative ${g.shareEnabled?"bg-[#5A5A5A]":"bg-[#E0E0E0]"}`,children:r.jsx(je.div,{animate:{x:g.shareEnabled?26:2},transition:{type:"spring",stiffness:500,damping:30},className:"w-5 h-5 bg-white rounded-full absolute top-0.5 shadow-sm"})})]}),r.jsx(ze,{children:g.shareEnabled&&r.jsxs(je.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4 pt-4 border-t border-dashed border-[#5A5A5A]/10 overflow-hidden",children:[r.jsx("label",{className:"text-xs font-bold text-[#999] block mb-2",children:""}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("button",{onClick:()=>p({...g,shareScope:"all"}),className:`p-3 rounded-xl border flex flex-col items-center gap-2 transition-all ${g.shareScope==="all"?"bg-[#5A5A5A] border-[#5A5A5A] text-white":"bg-white border-[#E0E0E0] text-[#999]"}`,children:[r.jsx(Of,{className:"w-5 h-5"}),r.jsx("span",{className:"text-xs font-bold",children:""})]}),r.jsxs("button",{onClick:()=>p({...g,shareScope:"specific"}),className:`p-3 rounded-xl border flex flex-col items-center gap-2 transition-all ${g.shareScope==="specific"?"bg-[#5A5A5A] border-[#5A5A5A] text-white":"bg-white border-[#E0E0E0] text-[#999]"}`,children:[r.jsx(is,{className:"w-5 h-5"}),r.jsx("span",{className:"text-xs font-bold",children:""})]})]}),g.shareScope==="specific"&&r.jsxs("div",{className:"mt-2",children:[r.jsxs("button",{onClick:()=>y(!b),className:"w-full bg-white border border-[#E0E0E0] px-4 py-2.5 rounded-lg text-xs font-bold text-[#5A5A5A] flex items-center justify-between active:bg-[#F5F5F5] transition-colors",children:[r.jsx("div",{className:"flex items-center gap-2 pl-1",children:r.jsx("span",{children:f.find(j=>j.id===g.shareCharacterId)?.name||""})}),r.jsx(ta,{className:`w-4 h-4 text-[#999] transition-transform ${b?"rotate-90":""}`})]}),r.jsx(ze,{children:b&&r.jsx(je.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:r.jsxs("div",{className:"mt-2 bg-white border border-[#E0E0E0] rounded-xl shadow-sm max-h-48 overflow-y-auto p-1 custom-scrollbar",children:[f.length===0&&r.jsx("div",{className:"p-3 text-center text-xs text-[#999]",children:""}),f.map(j=>r.jsx("button",{onClick:()=>{p({...g,shareCharacterId:j.id}),y(!1)},className:`w-full text-left px-3 py-2 rounded-lg text-xs font-bold flex items-center gap-2 mb-1 transition-colors ${g.shareCharacterId===j.id?"bg-[#5A5A5A] text-white":"hover:bg-[#F5F5F5] text-[#5A5A5A]"}`,children:j.name},j.id))]})})})]})]})}),r.jsxs("button",{onClick:F,className:"w-full bg-[#5A5A5A] text-white py-3 rounded-xl font-bold text-sm shadow-md active:scale-[0.98] transition-transform flex items-center justify-center gap-2",children:[r.jsx(Dt,{className:"w-4 h-4"}),""]})]})]})}),l&&r.jsx("div",{className:"fixed top-[90px] inset-x-0 z-[100] flex justify-center pointer-events-none",children:r.jsxs(je.div,{initial:{scale:.9,opacity:0,y:-10},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},className:"mx-auto w-fit flex items-center gap-2 px-4 py-3 pointer-events-auto shadow-sm",style:{background:"rgba(253, 251, 247, 0.95)",backdropFilter:"blur(4px)",border:"1px dashed rgba(90, 90, 90, 0.3)",borderRadius:"16px",color:"#5A5A5A",fontSize:"13px",fontWeight:"bold"},children:[r.jsx("div",{className:"w-5 h-5 rounded-full bg-[#5A5A5A] flex items-center justify-center text-[#FDFBF7]",children:r.jsx(Dt,{className:"w-3 h-3",strokeWidth:3})}),r.jsx("span",{children:""})]})}),u&&r.jsx("div",{className:"fixed top-[90px] inset-x-0 z-[100] flex justify-center pointer-events-none",children:r.jsxs(je.div,{initial:{scale:.9,opacity:0,y:-10},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},className:"mx-auto w-fit flex items-center gap-2 px-4 py-3 pointer-events-auto shadow-sm",style:{background:"rgba(253, 251, 247, 0.95)",backdropFilter:"blur(4px)",border:"1px dashed rgba(229, 115, 115, 0.5)",borderRadius:"16px",color:"#5A5A5A",fontSize:"13px",fontWeight:"bold"},children:[r.jsx("div",{className:"w-5 h-5 rounded-full bg-[#E57373] flex items-center justify-center text-white",children:r.jsx(ht,{className:"w-3 h-3",strokeWidth:3})}),r.jsx("span",{children:""})]})})]})}function j8({onClose:e}){return r.jsx("div",{className:"fixed inset-0 z-50 bg-[#FDFBF7] font-['Source_Han_Sans_CN_VF',sans-serif] overflow-hidden",children:r.jsx("div",{className:"h-full w-full",children:r.jsx(C8,{onBack:e})})})}const Ma={initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20}},Ia={duration:.2,ease:"easeInOut"};function N8({userData:e,preloadedImages:n={},initialChatId:s}){const[i,o]=N.useState(0),[l,c]=N.useState(0),[u,h]=N.useState(!1),[g,p]=N.useState(e),[f,m]=N.useState(!1),[b,y]=N.useState(!1),[v,C]=N.useState(!1),[w,F]=N.useState(!1),[j,T]=N.useState(!1),[z,B]=N.useState(!1),[U,D]=N.useState(s||null),[A,H]=N.useState(n.desktop_wallpaper||null),Y=N.useRef(0),_=N.useRef(0),L=N.useRef(null),k=N.useRef(z),$=N.useRef(U);N.useEffect(()=>{k.current=z},[z]),N.useEffect(()=>{$.current=U},[U]),N.useEffect(()=>{s&&(B(!0),D(s))},[s]),N.useEffect(()=>{const te=J=>{if(J.data){if(J.data.type==="open-conversation"){const{conversationId:X}=J.data;B(!0),D(X)}if(J.data.type==="AI_TASK_COMPLETED"){const{messages:X,characterId:se,displayName:ye}=J.data.payload;if(!X||X.length===0)return;const ve=X[X.length-1],le=ye||ve.senderName||"",ke=k.current;$.current,ke||eg(le,{description:ve.text,action:{label:"",onClick:()=>{B(!0),D(se)}},duration:5e3})}if(J.data.type==="AI_TASK_FAILED"){const{characterId:X,error:se}=J.data.payload,ye=k.current,ve=$.current;(!ye||ve!==X)&&eg.error("",{description:se,duration:5e3})}}};return"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",te),()=>{"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener("message",te)}},[]),N.useEffect(()=>{(async()=>{try{const X=await he.get(re.MISC,"desktop_wallpaper");if(X)if(X.startsWith("data:"))H(X);else{const se=await Ct(X);H(se)}}catch(X){console.error("Failed to load wallpaper:",X)}})();const J=X=>{H(X.detail)};return window.addEventListener("wallpaperChange",J),()=>{window.removeEventListener("wallpaperChange",J)}},[]);const P=te=>{p(te)},I=()=>{B(!1),y(!1),C(!1),F(!1),T(!1),m(!0)},q=()=>{m(!1)},G=()=>{y(!0)},Q=()=>{y(!1)},M=()=>{C(!0)},O=()=>{C(!1)},ee=()=>{F(!0)},W=()=>{F(!1)},V=()=>{T(!0)},Z=()=>{T(!1)},ue=()=>{B(!0)},ce=()=>{B(!1)},me=te=>{D(te)},Te=te=>{h(!0),Y.current=te.touches[0].clientX,_.current=te.touches[0].clientX},ie=te=>{if(!u)return;_.current=te.touches[0].clientX;const J=_.current-Y.current,se=i*-50+J/window.innerWidth*50;se<=0&&se>=-50&&c(se)},Ce=()=>{if(!u)return;const te=_.current-Y.current,J=window.innerWidth*.3;te<-J&&i===0?(o(1),c(-50)):te>J&&i===1?(o(0),c(0)):c(i*-50),h(!1)},be=te=>{h(!0),Y.current=te.clientX,_.current=te.clientX},R=te=>{if(!u)return;_.current=te.clientX;const J=_.current-Y.current,se=i*-50+J/window.innerWidth*50;se<=0&&se>=-50&&c(se)},fe=()=>{if(!u)return;const te=_.current-Y.current,J=window.innerWidth*.3;te<-J&&i===0?(o(1),c(-50)):te>J&&i===1?(o(0),c(0)):c(i*-50),h(!1)};return N.useEffect(()=>{const te=()=>{u&&(h(!1),c(i*-50))};return window.addEventListener("mouseup",te),()=>window.removeEventListener("mouseup",te)},[u,i]),r.jsxs("div",{ref:L,className:"relative w-full h-screen overflow-hidden","data-name":"",onTouchStart:Te,onTouchMove:ie,onTouchEnd:Ce,onMouseDown:be,onMouseMove:R,onMouseUp:fe,children:[A?r.jsx("img",{alt:"",className:"absolute inset-0 w-full h-full object-cover pointer-events-none",src:A}):r.jsx("div",{className:"absolute inset-0 w-full h-full pointer-events-none",style:{backgroundColor:"#D5EAE3"}}),r.jsxs("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full h-full max-w-[414px] max-h-[920px] aspect-[414/920]",children:[r.jsxs("div",{className:"absolute inset-0 flex transition-transform",style:{transform:`translateX(${l}%)`,transitionDuration:u?"0ms":"300ms",width:"200%"},children:[r.jsx("div",{className:"relative w-1/2 h-full flex-shrink-0",children:r.jsx($6,{userData:g,onUserDataChange:P,onChatClick:ue,preloadedImages:n})}),r.jsx("div",{className:"relative w-1/2 h-full flex-shrink-0",children:r.jsx(G6,{preloadedImages:n,onHealthClick:ee,onScheduleClick:V})})]}),r.jsx(Q6,{onSettingsClick:I,onWorldBookClick:G,onCharacterClick:M,onChatClick:ue}),r.jsx(X6,{currentPage:i})]}),r.jsx(ze,{children:f&&r.jsx(je.div,{variants:Ma,initial:"initial",animate:"animate",exit:"exit",transition:Ia,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:te=>te.stopPropagation(),onTouchStart:te=>te.stopPropagation(),onMouseDown:te=>te.stopPropagation(),children:r.jsx(p_,{onClose:q})},"settings")}),r.jsx(ze,{children:b&&r.jsx(je.div,{variants:Ma,initial:"initial",animate:"animate",exit:"exit",transition:Ia,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:te=>te.stopPropagation(),onTouchStart:te=>te.stopPropagation(),onMouseDown:te=>te.stopPropagation(),children:r.jsx(x_,{onClose:Q})},"worldbook-app")}),r.jsx(ze,{children:v&&r.jsx(je.div,{variants:Ma,initial:"initial",animate:"animate",exit:"exit",transition:Ia,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:te=>te.stopPropagation(),onTouchStart:te=>te.stopPropagation(),onMouseDown:te=>te.stopPropagation(),children:r.jsx(w_,{onClose:O})},"character-app")}),r.jsx(ze,{children:w&&r.jsx(je.div,{variants:Ma,initial:"initial",animate:"animate",exit:"exit",transition:Ia,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:te=>te.stopPropagation(),onTouchStart:te=>te.stopPropagation(),onMouseDown:te=>te.stopPropagation(),children:r.jsx(b8,{onClose:W})},"health-app")}),r.jsx(ze,{children:j&&r.jsx(je.div,{variants:Ma,initial:"initial",animate:"animate",exit:"exit",transition:Ia,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:te=>te.stopPropagation(),onTouchStart:te=>te.stopPropagation(),onMouseDown:te=>te.stopPropagation(),children:r.jsx(j8,{onClose:Z})},"schedule-app")}),r.jsx(ze,{children:z&&r.jsx(je.div,{variants:Ma,initial:"initial",animate:"animate",exit:"exit",transition:Ia,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:te=>te.stopPropagation(),onTouchStart:te=>te.stopPropagation(),onMouseDown:te=>te.stopPropagation(),children:r.jsx(h8,{onClose:ce,initialChatId:U,onChatChange:me})},"chat-app")})]})}function _8(){const[e,n]=N.useState(null),[s,i]=N.useState(!1),[o,l]=N.useState(!1),[c,u]=N.useState(!1);N.useEffect(()=>{const p=/iPad|iPhone|iPod/.test(navigator.userAgent);l(p);const f=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||document.referrer.includes("android-app://");u(f);const m=y=>{y.preventDefault(),n(y),!localStorage.getItem("pwa-install-prompt-closed")&&!f&&i(!0)};window.addEventListener("beforeinstallprompt",m),p&&!f&&(localStorage.getItem("pwa-install-ios-prompt-closed")||i(!0));const b=()=>{i(!1),n(null),localStorage.removeItem("pwa-install-prompt-closed"),localStorage.removeItem("pwa-install-ios-prompt-closed")};return window.addEventListener("appinstalled",b),()=>{window.removeEventListener("beforeinstallprompt",m),window.removeEventListener("appinstalled",b)}},[]);const h=async()=>{if(!e)return;e.prompt();const{outcome:p}=await e.userChoice;console.log(p==="accepted"?"":""),n(null),i(!1)},g=()=>{i(!1),o?localStorage.setItem("pwa-install-ios-prompt-closed","true"):localStorage.setItem("pwa-install-prompt-closed","true")};return c||!s?null:o?r.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t-2 border-gray-200 shadow-lg z-50 animate-slide-up",children:r.jsx("div",{className:"max-w-[420px] mx-auto p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] text-black mb-2",children:" Touken OS "}),r.jsxs("div",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[13px] text-[#666] space-y-1",children:[r.jsxs("p",{className:"flex items-center gap-1",children:[" ",r.jsx(n4,{className:"w-4 h-4 inline"})," "]}),r.jsx("p",{children:'""'})]})]}),r.jsx("button",{onClick:g,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(ht,{className:"w-5 h-5 text-gray-500"})})]})})}):r.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t-2 border-gray-200 shadow-lg z-50 animate-slide-up",children:r.jsx("div",{className:"max-w-[420px] mx-auto p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] text-black mb-1",children:" Touken OS"}),r.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[13px] text-[#666]",children:""})]}),r.jsxs("button",{onClick:h,className:"bg-black text-white px-4 py-2 rounded-lg font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] flex items-center gap-2 hover:bg-gray-800 transition-colors",children:[r.jsx(Qj,{className:"w-4 h-4"}),""]}),r.jsx("button",{onClick:g,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(ht,{className:"w-5 h-5 text-gray-500"})})]})})})}function E8(){return N.useEffect(()=>{(async()=>{try{const n=new Image;n.crossOrigin="anonymous",await new Promise((o,l)=>{n.onload=o,n.onerror=l,n.src=_f});const s=[192,512],i={};for(const o of s){const l=document.createElement("canvas");l.width=o,l.height=o;const c=l.getContext("2d");if(c){c.fillStyle="#ffffff",c.fillRect(0,0,o,o);const u=Math.min(o/n.width,o/n.height)*.9,h=(o-n.width*u)/2,g=(o-n.height*u)/2;c.drawImage(n,h,g,n.width*u,n.height*u);const p=l.toDataURL("image/png");if(i[o]=p,o===192){let f=document.querySelector('link[rel="icon"]');f||(f=document.createElement("link"),f.rel="icon",document.head.appendChild(f)),f.href=p;let m=document.querySelector('link[rel="apple-touch-icon"]');m||(m=document.createElement("link"),m.rel="apple-touch-icon",document.head.appendChild(m)),m.href=p}}}A8(i)}catch(n){console.error("PWA:",n)}})()},[]),null}function A8(e){const n={name:"Touken OS",short_name:"Touken OS",description:"",start_url:window.location.origin+"/",display:"standalone",background_color:"#ffffff",theme_color:"#000000",orientation:"portrait",scope:"/",icons:[{src:e[192]||"/icon-192.png",sizes:"192x192",type:"image/png",purpose:"any"},{src:e[192]||"/icon-192.png",sizes:"192x192",type:"image/png",purpose:"maskable"},{src:e[512]||"/icon-512.png",sizes:"512x512",type:"image/png",purpose:"any"},{src:e[512]||"/icon-512.png",sizes:"512x512",type:"image/png",purpose:"maskable"}],categories:["entertainment","lifestyle"],lang:"zh-CN",dir:"ltr"},s=new Blob([JSON.stringify(n)],{type:"application/json"}),i=URL.createObjectURL(s);let o=document.querySelector('link[rel="manifest"]');o||(o=document.createElement("link"),o.rel="manifest",document.head.appendChild(o)),o.href=i}function T8({onAnimationComplete:e}){const[n,s]=N.useState(0),[i,o]=N.useState([]);return N.useEffect(()=>{let h=0;const g=setInterval(()=>{h++;const p=Math.min(100,h/100*100);s(p),p>10&&i.length===0&&o(f=>[...f,">> ..."]),p>30&&i.length===1&&o(f=>[...f,">> ..."]),p>50&&i.length===2&&o(f=>[...f,">> ..."]),p>70&&i.length===3&&o(f=>[...f,">> ..."]),p>90&&i.length===4&&o(f=>[...f,">> Touken OS "]),h>=100&&(clearInterval(g),e&&setTimeout(e,200))},20);return()=>clearInterval(g)},[i.length]),r.jsxs("div",{className:"fixed inset-0 bg-[#F5F5F5] flex flex-col items-center justify-center font-['Source_Han_Sans_CN_VF',sans-serif] z-50",children:[r.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.03]",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),r.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-[#2C2C2C]"}),r.jsxs("div",{className:"w-full max-w-[320px] flex flex-col items-center relative z-10",children:[r.jsxs(je.div,{initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0},transition:{duration:.8,ease:"easeOut"},className:"w-32 h-32 mb-12 relative",children:[r.jsx("div",{className:"absolute inset-0 bg-white rounded-full shadow-2xl opacity-50 blur-xl scale-90"}),r.jsx("img",{src:_f,alt:"Touken OS Logo",className:"w-full h-full object-contain relative z-10 drop-shadow-lg"})]}),r.jsx("div",{className:"w-full h-1 bg-[#D6D3CC] mb-6 relative overflow-hidden rounded-full",children:r.jsx(je.div,{className:"absolute top-0 left-0 bottom-0 bg-[#2C2C2C]",initial:{width:"0%"},animate:{width:`${n}%`},transition:{ease:"linear",duration:.1}})}),r.jsx("div",{className:"w-full h-24 font-mono text-[10px] text-[#5A5A55] space-y-1.5 overflow-hidden flex flex-col justify-end",children:r.jsx(ze,{mode:"popLayout",children:i.map((l,c)=>r.jsxs(je.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"flex items-center gap-2",children:[r.jsx("span",{className:"w-1 h-1 bg-[#34C759] rounded-full shrink-0 animate-pulse"}),r.jsx("span",{className:"truncate tracking-tight",children:l})]},c))})}),r.jsx("div",{className:"absolute -bottom-24 text-[9px] text-[#8C8C89] font-mono tracking-widest opacity-60",children:"CHRONOS GOVERNMENT TERMINAL V1.0"})]})]})}function D8(){N.useEffect(()=>{if("serviceWorker"in navigator){const s=()=>{navigator.serviceWorker.register("/sw.js").then(i=>{console.log("SW registered: ",i),i.addEventListener("updatefound",()=>{const o=i.installing;o&&o.addEventListener("statechange",()=>{o.state==="installed"&&navigator.serviceWorker.controller&&(console.log("New content is available; please refresh."),confirm("")&&(o.postMessage({type:"SKIP_WAITING"}),window.location.reload()))})})}).catch(i=>{if(i.message&&i.message.includes("MIME type")){console.warn("Service Worker registration skipped: sw.js not served with correct MIME type (likely dev environment issue).");return}console.log("SW registration failed: ",i)})};document.readyState==="complete"?s():window.addEventListener("load",s),navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()})}(()=>{let s=document.querySelector('meta[name="viewport"]');s||(s=document.createElement("meta"),s.setAttribute("name","viewport"),document.head.appendChild(s)),s.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover");let i=document.querySelector('meta[name="theme-color"]');i||(i=document.createElement("meta"),i.setAttribute("name","theme-color"),document.head.appendChild(i)),i.setAttribute("content","#000000");let o=document.querySelector('meta[name="apple-mobile-web-app-capable"]');o||(o=document.createElement("meta"),o.setAttribute("name","apple-mobile-web-app-capable"),document.head.appendChild(o)),o.setAttribute("content","yes");let l=document.querySelector('meta[name="apple-mobile-web-app-status-bar-style"]');l||(l=document.createElement("meta"),l.setAttribute("name","apple-mobile-web-app-status-bar-style"),document.head.appendChild(l)),l.setAttribute("content","default");let c=document.querySelector('meta[name="apple-mobile-web-app-title"]');c||(c=document.createElement("meta"),c.setAttribute("name","apple-mobile-web-app-title"),document.head.appendChild(c)),c.setAttribute("content","Touken OS");let u=document.querySelector('meta[name="description"]');u||(u=document.createElement("meta"),u.setAttribute("name","description"),document.head.appendChild(u)),u.setAttribute("content","");let h=document.querySelector('link[rel="manifest"]');h||(h=document.createElement("link"),h.setAttribute("rel","manifest"),document.head.appendChild(h)),h.setAttribute("href","/manifest.json");let g=document.querySelector('link[rel="apple-touch-icon"]');g||(g=document.createElement("link"),g.setAttribute("rel","apple-touch-icon"),document.head.appendChild(g)),g.setAttribute("href","/icon-192.png");let p=document.querySelector('link[rel="icon"]');p||(p=document.createElement("link"),p.setAttribute("rel","icon"),document.head.appendChild(p)),p.setAttribute("href","/icon-192.png")})(),document.addEventListener("gesturestart",s=>{s.preventDefault()}),document.addEventListener("gesturechange",s=>{s.preventDefault()}),document.addEventListener("gestureend",s=>{s.preventDefault()});let n=0;document.addEventListener("touchend",s=>{const i=Date.now();i-n<=300&&s.preventDefault(),n=i},!1)},[])}function F8(){const[e,n]=N.useState("loading"),[s,i]=N.useState(null),[o,l]=N.useState(!0),[c,u]=N.useState({}),[h,g]=N.useState(null),[p,f]=N.useState(!1),[m,b]=N.useState(null);D8(),N.useEffect(()=>{window.debugImageStorage=async()=>{console.log("=== Image Storage Debug ===");const v=await yb();console.log("Category stats:",v);const C=await $f();return console.log("All images:",C),console.log("Total images:",C.length),{stats:v,images:C}},console.log("Debug tools available:"),console.log("- window.debugImageStorage() - ")},[]),N.useEffect(()=>{const v=[{name:"apple-mobile-web-app-capable",content:"yes"},{name:"apple-mobile-web-app-status-bar-style",content:"default"},{name:"apple-mobile-web-app-title",content:"Touken OS"},{name:"mobile-web-app-capable",content:"yes"}],C=[{rel:"apple-touch-icon",href:"/icon-192.png"}];v.forEach(F=>{let j=document.querySelector(`meta[name="${F.name}"]`);j||(j=document.createElement("meta"),j.setAttribute("name",F.name),document.head.appendChild(j)),j.setAttribute("content",F.content)}),C.forEach(F=>{let j=document.querySelector(`link[href="${F.href}"]`);j||(j=document.createElement("link"),j.setAttribute("rel",F.rel),j.setAttribute("href",F.href),document.head.appendChild(j))}),[{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:""},{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Bakbak+One&family=Bona+Nova:ital,wght@0,400;0,700;1,400&family=Braah+One&display=swap"}].forEach(F=>{if(!document.querySelector(`link[href="${F.href}"]`)){const j=document.createElement("link");j.rel=F.rel,j.href=F.href,F.crossOrigin!==void 0&&(j.crossOrigin=F.crossOrigin),document.head.appendChild(j)}})},[]),N.useEffect(()=>{(async()=>{try{console.log("Initializing application..."),console.log("Initializing database..."),await he.init(),!1&&"Notification"in window&&Notification.permission;const F=new URLSearchParams(window.location.search).get("chatId");F&&(console.log("Found chatId in URL:",F),g(F),window.history.replaceState({},"","/"));const j=he.get(re.USER_DATA,"userData"),T=(async()=>{const U=["desktop_wallpaper","profileBackground","avatar","anniversary","system-icon-desktop1-chat","system-icon-desktop1-forum","system-icon-desktop1-memory","system-icon-desktop1-transfer","desktop2_timeImage","desktop2_card1","desktop2_card2","desktop2_card3","desktop2_card4","system-icon-desktop2-shop","system-icon-desktop2-game","system-icon-desktop2-schedule","system-icon-desktop2-health"],D={};return await Promise.all(U.map(async A=>{try{D[A]=await Ct(A)}catch(H){console.warn(`Failed to preload image ${A}`,H),D[A]=null}})),D})(),[z,B]=await Promise.all([j,T]);b({userData:z||null,images:B})}catch(C){console.error("Failed to initialize app:",C),b({userData:null,images:{}})}})()},[]),N.useEffect(()=>{p&&m&&(console.log("Animation complete and data ready, transitioning..."),u(m.images),m.userData?(console.log("User data found, redirecting to desktop"),i(m.userData),n("desktop")):(console.log("No user data found, showing login page"),n("login")),setTimeout(()=>l(!1),100))},[p,m]);const y=v=>{i(v),n("desktop")};return r.jsxs(r.Fragment,{children:[r.jsx(E8,{}),r.jsxs(ze,{mode:"wait",children:[e==="loading"&&r.jsx(je.div,{className:"fixed inset-0 z-50",exit:{opacity:0,scale:1.1,filter:"blur(10px)"},transition:{duration:.8,ease:"easeInOut"},children:r.jsx(T8,{onAnimationComplete:()=>f(!0)})},"loading"),e==="login"&&r.jsx(je.div,{className:"fixed inset-0 z-40",initial:{opacity:0,scale:.95,filter:"blur(10px)"},animate:{opacity:1,scale:1,filter:"blur(0px)"},exit:{opacity:0,scale:1.05,filter:"blur(10px)"},transition:{duration:.8,ease:"easeInOut"},children:r.jsx(q4,{onLoginSuccess:y})},"login"),e==="desktop"&&s&&r.jsx(je.div,{className:"fixed inset-0 z-30",initial:{opacity:0,scale:.95,filter:"blur(10px)"},animate:{opacity:1,scale:1,filter:"blur(0px)"},exit:{opacity:0,scale:1.05,filter:"blur(10px)"},transition:{duration:.8,ease:"easeInOut"},children:r.jsx(N8,{userData:s,preloadedImages:c,initialChatId:h})},"desktop")]}),r.jsx(_8,{}),r.jsx(w6,{position:"top-center"})]})}kv.createRoot(document.getElementById("root")).render(r.jsx(F8,{}));
