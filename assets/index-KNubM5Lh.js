function o5(e,t){for(var n=0;n<t.length;n++){const a=t[n];if(typeof a!="string"&&!Array.isArray(a)){for(const i in a)if(i!=="default"&&!(i in e)){const l=Object.getOwnPropertyDescriptor(a,i);l&&Object.defineProperty(e,i,l.get?l:{enumerable:!0,get:()=>a[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(i){if(i.ep)return;i.ep=!0;const l=n(i);fetch(i.href,l)}})();var zl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ic(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ru={exports:{}},uo={},Bu={exports:{}},ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T0;function l5(){if(T0)return ut;T0=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.iterator;function g(R){return R===null||typeof R!="object"?null:(R=h&&R[h]||R["@@iterator"],typeof R=="function"?R:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function k(R,V,ee){this.props=R,this.context=V,this.refs=y,this.updater=ee||x}k.prototype.isReactComponent={},k.prototype.setState=function(R,V){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,V,"setState")},k.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function w(){}w.prototype=k.prototype;function _(R,V,ee){this.props=R,this.context=V,this.refs=y,this.updater=ee||x}var N=_.prototype=new w;N.constructor=_,v(N,k.prototype),N.isPureReactComponent=!0;var T=Array.isArray,B=Object.prototype.hasOwnProperty,O={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function P(R,V,ee){var W,U={},Q=null,oe=null;if(V!=null)for(W in V.ref!==void 0&&(oe=V.ref),V.key!==void 0&&(Q=""+V.key),V)B.call(V,W)&&!$.hasOwnProperty(W)&&(U[W]=V[W]);var ne=arguments.length-2;if(ne===1)U.children=ee;else if(1<ne){for(var ae=Array(ne),ve=0;ve<ne;ve++)ae[ve]=arguments[ve+2];U.children=ae}if(R&&R.defaultProps)for(W in ne=R.defaultProps,ne)U[W]===void 0&&(U[W]=ne[W]);return{$$typeof:e,type:R,key:Q,ref:oe,props:U,_owner:O.current}}function A(R,V){return{$$typeof:e,type:R.type,key:V,ref:R.ref,props:R.props,_owner:R._owner}}function H(R){return typeof R=="object"&&R!==null&&R.$$typeof===e}function Y(R){var V={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(ee){return V[ee]})}var E=/\/+/g;function D(R,V){return typeof R=="object"&&R!==null&&R.key!=null?Y(""+R.key):V.toString(36)}function S(R,V,ee,W,U){var Q=typeof R;(Q==="undefined"||Q==="boolean")&&(R=null);var oe=!1;if(R===null)oe=!0;else switch(Q){case"string":case"number":oe=!0;break;case"object":switch(R.$$typeof){case e:case t:oe=!0}}if(oe)return oe=R,U=U(oe),R=W===""?"."+D(oe,0):W,T(U)?(ee="",R!=null&&(ee=R.replace(E,"$&/")+"/"),S(U,V,ee,"",function(ve){return ve})):U!=null&&(H(U)&&(U=A(U,ee+(!U.key||oe&&oe.key===U.key?"":(""+U.key).replace(E,"$&/")+"/")+R)),V.push(U)),1;if(oe=0,W=W===""?".":W+":",T(R))for(var ne=0;ne<R.length;ne++){Q=R[ne];var ae=W+D(Q,ne);oe+=S(Q,V,ee,ae,U)}else if(ae=g(R),typeof ae=="function")for(R=ae.call(R),ne=0;!(Q=R.next()).done;)Q=Q.value,ae=W+D(Q,ne++),oe+=S(Q,V,ee,ae,U);else if(Q==="object")throw V=String(R),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.");return oe}function z(R,V,ee){if(R==null)return R;var W=[],U=0;return S(R,W,"","",function(Q){return V.call(ee,Q,U++)}),W}function L(R){if(R._status===-1){var V=R._result;V=V(),V.then(function(ee){(R._status===0||R._status===-1)&&(R._status=1,R._result=ee)},function(ee){(R._status===0||R._status===-1)&&(R._status=2,R._result=ee)}),R._status===-1&&(R._status=0,R._result=V)}if(R._status===1)return R._result.default;throw R._result}var F={current:null},K={transition:null},G={ReactCurrentDispatcher:F,ReactCurrentBatchConfig:K,ReactCurrentOwner:O};function Z(){throw Error("act(...) is not supported in production builds of React.")}return ut.Children={map:z,forEach:function(R,V,ee){z(R,function(){V.apply(this,arguments)},ee)},count:function(R){var V=0;return z(R,function(){V++}),V},toArray:function(R){return z(R,function(V){return V})||[]},only:function(R){if(!H(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},ut.Component=k,ut.Fragment=n,ut.Profiler=i,ut.PureComponent=_,ut.StrictMode=a,ut.Suspense=u,ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G,ut.act=Z,ut.cloneElement=function(R,V,ee){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var W=v({},R.props),U=R.key,Q=R.ref,oe=R._owner;if(V!=null){if(V.ref!==void 0&&(Q=V.ref,oe=O.current),V.key!==void 0&&(U=""+V.key),R.type&&R.type.defaultProps)var ne=R.type.defaultProps;for(ae in V)B.call(V,ae)&&!$.hasOwnProperty(ae)&&(W[ae]=V[ae]===void 0&&ne!==void 0?ne[ae]:V[ae])}var ae=arguments.length-2;if(ae===1)W.children=ee;else if(1<ae){ne=Array(ae);for(var ve=0;ve<ae;ve++)ne[ve]=arguments[ve+2];W.children=ne}return{$$typeof:e,type:R.type,key:U,ref:Q,props:W,_owner:oe}},ut.createContext=function(R){return R={$$typeof:c,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:l,_context:R},R.Consumer=R},ut.createElement=P,ut.createFactory=function(R){var V=P.bind(null,R);return V.type=R,V},ut.createRef=function(){return{current:null}},ut.forwardRef=function(R){return{$$typeof:d,render:R}},ut.isValidElement=H,ut.lazy=function(R){return{$$typeof:p,_payload:{_status:-1,_result:R},_init:L}},ut.memo=function(R,V){return{$$typeof:m,type:R,compare:V===void 0?null:V}},ut.startTransition=function(R){var V=K.transition;K.transition={};try{R()}finally{K.transition=V}},ut.unstable_act=Z,ut.useCallback=function(R,V){return F.current.useCallback(R,V)},ut.useContext=function(R){return F.current.useContext(R)},ut.useDebugValue=function(){},ut.useDeferredValue=function(R){return F.current.useDeferredValue(R)},ut.useEffect=function(R,V){return F.current.useEffect(R,V)},ut.useId=function(){return F.current.useId()},ut.useImperativeHandle=function(R,V,ee){return F.current.useImperativeHandle(R,V,ee)},ut.useInsertionEffect=function(R,V){return F.current.useInsertionEffect(R,V)},ut.useLayoutEffect=function(R,V){return F.current.useLayoutEffect(R,V)},ut.useMemo=function(R,V){return F.current.useMemo(R,V)},ut.useReducer=function(R,V,ee){return F.current.useReducer(R,V,ee)},ut.useRef=function(R){return F.current.useRef(R)},ut.useState=function(R){return F.current.useState(R)},ut.useSyncExternalStore=function(R,V,ee){return F.current.useSyncExternalStore(R,V,ee)},ut.useTransition=function(){return F.current.useTransition()},ut.version="18.3.1",ut}var D0;function ih(){return D0||(D0=1,Bu.exports=l5()),Bu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M0;function c5(){if(M0)return uo;M0=1;var e=ih(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(d,u,m){var p,h={},g=null,x=null;m!==void 0&&(g=""+m),u.key!==void 0&&(g=""+u.key),u.ref!==void 0&&(x=u.ref);for(p in u)a.call(u,p)&&!l.hasOwnProperty(p)&&(h[p]=u[p]);if(d&&d.defaultProps)for(p in u=d.defaultProps,u)h[p]===void 0&&(h[p]=u[p]);return{$$typeof:t,type:d,key:g,ref:x,props:h,_owner:i.current}}return uo.Fragment=n,uo.jsx=c,uo.jsxs=c,uo}var P0;function d5(){return P0||(P0=1,Ru.exports=c5()),Ru.exports}var s=d5(),Vl={},Lu={exports:{}},qn={},Ou={exports:{}},zu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I0;function u5(){return I0||(I0=1,(function(e){function t(K,G){var Z=K.length;K.push(G);e:for(;0<Z;){var R=Z-1>>>1,V=K[R];if(0<i(V,G))K[R]=G,K[Z]=V,Z=R;else break e}}function n(K){return K.length===0?null:K[0]}function a(K){if(K.length===0)return null;var G=K[0],Z=K.pop();if(Z!==G){K[0]=Z;e:for(var R=0,V=K.length,ee=V>>>1;R<ee;){var W=2*(R+1)-1,U=K[W],Q=W+1,oe=K[Q];if(0>i(U,Z))Q<V&&0>i(oe,U)?(K[R]=oe,K[Q]=Z,R=Q):(K[R]=U,K[W]=Z,R=W);else if(Q<V&&0>i(oe,Z))K[R]=oe,K[Q]=Z,R=Q;else break e}}return G}function i(K,G){var Z=K.sortIndex-G.sortIndex;return Z!==0?Z:K.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();e.unstable_now=function(){return c.now()-d}}var u=[],m=[],p=1,h=null,g=3,x=!1,v=!1,y=!1,k=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(K){for(var G=n(m);G!==null;){if(G.callback===null)a(m);else if(G.startTime<=K)a(m),G.sortIndex=G.expirationTime,t(u,G);else break;G=n(m)}}function T(K){if(y=!1,N(K),!v)if(n(u)!==null)v=!0,L(B);else{var G=n(m);G!==null&&F(T,G.startTime-K)}}function B(K,G){v=!1,y&&(y=!1,w(P),P=-1),x=!0;var Z=g;try{for(N(G),h=n(u);h!==null&&(!(h.expirationTime>G)||K&&!Y());){var R=h.callback;if(typeof R=="function"){h.callback=null,g=h.priorityLevel;var V=R(h.expirationTime<=G);G=e.unstable_now(),typeof V=="function"?h.callback=V:h===n(u)&&a(u),N(G)}else a(u);h=n(u)}if(h!==null)var ee=!0;else{var W=n(m);W!==null&&F(T,W.startTime-G),ee=!1}return ee}finally{h=null,g=Z,x=!1}}var O=!1,$=null,P=-1,A=5,H=-1;function Y(){return!(e.unstable_now()-H<A)}function E(){if($!==null){var K=e.unstable_now();H=K;var G=!0;try{G=$(!0,K)}finally{G?D():(O=!1,$=null)}}else O=!1}var D;if(typeof _=="function")D=function(){_(E)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,z=S.port2;S.port1.onmessage=E,D=function(){z.postMessage(null)}}else D=function(){k(E,0)};function L(K){$=K,O||(O=!0,D())}function F(K,G){P=k(function(){K(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){v||x||(v=!0,L(B))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(K){switch(g){case 1:case 2:case 3:var G=3;break;default:G=g}var Z=g;g=G;try{return K()}finally{g=Z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,G){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var Z=g;g=K;try{return G()}finally{g=Z}},e.unstable_scheduleCallback=function(K,G,Z){var R=e.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?R+Z:R):Z=R,K){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=Z+V,K={id:p++,callback:G,priorityLevel:K,startTime:Z,expirationTime:V,sortIndex:-1},Z>R?(K.sortIndex=Z,t(m,K),n(u)===null&&K===n(m)&&(y?(w(P),P=-1):y=!0,F(T,Z-R))):(K.sortIndex=V,t(u,K),v||x||(v=!0,L(B))),K},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function(K){var G=g;return function(){var Z=g;g=G;try{return K.apply(this,arguments)}finally{g=Z}}}})(zu)),zu}var F0;function f5(){return F0||(F0=1,Ou.exports=u5()),Ou.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R0;function h5(){if(R0)return qn;R0=1;var e=ih(),t=f5();function n(r){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+r,f=1;f<arguments.length;f++)o+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,i={};function l(r,o){c(r,o),c(r+"Capture",o)}function c(r,o){for(i[r]=o,r=0;r<o.length;r++)a.add(o[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},h={};function g(r){return u.call(h,r)?!0:u.call(p,r)?!1:m.test(r)?h[r]=!0:(p[r]=!0,!1)}function x(r,o,f,b){if(f!==null&&f.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return b?!1:f!==null?!f.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function v(r,o,f,b){if(o===null||typeof o>"u"||x(r,o,f,b))return!0;if(b)return!1;if(f!==null)switch(f.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function y(r,o,f,b,j,M,q){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=b,this.attributeNamespace=j,this.mustUseProperty=f,this.propertyName=r,this.type=o,this.sanitizeURL=M,this.removeEmptyString=q}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){k[r]=new y(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var o=r[0];k[o]=new y(o,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){k[r]=new y(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){k[r]=new y(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){k[r]=new y(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){k[r]=new y(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){k[r]=new y(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){k[r]=new y(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){k[r]=new y(r,5,!1,r.toLowerCase(),null,!1,!1)});var w=/[\-:]([a-z])/g;function _(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var o=r.replace(w,_);k[o]=new y(o,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var o=r.replace(w,_);k[o]=new y(o,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var o=r.replace(w,_);k[o]=new y(o,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){k[r]=new y(r,1,!1,r.toLowerCase(),null,!1,!1)}),k.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){k[r]=new y(r,1,!1,r.toLowerCase(),null,!0,!0)});function N(r,o,f,b){var j=k.hasOwnProperty(o)?k[o]:null;(j!==null?j.type!==0:b||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(v(o,f,j,b)&&(f=null),b||j===null?g(o)&&(f===null?r.removeAttribute(o):r.setAttribute(o,""+f)):j.mustUseProperty?r[j.propertyName]=f===null?j.type===3?!1:"":f:(o=j.attributeName,b=j.attributeNamespace,f===null?r.removeAttribute(o):(j=j.type,f=j===3||j===4&&f===!0?"":""+f,b?r.setAttributeNS(b,o,f):r.setAttribute(o,f))))}var T=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,B=Symbol.for("react.element"),O=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),Y=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),F=Symbol.for("react.offscreen"),K=Symbol.iterator;function G(r){return r===null||typeof r!="object"?null:(r=K&&r[K]||r["@@iterator"],typeof r=="function"?r:null)}var Z=Object.assign,R;function V(r){if(R===void 0)try{throw Error()}catch(f){var o=f.stack.trim().match(/\n( *(at )?)/);R=o&&o[1]||""}return`
`+R+r}var ee=!1;function W(r,o){if(!r||ee)return"";ee=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(we){var b=we}Reflect.construct(r,[],o)}else{try{o.call()}catch(we){b=we}r.call(o.prototype)}else{try{throw Error()}catch(we){b=we}r()}}catch(we){if(we&&b&&typeof we.stack=="string"){for(var j=we.stack.split(`
`),M=b.stack.split(`
`),q=j.length-1,re=M.length-1;1<=q&&0<=re&&j[q]!==M[re];)re--;for(;1<=q&&0<=re;q--,re--)if(j[q]!==M[re]){if(q!==1||re!==1)do if(q--,re--,0>re||j[q]!==M[re]){var de=`
`+j[q].replace(" at new "," at ");return r.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",r.displayName)),de}while(1<=q&&0<=re);break}}}finally{ee=!1,Error.prepareStackTrace=f}return(r=r?r.displayName||r.name:"")?V(r):""}function U(r){switch(r.tag){case 5:return V(r.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return r=W(r.type,!1),r;case 11:return r=W(r.type.render,!1),r;case 1:return r=W(r.type,!0),r;default:return""}}function Q(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case $:return"Fragment";case O:return"Portal";case A:return"Profiler";case P:return"StrictMode";case D:return"Suspense";case S:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case Y:return(r.displayName||"Context")+".Consumer";case H:return(r._context.displayName||"Context")+".Provider";case E:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case z:return o=r.displayName||null,o!==null?o:Q(r.type)||"Memo";case L:o=r._payload,r=r._init;try{return Q(r(o))}catch{}}return null}function oe(r){var o=r.type;switch(r.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=o.render,r=r.displayName||r.name||"",o.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Q(o);case 8:return o===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function ne(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ae(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function ve(r){var o=ae(r)?"checked":"value",f=Object.getOwnPropertyDescriptor(r.constructor.prototype,o),b=""+r[o];if(!r.hasOwnProperty(o)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var j=f.get,M=f.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return j.call(this)},set:function(q){b=""+q,M.call(this,q)}}),Object.defineProperty(r,o,{enumerable:f.enumerable}),{getValue:function(){return b},setValue:function(q){b=""+q},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function se(r){r._valueTracker||(r._valueTracker=ve(r))}function xe(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var f=o.getValue(),b="";return r&&(b=ae(r)?r.checked?"true":"false":r.value),r=b,r!==f?(o.setValue(r),!0):!1}function Ie(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function I(r,o){var f=o.checked;return Z({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??r._wrapperState.initialChecked})}function me(r,o){var f=o.defaultValue==null?"":o.defaultValue,b=o.checked!=null?o.checked:o.defaultChecked;f=ne(o.value!=null?o.value:f),r._wrapperState={initialChecked:b,initialValue:f,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function he(r,o){o=o.checked,o!=null&&N(r,"checked",o,!1)}function J(r,o){he(r,o);var f=ne(o.value),b=o.type;if(f!=null)b==="number"?(f===0&&r.value===""||r.value!=f)&&(r.value=""+f):r.value!==""+f&&(r.value=""+f);else if(b==="submit"||b==="reset"){r.removeAttribute("value");return}o.hasOwnProperty("value")?ie(r,o.type,f):o.hasOwnProperty("defaultValue")&&ie(r,o.type,ne(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(r.defaultChecked=!!o.defaultChecked)}function X(r,o,f){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var b=o.type;if(!(b!=="submit"&&b!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+r._wrapperState.initialValue,f||o===r.value||(r.value=o),r.defaultValue=o}f=r.name,f!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,f!==""&&(r.name=f)}function ie(r,o,f){(o!=="number"||Ie(r.ownerDocument)!==r)&&(f==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+f&&(r.defaultValue=""+f))}var le=Array.isArray;function ye(r,o,f,b){if(r=r.options,o){o={};for(var j=0;j<f.length;j++)o["$"+f[j]]=!0;for(f=0;f<r.length;f++)j=o.hasOwnProperty("$"+r[f].value),r[f].selected!==j&&(r[f].selected=j),j&&b&&(r[f].defaultSelected=!0)}else{for(f=""+ne(f),o=null,j=0;j<r.length;j++){if(r[j].value===f){r[j].selected=!0,b&&(r[j].defaultSelected=!0);return}o!==null||r[j].disabled||(o=r[j])}o!==null&&(o.selected=!0)}}function ce(r,o){if(o.dangerouslySetInnerHTML!=null)throw Error(n(91));return Z({},o,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Ce(r,o){var f=o.value;if(f==null){if(f=o.children,o=o.defaultValue,f!=null){if(o!=null)throw Error(n(92));if(le(f)){if(1<f.length)throw Error(n(93));f=f[0]}o=f}o==null&&(o=""),f=o}r._wrapperState={initialValue:ne(f)}}function _e(r,o){var f=ne(o.value),b=ne(o.defaultValue);f!=null&&(f=""+f,f!==r.value&&(r.value=f),o.defaultValue==null&&r.defaultValue!==f&&(r.defaultValue=f)),b!=null&&(r.defaultValue=""+b)}function je(r){var o=r.textContent;o===r._wrapperState.initialValue&&o!==""&&o!==null&&(r.value=o)}function Re(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function st(r,o){return r==null||r==="http://www.w3.org/1999/xhtml"?Re(o):r==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Oe,at=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,f,b,j){MSApp.execUnsafeLocalFunction(function(){return r(o,f,b,j)})}:r})(function(r,o){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=o;else{for(Oe=Oe||document.createElement("div"),Oe.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Oe.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;o.firstChild;)r.appendChild(o.firstChild)}});function ct(r,o){if(o){var f=r.firstChild;if(f&&f===r.lastChild&&f.nodeType===3){f.nodeValue=o;return}}r.textContent=o}var ht={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pt=["Webkit","ms","Moz","O"];Object.keys(ht).forEach(function(r){pt.forEach(function(o){o=o+r.charAt(0).toUpperCase()+r.substring(1),ht[o]=ht[r]})});function ot(r,o,f){return o==null||typeof o=="boolean"||o===""?"":f||typeof o!="number"||o===0||ht.hasOwnProperty(r)&&ht[r]?(""+o).trim():o+"px"}function $t(r,o){r=r.style;for(var f in o)if(o.hasOwnProperty(f)){var b=f.indexOf("--")===0,j=ot(f,o[f],b);f==="float"&&(f="cssFloat"),b?r.setProperty(f,j):r[f]=j}}var Dt=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kt(r,o){if(o){if(Dt[r]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(n(137,r));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(n(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(n(61))}if(o.style!=null&&typeof o.style!="object")throw Error(n(62))}}function Tn(r,o){if(r.indexOf("-")===-1)return typeof o.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rn=null;function Qt(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Dn=null,dn=null,vt=null;function Xt(r){if(r=Yi(r)){if(typeof Dn!="function")throw Error(n(280));var o=r.stateNode;o&&(o=tl(o),Dn(r.stateNode,r.type,o))}}function qe(r){dn?vt?vt.push(r):vt=[r]:dn=r}function St(){if(dn){var r=dn,o=vt;if(vt=dn=null,Xt(r),o)for(r=0;r<o.length;r++)Xt(o[r])}}function Lt(r,o){return r(o)}function Ct(){}var Gt=!1;function qt(r,o,f){if(Gt)return r(o,f);Gt=!0;try{return Lt(r,o,f)}finally{Gt=!1,(dn!==null||vt!==null)&&(Ct(),St())}}function Jt(r,o){var f=r.stateNode;if(f===null)return null;var b=tl(f);if(b===null)return null;f=b[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(r=r.type,b=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!b;break e;default:r=!1}if(r)return null;if(f&&typeof f!="function")throw Error(n(231,o,typeof f));return f}var gs=!1;if(d)try{var tn={};Object.defineProperty(tn,"passive",{get:function(){gs=!0}}),window.addEventListener("test",tn,tn),window.removeEventListener("test",tn,tn)}catch{gs=!1}function Vn(r,o,f,b,j,M,q,re,de){var we=Array.prototype.slice.call(arguments,3);try{o.apply(f,we)}catch(Ae){this.onError(Ae)}}var Ms=!1,mn=null,hr=!1,Vr=null,Fo={onError:function(r){Ms=!0,mn=r}};function Mi(r,o,f,b,j,M,q,re,de){Ms=!1,mn=null,Vn.apply(Fo,arguments)}function td(r,o,f,b,j,M,q,re,de){if(Mi.apply(this,arguments),Ms){if(Ms){var we=mn;Ms=!1,mn=null}else throw Error(n(198));hr||(hr=!0,Vr=we)}}function Ps(r){var o=r,f=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(f=o.return),r=o.return;while(r)}return o.tag===3?f:null}function Ro(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function nd(r){if(Ps(r)!==r)throw Error(n(188))}function $r(r){var o=r.alternate;if(!o){if(o=Ps(r),o===null)throw Error(n(188));return o!==r?null:r}for(var f=r,b=o;;){var j=f.return;if(j===null)break;var M=j.alternate;if(M===null){if(b=j.return,b!==null){f=b;continue}break}if(j.child===M.child){for(M=j.child;M;){if(M===f)return nd(j),r;if(M===b)return nd(j),o;M=M.sibling}throw Error(n(188))}if(f.return!==b.return)f=j,b=M;else{for(var q=!1,re=j.child;re;){if(re===f){q=!0,f=j,b=M;break}if(re===b){q=!0,b=j,f=M;break}re=re.sibling}if(!q){for(re=M.child;re;){if(re===f){q=!0,f=M,b=j;break}if(re===b){q=!0,b=M,f=j;break}re=re.sibling}if(!q)throw Error(n(189))}}if(f.alternate!==b)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?r:o}function Hr(r){return r=$r(r),r!==null?Bo(r):null}function Bo(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var o=Bo(r);if(o!==null)return o;r=r.sibling}return null}var Lo=t.unstable_scheduleCallback,pr=t.unstable_cancelCallback,Ur=t.unstable_shouldYield,Wr=t.unstable_requestPaint,Et=t.unstable_now,Mn=t.unstable_getCurrentPriorityLevel,Pi=t.unstable_ImmediatePriority,Pn=t.unstable_UserBlockingPriority,Kr=t.unstable_NormalPriority,sd=t.unstable_LowPriority,Oo=t.unstable_IdlePriority,Gr=null,Nt=null;function Na(r){if(Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(Gr,r,void 0,(r.current.flags&128)===128)}catch{}}var $n=Math.clz32?Math.clz32:id,rd=Math.log,ad=Math.LN2;function id(r){return r>>>=0,r===0?32:31-(rd(r)/ad|0)|0}var _a=64,xs=4194304;function In(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Ea(r,o){var f=r.pendingLanes;if(f===0)return 0;var b=0,j=r.suspendedLanes,M=r.pingedLanes,q=f&268435455;if(q!==0){var re=q&~j;re!==0?b=In(re):(M&=q,M!==0&&(b=In(M)))}else q=f&~j,q!==0?b=In(q):M!==0&&(b=In(M));if(b===0)return 0;if(o!==0&&o!==b&&(o&j)===0&&(j=b&-b,M=o&-o,j>=M||j===16&&(M&4194240)!==0))return o;if((b&4)!==0&&(b|=f&16),o=r.entangledLanes,o!==0)for(r=r.entanglements,o&=b;0<o;)f=31-$n(o),j=1<<f,b|=r[f],o&=~j;return b}function zo(r,o){switch(r){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function od(r,o){for(var f=r.suspendedLanes,b=r.pingedLanes,j=r.expirationTimes,M=r.pendingLanes;0<M;){var q=31-$n(M),re=1<<q,de=j[q];de===-1?((re&f)===0||(re&b)!==0)&&(j[q]=zo(re,o)):de<=o&&(r.expiredLanes|=re),M&=~re}}function Ii(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Vo(){var r=_a;return _a<<=1,(_a&4194240)===0&&(_a=64),r}function Aa(r){for(var o=[],f=0;31>f;f++)o.push(r);return o}function qr(r,o,f){r.pendingLanes|=o,o!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,o=31-$n(o),r[o]=f}function ld(r,o){var f=r.pendingLanes&~o;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=o,r.mutableReadLanes&=o,r.entangledLanes&=o,o=r.entanglements;var b=r.eventTimes;for(r=r.expirationTimes;0<f;){var j=31-$n(f),M=1<<j;o[j]=0,b[j]=-1,r[j]=-1,f&=~M}}function Fi(r,o){var f=r.entangledLanes|=o;for(r=r.entanglements;f;){var b=31-$n(f),j=1<<b;j&o|r[b]&o&&(r[b]|=o),f&=~j}}var bt=0;function $o(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Ho,Ri,ke,Ne,pe,rt=!1,Je=[],Qe=null,Xe=null,mt=null,Mt=new Map,Ge=new Map,et=[],At="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gn(r,o){switch(r){case"focusin":case"focusout":Qe=null;break;case"dragenter":case"dragleave":Xe=null;break;case"mouseover":case"mouseout":mt=null;break;case"pointerover":case"pointerout":Mt.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ge.delete(o.pointerId)}}function Pt(r,o,f,b,j,M){return r===null||r.nativeEvent!==M?(r={blockedOn:o,domEventName:f,eventSystemFlags:b,nativeEvent:M,targetContainers:[j]},o!==null&&(o=Yi(o),o!==null&&Ri(o)),r):(r.eventSystemFlags|=b,o=r.targetContainers,j!==null&&o.indexOf(j)===-1&&o.push(j),r)}function it(r,o,f,b,j){switch(o){case"focusin":return Qe=Pt(Qe,r,o,f,b,j),!0;case"dragenter":return Xe=Pt(Xe,r,o,f,b,j),!0;case"mouseover":return mt=Pt(mt,r,o,f,b,j),!0;case"pointerover":var M=j.pointerId;return Mt.set(M,Pt(Mt.get(M)||null,r,o,f,b,j)),!0;case"gotpointercapture":return M=j.pointerId,Ge.set(M,Pt(Ge.get(M)||null,r,o,f,b,j)),!0}return!1}function xn(r){var o=Yr(r.target);if(o!==null){var f=Ps(o);if(f!==null){if(o=f.tag,o===13){if(o=Ro(f),o!==null){r.blockedOn=o,pe(r.priority,function(){ke(f)});return}}else if(o===3&&f.stateNode.current.memoizedState.isDehydrated){r.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}r.blockedOn=null}function It(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var f=cd(r.domEventName,r.eventSystemFlags,o[0],r.nativeEvent);if(f===null){f=r.nativeEvent;var b=new f.constructor(f.type,f);rn=b,f.target.dispatchEvent(b),rn=null}else return o=Yi(f),o!==null&&Ri(o),r.blockedOn=f,!1;o.shift()}return!0}function Ue(r,o,f){It(r)&&f.delete(o)}function lt(){rt=!1,Qe!==null&&It(Qe)&&(Qe=null),Xe!==null&&It(Xe)&&(Xe=null),mt!==null&&It(mt)&&(mt=null),Mt.forEach(Ue),Ge.forEach(Ue)}function gt(r,o){r.blockedOn===o&&(r.blockedOn=null,rt||(rt=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,lt)))}function un(r){function o(j){return gt(j,r)}if(0<Je.length){gt(Je[0],r);for(var f=1;f<Je.length;f++){var b=Je[f];b.blockedOn===r&&(b.blockedOn=null)}}for(Qe!==null&&gt(Qe,r),Xe!==null&&gt(Xe,r),mt!==null&&gt(mt,r),Mt.forEach(o),Ge.forEach(o),f=0;f<et.length;f++)b=et[f],b.blockedOn===r&&(b.blockedOn=null);for(;0<et.length&&(f=et[0],f.blockedOn===null);)xn(f),f.blockedOn===null&&et.shift()}var Fn=T.ReactCurrentBatchConfig,bn=!0;function Ta(r,o,f,b){var j=bt,M=Fn.transition;Fn.transition=null;try{bt=1,Bi(r,o,f,b)}finally{bt=j,Fn.transition=M}}function Qs(r,o,f,b){var j=bt,M=Fn.transition;Fn.transition=null;try{bt=4,Bi(r,o,f,b)}finally{bt=j,Fn.transition=M}}function Bi(r,o,f,b){if(bn){var j=cd(r,o,f,b);if(j===null)Nd(r,o,b,Da,f),gn(r,b);else if(it(j,r,o,f,b))b.stopPropagation();else if(gn(r,b),o&4&&-1<At.indexOf(r)){for(;j!==null;){var M=Yi(j);if(M!==null&&Ho(M),M=cd(r,o,f,b),M===null&&Nd(r,o,b,Da,f),M===j)break;j=M}j!==null&&b.stopPropagation()}else Nd(r,o,b,null,f)}}var Da=null;function cd(r,o,f,b){if(Da=null,r=Qt(b),r=Yr(r),r!==null)if(o=Ps(r),o===null)r=null;else if(f=o.tag,f===13){if(r=Ro(o),r!==null)return r;r=null}else if(f===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null);return Da=r,null}function gp(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Mn()){case Pi:return 1;case Pn:return 4;case Kr:case sd:return 16;case Oo:return 536870912;default:return 16}default:return 16}}var mr=null,dd=null,Uo=null;function xp(){if(Uo)return Uo;var r,o=dd,f=o.length,b,j="value"in mr?mr.value:mr.textContent,M=j.length;for(r=0;r<f&&o[r]===j[r];r++);var q=f-r;for(b=1;b<=q&&o[f-b]===j[M-b];b++);return Uo=j.slice(r,1<b?1-b:void 0)}function Wo(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function Ko(){return!0}function bp(){return!1}function Xn(r){function o(f,b,j,M,q){this._reactName=f,this._targetInst=j,this.type=b,this.nativeEvent=M,this.target=q,this.currentTarget=null;for(var re in r)r.hasOwnProperty(re)&&(f=r[re],this[re]=f?f(M):M[re]);return this.isDefaultPrevented=(M.defaultPrevented!=null?M.defaultPrevented:M.returnValue===!1)?Ko:bp,this.isPropagationStopped=bp,this}return Z(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Ko)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Ko)},persist:function(){},isPersistent:Ko}),o}var Ma={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ud=Xn(Ma),Li=Z({},Ma,{view:0,detail:0}),I2=Xn(Li),fd,hd,Oi,Go=Z({},Li,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:md,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Oi&&(Oi&&r.type==="mousemove"?(fd=r.screenX-Oi.screenX,hd=r.screenY-Oi.screenY):hd=fd=0,Oi=r),fd)},movementY:function(r){return"movementY"in r?r.movementY:hd}}),yp=Xn(Go),F2=Z({},Go,{dataTransfer:0}),R2=Xn(F2),B2=Z({},Li,{relatedTarget:0}),pd=Xn(B2),L2=Z({},Ma,{animationName:0,elapsedTime:0,pseudoElement:0}),O2=Xn(L2),z2=Z({},Ma,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),V2=Xn(z2),$2=Z({},Ma,{data:0}),vp=Xn($2),H2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},W2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function K2(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=W2[r])?!!o[r]:!1}function md(){return K2}var G2=Z({},Li,{key:function(r){if(r.key){var o=H2[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=Wo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?U2[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:md,charCode:function(r){return r.type==="keypress"?Wo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Wo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),q2=Xn(G2),Y2=Z({},Go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wp=Xn(Y2),Z2=Z({},Li,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:md}),Q2=Xn(Z2),X2=Z({},Ma,{propertyName:0,elapsedTime:0,pseudoElement:0}),J2=Xn(X2),ew=Z({},Go,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),tw=Xn(ew),nw=[9,13,27,32],gd=d&&"CompositionEvent"in window,zi=null;d&&"documentMode"in document&&(zi=document.documentMode);var sw=d&&"TextEvent"in window&&!zi,Sp=d&&(!gd||zi&&8<zi&&11>=zi),kp=" ",Cp=!1;function jp(r,o){switch(r){case"keyup":return nw.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Np(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Pa=!1;function rw(r,o){switch(r){case"compositionend":return Np(o);case"keypress":return o.which!==32?null:(Cp=!0,kp);case"textInput":return r=o.data,r===kp&&Cp?null:r;default:return null}}function aw(r,o){if(Pa)return r==="compositionend"||!gd&&jp(r,o)?(r=xp(),Uo=dd=mr=null,Pa=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Sp&&o.locale!=="ko"?null:o.data;default:return null}}var iw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _p(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!iw[r.type]:o==="textarea"}function Ep(r,o,f,b){qe(b),o=Xo(o,"onChange"),0<o.length&&(f=new ud("onChange","change",null,f,b),r.push({event:f,listeners:o}))}var Vi=null,$i=null;function ow(r){Kp(r,0)}function qo(r){var o=La(r);if(xe(o))return r}function lw(r,o){if(r==="change")return o}var Ap=!1;if(d){var xd;if(d){var bd="oninput"in document;if(!bd){var Tp=document.createElement("div");Tp.setAttribute("oninput","return;"),bd=typeof Tp.oninput=="function"}xd=bd}else xd=!1;Ap=xd&&(!document.documentMode||9<document.documentMode)}function Dp(){Vi&&(Vi.detachEvent("onpropertychange",Mp),$i=Vi=null)}function Mp(r){if(r.propertyName==="value"&&qo($i)){var o=[];Ep(o,$i,r,Qt(r)),qt(ow,o)}}function cw(r,o,f){r==="focusin"?(Dp(),Vi=o,$i=f,Vi.attachEvent("onpropertychange",Mp)):r==="focusout"&&Dp()}function dw(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return qo($i)}function uw(r,o){if(r==="click")return qo(o)}function fw(r,o){if(r==="input"||r==="change")return qo(o)}function hw(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var bs=typeof Object.is=="function"?Object.is:hw;function Hi(r,o){if(bs(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var f=Object.keys(r),b=Object.keys(o);if(f.length!==b.length)return!1;for(b=0;b<f.length;b++){var j=f[b];if(!u.call(o,j)||!bs(r[j],o[j]))return!1}return!0}function Pp(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Ip(r,o){var f=Pp(r);r=0;for(var b;f;){if(f.nodeType===3){if(b=r+f.textContent.length,r<=o&&b>=o)return{node:f,offset:o-r};r=b}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Pp(f)}}function Fp(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?Fp(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function Rp(){for(var r=window,o=Ie();o instanceof r.HTMLIFrameElement;){try{var f=typeof o.contentWindow.location.href=="string"}catch{f=!1}if(f)r=o.contentWindow;else break;o=Ie(r.document)}return o}function yd(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}function pw(r){var o=Rp(),f=r.focusedElem,b=r.selectionRange;if(o!==f&&f&&f.ownerDocument&&Fp(f.ownerDocument.documentElement,f)){if(b!==null&&yd(f)){if(o=b.start,r=b.end,r===void 0&&(r=o),"selectionStart"in f)f.selectionStart=o,f.selectionEnd=Math.min(r,f.value.length);else if(r=(o=f.ownerDocument||document)&&o.defaultView||window,r.getSelection){r=r.getSelection();var j=f.textContent.length,M=Math.min(b.start,j);b=b.end===void 0?M:Math.min(b.end,j),!r.extend&&M>b&&(j=b,b=M,M=j),j=Ip(f,M);var q=Ip(f,b);j&&q&&(r.rangeCount!==1||r.anchorNode!==j.node||r.anchorOffset!==j.offset||r.focusNode!==q.node||r.focusOffset!==q.offset)&&(o=o.createRange(),o.setStart(j.node,j.offset),r.removeAllRanges(),M>b?(r.addRange(o),r.extend(q.node,q.offset)):(o.setEnd(q.node,q.offset),r.addRange(o)))}}for(o=[],r=f;r=r.parentNode;)r.nodeType===1&&o.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<o.length;f++)r=o[f],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var mw=d&&"documentMode"in document&&11>=document.documentMode,Ia=null,vd=null,Ui=null,wd=!1;function Bp(r,o,f){var b=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;wd||Ia==null||Ia!==Ie(b)||(b=Ia,"selectionStart"in b&&yd(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),Ui&&Hi(Ui,b)||(Ui=b,b=Xo(vd,"onSelect"),0<b.length&&(o=new ud("onSelect","select",null,o,f),r.push({event:o,listeners:b}),o.target=Ia)))}function Yo(r,o){var f={};return f[r.toLowerCase()]=o.toLowerCase(),f["Webkit"+r]="webkit"+o,f["Moz"+r]="moz"+o,f}var Fa={animationend:Yo("Animation","AnimationEnd"),animationiteration:Yo("Animation","AnimationIteration"),animationstart:Yo("Animation","AnimationStart"),transitionend:Yo("Transition","TransitionEnd")},Sd={},Lp={};d&&(Lp=document.createElement("div").style,"AnimationEvent"in window||(delete Fa.animationend.animation,delete Fa.animationiteration.animation,delete Fa.animationstart.animation),"TransitionEvent"in window||delete Fa.transitionend.transition);function Zo(r){if(Sd[r])return Sd[r];if(!Fa[r])return r;var o=Fa[r],f;for(f in o)if(o.hasOwnProperty(f)&&f in Lp)return Sd[r]=o[f];return r}var Op=Zo("animationend"),zp=Zo("animationiteration"),Vp=Zo("animationstart"),$p=Zo("transitionend"),Hp=new Map,Up="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gr(r,o){Hp.set(r,o),l(o,[r])}for(var kd=0;kd<Up.length;kd++){var Cd=Up[kd],gw=Cd.toLowerCase(),xw=Cd[0].toUpperCase()+Cd.slice(1);gr(gw,"on"+xw)}gr(Op,"onAnimationEnd"),gr(zp,"onAnimationIteration"),gr(Vp,"onAnimationStart"),gr("dblclick","onDoubleClick"),gr("focusin","onFocus"),gr("focusout","onBlur"),gr($p,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wi));function Wp(r,o,f){var b=r.type||"unknown-event";r.currentTarget=f,td(b,o,void 0,r),r.currentTarget=null}function Kp(r,o){o=(o&4)!==0;for(var f=0;f<r.length;f++){var b=r[f],j=b.event;b=b.listeners;e:{var M=void 0;if(o)for(var q=b.length-1;0<=q;q--){var re=b[q],de=re.instance,we=re.currentTarget;if(re=re.listener,de!==M&&j.isPropagationStopped())break e;Wp(j,re,we),M=de}else for(q=0;q<b.length;q++){if(re=b[q],de=re.instance,we=re.currentTarget,re=re.listener,de!==M&&j.isPropagationStopped())break e;Wp(j,re,we),M=de}}}if(hr)throw r=Vr,hr=!1,Vr=null,r}function Ft(r,o){var f=o[Md];f===void 0&&(f=o[Md]=new Set);var b=r+"__bubble";f.has(b)||(Gp(o,r,2,!1),f.add(b))}function jd(r,o,f){var b=0;o&&(b|=4),Gp(f,r,b,o)}var Qo="_reactListening"+Math.random().toString(36).slice(2);function Ki(r){if(!r[Qo]){r[Qo]=!0,a.forEach(function(f){f!=="selectionchange"&&(bw.has(f)||jd(f,!1,r),jd(f,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[Qo]||(o[Qo]=!0,jd("selectionchange",!1,o))}}function Gp(r,o,f,b){switch(gp(o)){case 1:var j=Ta;break;case 4:j=Qs;break;default:j=Bi}f=j.bind(null,o,f,r),j=void 0,!gs||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(j=!0),b?j!==void 0?r.addEventListener(o,f,{capture:!0,passive:j}):r.addEventListener(o,f,!0):j!==void 0?r.addEventListener(o,f,{passive:j}):r.addEventListener(o,f,!1)}function Nd(r,o,f,b,j){var M=b;if((o&1)===0&&(o&2)===0&&b!==null)e:for(;;){if(b===null)return;var q=b.tag;if(q===3||q===4){var re=b.stateNode.containerInfo;if(re===j||re.nodeType===8&&re.parentNode===j)break;if(q===4)for(q=b.return;q!==null;){var de=q.tag;if((de===3||de===4)&&(de=q.stateNode.containerInfo,de===j||de.nodeType===8&&de.parentNode===j))return;q=q.return}for(;re!==null;){if(q=Yr(re),q===null)return;if(de=q.tag,de===5||de===6){b=M=q;continue e}re=re.parentNode}}b=b.return}qt(function(){var we=M,Ae=Qt(f),De=[];e:{var Ee=Hp.get(r);if(Ee!==void 0){var Le=ud,Ve=r;switch(r){case"keypress":if(Wo(f)===0)break e;case"keydown":case"keyup":Le=q2;break;case"focusin":Ve="focus",Le=pd;break;case"focusout":Ve="blur",Le=pd;break;case"beforeblur":case"afterblur":Le=pd;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Le=yp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Le=R2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Le=Q2;break;case Op:case zp:case Vp:Le=O2;break;case $p:Le=J2;break;case"scroll":Le=I2;break;case"wheel":Le=tw;break;case"copy":case"cut":case"paste":Le=V2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Le=wp}var We=(o&4)!==0,en=!We&&r==="scroll",ge=We?Ee!==null?Ee+"Capture":null:Ee;We=[];for(var fe=we,be;fe!==null;){be=fe;var Me=be.stateNode;if(be.tag===5&&Me!==null&&(be=Me,ge!==null&&(Me=Jt(fe,ge),Me!=null&&We.push(Gi(fe,Me,be)))),en)break;fe=fe.return}0<We.length&&(Ee=new Le(Ee,Ve,null,f,Ae),De.push({event:Ee,listeners:We}))}}if((o&7)===0){e:{if(Ee=r==="mouseover"||r==="pointerover",Le=r==="mouseout"||r==="pointerout",Ee&&f!==rn&&(Ve=f.relatedTarget||f.fromElement)&&(Yr(Ve)||Ve[Xs]))break e;if((Le||Ee)&&(Ee=Ae.window===Ae?Ae:(Ee=Ae.ownerDocument)?Ee.defaultView||Ee.parentWindow:window,Le?(Ve=f.relatedTarget||f.toElement,Le=we,Ve=Ve?Yr(Ve):null,Ve!==null&&(en=Ps(Ve),Ve!==en||Ve.tag!==5&&Ve.tag!==6)&&(Ve=null)):(Le=null,Ve=we),Le!==Ve)){if(We=yp,Me="onMouseLeave",ge="onMouseEnter",fe="mouse",(r==="pointerout"||r==="pointerover")&&(We=wp,Me="onPointerLeave",ge="onPointerEnter",fe="pointer"),en=Le==null?Ee:La(Le),be=Ve==null?Ee:La(Ve),Ee=new We(Me,fe+"leave",Le,f,Ae),Ee.target=en,Ee.relatedTarget=be,Me=null,Yr(Ae)===we&&(We=new We(ge,fe+"enter",Ve,f,Ae),We.target=be,We.relatedTarget=en,Me=We),en=Me,Le&&Ve)t:{for(We=Le,ge=Ve,fe=0,be=We;be;be=Ra(be))fe++;for(be=0,Me=ge;Me;Me=Ra(Me))be++;for(;0<fe-be;)We=Ra(We),fe--;for(;0<be-fe;)ge=Ra(ge),be--;for(;fe--;){if(We===ge||ge!==null&&We===ge.alternate)break t;We=Ra(We),ge=Ra(ge)}We=null}else We=null;Le!==null&&qp(De,Ee,Le,We,!1),Ve!==null&&en!==null&&qp(De,en,Ve,We,!0)}}e:{if(Ee=we?La(we):window,Le=Ee.nodeName&&Ee.nodeName.toLowerCase(),Le==="select"||Le==="input"&&Ee.type==="file")var Ke=lw;else if(_p(Ee))if(Ap)Ke=fw;else{Ke=dw;var Ye=cw}else(Le=Ee.nodeName)&&Le.toLowerCase()==="input"&&(Ee.type==="checkbox"||Ee.type==="radio")&&(Ke=uw);if(Ke&&(Ke=Ke(r,we))){Ep(De,Ke,f,Ae);break e}Ye&&Ye(r,Ee,we),r==="focusout"&&(Ye=Ee._wrapperState)&&Ye.controlled&&Ee.type==="number"&&ie(Ee,"number",Ee.value)}switch(Ye=we?La(we):window,r){case"focusin":(_p(Ye)||Ye.contentEditable==="true")&&(Ia=Ye,vd=we,Ui=null);break;case"focusout":Ui=vd=Ia=null;break;case"mousedown":wd=!0;break;case"contextmenu":case"mouseup":case"dragend":wd=!1,Bp(De,f,Ae);break;case"selectionchange":if(mw)break;case"keydown":case"keyup":Bp(De,f,Ae)}var Ze;if(gd)e:{switch(r){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else Pa?jp(r,f)&&(nt="onCompositionEnd"):r==="keydown"&&f.keyCode===229&&(nt="onCompositionStart");nt&&(Sp&&f.locale!=="ko"&&(Pa||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&Pa&&(Ze=xp()):(mr=Ae,dd="value"in mr?mr.value:mr.textContent,Pa=!0)),Ye=Xo(we,nt),0<Ye.length&&(nt=new vp(nt,r,null,f,Ae),De.push({event:nt,listeners:Ye}),Ze?nt.data=Ze:(Ze=Np(f),Ze!==null&&(nt.data=Ze)))),(Ze=sw?rw(r,f):aw(r,f))&&(we=Xo(we,"onBeforeInput"),0<we.length&&(Ae=new vp("onBeforeInput","beforeinput",null,f,Ae),De.push({event:Ae,listeners:we}),Ae.data=Ze))}Kp(De,o)})}function Gi(r,o,f){return{instance:r,listener:o,currentTarget:f}}function Xo(r,o){for(var f=o+"Capture",b=[];r!==null;){var j=r,M=j.stateNode;j.tag===5&&M!==null&&(j=M,M=Jt(r,f),M!=null&&b.unshift(Gi(r,M,j)),M=Jt(r,o),M!=null&&b.push(Gi(r,M,j))),r=r.return}return b}function Ra(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function qp(r,o,f,b,j){for(var M=o._reactName,q=[];f!==null&&f!==b;){var re=f,de=re.alternate,we=re.stateNode;if(de!==null&&de===b)break;re.tag===5&&we!==null&&(re=we,j?(de=Jt(f,M),de!=null&&q.unshift(Gi(f,de,re))):j||(de=Jt(f,M),de!=null&&q.push(Gi(f,de,re)))),f=f.return}q.length!==0&&r.push({event:o,listeners:q})}var yw=/\r\n?/g,vw=/\u0000|\uFFFD/g;function Yp(r){return(typeof r=="string"?r:""+r).replace(yw,`
`).replace(vw,"")}function Jo(r,o,f){if(o=Yp(o),Yp(r)!==o&&f)throw Error(n(425))}function el(){}var _d=null,Ed=null;function Ad(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Td=typeof setTimeout=="function"?setTimeout:void 0,ww=typeof clearTimeout=="function"?clearTimeout:void 0,Zp=typeof Promise=="function"?Promise:void 0,Sw=typeof queueMicrotask=="function"?queueMicrotask:typeof Zp<"u"?function(r){return Zp.resolve(null).then(r).catch(kw)}:Td;function kw(r){setTimeout(function(){throw r})}function Dd(r,o){var f=o,b=0;do{var j=f.nextSibling;if(r.removeChild(f),j&&j.nodeType===8)if(f=j.data,f==="/$"){if(b===0){r.removeChild(j),un(o);return}b--}else f!=="$"&&f!=="$?"&&f!=="$!"||b++;f=j}while(f);un(o)}function xr(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return r}function Qp(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var f=r.data;if(f==="$"||f==="$!"||f==="$?"){if(o===0)return r;o--}else f==="/$"&&o++}r=r.previousSibling}return null}var Ba=Math.random().toString(36).slice(2),Is="__reactFiber$"+Ba,qi="__reactProps$"+Ba,Xs="__reactContainer$"+Ba,Md="__reactEvents$"+Ba,Cw="__reactListeners$"+Ba,jw="__reactHandles$"+Ba;function Yr(r){var o=r[Is];if(o)return o;for(var f=r.parentNode;f;){if(o=f[Xs]||f[Is]){if(f=o.alternate,o.child!==null||f!==null&&f.child!==null)for(r=Qp(r);r!==null;){if(f=r[Is])return f;r=Qp(r)}return o}r=f,f=r.parentNode}return null}function Yi(r){return r=r[Is]||r[Xs],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function La(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(n(33))}function tl(r){return r[qi]||null}var Pd=[],Oa=-1;function br(r){return{current:r}}function Rt(r){0>Oa||(r.current=Pd[Oa],Pd[Oa]=null,Oa--)}function Tt(r,o){Oa++,Pd[Oa]=r.current,r.current=o}var yr={},kn=br(yr),Hn=br(!1),Zr=yr;function za(r,o){var f=r.type.contextTypes;if(!f)return yr;var b=r.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===o)return b.__reactInternalMemoizedMaskedChildContext;var j={},M;for(M in f)j[M]=o[M];return b&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=o,r.__reactInternalMemoizedMaskedChildContext=j),j}function Un(r){return r=r.childContextTypes,r!=null}function nl(){Rt(Hn),Rt(kn)}function Xp(r,o,f){if(kn.current!==yr)throw Error(n(168));Tt(kn,o),Tt(Hn,f)}function Jp(r,o,f){var b=r.stateNode;if(o=o.childContextTypes,typeof b.getChildContext!="function")return f;b=b.getChildContext();for(var j in b)if(!(j in o))throw Error(n(108,oe(r)||"Unknown",j));return Z({},f,b)}function sl(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||yr,Zr=kn.current,Tt(kn,r),Tt(Hn,Hn.current),!0}function em(r,o,f){var b=r.stateNode;if(!b)throw Error(n(169));f?(r=Jp(r,o,Zr),b.__reactInternalMemoizedMergedChildContext=r,Rt(Hn),Rt(kn),Tt(kn,r)):Rt(Hn),Tt(Hn,f)}var Js=null,rl=!1,Id=!1;function tm(r){Js===null?Js=[r]:Js.push(r)}function Nw(r){rl=!0,tm(r)}function vr(){if(!Id&&Js!==null){Id=!0;var r=0,o=bt;try{var f=Js;for(bt=1;r<f.length;r++){var b=f[r];do b=b(!0);while(b!==null)}Js=null,rl=!1}catch(j){throw Js!==null&&(Js=Js.slice(r+1)),Lo(Pi,vr),j}finally{bt=o,Id=!1}}return null}var Va=[],$a=0,al=null,il=0,as=[],is=0,Qr=null,er=1,tr="";function Xr(r,o){Va[$a++]=il,Va[$a++]=al,al=r,il=o}function nm(r,o,f){as[is++]=er,as[is++]=tr,as[is++]=Qr,Qr=r;var b=er;r=tr;var j=32-$n(b)-1;b&=~(1<<j),f+=1;var M=32-$n(o)+j;if(30<M){var q=j-j%5;M=(b&(1<<q)-1).toString(32),b>>=q,j-=q,er=1<<32-$n(o)+j|f<<j|b,tr=M+r}else er=1<<M|f<<j|b,tr=r}function Fd(r){r.return!==null&&(Xr(r,1),nm(r,1,0))}function Rd(r){for(;r===al;)al=Va[--$a],Va[$a]=null,il=Va[--$a],Va[$a]=null;for(;r===Qr;)Qr=as[--is],as[is]=null,tr=as[--is],as[is]=null,er=as[--is],as[is]=null}var Jn=null,es=null,Ot=!1,ys=null;function sm(r,o){var f=ds(5,null,null,0);f.elementType="DELETED",f.stateNode=o,f.return=r,o=r.deletions,o===null?(r.deletions=[f],r.flags|=16):o.push(f)}function rm(r,o){switch(r.tag){case 5:var f=r.type;return o=o.nodeType!==1||f.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(r.stateNode=o,Jn=r,es=xr(o.firstChild),!0):!1;case 6:return o=r.pendingProps===""||o.nodeType!==3?null:o,o!==null?(r.stateNode=o,Jn=r,es=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(f=Qr!==null?{id:er,overflow:tr}:null,r.memoizedState={dehydrated:o,treeContext:f,retryLane:1073741824},f=ds(18,null,null,0),f.stateNode=o,f.return=r,r.child=f,Jn=r,es=null,!0):!1;default:return!1}}function Bd(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Ld(r){if(Ot){var o=es;if(o){var f=o;if(!rm(r,o)){if(Bd(r))throw Error(n(418));o=xr(f.nextSibling);var b=Jn;o&&rm(r,o)?sm(b,f):(r.flags=r.flags&-4097|2,Ot=!1,Jn=r)}}else{if(Bd(r))throw Error(n(418));r.flags=r.flags&-4097|2,Ot=!1,Jn=r}}}function am(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Jn=r}function ol(r){if(r!==Jn)return!1;if(!Ot)return am(r),Ot=!0,!1;var o;if((o=r.tag!==3)&&!(o=r.tag!==5)&&(o=r.type,o=o!=="head"&&o!=="body"&&!Ad(r.type,r.memoizedProps)),o&&(o=es)){if(Bd(r))throw im(),Error(n(418));for(;o;)sm(r,o),o=xr(o.nextSibling)}if(am(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));e:{for(r=r.nextSibling,o=0;r;){if(r.nodeType===8){var f=r.data;if(f==="/$"){if(o===0){es=xr(r.nextSibling);break e}o--}else f!=="$"&&f!=="$!"&&f!=="$?"||o++}r=r.nextSibling}es=null}}else es=Jn?xr(r.stateNode.nextSibling):null;return!0}function im(){for(var r=es;r;)r=xr(r.nextSibling)}function Ha(){es=Jn=null,Ot=!1}function Od(r){ys===null?ys=[r]:ys.push(r)}var _w=T.ReactCurrentBatchConfig;function Zi(r,o,f){if(r=f.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(n(309));var b=f.stateNode}if(!b)throw Error(n(147,r));var j=b,M=""+r;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===M?o.ref:(o=function(q){var re=j.refs;q===null?delete re[M]:re[M]=q},o._stringRef=M,o)}if(typeof r!="string")throw Error(n(284));if(!f._owner)throw Error(n(290,r))}return r}function ll(r,o){throw r=Object.prototype.toString.call(o),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r))}function om(r){var o=r._init;return o(r._payload)}function lm(r){function o(ge,fe){if(r){var be=ge.deletions;be===null?(ge.deletions=[fe],ge.flags|=16):be.push(fe)}}function f(ge,fe){if(!r)return null;for(;fe!==null;)o(ge,fe),fe=fe.sibling;return null}function b(ge,fe){for(ge=new Map;fe!==null;)fe.key!==null?ge.set(fe.key,fe):ge.set(fe.index,fe),fe=fe.sibling;return ge}function j(ge,fe){return ge=Er(ge,fe),ge.index=0,ge.sibling=null,ge}function M(ge,fe,be){return ge.index=be,r?(be=ge.alternate,be!==null?(be=be.index,be<fe?(ge.flags|=2,fe):be):(ge.flags|=2,fe)):(ge.flags|=1048576,fe)}function q(ge){return r&&ge.alternate===null&&(ge.flags|=2),ge}function re(ge,fe,be,Me){return fe===null||fe.tag!==6?(fe=Tu(be,ge.mode,Me),fe.return=ge,fe):(fe=j(fe,be),fe.return=ge,fe)}function de(ge,fe,be,Me){var Ke=be.type;return Ke===$?Ae(ge,fe,be.props.children,Me,be.key):fe!==null&&(fe.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===L&&om(Ke)===fe.type)?(Me=j(fe,be.props),Me.ref=Zi(ge,fe,be),Me.return=ge,Me):(Me=Ml(be.type,be.key,be.props,null,ge.mode,Me),Me.ref=Zi(ge,fe,be),Me.return=ge,Me)}function we(ge,fe,be,Me){return fe===null||fe.tag!==4||fe.stateNode.containerInfo!==be.containerInfo||fe.stateNode.implementation!==be.implementation?(fe=Du(be,ge.mode,Me),fe.return=ge,fe):(fe=j(fe,be.children||[]),fe.return=ge,fe)}function Ae(ge,fe,be,Me,Ke){return fe===null||fe.tag!==7?(fe=ia(be,ge.mode,Me,Ke),fe.return=ge,fe):(fe=j(fe,be),fe.return=ge,fe)}function De(ge,fe,be){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return fe=Tu(""+fe,ge.mode,be),fe.return=ge,fe;if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case B:return be=Ml(fe.type,fe.key,fe.props,null,ge.mode,be),be.ref=Zi(ge,null,fe),be.return=ge,be;case O:return fe=Du(fe,ge.mode,be),fe.return=ge,fe;case L:var Me=fe._init;return De(ge,Me(fe._payload),be)}if(le(fe)||G(fe))return fe=ia(fe,ge.mode,be,null),fe.return=ge,fe;ll(ge,fe)}return null}function Ee(ge,fe,be,Me){var Ke=fe!==null?fe.key:null;if(typeof be=="string"&&be!==""||typeof be=="number")return Ke!==null?null:re(ge,fe,""+be,Me);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case B:return be.key===Ke?de(ge,fe,be,Me):null;case O:return be.key===Ke?we(ge,fe,be,Me):null;case L:return Ke=be._init,Ee(ge,fe,Ke(be._payload),Me)}if(le(be)||G(be))return Ke!==null?null:Ae(ge,fe,be,Me,null);ll(ge,be)}return null}function Le(ge,fe,be,Me,Ke){if(typeof Me=="string"&&Me!==""||typeof Me=="number")return ge=ge.get(be)||null,re(fe,ge,""+Me,Ke);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case B:return ge=ge.get(Me.key===null?be:Me.key)||null,de(fe,ge,Me,Ke);case O:return ge=ge.get(Me.key===null?be:Me.key)||null,we(fe,ge,Me,Ke);case L:var Ye=Me._init;return Le(ge,fe,be,Ye(Me._payload),Ke)}if(le(Me)||G(Me))return ge=ge.get(be)||null,Ae(fe,ge,Me,Ke,null);ll(fe,Me)}return null}function Ve(ge,fe,be,Me){for(var Ke=null,Ye=null,Ze=fe,nt=fe=0,pn=null;Ze!==null&&nt<be.length;nt++){Ze.index>nt?(pn=Ze,Ze=null):pn=Ze.sibling;var yt=Ee(ge,Ze,be[nt],Me);if(yt===null){Ze===null&&(Ze=pn);break}r&&Ze&&yt.alternate===null&&o(ge,Ze),fe=M(yt,fe,nt),Ye===null?Ke=yt:Ye.sibling=yt,Ye=yt,Ze=pn}if(nt===be.length)return f(ge,Ze),Ot&&Xr(ge,nt),Ke;if(Ze===null){for(;nt<be.length;nt++)Ze=De(ge,be[nt],Me),Ze!==null&&(fe=M(Ze,fe,nt),Ye===null?Ke=Ze:Ye.sibling=Ze,Ye=Ze);return Ot&&Xr(ge,nt),Ke}for(Ze=b(ge,Ze);nt<be.length;nt++)pn=Le(Ze,ge,nt,be[nt],Me),pn!==null&&(r&&pn.alternate!==null&&Ze.delete(pn.key===null?nt:pn.key),fe=M(pn,fe,nt),Ye===null?Ke=pn:Ye.sibling=pn,Ye=pn);return r&&Ze.forEach(function(Ar){return o(ge,Ar)}),Ot&&Xr(ge,nt),Ke}function We(ge,fe,be,Me){var Ke=G(be);if(typeof Ke!="function")throw Error(n(150));if(be=Ke.call(be),be==null)throw Error(n(151));for(var Ye=Ke=null,Ze=fe,nt=fe=0,pn=null,yt=be.next();Ze!==null&&!yt.done;nt++,yt=be.next()){Ze.index>nt?(pn=Ze,Ze=null):pn=Ze.sibling;var Ar=Ee(ge,Ze,yt.value,Me);if(Ar===null){Ze===null&&(Ze=pn);break}r&&Ze&&Ar.alternate===null&&o(ge,Ze),fe=M(Ar,fe,nt),Ye===null?Ke=Ar:Ye.sibling=Ar,Ye=Ar,Ze=pn}if(yt.done)return f(ge,Ze),Ot&&Xr(ge,nt),Ke;if(Ze===null){for(;!yt.done;nt++,yt=be.next())yt=De(ge,yt.value,Me),yt!==null&&(fe=M(yt,fe,nt),Ye===null?Ke=yt:Ye.sibling=yt,Ye=yt);return Ot&&Xr(ge,nt),Ke}for(Ze=b(ge,Ze);!yt.done;nt++,yt=be.next())yt=Le(Ze,ge,nt,yt.value,Me),yt!==null&&(r&&yt.alternate!==null&&Ze.delete(yt.key===null?nt:yt.key),fe=M(yt,fe,nt),Ye===null?Ke=yt:Ye.sibling=yt,Ye=yt);return r&&Ze.forEach(function(i5){return o(ge,i5)}),Ot&&Xr(ge,nt),Ke}function en(ge,fe,be,Me){if(typeof be=="object"&&be!==null&&be.type===$&&be.key===null&&(be=be.props.children),typeof be=="object"&&be!==null){switch(be.$$typeof){case B:e:{for(var Ke=be.key,Ye=fe;Ye!==null;){if(Ye.key===Ke){if(Ke=be.type,Ke===$){if(Ye.tag===7){f(ge,Ye.sibling),fe=j(Ye,be.props.children),fe.return=ge,ge=fe;break e}}else if(Ye.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===L&&om(Ke)===Ye.type){f(ge,Ye.sibling),fe=j(Ye,be.props),fe.ref=Zi(ge,Ye,be),fe.return=ge,ge=fe;break e}f(ge,Ye);break}else o(ge,Ye);Ye=Ye.sibling}be.type===$?(fe=ia(be.props.children,ge.mode,Me,be.key),fe.return=ge,ge=fe):(Me=Ml(be.type,be.key,be.props,null,ge.mode,Me),Me.ref=Zi(ge,fe,be),Me.return=ge,ge=Me)}return q(ge);case O:e:{for(Ye=be.key;fe!==null;){if(fe.key===Ye)if(fe.tag===4&&fe.stateNode.containerInfo===be.containerInfo&&fe.stateNode.implementation===be.implementation){f(ge,fe.sibling),fe=j(fe,be.children||[]),fe.return=ge,ge=fe;break e}else{f(ge,fe);break}else o(ge,fe);fe=fe.sibling}fe=Du(be,ge.mode,Me),fe.return=ge,ge=fe}return q(ge);case L:return Ye=be._init,en(ge,fe,Ye(be._payload),Me)}if(le(be))return Ve(ge,fe,be,Me);if(G(be))return We(ge,fe,be,Me);ll(ge,be)}return typeof be=="string"&&be!==""||typeof be=="number"?(be=""+be,fe!==null&&fe.tag===6?(f(ge,fe.sibling),fe=j(fe,be),fe.return=ge,ge=fe):(f(ge,fe),fe=Tu(be,ge.mode,Me),fe.return=ge,ge=fe),q(ge)):f(ge,fe)}return en}var Ua=lm(!0),cm=lm(!1),cl=br(null),dl=null,Wa=null,zd=null;function Vd(){zd=Wa=dl=null}function $d(r){var o=cl.current;Rt(cl),r._currentValue=o}function Hd(r,o,f){for(;r!==null;){var b=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,b!==null&&(b.childLanes|=o)):b!==null&&(b.childLanes&o)!==o&&(b.childLanes|=o),r===f)break;r=r.return}}function Ka(r,o){dl=r,zd=Wa=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&o)!==0&&(Wn=!0),r.firstContext=null)}function os(r){var o=r._currentValue;if(zd!==r)if(r={context:r,memoizedValue:o,next:null},Wa===null){if(dl===null)throw Error(n(308));Wa=r,dl.dependencies={lanes:0,firstContext:r}}else Wa=Wa.next=r;return o}var Jr=null;function Ud(r){Jr===null?Jr=[r]:Jr.push(r)}function dm(r,o,f,b){var j=o.interleaved;return j===null?(f.next=f,Ud(o)):(f.next=j.next,j.next=f),o.interleaved=f,nr(r,b)}function nr(r,o){r.lanes|=o;var f=r.alternate;for(f!==null&&(f.lanes|=o),f=r,r=r.return;r!==null;)r.childLanes|=o,f=r.alternate,f!==null&&(f.childLanes|=o),f=r,r=r.return;return f.tag===3?f.stateNode:null}var wr=!1;function Wd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function um(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function sr(r,o){return{eventTime:r,lane:o,tag:0,payload:null,callback:null,next:null}}function Sr(r,o,f){var b=r.updateQueue;if(b===null)return null;if(b=b.shared,(xt&2)!==0){var j=b.pending;return j===null?o.next=o:(o.next=j.next,j.next=o),b.pending=o,nr(r,f)}return j=b.interleaved,j===null?(o.next=o,Ud(b)):(o.next=j.next,j.next=o),b.interleaved=o,nr(r,f)}function ul(r,o,f){if(o=o.updateQueue,o!==null&&(o=o.shared,(f&4194240)!==0)){var b=o.lanes;b&=r.pendingLanes,f|=b,o.lanes=f,Fi(r,f)}}function fm(r,o){var f=r.updateQueue,b=r.alternate;if(b!==null&&(b=b.updateQueue,f===b)){var j=null,M=null;if(f=f.firstBaseUpdate,f!==null){do{var q={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};M===null?j=M=q:M=M.next=q,f=f.next}while(f!==null);M===null?j=M=o:M=M.next=o}else j=M=o;f={baseState:b.baseState,firstBaseUpdate:j,lastBaseUpdate:M,shared:b.shared,effects:b.effects},r.updateQueue=f;return}r=f.lastBaseUpdate,r===null?f.firstBaseUpdate=o:r.next=o,f.lastBaseUpdate=o}function fl(r,o,f,b){var j=r.updateQueue;wr=!1;var M=j.firstBaseUpdate,q=j.lastBaseUpdate,re=j.shared.pending;if(re!==null){j.shared.pending=null;var de=re,we=de.next;de.next=null,q===null?M=we:q.next=we,q=de;var Ae=r.alternate;Ae!==null&&(Ae=Ae.updateQueue,re=Ae.lastBaseUpdate,re!==q&&(re===null?Ae.firstBaseUpdate=we:re.next=we,Ae.lastBaseUpdate=de))}if(M!==null){var De=j.baseState;q=0,Ae=we=de=null,re=M;do{var Ee=re.lane,Le=re.eventTime;if((b&Ee)===Ee){Ae!==null&&(Ae=Ae.next={eventTime:Le,lane:0,tag:re.tag,payload:re.payload,callback:re.callback,next:null});e:{var Ve=r,We=re;switch(Ee=o,Le=f,We.tag){case 1:if(Ve=We.payload,typeof Ve=="function"){De=Ve.call(Le,De,Ee);break e}De=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=We.payload,Ee=typeof Ve=="function"?Ve.call(Le,De,Ee):Ve,Ee==null)break e;De=Z({},De,Ee);break e;case 2:wr=!0}}re.callback!==null&&re.lane!==0&&(r.flags|=64,Ee=j.effects,Ee===null?j.effects=[re]:Ee.push(re))}else Le={eventTime:Le,lane:Ee,tag:re.tag,payload:re.payload,callback:re.callback,next:null},Ae===null?(we=Ae=Le,de=De):Ae=Ae.next=Le,q|=Ee;if(re=re.next,re===null){if(re=j.shared.pending,re===null)break;Ee=re,re=Ee.next,Ee.next=null,j.lastBaseUpdate=Ee,j.shared.pending=null}}while(!0);if(Ae===null&&(de=De),j.baseState=de,j.firstBaseUpdate=we,j.lastBaseUpdate=Ae,o=j.shared.interleaved,o!==null){j=o;do q|=j.lane,j=j.next;while(j!==o)}else M===null&&(j.shared.lanes=0);na|=q,r.lanes=q,r.memoizedState=De}}function hm(r,o,f){if(r=o.effects,o.effects=null,r!==null)for(o=0;o<r.length;o++){var b=r[o],j=b.callback;if(j!==null){if(b.callback=null,b=f,typeof j!="function")throw Error(n(191,j));j.call(b)}}}var Qi={},Fs=br(Qi),Xi=br(Qi),Ji=br(Qi);function ea(r){if(r===Qi)throw Error(n(174));return r}function Kd(r,o){switch(Tt(Ji,o),Tt(Xi,r),Tt(Fs,Qi),r=o.nodeType,r){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:st(null,"");break;default:r=r===8?o.parentNode:o,o=r.namespaceURI||null,r=r.tagName,o=st(o,r)}Rt(Fs),Tt(Fs,o)}function Ga(){Rt(Fs),Rt(Xi),Rt(Ji)}function pm(r){ea(Ji.current);var o=ea(Fs.current),f=st(o,r.type);o!==f&&(Tt(Xi,r),Tt(Fs,f))}function Gd(r){Xi.current===r&&(Rt(Fs),Rt(Xi))}var Ht=br(0);function hl(r){for(var o=r;o!==null;){if(o.tag===13){var f=o.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var qd=[];function Yd(){for(var r=0;r<qd.length;r++)qd[r]._workInProgressVersionPrimary=null;qd.length=0}var pl=T.ReactCurrentDispatcher,Zd=T.ReactCurrentBatchConfig,ta=0,Ut=null,an=null,fn=null,ml=!1,eo=!1,to=0,Ew=0;function Cn(){throw Error(n(321))}function Qd(r,o){if(o===null)return!1;for(var f=0;f<o.length&&f<r.length;f++)if(!bs(r[f],o[f]))return!1;return!0}function Xd(r,o,f,b,j,M){if(ta=M,Ut=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,pl.current=r===null||r.memoizedState===null?Mw:Pw,r=f(b,j),eo){M=0;do{if(eo=!1,to=0,25<=M)throw Error(n(301));M+=1,fn=an=null,o.updateQueue=null,pl.current=Iw,r=f(b,j)}while(eo)}if(pl.current=bl,o=an!==null&&an.next!==null,ta=0,fn=an=Ut=null,ml=!1,o)throw Error(n(300));return r}function Jd(){var r=to!==0;return to=0,r}function Rs(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?Ut.memoizedState=fn=r:fn=fn.next=r,fn}function ls(){if(an===null){var r=Ut.alternate;r=r!==null?r.memoizedState:null}else r=an.next;var o=fn===null?Ut.memoizedState:fn.next;if(o!==null)fn=o,an=r;else{if(r===null)throw Error(n(310));an=r,r={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},fn===null?Ut.memoizedState=fn=r:fn=fn.next=r}return fn}function no(r,o){return typeof o=="function"?o(r):o}function eu(r){var o=ls(),f=o.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=r;var b=an,j=b.baseQueue,M=f.pending;if(M!==null){if(j!==null){var q=j.next;j.next=M.next,M.next=q}b.baseQueue=j=M,f.pending=null}if(j!==null){M=j.next,b=b.baseState;var re=q=null,de=null,we=M;do{var Ae=we.lane;if((ta&Ae)===Ae)de!==null&&(de=de.next={lane:0,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null}),b=we.hasEagerState?we.eagerState:r(b,we.action);else{var De={lane:Ae,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null};de===null?(re=de=De,q=b):de=de.next=De,Ut.lanes|=Ae,na|=Ae}we=we.next}while(we!==null&&we!==M);de===null?q=b:de.next=re,bs(b,o.memoizedState)||(Wn=!0),o.memoizedState=b,o.baseState=q,o.baseQueue=de,f.lastRenderedState=b}if(r=f.interleaved,r!==null){j=r;do M=j.lane,Ut.lanes|=M,na|=M,j=j.next;while(j!==r)}else j===null&&(f.lanes=0);return[o.memoizedState,f.dispatch]}function tu(r){var o=ls(),f=o.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=r;var b=f.dispatch,j=f.pending,M=o.memoizedState;if(j!==null){f.pending=null;var q=j=j.next;do M=r(M,q.action),q=q.next;while(q!==j);bs(M,o.memoizedState)||(Wn=!0),o.memoizedState=M,o.baseQueue===null&&(o.baseState=M),f.lastRenderedState=M}return[M,b]}function mm(){}function gm(r,o){var f=Ut,b=ls(),j=o(),M=!bs(b.memoizedState,j);if(M&&(b.memoizedState=j,Wn=!0),b=b.queue,nu(ym.bind(null,f,b,r),[r]),b.getSnapshot!==o||M||fn!==null&&fn.memoizedState.tag&1){if(f.flags|=2048,so(9,bm.bind(null,f,b,j,o),void 0,null),hn===null)throw Error(n(349));(ta&30)!==0||xm(f,o,j)}return j}function xm(r,o,f){r.flags|=16384,r={getSnapshot:o,value:f},o=Ut.updateQueue,o===null?(o={lastEffect:null,stores:null},Ut.updateQueue=o,o.stores=[r]):(f=o.stores,f===null?o.stores=[r]:f.push(r))}function bm(r,o,f,b){o.value=f,o.getSnapshot=b,vm(o)&&wm(r)}function ym(r,o,f){return f(function(){vm(o)&&wm(r)})}function vm(r){var o=r.getSnapshot;r=r.value;try{var f=o();return!bs(r,f)}catch{return!0}}function wm(r){var o=nr(r,1);o!==null&&ks(o,r,1,-1)}function Sm(r){var o=Rs();return typeof r=="function"&&(r=r()),o.memoizedState=o.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:no,lastRenderedState:r},o.queue=r,r=r.dispatch=Dw.bind(null,Ut,r),[o.memoizedState,r]}function so(r,o,f,b){return r={tag:r,create:o,destroy:f,deps:b,next:null},o=Ut.updateQueue,o===null?(o={lastEffect:null,stores:null},Ut.updateQueue=o,o.lastEffect=r.next=r):(f=o.lastEffect,f===null?o.lastEffect=r.next=r:(b=f.next,f.next=r,r.next=b,o.lastEffect=r)),r}function km(){return ls().memoizedState}function gl(r,o,f,b){var j=Rs();Ut.flags|=r,j.memoizedState=so(1|o,f,void 0,b===void 0?null:b)}function xl(r,o,f,b){var j=ls();b=b===void 0?null:b;var M=void 0;if(an!==null){var q=an.memoizedState;if(M=q.destroy,b!==null&&Qd(b,q.deps)){j.memoizedState=so(o,f,M,b);return}}Ut.flags|=r,j.memoizedState=so(1|o,f,M,b)}function Cm(r,o){return gl(8390656,8,r,o)}function nu(r,o){return xl(2048,8,r,o)}function jm(r,o){return xl(4,2,r,o)}function Nm(r,o){return xl(4,4,r,o)}function _m(r,o){if(typeof o=="function")return r=r(),o(r),function(){o(null)};if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function Em(r,o,f){return f=f!=null?f.concat([r]):null,xl(4,4,_m.bind(null,o,r),f)}function su(){}function Am(r,o){var f=ls();o=o===void 0?null:o;var b=f.memoizedState;return b!==null&&o!==null&&Qd(o,b[1])?b[0]:(f.memoizedState=[r,o],r)}function Tm(r,o){var f=ls();o=o===void 0?null:o;var b=f.memoizedState;return b!==null&&o!==null&&Qd(o,b[1])?b[0]:(r=r(),f.memoizedState=[r,o],r)}function Dm(r,o,f){return(ta&21)===0?(r.baseState&&(r.baseState=!1,Wn=!0),r.memoizedState=f):(bs(f,o)||(f=Vo(),Ut.lanes|=f,na|=f,r.baseState=!0),o)}function Aw(r,o){var f=bt;bt=f!==0&&4>f?f:4,r(!0);var b=Zd.transition;Zd.transition={};try{r(!1),o()}finally{bt=f,Zd.transition=b}}function Mm(){return ls().memoizedState}function Tw(r,o,f){var b=Nr(r);if(f={lane:b,action:f,hasEagerState:!1,eagerState:null,next:null},Pm(r))Im(o,f);else if(f=dm(r,o,f,b),f!==null){var j=Bn();ks(f,r,b,j),Fm(f,o,b)}}function Dw(r,o,f){var b=Nr(r),j={lane:b,action:f,hasEagerState:!1,eagerState:null,next:null};if(Pm(r))Im(o,j);else{var M=r.alternate;if(r.lanes===0&&(M===null||M.lanes===0)&&(M=o.lastRenderedReducer,M!==null))try{var q=o.lastRenderedState,re=M(q,f);if(j.hasEagerState=!0,j.eagerState=re,bs(re,q)){var de=o.interleaved;de===null?(j.next=j,Ud(o)):(j.next=de.next,de.next=j),o.interleaved=j;return}}catch{}finally{}f=dm(r,o,j,b),f!==null&&(j=Bn(),ks(f,r,b,j),Fm(f,o,b))}}function Pm(r){var o=r.alternate;return r===Ut||o!==null&&o===Ut}function Im(r,o){eo=ml=!0;var f=r.pending;f===null?o.next=o:(o.next=f.next,f.next=o),r.pending=o}function Fm(r,o,f){if((f&4194240)!==0){var b=o.lanes;b&=r.pendingLanes,f|=b,o.lanes=f,Fi(r,f)}}var bl={readContext:os,useCallback:Cn,useContext:Cn,useEffect:Cn,useImperativeHandle:Cn,useInsertionEffect:Cn,useLayoutEffect:Cn,useMemo:Cn,useReducer:Cn,useRef:Cn,useState:Cn,useDebugValue:Cn,useDeferredValue:Cn,useTransition:Cn,useMutableSource:Cn,useSyncExternalStore:Cn,useId:Cn,unstable_isNewReconciler:!1},Mw={readContext:os,useCallback:function(r,o){return Rs().memoizedState=[r,o===void 0?null:o],r},useContext:os,useEffect:Cm,useImperativeHandle:function(r,o,f){return f=f!=null?f.concat([r]):null,gl(4194308,4,_m.bind(null,o,r),f)},useLayoutEffect:function(r,o){return gl(4194308,4,r,o)},useInsertionEffect:function(r,o){return gl(4,2,r,o)},useMemo:function(r,o){var f=Rs();return o=o===void 0?null:o,r=r(),f.memoizedState=[r,o],r},useReducer:function(r,o,f){var b=Rs();return o=f!==void 0?f(o):o,b.memoizedState=b.baseState=o,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:o},b.queue=r,r=r.dispatch=Tw.bind(null,Ut,r),[b.memoizedState,r]},useRef:function(r){var o=Rs();return r={current:r},o.memoizedState=r},useState:Sm,useDebugValue:su,useDeferredValue:function(r){return Rs().memoizedState=r},useTransition:function(){var r=Sm(!1),o=r[0];return r=Aw.bind(null,r[1]),Rs().memoizedState=r,[o,r]},useMutableSource:function(){},useSyncExternalStore:function(r,o,f){var b=Ut,j=Rs();if(Ot){if(f===void 0)throw Error(n(407));f=f()}else{if(f=o(),hn===null)throw Error(n(349));(ta&30)!==0||xm(b,o,f)}j.memoizedState=f;var M={value:f,getSnapshot:o};return j.queue=M,Cm(ym.bind(null,b,M,r),[r]),b.flags|=2048,so(9,bm.bind(null,b,M,f,o),void 0,null),f},useId:function(){var r=Rs(),o=hn.identifierPrefix;if(Ot){var f=tr,b=er;f=(b&~(1<<32-$n(b)-1)).toString(32)+f,o=":"+o+"R"+f,f=to++,0<f&&(o+="H"+f.toString(32)),o+=":"}else f=Ew++,o=":"+o+"r"+f.toString(32)+":";return r.memoizedState=o},unstable_isNewReconciler:!1},Pw={readContext:os,useCallback:Am,useContext:os,useEffect:nu,useImperativeHandle:Em,useInsertionEffect:jm,useLayoutEffect:Nm,useMemo:Tm,useReducer:eu,useRef:km,useState:function(){return eu(no)},useDebugValue:su,useDeferredValue:function(r){var o=ls();return Dm(o,an.memoizedState,r)},useTransition:function(){var r=eu(no)[0],o=ls().memoizedState;return[r,o]},useMutableSource:mm,useSyncExternalStore:gm,useId:Mm,unstable_isNewReconciler:!1},Iw={readContext:os,useCallback:Am,useContext:os,useEffect:nu,useImperativeHandle:Em,useInsertionEffect:jm,useLayoutEffect:Nm,useMemo:Tm,useReducer:tu,useRef:km,useState:function(){return tu(no)},useDebugValue:su,useDeferredValue:function(r){var o=ls();return an===null?o.memoizedState=r:Dm(o,an.memoizedState,r)},useTransition:function(){var r=tu(no)[0],o=ls().memoizedState;return[r,o]},useMutableSource:mm,useSyncExternalStore:gm,useId:Mm,unstable_isNewReconciler:!1};function vs(r,o){if(r&&r.defaultProps){o=Z({},o),r=r.defaultProps;for(var f in r)o[f]===void 0&&(o[f]=r[f]);return o}return o}function ru(r,o,f,b){o=r.memoizedState,f=f(b,o),f=f==null?o:Z({},o,f),r.memoizedState=f,r.lanes===0&&(r.updateQueue.baseState=f)}var yl={isMounted:function(r){return(r=r._reactInternals)?Ps(r)===r:!1},enqueueSetState:function(r,o,f){r=r._reactInternals;var b=Bn(),j=Nr(r),M=sr(b,j);M.payload=o,f!=null&&(M.callback=f),o=Sr(r,M,j),o!==null&&(ks(o,r,j,b),ul(o,r,j))},enqueueReplaceState:function(r,o,f){r=r._reactInternals;var b=Bn(),j=Nr(r),M=sr(b,j);M.tag=1,M.payload=o,f!=null&&(M.callback=f),o=Sr(r,M,j),o!==null&&(ks(o,r,j,b),ul(o,r,j))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var f=Bn(),b=Nr(r),j=sr(f,b);j.tag=2,o!=null&&(j.callback=o),o=Sr(r,j,b),o!==null&&(ks(o,r,b,f),ul(o,r,b))}};function Rm(r,o,f,b,j,M,q){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(b,M,q):o.prototype&&o.prototype.isPureReactComponent?!Hi(f,b)||!Hi(j,M):!0}function Bm(r,o,f){var b=!1,j=yr,M=o.contextType;return typeof M=="object"&&M!==null?M=os(M):(j=Un(o)?Zr:kn.current,b=o.contextTypes,M=(b=b!=null)?za(r,j):yr),o=new o(f,M),r.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=yl,r.stateNode=o,o._reactInternals=r,b&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=j,r.__reactInternalMemoizedMaskedChildContext=M),o}function Lm(r,o,f,b){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(f,b),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(f,b),o.state!==r&&yl.enqueueReplaceState(o,o.state,null)}function au(r,o,f,b){var j=r.stateNode;j.props=f,j.state=r.memoizedState,j.refs={},Wd(r);var M=o.contextType;typeof M=="object"&&M!==null?j.context=os(M):(M=Un(o)?Zr:kn.current,j.context=za(r,M)),j.state=r.memoizedState,M=o.getDerivedStateFromProps,typeof M=="function"&&(ru(r,o,M,f),j.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(o=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),o!==j.state&&yl.enqueueReplaceState(j,j.state,null),fl(r,f,j,b),j.state=r.memoizedState),typeof j.componentDidMount=="function"&&(r.flags|=4194308)}function qa(r,o){try{var f="",b=o;do f+=U(b),b=b.return;while(b);var j=f}catch(M){j=`
Error generating stack: `+M.message+`
`+M.stack}return{value:r,source:o,stack:j,digest:null}}function iu(r,o,f){return{value:r,source:null,stack:f??null,digest:o??null}}function ou(r,o){try{console.error(o.value)}catch(f){setTimeout(function(){throw f})}}var Fw=typeof WeakMap=="function"?WeakMap:Map;function Om(r,o,f){f=sr(-1,f),f.tag=3,f.payload={element:null};var b=o.value;return f.callback=function(){Nl||(Nl=!0,Su=b),ou(r,o)},f}function zm(r,o,f){f=sr(-1,f),f.tag=3;var b=r.type.getDerivedStateFromError;if(typeof b=="function"){var j=o.value;f.payload=function(){return b(j)},f.callback=function(){ou(r,o)}}var M=r.stateNode;return M!==null&&typeof M.componentDidCatch=="function"&&(f.callback=function(){ou(r,o),typeof b!="function"&&(Cr===null?Cr=new Set([this]):Cr.add(this));var q=o.stack;this.componentDidCatch(o.value,{componentStack:q!==null?q:""})}),f}function Vm(r,o,f){var b=r.pingCache;if(b===null){b=r.pingCache=new Fw;var j=new Set;b.set(o,j)}else j=b.get(o),j===void 0&&(j=new Set,b.set(o,j));j.has(f)||(j.add(f),r=Yw.bind(null,r,o,f),o.then(r,r))}function $m(r){do{var o;if((o=r.tag===13)&&(o=r.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return r;r=r.return}while(r!==null);return null}function Hm(r,o,f,b,j){return(r.mode&1)===0?(r===o?r.flags|=65536:(r.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(o=sr(-1,1),o.tag=2,Sr(f,o,1))),f.lanes|=1),r):(r.flags|=65536,r.lanes=j,r)}var Rw=T.ReactCurrentOwner,Wn=!1;function Rn(r,o,f,b){o.child=r===null?cm(o,null,f,b):Ua(o,r.child,f,b)}function Um(r,o,f,b,j){f=f.render;var M=o.ref;return Ka(o,j),b=Xd(r,o,f,b,M,j),f=Jd(),r!==null&&!Wn?(o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~j,rr(r,o,j)):(Ot&&f&&Fd(o),o.flags|=1,Rn(r,o,b,j),o.child)}function Wm(r,o,f,b,j){if(r===null){var M=f.type;return typeof M=="function"&&!Au(M)&&M.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(o.tag=15,o.type=M,Km(r,o,M,b,j)):(r=Ml(f.type,null,b,o,o.mode,j),r.ref=o.ref,r.return=o,o.child=r)}if(M=r.child,(r.lanes&j)===0){var q=M.memoizedProps;if(f=f.compare,f=f!==null?f:Hi,f(q,b)&&r.ref===o.ref)return rr(r,o,j)}return o.flags|=1,r=Er(M,b),r.ref=o.ref,r.return=o,o.child=r}function Km(r,o,f,b,j){if(r!==null){var M=r.memoizedProps;if(Hi(M,b)&&r.ref===o.ref)if(Wn=!1,o.pendingProps=b=M,(r.lanes&j)!==0)(r.flags&131072)!==0&&(Wn=!0);else return o.lanes=r.lanes,rr(r,o,j)}return lu(r,o,f,b,j)}function Gm(r,o,f){var b=o.pendingProps,j=b.children,M=r!==null?r.memoizedState:null;if(b.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tt(Za,ts),ts|=f;else{if((f&1073741824)===0)return r=M!==null?M.baseLanes|f:f,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:r,cachePool:null,transitions:null},o.updateQueue=null,Tt(Za,ts),ts|=r,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},b=M!==null?M.baseLanes:f,Tt(Za,ts),ts|=b}else M!==null?(b=M.baseLanes|f,o.memoizedState=null):b=f,Tt(Za,ts),ts|=b;return Rn(r,o,j,f),o.child}function qm(r,o){var f=o.ref;(r===null&&f!==null||r!==null&&r.ref!==f)&&(o.flags|=512,o.flags|=2097152)}function lu(r,o,f,b,j){var M=Un(f)?Zr:kn.current;return M=za(o,M),Ka(o,j),f=Xd(r,o,f,b,M,j),b=Jd(),r!==null&&!Wn?(o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~j,rr(r,o,j)):(Ot&&b&&Fd(o),o.flags|=1,Rn(r,o,f,j),o.child)}function Ym(r,o,f,b,j){if(Un(f)){var M=!0;sl(o)}else M=!1;if(Ka(o,j),o.stateNode===null)wl(r,o),Bm(o,f,b),au(o,f,b,j),b=!0;else if(r===null){var q=o.stateNode,re=o.memoizedProps;q.props=re;var de=q.context,we=f.contextType;typeof we=="object"&&we!==null?we=os(we):(we=Un(f)?Zr:kn.current,we=za(o,we));var Ae=f.getDerivedStateFromProps,De=typeof Ae=="function"||typeof q.getSnapshotBeforeUpdate=="function";De||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(re!==b||de!==we)&&Lm(o,q,b,we),wr=!1;var Ee=o.memoizedState;q.state=Ee,fl(o,b,q,j),de=o.memoizedState,re!==b||Ee!==de||Hn.current||wr?(typeof Ae=="function"&&(ru(o,f,Ae,b),de=o.memoizedState),(re=wr||Rm(o,f,re,b,Ee,de,we))?(De||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(o.flags|=4194308)):(typeof q.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=b,o.memoizedState=de),q.props=b,q.state=de,q.context=we,b=re):(typeof q.componentDidMount=="function"&&(o.flags|=4194308),b=!1)}else{q=o.stateNode,um(r,o),re=o.memoizedProps,we=o.type===o.elementType?re:vs(o.type,re),q.props=we,De=o.pendingProps,Ee=q.context,de=f.contextType,typeof de=="object"&&de!==null?de=os(de):(de=Un(f)?Zr:kn.current,de=za(o,de));var Le=f.getDerivedStateFromProps;(Ae=typeof Le=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(re!==De||Ee!==de)&&Lm(o,q,b,de),wr=!1,Ee=o.memoizedState,q.state=Ee,fl(o,b,q,j);var Ve=o.memoizedState;re!==De||Ee!==Ve||Hn.current||wr?(typeof Le=="function"&&(ru(o,f,Le,b),Ve=o.memoizedState),(we=wr||Rm(o,f,we,b,Ee,Ve,de)||!1)?(Ae||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(b,Ve,de),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(b,Ve,de)),typeof q.componentDidUpdate=="function"&&(o.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof q.componentDidUpdate!="function"||re===r.memoizedProps&&Ee===r.memoizedState||(o.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||re===r.memoizedProps&&Ee===r.memoizedState||(o.flags|=1024),o.memoizedProps=b,o.memoizedState=Ve),q.props=b,q.state=Ve,q.context=de,b=we):(typeof q.componentDidUpdate!="function"||re===r.memoizedProps&&Ee===r.memoizedState||(o.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||re===r.memoizedProps&&Ee===r.memoizedState||(o.flags|=1024),b=!1)}return cu(r,o,f,b,M,j)}function cu(r,o,f,b,j,M){qm(r,o);var q=(o.flags&128)!==0;if(!b&&!q)return j&&em(o,f,!1),rr(r,o,M);b=o.stateNode,Rw.current=o;var re=q&&typeof f.getDerivedStateFromError!="function"?null:b.render();return o.flags|=1,r!==null&&q?(o.child=Ua(o,r.child,null,M),o.child=Ua(o,null,re,M)):Rn(r,o,re,M),o.memoizedState=b.state,j&&em(o,f,!0),o.child}function Zm(r){var o=r.stateNode;o.pendingContext?Xp(r,o.pendingContext,o.pendingContext!==o.context):o.context&&Xp(r,o.context,!1),Kd(r,o.containerInfo)}function Qm(r,o,f,b,j){return Ha(),Od(j),o.flags|=256,Rn(r,o,f,b),o.child}var du={dehydrated:null,treeContext:null,retryLane:0};function uu(r){return{baseLanes:r,cachePool:null,transitions:null}}function Xm(r,o,f){var b=o.pendingProps,j=Ht.current,M=!1,q=(o.flags&128)!==0,re;if((re=q)||(re=r!==null&&r.memoizedState===null?!1:(j&2)!==0),re?(M=!0,o.flags&=-129):(r===null||r.memoizedState!==null)&&(j|=1),Tt(Ht,j&1),r===null)return Ld(o),r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((o.mode&1)===0?o.lanes=1:r.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(q=b.children,r=b.fallback,M?(b=o.mode,M=o.child,q={mode:"hidden",children:q},(b&1)===0&&M!==null?(M.childLanes=0,M.pendingProps=q):M=Pl(q,b,0,null),r=ia(r,b,f,null),M.return=o,r.return=o,M.sibling=r,o.child=M,o.child.memoizedState=uu(f),o.memoizedState=du,r):fu(o,q));if(j=r.memoizedState,j!==null&&(re=j.dehydrated,re!==null))return Bw(r,o,q,b,re,j,f);if(M){M=b.fallback,q=o.mode,j=r.child,re=j.sibling;var de={mode:"hidden",children:b.children};return(q&1)===0&&o.child!==j?(b=o.child,b.childLanes=0,b.pendingProps=de,o.deletions=null):(b=Er(j,de),b.subtreeFlags=j.subtreeFlags&14680064),re!==null?M=Er(re,M):(M=ia(M,q,f,null),M.flags|=2),M.return=o,b.return=o,b.sibling=M,o.child=b,b=M,M=o.child,q=r.child.memoizedState,q=q===null?uu(f):{baseLanes:q.baseLanes|f,cachePool:null,transitions:q.transitions},M.memoizedState=q,M.childLanes=r.childLanes&~f,o.memoizedState=du,b}return M=r.child,r=M.sibling,b=Er(M,{mode:"visible",children:b.children}),(o.mode&1)===0&&(b.lanes=f),b.return=o,b.sibling=null,r!==null&&(f=o.deletions,f===null?(o.deletions=[r],o.flags|=16):f.push(r)),o.child=b,o.memoizedState=null,b}function fu(r,o){return o=Pl({mode:"visible",children:o},r.mode,0,null),o.return=r,r.child=o}function vl(r,o,f,b){return b!==null&&Od(b),Ua(o,r.child,null,f),r=fu(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function Bw(r,o,f,b,j,M,q){if(f)return o.flags&256?(o.flags&=-257,b=iu(Error(n(422))),vl(r,o,q,b)):o.memoizedState!==null?(o.child=r.child,o.flags|=128,null):(M=b.fallback,j=o.mode,b=Pl({mode:"visible",children:b.children},j,0,null),M=ia(M,j,q,null),M.flags|=2,b.return=o,M.return=o,b.sibling=M,o.child=b,(o.mode&1)!==0&&Ua(o,r.child,null,q),o.child.memoizedState=uu(q),o.memoizedState=du,M);if((o.mode&1)===0)return vl(r,o,q,null);if(j.data==="$!"){if(b=j.nextSibling&&j.nextSibling.dataset,b)var re=b.dgst;return b=re,M=Error(n(419)),b=iu(M,b,void 0),vl(r,o,q,b)}if(re=(q&r.childLanes)!==0,Wn||re){if(b=hn,b!==null){switch(q&-q){case 4:j=2;break;case 16:j=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:j=32;break;case 536870912:j=268435456;break;default:j=0}j=(j&(b.suspendedLanes|q))!==0?0:j,j!==0&&j!==M.retryLane&&(M.retryLane=j,nr(r,j),ks(b,r,j,-1))}return Eu(),b=iu(Error(n(421))),vl(r,o,q,b)}return j.data==="$?"?(o.flags|=128,o.child=r.child,o=Zw.bind(null,r),j._reactRetry=o,null):(r=M.treeContext,es=xr(j.nextSibling),Jn=o,Ot=!0,ys=null,r!==null&&(as[is++]=er,as[is++]=tr,as[is++]=Qr,er=r.id,tr=r.overflow,Qr=o),o=fu(o,b.children),o.flags|=4096,o)}function Jm(r,o,f){r.lanes|=o;var b=r.alternate;b!==null&&(b.lanes|=o),Hd(r.return,o,f)}function hu(r,o,f,b,j){var M=r.memoizedState;M===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:b,tail:f,tailMode:j}:(M.isBackwards=o,M.rendering=null,M.renderingStartTime=0,M.last=b,M.tail=f,M.tailMode=j)}function e0(r,o,f){var b=o.pendingProps,j=b.revealOrder,M=b.tail;if(Rn(r,o,b.children,f),b=Ht.current,(b&2)!==0)b=b&1|2,o.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Jm(r,f,o);else if(r.tag===19)Jm(r,f,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}b&=1}if(Tt(Ht,b),(o.mode&1)===0)o.memoizedState=null;else switch(j){case"forwards":for(f=o.child,j=null;f!==null;)r=f.alternate,r!==null&&hl(r)===null&&(j=f),f=f.sibling;f=j,f===null?(j=o.child,o.child=null):(j=f.sibling,f.sibling=null),hu(o,!1,j,f,M);break;case"backwards":for(f=null,j=o.child,o.child=null;j!==null;){if(r=j.alternate,r!==null&&hl(r)===null){o.child=j;break}r=j.sibling,j.sibling=f,f=j,j=r}hu(o,!0,f,null,M);break;case"together":hu(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function wl(r,o){(o.mode&1)===0&&r!==null&&(r.alternate=null,o.alternate=null,o.flags|=2)}function rr(r,o,f){if(r!==null&&(o.dependencies=r.dependencies),na|=o.lanes,(f&o.childLanes)===0)return null;if(r!==null&&o.child!==r.child)throw Error(n(153));if(o.child!==null){for(r=o.child,f=Er(r,r.pendingProps),o.child=f,f.return=o;r.sibling!==null;)r=r.sibling,f=f.sibling=Er(r,r.pendingProps),f.return=o;f.sibling=null}return o.child}function Lw(r,o,f){switch(o.tag){case 3:Zm(o),Ha();break;case 5:pm(o);break;case 1:Un(o.type)&&sl(o);break;case 4:Kd(o,o.stateNode.containerInfo);break;case 10:var b=o.type._context,j=o.memoizedProps.value;Tt(cl,b._currentValue),b._currentValue=j;break;case 13:if(b=o.memoizedState,b!==null)return b.dehydrated!==null?(Tt(Ht,Ht.current&1),o.flags|=128,null):(f&o.child.childLanes)!==0?Xm(r,o,f):(Tt(Ht,Ht.current&1),r=rr(r,o,f),r!==null?r.sibling:null);Tt(Ht,Ht.current&1);break;case 19:if(b=(f&o.childLanes)!==0,(r.flags&128)!==0){if(b)return e0(r,o,f);o.flags|=128}if(j=o.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),Tt(Ht,Ht.current),b)break;return null;case 22:case 23:return o.lanes=0,Gm(r,o,f)}return rr(r,o,f)}var t0,pu,n0,s0;t0=function(r,o){for(var f=o.child;f!==null;){if(f.tag===5||f.tag===6)r.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===o)break;for(;f.sibling===null;){if(f.return===null||f.return===o)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},pu=function(){},n0=function(r,o,f,b){var j=r.memoizedProps;if(j!==b){r=o.stateNode,ea(Fs.current);var M=null;switch(f){case"input":j=I(r,j),b=I(r,b),M=[];break;case"select":j=Z({},j,{value:void 0}),b=Z({},b,{value:void 0}),M=[];break;case"textarea":j=ce(r,j),b=ce(r,b),M=[];break;default:typeof j.onClick!="function"&&typeof b.onClick=="function"&&(r.onclick=el)}Kt(f,b);var q;f=null;for(we in j)if(!b.hasOwnProperty(we)&&j.hasOwnProperty(we)&&j[we]!=null)if(we==="style"){var re=j[we];for(q in re)re.hasOwnProperty(q)&&(f||(f={}),f[q]="")}else we!=="dangerouslySetInnerHTML"&&we!=="children"&&we!=="suppressContentEditableWarning"&&we!=="suppressHydrationWarning"&&we!=="autoFocus"&&(i.hasOwnProperty(we)?M||(M=[]):(M=M||[]).push(we,null));for(we in b){var de=b[we];if(re=j?.[we],b.hasOwnProperty(we)&&de!==re&&(de!=null||re!=null))if(we==="style")if(re){for(q in re)!re.hasOwnProperty(q)||de&&de.hasOwnProperty(q)||(f||(f={}),f[q]="");for(q in de)de.hasOwnProperty(q)&&re[q]!==de[q]&&(f||(f={}),f[q]=de[q])}else f||(M||(M=[]),M.push(we,f)),f=de;else we==="dangerouslySetInnerHTML"?(de=de?de.__html:void 0,re=re?re.__html:void 0,de!=null&&re!==de&&(M=M||[]).push(we,de)):we==="children"?typeof de!="string"&&typeof de!="number"||(M=M||[]).push(we,""+de):we!=="suppressContentEditableWarning"&&we!=="suppressHydrationWarning"&&(i.hasOwnProperty(we)?(de!=null&&we==="onScroll"&&Ft("scroll",r),M||re===de||(M=[])):(M=M||[]).push(we,de))}f&&(M=M||[]).push("style",f);var we=M;(o.updateQueue=we)&&(o.flags|=4)}},s0=function(r,o,f,b){f!==b&&(o.flags|=4)};function ro(r,o){if(!Ot)switch(r.tailMode){case"hidden":o=r.tail;for(var f=null;o!==null;)o.alternate!==null&&(f=o),o=o.sibling;f===null?r.tail=null:f.sibling=null;break;case"collapsed":f=r.tail;for(var b=null;f!==null;)f.alternate!==null&&(b=f),f=f.sibling;b===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:b.sibling=null}}function jn(r){var o=r.alternate!==null&&r.alternate.child===r.child,f=0,b=0;if(o)for(var j=r.child;j!==null;)f|=j.lanes|j.childLanes,b|=j.subtreeFlags&14680064,b|=j.flags&14680064,j.return=r,j=j.sibling;else for(j=r.child;j!==null;)f|=j.lanes|j.childLanes,b|=j.subtreeFlags,b|=j.flags,j.return=r,j=j.sibling;return r.subtreeFlags|=b,r.childLanes=f,o}function Ow(r,o,f){var b=o.pendingProps;switch(Rd(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jn(o),null;case 1:return Un(o.type)&&nl(),jn(o),null;case 3:return b=o.stateNode,Ga(),Rt(Hn),Rt(kn),Yd(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(r===null||r.child===null)&&(ol(o)?o.flags|=4:r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,ys!==null&&(ju(ys),ys=null))),pu(r,o),jn(o),null;case 5:Gd(o);var j=ea(Ji.current);if(f=o.type,r!==null&&o.stateNode!=null)n0(r,o,f,b,j),r.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!b){if(o.stateNode===null)throw Error(n(166));return jn(o),null}if(r=ea(Fs.current),ol(o)){b=o.stateNode,f=o.type;var M=o.memoizedProps;switch(b[Is]=o,b[qi]=M,r=(o.mode&1)!==0,f){case"dialog":Ft("cancel",b),Ft("close",b);break;case"iframe":case"object":case"embed":Ft("load",b);break;case"video":case"audio":for(j=0;j<Wi.length;j++)Ft(Wi[j],b);break;case"source":Ft("error",b);break;case"img":case"image":case"link":Ft("error",b),Ft("load",b);break;case"details":Ft("toggle",b);break;case"input":me(b,M),Ft("invalid",b);break;case"select":b._wrapperState={wasMultiple:!!M.multiple},Ft("invalid",b);break;case"textarea":Ce(b,M),Ft("invalid",b)}Kt(f,M),j=null;for(var q in M)if(M.hasOwnProperty(q)){var re=M[q];q==="children"?typeof re=="string"?b.textContent!==re&&(M.suppressHydrationWarning!==!0&&Jo(b.textContent,re,r),j=["children",re]):typeof re=="number"&&b.textContent!==""+re&&(M.suppressHydrationWarning!==!0&&Jo(b.textContent,re,r),j=["children",""+re]):i.hasOwnProperty(q)&&re!=null&&q==="onScroll"&&Ft("scroll",b)}switch(f){case"input":se(b),X(b,M,!0);break;case"textarea":se(b),je(b);break;case"select":case"option":break;default:typeof M.onClick=="function"&&(b.onclick=el)}b=j,o.updateQueue=b,b!==null&&(o.flags|=4)}else{q=j.nodeType===9?j:j.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Re(f)),r==="http://www.w3.org/1999/xhtml"?f==="script"?(r=q.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof b.is=="string"?r=q.createElement(f,{is:b.is}):(r=q.createElement(f),f==="select"&&(q=r,b.multiple?q.multiple=!0:b.size&&(q.size=b.size))):r=q.createElementNS(r,f),r[Is]=o,r[qi]=b,t0(r,o,!1,!1),o.stateNode=r;e:{switch(q=Tn(f,b),f){case"dialog":Ft("cancel",r),Ft("close",r),j=b;break;case"iframe":case"object":case"embed":Ft("load",r),j=b;break;case"video":case"audio":for(j=0;j<Wi.length;j++)Ft(Wi[j],r);j=b;break;case"source":Ft("error",r),j=b;break;case"img":case"image":case"link":Ft("error",r),Ft("load",r),j=b;break;case"details":Ft("toggle",r),j=b;break;case"input":me(r,b),j=I(r,b),Ft("invalid",r);break;case"option":j=b;break;case"select":r._wrapperState={wasMultiple:!!b.multiple},j=Z({},b,{value:void 0}),Ft("invalid",r);break;case"textarea":Ce(r,b),j=ce(r,b),Ft("invalid",r);break;default:j=b}Kt(f,j),re=j;for(M in re)if(re.hasOwnProperty(M)){var de=re[M];M==="style"?$t(r,de):M==="dangerouslySetInnerHTML"?(de=de?de.__html:void 0,de!=null&&at(r,de)):M==="children"?typeof de=="string"?(f!=="textarea"||de!=="")&&ct(r,de):typeof de=="number"&&ct(r,""+de):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(i.hasOwnProperty(M)?de!=null&&M==="onScroll"&&Ft("scroll",r):de!=null&&N(r,M,de,q))}switch(f){case"input":se(r),X(r,b,!1);break;case"textarea":se(r),je(r);break;case"option":b.value!=null&&r.setAttribute("value",""+ne(b.value));break;case"select":r.multiple=!!b.multiple,M=b.value,M!=null?ye(r,!!b.multiple,M,!1):b.defaultValue!=null&&ye(r,!!b.multiple,b.defaultValue,!0);break;default:typeof j.onClick=="function"&&(r.onclick=el)}switch(f){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}}b&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return jn(o),null;case 6:if(r&&o.stateNode!=null)s0(r,o,r.memoizedProps,b);else{if(typeof b!="string"&&o.stateNode===null)throw Error(n(166));if(f=ea(Ji.current),ea(Fs.current),ol(o)){if(b=o.stateNode,f=o.memoizedProps,b[Is]=o,(M=b.nodeValue!==f)&&(r=Jn,r!==null))switch(r.tag){case 3:Jo(b.nodeValue,f,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Jo(b.nodeValue,f,(r.mode&1)!==0)}M&&(o.flags|=4)}else b=(f.nodeType===9?f:f.ownerDocument).createTextNode(b),b[Is]=o,o.stateNode=b}return jn(o),null;case 13:if(Rt(Ht),b=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Ot&&es!==null&&(o.mode&1)!==0&&(o.flags&128)===0)im(),Ha(),o.flags|=98560,M=!1;else if(M=ol(o),b!==null&&b.dehydrated!==null){if(r===null){if(!M)throw Error(n(318));if(M=o.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(n(317));M[Is]=o}else Ha(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;jn(o),M=!1}else ys!==null&&(ju(ys),ys=null),M=!0;if(!M)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=f,o):(b=b!==null,b!==(r!==null&&r.memoizedState!==null)&&b&&(o.child.flags|=8192,(o.mode&1)!==0&&(r===null||(Ht.current&1)!==0?on===0&&(on=3):Eu())),o.updateQueue!==null&&(o.flags|=4),jn(o),null);case 4:return Ga(),pu(r,o),r===null&&Ki(o.stateNode.containerInfo),jn(o),null;case 10:return $d(o.type._context),jn(o),null;case 17:return Un(o.type)&&nl(),jn(o),null;case 19:if(Rt(Ht),M=o.memoizedState,M===null)return jn(o),null;if(b=(o.flags&128)!==0,q=M.rendering,q===null)if(b)ro(M,!1);else{if(on!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(q=hl(r),q!==null){for(o.flags|=128,ro(M,!1),b=q.updateQueue,b!==null&&(o.updateQueue=b,o.flags|=4),o.subtreeFlags=0,b=f,f=o.child;f!==null;)M=f,r=b,M.flags&=14680066,q=M.alternate,q===null?(M.childLanes=0,M.lanes=r,M.child=null,M.subtreeFlags=0,M.memoizedProps=null,M.memoizedState=null,M.updateQueue=null,M.dependencies=null,M.stateNode=null):(M.childLanes=q.childLanes,M.lanes=q.lanes,M.child=q.child,M.subtreeFlags=0,M.deletions=null,M.memoizedProps=q.memoizedProps,M.memoizedState=q.memoizedState,M.updateQueue=q.updateQueue,M.type=q.type,r=q.dependencies,M.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),f=f.sibling;return Tt(Ht,Ht.current&1|2),o.child}r=r.sibling}M.tail!==null&&Et()>Qa&&(o.flags|=128,b=!0,ro(M,!1),o.lanes=4194304)}else{if(!b)if(r=hl(q),r!==null){if(o.flags|=128,b=!0,f=r.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),ro(M,!0),M.tail===null&&M.tailMode==="hidden"&&!q.alternate&&!Ot)return jn(o),null}else 2*Et()-M.renderingStartTime>Qa&&f!==1073741824&&(o.flags|=128,b=!0,ro(M,!1),o.lanes=4194304);M.isBackwards?(q.sibling=o.child,o.child=q):(f=M.last,f!==null?f.sibling=q:o.child=q,M.last=q)}return M.tail!==null?(o=M.tail,M.rendering=o,M.tail=o.sibling,M.renderingStartTime=Et(),o.sibling=null,f=Ht.current,Tt(Ht,b?f&1|2:f&1),o):(jn(o),null);case 22:case 23:return _u(),b=o.memoizedState!==null,r!==null&&r.memoizedState!==null!==b&&(o.flags|=8192),b&&(o.mode&1)!==0?(ts&1073741824)!==0&&(jn(o),o.subtreeFlags&6&&(o.flags|=8192)):jn(o),null;case 24:return null;case 25:return null}throw Error(n(156,o.tag))}function zw(r,o){switch(Rd(o),o.tag){case 1:return Un(o.type)&&nl(),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return Ga(),Rt(Hn),Rt(kn),Yd(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 5:return Gd(o),null;case 13:if(Rt(Ht),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(n(340));Ha()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return Rt(Ht),null;case 4:return Ga(),null;case 10:return $d(o.type._context),null;case 22:case 23:return _u(),null;case 24:return null;default:return null}}var Sl=!1,Nn=!1,Vw=typeof WeakSet=="function"?WeakSet:Set,ze=null;function Ya(r,o){var f=r.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(b){Yt(r,o,b)}else f.current=null}function mu(r,o,f){try{f()}catch(b){Yt(r,o,b)}}var r0=!1;function $w(r,o){if(_d=bn,r=Rp(),yd(r)){if("selectionStart"in r)var f={start:r.selectionStart,end:r.selectionEnd};else e:{f=(f=r.ownerDocument)&&f.defaultView||window;var b=f.getSelection&&f.getSelection();if(b&&b.rangeCount!==0){f=b.anchorNode;var j=b.anchorOffset,M=b.focusNode;b=b.focusOffset;try{f.nodeType,M.nodeType}catch{f=null;break e}var q=0,re=-1,de=-1,we=0,Ae=0,De=r,Ee=null;t:for(;;){for(var Le;De!==f||j!==0&&De.nodeType!==3||(re=q+j),De!==M||b!==0&&De.nodeType!==3||(de=q+b),De.nodeType===3&&(q+=De.nodeValue.length),(Le=De.firstChild)!==null;)Ee=De,De=Le;for(;;){if(De===r)break t;if(Ee===f&&++we===j&&(re=q),Ee===M&&++Ae===b&&(de=q),(Le=De.nextSibling)!==null)break;De=Ee,Ee=De.parentNode}De=Le}f=re===-1||de===-1?null:{start:re,end:de}}else f=null}f=f||{start:0,end:0}}else f=null;for(Ed={focusedElem:r,selectionRange:f},bn=!1,ze=o;ze!==null;)if(o=ze,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,ze=r;else for(;ze!==null;){o=ze;try{var Ve=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Ve!==null){var We=Ve.memoizedProps,en=Ve.memoizedState,ge=o.stateNode,fe=ge.getSnapshotBeforeUpdate(o.elementType===o.type?We:vs(o.type,We),en);ge.__reactInternalSnapshotBeforeUpdate=fe}break;case 3:var be=o.stateNode.containerInfo;be.nodeType===1?be.textContent="":be.nodeType===9&&be.documentElement&&be.removeChild(be.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Me){Yt(o,o.return,Me)}if(r=o.sibling,r!==null){r.return=o.return,ze=r;break}ze=o.return}return Ve=r0,r0=!1,Ve}function ao(r,o,f){var b=o.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var j=b=b.next;do{if((j.tag&r)===r){var M=j.destroy;j.destroy=void 0,M!==void 0&&mu(o,f,M)}j=j.next}while(j!==b)}}function kl(r,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var f=o=o.next;do{if((f.tag&r)===r){var b=f.create;f.destroy=b()}f=f.next}while(f!==o)}}function gu(r){var o=r.ref;if(o!==null){var f=r.stateNode;switch(r.tag){case 5:r=f;break;default:r=f}typeof o=="function"?o(r):o.current=r}}function a0(r){var o=r.alternate;o!==null&&(r.alternate=null,a0(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&(delete o[Is],delete o[qi],delete o[Md],delete o[Cw],delete o[jw])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function i0(r){return r.tag===5||r.tag===3||r.tag===4}function o0(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||i0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function xu(r,o,f){var b=r.tag;if(b===5||b===6)r=r.stateNode,o?f.nodeType===8?f.parentNode.insertBefore(r,o):f.insertBefore(r,o):(f.nodeType===8?(o=f.parentNode,o.insertBefore(r,f)):(o=f,o.appendChild(r)),f=f._reactRootContainer,f!=null||o.onclick!==null||(o.onclick=el));else if(b!==4&&(r=r.child,r!==null))for(xu(r,o,f),r=r.sibling;r!==null;)xu(r,o,f),r=r.sibling}function bu(r,o,f){var b=r.tag;if(b===5||b===6)r=r.stateNode,o?f.insertBefore(r,o):f.appendChild(r);else if(b!==4&&(r=r.child,r!==null))for(bu(r,o,f),r=r.sibling;r!==null;)bu(r,o,f),r=r.sibling}var yn=null,ws=!1;function kr(r,o,f){for(f=f.child;f!==null;)l0(r,o,f),f=f.sibling}function l0(r,o,f){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(Gr,f)}catch{}switch(f.tag){case 5:Nn||Ya(f,o);case 6:var b=yn,j=ws;yn=null,kr(r,o,f),yn=b,ws=j,yn!==null&&(ws?(r=yn,f=f.stateNode,r.nodeType===8?r.parentNode.removeChild(f):r.removeChild(f)):yn.removeChild(f.stateNode));break;case 18:yn!==null&&(ws?(r=yn,f=f.stateNode,r.nodeType===8?Dd(r.parentNode,f):r.nodeType===1&&Dd(r,f),un(r)):Dd(yn,f.stateNode));break;case 4:b=yn,j=ws,yn=f.stateNode.containerInfo,ws=!0,kr(r,o,f),yn=b,ws=j;break;case 0:case 11:case 14:case 15:if(!Nn&&(b=f.updateQueue,b!==null&&(b=b.lastEffect,b!==null))){j=b=b.next;do{var M=j,q=M.destroy;M=M.tag,q!==void 0&&((M&2)!==0||(M&4)!==0)&&mu(f,o,q),j=j.next}while(j!==b)}kr(r,o,f);break;case 1:if(!Nn&&(Ya(f,o),b=f.stateNode,typeof b.componentWillUnmount=="function"))try{b.props=f.memoizedProps,b.state=f.memoizedState,b.componentWillUnmount()}catch(re){Yt(f,o,re)}kr(r,o,f);break;case 21:kr(r,o,f);break;case 22:f.mode&1?(Nn=(b=Nn)||f.memoizedState!==null,kr(r,o,f),Nn=b):kr(r,o,f);break;default:kr(r,o,f)}}function c0(r){var o=r.updateQueue;if(o!==null){r.updateQueue=null;var f=r.stateNode;f===null&&(f=r.stateNode=new Vw),o.forEach(function(b){var j=Qw.bind(null,r,b);f.has(b)||(f.add(b),b.then(j,j))})}}function Ss(r,o){var f=o.deletions;if(f!==null)for(var b=0;b<f.length;b++){var j=f[b];try{var M=r,q=o,re=q;e:for(;re!==null;){switch(re.tag){case 5:yn=re.stateNode,ws=!1;break e;case 3:yn=re.stateNode.containerInfo,ws=!0;break e;case 4:yn=re.stateNode.containerInfo,ws=!0;break e}re=re.return}if(yn===null)throw Error(n(160));l0(M,q,j),yn=null,ws=!1;var de=j.alternate;de!==null&&(de.return=null),j.return=null}catch(we){Yt(j,o,we)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)d0(o,r),o=o.sibling}function d0(r,o){var f=r.alternate,b=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Ss(o,r),Bs(r),b&4){try{ao(3,r,r.return),kl(3,r)}catch(We){Yt(r,r.return,We)}try{ao(5,r,r.return)}catch(We){Yt(r,r.return,We)}}break;case 1:Ss(o,r),Bs(r),b&512&&f!==null&&Ya(f,f.return);break;case 5:if(Ss(o,r),Bs(r),b&512&&f!==null&&Ya(f,f.return),r.flags&32){var j=r.stateNode;try{ct(j,"")}catch(We){Yt(r,r.return,We)}}if(b&4&&(j=r.stateNode,j!=null)){var M=r.memoizedProps,q=f!==null?f.memoizedProps:M,re=r.type,de=r.updateQueue;if(r.updateQueue=null,de!==null)try{re==="input"&&M.type==="radio"&&M.name!=null&&he(j,M),Tn(re,q);var we=Tn(re,M);for(q=0;q<de.length;q+=2){var Ae=de[q],De=de[q+1];Ae==="style"?$t(j,De):Ae==="dangerouslySetInnerHTML"?at(j,De):Ae==="children"?ct(j,De):N(j,Ae,De,we)}switch(re){case"input":J(j,M);break;case"textarea":_e(j,M);break;case"select":var Ee=j._wrapperState.wasMultiple;j._wrapperState.wasMultiple=!!M.multiple;var Le=M.value;Le!=null?ye(j,!!M.multiple,Le,!1):Ee!==!!M.multiple&&(M.defaultValue!=null?ye(j,!!M.multiple,M.defaultValue,!0):ye(j,!!M.multiple,M.multiple?[]:"",!1))}j[qi]=M}catch(We){Yt(r,r.return,We)}}break;case 6:if(Ss(o,r),Bs(r),b&4){if(r.stateNode===null)throw Error(n(162));j=r.stateNode,M=r.memoizedProps;try{j.nodeValue=M}catch(We){Yt(r,r.return,We)}}break;case 3:if(Ss(o,r),Bs(r),b&4&&f!==null&&f.memoizedState.isDehydrated)try{un(o.containerInfo)}catch(We){Yt(r,r.return,We)}break;case 4:Ss(o,r),Bs(r);break;case 13:Ss(o,r),Bs(r),j=r.child,j.flags&8192&&(M=j.memoizedState!==null,j.stateNode.isHidden=M,!M||j.alternate!==null&&j.alternate.memoizedState!==null||(wu=Et())),b&4&&c0(r);break;case 22:if(Ae=f!==null&&f.memoizedState!==null,r.mode&1?(Nn=(we=Nn)||Ae,Ss(o,r),Nn=we):Ss(o,r),Bs(r),b&8192){if(we=r.memoizedState!==null,(r.stateNode.isHidden=we)&&!Ae&&(r.mode&1)!==0)for(ze=r,Ae=r.child;Ae!==null;){for(De=ze=Ae;ze!==null;){switch(Ee=ze,Le=Ee.child,Ee.tag){case 0:case 11:case 14:case 15:ao(4,Ee,Ee.return);break;case 1:Ya(Ee,Ee.return);var Ve=Ee.stateNode;if(typeof Ve.componentWillUnmount=="function"){b=Ee,f=Ee.return;try{o=b,Ve.props=o.memoizedProps,Ve.state=o.memoizedState,Ve.componentWillUnmount()}catch(We){Yt(b,f,We)}}break;case 5:Ya(Ee,Ee.return);break;case 22:if(Ee.memoizedState!==null){h0(De);continue}}Le!==null?(Le.return=Ee,ze=Le):h0(De)}Ae=Ae.sibling}e:for(Ae=null,De=r;;){if(De.tag===5){if(Ae===null){Ae=De;try{j=De.stateNode,we?(M=j.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none"):(re=De.stateNode,de=De.memoizedProps.style,q=de!=null&&de.hasOwnProperty("display")?de.display:null,re.style.display=ot("display",q))}catch(We){Yt(r,r.return,We)}}}else if(De.tag===6){if(Ae===null)try{De.stateNode.nodeValue=we?"":De.memoizedProps}catch(We){Yt(r,r.return,We)}}else if((De.tag!==22&&De.tag!==23||De.memoizedState===null||De===r)&&De.child!==null){De.child.return=De,De=De.child;continue}if(De===r)break e;for(;De.sibling===null;){if(De.return===null||De.return===r)break e;Ae===De&&(Ae=null),De=De.return}Ae===De&&(Ae=null),De.sibling.return=De.return,De=De.sibling}}break;case 19:Ss(o,r),Bs(r),b&4&&c0(r);break;case 21:break;default:Ss(o,r),Bs(r)}}function Bs(r){var o=r.flags;if(o&2){try{e:{for(var f=r.return;f!==null;){if(i0(f)){var b=f;break e}f=f.return}throw Error(n(160))}switch(b.tag){case 5:var j=b.stateNode;b.flags&32&&(ct(j,""),b.flags&=-33);var M=o0(r);bu(r,M,j);break;case 3:case 4:var q=b.stateNode.containerInfo,re=o0(r);xu(r,re,q);break;default:throw Error(n(161))}}catch(de){Yt(r,r.return,de)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function Hw(r,o,f){ze=r,u0(r)}function u0(r,o,f){for(var b=(r.mode&1)!==0;ze!==null;){var j=ze,M=j.child;if(j.tag===22&&b){var q=j.memoizedState!==null||Sl;if(!q){var re=j.alternate,de=re!==null&&re.memoizedState!==null||Nn;re=Sl;var we=Nn;if(Sl=q,(Nn=de)&&!we)for(ze=j;ze!==null;)q=ze,de=q.child,q.tag===22&&q.memoizedState!==null?p0(j):de!==null?(de.return=q,ze=de):p0(j);for(;M!==null;)ze=M,u0(M),M=M.sibling;ze=j,Sl=re,Nn=we}f0(r)}else(j.subtreeFlags&8772)!==0&&M!==null?(M.return=j,ze=M):f0(r)}}function f0(r){for(;ze!==null;){var o=ze;if((o.flags&8772)!==0){var f=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Nn||kl(5,o);break;case 1:var b=o.stateNode;if(o.flags&4&&!Nn)if(f===null)b.componentDidMount();else{var j=o.elementType===o.type?f.memoizedProps:vs(o.type,f.memoizedProps);b.componentDidUpdate(j,f.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var M=o.updateQueue;M!==null&&hm(o,M,b);break;case 3:var q=o.updateQueue;if(q!==null){if(f=null,o.child!==null)switch(o.child.tag){case 5:f=o.child.stateNode;break;case 1:f=o.child.stateNode}hm(o,q,f)}break;case 5:var re=o.stateNode;if(f===null&&o.flags&4){f=re;var de=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":de.autoFocus&&f.focus();break;case"img":de.src&&(f.src=de.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var we=o.alternate;if(we!==null){var Ae=we.memoizedState;if(Ae!==null){var De=Ae.dehydrated;De!==null&&un(De)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Nn||o.flags&512&&gu(o)}catch(Ee){Yt(o,o.return,Ee)}}if(o===r){ze=null;break}if(f=o.sibling,f!==null){f.return=o.return,ze=f;break}ze=o.return}}function h0(r){for(;ze!==null;){var o=ze;if(o===r){ze=null;break}var f=o.sibling;if(f!==null){f.return=o.return,ze=f;break}ze=o.return}}function p0(r){for(;ze!==null;){var o=ze;try{switch(o.tag){case 0:case 11:case 15:var f=o.return;try{kl(4,o)}catch(de){Yt(o,f,de)}break;case 1:var b=o.stateNode;if(typeof b.componentDidMount=="function"){var j=o.return;try{b.componentDidMount()}catch(de){Yt(o,j,de)}}var M=o.return;try{gu(o)}catch(de){Yt(o,M,de)}break;case 5:var q=o.return;try{gu(o)}catch(de){Yt(o,q,de)}}}catch(de){Yt(o,o.return,de)}if(o===r){ze=null;break}var re=o.sibling;if(re!==null){re.return=o.return,ze=re;break}ze=o.return}}var Uw=Math.ceil,Cl=T.ReactCurrentDispatcher,yu=T.ReactCurrentOwner,cs=T.ReactCurrentBatchConfig,xt=0,hn=null,nn=null,vn=0,ts=0,Za=br(0),on=0,io=null,na=0,jl=0,vu=0,oo=null,Kn=null,wu=0,Qa=1/0,ar=null,Nl=!1,Su=null,Cr=null,_l=!1,jr=null,El=0,lo=0,ku=null,Al=-1,Tl=0;function Bn(){return(xt&6)!==0?Et():Al!==-1?Al:Al=Et()}function Nr(r){return(r.mode&1)===0?1:(xt&2)!==0&&vn!==0?vn&-vn:_w.transition!==null?(Tl===0&&(Tl=Vo()),Tl):(r=bt,r!==0||(r=window.event,r=r===void 0?16:gp(r.type)),r)}function ks(r,o,f,b){if(50<lo)throw lo=0,ku=null,Error(n(185));qr(r,f,b),((xt&2)===0||r!==hn)&&(r===hn&&((xt&2)===0&&(jl|=f),on===4&&_r(r,vn)),Gn(r,b),f===1&&xt===0&&(o.mode&1)===0&&(Qa=Et()+500,rl&&vr()))}function Gn(r,o){var f=r.callbackNode;od(r,o);var b=Ea(r,r===hn?vn:0);if(b===0)f!==null&&pr(f),r.callbackNode=null,r.callbackPriority=0;else if(o=b&-b,r.callbackPriority!==o){if(f!=null&&pr(f),o===1)r.tag===0?Nw(g0.bind(null,r)):tm(g0.bind(null,r)),Sw(function(){(xt&6)===0&&vr()}),f=null;else{switch($o(b)){case 1:f=Pi;break;case 4:f=Pn;break;case 16:f=Kr;break;case 536870912:f=Oo;break;default:f=Kr}f=C0(f,m0.bind(null,r))}r.callbackPriority=o,r.callbackNode=f}}function m0(r,o){if(Al=-1,Tl=0,(xt&6)!==0)throw Error(n(327));var f=r.callbackNode;if(Xa()&&r.callbackNode!==f)return null;var b=Ea(r,r===hn?vn:0);if(b===0)return null;if((b&30)!==0||(b&r.expiredLanes)!==0||o)o=Dl(r,b);else{o=b;var j=xt;xt|=2;var M=b0();(hn!==r||vn!==o)&&(ar=null,Qa=Et()+500,ra(r,o));do try{Gw();break}catch(re){x0(r,re)}while(!0);Vd(),Cl.current=M,xt=j,nn!==null?o=0:(hn=null,vn=0,o=on)}if(o!==0){if(o===2&&(j=Ii(r),j!==0&&(b=j,o=Cu(r,j))),o===1)throw f=io,ra(r,0),_r(r,b),Gn(r,Et()),f;if(o===6)_r(r,b);else{if(j=r.current.alternate,(b&30)===0&&!Ww(j)&&(o=Dl(r,b),o===2&&(M=Ii(r),M!==0&&(b=M,o=Cu(r,M))),o===1))throw f=io,ra(r,0),_r(r,b),Gn(r,Et()),f;switch(r.finishedWork=j,r.finishedLanes=b,o){case 0:case 1:throw Error(n(345));case 2:aa(r,Kn,ar);break;case 3:if(_r(r,b),(b&130023424)===b&&(o=wu+500-Et(),10<o)){if(Ea(r,0)!==0)break;if(j=r.suspendedLanes,(j&b)!==b){Bn(),r.pingedLanes|=r.suspendedLanes&j;break}r.timeoutHandle=Td(aa.bind(null,r,Kn,ar),o);break}aa(r,Kn,ar);break;case 4:if(_r(r,b),(b&4194240)===b)break;for(o=r.eventTimes,j=-1;0<b;){var q=31-$n(b);M=1<<q,q=o[q],q>j&&(j=q),b&=~M}if(b=j,b=Et()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*Uw(b/1960))-b,10<b){r.timeoutHandle=Td(aa.bind(null,r,Kn,ar),b);break}aa(r,Kn,ar);break;case 5:aa(r,Kn,ar);break;default:throw Error(n(329))}}}return Gn(r,Et()),r.callbackNode===f?m0.bind(null,r):null}function Cu(r,o){var f=oo;return r.current.memoizedState.isDehydrated&&(ra(r,o).flags|=256),r=Dl(r,o),r!==2&&(o=Kn,Kn=f,o!==null&&ju(o)),r}function ju(r){Kn===null?Kn=r:Kn.push.apply(Kn,r)}function Ww(r){for(var o=r;;){if(o.flags&16384){var f=o.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var b=0;b<f.length;b++){var j=f[b],M=j.getSnapshot;j=j.value;try{if(!bs(M(),j))return!1}catch{return!1}}}if(f=o.child,o.subtreeFlags&16384&&f!==null)f.return=o,o=f;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function _r(r,o){for(o&=~vu,o&=~jl,r.suspendedLanes|=o,r.pingedLanes&=~o,r=r.expirationTimes;0<o;){var f=31-$n(o),b=1<<f;r[f]=-1,o&=~b}}function g0(r){if((xt&6)!==0)throw Error(n(327));Xa();var o=Ea(r,0);if((o&1)===0)return Gn(r,Et()),null;var f=Dl(r,o);if(r.tag!==0&&f===2){var b=Ii(r);b!==0&&(o=b,f=Cu(r,b))}if(f===1)throw f=io,ra(r,0),_r(r,o),Gn(r,Et()),f;if(f===6)throw Error(n(345));return r.finishedWork=r.current.alternate,r.finishedLanes=o,aa(r,Kn,ar),Gn(r,Et()),null}function Nu(r,o){var f=xt;xt|=1;try{return r(o)}finally{xt=f,xt===0&&(Qa=Et()+500,rl&&vr())}}function sa(r){jr!==null&&jr.tag===0&&(xt&6)===0&&Xa();var o=xt;xt|=1;var f=cs.transition,b=bt;try{if(cs.transition=null,bt=1,r)return r()}finally{bt=b,cs.transition=f,xt=o,(xt&6)===0&&vr()}}function _u(){ts=Za.current,Rt(Za)}function ra(r,o){r.finishedWork=null,r.finishedLanes=0;var f=r.timeoutHandle;if(f!==-1&&(r.timeoutHandle=-1,ww(f)),nn!==null)for(f=nn.return;f!==null;){var b=f;switch(Rd(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&nl();break;case 3:Ga(),Rt(Hn),Rt(kn),Yd();break;case 5:Gd(b);break;case 4:Ga();break;case 13:Rt(Ht);break;case 19:Rt(Ht);break;case 10:$d(b.type._context);break;case 22:case 23:_u()}f=f.return}if(hn=r,nn=r=Er(r.current,null),vn=ts=o,on=0,io=null,vu=jl=na=0,Kn=oo=null,Jr!==null){for(o=0;o<Jr.length;o++)if(f=Jr[o],b=f.interleaved,b!==null){f.interleaved=null;var j=b.next,M=f.pending;if(M!==null){var q=M.next;M.next=j,b.next=q}f.pending=b}Jr=null}return r}function x0(r,o){do{var f=nn;try{if(Vd(),pl.current=bl,ml){for(var b=Ut.memoizedState;b!==null;){var j=b.queue;j!==null&&(j.pending=null),b=b.next}ml=!1}if(ta=0,fn=an=Ut=null,eo=!1,to=0,yu.current=null,f===null||f.return===null){on=1,io=o,nn=null;break}e:{var M=r,q=f.return,re=f,de=o;if(o=vn,re.flags|=32768,de!==null&&typeof de=="object"&&typeof de.then=="function"){var we=de,Ae=re,De=Ae.tag;if((Ae.mode&1)===0&&(De===0||De===11||De===15)){var Ee=Ae.alternate;Ee?(Ae.updateQueue=Ee.updateQueue,Ae.memoizedState=Ee.memoizedState,Ae.lanes=Ee.lanes):(Ae.updateQueue=null,Ae.memoizedState=null)}var Le=$m(q);if(Le!==null){Le.flags&=-257,Hm(Le,q,re,M,o),Le.mode&1&&Vm(M,we,o),o=Le,de=we;var Ve=o.updateQueue;if(Ve===null){var We=new Set;We.add(de),o.updateQueue=We}else Ve.add(de);break e}else{if((o&1)===0){Vm(M,we,o),Eu();break e}de=Error(n(426))}}else if(Ot&&re.mode&1){var en=$m(q);if(en!==null){(en.flags&65536)===0&&(en.flags|=256),Hm(en,q,re,M,o),Od(qa(de,re));break e}}M=de=qa(de,re),on!==4&&(on=2),oo===null?oo=[M]:oo.push(M),M=q;do{switch(M.tag){case 3:M.flags|=65536,o&=-o,M.lanes|=o;var ge=Om(M,de,o);fm(M,ge);break e;case 1:re=de;var fe=M.type,be=M.stateNode;if((M.flags&128)===0&&(typeof fe.getDerivedStateFromError=="function"||be!==null&&typeof be.componentDidCatch=="function"&&(Cr===null||!Cr.has(be)))){M.flags|=65536,o&=-o,M.lanes|=o;var Me=zm(M,re,o);fm(M,Me);break e}}M=M.return}while(M!==null)}v0(f)}catch(Ke){o=Ke,nn===f&&f!==null&&(nn=f=f.return);continue}break}while(!0)}function b0(){var r=Cl.current;return Cl.current=bl,r===null?bl:r}function Eu(){(on===0||on===3||on===2)&&(on=4),hn===null||(na&268435455)===0&&(jl&268435455)===0||_r(hn,vn)}function Dl(r,o){var f=xt;xt|=2;var b=b0();(hn!==r||vn!==o)&&(ar=null,ra(r,o));do try{Kw();break}catch(j){x0(r,j)}while(!0);if(Vd(),xt=f,Cl.current=b,nn!==null)throw Error(n(261));return hn=null,vn=0,on}function Kw(){for(;nn!==null;)y0(nn)}function Gw(){for(;nn!==null&&!Ur();)y0(nn)}function y0(r){var o=k0(r.alternate,r,ts);r.memoizedProps=r.pendingProps,o===null?v0(r):nn=o,yu.current=null}function v0(r){var o=r;do{var f=o.alternate;if(r=o.return,(o.flags&32768)===0){if(f=Ow(f,o,ts),f!==null){nn=f;return}}else{if(f=zw(f,o),f!==null){f.flags&=32767,nn=f;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{on=6,nn=null;return}}if(o=o.sibling,o!==null){nn=o;return}nn=o=r}while(o!==null);on===0&&(on=5)}function aa(r,o,f){var b=bt,j=cs.transition;try{cs.transition=null,bt=1,qw(r,o,f,b)}finally{cs.transition=j,bt=b}return null}function qw(r,o,f,b){do Xa();while(jr!==null);if((xt&6)!==0)throw Error(n(327));f=r.finishedWork;var j=r.finishedLanes;if(f===null)return null;if(r.finishedWork=null,r.finishedLanes=0,f===r.current)throw Error(n(177));r.callbackNode=null,r.callbackPriority=0;var M=f.lanes|f.childLanes;if(ld(r,M),r===hn&&(nn=hn=null,vn=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||_l||(_l=!0,C0(Kr,function(){return Xa(),null})),M=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||M){M=cs.transition,cs.transition=null;var q=bt;bt=1;var re=xt;xt|=4,yu.current=null,$w(r,f),d0(f,r),pw(Ed),bn=!!_d,Ed=_d=null,r.current=f,Hw(f),Wr(),xt=re,bt=q,cs.transition=M}else r.current=f;if(_l&&(_l=!1,jr=r,El=j),M=r.pendingLanes,M===0&&(Cr=null),Na(f.stateNode),Gn(r,Et()),o!==null)for(b=r.onRecoverableError,f=0;f<o.length;f++)j=o[f],b(j.value,{componentStack:j.stack,digest:j.digest});if(Nl)throw Nl=!1,r=Su,Su=null,r;return(El&1)!==0&&r.tag!==0&&Xa(),M=r.pendingLanes,(M&1)!==0?r===ku?lo++:(lo=0,ku=r):lo=0,vr(),null}function Xa(){if(jr!==null){var r=$o(El),o=cs.transition,f=bt;try{if(cs.transition=null,bt=16>r?16:r,jr===null)var b=!1;else{if(r=jr,jr=null,El=0,(xt&6)!==0)throw Error(n(331));var j=xt;for(xt|=4,ze=r.current;ze!==null;){var M=ze,q=M.child;if((ze.flags&16)!==0){var re=M.deletions;if(re!==null){for(var de=0;de<re.length;de++){var we=re[de];for(ze=we;ze!==null;){var Ae=ze;switch(Ae.tag){case 0:case 11:case 15:ao(8,Ae,M)}var De=Ae.child;if(De!==null)De.return=Ae,ze=De;else for(;ze!==null;){Ae=ze;var Ee=Ae.sibling,Le=Ae.return;if(a0(Ae),Ae===we){ze=null;break}if(Ee!==null){Ee.return=Le,ze=Ee;break}ze=Le}}}var Ve=M.alternate;if(Ve!==null){var We=Ve.child;if(We!==null){Ve.child=null;do{var en=We.sibling;We.sibling=null,We=en}while(We!==null)}}ze=M}}if((M.subtreeFlags&2064)!==0&&q!==null)q.return=M,ze=q;else e:for(;ze!==null;){if(M=ze,(M.flags&2048)!==0)switch(M.tag){case 0:case 11:case 15:ao(9,M,M.return)}var ge=M.sibling;if(ge!==null){ge.return=M.return,ze=ge;break e}ze=M.return}}var fe=r.current;for(ze=fe;ze!==null;){q=ze;var be=q.child;if((q.subtreeFlags&2064)!==0&&be!==null)be.return=q,ze=be;else e:for(q=fe;ze!==null;){if(re=ze,(re.flags&2048)!==0)try{switch(re.tag){case 0:case 11:case 15:kl(9,re)}}catch(Ke){Yt(re,re.return,Ke)}if(re===q){ze=null;break e}var Me=re.sibling;if(Me!==null){Me.return=re.return,ze=Me;break e}ze=re.return}}if(xt=j,vr(),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(Gr,r)}catch{}b=!0}return b}finally{bt=f,cs.transition=o}}return!1}function w0(r,o,f){o=qa(f,o),o=Om(r,o,1),r=Sr(r,o,1),o=Bn(),r!==null&&(qr(r,1,o),Gn(r,o))}function Yt(r,o,f){if(r.tag===3)w0(r,r,f);else for(;o!==null;){if(o.tag===3){w0(o,r,f);break}else if(o.tag===1){var b=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Cr===null||!Cr.has(b))){r=qa(f,r),r=zm(o,r,1),o=Sr(o,r,1),r=Bn(),o!==null&&(qr(o,1,r),Gn(o,r));break}}o=o.return}}function Yw(r,o,f){var b=r.pingCache;b!==null&&b.delete(o),o=Bn(),r.pingedLanes|=r.suspendedLanes&f,hn===r&&(vn&f)===f&&(on===4||on===3&&(vn&130023424)===vn&&500>Et()-wu?ra(r,0):vu|=f),Gn(r,o)}function S0(r,o){o===0&&((r.mode&1)===0?o=1:(o=xs,xs<<=1,(xs&130023424)===0&&(xs=4194304)));var f=Bn();r=nr(r,o),r!==null&&(qr(r,o,f),Gn(r,f))}function Zw(r){var o=r.memoizedState,f=0;o!==null&&(f=o.retryLane),S0(r,f)}function Qw(r,o){var f=0;switch(r.tag){case 13:var b=r.stateNode,j=r.memoizedState;j!==null&&(f=j.retryLane);break;case 19:b=r.stateNode;break;default:throw Error(n(314))}b!==null&&b.delete(o),S0(r,f)}var k0;k0=function(r,o,f){if(r!==null)if(r.memoizedProps!==o.pendingProps||Hn.current)Wn=!0;else{if((r.lanes&f)===0&&(o.flags&128)===0)return Wn=!1,Lw(r,o,f);Wn=(r.flags&131072)!==0}else Wn=!1,Ot&&(o.flags&1048576)!==0&&nm(o,il,o.index);switch(o.lanes=0,o.tag){case 2:var b=o.type;wl(r,o),r=o.pendingProps;var j=za(o,kn.current);Ka(o,f),j=Xd(null,o,b,r,j,f);var M=Jd();return o.flags|=1,typeof j=="object"&&j!==null&&typeof j.render=="function"&&j.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Un(b)?(M=!0,sl(o)):M=!1,o.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,Wd(o),j.updater=yl,o.stateNode=j,j._reactInternals=o,au(o,b,r,f),o=cu(null,o,b,!0,M,f)):(o.tag=0,Ot&&M&&Fd(o),Rn(null,o,j,f),o=o.child),o;case 16:b=o.elementType;e:{switch(wl(r,o),r=o.pendingProps,j=b._init,b=j(b._payload),o.type=b,j=o.tag=Jw(b),r=vs(b,r),j){case 0:o=lu(null,o,b,r,f);break e;case 1:o=Ym(null,o,b,r,f);break e;case 11:o=Um(null,o,b,r,f);break e;case 14:o=Wm(null,o,b,vs(b.type,r),f);break e}throw Error(n(306,b,""))}return o;case 0:return b=o.type,j=o.pendingProps,j=o.elementType===b?j:vs(b,j),lu(r,o,b,j,f);case 1:return b=o.type,j=o.pendingProps,j=o.elementType===b?j:vs(b,j),Ym(r,o,b,j,f);case 3:e:{if(Zm(o),r===null)throw Error(n(387));b=o.pendingProps,M=o.memoizedState,j=M.element,um(r,o),fl(o,b,null,f);var q=o.memoizedState;if(b=q.element,M.isDehydrated)if(M={element:b,isDehydrated:!1,cache:q.cache,pendingSuspenseBoundaries:q.pendingSuspenseBoundaries,transitions:q.transitions},o.updateQueue.baseState=M,o.memoizedState=M,o.flags&256){j=qa(Error(n(423)),o),o=Qm(r,o,b,f,j);break e}else if(b!==j){j=qa(Error(n(424)),o),o=Qm(r,o,b,f,j);break e}else for(es=xr(o.stateNode.containerInfo.firstChild),Jn=o,Ot=!0,ys=null,f=cm(o,null,b,f),o.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Ha(),b===j){o=rr(r,o,f);break e}Rn(r,o,b,f)}o=o.child}return o;case 5:return pm(o),r===null&&Ld(o),b=o.type,j=o.pendingProps,M=r!==null?r.memoizedProps:null,q=j.children,Ad(b,j)?q=null:M!==null&&Ad(b,M)&&(o.flags|=32),qm(r,o),Rn(r,o,q,f),o.child;case 6:return r===null&&Ld(o),null;case 13:return Xm(r,o,f);case 4:return Kd(o,o.stateNode.containerInfo),b=o.pendingProps,r===null?o.child=Ua(o,null,b,f):Rn(r,o,b,f),o.child;case 11:return b=o.type,j=o.pendingProps,j=o.elementType===b?j:vs(b,j),Um(r,o,b,j,f);case 7:return Rn(r,o,o.pendingProps,f),o.child;case 8:return Rn(r,o,o.pendingProps.children,f),o.child;case 12:return Rn(r,o,o.pendingProps.children,f),o.child;case 10:e:{if(b=o.type._context,j=o.pendingProps,M=o.memoizedProps,q=j.value,Tt(cl,b._currentValue),b._currentValue=q,M!==null)if(bs(M.value,q)){if(M.children===j.children&&!Hn.current){o=rr(r,o,f);break e}}else for(M=o.child,M!==null&&(M.return=o);M!==null;){var re=M.dependencies;if(re!==null){q=M.child;for(var de=re.firstContext;de!==null;){if(de.context===b){if(M.tag===1){de=sr(-1,f&-f),de.tag=2;var we=M.updateQueue;if(we!==null){we=we.shared;var Ae=we.pending;Ae===null?de.next=de:(de.next=Ae.next,Ae.next=de),we.pending=de}}M.lanes|=f,de=M.alternate,de!==null&&(de.lanes|=f),Hd(M.return,f,o),re.lanes|=f;break}de=de.next}}else if(M.tag===10)q=M.type===o.type?null:M.child;else if(M.tag===18){if(q=M.return,q===null)throw Error(n(341));q.lanes|=f,re=q.alternate,re!==null&&(re.lanes|=f),Hd(q,f,o),q=M.sibling}else q=M.child;if(q!==null)q.return=M;else for(q=M;q!==null;){if(q===o){q=null;break}if(M=q.sibling,M!==null){M.return=q.return,q=M;break}q=q.return}M=q}Rn(r,o,j.children,f),o=o.child}return o;case 9:return j=o.type,b=o.pendingProps.children,Ka(o,f),j=os(j),b=b(j),o.flags|=1,Rn(r,o,b,f),o.child;case 14:return b=o.type,j=vs(b,o.pendingProps),j=vs(b.type,j),Wm(r,o,b,j,f);case 15:return Km(r,o,o.type,o.pendingProps,f);case 17:return b=o.type,j=o.pendingProps,j=o.elementType===b?j:vs(b,j),wl(r,o),o.tag=1,Un(b)?(r=!0,sl(o)):r=!1,Ka(o,f),Bm(o,b,j),au(o,b,j,f),cu(null,o,b,!0,r,f);case 19:return e0(r,o,f);case 22:return Gm(r,o,f)}throw Error(n(156,o.tag))};function C0(r,o){return Lo(r,o)}function Xw(r,o,f,b){this.tag=r,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ds(r,o,f,b){return new Xw(r,o,f,b)}function Au(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Jw(r){if(typeof r=="function")return Au(r)?1:0;if(r!=null){if(r=r.$$typeof,r===E)return 11;if(r===z)return 14}return 2}function Er(r,o){var f=r.alternate;return f===null?(f=ds(r.tag,o,r.key,r.mode),f.elementType=r.elementType,f.type=r.type,f.stateNode=r.stateNode,f.alternate=r,r.alternate=f):(f.pendingProps=o,f.type=r.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=r.flags&14680064,f.childLanes=r.childLanes,f.lanes=r.lanes,f.child=r.child,f.memoizedProps=r.memoizedProps,f.memoizedState=r.memoizedState,f.updateQueue=r.updateQueue,o=r.dependencies,f.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},f.sibling=r.sibling,f.index=r.index,f.ref=r.ref,f}function Ml(r,o,f,b,j,M){var q=2;if(b=r,typeof r=="function")Au(r)&&(q=1);else if(typeof r=="string")q=5;else e:switch(r){case $:return ia(f.children,j,M,o);case P:q=8,j|=8;break;case A:return r=ds(12,f,o,j|2),r.elementType=A,r.lanes=M,r;case D:return r=ds(13,f,o,j),r.elementType=D,r.lanes=M,r;case S:return r=ds(19,f,o,j),r.elementType=S,r.lanes=M,r;case F:return Pl(f,j,M,o);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case H:q=10;break e;case Y:q=9;break e;case E:q=11;break e;case z:q=14;break e;case L:q=16,b=null;break e}throw Error(n(130,r==null?r:typeof r,""))}return o=ds(q,f,o,j),o.elementType=r,o.type=b,o.lanes=M,o}function ia(r,o,f,b){return r=ds(7,r,b,o),r.lanes=f,r}function Pl(r,o,f,b){return r=ds(22,r,b,o),r.elementType=F,r.lanes=f,r.stateNode={isHidden:!1},r}function Tu(r,o,f){return r=ds(6,r,null,o),r.lanes=f,r}function Du(r,o,f){return o=ds(4,r.children!==null?r.children:[],r.key,o),o.lanes=f,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}function e5(r,o,f,b,j){this.tag=o,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Aa(0),this.expirationTimes=Aa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Aa(0),this.identifierPrefix=b,this.onRecoverableError=j,this.mutableSourceEagerHydrationData=null}function Mu(r,o,f,b,j,M,q,re,de){return r=new e5(r,o,f,re,de),o===1?(o=1,M===!0&&(o|=8)):o=0,M=ds(3,null,null,o),r.current=M,M.stateNode=r,M.memoizedState={element:b,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wd(M),r}function t5(r,o,f){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:b==null?null:""+b,children:r,containerInfo:o,implementation:f}}function j0(r){if(!r)return yr;r=r._reactInternals;e:{if(Ps(r)!==r||r.tag!==1)throw Error(n(170));var o=r;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Un(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(n(171))}if(r.tag===1){var f=r.type;if(Un(f))return Jp(r,f,o)}return o}function N0(r,o,f,b,j,M,q,re,de){return r=Mu(f,b,!0,r,j,M,q,re,de),r.context=j0(null),f=r.current,b=Bn(),j=Nr(f),M=sr(b,j),M.callback=o??null,Sr(f,M,j),r.current.lanes=j,qr(r,j,b),Gn(r,b),r}function Il(r,o,f,b){var j=o.current,M=Bn(),q=Nr(j);return f=j0(f),o.context===null?o.context=f:o.pendingContext=f,o=sr(M,q),o.payload={element:r},b=b===void 0?null:b,b!==null&&(o.callback=b),r=Sr(j,o,q),r!==null&&(ks(r,j,q,M),ul(r,j,q)),q}function Fl(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function _0(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var f=r.retryLane;r.retryLane=f!==0&&f<o?f:o}}function Pu(r,o){_0(r,o),(r=r.alternate)&&_0(r,o)}function n5(){return null}var E0=typeof reportError=="function"?reportError:function(r){console.error(r)};function Iu(r){this._internalRoot=r}Rl.prototype.render=Iu.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(n(409));Il(r,o,null,null)},Rl.prototype.unmount=Iu.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;sa(function(){Il(null,r,null,null)}),o[Xs]=null}};function Rl(r){this._internalRoot=r}Rl.prototype.unstable_scheduleHydration=function(r){if(r){var o=Ne();r={blockedOn:null,target:r,priority:o};for(var f=0;f<et.length&&o!==0&&o<et[f].priority;f++);et.splice(f,0,r),f===0&&xn(r)}};function Fu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Bl(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function A0(){}function s5(r,o,f,b,j){if(j){if(typeof b=="function"){var M=b;b=function(){var we=Fl(q);M.call(we)}}var q=N0(o,b,r,0,null,!1,!1,"",A0);return r._reactRootContainer=q,r[Xs]=q.current,Ki(r.nodeType===8?r.parentNode:r),sa(),q}for(;j=r.lastChild;)r.removeChild(j);if(typeof b=="function"){var re=b;b=function(){var we=Fl(de);re.call(we)}}var de=Mu(r,0,!1,null,null,!1,!1,"",A0);return r._reactRootContainer=de,r[Xs]=de.current,Ki(r.nodeType===8?r.parentNode:r),sa(function(){Il(o,de,f,b)}),de}function Ll(r,o,f,b,j){var M=f._reactRootContainer;if(M){var q=M;if(typeof j=="function"){var re=j;j=function(){var de=Fl(q);re.call(de)}}Il(o,q,r,j)}else q=s5(f,o,r,j,b);return Fl(q)}Ho=function(r){switch(r.tag){case 3:var o=r.stateNode;if(o.current.memoizedState.isDehydrated){var f=In(o.pendingLanes);f!==0&&(Fi(o,f|1),Gn(o,Et()),(xt&6)===0&&(Qa=Et()+500,vr()))}break;case 13:sa(function(){var b=nr(r,1);if(b!==null){var j=Bn();ks(b,r,1,j)}}),Pu(r,1)}},Ri=function(r){if(r.tag===13){var o=nr(r,134217728);if(o!==null){var f=Bn();ks(o,r,134217728,f)}Pu(r,134217728)}},ke=function(r){if(r.tag===13){var o=Nr(r),f=nr(r,o);if(f!==null){var b=Bn();ks(f,r,o,b)}Pu(r,o)}},Ne=function(){return bt},pe=function(r,o){var f=bt;try{return bt=r,o()}finally{bt=f}},Dn=function(r,o,f){switch(o){case"input":if(J(r,f),o=f.name,f.type==="radio"&&o!=null){for(f=r;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<f.length;o++){var b=f[o];if(b!==r&&b.form===r.form){var j=tl(b);if(!j)throw Error(n(90));xe(b),J(b,j)}}}break;case"textarea":_e(r,f);break;case"select":o=f.value,o!=null&&ye(r,!!f.multiple,o,!1)}},Lt=Nu,Ct=sa;var r5={usingClientEntryPoint:!1,Events:[Yi,La,tl,qe,St,Nu]},co={findFiberByHostInstance:Yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},a5={bundleType:co.bundleType,version:co.version,rendererPackageName:co.rendererPackageName,rendererConfig:co.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Hr(r),r===null?null:r.stateNode},findFiberByHostInstance:co.findFiberByHostInstance||n5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ol=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ol.isDisabled&&Ol.supportsFiber)try{Gr=Ol.inject(a5),Nt=Ol}catch{}}return qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r5,qn.createPortal=function(r,o){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fu(o))throw Error(n(200));return t5(r,o,null,f)},qn.createRoot=function(r,o){if(!Fu(r))throw Error(n(299));var f=!1,b="",j=E0;return o!=null&&(o.unstable_strictMode===!0&&(f=!0),o.identifierPrefix!==void 0&&(b=o.identifierPrefix),o.onRecoverableError!==void 0&&(j=o.onRecoverableError)),o=Mu(r,1,!1,null,null,f,!1,b,j),r[Xs]=o.current,Ki(r.nodeType===8?r.parentNode:r),new Iu(o)},qn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=Hr(o),r=r===null?null:r.stateNode,r},qn.flushSync=function(r){return sa(r)},qn.hydrate=function(r,o,f){if(!Bl(o))throw Error(n(200));return Ll(null,r,o,!0,f)},qn.hydrateRoot=function(r,o,f){if(!Fu(r))throw Error(n(405));var b=f!=null&&f.hydratedSources||null,j=!1,M="",q=E0;if(f!=null&&(f.unstable_strictMode===!0&&(j=!0),f.identifierPrefix!==void 0&&(M=f.identifierPrefix),f.onRecoverableError!==void 0&&(q=f.onRecoverableError)),o=N0(o,null,r,1,f??null,j,!1,M,q),r[Xs]=o.current,Ki(r),b)for(r=0;r<b.length;r++)f=b[r],j=f._getVersion,j=j(f._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[f,j]:o.mutableSourceEagerHydrationData.push(f,j);return new Rl(o)},qn.render=function(r,o,f){if(!Bl(o))throw Error(n(200));return Ll(null,r,o,!1,f)},qn.unmountComponentAtNode=function(r){if(!Bl(r))throw Error(n(40));return r._reactRootContainer?(sa(function(){Ll(null,null,r,!1,function(){r._reactRootContainer=null,r[Xs]=null})}),!0):!1},qn.unstable_batchedUpdates=Nu,qn.unstable_renderSubtreeIntoContainer=function(r,o,f,b){if(!Bl(f))throw Error(n(200));if(r==null||r._reactInternals===void 0)throw Error(n(38));return Ll(r,o,f,!1,b)},qn.version="18.3.1-next-f1338f8080-20240426",qn}var B0;function l1(){if(B0)return Lu.exports;B0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Lu.exports=h5(),Lu.exports}var L0;function p5(){if(L0)return Vl;L0=1;var e=l1();return Vl.createRoot=e.createRoot,Vl.hydrateRoot=e.hydrateRoot,Vl}var m5=p5(),C=ih();const Pe=Ic(C),c1=o5({__proto__:null,default:Pe},[C]),oh=C.createContext({});function lh(e){const t=C.useRef(null);return t.current===null&&(t.current=e()),t.current}const ch=typeof window<"u",d1=ch?C.useLayoutEffect:C.useEffect,Fc=C.createContext(null);function dh(e,t){e.indexOf(t)===-1&&e.push(t)}function uh(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const or=(e,t,n)=>n>t?t:n<e?e:n;let fh=()=>{};const lr={},u1=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function f1(e){return typeof e=="object"&&e!==null}const h1=e=>/^0[^.\s]+$/u.test(e);function hh(e){let t;return()=>(t===void 0&&(t=e()),t)}const ps=e=>e,g5=(e,t)=>n=>t(e(n)),Ao=(...e)=>e.reduce(g5),vo=(e,t,n)=>{const a=t-e;return a===0?1:(n-e)/a};class ph{constructor(){this.subscriptions=[]}add(t){return dh(this.subscriptions,t),()=>uh(this.subscriptions,t)}notify(t,n,a){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,a);else for(let l=0;l<i;l++){const c=this.subscriptions[l];c&&c(t,n,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Hs=e=>e*1e3,hs=e=>e/1e3;function p1(e,t){return t?e*(1e3/t):0}const m1=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,x5=1e-7,b5=12;function y5(e,t,n,a,i){let l,c,d=0;do c=t+(n-t)/2,l=m1(c,a,i)-e,l>0?n=c:t=c;while(Math.abs(l)>x5&&++d<b5);return c}function To(e,t,n,a){if(e===t&&n===a)return ps;const i=l=>y5(l,0,1,e,n);return l=>l===0||l===1?l:m1(i(l),t,a)}const g1=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,x1=e=>t=>1-e(1-t),b1=To(.33,1.53,.69,.99),mh=x1(b1),y1=g1(mh),v1=e=>(e*=2)<1?.5*mh(e):.5*(2-Math.pow(2,-10*(e-1))),gh=e=>1-Math.sin(Math.acos(e)),w1=x1(gh),S1=g1(gh),v5=To(.42,0,1,1),w5=To(0,0,.58,1),k1=To(.42,0,.58,1),S5=e=>Array.isArray(e)&&typeof e[0]!="number",C1=e=>Array.isArray(e)&&typeof e[0]=="number",k5={linear:ps,easeIn:v5,easeInOut:k1,easeOut:w5,circIn:gh,circInOut:S1,circOut:w1,backIn:mh,backInOut:y1,backOut:b1,anticipate:v1},C5=e=>typeof e=="string",O0=e=>{if(C1(e)){fh(e.length===4);const[t,n,a,i]=e;return To(t,n,a,i)}else if(C5(e))return k5[e];return e},$l=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function j5(e,t){let n=new Set,a=new Set,i=!1,l=!1;const c=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1};function u(p){c.has(p)&&(m.schedule(p),e()),p(d)}const m={schedule:(p,h=!1,g=!1)=>{const v=g&&i?n:a;return h&&c.add(p),v.has(p)||v.add(p),p},cancel:p=>{a.delete(p),c.delete(p)},process:p=>{if(d=p,i){l=!0;return}i=!0,[n,a]=[a,n],n.forEach(u),n.clear(),i=!1,l&&(l=!1,m.process(p))}};return m}const N5=40;function j1(e,t){let n=!1,a=!0;const i={delta:0,timestamp:0,isProcessing:!1},l=()=>n=!0,c=$l.reduce((N,T)=>(N[T]=j5(l),N),{}),{setup:d,read:u,resolveKeyframes:m,preUpdate:p,update:h,preRender:g,render:x,postRender:v}=c,y=()=>{const N=lr.useManualTiming?i.timestamp:performance.now();n=!1,lr.useManualTiming||(i.delta=a?1e3/60:Math.max(Math.min(N-i.timestamp,N5),1)),i.timestamp=N,i.isProcessing=!0,d.process(i),u.process(i),m.process(i),p.process(i),h.process(i),g.process(i),x.process(i),v.process(i),i.isProcessing=!1,n&&t&&(a=!1,e(y))},k=()=>{n=!0,a=!0,i.isProcessing||e(y)};return{schedule:$l.reduce((N,T)=>{const B=c[T];return N[T]=(O,$=!1,P=!1)=>(n||k(),B.schedule(O,$,P)),N},{}),cancel:N=>{for(let T=0;T<$l.length;T++)c[$l[T]].cancel(N)},state:i,steps:c}}const{schedule:zt,cancel:Ir,state:wn,steps:Vu}=j1(typeof requestAnimationFrame<"u"?requestAnimationFrame:ps,!0);let rc;function _5(){rc=void 0}const Qn={now:()=>(rc===void 0&&Qn.set(wn.isProcessing||lr.useManualTiming?wn.timestamp:performance.now()),rc),set:e=>{rc=e,queueMicrotask(_5)}},N1=e=>t=>typeof t=="string"&&t.startsWith(e),_1=N1("--"),E5=N1("var(--"),xh=e=>E5(e)?A5.test(e.split("/*")[0].trim()):!1,A5=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,wi={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},wo={...wi,transform:e=>or(0,1,e)},Hl={...wi,default:1},go=e=>Math.round(e*1e5)/1e5,bh=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function T5(e){return e==null}const D5=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,yh=(e,t)=>n=>!!(typeof n=="string"&&D5.test(n)&&n.startsWith(e)||t&&!T5(n)&&Object.prototype.hasOwnProperty.call(n,t)),E1=(e,t,n)=>a=>{if(typeof a!="string")return a;const[i,l,c,d]=a.match(bh);return{[e]:parseFloat(i),[t]:parseFloat(l),[n]:parseFloat(c),alpha:d!==void 0?parseFloat(d):1}},M5=e=>or(0,255,e),$u={...wi,transform:e=>Math.round(M5(e))},fa={test:yh("rgb","red"),parse:E1("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:a=1})=>"rgba("+$u.transform(e)+", "+$u.transform(t)+", "+$u.transform(n)+", "+go(wo.transform(a))+")"};function P5(e){let t="",n="",a="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),a=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),a=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,a+=a,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(a,16),alpha:i?parseInt(i,16)/255:1}}const wf={test:yh("#"),parse:P5,transform:fa.transform},Do=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Mr=Do("deg"),Us=Do("%"),tt=Do("px"),I5=Do("vh"),F5=Do("vw"),z0={...Us,parse:e=>Us.parse(e)/100,transform:e=>Us.transform(e*100)},ai={test:yh("hsl","hue"),parse:E1("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:a=1})=>"hsla("+Math.round(e)+", "+Us.transform(go(t))+", "+Us.transform(go(n))+", "+go(wo.transform(a))+")"},sn={test:e=>fa.test(e)||wf.test(e)||ai.test(e),parse:e=>fa.test(e)?fa.parse(e):ai.test(e)?ai.parse(e):wf.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?fa.transform(e):ai.transform(e),getAnimatableNone:e=>{const t=sn.parse(e);return t.alpha=0,sn.transform(t)}},R5=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function B5(e){return isNaN(e)&&typeof e=="string"&&(e.match(bh)?.length||0)+(e.match(R5)?.length||0)>0}const A1="number",T1="color",L5="var",O5="var(",V0="${}",z5=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function So(e){const t=e.toString(),n=[],a={color:[],number:[],var:[]},i=[];let l=0;const d=t.replace(z5,u=>(sn.test(u)?(a.color.push(l),i.push(T1),n.push(sn.parse(u))):u.startsWith(O5)?(a.var.push(l),i.push(L5),n.push(u)):(a.number.push(l),i.push(A1),n.push(parseFloat(u))),++l,V0)).split(V0);return{values:n,split:d,indexes:a,types:i}}function D1(e){return So(e).values}function M1(e){const{split:t,types:n}=So(e),a=t.length;return i=>{let l="";for(let c=0;c<a;c++)if(l+=t[c],i[c]!==void 0){const d=n[c];d===A1?l+=go(i[c]):d===T1?l+=sn.transform(i[c]):l+=i[c]}return l}}const V5=e=>typeof e=="number"?0:sn.test(e)?sn.getAnimatableNone(e):e;function $5(e){const t=D1(e);return M1(e)(t.map(V5))}const Fr={test:B5,parse:D1,createTransformer:M1,getAnimatableNone:$5};function Hu(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function H5({hue:e,saturation:t,lightness:n,alpha:a}){e/=360,t/=100,n/=100;let i=0,l=0,c=0;if(!t)i=l=c=n;else{const d=n<.5?n*(1+t):n+t-n*t,u=2*n-d;i=Hu(u,d,e+1/3),l=Hu(u,d,e),c=Hu(u,d,e-1/3)}return{red:Math.round(i*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:a}}function pc(e,t){return n=>n>0?t:e}const Wt=(e,t,n)=>e+(t-e)*n,Uu=(e,t,n)=>{const a=e*e,i=n*(t*t-a)+a;return i<0?0:Math.sqrt(i)},U5=[wf,fa,ai],W5=e=>U5.find(t=>t.test(e));function $0(e){const t=W5(e);if(!t)return!1;let n=t.parse(e);return t===ai&&(n=H5(n)),n}const H0=(e,t)=>{const n=$0(e),a=$0(t);if(!n||!a)return pc(e,t);const i={...n};return l=>(i.red=Uu(n.red,a.red,l),i.green=Uu(n.green,a.green,l),i.blue=Uu(n.blue,a.blue,l),i.alpha=Wt(n.alpha,a.alpha,l),fa.transform(i))},Sf=new Set(["none","hidden"]);function K5(e,t){return Sf.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function G5(e,t){return n=>Wt(e,t,n)}function vh(e){return typeof e=="number"?G5:typeof e=="string"?xh(e)?pc:sn.test(e)?H0:Z5:Array.isArray(e)?P1:typeof e=="object"?sn.test(e)?H0:q5:pc}function P1(e,t){const n=[...e],a=n.length,i=e.map((l,c)=>vh(l)(l,t[c]));return l=>{for(let c=0;c<a;c++)n[c]=i[c](l);return n}}function q5(e,t){const n={...e,...t},a={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(a[i]=vh(e[i])(e[i],t[i]));return i=>{for(const l in a)n[l]=a[l](i);return n}}function Y5(e,t){const n=[],a={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const l=t.types[i],c=e.indexes[l][a[l]],d=e.values[c]??0;n[i]=d,a[l]++}return n}const Z5=(e,t)=>{const n=Fr.createTransformer(t),a=So(e),i=So(t);return a.indexes.var.length===i.indexes.var.length&&a.indexes.color.length===i.indexes.color.length&&a.indexes.number.length>=i.indexes.number.length?Sf.has(e)&&!i.values.length||Sf.has(t)&&!a.values.length?K5(e,t):Ao(P1(Y5(a,i),i.values),n):pc(e,t)};function I1(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Wt(e,t,n):vh(e)(e,t)}const Q5=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>zt.update(t,n),stop:()=>Ir(t),now:()=>wn.isProcessing?wn.timestamp:Qn.now()}},F1=(e,t,n=10)=>{let a="";const i=Math.max(Math.round(t/n),2);for(let l=0;l<i;l++)a+=Math.round(e(l/(i-1))*1e4)/1e4+", ";return`linear(${a.substring(0,a.length-2)})`},mc=2e4;function wh(e){let t=0;const n=50;let a=e.next(t);for(;!a.done&&t<mc;)t+=n,a=e.next(t);return t>=mc?1/0:t}function X5(e,t=100,n){const a=n({...e,keyframes:[0,t]}),i=Math.min(wh(a),mc);return{type:"keyframes",ease:l=>a.next(i*l).value/t,duration:hs(i)}}const J5=5;function R1(e,t,n){const a=Math.max(t-J5,0);return p1(n-e(a),t-a)}const Zt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Wu=.001;function e3({duration:e=Zt.duration,bounce:t=Zt.bounce,velocity:n=Zt.velocity,mass:a=Zt.mass}){let i,l,c=1-t;c=or(Zt.minDamping,Zt.maxDamping,c),e=or(Zt.minDuration,Zt.maxDuration,hs(e)),c<1?(i=m=>{const p=m*c,h=p*e,g=p-n,x=kf(m,c),v=Math.exp(-h);return Wu-g/x*v},l=m=>{const h=m*c*e,g=h*n+n,x=Math.pow(c,2)*Math.pow(m,2)*e,v=Math.exp(-h),y=kf(Math.pow(m,2),c);return(-i(m)+Wu>0?-1:1)*((g-x)*v)/y}):(i=m=>{const p=Math.exp(-m*e),h=(m-n)*e+1;return-Wu+p*h},l=m=>{const p=Math.exp(-m*e),h=(n-m)*(e*e);return p*h});const d=5/e,u=n3(i,l,d);if(e=Hs(e),isNaN(u))return{stiffness:Zt.stiffness,damping:Zt.damping,duration:e};{const m=Math.pow(u,2)*a;return{stiffness:m,damping:c*2*Math.sqrt(a*m),duration:e}}}const t3=12;function n3(e,t,n){let a=n;for(let i=1;i<t3;i++)a=a-e(a)/t(a);return a}function kf(e,t){return e*Math.sqrt(1-t*t)}const s3=["duration","bounce"],r3=["stiffness","damping","mass"];function U0(e,t){return t.some(n=>e[n]!==void 0)}function a3(e){let t={velocity:Zt.velocity,stiffness:Zt.stiffness,damping:Zt.damping,mass:Zt.mass,isResolvedFromDuration:!1,...e};if(!U0(e,r3)&&U0(e,s3))if(e.visualDuration){const n=e.visualDuration,a=2*Math.PI/(n*1.2),i=a*a,l=2*or(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:Zt.mass,stiffness:i,damping:l}}else{const n=e3(e);t={...t,...n,mass:Zt.mass},t.isResolvedFromDuration=!0}return t}function gc(e=Zt.visualDuration,t=Zt.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:a,restDelta:i}=n;const l=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],d={done:!1,value:l},{stiffness:u,damping:m,mass:p,duration:h,velocity:g,isResolvedFromDuration:x}=a3({...n,velocity:-hs(n.velocity||0)}),v=g||0,y=m/(2*Math.sqrt(u*p)),k=c-l,w=hs(Math.sqrt(u/p)),_=Math.abs(k)<5;a||(a=_?Zt.restSpeed.granular:Zt.restSpeed.default),i||(i=_?Zt.restDelta.granular:Zt.restDelta.default);let N;if(y<1){const B=kf(w,y);N=O=>{const $=Math.exp(-y*w*O);return c-$*((v+y*w*k)/B*Math.sin(B*O)+k*Math.cos(B*O))}}else if(y===1)N=B=>c-Math.exp(-w*B)*(k+(v+w*k)*B);else{const B=w*Math.sqrt(y*y-1);N=O=>{const $=Math.exp(-y*w*O),P=Math.min(B*O,300);return c-$*((v+y*w*k)*Math.sinh(P)+B*k*Math.cosh(P))/B}}const T={calculatedDuration:x&&h||null,next:B=>{const O=N(B);if(x)d.done=B>=h;else{let $=B===0?v:0;y<1&&($=B===0?Hs(v):R1(N,B,O));const P=Math.abs($)<=a,A=Math.abs(c-O)<=i;d.done=P&&A}return d.value=d.done?c:O,d},toString:()=>{const B=Math.min(wh(T),mc),O=F1($=>T.next(B*$).value,B,30);return B+"ms "+O},toTransition:()=>{}};return T}gc.applyToOptions=e=>{const t=X5(e,100,gc);return e.ease=t.ease,e.duration=Hs(t.duration),e.type="keyframes",e};function Cf({keyframes:e,velocity:t=0,power:n=.8,timeConstant:a=325,bounceDamping:i=10,bounceStiffness:l=500,modifyTarget:c,min:d,max:u,restDelta:m=.5,restSpeed:p}){const h=e[0],g={done:!1,value:h},x=P=>d!==void 0&&P<d||u!==void 0&&P>u,v=P=>d===void 0?u:u===void 0||Math.abs(d-P)<Math.abs(u-P)?d:u;let y=n*t;const k=h+y,w=c===void 0?k:c(k);w!==k&&(y=w-h);const _=P=>-y*Math.exp(-P/a),N=P=>w+_(P),T=P=>{const A=_(P),H=N(P);g.done=Math.abs(A)<=m,g.value=g.done?w:H};let B,O;const $=P=>{x(g.value)&&(B=P,O=gc({keyframes:[g.value,v(g.value)],velocity:R1(N,P,g.value),damping:i,stiffness:l,restDelta:m,restSpeed:p}))};return $(0),{calculatedDuration:null,next:P=>{let A=!1;return!O&&B===void 0&&(A=!0,T(P),$(P)),B!==void 0&&P>=B?O.next(P-B):(!A&&T(P),g)}}}function i3(e,t,n){const a=[],i=n||lr.mix||I1,l=e.length-1;for(let c=0;c<l;c++){let d=i(e[c],e[c+1]);if(t){const u=Array.isArray(t)?t[c]||ps:t;d=Ao(u,d)}a.push(d)}return a}function o3(e,t,{clamp:n=!0,ease:a,mixer:i}={}){const l=e.length;if(fh(l===t.length),l===1)return()=>t[0];if(l===2&&t[0]===t[1])return()=>t[1];const c=e[0]===e[1];e[0]>e[l-1]&&(e=[...e].reverse(),t=[...t].reverse());const d=i3(t,a,i),u=d.length,m=p=>{if(c&&p<e[0])return t[0];let h=0;if(u>1)for(;h<e.length-2&&!(p<e[h+1]);h++);const g=vo(e[h],e[h+1],p);return d[h](g)};return n?p=>m(or(e[0],e[l-1],p)):m}function l3(e,t){const n=e[e.length-1];for(let a=1;a<=t;a++){const i=vo(0,t,a);e.push(Wt(n,1,i))}}function c3(e){const t=[0];return l3(t,e.length-1),t}function d3(e,t){return e.map(n=>n*t)}function u3(e,t){return e.map(()=>t||k1).splice(0,e.length-1)}function xo({duration:e=300,keyframes:t,times:n,ease:a="easeInOut"}){const i=S5(a)?a.map(O0):O0(a),l={done:!1,value:t[0]},c=d3(n&&n.length===t.length?n:c3(t),e),d=o3(c,t,{ease:Array.isArray(i)?i:u3(t,i)});return{calculatedDuration:e,next:u=>(l.value=d(u),l.done=u>=e,l)}}const f3=e=>e!==null;function Sh(e,{repeat:t,repeatType:n="loop"},a,i=1){const l=e.filter(f3),d=i<0||t&&n!=="loop"&&t%2===1?0:l.length-1;return!d||a===void 0?l[d]:a}const h3={decay:Cf,inertia:Cf,tween:xo,keyframes:xo,spring:gc};function B1(e){typeof e.type=="string"&&(e.type=h3[e.type])}class kh{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const p3=e=>e/100;class Ch extends kh{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Qn.now()&&this.tick(Qn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;B1(t);const{type:n=xo,repeat:a=0,repeatDelay:i=0,repeatType:l,velocity:c=0}=t;let{keyframes:d}=t;const u=n||xo;u!==xo&&typeof d[0]!="number"&&(this.mixKeyframes=Ao(p3,I1(d[0],d[1])),d=[0,100]);const m=u({...t,keyframes:d});l==="mirror"&&(this.mirroredGenerator=u({...t,keyframes:[...d].reverse(),velocity:-c})),m.calculatedDuration===null&&(m.calculatedDuration=wh(m));const{calculatedDuration:p}=m;this.calculatedDuration=p,this.resolvedDuration=p+i,this.totalDuration=this.resolvedDuration*(a+1)-i,this.generator=m}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:a,totalDuration:i,mixKeyframes:l,mirroredGenerator:c,resolvedDuration:d,calculatedDuration:u}=this;if(this.startTime===null)return a.next(0);const{delay:m=0,keyframes:p,repeat:h,repeatType:g,repeatDelay:x,type:v,onUpdate:y,finalKeyframe:k}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const w=this.currentTime-m*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?w<0:w>i;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let N=this.currentTime,T=a;if(h){const P=Math.min(this.currentTime,i)/d;let A=Math.floor(P),H=P%1;!H&&P>=1&&(H=1),H===1&&A--,A=Math.min(A,h+1),!!(A%2)&&(g==="reverse"?(H=1-H,x&&(H-=x/d)):g==="mirror"&&(T=c)),N=or(0,1,H)*d}const B=_?{done:!1,value:p[0]}:T.next(N);l&&(B.value=l(B.value));let{done:O}=B;!_&&u!==null&&(O=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const $=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return $&&v!==Cf&&(B.value=Sh(p,this.options,k,this.speed)),y&&y(B.value),$&&this.finish(),B}then(t,n){return this.finished.then(t,n)}get duration(){return hs(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+hs(t)}get time(){return hs(this.currentTime)}set time(t){t=Hs(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Qn.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=hs(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=Q5,startTime:n}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),this.options.onPlay?.();const a=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=a):this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime||(this.startTime=n??a),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Qn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function m3(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const ha=e=>e*180/Math.PI,jf=e=>{const t=ha(Math.atan2(e[1],e[0]));return Nf(t)},g3={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:jf,rotateZ:jf,skewX:e=>ha(Math.atan(e[1])),skewY:e=>ha(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Nf=e=>(e=e%360,e<0&&(e+=360),e),W0=jf,K0=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),G0=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),x3={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:K0,scaleY:G0,scale:e=>(K0(e)+G0(e))/2,rotateX:e=>Nf(ha(Math.atan2(e[6],e[5]))),rotateY:e=>Nf(ha(Math.atan2(-e[2],e[0]))),rotateZ:W0,rotate:W0,skewX:e=>ha(Math.atan(e[4])),skewY:e=>ha(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function _f(e){return e.includes("scale")?1:0}function Ef(e,t){if(!e||e==="none")return _f(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let a,i;if(n)a=x3,i=n;else{const d=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);a=g3,i=d}if(!i)return _f(t);const l=a[t],c=i[1].split(",").map(y3);return typeof l=="function"?l(c):c[l]}const b3=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return Ef(n,t)};function y3(e){return parseFloat(e.trim())}const Si=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ki=new Set(Si),q0=e=>e===wi||e===tt,v3=new Set(["x","y","z"]),w3=Si.filter(e=>!v3.has(e));function S3(e){const t=[];return w3.forEach(n=>{const a=e.getValue(n);a!==void 0&&(t.push([n,a.get()]),a.set(n.startsWith("scale")?1:0))}),t}const ga={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Ef(t,"x"),y:(e,{transform:t})=>Ef(t,"y")};ga.translateX=ga.x;ga.translateY=ga.y;const xa=new Set;let Af=!1,Tf=!1,Df=!1;function L1(){if(Tf){const e=Array.from(xa).filter(a=>a.needsMeasurement),t=new Set(e.map(a=>a.element)),n=new Map;t.forEach(a=>{const i=S3(a);i.length&&(n.set(a,i),a.render())}),e.forEach(a=>a.measureInitialState()),t.forEach(a=>{a.render();const i=n.get(a);i&&i.forEach(([l,c])=>{a.getValue(l)?.set(c)})}),e.forEach(a=>a.measureEndState()),e.forEach(a=>{a.suspendedScrollY!==void 0&&window.scrollTo(0,a.suspendedScrollY)})}Tf=!1,Af=!1,xa.forEach(e=>e.complete(Df)),xa.clear()}function O1(){xa.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Tf=!0)})}function k3(){Df=!0,O1(),L1(),Df=!1}class jh{constructor(t,n,a,i,l,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=a,this.motionValue=i,this.element=l,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(xa.add(this),Af||(Af=!0,zt.read(O1),zt.resolveKeyframes(L1))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:a,motionValue:i}=this;if(t[0]===null){const l=i?.get(),c=t[t.length-1];if(l!==void 0)t[0]=l;else if(a&&n){const d=a.readValue(n,c);d!=null&&(t[0]=d)}t[0]===void 0&&(t[0]=c),i&&l===void 0&&i.set(t[0])}m3(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),xa.delete(this)}cancel(){this.state==="scheduled"&&(xa.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const C3=e=>e.startsWith("--");function j3(e,t,n){C3(t)?e.style.setProperty(t,n):e.style[t]=n}const N3=hh(()=>window.ScrollTimeline!==void 0),_3={};function E3(e,t){const n=hh(e);return()=>_3[t]??n()}const z1=E3(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),po=([e,t,n,a])=>`cubic-bezier(${e}, ${t}, ${n}, ${a})`,Y0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:po([0,.65,.55,1]),circOut:po([.55,0,1,.45]),backIn:po([.31,.01,.66,-.59]),backOut:po([.33,1.53,.69,.99])};function V1(e,t){if(e)return typeof e=="function"?z1()?F1(e,t):"ease-out":C1(e)?po(e):Array.isArray(e)?e.map(n=>V1(n,t)||Y0.easeOut):Y0[e]}function A3(e,t,n,{delay:a=0,duration:i=300,repeat:l=0,repeatType:c="loop",ease:d="easeOut",times:u}={},m=void 0){const p={[t]:n};u&&(p.offset=u);const h=V1(d,i);Array.isArray(h)&&(p.easing=h);const g={delay:a,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:l+1,direction:c==="reverse"?"alternate":"normal"};return m&&(g.pseudoElement=m),e.animate(p,g)}function $1(e){return typeof e=="function"&&"applyToOptions"in e}function T3({type:e,...t}){return $1(e)&&z1()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class D3 extends kh{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:a,keyframes:i,pseudoElement:l,allowFlatten:c=!1,finalKeyframe:d,onComplete:u}=t;this.isPseudoElement=!!l,this.allowFlatten=c,this.options=t,fh(typeof t.type!="string");const m=T3(t);this.animation=A3(n,a,i,m,l),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const p=Sh(i,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(p):j3(n,a,p),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return hs(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+hs(t)}get time(){return hs(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Hs(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&N3()?(this.animation.timeline=t,ps):n(this)}}const H1={anticipate:v1,backInOut:y1,circInOut:S1};function M3(e){return e in H1}function P3(e){typeof e.ease=="string"&&M3(e.ease)&&(e.ease=H1[e.ease])}const Z0=10;class I3 extends D3{constructor(t){P3(t),B1(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:a,onComplete:i,element:l,...c}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const d=new Ch({...c,autoplay:!1}),u=Hs(this.finishedTime??this.time);n.setWithVelocity(d.sample(u-Z0).value,d.sample(u).value,Z0),d.stop()}}const Q0=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Fr.test(e)||e==="0")&&!e.startsWith("url("));function F3(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function R3(e,t,n,a){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const l=e[e.length-1],c=Q0(i,t),d=Q0(l,t);return!c||!d?!1:F3(e)||(n==="spring"||$1(n))&&a}function Mf(e){e.duration=0,e.type="keyframes"}const B3=new Set(["opacity","clipPath","filter","transform"]),L3=hh(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function O3(e){const{motionValue:t,name:n,repeatDelay:a,repeatType:i,damping:l,type:c}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:m}=t.owner.getProps();return L3()&&n&&B3.has(n)&&(n!=="transform"||!m)&&!u&&!a&&i!=="mirror"&&l!==0&&c!=="inertia"}const z3=40;class V3 extends kh{constructor({autoplay:t=!0,delay:n=0,type:a="keyframes",repeat:i=0,repeatDelay:l=0,repeatType:c="loop",keyframes:d,name:u,motionValue:m,element:p,...h}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Qn.now();const g={autoplay:t,delay:n,type:a,repeat:i,repeatDelay:l,repeatType:c,name:u,motionValue:m,element:p,...h},x=p?.KeyframeResolver||jh;this.keyframeResolver=new x(d,(v,y,k)=>this.onKeyframesResolved(v,y,g,!k),u,m,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,a,i){this.keyframeResolver=void 0;const{name:l,type:c,velocity:d,delay:u,isHandoff:m,onUpdate:p}=a;this.resolvedAt=Qn.now(),R3(t,l,c,d)||((lr.instantAnimations||!u)&&p?.(Sh(t,a,n)),t[0]=t[t.length-1],Mf(a),a.repeat=0);const g={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>z3?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...a,keyframes:t},x=!m&&O3(g)?new I3({...g,element:g.motionValue.owner.current}):new Ch(g);x.finished.then(()=>this.notifyFinished()).catch(ps),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),k3()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const $3=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function H3(e){const t=$3.exec(e);if(!t)return[,];const[,n,a,i]=t;return[`--${n??a}`,i]}function U1(e,t,n=1){const[a,i]=H3(e);if(!a)return;const l=window.getComputedStyle(t).getPropertyValue(a);if(l){const c=l.trim();return u1(c)?parseFloat(c):c}return xh(i)?U1(i,t,n+1):i}function Nh(e,t){return e?.[t]??e?.default??e}const W1=new Set(["width","height","top","left","right","bottom",...Si]),U3={test:e=>e==="auto",parse:e=>e},K1=e=>t=>t.test(e),G1=[wi,tt,Us,Mr,F5,I5,U3],X0=e=>G1.find(K1(e));function W3(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||h1(e):!0}const K3=new Set(["brightness","contrast","saturate","opacity"]);function G3(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[a]=n.match(bh)||[];if(!a)return e;const i=n.replace(a,"");let l=K3.has(t)?1:0;return a!==n&&(l*=100),t+"("+l+i+")"}const q3=/\b([a-z-]*)\(.*?\)/gu,Pf={...Fr,getAnimatableNone:e=>{const t=e.match(q3);return t?t.map(G3).join(" "):e}},J0={...wi,transform:Math.round},Y3={rotate:Mr,rotateX:Mr,rotateY:Mr,rotateZ:Mr,scale:Hl,scaleX:Hl,scaleY:Hl,scaleZ:Hl,skew:Mr,skewX:Mr,skewY:Mr,distance:tt,translateX:tt,translateY:tt,translateZ:tt,x:tt,y:tt,z:tt,perspective:tt,transformPerspective:tt,opacity:wo,originX:z0,originY:z0,originZ:tt},_h={borderWidth:tt,borderTopWidth:tt,borderRightWidth:tt,borderBottomWidth:tt,borderLeftWidth:tt,borderRadius:tt,radius:tt,borderTopLeftRadius:tt,borderTopRightRadius:tt,borderBottomRightRadius:tt,borderBottomLeftRadius:tt,width:tt,maxWidth:tt,height:tt,maxHeight:tt,top:tt,right:tt,bottom:tt,left:tt,padding:tt,paddingTop:tt,paddingRight:tt,paddingBottom:tt,paddingLeft:tt,margin:tt,marginTop:tt,marginRight:tt,marginBottom:tt,marginLeft:tt,backgroundPositionX:tt,backgroundPositionY:tt,...Y3,zIndex:J0,fillOpacity:wo,strokeOpacity:wo,numOctaves:J0},Z3={..._h,color:sn,backgroundColor:sn,outlineColor:sn,fill:sn,stroke:sn,borderColor:sn,borderTopColor:sn,borderRightColor:sn,borderBottomColor:sn,borderLeftColor:sn,filter:Pf,WebkitFilter:Pf},q1=e=>Z3[e];function Y1(e,t){let n=q1(e);return n!==Pf&&(n=Fr),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Q3=new Set(["auto","none","0"]);function X3(e,t,n){let a=0,i;for(;a<e.length&&!i;){const l=e[a];typeof l=="string"&&!Q3.has(l)&&So(l).values.length&&(i=e[a]),a++}if(i&&n)for(const l of t)e[l]=Y1(n,i)}class J3 extends jh{constructor(t,n,a,i,l){super(t,n,a,i,l,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:a}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<t.length;u++){let m=t[u];if(typeof m=="string"&&(m=m.trim(),xh(m))){const p=U1(m,n.current);p!==void 0&&(t[u]=p),u===t.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!W1.has(a)||t.length!==2)return;const[i,l]=t,c=X0(i),d=X0(l);if(c!==d)if(q0(c)&&q0(d))for(let u=0;u<t.length;u++){const m=t[u];typeof m=="string"&&(t[u]=parseFloat(m))}else ga[a]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,a=[];for(let i=0;i<t.length;i++)(t[i]===null||W3(t[i]))&&a.push(i);a.length&&X3(t,a,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:a}=this;if(!t||!t.current)return;a==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ga[a](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(a,i).jump(i,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:a}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const l=a.length-1,c=a[l];a[l]=ga[n](t.measureViewportBox(),window.getComputedStyle(t.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),this.removedTransforms?.length&&this.removedTransforms.forEach(([d,u])=>{t.getValue(d).set(u)}),this.resolveNoneKeyframes()}}function eS(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let a=document;const i=n?.[e]??a.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}const Z1=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Q1(e){return f1(e)&&"offsetHeight"in e}const eg=30,tS=e=>!isNaN(parseFloat(e));class nS{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=a=>{const i=Qn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Qn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=tS(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new ph);const a=this.events[t].add(n);return t==="change"?()=>{a(),zt.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,a){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-a}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Qn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>eg)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,eg);return p1(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function xi(e,t){return new nS(e,t)}const{schedule:Eh}=j1(queueMicrotask,!1),Ns={x:!1,y:!1};function X1(){return Ns.x||Ns.y}function sS(e){return e==="x"||e==="y"?Ns[e]?null:(Ns[e]=!0,()=>{Ns[e]=!1}):Ns.x||Ns.y?null:(Ns.x=Ns.y=!0,()=>{Ns.x=Ns.y=!1})}function J1(e,t){const n=eS(e),a=new AbortController,i={passive:!0,...t,signal:a.signal};return[n,i,()=>a.abort()]}function tg(e){return!(e.pointerType==="touch"||X1())}function rS(e,t,n={}){const[a,i,l]=J1(e,n),c=d=>{if(!tg(d))return;const{target:u}=d,m=t(u,d);if(typeof m!="function"||!u)return;const p=h=>{tg(h)&&(m(h),u.removeEventListener("pointerleave",p))};u.addEventListener("pointerleave",p,i)};return a.forEach(d=>{d.addEventListener("pointerenter",c,i)}),l}const eb=(e,t)=>t?e===t?!0:eb(e,t.parentElement):!1,Ah=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,aS=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function iS(e){return aS.has(e.tagName)||e.tabIndex!==-1}const ac=new WeakSet;function ng(e){return t=>{t.key==="Enter"&&e(t)}}function Ku(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const oS=(e,t)=>{const n=e.currentTarget;if(!n)return;const a=ng(()=>{if(ac.has(n))return;Ku(n,"down");const i=ng(()=>{Ku(n,"up")}),l=()=>Ku(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",l,t)});n.addEventListener("keydown",a,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",a),t)};function sg(e){return Ah(e)&&!X1()}function lS(e,t,n={}){const[a,i,l]=J1(e,n),c=d=>{const u=d.currentTarget;if(!sg(d))return;ac.add(u);const m=t(u,d),p=(x,v)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",g),ac.has(u)&&ac.delete(u),sg(x)&&typeof m=="function"&&m(x,{success:v})},h=x=>{p(x,u===window||u===document||n.useGlobalTarget||eb(u,x.target))},g=x=>{p(x,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",g,i)};return a.forEach(d=>{(n.useGlobalTarget?window:d).addEventListener("pointerdown",c,i),Q1(d)&&(d.addEventListener("focus",m=>oS(m,i)),!iS(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),l}function tb(e){return f1(e)&&"ownerSVGElement"in e}function cS(e){return tb(e)&&e.tagName==="svg"}const En=e=>!!(e&&e.getVelocity),dS=[...G1,sn,Fr],uS=e=>dS.find(K1(e)),Th=C.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function rg(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function fS(...e){return t=>{let n=!1;const a=e.map(i=>{const l=rg(i,t);return!n&&typeof l=="function"&&(n=!0),l});if(n)return()=>{for(let i=0;i<a.length;i++){const l=a[i];typeof l=="function"?l():rg(e[i],null)}}}}function hS(...e){return C.useCallback(fS(...e),e)}class pS extends C.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const a=n.offsetParent,i=Q1(a)&&a.offsetWidth||0,l=this.props.sizeRef.current;l.height=n.offsetHeight||0,l.width=n.offsetWidth||0,l.top=n.offsetTop,l.left=n.offsetLeft,l.right=i-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function mS({children:e,isPresent:t,anchorX:n,root:a}){const i=C.useId(),l=C.useRef(null),c=C.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=C.useContext(Th),u=hS(l,e?.ref);return C.useInsertionEffect(()=>{const{width:m,height:p,top:h,left:g,right:x}=c.current;if(t||!l.current||!m||!p)return;const v=n==="left"?`left: ${g}`:`right: ${x}`;l.current.dataset.motionPopId=i;const y=document.createElement("style");d&&(y.nonce=d);const k=a??document.head;return k.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${p}px !important;
            ${v}px !important;
            top: ${h}px !important;
          }
        `),()=>{k.contains(y)&&k.removeChild(y)}},[t]),s.jsx(pS,{isPresent:t,childRef:l,sizeRef:c,children:C.cloneElement(e,{ref:u})})}const gS=({children:e,initial:t,isPresent:n,onExitComplete:a,custom:i,presenceAffectsLayout:l,mode:c,anchorX:d,root:u})=>{const m=lh(xS),p=C.useId();let h=!0,g=C.useMemo(()=>(h=!1,{id:p,initial:t,isPresent:n,custom:i,onExitComplete:x=>{m.set(x,!0);for(const v of m.values())if(!v)return;a&&a()},register:x=>(m.set(x,!1),()=>m.delete(x))}),[n,m,a]);return l&&h&&(g={...g}),C.useMemo(()=>{m.forEach((x,v)=>m.set(v,!1))},[n]),C.useEffect(()=>{!n&&!m.size&&a&&a()},[n]),c==="popLayout"&&(e=s.jsx(mS,{isPresent:n,anchorX:d,root:u,children:e})),s.jsx(Fc.Provider,{value:g,children:e})};function xS(){return new Map}function nb(e=!0){const t=C.useContext(Fc);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:a,register:i}=t,l=C.useId();C.useEffect(()=>{if(e)return i(l)},[e]);const c=C.useCallback(()=>e&&a&&a(l),[l,a,e]);return!n&&a?[!1,c]:[!0]}const Ul=e=>e.key||"";function ag(e){const t=[];return C.Children.forEach(e,n=>{C.isValidElement(n)&&t.push(n)}),t}const Be=({children:e,custom:t,initial:n=!0,onExitComplete:a,presenceAffectsLayout:i=!0,mode:l="sync",propagate:c=!1,anchorX:d="left",root:u})=>{const[m,p]=nb(c),h=C.useMemo(()=>ag(e),[e]),g=c&&!m?[]:h.map(Ul),x=C.useRef(!0),v=C.useRef(h),y=lh(()=>new Map),[k,w]=C.useState(h),[_,N]=C.useState(h);d1(()=>{x.current=!1,v.current=h;for(let O=0;O<_.length;O++){const $=Ul(_[O]);g.includes($)?y.delete($):y.get($)!==!0&&y.set($,!1)}},[_,g.length,g.join("-")]);const T=[];if(h!==k){let O=[...h];for(let $=0;$<_.length;$++){const P=_[$],A=Ul(P);g.includes(A)||(O.splice($,0,P),T.push(P))}return l==="wait"&&T.length&&(O=T),N(ag(O)),w(h),null}const{forceRender:B}=C.useContext(oh);return s.jsx(s.Fragment,{children:_.map(O=>{const $=Ul(O),P=c&&!m?!1:h===_||g.includes($),A=()=>{if(y.has($))y.set($,!0);else return;let H=!0;y.forEach(Y=>{Y||(H=!1)}),H&&(B?.(),N(v.current),c&&p?.(),a&&a())};return s.jsx(gS,{isPresent:P,initial:!x.current||n?void 0:!1,custom:t,presenceAffectsLayout:i,mode:l,root:u,onExitComplete:P?void 0:A,anchorX:d,children:O},$)})})},sb=C.createContext({strict:!1}),ig={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},bi={};for(const e in ig)bi[e]={isEnabled:t=>ig[e].some(n=>!!t[n])};function bS(e){for(const t in e)bi[t]={...bi[t],...e[t]}}const yS=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function xc(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||yS.has(e)}let rb=e=>!xc(e);function vS(e){typeof e=="function"&&(rb=t=>t.startsWith("on")?!xc(t):e(t))}try{vS(require("@emotion/is-prop-valid").default)}catch{}function wS(e,t,n){const a={};for(const i in e)i==="values"&&typeof e.values=="object"||(rb(i)||n===!0&&xc(i)||!t&&!xc(i)||e.draggable&&i.startsWith("onDrag"))&&(a[i]=e[i]);return a}const Rc=C.createContext({});function Bc(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function ko(e){return typeof e=="string"||Array.isArray(e)}const Dh=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Mh=["initial",...Dh];function Lc(e){return Bc(e.animate)||Mh.some(t=>ko(e[t]))}function ab(e){return!!(Lc(e)||e.variants)}function SS(e,t){if(Lc(e)){const{initial:n,animate:a}=e;return{initial:n===!1||ko(n)?n:void 0,animate:ko(a)?a:void 0}}return e.inherit!==!1?t:{}}function kS(e){const{initial:t,animate:n}=SS(e,C.useContext(Rc));return C.useMemo(()=>({initial:t,animate:n}),[og(t),og(n)])}function og(e){return Array.isArray(e)?e.join(" "):e}function lg(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const fo={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(tt.test(e))e=parseFloat(e);else return e;const n=lg(e,t.target.x),a=lg(e,t.target.y);return`${n}% ${a}%`}},CS={correct:(e,{treeScale:t,projectionDelta:n})=>{const a=e,i=Fr.parse(e);if(i.length>5)return a;const l=Fr.createTransformer(e),c=typeof i[0]!="number"?1:0,d=n.x.scale*t.x,u=n.y.scale*t.y;i[0+c]/=d,i[1+c]/=u;const m=Wt(d,u,.5);return typeof i[2+c]=="number"&&(i[2+c]/=m),typeof i[3+c]=="number"&&(i[3+c]/=m),l(i)}},If={borderRadius:{...fo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:fo,borderTopRightRadius:fo,borderBottomLeftRadius:fo,borderBottomRightRadius:fo,boxShadow:CS};function ib(e,{layout:t,layoutId:n}){return ki.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!If[e]||e==="opacity")}const jS={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},NS=Si.length;function _S(e,t,n){let a="",i=!0;for(let l=0;l<NS;l++){const c=Si[l],d=e[c];if(d===void 0)continue;let u=!0;if(typeof d=="number"?u=d===(c.startsWith("scale")?1:0):u=parseFloat(d)===0,!u||n){const m=Z1(d,_h[c]);if(!u){i=!1;const p=jS[c]||c;a+=`${p}(${m}) `}n&&(t[c]=m)}}return a=a.trim(),n?a=n(t,i?"":a):i&&(a="none"),a}function Ph(e,t,n){const{style:a,vars:i,transformOrigin:l}=e;let c=!1,d=!1;for(const u in t){const m=t[u];if(ki.has(u)){c=!0;continue}else if(_1(u)){i[u]=m;continue}else{const p=Z1(m,_h[u]);u.startsWith("origin")?(d=!0,l[u]=p):a[u]=p}}if(t.transform||(c||n?a.transform=_S(t,e.transform,n):a.transform&&(a.transform="none")),d){const{originX:u="50%",originY:m="50%",originZ:p=0}=l;a.transformOrigin=`${u} ${m} ${p}`}}const Ih=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ob(e,t,n){for(const a in t)!En(t[a])&&!ib(a,n)&&(e[a]=t[a])}function ES({transformTemplate:e},t){return C.useMemo(()=>{const n=Ih();return Ph(n,t,e),Object.assign({},n.vars,n.style)},[t])}function AS(e,t){const n=e.style||{},a={};return ob(a,n,e),Object.assign(a,ES(e,t)),a}function TS(e,t){const n={},a=AS(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=a,n}const DS={offset:"stroke-dashoffset",array:"stroke-dasharray"},MS={offset:"strokeDashoffset",array:"strokeDasharray"};function PS(e,t,n=1,a=0,i=!0){e.pathLength=1;const l=i?DS:MS;e[l.offset]=tt.transform(-a);const c=tt.transform(t),d=tt.transform(n);e[l.array]=`${c} ${d}`}function lb(e,{attrX:t,attrY:n,attrScale:a,pathLength:i,pathSpacing:l=1,pathOffset:c=0,...d},u,m,p){if(Ph(e,d,m),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:g}=e;h.transform&&(g.transform=h.transform,delete h.transform),(g.transform||h.transformOrigin)&&(g.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),g.transform&&(g.transformBox=p?.transformBox??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),a!==void 0&&(h.scale=a),i!==void 0&&PS(h,i,l,c,!1)}const cb=()=>({...Ih(),attrs:{}}),db=e=>typeof e=="string"&&e.toLowerCase()==="svg";function IS(e,t,n,a){const i=C.useMemo(()=>{const l=cb();return lb(l,t,db(a),e.transformTemplate,e.style),{...l.attrs,style:{...l.style}}},[t]);if(e.style){const l={};ob(l,e.style,e),i.style={...l,...i.style}}return i}const FS=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Fh(e){return typeof e!="string"||e.includes("-")?!1:!!(FS.indexOf(e)>-1||/[A-Z]/u.test(e))}function RS(e,t,n,{latestValues:a},i,l=!1){const d=(Fh(e)?IS:TS)(t,a,i,e),u=wS(t,typeof e=="string",l),m=e!==C.Fragment?{...u,...d,ref:n}:{},{children:p}=t,h=C.useMemo(()=>En(p)?p.get():p,[p]);return C.createElement(e,{...m,children:h})}function cg(e){const t=[{},{}];return e?.values.forEach((n,a)=>{t[0][a]=n.get(),t[1][a]=n.getVelocity()}),t}function Rh(e,t,n,a){if(typeof t=="function"){const[i,l]=cg(a);t=t(n!==void 0?n:e.custom,i,l)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,l]=cg(a);t=t(n!==void 0?n:e.custom,i,l)}return t}function ic(e){return En(e)?e.get():e}function BS({scrapeMotionValuesFromProps:e,createRenderState:t},n,a,i){return{latestValues:LS(n,a,i,e),renderState:t()}}function LS(e,t,n,a){const i={},l=a(e,{});for(const g in l)i[g]=ic(l[g]);let{initial:c,animate:d}=e;const u=Lc(e),m=ab(e);t&&m&&!u&&e.inherit!==!1&&(c===void 0&&(c=t.initial),d===void 0&&(d=t.animate));let p=n?n.initial===!1:!1;p=p||c===!1;const h=p?d:c;if(h&&typeof h!="boolean"&&!Bc(h)){const g=Array.isArray(h)?h:[h];for(let x=0;x<g.length;x++){const v=Rh(e,g[x]);if(v){const{transitionEnd:y,transition:k,...w}=v;for(const _ in w){let N=w[_];if(Array.isArray(N)){const T=p?N.length-1:0;N=N[T]}N!==null&&(i[_]=N)}for(const _ in y)i[_]=y[_]}}}return i}const ub=e=>(t,n)=>{const a=C.useContext(Rc),i=C.useContext(Fc),l=()=>BS(e,t,a,i);return n?l():lh(l)};function Bh(e,t,n){const{style:a}=e,i={};for(const l in a)(En(a[l])||t.style&&En(t.style[l])||ib(l,e)||n?.getValue(l)?.liveStyle!==void 0)&&(i[l]=a[l]);return i}const OS=ub({scrapeMotionValuesFromProps:Bh,createRenderState:Ih});function fb(e,t,n){const a=Bh(e,t,n);for(const i in e)if(En(e[i])||En(t[i])){const l=Si.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;a[l]=e[i]}return a}const zS=ub({scrapeMotionValuesFromProps:fb,createRenderState:cb}),VS=Symbol.for("motionComponentSymbol");function ii(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function $S(e,t,n){return C.useCallback(a=>{a&&e.onMount&&e.onMount(a),t&&(a?t.mount(a):t.unmount()),n&&(typeof n=="function"?n(a):ii(n)&&(n.current=a))},[t])}const Lh=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),HS="framerAppearId",hb="data-"+Lh(HS),pb=C.createContext({});function US(e,t,n,a,i){const{visualElement:l}=C.useContext(Rc),c=C.useContext(sb),d=C.useContext(Fc),u=C.useContext(Th).reducedMotion,m=C.useRef(null);a=a||c.renderer,!m.current&&a&&(m.current=a(e,{visualState:t,parent:l,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:u}));const p=m.current,h=C.useContext(pb);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&WS(m.current,n,i,h);const g=C.useRef(!1);C.useInsertionEffect(()=>{p&&g.current&&p.update(n,d)});const x=n[hb],v=C.useRef(!!x&&!window.MotionHandoffIsComplete?.(x)&&window.MotionHasOptimisedAnimation?.(x));return d1(()=>{p&&(g.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),v.current&&p.animationState&&p.animationState.animateChanges())}),C.useEffect(()=>{p&&(!v.current&&p.animationState&&p.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(x)}),v.current=!1),p.enteringChildren=void 0)}),p}function WS(e,t,n,a){const{layoutId:i,layout:l,drag:c,dragConstraints:d,layoutScroll:u,layoutRoot:m,layoutCrossfade:p}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:mb(e.parent)),e.projection.setOptions({layoutId:i,layout:l,alwaysMeasureLayout:!!c||d&&ii(d),visualElement:e,animationType:typeof l=="string"?l:"both",initialPromotionConfig:a,crossfade:p,layoutScroll:u,layoutRoot:m})}function mb(e){if(e)return e.options.allowProjection!==!1?e.projection:mb(e.parent)}function Gu(e,{forwardMotionProps:t=!1}={},n,a){n&&bS(n);const i=Fh(e)?zS:OS;function l(d,u){let m;const p={...C.useContext(Th),...d,layoutId:KS(d)},{isStatic:h}=p,g=kS(d),x=i(d,h);if(!h&&ch){GS();const v=qS(p);m=v.MeasureLayout,g.visualElement=US(e,x,p,a,v.ProjectionNode)}return s.jsxs(Rc.Provider,{value:g,children:[m&&g.visualElement?s.jsx(m,{visualElement:g.visualElement,...p}):null,RS(e,d,$S(x,g.visualElement,u),x,h,t)]})}l.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const c=C.forwardRef(l);return c[VS]=e,c}function KS({layoutId:e}){const t=C.useContext(oh).id;return t&&e!==void 0?t+"-"+e:e}function GS(e,t){C.useContext(sb).strict}function qS(e){const{drag:t,layout:n}=bi;if(!t&&!n)return{};const a={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}function YS(e,t){if(typeof Proxy>"u")return Gu;const n=new Map,a=(l,c)=>Gu(l,c,e,t),i=(l,c)=>a(l,c);return new Proxy(i,{get:(l,c)=>c==="create"?a:(n.has(c)||n.set(c,Gu(c,void 0,e,t)),n.get(c))})}function gb({top:e,left:t,right:n,bottom:a}){return{x:{min:t,max:n},y:{min:e,max:a}}}function ZS({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function QS(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),a=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:a.y,right:a.x}}function qu(e){return e===void 0||e===1}function Ff({scale:e,scaleX:t,scaleY:n}){return!qu(e)||!qu(t)||!qu(n)}function ua(e){return Ff(e)||xb(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function xb(e){return dg(e.x)||dg(e.y)}function dg(e){return e&&e!=="0%"}function bc(e,t,n){const a=e-n,i=t*a;return n+i}function ug(e,t,n,a,i){return i!==void 0&&(e=bc(e,i,a)),bc(e,n,a)+t}function Rf(e,t=0,n=1,a,i){e.min=ug(e.min,t,n,a,i),e.max=ug(e.max,t,n,a,i)}function bb(e,{x:t,y:n}){Rf(e.x,t.translate,t.scale,t.originPoint),Rf(e.y,n.translate,n.scale,n.originPoint)}const fg=.999999999999,hg=1.0000000000001;function XS(e,t,n,a=!1){const i=n.length;if(!i)return;t.x=t.y=1;let l,c;for(let d=0;d<i;d++){l=n[d],c=l.projectionDelta;const{visualElement:u}=l.options;u&&u.props.style&&u.props.style.display==="contents"||(a&&l.options.layoutScroll&&l.scroll&&l!==l.root&&li(e,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),c&&(t.x*=c.x.scale,t.y*=c.y.scale,bb(e,c)),a&&ua(l.latestValues)&&li(e,l.latestValues))}t.x<hg&&t.x>fg&&(t.x=1),t.y<hg&&t.y>fg&&(t.y=1)}function oi(e,t){e.min=e.min+t,e.max=e.max+t}function pg(e,t,n,a,i=.5){const l=Wt(e.min,e.max,i);Rf(e,t,n,l,a)}function li(e,t){pg(e.x,t.x,t.scaleX,t.scale,t.originX),pg(e.y,t.y,t.scaleY,t.scale,t.originY)}function yb(e,t){return gb(QS(e.getBoundingClientRect(),t))}function JS(e,t,n){const a=yb(e,n),{scroll:i}=t;return i&&(oi(a.x,i.offset.x),oi(a.y,i.offset.y)),a}const mg=()=>({translate:0,scale:1,origin:0,originPoint:0}),ci=()=>({x:mg(),y:mg()}),gg=()=>({min:0,max:0}),cn=()=>({x:gg(),y:gg()}),Bf={current:null},vb={current:!1};function ek(){if(vb.current=!0,!!ch)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Bf.current=e.matches;e.addEventListener("change",t),t()}else Bf.current=!1}const tk=new WeakMap;function nk(e,t,n){for(const a in t){const i=t[a],l=n[a];if(En(i))e.addValue(a,i);else if(En(l))e.addValue(a,xi(i,{owner:e}));else if(l!==i)if(e.hasValue(a)){const c=e.getValue(a);c.liveStyle===!0?c.jump(i):c.hasAnimated||c.set(i)}else{const c=e.getStaticValue(a);e.addValue(a,xi(c!==void 0?c:i,{owner:e}))}}for(const a in n)t[a]===void 0&&e.removeValue(a);return t}const xg=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class sk{scrapeMotionValuesFromProps(t,n,a){return{}}constructor({parent:t,props:n,presenceContext:a,reducedMotionConfig:i,blockInitialAnimation:l,visualState:c},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=jh,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Qn.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,zt.render(this.render,!1,!0))};const{latestValues:u,renderState:m}=c;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=m,this.parent=t,this.props=n,this.presenceContext=a,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=d,this.blockInitialAnimation=!!l,this.isControllingVariants=Lc(n),this.isVariantNode=ab(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:p,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in h){const x=h[g];u[g]!==void 0&&En(x)&&x.set(u[g])}}mount(t){this.current=t,tk.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,a)=>this.bindToMotionValue(a,n)),vb.current||ek(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Bf.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ir(this.notifyUpdate),Ir(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const a=ki.has(t);a&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",c=>{this.latestValues[t]=c,this.props.onUpdate&&zt.preRender(this.notifyUpdate),a&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),l&&l(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in bi){const n=bi[t];if(!n)continue;const{isEnabled:a,Feature:i}=n;if(!this.features[t]&&i&&a(this.props)&&(this.features[t]=new i(this)),this.features[t]){const l=this.features[t];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):cn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let a=0;a<xg.length;a++){const i=xg[a];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const l="on"+i,c=t[l];c&&(this.propEventSubscriptions[i]=this.on(i,c))}this.prevMotionValues=nk(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const a=this.values.get(t);n!==a&&(a&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let a=this.values.get(t);return a===void 0&&n!==void 0&&(a=xi(n===null?void 0:n,{owner:this}),this.addValue(t,a)),a}readValue(t,n){let a=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return a!=null&&(typeof a=="string"&&(u1(a)||h1(a))?a=parseFloat(a):!uS(a)&&Fr.test(n)&&(a=Y1(t,n)),this.setBaseTarget(t,En(a)?a.get():a)),En(a)?a.get():a}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let a;if(typeof n=="string"||typeof n=="object"){const l=Rh(this.props,n,this.presenceContext?.custom);l&&(a=l[t])}if(n&&a!==void 0)return a;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!En(i)?i:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new ph),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){Eh.render(this.render)}}class wb extends sk{constructor(){super(...arguments),this.KeyframeResolver=J3}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:a}){delete n[t],delete a[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;En(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Sb(e,{style:t,vars:n},a,i){const l=e.style;let c;for(c in t)l[c]=t[c];i?.applyProjectionStyles(l,a);for(c in n)l.setProperty(c,n[c])}function rk(e){return window.getComputedStyle(e)}class ak extends wb{constructor(){super(...arguments),this.type="html",this.renderInstance=Sb}readValueFromInstance(t,n){if(ki.has(n))return this.projection?.isProjecting?_f(n):b3(t,n);{const a=rk(t),i=(_1(n)?a.getPropertyValue(n):a[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return yb(t,n)}build(t,n,a){Ph(t,n,a.transformTemplate)}scrapeMotionValuesFromProps(t,n,a){return Bh(t,n,a)}}const kb=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ik(e,t,n,a){Sb(e,t,void 0,a);for(const i in t.attrs)e.setAttribute(kb.has(i)?i:Lh(i),t.attrs[i])}class ok extends wb{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=cn}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(ki.has(n)){const a=q1(n);return a&&a.default||0}return n=kb.has(n)?n:Lh(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,a){return fb(t,n,a)}build(t,n,a){lb(t,n,this.isSVGTag,a.transformTemplate,a.style)}renderInstance(t,n,a,i){ik(t,n,a,i)}mount(t){this.isSVGTag=db(t.tagName),super.mount(t)}}const lk=(e,t)=>Fh(e)?new ok(t):new ak(t,{allowProjection:e!==C.Fragment});function ui(e,t,n){const a=e.getProps();return Rh(a,t,n!==void 0?n:a.custom,e)}const Lf=e=>Array.isArray(e);function ck(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,xi(n))}function dk(e){return Lf(e)?e[e.length-1]||0:e}function uk(e,t){const n=ui(e,t);let{transitionEnd:a={},transition:i={},...l}=n||{};l={...l,...a};for(const c in l){const d=dk(l[c]);ck(e,c,d)}}function fk(e){return!!(En(e)&&e.add)}function Of(e,t){const n=e.getValue("willChange");if(fk(n))return n.add(t);if(!n&&lr.WillChange){const a=new lr.WillChange("auto");e.addValue("willChange",a),a.add(t)}}function Cb(e){return e.props[hb]}const hk=e=>e!==null;function pk(e,{repeat:t,repeatType:n="loop"},a){const i=e.filter(hk),l=t&&n!=="loop"&&t%2===1?0:i.length-1;return i[l]}const mk={type:"spring",stiffness:500,damping:25,restSpeed:10},gk=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),xk={type:"keyframes",duration:.8},bk={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},yk=(e,{keyframes:t})=>t.length>2?xk:ki.has(e)?e.startsWith("scale")?gk(t[1]):mk:bk;function vk({when:e,delay:t,delayChildren:n,staggerChildren:a,staggerDirection:i,repeat:l,repeatType:c,repeatDelay:d,from:u,elapsed:m,...p}){return!!Object.keys(p).length}const Oh=(e,t,n,a={},i,l)=>c=>{const d=Nh(a,e)||{},u=d.delay||a.delay||0;let{elapsed:m=0}=a;m=m-Hs(u);const p={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...d,delay:-m,onUpdate:g=>{t.set(g),d.onUpdate&&d.onUpdate(g)},onComplete:()=>{c(),d.onComplete&&d.onComplete()},name:e,motionValue:t,element:l?void 0:i};vk(d)||Object.assign(p,yk(e,p)),p.duration&&(p.duration=Hs(p.duration)),p.repeatDelay&&(p.repeatDelay=Hs(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let h=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(Mf(p),p.delay===0&&(h=!0)),(lr.instantAnimations||lr.skipAnimations)&&(h=!0,Mf(p),p.delay=0),p.allowFlatten=!d.type&&!d.ease,h&&!l&&t.get()!==void 0){const g=pk(p.keyframes,d);if(g!==void 0){zt.update(()=>{p.onUpdate(g),p.onComplete()});return}}return d.isSync?new Ch(p):new V3(p)};function wk({protectedKeys:e,needsAnimating:t},n){const a=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,a}function jb(e,t,{delay:n=0,transitionOverride:a,type:i}={}){let{transition:l=e.getDefaultTransition(),transitionEnd:c,...d}=t;a&&(l=a);const u=[],m=i&&e.animationState&&e.animationState.getState()[i];for(const p in d){const h=e.getValue(p,e.latestValues[p]??null),g=d[p];if(g===void 0||m&&wk(m,p))continue;const x={delay:n,...Nh(l||{},p)},v=h.get();if(v!==void 0&&!h.isAnimating&&!Array.isArray(g)&&g===v&&!x.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const w=Cb(e);if(w){const _=window.MotionHandoffAnimation(w,p,zt);_!==null&&(x.startTime=_,y=!0)}}Of(e,p),h.start(Oh(p,h,g,e.shouldReduceMotion&&W1.has(p)?{type:!1}:x,e,y));const k=h.animation;k&&u.push(k)}return c&&Promise.all(u).then(()=>{zt.update(()=>{c&&uk(e,c)})}),u}function Nb(e,t,n,a=0,i=1){const l=Array.from(e).sort((m,p)=>m.sortNodePosition(p)).indexOf(t),c=e.size,d=(c-1)*a;return typeof n=="function"?n(l,c):i===1?l*a:d-l*a}function zf(e,t,n={}){const a=ui(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=a||{};n.transitionOverride&&(i=n.transitionOverride);const l=a?()=>Promise.all(jb(e,a,n)):()=>Promise.resolve(),c=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:m=0,staggerChildren:p,staggerDirection:h}=i;return Sk(e,t,u,m,p,h,n)}:()=>Promise.resolve(),{when:d}=i;if(d){const[u,m]=d==="beforeChildren"?[l,c]:[c,l];return u().then(()=>m())}else return Promise.all([l(),c(n.delay)])}function Sk(e,t,n=0,a=0,i=0,l=1,c){const d=[];for(const u of e.variantChildren)u.notify("AnimationStart",t),d.push(zf(u,t,{...c,delay:n+(typeof a=="function"?0:a)+Nb(e.variantChildren,u,a,i,l)}).then(()=>u.notify("AnimationComplete",t)));return Promise.all(d)}function kk(e,t,n={}){e.notify("AnimationStart",t);let a;if(Array.isArray(t)){const i=t.map(l=>zf(e,l,n));a=Promise.all(i)}else if(typeof t=="string")a=zf(e,t,n);else{const i=typeof t=="function"?ui(e,t,n.custom):t;a=Promise.all(jb(e,i,n))}return a.then(()=>{e.notify("AnimationComplete",t)})}function _b(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let a=0;a<n;a++)if(t[a]!==e[a])return!1;return!0}const Ck=Mh.length;function Eb(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?Eb(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<Ck;n++){const a=Mh[n],i=e.props[a];(ko(i)||i===!1)&&(t[a]=i)}return t}const jk=[...Dh].reverse(),Nk=Dh.length;function _k(e){return t=>Promise.all(t.map(({animation:n,options:a})=>kk(e,n,a)))}function Ek(e){let t=_k(e),n=bg(),a=!0;const i=u=>(m,p)=>{const h=ui(e,p,u==="exit"?e.presenceContext?.custom:void 0);if(h){const{transition:g,transitionEnd:x,...v}=h;m={...m,...v,...x}}return m};function l(u){t=u(e)}function c(u){const{props:m}=e,p=Eb(e.parent)||{},h=[],g=new Set;let x={},v=1/0;for(let k=0;k<Nk;k++){const w=jk[k],_=n[w],N=m[w]!==void 0?m[w]:p[w],T=ko(N),B=w===u?_.isActive:null;B===!1&&(v=k);let O=N===p[w]&&N!==m[w]&&T;if(O&&a&&e.manuallyAnimateOnMount&&(O=!1),_.protectedKeys={...x},!_.isActive&&B===null||!N&&!_.prevProp||Bc(N)||typeof N=="boolean")continue;const $=Ak(_.prevProp,N);let P=$||w===u&&_.isActive&&!O&&T||k>v&&T,A=!1;const H=Array.isArray(N)?N:[N];let Y=H.reduce(i(w),{});B===!1&&(Y={});const{prevResolvedValues:E={}}=_,D={...E,...Y},S=F=>{P=!0,g.has(F)&&(A=!0,g.delete(F)),_.needsAnimating[F]=!0;const K=e.getValue(F);K&&(K.liveStyle=!1)};for(const F in D){const K=Y[F],G=E[F];if(x.hasOwnProperty(F))continue;let Z=!1;Lf(K)&&Lf(G)?Z=!_b(K,G):Z=K!==G,Z?K!=null?S(F):g.add(F):K!==void 0&&g.has(F)?S(F):_.protectedKeys[F]=!0}_.prevProp=N,_.prevResolvedValues=Y,_.isActive&&(x={...x,...Y}),a&&e.blockInitialAnimation&&(P=!1);const z=O&&$;P&&(!z||A)&&h.push(...H.map(F=>{const K={type:w};if(typeof F=="string"&&a&&!z&&e.manuallyAnimateOnMount&&e.parent){const{parent:G}=e,Z=ui(G,F);if(G.enteringChildren&&Z){const{delayChildren:R}=Z.transition||{};K.delay=Nb(G.enteringChildren,e,R)}}return{animation:F,options:K}}))}if(g.size){const k={};if(typeof m.initial!="boolean"){const w=ui(e,Array.isArray(m.initial)?m.initial[0]:m.initial);w&&w.transition&&(k.transition=w.transition)}g.forEach(w=>{const _=e.getBaseTarget(w),N=e.getValue(w);N&&(N.liveStyle=!0),k[w]=_??null}),h.push({animation:k})}let y=!!h.length;return a&&(m.initial===!1||m.initial===m.animate)&&!e.manuallyAnimateOnMount&&(y=!1),a=!1,y?t(h):Promise.resolve()}function d(u,m){if(n[u].isActive===m)return Promise.resolve();e.variantChildren?.forEach(h=>h.animationState?.setActive(u,m)),n[u].isActive=m;const p=c(u);for(const h in n)n[h].protectedKeys={};return p}return{animateChanges:c,setActive:d,setAnimateFunction:l,getState:()=>n,reset:()=>{n=bg()}}}function Ak(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!_b(t,e):!1}function oa(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function bg(){return{animate:oa(!0),whileInView:oa(),whileHover:oa(),whileTap:oa(),whileDrag:oa(),whileFocus:oa(),exit:oa()}}class Lr{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Tk extends Lr{constructor(t){super(t),t.animationState||(t.animationState=Ek(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Bc(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Dk=0;class Mk extends Lr{constructor(){super(...arguments),this.id=Dk++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Pk={animation:{Feature:Tk},exit:{Feature:Mk}};function Co(e,t,n,a={passive:!0}){return e.addEventListener(t,n,a),()=>e.removeEventListener(t,n)}function Mo(e){return{point:{x:e.pageX,y:e.pageY}}}const Ik=e=>t=>Ah(t)&&e(t,Mo(t));function bo(e,t,n,a){return Co(e,t,Ik(n),a)}const Ab=1e-4,Fk=1-Ab,Rk=1+Ab,Tb=.01,Bk=0-Tb,Lk=0+Tb;function Ln(e){return e.max-e.min}function Ok(e,t,n){return Math.abs(e-t)<=n}function yg(e,t,n,a=.5){e.origin=a,e.originPoint=Wt(t.min,t.max,e.origin),e.scale=Ln(n)/Ln(t),e.translate=Wt(n.min,n.max,e.origin)-e.originPoint,(e.scale>=Fk&&e.scale<=Rk||isNaN(e.scale))&&(e.scale=1),(e.translate>=Bk&&e.translate<=Lk||isNaN(e.translate))&&(e.translate=0)}function yo(e,t,n,a){yg(e.x,t.x,n.x,a?a.originX:void 0),yg(e.y,t.y,n.y,a?a.originY:void 0)}function vg(e,t,n){e.min=n.min+t.min,e.max=e.min+Ln(t)}function zk(e,t,n){vg(e.x,t.x,n.x),vg(e.y,t.y,n.y)}function wg(e,t,n){e.min=t.min-n.min,e.max=e.min+Ln(t)}function yc(e,t,n){wg(e.x,t.x,n.x),wg(e.y,t.y,n.y)}function us(e){return[e("x"),e("y")]}const Db=({current:e})=>e?e.ownerDocument.defaultView:null,Sg=(e,t)=>Math.abs(e-t);function Vk(e,t){const n=Sg(e.x,t.x),a=Sg(e.y,t.y);return Math.sqrt(n**2+a**2)}class Mb{constructor(t,n,{transformPagePoint:a,contextWindow:i=window,dragSnapToOrigin:l=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Zu(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,v=Vk(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!x&&!v)return;const{point:y}=g,{timestamp:k}=wn;this.history.push({...y,timestamp:k});const{onStart:w,onMove:_}=this.handlers;x||(w&&w(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,g)},this.handlePointerMove=(g,x)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Yu(x,this.transformPagePoint),zt.update(this.updatePoint,!0)},this.handlePointerUp=(g,x)=>{this.end();const{onEnd:v,onSessionEnd:y,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Zu(g.type==="pointercancel"?this.lastMoveEventInfo:Yu(x,this.transformPagePoint),this.history);this.startEvent&&v&&v(g,w),y&&y(g,w)},!Ah(t))return;this.dragSnapToOrigin=l,this.handlers=n,this.transformPagePoint=a,this.distanceThreshold=c,this.contextWindow=i||window;const d=Mo(t),u=Yu(d,this.transformPagePoint),{point:m}=u,{timestamp:p}=wn;this.history=[{...m,timestamp:p}];const{onSessionStart:h}=n;h&&h(t,Zu(u,this.history)),this.removeListeners=Ao(bo(this.contextWindow,"pointermove",this.handlePointerMove),bo(this.contextWindow,"pointerup",this.handlePointerUp),bo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ir(this.updatePoint)}}function Yu(e,t){return t?{point:t(e.point)}:e}function kg(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Zu({point:e},t){return{point:e,delta:kg(e,Pb(t)),offset:kg(e,$k(t)),velocity:Hk(t,.1)}}function $k(e){return e[0]}function Pb(e){return e[e.length-1]}function Hk(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,a=null;const i=Pb(e);for(;n>=0&&(a=e[n],!(i.timestamp-a.timestamp>Hs(t)));)n--;if(!a)return{x:0,y:0};const l=hs(i.timestamp-a.timestamp);if(l===0)return{x:0,y:0};const c={x:(i.x-a.x)/l,y:(i.y-a.y)/l};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function Uk(e,{min:t,max:n},a){return t!==void 0&&e<t?e=a?Wt(t,e,a.min):Math.max(e,t):n!==void 0&&e>n&&(e=a?Wt(n,e,a.max):Math.min(e,n)),e}function Cg(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function Wk(e,{top:t,left:n,bottom:a,right:i}){return{x:Cg(e.x,n,i),y:Cg(e.y,t,a)}}function jg(e,t){let n=t.min-e.min,a=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,a]=[a,n]),{min:n,max:a}}function Kk(e,t){return{x:jg(e.x,t.x),y:jg(e.y,t.y)}}function Gk(e,t){let n=.5;const a=Ln(e),i=Ln(t);return i>a?n=vo(t.min,t.max-a,e.min):a>i&&(n=vo(e.min,e.max-i,t.min)),or(0,1,n)}function qk(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Vf=.35;function Yk(e=Vf){return e===!1?e=0:e===!0&&(e=Vf),{x:Ng(e,"left","right"),y:Ng(e,"top","bottom")}}function Ng(e,t,n){return{min:_g(e,t),max:_g(e,n)}}function _g(e,t){return typeof e=="number"?e:e[t]||0}const Zk=new WeakMap;class Qk{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=cn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:a}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const l=h=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Mo(h).point)},c=(h,g)=>{const{drag:x,dragPropagation:v,onDragStart:y}=this.getProps();if(x&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=sS(x),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),us(w=>{let _=this.getAxisMotionValue(w).get()||0;if(Us.test(_)){const{projection:N}=this.visualElement;if(N&&N.layout){const T=N.layout.layoutBox[w];T&&(_=Ln(T)*(parseFloat(_)/100))}}this.originPoint[w]=_}),y&&zt.postRender(()=>y(h,g)),Of(this.visualElement,"transform");const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},d=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g;const{dragPropagation:x,dragDirectionLock:v,onDirectionLock:y,onDrag:k}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:w}=g;if(v&&this.currentDirection===null){this.currentDirection=Xk(w),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",g.point,w),this.updateAxis("y",g.point,w),this.visualElement.render(),k&&k(h,g)},u=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g,this.stop(h,g),this.latestPointerEvent=null,this.latestPanInfo=null},m=()=>us(h=>this.getAnimationState(h)==="paused"&&this.getAxisMotionValue(h).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new Mb(t,{onSessionStart:l,onStart:c,onMove:d,onSessionEnd:u,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:a,contextWindow:Db(this.visualElement)})}stop(t,n){const a=t||this.latestPointerEvent,i=n||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!i||!a)return;const{velocity:c}=i;this.startAnimation(c);const{onDragEnd:d}=this.getProps();d&&zt.postRender(()=>d(a,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,a){const{drag:i}=this.getProps();if(!a||!Wl(t,i,this.currentDirection))return;const l=this.getAxisMotionValue(t);let c=this.originPoint[t]+a[t];this.constraints&&this.constraints[t]&&(c=Uk(c,this.constraints[t],this.elastic[t])),l.set(c)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;t&&ii(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&a?this.constraints=Wk(a.layoutBox,t):this.constraints=!1,this.elastic=Yk(n),i!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&us(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=qk(a.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!ii(t))return!1;const a=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const l=JS(a,i.root,this.visualElement.getTransformPagePoint());let c=Kk(i.layout.layoutBox,l);if(n){const d=n(ZS(c));this.hasMutatedConstraints=!!d,d&&(c=gb(d))}return c}startAnimation(t){const{drag:n,dragMomentum:a,dragElastic:i,dragTransition:l,dragSnapToOrigin:c,onDragTransitionEnd:d}=this.getProps(),u=this.constraints||{},m=us(p=>{if(!Wl(p,n,this.currentDirection))return;let h=u&&u[p]||{};c&&(h={min:0,max:0});const g=i?200:1e6,x=i?40:1e7,v={type:"inertia",velocity:a?t[p]:0,bounceStiffness:g,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...l,...h};return this.startAxisValueAnimation(p,v)});return Promise.all(m).then(d)}startAxisValueAnimation(t,n){const a=this.getAxisMotionValue(t);return Of(this.visualElement,t),a.start(Oh(t,a,0,n,this.visualElement,!1))}stopAnimation(){us(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){us(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,a=this.visualElement.getProps(),i=a[n];return i||this.visualElement.getValue(t,(a.initial?a.initial[t]:void 0)||0)}snapToCursor(t){us(n=>{const{drag:a}=this.getProps();if(!Wl(n,a,this.currentDirection))return;const{projection:i}=this.visualElement,l=this.getAxisMotionValue(n);if(i&&i.layout){const{min:c,max:d}=i.layout.layoutBox[n];l.set(t[n]-Wt(c,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:a}=this.visualElement;if(!ii(n)||!a||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};us(c=>{const d=this.getAxisMotionValue(c);if(d&&this.constraints!==!1){const u=d.get();i[c]=Gk({min:u,max:u},this.constraints[c])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),us(c=>{if(!Wl(c,t,null))return;const d=this.getAxisMotionValue(c),{min:u,max:m}=this.constraints[c];d.set(Wt(u,m,i[c]))})}addListeners(){if(!this.visualElement.current)return;Zk.set(this.visualElement,this);const t=this.visualElement.current,n=bo(t,"pointerdown",u=>{const{drag:m,dragListener:p=!0}=this.getProps();m&&p&&this.start(u)}),a=()=>{const{dragConstraints:u}=this.getProps();ii(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,l=i.addEventListener("measure",a);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),zt.read(a);const c=Co(window,"resize",()=>this.scalePositionWithinConstraints()),d=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:m})=>{this.isDragging&&m&&(us(p=>{const h=this.getAxisMotionValue(p);h&&(this.originPoint[p]+=u[p].translate,h.set(h.get()+u[p].translate))}),this.visualElement.render())}));return()=>{c(),n(),l(),d&&d()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:a=!1,dragPropagation:i=!1,dragConstraints:l=!1,dragElastic:c=Vf,dragMomentum:d=!0}=t;return{...t,drag:n,dragDirectionLock:a,dragPropagation:i,dragConstraints:l,dragElastic:c,dragMomentum:d}}}function Wl(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function Xk(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class Jk extends Lr{constructor(t){super(t),this.removeGroupControls=ps,this.removeListeners=ps,this.controls=new Qk(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ps}unmount(){this.removeGroupControls(),this.removeListeners()}}const Eg=e=>(t,n)=>{e&&zt.postRender(()=>e(t,n))};class eC extends Lr{constructor(){super(...arguments),this.removePointerDownListener=ps}onPointerDown(t){this.session=new Mb(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Db(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:a,onPanEnd:i}=this.node.getProps();return{onSessionStart:Eg(t),onStart:Eg(n),onMove:a,onEnd:(l,c)=>{delete this.session,i&&zt.postRender(()=>i(l,c))}}}mount(){this.removePointerDownListener=bo(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const oc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Qu=!1;class tC extends C.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:a,layoutId:i}=this.props,{projection:l}=t;l&&(n.group&&n.group.add(l),a&&a.register&&i&&a.register(l),Qu&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),oc.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:a,drag:i,isPresent:l}=this.props,{projection:c}=a;return c&&(c.isPresent=l,Qu=!0,i||t.layoutDependency!==n||n===void 0||t.isPresent!==l?c.willUpdate():this.safeToRemove(),t.isPresent!==l&&(l?c.promote():c.relegate()||zt.postRender(()=>{const d=c.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Eh.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:a}=this.props,{projection:i}=t;Qu=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),a&&a.deregister&&a.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Ib(e){const[t,n]=nb(),a=C.useContext(oh);return s.jsx(tC,{...e,layoutGroup:a,switchLayoutGroup:C.useContext(pb),isPresent:t,safeToRemove:n})}function nC(e,t,n){const a=En(e)?e:xi(e);return a.start(Oh("",a,t,n)),a.animation}const sC=(e,t)=>e.depth-t.depth;class rC{constructor(){this.children=[],this.isDirty=!1}add(t){dh(this.children,t),this.isDirty=!0}remove(t){uh(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(sC),this.isDirty=!1,this.children.forEach(t)}}function aC(e,t){const n=Qn.now(),a=({timestamp:i})=>{const l=i-n;l>=t&&(Ir(a),e(l-t))};return zt.setup(a,!0),()=>Ir(a)}const Fb=["TopLeft","TopRight","BottomLeft","BottomRight"],iC=Fb.length,Ag=e=>typeof e=="string"?parseFloat(e):e,Tg=e=>typeof e=="number"||tt.test(e);function oC(e,t,n,a,i,l){i?(e.opacity=Wt(0,n.opacity??1,lC(a)),e.opacityExit=Wt(t.opacity??1,0,cC(a))):l&&(e.opacity=Wt(t.opacity??1,n.opacity??1,a));for(let c=0;c<iC;c++){const d=`border${Fb[c]}Radius`;let u=Dg(t,d),m=Dg(n,d);if(u===void 0&&m===void 0)continue;u||(u=0),m||(m=0),u===0||m===0||Tg(u)===Tg(m)?(e[d]=Math.max(Wt(Ag(u),Ag(m),a),0),(Us.test(m)||Us.test(u))&&(e[d]+="%")):e[d]=m}(t.rotate||n.rotate)&&(e.rotate=Wt(t.rotate||0,n.rotate||0,a))}function Dg(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const lC=Rb(0,.5,w1),cC=Rb(.5,.95,ps);function Rb(e,t,n){return a=>a<e?0:a>t?1:n(vo(e,t,a))}function Mg(e,t){e.min=t.min,e.max=t.max}function Cs(e,t){Mg(e.x,t.x),Mg(e.y,t.y)}function Pg(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Ig(e,t,n,a,i){return e-=t,e=bc(e,1/n,a),i!==void 0&&(e=bc(e,1/i,a)),e}function dC(e,t=0,n=1,a=.5,i,l=e,c=e){if(Us.test(t)&&(t=parseFloat(t),t=Wt(c.min,c.max,t/100)-c.min),typeof t!="number")return;let d=Wt(l.min,l.max,a);e===l&&(d-=t),e.min=Ig(e.min,t,n,d,i),e.max=Ig(e.max,t,n,d,i)}function Fg(e,t,[n,a,i],l,c){dC(e,t[n],t[a],t[i],t.scale,l,c)}const uC=["x","scaleX","originX"],fC=["y","scaleY","originY"];function Rg(e,t,n,a){Fg(e.x,t,uC,n?n.x:void 0,a?a.x:void 0),Fg(e.y,t,fC,n?n.y:void 0,a?a.y:void 0)}function Bg(e){return e.translate===0&&e.scale===1}function Bb(e){return Bg(e.x)&&Bg(e.y)}function Lg(e,t){return e.min===t.min&&e.max===t.max}function hC(e,t){return Lg(e.x,t.x)&&Lg(e.y,t.y)}function Og(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Lb(e,t){return Og(e.x,t.x)&&Og(e.y,t.y)}function zg(e){return Ln(e.x)/Ln(e.y)}function Vg(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class pC{constructor(){this.members=[]}add(t){dh(this.members,t),t.scheduleRender()}remove(t){if(uh(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let a;for(let i=n;i>=0;i--){const l=this.members[i];if(l.isPresent!==!1){a=l;break}}return a?(this.promote(a),!0):!1}promote(t,n){const a=this.lead;if(t!==a&&(this.prevLead=a,this.lead=t,t.show(),a)){a.instance&&a.scheduleRender(),t.scheduleRender(),t.resumeFrom=a,n&&(t.resumeFrom.preserveOpacity=!0),a.snapshot&&(t.snapshot=a.snapshot,t.snapshot.latestValues=a.animationValues||a.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:a}=t;n.onExitComplete&&n.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function mC(e,t,n){let a="";const i=e.x.translate/t.x,l=e.y.translate/t.y,c=n?.z||0;if((i||l||c)&&(a=`translate3d(${i}px, ${l}px, ${c}px) `),(t.x!==1||t.y!==1)&&(a+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:m,rotate:p,rotateX:h,rotateY:g,skewX:x,skewY:v}=n;m&&(a=`perspective(${m}px) ${a}`),p&&(a+=`rotate(${p}deg) `),h&&(a+=`rotateX(${h}deg) `),g&&(a+=`rotateY(${g}deg) `),x&&(a+=`skewX(${x}deg) `),v&&(a+=`skewY(${v}deg) `)}const d=e.x.scale*t.x,u=e.y.scale*t.y;return(d!==1||u!==1)&&(a+=`scale(${d}, ${u})`),a||"none"}const Xu=["","X","Y","Z"],gC=1e3;let xC=0;function Ju(e,t,n,a){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),a&&(a[e]=0))}function Ob(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Cb(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:l}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",zt,!(i||l))}const{parent:a}=e;a&&!a.hasCheckedOptimisedAppear&&Ob(a)}function zb({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:a,resetTransform:i}){return class{constructor(c={},d=t?.()){this.id=xC++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(vC),this.nodes.forEach(CC),this.nodes.forEach(jC),this.nodes.forEach(wC)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new rC)}addEventListener(c,d){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new ph),this.eventHandlers.get(c).add(d)}notifyListeners(c,...d){const u=this.eventHandlers.get(c);u&&u.notify(...d)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=tb(c)&&!cS(c),this.instance=c;const{layoutId:d,layout:u,visualElement:m}=this.options;if(m&&!m.current&&m.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||d)&&(this.isLayoutDirty=!0),e){let p,h=0;const g=()=>this.root.updateBlockedByResize=!1;zt.read(()=>{h=window.innerWidth}),e(c,()=>{const x=window.innerWidth;x!==h&&(h=x,this.root.updateBlockedByResize=!0,p&&p(),p=aC(g,250),oc.hasAnimatedSinceResize&&(oc.hasAnimatedSinceResize=!1,this.nodes.forEach(Ug)))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&m&&(d||u)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:h,hasRelativeLayoutChanged:g,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||m.getDefaultTransition()||TC,{onLayoutAnimationStart:y,onLayoutAnimationComplete:k}=m.getProps(),w=!this.targetLayout||!Lb(this.targetLayout,x),_=!h&&g;if(this.options.layoutRoot||this.resumeFrom||_||h&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const N={...Nh(v,"layout"),onPlay:y,onComplete:k};(m.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N),this.setAnimationOrigin(p,_)}else h||Ug(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ir(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(NC),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Ob(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const h=this.path[p];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:d,layout:u}=this.options;if(d===void 0&&!u)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach($g);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Hg);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(kC),this.nodes.forEach(bC),this.nodes.forEach(yC)):this.nodes.forEach(Hg),this.clearAllSnapshots();const d=Qn.now();wn.delta=or(0,1e3/60,d-wn.timestamp),wn.timestamp=d,wn.isProcessing=!0,Vu.update.process(wn),Vu.preRender.process(wn),Vu.render.process(wn),wn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Eh.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(SC),this.sharedNodes.forEach(_C)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,zt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){zt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ln(this.snapshot.measuredBox.x)&&!Ln(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=cn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(d=!1),d&&this.instance){const u=a(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!Bb(this.projectionDelta),u=this.getTransformTemplate(),m=u?u(this.latestValues,""):void 0,p=m!==this.prevTransformTemplateValue;c&&this.instance&&(d||ua(this.latestValues)||p)&&(i(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const d=this.measurePageBox();let u=this.removeElementScroll(d);return c&&(u=this.removeTransform(u)),DC(u),{animationId:this.root.animationId,measuredBox:d,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return cn();const d=c.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(MC))){const{scroll:m}=this.root;m&&(oi(d.x,m.offset.x),oi(d.y,m.offset.y))}return d}removeElementScroll(c){const d=cn();if(Cs(d,c),this.scroll?.wasRoot)return d;for(let u=0;u<this.path.length;u++){const m=this.path[u],{scroll:p,options:h}=m;m!==this.root&&p&&h.layoutScroll&&(p.wasRoot&&Cs(d,c),oi(d.x,p.offset.x),oi(d.y,p.offset.y))}return d}applyTransform(c,d=!1){const u=cn();Cs(u,c);for(let m=0;m<this.path.length;m++){const p=this.path[m];!d&&p.options.layoutScroll&&p.scroll&&p!==p.root&&li(u,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),ua(p.latestValues)&&li(u,p.latestValues)}return ua(this.latestValues)&&li(u,this.latestValues),u}removeTransform(c){const d=cn();Cs(d,c);for(let u=0;u<this.path.length;u++){const m=this.path[u];if(!m.instance||!ua(m.latestValues))continue;Ff(m.latestValues)&&m.updateSnapshot();const p=cn(),h=m.measurePageBox();Cs(p,h),Rg(d,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,p)}return ua(this.latestValues)&&Rg(d,this.latestValues),d}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==wn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==d;if(!(c||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:h}=this.options;if(!this.layout||!(p||h))return;this.resolvedRelativeTargetAt=wn.timestamp;const g=this.getClosestProjectingParent();g&&this.linkedParentVersion!==g.layoutVersion&&!g.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(g&&g.layout?this.createRelativeTarget(g,this.layout.layoutBox,g.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=cn(),this.targetWithTransforms=cn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),zk(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Cs(this.target,this.layout.layoutBox),bb(this.target,this.targetDelta)):Cs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?this.createRelativeTarget(g,this.target,g.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Ff(this.parent.latestValues)||xb(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(c,d,u){this.relativeParent=c,this.linkedParentVersion=c.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=cn(),this.relativeTargetOrigin=cn(),yc(this.relativeTargetOrigin,d,u),Cs(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const c=this.getLead(),d=!!this.resumingFrom||this!==c;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===wn.timestamp&&(u=!1),u)return;const{layout:m,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||p))return;Cs(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,g=this.treeScale.y;XS(this.layoutCorrected,this.treeScale,this.path,d),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=cn());const{target:x}=c;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Pg(this.prevProjectionDelta.x,this.projectionDelta.x),Pg(this.prevProjectionDelta.y,this.projectionDelta.y)),yo(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==g||!Vg(this.projectionDelta.x,this.prevProjectionDelta.x)||!Vg(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.visualElement?.scheduleRender(),c){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ci(),this.projectionDelta=ci(),this.projectionDeltaWithTransform=ci()}setAnimationOrigin(c,d=!1){const u=this.snapshot,m=u?u.latestValues:{},p={...this.latestValues},h=ci();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const g=cn(),x=u?u.source:void 0,v=this.layout?this.layout.source:void 0,y=x!==v,k=this.getStack(),w=!k||k.members.length<=1,_=!!(y&&!w&&this.options.crossfade===!0&&!this.path.some(AC));this.animationProgress=0;let N;this.mixTargetDelta=T=>{const B=T/1e3;Wg(h.x,c.x,B),Wg(h.y,c.y,B),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(yc(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),EC(this.relativeTarget,this.relativeTargetOrigin,g,B),N&&hC(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=cn()),Cs(N,this.relativeTarget)),y&&(this.animationValues=p,oC(p,m,this.latestValues,B,_,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=B},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Ir(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=zt.update(()=>{oc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=xi(0)),this.currentAnimation=nC(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),c.onUpdate&&c.onUpdate(d)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(gC),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:d,target:u,layout:m,latestValues:p}=c;if(!(!d||!u||!m)){if(this!==c&&this.layout&&m&&Vb(this.options.animationType,this.layout.layoutBox,m.layoutBox)){u=this.target||cn();const h=Ln(this.layout.layoutBox.x);u.x.min=c.target.x.min,u.x.max=u.x.min+h;const g=Ln(this.layout.layoutBox.y);u.y.min=c.target.y.min,u.y.max=u.y.min+g}Cs(d,u),li(d,p),yo(this.projectionDeltaWithTransform,this.layoutCorrected,d,p)}}registerSharedNode(c,d){this.sharedNodes.has(c)||this.sharedNodes.set(c,new pC),this.sharedNodes.get(c).add(d);const m=d.options.initialPromotionConfig;d.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(d):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){const{layoutId:c}=this.options;return c?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:c}=this.options;return c?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:d,preserveFollowOpacity:u}={}){const m=this.getStack();m&&m.promote(this,u),c&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let d=!1;const{latestValues:u}=c;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(d=!0),!d)return;const m={};u.z&&Ju("z",c,m,this.animationValues);for(let p=0;p<Xu.length;p++)Ju(`rotate${Xu[p]}`,c,m,this.animationValues),Ju(`skew${Xu[p]}`,c,m,this.animationValues);c.render();for(const p in m)c.setStaticValue(p,m[p]),this.animationValues&&(this.animationValues[p]=m[p]);c.scheduleRender()}applyProjectionStyles(c,d){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=ic(d?.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none";return}const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=ic(d?.pointerEvents)||""),this.hasProjected&&!ua(this.latestValues)&&(c.transform=u?u({},""):"none",this.hasProjected=!1);return}c.visibility="";const p=m.animationValues||m.latestValues;this.applyTransformsToTarget();let h=mC(this.projectionDeltaWithTransform,this.treeScale,p);u&&(h=u(p,h)),c.transform=h;const{x:g,y:x}=this.projectionDelta;c.transformOrigin=`${g.origin*100}% ${x.origin*100}% 0`,m.animationValues?c.opacity=m===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=m===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const v in If){if(p[v]===void 0)continue;const{correct:y,applyTo:k,isCSSVariable:w}=If[v],_=h==="none"?p[v]:y(p[v],m);if(k){const N=k.length;for(let T=0;T<N;T++)c[k[T]]=_}else w?this.options.visualElement.renderState.vars[v]=_:c[v]=_}this.options.layoutId&&(c.pointerEvents=m===this?ic(d?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>c.currentAnimation?.stop()),this.root.nodes.forEach($g),this.root.sharedNodes.clear()}}}function bC(e){e.updateLayout()}function yC(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:a}=e.layout,{animationType:i}=e.options,l=t.source!==e.layout.source;i==="size"?us(p=>{const h=l?t.measuredBox[p]:t.layoutBox[p],g=Ln(h);h.min=n[p].min,h.max=h.min+g}):Vb(i,t.layoutBox,n)&&us(p=>{const h=l?t.measuredBox[p]:t.layoutBox[p],g=Ln(n[p]);h.max=h.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[p].max=e.relativeTarget[p].min+g)});const c=ci();yo(c,n,t.layoutBox);const d=ci();l?yo(d,e.applyTransform(a,!0),t.measuredBox):yo(d,n,t.layoutBox);const u=!Bb(c);let m=!1;if(!e.resumeFrom){const p=e.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:h,layout:g}=p;if(h&&g){const x=cn();yc(x,t.layoutBox,h.layoutBox);const v=cn();yc(v,n,g.layoutBox),Lb(x,v)||(m=!0),p.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=x,e.relativeParent=p)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:d,layoutDelta:c,hasLayoutChanged:u,hasRelativeLayoutChanged:m})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function vC(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function wC(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function SC(e){e.clearSnapshot()}function $g(e){e.clearMeasurements()}function Hg(e){e.isLayoutDirty=!1}function kC(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Ug(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function CC(e){e.resolveTargetDelta()}function jC(e){e.calcProjection()}function NC(e){e.resetSkewAndRotation()}function _C(e){e.removeLeadSnapshot()}function Wg(e,t,n){e.translate=Wt(t.translate,0,n),e.scale=Wt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Kg(e,t,n,a){e.min=Wt(t.min,n.min,a),e.max=Wt(t.max,n.max,a)}function EC(e,t,n,a){Kg(e.x,t.x,n.x,a),Kg(e.y,t.y,n.y,a)}function AC(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const TC={duration:.45,ease:[.4,0,.1,1]},Gg=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),qg=Gg("applewebkit/")&&!Gg("chrome/")?Math.round:ps;function Yg(e){e.min=qg(e.min),e.max=qg(e.max)}function DC(e){Yg(e.x),Yg(e.y)}function Vb(e,t,n){return e==="position"||e==="preserve-aspect"&&!Ok(zg(t),zg(n),.2)}function MC(e){return e!==e.root&&e.scroll?.wasRoot}const PC=zb({attachResizeListener:(e,t)=>Co(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ef={current:void 0},$b=zb({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!ef.current){const e=new PC({});e.mount(window),e.setOptions({layoutScroll:!0}),ef.current=e}return ef.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),IC={pan:{Feature:eC},drag:{Feature:Jk,ProjectionNode:$b,MeasureLayout:Ib}};function Zg(e,t,n){const{props:a}=e;e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,l=a[i];l&&zt.postRender(()=>l(t,Mo(t)))}class FC extends Lr{mount(){const{current:t}=this.node;t&&(this.unmount=rS(t,(n,a)=>(Zg(this.node,a,"Start"),i=>Zg(this.node,i,"End"))))}unmount(){}}class RC extends Lr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ao(Co(this.node.current,"focus",()=>this.onFocus()),Co(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Qg(e,t,n){const{props:a}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&a.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),l=a[i];l&&zt.postRender(()=>l(t,Mo(t)))}class BC extends Lr{mount(){const{current:t}=this.node;t&&(this.unmount=lS(t,(n,a)=>(Qg(this.node,a,"Start"),(i,{success:l})=>Qg(this.node,i,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const $f=new WeakMap,tf=new WeakMap,LC=e=>{const t=$f.get(e.target);t&&t(e)},OC=e=>{e.forEach(LC)};function zC({root:e,...t}){const n=e||document;tf.has(n)||tf.set(n,{});const a=tf.get(n),i=JSON.stringify(t);return a[i]||(a[i]=new IntersectionObserver(OC,{root:e,...t})),a[i]}function VC(e,t,n){const a=zC(t);return $f.set(e,n),a.observe(e),()=>{$f.delete(e),a.unobserve(e)}}const $C={some:0,all:1};class HC extends Lr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:a,amount:i="some",once:l}=t,c={root:n?n.current:void 0,rootMargin:a,threshold:typeof i=="number"?i:$C[i]},d=u=>{const{isIntersecting:m}=u;if(this.isInView===m||(this.isInView=m,l&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:p,onViewportLeave:h}=this.node.getProps(),g=m?p:h;g&&g(u)};return VC(this.node.current,c,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(UC(t,n))&&this.startObserver()}unmount(){}}function UC({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const WC={inView:{Feature:HC},tap:{Feature:BC},focus:{Feature:RC},hover:{Feature:FC}},KC={layout:{ProjectionNode:$b,MeasureLayout:Ib}},GC={...Pk,...WC,...IC,...KC},Se=YS(GC,lk),zh="/assets/5f8732ee23725e4e0895553baa1c8e03e361ca7a-DtxtzMCA.png";function qC(e,t){const n=C.createContext(t),a=l=>{const{children:c,...d}=l,u=C.useMemo(()=>d,Object.values(d));return s.jsx(n.Provider,{value:u,children:c})};a.displayName=e+"Provider";function i(l){const c=C.useContext(n);if(c)return c;if(t!==void 0)return t;throw new Error(`\`${l}\` must be used within \`${e}\``)}return[a,i]}function Ci(e,t=[]){let n=[];function a(l,c){const d=C.createContext(c),u=n.length;n=[...n,c];const m=h=>{const{scope:g,children:x,...v}=h,y=g?.[e]?.[u]||d,k=C.useMemo(()=>v,Object.values(v));return s.jsx(y.Provider,{value:k,children:x})};m.displayName=l+"Provider";function p(h,g){const x=g?.[e]?.[u]||d,v=C.useContext(x);if(v)return v;if(c!==void 0)return c;throw new Error(`\`${h}\` must be used within \`${l}\``)}return[m,p]}const i=()=>{const l=n.map(c=>C.createContext(c));return function(d){const u=d?.[e]||l;return C.useMemo(()=>({[`__scope${e}`]:{...d,[e]:u}}),[d,u])}};return i.scopeName=e,[a,YC(i,...t)]}function YC(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const a=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(l){const c=a.reduce((d,{useScope:u,scopeName:m})=>{const h=u(l)[`__scope${m}`];return{...d,...h}},{});return C.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return n.scopeName=t.scopeName,n}function Xg(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Po(...e){return t=>{let n=!1;const a=e.map(i=>{const l=Xg(i,t);return!n&&typeof l=="function"&&(n=!0),l});if(n)return()=>{for(let i=0;i<a.length;i++){const l=a[i];typeof l=="function"?l():Xg(e[i],null)}}}}function Bt(...e){return C.useCallback(Po(...e),e)}function _t(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e?.(i),n===!1||!i.defaultPrevented)return t?.(i)}}var An=globalThis?.document?C.useLayoutEffect:()=>{},ZC=c1[" useId ".trim().toString()]||(()=>{}),QC=0;function fi(e){const[t,n]=C.useState(ZC());return An(()=>{n(a=>a??String(QC++))},[e]),e||(t?`radix-${t}`:"")}var XC=c1[" useInsertionEffect ".trim().toString()]||An;function vc({prop:e,defaultProp:t,onChange:n=()=>{},caller:a}){const[i,l,c]=JC({defaultProp:t,onChange:n}),d=e!==void 0,u=d?e:i;{const p=C.useRef(e!==void 0);C.useEffect(()=>{const h=p.current;h!==d&&console.warn(`${a} is changing from ${h?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=d},[d,a])}const m=C.useCallback(p=>{if(d){const h=ej(p)?p(e):p;h!==e&&c.current?.(h)}else l(p)},[d,e,l,c]);return[u,m]}function JC({defaultProp:e,onChange:t}){const[n,a]=C.useState(e),i=C.useRef(n),l=C.useRef(t);return XC(()=>{l.current=t},[t]),C.useEffect(()=>{i.current!==n&&(l.current?.(n),i.current=n)},[n,i]),[n,a,l]}function ej(e){return typeof e=="function"}var Vs=l1();const Hb=Ic(Vs);function tj(e){const t=nj(e),n=C.forwardRef((a,i)=>{const{children:l,...c}=a,d=C.Children.toArray(l),u=d.find(rj);if(u){const m=u.props.children,p=d.map(h=>h===u?C.Children.count(m)>1?C.Children.only(null):C.isValidElement(m)?m.props.children:null:h);return s.jsx(t,{...c,ref:i,children:C.isValidElement(m)?C.cloneElement(m,void 0,p):null})}return s.jsx(t,{...c,ref:i,children:l})});return n.displayName=`${e}.Slot`,n}function nj(e){const t=C.forwardRef((n,a)=>{const{children:i,...l}=n;if(C.isValidElement(i)){const c=ij(i),d=aj(l,i.props);return i.type!==C.Fragment&&(d.ref=a?Po(a,c):c),C.cloneElement(i,d)}return C.Children.count(i)>1?C.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var sj=Symbol("radix.slottable");function rj(e){return C.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===sj}function aj(e,t){const n={...t};for(const a in t){const i=e[a],l=t[a];/^on[A-Z]/.test(a)?i&&l?n[a]=(...d)=>{const u=l(...d);return i(...d),u}:i&&(n[a]=i):a==="style"?n[a]={...i,...l}:a==="className"&&(n[a]=[i,l].filter(Boolean).join(" "))}return{...e,...n}}function ij(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var oj=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],jt=oj.reduce((e,t)=>{const n=tj(`Primitive.${t}`),a=C.forwardRef((i,l)=>{const{asChild:c,...d}=i,u=c?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(u,{...d,ref:l})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{});function lj(e,t){e&&Vs.flushSync(()=>e.dispatchEvent(t))}function ya(e){const t=C.useRef(e);return C.useEffect(()=>{t.current=e}),C.useMemo(()=>(...n)=>t.current?.(...n),[])}function cj(e,t=globalThis?.document){const n=ya(e);C.useEffect(()=>{const a=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",a,{capture:!0}),()=>t.removeEventListener("keydown",a,{capture:!0})},[n,t])}var dj="DismissableLayer",Hf="dismissableLayer.update",uj="dismissableLayer.pointerDownOutside",fj="dismissableLayer.focusOutside",Jg,Ub=C.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Vh=C.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:l,onInteractOutside:c,onDismiss:d,...u}=e,m=C.useContext(Ub),[p,h]=C.useState(null),g=p?.ownerDocument??globalThis?.document,[,x]=C.useState({}),v=Bt(t,$=>h($)),y=Array.from(m.layers),[k]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),w=y.indexOf(k),_=p?y.indexOf(p):-1,N=m.layersWithOutsidePointerEventsDisabled.size>0,T=_>=w,B=mj($=>{const P=$.target,A=[...m.branches].some(H=>H.contains(P));!T||A||(i?.($),c?.($),$.defaultPrevented||d?.())},g),O=gj($=>{const P=$.target;[...m.branches].some(H=>H.contains(P))||(l?.($),c?.($),$.defaultPrevented||d?.())},g);return cj($=>{_===m.layers.size-1&&(a?.($),!$.defaultPrevented&&d&&($.preventDefault(),d()))},g),C.useEffect(()=>{if(p)return n&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(Jg=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(p)),m.layers.add(p),ex(),()=>{n&&m.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=Jg)}},[p,g,n,m]),C.useEffect(()=>()=>{p&&(m.layers.delete(p),m.layersWithOutsidePointerEventsDisabled.delete(p),ex())},[p,m]),C.useEffect(()=>{const $=()=>x({});return document.addEventListener(Hf,$),()=>document.removeEventListener(Hf,$)},[]),s.jsx(jt.div,{...u,ref:v,style:{pointerEvents:N?T?"auto":"none":void 0,...e.style},onFocusCapture:_t(e.onFocusCapture,O.onFocusCapture),onBlurCapture:_t(e.onBlurCapture,O.onBlurCapture),onPointerDownCapture:_t(e.onPointerDownCapture,B.onPointerDownCapture)})});Vh.displayName=dj;var hj="DismissableLayerBranch",pj=C.forwardRef((e,t)=>{const n=C.useContext(Ub),a=C.useRef(null),i=Bt(t,a);return C.useEffect(()=>{const l=a.current;if(l)return n.branches.add(l),()=>{n.branches.delete(l)}},[n.branches]),s.jsx(jt.div,{...e,ref:i})});pj.displayName=hj;function mj(e,t=globalThis?.document){const n=ya(e),a=C.useRef(!1),i=C.useRef(()=>{});return C.useEffect(()=>{const l=d=>{if(d.target&&!a.current){let u=function(){Wb(uj,n,m,{discrete:!0})};const m={originalEvent:d};d.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=u,t.addEventListener("click",i.current,{once:!0})):u()}else t.removeEventListener("click",i.current);a.current=!1},c=window.setTimeout(()=>{t.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(c),t.removeEventListener("pointerdown",l),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>a.current=!0}}function gj(e,t=globalThis?.document){const n=ya(e),a=C.useRef(!1);return C.useEffect(()=>{const i=l=>{l.target&&!a.current&&Wb(fj,n,{originalEvent:l},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function ex(){const e=new CustomEvent(Hf);document.dispatchEvent(e)}function Wb(e,t,n,{discrete:a}){const i=n.originalEvent.target,l=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),a?lj(i,l):i.dispatchEvent(l)}var nf="focusScope.autoFocusOnMount",sf="focusScope.autoFocusOnUnmount",tx={bubbles:!1,cancelable:!0},xj="FocusScope",$h=C.forwardRef((e,t)=>{const{loop:n=!1,trapped:a=!1,onMountAutoFocus:i,onUnmountAutoFocus:l,...c}=e,[d,u]=C.useState(null),m=ya(i),p=ya(l),h=C.useRef(null),g=Bt(t,y=>u(y)),x=C.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;C.useEffect(()=>{if(a){let y=function(N){if(x.paused||!d)return;const T=N.target;d.contains(T)?h.current=T:Pr(h.current,{select:!0})},k=function(N){if(x.paused||!d)return;const T=N.relatedTarget;T!==null&&(d.contains(T)||Pr(h.current,{select:!0}))},w=function(N){if(document.activeElement===document.body)for(const B of N)B.removedNodes.length>0&&Pr(d)};document.addEventListener("focusin",y),document.addEventListener("focusout",k);const _=new MutationObserver(w);return d&&_.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",k),_.disconnect()}}},[a,d,x.paused]),C.useEffect(()=>{if(d){sx.add(x);const y=document.activeElement;if(!d.contains(y)){const w=new CustomEvent(nf,tx);d.addEventListener(nf,m),d.dispatchEvent(w),w.defaultPrevented||(bj(kj(Kb(d)),{select:!0}),document.activeElement===y&&Pr(d))}return()=>{d.removeEventListener(nf,m),setTimeout(()=>{const w=new CustomEvent(sf,tx);d.addEventListener(sf,p),d.dispatchEvent(w),w.defaultPrevented||Pr(y??document.body,{select:!0}),d.removeEventListener(sf,p),sx.remove(x)},0)}}},[d,m,p,x]);const v=C.useCallback(y=>{if(!n&&!a||x.paused)return;const k=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,w=document.activeElement;if(k&&w){const _=y.currentTarget,[N,T]=yj(_);N&&T?!y.shiftKey&&w===T?(y.preventDefault(),n&&Pr(N,{select:!0})):y.shiftKey&&w===N&&(y.preventDefault(),n&&Pr(T,{select:!0})):w===_&&y.preventDefault()}},[n,a,x.paused]);return s.jsx(jt.div,{tabIndex:-1,...c,ref:g,onKeyDown:v})});$h.displayName=xj;function bj(e,{select:t=!1}={}){const n=document.activeElement;for(const a of e)if(Pr(a,{select:t}),document.activeElement!==n)return}function yj(e){const t=Kb(e),n=nx(t,e),a=nx(t.reverse(),e);return[n,a]}function Kb(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const i=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||i?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function nx(e,t){for(const n of e)if(!vj(n,{upTo:t}))return n}function vj(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function wj(e){return e instanceof HTMLInputElement&&"select"in e}function Pr(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&wj(e)&&t&&e.select()}}var sx=Sj();function Sj(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=rx(e,t),e.unshift(t)},remove(t){e=rx(e,t),e[0]?.resume()}}}function rx(e,t){const n=[...e],a=n.indexOf(t);return a!==-1&&n.splice(a,1),n}function kj(e){return e.filter(t=>t.tagName!=="A")}var Cj="Portal",Hh=C.forwardRef((e,t)=>{const{container:n,...a}=e,[i,l]=C.useState(!1);An(()=>l(!0),[]);const c=n||i&&globalThis?.document?.body;return c?Hb.createPortal(s.jsx(jt.div,{...a,ref:t}),c):null});Hh.displayName=Cj;function jj(e,t){return C.useReducer((n,a)=>t[n][a]??n,e)}var Oc=e=>{const{present:t,children:n}=e,a=Nj(t),i=typeof n=="function"?n({present:a.isPresent}):C.Children.only(n),l=Bt(a.ref,_j(i));return typeof n=="function"||a.isPresent?C.cloneElement(i,{ref:l}):null};Oc.displayName="Presence";function Nj(e){const[t,n]=C.useState(),a=C.useRef(null),i=C.useRef(e),l=C.useRef("none"),c=e?"mounted":"unmounted",[d,u]=jj(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return C.useEffect(()=>{const m=Kl(a.current);l.current=d==="mounted"?m:"none"},[d]),An(()=>{const m=a.current,p=i.current;if(p!==e){const g=l.current,x=Kl(m);e?u("MOUNT"):x==="none"||m?.display==="none"?u("UNMOUNT"):u(p&&g!==x?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,u]),An(()=>{if(t){let m;const p=t.ownerDocument.defaultView??window,h=x=>{const y=Kl(a.current).includes(CSS.escape(x.animationName));if(x.target===t&&y&&(u("ANIMATION_END"),!i.current)){const k=t.style.animationFillMode;t.style.animationFillMode="forwards",m=p.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=k)})}},g=x=>{x.target===t&&(l.current=Kl(a.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{p.clearTimeout(m),t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:C.useCallback(m=>{a.current=m?getComputedStyle(m):null,n(m)},[])}}function Kl(e){return e?.animationName||"none"}function _j(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var rf=0;function Gb(){C.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??ax()),document.body.insertAdjacentElement("beforeend",e[1]??ax()),rf++,()=>{rf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),rf--}},[])}function ax(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var zs=function(){return zs=Object.assign||function(t){for(var n,a=1,i=arguments.length;a<i;a++){n=arguments[a];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l])}return t},zs.apply(this,arguments)};function qb(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]]);return n}function Ej(e,t,n){if(n||arguments.length===2)for(var a=0,i=t.length,l;a<i;a++)(l||!(a in t))&&(l||(l=Array.prototype.slice.call(t,0,a)),l[a]=t[a]);return e.concat(l||Array.prototype.slice.call(t))}var lc="right-scroll-bar-position",cc="width-before-scroll-bar",Aj="with-scroll-bars-hidden",Tj="--removed-body-scroll-bar-size";function af(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Dj(e,t){var n=C.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(a){var i=n.value;i!==a&&(n.value=a,n.callback(a,i))}}}})[0];return n.callback=t,n.facade}var Mj=typeof window<"u"?C.useLayoutEffect:C.useEffect,ix=new WeakMap;function Pj(e,t){var n=Dj(null,function(a){return e.forEach(function(i){return af(i,a)})});return Mj(function(){var a=ix.get(n);if(a){var i=new Set(a),l=new Set(e),c=n.current;i.forEach(function(d){l.has(d)||af(d,null)}),l.forEach(function(d){i.has(d)||af(d,c)})}ix.set(n,e)},[e]),n}function Ij(e){return e}function Fj(e,t){t===void 0&&(t=Ij);var n=[],a=!1,i={read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(l){var c=t(l,a);return n.push(c),function(){n=n.filter(function(d){return d!==c})}},assignSyncMedium:function(l){for(a=!0;n.length;){var c=n;n=[],c.forEach(l)}n={push:function(d){return l(d)},filter:function(){return n}}},assignMedium:function(l){a=!0;var c=[];if(n.length){var d=n;n=[],d.forEach(l),c=n}var u=function(){var p=c;c=[],p.forEach(l)},m=function(){return Promise.resolve().then(u)};m(),n={push:function(p){c.push(p),m()},filter:function(p){return c=c.filter(p),n}}}};return i}function Rj(e){e===void 0&&(e={});var t=Fj(null);return t.options=zs({async:!0,ssr:!1},e),t}var Yb=function(e){var t=e.sideCar,n=qb(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=t.read();if(!a)throw new Error("Sidecar medium not found");return C.createElement(a,zs({},n))};Yb.isSideCarExport=!0;function Bj(e,t){return e.useMedium(t),Yb}var Zb=Rj(),of=function(){},zc=C.forwardRef(function(e,t){var n=C.useRef(null),a=C.useState({onScrollCapture:of,onWheelCapture:of,onTouchMoveCapture:of}),i=a[0],l=a[1],c=e.forwardProps,d=e.children,u=e.className,m=e.removeScrollBar,p=e.enabled,h=e.shards,g=e.sideCar,x=e.noRelative,v=e.noIsolation,y=e.inert,k=e.allowPinchZoom,w=e.as,_=w===void 0?"div":w,N=e.gapMode,T=qb(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),B=g,O=Pj([n,t]),$=zs(zs({},T),i);return C.createElement(C.Fragment,null,p&&C.createElement(B,{sideCar:Zb,removeScrollBar:m,shards:h,noRelative:x,noIsolation:v,inert:y,setCallbacks:l,allowPinchZoom:!!k,lockRef:n,gapMode:N}),c?C.cloneElement(C.Children.only(d),zs(zs({},$),{ref:O})):C.createElement(_,zs({},$,{className:u,ref:O}),d))});zc.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};zc.classNames={fullWidth:cc,zeroRight:lc};var Lj=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Oj(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Lj();return t&&e.setAttribute("nonce",t),e}function zj(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Vj(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var $j=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Oj())&&(zj(t,n),Vj(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Hj=function(){var e=$j();return function(t,n){C.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Qb=function(){var e=Hj(),t=function(n){var a=n.styles,i=n.dynamic;return e(a,i),null};return t},Uj={left:0,top:0,right:0,gap:0},lf=function(e){return parseInt(e||"",10)||0},Wj=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],a=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[lf(n),lf(a),lf(i)]},Kj=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Uj;var t=Wj(e),n=document.documentElement.clientWidth,a=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,a-n+t[2]-t[0])}},Gj=Qb(),hi="data-scroll-locked",qj=function(e,t,n,a){var i=e.left,l=e.top,c=e.right,d=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Aj,` {
   overflow: hidden `).concat(a,`;
   padding-right: `).concat(d,"px ").concat(a,`;
  }
  body[`).concat(hi,`] {
    overflow: hidden `).concat(a,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(a,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(a,`;
    `),n==="padding"&&"padding-right: ".concat(d,"px ").concat(a,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(lc,` {
    right: `).concat(d,"px ").concat(a,`;
  }
  
  .`).concat(cc,` {
    margin-right: `).concat(d,"px ").concat(a,`;
  }
  
  .`).concat(lc," .").concat(lc,` {
    right: 0 `).concat(a,`;
  }
  
  .`).concat(cc," .").concat(cc,` {
    margin-right: 0 `).concat(a,`;
  }
  
  body[`).concat(hi,`] {
    `).concat(Tj,": ").concat(d,`px;
  }
`)},ox=function(){var e=parseInt(document.body.getAttribute(hi)||"0",10);return isFinite(e)?e:0},Yj=function(){C.useEffect(function(){return document.body.setAttribute(hi,(ox()+1).toString()),function(){var e=ox()-1;e<=0?document.body.removeAttribute(hi):document.body.setAttribute(hi,e.toString())}},[])},Zj=function(e){var t=e.noRelative,n=e.noImportant,a=e.gapMode,i=a===void 0?"margin":a;Yj();var l=C.useMemo(function(){return Kj(i)},[i]);return C.createElement(Gj,{styles:qj(l,!t,i,n?"":"!important")})},Uf=!1;if(typeof window<"u")try{var Gl=Object.defineProperty({},"passive",{get:function(){return Uf=!0,!0}});window.addEventListener("test",Gl,Gl),window.removeEventListener("test",Gl,Gl)}catch{Uf=!1}var Ja=Uf?{passive:!1}:!1,Qj=function(e){return e.tagName==="TEXTAREA"},Xb=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Qj(e)&&n[t]==="visible")},Xj=function(e){return Xb(e,"overflowY")},Jj=function(e){return Xb(e,"overflowX")},lx=function(e,t){var n=t.ownerDocument,a=t;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var i=Jb(e,a);if(i){var l=ey(e,a),c=l[1],d=l[2];if(c>d)return!0}a=a.parentNode}while(a&&a!==n.body);return!1},eN=function(e){var t=e.scrollTop,n=e.scrollHeight,a=e.clientHeight;return[t,n,a]},tN=function(e){var t=e.scrollLeft,n=e.scrollWidth,a=e.clientWidth;return[t,n,a]},Jb=function(e,t){return e==="v"?Xj(t):Jj(t)},ey=function(e,t){return e==="v"?eN(t):tN(t)},nN=function(e,t){return e==="h"&&t==="rtl"?-1:1},sN=function(e,t,n,a,i){var l=nN(e,window.getComputedStyle(t).direction),c=l*a,d=n.target,u=t.contains(d),m=!1,p=c>0,h=0,g=0;do{if(!d)break;var x=ey(e,d),v=x[0],y=x[1],k=x[2],w=y-k-l*v;(v||w)&&Jb(e,d)&&(h+=w,g+=v);var _=d.parentNode;d=_&&_.nodeType===Node.DOCUMENT_FRAGMENT_NODE?_.host:_}while(!u&&d!==document.body||u&&(t.contains(d)||t===d));return(p&&Math.abs(h)<1||!p&&Math.abs(g)<1)&&(m=!0),m},ql=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},cx=function(e){return[e.deltaX,e.deltaY]},dx=function(e){return e&&"current"in e?e.current:e},rN=function(e,t){return e[0]===t[0]&&e[1]===t[1]},aN=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},iN=0,ei=[];function oN(e){var t=C.useRef([]),n=C.useRef([0,0]),a=C.useRef(),i=C.useState(iN++)[0],l=C.useState(Qb)[0],c=C.useRef(e);C.useEffect(function(){c.current=e},[e]),C.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var y=Ej([e.lockRef.current],(e.shards||[]).map(dx),!0).filter(Boolean);return y.forEach(function(k){return k.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),y.forEach(function(k){return k.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var d=C.useCallback(function(y,k){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!c.current.allowPinchZoom;var w=ql(y),_=n.current,N="deltaX"in y?y.deltaX:_[0]-w[0],T="deltaY"in y?y.deltaY:_[1]-w[1],B,O=y.target,$=Math.abs(N)>Math.abs(T)?"h":"v";if("touches"in y&&$==="h"&&O.type==="range")return!1;var P=window.getSelection(),A=P&&P.anchorNode,H=A?A===O||A.contains(O):!1;if(H)return!1;var Y=lx($,O);if(!Y)return!0;if(Y?B=$:(B=$==="v"?"h":"v",Y=lx($,O)),!Y)return!1;if(!a.current&&"changedTouches"in y&&(N||T)&&(a.current=B),!B)return!0;var E=a.current||B;return sN(E,k,y,E==="h"?N:T)},[]),u=C.useCallback(function(y){var k=y;if(!(!ei.length||ei[ei.length-1]!==l)){var w="deltaY"in k?cx(k):ql(k),_=t.current.filter(function(B){return B.name===k.type&&(B.target===k.target||k.target===B.shadowParent)&&rN(B.delta,w)})[0];if(_&&_.should){k.cancelable&&k.preventDefault();return}if(!_){var N=(c.current.shards||[]).map(dx).filter(Boolean).filter(function(B){return B.contains(k.target)}),T=N.length>0?d(k,N[0]):!c.current.noIsolation;T&&k.cancelable&&k.preventDefault()}}},[]),m=C.useCallback(function(y,k,w,_){var N={name:y,delta:k,target:w,should:_,shadowParent:lN(w)};t.current.push(N),setTimeout(function(){t.current=t.current.filter(function(T){return T!==N})},1)},[]),p=C.useCallback(function(y){n.current=ql(y),a.current=void 0},[]),h=C.useCallback(function(y){m(y.type,cx(y),y.target,d(y,e.lockRef.current))},[]),g=C.useCallback(function(y){m(y.type,ql(y),y.target,d(y,e.lockRef.current))},[]);C.useEffect(function(){return ei.push(l),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:g}),document.addEventListener("wheel",u,Ja),document.addEventListener("touchmove",u,Ja),document.addEventListener("touchstart",p,Ja),function(){ei=ei.filter(function(y){return y!==l}),document.removeEventListener("wheel",u,Ja),document.removeEventListener("touchmove",u,Ja),document.removeEventListener("touchstart",p,Ja)}},[]);var x=e.removeScrollBar,v=e.inert;return C.createElement(C.Fragment,null,v?C.createElement(l,{styles:aN(i)}):null,x?C.createElement(Zj,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function lN(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const cN=Bj(Zb,oN);var Uh=C.forwardRef(function(e,t){return C.createElement(zc,zs({},e,{ref:t,sideCar:cN}))});Uh.classNames=zc.classNames;var dN=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},ti=new WeakMap,Yl=new WeakMap,Zl={},cf=0,ty=function(e){return e&&(e.host||ty(e.parentNode))},uN=function(e,t){return t.map(function(n){if(e.contains(n))return n;var a=ty(n);return a&&e.contains(a)?a:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},fN=function(e,t,n,a){var i=uN(t,Array.isArray(e)?e:[e]);Zl[n]||(Zl[n]=new WeakMap);var l=Zl[n],c=[],d=new Set,u=new Set(i),m=function(h){!h||d.has(h)||(d.add(h),m(h.parentNode))};i.forEach(m);var p=function(h){!h||u.has(h)||Array.prototype.forEach.call(h.children,function(g){if(d.has(g))p(g);else try{var x=g.getAttribute(a),v=x!==null&&x!=="false",y=(ti.get(g)||0)+1,k=(l.get(g)||0)+1;ti.set(g,y),l.set(g,k),c.push(g),y===1&&v&&Yl.set(g,!0),k===1&&g.setAttribute(n,"true"),v||g.setAttribute(a,"true")}catch(w){console.error("aria-hidden: cannot operate on ",g,w)}})};return p(t),d.clear(),cf++,function(){c.forEach(function(h){var g=ti.get(h)-1,x=l.get(h)-1;ti.set(h,g),l.set(h,x),g||(Yl.has(h)||h.removeAttribute(a),Yl.delete(h)),x||h.removeAttribute(n)}),cf--,cf||(ti=new WeakMap,ti=new WeakMap,Yl=new WeakMap,Zl={})}},ny=function(e,t,n){n===void 0&&(n="data-aria-hidden");var a=Array.from(Array.isArray(e)?e:[e]),i=dN(e);return i?(a.push.apply(a,Array.from(i.querySelectorAll("[aria-live], script"))),fN(a,i,n,"aria-hidden")):function(){return null}};function hN(e){const t=pN(e),n=C.forwardRef((a,i)=>{const{children:l,...c}=a,d=C.Children.toArray(l),u=d.find(gN);if(u){const m=u.props.children,p=d.map(h=>h===u?C.Children.count(m)>1?C.Children.only(null):C.isValidElement(m)?m.props.children:null:h);return s.jsx(t,{...c,ref:i,children:C.isValidElement(m)?C.cloneElement(m,void 0,p):null})}return s.jsx(t,{...c,ref:i,children:l})});return n.displayName=`${e}.Slot`,n}function pN(e){const t=C.forwardRef((n,a)=>{const{children:i,...l}=n;if(C.isValidElement(i)){const c=bN(i),d=xN(l,i.props);return i.type!==C.Fragment&&(d.ref=a?Po(a,c):c),C.cloneElement(i,d)}return C.Children.count(i)>1?C.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var mN=Symbol("radix.slottable");function gN(e){return C.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===mN}function xN(e,t){const n={...t};for(const a in t){const i=e[a],l=t[a];/^on[A-Z]/.test(a)?i&&l?n[a]=(...d)=>{const u=l(...d);return i(...d),u}:i&&(n[a]=i):a==="style"?n[a]={...i,...l}:a==="className"&&(n[a]=[i,l].filter(Boolean).join(" "))}return{...e,...n}}function bN(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Vc="Dialog",[sy,ry]=Ci(Vc),[yN,Ts]=sy(Vc),ay=e=>{const{__scopeDialog:t,children:n,open:a,defaultOpen:i,onOpenChange:l,modal:c=!0}=e,d=C.useRef(null),u=C.useRef(null),[m,p]=vc({prop:a,defaultProp:i??!1,onChange:l,caller:Vc});return s.jsx(yN,{scope:t,triggerRef:d,contentRef:u,contentId:fi(),titleId:fi(),descriptionId:fi(),open:m,onOpenChange:p,onOpenToggle:C.useCallback(()=>p(h=>!h),[p]),modal:c,children:n})};ay.displayName=Vc;var iy="DialogTrigger",oy=C.forwardRef((e,t)=>{const{__scopeDialog:n,...a}=e,i=Ts(iy,n),l=Bt(t,i.triggerRef);return s.jsx(jt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Gh(i.open),...a,ref:l,onClick:_t(e.onClick,i.onOpenToggle)})});oy.displayName=iy;var Wh="DialogPortal",[vN,ly]=sy(Wh,{forceMount:void 0}),cy=e=>{const{__scopeDialog:t,forceMount:n,children:a,container:i}=e,l=Ts(Wh,t);return s.jsx(vN,{scope:t,forceMount:n,children:C.Children.map(a,c=>s.jsx(Oc,{present:n||l.open,children:s.jsx(Hh,{asChild:!0,container:i,children:c})}))})};cy.displayName=Wh;var wc="DialogOverlay",dy=C.forwardRef((e,t)=>{const n=ly(wc,e.__scopeDialog),{forceMount:a=n.forceMount,...i}=e,l=Ts(wc,e.__scopeDialog);return l.modal?s.jsx(Oc,{present:a||l.open,children:s.jsx(SN,{...i,ref:t})}):null});dy.displayName=wc;var wN=hN("DialogOverlay.RemoveScroll"),SN=C.forwardRef((e,t)=>{const{__scopeDialog:n,...a}=e,i=Ts(wc,n);return s.jsx(Uh,{as:wN,allowPinchZoom:!0,shards:[i.contentRef],children:s.jsx(jt.div,{"data-state":Gh(i.open),...a,ref:t,style:{pointerEvents:"auto",...a.style}})})}),va="DialogContent",uy=C.forwardRef((e,t)=>{const n=ly(va,e.__scopeDialog),{forceMount:a=n.forceMount,...i}=e,l=Ts(va,e.__scopeDialog);return s.jsx(Oc,{present:a||l.open,children:l.modal?s.jsx(kN,{...i,ref:t}):s.jsx(CN,{...i,ref:t})})});uy.displayName=va;var kN=C.forwardRef((e,t)=>{const n=Ts(va,e.__scopeDialog),a=C.useRef(null),i=Bt(t,n.contentRef,a);return C.useEffect(()=>{const l=a.current;if(l)return ny(l)},[]),s.jsx(fy,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:_t(e.onCloseAutoFocus,l=>{l.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:_t(e.onPointerDownOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0;(c.button===2||d)&&l.preventDefault()}),onFocusOutside:_t(e.onFocusOutside,l=>l.preventDefault())})}),CN=C.forwardRef((e,t)=>{const n=Ts(va,e.__scopeDialog),a=C.useRef(!1),i=C.useRef(!1);return s.jsx(fy,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{e.onCloseAutoFocus?.(l),l.defaultPrevented||(a.current||n.triggerRef.current?.focus(),l.preventDefault()),a.current=!1,i.current=!1},onInteractOutside:l=>{e.onInteractOutside?.(l),l.defaultPrevented||(a.current=!0,l.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const c=l.target;n.triggerRef.current?.contains(c)&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&i.current&&l.preventDefault()}})}),fy=C.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:l,...c}=e,d=Ts(va,n),u=C.useRef(null),m=Bt(t,u);return Gb(),s.jsxs(s.Fragment,{children:[s.jsx($h,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:i,onUnmountAutoFocus:l,children:s.jsx(Vh,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":Gh(d.open),...c,ref:m,onDismiss:()=>d.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(NN,{titleId:d.titleId}),s.jsx(EN,{contentRef:u,descriptionId:d.descriptionId})]})]})}),Kh="DialogTitle",hy=C.forwardRef((e,t)=>{const{__scopeDialog:n,...a}=e,i=Ts(Kh,n);return s.jsx(jt.h2,{id:i.titleId,...a,ref:t})});hy.displayName=Kh;var py="DialogDescription",my=C.forwardRef((e,t)=>{const{__scopeDialog:n,...a}=e,i=Ts(py,n);return s.jsx(jt.p,{id:i.descriptionId,...a,ref:t})});my.displayName=py;var gy="DialogClose",xy=C.forwardRef((e,t)=>{const{__scopeDialog:n,...a}=e,i=Ts(gy,n);return s.jsx(jt.button,{type:"button",...a,ref:t,onClick:_t(e.onClick,()=>i.onOpenChange(!1))})});xy.displayName=gy;function Gh(e){return e?"open":"closed"}var by="DialogTitleWarning",[jN,yy]=qC(by,{contentName:va,titleName:Kh,docsSlug:"dialog"}),NN=({titleId:e})=>{const t=yy(by),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return C.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},_N="DialogDescriptionWarning",EN=({contentRef:e,descriptionId:t})=>{const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${yy(_N).contentName}}.`;return C.useEffect(()=>{const i=e.current?.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(a))},[a,e,t]),null},AN=ay,TN=oy,DN=cy,MN=dy,PN=uy,IN=hy,FN=my,vy=xy,RN=Symbol("radix.slottable");function BN(e){const t=({children:n})=>s.jsx(s.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=RN,t}var wy="AlertDialog",[LN]=Ci(wy,[ry]),fr=ry(),Sy=e=>{const{__scopeAlertDialog:t,...n}=e,a=fr(t);return s.jsx(AN,{...a,...n,modal:!0})};Sy.displayName=wy;var ON="AlertDialogTrigger",zN=C.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...a}=e,i=fr(n);return s.jsx(TN,{...i,...a,ref:t})});zN.displayName=ON;var VN="AlertDialogPortal",ky=e=>{const{__scopeAlertDialog:t,...n}=e,a=fr(t);return s.jsx(DN,{...a,...n})};ky.displayName=VN;var $N="AlertDialogOverlay",Cy=C.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...a}=e,i=fr(n);return s.jsx(MN,{...i,...a,ref:t})});Cy.displayName=$N;var pi="AlertDialogContent",[HN,UN]=LN(pi),WN=BN("AlertDialogContent"),jy=C.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:a,...i}=e,l=fr(n),c=C.useRef(null),d=Bt(t,c),u=C.useRef(null);return s.jsx(jN,{contentName:pi,titleName:Ny,docsSlug:"alert-dialog",children:s.jsx(HN,{scope:n,cancelRef:u,children:s.jsxs(PN,{role:"alertdialog",...l,...i,ref:d,onOpenAutoFocus:_t(i.onOpenAutoFocus,m=>{m.preventDefault(),u.current?.focus({preventScroll:!0})}),onPointerDownOutside:m=>m.preventDefault(),onInteractOutside:m=>m.preventDefault(),children:[s.jsx(WN,{children:a}),s.jsx(qN,{contentRef:c})]})})})});jy.displayName=pi;var Ny="AlertDialogTitle",_y=C.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...a}=e,i=fr(n);return s.jsx(IN,{...i,...a,ref:t})});_y.displayName=Ny;var Ey="AlertDialogDescription",Ay=C.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...a}=e,i=fr(n);return s.jsx(FN,{...i,...a,ref:t})});Ay.displayName=Ey;var KN="AlertDialogAction",Ty=C.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...a}=e,i=fr(n);return s.jsx(vy,{...i,...a,ref:t})});Ty.displayName=KN;var Dy="AlertDialogCancel",GN=C.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...a}=e,{cancelRef:i}=UN(Dy,n),l=fr(n),c=Bt(t,i);return s.jsx(vy,{...l,...a,ref:c})});GN.displayName=Dy;var qN=({contentRef:e})=>{const t=`\`${pi}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${pi}\` by passing a \`${Ey}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${pi}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return C.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},YN=Sy,ZN=ky,QN=Cy,XN=jy,JN=Ty,e4=_y,t4=Ay;function My(e){var t,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=My(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function Py(){for(var e,t,n=0,a="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=My(e))&&(a&&(a+=" "),a+=t);return a}const n4=(e,t)=>{const n=new Array(e.length+t.length);for(let a=0;a<e.length;a++)n[a]=e[a];for(let a=0;a<t.length;a++)n[e.length+a]=t[a];return n},s4=(e,t)=>({classGroupId:e,validator:t}),Iy=(e=new Map,t=null,n)=>({nextPart:e,validators:t,classGroupId:n}),Sc="-",ux=[],r4="arbitrary..",a4=e=>{const t=o4(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:c=>{if(c.startsWith("[")&&c.endsWith("]"))return i4(c);const d=c.split(Sc),u=d[0]===""&&d.length>1?1:0;return Fy(d,u,t)},getConflictingClassGroupIds:(c,d)=>{if(d){const u=a[c],m=n[c];return u?m?n4(m,u):u:m||ux}return n[c]||ux}}},Fy=(e,t,n)=>{if(e.length-t===0)return n.classGroupId;const i=e[t],l=n.nextPart.get(i);if(l){const m=Fy(e,t+1,l);if(m)return m}const c=n.validators;if(c===null)return;const d=t===0?e.join(Sc):e.slice(t).join(Sc),u=c.length;for(let m=0;m<u;m++){const p=c[m];if(p.validator(d))return p.classGroupId}},i4=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),a=t.slice(0,n);return a?r4+a:void 0})(),o4=e=>{const{theme:t,classGroups:n}=e;return l4(n,t)},l4=(e,t)=>{const n=Iy();for(const a in e){const i=e[a];qh(i,n,a,t)}return n},qh=(e,t,n,a)=>{const i=e.length;for(let l=0;l<i;l++){const c=e[l];c4(c,t,n,a)}},c4=(e,t,n,a)=>{if(typeof e=="string"){d4(e,t,n);return}if(typeof e=="function"){u4(e,t,n,a);return}f4(e,t,n,a)},d4=(e,t,n)=>{const a=e===""?t:Ry(t,e);a.classGroupId=n},u4=(e,t,n,a)=>{if(h4(e)){qh(e(a),t,n,a);return}t.validators===null&&(t.validators=[]),t.validators.push(s4(n,e))},f4=(e,t,n,a)=>{const i=Object.entries(e),l=i.length;for(let c=0;c<l;c++){const[d,u]=i[c];qh(u,Ry(t,d),n,a)}},Ry=(e,t)=>{let n=e;const a=t.split(Sc),i=a.length;for(let l=0;l<i;l++){const c=a[l];let d=n.nextPart.get(c);d||(d=Iy(),n.nextPart.set(c,d)),n=d}return n},h4=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,p4=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),a=Object.create(null);const i=(l,c)=>{n[l]=c,t++,t>e&&(t=0,a=n,n=Object.create(null))};return{get(l){let c=n[l];if(c!==void 0)return c;if((c=a[l])!==void 0)return i(l,c),c},set(l,c){l in n?n[l]=c:i(l,c)}}},Wf="!",fx=":",m4=[],hx=(e,t,n,a,i)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:a,isExternal:i}),g4=e=>{const{prefix:t,experimentalParseClassName:n}=e;let a=i=>{const l=[];let c=0,d=0,u=0,m;const p=i.length;for(let y=0;y<p;y++){const k=i[y];if(c===0&&d===0){if(k===fx){l.push(i.slice(u,y)),u=y+1;continue}if(k==="/"){m=y;continue}}k==="["?c++:k==="]"?c--:k==="("?d++:k===")"&&d--}const h=l.length===0?i:i.slice(u);let g=h,x=!1;h.endsWith(Wf)?(g=h.slice(0,-1),x=!0):h.startsWith(Wf)&&(g=h.slice(1),x=!0);const v=m&&m>u?m-u:void 0;return hx(l,x,g,v)};if(t){const i=t+fx,l=a;a=c=>c.startsWith(i)?l(c.slice(i.length)):hx(m4,!1,c,void 0,!0)}if(n){const i=a;a=l=>n({className:l,parseClassName:i})}return a},x4=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((n,a)=>{t.set(n,1e6+a)}),n=>{const a=[];let i=[];for(let l=0;l<n.length;l++){const c=n[l],d=c[0]==="[",u=t.has(c);d||u?(i.length>0&&(i.sort(),a.push(...i),i=[]),a.push(c)):i.push(c)}return i.length>0&&(i.sort(),a.push(...i)),a}},b4=e=>({cache:p4(e.cacheSize),parseClassName:g4(e),sortModifiers:x4(e),...a4(e)}),y4=/\s+/,v4=(e,t)=>{const{parseClassName:n,getClassGroupId:a,getConflictingClassGroupIds:i,sortModifiers:l}=t,c=[],d=e.trim().split(y4);let u="";for(let m=d.length-1;m>=0;m-=1){const p=d[m],{isExternal:h,modifiers:g,hasImportantModifier:x,baseClassName:v,maybePostfixModifierPosition:y}=n(p);if(h){u=p+(u.length>0?" "+u:u);continue}let k=!!y,w=a(k?v.substring(0,y):v);if(!w){if(!k){u=p+(u.length>0?" "+u:u);continue}if(w=a(v),!w){u=p+(u.length>0?" "+u:u);continue}k=!1}const _=g.length===0?"":g.length===1?g[0]:l(g).join(":"),N=x?_+Wf:_,T=N+w;if(c.indexOf(T)>-1)continue;c.push(T);const B=i(w,k);for(let O=0;O<B.length;++O){const $=B[O];c.push(N+$)}u=p+(u.length>0?" "+u:u)}return u},w4=(...e)=>{let t=0,n,a,i="";for(;t<e.length;)(n=e[t++])&&(a=By(n))&&(i&&(i+=" "),i+=a);return i},By=e=>{if(typeof e=="string")return e;let t,n="";for(let a=0;a<e.length;a++)e[a]&&(t=By(e[a]))&&(n&&(n+=" "),n+=t);return n},S4=(e,...t)=>{let n,a,i,l;const c=u=>{const m=t.reduce((p,h)=>h(p),e());return n=b4(m),a=n.cache.get,i=n.cache.set,l=d,d(u)},d=u=>{const m=a(u);if(m)return m;const p=v4(u,n);return i(u,p),p};return l=c,(...u)=>l(w4(...u))},k4=[],ln=e=>{const t=n=>n[e]||k4;return t.isThemeGetter=!0,t},Ly=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Oy=/^\((?:(\w[\w-]*):)?(.+)\)$/i,C4=/^\d+\/\d+$/,j4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,N4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,_4=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,E4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,A4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ni=e=>C4.test(e),dt=e=>!!e&&!Number.isNaN(Number(e)),Tr=e=>!!e&&Number.isInteger(Number(e)),df=e=>e.endsWith("%")&&dt(e.slice(0,-1)),ir=e=>j4.test(e),T4=()=>!0,D4=e=>N4.test(e)&&!_4.test(e),zy=()=>!1,M4=e=>E4.test(e),P4=e=>A4.test(e),I4=e=>!$e(e)&&!He(e),F4=e=>ji(e,Hy,zy),$e=e=>Ly.test(e),la=e=>ji(e,Uy,D4),uf=e=>ji(e,z4,dt),px=e=>ji(e,Vy,zy),R4=e=>ji(e,$y,P4),Ql=e=>ji(e,Wy,M4),He=e=>Oy.test(e),ho=e=>Ni(e,Uy),B4=e=>Ni(e,V4),mx=e=>Ni(e,Vy),L4=e=>Ni(e,Hy),O4=e=>Ni(e,$y),Xl=e=>Ni(e,Wy,!0),ji=(e,t,n)=>{const a=Ly.exec(e);return a?a[1]?t(a[1]):n(a[2]):!1},Ni=(e,t,n=!1)=>{const a=Oy.exec(e);return a?a[1]?t(a[1]):n:!1},Vy=e=>e==="position"||e==="percentage",$y=e=>e==="image"||e==="url",Hy=e=>e==="length"||e==="size"||e==="bg-size",Uy=e=>e==="length",z4=e=>e==="number",V4=e=>e==="family-name",Wy=e=>e==="shadow",$4=()=>{const e=ln("color"),t=ln("font"),n=ln("text"),a=ln("font-weight"),i=ln("tracking"),l=ln("leading"),c=ln("breakpoint"),d=ln("container"),u=ln("spacing"),m=ln("radius"),p=ln("shadow"),h=ln("inset-shadow"),g=ln("text-shadow"),x=ln("drop-shadow"),v=ln("blur"),y=ln("perspective"),k=ln("aspect"),w=ln("ease"),_=ln("animate"),N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],T=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],B=()=>[...T(),He,$e],O=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto","contain","none"],P=()=>[He,$e,u],A=()=>[ni,"full","auto",...P()],H=()=>[Tr,"none","subgrid",He,$e],Y=()=>["auto",{span:["full",Tr,He,$e]},Tr,He,$e],E=()=>[Tr,"auto",He,$e],D=()=>["auto","min","max","fr",He,$e],S=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],z=()=>["start","end","center","stretch","center-safe","end-safe"],L=()=>["auto",...P()],F=()=>[ni,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...P()],K=()=>[e,He,$e],G=()=>[...T(),mx,px,{position:[He,$e]}],Z=()=>["no-repeat",{repeat:["","x","y","space","round"]}],R=()=>["auto","cover","contain",L4,F4,{size:[He,$e]}],V=()=>[df,ho,la],ee=()=>["","none","full",m,He,$e],W=()=>["",dt,ho,la],U=()=>["solid","dashed","dotted","double"],Q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],oe=()=>[dt,df,mx,px],ne=()=>["","none",v,He,$e],ae=()=>["none",dt,He,$e],ve=()=>["none",dt,He,$e],se=()=>[dt,He,$e],xe=()=>[ni,"full",...P()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ir],breakpoint:[ir],color:[T4],container:[ir],"drop-shadow":[ir],ease:["in","out","in-out"],font:[I4],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ir],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ir],shadow:[ir],spacing:["px",dt],text:[ir],"text-shadow":[ir],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ni,$e,He,k]}],container:["container"],columns:[{columns:[dt,$e,He,d]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:B()}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:$()}],"overscroll-x":[{"overscroll-x":$()}],"overscroll-y":[{"overscroll-y":$()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:A()}],"inset-x":[{"inset-x":A()}],"inset-y":[{"inset-y":A()}],start:[{start:A()}],end:[{end:A()}],top:[{top:A()}],right:[{right:A()}],bottom:[{bottom:A()}],left:[{left:A()}],visibility:["visible","invisible","collapse"],z:[{z:[Tr,"auto",He,$e]}],basis:[{basis:[ni,"full","auto",d,...P()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[dt,ni,"auto","initial","none",$e]}],grow:[{grow:["",dt,He,$e]}],shrink:[{shrink:["",dt,He,$e]}],order:[{order:[Tr,"first","last","none",He,$e]}],"grid-cols":[{"grid-cols":H()}],"col-start-end":[{col:Y()}],"col-start":[{"col-start":E()}],"col-end":[{"col-end":E()}],"grid-rows":[{"grid-rows":H()}],"row-start-end":[{row:Y()}],"row-start":[{"row-start":E()}],"row-end":[{"row-end":E()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":D()}],"auto-rows":[{"auto-rows":D()}],gap:[{gap:P()}],"gap-x":[{"gap-x":P()}],"gap-y":[{"gap-y":P()}],"justify-content":[{justify:[...S(),"normal"]}],"justify-items":[{"justify-items":[...z(),"normal"]}],"justify-self":[{"justify-self":["auto",...z()]}],"align-content":[{content:["normal",...S()]}],"align-items":[{items:[...z(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...z(),{baseline:["","last"]}]}],"place-content":[{"place-content":S()}],"place-items":[{"place-items":[...z(),"baseline"]}],"place-self":[{"place-self":["auto",...z()]}],p:[{p:P()}],px:[{px:P()}],py:[{py:P()}],ps:[{ps:P()}],pe:[{pe:P()}],pt:[{pt:P()}],pr:[{pr:P()}],pb:[{pb:P()}],pl:[{pl:P()}],m:[{m:L()}],mx:[{mx:L()}],my:[{my:L()}],ms:[{ms:L()}],me:[{me:L()}],mt:[{mt:L()}],mr:[{mr:L()}],mb:[{mb:L()}],ml:[{ml:L()}],"space-x":[{"space-x":P()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":P()}],"space-y-reverse":["space-y-reverse"],size:[{size:F()}],w:[{w:[d,"screen",...F()]}],"min-w":[{"min-w":[d,"screen","none",...F()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[c]},...F()]}],h:[{h:["screen","lh",...F()]}],"min-h":[{"min-h":["screen","lh","none",...F()]}],"max-h":[{"max-h":["screen","lh",...F()]}],"font-size":[{text:["base",n,ho,la]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,He,uf]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",df,$e]}],"font-family":[{font:[B4,$e,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,He,$e]}],"line-clamp":[{"line-clamp":[dt,"none",He,uf]}],leading:[{leading:[l,...P()]}],"list-image":[{"list-image":["none",He,$e]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",He,$e]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:K()}],"text-color":[{text:K()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...U(),"wavy"]}],"text-decoration-thickness":[{decoration:[dt,"from-font","auto",He,la]}],"text-decoration-color":[{decoration:K()}],"underline-offset":[{"underline-offset":[dt,"auto",He,$e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",He,$e]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",He,$e]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:G()}],"bg-repeat":[{bg:Z()}],"bg-size":[{bg:R()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Tr,He,$e],radial:["",He,$e],conic:[Tr,He,$e]},O4,R4]}],"bg-color":[{bg:K()}],"gradient-from-pos":[{from:V()}],"gradient-via-pos":[{via:V()}],"gradient-to-pos":[{to:V()}],"gradient-from":[{from:K()}],"gradient-via":[{via:K()}],"gradient-to":[{to:K()}],rounded:[{rounded:ee()}],"rounded-s":[{"rounded-s":ee()}],"rounded-e":[{"rounded-e":ee()}],"rounded-t":[{"rounded-t":ee()}],"rounded-r":[{"rounded-r":ee()}],"rounded-b":[{"rounded-b":ee()}],"rounded-l":[{"rounded-l":ee()}],"rounded-ss":[{"rounded-ss":ee()}],"rounded-se":[{"rounded-se":ee()}],"rounded-ee":[{"rounded-ee":ee()}],"rounded-es":[{"rounded-es":ee()}],"rounded-tl":[{"rounded-tl":ee()}],"rounded-tr":[{"rounded-tr":ee()}],"rounded-br":[{"rounded-br":ee()}],"rounded-bl":[{"rounded-bl":ee()}],"border-w":[{border:W()}],"border-w-x":[{"border-x":W()}],"border-w-y":[{"border-y":W()}],"border-w-s":[{"border-s":W()}],"border-w-e":[{"border-e":W()}],"border-w-t":[{"border-t":W()}],"border-w-r":[{"border-r":W()}],"border-w-b":[{"border-b":W()}],"border-w-l":[{"border-l":W()}],"divide-x":[{"divide-x":W()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":W()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...U(),"hidden","none"]}],"divide-style":[{divide:[...U(),"hidden","none"]}],"border-color":[{border:K()}],"border-color-x":[{"border-x":K()}],"border-color-y":[{"border-y":K()}],"border-color-s":[{"border-s":K()}],"border-color-e":[{"border-e":K()}],"border-color-t":[{"border-t":K()}],"border-color-r":[{"border-r":K()}],"border-color-b":[{"border-b":K()}],"border-color-l":[{"border-l":K()}],"divide-color":[{divide:K()}],"outline-style":[{outline:[...U(),"none","hidden"]}],"outline-offset":[{"outline-offset":[dt,He,$e]}],"outline-w":[{outline:["",dt,ho,la]}],"outline-color":[{outline:K()}],shadow:[{shadow:["","none",p,Xl,Ql]}],"shadow-color":[{shadow:K()}],"inset-shadow":[{"inset-shadow":["none",h,Xl,Ql]}],"inset-shadow-color":[{"inset-shadow":K()}],"ring-w":[{ring:W()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:K()}],"ring-offset-w":[{"ring-offset":[dt,la]}],"ring-offset-color":[{"ring-offset":K()}],"inset-ring-w":[{"inset-ring":W()}],"inset-ring-color":[{"inset-ring":K()}],"text-shadow":[{"text-shadow":["none",g,Xl,Ql]}],"text-shadow-color":[{"text-shadow":K()}],opacity:[{opacity:[dt,He,$e]}],"mix-blend":[{"mix-blend":[...Q(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Q()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[dt]}],"mask-image-linear-from-pos":[{"mask-linear-from":oe()}],"mask-image-linear-to-pos":[{"mask-linear-to":oe()}],"mask-image-linear-from-color":[{"mask-linear-from":K()}],"mask-image-linear-to-color":[{"mask-linear-to":K()}],"mask-image-t-from-pos":[{"mask-t-from":oe()}],"mask-image-t-to-pos":[{"mask-t-to":oe()}],"mask-image-t-from-color":[{"mask-t-from":K()}],"mask-image-t-to-color":[{"mask-t-to":K()}],"mask-image-r-from-pos":[{"mask-r-from":oe()}],"mask-image-r-to-pos":[{"mask-r-to":oe()}],"mask-image-r-from-color":[{"mask-r-from":K()}],"mask-image-r-to-color":[{"mask-r-to":K()}],"mask-image-b-from-pos":[{"mask-b-from":oe()}],"mask-image-b-to-pos":[{"mask-b-to":oe()}],"mask-image-b-from-color":[{"mask-b-from":K()}],"mask-image-b-to-color":[{"mask-b-to":K()}],"mask-image-l-from-pos":[{"mask-l-from":oe()}],"mask-image-l-to-pos":[{"mask-l-to":oe()}],"mask-image-l-from-color":[{"mask-l-from":K()}],"mask-image-l-to-color":[{"mask-l-to":K()}],"mask-image-x-from-pos":[{"mask-x-from":oe()}],"mask-image-x-to-pos":[{"mask-x-to":oe()}],"mask-image-x-from-color":[{"mask-x-from":K()}],"mask-image-x-to-color":[{"mask-x-to":K()}],"mask-image-y-from-pos":[{"mask-y-from":oe()}],"mask-image-y-to-pos":[{"mask-y-to":oe()}],"mask-image-y-from-color":[{"mask-y-from":K()}],"mask-image-y-to-color":[{"mask-y-to":K()}],"mask-image-radial":[{"mask-radial":[He,$e]}],"mask-image-radial-from-pos":[{"mask-radial-from":oe()}],"mask-image-radial-to-pos":[{"mask-radial-to":oe()}],"mask-image-radial-from-color":[{"mask-radial-from":K()}],"mask-image-radial-to-color":[{"mask-radial-to":K()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":T()}],"mask-image-conic-pos":[{"mask-conic":[dt]}],"mask-image-conic-from-pos":[{"mask-conic-from":oe()}],"mask-image-conic-to-pos":[{"mask-conic-to":oe()}],"mask-image-conic-from-color":[{"mask-conic-from":K()}],"mask-image-conic-to-color":[{"mask-conic-to":K()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:G()}],"mask-repeat":[{mask:Z()}],"mask-size":[{mask:R()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",He,$e]}],filter:[{filter:["","none",He,$e]}],blur:[{blur:ne()}],brightness:[{brightness:[dt,He,$e]}],contrast:[{contrast:[dt,He,$e]}],"drop-shadow":[{"drop-shadow":["","none",x,Xl,Ql]}],"drop-shadow-color":[{"drop-shadow":K()}],grayscale:[{grayscale:["",dt,He,$e]}],"hue-rotate":[{"hue-rotate":[dt,He,$e]}],invert:[{invert:["",dt,He,$e]}],saturate:[{saturate:[dt,He,$e]}],sepia:[{sepia:["",dt,He,$e]}],"backdrop-filter":[{"backdrop-filter":["","none",He,$e]}],"backdrop-blur":[{"backdrop-blur":ne()}],"backdrop-brightness":[{"backdrop-brightness":[dt,He,$e]}],"backdrop-contrast":[{"backdrop-contrast":[dt,He,$e]}],"backdrop-grayscale":[{"backdrop-grayscale":["",dt,He,$e]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[dt,He,$e]}],"backdrop-invert":[{"backdrop-invert":["",dt,He,$e]}],"backdrop-opacity":[{"backdrop-opacity":[dt,He,$e]}],"backdrop-saturate":[{"backdrop-saturate":[dt,He,$e]}],"backdrop-sepia":[{"backdrop-sepia":["",dt,He,$e]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":P()}],"border-spacing-x":[{"border-spacing-x":P()}],"border-spacing-y":[{"border-spacing-y":P()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",He,$e]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[dt,"initial",He,$e]}],ease:[{ease:["linear","initial",w,He,$e]}],delay:[{delay:[dt,He,$e]}],animate:[{animate:["none",_,He,$e]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,He,$e]}],"perspective-origin":[{"perspective-origin":B()}],rotate:[{rotate:ae()}],"rotate-x":[{"rotate-x":ae()}],"rotate-y":[{"rotate-y":ae()}],"rotate-z":[{"rotate-z":ae()}],scale:[{scale:ve()}],"scale-x":[{"scale-x":ve()}],"scale-y":[{"scale-y":ve()}],"scale-z":[{"scale-z":ve()}],"scale-3d":["scale-3d"],skew:[{skew:se()}],"skew-x":[{"skew-x":se()}],"skew-y":[{"skew-y":se()}],transform:[{transform:[He,$e,"","none","gpu","cpu"]}],"transform-origin":[{origin:B()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:xe()}],"translate-x":[{"translate-x":xe()}],"translate-y":[{"translate-y":xe()}],"translate-z":[{"translate-z":xe()}],"translate-none":["translate-none"],accent:[{accent:K()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:K()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",He,$e]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",He,$e]}],fill:[{fill:["none",...K()]}],"stroke-w":[{stroke:[dt,ho,la,uf]}],stroke:[{stroke:["none",...K()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},H4=S4($4);function rs(...e){return H4(Py(e))}const gx=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,xx=Py,U4=(e,t)=>n=>{var a;if(t?.variants==null)return xx(e,n?.class,n?.className);const{variants:i,defaultVariants:l}=t,c=Object.keys(i).map(m=>{const p=n?.[m],h=l?.[m];if(p===null)return null;const g=gx(p)||gx(h);return i[m][g]}),d=n&&Object.entries(n).reduce((m,p)=>{let[h,g]=p;return g===void 0||(m[h]=g),m},{}),u=t==null||(a=t.compoundVariants)===null||a===void 0?void 0:a.reduce((m,p)=>{let{class:h,className:g,...x}=p;return Object.entries(x).every(v=>{let[y,k]=v;return Array.isArray(k)?k.includes({...l,...d}[y]):{...l,...d}[y]===k})?[...m,h,g]:m},[]);return xx(e,c,u,n?.class,n?.className)},W4=U4("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function K4({...e}){return s.jsx(YN,{"data-slot":"alert-dialog",...e})}function G4({...e}){return s.jsx(ZN,{"data-slot":"alert-dialog-portal",...e})}const Ky=C.forwardRef(({className:e,...t},n)=>s.jsx(QN,{ref:n,"data-slot":"alert-dialog-overlay",className:rs("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t}));Ky.displayName="AlertDialogOverlay";function q4({className:e,...t}){return s.jsxs(G4,{children:[s.jsx(Ky,{}),s.jsx(XN,{"data-slot":"alert-dialog-content",className:rs("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...t})]})}function Y4({className:e,...t}){return s.jsx(e4,{"data-slot":"alert-dialog-title",className:rs("text-lg font-semibold",e),...t})}function Z4({className:e,...t}){return s.jsx(t4,{"data-slot":"alert-dialog-description",className:rs("text-muted-foreground text-sm",e),...t})}function Q4({className:e,...t}){return s.jsx(JN,{className:rs(W4(),e),...t})}const kc="ToukenRanbuDB",X4=9,te={USER_DATA:"userData",CHARACTERS:"characters",CHATS:"chats",CHAT_MESSAGES:"chatMessages",CHAT_SETTINGS:"chatSettings",WORLD_BOOKS:"worldBooks",API_SETTINGS:"apiSettings",APPEARANCE:"appearance",MISC:"misc",STICKERS:"stickers",BUBBLE_PRESETS:"bubblePresets",AI_TASKS:"aiTasks",HEALTH:"health",SCHEDULE:"schedule"};let J4=class{db=null;async init(){return new Promise((t,n)=>{const a=indexedDB.open(kc,X4);a.onerror=()=>{console.error("Failed to open IndexedDB:",a.error),n(new Error("Failed to open database"))},a.onsuccess=()=>{this.db=a.result;const i=Object.values(te),l=i.filter(c=>!this.db.objectStoreNames.contains(c));if(l.length>0){console.error("Missing object stores:",l),console.log("Available stores:",Array.from(this.db.objectStoreNames)),console.log("Required stores:",i),this.db.close();const c=indexedDB.deleteDatabase(kc);c.onsuccess=()=>{console.log("Database deleted, reinitializing..."),this.init().then(t).catch(n)},c.onerror=()=>{n(new Error("Failed to recreate database"))};return}console.log("IndexedDB initialized successfully with stores:",Array.from(this.db.objectStoreNames)),t()},a.onupgradeneeded=i=>{const l=i.target.result;console.log("Database upgrade needed from version",i.oldVersion,"to",i.newVersion),l.objectStoreNames.contains(te.USER_DATA)||(l.createObjectStore(te.USER_DATA),console.log("Created store:",te.USER_DATA)),l.objectStoreNames.contains(te.CHARACTERS)||(l.createObjectStore(te.CHARACTERS),console.log("Created store:",te.CHARACTERS)),l.objectStoreNames.contains(te.CHATS)||(l.createObjectStore(te.CHATS),console.log("Created store:",te.CHATS)),l.objectStoreNames.contains(te.CHAT_MESSAGES)||(l.createObjectStore(te.CHAT_MESSAGES),console.log("Created store:",te.CHAT_MESSAGES)),l.objectStoreNames.contains(te.CHAT_SETTINGS)||(l.createObjectStore(te.CHAT_SETTINGS),console.log("Created store:",te.CHAT_SETTINGS)),l.objectStoreNames.contains(te.WORLD_BOOKS)||(l.createObjectStore(te.WORLD_BOOKS),console.log("Created store:",te.WORLD_BOOKS)),l.objectStoreNames.contains(te.API_SETTINGS)||(l.createObjectStore(te.API_SETTINGS),console.log("Created store:",te.API_SETTINGS)),l.objectStoreNames.contains(te.APPEARANCE)||(l.createObjectStore(te.APPEARANCE),console.log("Created store:",te.APPEARANCE)),l.objectStoreNames.contains(te.MISC)||(l.createObjectStore(te.MISC),console.log("Created store:",te.MISC)),l.objectStoreNames.contains(te.STICKERS)||(l.createObjectStore(te.STICKERS),console.log("Created store:",te.STICKERS)),l.objectStoreNames.contains(te.BUBBLE_PRESETS)||(l.createObjectStore(te.BUBBLE_PRESETS),console.log("Created store:",te.BUBBLE_PRESETS)),l.objectStoreNames.contains(te.AI_TASKS)||(l.createObjectStore(te.AI_TASKS),console.log("Created store:",te.AI_TASKS)),l.objectStoreNames.contains(te.HEALTH)||(l.createObjectStore(te.HEALTH),console.log("Created store:",te.HEALTH)),l.objectStoreNames.contains(te.SCHEDULE)||(l.createObjectStore(te.SCHEDULE),console.log("Created store:",te.SCHEDULE))}})}validateStore(t){if(!this.db)throw new Error("Database not initialized");if(!this.db.objectStoreNames.contains(t))throw new Error(`Store "${t}" does not exist. Available stores: ${Array.from(this.db.objectStoreNames).join(", ")}`)}async get(t,n){return this.db||await this.init(),this.validateStore(t),new Promise((a,i)=>{try{const d=this.db.transaction(t,"readonly").objectStore(t).get(n);d.onsuccess=()=>{a(d.result||null)},d.onerror=()=>{i(new Error(`Failed to get data from ${t}: ${d.error}`))}}catch(l){i(l)}})}async set(t,n,a){return this.db||await this.init(),this.validateStore(t),new Promise((i,l)=>{try{const u=this.db.transaction(t,"readwrite").objectStore(t).put(a,n);u.onsuccess=()=>{i()},u.onerror=()=>{l(new Error(`Failed to set data in ${t}: ${u.error}`))}}catch(c){l(c)}})}async delete(t,n){return this.db||await this.init(),this.validateStore(t),new Promise((a,i)=>{try{const d=this.db.transaction(t,"readwrite").objectStore(t).delete(n);d.onsuccess=()=>{a()},d.onerror=()=>{i(new Error(`Failed to delete data from ${t}: ${d.error}`))}}catch(l){i(l)}})}async getAllKeys(t){return this.db||await this.init(),this.validateStore(t),new Promise((n,a)=>{try{const c=this.db.transaction(t,"readonly").objectStore(t).getAllKeys();c.onsuccess=()=>{n(c.result)},c.onerror=()=>{a(new Error(`Failed to get all keys from ${t}: ${c.error}`))}}catch(i){a(i)}})}async getAll(t){this.db||await this.init();const n=await this.getAllKeys(t),a={};for(const i of n){const l=await this.get(t,i);l!==null&&(a[i]=l)}return a}async clear(t){return this.db||await this.init(),this.validateStore(t),new Promise((n,a)=>{try{const c=this.db.transaction(t,"readwrite").objectStore(t).clear();c.onsuccess=()=>{n()},c.onerror=()=>{a(new Error(`Failed to clear ${t}: ${c.error}`))}}catch(i){a(i)}})}async clearAll(){this.db||await this.init();const t=Object.values(te);for(const n of t)await this.clear(n)}async getStoreSize(t){const n=await this.getAll(t),a=JSON.stringify(n);return new Blob([a]).size}async exportAll(){this.db||await this.init();const t={},n=Object.values(te);for(const a of n)t[a]=await this.getAll(a);return t}async importAll(t){this.db||await this.init();for(const[n,a]of Object.entries(t))if(Object.values(te).includes(n)){await this.clear(n);for(const[i,l]of Object.entries(a))await this.set(n,i,l)}}async migrateFromLocalStorage(){if(!await this.get(te.MISC,"migrated_from_localstorage")){console.log("localStorageIndexedDB...");try{const n=localStorage.getItem("userData");n&&await this.set(te.USER_DATA,"userData",JSON.parse(n));const a=localStorage.getItem("user_description");a&&await this.set(te.USER_DATA,"user_description",a);const i=localStorage.getItem("characters");i&&await this.set(te.CHARACTERS,"characters",JSON.parse(i));const l=localStorage.getItem("chat_list");l&&await this.set(te.CHATS,"chat_list",JSON.parse(l));for(let p=0;p<localStorage.length;p++){const h=localStorage.key(p);if(h&&h.startsWith("chat_messages_")){const g=localStorage.getItem(h);g&&await this.set(te.CHAT_MESSAGES,h,JSON.parse(g))}}const c=localStorage.getItem("chat_settings");c&&await this.set(te.CHAT_SETTINGS,"chat_settings",JSON.parse(c));for(let p=0;p<localStorage.length;p++){const h=localStorage.key(p);if(h&&h.startsWith("chat_detail_settings_")){const g=localStorage.getItem(h);g&&await this.set(te.CHAT_SETTINGS,h,JSON.parse(g))}}const d=localStorage.getItem("world_books");d&&await this.set(te.WORLD_BOOKS,"world_books",JSON.parse(d));for(let p=0;p<localStorage.length;p++){const h=localStorage.key(p);if(h&&h.startsWith("api_")){const g=localStorage.getItem(h);if(g)try{await this.set(te.API_SETTINGS,h,JSON.parse(g))}catch{await this.set(te.API_SETTINGS,h,g)}}}const u=localStorage.getItem("accent_color");u&&await this.set(te.APPEARANCE,"accent_color",u);const m=localStorage.getItem("dark_mode");m&&await this.set(te.APPEARANCE,"dark_mode",m);for(let p=0;p<localStorage.length;p++){const h=localStorage.key(p);if(h&&(h.startsWith("desktop")||h.startsWith("image_")||h.startsWith("customText")||h.includes("wallpaper")||h.includes("color")||h.includes("font")||h==="organizations")){const g=localStorage.getItem(h);if(g)try{await this.set(te.MISC,h,JSON.parse(g))}catch{await this.set(te.MISC,h,g)}}}await this.set(te.MISC,"migrated_from_localstorage",!0),console.log("")}catch(n){throw console.error(":",n),n}}}};const ue=new J4;async function e_(){console.log("=== Database Diagnosis ===");try{await ue.init(),console.log(" Database initialized successfully");const e=ue.db;if(e){const t=Array.from(e.objectStoreNames);console.log("Available stores:",t);const a=Object.values(te).filter(l=>!t.includes(l));a.length>0?(console.error(" Missing stores:",a),console.log("Attempting to recreate database..."),e.close(),await new Promise((l,c)=>{const d=indexedDB.deleteDatabase(kc);d.onsuccess=()=>{console.log("Database deleted successfully"),l()},d.onerror=()=>{console.error("Failed to delete database"),c(d.error)}}),await ue.init(),console.log(" Database recreated successfully")):console.log(" All required stores are present"),await ue.set(te.MISC,"test_key","test_value"),await ue.get(te.MISC,"test_key")==="test_value"?(console.log(" Read/write operations working"),await ue.delete(te.MISC,"test_key")):console.error(" Read/write operations failed")}console.log("=== Diagnosis Complete ===")}catch(e){throw console.error(" Database diagnosis failed:",e),e}}typeof window<"u"&&(window.diagnoseDatabaseIssues=e_,window.clearDatabase=async()=>{const e=ue.db;e&&e.close(),await new Promise(t=>{const n=indexedDB.deleteDatabase(kc);n.onsuccess=()=>{console.log("Database cleared successfully. Please refresh the page."),t()}})});/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n_=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,a)=>a?a.toUpperCase():n.toLowerCase()),bx=e=>{const t=n_(e);return t.charAt(0).toUpperCase()+t.slice(1)},Gy=(...e)=>e.filter((t,n,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var s_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=C.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:i="",children:l,iconNode:c,...d},u)=>C.createElement("svg",{ref:u,...s_,width:t,height:t,stroke:e,strokeWidth:a?Number(n)*24/Number(t):n,className:Gy("lucide",i),...d},[...c.map(([m,p])=>C.createElement(m,p)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=(e,t)=>{const n=C.forwardRef(({className:a,...i},l)=>C.createElement(r_,{ref:l,iconNode:t,className:Gy(`lucide-${t_(bx(e))}`,`lucide-${e}`,a),...i}));return n.displayName=bx(e),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Yh=Te("activity",a_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],o_=Te("align-left",i_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=[["path",{d:"M12 22V8",key:"qkxhtm"}],["path",{d:"M5 12H2a10 10 0 0 0 20 0h-3",key:"1hv3nh"}],["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}]],c_=Te("anchor",l_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Cc=Te("archive",d_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],f_=Te("arrow-left",u_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],p_=Te("arrow-right",h_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],g_=Te("arrow-up",m_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x_=[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]],b_=Te("battery",x_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],v_=Te("book-open",y_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],S_=Te("book",w_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],C_=Te("bookmark",k_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],N_=Te("box",j_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],qy=Te("brain",__);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m14 14-4 4",key:"rymu2i"}],["path",{d:"m10 14 4 4",key:"3sz06r"}]],yx=Te("calendar-x",E_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],cr=Te("calendar",A_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Zh=Te("camera",T_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=[["path",{d:"M22 20v-9H2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2Z",key:"109fe4"}],["path",{d:"M18 11V4H6v7",key:"mon5oj"}],["path",{d:"M15 22v-4a3 3 0 0 0-3-3a3 3 0 0 0-3 3v4",key:"1k4jtn"}],["path",{d:"M22 11V9",key:"3zbp94"}],["path",{d:"M2 11V9",key:"1x5rnq"}],["path",{d:"M6 4V2",key:"1rsq15"}],["path",{d:"M18 4V2",key:"1jsdo1"}],["path",{d:"M10 4V2",key:"75d9ly"}],["path",{d:"M14 4V2",key:"8nj3z6"}]],M_=Te("castle",D_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],kt=Te("check",P_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I_=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],jo=Te("chevron-down",I_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],On=Te("chevron-left",F_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ys=Te("chevron-right",R_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],L_=Te("chevron-up",B_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Qh=Te("circle-alert",O_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],V_=Te("circle-arrow-up",z_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],No=Te("clock",$_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],U_=Te("copy",H_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Yy=Te("database",W_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],G_=Te("download",K_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Y_=Te("ellipsis",q_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]],Q_=Te("eraser",Z_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]],Xh=Te("file-pen-line",X_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Jh=Te("file-text",J_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],t6=Te("flag",e6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=[["path",{d:"M12 5a3 3 0 1 1 3 3m-3-3a3 3 0 1 0-3 3m3-3v1M9 8a3 3 0 1 0 3 3M9 8h1m5 0a3 3 0 1 1-3 3m3-3h-1m-2 3v-1",key:"3pnvol"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M12 10v12",key:"6ubwww"}],["path",{d:"M12 22c4.2 0 7-1.667 7-5-4.2 0-7 1.667-7 5Z",key:"9hd38g"}],["path",{d:"M12 22c-4.2 0-7-1.667-7-5 4.2 0 7 1.667 7 5Z",key:"ufn41s"}]],Zy=Te("flower-2",n6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],r6=Te("gift",s6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Qy=Te("globe",a6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],o6=Te("grid-3x3",i6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],c6=Te("hard-drive",l6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],dc=Te("hash",d6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],f6=Te("heart",u6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],p6=Te("house",h6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],ba=Te("image",m6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],x6=Te("info",g6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],y6=Te("key",b6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],w6=Te("layers",v6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Xy=Te("layout-grid",S6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k6=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],vx=Te("library",k6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],j6=Te("list",C6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],_6=Te("loader-circle",N6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],wx=Te("mail",E6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Kf=Te("map-pin",A6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],Sx=Te("message-circle",T6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D6=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M13 8H7",key:"14i4kc"}],["path",{d:"M17 12H7",key:"16if0g"}]],M6=Te("message-square-text",D6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],I6=Te("message-square",P6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=[["path",{d:"M5 12h14",key:"1ays0h"}]],R6=Te("minus",F6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],L6=Te("monitor",B6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],Jy=Te("moon",O6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],V6=Te("palette",z6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $6=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],H6=Te("pen-line",$6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],W6=Te("pencil",U6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],G6=Te("pin",K6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Gs=Te("plus",q6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],kx=Te("refresh-cw",Y6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]],Q6=Te("reply",Z6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],_i=Te("save",X6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],$c=Te("search",J6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],ep=Te("server",eE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],nE=Te("settings-2",tE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Hc=Te("settings",sE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rE=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],ev=Te("share-2",rE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]],iE=Te("share",aE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Gf=Te("shield-check",oE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],cE=Te("shield",lE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],uE=Te("smartphone",dE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],hE=Te("smile",fE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],mE=Te("sparkles",pE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],xE=Te("square-check-big",gE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M19.27 13.73A2.5 2.5 0 0 0 17.5 13h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-1.5c0-.66-.26-1.3-.73-1.77Z",key:"1sy9ra"}],["path",{d:"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-3-3c-1.66 0-3 1-3 3s1 2 1 3.5V13",key:"cnxgux"}]],yE=Te("stamp",bE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vE=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],tv=Te("star",vE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],nv=Te("stethoscope",wE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M14 3v4a2 2 0 0 0 2 2h4",key:"36rjfy"}],["path",{d:"M8 13h.01",key:"1sbv64"}],["path",{d:"M16 13h.01",key:"wip0gl"}],["path",{d:"M10 16s.8 1 2 1c1.3 0 2-1 2-1",key:"1vvgv3"}]],kE=Te("sticker",SE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],jE=Te("sun",CE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],_E=Te("sword",NE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],AE=Te("swords",EE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],DE=Te("table",TE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Cx=Te("tag",ME);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PE=[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]],sv=Te("terminal",PE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],FE=Te("thumbs-down",IE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],BE=Te("thumbs-up",RE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],zn=Te("trash-2",LE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],zE=Te("triangle-alert",OE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],tp=Te("upload",VE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $E=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],HE=Te("user-plus",$E);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],fs=Te("user",UE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WE=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Uc=Te("users",WE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KE=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],GE=Te("wifi",KE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qE=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ft=Te("x",qE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YE=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ZE=Te("zap",YE);function QE({onLoginSuccess:e}){const[t,n]=C.useState({name:"",country:"",fortress:"",date:""}),[a,i]=C.useState(!1),[l,c]=C.useState(!1),d=()=>{if(!t.name||!t.country||!t.fortress||!t.date){c(!0);return}i(!0),setTimeout(async()=>{await ue.set(te.USER_DATA,"userData",t),e(t),i(!1)},2e3)};return s.jsxs("div",{className:"min-h-screen w-full bg-[#F2F0EB] flex flex-col items-center justify-center p-6 font-['Source_Han_Sans_CN_VF',sans-serif] relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.03]",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),s.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-blue-100/50 rounded-full blur-3xl pointer-events-none"}),s.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-gray-200/50 rounded-full blur-3xl pointer-events-none"}),s.jsxs(Se.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"w-full max-w-md relative z-10",children:[s.jsxs("div",{className:"flex flex-col items-center mb-8",children:[s.jsx(Se.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8,delay:.2},className:"w-32 h-32 mb-6 drop-shadow-2xl",children:s.jsx("img",{alt:"Touken OS Logo",className:"w-full h-full object-contain",src:zh})}),s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("h1",{className:"text-2xl font-bold text-[#2C2C2C] tracking-tight",children:""}),s.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs font-mono text-[#8C8C89] uppercase tracking-widest bg-white/50 py-1 px-3 rounded-full border border-[#D6D3CC]",children:[s.jsx(Gf,{className:"w-3 h-3"}),"Secure Connection"]})]})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur-xl shadow-[0_8px_30px_rgb(0,0,0,0.04)] rounded-2xl overflow-hidden border border-white",children:[s.jsx("div",{className:"h-1.5 w-full bg-[#2C2C2C]"}),s.jsxs("div",{className:"p-8 space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"text-[10px] font-bold text-[#8C8C89] uppercase tracking-wider flex items-center gap-1.5",children:[s.jsx(fs,{className:"w-3 h-3"})," "]}),s.jsx("input",{type:"text",value:t.name,onChange:u=>n({...t,name:u.target.value}),placeholder:"",className:"w-full bg-[#F9F9F7] border-b-2 border-[#E5E5E5] px-3 py-2.5 text-sm font-medium text-[#2C2C2C] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-all rounded-t-md placeholder:text-[#BBB]"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"text-[10px] font-bold text-[#8C8C89] uppercase tracking-wider flex items-center gap-1.5",children:[s.jsx(Kf,{className:"w-3 h-3"})," "]}),s.jsx("input",{type:"text",value:t.country,onChange:u=>n({...t,country:u.target.value}),placeholder:" (: )",className:"w-full bg-[#F9F9F7] border-b-2 border-[#E5E5E5] px-3 py-2.5 text-sm font-medium text-[#2C2C2C] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-all rounded-t-md placeholder:text-[#BBB]"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"text-[10px] font-bold text-[#8C8C89] uppercase tracking-wider flex items-center gap-1.5",children:[s.jsx(p6,{className:"w-3 h-3"})," "]}),s.jsx("input",{type:"text",value:t.fortress,onChange:u=>n({...t,fortress:u.target.value}),placeholder:"",className:"w-full bg-[#F9F9F7] border-b-2 border-[#E5E5E5] px-3 py-2.5 text-sm font-medium text-[#2C2C2C] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-all rounded-t-md placeholder:text-[#BBB]"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"text-[10px] font-bold text-[#8C8C89] uppercase tracking-wider flex items-center gap-1.5",children:[s.jsx(cr,{className:"w-3 h-3"})," "]}),s.jsx("input",{type:"date",value:t.date,onChange:u=>n({...t,date:u.target.value}),className:"w-full bg-[#F9F9F7] border-b-2 border-[#E5E5E5] px-3 py-2.5 text-sm font-medium text-[#2C2C2C] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-all rounded-t-md placeholder:text-[#BBB] font-mono"})]})]}),s.jsx("button",{onClick:d,disabled:a,className:"w-full h-12 bg-[#2C2C2C] active:bg-black hover:bg-black text-white rounded-lg font-bold text-sm tracking-widest uppercase transition-all active:scale-[0.98] shadow-lg flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed group",children:a?s.jsxs(s.Fragment,{children:[s.jsx(_6,{className:"w-4 h-4 animate-spin"}),"Connecting..."]}):s.jsxs(s.Fragment,{children:["",s.jsx(p_,{className:"w-4 h-4 group-active:translate-x-1 group-hover:translate-x-1 transition-transform"})]})})]}),s.jsxs("div",{className:"px-8 py-4 bg-[#F9F9F7] border-t border-[#E5E5E5] flex justify-between items-center text-[10px] text-[#8C8C89] font-mono",children:[s.jsx("span",{children:"SYSTEM: ONLINE"}),s.jsx("span",{children:"VER: 1.0"})]})]})]}),s.jsx(K4,{open:l,onOpenChange:c,children:s.jsxs(q4,{className:"bg-[#F9F9F7] border border-[#D6D3CC] max-w-[320px] rounded-lg",children:[s.jsxs(Y4,{className:"text-[#2C2C2C] font-bold flex items-center gap-2",children:[s.jsx(Gf,{className:"w-5 h-5 text-[#B93636]"}),""]}),s.jsx(Z4,{className:"text-[#5A5A55] text-xs",children:""}),s.jsx("div",{className:"flex justify-end mt-4",children:s.jsx(Q4,{onClick:()=>c(!1),className:"bg-[#2C2C2C] text-white active:bg-black hover:bg-black text-xs font-bold px-4 h-8 rounded-md",children:""})})]})})]})}function XE(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const JE=e=>{switch(e){case"success":return nA;case"info":return rA;case"warning":return sA;case"error":return aA;default:return null}},eA=Array(12).fill(0),tA=({visible:e,className:t})=>Pe.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},Pe.createElement("div",{className:"sonner-spinner"},eA.map((n,a)=>Pe.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${a}`})))),nA=Pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Pe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),sA=Pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Pe.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),rA=Pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Pe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),aA=Pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Pe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),iA=Pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Pe.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Pe.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),oA=()=>{const[e,t]=Pe.useState(document.hidden);return Pe.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let qf=1;class lA{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:a,...i}=t,l=typeof t?.id=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:qf++,c=this.toasts.find(u=>u.id===l),d=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(l)&&this.dismissedToasts.delete(l),c?this.toasts=this.toasts.map(u=>u.id===l?(this.publish({...u,...t,id:l,title:a}),{...u,...t,id:l,dismissible:d,title:a}):u):this.addToast({title:a,...i,dismissible:d,id:l}),l},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(a=>a({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let a;n.loading!==void 0&&(a=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const i=Promise.resolve(t instanceof Function?t():t);let l=a!==void 0,c;const d=i.then(async m=>{if(c=["resolve",m],Pe.isValidElement(m))l=!1,this.create({id:a,type:"default",message:m});else if(dA(m)&&!m.ok){l=!1;const h=typeof n.error=="function"?await n.error(`HTTP error! status: ${m.status}`):n.error,g=typeof n.description=="function"?await n.description(`HTTP error! status: ${m.status}`):n.description,v=typeof h=="object"&&!Pe.isValidElement(h)?h:{message:h};this.create({id:a,type:"error",description:g,...v})}else if(m instanceof Error){l=!1;const h=typeof n.error=="function"?await n.error(m):n.error,g=typeof n.description=="function"?await n.description(m):n.description,v=typeof h=="object"&&!Pe.isValidElement(h)?h:{message:h};this.create({id:a,type:"error",description:g,...v})}else if(n.success!==void 0){l=!1;const h=typeof n.success=="function"?await n.success(m):n.success,g=typeof n.description=="function"?await n.description(m):n.description,v=typeof h=="object"&&!Pe.isValidElement(h)?h:{message:h};this.create({id:a,type:"success",description:g,...v})}}).catch(async m=>{if(c=["reject",m],n.error!==void 0){l=!1;const p=typeof n.error=="function"?await n.error(m):n.error,h=typeof n.description=="function"?await n.description(m):n.description,x=typeof p=="object"&&!Pe.isValidElement(p)?p:{message:p};this.create({id:a,type:"error",description:h,...x})}}).finally(()=>{l&&(this.dismiss(a),a=void 0),n.finally==null||n.finally.call(n)}),u=()=>new Promise((m,p)=>d.then(()=>c[0]==="reject"?p(c[1]):m(c[1])).catch(p));return typeof a!="string"&&typeof a!="number"?{unwrap:u}:Object.assign(a,{unwrap:u})},this.custom=(t,n)=>{const a=n?.id||qf++;return this.create({jsx:t(a),id:a,...n}),a},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Yn=new lA,cA=(e,t)=>{const n=t?.id||qf++;return Yn.addToast({title:e,...t,id:n}),n},dA=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",uA=cA,fA=()=>Yn.toasts,hA=()=>Yn.getActiveToasts(),pa=Object.assign(uA,{success:Yn.success,info:Yn.info,warning:Yn.warning,error:Yn.error,custom:Yn.custom,message:Yn.message,promise:Yn.promise,dismiss:Yn.dismiss,loading:Yn.loading},{getHistory:fA,getToasts:hA});XE("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Jl(e){return e.label!==void 0}const pA=3,mA="24px",gA="16px",jx=4e3,xA=356,bA=14,yA=45,vA=200;function Ls(...e){return e.filter(Boolean).join(" ")}function wA(e){const[t,n]=e.split("-"),a=[];return t&&a.push(t),n&&a.push(n),a}const SA=e=>{var t,n,a,i,l,c,d,u,m;const{invert:p,toast:h,unstyled:g,interacting:x,setHeights:v,visibleToasts:y,heights:k,index:w,toasts:_,expanded:N,removeToast:T,defaultRichColors:B,closeButton:O,style:$,cancelButtonStyle:P,actionButtonStyle:A,className:H="",descriptionClassName:Y="",duration:E,position:D,gap:S,expandByDefault:z,classNames:L,icons:F,closeButtonAriaLabel:K="Close toast"}=e,[G,Z]=Pe.useState(null),[R,V]=Pe.useState(null),[ee,W]=Pe.useState(!1),[U,Q]=Pe.useState(!1),[oe,ne]=Pe.useState(!1),[ae,ve]=Pe.useState(!1),[se,xe]=Pe.useState(!1),[Ie,I]=Pe.useState(0),[me,he]=Pe.useState(0),J=Pe.useRef(h.duration||E||jx),X=Pe.useRef(null),ie=Pe.useRef(null),le=w===0,ye=w+1<=y,ce=h.type,Ce=h.dismissible!==!1,_e=h.className||"",je=h.descriptionClassName||"",Re=Pe.useMemo(()=>k.findIndex(qe=>qe.toastId===h.id)||0,[k,h.id]),st=Pe.useMemo(()=>{var qe;return(qe=h.closeButton)!=null?qe:O},[h.closeButton,O]),Oe=Pe.useMemo(()=>h.duration||E||jx,[h.duration,E]),at=Pe.useRef(0),ct=Pe.useRef(0),ht=Pe.useRef(0),pt=Pe.useRef(null),[ot,$t]=D.split("-"),Dt=Pe.useMemo(()=>k.reduce((qe,St,Lt)=>Lt>=Re?qe:qe+St.height,0),[k,Re]),Kt=oA(),Tn=h.invert||p,rn=ce==="loading";ct.current=Pe.useMemo(()=>Re*S+Dt,[Re,Dt]),Pe.useEffect(()=>{J.current=Oe},[Oe]),Pe.useEffect(()=>{W(!0)},[]),Pe.useEffect(()=>{const qe=ie.current;if(qe){const St=qe.getBoundingClientRect().height;return he(St),v(Lt=>[{toastId:h.id,height:St,position:h.position},...Lt]),()=>v(Lt=>Lt.filter(Ct=>Ct.toastId!==h.id))}},[v,h.id]),Pe.useLayoutEffect(()=>{if(!ee)return;const qe=ie.current,St=qe.style.height;qe.style.height="auto";const Lt=qe.getBoundingClientRect().height;qe.style.height=St,he(Lt),v(Ct=>Ct.find(qt=>qt.toastId===h.id)?Ct.map(qt=>qt.toastId===h.id?{...qt,height:Lt}:qt):[{toastId:h.id,height:Lt,position:h.position},...Ct])},[ee,h.title,h.description,v,h.id,h.jsx,h.action,h.cancel]);const Qt=Pe.useCallback(()=>{Q(!0),I(ct.current),v(qe=>qe.filter(St=>St.toastId!==h.id)),setTimeout(()=>{T(h)},vA)},[h,T,v,ct]);Pe.useEffect(()=>{if(h.promise&&ce==="loading"||h.duration===1/0||h.type==="loading")return;let qe;return N||x||Kt?(()=>{if(ht.current<at.current){const Ct=new Date().getTime()-at.current;J.current=J.current-Ct}ht.current=new Date().getTime()})():(()=>{J.current!==1/0&&(at.current=new Date().getTime(),qe=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),Qt()},J.current))})(),()=>clearTimeout(qe)},[N,x,h,ce,Kt,Qt]),Pe.useEffect(()=>{h.delete&&(Qt(),h.onDismiss==null||h.onDismiss.call(h,h))},[Qt,h.delete]);function Dn(){var qe;if(F?.loading){var St;return Pe.createElement("div",{className:Ls(L?.loader,h==null||(St=h.classNames)==null?void 0:St.loader,"sonner-loader"),"data-visible":ce==="loading"},F.loading)}return Pe.createElement(tA,{className:Ls(L?.loader,h==null||(qe=h.classNames)==null?void 0:qe.loader),visible:ce==="loading"})}const dn=h.icon||F?.[ce]||JE(ce);var vt,Xt;return Pe.createElement("li",{tabIndex:0,ref:ie,className:Ls(H,_e,L?.toast,h==null||(t=h.classNames)==null?void 0:t.toast,L?.default,L?.[ce],h==null||(n=h.classNames)==null?void 0:n[ce]),"data-sonner-toast":"","data-rich-colors":(vt=h.richColors)!=null?vt:B,"data-styled":!(h.jsx||h.unstyled||g),"data-mounted":ee,"data-promise":!!h.promise,"data-swiped":se,"data-removed":U,"data-visible":ye,"data-y-position":ot,"data-x-position":$t,"data-index":w,"data-front":le,"data-swiping":oe,"data-dismissible":Ce,"data-type":ce,"data-invert":Tn,"data-swipe-out":ae,"data-swipe-direction":R,"data-expanded":!!(N||z&&ee),"data-testid":h.testId,style:{"--index":w,"--toasts-before":w,"--z-index":_.length-w,"--offset":`${U?Ie:ct.current}px`,"--initial-height":z?"auto":`${me}px`,...$,...h.style},onDragEnd:()=>{ne(!1),Z(null),pt.current=null},onPointerDown:qe=>{qe.button!==2&&(rn||!Ce||(X.current=new Date,I(ct.current),qe.target.setPointerCapture(qe.pointerId),qe.target.tagName!=="BUTTON"&&(ne(!0),pt.current={x:qe.clientX,y:qe.clientY})))},onPointerUp:()=>{var qe,St,Lt;if(ae||!Ce)return;pt.current=null;const Ct=Number(((qe=ie.current)==null?void 0:qe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Gt=Number(((St=ie.current)==null?void 0:St.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),qt=new Date().getTime()-((Lt=X.current)==null?void 0:Lt.getTime()),Jt=G==="x"?Ct:Gt,gs=Math.abs(Jt)/qt;if(Math.abs(Jt)>=yA||gs>.11){I(ct.current),h.onDismiss==null||h.onDismiss.call(h,h),V(G==="x"?Ct>0?"right":"left":Gt>0?"down":"up"),Qt(),ve(!0);return}else{var tn,Vn;(tn=ie.current)==null||tn.style.setProperty("--swipe-amount-x","0px"),(Vn=ie.current)==null||Vn.style.setProperty("--swipe-amount-y","0px")}xe(!1),ne(!1),Z(null)},onPointerMove:qe=>{var St,Lt,Ct;if(!pt.current||!Ce||((St=window.getSelection())==null?void 0:St.toString().length)>0)return;const qt=qe.clientY-pt.current.y,Jt=qe.clientX-pt.current.x;var gs;const tn=(gs=e.swipeDirections)!=null?gs:wA(D);!G&&(Math.abs(Jt)>1||Math.abs(qt)>1)&&Z(Math.abs(Jt)>Math.abs(qt)?"x":"y");let Vn={x:0,y:0};const Ms=mn=>1/(1.5+Math.abs(mn)/20);if(G==="y"){if(tn.includes("top")||tn.includes("bottom"))if(tn.includes("top")&&qt<0||tn.includes("bottom")&&qt>0)Vn.y=qt;else{const mn=qt*Ms(qt);Vn.y=Math.abs(mn)<Math.abs(qt)?mn:qt}}else if(G==="x"&&(tn.includes("left")||tn.includes("right")))if(tn.includes("left")&&Jt<0||tn.includes("right")&&Jt>0)Vn.x=Jt;else{const mn=Jt*Ms(Jt);Vn.x=Math.abs(mn)<Math.abs(Jt)?mn:Jt}(Math.abs(Vn.x)>0||Math.abs(Vn.y)>0)&&xe(!0),(Lt=ie.current)==null||Lt.style.setProperty("--swipe-amount-x",`${Vn.x}px`),(Ct=ie.current)==null||Ct.style.setProperty("--swipe-amount-y",`${Vn.y}px`)}},st&&!h.jsx&&ce!=="loading"?Pe.createElement("button",{"aria-label":K,"data-disabled":rn,"data-close-button":!0,onClick:rn||!Ce?()=>{}:()=>{Qt(),h.onDismiss==null||h.onDismiss.call(h,h)},className:Ls(L?.closeButton,h==null||(a=h.classNames)==null?void 0:a.closeButton)},(Xt=F?.close)!=null?Xt:iA):null,(ce||h.icon||h.promise)&&h.icon!==null&&(F?.[ce]!==null||h.icon)?Pe.createElement("div",{"data-icon":"",className:Ls(L?.icon,h==null||(i=h.classNames)==null?void 0:i.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||Dn():null,h.type!=="loading"?dn:null):null,Pe.createElement("div",{"data-content":"",className:Ls(L?.content,h==null||(l=h.classNames)==null?void 0:l.content)},Pe.createElement("div",{"data-title":"",className:Ls(L?.title,h==null||(c=h.classNames)==null?void 0:c.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?Pe.createElement("div",{"data-description":"",className:Ls(Y,je,L?.description,h==null||(d=h.classNames)==null?void 0:d.description)},typeof h.description=="function"?h.description():h.description):null),Pe.isValidElement(h.cancel)?h.cancel:h.cancel&&Jl(h.cancel)?Pe.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||P,onClick:qe=>{Jl(h.cancel)&&Ce&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,qe),Qt())},className:Ls(L?.cancelButton,h==null||(u=h.classNames)==null?void 0:u.cancelButton)},h.cancel.label):null,Pe.isValidElement(h.action)?h.action:h.action&&Jl(h.action)?Pe.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||A,onClick:qe=>{Jl(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,qe),!qe.defaultPrevented&&Qt())},className:Ls(L?.actionButton,h==null||(m=h.classNames)==null?void 0:m.actionButton)},h.action.label):null)};function Nx(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function kA(e,t){const n={};return[e,t].forEach((a,i)=>{const l=i===1,c=l?"--mobile-offset":"--offset",d=l?gA:mA;function u(m){["top","right","bottom","left"].forEach(p=>{n[`${c}-${p}`]=typeof m=="number"?`${m}px`:m})}typeof a=="number"||typeof a=="string"?u(a):typeof a=="object"?["top","right","bottom","left"].forEach(m=>{a[m]===void 0?n[`${c}-${m}`]=d:n[`${c}-${m}`]=typeof a[m]=="number"?`${a[m]}px`:a[m]}):u(d)}),n}const CA=Pe.forwardRef(function(t,n){const{id:a,invert:i,position:l="bottom-right",hotkey:c=["altKey","KeyT"],expand:d,closeButton:u,className:m,offset:p,mobileOffset:h,theme:g="light",richColors:x,duration:v,style:y,visibleToasts:k=pA,toastOptions:w,dir:_=Nx(),gap:N=bA,icons:T,containerAriaLabel:B="Notifications"}=t,[O,$]=Pe.useState([]),P=Pe.useMemo(()=>a?O.filter(ee=>ee.toasterId===a):O.filter(ee=>!ee.toasterId),[O,a]),A=Pe.useMemo(()=>Array.from(new Set([l].concat(P.filter(ee=>ee.position).map(ee=>ee.position)))),[P,l]),[H,Y]=Pe.useState([]),[E,D]=Pe.useState(!1),[S,z]=Pe.useState(!1),[L,F]=Pe.useState(g!=="system"?g:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),K=Pe.useRef(null),G=c.join("+").replace(/Key/g,"").replace(/Digit/g,""),Z=Pe.useRef(null),R=Pe.useRef(!1),V=Pe.useCallback(ee=>{$(W=>{var U;return(U=W.find(Q=>Q.id===ee.id))!=null&&U.delete||Yn.dismiss(ee.id),W.filter(({id:Q})=>Q!==ee.id)})},[]);return Pe.useEffect(()=>Yn.subscribe(ee=>{if(ee.dismiss){requestAnimationFrame(()=>{$(W=>W.map(U=>U.id===ee.id?{...U,delete:!0}:U))});return}setTimeout(()=>{Hb.flushSync(()=>{$(W=>{const U=W.findIndex(Q=>Q.id===ee.id);return U!==-1?[...W.slice(0,U),{...W[U],...ee},...W.slice(U+1)]:[ee,...W]})})})}),[O]),Pe.useEffect(()=>{if(g!=="system"){F(g);return}if(g==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?F("dark"):F("light")),typeof window>"u")return;const ee=window.matchMedia("(prefers-color-scheme: dark)");try{ee.addEventListener("change",({matches:W})=>{F(W?"dark":"light")})}catch{ee.addListener(({matches:U})=>{try{F(U?"dark":"light")}catch(Q){console.error(Q)}})}},[g]),Pe.useEffect(()=>{O.length<=1&&D(!1)},[O]),Pe.useEffect(()=>{const ee=W=>{var U;if(c.every(ne=>W[ne]||W.code===ne)){var oe;D(!0),(oe=K.current)==null||oe.focus()}W.code==="Escape"&&(document.activeElement===K.current||(U=K.current)!=null&&U.contains(document.activeElement))&&D(!1)};return document.addEventListener("keydown",ee),()=>document.removeEventListener("keydown",ee)},[c]),Pe.useEffect(()=>{if(K.current)return()=>{Z.current&&(Z.current.focus({preventScroll:!0}),Z.current=null,R.current=!1)}},[K.current]),Pe.createElement("section",{ref:n,"aria-label":`${B} ${G}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},A.map((ee,W)=>{var U;const[Q,oe]=ee.split("-");return P.length?Pe.createElement("ol",{key:ee,dir:_==="auto"?Nx():_,tabIndex:-1,ref:K,className:m,"data-sonner-toaster":!0,"data-sonner-theme":L,"data-y-position":Q,"data-x-position":oe,style:{"--front-toast-height":`${((U=H[0])==null?void 0:U.height)||0}px`,"--width":`${xA}px`,"--gap":`${N}px`,...y,...kA(p,h)},onBlur:ne=>{R.current&&!ne.currentTarget.contains(ne.relatedTarget)&&(R.current=!1,Z.current&&(Z.current.focus({preventScroll:!0}),Z.current=null))},onFocus:ne=>{ne.target instanceof HTMLElement&&ne.target.dataset.dismissible==="false"||R.current||(R.current=!0,Z.current=ne.relatedTarget)},onMouseEnter:()=>D(!0),onMouseMove:()=>D(!0),onMouseLeave:()=>{S||D(!1)},onDragEnd:()=>D(!1),onPointerDown:ne=>{ne.target instanceof HTMLElement&&ne.target.dataset.dismissible==="false"||z(!0)},onPointerUp:()=>z(!1)},P.filter(ne=>!ne.position&&W===0||ne.position===ee).map((ne,ae)=>{var ve,se;return Pe.createElement(SA,{key:ne.id,icons:T,index:ae,toast:ne,defaultRichColors:x,duration:(ve=w?.duration)!=null?ve:v,className:w?.className,descriptionClassName:w?.descriptionClassName,invert:i,visibleToasts:k,closeButton:(se=w?.closeButton)!=null?se:u,interacting:S,position:ee,style:w?.style,unstyled:w?.unstyled,classNames:w?.classNames,cancelButtonStyle:w?.cancelButtonStyle,actionButtonStyle:w?.actionButtonStyle,closeButtonAriaLabel:w?.closeButtonAriaLabel,removeToast:V,toasts:P.filter(xe=>xe.position==ne.position),heights:H.filter(xe=>xe.position==ne.position),setHeights:Y,expandByDefault:d,gap:N,expanded:E,swipeDirections:t.swipeDirections})})):null}))}),_x={p15366300:"M94 47C94 72.9574 72.9574 94 47 94C21.0426 94 0 72.9574 0 47C0 21.0426 21.0426 0 47 0C72.9574 0 94 21.0426 94 47Z",p3086ef80:"M3.5 1.67073L0 5.77489e-08V4.04145L3.5 2.37073V1.67073ZM313.5 2.37073L317 4.04145V5.77489e-08L313.5 1.67073V2.37073ZM4.48585 2.02073V2.37073H7.47641V2.02073V1.67073H4.48585V2.02073ZM10.467 2.02073V2.37073H13.4575V2.02073V1.67073H10.467V2.02073ZM16.4481 2.02073V2.37073H19.4387V2.02073V1.67073H16.4481V2.02073ZM22.4292 2.02073V2.37073H25.4198V2.02073V1.67073H22.4292V2.02073ZM28.4104 2.02073V2.37073H31.4009V2.02073V1.67073H28.4104V2.02073ZM34.3915 2.02073V2.37073H37.3821V2.02073V1.67073H34.3915V2.02073ZM40.3726 2.02073V2.37073H43.3632V2.02073V1.67073H40.3726V2.02073ZM46.3538 2.02073V2.37073H49.3443V2.02073V1.67073H46.3538V2.02073ZM52.3349 2.02073V2.37073H55.3255V2.02073V1.67073H52.3349V2.02073ZM58.316 2.02073V2.37073H61.3066V2.02073V1.67073H58.316V2.02073ZM64.2972 2.02073V2.37073H67.2877V2.02073V1.67073H64.2972V2.02073ZM70.2783 2.02073V2.37073H73.2689V2.02073V1.67073H70.2783V2.02073ZM76.2594 2.02073V2.37073H79.25V2.02073V1.67073H76.2594V2.02073ZM82.2405 2.02073V2.37073H85.2311V2.02073V1.67073H82.2405V2.02073ZM88.2217 2.02073V2.37073H91.2122V2.02073V1.67073H88.2217V2.02073ZM94.2028 2.02073V2.37073H97.1934V2.02073V1.67073H94.2028V2.02073ZM100.184 2.02073V2.37073H103.174V2.02073V1.67073H100.184V2.02073ZM106.165 2.02073V2.37073H109.156V2.02073V1.67073H106.165V2.02073ZM112.146 2.02073V2.37073H115.137V2.02073V1.67073H112.146V2.02073ZM118.127 2.02073V2.37073H121.118V2.02073V1.67073H118.127V2.02073ZM124.108 2.02073V2.37073H127.099V2.02073V1.67073H124.108V2.02073ZM130.09 2.02073V2.37073H133.08V2.02073V1.67073H130.09V2.02073ZM136.071 2.02073V2.37073H139.061V2.02073V1.67073H136.071V2.02073ZM142.052 2.02073V2.37073H145.042V2.02073V1.67073H142.052V2.02073ZM148.033 2.02073V2.37073H151.024V2.02073V1.67073H148.033V2.02073ZM154.014 2.02073V2.37073H157.005V2.02073V1.67073H154.014V2.02073ZM159.995 2.02073V2.37073H162.986V2.02073V1.67073H159.995V2.02073ZM165.976 2.02073V2.37073H168.967V2.02073V1.67073H165.976V2.02073ZM171.958 2.02073V2.37073H174.948V2.02073V1.67073H171.958V2.02073ZM177.939 2.02073V2.37073H180.929V2.02073V1.67073H177.939V2.02073ZM183.92 2.02073V2.37073H186.91V2.02073V1.67073H183.92V2.02073ZM189.901 2.02073V2.37073H192.892V2.02073V1.67073H189.901V2.02073ZM195.882 2.02073V2.37073H198.873V2.02073V1.67073H195.882V2.02073ZM201.863 2.02073V2.37073H204.854V2.02073V1.67073H201.863V2.02073ZM207.844 2.02073V2.37073H210.835V2.02073V1.67073H207.844V2.02073ZM213.826 2.02073V2.37073H216.816V2.02073V1.67073H213.826V2.02073ZM219.807 2.02073V2.37073H222.797V2.02073V1.67073H219.807V2.02073ZM225.788 2.02073V2.37073H228.778V2.02073V1.67073H225.788V2.02073ZM231.769 2.02073V2.37073H234.76V2.02073V1.67073H231.769V2.02073ZM237.75 2.02073V2.37073H240.741V2.02073V1.67073H237.75V2.02073ZM243.731 2.02073V2.37073H246.722V2.02073V1.67073H243.731V2.02073ZM249.712 2.02073V2.37073H252.703V2.02073V1.67073H249.712V2.02073ZM255.693 2.02073V2.37073H258.684V2.02073V1.67073H255.693V2.02073ZM261.675 2.02073V2.37073H264.665V2.02073V1.67073H261.675V2.02073ZM267.656 2.02073V2.37073H270.646V2.02073V1.67073H267.656V2.02073ZM273.637 2.02073V2.37073H276.627V2.02073V1.67073H273.637V2.02073ZM279.618 2.02073V2.37073H282.609V2.02073V1.67073H279.618V2.02073ZM285.599 2.02073V2.37073H288.59V2.02073V1.67073H285.599V2.02073ZM291.58 2.02073V2.37073H294.571V2.02073V1.67073H291.58V2.02073ZM297.561 2.02073V2.37073H300.552V2.02073V1.67073H297.561V2.02073ZM303.543 2.02073V2.37073H306.533V2.02073V1.67073H303.543V2.02073ZM309.524 2.02073V2.37073H312.514V2.02073V1.67073H309.524V2.02073Z"},jA="/assets/8f74948c921008406168688e78dcbd91d8f4d681-x-mW1jEE.png",NA="/assets/a5993753075c329027b5d2cb65fd9ee64c4fcfce-D33ig08G.png",_A="/assets/bb6c57b71e6f8f321834896ce493dada3cf559c0-Yy02ktKg.png",EA="/assets/f2f6c119896a12e8176a39008632fd4e00350238-Cii0Sw53.png",AA={maxWidth:1024,maxHeight:1024,quality:.85,mimeType:"image/jpeg"};async function np(e,t={}){const n={...AA,...t};return new Promise((a,i)=>{const l=new FileReader;l.onload=c=>{const d=new Image;d.onload=()=>{try{const u=document.createElement("canvas"),m=u.getContext("2d");if(!m){i(new Error("canvas"));return}let{width:p,height:h}=d;const g=n.maxWidth,x=n.maxHeight;if(p>g||h>x){const v=Math.min(g/p,x/h);p=Math.round(p*v),h=Math.round(h*v)}u.width=p,u.height=h,m.drawImage(d,0,0,p,h),u.toBlob(v=>{v?a(v):i(new Error(""))},n.mimeType,n.quality)}catch(u){i(u)}},d.onerror=()=>{i(new Error(""))},d.src=c.target?.result},l.onerror=()=>{i(new Error(""))},l.readAsDataURL(e)})}async function TA(e){return np(e,{maxWidth:200,maxHeight:200,quality:.9,mimeType:"image/jpeg"})}function rv(e){const t=e.split(","),n=t[0].match(/:(.*?);/)?.[1]||"image/jpeg",a=atob(t[1]),i=new ArrayBuffer(a.length),l=new Uint8Array(i);for(let c=0;c<a.length;c++)l[c]=a.charCodeAt(c);return new Blob([i],{type:n})}const Ex="DesktopImagesDB",Vt="images",DA=3,Sn={AVATARS:"avatars",MEMES:"memes",CHAT_IMAGES:"chat_images",SYSTEM:"system"},Ws=new Map;function MA(e){return e==="avatar"||e==="chat-avatar"||e.startsWith("character-avatar-")||e.startsWith("character-")&&e.endsWith("-avatar")?Sn.AVATARS:e==="profileBackground"||e==="desktop-wallpaper"||e==="chat-background"||e==="anniversary"||e.startsWith("desktop2_")?Sn.SYSTEM:e.startsWith("meme-")?Sn.MEMES:e.startsWith("chat-image-")?Sn.CHAT_IMAGES:Sn.SYSTEM}function Ei(e,t){return e.includes("/")?e:`${MA(e)}/${e}`}function PA(e){const t=e.split("/");return t.length>1?t[1]:e}const Ds=()=>new Promise((e,t)=>{const n=indexedDB.open(Ex,DA);n.onerror=()=>{console.error("Failed to open image database:",n.error),t(n.error)},n.onsuccess=()=>{const a=n.result;if(!a.objectStoreNames.contains(Vt)){console.error("Image store not found, recreating database..."),a.close();const i=indexedDB.deleteDatabase(Ex);i.onsuccess=()=>{Ds().then(e).catch(t)},i.onerror=()=>{t(new Error("Failed to recreate image database"))};return}e(a)},n.onupgradeneeded=a=>{const i=a.target.result;console.log("Image database upgrade needed from version",a.oldVersion,"to",a.newVersion),i.objectStoreNames.contains(Vt)||(i.createObjectStore(Vt),console.log("Created image store:",Vt))}}),ms=async(e,t)=>{try{const n=await Ds();let a;return e==="avatar"||e.includes("avatar")?a=await TA(t):a=t,new Promise((i,l)=>{try{const u=n.transaction([Vt],"readwrite").objectStore(Vt).put(a,Ei(e));u.onsuccess=()=>{n.close();const m=yi(e,a);i(m)},u.onerror=()=>{console.error("Failed to save image:",u.error),n.close(),l(u.error)}}catch(c){console.error("Error in transaction:",c),n.close(),l(c)}})}catch(n){throw console.error("Failed to save image:",n),n}},wt=async e=>{try{if(Ws.has(e))return Ws.get(e);const t=await Ds(),n=Ei(e);return new Promise((a,i)=>{try{const c=t.transaction([Vt],"readonly").objectStore(Vt),d=c.get(n);d.onsuccess=()=>{let u=d.result;if(!u&&n!==e){const p=c.get(e);p.onsuccess=()=>{const h=p.result;if(t.close(),!h){a(null);return}if(console.log(`Migrating ${e} from old format to new format...`),RA(e,h).catch(console.error),typeof h=="string")a(h);else{const g=yi(e,h);a(g)}},p.onerror=()=>{t.close(),a(null)};return}if(t.close(),!u){a(null);return}if(typeof u=="string"){FA(e,u).catch(console.error),a(u);return}const m=yi(e,u);a(m)},d.onerror=()=>{console.error("Failed to get image:",d.error),t.close(),i(d.error)}}catch(l){console.error("Error in transaction:",l),t.close(),i(l)}})}catch(t){return console.error("Failed to get image:",t),null}};function yi(e,t){Ws.has(e)&&URL.revokeObjectURL(Ws.get(e));const n=URL.createObjectURL(t);return Ws.set(e,n),n}const IA=e=>{Ws.has(e)&&(URL.revokeObjectURL(Ws.get(e)),Ws.delete(e))},wa=async e=>{try{IA(e);const t=await Ds();return new Promise((n,a)=>{try{const c=t.transaction([Vt],"readwrite").objectStore(Vt).delete(Ei(e));c.onsuccess=()=>{t.close(),n()},c.onerror=()=>{console.error("Failed to delete image:",c.error),t.close(),a(c.error)}}catch(i){console.error("Error in transaction:",i),t.close(),a(i)}})}catch(t){throw console.error("Failed to delete image:",t),t}};async function FA(e,t){try{console.log(`Migrating ${e} from Base64 to Blob...`);const n=rv(t),a=await Ds();return new Promise((i,l)=>{try{const u=a.transaction([Vt],"readwrite").objectStore(Vt).put(n,Ei(e));u.onsuccess=()=>{a.close(),console.log(`Successfully migrated ${e} to Blob`),yi(e,n),i()},u.onerror=()=>{console.error("Failed to migrate image:",u.error),a.close(),l(u.error)}}catch(c){console.error("Error in migration transaction:",c),a.close(),l(c)}})}catch(n){console.error("Failed to migrate Base64 to Blob:",n)}}async function RA(e,t){try{const n=await Ds();return new Promise((a,i)=>{try{const d=n.transaction([Vt],"readwrite").objectStore(Vt).put(t,Ei(e));d.onsuccess=()=>{n.close(),console.log(`Successfully migrated ${e} to new format`),t instanceof Blob&&yi(e,t),a()},d.onerror=()=>{console.error("Failed to migrate image:",d.error),n.close(),i(d.error)}}catch(l){console.error("Error in migration transaction:",l),n.close(),i(l)}})}catch(n){console.error("Failed to migrate to new format:",n)}}const BA=()=>{Ws.forEach(e=>URL.revokeObjectURL(e)),Ws.clear()},LA=async()=>{try{BA();const e=await Ds();return new Promise((t,n)=>{try{const l=e.transaction([Vt],"readwrite").objectStore(Vt).clear();l.onsuccess=()=>{e.close(),console.log("All images cleared successfully"),t()},l.onerror=()=>{console.error("Failed to clear all images:",l.error),e.close(),n(l.error)}}catch(a){console.error("Error in clear transaction:",a),e.close(),n(a)}})}catch(e){throw console.error("Failed to clear all images:",e),e}},OA=async()=>{try{const e=await Ds(),t=await sp(),n={};for(const{originalKey:a,storageKey:i,category:l}of t)try{const u=e.transaction([Vt],"readonly").objectStore(Vt).get(i);await new Promise((m,p)=>{u.onsuccess=()=>{const h=u.result;h instanceof Blob?n[a]={blob:h,category:l}:typeof h=="string"&&(n[a]={blob:rv(h),category:l}),m()},u.onerror=p})}catch(c){console.error(`Failed to export image ${a}:`,c)}return e.close(),n}catch(e){return console.error("Failed to export all images with category:",e),{}}},zA=async e=>{try{const t=await Ds();for(const[n,a]of Object.entries(e))try{await new Promise((i,l)=>{const u=t.transaction([Vt],"readwrite").objectStore(Vt).put(a,Ei(n));u.onsuccess=()=>{yi(n,a),i()},u.onerror=()=>{console.error(`Failed to import image ${n}:`,u.error),l(u.error)}})}catch(i){console.error(`Failed to process image ${n}:`,i)}t.close(),console.log(`Successfully imported ${Object.keys(e).length} images`)}catch(t){throw console.error("Failed to import images:",t),t}},av=async()=>{try{const e=await Ds();return new Promise((t,n)=>{try{const i=e.transaction([Vt],"readonly").objectStore(Vt),l=i.getAll(),c=i.getAllKeys();let d=[],u=[];l.onsuccess=()=>{d=l.result},c.onsuccess=()=>{u=c.result;const m={[Sn.AVATARS]:{count:0,size:0},[Sn.SYSTEM]:{count:0,size:0},[Sn.MEMES]:{count:0,size:0},[Sn.CHAT_IMAGES]:{count:0,size:0},uncategorized:{count:0,size:0}};u.forEach((h,g)=>{const x=String(h),v=d[g],y=v instanceof Blob?v.size:0;if(x.includes("/")){const k=x.split("/")[0];k in m?(m[k].count++,m[k].size+=y):(m.uncategorized.count++,m.uncategorized.size+=y)}else m.uncategorized.count++,m.uncategorized.size+=y});const p={};for(const[h,g]of Object.entries(m))p[h]={count:g.count,size:(g.size/1024).toFixed(2)};e.close(),t(p)},l.onerror=()=>{console.error("Failed to get all data:",l.error),e.close(),n(l.error)},c.onerror=()=>{console.error("Failed to get all keys:",c.error),e.close(),n(c.error)}}catch(a){console.error("Error in transaction:",a),e.close(),n(a)}})}catch(e){return console.error("Failed to get category stats:",e),{[Sn.AVATARS]:{count:0,size:"0.00"},[Sn.SYSTEM]:{count:0,size:"0.00"},[Sn.MEMES]:{count:0,size:"0.00"},[Sn.CHAT_IMAGES]:{count:0,size:"0.00"},uncategorized:{count:0,size:"0.00"}}}},sp=async()=>{try{const e=await Ds();return new Promise((t,n)=>{try{const l=e.transaction([Vt],"readonly").objectStore(Vt).getAllKeys();l.onsuccess=()=>{e.close();const d=l.result.map(u=>{const m=String(u),p=m.split("/");return{originalKey:PA(m),storageKey:m,category:p.length>1?p[0]:"uncategorized"}});t(d)},l.onerror=()=>{console.error("Failed to list all images:",l.error),e.close(),n(l.error)}}catch(a){console.error("Error in transaction:",a),e.close(),n(a)}})}catch(e){return console.error("Failed to list all images:",e),[]}},Fe={messages:{},chatSettingsDetail:{},userAvatar:void 0},VA=5e3,Yf=(e=!1)=>{Fe.chatSettings=void 0,Fe.userData=void 0,Fe.characters=void 0,Fe.lastUpdate=void 0,e&&(Fe.messages={},Fe.chatSettingsDetail={},Fe.userAvatar=void 0)},$A=()=>Fe.lastUpdate?Date.now()-Fe.lastUpdate<VA:!1,Zf=(e,t)=>Fe.chatSettingsDetail[e]?.remark||t,iv=()=>Fe.userAvatar,ov=e=>{Fe.userAvatar=e};function HA({userData:e,colorMode:t,preloadedImages:n}){const[a,i]=C.useState(0),[l,c]=C.useState(n?.anniversary||null),d=C.useRef(null);C.useEffect(()=>{const p=()=>{try{const g=new Date(e.date);g.setHours(0,0,0,0);const x=new Date;x.setHours(0,0,0,0);const v=Math.abs(x.getTime()-g.getTime()),y=Math.floor(v/(1e3*60*60*24))-1;i(Math.max(0,y))}catch{console.log(""),i(365)}};p();const h=setInterval(p,1e3*60*60*24);return()=>clearInterval(h)},[e.date]),C.useEffect(()=>{(async()=>{const h=await wt("anniversary");h&&c(h)})()},[]);const u=()=>{d.current?.click()},m=async p=>{const h=p.target.files?.[0];if(h)try{const g=await ms("anniversary",h);c(g)}catch(g){console.error(":",g)}};return s.jsxs("div",{className:"absolute left-[54.1%] w-[38.65%] aspect-square top-[52.9%]","data-name":"",children:[s.jsx("input",{ref:d,type:"file",accept:"image/*",onChange:m,className:"hidden"}),s.jsx("div",{className:"absolute left-1/2 w-full aspect-square top-1/2 translate-x-[-50%] translate-y-[-50%] cursor-pointer hover:opacity-80 transition-opacity rounded-[24px] overflow-hidden",onClick:u,children:l?s.jsx("img",{alt:"",className:"block w-full h-full object-cover",src:l}):s.jsx("div",{className:"block w-full h-full",style:{backgroundColor:"#D5EAE3"}})}),s.jsxs("div",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[11.25%] leading-[normal] left-1/2 text-[clamp(14px,4vw,16px)] text-center top-[11.875%] translate-x-[-50%] w-[62.5%] pointer-events-none ${t==="dark"?"text-black":"text-white"}`,children:[s.jsx("p",{className:"mb-0",children:""}),s.jsx("p",{children:""})]}),s.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Normal',sans-serif] font-[350] h-[14.375%] leading-[normal] left-1/2 text-[clamp(11px,3.25vw,13px)] text-center top-[28.125%] translate-x-[-50%] w-[31.25%] pointer-events-none ${t==="dark"?"text-black":"text-white"}`,children:""}),s.jsxs("p",{className:`absolute font-['Actor:Regular',sans-serif] h-[33.75%] leading-[normal] left-1/2 not-italic text-[0px] text-center top-[calc(50%-16.875%)] translate-x-[-50%] w-[72.5%] pointer-events-none ${t==="dark"?"text-black":"text-white"}`,children:[s.jsx("span",{className:"font-['Actor:Regular',sans-serif] text-[clamp(36px,12vw,48px)]",children:a}),s.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal text-[clamp(11px,3.25vw,13px)]",children:""})]})]})}function UA({userData:e,onUserDataChange:t,colorMode:n,preloadedImages:a}){const[i,l]=C.useState(new Date),[c,d]=C.useState(30),[u,m]=C.useState(""),[p,h]=C.useState(!1),[g,x]=C.useState(a?.profileBackground||null),[v,y]=C.useState(()=>a?.avatar||iv()||null),k=C.useRef(null),w=C.useRef(null);C.useEffect(()=>{const Y=setInterval(()=>{l(new Date)},1e3);return()=>clearInterval(Y)},[]),C.useEffect(()=>{(async()=>{if("getBattery"in navigator)try{const E=await navigator.getBattery();d(Math.round(E.level*100)),E.addEventListener("levelchange",()=>{d(Math.round(E.level*100))})}catch{console.log("")}})()},[]),C.useEffect(()=>{(async()=>{try{const E=await ue.get(te.MISC,"customText");E&&m(E);const D=await wt("profileBackground");D&&x(D);const S=await wt("avatar");S&&y(S)}catch(E){console.error("Failed to load settings:",E)}})()},[]);const _=Y=>Y.toLocaleTimeString("zh-CN",{hour12:!1}),N=Y=>{const E=Y.getMonth()+1,D=Y.getDate(),z=["","","","","","",""][Y.getDay()];return`${E}${D} ${z}`},T=()=>{h(!0)},B=async()=>{h(!1),await ue.set(te.MISC,"customText",u)},O=Y=>{m(Y.target.value)},$=()=>{k.current?.click()},P=()=>{w.current?.click()},A=async Y=>{const E=Y.target.files?.[0];if(E)try{const D=await ms("profileBackground",E);x(D)}catch(D){console.error(":",D)}},H=async Y=>{const E=Y.target.files?.[0];if(E)try{const D=await ms("avatar",E);y(D),window.dispatchEvent(new Event("avatarChanged")),ov(D)}catch(D){console.error(":",D)}};return s.jsxs("div",{className:"absolute h-[41.6%] left-1/2 top-[6.6%] translate-x-[-50%] w-[88.4%]","data-name":"1",children:[s.jsxs("div",{className:`relative backdrop-blur-[15px] backdrop-filter h-full rounded-[24px] shadow-[0px_0px_2px_0px_inset_#ffffff,0px_1px_1px_0px_inset_rgba(255,255,255,0.5)] w-full ${n==="dark"?"bg-[rgba(0,0,0,0.3)]":"bg-[rgba(255,255,255,0.5)]"}`,children:[s.jsx("div",{className:"absolute left-0 right-0 top-0 h-[49.7%] rounded-tl-[24px] rounded-tr-[24px] cursor-pointer hover:opacity-80 transition-opacity overflow-hidden",onClick:$,children:g?s.jsx("img",{alt:"",className:"absolute inset-0 w-full h-full object-cover rounded-tl-[24px] rounded-tr-[24px]",src:g}):s.jsx("div",{className:"absolute inset-0 w-full h-full rounded-tl-[24px] rounded-tr-[24px]",style:{backgroundColor:"#D5EAE3"}})}),s.jsxs("div",{className:"absolute contents left-[1.37%] top-[39.43%]","data-name":"",children:[s.jsxs("div",{className:"flex items-center absolute left-[28.5%] top-[51%]",children:[s.jsx("p",{className:`text-[clamp(14px,4vw,16px)] mr-[6px] ${n==="dark"?"text-white":"text-black"}`,children:e.name}),s.jsx("div",{className:"flex-shrink-0","data-name":"",children:s.jsx("div",{className:"relative bg-[#609f60] h-[14px] rounded-[6px] px-[5px] flex items-center justify-center",children:s.jsx("p",{className:"text-[10px] text-white whitespace-nowrap",style:{fontFamily:"YShi NewHei T, sans-serif",fontWeight:"600"},children:""})})})]}),s.jsxs("p",{className:`absolute font-['Source_Han_Sans_Old_Style:Normal',sans-serif] h-[2.61%] leading-[normal] left-[28.5%] not-italic text-[clamp(12px,3.5vw,14px)] top-[58.5%] w-[68.03%] ${n==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:[e.country,"  ",e.fortress,"  ",e.date]}),s.jsx("div",{className:"absolute left-0 w-[25.68%] aspect-square top-[38.5%] cursor-pointer hover:opacity-80 transition-opacity","data-name":"",onClick:Y=>{Y.stopPropagation(),P()},children:v?s.jsx("img",{alt:"",className:"block w-full h-full object-cover rounded-full",src:v}):s.jsx("svg",{className:"block w-full h-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 94 94",children:s.jsx("path",{d:_x.p15366300,fill:n==="dark"?"rgba(0,0,0,0.5)":"white"})})})]}),s.jsx("div",{className:"absolute contents left-[5.19%] top-[66.5%]","data-name":"Group 1",children:s.jsxs("div",{className:"absolute flex items-center gap-[2.5%] left-[5.19%] top-[66.5%] w-[89.62%] h-[12.8%]",children:[s.jsxs("div",{className:`flex items-center rounded-[24px] px-[2.5%] py-[2.5%] gap-[3%] w-[59.5%] h-full justify-center ${n==="dark"?"bg-[rgba(0,0,0,0.3)]":"bg-[rgba(255,255,255,0.5)]"}`,children:[s.jsxs("div",{className:`relative h-[95%] aspect-[2.43/1] rounded-[8px] flex-shrink-0 ${n==="dark"?"bg-[rgba(0,0,0,0.3)]":"bg-[rgba(255,255,255,0.5)]"}`,children:[s.jsx("div",{className:`absolute left-[8.8%] top-[21.4%] w-[41.2%] h-[57.1%] rounded-[4px] ${n==="dark"?"bg-[rgba(255,255,255,0.2)]":"bg-[#d9d9d9]"}`,children:s.jsx("div",{className:`absolute left-0 top-0 h-full rounded-[4px] transition-all duration-300 ${n==="dark"?"bg-white":"bg-[#5c5c5c]"}`,style:{width:`${c}%`}})}),s.jsx("div",{className:"absolute right-[6%] top-0 h-full flex items-center",children:s.jsxs("p",{className:`font-['Didact_Gothic:Regular',sans-serif] text-[clamp(10px,1.4vh,14px)] ${n==="dark"?"text-white":"text-[#5c5c5c]"}`,children:[c,"%"]})})]}),s.jsxs("div",{className:"relative h-[95%] aspect-square flex-shrink-0",children:[s.jsx("svg",{className:"block w-full h-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 28 28",children:s.jsx("circle",{cx:"14",cy:"14",fill:n==="dark"?"rgba(0,0,0,0.5)":"white",fillOpacity:"0.5",r:"14"})}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("p",{className:`font-['Didact_Gothic:Regular','Noto_Sans_Symbols2:Regular',sans-serif] text-[clamp(12px,2.1vh,19px)] ${n==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:""})})]}),s.jsxs("div",{className:"relative h-[95%] aspect-square flex-shrink-0",children:[s.jsx("svg",{className:"block w-full h-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 28 28",children:s.jsx("circle",{cx:"14",cy:"14",fill:n==="dark"?"rgba(0,0,0,0.5)":"white",fillOpacity:"0.5",r:"14"})}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("p",{className:`font-['Arial','Noto_Sans_Symbols2:Regular',sans-serif] text-[clamp(12px,2.1vh,19px)] leading-none ${n==="dark"?"text-white/70":"text-[#5c5c5c]"}`,style:{transform:"translateY(5%)"},children:""})})]}),s.jsxs("div",{className:"relative h-[95%] aspect-square flex-shrink-0",children:[s.jsx("svg",{className:"block w-full h-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 28 28",children:s.jsx("circle",{cx:"14",cy:"14",fill:n==="dark"?"rgba(0,0,0,0.5)":"white",fillOpacity:"0.5",r:"14"})}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("p",{className:`font-['Didact_Gothic:Regular','Noto_Sans_Symbols2:Regular',sans-serif] text-[clamp(12px,2.1vh,19px)] ${n==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:""})})]})]}),s.jsx("div",{className:`rounded-[24px] px-[3%] py-[2.5%] w-[38%] h-full flex items-center justify-center ${n==="dark"?"bg-[rgba(0,0,0,0.5)]":"bg-[rgba(255,255,255,0.5)]"}`,children:s.jsx("p",{className:`bakbak-one-regular text-[clamp(20px,6.5vw,26px)] text-center whitespace-nowrap overflow-hidden ${n==="dark"?"text-white/50":"text-[#afafaf]"}`,children:_(i)})})]})}),s.jsxs("div",{className:"absolute left-[calc(50%+0.41%)] top-[83.03%] translate-x-[-50%] w-[86.61%]","data-name":"Group 3",children:[p?s.jsx("input",{type:"text",value:u,onChange:O,onBlur:B,autoFocus:!0,className:`w-full font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal text-[clamp(12px,3.5vw,14px)] text-center bg-transparent border-none outline-none ${n==="dark"?"text-white/70":"text-[#5c5c5c]"}`}):s.jsx("p",{onClick:T,className:`w-full font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal text-[clamp(12px,3.5vw,14px)] text-center cursor-pointer hover:opacity-70 transition-opacity mb-2 ${n==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:u}),s.jsx("div",{className:"w-full h-[1.31%]",children:s.jsx("svg",{className:"w-full h-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 317 5",children:s.jsx("path",{d:_x.p3086ef80,fill:n==="dark"?"rgba(255,255,255,0.7)":"#5C5C5C"})})})]}),s.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Normal',sans-serif] font-[350] h-[6.27%] leading-[normal] left-[93.99%] text-[clamp(10px,3vw,12px)] text-right top-[92.43%] translate-x-[-100%] w-[28.42%] whitespace-pre-wrap ${n==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:N(i)})]}),s.jsx("input",{ref:k,type:"file",accept:"image/*",onChange:A,className:"hidden"}),s.jsx("input",{ref:w,type:"file",accept:"image/*",onChange:H,className:"hidden"})]})}function WA({userData:e,onUserDataChange:t,onChatClick:n,onMemoryClick:a,preloadedImages:i}){const[l,c]=C.useState("light"),[d,u]=C.useState({"desktop1-chat":i?.["system-icon-desktop1-chat"]||null,"desktop1-forum":i?.["system-icon-desktop1-forum"]||null,"desktop1-memory":i?.["system-icon-desktop1-memory"]||null,"desktop1-transfer":i?.["system-icon-desktop1-transfer"]||null});return C.useEffect(()=>{(async()=>{const x=await ue.get(te.APPEARANCE,"desktop_color_mode");c(x||"light")})(),(async()=>{const x={},v=["desktop1-chat","desktop1-forum","desktop1-memory","desktop1-transfer"];for(const y of v){const k=await wt(`system-icon-${y}`);k&&(x[y]=k)}u(x)})();const h=x=>{c(x.detail)},g=x=>{const v=x,{iconId:y,url:k}=v.detail;y.startsWith("desktop1-")&&u(w=>({...w,[y]:k}))};return window.addEventListener("colorModeChange",h),window.addEventListener("iconChange",g),()=>{window.removeEventListener("colorModeChange",h),window.removeEventListener("iconChange",g)}},[]),s.jsxs(s.Fragment,{children:[s.jsx(UA,{userData:e,onUserDataChange:t,colorMode:l}),s.jsxs("div",{className:"absolute contents left-[6.76%] top-[52.9%]","data-name":"",children:[s.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%-35.51%)] text-[clamp(10px,3vw,12px)] text-center top-[60.54%] translate-x-[-50%] w-[13.04%] pointer-events-none ${l==="dark"?"text-black":"text-white"}`,children:""}),s.jsx("button",{className:"absolute left-[6.76%] w-[14.98%] aspect-square top-[52.9%] cursor-pointer hover:opacity-80 active:opacity-60 transition-opacity overflow-hidden rounded-[18%]",onClick:n,children:s.jsx("img",{alt:"",className:"block w-full h-full object-cover pointer-events-none",src:d["desktop1-chat"]||EA})})]}),s.jsxs("div",{className:"absolute contents left-[30.43%] top-[52.9%]","data-name":"",children:[s.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%-11.84%)] text-[clamp(10px,3vw,12px)] text-center top-[60.54%] translate-x-[-50%] w-[13.04%] ${l==="dark"?"text-black":"text-white"}`,children:""}),s.jsx("div",{className:"absolute left-[30.43%] w-[14.98%] aspect-square top-[52.9%] overflow-hidden rounded-[18%]",children:s.jsx("img",{alt:"",className:"block w-full h-full object-cover",src:d["desktop1-forum"]||_A})})]}),s.jsxs("div",{className:"absolute contents left-[6.76%] top-[63.59%]","data-name":"",children:[s.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%-35.51%)] text-[clamp(10px,3vw,12px)] text-center top-[71.2%] translate-x-[-50%] w-[13.04%] ${l==="dark"?"text-black":"text-white"}`,children:""}),s.jsx("button",{className:"absolute left-[6.76%] w-[14.98%] aspect-square top-[63.59%] overflow-hidden rounded-[18%] cursor-pointer hover:opacity-80 active:opacity-60 transition-opacity",onClick:a,children:s.jsx("img",{alt:"",className:"block w-full h-full object-cover pointer-events-none",src:d["desktop1-memory"]||NA})})]}),s.jsxs("div",{className:"absolute contents left-[30.43%] top-[63.59%]","data-name":"",children:[s.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%-11.84%)] text-[clamp(10px,3vw,12px)] text-center top-[71.2%] translate-x-[-50%] w-[13.04%] ${l==="dark"?"text-black":"text-white"}`,children:""}),s.jsx("div",{className:"absolute left-[30.43%] w-[14.98%] aspect-square top-[63.59%] overflow-hidden rounded-[18%]",children:s.jsx("img",{alt:"",className:"block w-full h-full object-cover",src:d["desktop1-transfer"]||jA})})]}),s.jsx(HA,{userData:e,colorMode:l})]})}const KA="/assets/2c4e24fb97d83db5e0d40da3356ff7df2f9fbf99-BUAfsKeI.png",GA="/assets/3b015cc5afccb7e9689502b97c0580e29782af83-CWB2UK3g.png",qA="/assets/d66caaf044e33e1487e4b0199ac46e1b563e30e2-C01H7kEO.png",YA="/assets/320f6f27a201a50ba3f60a7311ec793841dca491-CLzR-4Zh.png";function ZA({preloadedImages:e,onHealthClick:t,onScheduleClick:n}){const[a,i]=C.useState(new Date),[l,c]=C.useState(""),[d,u]=C.useState(""),[m,p]=C.useState(!1),[h,g]=C.useState(!1),[x,v]=C.useState(e?.desktop2_timeImage||null),[y,k]=C.useState(e?.desktop2_card1||null),[w,_]=C.useState(e?.desktop2_card2||null),[N,T]=C.useState(e?.desktop2_card3||null),[B,O]=C.useState(e?.desktop2_card4||null),[$,P]=C.useState("light"),[A,H]=C.useState({"desktop2-shop":e?.["system-icon-desktop2-shop"]||null,"desktop2-game":e?.["system-icon-desktop2-game"]||null,"desktop2-schedule":e?.["system-icon-desktop2-schedule"]||null,"desktop2-health":e?.["system-icon-desktop2-health"]||null}),Y=C.useRef(null),E=[C.useRef(null),C.useRef(null),C.useRef(null),C.useRef(null)];C.useEffect(()=>{const W=setInterval(()=>{i(new Date)},1e3);return()=>clearInterval(W)},[]),C.useEffect(()=>{(async()=>{const oe=await ue.get(te.MISC,"desktop2_customText1"),ne=await ue.get(te.MISC,"desktop2_customText2"),ae=await ue.get(te.APPEARANCE,"desktop_color_mode");oe&&c(oe),ne&&u(ne),P(ae||"light");const ve=await wt("desktop2_timeImage");ve&&v(ve);const se=await wt("desktop2_card1");se&&k(se);const xe=await wt("desktop2_card2");xe&&_(xe);const Ie=await wt("desktop2_card3");Ie&&T(Ie);const I=await wt("desktop2_card4");I&&O(I);const me={},he=["desktop2-shop","desktop2-game","desktop2-schedule","desktop2-health"];for(const J of he){const X=await wt(`system-icon-${J}`);X&&(me[J]=X)}H(me)})();const U=oe=>{P(oe.detail)},Q=oe=>{const ne=oe,{iconId:ae,url:ve}=ne.detail;ae.startsWith("desktop2-")&&H(se=>({...se,[ae]:ve}))};return window.addEventListener("colorModeChange",U),window.addEventListener("iconChange",Q),()=>{window.removeEventListener("colorModeChange",U),window.removeEventListener("iconChange",Q)}},[]);const D=W=>W.toLocaleTimeString("zh-CN",{hour12:!1,hour:"2-digit",minute:"2-digit"}),S=()=>{const W=a.getMonth()+1,U=a.getDate();return{month:W,day:U}},z=()=>["","","","","","",""][a.getDay()],L=()=>p(!0),F=()=>g(!0),K=async()=>{p(!1),await ue.set(te.MISC,"desktop2_customText1",l)},G=async()=>{g(!1),await ue.set(te.MISC,"desktop2_customText2",d)},Z=()=>{Y.current?.click()},R=W=>{E[W].current?.click()},V=async W=>{const U=W.target.files?.[0];if(U)try{const Q=await ms("desktop2_timeImage",U);v(Q)}catch(Q){console.error(":",Q)}},ee=async(W,U)=>{const Q=U.target.files?.[0];if(Q)try{const oe=await ms(`desktop2_card${W+1}`,Q);[k,_,T,O][W](oe)}catch(oe){console.error(":",oe)}};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"absolute h-[15%] left-1/2 top-[6.6%] translate-x-[-50%] w-[86%]","data-name":"",children:[s.jsx("div",{className:"absolute inset-0 rounded-[24px] cursor-pointer hover:opacity-80 active:opacity-80 transition-opacity",onClick:Z,children:x?s.jsx("img",{alt:"",className:"absolute inset-0 w-full h-full object-cover rounded-[24px]",src:x}):s.jsx("div",{className:"absolute inset-0 w-full h-full rounded-[24px]",style:{backgroundColor:"#D5EAE3"}})}),s.jsx("p",{className:`absolute bakbak-one-regular leading-[normal] left-1/2 top-1/2 text-[clamp(70px,12vh,120px)] text-center translate-x-[-50%] translate-y-[-50%] w-[87%] pointer-events-none ${$==="dark"?"text-[rgba(0,0,0,0.5)]":"text-[rgba(255,255,255,0.5)]"}`,children:D(a)}),s.jsx("input",{ref:Y,type:"file",accept:"image/*",onChange:V,className:"hidden"})]}),s.jsxs("div",{className:"absolute contents left-[6.76%] top-[26.3%]","data-name":"",children:[s.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%-35.51%)] text-[clamp(10px,3vw,12px)] text-center top-[33.94%] translate-x-[-50%] w-[13.04%] ${$==="dark"?"text-black":"text-white"}`,children:""}),s.jsx("div",{className:"absolute left-[6.76%] w-[14.98%] aspect-square top-[26.3%] overflow-hidden rounded-[18%]",children:s.jsx("img",{alt:"",className:"block w-full h-full object-cover",src:A["desktop2-shop"]||KA})})]}),s.jsxs("div",{className:"absolute contents left-[30.43%] top-[26.3%]","data-name":"",children:[s.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%-11.84%)] text-[clamp(10px,3vw,12px)] text-center top-[33.94%] translate-x-[-50%] w-[13.04%] ${$==="dark"?"text-black":"text-white"}`,children:""}),s.jsx("div",{className:"absolute left-[30.43%] w-[14.98%] aspect-square top-[26.3%] overflow-hidden rounded-[18%]",children:s.jsx("img",{alt:"",className:"block w-full h-full object-cover",src:A["desktop2-game"]||GA})})]}),s.jsxs("div",{className:"absolute contents left-[54.1%] top-[26.3%]","data-name":"",onClick:n,style:{cursor:"pointer"},children:[s.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%+11.84%)] text-[clamp(10px,3vw,12px)] text-center top-[33.94%] translate-x-[-50%] w-[13.04%] ${$==="dark"?"text-black":"text-white"}`,children:""}),s.jsx("div",{className:"absolute left-[54.1%] w-[14.98%] aspect-square top-[26.3%] overflow-hidden rounded-[18%] hover:opacity-80 active:opacity-60 transition-opacity",children:s.jsx("img",{alt:"",className:"block w-full h-full object-cover",src:A["desktop2-schedule"]||qA})})]}),s.jsxs("div",{className:"absolute contents left-[77.78%] top-[26.3%]","data-name":"",onClick:t,style:{cursor:"pointer"},children:[s.jsx("p",{className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[1.85%] leading-[normal] left-[calc(50%+35.51%)] text-[clamp(10px,3vw,12px)] text-center top-[33.94%] translate-x-[-50%] w-[13.04%] ${$==="dark"?"text-black":"text-white"}`,children:""}),s.jsx("div",{className:"absolute left-[77.78%] w-[14.98%] aspect-square top-[26.3%] overflow-hidden rounded-[18%] hover:opacity-80 active:opacity-60 transition-opacity",children:s.jsx("img",{alt:"",className:"block w-full h-full object-cover",src:A["desktop2-health"]||YA})})]}),s.jsxs("div",{className:"absolute h-[38.04%] left-1/2 top-[38.64%] translate-x-[-50%] w-[86%]","data-name":"2",children:[s.jsx("div",{className:`absolute backdrop-blur-[15px] backdrop-filter inset-0 rounded-[24px] shadow-[0px_0px_2px_0px_inset_#ffffff,0px_1px_1px_0px_inset_rgba(255,255,255,0.5)] ${$==="dark"?"bg-[rgba(0,0,0,0.3)]":"bg-[rgba(255,255,255,0.5)]"}`}),s.jsx("div",{className:"absolute h-[62%] left-[7.3%] rounded-[26px] top-[32.86%] w-[19.66%] cursor-pointer hover:opacity-80 active:opacity-80 transition-opacity",onClick:()=>R(0),children:y?s.jsx("img",{alt:"",className:"absolute inset-0 w-full h-full object-cover rounded-[26px]",src:y}):s.jsx("div",{className:"absolute inset-0 w-full h-full rounded-[26px]",style:{backgroundColor:"#D5EAE3"}})}),s.jsx("div",{className:"absolute h-[62%] left-[29.21%] rounded-[26px] top-[33.14%] w-[19.66%] cursor-pointer hover:opacity-80 active:opacity-80 transition-opacity",onClick:()=>R(1),children:w?s.jsx("img",{alt:"",className:"absolute inset-0 w-full h-full object-cover rounded-[26px]",src:w}):s.jsx("div",{className:"absolute inset-0 w-full h-full rounded-[26px]",style:{backgroundColor:"#D5EAE3"}})}),s.jsx("div",{className:"absolute h-[62%] left-[51.12%] rounded-[26px] top-[32.86%] w-[19.66%] cursor-pointer hover:opacity-80 active:opacity-80 transition-opacity",onClick:()=>R(2),children:N?s.jsx("img",{alt:"",className:"absolute inset-0 w-full h-full object-cover rounded-[26px]",src:N}):s.jsx("div",{className:"absolute inset-0 w-full h-full rounded-[26px]",style:{backgroundColor:"#D5EAE3"}})}),s.jsx("div",{className:"absolute h-[62%] left-[73.03%] rounded-[26px] top-[32.86%] w-[19.66%] cursor-pointer hover:opacity-80 active:opacity-80 transition-opacity",onClick:()=>R(3),children:B?s.jsx("img",{alt:"",className:"absolute inset-0 w-full h-full object-cover rounded-[26px]",src:B}):s.jsx("div",{className:"absolute inset-0 w-full h-full rounded-[26px]",style:{backgroundColor:"#D5EAE3"}})}),s.jsxs("p",{className:`absolute bona-nova-regular h-[22.29%] leading-[normal] left-[5.34%] not-italic top-0 w-[46.63%] ${$==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:[s.jsx("span",{className:"text-[clamp(48px,15vw,64px)]",children:S().month}),s.jsx("span",{className:"text-[clamp(36px,11.25vw,48px)]",children:"/"}),s.jsx("span",{className:"text-[clamp(48px,15vw,64px)]",children:S().day})]}),s.jsx("p",{className:"absolute font-['Bona_Nova:Bold','Noto_Sans_JP:Bold',sans-serif] h-[14.29%] leading-[normal] left-[6.18%] text-[clamp(18px,6vw,24px)] top-[21.3%] w-[44.66%] text-white",style:{fontVariationSettings:"'wght' 700",fontFamily:"YShi NewHei T, sans-serif",fontWeight:"bold"},children:z()}),m?s.jsx("input",{type:"text",value:l,onChange:W=>c(W.target.value),onBlur:K,autoFocus:!0,className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[7.43%] leading-[normal] left-[92.42%] text-[clamp(12px,4vw,16px)] text-right top-[12.29%] translate-x-[-100%] w-[40%] bg-transparent border-none outline-none ${$==="dark"?"text-white/70":"text-[#5c5c5c]"}`}):s.jsx("p",{onClick:L,className:`absolute font-['Source_Han_Sans_CN_VF:Regular',sans-serif] font-normal h-[7.43%] leading-[normal] left-[92.42%] text-[clamp(12px,4vw,16px)] text-right top-[12.29%] translate-x-[-100%] w-[40%] cursor-pointer hover:opacity-70 active:opacity-70 transition-opacity ${$==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:l}),h?s.jsx("input",{type:"text",value:d,onChange:W=>u(W.target.value),onBlur:G,autoFocus:!0,className:`absolute h-[7.43%] leading-[normal] left-[92.42%] text-[clamp(12px,4vw,16px)] text-right top-[22.57%] translate-x-[-100%] w-[80%] bg-transparent border-none outline-none ${$==="dark"?"text-white/70":"text-[#5c5c5c]"}`}):s.jsx("p",{onClick:F,className:`absolute h-[7.43%] leading-[normal] left-[92.42%] text-[clamp(12px,4vw,16px)] text-right top-[22.57%] translate-x-[-100%] w-[80%] cursor-pointer hover:opacity-70 active:opacity-70 transition-opacity ${$==="dark"?"text-white/70":"text-[#5c5c5c]"}`,children:d})]}),E.map((W,U)=>s.jsx("input",{ref:W,type:"file",accept:"image/*",onChange:Q=>ee(U,Q),className:"hidden"},U))]})}const QA="/assets/c50f0278eb53f2dd6c95d7fda7f37649c4c89657-CgQEB29n.png",XA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHwAAAB8CAYAAACrHtS+AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAtYSURBVHgB7Z1bU1TZFcf/NNCAoNzEAS9DI14HFVCj5SURE52qTGoSTfKQ5Il8gJSmKu+j38B5SR51KqnUJBWjJsYxjpaIiDqo3ES50yAqdxoQ6KZvs9bhNDb0AWnYp+nus39Vm9Ocbuju8z9r7b3XXnvvGAjA6/Wm0eEUlUIqFipFVNLUIlkaVrXUqOVeTEyMFcskBktEFfkslWNUSiAJBSz8BSxD/KAF9xP6DKQFrySXqJwPVvigBCexz0EKHW6w6OcW++JFCU5CW+hwBdN1syT8sFI5vhhrN33oBSR2KR2qIcUOZyxUqkmrUx964YKCqy78IqQLjwRYoyuqZvMyr0tX//ALSCKReet1TcFV13AFkkimlET/au7JAMHVBhrX2dKNRzY2KsVzG3JagndguhEgiXxqSPBi/xOzGm1qvW2BJFooIk1ntcNmLFx15R3QEXoPpbicbkyMjGN4YJQeu+B2ueGmc/ycmDd6/14eDx09Hnj8HjPbijcjbW3wtZZzyomGR42wTziwVOLi45CUkoiU1GRkf7wO5iQzyBKhE+za8+j/25T39ntCtxY5X2j7uB1dTa/Q3tCJvlcDGOwZwpTdSaJ4SARVIAgSnPFO/1DuIa/v1PRNEBcXh7XZGUsS3DE5hcobVfQd+rFUTCYTTLEmxJvjkJqVim2Fm7H3eCFS167RQ3j+khwdPc+/KIKr1l0KwfDFfWcbR21FA+qpDJDIbM0rjdAbawl42ONQYe82SYbQ29mLlrp2lPzyKHmefD1EP0tafMlW7rPwEgiGxbY2vsKdr+/hbUcP3G4PJNqwF3rb0YsbF2+RtzuJ7fu2iBZ9xsp9jbYzEIiXXHhbvRVX/3Id3a1vpNiLZGRoDDf/egfdLW/EtWfeU8I/TKo7FxYn5w/a3mDFjUvfYmRwDJLgGBkcxcNvqpQ2j2BKeGibLbwEAuE66eHNpxjqHYYkeNhg2p5b8YqsXAd+wYIXQiDNz1rR1dgFydJxUJev7kEDHI4pCKaIBRfmzqccTrx43KR0tyTLo6upGwPdgxCMhQW3QBD2d5PofyP8QxqS8dEJdFIvRzBFQgXv6erHOEXQJMuH4xV8Pd0uoT2ctA9mvARDDwUQXGEQWIkWbP02CuUKrcfFCj4xNqlEkCRiYG/pmhJrQMIE5+6EfcKOFY5aRhVOZUBJrAGJE5yiazywIBGHy+lUBp5EItDCId25YDxur2JIIhFah0vCHym4wZCCGwwpuMGQghsMKbjBkIIbDCm4wZCCGwwpuMGQgmugQ8Zo2CAF18DWP4Ipe3QOBEnB5zA2PKakWNfef06DF9E3GBQHyQw89afq22q01LZj4O0gPspdh01bN+g50S/kSAv3QdV245NmPC2rU34d7hvBg+vfLWuWaDgiBcd0I22434ayyw9mJWG2kqU//v8T4WPSK4kUHDwF2IE7/yzHYM/s2TKcOVp1uxqtde2IFgwvOE90rC6rJ3feotkdGx+ZwO2vy5Vpz9GAoQVngbtbX+P+fx4qDbb56Hvdj/JrlQu+JlIwtODvqL6+f+0hJt8tPFOT6/Ca8no0V7ch0jGs4OzK71+tRPvzzkVF1ni+3N1/VWCo14ZIxrD98JfUBXtR1RRUcGXgzSAqyCNEcnauIQX3uDxoeNyoTMsNBmXudoMVsbGxiFQMKTgL51hiQIWXF+MSqch+uMGQghsMKbjBkIIbDCm4wZCCGwwpuMGQghsMKbjBkIIbDCm4wZCCGwwpuMEIm9Eyzv2OiY2hO3D+HHBl+xLv+5WNonlKkF6srOCkbWJSAjZuWY+NWzcg46M0xJrmdzpuEtrjdivZKlyUHYp0FN23FJlXeV+PcoO51Z2R+JzX7ZneKUmnz8Cb4CSuSoBIVkxw3sppz9ECFP9otzLDI55+jzFFwAwPr2+xSW9IVp0UfU1WRPBVq5Nw4OQ+HPrpfiQIvoN1J8a32VvMIndfDy9CLviajNU48ZsS7Dq0Q9m/SxJaQip4UkqSIvbuQzsjw31HISETnK254OAO7Ni3dUGxZcs7EJGzV0MmeFpWKg58WgxzYrzm8yw0T+uxDYzA6ZB7pjDx5nhk5mQo+5SKIiSC8x26+8gnWJuTqfn8+NgE6ioalNkdnOivWLnBDZ27Y0c/P4j1m3MgkpAInpq5BoVHCpQNVucy3GdTduNrqWmXy2+rmBPNOPyzA9h/Yi9dswjsluXtyqWgSnrAeZ5sf/sf99Bc0xZVc7CXA7dvCg5ux74fF1KsQvyEB937ReaEeOR9khvQZ2W3/fxRI5qfSbH9SUpOwv6fFCEhSZ/4hO6Cp6SnIDs3K+C8Y2IKVbeeKhuwS96TvSkLWRuzoBe6C55Jrjw1Y03Aed7ySm5qNxtu3G6gcQWOoeuF7oInpyYjNi6wLup40RWVy2ItB66/LTs36bpqlO6Cc3QNGoEWXg9NMhsTCZ22Lg16orvg3J80adyxjihd6XA5mOla6enOGd0F5x2HtaKl8QlmSGbjogasW+etPIUJzkaslbzA87C1dtdLSV0FyWxcTjdGh95BTwQKHgOTRuPMPunQ7Gdn566DZDZ8nV63vYGeiHPpZOFxGoKP0mCI1nJXOZZsoYMC0QAHo7j3oufyYEItPM4cOBJmGxwNWOGQSc1crSxcG4lZI3rS09kHW/8o9EJoo211WnLAWPfE6CT6XwcGWDinrfCHBTCbZePNnwkaOWyra9ctRiFU8Myc9IAVjtg9tdS2aY6EbdmTj21786Nqeerlwq30Z2W1ilfUIxlEqODpFEbViqp1NXbjbUdvwPmEJDOOnT6M/N15UnQ/+sgjVvz3Eezj4pfuFtrL55h5cmqSsjqxP+OjE6i+V49sy7oAD7B2fSY+Kz2Byv99B+vLLoxRt8QtQ67KIv05dL0OnNhHvR9xdilUcDNZbNb6tRjqmb08Jbumpmet2H14Jz7evnGWNfNjHiv/rPSkstcIu7LJcbvhM16YRLqe3K3ltG5RxHgFVxRllytQzstTalhp/i4LfvWHn2NVysJfQOYxvkd0TSc8tJpXkEuCavev2190ovxKJd21C69ezF9SFvFiM8IFz7Z8hM0FFs1GGEeSnlILtOxy5bTbloQc4YInJJqVDNX56h2n3Yknt6tx8293qK4flnnoIUZ4Hc7w0Gf51Uo8/uYJXPOM/nCAJmtDJoqP7cHWonykZ6UqPkx2zqbh66NHV1UXwRnuiv37z9fRVt+x4Os4dXl1RgoystKRQpE6vceDIwEWmrur2ykolZGdAZHoJjgzOjSGW3+/i8aqFrL0yN8vJJQo+W35Ofjdn34ttFumawIEzxQ9+dvj+MGnxViTniInEAaBMvWKvCQvgCASXS3ch9vlIWsfxcuqZnQ1vaIBAju10ifhdEirn4/E5ATs3L8NRz4/qAw0iYIF57FLfTPn/ODBAR5QcU65hN+90QMPNccpy6FoTc9a1n8mwblVZYHECFj59qmBxCgoglshMQo1LHgtJEahhutwbrANQ2IE8kzUwefB6zJIop0a0trqa/OXQRLtXOAfSuhLdevcPQtZf1wScvJmLFx16xcgiVYusdj8YCa4La08qsnzCT4Tt5NWHrWc84nNBAxfkaVX06EIkmjASmLn+Z/QisyfpmKDJNJhDY/PPRkguGr+f4Qk0vm9vyv3oTn2Ri+8RIdzkEQqXG9f1XpiwRQUqs+/gBQ+0mCxz8/35Adzjkj0U3S4CNldC3e4zj5LYn+10IsWlWRGolvocBcyUSJc4ZyG01p19lwWlT/D/0ht3p+DJJxgq2YXXrwYsZmg00hVa+e6vRSSlcIXJPtSDZgtmiXnDavCl1A5AxmoCRVlaglaaB9CEsX9xC/EtPgWyPp+OdjUwnWzVT1eW6rI/nwP7DSvuDGTUckAAAAASUVORK5CYII=",JA="/assets/d12fb0f5a7c98f7ca307964198d2d0075ea990ff-CuWkxAA1.png";function e8({onSettingsClick:e,onWorldBookClick:t,onCharacterClick:n}){const[a,i]=C.useState("light"),[l,c]=C.useState({"bottom-organization":null,"bottom-worldbook":null,"bottom-settings":null});return C.useEffect(()=>{(async()=>{const h=await ue.get(te.APPEARANCE,"desktop_color_mode");i(h||"light")})(),(async()=>{const h={},g=["bottom-organization","bottom-worldbook","bottom-settings"];for(const x of g){const v=await wt(`system-icon-${x}`);v&&(h[x]=v)}c(h)})();const m=h=>{i(h.detail)},p=h=>{const g=h,{iconId:x,url:v}=g.detail;x.startsWith("bottom-")&&c(y=>({...y,[x]:v}))};return window.addEventListener("colorModeChange",m),window.addEventListener("iconChange",p),()=>{window.removeEventListener("colorModeChange",m),window.removeEventListener("iconChange",p)}},[]),s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"absolute left-[13%] w-[14.98%] aspect-square top-[89%] cursor-pointer hover:opacity-80 active:opacity-60 transition-opacity overflow-hidden rounded-[18%]",onClick:n,"data-name":"",children:s.jsx("img",{alt:"",className:"block w-full h-full object-cover pointer-events-none",src:l["bottom-organization"]||JA})}),s.jsx("button",{className:"absolute left-[42.51%] w-[14.98%] aspect-square top-[89%] cursor-pointer hover:opacity-80 active:opacity-60 transition-opacity overflow-hidden rounded-[18%]",onClick:t,"data-name":"",children:s.jsx("img",{alt:"",className:"block w-full h-full object-cover pointer-events-none",src:l["bottom-worldbook"]||XA})}),s.jsx("button",{className:"absolute left-[72.02%] w-[14.98%] aspect-square top-[89%] cursor-pointer hover:opacity-80 active:opacity-60 transition-opacity overflow-hidden rounded-[18%]",onClick:e,"data-name":"",children:s.jsx("img",{alt:"",className:"block w-full h-full object-cover pointer-events-none",src:l["bottom-settings"]||QA})})]})}function t8({currentPage:e}){const[t,n]=C.useState("light");C.useEffect(()=>{(async()=>{const c=await ue.get(te.APPEARANCE,"desktop_color_mode")||"light";n(c)})();const l=c=>{n(c.detail)};return window.addEventListener("colorModeChange",l),()=>{window.removeEventListener("colorModeChange",l)}},[]);const a=t==="dark";return s.jsxs("div",{className:"absolute h-[16px] left-1/2 top-[84%] translate-x-[-50%] w-[44px]","data-name":"",children:[s.jsx("div",{className:"absolute inset-0 rounded-[8px]",style:{backgroundColor:a?"rgba(0, 0, 0, 0.3)":"rgba(255, 255, 255, 0.3)"}}),s.jsx("div",{className:"absolute left-[10.5px] size-[7px] top-[4.5px]",children:s.jsx("svg",{className:"block size-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 8 8",children:s.jsx("circle",{cx:"4",cy:"4",fill:a?"black":"white",fillOpacity:e===0?"0.7":"0.3",r:"4"})})}),s.jsx("div",{className:"absolute left-[26.5px] size-[7px] top-[4.5px]",children:s.jsx("svg",{className:"block size-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 8 8",children:s.jsx("circle",{cx:"4",cy:"4",fill:a?"black":"white",fillOpacity:e===1?"0.7":"0.3",r:"4"})})})]})}function n8({onNavigate:e,onClose:t}){const[n,a]=C.useState(new Date),[i,l]=C.useState(100),[c,d]=C.useState(!1);C.useEffect(()=>{const m=setInterval(()=>a(new Date),1e3);return()=>clearInterval(m)},[]),C.useEffect(()=>{(async()=>{try{const p=navigator;if(p.getBattery){const h=await p.getBattery(),g=()=>{l(Math.round(h.level*100)),d(h.charging)};return g(),h.addEventListener("levelchange",g),h.addEventListener("chargingchange",g),()=>{h.removeEventListener("levelchange",g),h.removeEventListener("chargingchange",g)}}}catch{console.log("Battery Status API not supported")}})()},[]);const u=[{id:"beautify",label:"",sub:"INTERFACE MOD",desc:"    ",icon:V6},{id:"api",label:"",sub:"NEURAL LINK",desc:"AI   ",icon:mE},{id:"data",label:"",sub:"DATA ARCHIVE",desc:"    ",icon:Yy},{id:"disclaimer",label:"",sub:"SYSTEM INFO",desc:"    ",icon:x6}];return s.jsxs("div",{className:"w-full h-full bg-[#F0F2F5] overflow-hidden flex flex-col font-['Source_Han_Sans_CN_VF',sans-serif] text-slate-800",children:[s.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.05]",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),s.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border-b border-slate-300 px-6 py-2 flex justify-between items-center text-[10px] font-bold tracking-widest text-slate-500 z-20 sticky top-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(GE,{className:"w-3 h-3",strokeWidth:2.5}),s.jsx("span",{children:""})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{children:[i,"%"]}),s.jsxs("div",{className:"relative",children:[s.jsx(b_,{className:`w-4 h-4 ${c?"text-green-600":"text-slate-500"}`,strokeWidth:2.5}),c&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx(ZE,{className:"w-2 h-2 text-green-600 fill-current"})})]})]})]}),s.jsxs("div",{className:"px-6 pt-6 pb-4 flex items-center gap-4 z-20",children:[s.jsx("button",{onClick:t,className:"w-10 h-10 bg-white border border-slate-300 flex items-center justify-center text-slate-700 active:bg-slate-800 active:text-white active:border-slate-800 hover:bg-slate-800 hover:text-white hover:border-slate-800 transition-colors",children:s.jsx(On,{className:"w-6 h-6",strokeWidth:2})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-xl font-black text-slate-800 tracking-tighter flex items-center gap-2",children:[" ",s.jsx("span",{className:"text-[10px] px-1.5 py-0.5 border border-slate-800 text-slate-800 font-mono font-medium rounded-sm",children:"CONFIG"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-slate-500 tracking-wider mt-1",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse shadow-[0_0_8px_rgba(34,197,94,0.6)]"}),s.jsxs("span",{children:["  ",n.toLocaleTimeString("zh-CN",{hour12:!1})]})]})]})]}),s.jsxs("div",{className:"mx-6 h-[1px] bg-slate-300 mb-6 flex justify-between items-center overflow-hidden",children:[s.jsx("div",{className:"w-1/3 h-full bg-slate-800"}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("div",{className:"w-1 h-1 bg-slate-300 rounded-full"}),s.jsx("div",{className:"w-1 h-1 bg-slate-300 rounded-full"}),s.jsx("div",{className:"w-1 h-1 bg-slate-300 rounded-full"})]})]}),s.jsxs("div",{className:"flex-1 px-6 pb-6 overflow-y-auto",children:[s.jsx("div",{className:"space-y-3",children:u.map((m,p)=>s.jsxs("button",{onClick:()=>e(m.id),className:"w-full bg-white border border-slate-300 p-0 flex items-stretch justify-between group active:border-slate-800 hover:border-slate-800 transition-colors relative overflow-hidden",children:[s.jsxs("div",{className:"absolute right-0 top-0 text-[60px] font-black text-slate-100 leading-none -translate-y-2 translate-x-4 pointer-events-none opacity-50 group-active:opacity-20 group-hover:opacity-20 transition-opacity",children:["0",p+1]}),s.jsxs("div",{className:"flex items-center gap-5 p-5 z-10",children:[s.jsx("div",{className:"w-12 h-12 bg-slate-100 border border-slate-200 flex items-center justify-center text-slate-600 group-active:bg-slate-800 group-active:text-white group-active:border-slate-800 group-hover:bg-slate-800 group-hover:text-white group-hover:border-slate-800 transition-colors duration-200",children:s.jsx(m.icon,{className:"w-6 h-6",strokeWidth:1.5})}),s.jsxs("div",{className:"text-left",children:[s.jsxs("div",{className:"flex items-baseline gap-2",children:[s.jsx("h3",{className:"text-base font-bold text-slate-800 group-active:text-blue-600 group-hover:text-blue-600 transition-colors",children:m.label}),s.jsx("span",{className:"text-[9px] font-bold text-slate-400 tracking-wider font-mono uppercase",children:m.sub})]}),s.jsx("p",{className:"text-xs text-slate-400 mt-1 font-medium tracking-wide",children:m.desc})]})]}),s.jsx("div",{className:"w-10 border-l border-slate-100 flex items-center justify-center bg-slate-50 group-active:bg-slate-100 group-hover:bg-slate-100 transition-colors",children:s.jsx(Ys,{className:"w-5 h-5 text-slate-400 group-active:text-slate-800 group-hover:text-slate-800 transition-colors"})})]},m.id))}),s.jsxs("div",{className:"mt-10 border-t border-slate-300 pt-6",children:[s.jsxs("div",{className:"flex justify-between items-end opacity-60",children:[s.jsxs("div",{className:"text-[10px] font-bold tracking-widest space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ep,{className:"w-3 h-3"})," ",s.jsx("span",{children:": "})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Gf,{className:"w-3 h-3"})," ",s.jsx("span",{children:": "})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Yh,{className:"w-3 h-3"})," ",s.jsx("span",{children:": 12ms"})]})]}),s.jsx("div",{className:"text-right",children:s.jsx("div",{className:"w-12 h-12 border-2 border-slate-800 rounded-full flex items-center justify-center opacity-20",children:s.jsx("span",{className:"text-[10px] font-black",children:"OS"})})})]}),s.jsxs("div",{className:"mt-6 text-center",children:[s.jsx("div",{className:"inline-flex items-center justify-center px-3 py-1 border border-slate-800 bg-slate-800 text-white text-[10px] font-bold tracking-[0.2em] uppercase",children:" OS"}),s.jsx("p",{className:"text-[9px] text-slate-400 mt-2 font-mono tracking-widest",children:"TOUKEN RANBU ONLINE // CHIFU SYSTEM"})]})]})]})]})}function Wc({title:e,onBack:t,children:n,className:a=""}){return s.jsxs("div",{className:"w-full h-full bg-[#F0F2F5] overflow-hidden flex flex-col font-['Source_Han_Sans_CN_VF',sans-serif] text-slate-800",children:[s.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.05]",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),s.jsx("div",{className:"bg-white/90 backdrop-blur-sm border-b border-slate-300 sticky top-0 z-10 flex-shrink-0",children:s.jsxs("div",{className:"max-w-md mx-auto px-4 h-[60px] flex items-center justify-between relative",children:[s.jsxs("button",{onClick:t,className:"absolute left-4 p-2 -ml-2 flex items-center gap-1 text-slate-600 active:text-black active:bg-slate-100 hover:text-black hover:bg-slate-100 rounded-none border border-transparent active:border-slate-300 hover:border-slate-300 transition-colors",children:[s.jsx(On,{className:"w-5 h-5",strokeWidth:2}),s.jsx("span",{className:"text-xs font-bold tracking-wider",children:""})]}),s.jsxs("div",{className:"w-full text-center flex flex-col items-center justify-center pointer-events-none",children:[s.jsx("h1",{className:"text-sm font-bold tracking-[0.1em] text-slate-800 uppercase",children:e}),s.jsx("div",{className:"h-[2px] w-8 bg-slate-800 mt-1"})]}),s.jsx("div",{className:"absolute right-4 opacity-30",children:s.jsx(sv,{className:"w-5 h-5"})})]})}),s.jsx("div",{className:`flex-1 overflow-y-auto overscroll-contain ${a}`,children:s.jsx("div",{className:"max-w-md mx-auto min-h-full pb-10 pt-6 px-5",children:n})})]})}function s8({onBack:e}){const[t,n]=C.useState(""),[a,i]=C.useState(""),[l,c]=C.useState(""),[d,u]=C.useState(""),[m,p]=C.useState(.7),[h,g]=C.useState(!1),[x,v]=C.useState(!1),[y,k]=C.useState(!1),[w,_]=C.useState(null),[N,T]=C.useState(null),[B,O]=C.useState([]),[$,P]=C.useState(!1),[A,H]=C.useState(null),[Y,E]=C.useState([]),[D,S]=C.useState(0),[z,L]=C.useState(!1);C.useEffect(()=>{(async()=>{try{const U=await ue.get(te.API_SETTINGS,"api_configs");if(U){const Q=JSON.parse(U);E(Q);const oe=parseInt(await ue.get(te.API_SETTINGS,"current_config_index")||"0");S(oe),Q[oe]&&F(Q[oe])}}catch(U){console.error("Failed to load API settings:",U)}})()},[]);const F=W=>{n(W.name),c(W.baseUrl),i(W.apiKey),u(W.modelName),p(W.temperature)},K=()=>{const W={name:t||"",baseUrl:l,apiKey:a,modelName:d,temperature:m};let U=[...Y];const Q=U.findIndex(oe=>oe.name===W.name);Q>=0?(U[Q]=W,S(Q)):(U.push(W),S(U.length-1)),E(U),ue.set(te.API_SETTINGS,"api_configs",JSON.stringify(U)),ue.set(te.API_SETTINGS,"current_config_index",D.toString()),g(!0),setTimeout(()=>g(!1),2e3),_(null),T(null)},G=async W=>{S(W),await ue.set(te.API_SETTINGS,"current_config_index",W.toString()),F(Y[W]),L(!1)},Z=async()=>{if(!a||!l){T({success:!1,message:" Key/URL"});return}v(!0);try{const W=await fetch(`${l}/models`,{headers:{Authorization:`Bearer ${a}`}});if(W.ok){const U=await W.json();if(U.data&&U.data.length>0){const Q=U.data.map(oe=>oe.id);O(Q),!d&&Q.length>0&&u(Q[0]),T({success:!0,message:` ${Q.length} `}),setTimeout(()=>T(null),2e3)}else T({success:!1,message:""})}else T({success:!1,message:""})}catch{T({success:!1,message:""})}finally{v(!1)}},R=W=>{const U=Y.filter((Q,oe)=>oe!==W);if(E(U),ue.set(te.API_SETTINGS,"api_configs",JSON.stringify(U)),W===D)S(0),ue.set(te.API_SETTINGS,"current_config_index","0"),U.length>0?F(U[0]):(n(""),c(""),i(""),u(""),p(.7),O([]));else if(W<D){const Q=D-1;S(Q),ue.set(te.API_SETTINGS,"current_config_index",Q.toString())}H(null)},V=async()=>{if(!a||!l){_({success:!1,message:""});return}k(!0),_(null);try{const W=await fetch(`${l}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({model:d||"gpt-3.5-turbo",messages:[{role:"user",content:"test"}],temperature:m,max_tokens:10})});if(W.ok)_({success:!0,message:""}),setTimeout(()=>_(null),2e3);else{const U=await W.json().catch(()=>({})),Q=U.error?.message||U.message||`HTTP ${W.status}`;_({success:!1,message:`: ${Q}`}),setTimeout(()=>_(null),3e3)}}catch{_({success:!1,message:""}),setTimeout(()=>_(null),3e3)}finally{k(!1)}},ee=()=>{const W=` ${Y.length+1}`;n(W),c(""),i(""),u(""),p(.7),S(-1),L(!1)};return s.jsx(Wc,{title:"",onBack:e,children:s.jsxs("div",{className:"space-y-6 text-slate-800",children:[s.jsx(Be,{children:(h||w||N)&&s.jsx(Se.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"fixed top-24 left-0 right-0 flex justify-center z-[60] pointer-events-none px-4",children:s.jsxs("div",{className:`
                   px-5 py-3 border-2 shadow-xl flex items-center gap-3 backdrop-blur-md text-sm font-bold tracking-wide
                   ${w?.success===!1||N?.success===!1?"bg-red-50 border-red-500 text-red-600":"bg-white border-slate-800 text-slate-800"}
                 `,children:[w?.success===!1||N?.success===!1?s.jsx(ft,{className:"w-4 h-4",strokeWidth:3}):s.jsx(kt,{className:"w-4 h-4",strokeWidth:3}),s.jsxs("span",{children:[h&&"",w&&w.message,N&&N.message]})]})})}),s.jsxs("div",{className:"relative z-30",children:[s.jsxs("div",{onClick:()=>L(!z),className:"w-full bg-white p-4 border-2 border-slate-200 border-slate-200 active:border-slate-800 hover:border-slate-800 flex items-center justify-between cursor-pointer transition-all",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 bg-slate-100 flex items-center justify-center text-slate-600",children:s.jsx(Hc,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider",children:""}),s.jsx("div",{className:"text-base font-bold text-slate-800 font-mono",children:D===-1?"NEW_PROFILE (UNSAVED)":Y[D]?.name||"UNNAMED"})]})]}),s.jsx(jo,{className:`w-5 h-5 text-slate-400 transition-transform ${z?"rotate-180":""}`})]}),s.jsx(Be,{children:z&&s.jsxs(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute top-full left-0 right-0 mt-2 bg-white border-2 border-slate-800 shadow-[8px_8px_0px_rgba(0,0,0,0.1)] z-50 max-h-[300px] overflow-y-auto",children:[Y.map((W,U)=>s.jsxs("div",{className:`p-3 flex justify-between items-center cursor-pointer transition-colors border-b border-slate-100 ${U===D?"bg-slate-50":"active:bg-slate-50 hover:bg-slate-50"}`,onClick:()=>G(U),children:[s.jsxs("div",{children:[s.jsx("div",{className:`text-sm font-bold font-mono ${U===D?"text-blue-600":"text-slate-700"}`,children:W.name}),s.jsx("div",{className:"text-[10px] text-slate-400 truncate max-w-[200px] font-mono",children:W.baseUrl})]}),s.jsx("button",{onClick:Q=>{Q.stopPropagation(),H(U)},className:"p-2 text-slate-300 active:text-red-500 active:bg-red-50 hover:text-red-500 hover:bg-red-50 rounded-sm transition-colors",children:s.jsx(zn,{className:"w-4 h-4"})})]},U)),s.jsxs("button",{onClick:ee,className:"w-full p-3 text-center text-sm font-bold text-slate-600 active:bg-slate-100 hover:bg-slate-100 transition-colors flex items-center justify-center gap-2 uppercase tracking-wider",children:[s.jsx(Gs,{className:"w-4 h-4"})," "]})]})})]}),s.jsxs("div",{className:"bg-white p-6 border border-slate-200 space-y-6 relative",children:[s.jsx("div",{className:"absolute top-0 left-0 w-3 h-3 border-l-2 border-t-2 border-slate-300"}),s.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 border-r-2 border-b-2 border-slate-300"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:""}),s.jsx("input",{type:"text",value:t,onChange:W=>n(W.target.value),className:"w-full bg-slate-50 border border-slate-200 px-4 py-3 text-slate-800 font-bold focus:border-slate-800 focus:outline-none transition-all font-mono text-sm rounded-none",placeholder:"PROFILE_NAME"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1 flex items-center gap-2",children:[s.jsx(ep,{className:"w-3 h-3"}),"  (Base URL)"]}),s.jsx("input",{type:"text",value:l,onChange:W=>c(W.target.value),className:"w-full bg-slate-50 border border-slate-200 px-4 py-3 text-slate-800 font-medium focus:border-slate-800 focus:outline-none transition-all placeholder:text-slate-300 font-mono text-xs rounded-none",placeholder:"https://api.example.com/v1"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1 flex items-center gap-2",children:[s.jsx(y6,{className:"w-3 h-3"}),"  (API Key)"]}),s.jsx("input",{type:"password",value:a,onChange:W=>i(W.target.value),className:"w-full bg-slate-50 border border-slate-200 px-4 py-3 text-slate-800 font-medium focus:border-slate-800 focus:outline-none transition-all placeholder:text-slate-300 font-mono text-xs rounded-none",placeholder:"sk-..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center px-1",children:[s.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(N_,{className:"w-3 h-3"})," "]}),s.jsxs("button",{onClick:Z,disabled:x,className:"text-[9px] font-bold border border-blue-200 text-blue-600 px-2 py-0.5 active:bg-blue-50 hover:bg-blue-50 transition-all flex items-center gap-1 disabled:opacity-50 uppercase",children:[s.jsx(kx,{className:`w-3 h-3 ${x?"animate-spin":""}`}),x?"SCANNING...":"AUTO SCAN"]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:d,onChange:W=>u(W.target.value),className:"w-full bg-slate-50 border border-slate-200 px-4 py-3 text-slate-800 font-medium focus:border-slate-800 focus:outline-none transition-all placeholder:text-slate-300 font-mono text-xs rounded-none",placeholder:"gpt-3.5-turbo"}),B.length>0&&s.jsx("button",{onClick:()=>P(!$),className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 text-slate-400 active:bg-slate-200 hover:bg-slate-200 rounded-none transition-colors",children:s.jsx(jo,{className:"w-4 h-4"})}),s.jsx(Be,{children:$&&B.length>0&&s.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute top-full left-0 right-0 mt-2 bg-white border border-slate-800 shadow-lg z-40 max-h-[200px] overflow-y-auto",children:B.map((W,U)=>s.jsx("div",{onClick:()=>{u(W),P(!1)},className:"px-4 py-2 text-xs text-slate-700 active:bg-slate-100 hover:bg-slate-100 cursor-pointer border-b border-slate-100 font-mono last:border-0",children:W},U))})})]})]}),s.jsxs("div",{className:"space-y-4 pt-2",children:[s.jsxs("div",{className:"flex justify-between items-center px-1",children:[s.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(Yh,{className:"w-3 h-3"}),"  (Temperature)"]}),s.jsx("span",{className:"bg-slate-100 border border-slate-200 text-slate-600 px-2 py-0.5 text-xs font-bold font-mono",children:m.toFixed(1)})]}),s.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:m,onChange:W=>p(parseFloat(W.target.value)),className:"w-full h-1 bg-slate-200 rounded-none appearance-none cursor-pointer accent-slate-800 hover:accent-blue-600 transition-all"}),s.jsxs("div",{className:"flex justify-between text-[9px] text-slate-400 font-bold uppercase tracking-widest px-1",children:[s.jsx("span",{children:"PRECISE"}),s.jsx("span",{children:"CREATIVE"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 pt-2",children:[s.jsxs("button",{onClick:V,disabled:y,className:"col-span-1 py-3.5 border border-slate-300 bg-white text-slate-600 font-bold text-xs active:border-slate-800 active:text-slate-800 hover:border-slate-800 hover:text-slate-800 transition-all flex items-center justify-center gap-2 disabled:opacity-50 uppercase tracking-wider",children:[y?s.jsx(kx,{className:"w-3 h-3 animate-spin"}):s.jsx(cE,{className:"w-3 h-3"}),"TEST"]}),s.jsxs("button",{onClick:K,className:"col-span-2 py-3.5 bg-slate-800 text-white font-bold text-xs active:bg-slate-900 hover:bg-slate-900 transition-all flex items-center justify-center gap-2 shadow-lg shadow-slate-200 uppercase tracking-wider",children:[s.jsx(_i,{className:"w-3 h-3"}),""]})]}),s.jsx(Be,{children:A!==null&&s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[70] px-6",children:s.jsxs(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"bg-white border-2 border-slate-800 p-6 w-full max-w-sm shadow-[8px_8px_0px_rgba(0,0,0,0.2)]",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("h3",{className:"text-lg font-black text-slate-800 mb-2 uppercase tracking-tight",children:""}),s.jsxs("p",{className:"text-xs font-mono text-slate-500",children:['PROFILE: "',Y[A]?.name,'"']}),s.jsx("p",{className:"text-sm text-slate-500 mt-2",children:""})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>H(null),className:"flex-1 py-3 border border-slate-300 text-slate-600 font-bold text-xs active:bg-slate-50 hover:bg-slate-50 transition-colors uppercase tracking-wider",children:""}),s.jsx("button",{onClick:()=>R(A),className:"flex-1 py-3 bg-red-600 text-white font-bold text-xs active:bg-red-700 hover:bg-red-700 transition-colors shadow-lg shadow-red-200 uppercase tracking-wider",children:""})]})]})})})]})})}function r8(e,t){return t.forEach((function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach((function(a){if(a!=="default"&&!(a in e)){var i=Object.getOwnPropertyDescriptor(n,a);Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:function(){return n[a]}})}}))})),Object.freeze(e)}function lv(e,t){return new Promise((function(n,a){let i;return a8(e).then((function(l){try{return i=l,n(new Blob([t.slice(0,2),i,t.slice(2)],{type:"image/jpeg"}))}catch(c){return a(c)}}),a)}))}const a8=e=>new Promise(((t,n)=>{const a=new FileReader;a.addEventListener("load",(({target:{result:i}})=>{const l=new DataView(i);let c=0;if(l.getUint16(c)!==65496)return n("not a valid JPEG");for(c+=2;;){const d=l.getUint16(c);if(d===65498)break;const u=l.getUint16(c+2);if(d===65505&&l.getUint32(c+4)===1165519206){const m=c+10;let p;switch(l.getUint16(m)){case 18761:p=!0;break;case 19789:p=!1;break;default:return n("TIFF header contains invalid endian")}if(l.getUint16(m+2,p)!==42)return n("TIFF header contains invalid version");const h=l.getUint32(m+4,p),g=m+h+2+12*l.getUint16(m+h,p);for(let x=m+h+2;x<g;x+=12)if(l.getUint16(x,p)==274){if(l.getUint16(x+2,p)!==3)return n("Orientation data type is invalid");if(l.getUint32(x+4,p)!==1)return n("Orientation data count is invalid");l.setUint16(x+8,1,p);break}return t(i.slice(c,c+2+u))}c+=2+u}return t(new Blob)})),a.readAsArrayBuffer(e)}));var jc={},i8={get exports(){return jc},set exports(e){jc=e}};(function(e){var t,n,a={};i8.exports=a,a.parse=function(i,l){for(var c=a.bin.readUshort,d=a.bin.readUint,u=0,m={},p=new Uint8Array(i),h=p.length-4;d(p,h)!=101010256;)h--;u=h,u+=4;var g=c(p,u+=4);c(p,u+=2);var x=d(p,u+=2),v=d(p,u+=4);u+=4,u=v;for(var y=0;y<g;y++){d(p,u),u+=4,u+=4,u+=4,d(p,u+=4),x=d(p,u+=4);var k=d(p,u+=4),w=c(p,u+=4),_=c(p,u+2),N=c(p,u+4);u+=6;var T=d(p,u+=8);u+=4,u+=w+_+N,a._readLocal(p,T,m,x,k,l)}return m},a._readLocal=function(i,l,c,d,u,m){var p=a.bin.readUshort,h=a.bin.readUint;h(i,l),p(i,l+=4),p(i,l+=2);var g=p(i,l+=2);h(i,l+=2),h(i,l+=4),l+=4;var x=p(i,l+=8),v=p(i,l+=2);l+=2;var y=a.bin.readUTF8(i,l,x);if(l+=x,l+=v,m)c[y]={size:u,csize:d};else{var k=new Uint8Array(i.buffer,l);if(g==0)c[y]=new Uint8Array(k.buffer.slice(l,l+d));else{if(g!=8)throw"unknown compression method: "+g;var w=new Uint8Array(u);a.inflateRaw(k,w),c[y]=w}}},a.inflateRaw=function(i,l){return a.F.inflate(i,l)},a.inflate=function(i,l){return i[0],i[1],a.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),l)},a.deflate=function(i,l){l==null&&(l={level:6});var c=0,d=new Uint8Array(50+Math.floor(1.1*i.length));d[c]=120,d[c+1]=156,c+=2,c=a.F.deflateRaw(i,d,c,l.level);var u=a.adler(i,0,i.length);return d[c+0]=u>>>24&255,d[c+1]=u>>>16&255,d[c+2]=u>>>8&255,d[c+3]=u>>>0&255,new Uint8Array(d.buffer,0,c+4)},a.deflateRaw=function(i,l){l==null&&(l={level:6});var c=new Uint8Array(50+Math.floor(1.1*i.length)),d=a.F.deflateRaw(i,c,d,l.level);return new Uint8Array(c.buffer,0,d)},a.encode=function(i,l){l==null&&(l=!1);var c=0,d=a.bin.writeUint,u=a.bin.writeUshort,m={};for(var p in i){var h=!a._noNeed(p)&&!l,g=i[p],x=a.crc.crc(g,0,g.length);m[p]={cpr:h,usize:g.length,crc:x,file:h?a.deflateRaw(g):g}}for(var p in m)c+=m[p].file.length+30+46+2*a.bin.sizeUTF8(p);c+=22;var v=new Uint8Array(c),y=0,k=[];for(var p in m){var w=m[p];k.push(y),y=a._writeHeader(v,y,p,w,0)}var _=0,N=y;for(var p in m)w=m[p],k.push(y),y=a._writeHeader(v,y,p,w,1,k[_++]);var T=y-N;return d(v,y,101010256),y+=4,u(v,y+=4,_),u(v,y+=2,_),d(v,y+=2,T),d(v,y+=4,N),y+=4,y+=2,v.buffer},a._noNeed=function(i){var l=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(l)!=-1},a._writeHeader=function(i,l,c,d,u,m){var p=a.bin.writeUint,h=a.bin.writeUshort,g=d.file;return p(i,l,u==0?67324752:33639248),l+=4,u==1&&(l+=2),h(i,l,20),h(i,l+=2,0),h(i,l+=2,d.cpr?8:0),p(i,l+=2,0),p(i,l+=4,d.crc),p(i,l+=4,g.length),p(i,l+=4,d.usize),h(i,l+=4,a.bin.sizeUTF8(c)),h(i,l+=2,0),l+=2,u==1&&(l+=2,l+=2,p(i,l+=6,m),l+=4),l+=a.bin.writeUTF8(i,l,c),u==0&&(i.set(g,l),l+=g.length),l},a.crc={table:(function(){for(var i=new Uint32Array(256),l=0;l<256;l++){for(var c=l,d=0;d<8;d++)1&c?c=3988292384^c>>>1:c>>>=1;i[l]=c}return i})(),update:function(i,l,c,d){for(var u=0;u<d;u++)i=a.crc.table[255&(i^l[c+u])]^i>>>8;return i},crc:function(i,l,c){return 4294967295^a.crc.update(4294967295,i,l,c)}},a.adler=function(i,l,c){for(var d=1,u=0,m=l,p=l+c;m<p;){for(var h=Math.min(m+5552,p);m<h;)u+=d+=i[m++];d%=65521,u%=65521}return u<<16|d},a.bin={readUshort:function(i,l){return i[l]|i[l+1]<<8},writeUshort:function(i,l,c){i[l]=255&c,i[l+1]=c>>8&255},readUint:function(i,l){return 16777216*i[l+3]+(i[l+2]<<16|i[l+1]<<8|i[l])},writeUint:function(i,l,c){i[l]=255&c,i[l+1]=c>>8&255,i[l+2]=c>>16&255,i[l+3]=c>>24&255},readASCII:function(i,l,c){for(var d="",u=0;u<c;u++)d+=String.fromCharCode(i[l+u]);return d},writeASCII:function(i,l,c){for(var d=0;d<c.length;d++)i[l+d]=c.charCodeAt(d)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,l,c){for(var d,u="",m=0;m<c;m++)u+="%"+a.bin.pad(i[l+m].toString(16));try{d=decodeURIComponent(u)}catch{return a.bin.readASCII(i,l,c)}return d},writeUTF8:function(i,l,c){for(var d=c.length,u=0,m=0;m<d;m++){var p=c.charCodeAt(m);if((4294967168&p)==0)i[l+u]=p,u++;else if((4294965248&p)==0)i[l+u]=192|p>>6,i[l+u+1]=128|p>>0&63,u+=2;else if((4294901760&p)==0)i[l+u]=224|p>>12,i[l+u+1]=128|p>>6&63,i[l+u+2]=128|p>>0&63,u+=3;else{if((4292870144&p)!=0)throw"e";i[l+u]=240|p>>18,i[l+u+1]=128|p>>12&63,i[l+u+2]=128|p>>6&63,i[l+u+3]=128|p>>0&63,u+=4}}return u},sizeUTF8:function(i){for(var l=i.length,c=0,d=0;d<l;d++){var u=i.charCodeAt(d);if((4294967168&u)==0)c++;else if((4294965248&u)==0)c+=2;else if((4294901760&u)==0)c+=3;else{if((4292870144&u)!=0)throw"e";c+=4}}return c}},a.F={},a.F.deflateRaw=function(i,l,c,d){var u=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][d],m=a.F.U,p=a.F._goodIndex;a.F._hash;var h=a.F._putsE,g=0,x=c<<3,v=0,y=i.length;if(d==0){for(;g<y;)h(l,x,g+(Y=Math.min(65535,y-g))==y?1:0),x=a.F._copyExact(i,g,Y,l,x+8),g+=Y;return x>>>3}var k=m.lits,w=m.strt,_=m.prev,N=0,T=0,B=0,O=0,$=0,P=0;for(y>2&&(w[P=a.F._hash(i,0)]=0),g=0;g<y;g++){if($=P,g+1<y-2){P=a.F._hash(i,g+1);var A=g+1&32767;_[A]=w[P],w[P]=A}if(v<=g){(N>14e3||T>26697)&&y-g>100&&(v<g&&(k[N]=g-v,N+=2,v=g),x=a.F._writeBlock(g==y-1||v==y?1:0,k,N,O,i,B,g-B,l,x),N=T=O=0,B=g);var H=0;g<y-2&&(H=a.F._bestMatch(i,g,_,$,Math.min(u[2],y-g),u[3]));var Y=H>>>16,E=65535&H;if(H!=0){E=65535&H;var D=p(Y=H>>>16,m.of0);m.lhst[257+D]++;var S=p(E,m.df0);m.dhst[S]++,O+=m.exb[D]+m.dxb[S],k[N]=Y<<23|g-v,k[N+1]=E<<16|D<<8|S,N+=2,v=g+Y}else m.lhst[i[g]]++;T++}}for(B==g&&i.length!=0||(v<g&&(k[N]=g-v,N+=2,v=g),x=a.F._writeBlock(1,k,N,O,i,B,g-B,l,x),N=0,T=0,N=T=O=0,B=g);(7&x)!=0;)x++;return x>>>3},a.F._bestMatch=function(i,l,c,d,u,m){var p=32767&l,h=c[p],g=p-h+32768&32767;if(h==p||d!=a.F._hash(i,l-g))return 0;for(var x=0,v=0,y=Math.min(32767,l);g<=y&&--m!=0&&h!=p;){if(x==0||i[l+x]==i[l+x-g]){var k=a.F._howLong(i,l,g);if(k>x){if(v=g,(x=k)>=u)break;g+2<k&&(k=g+2);for(var w=0,_=0;_<k-2;_++){var N=l-g+_+32768&32767,T=N-c[N]+32768&32767;T>w&&(w=T,h=N)}}}g+=(p=h)-(h=c[p])+32768&32767}return x<<16|v},a.F._howLong=function(i,l,c){if(i[l]!=i[l-c]||i[l+1]!=i[l+1-c]||i[l+2]!=i[l+2-c])return 0;var d=l,u=Math.min(i.length,l+258);for(l+=3;l<u&&i[l]==i[l-c];)l++;return l-d},a.F._hash=function(i,l){return(i[l]<<8|i[l+1])+(i[l+2]<<4)&65535},a.saved=0,a.F._writeBlock=function(i,l,c,d,u,m,p,h,g){var x,v,y,k,w,_,N,T,B,O=a.F.U,$=a.F._putsF,P=a.F._putsE;O.lhst[256]++,v=(x=a.F.getTrees())[0],y=x[1],k=x[2],w=x[3],_=x[4],N=x[5],T=x[6],B=x[7];var A=32+((g+3&7)==0?0:8-(g+3&7))+(p<<3),H=d+a.F.contSize(O.fltree,O.lhst)+a.F.contSize(O.fdtree,O.dhst),Y=d+a.F.contSize(O.ltree,O.lhst)+a.F.contSize(O.dtree,O.dhst);Y+=14+3*N+a.F.contSize(O.itree,O.ihst)+(2*O.ihst[16]+3*O.ihst[17]+7*O.ihst[18]);for(var E=0;E<286;E++)O.lhst[E]=0;for(E=0;E<30;E++)O.dhst[E]=0;for(E=0;E<19;E++)O.ihst[E]=0;var D=A<H&&A<Y?0:H<Y?1:2;if($(h,g,i),$(h,g+1,D),g+=3,D==0){for(;(7&g)!=0;)g++;g=a.F._copyExact(u,m,p,h,g)}else{var S,z;if(D==1&&(S=O.fltree,z=O.fdtree),D==2){a.F.makeCodes(O.ltree,v),a.F.revCodes(O.ltree,v),a.F.makeCodes(O.dtree,y),a.F.revCodes(O.dtree,y),a.F.makeCodes(O.itree,k),a.F.revCodes(O.itree,k),S=O.ltree,z=O.dtree,P(h,g,w-257),P(h,g+=5,_-1),P(h,g+=5,N-4),g+=4;for(var L=0;L<N;L++)P(h,g+3*L,O.itree[1+(O.ordr[L]<<1)]);g+=3*N,g=a.F._codeTiny(T,O.itree,h,g),g=a.F._codeTiny(B,O.itree,h,g)}for(var F=m,K=0;K<c;K+=2){for(var G=l[K],Z=G>>>23,R=F+(8388607&G);F<R;)g=a.F._writeLit(u[F++],S,h,g);if(Z!=0){var V=l[K+1],ee=V>>16,W=V>>8&255,U=255&V;P(h,g=a.F._writeLit(257+W,S,h,g),Z-O.of0[W]),g+=O.exb[W],$(h,g=a.F._writeLit(U,z,h,g),ee-O.df0[U]),g+=O.dxb[U],F+=Z}}g=a.F._writeLit(256,S,h,g)}return g},a.F._copyExact=function(i,l,c,d,u){var m=u>>>3;return d[m]=c,d[m+1]=c>>>8,d[m+2]=255-d[m],d[m+3]=255-d[m+1],m+=4,d.set(new Uint8Array(i.buffer,l,c),m),u+(c+4<<3)},a.F.getTrees=function(){for(var i=a.F.U,l=a.F._hufTree(i.lhst,i.ltree,15),c=a.F._hufTree(i.dhst,i.dtree,15),d=[],u=a.F._lenCodes(i.ltree,d),m=[],p=a.F._lenCodes(i.dtree,m),h=0;h<d.length;h+=2)i.ihst[d[h]]++;for(h=0;h<m.length;h+=2)i.ihst[m[h]]++;for(var g=a.F._hufTree(i.ihst,i.itree,7),x=19;x>4&&i.itree[1+(i.ordr[x-1]<<1)]==0;)x--;return[l,c,g,u,p,x,d,m]},a.F.getSecond=function(i){for(var l=[],c=0;c<i.length;c+=2)l.push(i[c+1]);return l},a.F.nonZero=function(i){for(var l="",c=0;c<i.length;c+=2)i[c+1]!=0&&(l+=(c>>1)+",");return l},a.F.contSize=function(i,l){for(var c=0,d=0;d<l.length;d++)c+=l[d]*i[1+(d<<1)];return c},a.F._codeTiny=function(i,l,c,d){for(var u=0;u<i.length;u+=2){var m=i[u],p=i[u+1];d=a.F._writeLit(m,l,c,d);var h=m==16?2:m==17?3:7;m>15&&(a.F._putsE(c,d,p,h),d+=h)}return d},a.F._lenCodes=function(i,l){for(var c=i.length;c!=2&&i[c-1]==0;)c-=2;for(var d=0;d<c;d+=2){var u=i[d+1],m=d+3<c?i[d+3]:-1,p=d+5<c?i[d+5]:-1,h=d==0?-1:i[d-1];if(u==0&&m==u&&p==u){for(var g=d+5;g+2<c&&i[g+2]==u;)g+=2;(x=Math.min(g+1-d>>>1,138))<11?l.push(17,x-3):l.push(18,x-11),d+=2*x-2}else if(u==h&&m==u&&p==u){for(g=d+5;g+2<c&&i[g+2]==u;)g+=2;var x=Math.min(g+1-d>>>1,6);l.push(16,x-3),d+=2*x-2}else l.push(u,0)}return c>>>1},a.F._hufTree=function(i,l,c){var d=[],u=i.length,m=l.length,p=0;for(p=0;p<m;p+=2)l[p]=0,l[p+1]=0;for(p=0;p<u;p++)i[p]!=0&&d.push({lit:p,f:i[p]});var h=d.length,g=d.slice(0);if(h==0)return 0;if(h==1){var x=d[0].lit;return g=x==0?1:0,l[1+(x<<1)]=1,l[1+(g<<1)]=1,1}d.sort((function(T,B){return T.f-B.f}));var v=d[0],y=d[1],k=0,w=1,_=2;for(d[0]={lit:-1,f:v.f+y.f,l:v,r:y,d:0};w!=h-1;)v=k!=w&&(_==h||d[k].f<d[_].f)?d[k++]:d[_++],y=k!=w&&(_==h||d[k].f<d[_].f)?d[k++]:d[_++],d[w++]={lit:-1,f:v.f+y.f,l:v,r:y};var N=a.F.setDepth(d[w-1],0);for(N>c&&(a.F.restrictDepth(g,c,N),N=c),p=0;p<h;p++)l[1+(g[p].lit<<1)]=g[p].d;return N},a.F.setDepth=function(i,l){return i.lit!=-1?(i.d=l,l):Math.max(a.F.setDepth(i.l,l+1),a.F.setDepth(i.r,l+1))},a.F.restrictDepth=function(i,l,c){var d=0,u=1<<c-l,m=0;for(i.sort((function(h,g){return g.d==h.d?h.f-g.f:g.d-h.d})),d=0;d<i.length&&i[d].d>l;d++){var p=i[d].d;i[d].d=l,m+=u-(1<<c-p)}for(m>>>=c-l;m>0;)(p=i[d].d)<l?(i[d].d++,m-=1<<l-p-1):d++;for(;d>=0;d--)i[d].d==l&&m<0&&(i[d].d--,m++);m!=0&&console.log("debt left")},a.F._goodIndex=function(i,l){var c=0;return l[16|c]<=i&&(c|=16),l[8|c]<=i&&(c|=8),l[4|c]<=i&&(c|=4),l[2|c]<=i&&(c|=2),l[1|c]<=i&&(c|=1),c},a.F._writeLit=function(i,l,c,d){return a.F._putsF(c,d,l[i<<1]),d+l[1+(i<<1)]},a.F.inflate=function(i,l){var c=Uint8Array;if(i[0]==3&&i[1]==0)return l||new c(0);var d=a.F,u=d._bitsF,m=d._bitsE,p=d._decodeTiny,h=d.makeCodes,g=d.codes2map,x=d._get17,v=d.U,y=l==null;y&&(l=new c(i.length>>>2<<3));for(var k,w,_=0,N=0,T=0,B=0,O=0,$=0,P=0,A=0,H=0;_==0;)if(_=u(i,H,1),N=u(i,H+1,2),H+=3,N!=0){if(y&&(l=a.F._check(l,A+(1<<17))),N==1&&(k=v.flmap,w=v.fdmap,$=511,P=31),N==2){T=m(i,H,5)+257,B=m(i,H+5,5)+1,O=m(i,H+10,4)+4,H+=14;for(var Y=0;Y<38;Y+=2)v.itree[Y]=0,v.itree[Y+1]=0;var E=1;for(Y=0;Y<O;Y++){var D=m(i,H+3*Y,3);v.itree[1+(v.ordr[Y]<<1)]=D,D>E&&(E=D)}H+=3*O,h(v.itree,E),g(v.itree,E,v.imap),k=v.lmap,w=v.dmap,H=p(v.imap,(1<<E)-1,T+B,i,H,v.ttree);var S=d._copyOut(v.ttree,0,T,v.ltree);$=(1<<S)-1;var z=d._copyOut(v.ttree,T,B,v.dtree);P=(1<<z)-1,h(v.ltree,S),g(v.ltree,S,k),h(v.dtree,z),g(v.dtree,z,w)}for(;;){var L=k[x(i,H)&$];H+=15&L;var F=L>>>4;if(!(F>>>8))l[A++]=F;else{if(F==256)break;var K=A+F-254;if(F>264){var G=v.ldef[F-257];K=A+(G>>>3)+m(i,H,7&G),H+=7&G}var Z=w[x(i,H)&P];H+=15&Z;var R=Z>>>4,V=v.ddef[R],ee=(V>>>4)+u(i,H,15&V);for(H+=15&V,y&&(l=a.F._check(l,A+(1<<17)));A<K;)l[A]=l[A++-ee],l[A]=l[A++-ee],l[A]=l[A++-ee],l[A]=l[A++-ee];A=K}}}else{(7&H)!=0&&(H+=8-(7&H));var W=4+(H>>>3),U=i[W-4]|i[W-3]<<8;y&&(l=a.F._check(l,A+U)),l.set(new c(i.buffer,i.byteOffset+W,U),A),H=W+U<<3,A+=U}return l.length==A?l:l.slice(0,A)},a.F._check=function(i,l){var c=i.length;if(l<=c)return i;var d=new Uint8Array(Math.max(c<<1,l));return d.set(i,0),d},a.F._decodeTiny=function(i,l,c,d,u,m){for(var p=a.F._bitsE,h=a.F._get17,g=0;g<c;){var x=i[h(d,u)&l];u+=15&x;var v=x>>>4;if(v<=15)m[g]=v,g++;else{var y=0,k=0;v==16?(k=3+p(d,u,2),u+=2,y=m[g-1]):v==17?(k=3+p(d,u,3),u+=3):v==18&&(k=11+p(d,u,7),u+=7);for(var w=g+k;g<w;)m[g]=y,g++}}return u},a.F._copyOut=function(i,l,c,d){for(var u=0,m=0,p=d.length>>>1;m<c;){var h=i[m+l];d[m<<1]=0,d[1+(m<<1)]=h,h>u&&(u=h),m++}for(;m<p;)d[m<<1]=0,d[1+(m<<1)]=0,m++;return u},a.F.makeCodes=function(i,l){for(var c,d,u,m,p=a.F.U,h=i.length,g=p.bl_count,x=0;x<=l;x++)g[x]=0;for(x=1;x<h;x+=2)g[i[x]]++;var v=p.next_code;for(c=0,g[0]=0,d=1;d<=l;d++)c=c+g[d-1]<<1,v[d]=c;for(u=0;u<h;u+=2)(m=i[u+1])!=0&&(i[u]=v[m],v[m]++)},a.F.codes2map=function(i,l,c){for(var d=i.length,u=a.F.U.rev15,m=0;m<d;m+=2)if(i[m+1]!=0)for(var p=m>>1,h=i[m+1],g=p<<4|h,x=l-h,v=i[m]<<x,y=v+(1<<x);v!=y;)c[u[v]>>>15-l]=g,v++},a.F.revCodes=function(i,l){for(var c=a.F.U.rev15,d=15-l,u=0;u<i.length;u+=2){var m=i[u]<<l-i[u+1];i[u]=c[m]>>>d}},a.F._putsE=function(i,l,c){c<<=7&l;var d=l>>>3;i[d]|=c,i[d+1]|=c>>>8},a.F._putsF=function(i,l,c){c<<=7&l;var d=l>>>3;i[d]|=c,i[d+1]|=c>>>8,i[d+2]|=c>>>16},a.F._bitsE=function(i,l,c){return(i[l>>>3]|i[1+(l>>>3)]<<8)>>>(7&l)&(1<<c)-1},a.F._bitsF=function(i,l,c){return(i[l>>>3]|i[1+(l>>>3)]<<8|i[2+(l>>>3)]<<16)>>>(7&l)&(1<<c)-1},a.F._get17=function(i,l){return(i[l>>>3]|i[1+(l>>>3)]<<8|i[2+(l>>>3)]<<16)>>>(7&l)},a.F._get25=function(i,l){return(i[l>>>3]|i[1+(l>>>3)]<<8|i[2+(l>>>3)]<<16|i[3+(l>>>3)]<<24)>>>(7&l)},a.F.U=(t=Uint16Array,n=Uint32Array,{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new t(65536),prev:new t(32768)}),(function(){for(var i=a.F.U,l=0;l<32768;l++){var c=l;c=(4278255360&(c=(4042322160&(c=(3435973836&(c=(2863311530&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,i.rev15[l]=(c>>>16|c<<16)>>>17}function d(u,m,p){for(;m--!=0;)u.push(0,p)}for(l=0;l<32;l++)i.ldef[l]=i.of0[l]<<3|i.exb[l],i.ddef[l]=i.df0[l]<<4|i.dxb[l];d(i.fltree,144,8),d(i.fltree,112,9),d(i.fltree,24,7),d(i.fltree,8,8),a.F.makeCodes(i.fltree,9),a.F.codes2map(i.fltree,9,i.flmap),a.F.revCodes(i.fltree,9),d(i.fdtree,32,5),a.F.makeCodes(i.fdtree,5),a.F.codes2map(i.fdtree,5,i.fdmap),a.F.revCodes(i.fdtree,5),d(i.itree,19,0),d(i.ltree,286,0),d(i.dtree,30,0),d(i.ttree,320,0)})()})();var o8=r8({__proto__:null,default:jc},[jc]);const js=(function(){var e={nextZero(p,h){for(;p[h]!=0;)h++;return h},readUshort:(p,h)=>p[h]<<8|p[h+1],writeUshort(p,h,g){p[h]=g>>8&255,p[h+1]=255&g},readUint:(p,h)=>16777216*p[h]+(p[h+1]<<16|p[h+2]<<8|p[h+3]),writeUint(p,h,g){p[h]=g>>24&255,p[h+1]=g>>16&255,p[h+2]=g>>8&255,p[h+3]=255&g},readASCII(p,h,g){let x="";for(let v=0;v<g;v++)x+=String.fromCharCode(p[h+v]);return x},writeASCII(p,h,g){for(let x=0;x<g.length;x++)p[h+x]=g.charCodeAt(x)},readBytes(p,h,g){const x=[];for(let v=0;v<g;v++)x.push(p[h+v]);return x},pad:p=>p.length<2?`0${p}`:p,readUTF8(p,h,g){let x,v="";for(let y=0;y<g;y++)v+=`%${e.pad(p[h+y].toString(16))}`;try{x=decodeURIComponent(v)}catch{return e.readASCII(p,h,g)}return x}};function t(p,h,g,x){const v=h*g,y=l(x),k=Math.ceil(h*y/8),w=new Uint8Array(4*v),_=new Uint32Array(w.buffer),{ctype:N}=x,{depth:T}=x,B=e.readUshort;if(N==6){const G=v<<2;if(T==8)for(var O=0;O<G;O+=4)w[O]=p[O],w[O+1]=p[O+1],w[O+2]=p[O+2],w[O+3]=p[O+3];if(T==16)for(O=0;O<G;O++)w[O]=p[O<<1]}else if(N==2){const G=x.tabs.tRNS;if(G==null){if(T==8)for(O=0;O<v;O++){var $=3*O;_[O]=255<<24|p[$+2]<<16|p[$+1]<<8|p[$]}if(T==16)for(O=0;O<v;O++)$=6*O,_[O]=255<<24|p[$+4]<<16|p[$+2]<<8|p[$]}else{var P=G[0];const Z=G[1],R=G[2];if(T==8)for(O=0;O<v;O++){var A=O<<2;$=3*O,_[O]=255<<24|p[$+2]<<16|p[$+1]<<8|p[$],p[$]==P&&p[$+1]==Z&&p[$+2]==R&&(w[A+3]=0)}if(T==16)for(O=0;O<v;O++)A=O<<2,$=6*O,_[O]=255<<24|p[$+4]<<16|p[$+2]<<8|p[$],B(p,$)==P&&B(p,$+2)==Z&&B(p,$+4)==R&&(w[A+3]=0)}}else if(N==3){const G=x.tabs.PLTE,Z=x.tabs.tRNS,R=Z?Z.length:0;if(T==1)for(var H=0;H<g;H++){var Y=H*k,E=H*h;for(O=0;O<h;O++){A=E+O<<2;var D=3*(S=p[Y+(O>>3)]>>7-((7&O)<<0)&1);w[A]=G[D],w[A+1]=G[D+1],w[A+2]=G[D+2],w[A+3]=S<R?Z[S]:255}}if(T==2)for(H=0;H<g;H++)for(Y=H*k,E=H*h,O=0;O<h;O++)A=E+O<<2,D=3*(S=p[Y+(O>>2)]>>6-((3&O)<<1)&3),w[A]=G[D],w[A+1]=G[D+1],w[A+2]=G[D+2],w[A+3]=S<R?Z[S]:255;if(T==4)for(H=0;H<g;H++)for(Y=H*k,E=H*h,O=0;O<h;O++)A=E+O<<2,D=3*(S=p[Y+(O>>1)]>>4-((1&O)<<2)&15),w[A]=G[D],w[A+1]=G[D+1],w[A+2]=G[D+2],w[A+3]=S<R?Z[S]:255;if(T==8)for(O=0;O<v;O++){var S;A=O<<2,D=3*(S=p[O]),w[A]=G[D],w[A+1]=G[D+1],w[A+2]=G[D+2],w[A+3]=S<R?Z[S]:255}}else if(N==4){if(T==8)for(O=0;O<v;O++){A=O<<2;var z=p[L=O<<1];w[A]=z,w[A+1]=z,w[A+2]=z,w[A+3]=p[L+1]}if(T==16)for(O=0;O<v;O++){var L;A=O<<2,z=p[L=O<<2],w[A]=z,w[A+1]=z,w[A+2]=z,w[A+3]=p[L+2]}}else if(N==0)for(P=x.tabs.tRNS?x.tabs.tRNS:-1,H=0;H<g;H++){const G=H*k,Z=H*h;if(T==1)for(var F=0;F<h;F++){var K=(z=255*(p[G+(F>>>3)]>>>7-(7&F)&1))==255*P?0:255;_[Z+F]=K<<24|z<<16|z<<8|z}else if(T==2)for(F=0;F<h;F++)K=(z=85*(p[G+(F>>>2)]>>>6-((3&F)<<1)&3))==85*P?0:255,_[Z+F]=K<<24|z<<16|z<<8|z;else if(T==4)for(F=0;F<h;F++)K=(z=17*(p[G+(F>>>1)]>>>4-((1&F)<<2)&15))==17*P?0:255,_[Z+F]=K<<24|z<<16|z<<8|z;else if(T==8)for(F=0;F<h;F++)K=(z=p[G+F])==P?0:255,_[Z+F]=K<<24|z<<16|z<<8|z;else if(T==16)for(F=0;F<h;F++)z=p[G+(F<<1)],K=B(p,G+(F<<1))==P?0:255,_[Z+F]=K<<24|z<<16|z<<8|z}return w}function n(p,h,g,x){const v=l(p),y=Math.ceil(g*v/8),k=new Uint8Array((y+1+p.interlace)*x);return h=p.tabs.CgBI?i(h,k):a(h,k),p.interlace==0?h=c(h,p,0,g,x):p.interlace==1&&(h=(function(_,N){const T=N.width,B=N.height,O=l(N),$=O>>3,P=Math.ceil(T*O/8),A=new Uint8Array(B*P);let H=0;const Y=[0,0,4,0,2,0,1],E=[0,4,0,2,0,1,0],D=[8,8,8,4,4,2,2],S=[8,8,4,4,2,2,1];let z=0;for(;z<7;){const F=D[z],K=S[z];let G=0,Z=0,R=Y[z];for(;R<B;)R+=F,Z++;let V=E[z];for(;V<T;)V+=K,G++;const ee=Math.ceil(G*O/8);c(_,N,H,G,Z);let W=0,U=Y[z];for(;U<B;){let Q=E[z],oe=H+W*ee<<3;for(;Q<T;){var L;if(O==1&&(L=(L=_[oe>>3])>>7-(7&oe)&1,A[U*P+(Q>>3)]|=L<<7-((7&Q)<<0)),O==2&&(L=(L=_[oe>>3])>>6-(7&oe)&3,A[U*P+(Q>>2)]|=L<<6-((3&Q)<<1)),O==4&&(L=(L=_[oe>>3])>>4-(7&oe)&15,A[U*P+(Q>>1)]|=L<<4-((1&Q)<<2)),O>=8){const ne=U*P+Q*$;for(let ae=0;ae<$;ae++)A[ne+ae]=_[(oe>>3)+ae]}oe+=O,Q+=K}W++,U+=F}G*Z!=0&&(H+=Z*(1+ee)),z+=1}return A})(h,p)),h}function a(p,h){return i(new Uint8Array(p.buffer,2,p.length-6),h)}var i=(function(){const p={H:{}};return p.H.N=function(h,g){const x=Uint8Array;let v,y,k=0,w=0,_=0,N=0,T=0,B=0,O=0,$=0,P=0;if(h[0]==3&&h[1]==0)return g||new x(0);const A=p.H,H=A.b,Y=A.e,E=A.R,D=A.n,S=A.A,z=A.Z,L=A.m,F=g==null;for(F&&(g=new x(h.length>>>2<<5));k==0;)if(k=H(h,P,1),w=H(h,P+1,2),P+=3,w!=0){if(F&&(g=p.H.W(g,$+(1<<17))),w==1&&(v=L.J,y=L.h,B=511,O=31),w==2){_=Y(h,P,5)+257,N=Y(h,P+5,5)+1,T=Y(h,P+10,4)+4,P+=14;let G=1;for(var K=0;K<38;K+=2)L.Q[K]=0,L.Q[K+1]=0;for(K=0;K<T;K++){const V=Y(h,P+3*K,3);L.Q[1+(L.X[K]<<1)]=V,V>G&&(G=V)}P+=3*T,D(L.Q,G),S(L.Q,G,L.u),v=L.w,y=L.d,P=E(L.u,(1<<G)-1,_+N,h,P,L.v);const Z=A.V(L.v,0,_,L.C);B=(1<<Z)-1;const R=A.V(L.v,_,N,L.D);O=(1<<R)-1,D(L.C,Z),S(L.C,Z,v),D(L.D,R),S(L.D,R,y)}for(;;){const G=v[z(h,P)&B];P+=15&G;const Z=G>>>4;if(!(Z>>>8))g[$++]=Z;else{if(Z==256)break;{let R=$+Z-254;if(Z>264){const Q=L.q[Z-257];R=$+(Q>>>3)+Y(h,P,7&Q),P+=7&Q}const V=y[z(h,P)&O];P+=15&V;const ee=V>>>4,W=L.c[ee],U=(W>>>4)+H(h,P,15&W);for(P+=15&W;$<R;)g[$]=g[$++-U],g[$]=g[$++-U],g[$]=g[$++-U],g[$]=g[$++-U];$=R}}}}else{(7&P)!=0&&(P+=8-(7&P));const G=4+(P>>>3),Z=h[G-4]|h[G-3]<<8;F&&(g=p.H.W(g,$+Z)),g.set(new x(h.buffer,h.byteOffset+G,Z),$),P=G+Z<<3,$+=Z}return g.length==$?g:g.slice(0,$)},p.H.W=function(h,g){const x=h.length;if(g<=x)return h;const v=new Uint8Array(x<<1);return v.set(h,0),v},p.H.R=function(h,g,x,v,y,k){const w=p.H.e,_=p.H.Z;let N=0;for(;N<x;){const T=h[_(v,y)&g];y+=15&T;const B=T>>>4;if(B<=15)k[N]=B,N++;else{let O=0,$=0;B==16?($=3+w(v,y,2),y+=2,O=k[N-1]):B==17?($=3+w(v,y,3),y+=3):B==18&&($=11+w(v,y,7),y+=7);const P=N+$;for(;N<P;)k[N]=O,N++}}return y},p.H.V=function(h,g,x,v){let y=0,k=0;const w=v.length>>>1;for(;k<x;){const _=h[k+g];v[k<<1]=0,v[1+(k<<1)]=_,_>y&&(y=_),k++}for(;k<w;)v[k<<1]=0,v[1+(k<<1)]=0,k++;return y},p.H.n=function(h,g){const x=p.H.m,v=h.length;let y,k,w,_;const N=x.j;for(var T=0;T<=g;T++)N[T]=0;for(T=1;T<v;T+=2)N[h[T]]++;const B=x.K;for(y=0,N[0]=0,k=1;k<=g;k++)y=y+N[k-1]<<1,B[k]=y;for(w=0;w<v;w+=2)_=h[w+1],_!=0&&(h[w]=B[_],B[_]++)},p.H.A=function(h,g,x){const v=h.length,y=p.H.m.r;for(let k=0;k<v;k+=2)if(h[k+1]!=0){const w=k>>1,_=h[k+1],N=w<<4|_,T=g-_;let B=h[k]<<T;const O=B+(1<<T);for(;B!=O;)x[y[B]>>>15-g]=N,B++}},p.H.l=function(h,g){const x=p.H.m.r,v=15-g;for(let y=0;y<h.length;y+=2){const k=h[y]<<g-h[y+1];h[y]=x[k]>>>v}},p.H.M=function(h,g,x){x<<=7&g;const v=g>>>3;h[v]|=x,h[v+1]|=x>>>8},p.H.I=function(h,g,x){x<<=7&g;const v=g>>>3;h[v]|=x,h[v+1]|=x>>>8,h[v+2]|=x>>>16},p.H.e=function(h,g,x){return(h[g>>>3]|h[1+(g>>>3)]<<8)>>>(7&g)&(1<<x)-1},p.H.b=function(h,g,x){return(h[g>>>3]|h[1+(g>>>3)]<<8|h[2+(g>>>3)]<<16)>>>(7&g)&(1<<x)-1},p.H.Z=function(h,g){return(h[g>>>3]|h[1+(g>>>3)]<<8|h[2+(g>>>3)]<<16)>>>(7&g)},p.H.i=function(h,g){return(h[g>>>3]|h[1+(g>>>3)]<<8|h[2+(g>>>3)]<<16|h[3+(g>>>3)]<<24)>>>(7&g)},p.H.m=(function(){const h=Uint16Array,g=Uint32Array;return{K:new h(16),j:new h(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new h(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new g(32),J:new h(512),_:[],h:new h(32),$:[],w:new h(32768),C:[],v:[],d:new h(32768),D:[],u:new h(512),Q:[],r:new h(32768),s:new g(286),Y:new g(30),a:new g(19),t:new g(15e3),k:new h(65536),g:new h(32768)}})(),(function(){const h=p.H.m;for(var g=0;g<32768;g++){let v=g;v=(2863311530&v)>>>1|(1431655765&v)<<1,v=(3435973836&v)>>>2|(858993459&v)<<2,v=(4042322160&v)>>>4|(252645135&v)<<4,v=(4278255360&v)>>>8|(16711935&v)<<8,h.r[g]=(v>>>16|v<<16)>>>17}function x(v,y,k){for(;y--!=0;)v.push(0,k)}for(g=0;g<32;g++)h.q[g]=h.S[g]<<3|h.T[g],h.c[g]=h.p[g]<<4|h.z[g];x(h._,144,8),x(h._,112,9),x(h._,24,7),x(h._,8,8),p.H.n(h._,9),p.H.A(h._,9,h.J),p.H.l(h._,9),x(h.$,32,5),p.H.n(h.$,5),p.H.A(h.$,5,h.h),p.H.l(h.$,5),x(h.Q,19,0),x(h.C,286,0),x(h.D,30,0),x(h.v,320,0)})(),p.H.N})();function l(p){return[1,null,3,1,2,null,4][p.ctype]*p.depth}function c(p,h,g,x,v){let y=l(h);const k=Math.ceil(x*y/8);let w,_;y=Math.ceil(y/8);let N=p[g],T=0;if(N>1&&(p[g]=[0,0,1][N-2]),N==3)for(T=y;T<k;T++)p[T+1]=p[T+1]+(p[T+1-y]>>>1)&255;for(let B=0;B<v;B++)if(w=g+B*k,_=w+B+1,N=p[_-1],T=0,N==0)for(;T<k;T++)p[w+T]=p[_+T];else if(N==1){for(;T<y;T++)p[w+T]=p[_+T];for(;T<k;T++)p[w+T]=p[_+T]+p[w+T-y]}else if(N==2)for(;T<k;T++)p[w+T]=p[_+T]+p[w+T-k];else if(N==3){for(;T<y;T++)p[w+T]=p[_+T]+(p[w+T-k]>>>1);for(;T<k;T++)p[w+T]=p[_+T]+(p[w+T-k]+p[w+T-y]>>>1)}else{for(;T<y;T++)p[w+T]=p[_+T]+d(0,p[w+T-k],0);for(;T<k;T++)p[w+T]=p[_+T]+d(p[w+T-y],p[w+T-k],p[w+T-y-k])}return p}function d(p,h,g){const x=p+h-g,v=x-p,y=x-h,k=x-g;return v*v<=y*y&&v*v<=k*k?p:y*y<=k*k?h:g}function u(p,h,g){g.width=e.readUint(p,h),h+=4,g.height=e.readUint(p,h),h+=4,g.depth=p[h],h++,g.ctype=p[h],h++,g.compress=p[h],h++,g.filter=p[h],h++,g.interlace=p[h],h++}function m(p,h,g,x,v,y,k,w,_){const N=Math.min(h,v),T=Math.min(g,y);let B=0,O=0;for(let z=0;z<T;z++)for(let L=0;L<N;L++)if(k>=0&&w>=0?(B=z*h+L<<2,O=(w+z)*v+k+L<<2):(B=(-w+z)*h-k+L<<2,O=z*v+L<<2),_==0)x[O]=p[B],x[O+1]=p[B+1],x[O+2]=p[B+2],x[O+3]=p[B+3];else if(_==1){var $=p[B+3]*.00392156862745098,P=p[B]*$,A=p[B+1]*$,H=p[B+2]*$,Y=x[O+3]*(1/255),E=x[O]*Y,D=x[O+1]*Y,S=x[O+2]*Y;const F=1-$,K=$+Y*F,G=K==0?0:1/K;x[O+3]=255*K,x[O+0]=(P+E*F)*G,x[O+1]=(A+D*F)*G,x[O+2]=(H+S*F)*G}else if(_==2)$=p[B+3],P=p[B],A=p[B+1],H=p[B+2],Y=x[O+3],E=x[O],D=x[O+1],S=x[O+2],$==Y&&P==E&&A==D&&H==S?(x[O]=0,x[O+1]=0,x[O+2]=0,x[O+3]=0):(x[O]=P,x[O+1]=A,x[O+2]=H,x[O+3]=$);else if(_==3){if($=p[B+3],P=p[B],A=p[B+1],H=p[B+2],Y=x[O+3],E=x[O],D=x[O+1],S=x[O+2],$==Y&&P==E&&A==D&&H==S)continue;if($<220&&Y>20)return!1}return!0}return{decode:function(h){const g=new Uint8Array(h);let x=8;const v=e,y=v.readUshort,k=v.readUint,w={tabs:{},frames:[]},_=new Uint8Array(g.length);let N,T=0,B=0;const O=[137,80,78,71,13,10,26,10];for(var $=0;$<8;$++)if(g[$]!=O[$])throw"The input is not a PNG file!";for(;x<g.length;){const z=v.readUint(g,x);x+=4;const L=v.readASCII(g,x,4);if(x+=4,L=="IHDR")u(g,x,w);else if(L=="iCCP"){for(var P=x;g[P]!=0;)P++;v.readASCII(g,x,P-x),g[P+1];const F=g.slice(P+2,x+z);let K=null;try{K=a(F)}catch{K=i(F)}w.tabs[L]=K}else if(L=="CgBI")w.tabs[L]=g.slice(x,x+4);else if(L=="IDAT"){for($=0;$<z;$++)_[T+$]=g[x+$];T+=z}else if(L=="acTL")w.tabs[L]={num_frames:k(g,x),num_plays:k(g,x+4)},N=new Uint8Array(g.length);else if(L=="fcTL"){B!=0&&((S=w.frames[w.frames.length-1]).data=n(w,N.slice(0,B),S.rect.width,S.rect.height),B=0);const F={x:k(g,x+12),y:k(g,x+16),width:k(g,x+4),height:k(g,x+8)};let K=y(g,x+22);K=y(g,x+20)/(K==0?100:K);const G={rect:F,delay:Math.round(1e3*K),dispose:g[x+24],blend:g[x+25]};w.frames.push(G)}else if(L=="fdAT"){for($=0;$<z-4;$++)N[B+$]=g[x+$+4];B+=z-4}else if(L=="pHYs")w.tabs[L]=[v.readUint(g,x),v.readUint(g,x+4),g[x+8]];else if(L=="cHRM")for(w.tabs[L]=[],$=0;$<8;$++)w.tabs[L].push(v.readUint(g,x+4*$));else if(L=="tEXt"||L=="zTXt"){w.tabs[L]==null&&(w.tabs[L]={});var A=v.nextZero(g,x),H=v.readASCII(g,x,A-x),Y=x+z-A-1;if(L=="tEXt")D=v.readASCII(g,A+1,Y);else{var E=a(g.slice(A+2,A+2+Y));D=v.readUTF8(E,0,E.length)}w.tabs[L][H]=D}else if(L=="iTXt"){w.tabs[L]==null&&(w.tabs[L]={}),A=0,P=x,A=v.nextZero(g,P),H=v.readASCII(g,P,A-P);const F=g[P=A+1];var D;g[P+1],P+=2,A=v.nextZero(g,P),v.readASCII(g,P,A-P),P=A+1,A=v.nextZero(g,P),v.readUTF8(g,P,A-P),Y=z-((P=A+1)-x),F==0?D=v.readUTF8(g,P,Y):(E=a(g.slice(P,P+Y)),D=v.readUTF8(E,0,E.length)),w.tabs[L][H]=D}else if(L=="PLTE")w.tabs[L]=v.readBytes(g,x,z);else if(L=="hIST"){const F=w.tabs.PLTE.length/3;for(w.tabs[L]=[],$=0;$<F;$++)w.tabs[L].push(y(g,x+2*$))}else if(L=="tRNS")w.ctype==3?w.tabs[L]=v.readBytes(g,x,z):w.ctype==0?w.tabs[L]=y(g,x):w.ctype==2&&(w.tabs[L]=[y(g,x),y(g,x+2),y(g,x+4)]);else if(L=="gAMA")w.tabs[L]=v.readUint(g,x)/1e5;else if(L=="sRGB")w.tabs[L]=g[x];else if(L=="bKGD")w.ctype==0||w.ctype==4?w.tabs[L]=[y(g,x)]:w.ctype==2||w.ctype==6?w.tabs[L]=[y(g,x),y(g,x+2),y(g,x+4)]:w.ctype==3&&(w.tabs[L]=g[x]);else if(L=="IEND")break;x+=z,v.readUint(g,x),x+=4}var S;return B!=0&&((S=w.frames[w.frames.length-1]).data=n(w,N.slice(0,B),S.rect.width,S.rect.height)),w.data=n(w,_,w.width,w.height),delete w.compress,delete w.interlace,delete w.filter,w},toRGBA8:function(h){const g=h.width,x=h.height;if(h.tabs.acTL==null)return[t(h.data,g,x,h).buffer];const v=[];h.frames[0].data==null&&(h.frames[0].data=h.data);const y=g*x*4,k=new Uint8Array(y),w=new Uint8Array(y),_=new Uint8Array(y);for(let T=0;T<h.frames.length;T++){const B=h.frames[T],O=B.rect.x,$=B.rect.y,P=B.rect.width,A=B.rect.height,H=t(B.data,P,A,h);if(T!=0)for(var N=0;N<y;N++)_[N]=k[N];if(B.blend==0?m(H,P,A,k,g,x,O,$,0):B.blend==1&&m(H,P,A,k,g,x,O,$,1),v.push(k.buffer.slice(0)),B.dispose!=0){if(B.dispose==1)m(w,P,A,k,g,x,O,$,0);else if(B.dispose==2)for(N=0;N<y;N++)k[N]=_[N]}}return v},_paeth:d,_copyTile:m,_bin:e}})();(function(){const{_copyTile:e}=js,{_bin:t}=js,n=js._paeth;var a={table:(function(){const P=new Uint32Array(256);for(let A=0;A<256;A++){let H=A;for(let Y=0;Y<8;Y++)1&H?H=3988292384^H>>>1:H>>>=1;P[A]=H}return P})(),update(P,A,H,Y){for(let E=0;E<Y;E++)P=a.table[255&(P^A[H+E])]^P>>>8;return P},crc:(P,A,H)=>4294967295^a.update(4294967295,P,A,H)};function i(P,A,H,Y){A[H]+=P[0]*Y>>4,A[H+1]+=P[1]*Y>>4,A[H+2]+=P[2]*Y>>4,A[H+3]+=P[3]*Y>>4}function l(P){return Math.max(0,Math.min(255,P))}function c(P,A){const H=P[0]-A[0],Y=P[1]-A[1],E=P[2]-A[2],D=P[3]-A[3];return H*H+Y*Y+E*E+D*D}function d(P,A,H,Y,E,D,S){S==null&&(S=1);const z=Y.length,L=[];for(var F=0;F<z;F++){const U=Y[F];L.push([U>>>0&255,U>>>8&255,U>>>16&255,U>>>24&255])}for(F=0;F<z;F++){let U=4294967295;for(var K=0,G=0;G<z;G++){var Z=c(L[F],L[G]);G!=F&&Z<U&&(U=Z,K=G)}}const R=new Uint32Array(E.buffer),V=new Int16Array(A*H*4),ee=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(F=0;F<ee.length;F++)ee[F]=255*((ee[F]+.5)/16-.5);for(let U=0;U<H;U++)for(let Q=0;Q<A;Q++){var W;F=4*(U*A+Q),S!=2?W=[l(P[F]+V[F]),l(P[F+1]+V[F+1]),l(P[F+2]+V[F+2]),l(P[F+3]+V[F+3])]:(Z=ee[4*(3&U)+(3&Q)],W=[l(P[F]+Z),l(P[F+1]+Z),l(P[F+2]+Z),l(P[F+3]+Z)]),K=0;let oe=16777215;for(G=0;G<z;G++){const ve=c(W,L[G]);ve<oe&&(oe=ve,K=G)}const ne=L[K],ae=[W[0]-ne[0],W[1]-ne[1],W[2]-ne[2],W[3]-ne[3]];S==1&&(Q!=A-1&&i(ae,V,F+4,7),U!=H-1&&(Q!=0&&i(ae,V,F+4*A-4,3),i(ae,V,F+4*A,5),Q!=A-1&&i(ae,V,F+4*A+4,1))),D[F>>2]=K,R[F>>2]=Y[K]}}function u(P,A,H,Y,E){E==null&&(E={});const{crc:D}=a,S=t.writeUint,z=t.writeUshort,L=t.writeASCII;let F=8;const K=P.frames.length>1;let G,Z=!1,R=33+(K?20:0);if(E.sRGB!=null&&(R+=13),E.pHYs!=null&&(R+=21),E.iCCP!=null&&(G=pako.deflate(E.iCCP),R+=21+G.length+4),P.ctype==3){for(var V=P.plte.length,ee=0;ee<V;ee++)P.plte[ee]>>>24!=255&&(Z=!0);R+=8+3*V+4+(Z?8+1*V+4:0)}for(var W=0;W<P.frames.length;W++)K&&(R+=38),R+=(ne=P.frames[W]).cimg.length+12,W!=0&&(R+=4);R+=12;const U=new Uint8Array(R),Q=[137,80,78,71,13,10,26,10];for(ee=0;ee<8;ee++)U[ee]=Q[ee];if(S(U,F,13),F+=4,L(U,F,"IHDR"),F+=4,S(U,F,A),F+=4,S(U,F,H),F+=4,U[F]=P.depth,F++,U[F]=P.ctype,F++,U[F]=0,F++,U[F]=0,F++,U[F]=0,F++,S(U,F,D(U,F-17,17)),F+=4,E.sRGB!=null&&(S(U,F,1),F+=4,L(U,F,"sRGB"),F+=4,U[F]=E.sRGB,F++,S(U,F,D(U,F-5,5)),F+=4),E.iCCP!=null){const ae=13+G.length;S(U,F,ae),F+=4,L(U,F,"iCCP"),F+=4,L(U,F,"ICC profile"),F+=11,F+=2,U.set(G,F),F+=G.length,S(U,F,D(U,F-(ae+4),ae+4)),F+=4}if(E.pHYs!=null&&(S(U,F,9),F+=4,L(U,F,"pHYs"),F+=4,S(U,F,E.pHYs[0]),F+=4,S(U,F,E.pHYs[1]),F+=4,U[F]=E.pHYs[2],F++,S(U,F,D(U,F-13,13)),F+=4),K&&(S(U,F,8),F+=4,L(U,F,"acTL"),F+=4,S(U,F,P.frames.length),F+=4,S(U,F,E.loop!=null?E.loop:0),F+=4,S(U,F,D(U,F-12,12)),F+=4),P.ctype==3){for(S(U,F,3*(V=P.plte.length)),F+=4,L(U,F,"PLTE"),F+=4,ee=0;ee<V;ee++){const ae=3*ee,ve=P.plte[ee],se=255&ve,xe=ve>>>8&255,Ie=ve>>>16&255;U[F+ae+0]=se,U[F+ae+1]=xe,U[F+ae+2]=Ie}if(F+=3*V,S(U,F,D(U,F-3*V-4,3*V+4)),F+=4,Z){for(S(U,F,V),F+=4,L(U,F,"tRNS"),F+=4,ee=0;ee<V;ee++)U[F+ee]=P.plte[ee]>>>24&255;F+=V,S(U,F,D(U,F-V-4,V+4)),F+=4}}let oe=0;for(W=0;W<P.frames.length;W++){var ne=P.frames[W];K&&(S(U,F,26),F+=4,L(U,F,"fcTL"),F+=4,S(U,F,oe++),F+=4,S(U,F,ne.rect.width),F+=4,S(U,F,ne.rect.height),F+=4,S(U,F,ne.rect.x),F+=4,S(U,F,ne.rect.y),F+=4,z(U,F,Y[W]),F+=2,z(U,F,1e3),F+=2,U[F]=ne.dispose,F++,U[F]=ne.blend,F++,S(U,F,D(U,F-30,30)),F+=4);const ae=ne.cimg;S(U,F,(V=ae.length)+(W==0?0:4)),F+=4;const ve=F;L(U,F,W==0?"IDAT":"fdAT"),F+=4,W!=0&&(S(U,F,oe++),F+=4),U.set(ae,F),F+=V,S(U,F,D(U,ve,F-ve)),F+=4}return S(U,F,0),F+=4,L(U,F,"IEND"),F+=4,S(U,F,D(U,F-4,4)),F+=4,U.buffer}function m(P,A,H){for(let Y=0;Y<P.frames.length;Y++){const E=P.frames[Y];E.rect.width;const D=E.rect.height,S=new Uint8Array(D*E.bpl+D);E.cimg=x(E.img,D,E.bpp,E.bpl,S,A,H)}}function p(P,A,H,Y,E){const D=E[0],S=E[1],z=E[2],L=E[3],F=E[4],K=E[5];let G=6,Z=8,R=255;for(var V=0;V<P.length;V++){const he=new Uint8Array(P[V]);for(var ee=he.length,W=0;W<ee;W+=4)R&=he[W+3]}const U=R!=255,Q=(function(J,X,ie,le,ye,ce){const Ce=[];for(var _e=0;_e<J.length;_e++){const ct=new Uint8Array(J[_e]),ht=new Uint32Array(ct.buffer);var je;let pt=0,ot=0,$t=X,Dt=ie,Kt=le?1:0;if(_e!=0){const Tn=ce||le||_e==1||Ce[_e-2].dispose!=0?1:2;let rn=0,Qt=1e9;for(let Dn=0;Dn<Tn;Dn++){var Re=new Uint8Array(J[_e-1-Dn]);const dn=new Uint32Array(J[_e-1-Dn]);let vt=X,Xt=ie,qe=-1,St=-1;for(let Ct=0;Ct<ie;Ct++)for(let Gt=0;Gt<X;Gt++)ht[Oe=Ct*X+Gt]!=dn[Oe]&&(Gt<vt&&(vt=Gt),Gt>qe&&(qe=Gt),Ct<Xt&&(Xt=Ct),Ct>St&&(St=Ct));qe==-1&&(vt=Xt=qe=St=0),ye&&((1&vt)==1&&vt--,(1&Xt)==1&&Xt--);const Lt=(qe-vt+1)*(St-Xt+1);Lt<Qt&&(Qt=Lt,rn=Dn,pt=vt,ot=Xt,$t=qe-vt+1,Dt=St-Xt+1)}Re=new Uint8Array(J[_e-1-rn]),rn==1&&(Ce[_e-1].dispose=2),je=new Uint8Array($t*Dt*4),e(Re,X,ie,je,$t,Dt,-pt,-ot,0),Kt=e(ct,X,ie,je,$t,Dt,-pt,-ot,3)?1:0,Kt==1?g(ct,X,ie,je,{x:pt,y:ot,width:$t,height:Dt}):e(ct,X,ie,je,$t,Dt,-pt,-ot,0)}else je=ct.slice(0);Ce.push({rect:{x:pt,y:ot,width:$t,height:Dt},img:je,blend:Kt,dispose:0})}if(le)for(_e=0;_e<Ce.length;_e++){if((at=Ce[_e]).blend==1)continue;const ct=at.rect,ht=Ce[_e-1].rect,pt=Math.min(ct.x,ht.x),ot=Math.min(ct.y,ht.y),$t={x:pt,y:ot,width:Math.max(ct.x+ct.width,ht.x+ht.width)-pt,height:Math.max(ct.y+ct.height,ht.y+ht.height)-ot};Ce[_e-1].dispose=1,_e-1!=0&&h(J,X,ie,Ce,_e-1,$t,ye),h(J,X,ie,Ce,_e,$t,ye)}let st=0;if(J.length!=1)for(var Oe=0;Oe<Ce.length;Oe++){var at;st+=(at=Ce[Oe]).rect.width*at.rect.height}return Ce})(P,A,H,D,S,z),oe={},ne=[],ae=[];if(Y!=0){const he=[];for(W=0;W<Q.length;W++)he.push(Q[W].img.buffer);const J=(function(ye){let ce=0;for(var Ce=0;Ce<ye.length;Ce++)ce+=ye[Ce].byteLength;const _e=new Uint8Array(ce);let je=0;for(Ce=0;Ce<ye.length;Ce++){const Re=new Uint8Array(ye[Ce]),st=Re.length;for(let Oe=0;Oe<st;Oe+=4){let at=Re[Oe],ct=Re[Oe+1],ht=Re[Oe+2];const pt=Re[Oe+3];pt==0&&(at=ct=ht=0),_e[je+Oe]=at,_e[je+Oe+1]=ct,_e[je+Oe+2]=ht,_e[je+Oe+3]=pt}je+=st}return _e.buffer})(he),X=y(J,Y);for(W=0;W<X.plte.length;W++)ne.push(X.plte[W].est.rgba);let ie=0;for(W=0;W<Q.length;W++){const le=(se=Q[W]).img.length;var ve=new Uint8Array(X.inds.buffer,ie>>2,le>>2);ae.push(ve);const ye=new Uint8Array(X.abuf,ie,le);K&&d(se.img,se.rect.width,se.rect.height,ne,ye,ve),se.img.set(ye),ie+=le}}else for(V=0;V<Q.length;V++){var se=Q[V];const he=new Uint32Array(se.img.buffer);var xe=se.rect.width;for(ee=he.length,ve=new Uint8Array(ee),ae.push(ve),W=0;W<ee;W++){const J=he[W];if(W!=0&&J==he[W-1])ve[W]=ve[W-1];else if(W>xe&&J==he[W-xe])ve[W]=ve[W-xe];else{let X=oe[J];if(X==null&&(oe[J]=X=ne.length,ne.push(J),ne.length>=300))break;ve[W]=X}}}const Ie=ne.length;for(Ie<=256&&F==0&&(Z=Ie<=2?1:Ie<=4?2:Ie<=16?4:8,Z=Math.max(Z,L)),V=0;V<Q.length;V++){(se=Q[V]).rect.x,se.rect.y,xe=se.rect.width;const he=se.rect.height;let J=se.img;new Uint32Array(J.buffer);let X=4*xe,ie=4;if(Ie<=256&&F==0){X=Math.ceil(Z*xe/8);var I=new Uint8Array(X*he);const le=ae[V];for(let ye=0;ye<he;ye++){W=ye*X;const ce=ye*xe;if(Z==8)for(var me=0;me<xe;me++)I[W+me]=le[ce+me];else if(Z==4)for(me=0;me<xe;me++)I[W+(me>>1)]|=le[ce+me]<<4-4*(1&me);else if(Z==2)for(me=0;me<xe;me++)I[W+(me>>2)]|=le[ce+me]<<6-2*(3&me);else if(Z==1)for(me=0;me<xe;me++)I[W+(me>>3)]|=le[ce+me]<<7-1*(7&me)}J=I,G=3,ie=1}else if(U==0&&Q.length==1){I=new Uint8Array(xe*he*3);const le=xe*he;for(W=0;W<le;W++){const ye=3*W,ce=4*W;I[ye]=J[ce],I[ye+1]=J[ce+1],I[ye+2]=J[ce+2]}J=I,G=2,ie=3,X=3*xe}se.img=J,se.bpl=X,se.bpp=ie}return{ctype:G,depth:Z,plte:ne,frames:Q}}function h(P,A,H,Y,E,D,S){const z=Uint8Array,L=Uint32Array,F=new z(P[E-1]),K=new L(P[E-1]),G=E+1<P.length?new z(P[E+1]):null,Z=new z(P[E]),R=new L(Z.buffer);let V=A,ee=H,W=-1,U=-1;for(let oe=0;oe<D.height;oe++)for(let ne=0;ne<D.width;ne++){const ae=D.x+ne,ve=D.y+oe,se=ve*A+ae,xe=R[se];xe==0||Y[E-1].dispose==0&&K[se]==xe&&(G==null||G[4*se+3]!=0)||(ae<V&&(V=ae),ae>W&&(W=ae),ve<ee&&(ee=ve),ve>U&&(U=ve))}W==-1&&(V=ee=W=U=0),S&&((1&V)==1&&V--,(1&ee)==1&&ee--),D={x:V,y:ee,width:W-V+1,height:U-ee+1};const Q=Y[E];Q.rect=D,Q.blend=1,Q.img=new Uint8Array(D.width*D.height*4),Y[E-1].dispose==0?(e(F,A,H,Q.img,D.width,D.height,-D.x,-D.y,0),g(Z,A,H,Q.img,D)):e(Z,A,H,Q.img,D.width,D.height,-D.x,-D.y,0)}function g(P,A,H,Y,E){e(P,A,H,Y,E.width,E.height,-E.x,-E.y,2)}function x(P,A,H,Y,E,D,S){const z=[];let L,F=[0,1,2,3,4];D!=-1?F=[D]:(A*Y>5e5||H==1)&&(F=[0]),S&&(L={level:0});const K=o8;for(var G=0;G<F.length;G++){for(let V=0;V<A;V++)v(E,P,V,Y,H,F[G]);z.push(K.deflate(E,L))}let Z,R=1e9;for(G=0;G<z.length;G++)z[G].length<R&&(Z=G,R=z[G].length);return z[Z]}function v(P,A,H,Y,E,D){const S=H*Y;let z=S+H;if(P[z]=D,z++,D==0)if(Y<500)for(var L=0;L<Y;L++)P[z+L]=A[S+L];else P.set(new Uint8Array(A.buffer,S,Y),z);else if(D==1){for(L=0;L<E;L++)P[z+L]=A[S+L];for(L=E;L<Y;L++)P[z+L]=A[S+L]-A[S+L-E]+256&255}else if(H==0){for(L=0;L<E;L++)P[z+L]=A[S+L];if(D==2)for(L=E;L<Y;L++)P[z+L]=A[S+L];if(D==3)for(L=E;L<Y;L++)P[z+L]=A[S+L]-(A[S+L-E]>>1)+256&255;if(D==4)for(L=E;L<Y;L++)P[z+L]=A[S+L]-n(A[S+L-E],0,0)+256&255}else{if(D==2)for(L=0;L<Y;L++)P[z+L]=A[S+L]+256-A[S+L-Y]&255;if(D==3){for(L=0;L<E;L++)P[z+L]=A[S+L]+256-(A[S+L-Y]>>1)&255;for(L=E;L<Y;L++)P[z+L]=A[S+L]+256-(A[S+L-Y]+A[S+L-E]>>1)&255}if(D==4){for(L=0;L<E;L++)P[z+L]=A[S+L]+256-n(0,A[S+L-Y],0)&255;for(L=E;L<Y;L++)P[z+L]=A[S+L]+256-n(A[S+L-E],A[S+L-Y],A[S+L-E-Y])&255}}}function y(P,A){const H=new Uint8Array(P),Y=H.slice(0),E=new Uint32Array(Y.buffer),D=k(Y,A),S=D[0],z=D[1],L=H.length,F=new Uint8Array(L>>2);let K;if(H.length<2e7)for(var G=0;G<L;G+=4)K=w(S,Z=H[G]*(1/255),R=H[G+1]*(1/255),V=H[G+2]*(1/255),ee=H[G+3]*(1/255)),F[G>>2]=K.ind,E[G>>2]=K.est.rgba;else for(G=0;G<L;G+=4){var Z=H[G]*.00392156862745098,R=H[G+1]*(1/255),V=H[G+2]*(1/255),ee=H[G+3]*(1/255);for(K=S;K.left;)K=_(K.est,Z,R,V,ee)<=0?K.left:K.right;F[G>>2]=K.ind,E[G>>2]=K.est.rgba}return{abuf:Y.buffer,inds:F,plte:z}}function k(P,A,H){H==null&&(H=1e-4);const Y=new Uint32Array(P.buffer),E={i0:0,i1:P.length,bst:null,est:null,tdst:0,left:null,right:null};E.bst=B(P,E.i0,E.i1),E.est=O(E.bst);const D=[E];for(;D.length<A;){let z=0,L=0;for(var S=0;S<D.length;S++)D[S].est.L>z&&(z=D[S].est.L,L=S);if(z<H)break;const F=D[L],K=N(P,Y,F.i0,F.i1,F.est.e,F.est.eMq255);if(F.i0>=K||F.i1<=K){F.est.L=0;continue}const G={i0:F.i0,i1:K,bst:null,est:null,tdst:0,left:null,right:null};G.bst=B(P,G.i0,G.i1),G.est=O(G.bst);const Z={i0:K,i1:F.i1,bst:null,est:null,tdst:0,left:null,right:null};for(Z.bst={R:[],m:[],N:F.bst.N-G.bst.N},S=0;S<16;S++)Z.bst.R[S]=F.bst.R[S]-G.bst.R[S];for(S=0;S<4;S++)Z.bst.m[S]=F.bst.m[S]-G.bst.m[S];Z.est=O(Z.bst),F.left=G,F.right=Z,D[L]=G,D.push(Z)}for(D.sort(((z,L)=>L.bst.N-z.bst.N)),S=0;S<D.length;S++)D[S].ind=S;return[E,D]}function w(P,A,H,Y,E){if(P.left==null)return P.tdst=(function(G,Z,R,V,ee){const W=Z-G[0],U=R-G[1],Q=V-G[2],oe=ee-G[3];return W*W+U*U+Q*Q+oe*oe})(P.est.q,A,H,Y,E),P;const D=_(P.est,A,H,Y,E);let S=P.left,z=P.right;D>0&&(S=P.right,z=P.left);const L=w(S,A,H,Y,E);if(L.tdst<=D*D)return L;const F=w(z,A,H,Y,E);return F.tdst<L.tdst?F:L}function _(P,A,H,Y,E){const{e:D}=P;return D[0]*A+D[1]*H+D[2]*Y+D[3]*E-P.eMq}function N(P,A,H,Y,E,D){for(Y-=4;H<Y;){for(;T(P,H,E)<=D;)H+=4;for(;T(P,Y,E)>D;)Y-=4;if(H>=Y)break;const S=A[H>>2];A[H>>2]=A[Y>>2],A[Y>>2]=S,H+=4,Y-=4}for(;T(P,H,E)>D;)H-=4;return H+4}function T(P,A,H){return P[A]*H[0]+P[A+1]*H[1]+P[A+2]*H[2]+P[A+3]*H[3]}function B(P,A,H){const Y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],E=[0,0,0,0],D=H-A>>2;for(let S=A;S<H;S+=4){const z=P[S]*.00392156862745098,L=P[S+1]*(1/255),F=P[S+2]*(1/255),K=P[S+3]*(1/255);E[0]+=z,E[1]+=L,E[2]+=F,E[3]+=K,Y[0]+=z*z,Y[1]+=z*L,Y[2]+=z*F,Y[3]+=z*K,Y[5]+=L*L,Y[6]+=L*F,Y[7]+=L*K,Y[10]+=F*F,Y[11]+=F*K,Y[15]+=K*K}return Y[4]=Y[1],Y[8]=Y[2],Y[9]=Y[6],Y[12]=Y[3],Y[13]=Y[7],Y[14]=Y[11],{R:Y,m:E,N:D}}function O(P){const{R:A}=P,{m:H}=P,{N:Y}=P,E=H[0],D=H[1],S=H[2],z=H[3],L=Y==0?0:1/Y,F=[A[0]-E*E*L,A[1]-E*D*L,A[2]-E*S*L,A[3]-E*z*L,A[4]-D*E*L,A[5]-D*D*L,A[6]-D*S*L,A[7]-D*z*L,A[8]-S*E*L,A[9]-S*D*L,A[10]-S*S*L,A[11]-S*z*L,A[12]-z*E*L,A[13]-z*D*L,A[14]-z*S*L,A[15]-z*z*L],K=F,G=$;let Z=[Math.random(),Math.random(),Math.random(),Math.random()],R=0,V=0;if(Y!=0)for(let W=0;W<16&&(Z=G.multVec(K,Z),V=Math.sqrt(G.dot(Z,Z)),Z=G.sml(1/V,Z),!(W!=0&&Math.abs(V-R)<1e-9));W++)R=V;const ee=[E*L,D*L,S*L,z*L];return{Cov:F,q:ee,e:Z,L:R,eMq255:G.dot(G.sml(255,ee),Z),eMq:G.dot(Z,ee),rgba:(Math.round(255*ee[3])<<24|Math.round(255*ee[2])<<16|Math.round(255*ee[1])<<8|Math.round(255*ee[0])<<0)>>>0}}var $={multVec:(P,A)=>[P[0]*A[0]+P[1]*A[1]+P[2]*A[2]+P[3]*A[3],P[4]*A[0]+P[5]*A[1]+P[6]*A[2]+P[7]*A[3],P[8]*A[0]+P[9]*A[1]+P[10]*A[2]+P[11]*A[3],P[12]*A[0]+P[13]*A[1]+P[14]*A[2]+P[15]*A[3]],dot:(P,A)=>P[0]*A[0]+P[1]*A[1]+P[2]*A[2]+P[3]*A[3],sml:(P,A)=>[P*A[0],P*A[1],P*A[2],P*A[3]]};js.encode=function(A,H,Y,E,D,S,z){E==null&&(E=0),z==null&&(z=!1);const L=p(A,H,Y,E,[!1,!1,!1,0,z,!1]);return m(L,-1),u(L,H,Y,D,S)},js.encodeLL=function(A,H,Y,E,D,S,z,L){const F={ctype:0+(E==1?0:2)+(D==0?0:4),depth:S,frames:[]},K=(E+D)*S,G=K*H;for(let Z=0;Z<A.length;Z++)F.frames.push({rect:{x:0,y:0,width:H,height:Y},img:new Uint8Array(A[Z]),blend:0,dispose:1,bpp:Math.ceil(K/8),bpl:Math.ceil(G/8)});return m(F,0,!0),u(F,H,Y,z,L)},js.encode.compress=p,js.encode.dither=d,js.quantize=y,js.quantize.getKDtree=k,js.quantize.getNearest=w})();const cv={toArrayBuffer(e,t){const n=e.width,a=e.height,i=n<<2,l=e.getContext("2d").getImageData(0,0,n,a),c=new Uint32Array(l.data.buffer),d=(32*n+31)/32<<2,u=d*a,m=122+u,p=new ArrayBuffer(m),h=new DataView(p),g=1<<20;let x,v,y,k,w=g,_=0,N=0,T=0;function B(P){h.setUint16(N,P,!0),N+=2}function O(P){h.setUint32(N,P,!0),N+=4}function $(P){N+=P}B(19778),O(m),$(4),O(122),O(108),O(n),O(-a>>>0),B(1),B(32),O(3),O(u),O(2835),O(2835),$(8),O(16711680),O(65280),O(255),O(4278190080),O(1466527264),(function P(){for(;_<a&&w>0;){for(k=122+_*d,x=0;x<i;)w--,v=c[T++],y=v>>>24,h.setUint32(k+x,v<<8|y),x+=4;_++}T<c.length?(w=g,setTimeout(P,cv._dly)):t(p)})()},toBlob(e,t){this.toArrayBuffer(e,(n=>{t(new Blob([n],{type:"image/bmp"}))}))},_dly:9};var Zn={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},l8={[Zn.CHROME]:16384,[Zn.FIREFOX]:11180,[Zn.DESKTOP_SAFARI]:16384,[Zn.IE]:8192,[Zn.IOS]:4096,[Zn.ETC]:8192};const rp=typeof window<"u",dv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Nc=rp&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),c8=(rp||dv)&&(Nc&&Nc.getOriginalSymbol(window,"File")||typeof File<"u"&&File),uv=(rp||dv)&&(Nc&&Nc.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function ap(e,t,n=Date.now()){return new Promise((a=>{const i=e.split(","),l=i[0].match(/:(.*?);/)[1],c=globalThis.atob(i[1]);let d=c.length;const u=new Uint8Array(d);for(;d--;)u[d]=c.charCodeAt(d);const m=new Blob([u],{type:l});m.name=t,m.lastModified=n,a(m)}))}function fv(e){return new Promise(((t,n)=>{const a=new uv;a.onload=()=>t(a.result),a.onerror=i=>n(i),a.readAsDataURL(e)}))}function hv(e){return new Promise(((t,n)=>{const a=new Image;a.onload=()=>t(a),a.onerror=i=>n(i),a.src=e}))}function ma(){if(ma.cachedResult!==void 0)return ma.cachedResult;let e=Zn.ETC;const{userAgent:t}=navigator;return/Chrom(e|ium)/i.test(t)?e=Zn.CHROME:/iP(ad|od|hone)/i.test(t)&&/WebKit/i.test(t)?e=Zn.IOS:/Safari/i.test(t)?e=Zn.DESKTOP_SAFARI:/Firefox/i.test(t)?e=Zn.FIREFOX:(/MSIE/i.test(t)||document.documentMode)&&(e=Zn.IE),ma.cachedResult=e,ma.cachedResult}function pv(e,t){const n=ma(),a=l8[n];let i=e,l=t,c=i*l;const d=i>l?l/i:i/l;for(;c>a*a;){const u=(a+i)/2,m=(a+l)/2;u<m?(l=m,i=m*d):(l=u*d,i=u),c=i*l}return{width:i,height:l}}function Kc(e,t){let n,a;try{if(n=new OffscreenCanvas(e,t),a=n.getContext("2d"),a===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),a=n.getContext("2d")}return n.width=e,n.height=t,[n,a]}function mv(e,t){const{width:n,height:a}=pv(e.width,e.height),[i,l]=Kc(n,a);return t&&/jpe?g/.test(t)&&(l.fillStyle="white",l.fillRect(0,0,i.width,i.height)),l.drawImage(e,0,0,i.width,i.height),i}function uc(){return uc.cachedResult!==void 0||(uc.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),uc.cachedResult}function _c(e,t={}){return new Promise((function(n,a){let i,l;var c=function(){try{return l=mv(i,t.fileType||e.type),n([i,l])}catch(u){return a(u)}},d=function(u){try{var m=function(p){try{throw p}catch(h){return a(h)}};try{let p;return fv(e).then((function(h){try{return p=h,hv(p).then((function(g){try{return i=g,(function(){try{return c()}catch(x){return a(x)}})()}catch(x){return m(x)}}),m)}catch(g){return m(g)}}),m)}catch(p){m(p)}}catch(p){return a(p)}};try{if(uc()||[Zn.DESKTOP_SAFARI,Zn.MOBILE_SAFARI].includes(ma()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then((function(u){try{return i=u,c()}catch{return d()}}),d)}catch{d()}}))}function Ec(e,t,n,a,i=1){return new Promise((function(l,c){let d;if(t==="image/png"){let h,g,x;return h=e.getContext("2d"),{data:g}=h.getImageData(0,0,e.width,e.height),x=js.encode([g.buffer],e.width,e.height,4096*i),d=new Blob([x],{type:t}),d.name=n,d.lastModified=a,u.call(this)}{let h=function(){return u.call(this)};var m=h;if(t==="image/bmp")return new Promise((g=>cv.toBlob(e,g))).then(function(g){try{return d=g,d.name=n,d.lastModified=a,h.call(this)}catch(x){return c(x)}}.bind(this),c);{let g=function(){return h.call(this)};var p=g;if(typeof OffscreenCanvas=="function"&&e instanceof OffscreenCanvas)return e.convertToBlob({type:t,quality:i}).then(function(x){try{return d=x,d.name=n,d.lastModified=a,g.call(this)}catch(v){return c(v)}}.bind(this),c);{let x;return x=e.toDataURL(t,i),ap(x,n,a).then(function(v){try{return d=v,g.call(this)}catch(y){return c(y)}}.bind(this),c)}}}function u(){return l(d)}}))}function Os(e){e.width=0,e.height=0}function di(){return new Promise((function(e,t){let n,a,i,l;return di.cachedResult!==void 0?e(di.cachedResult):ap("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(c){try{return n=c,_c(n).then((function(d){try{return a=d[1],Ec(a,n.type,n.name,n.lastModified).then((function(u){try{return i=u,Os(a),_c(i).then((function(m){try{return l=m[0],di.cachedResult=l.width===1&&l.height===2,e(di.cachedResult)}catch(p){return t(p)}}),t)}catch(m){return t(m)}}),t)}catch(u){return t(u)}}),t)}catch(d){return t(d)}}),t)}))}function gv(e){return new Promise(((t,n)=>{const a=new uv;a.onload=i=>{const l=new DataView(i.target.result);if(l.getUint16(0,!1)!=65496)return t(-2);const c=l.byteLength;let d=2;for(;d<c;){if(l.getUint16(d+2,!1)<=8)return t(-1);const u=l.getUint16(d,!1);if(d+=2,u==65505){if(l.getUint32(d+=2,!1)!=1165519206)return t(-1);const m=l.getUint16(d+=6,!1)==18761;d+=l.getUint32(d+4,m);const p=l.getUint16(d,m);d+=2;for(let h=0;h<p;h++)if(l.getUint16(d+12*h,m)==274)return t(l.getUint16(d+12*h+8,m))}else{if((65280&u)!=65280)break;d+=l.getUint16(d,!1)}}return t(-1)},a.onerror=i=>n(i),a.readAsArrayBuffer(e)}))}function xv(e,t){const{width:n}=e,{height:a}=e,{maxWidthOrHeight:i}=t;let l,c=e;return isFinite(i)&&(n>i||a>i)&&([c,l]=Kc(n,a),n>a?(c.width=i,c.height=a/n*i):(c.width=n/a*i,c.height=i),l.drawImage(e,0,0,c.width,c.height),Os(e)),c}function bv(e,t){const{width:n}=e,{height:a}=e,[i,l]=Kc(n,a);switch(t>4&&t<9?(i.width=a,i.height=n):(i.width=n,i.height=a),t){case 2:l.transform(-1,0,0,1,n,0);break;case 3:l.transform(-1,0,0,-1,n,a);break;case 4:l.transform(1,0,0,-1,0,a);break;case 5:l.transform(0,1,1,0,0,0);break;case 6:l.transform(0,1,-1,0,a,0);break;case 7:l.transform(0,-1,-1,0,a,n);break;case 8:l.transform(0,-1,1,0,0,n)}return l.drawImage(e,0,0,n,a),Os(e),i}function Ax(e,t,n=0){return new Promise((function(a,i){let l,c,d,u,m,p,h,g,x,v,y,k,w,_,N,T,B,O,$,P;function A(Y=5){if(t.signal&&t.signal.aborted)throw t.signal.reason;l+=Y,t.onProgress(Math.min(l,100))}function H(Y){if(t.signal&&t.signal.aborted)throw t.signal.reason;l=Math.min(Math.max(Y,l),100),t.onProgress(l)}return l=n,c=t.maxIteration||10,d=1024*t.maxSizeMB*1024,A(),_c(e,t).then(function(Y){try{return[,u]=Y,A(),m=xv(u,t),A(),new Promise((function(E,D){var S;if(!(S=t.exifOrientation))return gv(e).then(function(L){try{return S=L,z.call(this)}catch(F){return D(F)}}.bind(this),D);function z(){return E(S)}return z.call(this)})).then(function(E){try{return p=E,A(),di().then(function(D){try{return h=D?m:bv(m,p),A(),g=t.initialQuality||1,x=t.fileType||e.type,Ec(h,x,e.name,e.lastModified,g).then(function(S){try{{let K=function(){if(c--&&(N>d||N>w)){let Z,R;return Z=P?.95*$.width:$.width,R=P?.95*$.height:$.height,[B,O]=Kc(Z,R),O.drawImage($,0,0,Z,R),g*=x==="image/png"?.85:.95,Ec(B,x,e.name,e.lastModified,g).then((function(V){try{return T=V,Os($),$=B,N=T.size,H(Math.min(99,Math.floor((_-N)/(_-d)*100))),K}catch(ee){return i(ee)}}),i)}return[1]},G=function(){return Os($),Os(B),Os(m),Os(h),Os(u),H(100),a(T)};var L=K,F=G;if(v=S,A(),y=v.size>d,k=v.size>e.size,!y&&!k)return H(100),a(v);var z;return w=e.size,_=v.size,N=_,$=h,P=!t.alwaysKeepResolution&&y,(z=function(Z){for(;Z;){if(Z.then)return void Z.then(z,i);try{if(Z.pop){if(Z.length)return Z.pop()?G.call(this):Z;Z=K}else Z=Z.call(this)}catch(R){return i(R)}}}.bind(this))(K)}}catch(K){return i(K)}}.bind(this),i)}catch(S){return i(S)}}.bind(this),i)}catch(D){return i(D)}}.bind(this),i)}catch(E){return i(E)}}.bind(this),i)}))}const d8=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let ff;function u8(e,t){return new Promise(((n,a)=>{ff||(ff=(function(c){const d=[];return d.push(c),URL.createObjectURL(new Blob(d))})(d8));const i=new Worker(ff);i.addEventListener("message",(function(c){if(t.signal&&t.signal.aborted)i.terminate();else if(c.data.progress===void 0){if(c.data.error)return a(new Error(c.data.error)),void i.terminate();n(c.data.file),i.terminate()}else t.onProgress(c.data.progress)})),i.addEventListener("error",a),t.signal&&t.signal.addEventListener("abort",(()=>{a(t.signal.reason),i.terminate()})),i.postMessage({file:e,imageCompressionLibUrl:t.libURL,options:{...t,onProgress:void 0,signal:void 0}})}))}function _n(e,t){return new Promise((function(n,a){let i,l,c,d,u,m;if(i={...t},c=0,{onProgress:d}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,u=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=x=>{c=x,typeof d=="function"&&d(c)},!(e instanceof Blob||e instanceof c8))return a(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return a(new Error("The file given is not an image"));if(m=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!u||typeof Worker!="function"||m)return Ax(e,i).then(function(x){try{return l=x,g.call(this)}catch(v){return a(v)}}.bind(this),a);var p=function(){try{return g.call(this)}catch(x){return a(x)}}.bind(this),h=function(x){try{return Ax(e,i).then((function(v){try{return l=v,p()}catch(y){return a(y)}}),a)}catch(v){return a(v)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",u8(e,i).then((function(x){try{return l=x,p()}catch{return h()}}),h)}catch{h()}function g(){try{l.name=e.name,l.lastModified=e.lastModified}catch{}try{i.preserveExif&&e.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===e.type)&&(l=lv(e,l))}catch{}return n(l)}}))}_n.getDataUrlFromFile=fv,_n.getFilefromDataUrl=ap,_n.loadImage=hv,_n.drawImageInCanvas=mv,_n.drawFileInCanvas=_c,_n.canvasToFile=Ec,_n.getExifOrientation=gv,_n.handleMaxWidthOrHeight=xv,_n.followExifOrientation=bv,_n.cleanupCanvasMemory=Os,_n.isAutoOrientationInBrowser=di,_n.approximateBelowMaximumCanvasSizeOfBrowser=pv,_n.copyExifWithoutOrientation=lv,_n.getBrowserName=ma,_n.version="2.0.2";const Tx=[{id:"desktop1-chat",name:"",location:""},{id:"desktop1-forum",name:"",location:""},{id:"desktop1-memory",name:"",location:""},{id:"desktop1-transfer",name:"",location:""},{id:"desktop2-shop",name:"",location:""},{id:"desktop2-game",name:"",location:""},{id:"desktop2-schedule",name:"",location:""},{id:"desktop2-health",name:"",location:""},{id:"bottom-organization",name:"",location:""},{id:"bottom-worldbook",name:"",location:""},{id:"bottom-settings",name:"",location:""}];function f8({onBack:e}){const[t,n]=C.useState(null),[a,i]=C.useState(!1),[l,c]=C.useState("light"),[d,u]=C.useState({}),[m,p]=C.useState(!1),h=C.useRef(null),g=C.useRef({});C.useEffect(()=>{(async()=>{try{const B=await ue.get(te.MISC,"desktop_wallpaper"),O=await ue.get(te.APPEARANCE,"desktop_color_mode")||"light";if(B)if(B.startsWith("data:"))n(B);else{const P=await wt(B);n(P)}c(O);const $={};for(const P of Tx){const A=await wt(`system-icon-${P.id}`);A&&($[P.id]=A)}u($)}catch(B){console.error("Failed to load settings:",B)}})()},[]);const x=async T=>{c(T),await ue.set(te.APPEARANCE,"desktop_color_mode",T),window.dispatchEvent(new CustomEvent("colorModeChange",{detail:T}))},v=()=>{h.current?.click()},y=async T=>{const B=T.target.files?.[0];if(B)try{const O=await ms("desktop-wallpaper",B);n(O),await ue.set(te.MISC,"desktop_wallpaper","desktop-wallpaper"),i(!0),setTimeout(()=>i(!1),2e3),window.dispatchEvent(new CustomEvent("wallpaperChange",{detail:O}))}catch(O){console.error("Failed to save wallpaper:",O)}},k=async T=>{T.stopPropagation(),n(null),await ue.delete(te.MISC,"desktop_wallpaper"),await wa("desktop-wallpaper"),i(!0),setTimeout(()=>i(!1),2e3),window.dispatchEvent(new CustomEvent("wallpaperChange",{detail:null}))},w=T=>{g.current[T]?.click()},_=async(T,B)=>{const O=B.target.files?.[0];if(O)try{const P=await _n(O,{maxSizeMB:.5,maxWidthOrHeight:512,useWebWorker:!0}),A=await ms(`system-icon-${T}`,P);u(H=>({...H,[T]:A})),p(!0),setTimeout(()=>p(!1),2e3),window.dispatchEvent(new CustomEvent("iconChange",{detail:{iconId:T,url:A}}))}catch($){console.error("Failed to save icon:",$)}},N=async(T,B)=>{B.stopPropagation();try{await wa(`system-icon-${T}`),u(O=>({...O,[T]:null})),p(!0),setTimeout(()=>p(!1),2e3),window.dispatchEvent(new CustomEvent("iconChange",{detail:{iconId:T,url:null}}))}catch(O){console.error("Failed to reset icon:",O)}};return s.jsxs(Wc,{title:"",onBack:e,children:[s.jsxs("div",{className:"space-y-6 text-slate-800",children:[s.jsx(Be,{children:(a||m)&&s.jsx(Se.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"fixed top-24 left-0 right-0 flex justify-center z-[60] pointer-events-none px-4",children:s.jsxs("div",{className:"bg-slate-800 text-white px-6 py-3 border border-slate-700 shadow-xl flex items-center gap-3 backdrop-blur-md",children:[s.jsx(kt,{className:"w-4 h-4 text-green-400",strokeWidth:3}),s.jsx("span",{className:"text-xs font-bold tracking-wider uppercase",children:a?"WALLPAPER_UPDATED":"ICON_CACHE_REFRESHED"})]})})}),s.jsxs("section",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:[s.jsx(L6,{className:"w-3 h-3"})," "]}),s.jsx("div",{className:"grid grid-cols-2 gap-3 bg-white p-2 border border-slate-200 shadow-sm",children:[{label:" (LIGHT)",value:"light",icon:jE},{label:" (DARK)",value:"dark",icon:Jy}].map(T=>s.jsxs("button",{onClick:()=>x(T.value),className:`flex items-center justify-center gap-2 py-3 border transition-all duration-200 ${l===T.value?"bg-slate-800 text-white border-slate-800 shadow-md":"bg-transparent text-slate-400 border-transparent active:bg-slate-50 active:text-slate-600 hover:bg-slate-50 hover:text-slate-600"}`,children:[s.jsx(T.icon,{className:"w-4 h-4",strokeWidth:1.5}),s.jsx("span",{className:"text-xs font-bold tracking-wide",children:T.label})]},T.value))})]}),s.jsxs("section",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:[s.jsx(uE,{className:"w-3 h-3"})," "]}),s.jsxs("div",{className:"bg-white p-4 border border-slate-200 shadow-sm relative",children:[s.jsx("div",{className:"absolute top-0 right-0 w-4 h-4 border-t-2 border-r-2 border-slate-200"}),s.jsxs("div",{className:"grid grid-cols-[80px_1fr] gap-5",children:[s.jsxs("div",{onClick:v,className:"w-[80px] aspect-[9/16] bg-slate-100 border border-slate-300 relative group cursor-pointer overflow-hidden",children:[t?s.jsx("img",{src:t,alt:"Wallpaper",className:"w-full h-full object-cover opacity-90 group-active:opacity-100 group-hover:opacity-100 transition-opacity"}):s.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-300",children:s.jsx(ba,{className:"w-5 h-5",strokeWidth:1})}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-active:opacity-100 group-hover:opacity-100 bg-slate-900/30 transition-opacity",children:s.jsx(tp,{className:"w-4 h-4 text-white"})})]}),s.jsxs("div",{className:"flex flex-col justify-between py-1",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-bold text-slate-800 uppercase tracking-wider mb-1",children:""}),s.jsx("div",{className:"text-[10px] text-slate-400 font-mono",children:"RES: AUTO-FIT"}),s.jsx("div",{className:"text-[10px] text-slate-400 font-mono",children:"FMT: JPG/PNG"})]}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsx("button",{onClick:v,className:"px-4 py-2 border border-blue-200 bg-blue-50 text-blue-600 text-[10px] font-bold active:bg-blue-100 hover:bg-blue-100 transition-colors uppercase tracking-wider",children:""}),t&&s.jsx("button",{onClick:k,className:"px-3 py-2 border border-red-200 bg-red-50 text-red-500 text-[10px] font-bold active:bg-red-100 hover:bg-red-100 transition-colors",children:s.jsx(ft,{className:"w-3 h-3"})})]})]})]})]})]}),s.jsxs("section",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:[s.jsx(Xy,{className:"w-3 h-3"})," "]}),s.jsx("div",{className:"space-y-2",children:Tx.map((T,B)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-white border border-slate-200 active:border-slate-400 hover:border-slate-400 transition-colors group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{onClick:()=>w(T.id),className:"w-10 h-10 bg-slate-50 border border-slate-200 cursor-pointer overflow-hidden relative active:border-slate-400 hover:border-slate-400 transition-colors",children:d[T.id]?s.jsx("img",{src:d[T.id],alt:T.name,className:"w-full h-full object-cover opacity-90 group-active:opacity-100 group-hover:opacity-100 transition-opacity"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300",children:s.jsx(o6,{className:"w-4 h-4"})})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-bold text-slate-700 uppercase tracking-wide",children:T.name}),s.jsx("div",{className:"text-[9px] text-slate-400 font-mono",children:T.location})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>w(T.id),className:"p-1.5 text-slate-400 active:text-slate-800 active:bg-slate-100 hover:text-slate-800 hover:bg-slate-100 transition-colors",children:s.jsx(V_,{className:"w-4 h-4",strokeWidth:1.5})}),d[T.id]&&s.jsx("button",{onClick:O=>N(T.id,O),className:"p-1.5 text-slate-300 active:text-red-500 active:bg-red-50 hover:text-red-500 hover:bg-red-50 transition-colors",children:s.jsx(ft,{className:"w-4 h-4",strokeWidth:1.5})})]}),s.jsx("input",{ref:O=>g.current[T.id]=O,type:"file",accept:"image/*",onChange:O=>_(T.id,O),className:"hidden"})]},T.id))})]})]}),s.jsx("input",{ref:h,type:"file",accept:"image/*",onChange:y,className:"hidden"})]})}function ec(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var hf={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Dx;function h8(){return Dx||(Dx=1,(function(e,t){(function(n){e.exports=n()})(function(){return(function n(a,i,l){function c(m,p){if(!i[m]){if(!a[m]){var h=typeof ec=="function"&&ec;if(!p&&h)return h(m,!0);if(d)return d(m,!0);var g=new Error("Cannot find module '"+m+"'");throw g.code="MODULE_NOT_FOUND",g}var x=i[m]={exports:{}};a[m][0].call(x.exports,function(v){var y=a[m][1][v];return c(y||v)},x,x.exports,n,a,i,l)}return i[m].exports}for(var d=typeof ec=="function"&&ec,u=0;u<l.length;u++)c(l[u]);return c})({1:[function(n,a,i){var l=n("./utils"),c=n("./support"),d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(u){for(var m,p,h,g,x,v,y,k=[],w=0,_=u.length,N=_,T=l.getTypeOf(u)!=="string";w<u.length;)N=_-w,h=T?(m=u[w++],p=w<_?u[w++]:0,w<_?u[w++]:0):(m=u.charCodeAt(w++),p=w<_?u.charCodeAt(w++):0,w<_?u.charCodeAt(w++):0),g=m>>2,x=(3&m)<<4|p>>4,v=1<N?(15&p)<<2|h>>6:64,y=2<N?63&h:64,k.push(d.charAt(g)+d.charAt(x)+d.charAt(v)+d.charAt(y));return k.join("")},i.decode=function(u){var m,p,h,g,x,v,y=0,k=0,w="data:";if(u.substr(0,w.length)===w)throw new Error("Invalid base64 input, it looks like a data url.");var _,N=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===d.charAt(64)&&N--,u.charAt(u.length-2)===d.charAt(64)&&N--,N%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_=c.uint8array?new Uint8Array(0|N):new Array(0|N);y<u.length;)m=d.indexOf(u.charAt(y++))<<2|(g=d.indexOf(u.charAt(y++)))>>4,p=(15&g)<<4|(x=d.indexOf(u.charAt(y++)))>>2,h=(3&x)<<6|(v=d.indexOf(u.charAt(y++))),_[k++]=m,x!==64&&(_[k++]=p),v!==64&&(_[k++]=h);return _}},{"./support":30,"./utils":32}],2:[function(n,a,i){var l=n("./external"),c=n("./stream/DataWorker"),d=n("./stream/Crc32Probe"),u=n("./stream/DataLengthProbe");function m(p,h,g,x,v){this.compressedSize=p,this.uncompressedSize=h,this.crc32=g,this.compression=x,this.compressedContent=v}m.prototype={getContentWorker:function(){var p=new c(l.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),h=this;return p.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),p},getCompressedWorker:function(){return new c(l.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},m.createWorkerFrom=function(p,h,g){return p.pipe(new d).pipe(new u("uncompressedSize")).pipe(h.compressWorker(g)).pipe(new u("compressedSize")).withStreamInfo("compression",h)},a.exports=m},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,a,i){var l=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new l("STORE compression")},uncompressWorker:function(){return new l("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,a,i){var l=n("./utils"),c=(function(){for(var d,u=[],m=0;m<256;m++){d=m;for(var p=0;p<8;p++)d=1&d?3988292384^d>>>1:d>>>1;u[m]=d}return u})();a.exports=function(d,u){return d!==void 0&&d.length?l.getTypeOf(d)!=="string"?(function(m,p,h,g){var x=c,v=g+h;m^=-1;for(var y=g;y<v;y++)m=m>>>8^x[255&(m^p[y])];return-1^m})(0|u,d,d.length,0):(function(m,p,h,g){var x=c,v=g+h;m^=-1;for(var y=g;y<v;y++)m=m>>>8^x[255&(m^p.charCodeAt(y))];return-1^m})(0|u,d,d.length,0):0}},{"./utils":32}],5:[function(n,a,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,a,i){var l=null;l=typeof Promise<"u"?Promise:n("lie"),a.exports={Promise:l}},{lie:37}],7:[function(n,a,i){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",c=n("pako"),d=n("./utils"),u=n("./stream/GenericWorker"),m=l?"uint8array":"array";function p(h,g){u.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=g,this.meta={}}i.magic="\b\0",d.inherits(p,u),p.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(d.transformTo(m,h.data),!1)},p.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},p.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},p.prototype._createPako=function(){this._pako=new c[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(g){h.push({data:g,meta:h.meta})}},i.compressWorker=function(h){return new p("Deflate",h)},i.uncompressWorker=function(){return new p("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,a,i){function l(x,v){var y,k="";for(y=0;y<v;y++)k+=String.fromCharCode(255&x),x>>>=8;return k}function c(x,v,y,k,w,_){var N,T,B=x.file,O=x.compression,$=_!==m.utf8encode,P=d.transformTo("string",_(B.name)),A=d.transformTo("string",m.utf8encode(B.name)),H=B.comment,Y=d.transformTo("string",_(H)),E=d.transformTo("string",m.utf8encode(H)),D=A.length!==B.name.length,S=E.length!==H.length,z="",L="",F="",K=B.dir,G=B.date,Z={crc32:0,compressedSize:0,uncompressedSize:0};v&&!y||(Z.crc32=x.crc32,Z.compressedSize=x.compressedSize,Z.uncompressedSize=x.uncompressedSize);var R=0;v&&(R|=8),$||!D&&!S||(R|=2048);var V=0,ee=0;K&&(V|=16),w==="UNIX"?(ee=798,V|=(function(U,Q){var oe=U;return U||(oe=Q?16893:33204),(65535&oe)<<16})(B.unixPermissions,K)):(ee=20,V|=(function(U){return 63&(U||0)})(B.dosPermissions)),N=G.getUTCHours(),N<<=6,N|=G.getUTCMinutes(),N<<=5,N|=G.getUTCSeconds()/2,T=G.getUTCFullYear()-1980,T<<=4,T|=G.getUTCMonth()+1,T<<=5,T|=G.getUTCDate(),D&&(L=l(1,1)+l(p(P),4)+A,z+="up"+l(L.length,2)+L),S&&(F=l(1,1)+l(p(Y),4)+E,z+="uc"+l(F.length,2)+F);var W="";return W+=`
\0`,W+=l(R,2),W+=O.magic,W+=l(N,2),W+=l(T,2),W+=l(Z.crc32,4),W+=l(Z.compressedSize,4),W+=l(Z.uncompressedSize,4),W+=l(P.length,2),W+=l(z.length,2),{fileRecord:h.LOCAL_FILE_HEADER+W+P+z,dirRecord:h.CENTRAL_FILE_HEADER+l(ee,2)+W+l(Y.length,2)+"\0\0\0\0"+l(V,4)+l(k,4)+P+z+Y}}var d=n("../utils"),u=n("../stream/GenericWorker"),m=n("../utf8"),p=n("../crc32"),h=n("../signature");function g(x,v,y,k){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=y,this.encodeFileName=k,this.streamFiles=x,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}d.inherits(g,u),g.prototype.push=function(x){var v=x.meta.percent||0,y=this.entriesCount,k=this._sources.length;this.accumulate?this.contentBuffer.push(x):(this.bytesWritten+=x.data.length,u.prototype.push.call(this,{data:x.data,meta:{currentFile:this.currentFile,percent:y?(v+100*(y-k-1))/y:100}}))},g.prototype.openedSource=function(x){this.currentSourceOffset=this.bytesWritten,this.currentFile=x.file.name;var v=this.streamFiles&&!x.file.dir;if(v){var y=c(x,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:y.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(x){this.accumulate=!1;var v=this.streamFiles&&!x.file.dir,y=c(x,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(y.dirRecord),v)this.push({data:(function(k){return h.DATA_DESCRIPTOR+l(k.crc32,4)+l(k.compressedSize,4)+l(k.uncompressedSize,4)})(x),meta:{percent:100}});else for(this.push({data:y.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var x=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var y=this.bytesWritten-x,k=(function(w,_,N,T,B){var O=d.transformTo("string",B(T));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+l(w,2)+l(w,2)+l(_,4)+l(N,4)+l(O.length,2)+O})(this.dirRecords.length,y,x,this.zipComment,this.encodeFileName);this.push({data:k,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(x){this._sources.push(x);var v=this;return x.on("data",function(y){v.processChunk(y)}),x.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),x.on("error",function(y){v.error(y)}),this},g.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(x){var v=this._sources;if(!u.prototype.error.call(this,x))return!1;for(var y=0;y<v.length;y++)try{v[y].error(x)}catch{}return!0},g.prototype.lock=function(){u.prototype.lock.call(this);for(var x=this._sources,v=0;v<x.length;v++)x[v].lock()},a.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,a,i){var l=n("../compressions"),c=n("./ZipFileWorker");i.generateWorker=function(d,u,m){var p=new c(u.streamFiles,m,u.platform,u.encodeFileName),h=0;try{d.forEach(function(g,x){h++;var v=(function(_,N){var T=_||N,B=l[T];if(!B)throw new Error(T+" is not a valid compression method !");return B})(x.options.compression,u.compression),y=x.options.compressionOptions||u.compressionOptions||{},k=x.dir,w=x.date;x._compressWorker(v,y).withStreamInfo("file",{name:g,dir:k,date:w,comment:x.comment||"",unixPermissions:x.unixPermissions,dosPermissions:x.dosPermissions}).pipe(p)}),p.entriesCount=h}catch(g){p.error(g)}return p}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,a,i){function l(){if(!(this instanceof l))return new l;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var c=new l;for(var d in this)typeof this[d]!="function"&&(c[d]=this[d]);return c}}(l.prototype=n("./object")).loadAsync=n("./load"),l.support=n("./support"),l.defaults=n("./defaults"),l.version="3.10.1",l.loadAsync=function(c,d){return new l().loadAsync(c,d)},l.external=n("./external"),a.exports=l},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,a,i){var l=n("./utils"),c=n("./external"),d=n("./utf8"),u=n("./zipEntries"),m=n("./stream/Crc32Probe"),p=n("./nodejsUtils");function h(g){return new c.Promise(function(x,v){var y=g.decompressed.getContentWorker().pipe(new m);y.on("error",function(k){v(k)}).on("end",function(){y.streamInfo.crc32!==g.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):x()}).resume()})}a.exports=function(g,x){var v=this;return x=l.extend(x||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:d.utf8decode}),p.isNode&&p.isStream(g)?c.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):l.prepareContent("the loaded zip file",g,!0,x.optimizedBinaryString,x.base64).then(function(y){var k=new u(x);return k.load(y),k}).then(function(y){var k=[c.Promise.resolve(y)],w=y.files;if(x.checkCRC32)for(var _=0;_<w.length;_++)k.push(h(w[_]));return c.Promise.all(k)}).then(function(y){for(var k=y.shift(),w=k.files,_=0;_<w.length;_++){var N=w[_],T=N.fileNameStr,B=l.resolve(N.fileNameStr);v.file(B,N.decompressed,{binary:!0,optimizedBinaryString:!0,date:N.date,dir:N.dir,comment:N.fileCommentStr.length?N.fileCommentStr:null,unixPermissions:N.unixPermissions,dosPermissions:N.dosPermissions,createFolders:x.createFolders}),N.dir||(v.file(B).unsafeOriginalName=T)}return k.zipComment.length&&(v.comment=k.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,a,i){var l=n("../utils"),c=n("../stream/GenericWorker");function d(u,m){c.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(m)}l.inherits(d,c),d.prototype._bindStream=function(u){var m=this;(this._stream=u).pause(),u.on("data",function(p){m.push({data:p,meta:{percent:0}})}).on("error",function(p){m.isPaused?this.generatedError=p:m.error(p)}).on("end",function(){m.isPaused?m._upstreamEnded=!0:m.end()})},d.prototype.pause=function(){return!!c.prototype.pause.call(this)&&(this._stream.pause(),!0)},d.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},a.exports=d},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,a,i){var l=n("readable-stream").Readable;function c(d,u,m){l.call(this,u),this._helper=d;var p=this;d.on("data",function(h,g){p.push(h)||p._helper.pause(),m&&m(g)}).on("error",function(h){p.emit("error",h)}).on("end",function(){p.push(null)})}n("../utils").inherits(c,l),c.prototype._read=function(){this._helper.resume()},a.exports=c},{"../utils":32,"readable-stream":16}],14:[function(n,a,i){a.exports={isNode:typeof Buffer<"u",newBufferFrom:function(l,c){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(l,c);if(typeof l=="number")throw new Error('The "data" argument must not be a number');return new Buffer(l,c)},allocBuffer:function(l){if(Buffer.alloc)return Buffer.alloc(l);var c=new Buffer(l);return c.fill(0),c},isBuffer:function(l){return Buffer.isBuffer(l)},isStream:function(l){return l&&typeof l.on=="function"&&typeof l.pause=="function"&&typeof l.resume=="function"}}},{}],15:[function(n,a,i){function l(B,O,$){var P,A=d.getTypeOf(O),H=d.extend($||{},p);H.date=H.date||new Date,H.compression!==null&&(H.compression=H.compression.toUpperCase()),typeof H.unixPermissions=="string"&&(H.unixPermissions=parseInt(H.unixPermissions,8)),H.unixPermissions&&16384&H.unixPermissions&&(H.dir=!0),H.dosPermissions&&16&H.dosPermissions&&(H.dir=!0),H.dir&&(B=w(B)),H.createFolders&&(P=k(B))&&_.call(this,P,!0);var Y=A==="string"&&H.binary===!1&&H.base64===!1;$&&$.binary!==void 0||(H.binary=!Y),(O instanceof h&&O.uncompressedSize===0||H.dir||!O||O.length===0)&&(H.base64=!1,H.binary=!0,O="",H.compression="STORE",A="string");var E=null;E=O instanceof h||O instanceof u?O:v.isNode&&v.isStream(O)?new y(B,O):d.prepareContent(B,O,H.binary,H.optimizedBinaryString,H.base64);var D=new g(B,E,H);this.files[B]=D}var c=n("./utf8"),d=n("./utils"),u=n("./stream/GenericWorker"),m=n("./stream/StreamHelper"),p=n("./defaults"),h=n("./compressedObject"),g=n("./zipObject"),x=n("./generate"),v=n("./nodejsUtils"),y=n("./nodejs/NodejsStreamInputAdapter"),k=function(B){B.slice(-1)==="/"&&(B=B.substring(0,B.length-1));var O=B.lastIndexOf("/");return 0<O?B.substring(0,O):""},w=function(B){return B.slice(-1)!=="/"&&(B+="/"),B},_=function(B,O){return O=O!==void 0?O:p.createFolders,B=w(B),this.files[B]||l.call(this,B,null,{dir:!0,createFolders:O}),this.files[B]};function N(B){return Object.prototype.toString.call(B)==="[object RegExp]"}var T={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(B){var O,$,P;for(O in this.files)P=this.files[O],($=O.slice(this.root.length,O.length))&&O.slice(0,this.root.length)===this.root&&B($,P)},filter:function(B){var O=[];return this.forEach(function($,P){B($,P)&&O.push(P)}),O},file:function(B,O,$){if(arguments.length!==1)return B=this.root+B,l.call(this,B,O,$),this;if(N(B)){var P=B;return this.filter(function(H,Y){return!Y.dir&&P.test(H)})}var A=this.files[this.root+B];return A&&!A.dir?A:null},folder:function(B){if(!B)return this;if(N(B))return this.filter(function(A,H){return H.dir&&B.test(A)});var O=this.root+B,$=_.call(this,O),P=this.clone();return P.root=$.name,P},remove:function(B){B=this.root+B;var O=this.files[B];if(O||(B.slice(-1)!=="/"&&(B+="/"),O=this.files[B]),O&&!O.dir)delete this.files[B];else for(var $=this.filter(function(A,H){return H.name.slice(0,B.length)===B}),P=0;P<$.length;P++)delete this.files[$[P].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(B){var O,$={};try{if(($=d.extend(B||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:c.utf8encode})).type=$.type.toLowerCase(),$.compression=$.compression.toUpperCase(),$.type==="binarystring"&&($.type="string"),!$.type)throw new Error("No output type specified.");d.checkSupport($.type),$.platform!=="darwin"&&$.platform!=="freebsd"&&$.platform!=="linux"&&$.platform!=="sunos"||($.platform="UNIX"),$.platform==="win32"&&($.platform="DOS");var P=$.comment||this.comment||"";O=x.generateWorker(this,$,P)}catch(A){(O=new u("error")).error(A)}return new m(O,$.type||"string",$.mimeType)},generateAsync:function(B,O){return this.generateInternalStream(B).accumulate(O)},generateNodeStream:function(B,O){return(B=B||{}).type||(B.type="nodebuffer"),this.generateInternalStream(B).toNodejsStream(O)}};a.exports=T},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,a,i){a.exports=n("stream")},{stream:void 0}],17:[function(n,a,i){var l=n("./DataReader");function c(d){l.call(this,d);for(var u=0;u<this.data.length;u++)d[u]=255&d[u]}n("../utils").inherits(c,l),c.prototype.byteAt=function(d){return this.data[this.zero+d]},c.prototype.lastIndexOfSignature=function(d){for(var u=d.charCodeAt(0),m=d.charCodeAt(1),p=d.charCodeAt(2),h=d.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===u&&this.data[g+1]===m&&this.data[g+2]===p&&this.data[g+3]===h)return g-this.zero;return-1},c.prototype.readAndCheckSignature=function(d){var u=d.charCodeAt(0),m=d.charCodeAt(1),p=d.charCodeAt(2),h=d.charCodeAt(3),g=this.readData(4);return u===g[0]&&m===g[1]&&p===g[2]&&h===g[3]},c.prototype.readData=function(d){if(this.checkOffset(d),d===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,u},a.exports=c},{"../utils":32,"./DataReader":18}],18:[function(n,a,i){var l=n("../utils");function c(d){this.data=d,this.length=d.length,this.index=0,this.zero=0}c.prototype={checkOffset:function(d){this.checkIndex(this.index+d)},checkIndex:function(d){if(this.length<this.zero+d||d<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+d+"). Corrupted zip ?")},setIndex:function(d){this.checkIndex(d),this.index=d},skip:function(d){this.setIndex(this.index+d)},byteAt:function(){},readInt:function(d){var u,m=0;for(this.checkOffset(d),u=this.index+d-1;u>=this.index;u--)m=(m<<8)+this.byteAt(u);return this.index+=d,m},readString:function(d){return l.transformTo("string",this.readData(d))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var d=this.readInt(4);return new Date(Date.UTC(1980+(d>>25&127),(d>>21&15)-1,d>>16&31,d>>11&31,d>>5&63,(31&d)<<1))}},a.exports=c},{"../utils":32}],19:[function(n,a,i){var l=n("./Uint8ArrayReader");function c(d){l.call(this,d)}n("../utils").inherits(c,l),c.prototype.readData=function(d){this.checkOffset(d);var u=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,u},a.exports=c},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,a,i){var l=n("./DataReader");function c(d){l.call(this,d)}n("../utils").inherits(c,l),c.prototype.byteAt=function(d){return this.data.charCodeAt(this.zero+d)},c.prototype.lastIndexOfSignature=function(d){return this.data.lastIndexOf(d)-this.zero},c.prototype.readAndCheckSignature=function(d){return d===this.readData(4)},c.prototype.readData=function(d){this.checkOffset(d);var u=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,u},a.exports=c},{"../utils":32,"./DataReader":18}],21:[function(n,a,i){var l=n("./ArrayReader");function c(d){l.call(this,d)}n("../utils").inherits(c,l),c.prototype.readData=function(d){if(this.checkOffset(d),d===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+d);return this.index+=d,u},a.exports=c},{"../utils":32,"./ArrayReader":17}],22:[function(n,a,i){var l=n("../utils"),c=n("../support"),d=n("./ArrayReader"),u=n("./StringReader"),m=n("./NodeBufferReader"),p=n("./Uint8ArrayReader");a.exports=function(h){var g=l.getTypeOf(h);return l.checkSupport(g),g!=="string"||c.uint8array?g==="nodebuffer"?new m(h):c.uint8array?new p(l.transformTo("uint8array",h)):new d(l.transformTo("array",h)):new u(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,a,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,a,i){var l=n("./GenericWorker"),c=n("../utils");function d(u){l.call(this,"ConvertWorker to "+u),this.destType=u}c.inherits(d,l),d.prototype.processChunk=function(u){this.push({data:c.transformTo(this.destType,u.data),meta:u.meta})},a.exports=d},{"../utils":32,"./GenericWorker":28}],25:[function(n,a,i){var l=n("./GenericWorker"),c=n("../crc32");function d(){l.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(d,l),d.prototype.processChunk=function(u){this.streamInfo.crc32=c(u.data,this.streamInfo.crc32||0),this.push(u)},a.exports=d},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,a,i){var l=n("../utils"),c=n("./GenericWorker");function d(u){c.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}l.inherits(d,c),d.prototype.processChunk=function(u){if(u){var m=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=m+u.data.length}c.prototype.processChunk.call(this,u)},a.exports=d},{"../utils":32,"./GenericWorker":28}],27:[function(n,a,i){var l=n("../utils"),c=n("./GenericWorker");function d(u){c.call(this,"DataWorker");var m=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(p){m.dataIsReady=!0,m.data=p,m.max=p&&p.length||0,m.type=l.getTypeOf(p),m.isPaused||m._tickAndRepeat()},function(p){m.error(p)})}l.inherits(d,c),d.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this.data=null},d.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,l.delay(this._tickAndRepeat,[],this)),!0)},d.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(l.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},d.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,m=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,m);break;case"uint8array":u=this.data.subarray(this.index,m);break;case"array":case"nodebuffer":u=this.data.slice(this.index,m)}return this.index=m,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},a.exports=d},{"../utils":32,"./GenericWorker":28}],28:[function(n,a,i){function l(c){this.name=c||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}l.prototype={push:function(c){this.emit("data",c)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(c){this.emit("error",c)}return!0},error:function(c){return!this.isFinished&&(this.isPaused?this.generatedError=c:(this.isFinished=!0,this.emit("error",c),this.previous&&this.previous.error(c),this.cleanUp()),!0)},on:function(c,d){return this._listeners[c].push(d),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(c,d){if(this._listeners[c])for(var u=0;u<this._listeners[c].length;u++)this._listeners[c][u].call(this,d)},pipe:function(c){return c.registerPrevious(this)},registerPrevious:function(c){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=c.streamInfo,this.mergeStreamInfo(),this.previous=c;var d=this;return c.on("data",function(u){d.processChunk(u)}),c.on("end",function(){d.end()}),c.on("error",function(u){d.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var c=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),c=!0),this.previous&&this.previous.resume(),!c},flush:function(){},processChunk:function(c){this.push(c)},withStreamInfo:function(c,d){return this.extraStreamInfo[c]=d,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var c in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,c)&&(this.streamInfo[c]=this.extraStreamInfo[c])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var c="Worker "+this.name;return this.previous?this.previous+" -> "+c:c}},a.exports=l},{}],29:[function(n,a,i){var l=n("../utils"),c=n("./ConvertWorker"),d=n("./GenericWorker"),u=n("../base64"),m=n("../support"),p=n("../external"),h=null;if(m.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(v,y){return new p.Promise(function(k,w){var _=[],N=v._internalType,T=v._outputType,B=v._mimeType;v.on("data",function(O,$){_.push(O),y&&y($)}).on("error",function(O){_=[],w(O)}).on("end",function(){try{var O=(function($,P,A){switch($){case"blob":return l.newBlob(l.transformTo("arraybuffer",P),A);case"base64":return u.encode(P);default:return l.transformTo($,P)}})(T,(function($,P){var A,H=0,Y=null,E=0;for(A=0;A<P.length;A++)E+=P[A].length;switch($){case"string":return P.join("");case"array":return Array.prototype.concat.apply([],P);case"uint8array":for(Y=new Uint8Array(E),A=0;A<P.length;A++)Y.set(P[A],H),H+=P[A].length;return Y;case"nodebuffer":return Buffer.concat(P);default:throw new Error("concat : unsupported type '"+$+"'")}})(N,_),B);k(O)}catch($){w($)}_=[]}).resume()})}function x(v,y,k){var w=y;switch(y){case"blob":case"arraybuffer":w="uint8array";break;case"base64":w="string"}try{this._internalType=w,this._outputType=y,this._mimeType=k,l.checkSupport(w),this._worker=v.pipe(new c(w)),v.lock()}catch(_){this._worker=new d("error"),this._worker.error(_)}}x.prototype={accumulate:function(v){return g(this,v)},on:function(v,y){var k=this;return v==="data"?this._worker.on(v,function(w){y.call(k,w.data,w.meta)}):this._worker.on(v,function(){l.delay(y,arguments,k)}),this},resume:function(){return l.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(l.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},v)}},a.exports=x},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,a,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var l=new ArrayBuffer(0);try{i.blob=new Blob([l],{type:"application/zip"}).size===0}catch{try{var c=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);c.append(l),i.blob=c.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,a,i){for(var l=n("./utils"),c=n("./support"),d=n("./nodejsUtils"),u=n("./stream/GenericWorker"),m=new Array(256),p=0;p<256;p++)m[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;m[254]=m[254]=1;function h(){u.call(this,"utf-8 decode"),this.leftOver=null}function g(){u.call(this,"utf-8 encode")}i.utf8encode=function(x){return c.nodebuffer?d.newBufferFrom(x,"utf-8"):(function(v){var y,k,w,_,N,T=v.length,B=0;for(_=0;_<T;_++)(64512&(k=v.charCodeAt(_)))==55296&&_+1<T&&(64512&(w=v.charCodeAt(_+1)))==56320&&(k=65536+(k-55296<<10)+(w-56320),_++),B+=k<128?1:k<2048?2:k<65536?3:4;for(y=c.uint8array?new Uint8Array(B):new Array(B),_=N=0;N<B;_++)(64512&(k=v.charCodeAt(_)))==55296&&_+1<T&&(64512&(w=v.charCodeAt(_+1)))==56320&&(k=65536+(k-55296<<10)+(w-56320),_++),k<128?y[N++]=k:(k<2048?y[N++]=192|k>>>6:(k<65536?y[N++]=224|k>>>12:(y[N++]=240|k>>>18,y[N++]=128|k>>>12&63),y[N++]=128|k>>>6&63),y[N++]=128|63&k);return y})(x)},i.utf8decode=function(x){return c.nodebuffer?l.transformTo("nodebuffer",x).toString("utf-8"):(function(v){var y,k,w,_,N=v.length,T=new Array(2*N);for(y=k=0;y<N;)if((w=v[y++])<128)T[k++]=w;else if(4<(_=m[w]))T[k++]=65533,y+=_-1;else{for(w&=_===2?31:_===3?15:7;1<_&&y<N;)w=w<<6|63&v[y++],_--;1<_?T[k++]=65533:w<65536?T[k++]=w:(w-=65536,T[k++]=55296|w>>10&1023,T[k++]=56320|1023&w)}return T.length!==k&&(T.subarray?T=T.subarray(0,k):T.length=k),l.applyFromCharCode(T)})(x=l.transformTo(c.uint8array?"uint8array":"array",x))},l.inherits(h,u),h.prototype.processChunk=function(x){var v=l.transformTo(c.uint8array?"uint8array":"array",x.data);if(this.leftOver&&this.leftOver.length){if(c.uint8array){var y=v;(v=new Uint8Array(y.length+this.leftOver.length)).set(this.leftOver,0),v.set(y,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var k=(function(_,N){var T;for((N=N||_.length)>_.length&&(N=_.length),T=N-1;0<=T&&(192&_[T])==128;)T--;return T<0||T===0?N:T+m[_[T]]>N?T:N})(v),w=v;k!==v.length&&(c.uint8array?(w=v.subarray(0,k),this.leftOver=v.subarray(k,v.length)):(w=v.slice(0,k),this.leftOver=v.slice(k,v.length))),this.push({data:i.utf8decode(w),meta:x.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=h,l.inherits(g,u),g.prototype.processChunk=function(x){this.push({data:i.utf8encode(x.data),meta:x.meta})},i.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,a,i){var l=n("./support"),c=n("./base64"),d=n("./nodejsUtils"),u=n("./external");function m(y){return y}function p(y,k){for(var w=0;w<y.length;++w)k[w]=255&y.charCodeAt(w);return k}n("setimmediate"),i.newBlob=function(y,k){i.checkSupport("blob");try{return new Blob([y],{type:k})}catch{try{var w=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return w.append(y),w.getBlob(k)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(y,k,w){var _=[],N=0,T=y.length;if(T<=w)return String.fromCharCode.apply(null,y);for(;N<T;)k==="array"||k==="nodebuffer"?_.push(String.fromCharCode.apply(null,y.slice(N,Math.min(N+w,T)))):_.push(String.fromCharCode.apply(null,y.subarray(N,Math.min(N+w,T)))),N+=w;return _.join("")},stringifyByChar:function(y){for(var k="",w=0;w<y.length;w++)k+=String.fromCharCode(y[w]);return k},applyCanBeUsed:{uint8array:(function(){try{return l.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return l.nodebuffer&&String.fromCharCode.apply(null,d.allocBuffer(1)).length===1}catch{return!1}})()}};function g(y){var k=65536,w=i.getTypeOf(y),_=!0;if(w==="uint8array"?_=h.applyCanBeUsed.uint8array:w==="nodebuffer"&&(_=h.applyCanBeUsed.nodebuffer),_)for(;1<k;)try{return h.stringifyByChunk(y,w,k)}catch{k=Math.floor(k/2)}return h.stringifyByChar(y)}function x(y,k){for(var w=0;w<y.length;w++)k[w]=y[w];return k}i.applyFromCharCode=g;var v={};v.string={string:m,array:function(y){return p(y,new Array(y.length))},arraybuffer:function(y){return v.string.uint8array(y).buffer},uint8array:function(y){return p(y,new Uint8Array(y.length))},nodebuffer:function(y){return p(y,d.allocBuffer(y.length))}},v.array={string:g,array:m,arraybuffer:function(y){return new Uint8Array(y).buffer},uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return d.newBufferFrom(y)}},v.arraybuffer={string:function(y){return g(new Uint8Array(y))},array:function(y){return x(new Uint8Array(y),new Array(y.byteLength))},arraybuffer:m,uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return d.newBufferFrom(new Uint8Array(y))}},v.uint8array={string:g,array:function(y){return x(y,new Array(y.length))},arraybuffer:function(y){return y.buffer},uint8array:m,nodebuffer:function(y){return d.newBufferFrom(y)}},v.nodebuffer={string:g,array:function(y){return x(y,new Array(y.length))},arraybuffer:function(y){return v.nodebuffer.uint8array(y).buffer},uint8array:function(y){return x(y,new Uint8Array(y.length))},nodebuffer:m},i.transformTo=function(y,k){if(k=k||"",!y)return k;i.checkSupport(y);var w=i.getTypeOf(k);return v[w][y](k)},i.resolve=function(y){for(var k=y.split("/"),w=[],_=0;_<k.length;_++){var N=k[_];N==="."||N===""&&_!==0&&_!==k.length-1||(N===".."?w.pop():w.push(N))}return w.join("/")},i.getTypeOf=function(y){return typeof y=="string"?"string":Object.prototype.toString.call(y)==="[object Array]"?"array":l.nodebuffer&&d.isBuffer(y)?"nodebuffer":l.uint8array&&y instanceof Uint8Array?"uint8array":l.arraybuffer&&y instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(y){if(!l[y.toLowerCase()])throw new Error(y+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(y){var k,w,_="";for(w=0;w<(y||"").length;w++)_+="\\x"+((k=y.charCodeAt(w))<16?"0":"")+k.toString(16).toUpperCase();return _},i.delay=function(y,k,w){setImmediate(function(){y.apply(w||null,k||[])})},i.inherits=function(y,k){function w(){}w.prototype=k.prototype,y.prototype=new w},i.extend=function(){var y,k,w={};for(y=0;y<arguments.length;y++)for(k in arguments[y])Object.prototype.hasOwnProperty.call(arguments[y],k)&&w[k]===void 0&&(w[k]=arguments[y][k]);return w},i.prepareContent=function(y,k,w,_,N){return u.Promise.resolve(k).then(function(T){return l.blob&&(T instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(T))!==-1)&&typeof FileReader<"u"?new u.Promise(function(B,O){var $=new FileReader;$.onload=function(P){B(P.target.result)},$.onerror=function(P){O(P.target.error)},$.readAsArrayBuffer(T)}):T}).then(function(T){var B=i.getTypeOf(T);return B?(B==="arraybuffer"?T=i.transformTo("uint8array",T):B==="string"&&(N?T=c.decode(T):w&&_!==!0&&(T=(function(O){return p(O,l.uint8array?new Uint8Array(O.length):new Array(O.length))})(T))),T):u.Promise.reject(new Error("Can't read the data of '"+y+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,a,i){var l=n("./reader/readerFor"),c=n("./utils"),d=n("./signature"),u=n("./zipEntry"),m=n("./support");function p(h){this.files=[],this.loadOptions=h}p.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+c.pretty(g)+", expected "+c.pretty(h)+")")}},isSignature:function(h,g){var x=this.reader.index;this.reader.setIndex(h);var v=this.reader.readString(4)===g;return this.reader.setIndex(x),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),g=m.uint8array?"uint8array":"array",x=c.transformTo(g,h);this.zipComment=this.loadOptions.decodeFileName(x)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,g,x,v=this.zip64EndOfCentralSize-44;0<v;)h=this.reader.readInt(2),g=this.reader.readInt(4),x=this.reader.readData(g),this.zip64ExtensibleData[h]={id:h,length:g,value:x}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,g;for(h=0;h<this.files.length;h++)g=this.files[h],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(d.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(d.CENTRAL_FILE_HEADER);)(h=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(d.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,d.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var g=h;if(this.checkSignature(d.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===c.MAX_VALUE_16BITS||this.diskWithCentralDirStart===c.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===c.MAX_VALUE_16BITS||this.centralDirRecords===c.MAX_VALUE_16BITS||this.centralDirSize===c.MAX_VALUE_32BITS||this.centralDirOffset===c.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(d.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(d.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,d.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(d.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(d.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var x=this.centralDirOffset+this.centralDirSize;this.zip64&&(x+=20,x+=12+this.zip64EndOfCentralSize);var v=g-x;if(0<v)this.isSignature(g,d.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(h){this.reader=l(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},a.exports=p},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,a,i){var l=n("./reader/readerFor"),c=n("./utils"),d=n("./compressedObject"),u=n("./crc32"),m=n("./utf8"),p=n("./compressions"),h=n("./support");function g(x,v){this.options=x,this.loadOptions=v}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(x){var v,y;if(x.skip(22),this.fileNameLength=x.readInt(2),y=x.readInt(2),this.fileName=x.readData(this.fileNameLength),x.skip(y),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=(function(k){for(var w in p)if(Object.prototype.hasOwnProperty.call(p,w)&&p[w].magic===k)return p[w];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+c.pretty(this.compressionMethod)+" unknown (inner file : "+c.transformTo("string",this.fileName)+")");this.decompressed=new d(this.compressedSize,this.uncompressedSize,this.crc32,v,x.readData(this.compressedSize))},readCentralPart:function(x){this.versionMadeBy=x.readInt(2),x.skip(2),this.bitFlag=x.readInt(2),this.compressionMethod=x.readString(2),this.date=x.readDate(),this.crc32=x.readInt(4),this.compressedSize=x.readInt(4),this.uncompressedSize=x.readInt(4);var v=x.readInt(2);if(this.extraFieldsLength=x.readInt(2),this.fileCommentLength=x.readInt(2),this.diskNumberStart=x.readInt(2),this.internalFileAttributes=x.readInt(2),this.externalFileAttributes=x.readInt(4),this.localHeaderOffset=x.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");x.skip(v),this.readExtraFields(x),this.parseZIP64ExtraField(x),this.fileComment=x.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var x=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),x==0&&(this.dosPermissions=63&this.externalFileAttributes),x==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var x=l(this.extraFields[1].value);this.uncompressedSize===c.MAX_VALUE_32BITS&&(this.uncompressedSize=x.readInt(8)),this.compressedSize===c.MAX_VALUE_32BITS&&(this.compressedSize=x.readInt(8)),this.localHeaderOffset===c.MAX_VALUE_32BITS&&(this.localHeaderOffset=x.readInt(8)),this.diskNumberStart===c.MAX_VALUE_32BITS&&(this.diskNumberStart=x.readInt(4))}},readExtraFields:function(x){var v,y,k,w=x.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});x.index+4<w;)v=x.readInt(2),y=x.readInt(2),k=x.readData(y),this.extraFields[v]={id:v,length:y,value:k};x.setIndex(w)},handleUTF8:function(){var x=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=m.utf8decode(this.fileName),this.fileCommentStr=m.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var y=c.transformTo(x,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(y)}var k=this.findExtraFieldUnicodeComment();if(k!==null)this.fileCommentStr=k;else{var w=c.transformTo(x,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(w)}}},findExtraFieldUnicodePath:function(){var x=this.extraFields[28789];if(x){var v=l(x.value);return v.readInt(1)!==1||u(this.fileName)!==v.readInt(4)?null:m.utf8decode(v.readData(x.length-5))}return null},findExtraFieldUnicodeComment:function(){var x=this.extraFields[25461];if(x){var v=l(x.value);return v.readInt(1)!==1||u(this.fileComment)!==v.readInt(4)?null:m.utf8decode(v.readData(x.length-5))}return null}},a.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,a,i){function l(v,y,k){this.name=v,this.dir=k.dir,this.date=k.date,this.comment=k.comment,this.unixPermissions=k.unixPermissions,this.dosPermissions=k.dosPermissions,this._data=y,this._dataBinary=k.binary,this.options={compression:k.compression,compressionOptions:k.compressionOptions}}var c=n("./stream/StreamHelper"),d=n("./stream/DataWorker"),u=n("./utf8"),m=n("./compressedObject"),p=n("./stream/GenericWorker");l.prototype={internalStream:function(v){var y=null,k="string";try{if(!v)throw new Error("No output type specified.");var w=(k=v.toLowerCase())==="string"||k==="text";k!=="binarystring"&&k!=="text"||(k="string"),y=this._decompressWorker();var _=!this._dataBinary;_&&!w&&(y=y.pipe(new u.Utf8EncodeWorker)),!_&&w&&(y=y.pipe(new u.Utf8DecodeWorker))}catch(N){(y=new p("error")).error(N)}return new c(y,k,"")},async:function(v,y){return this.internalStream(v).accumulate(y)},nodeStream:function(v,y){return this.internalStream(v||"nodebuffer").toNodejsStream(y)},_compressWorker:function(v,y){if(this._data instanceof m&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var k=this._decompressWorker();return this._dataBinary||(k=k.pipe(new u.Utf8EncodeWorker)),m.createWorkerFrom(k,v,y)},_decompressWorker:function(){return this._data instanceof m?this._data.getContentWorker():this._data instanceof p?this._data:new d(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},x=0;x<h.length;x++)l.prototype[h[x]]=g;a.exports=l},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,a,i){(function(l){var c,d,u=l.MutationObserver||l.WebKitMutationObserver;if(u){var m=0,p=new u(v),h=l.document.createTextNode("");p.observe(h,{characterData:!0}),c=function(){h.data=m=++m%2}}else if(l.setImmediate||l.MessageChannel===void 0)c="document"in l&&"onreadystatechange"in l.document.createElement("script")?function(){var y=l.document.createElement("script");y.onreadystatechange=function(){v(),y.onreadystatechange=null,y.parentNode.removeChild(y),y=null},l.document.documentElement.appendChild(y)}:function(){setTimeout(v,0)};else{var g=new l.MessageChannel;g.port1.onmessage=v,c=function(){g.port2.postMessage(0)}}var x=[];function v(){var y,k;d=!0;for(var w=x.length;w;){for(k=x,x=[],y=-1;++y<w;)k[y]();w=x.length}d=!1}a.exports=function(y){x.push(y)!==1||d||c()}}).call(this,typeof zl<"u"?zl:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,a,i){var l=n("immediate");function c(){}var d={},u=["REJECTED"],m=["FULFILLED"],p=["PENDING"];function h(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,w!==c&&y(this,w)}function g(w,_,N){this.promise=w,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof N=="function"&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}function x(w,_,N){l(function(){var T;try{T=_(N)}catch(B){return d.reject(w,B)}T===w?d.reject(w,new TypeError("Cannot resolve promise with itself")):d.resolve(w,T)})}function v(w){var _=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof _=="function")return function(){_.apply(w,arguments)}}function y(w,_){var N=!1;function T($){N||(N=!0,d.reject(w,$))}function B($){N||(N=!0,d.resolve(w,$))}var O=k(function(){_(B,T)});O.status==="error"&&T(O.value)}function k(w,_){var N={};try{N.value=w(_),N.status="success"}catch(T){N.status="error",N.value=T}return N}(a.exports=h).prototype.finally=function(w){if(typeof w!="function")return this;var _=this.constructor;return this.then(function(N){return _.resolve(w()).then(function(){return N})},function(N){return _.resolve(w()).then(function(){throw N})})},h.prototype.catch=function(w){return this.then(null,w)},h.prototype.then=function(w,_){if(typeof w!="function"&&this.state===m||typeof _!="function"&&this.state===u)return this;var N=new this.constructor(c);return this.state!==p?x(N,this.state===m?w:_,this.outcome):this.queue.push(new g(N,w,_)),N},g.prototype.callFulfilled=function(w){d.resolve(this.promise,w)},g.prototype.otherCallFulfilled=function(w){x(this.promise,this.onFulfilled,w)},g.prototype.callRejected=function(w){d.reject(this.promise,w)},g.prototype.otherCallRejected=function(w){x(this.promise,this.onRejected,w)},d.resolve=function(w,_){var N=k(v,_);if(N.status==="error")return d.reject(w,N.value);var T=N.value;if(T)y(w,T);else{w.state=m,w.outcome=_;for(var B=-1,O=w.queue.length;++B<O;)w.queue[B].callFulfilled(_)}return w},d.reject=function(w,_){w.state=u,w.outcome=_;for(var N=-1,T=w.queue.length;++N<T;)w.queue[N].callRejected(_);return w},h.resolve=function(w){return w instanceof this?w:d.resolve(new this(c),w)},h.reject=function(w){var _=new this(c);return d.reject(_,w)},h.all=function(w){var _=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=w.length,T=!1;if(!N)return this.resolve([]);for(var B=new Array(N),O=0,$=-1,P=new this(c);++$<N;)A(w[$],$);return P;function A(H,Y){_.resolve(H).then(function(E){B[Y]=E,++O!==N||T||(T=!0,d.resolve(P,B))},function(E){T||(T=!0,d.reject(P,E))})}},h.race=function(w){var _=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=w.length,T=!1;if(!N)return this.resolve([]);for(var B=-1,O=new this(c);++B<N;)$=w[B],_.resolve($).then(function(P){T||(T=!0,d.resolve(O,P))},function(P){T||(T=!0,d.reject(O,P))});var $;return O}},{immediate:36}],38:[function(n,a,i){var l={};(0,n("./lib/utils/common").assign)(l,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),a.exports=l},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,a,i){var l=n("./zlib/deflate"),c=n("./utils/common"),d=n("./utils/strings"),u=n("./zlib/messages"),m=n("./zlib/zstream"),p=Object.prototype.toString,h=0,g=-1,x=0,v=8;function y(w){if(!(this instanceof y))return new y(w);this.options=c.assign({level:g,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:x,to:""},w||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var N=l.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(N!==h)throw new Error(u[N]);if(_.header&&l.deflateSetHeader(this.strm,_.header),_.dictionary){var T;if(T=typeof _.dictionary=="string"?d.string2buf(_.dictionary):p.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(N=l.deflateSetDictionary(this.strm,T))!==h)throw new Error(u[N]);this._dict_set=!0}}function k(w,_){var N=new y(_);if(N.push(w,!0),N.err)throw N.msg||u[N.err];return N.result}y.prototype.push=function(w,_){var N,T,B=this.strm,O=this.options.chunkSize;if(this.ended)return!1;T=_===~~_?_:_===!0?4:0,typeof w=="string"?B.input=d.string2buf(w):p.call(w)==="[object ArrayBuffer]"?B.input=new Uint8Array(w):B.input=w,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new c.Buf8(O),B.next_out=0,B.avail_out=O),(N=l.deflate(B,T))!==1&&N!==h)return this.onEnd(N),!(this.ended=!0);B.avail_out!==0&&(B.avail_in!==0||T!==4&&T!==2)||(this.options.to==="string"?this.onData(d.buf2binstring(c.shrinkBuf(B.output,B.next_out))):this.onData(c.shrinkBuf(B.output,B.next_out)))}while((0<B.avail_in||B.avail_out===0)&&N!==1);return T===4?(N=l.deflateEnd(this.strm),this.onEnd(N),this.ended=!0,N===h):T!==2||(this.onEnd(h),!(B.avail_out=0))},y.prototype.onData=function(w){this.chunks.push(w)},y.prototype.onEnd=function(w){w===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},i.Deflate=y,i.deflate=k,i.deflateRaw=function(w,_){return(_=_||{}).raw=!0,k(w,_)},i.gzip=function(w,_){return(_=_||{}).gzip=!0,k(w,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,a,i){var l=n("./zlib/inflate"),c=n("./utils/common"),d=n("./utils/strings"),u=n("./zlib/constants"),m=n("./zlib/messages"),p=n("./zlib/zstream"),h=n("./zlib/gzheader"),g=Object.prototype.toString;function x(y){if(!(this instanceof x))return new x(y);this.options=c.assign({chunkSize:16384,windowBits:0,to:""},y||{});var k=this.options;k.raw&&0<=k.windowBits&&k.windowBits<16&&(k.windowBits=-k.windowBits,k.windowBits===0&&(k.windowBits=-15)),!(0<=k.windowBits&&k.windowBits<16)||y&&y.windowBits||(k.windowBits+=32),15<k.windowBits&&k.windowBits<48&&(15&k.windowBits)==0&&(k.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var w=l.inflateInit2(this.strm,k.windowBits);if(w!==u.Z_OK)throw new Error(m[w]);this.header=new h,l.inflateGetHeader(this.strm,this.header)}function v(y,k){var w=new x(k);if(w.push(y,!0),w.err)throw w.msg||m[w.err];return w.result}x.prototype.push=function(y,k){var w,_,N,T,B,O,$=this.strm,P=this.options.chunkSize,A=this.options.dictionary,H=!1;if(this.ended)return!1;_=k===~~k?k:k===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof y=="string"?$.input=d.binstring2buf(y):g.call(y)==="[object ArrayBuffer]"?$.input=new Uint8Array(y):$.input=y,$.next_in=0,$.avail_in=$.input.length;do{if($.avail_out===0&&($.output=new c.Buf8(P),$.next_out=0,$.avail_out=P),(w=l.inflate($,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&A&&(O=typeof A=="string"?d.string2buf(A):g.call(A)==="[object ArrayBuffer]"?new Uint8Array(A):A,w=l.inflateSetDictionary(this.strm,O)),w===u.Z_BUF_ERROR&&H===!0&&(w=u.Z_OK,H=!1),w!==u.Z_STREAM_END&&w!==u.Z_OK)return this.onEnd(w),!(this.ended=!0);$.next_out&&($.avail_out!==0&&w!==u.Z_STREAM_END&&($.avail_in!==0||_!==u.Z_FINISH&&_!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(N=d.utf8border($.output,$.next_out),T=$.next_out-N,B=d.buf2string($.output,N),$.next_out=T,$.avail_out=P-T,T&&c.arraySet($.output,$.output,N,T,0),this.onData(B)):this.onData(c.shrinkBuf($.output,$.next_out)))),$.avail_in===0&&$.avail_out===0&&(H=!0)}while((0<$.avail_in||$.avail_out===0)&&w!==u.Z_STREAM_END);return w===u.Z_STREAM_END&&(_=u.Z_FINISH),_===u.Z_FINISH?(w=l.inflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===u.Z_OK):_!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!($.avail_out=0))},x.prototype.onData=function(y){this.chunks.push(y)},x.prototype.onEnd=function(y){y===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},i.Inflate=x,i.inflate=v,i.inflateRaw=function(y,k){return(k=k||{}).raw=!0,v(y,k)},i.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,a,i){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(u){for(var m=Array.prototype.slice.call(arguments,1);m.length;){var p=m.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(var h in p)p.hasOwnProperty(h)&&(u[h]=p[h])}}return u},i.shrinkBuf=function(u,m){return u.length===m?u:u.subarray?u.subarray(0,m):(u.length=m,u)};var c={arraySet:function(u,m,p,h,g){if(m.subarray&&u.subarray)u.set(m.subarray(p,p+h),g);else for(var x=0;x<h;x++)u[g+x]=m[p+x]},flattenChunks:function(u){var m,p,h,g,x,v;for(m=h=0,p=u.length;m<p;m++)h+=u[m].length;for(v=new Uint8Array(h),m=g=0,p=u.length;m<p;m++)x=u[m],v.set(x,g),g+=x.length;return v}},d={arraySet:function(u,m,p,h,g){for(var x=0;x<h;x++)u[g+x]=m[p+x]},flattenChunks:function(u){return[].concat.apply([],u)}};i.setTyped=function(u){u?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,c)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,d))},i.setTyped(l)},{}],42:[function(n,a,i){var l=n("./common"),c=!0,d=!0;try{String.fromCharCode.apply(null,[0])}catch{c=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{d=!1}for(var u=new l.Buf8(256),m=0;m<256;m++)u[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;function p(h,g){if(g<65537&&(h.subarray&&d||!h.subarray&&c))return String.fromCharCode.apply(null,l.shrinkBuf(h,g));for(var x="",v=0;v<g;v++)x+=String.fromCharCode(h[v]);return x}u[254]=u[254]=1,i.string2buf=function(h){var g,x,v,y,k,w=h.length,_=0;for(y=0;y<w;y++)(64512&(x=h.charCodeAt(y)))==55296&&y+1<w&&(64512&(v=h.charCodeAt(y+1)))==56320&&(x=65536+(x-55296<<10)+(v-56320),y++),_+=x<128?1:x<2048?2:x<65536?3:4;for(g=new l.Buf8(_),y=k=0;k<_;y++)(64512&(x=h.charCodeAt(y)))==55296&&y+1<w&&(64512&(v=h.charCodeAt(y+1)))==56320&&(x=65536+(x-55296<<10)+(v-56320),y++),x<128?g[k++]=x:(x<2048?g[k++]=192|x>>>6:(x<65536?g[k++]=224|x>>>12:(g[k++]=240|x>>>18,g[k++]=128|x>>>12&63),g[k++]=128|x>>>6&63),g[k++]=128|63&x);return g},i.buf2binstring=function(h){return p(h,h.length)},i.binstring2buf=function(h){for(var g=new l.Buf8(h.length),x=0,v=g.length;x<v;x++)g[x]=h.charCodeAt(x);return g},i.buf2string=function(h,g){var x,v,y,k,w=g||h.length,_=new Array(2*w);for(x=v=0;x<w;)if((y=h[x++])<128)_[v++]=y;else if(4<(k=u[y]))_[v++]=65533,x+=k-1;else{for(y&=k===2?31:k===3?15:7;1<k&&x<w;)y=y<<6|63&h[x++],k--;1<k?_[v++]=65533:y<65536?_[v++]=y:(y-=65536,_[v++]=55296|y>>10&1023,_[v++]=56320|1023&y)}return p(_,v)},i.utf8border=function(h,g){var x;for((g=g||h.length)>h.length&&(g=h.length),x=g-1;0<=x&&(192&h[x])==128;)x--;return x<0||x===0?g:x+u[h[x]]>g?x:g}},{"./common":41}],43:[function(n,a,i){a.exports=function(l,c,d,u){for(var m=65535&l|0,p=l>>>16&65535|0,h=0;d!==0;){for(d-=h=2e3<d?2e3:d;p=p+(m=m+c[u++]|0)|0,--h;);m%=65521,p%=65521}return m|p<<16|0}},{}],44:[function(n,a,i){a.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,a,i){var l=(function(){for(var c,d=[],u=0;u<256;u++){c=u;for(var m=0;m<8;m++)c=1&c?3988292384^c>>>1:c>>>1;d[u]=c}return d})();a.exports=function(c,d,u,m){var p=l,h=m+u;c^=-1;for(var g=m;g<h;g++)c=c>>>8^p[255&(c^d[g])];return-1^c}},{}],46:[function(n,a,i){var l,c=n("../utils/common"),d=n("./trees"),u=n("./adler32"),m=n("./crc32"),p=n("./messages"),h=0,g=4,x=0,v=-2,y=-1,k=4,w=2,_=8,N=9,T=286,B=30,O=19,$=2*T+1,P=15,A=3,H=258,Y=H+A+1,E=42,D=113,S=1,z=2,L=3,F=4;function K(I,me){return I.msg=p[me],me}function G(I){return(I<<1)-(4<I?9:0)}function Z(I){for(var me=I.length;0<=--me;)I[me]=0}function R(I){var me=I.state,he=me.pending;he>I.avail_out&&(he=I.avail_out),he!==0&&(c.arraySet(I.output,me.pending_buf,me.pending_out,he,I.next_out),I.next_out+=he,me.pending_out+=he,I.total_out+=he,I.avail_out-=he,me.pending-=he,me.pending===0&&(me.pending_out=0))}function V(I,me){d._tr_flush_block(I,0<=I.block_start?I.block_start:-1,I.strstart-I.block_start,me),I.block_start=I.strstart,R(I.strm)}function ee(I,me){I.pending_buf[I.pending++]=me}function W(I,me){I.pending_buf[I.pending++]=me>>>8&255,I.pending_buf[I.pending++]=255&me}function U(I,me){var he,J,X=I.max_chain_length,ie=I.strstart,le=I.prev_length,ye=I.nice_match,ce=I.strstart>I.w_size-Y?I.strstart-(I.w_size-Y):0,Ce=I.window,_e=I.w_mask,je=I.prev,Re=I.strstart+H,st=Ce[ie+le-1],Oe=Ce[ie+le];I.prev_length>=I.good_match&&(X>>=2),ye>I.lookahead&&(ye=I.lookahead);do if(Ce[(he=me)+le]===Oe&&Ce[he+le-1]===st&&Ce[he]===Ce[ie]&&Ce[++he]===Ce[ie+1]){ie+=2,he++;do;while(Ce[++ie]===Ce[++he]&&Ce[++ie]===Ce[++he]&&Ce[++ie]===Ce[++he]&&Ce[++ie]===Ce[++he]&&Ce[++ie]===Ce[++he]&&Ce[++ie]===Ce[++he]&&Ce[++ie]===Ce[++he]&&Ce[++ie]===Ce[++he]&&ie<Re);if(J=H-(Re-ie),ie=Re-H,le<J){if(I.match_start=me,ye<=(le=J))break;st=Ce[ie+le-1],Oe=Ce[ie+le]}}while((me=je[me&_e])>ce&&--X!=0);return le<=I.lookahead?le:I.lookahead}function Q(I){var me,he,J,X,ie,le,ye,ce,Ce,_e,je=I.w_size;do{if(X=I.window_size-I.lookahead-I.strstart,I.strstart>=je+(je-Y)){for(c.arraySet(I.window,I.window,je,je,0),I.match_start-=je,I.strstart-=je,I.block_start-=je,me=he=I.hash_size;J=I.head[--me],I.head[me]=je<=J?J-je:0,--he;);for(me=he=je;J=I.prev[--me],I.prev[me]=je<=J?J-je:0,--he;);X+=je}if(I.strm.avail_in===0)break;if(le=I.strm,ye=I.window,ce=I.strstart+I.lookahead,Ce=X,_e=void 0,_e=le.avail_in,Ce<_e&&(_e=Ce),he=_e===0?0:(le.avail_in-=_e,c.arraySet(ye,le.input,le.next_in,_e,ce),le.state.wrap===1?le.adler=u(le.adler,ye,_e,ce):le.state.wrap===2&&(le.adler=m(le.adler,ye,_e,ce)),le.next_in+=_e,le.total_in+=_e,_e),I.lookahead+=he,I.lookahead+I.insert>=A)for(ie=I.strstart-I.insert,I.ins_h=I.window[ie],I.ins_h=(I.ins_h<<I.hash_shift^I.window[ie+1])&I.hash_mask;I.insert&&(I.ins_h=(I.ins_h<<I.hash_shift^I.window[ie+A-1])&I.hash_mask,I.prev[ie&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=ie,ie++,I.insert--,!(I.lookahead+I.insert<A)););}while(I.lookahead<Y&&I.strm.avail_in!==0)}function oe(I,me){for(var he,J;;){if(I.lookahead<Y){if(Q(I),I.lookahead<Y&&me===h)return S;if(I.lookahead===0)break}if(he=0,I.lookahead>=A&&(I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+A-1])&I.hash_mask,he=I.prev[I.strstart&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=I.strstart),he!==0&&I.strstart-he<=I.w_size-Y&&(I.match_length=U(I,he)),I.match_length>=A)if(J=d._tr_tally(I,I.strstart-I.match_start,I.match_length-A),I.lookahead-=I.match_length,I.match_length<=I.max_lazy_match&&I.lookahead>=A){for(I.match_length--;I.strstart++,I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+A-1])&I.hash_mask,he=I.prev[I.strstart&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=I.strstart,--I.match_length!=0;);I.strstart++}else I.strstart+=I.match_length,I.match_length=0,I.ins_h=I.window[I.strstart],I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+1])&I.hash_mask;else J=d._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++;if(J&&(V(I,!1),I.strm.avail_out===0))return S}return I.insert=I.strstart<A-1?I.strstart:A-1,me===g?(V(I,!0),I.strm.avail_out===0?L:F):I.last_lit&&(V(I,!1),I.strm.avail_out===0)?S:z}function ne(I,me){for(var he,J,X;;){if(I.lookahead<Y){if(Q(I),I.lookahead<Y&&me===h)return S;if(I.lookahead===0)break}if(he=0,I.lookahead>=A&&(I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+A-1])&I.hash_mask,he=I.prev[I.strstart&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=I.strstart),I.prev_length=I.match_length,I.prev_match=I.match_start,I.match_length=A-1,he!==0&&I.prev_length<I.max_lazy_match&&I.strstart-he<=I.w_size-Y&&(I.match_length=U(I,he),I.match_length<=5&&(I.strategy===1||I.match_length===A&&4096<I.strstart-I.match_start)&&(I.match_length=A-1)),I.prev_length>=A&&I.match_length<=I.prev_length){for(X=I.strstart+I.lookahead-A,J=d._tr_tally(I,I.strstart-1-I.prev_match,I.prev_length-A),I.lookahead-=I.prev_length-1,I.prev_length-=2;++I.strstart<=X&&(I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+A-1])&I.hash_mask,he=I.prev[I.strstart&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=I.strstart),--I.prev_length!=0;);if(I.match_available=0,I.match_length=A-1,I.strstart++,J&&(V(I,!1),I.strm.avail_out===0))return S}else if(I.match_available){if((J=d._tr_tally(I,0,I.window[I.strstart-1]))&&V(I,!1),I.strstart++,I.lookahead--,I.strm.avail_out===0)return S}else I.match_available=1,I.strstart++,I.lookahead--}return I.match_available&&(J=d._tr_tally(I,0,I.window[I.strstart-1]),I.match_available=0),I.insert=I.strstart<A-1?I.strstart:A-1,me===g?(V(I,!0),I.strm.avail_out===0?L:F):I.last_lit&&(V(I,!1),I.strm.avail_out===0)?S:z}function ae(I,me,he,J,X){this.good_length=I,this.max_lazy=me,this.nice_length=he,this.max_chain=J,this.func=X}function ve(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new c.Buf16(2*$),this.dyn_dtree=new c.Buf16(2*(2*B+1)),this.bl_tree=new c.Buf16(2*(2*O+1)),Z(this.dyn_ltree),Z(this.dyn_dtree),Z(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new c.Buf16(P+1),this.heap=new c.Buf16(2*T+1),Z(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new c.Buf16(2*T+1),Z(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function se(I){var me;return I&&I.state?(I.total_in=I.total_out=0,I.data_type=w,(me=I.state).pending=0,me.pending_out=0,me.wrap<0&&(me.wrap=-me.wrap),me.status=me.wrap?E:D,I.adler=me.wrap===2?0:1,me.last_flush=h,d._tr_init(me),x):K(I,v)}function xe(I){var me=se(I);return me===x&&(function(he){he.window_size=2*he.w_size,Z(he.head),he.max_lazy_match=l[he.level].max_lazy,he.good_match=l[he.level].good_length,he.nice_match=l[he.level].nice_length,he.max_chain_length=l[he.level].max_chain,he.strstart=0,he.block_start=0,he.lookahead=0,he.insert=0,he.match_length=he.prev_length=A-1,he.match_available=0,he.ins_h=0})(I.state),me}function Ie(I,me,he,J,X,ie){if(!I)return v;var le=1;if(me===y&&(me=6),J<0?(le=0,J=-J):15<J&&(le=2,J-=16),X<1||N<X||he!==_||J<8||15<J||me<0||9<me||ie<0||k<ie)return K(I,v);J===8&&(J=9);var ye=new ve;return(I.state=ye).strm=I,ye.wrap=le,ye.gzhead=null,ye.w_bits=J,ye.w_size=1<<ye.w_bits,ye.w_mask=ye.w_size-1,ye.hash_bits=X+7,ye.hash_size=1<<ye.hash_bits,ye.hash_mask=ye.hash_size-1,ye.hash_shift=~~((ye.hash_bits+A-1)/A),ye.window=new c.Buf8(2*ye.w_size),ye.head=new c.Buf16(ye.hash_size),ye.prev=new c.Buf16(ye.w_size),ye.lit_bufsize=1<<X+6,ye.pending_buf_size=4*ye.lit_bufsize,ye.pending_buf=new c.Buf8(ye.pending_buf_size),ye.d_buf=1*ye.lit_bufsize,ye.l_buf=3*ye.lit_bufsize,ye.level=me,ye.strategy=ie,ye.method=he,xe(I)}l=[new ae(0,0,0,0,function(I,me){var he=65535;for(he>I.pending_buf_size-5&&(he=I.pending_buf_size-5);;){if(I.lookahead<=1){if(Q(I),I.lookahead===0&&me===h)return S;if(I.lookahead===0)break}I.strstart+=I.lookahead,I.lookahead=0;var J=I.block_start+he;if((I.strstart===0||I.strstart>=J)&&(I.lookahead=I.strstart-J,I.strstart=J,V(I,!1),I.strm.avail_out===0)||I.strstart-I.block_start>=I.w_size-Y&&(V(I,!1),I.strm.avail_out===0))return S}return I.insert=0,me===g?(V(I,!0),I.strm.avail_out===0?L:F):(I.strstart>I.block_start&&(V(I,!1),I.strm.avail_out),S)}),new ae(4,4,8,4,oe),new ae(4,5,16,8,oe),new ae(4,6,32,32,oe),new ae(4,4,16,16,ne),new ae(8,16,32,32,ne),new ae(8,16,128,128,ne),new ae(8,32,128,256,ne),new ae(32,128,258,1024,ne),new ae(32,258,258,4096,ne)],i.deflateInit=function(I,me){return Ie(I,me,_,15,8,0)},i.deflateInit2=Ie,i.deflateReset=xe,i.deflateResetKeep=se,i.deflateSetHeader=function(I,me){return I&&I.state?I.state.wrap!==2?v:(I.state.gzhead=me,x):v},i.deflate=function(I,me){var he,J,X,ie;if(!I||!I.state||5<me||me<0)return I?K(I,v):v;if(J=I.state,!I.output||!I.input&&I.avail_in!==0||J.status===666&&me!==g)return K(I,I.avail_out===0?-5:v);if(J.strm=I,he=J.last_flush,J.last_flush=me,J.status===E)if(J.wrap===2)I.adler=0,ee(J,31),ee(J,139),ee(J,8),J.gzhead?(ee(J,(J.gzhead.text?1:0)+(J.gzhead.hcrc?2:0)+(J.gzhead.extra?4:0)+(J.gzhead.name?8:0)+(J.gzhead.comment?16:0)),ee(J,255&J.gzhead.time),ee(J,J.gzhead.time>>8&255),ee(J,J.gzhead.time>>16&255),ee(J,J.gzhead.time>>24&255),ee(J,J.level===9?2:2<=J.strategy||J.level<2?4:0),ee(J,255&J.gzhead.os),J.gzhead.extra&&J.gzhead.extra.length&&(ee(J,255&J.gzhead.extra.length),ee(J,J.gzhead.extra.length>>8&255)),J.gzhead.hcrc&&(I.adler=m(I.adler,J.pending_buf,J.pending,0)),J.gzindex=0,J.status=69):(ee(J,0),ee(J,0),ee(J,0),ee(J,0),ee(J,0),ee(J,J.level===9?2:2<=J.strategy||J.level<2?4:0),ee(J,3),J.status=D);else{var le=_+(J.w_bits-8<<4)<<8;le|=(2<=J.strategy||J.level<2?0:J.level<6?1:J.level===6?2:3)<<6,J.strstart!==0&&(le|=32),le+=31-le%31,J.status=D,W(J,le),J.strstart!==0&&(W(J,I.adler>>>16),W(J,65535&I.adler)),I.adler=1}if(J.status===69)if(J.gzhead.extra){for(X=J.pending;J.gzindex<(65535&J.gzhead.extra.length)&&(J.pending!==J.pending_buf_size||(J.gzhead.hcrc&&J.pending>X&&(I.adler=m(I.adler,J.pending_buf,J.pending-X,X)),R(I),X=J.pending,J.pending!==J.pending_buf_size));)ee(J,255&J.gzhead.extra[J.gzindex]),J.gzindex++;J.gzhead.hcrc&&J.pending>X&&(I.adler=m(I.adler,J.pending_buf,J.pending-X,X)),J.gzindex===J.gzhead.extra.length&&(J.gzindex=0,J.status=73)}else J.status=73;if(J.status===73)if(J.gzhead.name){X=J.pending;do{if(J.pending===J.pending_buf_size&&(J.gzhead.hcrc&&J.pending>X&&(I.adler=m(I.adler,J.pending_buf,J.pending-X,X)),R(I),X=J.pending,J.pending===J.pending_buf_size)){ie=1;break}ie=J.gzindex<J.gzhead.name.length?255&J.gzhead.name.charCodeAt(J.gzindex++):0,ee(J,ie)}while(ie!==0);J.gzhead.hcrc&&J.pending>X&&(I.adler=m(I.adler,J.pending_buf,J.pending-X,X)),ie===0&&(J.gzindex=0,J.status=91)}else J.status=91;if(J.status===91)if(J.gzhead.comment){X=J.pending;do{if(J.pending===J.pending_buf_size&&(J.gzhead.hcrc&&J.pending>X&&(I.adler=m(I.adler,J.pending_buf,J.pending-X,X)),R(I),X=J.pending,J.pending===J.pending_buf_size)){ie=1;break}ie=J.gzindex<J.gzhead.comment.length?255&J.gzhead.comment.charCodeAt(J.gzindex++):0,ee(J,ie)}while(ie!==0);J.gzhead.hcrc&&J.pending>X&&(I.adler=m(I.adler,J.pending_buf,J.pending-X,X)),ie===0&&(J.status=103)}else J.status=103;if(J.status===103&&(J.gzhead.hcrc?(J.pending+2>J.pending_buf_size&&R(I),J.pending+2<=J.pending_buf_size&&(ee(J,255&I.adler),ee(J,I.adler>>8&255),I.adler=0,J.status=D)):J.status=D),J.pending!==0){if(R(I),I.avail_out===0)return J.last_flush=-1,x}else if(I.avail_in===0&&G(me)<=G(he)&&me!==g)return K(I,-5);if(J.status===666&&I.avail_in!==0)return K(I,-5);if(I.avail_in!==0||J.lookahead!==0||me!==h&&J.status!==666){var ye=J.strategy===2?(function(ce,Ce){for(var _e;;){if(ce.lookahead===0&&(Q(ce),ce.lookahead===0)){if(Ce===h)return S;break}if(ce.match_length=0,_e=d._tr_tally(ce,0,ce.window[ce.strstart]),ce.lookahead--,ce.strstart++,_e&&(V(ce,!1),ce.strm.avail_out===0))return S}return ce.insert=0,Ce===g?(V(ce,!0),ce.strm.avail_out===0?L:F):ce.last_lit&&(V(ce,!1),ce.strm.avail_out===0)?S:z})(J,me):J.strategy===3?(function(ce,Ce){for(var _e,je,Re,st,Oe=ce.window;;){if(ce.lookahead<=H){if(Q(ce),ce.lookahead<=H&&Ce===h)return S;if(ce.lookahead===0)break}if(ce.match_length=0,ce.lookahead>=A&&0<ce.strstart&&(je=Oe[Re=ce.strstart-1])===Oe[++Re]&&je===Oe[++Re]&&je===Oe[++Re]){st=ce.strstart+H;do;while(je===Oe[++Re]&&je===Oe[++Re]&&je===Oe[++Re]&&je===Oe[++Re]&&je===Oe[++Re]&&je===Oe[++Re]&&je===Oe[++Re]&&je===Oe[++Re]&&Re<st);ce.match_length=H-(st-Re),ce.match_length>ce.lookahead&&(ce.match_length=ce.lookahead)}if(ce.match_length>=A?(_e=d._tr_tally(ce,1,ce.match_length-A),ce.lookahead-=ce.match_length,ce.strstart+=ce.match_length,ce.match_length=0):(_e=d._tr_tally(ce,0,ce.window[ce.strstart]),ce.lookahead--,ce.strstart++),_e&&(V(ce,!1),ce.strm.avail_out===0))return S}return ce.insert=0,Ce===g?(V(ce,!0),ce.strm.avail_out===0?L:F):ce.last_lit&&(V(ce,!1),ce.strm.avail_out===0)?S:z})(J,me):l[J.level].func(J,me);if(ye!==L&&ye!==F||(J.status=666),ye===S||ye===L)return I.avail_out===0&&(J.last_flush=-1),x;if(ye===z&&(me===1?d._tr_align(J):me!==5&&(d._tr_stored_block(J,0,0,!1),me===3&&(Z(J.head),J.lookahead===0&&(J.strstart=0,J.block_start=0,J.insert=0))),R(I),I.avail_out===0))return J.last_flush=-1,x}return me!==g?x:J.wrap<=0?1:(J.wrap===2?(ee(J,255&I.adler),ee(J,I.adler>>8&255),ee(J,I.adler>>16&255),ee(J,I.adler>>24&255),ee(J,255&I.total_in),ee(J,I.total_in>>8&255),ee(J,I.total_in>>16&255),ee(J,I.total_in>>24&255)):(W(J,I.adler>>>16),W(J,65535&I.adler)),R(I),0<J.wrap&&(J.wrap=-J.wrap),J.pending!==0?x:1)},i.deflateEnd=function(I){var me;return I&&I.state?(me=I.state.status)!==E&&me!==69&&me!==73&&me!==91&&me!==103&&me!==D&&me!==666?K(I,v):(I.state=null,me===D?K(I,-3):x):v},i.deflateSetDictionary=function(I,me){var he,J,X,ie,le,ye,ce,Ce,_e=me.length;if(!I||!I.state||(ie=(he=I.state).wrap)===2||ie===1&&he.status!==E||he.lookahead)return v;for(ie===1&&(I.adler=u(I.adler,me,_e,0)),he.wrap=0,_e>=he.w_size&&(ie===0&&(Z(he.head),he.strstart=0,he.block_start=0,he.insert=0),Ce=new c.Buf8(he.w_size),c.arraySet(Ce,me,_e-he.w_size,he.w_size,0),me=Ce,_e=he.w_size),le=I.avail_in,ye=I.next_in,ce=I.input,I.avail_in=_e,I.next_in=0,I.input=me,Q(he);he.lookahead>=A;){for(J=he.strstart,X=he.lookahead-(A-1);he.ins_h=(he.ins_h<<he.hash_shift^he.window[J+A-1])&he.hash_mask,he.prev[J&he.w_mask]=he.head[he.ins_h],he.head[he.ins_h]=J,J++,--X;);he.strstart=J,he.lookahead=A-1,Q(he)}return he.strstart+=he.lookahead,he.block_start=he.strstart,he.insert=he.lookahead,he.lookahead=0,he.match_length=he.prev_length=A-1,he.match_available=0,I.next_in=ye,I.input=ce,I.avail_in=le,he.wrap=ie,x},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,a,i){a.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,a,i){a.exports=function(l,c){var d,u,m,p,h,g,x,v,y,k,w,_,N,T,B,O,$,P,A,H,Y,E,D,S,z;d=l.state,u=l.next_in,S=l.input,m=u+(l.avail_in-5),p=l.next_out,z=l.output,h=p-(c-l.avail_out),g=p+(l.avail_out-257),x=d.dmax,v=d.wsize,y=d.whave,k=d.wnext,w=d.window,_=d.hold,N=d.bits,T=d.lencode,B=d.distcode,O=(1<<d.lenbits)-1,$=(1<<d.distbits)-1;e:do{N<15&&(_+=S[u++]<<N,N+=8,_+=S[u++]<<N,N+=8),P=T[_&O];t:for(;;){if(_>>>=A=P>>>24,N-=A,(A=P>>>16&255)===0)z[p++]=65535&P;else{if(!(16&A)){if((64&A)==0){P=T[(65535&P)+(_&(1<<A)-1)];continue t}if(32&A){d.mode=12;break e}l.msg="invalid literal/length code",d.mode=30;break e}H=65535&P,(A&=15)&&(N<A&&(_+=S[u++]<<N,N+=8),H+=_&(1<<A)-1,_>>>=A,N-=A),N<15&&(_+=S[u++]<<N,N+=8,_+=S[u++]<<N,N+=8),P=B[_&$];n:for(;;){if(_>>>=A=P>>>24,N-=A,!(16&(A=P>>>16&255))){if((64&A)==0){P=B[(65535&P)+(_&(1<<A)-1)];continue n}l.msg="invalid distance code",d.mode=30;break e}if(Y=65535&P,N<(A&=15)&&(_+=S[u++]<<N,(N+=8)<A&&(_+=S[u++]<<N,N+=8)),x<(Y+=_&(1<<A)-1)){l.msg="invalid distance too far back",d.mode=30;break e}if(_>>>=A,N-=A,(A=p-h)<Y){if(y<(A=Y-A)&&d.sane){l.msg="invalid distance too far back",d.mode=30;break e}if(D=w,(E=0)===k){if(E+=v-A,A<H){for(H-=A;z[p++]=w[E++],--A;);E=p-Y,D=z}}else if(k<A){if(E+=v+k-A,(A-=k)<H){for(H-=A;z[p++]=w[E++],--A;);if(E=0,k<H){for(H-=A=k;z[p++]=w[E++],--A;);E=p-Y,D=z}}}else if(E+=k-A,A<H){for(H-=A;z[p++]=w[E++],--A;);E=p-Y,D=z}for(;2<H;)z[p++]=D[E++],z[p++]=D[E++],z[p++]=D[E++],H-=3;H&&(z[p++]=D[E++],1<H&&(z[p++]=D[E++]))}else{for(E=p-Y;z[p++]=z[E++],z[p++]=z[E++],z[p++]=z[E++],2<(H-=3););H&&(z[p++]=z[E++],1<H&&(z[p++]=z[E++]))}break}}break}}while(u<m&&p<g);u-=H=N>>3,_&=(1<<(N-=H<<3))-1,l.next_in=u,l.next_out=p,l.avail_in=u<m?m-u+5:5-(u-m),l.avail_out=p<g?g-p+257:257-(p-g),d.hold=_,d.bits=N}},{}],49:[function(n,a,i){var l=n("../utils/common"),c=n("./adler32"),d=n("./crc32"),u=n("./inffast"),m=n("./inftrees"),p=1,h=2,g=0,x=-2,v=1,y=852,k=592;function w(E){return(E>>>24&255)+(E>>>8&65280)+((65280&E)<<8)+((255&E)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new l.Buf16(320),this.work=new l.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function N(E){var D;return E&&E.state?(D=E.state,E.total_in=E.total_out=D.total=0,E.msg="",D.wrap&&(E.adler=1&D.wrap),D.mode=v,D.last=0,D.havedict=0,D.dmax=32768,D.head=null,D.hold=0,D.bits=0,D.lencode=D.lendyn=new l.Buf32(y),D.distcode=D.distdyn=new l.Buf32(k),D.sane=1,D.back=-1,g):x}function T(E){var D;return E&&E.state?((D=E.state).wsize=0,D.whave=0,D.wnext=0,N(E)):x}function B(E,D){var S,z;return E&&E.state?(z=E.state,D<0?(S=0,D=-D):(S=1+(D>>4),D<48&&(D&=15)),D&&(D<8||15<D)?x:(z.window!==null&&z.wbits!==D&&(z.window=null),z.wrap=S,z.wbits=D,T(E))):x}function O(E,D){var S,z;return E?(z=new _,(E.state=z).window=null,(S=B(E,D))!==g&&(E.state=null),S):x}var $,P,A=!0;function H(E){if(A){var D;for($=new l.Buf32(512),P=new l.Buf32(32),D=0;D<144;)E.lens[D++]=8;for(;D<256;)E.lens[D++]=9;for(;D<280;)E.lens[D++]=7;for(;D<288;)E.lens[D++]=8;for(m(p,E.lens,0,288,$,0,E.work,{bits:9}),D=0;D<32;)E.lens[D++]=5;m(h,E.lens,0,32,P,0,E.work,{bits:5}),A=!1}E.lencode=$,E.lenbits=9,E.distcode=P,E.distbits=5}function Y(E,D,S,z){var L,F=E.state;return F.window===null&&(F.wsize=1<<F.wbits,F.wnext=0,F.whave=0,F.window=new l.Buf8(F.wsize)),z>=F.wsize?(l.arraySet(F.window,D,S-F.wsize,F.wsize,0),F.wnext=0,F.whave=F.wsize):(z<(L=F.wsize-F.wnext)&&(L=z),l.arraySet(F.window,D,S-z,L,F.wnext),(z-=L)?(l.arraySet(F.window,D,S-z,z,0),F.wnext=z,F.whave=F.wsize):(F.wnext+=L,F.wnext===F.wsize&&(F.wnext=0),F.whave<F.wsize&&(F.whave+=L))),0}i.inflateReset=T,i.inflateReset2=B,i.inflateResetKeep=N,i.inflateInit=function(E){return O(E,15)},i.inflateInit2=O,i.inflate=function(E,D){var S,z,L,F,K,G,Z,R,V,ee,W,U,Q,oe,ne,ae,ve,se,xe,Ie,I,me,he,J,X=0,ie=new l.Buf8(4),le=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!E||!E.state||!E.output||!E.input&&E.avail_in!==0)return x;(S=E.state).mode===12&&(S.mode=13),K=E.next_out,L=E.output,Z=E.avail_out,F=E.next_in,z=E.input,G=E.avail_in,R=S.hold,V=S.bits,ee=G,W=Z,me=g;e:for(;;)switch(S.mode){case v:if(S.wrap===0){S.mode=13;break}for(;V<16;){if(G===0)break e;G--,R+=z[F++]<<V,V+=8}if(2&S.wrap&&R===35615){ie[S.check=0]=255&R,ie[1]=R>>>8&255,S.check=d(S.check,ie,2,0),V=R=0,S.mode=2;break}if(S.flags=0,S.head&&(S.head.done=!1),!(1&S.wrap)||(((255&R)<<8)+(R>>8))%31){E.msg="incorrect header check",S.mode=30;break}if((15&R)!=8){E.msg="unknown compression method",S.mode=30;break}if(V-=4,I=8+(15&(R>>>=4)),S.wbits===0)S.wbits=I;else if(I>S.wbits){E.msg="invalid window size",S.mode=30;break}S.dmax=1<<I,E.adler=S.check=1,S.mode=512&R?10:12,V=R=0;break;case 2:for(;V<16;){if(G===0)break e;G--,R+=z[F++]<<V,V+=8}if(S.flags=R,(255&S.flags)!=8){E.msg="unknown compression method",S.mode=30;break}if(57344&S.flags){E.msg="unknown header flags set",S.mode=30;break}S.head&&(S.head.text=R>>8&1),512&S.flags&&(ie[0]=255&R,ie[1]=R>>>8&255,S.check=d(S.check,ie,2,0)),V=R=0,S.mode=3;case 3:for(;V<32;){if(G===0)break e;G--,R+=z[F++]<<V,V+=8}S.head&&(S.head.time=R),512&S.flags&&(ie[0]=255&R,ie[1]=R>>>8&255,ie[2]=R>>>16&255,ie[3]=R>>>24&255,S.check=d(S.check,ie,4,0)),V=R=0,S.mode=4;case 4:for(;V<16;){if(G===0)break e;G--,R+=z[F++]<<V,V+=8}S.head&&(S.head.xflags=255&R,S.head.os=R>>8),512&S.flags&&(ie[0]=255&R,ie[1]=R>>>8&255,S.check=d(S.check,ie,2,0)),V=R=0,S.mode=5;case 5:if(1024&S.flags){for(;V<16;){if(G===0)break e;G--,R+=z[F++]<<V,V+=8}S.length=R,S.head&&(S.head.extra_len=R),512&S.flags&&(ie[0]=255&R,ie[1]=R>>>8&255,S.check=d(S.check,ie,2,0)),V=R=0}else S.head&&(S.head.extra=null);S.mode=6;case 6:if(1024&S.flags&&(G<(U=S.length)&&(U=G),U&&(S.head&&(I=S.head.extra_len-S.length,S.head.extra||(S.head.extra=new Array(S.head.extra_len)),l.arraySet(S.head.extra,z,F,U,I)),512&S.flags&&(S.check=d(S.check,z,U,F)),G-=U,F+=U,S.length-=U),S.length))break e;S.length=0,S.mode=7;case 7:if(2048&S.flags){if(G===0)break e;for(U=0;I=z[F+U++],S.head&&I&&S.length<65536&&(S.head.name+=String.fromCharCode(I)),I&&U<G;);if(512&S.flags&&(S.check=d(S.check,z,U,F)),G-=U,F+=U,I)break e}else S.head&&(S.head.name=null);S.length=0,S.mode=8;case 8:if(4096&S.flags){if(G===0)break e;for(U=0;I=z[F+U++],S.head&&I&&S.length<65536&&(S.head.comment+=String.fromCharCode(I)),I&&U<G;);if(512&S.flags&&(S.check=d(S.check,z,U,F)),G-=U,F+=U,I)break e}else S.head&&(S.head.comment=null);S.mode=9;case 9:if(512&S.flags){for(;V<16;){if(G===0)break e;G--,R+=z[F++]<<V,V+=8}if(R!==(65535&S.check)){E.msg="header crc mismatch",S.mode=30;break}V=R=0}S.head&&(S.head.hcrc=S.flags>>9&1,S.head.done=!0),E.adler=S.check=0,S.mode=12;break;case 10:for(;V<32;){if(G===0)break e;G--,R+=z[F++]<<V,V+=8}E.adler=S.check=w(R),V=R=0,S.mode=11;case 11:if(S.havedict===0)return E.next_out=K,E.avail_out=Z,E.next_in=F,E.avail_in=G,S.hold=R,S.bits=V,2;E.adler=S.check=1,S.mode=12;case 12:if(D===5||D===6)break e;case 13:if(S.last){R>>>=7&V,V-=7&V,S.mode=27;break}for(;V<3;){if(G===0)break e;G--,R+=z[F++]<<V,V+=8}switch(S.last=1&R,V-=1,3&(R>>>=1)){case 0:S.mode=14;break;case 1:if(H(S),S.mode=20,D!==6)break;R>>>=2,V-=2;break e;case 2:S.mode=17;break;case 3:E.msg="invalid block type",S.mode=30}R>>>=2,V-=2;break;case 14:for(R>>>=7&V,V-=7&V;V<32;){if(G===0)break e;G--,R+=z[F++]<<V,V+=8}if((65535&R)!=(R>>>16^65535)){E.msg="invalid stored block lengths",S.mode=30;break}if(S.length=65535&R,V=R=0,S.mode=15,D===6)break e;case 15:S.mode=16;case 16:if(U=S.length){if(G<U&&(U=G),Z<U&&(U=Z),U===0)break e;l.arraySet(L,z,F,U,K),G-=U,F+=U,Z-=U,K+=U,S.length-=U;break}S.mode=12;break;case 17:for(;V<14;){if(G===0)break e;G--,R+=z[F++]<<V,V+=8}if(S.nlen=257+(31&R),R>>>=5,V-=5,S.ndist=1+(31&R),R>>>=5,V-=5,S.ncode=4+(15&R),R>>>=4,V-=4,286<S.nlen||30<S.ndist){E.msg="too many length or distance symbols",S.mode=30;break}S.have=0,S.mode=18;case 18:for(;S.have<S.ncode;){for(;V<3;){if(G===0)break e;G--,R+=z[F++]<<V,V+=8}S.lens[le[S.have++]]=7&R,R>>>=3,V-=3}for(;S.have<19;)S.lens[le[S.have++]]=0;if(S.lencode=S.lendyn,S.lenbits=7,he={bits:S.lenbits},me=m(0,S.lens,0,19,S.lencode,0,S.work,he),S.lenbits=he.bits,me){E.msg="invalid code lengths set",S.mode=30;break}S.have=0,S.mode=19;case 19:for(;S.have<S.nlen+S.ndist;){for(;ae=(X=S.lencode[R&(1<<S.lenbits)-1])>>>16&255,ve=65535&X,!((ne=X>>>24)<=V);){if(G===0)break e;G--,R+=z[F++]<<V,V+=8}if(ve<16)R>>>=ne,V-=ne,S.lens[S.have++]=ve;else{if(ve===16){for(J=ne+2;V<J;){if(G===0)break e;G--,R+=z[F++]<<V,V+=8}if(R>>>=ne,V-=ne,S.have===0){E.msg="invalid bit length repeat",S.mode=30;break}I=S.lens[S.have-1],U=3+(3&R),R>>>=2,V-=2}else if(ve===17){for(J=ne+3;V<J;){if(G===0)break e;G--,R+=z[F++]<<V,V+=8}V-=ne,I=0,U=3+(7&(R>>>=ne)),R>>>=3,V-=3}else{for(J=ne+7;V<J;){if(G===0)break e;G--,R+=z[F++]<<V,V+=8}V-=ne,I=0,U=11+(127&(R>>>=ne)),R>>>=7,V-=7}if(S.have+U>S.nlen+S.ndist){E.msg="invalid bit length repeat",S.mode=30;break}for(;U--;)S.lens[S.have++]=I}}if(S.mode===30)break;if(S.lens[256]===0){E.msg="invalid code -- missing end-of-block",S.mode=30;break}if(S.lenbits=9,he={bits:S.lenbits},me=m(p,S.lens,0,S.nlen,S.lencode,0,S.work,he),S.lenbits=he.bits,me){E.msg="invalid literal/lengths set",S.mode=30;break}if(S.distbits=6,S.distcode=S.distdyn,he={bits:S.distbits},me=m(h,S.lens,S.nlen,S.ndist,S.distcode,0,S.work,he),S.distbits=he.bits,me){E.msg="invalid distances set",S.mode=30;break}if(S.mode=20,D===6)break e;case 20:S.mode=21;case 21:if(6<=G&&258<=Z){E.next_out=K,E.avail_out=Z,E.next_in=F,E.avail_in=G,S.hold=R,S.bits=V,u(E,W),K=E.next_out,L=E.output,Z=E.avail_out,F=E.next_in,z=E.input,G=E.avail_in,R=S.hold,V=S.bits,S.mode===12&&(S.back=-1);break}for(S.back=0;ae=(X=S.lencode[R&(1<<S.lenbits)-1])>>>16&255,ve=65535&X,!((ne=X>>>24)<=V);){if(G===0)break e;G--,R+=z[F++]<<V,V+=8}if(ae&&(240&ae)==0){for(se=ne,xe=ae,Ie=ve;ae=(X=S.lencode[Ie+((R&(1<<se+xe)-1)>>se)])>>>16&255,ve=65535&X,!(se+(ne=X>>>24)<=V);){if(G===0)break e;G--,R+=z[F++]<<V,V+=8}R>>>=se,V-=se,S.back+=se}if(R>>>=ne,V-=ne,S.back+=ne,S.length=ve,ae===0){S.mode=26;break}if(32&ae){S.back=-1,S.mode=12;break}if(64&ae){E.msg="invalid literal/length code",S.mode=30;break}S.extra=15&ae,S.mode=22;case 22:if(S.extra){for(J=S.extra;V<J;){if(G===0)break e;G--,R+=z[F++]<<V,V+=8}S.length+=R&(1<<S.extra)-1,R>>>=S.extra,V-=S.extra,S.back+=S.extra}S.was=S.length,S.mode=23;case 23:for(;ae=(X=S.distcode[R&(1<<S.distbits)-1])>>>16&255,ve=65535&X,!((ne=X>>>24)<=V);){if(G===0)break e;G--,R+=z[F++]<<V,V+=8}if((240&ae)==0){for(se=ne,xe=ae,Ie=ve;ae=(X=S.distcode[Ie+((R&(1<<se+xe)-1)>>se)])>>>16&255,ve=65535&X,!(se+(ne=X>>>24)<=V);){if(G===0)break e;G--,R+=z[F++]<<V,V+=8}R>>>=se,V-=se,S.back+=se}if(R>>>=ne,V-=ne,S.back+=ne,64&ae){E.msg="invalid distance code",S.mode=30;break}S.offset=ve,S.extra=15&ae,S.mode=24;case 24:if(S.extra){for(J=S.extra;V<J;){if(G===0)break e;G--,R+=z[F++]<<V,V+=8}S.offset+=R&(1<<S.extra)-1,R>>>=S.extra,V-=S.extra,S.back+=S.extra}if(S.offset>S.dmax){E.msg="invalid distance too far back",S.mode=30;break}S.mode=25;case 25:if(Z===0)break e;if(U=W-Z,S.offset>U){if((U=S.offset-U)>S.whave&&S.sane){E.msg="invalid distance too far back",S.mode=30;break}Q=U>S.wnext?(U-=S.wnext,S.wsize-U):S.wnext-U,U>S.length&&(U=S.length),oe=S.window}else oe=L,Q=K-S.offset,U=S.length;for(Z<U&&(U=Z),Z-=U,S.length-=U;L[K++]=oe[Q++],--U;);S.length===0&&(S.mode=21);break;case 26:if(Z===0)break e;L[K++]=S.length,Z--,S.mode=21;break;case 27:if(S.wrap){for(;V<32;){if(G===0)break e;G--,R|=z[F++]<<V,V+=8}if(W-=Z,E.total_out+=W,S.total+=W,W&&(E.adler=S.check=S.flags?d(S.check,L,W,K-W):c(S.check,L,W,K-W)),W=Z,(S.flags?R:w(R))!==S.check){E.msg="incorrect data check",S.mode=30;break}V=R=0}S.mode=28;case 28:if(S.wrap&&S.flags){for(;V<32;){if(G===0)break e;G--,R+=z[F++]<<V,V+=8}if(R!==(4294967295&S.total)){E.msg="incorrect length check",S.mode=30;break}V=R=0}S.mode=29;case 29:me=1;break e;case 30:me=-3;break e;case 31:return-4;case 32:default:return x}return E.next_out=K,E.avail_out=Z,E.next_in=F,E.avail_in=G,S.hold=R,S.bits=V,(S.wsize||W!==E.avail_out&&S.mode<30&&(S.mode<27||D!==4))&&Y(E,E.output,E.next_out,W-E.avail_out)?(S.mode=31,-4):(ee-=E.avail_in,W-=E.avail_out,E.total_in+=ee,E.total_out+=W,S.total+=W,S.wrap&&W&&(E.adler=S.check=S.flags?d(S.check,L,W,E.next_out-W):c(S.check,L,W,E.next_out-W)),E.data_type=S.bits+(S.last?64:0)+(S.mode===12?128:0)+(S.mode===20||S.mode===15?256:0),(ee==0&&W===0||D===4)&&me===g&&(me=-5),me)},i.inflateEnd=function(E){if(!E||!E.state)return x;var D=E.state;return D.window&&(D.window=null),E.state=null,g},i.inflateGetHeader=function(E,D){var S;return E&&E.state?(2&(S=E.state).wrap)==0?x:((S.head=D).done=!1,g):x},i.inflateSetDictionary=function(E,D){var S,z=D.length;return E&&E.state?(S=E.state).wrap!==0&&S.mode!==11?x:S.mode===11&&c(1,D,z,0)!==S.check?-3:Y(E,D,z,z)?(S.mode=31,-4):(S.havedict=1,g):x},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,a,i){var l=n("../utils/common"),c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];a.exports=function(p,h,g,x,v,y,k,w){var _,N,T,B,O,$,P,A,H,Y=w.bits,E=0,D=0,S=0,z=0,L=0,F=0,K=0,G=0,Z=0,R=0,V=null,ee=0,W=new l.Buf16(16),U=new l.Buf16(16),Q=null,oe=0;for(E=0;E<=15;E++)W[E]=0;for(D=0;D<x;D++)W[h[g+D]]++;for(L=Y,z=15;1<=z&&W[z]===0;z--);if(z<L&&(L=z),z===0)return v[y++]=20971520,v[y++]=20971520,w.bits=1,0;for(S=1;S<z&&W[S]===0;S++);for(L<S&&(L=S),E=G=1;E<=15;E++)if(G<<=1,(G-=W[E])<0)return-1;if(0<G&&(p===0||z!==1))return-1;for(U[1]=0,E=1;E<15;E++)U[E+1]=U[E]+W[E];for(D=0;D<x;D++)h[g+D]!==0&&(k[U[h[g+D]]++]=D);if($=p===0?(V=Q=k,19):p===1?(V=c,ee-=257,Q=d,oe-=257,256):(V=u,Q=m,-1),E=S,O=y,K=D=R=0,T=-1,B=(Z=1<<(F=L))-1,p===1&&852<Z||p===2&&592<Z)return 1;for(;;){for(P=E-K,H=k[D]<$?(A=0,k[D]):k[D]>$?(A=Q[oe+k[D]],V[ee+k[D]]):(A=96,0),_=1<<E-K,S=N=1<<F;v[O+(R>>K)+(N-=_)]=P<<24|A<<16|H|0,N!==0;);for(_=1<<E-1;R&_;)_>>=1;if(_!==0?(R&=_-1,R+=_):R=0,D++,--W[E]==0){if(E===z)break;E=h[g+k[D]]}if(L<E&&(R&B)!==T){for(K===0&&(K=L),O+=S,G=1<<(F=E-K);F+K<z&&!((G-=W[F+K])<=0);)F++,G<<=1;if(Z+=1<<F,p===1&&852<Z||p===2&&592<Z)return 1;v[T=R&B]=L<<24|F<<16|O-y|0}}return R!==0&&(v[O+R]=E-K<<24|64<<16|0),w.bits=L,0}},{"../utils/common":41}],51:[function(n,a,i){a.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,a,i){var l=n("../utils/common"),c=0,d=1;function u(X){for(var ie=X.length;0<=--ie;)X[ie]=0}var m=0,p=29,h=256,g=h+1+p,x=30,v=19,y=2*g+1,k=15,w=16,_=7,N=256,T=16,B=17,O=18,$=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],P=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Y=new Array(2*(g+2));u(Y);var E=new Array(2*x);u(E);var D=new Array(512);u(D);var S=new Array(256);u(S);var z=new Array(p);u(z);var L,F,K,G=new Array(x);function Z(X,ie,le,ye,ce){this.static_tree=X,this.extra_bits=ie,this.extra_base=le,this.elems=ye,this.max_length=ce,this.has_stree=X&&X.length}function R(X,ie){this.dyn_tree=X,this.max_code=0,this.stat_desc=ie}function V(X){return X<256?D[X]:D[256+(X>>>7)]}function ee(X,ie){X.pending_buf[X.pending++]=255&ie,X.pending_buf[X.pending++]=ie>>>8&255}function W(X,ie,le){X.bi_valid>w-le?(X.bi_buf|=ie<<X.bi_valid&65535,ee(X,X.bi_buf),X.bi_buf=ie>>w-X.bi_valid,X.bi_valid+=le-w):(X.bi_buf|=ie<<X.bi_valid&65535,X.bi_valid+=le)}function U(X,ie,le){W(X,le[2*ie],le[2*ie+1])}function Q(X,ie){for(var le=0;le|=1&X,X>>>=1,le<<=1,0<--ie;);return le>>>1}function oe(X,ie,le){var ye,ce,Ce=new Array(k+1),_e=0;for(ye=1;ye<=k;ye++)Ce[ye]=_e=_e+le[ye-1]<<1;for(ce=0;ce<=ie;ce++){var je=X[2*ce+1];je!==0&&(X[2*ce]=Q(Ce[je]++,je))}}function ne(X){var ie;for(ie=0;ie<g;ie++)X.dyn_ltree[2*ie]=0;for(ie=0;ie<x;ie++)X.dyn_dtree[2*ie]=0;for(ie=0;ie<v;ie++)X.bl_tree[2*ie]=0;X.dyn_ltree[2*N]=1,X.opt_len=X.static_len=0,X.last_lit=X.matches=0}function ae(X){8<X.bi_valid?ee(X,X.bi_buf):0<X.bi_valid&&(X.pending_buf[X.pending++]=X.bi_buf),X.bi_buf=0,X.bi_valid=0}function ve(X,ie,le,ye){var ce=2*ie,Ce=2*le;return X[ce]<X[Ce]||X[ce]===X[Ce]&&ye[ie]<=ye[le]}function se(X,ie,le){for(var ye=X.heap[le],ce=le<<1;ce<=X.heap_len&&(ce<X.heap_len&&ve(ie,X.heap[ce+1],X.heap[ce],X.depth)&&ce++,!ve(ie,ye,X.heap[ce],X.depth));)X.heap[le]=X.heap[ce],le=ce,ce<<=1;X.heap[le]=ye}function xe(X,ie,le){var ye,ce,Ce,_e,je=0;if(X.last_lit!==0)for(;ye=X.pending_buf[X.d_buf+2*je]<<8|X.pending_buf[X.d_buf+2*je+1],ce=X.pending_buf[X.l_buf+je],je++,ye===0?U(X,ce,ie):(U(X,(Ce=S[ce])+h+1,ie),(_e=$[Ce])!==0&&W(X,ce-=z[Ce],_e),U(X,Ce=V(--ye),le),(_e=P[Ce])!==0&&W(X,ye-=G[Ce],_e)),je<X.last_lit;);U(X,N,ie)}function Ie(X,ie){var le,ye,ce,Ce=ie.dyn_tree,_e=ie.stat_desc.static_tree,je=ie.stat_desc.has_stree,Re=ie.stat_desc.elems,st=-1;for(X.heap_len=0,X.heap_max=y,le=0;le<Re;le++)Ce[2*le]!==0?(X.heap[++X.heap_len]=st=le,X.depth[le]=0):Ce[2*le+1]=0;for(;X.heap_len<2;)Ce[2*(ce=X.heap[++X.heap_len]=st<2?++st:0)]=1,X.depth[ce]=0,X.opt_len--,je&&(X.static_len-=_e[2*ce+1]);for(ie.max_code=st,le=X.heap_len>>1;1<=le;le--)se(X,Ce,le);for(ce=Re;le=X.heap[1],X.heap[1]=X.heap[X.heap_len--],se(X,Ce,1),ye=X.heap[1],X.heap[--X.heap_max]=le,X.heap[--X.heap_max]=ye,Ce[2*ce]=Ce[2*le]+Ce[2*ye],X.depth[ce]=(X.depth[le]>=X.depth[ye]?X.depth[le]:X.depth[ye])+1,Ce[2*le+1]=Ce[2*ye+1]=ce,X.heap[1]=ce++,se(X,Ce,1),2<=X.heap_len;);X.heap[--X.heap_max]=X.heap[1],(function(Oe,at){var ct,ht,pt,ot,$t,Dt,Kt=at.dyn_tree,Tn=at.max_code,rn=at.stat_desc.static_tree,Qt=at.stat_desc.has_stree,Dn=at.stat_desc.extra_bits,dn=at.stat_desc.extra_base,vt=at.stat_desc.max_length,Xt=0;for(ot=0;ot<=k;ot++)Oe.bl_count[ot]=0;for(Kt[2*Oe.heap[Oe.heap_max]+1]=0,ct=Oe.heap_max+1;ct<y;ct++)vt<(ot=Kt[2*Kt[2*(ht=Oe.heap[ct])+1]+1]+1)&&(ot=vt,Xt++),Kt[2*ht+1]=ot,Tn<ht||(Oe.bl_count[ot]++,$t=0,dn<=ht&&($t=Dn[ht-dn]),Dt=Kt[2*ht],Oe.opt_len+=Dt*(ot+$t),Qt&&(Oe.static_len+=Dt*(rn[2*ht+1]+$t)));if(Xt!==0){do{for(ot=vt-1;Oe.bl_count[ot]===0;)ot--;Oe.bl_count[ot]--,Oe.bl_count[ot+1]+=2,Oe.bl_count[vt]--,Xt-=2}while(0<Xt);for(ot=vt;ot!==0;ot--)for(ht=Oe.bl_count[ot];ht!==0;)Tn<(pt=Oe.heap[--ct])||(Kt[2*pt+1]!==ot&&(Oe.opt_len+=(ot-Kt[2*pt+1])*Kt[2*pt],Kt[2*pt+1]=ot),ht--)}})(X,ie),oe(Ce,st,X.bl_count)}function I(X,ie,le){var ye,ce,Ce=-1,_e=ie[1],je=0,Re=7,st=4;for(_e===0&&(Re=138,st=3),ie[2*(le+1)+1]=65535,ye=0;ye<=le;ye++)ce=_e,_e=ie[2*(ye+1)+1],++je<Re&&ce===_e||(je<st?X.bl_tree[2*ce]+=je:ce!==0?(ce!==Ce&&X.bl_tree[2*ce]++,X.bl_tree[2*T]++):je<=10?X.bl_tree[2*B]++:X.bl_tree[2*O]++,Ce=ce,st=(je=0)===_e?(Re=138,3):ce===_e?(Re=6,3):(Re=7,4))}function me(X,ie,le){var ye,ce,Ce=-1,_e=ie[1],je=0,Re=7,st=4;for(_e===0&&(Re=138,st=3),ye=0;ye<=le;ye++)if(ce=_e,_e=ie[2*(ye+1)+1],!(++je<Re&&ce===_e)){if(je<st)for(;U(X,ce,X.bl_tree),--je!=0;);else ce!==0?(ce!==Ce&&(U(X,ce,X.bl_tree),je--),U(X,T,X.bl_tree),W(X,je-3,2)):je<=10?(U(X,B,X.bl_tree),W(X,je-3,3)):(U(X,O,X.bl_tree),W(X,je-11,7));Ce=ce,st=(je=0)===_e?(Re=138,3):ce===_e?(Re=6,3):(Re=7,4)}}u(G);var he=!1;function J(X,ie,le,ye){W(X,(m<<1)+(ye?1:0),3),(function(ce,Ce,_e,je){ae(ce),ee(ce,_e),ee(ce,~_e),l.arraySet(ce.pending_buf,ce.window,Ce,_e,ce.pending),ce.pending+=_e})(X,ie,le)}i._tr_init=function(X){he||((function(){var ie,le,ye,ce,Ce,_e=new Array(k+1);for(ce=ye=0;ce<p-1;ce++)for(z[ce]=ye,ie=0;ie<1<<$[ce];ie++)S[ye++]=ce;for(S[ye-1]=ce,ce=Ce=0;ce<16;ce++)for(G[ce]=Ce,ie=0;ie<1<<P[ce];ie++)D[Ce++]=ce;for(Ce>>=7;ce<x;ce++)for(G[ce]=Ce<<7,ie=0;ie<1<<P[ce]-7;ie++)D[256+Ce++]=ce;for(le=0;le<=k;le++)_e[le]=0;for(ie=0;ie<=143;)Y[2*ie+1]=8,ie++,_e[8]++;for(;ie<=255;)Y[2*ie+1]=9,ie++,_e[9]++;for(;ie<=279;)Y[2*ie+1]=7,ie++,_e[7]++;for(;ie<=287;)Y[2*ie+1]=8,ie++,_e[8]++;for(oe(Y,g+1,_e),ie=0;ie<x;ie++)E[2*ie+1]=5,E[2*ie]=Q(ie,5);L=new Z(Y,$,h+1,g,k),F=new Z(E,P,0,x,k),K=new Z(new Array(0),A,0,v,_)})(),he=!0),X.l_desc=new R(X.dyn_ltree,L),X.d_desc=new R(X.dyn_dtree,F),X.bl_desc=new R(X.bl_tree,K),X.bi_buf=0,X.bi_valid=0,ne(X)},i._tr_stored_block=J,i._tr_flush_block=function(X,ie,le,ye){var ce,Ce,_e=0;0<X.level?(X.strm.data_type===2&&(X.strm.data_type=(function(je){var Re,st=4093624447;for(Re=0;Re<=31;Re++,st>>>=1)if(1&st&&je.dyn_ltree[2*Re]!==0)return c;if(je.dyn_ltree[18]!==0||je.dyn_ltree[20]!==0||je.dyn_ltree[26]!==0)return d;for(Re=32;Re<h;Re++)if(je.dyn_ltree[2*Re]!==0)return d;return c})(X)),Ie(X,X.l_desc),Ie(X,X.d_desc),_e=(function(je){var Re;for(I(je,je.dyn_ltree,je.l_desc.max_code),I(je,je.dyn_dtree,je.d_desc.max_code),Ie(je,je.bl_desc),Re=v-1;3<=Re&&je.bl_tree[2*H[Re]+1]===0;Re--);return je.opt_len+=3*(Re+1)+5+5+4,Re})(X),ce=X.opt_len+3+7>>>3,(Ce=X.static_len+3+7>>>3)<=ce&&(ce=Ce)):ce=Ce=le+5,le+4<=ce&&ie!==-1?J(X,ie,le,ye):X.strategy===4||Ce===ce?(W(X,2+(ye?1:0),3),xe(X,Y,E)):(W(X,4+(ye?1:0),3),(function(je,Re,st,Oe){var at;for(W(je,Re-257,5),W(je,st-1,5),W(je,Oe-4,4),at=0;at<Oe;at++)W(je,je.bl_tree[2*H[at]+1],3);me(je,je.dyn_ltree,Re-1),me(je,je.dyn_dtree,st-1)})(X,X.l_desc.max_code+1,X.d_desc.max_code+1,_e+1),xe(X,X.dyn_ltree,X.dyn_dtree)),ne(X),ye&&ae(X)},i._tr_tally=function(X,ie,le){return X.pending_buf[X.d_buf+2*X.last_lit]=ie>>>8&255,X.pending_buf[X.d_buf+2*X.last_lit+1]=255&ie,X.pending_buf[X.l_buf+X.last_lit]=255&le,X.last_lit++,ie===0?X.dyn_ltree[2*le]++:(X.matches++,ie--,X.dyn_ltree[2*(S[le]+h+1)]++,X.dyn_dtree[2*V(ie)]++),X.last_lit===X.lit_bufsize-1},i._tr_align=function(X){W(X,2,3),U(X,N,Y),(function(ie){ie.bi_valid===16?(ee(ie,ie.bi_buf),ie.bi_buf=0,ie.bi_valid=0):8<=ie.bi_valid&&(ie.pending_buf[ie.pending++]=255&ie.bi_buf,ie.bi_buf>>=8,ie.bi_valid-=8)})(X)}},{"../utils/common":41}],53:[function(n,a,i){a.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,a,i){(function(l){(function(c,d){if(!c.setImmediate){var u,m,p,h,g=1,x={},v=!1,y=c.document,k=Object.getPrototypeOf&&Object.getPrototypeOf(c);k=k&&k.setTimeout?k:c,u={}.toString.call(c.process)==="[object process]"?function(T){process.nextTick(function(){_(T)})}:(function(){if(c.postMessage&&!c.importScripts){var T=!0,B=c.onmessage;return c.onmessage=function(){T=!1},c.postMessage("","*"),c.onmessage=B,T}})()?(h="setImmediate$"+Math.random()+"$",c.addEventListener?c.addEventListener("message",N,!1):c.attachEvent("onmessage",N),function(T){c.postMessage(h+T,"*")}):c.MessageChannel?((p=new MessageChannel).port1.onmessage=function(T){_(T.data)},function(T){p.port2.postMessage(T)}):y&&"onreadystatechange"in y.createElement("script")?(m=y.documentElement,function(T){var B=y.createElement("script");B.onreadystatechange=function(){_(T),B.onreadystatechange=null,m.removeChild(B),B=null},m.appendChild(B)}):function(T){setTimeout(_,0,T)},k.setImmediate=function(T){typeof T!="function"&&(T=new Function(""+T));for(var B=new Array(arguments.length-1),O=0;O<B.length;O++)B[O]=arguments[O+1];var $={callback:T,args:B};return x[g]=$,u(g),g++},k.clearImmediate=w}function w(T){delete x[T]}function _(T){if(v)setTimeout(_,0,T);else{var B=x[T];if(B){v=!0;try{(function(O){var $=O.callback,P=O.args;switch(P.length){case 0:$();break;case 1:$(P[0]);break;case 2:$(P[0],P[1]);break;case 3:$(P[0],P[1],P[2]);break;default:$.apply(d,P)}})(B)}finally{w(T),v=!1}}}}function N(T){T.source===c&&typeof T.data=="string"&&T.data.indexOf(h)===0&&_(+T.data.slice(h.length))}})(typeof self>"u"?l===void 0?this:l:self)}).call(this,typeof zl<"u"?zl:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(hf)),hf.exports}var p8=h8();const Mx=Ic(p8);function m8({onBack:e}){const[t,n]=C.useState(!1),[a,i]=C.useState(!1),[l,c]=C.useState(!1),[d,u]=C.useState(!1),[m,p]=C.useState(!1),[h,g]=C.useState(!1),[x,v]=C.useState(!1),[y,k]=C.useState(!1),[w,_]=C.useState({totalSize:0,userDataSize:0,chatMessagesSize:0,characterDataSize:0,memoriesSize:0,chatSettingsSize:0,worldBooksSize:0,otherDataSize:0,chatImagesSize:0,otherImagesSize:0,stickersSize:0,healthScheduleSize:0,imageStats:{totalImages:0,totalSize:0,categories:{}}});C.useEffect(()=>{T()},[]);const N=(H,Y=2)=>{if(H===0)return"0 B";const E=1024,D=Y<0?0:Y,S=["B","KB","MB","GB","TB"],z=Math.floor(Math.log(H)/Math.log(E));return parseFloat((H/Math.pow(E,z)).toFixed(D))+" "+S[z]},T=async()=>{try{const H=await ue.getStoreSize(te.USER_DATA),Y=await ue.getStoreSize(te.CHAT_MESSAGES),E=await ue.getStoreSize(te.CHARACTERS),D=await ue.getStoreSize(te.CHAT_SETTINGS),S=await ue.getStoreSize(te.WORLD_BOOKS),z=await ue.getStoreSize(te.API_SETTINGS),L=await ue.getStoreSize(te.APPEARANCE),F=await ue.getStoreSize(te.MISC),K=await ue.getStoreSize(te.CHATS),G=await ue.getStoreSize(te.HEALTH),Z=await ue.getStoreSize(te.SCHEDULE),R=await ue.getStoreSize(te.STICKERS),V=await ue.getStoreSize(te.BUBBLE_PRESETS),ee=await ue.getStoreSize(te.AI_TASKS),W=await ue.get(te.CHARACTERS,"characters")||[];let U=0;W.forEach(ie=>{if(ie.memories)try{const le=JSON.stringify(ie.memories);U+=new Blob([le]).size}catch{}});const Q=Math.max(0,E-U),oe=z+L+F+K+H+D+V+ee,ne=G+Z,ae=await av(),ve=Object.values(ae).reduce((ie,{count:le})=>ie+le,0),xe=Object.values(ae).reduce((ie,{size:le})=>ie+parseFloat(le),0)*1024,I=parseFloat(ae[Sn.CHAT_IMAGES]?.size||"0.00")*1024,he=parseFloat(ae[Sn.MEMES]?.size||"0.00")*1024,J=xe-I-he,X=Y+Q+U+S+oe+xe+R+ne;_({totalSize:X,userDataSize:H,chatMessagesSize:Y,characterDataSize:Q,memoriesSize:U,chatSettingsSize:D,worldBooksSize:S,otherDataSize:oe,chatImagesSize:I,otherImagesSize:J,stickersSize:R+he,healthScheduleSize:ne,imageStats:{totalImages:ve,totalSize:xe,categories:ae}})}catch(H){console.error("Failed to load stats:",H)}},B=async()=>{g(!0);try{const Y={...await ue.exportAll(),exportTime:new Date().toISOString(),version:2},E=JSON.stringify(Y,null,2),D=new Blob([E],{type:"application/json"}),S=URL.createObjectURL(D),z=document.createElement("a");z.href=S,z.download=`touken-os-data-${new Date().getTime()}.json`,z.click(),URL.revokeObjectURL(S),u(!0),setTimeout(()=>u(!1),2e3)}catch(H){console.error("Export JSON failed:",H),alert("")}finally{g(!1)}},O=async()=>{g(!0);try{const H=new Mx,E={...await ue.exportAll(),exportTime:new Date().toISOString(),version:2};H.file("data.json",JSON.stringify(E,null,2));const D=await OA(),S=H.folder("images");for(const[K,{blob:G,category:Z}]of Object.entries(D)){const R=G.type.split("/")[1]||"png";S?.folder(Z)?.file(`${K}.${R}`,G)}const z=await H.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}}),L=URL.createObjectURL(z),F=document.createElement("a");F.href=L,F.download=`touken-os-backup-${new Date().getTime()}.zip`,F.click(),URL.revokeObjectURL(L),u(!0),setTimeout(()=>u(!1),2e3)}catch(H){console.error("Export Data failed:",H),alert("")}finally{g(!1)}},$=()=>{const H=document.createElement("input");H.type="file",H.accept=".zip,.json,application/zip,application/json",H.onchange=async Y=>{const E=Y.target.files?.[0];if(E){v(!0);try{if(E.name.endsWith(".json")){const S=await E.text(),{exportTime:z,version:L,...F}=JSON.parse(S);await ue.importAll(F)}else{const S=await Mx.loadAsync(E),z=S.file("data.json");if(!z)throw new Error("Invalid backup file: missing data.json");const L=await z.async("text"),{exportTime:F,version:K,...G}=JSON.parse(L);await ue.importAll(G);const Z=S.folder("images");if(Z){const R={},V=[];Z.forEach((ee,W)=>{W.dir||V.push(W.async("blob").then(U=>{const Q=ee.split("/"),ne=Q[Q.length-1].replace(/\.[^/.]+$/,"");R[ne]=U}))}),await Promise.all(V),Object.keys(R).length>0&&await zA(R)}}p(!0),setTimeout(()=>window.location.reload(),1500)}catch(D){console.error("Import failed:",D),alert("")}finally{v(!1)}}},H.click()},P=async()=>{k(!0);try{await ue.clearAll(),await LA(),Yf(!0),c(!0),n(!1),setTimeout(()=>window.location.reload(),1500)}catch(H){console.error("Clear failed:",H),alert("")}finally{k(!1)}},A=async()=>{k(!0);try{const Y=(await sp()).filter(E=>E.category===Sn.CHAT_IMAGES);console.log(`Deleting ${Y.length} chat images...`);for(const E of Y)await wa(E.originalKey);c(!0),i(!1),await T(),setTimeout(()=>c(!1),2e3)}catch(H){console.error("Clear chat images failed:",H),alert("")}finally{k(!1)}};return s.jsx(Wc,{title:"",onBack:e,children:s.jsxs("div",{className:"space-y-6 text-slate-800",children:[s.jsx(Be,{children:(d||m||l)&&s.jsx(Se.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"fixed top-24 left-0 right-0 flex justify-center z-[60] pointer-events-none px-4",children:s.jsxs("div",{className:"bg-slate-800 text-white px-5 py-3 border border-slate-700 shadow-xl flex items-center gap-3 backdrop-blur-md",children:[s.jsx(kt,{className:"w-4 h-4 text-green-400",strokeWidth:3}),s.jsxs("span",{className:"text-xs font-bold tracking-wider uppercase",children:[d&&"ARCHIVE_EXPORT_COMPLETE",m&&"DATA_RESTORED_REBOOTING",l&&"OPERATION_COMPLETE"]})]})})}),s.jsxs("div",{className:"bg-white p-5 border border-slate-300 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 w-2 h-2 border-l-2 border-t-2 border-slate-800"}),s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(c6,{className:"w-5 h-5 text-slate-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xs font-bold text-slate-500 tracking-widest uppercase",children:""}),s.jsx("p",{className:"text-[10px] text-slate-400 font-mono",children:"STATUS: MOUNTED"})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:"text-xl font-black text-slate-800 tracking-tighter",children:N(w.totalSize).split(" ")[0]}),s.jsx("span",{className:"text-xs text-slate-400 font-bold ml-1",children:N(w.totalSize).split(" ")[1]})]})]}),s.jsxs("div",{className:"h-3 w-full bg-slate-100 border border-slate-200 flex mb-6",children:[s.jsx("div",{className:"bg-blue-600 h-full border-r border-white",style:{width:`${Math.min(100,w.chatMessagesSize/w.totalSize*100)}%`}}),s.jsx("div",{className:"bg-purple-500 h-full border-r border-white",style:{width:`${Math.min(100,w.characterDataSize/w.totalSize*100)}%`}}),s.jsx("div",{className:"bg-emerald-500 h-full border-r border-white",style:{width:`${Math.min(100,w.chatImagesSize/w.totalSize*100)}%`}}),s.jsx("div",{className:"bg-teal-500 h-full border-r border-white",style:{width:`${Math.min(100,w.otherImagesSize/w.totalSize*100)}%`}}),s.jsx("div",{className:"bg-orange-500 h-full border-r border-white",style:{width:`${Math.min(100,w.worldBooksSize/w.totalSize*100)}%`}}),s.jsx("div",{className:"bg-indigo-500 h-full border-r border-white",style:{width:`${Math.min(100,w.memoriesSize/w.totalSize*100)}%`}}),s.jsx("div",{className:"bg-pink-500 h-full border-r border-white",style:{width:`${Math.min(100,w.stickersSize/w.totalSize*100)}%`}}),s.jsx("div",{className:"bg-cyan-500 h-full border-r border-white",style:{width:`${Math.min(100,w.healthScheduleSize/w.totalSize*100)}%`}}),s.jsx("div",{className:"bg-slate-500 h-full",style:{width:`${Math.min(100,w.otherDataSize/w.totalSize*100)}%`}})]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{label:"",value:w.chatMessagesSize,icon:I6,color:"text-blue-600"},{label:"",value:w.characterDataSize,icon:fs,color:"text-purple-600"},{label:"",value:w.chatImagesSize,icon:ba,color:"text-emerald-600"},{label:"",value:w.stickersSize,icon:kE,color:"text-pink-600"},{label:"",value:w.otherImagesSize,icon:ba,color:"text-teal-600"},{label:"",value:w.worldBooksSize,icon:Yy,color:"text-orange-600"},{label:"",value:w.memoriesSize,icon:qy,color:"text-indigo-600"},{label:"",value:w.otherDataSize,icon:Cc,color:"text-slate-600"},{label:"",value:w.healthScheduleSize,icon:cr,color:"text-cyan-600"}].map((H,Y)=>s.jsxs("div",{className:"flex items-center justify-between p-2 border border-slate-100 bg-slate-50/50",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(H.icon,{className:`w-3 h-3 ${H.color}`}),s.jsx("span",{className:`text-[10px] font-bold ${H.color}`,children:H.label})]}),s.jsx("span",{className:"text-[10px] font-mono text-slate-500",children:N(H.value)})]},Y))})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-3 ml-1 flex items-center gap-2",children:[s.jsx(ep,{className:"w-3 h-3"})," "]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("button",{onClick:B,disabled:h,className:"p-4 bg-white border border-slate-300 active:border-slate-800 hover:border-slate-800 active:bg-slate-50 transition-all flex flex-col gap-2 group",children:[s.jsxs("div",{className:"flex items-center justify-between w-full mb-1",children:[s.jsx(Jh,{className:"w-5 h-5 text-slate-400 group-active:text-slate-800 group-hover:text-slate-800 transition-colors"}),s.jsx("span",{className:"text-[9px] font-mono text-slate-300 group-active:text-slate-500 group-hover:text-slate-500",children:"JSON"})]}),s.jsxs("div",{className:"text-left",children:[s.jsx("h3",{className:"text-sm font-bold text-slate-800",children:""}),s.jsx("p",{className:"text-[10px] text-slate-400",children:""})]})]}),s.jsxs("button",{onClick:O,disabled:h,className:"p-4 bg-white border border-slate-300 active:border-slate-800 hover:border-slate-800 active:bg-slate-50 transition-all flex flex-col gap-2 group",children:[s.jsxs("div",{className:"flex items-center justify-between w-full mb-1",children:[s.jsx(Cc,{className:"w-5 h-5 text-slate-400 group-active:text-slate-800 group-hover:text-slate-800 transition-colors"}),s.jsx("span",{className:"text-[9px] font-mono text-slate-300 group-active:text-slate-500 group-hover:text-slate-500",children:"ZIP"})]}),s.jsxs("div",{className:"text-left",children:[s.jsx("h3",{className:"text-sm font-bold text-slate-800",children:""}),s.jsx("p",{className:"text-[10px] text-slate-400",children:""})]})]})]}),s.jsxs("button",{onClick:$,disabled:x,className:"w-full p-4 bg-white border border-slate-300 active:border-slate-800 hover:border-slate-800 active:bg-slate-50 transition-all flex items-center justify-between group",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 border border-slate-200 bg-slate-50 flex items-center justify-center text-slate-600 group-active:bg-slate-800 group-active:text-white group-hover:bg-slate-800 group-hover:text-white transition-colors",children:s.jsx(tp,{className:"w-5 h-5"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("h3",{className:"text-sm font-bold text-slate-800",children:""}),s.jsx("p",{className:"text-[10px] text-slate-400",children:"RESTORE FROM ARCHIVE"})]})]}),s.jsx("div",{className:"border border-slate-300 px-3 py-1 text-[10px] font-bold text-slate-600 uppercase active:bg-slate-800 active:text-white hover:bg-slate-800 hover:text-white transition-colors",children:""})]}),s.jsxs("button",{onClick:()=>i(!0),className:"w-full p-4 border border-slate-200 bg-slate-50/50 text-slate-600 font-bold text-sm flex items-center justify-center gap-2 active:bg-slate-100 active:border-slate-300 hover:bg-slate-100 hover:border-slate-300 transition-all group",children:[s.jsx(Q_,{className:"w-4 h-4 text-emerald-400 group-hover:text-emerald-600"})," (CLEAR CACHE IMAGES)"]}),s.jsxs("button",{onClick:()=>n(!0),className:"w-full mt-6 p-4 border border-red-200 bg-red-50/30 text-red-600 font-bold text-sm flex items-center justify-center gap-2 active:bg-red-50 active:border-red-300 hover:bg-red-50 hover:border-red-300 transition-all",children:[s.jsx(zn,{className:"w-4 h-4"})," (ERASE ALL DATA)"]})]})]}),s.jsx(Be,{children:t&&s.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[70] px-6",children:s.jsxs(Se.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:350,damping:30},className:"bg-white border-2 border-slate-800 p-6 w-full max-w-sm shadow-[8px_8px_0px_rgba(0,0,0,0.2)] relative",onClick:H=>H.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-slate-100 pb-4",children:[s.jsx(zE,{className:"w-6 h-6 text-red-600"}),s.jsx("h3",{className:"text-lg font-black text-slate-800 tracking-tight uppercase",children:""})]}),s.jsxs("p",{className:"text-sm text-slate-600 mb-8 leading-relaxed font-medium",children:["",s.jsx("span",{className:"text-red-600 font-bold bg-red-50 px-1",children:""}),"",s.jsx("br",{}),s.jsx("br",{}),s.jsx("span",{className:"text-xs text-slate-400",children:"SYSTEM ID: LOCAL_USER"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>n(!1),className:"flex-1 py-3 border border-slate-300 text-slate-600 font-bold text-sm active:bg-slate-50 hover:bg-slate-50 transition-colors uppercase tracking-wider",children:""}),s.jsx("button",{onClick:P,className:"flex-1 py-3 bg-red-600 text-white font-bold text-sm active:bg-red-700 hover:bg-red-700 transition-colors shadow-lg shadow-red-200 uppercase tracking-wider",children:""})]})]})},"clear-modal-overlay")}),s.jsx(Be,{children:a&&s.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[70] px-6",children:s.jsxs(Se.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:350,damping:30},className:"bg-white border-2 border-slate-800 p-6 w-full max-w-sm shadow-[8px_8px_0px_rgba(0,0,0,0.2)] relative",onClick:H=>H.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-slate-100 pb-4",children:[s.jsx(ba,{className:"w-6 h-6 text-orange-500"}),s.jsx("h3",{className:"text-lg font-black text-slate-800 tracking-tight uppercase",children:""})]}),s.jsxs("p",{className:"text-sm text-slate-600 mb-8 leading-relaxed font-medium",children:["",s.jsx("br",{}),s.jsx("span",{className:"text-orange-500 font-bold",children:""}),s.jsx("br",{}),s.jsx("br",{}),s.jsxs("span",{className:"text-xs text-slate-400",children:["TARGET: ",N(w.chatImagesSize)," / ",w.imageStats.categories[Sn.CHAT_IMAGES]?.count||0," FILES"]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>i(!1),className:"flex-1 py-3 border border-slate-300 text-slate-600 font-bold text-sm active:bg-slate-50 hover:bg-slate-50 transition-colors uppercase tracking-wider",children:""}),s.jsx("button",{onClick:A,disabled:y,className:"flex-1 py-3 bg-slate-800 text-white font-bold text-sm active:bg-slate-900 hover:bg-slate-900 transition-colors shadow-lg shadow-slate-200 uppercase tracking-wider",children:y?"...":""})]})]})},"images-modal-overlay")})]})})}function g8({onBack:e}){return s.jsx(Wc,{title:"",onBack:e,children:s.jsxs("div",{className:"space-y-8 text-slate-800",children:[s.jsxs("div",{className:"bg-white border border-slate-200 p-6 relative overflow-hidden shadow-sm group",children:[s.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-slate-50 -mr-8 -mt-8 rotate-45 transform transition-transform group-hover:scale-150 duration-700 ease-out"}),s.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-slate-800 text-white flex items-center justify-center mb-4 shadow-lg shadow-slate-200",children:s.jsx(sv,{className:"w-8 h-8"})}),s.jsx("h2",{className:"text-xl font-black tracking-tight uppercase",children:"Touken OS"}),s.jsx("p",{className:"text-[10px] font-bold text-slate-400 tracking-[0.3em] uppercase mt-1",children:"Government Terminal"}),s.jsx("div",{className:"mt-4 inline-flex items-center px-3 py-1 bg-slate-100 border border-slate-200 rounded-none text-xs font-mono text-slate-600",children:"v1.0 (Beta)"})]})]}),s.jsxs("section",{className:"bg-slate-50 border border-slate-200 p-5 relative",children:[s.jsx("div",{className:"absolute top-0 left-0 w-2 h-2 bg-slate-300"}),s.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 bg-slate-300"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-2 h-2 bg-slate-300"}),s.jsx("div",{className:"absolute bottom-0 right-0 w-2 h-2 bg-slate-300"}),s.jsxs("div",{className:"flex items-center gap-2 text-slate-800 mb-4",children:[s.jsx(Qh,{className:"w-4 h-4"}),s.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider",children:""})]}),s.jsxs("div",{className:"text-xs text-slate-600 leading-relaxed space-y-4 text-justify h-64 overflow-y-auto pr-2 custom-scrollbar",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-slate-800 mb-1",children:"1. "}),s.jsxs("p",{children:["-ONLINE-  ",s.jsx("span",{className:"font-bold",children:"Nitroplus"}),"  ",s.jsx("span",{className:"font-bold",children:"DMM GAMES (EXNOA LLC)"}),"  "]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-slate-800 mb-1",children:"2. "}),s.jsxs("p",{children:["",s.jsx("span",{className:"font-bold text-red-500",children:""})," "]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-slate-800 mb-1",children:"3. "}),s.jsx("p",{children:" "})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-slate-800 mb-1",children:"4. "}),s.jsx("p",{children:" AI  IndexedDB  "})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-slate-800 mb-1",children:"5. AI "}),s.jsx("p",{children:"LLMAI   AI "})]})]})]}),s.jsx("div",{className:"text-center py-4 opacity-50",children:s.jsx("p",{className:"text-[9px] text-slate-400 font-mono tracking-widest",children:"MADE WITH  FOR TOUKEN RANBU"})})]})})}function x8({onClose:e}){const[t,n]=C.useState("main"),a=c=>{n(c)},i=()=>{n("main")},l=()=>{switch(t){case"api":return s.jsx(s8,{onBack:i});case"beautify":return s.jsx(f8,{onBack:i});case"data":return s.jsx(m8,{onBack:i});case"disclaimer":return s.jsx(g8,{onBack:i});default:return null}};return s.jsxs("div",{className:"w-full h-full bg-[#F0F2F5] relative overflow-hidden",children:[s.jsx(Se.div,{initial:!1,animate:t==="main"?{x:0,opacity:1}:{x:"-25%",opacity:1},transition:{duration:.4,ease:[.32,.72,0,1]},className:"absolute inset-0 w-full h-full",children:s.jsx(n8,{onNavigate:a,onClose:e})}),s.jsx(Be,{children:t!=="main"&&s.jsx(Se.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{duration:.4,ease:[.32,.72,0,1]},className:"absolute inset-0 w-full h-full z-20 shadow-[-10px_0_30px_rgba(0,0,0,0.15)]",children:l()},"subpage")})]})}function b8({onBack:e,onEdit:t,lastUpdated:n=0}){const[a,i]=C.useState([]),[l,c]=C.useState(""),[d,u]=C.useState("all"),[m,p]=C.useState("grid");C.useEffect(()=>{h()},[n]);const h=async()=>{try{const y=await ue.get(te.WORLD_BOOKS,"world_books");y&&i(y)}catch(y){console.error("Failed to load world books:",y)}},g=()=>{t(null)},x=y=>{t(y)},v=a.filter(y=>d==="all"||y.scope===d).filter(y=>y.name.toLowerCase().includes(l.toLowerCase())||y.content.toLowerCase().includes(l.toLowerCase()));return s.jsxs("div",{className:"w-full h-full relative bg-[#F5F2EB] z-50 overflow-hidden flex flex-col font-['Source_Han_Sans_CN_VF',sans-serif]",children:[s.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-20 mix-blend-multiply",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%239C92AC' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E")`}}),s.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-20 bg-[#F5F2EB]/95 backdrop-blur-xl border-b border-[#D6D3CC] shadow-sm",children:[s.jsx("button",{onClick:e,className:"w-10 h-10 bg-white/50 border border-[#D6D3CC] rounded-lg flex items-center justify-center text-[#5A5A55] transition-colors hover:bg-white hover:text-[#2C2C2C] shadow-[0_2px_0_#E5E5E5]",children:s.jsx(On,{className:"w-5 h-5",strokeWidth:2})}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(vx,{className:"w-3 h-3 text-[#8C8C89]"}),s.jsx("span",{className:"text-[10px] font-bold text-[#8C8C89] tracking-[0.2em] uppercase",children:""})]}),s.jsx("h1",{className:"text-lg font-serif font-bold text-[#2C2C2C] tracking-tight flex items-center gap-2",children:""})]}),s.jsx("button",{onClick:g,className:"w-10 h-10 bg-[#2C2C2C] text-[#F2F0EB] rounded-lg flex items-center justify-center transition-colors shadow-lg hover:bg-black",children:s.jsx(Gs,{className:"w-5 h-5",strokeWidth:2})})]}),s.jsxs("div",{className:"px-6 py-4 z-10 bg-[#F5F2EB]",children:[s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx($c,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-[#8C8C89]"}),s.jsx("input",{type:"text",value:l,onChange:y=>c(y.target.value),placeholder:"...",className:"w-full bg-white border border-[#D6D3CC] rounded-full px-4 py-2.5 pl-10 text-xs font-medium text-[#2C2C2C] placeholder:text-[#AAA] focus:outline-none focus:border-[#2C2C2C] focus:ring-1 focus:ring-[#2C2C2C] transition-colors shadow-sm"}),l&&s.jsx("button",{onClick:()=>c(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#BBB] hover:text-[#2C2C2C]",children:s.jsx(ft,{className:"w-3 h-3"})})]}),s.jsxs("div",{className:"flex bg-white border border-[#D6D3CC] rounded-lg p-1 shrink-0 shadow-sm",children:[s.jsx("button",{onClick:()=>p("grid"),className:`p-1.5 rounded-md transition-all ${m==="grid"?"bg-[#F5F2EB] text-[#2C2C2C]":"text-[#8C8C89]"}`,children:s.jsx(Xy,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>p("list"),className:`p-1.5 rounded-md transition-all ${m==="list"?"bg-[#F5F2EB] text-[#2C2C2C]":"text-[#8C8C89]"}`,children:s.jsx(j6,{className:"w-4 h-4"})})]})]}),s.jsx("div",{className:"flex gap-6 border-b border-[#D6D3CC] px-2",children:[{id:"all",label:""},{id:"global",label:""},{id:"local",label:""}].map(y=>s.jsxs("button",{onClick:()=>u(y.id),className:`pb-3 text-[11px] font-bold uppercase tracking-wider transition-colors relative ${d===y.id?"text-[#2C2C2C]":"text-[#8C8C89] active:text-[#5A5A55] hover:text-[#5A5A55]"}`,children:[y.label,d===y.id&&s.jsx(Se.div,{layoutId:"worldbook-tab-indicator",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#2C2C2C]",transition:{duration:.25,ease:"easeInOut"}})]},y.id))})]}),s.jsx("div",{className:"flex-1 overflow-y-auto px-6 pb-24",children:v.length===0?s.jsxs("div",{className:"h-64 flex flex-col items-center justify-center text-[#8C8C89] opacity-60",children:[s.jsx(vx,{className:"w-16 h-16 mb-4 stroke-1"}),s.jsx("p",{className:"text-xs font-serif italic",children:""})]}):s.jsx(Se.div,{layout:!0,className:m==="grid"?"grid grid-cols-2 gap-4 pt-2":"flex flex-col gap-3 pt-2",children:s.jsx(Be,{mode:"popLayout",children:v.map((y,k)=>s.jsx(Se.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{layout:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}},onClick:()=>x(y),className:`group cursor-pointer relative ${m==="grid"?"aspect-[3/4]":"h-24"}`,children:m==="grid"?s.jsxs(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-white border border-[#E5E5E5] rounded-r-md rounded-l-sm shadow-[4px_4px_10px_rgba(0,0,0,0.05)] transition-all overflow-hidden flex flex-col group-active:shadow-[6px_6px_15px_rgba(0,0,0,0.1)] group-hover:shadow-[6px_6px_15px_rgba(0,0,0,0.1)]",children:[s.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-3 ${y.scope==="global"?"bg-[#2C2C2C]":"bg-[#8C8C89]"} opacity-10 border-r border-black/5`}),s.jsxs("div",{className:"mt-4 mx-4 flex justify-between items-start",children:[s.jsx("span",{className:`text-[8px] font-bold uppercase tracking-wider px-1.5 py-0.5 rounded-sm ${y.scope==="global"?"bg-[#F0F0F0] text-[#2C2C2C]":"bg-[#F5F5F5] text-[#8C8C89]"}`,children:y.scope==="global"?" I":" II"}),y.scope==="global"?s.jsx(Qy,{className:"w-3 h-3 text-[#2C2C2C]"}):s.jsx(C_,{className:"w-3 h-3 text-[#8C8C89]"})]}),s.jsxs("div",{className:"flex-1 px-4 flex flex-col justify-center",children:[s.jsx("h3",{className:"font-serif text-lg leading-tight font-bold text-[#2C2C2C] line-clamp-3",children:y.name||""}),s.jsx("div",{className:"w-8 h-0.5 bg-[#D6D3CC] mt-3"})]}),s.jsxs("div",{className:"px-4 pb-4 pt-2 bg-[#F9F9F7] border-t border-[#F0F0F0]",children:[s.jsx("p",{className:"text-[9px] text-[#8C8C89] font-mono line-clamp-2 mb-2",children:y.content||"..."}),s.jsxs("div",{className:"flex items-center gap-2 text-[8px] font-bold text-[#AAA] uppercase",children:[s.jsx(cr,{className:"w-2.5 h-2.5"}),new Date(y.updatedAt).toLocaleDateString()]})]})]}):s.jsxs(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"w-full h-full bg-white border border-[#E5E5E5] rounded-md shadow-sm transition-all flex overflow-hidden group-active:shadow-md group-hover:shadow-md",children:[s.jsx("div",{className:`w-2 h-full ${y.scope==="global"?"bg-[#2C2C2C]":"bg-[#D6D3CC]"}`}),s.jsxs("div",{className:"flex-1 p-3 flex flex-col justify-center",children:[s.jsxs("div",{className:"flex justify-between items-start mb-1",children:[s.jsx("h3",{className:"font-serif text-base font-bold text-[#2C2C2C]",children:y.name||""}),s.jsx("span",{className:"text-[9px] px-2 py-0.5 bg-[#F5F5F5] rounded text-[#8C8C89] font-bold uppercase",children:y.scope==="global"?"":""})]}),s.jsx("p",{className:"text-[10px] text-[#666] line-clamp-2 pr-8",children:y.content})]}),s.jsxs("div",{className:"w-12 border-l border-[#F0F0F0] flex flex-col items-center justify-center gap-1 text-[#AAA]",children:[s.jsx(Jh,{className:"w-4 h-4"}),s.jsx("span",{className:"text-[9px] font-mono",children:y.content.length})]})]})},y.id))})})}),s.jsxs("div",{className:"bg-[#EAE8E3] border-t border-[#D6D3CC] px-6 py-3 flex justify-between items-center text-[9px] font-mono text-[#8C8C89] uppercase tracking-wider",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-[#34C759]"}),s.jsx("span",{children:""})]}),s.jsxs("span",{children:[": ",a.length]})]})]})}function y8({onBack:e,worldBook:t}){const[n,a]=C.useState(""),[i,l]=C.useState("local"),[c,d]=C.useState("before"),[u,m]=C.useState(""),[p,h]=C.useState(!1),[g,x]=C.useState(!1),[v,y]=C.useState(!1),k=t===null;C.useEffect(()=>{t&&(a(t.name),l(t.scope),d(t.position),m(t.content))},[t]);const w=async()=>{if(!n.trim()){y(!0);return}y(!1);try{let T=await ue.get(te.WORLD_BOOKS,"world_books")||[];const B=new Date().toISOString();if(k){const O={id:`wb_${Date.now()}`,name:n.trim(),scope:i,position:c,content:u.trim(),createdAt:B,updatedAt:B};T.push(O)}else T=T.map(O=>O.id===t.id?{...O,name:n.trim(),scope:i,position:c,content:u.trim(),updatedAt:B}:O);await ue.set(te.WORLD_BOOKS,"world_books",T),window.dispatchEvent(new Event("chat-settings-updated")),x(!0),setTimeout(()=>{x(!1),e()},1500)}catch(N){console.error("Failed to save world book:",N)}},_=async()=>{if(t)try{const N=await ue.get(te.WORLD_BOOKS,"world_books");if(N){const T=N.filter(B=>B.id!==t.id);await ue.set(te.WORLD_BOOKS,"world_books",T)}window.dispatchEvent(new Event("chat-settings-updated")),h(!1),setTimeout(()=>e(),300)}catch(N){console.error("Failed to delete world book:",N)}};return s.jsxs("div",{className:"w-full h-full relative bg-[#F2F0EB] z-50 overflow-hidden flex flex-col font-['Source_Han_Sans_CN_VF',sans-serif]",children:[s.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),s.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10 bg-[#F2F0EB]/95 backdrop-blur-sm border-b border-[#D6D3CC]",children:[s.jsx("button",{onClick:e,className:"w-10 h-10 bg-[#EAE8E3] border border-[#D6D3CC] rounded-md flex items-center justify-center text-[#5A5A55] transition-colors active:bg-white active:text-[#B93636] hover:bg-white hover:text-[#B93636]",children:s.jsx(ft,{className:"w-5 h-5",strokeWidth:2})}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(v_,{className:"w-3 h-3 text-[#8C8C89]"}),s.jsx("span",{className:"text-[10px] font-bold text-[#8C8C89] tracking-[0.2em] uppercase",children:k?"":""})]}),s.jsx("h1",{className:"text-base font-bold text-[#2C2C2C] tracking-wide",children:k?"":""})]}),s.jsx("div",{className:"w-10"})]}),s.jsxs("div",{className:"flex-1 px-5 pb-28 overflow-y-auto",children:[s.jsxs("div",{className:"mt-6 mb-8 text-center",children:[s.jsx("div",{className:"inline-block border-b-2 border-[#2C2C2C] pb-1 mb-2",children:s.jsxs("h2",{className:"text-xl font-black text-[#2C2C2C] uppercase tracking-tighter flex items-center gap-2",children:[s.jsx(Xh,{className:"w-5 h-5"}),""]})}),s.jsx("p",{className:"text-[10px] font-mono text-[#8C8C89] uppercase tracking-widest",children:""})]}),s.jsxs("div",{className:"space-y-6 max-w-[420px] mx-auto",children:[s.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)]",children:[s.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:""}),s.jsxs("div",{className:"space-y-4 mt-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1",children:""}),s.jsx("input",{type:"text",value:n,onChange:N=>{a(N.target.value),y(!1)},className:`w-full bg-[#EAE8E3] border-b-2 px-3 py-2 text-lg font-bold text-[#2C2C2C] focus:outline-none focus:bg-white transition-colors placeholder:text-[#CCC] ${v?"border-[#B93636] bg-[#FFF5F5]":"border-[#D6D3CC] focus:border-[#2C2C2C]"}`,placeholder:""}),v&&s.jsxs("p",{className:"text-[10px] text-[#B93636] font-bold mt-1 uppercase flex items-center gap-1",children:[s.jsx(Qh,{className:"w-3 h-3"})," "]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[s.jsx(Qy,{className:"w-3 h-3"})," "]}),s.jsx("div",{className:"flex flex-col gap-1",children:[{id:"global",label:" ()"},{id:"local",label:""}].map(N=>s.jsxs("button",{onClick:()=>l(N.id),className:`w-full py-2 px-3 text-xs font-bold text-left transition-all border ${i===N.id?"bg-[#2C2C2C] text-[#F2F0EB] border-[#2C2C2C]":"bg-white border-[#D6D3CC] text-[#8C8C89] active:border-[#8C8C89] hover:border-[#8C8C89]"}`,children:[i===N.id&&s.jsx(kt,{className:"w-3 h-3 inline mr-1"}),N.label]},N.id))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[s.jsx(w6,{className:"w-3 h-3"})," "]}),s.jsx("div",{className:"flex flex-col gap-1",children:[{id:"before",label:" (Prepend)"},{id:"after",label:" (Append)"}].map(N=>s.jsxs("button",{onClick:()=>d(N.id),className:`w-full py-2 px-3 text-xs font-bold text-left transition-all border ${c===N.id?"bg-[#2C2C2C] text-[#F2F0EB] border-[#2C2C2C]":"bg-white border-[#D6D3CC] text-[#8C8C89] active:border-[#8C8C89] hover:border-[#8C8C89]"}`,children:[c===N.id&&s.jsx(kt,{className:"w-3 h-3 inline mr-1"}),N.label]},N.id))})]})]})]})]}),s.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 pb-2 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)] h-[360px] flex flex-col",children:[s.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:""}),s.jsxs("div",{className:"flex-1 mt-2 relative",children:[s.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-10",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px)",backgroundSize:"100% 2rem",marginTop:"1.9rem"}}),s.jsx("textarea",{value:u,onChange:N=>m(N.target.value),className:"w-full h-full bg-transparent border-none text-sm text-[#4A4A4A] focus:outline-none resize-none leading-[2rem] font-mono",placeholder:"...",style:{lineHeight:"2rem"}})]}),s.jsx("div",{className:"text-right border-t border-[#E5E5E5] pt-2 mt-2",children:s.jsxs("span",{className:"text-[10px] font-mono text-[#8C8C89]",children:[": ",u.length]})})]})]})]}),s.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-6 bg-[#F2F0EB]/90 backdrop-blur-md border-t border-[#D6D3CC] z-40 flex gap-3 justify-center",children:[!k&&s.jsx("button",{onClick:()=>h(!0),className:"w-12 h-12 border-2 border-[#FF3B30] text-[#FF3B30] flex items-center justify-center active:bg-[#FF3B30] active:text-white hover:bg-[#FF3B30] hover:text-white transition-colors rounded-[2px]",children:s.jsx(zn,{className:"w-5 h-5"})}),s.jsxs("button",{onClick:w,className:"flex-1 max-w-[300px] bg-[#2C2C2C] text-[#F2F0EB] h-12 rounded-[2px] font-bold text-sm tracking-wider uppercase active:bg-black hover:bg-black transition-colors shadow-lg flex items-center justify-center gap-2",children:[s.jsx(_i,{className:"w-4 h-4"}),k?"":""]})]}),s.jsx(Be,{children:p&&s.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-[70] px-4",children:s.jsxs(Se.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:350,damping:30},className:"bg-[#F2F0EB] border-2 border-[#FF3B30] p-6 max-w-xs w-full text-center shadow-2xl",children:[s.jsx("div",{className:"w-12 h-12 bg-[#FF3B30] text-white rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(zn,{className:"w-6 h-6"})}),s.jsx("h3",{className:"text-lg font-black text-[#2C2C2C] uppercase mb-2",children:""}),s.jsx("p",{className:"text-xs font-mono text-[#5A5A55] mb-6",children:""}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>h(!1),className:"flex-1 py-3 border border-[#D6D3CC] font-bold text-xs active:bg-white hover:bg-white transition-colors",children:""}),s.jsx("button",{onClick:_,className:"flex-1 py-3 bg-[#FF3B30] text-white font-bold text-xs active:bg-[#D32F2F] hover:bg-[#D32F2F] transition-colors",children:""})]})]})})}),s.jsx(Be,{children:g&&s.jsx(Se.div,{initial:{opacity:0,scale:1.5,rotate:-10},animate:{opacity:1,scale:1,rotate:-5},exit:{opacity:0},className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[70] pointer-events-none",children:s.jsxs("div",{className:"w-40 h-40 rounded-full border-[6px] border-[#34C759] flex flex-col items-center justify-center text-[#34C759] opacity-90 mix-blend-multiply bg-white/50 backdrop-blur-sm",children:[s.jsx(kt,{className:"w-12 h-12 mb-1",strokeWidth:4}),s.jsx("span",{className:"text-xl font-black uppercase tracking-tight",children:""}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest mt-1",children:new Date().toLocaleDateString()})]})})})]})}function v8({onClose:e}){const[t,n]=C.useState("list"),[a,i]=C.useState(null),[l,c]=C.useState(Date.now()),d=m=>{i(m),n("editor")},u=()=>{n("list"),c(Date.now()),setTimeout(()=>i(null),300)};return s.jsxs("div",{className:"absolute inset-0 w-full h-full bg-black overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 w-full h-full bg-[#F5F2EB] z-10",style:{pointerEvents:t==="editor"?"none":"auto"},children:s.jsx(b8,{onBack:e,onEdit:d,lastUpdated:l})}),s.jsx("div",{className:"absolute inset-0 bg-black -z-10"}),s.jsx(Be,{children:t==="editor"&&s.jsx(Se.div,{initial:{y:"100%",borderRadius:"16px 16px 0 0"},animate:{y:0,borderRadius:"0px"},exit:{y:"100%",borderRadius:"16px 16px 0 0"},transition:{type:"spring",stiffness:300,damping:30},className:"absolute inset-0 w-full h-full z-20 shadow-2xl overflow-hidden",children:s.jsx(y8,{onBack:u,worldBook:a})},"editor")})]})}function w8({onClose:e,onEditUser:t,onEditCharacter:n,isBackground:a=!1,lastUpdated:i=0}){const[l,c]=C.useState([]),[d,u]=C.useState({name:"",country:"",fortress:"",date:"",attendant:""}),[m,p]=C.useState(()=>{const v=iv();return v!==void 0?v:null});C.useEffect(()=>{h(),g();const v=()=>{g()};return window.addEventListener("avatarChanged",v),window.addEventListener("userDataChanged",v),()=>{window.removeEventListener("avatarChanged",v),window.removeEventListener("userDataChanged",v)}},[i]);const h=async()=>{try{const v=await ue.get(te.CHARACTERS,"characters");if(v){const y=await Promise.all(v.map(async k=>{if(k.avatar){if(k.avatar.startsWith("data:"))return{...k,avatarUrl:k.avatar};{const w=await wt(k.avatar);return{...k,avatarUrl:w}}}return{...k,avatarUrl:null}}));c(y)}}catch(v){console.error("Failed to load characters:",v)}},g=async()=>{try{const v=await ue.get(te.USER_DATA,"userData");v&&u(v);const y=await wt("avatar");p(y),ov(y)}catch(v){console.error("Failed to load user data:",v)}},x=()=>{n(null)};return s.jsxs(Se.div,{className:"absolute inset-0 bg-[#F2F0EB] z-0 overflow-hidden flex flex-col font-['Source_Han_Sans_CN_VF',sans-serif]",animate:{scale:a?.92:1,borderRadius:a?"16px":"0px",filter:a?"brightness(0.9)":"brightness(1)"},transition:{type:"spring",stiffness:300,damping:30},children:[s.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),s.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10 bg-[#F2F0EB]/95 backdrop-blur-sm border-b border-stone-200",children:[s.jsx("button",{onClick:e,className:"w-10 h-10 bg-[#EAE8E3] border border-[#D6D3CC] rounded-md flex items-center justify-center text-[#5A5A55] transition-colors hover:bg-white hover:text-black hover:border-[#999]",children:s.jsx(On,{className:"w-5 h-5",strokeWidth:2})}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("span",{className:"text-[10px] font-bold text-[#8C8C89] tracking-[0.2em] uppercase",children:""}),s.jsx("h1",{className:"text-base font-bold text-[#2C2C2C] tracking-wide",children:""})]}),s.jsx("button",{onClick:x,className:"w-10 h-10 bg-[#2C2C2C] text-[#F2F0EB] rounded-md flex items-center justify-center transition-colors hover:bg-black shadow-sm",children:s.jsx(Gs,{className:"w-5 h-5",strokeWidth:2})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-24",children:s.jsxs("div",{children:[s.jsx("div",{className:"flex justify-end mt-6 mb-2",children:s.jsxs("div",{className:"border border-[#8C8C89] text-[#8C8C89] px-2 py-0.5 text-[10px] font-mono uppercase tracking-widest flex items-center gap-2 opacity-60",children:[s.jsx(Cc,{className:"w-3 h-3"}),"-",new Date().getFullYear(),"-A"]})}),s.jsxs("div",{className:"relative mb-8 group cursor-pointer",onClick:t,children:[s.jsx("div",{className:"absolute -top-2 left-1/2 -translate-x-1/2 w-12 h-4 bg-[#D6D3CC] rounded-sm z-0"}),s.jsxs("div",{className:"relative bg-[#F9F9F7] border border-[#D6D3CC] p-5 shadow-[0_2px_8px_rgba(0,0,0,0.04)] z-10 transition-all group-active:border-[#B93636] group-active:shadow-md group-hover:border-[#B93636] group-hover:shadow-md",children:[s.jsx("div",{className:"absolute top-0 left-0 w-3 h-3 border-t border-l border-[#B93636] opacity-0 group-active:opacity-100 group-hover:opacity-100 transition-opacity"}),s.jsx("div",{className:"absolute top-0 right-0 w-3 h-3 border-t border-r border-[#B93636] opacity-0 group-active:opacity-100 group-hover:opacity-100 transition-opacity"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-3 h-3 border-b border-l border-[#B93636] opacity-0 group-active:opacity-100 group-hover:opacity-100 transition-opacity"}),s.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 border-b border-r border-[#B93636] opacity-0 group-active:opacity-100 group-hover:opacity-100 transition-opacity"}),s.jsxs("div",{className:"flex gap-5",children:[s.jsxs("div",{className:"w-24 h-32 bg-[#E5E5E5] border border-[#D6D3CC] p-1 flex-shrink-0 relative overflow-hidden",children:[m?s.jsx("img",{src:m,alt:"Saniwa",className:"w-full h-full object-cover grayscale-[0.2] group-active:grayscale-0 group-hover:grayscale-0 transition-all"}):s.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-[#999] bg-[#F0F0F0]",children:[s.jsx(fs,{className:"w-8 h-8 mb-1",strokeWidth:1.5}),s.jsx("span",{className:"text-[9px] uppercase",children:""})]}),s.jsx("div",{className:"absolute inset-0 border border-black/5 pointer-events-none"})]}),s.jsxs("div",{className:"flex-1 flex flex-col justify-between py-0.5",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-[10px] font-bold bg-[#2C2C2C] text-white px-1.5 py-0.5",children:""}),s.jsx("span",{className:"text-[10px] font-bold text-[#B93636] border border-[#B93636] px-1.5 py-0.5",children:""})]}),s.jsx("h2",{className:"text-xl font-bold text-[#2C2C2C] leading-tight mb-0.5 border-b border-[#D6D3CC] pb-2 inline-block min-w-[120px]",children:d.name||""})]}),s.jsxs("div",{className:"space-y-2 mt-2",children:[s.jsxs("div",{className:"grid grid-cols-[60px_1fr] text-xs",children:[s.jsx("span",{className:"text-[#8C8C89] font-bold uppercase text-[10px] tracking-wider mt-0.5",children:""}),s.jsx("span",{className:"font-medium text-[#4A4A4A] font-mono",children:d.fortress||"---"})]}),s.jsxs("div",{className:"grid grid-cols-[60px_1fr] text-xs",children:[s.jsx("span",{className:"text-[#8C8C89] font-bold uppercase text-[10px] tracking-wider mt-0.5",children:""}),s.jsx("span",{className:"font-medium text-[#4A4A4A] font-mono",children:d.country||"---"})]}),d.attendant&&s.jsxs("div",{className:"grid grid-cols-[60px_1fr] text-xs",children:[s.jsx("span",{className:"text-[#8C8C89] font-bold uppercase text-[10px] tracking-wider mt-0.5",children:""}),s.jsx("span",{className:"font-medium text-[#4A4A4A] flex items-center gap-1",children:d.attendant})]})]})]})]}),s.jsx("div",{className:"absolute right-4 bottom-4 opacity-10 pointer-events-none rotate-[-15deg]",children:s.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-[#2C2C2C] flex items-center justify-center",children:s.jsx("span",{className:"text-[10px] font-black uppercase text-[#2C2C2C]",children:""})})})]})]}),s.jsxs("div",{className:"flex items-end justify-between mb-4 border-b-2 border-[#2C2C2C] pb-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(AE,{className:"w-5 h-5 text-[#2C2C2C]"}),s.jsx("h3",{className:"text-base font-black text-[#2C2C2C] uppercase tracking-tight",children:""})]}),s.jsxs("span",{className:"text-xs font-mono font-bold text-[#2C2C2C]",children:[": ",l.length.toString().padStart(2,"0")]})]}),s.jsx("div",{className:"space-y-2",children:l.length===0?s.jsxs("div",{className:"py-16 text-center border border-dashed border-[#BBB] bg-[#F9F9F7]",children:[s.jsx(yE,{className:"w-12 h-12 text-[#D6D3CC] mx-auto mb-3",strokeWidth:1}),s.jsx("p",{className:"text-[#8C8C89] text-sm font-medium uppercase tracking-wider",children:""}),s.jsx("button",{onClick:x,className:"mt-4 text-xs font-bold text-[#2C2C2C] underline hover:text-[#B93636]",children:"+ "})]}):l.map((v,y)=>s.jsx("div",{onClick:()=>n(v),className:"group relative bg-[#F9F9F7] border-l-[3px] border-l-[#D6D3CC] border-y border-r border-[#E5E5E5] p-3 pl-4 transition-colors cursor-pointer active:bg-[#EAE8E3] active:border-l-[#2C2C2C] hover:bg-[#EAE8E3] hover:border-l-[#2C2C2C]",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("span",{className:"text-[10px] font-mono text-[#8C8C89] w-6 text-right transition-colors group-active:text-[#B93636] group-hover:text-[#B93636]",children:v.serialNumber||(y+1).toString().padStart(3,"0")}),s.jsx("div",{className:"w-10 h-10 bg-[#E5E5E5] border border-[#D6D3CC] flex-shrink-0 overflow-hidden transition-all",children:v.avatarUrl?s.jsx("img",{src:v.avatarUrl,alt:"",className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx(fs,{className:"w-4 h-4 text-[#999]"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[s.jsx("h4",{className:"text-sm font-bold text-[#2C2C2C] tracking-wide group-active:text-black group-hover:text-black",children:v.name}),s.jsx("span",{className:"text-[9px] font-bold uppercase text-[#B93636] opacity-0 transition-opacity border border-[#B93636] px-1 group-active:opacity-100 group-hover:opacity-100",children:""})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-[10px] text-[#8C8C89] font-mono uppercase tracking-wider",children:""}),s.jsx("p",{className:"text-xs text-[#5A5A55] truncate font-medium",children:v.description||"---"})]})]}),s.jsx(Ys,{className:"w-4 h-4 text-[#D6D3CC] transition-colors group-active:text-[#2C2C2C] group-hover:text-[#2C2C2C]"})]})},v.id))})]})})]})}function S8({onBack:e,character:t}){const[n,a]=C.useState(""),[i,l]=C.useState(""),[c,d]=C.useState(null),[u,m]=C.useState(null),[p,h]=C.useState(""),[g,x]=C.useState(""),[v,y]=C.useState([]),[k,w]=C.useState([]),[_,N]=C.useState(!1),[T,B]=C.useState(!1),[O,$]=C.useState(!1),[P,A]=C.useState([]),H=C.useRef(null),Y=t===null;C.useEffect(()=>{t&&(a(t.name),l(t.serialNumber||""),h(t.description),x(t.manifestDate||""),y(t.worldBooks||[]),(async()=>{if(t.avatar)if(t.avatar.startsWith("data:"))d(t.avatar),m(null);else{const R=await wt(t.avatar);d(R),m(t.avatar)}})())},[t]),C.useEffect(()=>{(async()=>{const R=await ue.get(te.WORLD_BOOKS,"world_books");R&&A(R.filter(V=>V.scope==="local"))})()},[]);const E=()=>{H.current?.click()},D=async Z=>{const R=Z.target.files?.[0];if(R){const V=Date.now(),ee=`character-${t?.id||V}-avatar`,W=await ms(ee,R);d(W),m(ee)}},S=async()=>{try{let R=await ue.get(te.CHARACTERS,"characters")||[];const V=new Date().toISOString();if(Y){const ee={id:`char_${Date.now()}`,name:n.trim()||"",serialNumber:i.trim(),avatar:u,description:p.trim(),manifestDate:g.trim()||void 0,worldBooks:v,createdAt:V,updatedAt:V};R.push(ee)}else R=R.map(ee=>ee.id===t.id?{...ee,name:n.trim()||"",serialNumber:i.trim(),avatar:u,description:p.trim(),manifestDate:g.trim()||void 0,worldBooks:v,updatedAt:V}:ee);await ue.set(te.CHARACTERS,"characters",R),window.dispatchEvent(new Event("chat-settings-updated")),B(!0),setTimeout(()=>{B(!1),e()},1500)}catch(Z){console.error("Failed to save character:",Z)}},z=async()=>{if(t)try{const Z=await ue.get(te.CHARACTERS,"characters");if(Z){const R=Z.filter(V=>V.id!==t.id);await ue.set(te.CHARACTERS,"characters",R)}window.dispatchEvent(new Event("chat-settings-updated")),t.avatar&&await wa(t.avatar),N(!1),setTimeout(()=>e(),300)}catch(Z){console.error("Failed to delete character:",Z)}},L=Z=>{y(v.filter(R=>R!==Z))},F=()=>{w([...v]),$(!0)},K=Z=>{k.includes(Z)?w(k.filter(R=>R!==Z)):w([...k,Z])},G=()=>{y([...k]),$(!1)};return s.jsxs("div",{className:"fixed inset-0 bg-[#F2F0EB] z-50 overflow-hidden flex flex-col font-['Source_Han_Sans_CN_VF',sans-serif]",children:[s.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),s.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10 bg-[#F2F0EB]/95 backdrop-blur-sm border-b border-stone-200",children:[s.jsx("button",{onClick:e,className:"w-10 h-10 bg-[#EAE8E3] border border-[#D6D3CC] rounded-md flex items-center justify-center text-[#5A5A55] transition-colors active:bg-white active:text-[#B93636] hover:bg-white hover:text-[#B93636]",children:s.jsx(ft,{className:"w-5 h-5",strokeWidth:2})}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("span",{className:"text-[10px] font-bold text-[#8C8C89] tracking-[0.2em] uppercase",children:Y?"":""}),s.jsx("h1",{className:"text-base font-bold text-[#2C2C2C] tracking-wide",children:Y?"":""})]}),s.jsx("div",{className:"w-10"})]}),s.jsxs("div",{className:"flex-1 px-5 pb-28 overflow-y-auto",children:[s.jsxs("div",{className:"mt-6 mb-8 text-center",children:[s.jsx("div",{className:"inline-block border-b-2 border-[#2C2C2C] pb-1 mb-2",children:s.jsxs("h2",{className:"text-xl font-black text-[#2C2C2C] uppercase tracking-tighter flex items-center gap-2",children:[s.jsx(Xh,{className:"w-5 h-5"}),""]})}),s.jsx("p",{className:"text-[10px] font-mono text-[#8C8C89] uppercase tracking-widest",children:""})]}),s.jsxs("div",{className:"space-y-6 max-w-[420px] mx-auto",children:[s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("input",{ref:H,type:"file",accept:"image/*",onChange:D,className:"hidden"}),s.jsxs("div",{onClick:E,className:"relative w-32 h-40 bg-[#E5E5E5] border-2 border-[#D6D3CC] p-2 cursor-pointer group transition-colors active:border-[#2C2C2C] hover:border-[#2C2C2C]",children:[s.jsxs("div",{className:"w-full h-full bg-[#F0F0F0] overflow-hidden relative",children:[c?s.jsx("img",{src:c,alt:"Avatar",className:"w-full h-full object-cover grayscale-[0.2] group-active:grayscale-0 group-hover:grayscale-0 transition-all"}):s.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-[#999]",children:[s.jsx(ba,{className:"w-8 h-8 mb-1",strokeWidth:1.5}),s.jsx("span",{className:"text-[9px] uppercase tracking-widest",children:""})]}),s.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-active:opacity-100 group-hover:opacity-100 transition-opacity",children:s.jsx(Zh,{className:"w-8 h-8 text-white"})})]}),s.jsx("div",{className:"absolute -top-1 -left-1 w-3 h-3 border-t-2 border-l-2 border-[#2C2C2C]"}),s.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 border-t-2 border-r-2 border-[#2C2C2C]"}),s.jsx("div",{className:"absolute -bottom-1 -left-1 w-3 h-3 border-b-2 border-l-2 border-[#2C2C2C]"}),s.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 border-b-2 border-r-2 border-[#2C2C2C]"})]}),s.jsx("p",{className:"mt-2 text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider",children:"1. "})]}),s.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)]",children:[s.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:" : "}),s.jsxs("div",{className:"space-y-4 mt-2",children:[s.jsxs("div",{className:"grid grid-cols-[1fr_80px] gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1",children:" / "}),s.jsx("input",{type:"text",value:n,onChange:Z=>a(Z.target.value),className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-lg font-bold text-[#2C2C2C] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors placeholder:text-[#CCC]",placeholder:""})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[s.jsx(Cx,{className:"w-3 h-3"})," "]}),s.jsx("input",{type:"text",value:i,onChange:Z=>l(Z.target.value),className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-lg font-bold text-[#2C2C2C] font-mono text-center focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors placeholder:text-[#CCC]",placeholder:"NO."})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[s.jsx(cr,{className:"w-3 h-3"})," "]}),s.jsx("input",{type:"text",value:g,onChange:Z=>x(Z.target.value),placeholder:"YYYY-MM-DD",className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-sm font-mono font-medium text-[#4A4A4A] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors"})]})]})]}),s.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)]",children:[s.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:" : "}),s.jsxs("div",{className:"mt-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("label",{className:"text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider flex items-center gap-1",children:[s.jsx(S_,{className:"w-3 h-3"})," "]}),s.jsx("button",{onClick:F,className:"text-[10px] font-bold text-[#2C2C2C] border border-[#2C2C2C] px-2 py-0.5 active:bg-[#2C2C2C] active:text-white hover:bg-[#2C2C2C] hover:text-white transition-colors uppercase",children:"+ "})]}),s.jsx("div",{className:"space-y-2",children:v.length===0?s.jsx("div",{className:"py-4 text-center border border-dashed border-[#D6D3CC] bg-[#F0F0F0]",children:s.jsx("span",{className:"text-[10px] text-[#999] font-mono uppercase",children:""})}):v.map(Z=>{const R=P.find(V=>V.id===Z);return R?s.jsxs("div",{className:"bg-white border border-[#E5E5E5] px-3 py-2 flex items-center justify-between group",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Cx,{className:"w-3 h-3 text-[#8C8C89]"}),s.jsx("span",{className:"text-sm font-bold text-[#4A4A4A]",children:R.name})]}),s.jsx("button",{onClick:()=>L(Z),className:"text-[#D6D3CC] active:text-[#FF3B30] hover:text-[#FF3B30] transition-colors",children:s.jsx(ft,{className:"w-4 h-4"})})]},Z):null})})]})]}),s.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 pb-2 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)] h-[300px] flex flex-col",children:[s.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:" : "}),s.jsxs("div",{className:"flex-1 mt-2 relative",children:[s.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-10",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px)",backgroundSize:"100% 2rem",marginTop:"1.9rem"}}),s.jsx("textarea",{value:p,onChange:Z=>h(Z.target.value),className:"w-full h-full bg-transparent border-none text-sm text-[#4A4A4A] focus:outline-none resize-none leading-[2rem]",placeholder:"...",style:{lineHeight:"2rem"}})]}),s.jsx("div",{className:"text-right border-t border-[#E5E5E5] pt-2 mt-2",children:s.jsxs("span",{className:"text-[10px] font-mono text-[#8C8C89]",children:[": ",p.length]})})]})]})]}),s.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-6 bg-[#F2F0EB]/90 backdrop-blur-md border-t border-[#D6D3CC] z-40 flex gap-3 justify-center",children:[!Y&&s.jsx("button",{onClick:()=>N(!0),className:"w-12 h-12 border-2 border-[#FF3B30] text-[#FF3B30] flex items-center justify-center active:bg-[#FF3B30] active:text-white hover:bg-[#FF3B30] hover:text-white transition-colors rounded-[2px]",children:s.jsx(zn,{className:"w-5 h-5"})}),s.jsxs("button",{onClick:S,className:"flex-1 max-w-[300px] bg-[#2C2C2C] text-[#F2F0EB] h-12 rounded-[2px] font-bold text-sm tracking-wider uppercase active:bg-black hover:bg-black transition-colors shadow-lg flex items-center justify-center gap-2",children:[s.jsx(_i,{className:"w-4 h-4"}),Y?"":""]})]}),s.jsx(Be,{children:O&&s.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center px-4",children:[s.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>$(!1),className:"absolute inset-0 bg-black/40 backdrop-blur-sm"}),s.jsxs(Se.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",duration:.3,bounce:0},className:"bg-[#F2F0EB] w-full max-w-[340px] border border-[#D6D3CC] shadow-2xl relative z-10",children:[s.jsxs("div",{className:"bg-[#2C2C2C] text-[#F2F0EB] px-4 py-3 flex justify-between items-center",children:[s.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:""}),s.jsx("button",{onClick:()=>$(!1),children:s.jsx(ft,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"max-h-[50vh] overflow-y-auto p-2",children:P.length===0?s.jsx("div",{className:"p-4 text-center text-xs text-[#8C8C89] font-mono",children:""}):s.jsx("div",{className:"space-y-1",children:P.map(Z=>s.jsxs("button",{onClick:()=>K(Z.id),className:`w-full px-4 py-3 text-left text-sm font-bold border transition-all flex justify-between items-center ${k.includes(Z.id)?"bg-white border-[#2C2C2C] text-[#2C2C2C]":"bg-[#F9F9F7] border-transparent text-[#8C8C89] active:border-[#D6D3CC] hover:border-[#D6D3CC]"}`,children:[Z.name,k.includes(Z.id)&&s.jsx(kt,{className:"w-4 h-4"})]},Z.id))})}),s.jsxs("div",{className:"p-3 border-t border-[#D6D3CC] flex gap-2",children:[s.jsx("button",{onClick:()=>$(!1),className:"flex-1 py-2 text-xs font-bold text-[#5A5A55] active:bg-[#E5E5E5] hover:bg-[#E5E5E5]",children:""}),s.jsx("button",{onClick:G,className:"flex-1 py-2 bg-[#2C2C2C] text-[#F2F0EB] text-xs font-bold active:bg-black hover:bg-black",children:""})]})]})]})}),s.jsx(Be,{children:T&&s.jsx(Se.div,{initial:{opacity:0,scale:1.5,rotate:-10},animate:{opacity:1,scale:1,rotate:-5},exit:{opacity:0},className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[70] pointer-events-none",children:s.jsxs("div",{className:"w-40 h-40 rounded-full border-[6px] border-[#34C759] flex flex-col items-center justify-center text-[#34C759] opacity-90 mix-blend-multiply bg-white/50 backdrop-blur-sm",children:[s.jsx(kt,{className:"w-12 h-12 mb-1",strokeWidth:4}),s.jsx("span",{className:"text-xl font-black uppercase tracking-tight",children:""}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest mt-1",children:new Date().toLocaleDateString()})]})})}),s.jsx(Be,{children:_&&s.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center px-4",children:[s.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>N(!1),className:"absolute inset-0 bg-black/40 backdrop-blur-sm"}),s.jsxs(Se.div,{initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:10},transition:{type:"spring",duration:.3,bounce:0},className:"bg-[#F2F0EB] border-2 border-[#FF3B30] p-6 max-w-xs w-full text-center shadow-2xl relative z-10",children:[s.jsx("div",{className:"w-12 h-12 bg-[#FF3B30] text-white rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(zn,{className:"w-6 h-6"})}),s.jsx("h3",{className:"text-lg font-black text-[#2C2C2C] uppercase mb-2",children:""}),s.jsx("p",{className:"text-xs font-mono text-[#5A5A55] mb-6",children:""}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>N(!1),className:"flex-1 py-3 border border-[#D6D3CC] font-bold text-xs active:bg-white hover:bg-white transition-colors",children:""}),s.jsx("button",{onClick:z,className:"flex-1 py-3 bg-[#FF3B30] text-white font-bold text-xs active:bg-[#D32F2F] hover:bg-[#D32F2F] transition-colors",children:""})]})]})]})})]})}function k8({onBack:e}){const[t,n]=C.useState(""),[a,i]=C.useState(""),[l,c]=C.useState(""),[d,u]=C.useState(""),[m,p]=C.useState(""),[h,g]=C.useState(""),[x,v]=C.useState(""),[y,k]=C.useState(""),[w,_]=C.useState(!1);C.useEffect(()=>{(async()=>{try{const B=await ue.get(te.USER_DATA,"userData");B&&(n(B.name||""),i(B.country||""),c(B.fortress||""),u(B.attendant||""),p(B.initialSword||""),g(B.date||""),v(B.birthday||""));const O=await ue.get(te.USER_DATA,"user_description");O&&k(O)}catch(B){console.error("Failed to load user data:",B)}})()},[]);const N=async()=>{try{const T={name:t,country:a,fortress:l,attendant:d,initialSword:m,date:h,birthday:x};await ue.set(te.USER_DATA,"userData",T),await ue.set(te.USER_DATA,"user_description",y);const B=new CustomEvent("userDataChanged",{detail:T});window.dispatchEvent(B),window.dispatchEvent(new Event("chat-settings-updated")),_(!0),setTimeout(()=>{_(!1),e()},1500)}catch(T){console.error("Failed to save user data:",T)}};return s.jsxs("div",{className:"fixed inset-0 bg-[#F2F0EB] z-50 overflow-hidden flex flex-col font-['Source_Han_Sans_CN_VF',sans-serif]",children:[s.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),s.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10 bg-[#F2F0EB]/95 backdrop-blur-sm border-b border-stone-200",children:[s.jsx("button",{onClick:e,className:"w-10 h-10 bg-[#EAE8E3] border border-[#D6D3CC] rounded-md flex items-center justify-center text-[#5A5A55] transition-colors active:bg-white active:text-[#B93636] hover:bg-white hover:text-[#B93636]",children:s.jsx(ft,{className:"w-5 h-5",strokeWidth:2})}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("span",{className:"text-[10px] font-bold text-[#8C8C89] tracking-[0.2em] uppercase",children:"Form 10-24"}),s.jsx("h1",{className:"text-base font-bold text-[#2C2C2C] tracking-wide",children:""})]}),s.jsx("div",{className:"w-10"})," "]}),s.jsxs("div",{className:"flex-1 px-5 pb-28 overflow-y-auto",children:[s.jsxs("div",{className:"mt-6 mb-8 text-center",children:[s.jsx("div",{className:"inline-block border-b-2 border-[#2C2C2C] pb-1 mb-2",children:s.jsxs("h2",{className:"text-xl font-black text-[#2C2C2C] uppercase tracking-tighter flex items-center gap-2",children:[s.jsx(Xh,{className:"w-5 h-5"}),""]})}),s.jsx("p",{className:"text-[10px] font-mono text-[#8C8C89] uppercase tracking-widest",children:""})]}),s.jsxs("div",{className:"space-y-6 max-w-[420px] mx-auto",children:[s.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)]",children:[s.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:""}),s.jsxs("div",{className:"space-y-4 mt-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1",children:""}),s.jsx("input",{type:"text",value:t,onChange:T=>n(T.target.value),className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-lg font-bold text-[#2C2C2C] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors placeholder:text-[#CCC]",placeholder:""})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[s.jsx(M_,{className:"w-3 h-3"})," "]}),s.jsx("input",{type:"text",value:l,onChange:T=>c(T.target.value),className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-sm font-medium text-[#4A4A4A] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[s.jsx(t6,{className:"w-3 h-3"})," "]}),s.jsx("input",{type:"text",value:a,onChange:T=>i(T.target.value),className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-sm font-medium text-[#4A4A4A] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors"})]})]})]})]}),s.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)]",children:[s.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:""}),s.jsxs("div",{className:"mt-2 space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[10px] font-mono text-[#B93636] uppercase tracking-wider mb-1 flex items-center gap-1",children:[s.jsx(tv,{className:"w-3 h-3",fill:"currentColor"})," "]}),s.jsx("div",{className:"relative",children:s.jsx("input",{type:"text",value:d,onChange:T=>u(T.target.value),className:"w-full bg-[#FFF5F5] border-b-2 border-[#EFCACA] px-3 py-2 text-sm font-bold text-[#B93636] focus:outline-none focus:border-[#B93636] focus:bg-white transition-colors",placeholder:""})})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[s.jsx(_E,{className:"w-3 h-3"})," "]}),s.jsx("input",{type:"text",value:m,onChange:T=>p(T.target.value),className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-sm font-medium text-[#4A4A4A] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors",placeholder:""})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[s.jsx(cr,{className:"w-3 h-3"})," "]}),s.jsx("input",{type:"date",value:h,onChange:T=>g(T.target.value),className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-2 py-2 text-xs font-mono font-medium text-[#4A4A4A] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[10px] font-mono text-[#8C8C89] uppercase tracking-wider mb-1 flex items-center gap-1",children:[s.jsx(r6,{className:"w-3 h-3"})," "]}),s.jsx("input",{type:"text",value:x,onChange:T=>v(T.target.value),placeholder:"MM-DD",className:"w-full bg-[#EAE8E3] border-b-2 border-[#D6D3CC] px-3 py-2 text-xs font-mono font-medium text-[#4A4A4A] focus:outline-none focus:border-[#2C2C2C] focus:bg-white transition-colors"})]})]})]})]}),s.jsxs("div",{className:"bg-[#F9F9F7] border border-[#D6D3CC] p-5 pb-2 relative shadow-[2px_2px_0px_rgba(0,0,0,0.05)] h-[240px] flex flex-col",children:[s.jsx("div",{className:"absolute -top-2.5 left-4 bg-[#2C2C2C] text-white px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider",children:""}),s.jsxs("div",{className:"flex-1 mt-2 relative",children:[s.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-10",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px)",backgroundSize:"100% 2rem",marginTop:"1.9rem"}}),s.jsx("textarea",{value:y,onChange:T=>k(T.target.value),className:"w-full h-full bg-transparent border-none text-sm text-[#4A4A4A] focus:outline-none resize-none leading-[2rem]",placeholder:"...",style:{lineHeight:"2rem"}})]}),s.jsx("div",{className:"text-right border-t border-[#E5E5E5] pt-2 mt-2",children:s.jsxs("span",{className:"text-[10px] font-mono text-[#8C8C89]",children:[": ",y.length]})})]})]})]}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-6 bg-[#F2F0EB]/90 backdrop-blur-md border-t border-[#D6D3CC] z-40",children:s.jsxs("div",{className:"max-w-[420px] mx-auto flex gap-4 items-center justify-between",children:[s.jsx("div",{className:"text-[10px] font-mono text-[#8C8C89] max-w-[150px]",children:""}),s.jsxs("button",{onClick:N,className:"bg-[#2C2C2C] text-[#F2F0EB] px-8 py-3 rounded-[2px] font-bold text-sm tracking-wider uppercase active:bg-black hover:bg-black transition-colors shadow-lg flex items-center gap-2",children:[s.jsx(_i,{className:"w-4 h-4"}),""]})]})}),s.jsx(Be,{children:w&&s.jsx(Se.div,{initial:{opacity:0,scale:1.5,rotate:-10},animate:{opacity:1,scale:1,rotate:-5},exit:{opacity:0},className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[60] pointer-events-none",children:s.jsxs("div",{className:"w-40 h-40 rounded-full border-[6px] border-[#34C759] flex flex-col items-center justify-center text-[#34C759] opacity-90 mix-blend-multiply bg-white/50 backdrop-blur-sm",children:[s.jsx(kt,{className:"w-12 h-12 mb-1",strokeWidth:4}),s.jsx("span",{className:"text-xl font-black uppercase tracking-tight",children:""}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest mt-1",children:new Date().toLocaleDateString()})]})})})]})}function C8({onClose:e}){const[t,n]=C.useState("list"),[a,i]=C.useState(null),[l,c]=C.useState(Date.now()),d=()=>{n("editUser")},u=p=>{i(p),n("editCharacter")},m=()=>{n("list"),i(null),c(Date.now())};return s.jsxs("div",{className:"relative w-full h-full bg-[#F2F0EB]",children:[s.jsx(w8,{onClose:e,onEditUser:d,onEditCharacter:u,isBackground:t!=="list",lastUpdated:l}),s.jsxs(Be,{children:[t==="editUser"&&s.jsx(Se.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"absolute inset-0 z-20",style:{willChange:"transform"},children:s.jsx(k8,{onBack:m})},"editUser"),t==="editCharacter"&&s.jsx(Se.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"absolute inset-0 z-20",style:{willChange:"transform"},children:s.jsx(S8,{onBack:m,character:a})},"editCharacter")]}),s.jsx(Be,{children:t!=="list"&&s.jsx(Se.div,{initial:{opacity:0},animate:{opacity:.3},exit:{opacity:0},className:"absolute inset-0 bg-black z-10 pointer-events-none"})})]})}function j8(){const e={user:`background: linear-gradient(75deg, rgba(172, 188, 166, 1), rgba(172, 188, 166, 1), rgba(172, 188, 166, 1));
color: #ffffff;
border-radius: 8px;
padding: 0.625rem 0.875rem;
max-width: 70vw;`,character:`background: linear-gradient(-75deg, rgba(245, 245, 245, 1), rgba(245, 245, 245, 1), rgba(245, 245, 245, 1));
color: #333333;
border-radius: 8px;
padding: 0.625rem 0.875rem;
max-width: 70vw;`,userQuote:`background: #9BAD96;
color: rgba(255, 255, 255, 0.8);
border-radius: 4px;
padding: 0.5rem;
margin-bottom: 0.5rem;`,characterQuote:`background: #e8e8e8;
color: #666666;
border-radius: 4px;
padding: 0.5rem;
margin-bottom: 0.5rem;`},[t,n]=C.useState(()=>Fe.chatSettings||{userAvatar:null,userNickname:"",contextMessageCount:10,chatBackground:null,enabledWorldBooks:[],timeAwareness:!0,bubbleStyles:e,timestampStyle:"default",theme:"light"}),[a,i]=C.useState(()=>Fe.chatSettings||{userAvatar:null,userNickname:"",contextMessageCount:10,chatBackground:null,enabledWorldBooks:[],timeAwareness:!0,bubbleStyles:e,timestampStyle:"default",theme:"light"}),[l,c]=C.useState(null),[d,u]=C.useState(null),[m,p]=C.useState(!1),[h,g]=C.useState([]),[x,v]=C.useState(!1),[y,k]=C.useState(!1),[w,_]=C.useState([]),[N,T]=C.useState(""),[B,O]=C.useState(!1),[$,P]=C.useState([]),[A,H]=C.useState(()=>{const se=Fe.chatSettings;return se?.theme?se.theme==="dark"||se.theme==="dark-frosted":se?.darkMode||!1});C.useEffect(()=>{H(a.theme==="dark"||a.theme==="dark-frosted")},[a.theme]);const Y=se=>{const xe={user:se?.user||e.user,userQuote:se?.userQuote||e.userQuote,character:se?.character||e.character,characterQuote:se?.characterQuote||e.characterQuote};return`/*  */
.user-bubble {
  ${xe.user.split(`
`).join(`
  `)}
}

/*  */
.user-quote {
  ${xe.userQuote.split(`
`).join(`
  `)}
}

/*  */
.character-bubble {
  ${xe.character.split(`
`).join(`
  `)}
}

/*  */
.character-quote {
  ${xe.characterQuote.split(`
`).join(`
  `)}
}`},E=se=>{const xe={...e},Ie=se.match(/\.user-bubble\s*\{([^}]*)\}/),I=se.match(/\.user-quote\s*\{([^}]*)\}/),me=se.match(/\.character-bubble\s*\{([^}]*)\}/),he=se.match(/\.character-quote\s*\{([^}]*)\}/);return Ie&&(xe.user=Ie[1].trim().replace(/\s+/g," ").replace(/; /g,`;
`)),I&&(xe.userQuote=I[1].trim().replace(/\s+/g," ").replace(/; /g,`;
`)),me&&(xe.character=me[1].trim().replace(/\s+/g," ").replace(/; /g,`;
`)),he&&(xe.characterQuote=he[1].trim().replace(/\s+/g," ").replace(/; /g,`;
`)),xe};C.useEffect(()=>{D(),S(),z()},[]),C.useEffect(()=>{(async()=>{if(a.userAvatar)if(a.userAvatar.startsWith("data:"))c(a.userAvatar);else{const xe=await wt(a.userAvatar);c(xe)}else c(null);if(a.chatBackground)if(a.chatBackground.startsWith("data:"))u(a.chatBackground);else{const xe=await wt(a.chatBackground);u(xe)}else u(null)})()},[a.userAvatar,a.chatBackground]);const D=async()=>{try{const se=await ue.get(te.CHATS,"chat_settings");if(se){const xe={...se,enabledWorldBooks:se.enabledWorldBooks||[],timeAwareness:se.timeAwareness!==void 0?se.timeAwareness:!0,bubbleStyles:se.bubbleStyles||e,timestampStyle:se.timestampStyle||"default",theme:se.theme||(se.darkMode?"dark":"light")};n(xe),i(xe),Fe.chatSettings=xe}else{const xe=await ue.get(te.USER_DATA,"userData");if(xe){const Ie={userAvatar:null,userNickname:xe.name||"",contextMessageCount:10,chatBackground:null,enabledWorldBooks:[],timeAwareness:!0,bubbleStyles:e,timestampStyle:"default",theme:"light"};n(Ie),i(Ie),Fe.chatSettings=Ie}}}catch(se){console.error("Failed to load chat settings:",se)}},S=async()=>{try{const se=await ue.get(te.WORLD_BOOKS,"world_books");if(se){const xe=se.filter(Ie=>Ie.scope==="local");g(xe)}}catch(se){console.error("Failed to load world books:",se)}},z=async()=>{try{const se=await ue.get(te.BUBBLE_PRESETS,"bubble_presets");se&&_(se)}catch(se){console.error("Failed to load bubble presets:",se)}},L=async se=>{try{i(se),n(se),await ue.set(te.CHATS,"chat_settings",se),Fe.chatSettings=se,window.dispatchEvent(new Event("chat-settings-updated"))}catch(xe){console.error("Failed to save settings instantly:",xe)}},F=se=>{const xe={...a,userNickname:se};L(xe)},K=se=>{const xe={...a,contextMessageCount:se};L(xe)},G=()=>{const se=document.createElement("input");se.type="file",se.accept="image/*",se.onchange=async xe=>{const Ie=xe.target.files?.[0];if(Ie){v(!0);try{const I=await ms("chat-avatar",Ie),me={...a,userAvatar:"chat-avatar"};a.userAvatar==="chat-avatar-temp"&&await wa("chat-avatar-temp"),c(I),L(me)}catch(I){console.error(":",I)}finally{v(!1)}}},se.click()},Z=()=>{const se=document.createElement("input");se.type="file",se.accept="image/*",se.onchange=async xe=>{const Ie=xe.target.files?.[0];if(Ie){v(!0);try{const I=await ms("chat-background",Ie),me={...a,chatBackground:"chat-background"};a.chatBackground==="chat-background-temp"&&await wa("chat-background-temp"),u(I),L(me)}catch(I){console.error(":",I)}finally{v(!1)}}},se.click()},R=()=>{const se={...a,chatBackground:null};u(null),L(se)},V=async()=>{try{await L(a),p(!0),setTimeout(()=>p(!1),2e3)}catch(se){console.error("Failed to apply bubble styles:",se)}},ee=()=>{P([...a.enabledWorldBooks]),O(!0)},W=se=>{$.includes(se)?P($.filter(xe=>xe!==se)):P([...$,se])},U=()=>{const se={...a,enabledWorldBooks:[...$]};L(se),O(!1)},Q=se=>{const xe={...a,enabledWorldBooks:a.enabledWorldBooks.filter(Ie=>Ie!==se)};L(xe)},oe=se=>{const xe={};return se&&se.split(";").filter(I=>I.trim()).forEach(I=>{const[me,he]=I.split(":").map(J=>J.trim());if(me&&he){const J=me.replace(/-([a-z])/g,X=>X[1].toUpperCase());xe[J]=he}}),xe},ne=async()=>{if(!N.trim()){alert("");return}const se={id:Date.now().toString(),name:N.trim(),styles:a.bubbleStyles||e,createdAt:new Date().toISOString()},xe=[...w,se];_(xe),await ue.set(te.BUBBLE_PRESETS,"bubble_presets",xe),T(""),p(!0),setTimeout(()=>p(!1),1500)},ae=se=>{i({...a,bubbleStyles:se.styles})},ve=async se=>{const xe=w.filter(Ie=>Ie.id!==se);_(xe),await ue.set(te.BUBBLE_PRESETS,"bubble_presets",xe)};return s.jsxs("div",{className:`flex-1 overflow-y-auto flex flex-col ${a.theme==="light-frosted"||a.theme==="dark-frosted"?"bg-transparent":A?"bg-[#121212]":"bg-white"}`,children:[s.jsxs("div",{className:"flex-1 px-5 py-6",children:[s.jsxs("div",{className:"mb-8 flex flex-col items-center",children:[s.jsx("button",{onClick:G,className:`w-24 h-24 rounded-full flex items-center justify-center overflow-hidden active:opacity-70 hover:opacity-70 transition-opacity ${a.theme==="light-frosted"?"bg-white/40":a.theme==="dark-frosted"?"bg-black/40":A?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,children:l?s.jsx("img",{src:l,alt:"Avatar",className:"w-full h-full object-cover"}):s.jsx(Zh,{className:"w-8 h-8 text-[#999]",strokeWidth:2})}),s.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[13px] mt-2 ${A?"text-[#888]":"text-[#999]"}`,children:""})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] mb-3 ${A?"text-white":"text-[#333]"}`,children:""}),s.jsx("input",{type:"text",value:a.userNickname,onChange:se=>F(se.target.value),placeholder:"",className:`w-full px-4 py-3 rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] outline-none transition-colors ${a.theme==="light-frosted"?"bg-white/40 text-[#333] placeholder:text-[#999] focus:bg-white/60":a.theme==="dark-frosted"?"bg-black/40 text-white placeholder:text-[#888] focus:bg-black/60":A?"bg-[#1e1e1e] text-white placeholder:text-[#888] focus:bg-[#2d2d2d]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999] focus:bg-[#ebebeb]"}`})]}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] ${A?"text-white":"text-[#333]"}`,children:"AI"}),s.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] text-[#7B9E7B]",children:a.contextMessageCount})]}),s.jsx("div",{className:"px-1",children:s.jsx("input",{type:"range",min:"1",max:"1000",value:a.contextMessageCount,onChange:se=>K(parseInt(se.target.value)),className:`w-full h-2 rounded-lg appearance-none cursor-pointer slider ${a.theme==="light-frosted"?"bg-white/40":a.theme==="dark-frosted"?"bg-white/10":A?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,style:{background:`linear-gradient(to right, #7B9E7B 0%, #7B9E7B ${(a.contextMessageCount-1)/999*100}%, ${a.theme==="light-frosted"?"rgba(255,255,255,0.4)":a.theme==="dark-frosted"?"rgba(255,255,255,0.1)":A?"#1e1e1e":"#f5f5f5"} ${(a.contextMessageCount-1)/999*100}%, ${a.theme==="light-frosted"?"rgba(255,255,255,0.4)":a.theme==="dark-frosted"?"rgba(255,255,255,0.1)":A?"#1e1e1e":"#f5f5f5"} 100%)`}})}),s.jsxs("div",{className:"flex justify-between mt-2 px-1",children:[s.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] ${A?"text-[#888]":"text-[#999]"}`,children:"1"}),s.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] ${A?"text-[#888]":"text-[#999]"}`,children:"1000"})]}),s.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[13px] mt-3 ${A?"text-[#888]":"text-[#999]"}`,children:"AIAI"})]}),s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] mb-1 ${A?"text-white":"text-[#333]"}`,children:""}),s.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[13px] ${A?"text-[#888]":"text-[#999]"}`,children:""})]}),s.jsx("button",{onClick:()=>{const se={...a,timeAwareness:!a.timeAwareness};L(se)},className:`w-12 h-7 rounded-full transition-colors flex items-center px-0.5 hover:opacity-80 active:opacity-80 ${a.timeAwareness?"bg-[#7B9E7B]":"bg-[#d0d0d0]"}`,children:s.jsx("div",{className:`w-6 h-6 bg-white rounded-full transition-transform ${a.timeAwareness?"translate-x-5":"translate-x-0"}`})})]})}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] ${A?"text-white":"text-[#333]"}`,children:""}),h.length>0&&s.jsx("button",{onClick:ee,className:"w-8 h-8 bg-[#7B9E7B] rounded-full flex items-center justify-center active:opacity-80 hover:opacity-80 transition-opacity",children:s.jsx(Gs,{className:"w-5 h-5 text-white",strokeWidth:2})})]}),h.length===0?s.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] ${A?"text-[#888]":"text-[#999]"}`,children:""}):a.enabledWorldBooks.length===0?s.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] ${A?"text-[#888]":"text-[#999]"}`,children:""}):s.jsx("div",{className:"flex flex-col gap-2",children:a.enabledWorldBooks.map(se=>{const xe=h.find(Ie=>Ie.id===se);return xe?s.jsxs("div",{className:`rounded-lg px-4 py-3 flex items-center justify-between ${a.theme==="light-frosted"?"bg-white/40":a.theme==="dark-frosted"?"bg-black/40":A?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,children:[s.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] ${A?"text-white":"text-[#333]"}`,children:xe.name}),s.jsx("button",{onClick:()=>Q(se),className:"text-[#999] hover:text-[#333] active:text-[#333] transition-colors",children:s.jsx(ft,{className:"w-5 h-5",strokeWidth:2})})]},se):null})})]}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("button",{onClick:()=>k(!y),className:`w-full flex items-center justify-between p-4 rounded-lg transition-colors ${a.theme==="light-frosted"?"bg-white/40 active:bg-white/60 hover:bg-white/60":a.theme==="dark-frosted"?"bg-black/40 active:bg-black/60 hover:bg-black/60":A?"bg-[#1e1e1e] active:bg-[#2d2d2d] hover:bg-[#2d2d2d]":"bg-[#f5f5f5] active:bg-[#ebebeb] hover:bg-[#ebebeb]"}`,children:[s.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] ${A?"text-white":"text-[#333]"}`,children:""}),s.jsx(jo,{className:`w-5 h-5 transition-transform ${y?"rotate-180":""} ${A?"text-[#a0a0a0]":"text-[#666]"}`,strokeWidth:2})]}),s.jsx(Be,{children:y&&s.jsx(Se.div,{initial:{height:0,opacity:0,marginTop:0},animate:{height:"auto",opacity:1,marginTop:16},exit:{height:0,opacity:0,marginTop:0},transition:{type:"spring",stiffness:300,damping:30},className:"overflow-hidden",children:s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] mb-3 ${A?"text-white":"text-[#333]"}`,children:""}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{const se={...a,theme:"light",darkMode:!1};L(se)},className:`flex-1 py-3 rounded-lg border-2 font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] transition-all ${a.theme==="light"?"border-[#7B9E7B] bg-[#7B9E7B]/10 text-[#7B9E7B]":A?"border-[#2d2d2d] bg-[#1e1e1e] text-[#888]":"border-[#e5e5e5] bg-[#f5f5f5] text-[#666]"}`,children:""}),s.jsx("button",{onClick:()=>{const se={...a,theme:"dark",darkMode:!0};L(se)},className:`flex-1 py-3 rounded-lg border-2 font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] transition-all ${a.theme==="dark"?"border-[#7B9E7B] bg-[#7B9E7B]/10 text-[#7B9E7B]":A?"border-[#2d2d2d] bg-[#1e1e1e] text-[#888]":"border-[#e5e5e5] bg-[#f5f5f5] text-[#666]"}`,children:""}),s.jsx("button",{onClick:()=>{const se={...a,theme:"light-frosted",darkMode:!1};L(se)},className:`flex-1 py-3 rounded-lg border-2 font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] transition-all ${a.theme==="light-frosted"?"border-[#7B9E7B] bg-[#7B9E7B]/10 text-[#7B9E7B]":A?"border-[#2d2d2d] bg-[#1e1e1e] text-[#888]":"border-[#e5e5e5] bg-[#f5f5f5] text-[#666]"}`,children:""}),s.jsx("button",{onClick:()=>{const se={...a,theme:"dark-frosted",darkMode:!0};L(se)},className:`flex-1 py-3 rounded-lg border-2 font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] transition-all ${a.theme==="dark-frosted"?"border-[#7B9E7B] bg-[#7B9E7B]/10 text-[#7B9E7B]":A?"border-[#2d2d2d] bg-[#1e1e1e] text-[#888]":"border-[#e5e5e5] bg-[#f5f5f5] text-[#666]"}`,children:""})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] mb-3 ${A?"text-white":"text-[#333]"}`,children:""}),s.jsxs("button",{onClick:Z,className:`w-full px-4 py-3 rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] transition-colors flex items-center justify-center gap-2 ${a.theme==="light-frosted"?"bg-white/40 text-[#333] active:bg-white/60 hover:bg-white/60":a.theme==="dark-frosted"?"bg-black/40 text-white active:bg-black/60 hover:bg-black/60":A?"bg-[#1e1e1e] text-white active:bg-[#2d2d2d] hover:bg-[#2d2d2d]":"bg-[#f5f5f5] text-[#333] active:bg-[#ebebeb] hover:bg-[#ebebeb]"}`,children:[s.jsx(ba,{className:`w-5 h-5 ${A?"text-[#a0a0a0]":"text-[#666]"}`,strokeWidth:2}),s.jsx("span",{children:a.chatBackground?"":""})]}),a.chatBackground&&s.jsxs("button",{onClick:R,className:`mt-2 w-full px-4 py-2.5 rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] transition-colors flex items-center justify-center gap-2 ${a.theme==="light-frosted"?"bg-red-50/50 text-[#ff4d4f] active:bg-red-50 hover:bg-red-50":a.theme==="dark-frosted"?"bg-red-900/20 text-[#ff6b6b] active:bg-red-900/30 hover:bg-red-900/30":A?"bg-[#2a1a1a] text-[#ff6b6b] active:bg-[#3a2a2a] hover:bg-[#3a2a2a]":"bg-[#fff0f0] text-[#ff4d4f] active:bg-[#ffe5e5] hover:bg-[#ffe5e5]"}`,children:[s.jsx(zn,{className:"w-4 h-4",strokeWidth:2}),s.jsx("span",{children:""})]}),d&&s.jsx("div",{className:"mt-3 rounded-lg overflow-hidden",children:s.jsx("img",{src:d,alt:"Background Preview",className:"w-full h-32 object-cover"})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] mb-3 ${A?"text-white":"text-[#333]"}`,children:""}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{const se={...a,timestampStyle:"default"};L(se)},className:`flex-1 py-3 rounded-lg border-2 font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] transition-all ${a.timestampStyle!=="inside"?"border-[#7B9E7B] bg-[#7B9E7B]/10 text-[#7B9E7B]":A?"border-[#2d2d2d] bg-[#1e1e1e] text-[#888]":"border-[#e5e5e5] bg-[#f5f5f5] text-[#666]"}`,children:" ()"}),s.jsx("button",{onClick:()=>{const se={...a,timestampStyle:"inside"};L(se)},className:`flex-1 py-3 rounded-lg border-2 font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] transition-all ${a.timestampStyle==="inside"?"border-[#7B9E7B] bg-[#7B9E7B]/10 text-[#7B9E7B]":A?"border-[#2d2d2d] bg-[#1e1e1e] text-[#888]":"border-[#e5e5e5] bg-[#f5f5f5] text-[#666]"}`,children:" ()"})]}),s.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] mt-2 ${A?"text-[#888]":"text-[#999]"}`,children:'""'})]}),s.jsxs("div",{children:[s.jsx("h4",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] mb-3 ${A?"text-white":"text-[#333]"}`,children:"CSS"}),s.jsxs("div",{className:`mb-4 p-3 rounded-lg ${a.theme==="light-frosted"?"bg-white/40":a.theme==="dark-frosted"?"bg-black/20":A?"bg-[#181818]":"bg-[#fafafa]"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("input",{type:"text",value:N,onChange:se=>T(se.target.value),placeholder:"",className:`flex-1 px-3 py-2 border rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] outline-none transition-colors ${a.theme==="light-frosted"?"bg-white/60 border-white/40 text-[#333] placeholder:text-[#999] focus:border-[#7B9E7B]":a.theme==="dark-frosted"?"bg-black/40 border-white/10 text-white placeholder:text-[#888] focus:border-[#7B9E7B]":A?"bg-[#1e1e1e] border-[#333] text-white placeholder:text-[#888] focus:border-[#7B9E7B]":"bg-white border-[#e0e0e0] text-[#333] placeholder:text-[#999] focus:border-[#7B9E7B]"}`}),s.jsxs("button",{onClick:ne,className:"px-3 py-2 bg-[#7B9E7B] rounded-lg text-white active:opacity-80 hover:opacity-80 transition-opacity flex items-center gap-1.5",children:[s.jsx(_i,{className:"w-4 h-4",strokeWidth:2}),s.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[13px]",children:""})]})]}),w.length>0&&s.jsx("div",{className:"flex flex-col gap-2",children:w.map(se=>s.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg border ${a.theme==="light-frosted"?"bg-white/60 border-white/40":a.theme==="dark-frosted"?"bg-black/40 border-white/10":A?"bg-[#1e1e1e] border-[#333]":"bg-white border-[#e0e0e0]"}`,children:[s.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] flex-1 ${A?"text-white":"text-[#333]"}`,children:se.name}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("button",{onClick:()=>ae(se),className:"px-2.5 py-1.5 bg-[#7B9E7B] rounded font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[12px] text-white active:opacity-80 hover:opacity-80 transition-opacity",children:""}),s.jsx("button",{onClick:()=>ve(se.id),className:`p-1.5 rounded transition-colors ${a.theme==="light-frosted"?"bg-black/5 text-[#666] active:bg-black/10 hover:bg-black/10":a.theme==="dark-frosted"?"bg-white/10 text-[#a0a0a0] active:bg-white/20 hover:bg-white/20":A?"bg-[#2d2d2d] text-[#a0a0a0] active:bg-[#3d3d3d] hover:bg-[#3d3d3d]":"bg-[#f0f0f0] text-[#666] active:bg-[#e0e0e0] hover:bg-[#e0e0e0]"}`,children:s.jsx(zn,{className:"w-3.5 h-3.5",strokeWidth:2})})]})]},se.id))})]}),s.jsx("textarea",{value:Y(a.bubbleStyles||e),onChange:se=>{const xe=E(se.target.value);i({...a,bubbleStyles:xe})},placeholder:"CSS...",className:`w-full px-3 py-2 rounded-lg font-mono text-[11px] outline-none transition-colors resize-y min-h-[300px] ${a.theme==="light-frosted"?"bg-white/40 text-[#333] placeholder:text-[#999] focus:bg-white/60":a.theme==="dark-frosted"?"bg-black/40 text-white placeholder:text-[#888] focus:bg-black/60":A?"bg-[#1e1e1e] text-white placeholder:text-[#888] focus:bg-[#2d2d2d]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999] focus:bg-[#ebebeb]"}`,style:{whiteSpace:"pre",overflowWrap:"normal",overflowX:"auto"}}),s.jsxs("div",{className:`mt-4 p-3 rounded-lg bg-cover bg-center ${!d&&(a.theme==="light-frosted"?"bg-white/40":a.theme==="dark-frosted"?"bg-black/20":A?"bg-[#181818]":"bg-[#fafafa]")}`,style:d?{backgroundImage:`url(${d})`}:{},children:[s.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[12px] mb-3 drop-shadow-md ${A||d?"text-[#e0e0e0]":"text-[#999]"}`,children:""}),s.jsx("div",{className:"flex justify-start mb-3",children:s.jsxs("div",{style:oe((a.bubbleStyles||e).character),children:[s.jsxs("div",{style:oe((a.bubbleStyles||e).characterQuote),children:[s.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px]",children:""}),s.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px]",children:""})]}),s.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px]",children:""})]})}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("div",{style:oe((a.bubbleStyles||e).user),children:[s.jsxs("div",{style:oe((a.bubbleStyles||e).userQuote),children:[s.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px]",children:""}),s.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px]",children:""})]}),s.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px]",children:""})]})})]}),s.jsx("button",{onClick:V,className:"mt-4 w-full py-3 bg-[#7B9E7B] rounded-lg font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[16px] text-white active:opacity-80 hover:opacity-80 transition-opacity flex items-center justify-center",children:""}),s.jsx("button",{onClick:()=>i({...a,bubbleStyles:e}),className:`mt-4 w-full px-4 py-2 border rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] transition-colors ${a.theme==="light-frosted"?"bg-white/40 border-white/40 text-[#666] active:bg-white/60 hover:bg-white/60":a.theme==="dark-frosted"?"bg-black/40 border-white/10 text-[#a0a0a0] active:bg-black/60 hover:bg-black/60":A?"bg-[#1e1e1e] border-[#333] text-[#a0a0a0] active:bg-[#2d2d2d] hover:bg-[#2d2d2d]":"bg-white border-[#d0d0d0] text-[#666] active:bg-[#f5f5f5] hover:bg-[#f5f5f5]"}`,children:""})]})]})})})]})]}),m&&s.jsx("div",{className:"fixed inset-0 bg-black/40 z-[80] flex items-center justify-center p-4",children:s.jsx("div",{className:`rounded-2xl w-64 px-6 py-5 shadow-2xl transition-all ${a.theme==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":a.theme==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":A?"bg-[#1e1e1e]":"bg-white"}`,children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-3 ${a.theme==="light-frosted"?"bg-[#7B9E7B]/90":"bg-[#7B9E7B]"}`,children:s.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),s.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[16px] ${A?"text-white":"text-[#333]"}`,children:""})]})})}),x&&s.jsx("div",{className:"fixed inset-0 bg-black/40 z-[80] flex items-center justify-center p-4",children:s.jsx("div",{className:`rounded-2xl w-64 px-6 py-5 shadow-2xl transition-all ${a.theme==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":a.theme==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":A?"bg-[#1e1e1e]":"bg-white"}`,children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-[#7B9E7B] flex items-center justify-center mb-3",children:s.jsx("div",{className:"w-6 h-6 border-3 border-white border-t-transparent rounded-full animate-spin"})}),s.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[16px] ${A?"text-white":"text-[#333]"}`,children:"..."})]})})}),B&&s.jsx("div",{className:"fixed inset-0 bg-black/40 z-[1200] flex items-center justify-center p-4",children:s.jsxs("div",{className:`rounded-2xl p-6 w-full max-w-[360px] shadow-xl max-h-[70vh] overflow-y-auto ${a.theme==="light-frosted"?"bg-white/80 backdrop-blur-md":A?"bg-[#1e1e1e]":"bg-white"}`,children:[s.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-4 ${A?"text-white":"text-[#333]"}`,children:""}),h.length===0?s.jsx("div",{className:"py-8 text-center",children:s.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] ${A?"text-[#888]":"text-[#999]"}`,children:""})}):s.jsx("div",{className:"flex flex-col gap-3 mb-6",children:h.map(se=>s.jsxs("button",{onClick:()=>W(se.id),className:"flex items-center gap-3 active:opacity-70 hover:opacity-70 transition-opacity",children:[s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors flex-shrink-0 ${$.includes(se.id)?"bg-[#7B9E7B] border-[#7B9E7B]":a.theme==="light-frosted"?"bg-white/40 border-black/5":A?"bg-[#1e1e1e] border-[#333]":"bg-white border-[#d0d0d0]"}`,children:$.includes(se.id)&&s.jsx(kt,{className:"w-3.5 h-3.5 text-white",strokeWidth:3})}),s.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] text-left flex-1 ${A?"text-white":"text-[#333]"}`,children:se.name})]},se.id))}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>O(!1),className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors ${a.theme==="light-frosted"?"bg-black/5 text-[#666] hover:bg-black/10 active:bg-black/10":A?"bg-[#2d2d2d] text-[#a0a0a0] hover:bg-[#3d3d3d] active:bg-[#3d3d3d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),s.jsx("button",{onClick:U,className:"flex-1 py-2.5 rounded-xl bg-[#7B9E7B] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity",children:""})]})]})})]})}function N8({onClose:e,onOpenChat:t}){const[n,a]=C.useState("messages"),[i,l]=C.useState([]),[c,d]=C.useState(!1),[u,m]=C.useState(!1),[p,h]=C.useState([]),[g,x]=C.useState(()=>Fe.chatSettings?.darkMode||!1),[v,y]=C.useState(()=>Fe.chatSettings?.theme||(Fe.chatSettings?.darkMode?"dark":"light")),[k,w]=C.useState(null);C.useEffect(()=>{N(),T(),B();const E=async()=>{const S=Fe.chatSettings;x(S?.darkMode||!1);const z=S?.theme||(S?.darkMode?"dark":"light");if(y(z),(z==="light-frosted"||z==="dark-frosted")&&S?.chatBackground)if(S.chatBackground.startsWith("data:"))w(S.chatBackground);else try{const L=await wt(S.chatBackground);w(L)}catch(L){console.error("Failed to load background image:",L)}else w(null);T()};window.addEventListener("chat-settings-updated",E);const D=S=>{const{type:z,payload:L}=S.data;z==="AI_TASK_COMPLETED"&&(L?.taskType==="memory_extraction"?(console.log("[ChatList] "),window.dispatchEvent(new CustomEvent("character-memories-updated",{detail:{characterId:L.characterId,memories:L.result?.memories}}))):(console.log("[ChatList]  AI "),T()))};return"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",D),()=>{window.removeEventListener("chat-settings-updated",E),"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener("message",D)}},[]);const _=E=>{if(!E)return"";const D=new Date,S=new Date(E),z=new Date(D);z.setHours(0,0,0,0);const L=new Date(S);L.setHours(0,0,0,0);const F=Math.floor((z.getTime()-L.getTime())/(1e3*60*60*24)),K=S.getHours().toString().padStart(2,"0"),G=S.getMinutes().toString().padStart(2,"0");if(F===0)return`${K}:${G}`;if(F===1)return` ${K}:${G}`;if(F<7)return["","","","","","",""][S.getDay()];if(D.getFullYear()===S.getFullYear()){const ee=S.getMonth()+1,W=S.getDate();return`${ee}/${W}`}const Z=S.getFullYear(),R=S.getMonth()+1,V=S.getDate();return`${Z}/${R}/${V}`},N=async()=>{try{const E=await ue.get(te.CHATS,"chat_settings");if(E){Fe.chatSettings?Fe.chatSettings={...Fe.chatSettings,...E}:Fe.chatSettings=E,E.darkMode!==void 0&&x(E.darkMode);const D=E.theme||(E.darkMode?"dark":"light");if(y(D),(D==="light-frosted"||D==="dark-frosted")&&E.chatBackground)if(E.chatBackground.startsWith("data:"))w(E.chatBackground);else try{const S=await wt(E.chatBackground);w(S)}catch(S){console.error("Failed to load background image:",S)}}}catch(E){console.error("Failed to load global chat settings:",E)}},T=async()=>{try{const E=await ue.get(te.CHATS,"chat_list");if(E){const D=await Promise.all(E.map(async S=>{const z=`chat_detail_settings_${S.id}`,L=await ue.get(te.CHAT_SETTINGS,z),F=_(S.timestamp);return L?{...S,remark:L.remark||S.remark,isPinned:L.isPinned!==void 0?L.isPinned:S.isPinned,time:F}:{...S,time:F}}));D.sort((S,z)=>{if(S.isPinned&&!z.isPinned)return-1;if(!S.isPinned&&z.isPinned)return 1;const L=S.timestamp||0;return(z.timestamp||0)-L}),l(D)}else l([])}catch(E){console.error("Failed to load chats:",E),l([])}},B=async()=>{try{const E=await ue.get(te.CHARACTERS,"characters");E&&h(E)}catch(E){console.error("Failed to load characters:",E)}},O=()=>{d(!c)},$=()=>{d(!1),console.log("Create group")},P=()=>{d(!1),m(!0)},A=async E=>{m(!1);const D=Zf(E.id,E.name);if(D===E.name){const S=`chat_detail_settings_${E.id}`,L=(await ue.get(te.CHAT_SETTINGS,S))?.remark||E.name;t(E.id,L)}else t(E.id,D)},H=E=>{const D=i.find(S=>S.id===E);if(D){let S=D.name;if(S===""||!S){const L=p.find(F=>F.id===E);L&&(S=L.name)}const z=Zf(E,D.remark||S);t(E,z)}},Y=()=>{switch(n){case"messages":return"";case"notifications":return"";case"settings":return"";default:return""}};return s.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col",children:[v==="light-frosted"||v==="dark-frosted"?s.jsxs(s.Fragment,{children:[k&&s.jsx("div",{className:"absolute inset-0 -z-20",children:s.jsx("img",{src:k,className:"w-full h-full object-cover"})}),s.jsx("div",{className:`absolute inset-0 -z-10 backdrop-blur-xl ${v==="light-frosted"?"bg-white/80":"bg-black/60"}`})]}):s.jsx("div",{className:`absolute inset-0 -z-10 ${g?"bg-[#121212]":"bg-white"}`}),s.jsx("div",{className:v==="light-frosted"||v==="dark-frosted"?"bg-transparent z-20":g?"bg-[#121212]":"bg-white",children:s.jsxs("div",{className:"h-16 flex items-center justify-between px-4 relative",children:[s.jsx("button",{onClick:e,className:"p-2 -ml-2 active:opacity-60 transition-opacity",children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:g?"white":"black",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M15 18l-6-6 6-6"})})}),s.jsx("h1",{className:`absolute left-1/2 -translate-x-1/2 font-semibold text-[18px] ${g?"text-white":"text-[#333]"}`,children:Y()}),n==="messages"&&s.jsx("button",{onClick:O,className:"p-2 -mr-2 active:opacity-60 transition-opacity relative font-normal",children:s.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:g?"white":"#333333",strokeWidth:"2.5",children:[s.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),s.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),n!=="messages"&&s.jsx("div",{className:"w-11"})]})}),s.jsx(Be,{children:c&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-[51]",onClick:()=>d(!1)}),s.jsxs(Se.div,{initial:{opacity:0,scale:.9,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-10},transition:{type:"spring",stiffness:400,damping:30},className:`absolute right-4 top-[68px] rounded-lg shadow-lg z-[52] overflow-hidden ${v==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":v==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20":g?"bg-[#1e1e1e] border border-[#2d2d2d]":"bg-white"}`,children:[s.jsxs("button",{onClick:$,className:`w-full flex items-center gap-3 px-4 py-3 transition-colors ${v==="light-frosted"?"active:bg-white/60 hover:bg-white/40":v==="dark-frosted"?"active:bg-white/10 hover:bg-white/5":g?"active:bg-[#2d2d2d]":"active:bg-[#f5f5f5]"}`,children:[s.jsx(Uc,{className:`w-6 h-6 ${g||v==="dark-frosted"?"text-white":"text-[#333]"}`,strokeWidth:2.5,strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] whitespace-nowrap ${g||v==="dark-frosted"?"text-white":"text-[#333]"}`,children:""})]}),s.jsxs("button",{onClick:P,className:`w-full flex items-center gap-3 px-4 py-3 transition-colors ${v==="light-frosted"?"active:bg-white/60 hover:bg-white/40":v==="dark-frosted"?"active:bg-white/10 hover:bg-white/5":g?"active:bg-[#2d2d2d]":"active:bg-[#f5f5f5]"}`,children:[s.jsx(HE,{className:`w-6 h-6 ${g||v==="dark-frosted"?"text-white":"text-[#333]"}`,strokeWidth:2.5,strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] whitespace-nowrap ${g||v==="dark-frosted"?"text-white":"text-[#333]"}`,children:""})]})]})]})}),s.jsx(Be,{children:u&&s.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[s.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40",onClick:()=>m(!1)}),s.jsxs(Se.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`rounded-xl w-64 max-h-96 flex flex-col shadow-2xl relative z-10 ${v==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":v==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":g?"bg-[#1e1e1e]":"bg-white"}`,children:[s.jsxs("div",{className:`flex items-center justify-between px-5 py-3 border-b ${v==="light-frosted"?"border-white/20":v==="dark-frosted"?"border-white/10":g?"border-[#2d2d2d]":"border-[#f0f0f0]"}`,children:[s.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] ${g?"text-white":"text-[#333]"}`,children:""}),s.jsx("button",{onClick:()=>m(!1),className:`p-1 rounded-full transition-colors ${v==="light-frosted"?"active:bg-white/40 hover:bg-white/20":v==="dark-frosted"?"active:bg-white/10 hover:bg-white/5":g?"active:bg-[#2d2d2d]":"active:bg-[#f5f5f5]"}`,children:s.jsx(ft,{className:`w-5 h-5 ${g?"text-[#a0a0a0]":"text-[#666]"}`,strokeWidth:2})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:p.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 px-4",children:[s.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] ${g?"text-[#888]":"text-[#999]"}`,children:""}),s.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] mt-1 ${g?"text-[#666]":"text-[#ccc]"}`,children:""})]}):p.map(E=>s.jsx("button",{onClick:()=>A(E),className:`w-full flex items-center px-5 py-2.5 transition-colors ${v==="light-frosted"?"active:bg-white/40 hover:bg-white/20":g?"active:bg-[#2d2d2d]":"active:bg-[#f5f5f5]"}`,children:s.jsx("div",{className:"flex-1 text-center",children:s.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] ${g?"text-white":"text-[#333]"}`,children:E.name})})},E.id))})]})]})}),s.jsx("div",{className:`flex-1 overflow-hidden relative ${v==="light-frosted"||v==="dark-frosted"?"bg-transparent":g?"bg-[#121212]":"bg-white"}`,children:s.jsxs(Be,{mode:"wait",children:[n==="messages"&&s.jsx(Se.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2,ease:"easeInOut"},className:"h-full overflow-y-auto",children:i.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-20 px-4 h-full",children:[s.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-3 ${v==="light-frosted"?"bg-white/40":v==="dark-frosted"?"bg-white/10":g?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,children:s.jsx(Sx,{className:`w-9 h-9 ${g?"text-[#666]":"text-[#ccc]"}`,strokeWidth:2.5})}),s.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] ${g?"text-[#888]":"text-[#999]"}`,children:""})]}):s.jsx("div",{className:v==="light-frosted"||v==="dark-frosted"?"bg-transparent":g?"bg-[#121212]":"bg-white",children:i.map((E,D)=>s.jsxs("div",{children:[s.jsx("button",{onClick:()=>H(E.id),className:`w-full px-4 py-3.5 transition-colors flex items-start text-left ${v==="light-frosted"?`active:bg-white/60 ${E.isPinned?"bg-white/40":"bg-transparent"}`:v==="dark-frosted"?`active:bg-white/10 ${E.isPinned?"bg-black/40":"bg-transparent"}`:g?`active:bg-[#1e1e1e] ${E.isPinned?"bg-[#1a1a1a]":"bg-[#121212]"}`:`active:bg-[#f5f5f5] ${E.isPinned?"bg-[#f9f9f9]":"bg-white"}`}`,children:s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[s.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[17px] truncate ${g?"text-white":"text-[#333]"}`,children:E.remark||(E.name===""||!E.name)&&p.find(S=>S.id===E.id)?.name||E.name}),E.memberCount&&s.jsxs("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] flex-shrink-0 ${g?"text-[#888]":"text-[#999]"}`,children:["(",E.memberCount,")"]})]}),E.time&&s.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] flex-shrink-0 ml-2 ${g?"text-[#888]":"text-[#999]"}`,children:E.time})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] truncate flex-1 pr-2 ${g?"text-[#888]":"text-[#999]"}`,children:(()=>{let S=E.lastSender;const z=p.find(L=>L.id===E.id)?.name||E.name;return(!S||S===""||S===z)&&(S=E.remark||z||S),S?`${S}${E.lastMessage}`:E.lastMessage})()}),E.unread!==void 0&&E.unread>0&&s.jsx("span",{className:"min-w-[18px] h-[18px] bg-[#ff4d4f] text-white text-[11px] font-medium flex items-center justify-center rounded-full px-1.5 flex-shrink-0",children:E.unread>99?"99+":E.unread})]})]})}),D<i.length-1&&s.jsx("div",{className:`border-b ${v==="light-frosted"?"border-white/20":v==="dark-frosted"?"border-white/10":g?"border-[#2d2d2d]":"border-[#f0f0f0]"}`})]},E.id))})},"messages"),n==="notifications"&&s.jsxs(Se.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2,ease:"easeInOut"},className:"flex flex-col items-center justify-center py-20 px-4 h-full overflow-y-auto",children:[s.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-3 ${v==="light-frosted"?"bg-white/40":v==="dark-frosted"?"bg-white/10":g?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,children:s.jsx(wx,{className:`w-9 h-9 ${g?"text-[#666]":"text-[#ccc]"}`,strokeWidth:2.5})}),s.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] ${g?"text-[#888]":"text-[#999]"}`,children:""})]},"notifications"),n==="settings"&&s.jsx(Se.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2,ease:"easeInOut"},className:"h-full overflow-y-auto",children:s.jsx(j8,{})},"settings")]})}),s.jsxs("div",{className:`h-[64px] flex items-center justify-around px-4 safe-area-inset-bottom ${v==="light-frosted"||v==="dark-frosted"?"bg-transparent":g?"bg-[#121212]":"bg-white"}`,children:[s.jsxs("button",{onClick:()=>a("messages"),className:"flex flex-col items-center justify-center gap-1 py-1.5 px-6 active:opacity-60 transition-opacity",children:[s.jsx(Sx,{className:`w-6 h-6 ${n==="messages"?"text-[#7B9E7B]":g?"text-[#888]":"text-[#999]"}`,strokeWidth:2.5}),s.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] ${n==="messages"?"text-[#7B9E7B]":g?"text-[#888]":"text-[#999]"}`,children:""})]}),s.jsxs("button",{onClick:()=>a("notifications"),className:"flex flex-col items-center justify-center gap-1 py-1.5 px-6 active:opacity-60 transition-opacity",children:[s.jsx(wx,{className:`w-6 h-6 ${n==="notifications"?"text-[#7B9E7B]":g?"text-[#888]":"text-[#999]"}`,strokeWidth:2.5}),s.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] ${n==="notifications"?"text-[#7B9E7B]":g?"text-[#888]":"text-[#999]"}`,children:""})]}),s.jsxs("button",{onClick:()=>a("settings"),className:"flex flex-col items-center justify-center gap-1 py-1.5 px-6 active:opacity-60 transition-opacity",children:[s.jsx(Hc,{className:`w-6 h-6 ${n==="settings"?"text-[#7B9E7B]":g?"text-[#888]":"text-[#999]"}`,strokeWidth:2.5}),s.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] ${n==="settings"?"text-[#7B9E7B]":g?"text-[#888]":"text-[#999]"}`,children:""})]})]})]})}function si(e,t,n){let a=n.initialDeps??[],i,l=!0;function c(){var d,u,m;let p;n.key&&((d=n.debug)!=null&&d.call(n))&&(p=Date.now());const h=e();if(!(h.length!==a.length||h.some((v,y)=>a[y]!==v)))return i;a=h;let x;if(n.key&&((u=n.debug)!=null&&u.call(n))&&(x=Date.now()),i=t(...h),n.key&&((m=n.debug)!=null&&m.call(n))){const v=Math.round((Date.now()-p)*100)/100,y=Math.round((Date.now()-x)*100)/100,k=y/16,w=(_,N)=>{for(_=String(_);_.length<N;)_=" "+_;return _};console.info(`%c ${w(y,5)} /${w(v,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*k,120))}deg 100% 31%);`,n?.key)}return n?.onChange&&!(l&&n.skipInitialOnChange)&&n.onChange(i),l=!1,i}return c.updateDeps=d=>{a=d},c}function Px(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const _8=(e,t)=>Math.abs(e-t)<1.01,E8=(e,t,n)=>{let a;return function(...i){e.clearTimeout(a),a=e.setTimeout(()=>t.apply(this,i),n)}},Ix=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},A8=e=>e,T8=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),a=[];for(let i=t;i<=n;i++)a.push(i);return a},D8=(e,t)=>{const n=e.scrollElement;if(!n)return;const a=e.targetWindow;if(!a)return;const i=c=>{const{width:d,height:u}=c;t({width:Math.round(d),height:Math.round(u)})};if(i(Ix(n)),!a.ResizeObserver)return()=>{};const l=new a.ResizeObserver(c=>{const d=()=>{const u=c[0];if(u?.borderBoxSize){const m=u.borderBoxSize[0];if(m){i({width:m.inlineSize,height:m.blockSize});return}}i(Ix(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(d):d()});return l.observe(n,{box:"border-box"}),()=>{l.unobserve(n)}},Fx={passive:!0},Rx=typeof window>"u"?!0:"onscrollend"in window,M8=(e,t)=>{const n=e.scrollElement;if(!n)return;const a=e.targetWindow;if(!a)return;let i=0;const l=e.options.useScrollendEvent&&Rx?()=>{}:E8(a,()=>{t(i,!1)},e.options.isScrollingResetDelay),c=p=>()=>{const{horizontal:h,isRtl:g}=e.options;i=h?n.scrollLeft*(g&&-1||1):n.scrollTop,l(),t(i,p)},d=c(!0),u=c(!1);u(),n.addEventListener("scroll",d,Fx);const m=e.options.useScrollendEvent&&Rx;return m&&n.addEventListener("scrollend",u,Fx),()=>{n.removeEventListener("scroll",d),m&&n.removeEventListener("scrollend",u)}},P8=(e,t,n)=>{if(t?.borderBoxSize){const a=t.borderBoxSize[0];if(a)return Math.round(a[n.options.horizontal?"inlineSize":"blockSize"])}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},I8=(e,{adjustments:t=0,behavior:n},a)=>{var i,l;const c=e+t;(l=(i=a.scrollElement)==null?void 0:i.scrollTo)==null||l.call(i,{[a.options.horizontal?"left":"top"]:c,behavior:n})};class F8{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const a=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(i=>{i.forEach(l=>{const c=()=>{this._measureElement(l.target,l)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(c):c()})}));return{disconnect:()=>{var i;(i=a())==null||i.disconnect(),n=null},observe:i=>{var l;return(l=a())==null?void 0:l.observe(i,{box:"border-box"})},unobserve:i=>{var l;return(l=a())==null?void 0:l.unobserve(i)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([a,i])=>{typeof i>"u"&&delete n[a]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:A8,rangeExtractor:T8,onChange:()=>{},measureElement:P8,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var a,i;(i=(a=this.options).onChange)==null||i.call(a,this,n)},this.maybeNotify=si(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const a=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==a){if(this.cleanup(),!a){this.maybeNotify();return}this.scrollElement=a,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,l)=>{this.scrollAdjustments=0,this.scrollDirection=l?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=l,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,a)=>{const i=new Map,l=new Map;for(let c=a-1;c>=0;c--){const d=n[c];if(i.has(d.lane))continue;const u=l.get(d.lane);if(u==null||d.end>u.end?l.set(d.lane,d):d.end<u.end&&i.set(d.lane,!0),i.size===this.options.lanes)break}return l.size===this.options.lanes?Array.from(l.values()).sort((c,d)=>c.end===d.end?c.index-d.index:c.end-d.end)[0]:void 0},this.getMeasurementOptions=si(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(n,a,i,l,c,d)=>(this.prevLanes!==void 0&&this.prevLanes!==d&&(this.lanesChangedFlag=!0),this.prevLanes=d,this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:a,scrollMargin:i,getItemKey:l,enabled:c,lanes:d}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=si(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:a,scrollMargin:i,getItemKey:l,enabled:c,lanes:d},u)=>{if(!c)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>n)for(const g of this.laneAssignments.keys())g>=n&&this.laneAssignments.delete(g);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(g=>{this.itemSizeCache.set(g.key,g.size)}));const m=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===n&&(this.lanesSettling=!1);const p=this.measurementsCache.slice(0,m),h=new Array(d).fill(void 0);for(let g=0;g<m;g++){const x=p[g];x&&(h[x.lane]=g)}for(let g=m;g<n;g++){const x=l(g),v=this.laneAssignments.get(g);let y,k;if(v!==void 0&&this.options.lanes>1){y=v;const T=h[y],B=T!==void 0?p[T]:void 0;k=B?B.end+this.options.gap:a+i}else{const T=this.options.lanes===1?p[g-1]:this.getFurthestMeasurement(p,g);k=T?T.end+this.options.gap:a+i,y=T?T.lane:g%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(g,y)}const w=u.get(x),_=typeof w=="number"?w:this.options.estimateSize(g),N=k+_;p[g]={index:g,start:k,size:_,end:N,key:x,lane:y},h[y]=g}return this.measurementsCache=p,p},{key:!1,debug:()=>this.options.debug}),this.calculateRange=si(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,a,i,l)=>this.range=n.length>0&&a>0?R8({measurements:n,outerSize:a,scrollOffset:i,lanes:l}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=si(()=>{let n=null,a=null;const i=this.calculateRange();return i&&(n=i.startIndex,a=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,a]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,a]},(n,a,i,l,c)=>l===null||c===null?[]:n({startIndex:l,endIndex:c,overscan:a,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const a=this.options.indexAttribute,i=n.getAttribute(a);return i?parseInt(i,10):(console.warn(`Missing attribute name '${a}={index}' on measured element.`),-1)},this._measureElement=(n,a)=>{const i=this.indexFromElement(n),l=this.measurementsCache[i];if(!l)return;const c=l.key,d=this.elementsCache.get(c);d!==n&&(d&&this.observer.unobserve(d),this.observer.observe(n),this.elementsCache.set(c,n)),n.isConnected&&this.resizeItem(i,this.options.measureElement(n,a,this))},this.resizeItem=(n,a)=>{const i=this.measurementsCache[n];if(!i)return;const l=this.itemSizeCache.get(i.key)??i.size,c=a-l;c!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,c,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=c,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,a)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((a,i)=>{a.isConnected||(this.observer.unobserve(a),this.elementsCache.delete(i))});return}this._measureElement(n,void 0)},this.getVirtualItems=si(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,a)=>{const i=[];for(let l=0,c=n.length;l<c;l++){const d=n[l],u=a[d];i.push(u)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const a=this.getMeasurements();if(a.length!==0)return Px(a[yv(0,a.length-1,i=>Px(a[i]).start,n)])},this.getOffsetForAlignment=(n,a,i=0)=>{const l=this.getSize(),c=this.getScrollOffset();a==="auto"&&(a=n>=c+l?"end":"start"),a==="center"?n+=(i-l)/2:a==="end"&&(n-=l);const d=this.getTotalSize()+this.options.scrollMargin-l;return Math.max(Math.min(d,n),0)},this.getOffsetForIndex=(n,a="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const i=this.measurementsCache[n];if(!i)return;const l=this.getSize(),c=this.getScrollOffset();if(a==="auto")if(i.end>=c+l-this.options.scrollPaddingEnd)a="end";else if(i.start<=c+this.options.scrollPaddingStart)a="start";else return[c,a];const d=a==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(d,a,i.size),a]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:a="start",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,a),{adjustments:void 0,behavior:i})},this.scrollToIndex=(n,{align:a="auto",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let l=0;const c=10,d=m=>{if(!this.targetWindow)return;const p=this.getOffsetForIndex(n,m);if(!p){console.warn("Failed to get offset for index:",n);return}const[h,g]=p;this._scrollToOffset(h,{adjustments:void 0,behavior:i}),this.targetWindow.requestAnimationFrame(()=>{const x=this.getScrollOffset(),v=this.getOffsetForIndex(n,g);if(!v){console.warn("Failed to get offset for index:",n);return}_8(v[0],x)||u(g)})},u=m=>{this.targetWindow&&(l++,l<c?this.targetWindow.requestAnimationFrame(()=>d(m)):console.warn(`Failed to scroll to index ${n} after ${c} attempts.`))};d(a)},this.scrollBy=(n,{behavior:a}={})=>{a==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:a})},this.getTotalSize=()=>{var n;const a=this.getMeasurements();let i;if(a.length===0)i=this.options.paddingStart;else if(this.options.lanes===1)i=((n=a[a.length-1])==null?void 0:n.end)??0;else{const l=Array(this.options.lanes).fill(null);let c=a.length-1;for(;c>=0&&l.some(d=>d===null);){const d=a[c];l[d.lane]===null&&(l[d.lane]=d.end),c--}i=Math.max(...l.filter(d=>d!==null))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:a,behavior:i})=>{this.options.scrollToFn(n,{behavior:i,adjustments:a},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(t)}}const yv=(e,t,n,a)=>{for(;e<=t;){const i=(e+t)/2|0,l=n(i);if(l<a)e=i+1;else if(l>a)t=i-1;else return i}return e>0?e-1:0};function R8({measurements:e,outerSize:t,scrollOffset:n,lanes:a}){const i=e.length-1,l=u=>e[u].start;if(e.length<=a)return{startIndex:0,endIndex:i};let c=yv(0,i,l,n),d=c;if(a===1)for(;d<i&&e[d].end<n+t;)d++;else if(a>1){const u=Array(a).fill(0);for(;d<i&&u.some(p=>p<n+t);){const p=e[d];u[p.lane]=p.end,d++}const m=Array(a).fill(n+t);for(;c>=0&&m.some(p=>p>=n);){const p=e[c];m[p.lane]=p.start,c--}c=Math.max(0,c-c%a),d=Math.min(i,d+(a-1-d%a))}return{startIndex:c,endIndex:d}}const Bx=typeof document<"u"?C.useLayoutEffect:C.useEffect;function B8(e){const t=C.useReducer(()=>({}),{})[1],n={...e,onChange:(i,l)=>{var c;l?Vs.flushSync(t):t(),(c=e.onChange)==null||c.call(e,i,l)}},[a]=C.useState(()=>new F8(n));return a.setOptions(n),Bx(()=>a._didMount(),[]),Bx(()=>a._willUpdate()),a}function L8(e){return B8({observeElementRect:D8,observeElementOffset:M8,scrollToFn:I8,...e})}async function vv(e,t,n){const a=`task_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,i={taskId:a,chatId:e,type:t,status:"pending",createdAt:Date.now(),updatedAt:Date.now(),payload:n};if(await ue.set(te.AI_TASKS,a,i),console.log(`[TaskQueue]  ${a} (: ${t}, : ${e})`),"serviceWorker"in navigator&&navigator.serviceWorker.controller){const l={apiKey:n.apiKey,baseUrl:n.baseUrl,modelName:n.modelName,temperature:n.temperature,maxTokens:n.maxTokens},c=[{role:"system",content:n.systemPrompt},{role:"user",content:n.userPrompt}];navigator.serviceWorker.controller.postMessage({type:"PROCESS_AI_TASK",payload:{taskId:a,taskType:t,characterId:e,characterName:n.characterName,displayName:n.displayName,apiConfig:l,messages:c,pendingImageBase64:n.pendingImageBase64,imageRecognitionPrompt:n.imageRecognitionPrompt,referenceDate:n.referenceDate}}),console.log(`[TaskQueue]  Service Worker: ${a}`)}else console.warn("[TaskQueue] Service Worker "),window.dispatchEvent(new CustomEvent("ai-task-needs-fallback",{detail:{taskId:a,task:i}}));return a}const O8=`


1. 
2. 
3. 
 JSON Markdown`;function tc(){return Date.now().toString(36)+Math.random().toString(36).substr(2,5)}async function z8(){const e=await ue.get(te.API_SETTINGS,"api_configs"),t=parseInt(await ue.get(te.API_SETTINGS,"current_config_index")||"0");if(!e)return null;try{return JSON.parse(e)[t]||null}catch(n){return console.error("[Memory] Failed to parse API configs",n),null}}function V8(e,t,n,a){if(!t)return e.map(c=>{if(c.senderId==="system")return null;let d=c.text;return c.stickerId?d="[]":c.imageKey?d="[]":c.isPlaceholderImage?d=`[: ${c.text}]`:c.redPacket?d=c.redPacket.opened?"[-]":"[]":c.isImageRecognition&&(d=`[: ${c.text}]`),`${c.senderId==="user"?n:a}: ${d}`}).filter(c=>c!==null).join(`
`);const i=[];let l=null;return e.forEach((c,d)=>{if(c.senderId==="system")return;const u=new Date(c.timestamp);if(isNaN(u.getTime()))return;const m=`${u.getFullYear()}-${String(u.getMonth()+1).padStart(2,"0")}-${String(u.getDate()).padStart(2,"0")}`;(d===0||l!==m)&&(i.push(`${m}`),l=m);const p=`${String(u.getHours()).padStart(2,"0")}:${String(u.getMinutes()).padStart(2,"0")}`;let h=c.text;c.stickerId?h="[]":c.imageKey?h="[]":c.isPlaceholderImage?h=`[: ${c.text}]`:c.redPacket?h=c.redPacket.opened?"[-]":"[]":c.isImageRecognition&&(h=`[: ${c.text}]`);const g=c.senderId==="user"?n:a;i.push(`[${p}] ${g}: ${h}`)}),i.join(`
`)}function $8(e,t,n=2){const a=[],i=e.toLowerCase();return t.forEach(l=>{if(l.active===!1&&l.tags&&l.tags.length>0){let d=0;l.tags.forEach(u=>{if(!u)return;const m=u.toLowerCase();i.includes(m)&&(d+=m.length)}),d>=n&&a.push({id:l.id,score:d})}}),a.sort((l,c)=>c.score-l.score).slice(0,5).map(l=>l.id)}async function wv(e,t,n){const a=await ue.get(te.MISC,"memory_extraction_settings"),i=a?.threshold??20,l=a?.auto_summary??!0,c=n?.manualCount!==void 0;if(!l&&!c)return;const d=await ue.get(te.MISC,`last_extraction_index_${e}`)||0;let u=[];if(c){const A=n.manualCount;if(A<=0)return;u=t.slice(-A)}else{if(t.length-d<i)return;u=t.slice(d)}const m=await ue.get(te.CHATS,"chat_settings")||{},p=m.timeAwareness!==void 0?m.timeAwareness:!0,g=(await ue.get(te.USER_DATA,"userData")||{}).name||"",v=(await ue.get(te.CHARACTERS,"characters")||[]).find(A=>A.id===e),y=v?v.name:"",k=V8(u,p,g,y),w=await z8();if(!w||!w.apiKey||!w.baseUrl){console.warn("[Memory] Missing or invalid API configuration, skipping extraction");return}await ue.set(te.MISC,`last_extraction_index_${e}`,t.length);let _="",N="",T="",B=new Date;if(u.length>0){const A=u[u.length-1];if(A.timestamp){const H=new Date(A.timestamp);isNaN(H.getTime())||(B=H)}}const O=`${B.getFullYear()}-${String(B.getMonth()+1).padStart(2,"0")}-${String(B.getDate()).padStart(2,"0")}`;if(p){const H=["","","","","","",""][B.getDay()];_=`

- ${O} (${H})
- 
- YYYY-MM-DD`,N=`2  / event
- 
- expire_at
  a)  "expire_at": "YYYY-MM-DD"
  b) 1225
  c)  "suggested_expire_days": 
-  suggested_expire_days
-  1-3 tags`,T=`  "event": [
    {
      "content": "",
      "suggested_expire_days": 1,
      "tags": ["", ""]
    },
    {
      "content": "1231",
      "expire_at": "2025-12-31",
      "tags": ["", ""]
    }
  ],`}else _="",N=`2  / event
- 
-  "suggested_expire_days": 
-  "expire_at" 
-  1-3 tags`,T=`  "event": [
    {
      "content": "",
      "suggested_expire_days": 1,
      "tags": ["", ""]
    }
  ],`;const $=`${g}${y}
${_}

${k}

${y}

1 permanent
- 
- 
- /
-  1 
-  []
-  tags

${N}

3 summary
- 
- 
-  1-3 tags
- summary

 JSON 
{
  "permanent": [
    ""
  ],
${T}
  "summary": {
    "content": "",
    "tags": ["", ""]
  }
}`,P={apiKey:w.apiKey||"",baseUrl:w.baseUrl||"",modelName:w.modelName||"",temperature:w.temperature!==void 0&&w.temperature!==""?Number(w.temperature):void 0,maxTokens:w.maxTokens!==void 0&&w.maxTokens!==""?Number(w.maxTokens):void 0,systemPrompt:O8,userPrompt:$,characterName:y,userNickname:g,referenceDate:O};await vv(e,"memory_extraction",P),console.log("[Memory] Extraction task created for",y)}function Sv(e,t){try{let n=e;const a=e.match(/```(?:json)?\s*(\{[\s\S]*?\})\s*```/);if(a)n=a[1];else{const u=e.indexOf("{"),m=e.lastIndexOf("}");u!==-1&&m!==-1&&(n=e.substring(u,m+1))}const i=JSON.parse(n),l=[],c=new Date().toISOString().split("T")[0],d=t?new Date(t):new Date;if(Array.isArray(i.permanent)&&i.permanent.forEach(u=>{typeof u=="string"&&u.trim()&&l.push({id:tc(),type:"permanent",content:u.trim(),created_at:c,active:!0,tags:[]})}),Array.isArray(i.event)&&i.event.forEach(u=>{if(u&&u.content){const m=Array.isArray(u.tags)?u.tags:typeof u.tags=="string"?[u.tags]:[];let p;if(u.expire_at&&/^\d{4}-\d{2}-\d{2}$/.test(u.expire_at))p=u.expire_at;else if(u.suggested_expire_days){const h=new Date(d);h.setDate(h.getDate()+Number(u.suggested_expire_days)),p=h.toISOString().split("T")[0]}l.push({id:tc(),type:"event",content:u.content,created_at:c,tags:m,active:!0,expires_at:p})}}),i.summary){const u=i.summary;if(typeof u=="object"&&u.content){const m=Array.isArray(u.tags)?u.tags:typeof u.tags=="string"?[u.tags]:[];l.push({id:tc(),type:"summary",content:u.content,created_at:c,active:!0,tags:m})}else typeof u=="string"&&l.push({id:tc(),type:"summary",content:u,created_at:c,active:!0,tags:[]})}return l}catch(n){return console.error("Failed to parse memory extraction JSON",n),[]}}async function kv(e,t){const n=await ue.get(te.CHARACTERS,"characters")||[],a=n.findIndex(i=>i.id===e);if(a>=0){const i=n[a],l=i.memories||[];i.memories=[...l,...t],n[a]=i,await ue.set(te.CHARACTERS,"characters",n),console.log("[Memory] Saved",t.length,"memories for",i.name),window.dispatchEvent(new CustomEvent("character-memories-updated",{detail:{characterId:e,memories:i.memories}}))}}async function Qf(e,t){if(e==="forever"&&t==="forever")return;const n=l=>{if(l==="forever")return null;const c=l==="7d"?7:30,d=new Date;d.setDate(d.getDate()-c);const u=d.getFullYear(),m=String(d.getMonth()+1).padStart(2,"0"),p=String(d.getDate()).padStart(2,"0");return`${u}-${m}-${p}`},a=n(e),i=n(t);try{const l=await ue.get(te.CHARACTERS,"characters")||[];let c=!1,d=0;const u=l.map(m=>{if(!m.memories||m.memories.length===0)return m;const p=m.memories.length,h=m.memories.filter(g=>g.active!==!1?!0:!(g.type==="summary"&&a&&g.created_at<a||g.type==="event"&&i&&g.expires_at&&g.expires_at<i));return h.length!==p?(c=!0,d+=p-h.length,{...m,memories:h}):m});c&&(await ue.set(te.CHARACTERS,"characters",u),console.log(`[Memory Cleanup] Removed ${d} expired inactive memories.`),window.dispatchEvent(new CustomEvent("character-memories-updated",{detail:{characterId:null}})))}catch(l){console.error("[Memory Cleanup] Failed:",l)}}const H8="modulepreload",U8=function(e){return"/"+e},Lx={},W8=function(t,n,a){let i=Promise.resolve();if(n&&n.length>0){let c=function(m){return Promise.all(m.map(p=>Promise.resolve(p).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),u=d?.nonce||d?.getAttribute("nonce");i=c(n.map(m=>{if(m=U8(m),m in Lx)return;Lx[m]=!0;const p=m.endsWith(".css"),h=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${h}`))return;const g=document.createElement("link");if(g.rel=p?"stylesheet":H8,p||(g.as="script"),g.crossOrigin="",g.href=m,u&&g.setAttribute("nonce",u),document.head.appendChild(g),p)return new Promise((x,v)=>{g.addEventListener("load",x),g.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${m}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return i.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return t().catch(l)})};var fc={exports:{}},K8=fc.exports,Ox;function G8(){return Ox||(Ox=1,(function(e,t){(function(n,a){e.exports=a()})(K8,function(){return(function(n){function a(l){if(i[l])return i[l].exports;var c=i[l]={i:l,l:!1,exports:{}};return n[l].call(c.exports,c,c.exports,a),c.l=!0,c.exports}var i={};return a.m=n,a.c=i,a.d=function(l,c,d){a.o(l,c)||Object.defineProperty(l,c,{configurable:!1,enumerable:!0,get:d})},a.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return a.d(c,"a",c),c},a.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},a.p="",a(a.s=0)})([function(n,a,i){Object.defineProperty(a,"__esModule",{value:!0});var l=i(1),c=(function(d){return d&&d.__esModule?d:{default:d}})(l);a.default=c.default,n.exports=a.default},function(n,a,i){function l(D){return D&&D.__esModule?D:{default:D}}Object.defineProperty(a,"__esModule",{value:!0});var c=i(2),d=l(c),u=i(3),m=l(u),p=i(4),h=l(p),g=i(5),x=l(g),v=i(6),y=l(v),k=i(7),w=l(k),_=i(8),N=l(_),T=i(9),B=l(T),O=i(10),$=l(O),P=i(11),A=l(P),H=i(12),Y=l(H),E={lunarInfo:d.default,solarMonth:m.default,gan:h.default,zhi:x.default,animals:y.default,lunarTerm:w.default,lTermInfo:N.default,nStr1:B.default,nStr2:$.default,nStr3:A.default,nStr4:Y.default,lYearDays:function(D){var S,z=348;for(S=32768;S>8;S>>=1)z+=E.lunarInfo[D-1900]&S?1:0;return z+E.leapDays(D)},leapMonth:function(D){return 15&E.lunarInfo[D-1900]},leapDays:function(D){return E.leapMonth(D)?65536&E.lunarInfo[D-1900]?30:29:0},monthDays:function(D,S){return S>12||S<1?-1:E.lunarInfo[D-1900]&65536>>S?30:29},solarDays:function(D,S){if(S>12||S<1)return-1;var z=S-1;return z==1?D%4==0&&D%100!=0||D%400==0?29:28:E.solarMonth[z]},toGanZhi:function(D){return E.gan[D%10]+E.zhi[D%12]},getTerm:function(D,S){if(D<1900||D>2100||S<1||S>24)return-1;var z=E.lTermInfo[D-1900],L=[parseInt("0x"+z.substr(0,5)).toString(),parseInt("0x"+z.substr(5,5)).toString(),parseInt("0x"+z.substr(10,5)).toString(),parseInt("0x"+z.substr(15,5)).toString(),parseInt("0x"+z.substr(20,5)).toString(),parseInt("0x"+z.substr(25,5)).toString()],F=[L[0].substr(0,1),L[0].substr(1,2),L[0].substr(3,1),L[0].substr(4,2),L[1].substr(0,1),L[1].substr(1,2),L[1].substr(3,1),L[1].substr(4,2),L[2].substr(0,1),L[2].substr(1,2),L[2].substr(3,1),L[2].substr(4,2),L[3].substr(0,1),L[3].substr(1,2),L[3].substr(3,1),L[3].substr(4,2),L[4].substr(0,1),L[4].substr(1,2),L[4].substr(3,1),L[4].substr(4,2),L[5].substr(0,1),L[5].substr(1,2),L[5].substr(3,1),L[5].substr(4,2)];return parseInt(F[S-1])},toChinaYear:function(D){var S=parseInt(D/1e3),z=parseInt(D%1e3/100),L=parseInt(D%100/10),F=D%10;return E.nStr4[S]+E.nStr4[z]+E.nStr4[L]+E.nStr4[F]+""},toChinaMonth:function(D){if(D>12||D<1)return-1;var S=E.nStr3[D-1];return S+=""},toChinaDay:function(D){var S;switch(D){case 10:S="";break;case 20:S="";break;case 30:S="";break;default:S=E.nStr2[Math.floor(D/10)],S+=E.nStr1[D%10]}return S},getAnimal:function(D){return E.animals[(D-4)%12]},solar2lunar:function(G,Z,R){if(G<1900||G>2100||G==1900&&Z==1&&R<31)return-1;if(G)var L=new Date(G,parseInt(Z)-1,R);else var L=new Date;var F,ne=0,K=0,G=L.getFullYear(),Z=L.getMonth()+1,R=L.getDate(),V=(Date.UTC(L.getFullYear(),L.getMonth(),L.getDate())-Date.UTC(1900,0,31))/864e5;for(F=1900;F<2101&&V>0;F++)K=E.lYearDays(F),V-=K;V<0&&(V+=K,F--);var ee=new Date,W=!1;ee.getFullYear()==G&&ee.getMonth()+1==Z&&ee.getDate()==R&&(W=!0);var U=L.getDay(),Q=E.nStr1[U];U==0&&(U=7);var oe=F,ne=E.leapMonth(F),ae=!1;for(F=1;F<13&&V>0;F++)ne>0&&F==ne+1&&ae==0?(--F,ae=!0,K=E.leapDays(oe)):K=E.monthDays(oe,F),ae==1&&F==ne+1&&(ae=!1),V-=K;V==0&&ne>0&&F==ne+1&&(ae?ae=!1:(ae=!0,--F)),V<0&&(V+=K,--F);var ve=F,se=V+1,xe=Z-1,Ie=E.getTerm(G,3),I=E.toGanZhi(G-4),me=new Date(G,1,Ie).getTime();new Date(G,xe,R).getTime()<me&&(I=E.toGanZhi(G-5));var he=E.getTerm(G,2*Z-1),J=E.getTerm(G,2*Z),X=E.toGanZhi(12*(G-1900)+Z+11);R>=he&&(X=E.toGanZhi(12*(G-1900)+Z+12));var ie=!1,le="";he==R&&(ie=!0,le=E.lunarTerm[2*Z-2]),J==R&&(ie=!0,le=E.lunarTerm[2*Z-1]);var ye=Date.UTC(G,xe,1,0,0,0,0)/864e5+25567+10,ce=E.toGanZhi(ye+R-1);return{lYear:oe,lMonth:ve,lDay:se,animal:E.getAnimal(oe),yearCn:E.toChinaYear(oe),monthCn:(ae&&ne===ve?"":"")+E.toChinaMonth(ve),dayCn:E.toChinaDay(se),cYear:G,cMonth:Z,cDay:R,gzYear:I,gzMonth:X,gzDay:ce,isToday:W,isLeap:ae,nWeek:U,ncWeek:""+Q,isTerm:ie,term:le}},lunar2solar:function(D,S,z,L){var F=E.leapMonth(D);if(E.leapDays(D),L&&F!=S||D==2100&&S==12&&z>1||D==1900&&S==1&&z<31)return-1;var K=E.monthDays(D,S);if(D<1900||D>2100||z>K)return-1;for(var G=0,Z=1900;Z<D;Z++)G+=E.lYearDays(Z);for(var R=0,V=!1,Z=1;Z<S;Z++)R=E.leapMonth(D),V||R<=Z&&R>0&&(G+=E.leapDays(D),V=!0),G+=E.monthDays(D,Z);L&&(G+=K);var ee=Date.UTC(1900,1,30,0,0,0),W=new Date(864e5*(G+z-31)+ee),U=W.getUTCFullYear(),Q=W.getUTCMonth()+1,oe=W.getUTCDate();return E.solar2lunar(U,Q,oe)}};a.default=E,n.exports=a.default},function(n,a,i){Object.defineProperty(a,"__esModule",{value:!0}),a.default=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,23232,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19195,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835,37744,18936,18800,25776,92326,59984,27424,108228,43744,37600,53987,51552,54615,54432,55888,23893,22176,42704,21972,21200,43448,43344,46240,46758,44368,21920,43940,42416,21168,45683,26928,29495,27296,44368,84821,19296,42352,21732,53600,59752,54560,55968,92838,22224,19168,43476,42192,53584,62034,54560],n.exports=a.default},function(n,a,i){Object.defineProperty(a,"__esModule",{value:!0}),a.default=[31,28,31,30,31,30,31,31,30,31,30,31],n.exports=a.default},function(n,a,i){Object.defineProperty(a,"__esModule",{value:!0}),a.default=["","","","","","","","","",""],n.exports=a.default},function(n,a,i){Object.defineProperty(a,"__esModule",{value:!0}),a.default=["","","","","","","","","","","",""],n.exports=a.default},function(n,a,i){Object.defineProperty(a,"__esModule",{value:!0}),a.default=["","","","","","","","","","","",""],n.exports=a.default},function(n,a,i){Object.defineProperty(a,"__esModule",{value:!0}),a.default=["","","","","","","","","","","","","","","","","","","","","","","",""],n.exports=a.default},function(n,a,i){Object.defineProperty(a,"__esModule",{value:!0}),a.default=["9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","9778397bd19801ec9210c965cc920e","97b6b97bd19801ec95f8c965cc920f","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd197c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bcf97c3598082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd19801ec9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bd07f1487f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b97bd197c36c9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b70c9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","977837f0e37f149b0723b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0723b06bd","7f07e7f0e37f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f595b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e37f14998083b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14898082b0723b02d5","7f07e7f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66aa89801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e26665b66a449801e9808297c35","665f67f0e37f1489801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722"],n.exports=a.default},function(n,a,i){Object.defineProperty(a,"__esModule",{value:!0}),a.default=["","","","","","","","","","",""],n.exports=a.default},function(n,a,i){Object.defineProperty(a,"__esModule",{value:!0}),a.default=["","","",""],n.exports=a.default},function(n,a,i){Object.defineProperty(a,"__esModule",{value:!0}),a.default=["","","","","","","","","","","",""],n.exports=a.default},function(n,a,i){Object.defineProperty(a,"__esModule",{value:!0}),a.default=["","","","","","","","","","",""],n.exports=a.default}])})})(fc)),fc.exports}var q8=G8();const Y8=Ic(q8);function Cv(e,t){if(!e||e.length===0)return{type:"none",message:"",days:0};const a=[...e].sort((g,x)=>new Date(x.startDate).getTime()-new Date(g.startDate).getTime())[0],l=(g=>{const[x,v,y]=g.split("-").map(Number);return new Date(x,v-1,y)})(a.startDate),c=new Date;c.setHours(0,0,0,0);const d=c.getTime()-l.getTime(),u=Math.floor(d/(1e3*60*60*24));if(u>=0&&u<t.periodLength)return{type:"period",message:` ${u+1} `,days:t.periodLength-u};const m=new Date(l);m.setDate(l.getDate()+t.cycleLength);const p=m.getTime()-c.getTime(),h=Math.ceil(p/(1e3*60*60*24));return h<0?{type:"late",message:` ${Math.abs(h)} `,days:Math.abs(h)}:{type:"prediction",message:` ${h} `,days:h}}async function Z8(e){try{const t=await ue.get(te.HEALTH,"health_settings");if(!t||!t.shareEnabled||t.shareScope==="specific"&&t.shareCharacterId!==e)return"";const n=[],a=await ue.get(te.HEALTH,"sleep_logs")||[];if(a.length>0){const m=new Date().toDateString(),p=a.find(h=>new Date(h.endTime).toDateString()===m);if(p){const h={good:"",average:"",poor:""},g=y=>{const k=new Date(y);return`${String(k.getHours()).padStart(2,"0")}:${String(k.getMinutes()).padStart(2,"0")}`},x=g(p.startTime),v=g(p.endTime);n.push(`${x}-${v}:${h[p.quality]||""}`)}}const i=await ue.get(te.HEALTH,"cycle_logs")||[],l=await ue.get(te.HEALTH,"cycle_settings")||{cycleLength:28,periodLength:5};if(i.length>0){const u=Cv(i,l);u.type==="period"?n.push(u.message.replace(/\s/g,"")):u.type==="late"?n.push(u.message.replace(/\s/g,"")):u.type==="prediction"&&n.push(`${u.days}`)}const d=(await ue.get(te.HEALTH,"diagnosis_logs")||[]).filter(u=>u.status==="treating");if(d.length>0){const u=d.map(m=>m.illnessName).join("");n.push(`:${u}`)}return n.join(" ")}catch(t){return console.error("Failed to get health status:",t),""}}const Q8={totalPeriods:12,showWeekends:!0,periodTimes:Array.from({length:12},(e,t)=>({period:t+1,startTime:`${8+t}:00`,endTime:`${8+t}:45`})),startDate:new Date().toISOString().split("T")[0],totalWeeks:20},X8=e=>{const t=new Date(e),n=new Date,a=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=new Date(n.getFullYear(),n.getMonth(),n.getDate()),l=a.getDay()||7,c=new Date(a);c.setDate(a.getDate()-(l-1));const d=i.getTime()-c.getTime(),u=Math.floor(d/(1e3*60*60*24));return Math.floor(u/7)+1};async function J8(e){try{const t=await ue.get(te.SCHEDULE,"schedule_settings");if(!t||!t.shareEnabled||t.shareScope==="specific"&&t.shareCharacterId!==e)return"";const n=[],a=new Date,i=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`,c=(await ue.get(te.SCHEDULE,"todos")||[]).filter(h=>!h.completed);if(c.length>0){const h=c.map(g=>g.text).join("");n.push(`:${h}`)}const u=(await ue.get(te.SCHEDULE,"events")||[]).filter(h=>h.date===i);if(u.length>0){const h=u.map(g=>{let x="";return g.isAllDay?x="()":g.startTime&&(x=`(${g.startTime}${g.endTime?"-"+g.endTime:""})`),`${g.title}${x}`}).join("");n.push(`:${h}`)}const m=await ue.get(te.SCHEDULE,"timetable_settings"),p=await ue.get(te.SCHEDULE,"timetable_courses")||[];if(p.length>0){const h={...Q8,...m};if(h.periodTimes.length<h.totalPeriods){const k=h.periodTimes.length;for(let w=k;w<h.totalPeriods;w++)h.periodTimes.push({period:w+1,startTime:`${8+w}:00`,endTime:`${8+w}:45`})}const g=X8(h.startDate),v=(a.getDay()+6)%7,y=p.filter(k=>k.day===v&&k.weeks.includes(g)).sort((k,w)=>k.startPeriod-w.startPeriod);if(y.length>0){const k=y.map(w=>{const _=w.room?`@${w.room}`:"",N=h.periodTimes.find(O=>O.period===w.startPeriod),T=h.periodTimes.find(O=>O.period===w.endPeriod);let B="";return N&&T?B=`(${N.startTime}-${T.endTime})`:N&&(B=`(${N.startTime})`),`${w.startPeriod}-${w.endPeriod}${B}:${w.subject}${_}`}).join("");n.push(`:${k}`)}else g>0&&g<=h.totalWeeks}return n.join(" ")}catch(t){return console.error("Failed to get schedule status:",t),""}}const mi={createMemory(e,t,n={}){const a=new Date().toISOString().split("T")[0];let i=!0;return e==="permanent"||e==="event"?i=!0:e==="summary"&&(i=!1),{id:crypto.randomUUID(),type:e,content:t,created_at:n.created_at||a,expires_at:n.expires_at,importance:n.importance??.5,active:n.active??i,tags:n.tags||[]}},async injectMemories(e,t){const n=await ue.get(te.CHARACTERS,"characters")||[],a=n.findIndex(m=>m.id===e);if(a===-1)throw new Error(`Character not found: ${e}`);const i=n[a],c=[...i.memories||[],...t];let d=3;try{const m=await ue.get(te.CHAT_SETTINGS,"chat_settings");m&&m.summary_limit&&(d=Number(m.summary_limit))}catch{console.warn("Failed to fetch summary limit setting, using default 3")}const u=this.processMemories(c,d);i.memories=u,n[a]=i,await ue.set(te.CHARACTERS,"characters",n)},processMemories(e,t=3){const n=new Date().toISOString().split("T")[0];let a=e.map(d=>{if(d.type==="event")if(d.expires_at){const u=d.expires_at<n;return{...d,active:!u}}else return{...d,active:!0};return d});const i=a.filter(d=>d.type==="summary"),l=a.filter(d=>d.type!=="summary");i.sort((d,u)=>d.created_at!==u.created_at?u.created_at.localeCompare(d.created_at):0);const c=i.map((d,u)=>({...d,active:u<t}));return[...l,...c.reverse()]},async getPromptMemories(e){const n=(await ue.get(te.CHARACTERS,"characters")||[]).find(l=>l.id===e);if(!n||!n.memories)return[];let a=3;try{const l=await ue.get(te.CHAT_SETTINGS,"chat_settings");l&&l.summary_limit&&(a=Number(l.summary_limit))}catch{}return this.processMemories(n.memories,a).filter(l=>l.active===!0&&(l.type==="permanent"||l.type==="event"||l.type==="summary"))},async buildPromptContext(e){const t=await this.getPromptMemories(e);if(t.length===0)return"";const n=t.filter(c=>c.type==="permanent"),a=t.filter(c=>c.type==="event"),i=t.filter(c=>c.type==="summary");let l=`
`;return n.length>0&&(l+=`[]
`,n.forEach(c=>l+=`- ${c.content}
`)),a.length>0&&(l+=`[]
`,a.forEach(c=>l+=`- ${c.content} (: ${c.created_at})
`)),i.length>0&&(l+=`[]
`,i.sort((d,u)=>d.created_at.localeCompare(u.created_at)).forEach(d=>l+=`- ${d.content}
`)),l},async refreshAllCharactersMemories(){try{const e=await ue.get(te.CHARACTERS,"characters")||[];if(e.length===0)return;let t=3;try{const i=await ue.get(te.CHAT_SETTINGS,"chat_settings");i&&i.summary_limit&&(t=Number(i.summary_limit))}catch{}let n=!1;const a=e.map(i=>{if(!i.memories||i.memories.length===0)return i;const l=this.processMemories(i.memories,t),c=JSON.stringify(i.memories),d=JSON.stringify(l);return c!==d?(n=!0,{...i,memories:l}):i});n?(await ue.set(te.CHARACTERS,"characters",a),console.log("[MemorySystem] Refreshed all character memories status."),window.dispatchEvent(new CustomEvent("character-memories-updated",{detail:{characterId:null}}))):console.log("[MemorySystem] Checked memories, no status updates needed.")}catch(e){console.error("[MemorySystem] Failed to refresh memories:",e)}}};function Dr(e){if(!e)return 0;let t=0;for(let n=0;n<e.length;n++)e.charCodeAt(n)>255?t+=1.5:t+=.3;return Math.ceil(t)}async function jv(e,t,n){const a=await n7(),i=await s7(e,n),l=await r7(),c=await a7(e),d=await i7(i.enabledWorldBooks,c.worldBooks),u=await o7(l,t),m=await l7(i.enableStickers,i.stickerProbability),p=await Z8(e),h=await J8(e);return{apiConfig:a,chatSettings:i,userData:l,characterData:c,worldBooks:d,timeInfo:u,stickerInfo:m,healthStatus:p,scheduleStatus:h}}async function e7(e){const{characterId:t,character:n,userNickname:a,allMessages:i,tempActiveMemoryIds:l,overrideSettings:c,displayName:d}=e,u=await jv(t,n,c),{chatHistory:m,hasUnclaimedUserRedPacket:p}=await Nv(i,u.chatSettings.contextMessageCount,a,d||n.name,u.stickerInfo.stickerMeanings,u.chatSettings.timeAwareness),h=_v({character:n,userData:u.userData,userNickname:a,worldBooks:u.worldBooks,timeInfo:u.timeInfo,chatHistory:m,stickerInfo:u.stickerInfo,chatSettings:u.chatSettings,hasUnclaimedUserRedPacket:p,healthStatus:u.healthStatus,scheduleStatus:u.scheduleStatus,memories:u.characterData.memories,tempActiveMemoryIds:l}),x={systemTemplate:Dr(h.intro+h.rolePlayRules+h.outputFormat+""),userPersona:Dr(h.userContext),characterPersona:Dr(h.characterContext),worldBook:Dr(h.worldBooksBefore+h.worldBooksAfter),memories:Dr(h.memories),chatHistory:Dr(h.chatHistory),functions:Dr(h.functions),other:Dr(h.timeContext+h.healthSchedule)};return{total:Object.values(x).reduce((y,k)=>y+k,0),breakdown:x}}async function t7(e){const{characterId:t,character:n,userNickname:a,allMessages:i,tempActiveMemoryIds:l}=e;try{const c=await jv(t,n);let d=new Set(l||[]);if(c.characterData.memories&&c.characterData.memories.length>0){const x=i.slice(-10).map(v=>v.text||"").join(`
`);if(x.trim()){const v=$8(x,c.characterData.memories);v.forEach(y=>d.add(y)),v.length>0&&console.log(`[PrivateChatPromptBuilder] Auto-activated memories based on context: ${v.join(", ")}`)}}const{chatHistory:u,hasUnclaimedUserRedPacket:m}=await Nv(i,c.chatSettings.contextMessageCount,a,n.name,c.stickerInfo.stickerMeanings,c.chatSettings.timeAwareness);return{systemPrompt:c7({character:n,userData:c.userData,userNickname:a,worldBooks:c.worldBooks,timeInfo:c.timeInfo,chatHistory:u,stickerInfo:c.stickerInfo,chatSettings:c.chatSettings,hasUnclaimedUserRedPacket:m,healthStatus:c.healthStatus,scheduleStatus:c.scheduleStatus,memories:c.characterData.memories,tempActiveMemoryIds:Array.from(d)}),userPrompt:"",apiConfig:c.apiConfig,characterName:n.name}}catch(c){throw console.error("[PrivateChatPromptBuilder]  prompt :",c),c}}async function n7(){const e=await ue.get(te.API_SETTINGS,"api_configs"),t=parseInt(await ue.get(te.API_SETTINGS,"current_config_index")||"0");if(!e)throw new Error(" API");const a=JSON.parse(e)[t];if(!a||!a.apiKey||!a.baseUrl)throw new Error("API ");return{apiKey:a.apiKey,baseUrl:a.baseUrl,modelName:a.modelName,temperature:a.temperature||.9,maxTokens:a.maxTokens}}async function s7(e,t){const n=await ue.get(te.CHATS,"chat_settings")||{},a=await ue.get(te.CHAT_SETTINGS,`chat_detail_settings_${e}`)||{};return{contextMessageCount:n.contextMessageCount||10,enabledWorldBooks:n.enabledWorldBooks||[],timeAwareness:n.timeAwareness!==void 0?n.timeAwareness:!0,enableStickers:t?.enableStickers!==void 0?t.enableStickers:a.enableStickers!==void 0?a.enableStickers:!0,stickerProbability:t?.stickerProbability!==void 0?t.stickerProbability:a.stickerProbability!==void 0?a.stickerProbability:30,summaryLimit:n.summary_limit!==void 0?Number(n.summary_limit):3}}async function r7(){const e=await ue.get(te.USER_DATA,"userData")||{},t=await ue.get(te.USER_DATA,"user_description")||"";return{name:e.name||"",country:e.country||"",fortress:e.fortress||"",date:e.date||"",birthday:e.birthday||"",attendant:e.attendant||"",initialSword:e.initialSword||"",description:t}}async function a7(e){const n=(await ue.get(te.CHARACTERS,"characters")||[]).find(a=>a.id===e);return{worldBooks:n?.worldBooks||[],memories:n?.memories||[]}}async function i7(e,t){const n=await ue.get(te.WORLD_BOOKS,"world_books")||[],a=new Set([...e,...t]),i=n.filter(m=>m.scope==="global"),l=n.filter(m=>m.scope==="local"&&a.has(m.id)),c=[...i,...l],d=c.filter(m=>m.position==="before"),u=c.filter(m=>m.position==="after");return{before:d,after:u}}async function o7(e,t){const n=new Date,a=n.getHours(),i=n.getMonth()+1,l=n.getDate(),c=a<6?"":a<12?"":a<18?"":"";let d="",u="",m="";try{const y=Y8.solar2lunar(n.getFullYear(),i,l);y.festival&&(u=y.festival),y.Term&&(m=y.Term),d=(_=>{if(!_)return null;const N=["","","","","",""],T=["","","","","",""],B=["","","","","",""],O=["","","","","",""];return N.includes(_)?"":T.includes(_)?"":B.includes(_)?"":O.includes(_)?"":null})(y.Term)||(i>=3&&i<=5?"":i>=6&&i<=8?"":i>=9&&i<=11?"":"")}catch(y){console.error(":",y),d=i>=3&&i<=5?"":i>=6&&i<=8?"":i>=9&&i<=11?"":""}const p=`${i}-${l}`,h={"1-1":"","2-3":"","2-4":"","2-14":"","3-3":"","3-8":"","4-1":"","5-1":"","5-4":"","6-1":"","8-13":"","8-14":"","8-15":"","10-1":"","12-24":"","12-25":"","12-31":""};!u&&h[p]&&(u=h[p]);let g="";if(e.date){const y=pf(e.date);if(y&&y.month===i&&y.day===l){const k=n.getFullYear()-y.year;k>0?g=`${k}`:k===0&&(g="")}}let x="";if(e.birthday){const y=pf(e.birthday);y&&y.month===i&&y.day===l&&(x="")}let v="";if(t?.manifestDate){const y=pf(t.manifestDate);if(y&&y.month===i&&y.day===l){const k=n.getFullYear()-y.year;k>0?v=`${k}`:k===0?v="":v=""}}return{timeOfDay:c,season:d,holiday:u,term:m,anniversary:g,birthday:x,manifestAnniversary:v,currentTime:`${n.getFullYear()}${i.toString().padStart(2,"0")}${l.toString().padStart(2,"0")} ${n.getHours().toString().padStart(2,"0")}:${n.getMinutes().toString().padStart(2,"0")}`}}function pf(e){try{if(e.includes("-")){const t=e.split("-");if(t.length>=3)return{year:parseInt(t[0]),month:parseInt(t[1]),day:parseInt(t[2])};if(t.length>=2)return{year:new Date().getFullYear(),month:parseInt(t[0]),day:parseInt(t[1])}}if(e.includes("")){const t=e.match(/(\d{4})/),n=e.match(/(\d+)/),a=e.match(/(\d+)/);if(n&&a)return{year:t?parseInt(t[1]):new Date().getFullYear(),month:parseInt(n[1]),day:parseInt(a[1])}}return null}catch(t){return console.error(":",t),null}}async function l7(e,t){if(!e)return{enabled:!1,stickers:[],stickerMeanings:{},stickerList:"",stickerGuidance:""};const{getAllStickers:n,getStickerMeaningsForAI:a}=await W8(async()=>{const{getAllStickers:u,getStickerMeaningsForAI:m}=await Promise.resolve().then(()=>f7);return{getAllStickers:u,getStickerMeaningsForAI:m}},void 0),i=await n(),l=await a(),c=i.length>0?i.map(u=>`- ID: ${u.id} | : ${u.meaning}`).join(`
`):"";let d="";return i.length>0&&(t<=20?d="":t<=40?d="":t<=60?d="":t<=80?d="":d=""),{enabled:!0,stickers:i,stickerMeanings:l,stickerList:c,stickerGuidance:d}}async function Nv(e,t,n,a,i,l){const c=e.slice(-t);let d=!1;for(const p of c)if(p.senderId==="user"&&p.redPacket&&!p.redPacket.opened){d=!0;break}if(!l)return{chatHistory:c.map(h=>{if(h.senderId==="system")return null;if(h.isImageRecognition)return`${h.senderId==="user"?n:a}: ${h.text}`;if(h.isPlaceholderImage)return`${h.senderId==="user"?n:a}: [: ${h.text}]`;if(h.stickerId&&i[h.stickerId])return`${h.senderId==="user"?n:a}: [: ${i[h.stickerId]}]`;if(h.imageKey)return`${h.senderId==="user"?n:a}: []`;if(h.redPacket){const g=h.senderId==="user"?n:a;return h.redPacket.opened?`${g}: [-]`:`${g}: []`}return`${h.senderId==="user"?n:a}: ${h.text}`}).filter(h=>h!==null).join(`
`),hasUnclaimedUserRedPacket:d};const u=[];let m=null;return c.forEach((p,h)=>{if(p.senderId==="system")return;const g=p.timestamp instanceof Date?p.timestamp:new Date(p.timestamp),x=`${g.getFullYear()}-${String(g.getMonth()+1).padStart(2,"0")}-${String(g.getDate()).padStart(2,"0")}`;(h===0||m!==x)&&(u.push(`${x}`),m=x);const v=`${String(g.getHours()).padStart(2,"0")}:${String(g.getMinutes()).padStart(2,"0")}`;let y="";const k=p.senderId==="user"?n:a;p.isImageRecognition?y=p.text:p.isPlaceholderImage?y=`[: ${p.text}]`:p.stickerId&&i[p.stickerId]?y=`[: ${i[p.stickerId]}]`:p.imageKey?y="[]":p.redPacket?p.redPacket.opened?y="[-]":y="[]":y=p.text,u.push(`[${v}] ${k}: ${y}`)}),{chatHistory:u.join(`
`),hasUnclaimedUserRedPacket:d}}function _v(e){const{character:t,userData:n,userNickname:a,worldBooks:i,timeInfo:l,chatHistory:c,stickerInfo:d,chatSettings:u,hasUnclaimedUserRedPacket:m,healthStatus:p,scheduleStatus:h,memories:g,tempActiveMemoryIds:x}=e,v=Array.isArray(x)?x.slice(-5):[];let y="";if(g&&g.length>0){const z=mi.processMemories(g,u.summaryLimit||3),L=V=>v.includes(V.id),F=V=>V.active!==!1||L(V),K=z.filter(V=>V.type==="permanent"&&F(V)).map(V=>`- ${V.content}`).join(`
`),G=z.filter(V=>V.type==="event"&&F(V)).map(V=>`- ${V.content} ${V.expires_at?`(: ${V.expires_at})`:""}`).join(`
`),R=z.filter(V=>V.type==="summary"&&F(V)).sort((V,ee)=>{const W=V.created_at||"",U=ee.created_at||"";return W.localeCompare(U)}).map(V=>`- ${V.content}`).join(`
`);(K||G||R)&&(y=`
** (Memory Context):**`,K&&(y+=`
[]
${K}`),G&&(y+=`
[]
${G}`),R&&(y+=`
[]
${R}`),y+=`
`)}const k=i.before.map((z,L)=>`- **${L+1}${z.name}:** ${z.content}`).join(`
`),w=i.after.map((z,L)=>`- **${L+1}${z.name}:** ${z.content}`).join(`
`);let _="";u.timeAwareness&&(_=`- **:** ${l.currentTime} (${l.timeOfDay}, ${l.season})`,l.term&&(_+=`
- **:** ${l.term}`),l.holiday&&(_+=`
- **:** ${l.holiday}`),l.anniversary&&(_+=`
- **:** ${l.anniversary}`),l.birthday&&(_+=`
- **:** ${l.birthday}`),l.manifestAnniversary&&(_+=`
- **:** ${l.manifestAnniversary}`));const N=u.timeAwareness?`** **
1. "" [HH:MM] YYYY-MM-DD
2. "23:15"23:15
3. 

`:"",T=d.enabled&&d.stickers.length>0?`${d.stickerGuidance}
${d.stickerList}
-  "stickerId" ID
- : { "sender": "${t.name}", "stickerId": "sticker_xxxxx" }
- 
- `:"",B=m?`

** ():**
- "[]"
- **"[-]"**
- : { "sender": "system", "content": "" }
- `:"",O=p?`
  - **:** ${p}
  - **:** - - - - `:"",$=h?`
  - **:** ${h}
  - **:** `:"",P=`""

**:**
- **:** 
- **:** `,A=`**:**
-  **** 
- 
- """"""""""
- 
-  emoji 
- **** """AI"""""""`,H=`**:**
- **:** ${t.name}
- **:** ${t.description||""}${t.manifestDate?`
- **:** ${t.manifestDate}`:""}`,Y=`- ** ():**
  - **:** ${a}
  - **:** ${n.name}
  - **:** ${n.country}
  - **:** ${n.fortress}
  - **:** ${n.date}${n.birthday?`
  - **:** ${n.birthday}`:""}${n.attendant?`
  - **:** ${n.attendant}`:""}${n.initialSword?`
  - **:** ${n.initialSword}`:""}${n.description?`
  - **:** ${n.description}`:""}`,E=`** ():**
${T}

** ():**
- ""
- 
-  "isPlaceholderImage"  "content" 100
- : { "sender": "${t.name}", "content": "", "isPlaceholderImage": true }
- 100
- 
${B}

** ():**
- 
- 
- : { "sender": "${t.name}", "redPacket": { "amount": , "blessing": "" } }
- amount:  500-10000
- blessing: 
- `,D=`** ( JSON):**
{
    "messages": [
        { "sender": "${t.name}", "content": "" },
        {
            "sender": "${t.name}",
            "content": "",
            "quote": {
                "sender": "${a}",
                "content": ""
            }
        },
        {
            "sender": "${t.name}",
            "content": "/",
            "quote": {
                "sender": "${a}",
                "content": "[]"
            }
        },
        { "sender": "${t.name}", "stickerId": "sticker_xxxxx" },
        { "sender": "${t.name}", "content": "100", "isPlaceholderImage": true },
        { "sender": "${t.name}", "redPacket": { "amount": 200, "blessing": "" } }
    ]
}`,S=`
${A}

** ():**
- **:**  
    1. 

**:**
-  **${t.name}**  
- 1-4
- 
- quote

** ():**
- ****
- ****
- 
-   
    
  -   
  -   
  -   
  
- **** quotecontent"[]"
`;return{intro:P,worldBooksBefore:k?`
**:**
${k}`:`
**:**
- `,rolePlayAndFormat:S,characterContext:`
${H}`,timeContext:_?`
${_}`:"",userContext:`
${Y}`,healthSchedule:`${O}${$}`,memories:y,chatHistory:`
${N}**:**
${c||""}`,worldBooksAfter:w?`

**:**
${w}`:`

**:**
- `,functions:`
${E}`,outputFormat:`

${D}`}}function c7(e){const t=_v(e);return`${t.intro}
${t.worldBooksBefore}
${t.rolePlayAndFormat}
${t.characterContext}${t.timeContext}${t.userContext}${t.healthSchedule}
${t.memories}${t.chatHistory}
${t.worldBooksAfter}
${t.functions}
${t.outputFormat}`}function d7({characterId:e,characterName:t,onClose:n,onUpdate:a,onDelete:i}){const[l,c]=C.useState(""),[d,u]=C.useState(!1),[m,p]=C.useState(!0),[h,g]=C.useState(30),[x,v]=C.useState(!1),[y,k]=C.useState(!1),[w,_]=C.useState(!1),[N,T]=C.useState(!1),[B,O]=C.useState(null),[$,P]=C.useState(!1),[A,H]=C.useState("50"),[Y,E]=C.useState("idle"),[D,S]=C.useState(()=>Fe.chatSettings?.darkMode||!1),[z,L]=C.useState(()=>Fe.chatSettings?.theme||(Fe.chatSettings?.darkMode?"dark":"light"));C.useEffect(()=>{(async()=>{if(!Fe.chatSettings)try{const ae=await ue.get(te.CHATS,"chat_settings");ae&&(Fe.chatSettings=ae,ae.darkMode!==void 0&&S(ae.darkMode),L(ae.theme||(ae.darkMode?"dark":"light")))}catch(ae){console.error("Failed to load global chat settings in ChatDetailSettings",ae)}})()},[]),C.useEffect(()=>{const ne=se=>{se.detail?.characterId===e&&Y==="processing"&&(E("success"),setTimeout(()=>E("idle"),3e3))},ae=se=>{se.detail?.characterId===e&&Y==="processing"&&(E("error"),setTimeout(()=>E("idle"),3e3))};window.addEventListener("character-memories-updated",ne),window.addEventListener("memory-extraction-failed",ae);const ve=se=>{const{type:xe,payload:Ie}=se.data;xe==="AI_TASK_COMPLETED"&&Ie?.taskType==="memory_extraction"&&Ie?.characterId===e?(console.log("[ChatDetailSettings] Received SW memory extraction completion directly"),Y==="processing"&&(E("success"),setTimeout(()=>E("idle"),3e3))):xe==="AI_TASK_FAILED"&&Ie?.characterId===e&&(console.log("[ChatDetailSettings] Received SW memory extraction failure directly"),Y==="processing"&&(E("error"),setTimeout(()=>E("idle"),3e3)))};return"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",ve),F(),()=>{window.removeEventListener("character-memories-updated",ne),window.removeEventListener("memory-extraction-failed",ae),"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener("message",ve)}},[e,Y]);const F=async()=>{try{const ne=`chat_detail_settings_${e}`,ae=await ue.get(te.CHAT_SETTINGS,ne);ae?(c(ae.remark||""),u(ae.isPinned||!1),p(ae.enableStickers!==void 0?ae.enableStickers:!0),g(ae.stickerProbability!==void 0?ae.stickerProbability:30)):(c(""),u(!1),p(!0),g(30))}catch(ne){console.error("Failed to load settings:",ne)}},K=async(ne,ae,ve,se)=>{try{const xe=`chat_detail_settings_${e}`,Ie={remark:ne,isPinned:ae,enableStickers:ve,stickerProbability:se};await ue.set(te.CHAT_SETTINGS,xe,Ie),await G(ne,ae),window.dispatchEvent(new CustomEvent("chat-settings-updated")),a()}catch(xe){console.error("Failed to save settings:",xe)}},G=async(ne,ae)=>{try{const ve=await ue.get(te.CHATS,"chat_list");if(ve){const se=ve.findIndex(xe=>xe.id===e);if(se!==-1){ve[se].remark=ne,ve[se].isPinned=ae;try{const xe=await ue.get(te.CHAT_MESSAGES,`chat_messages_${e}`);xe&&xe.length>0&&xe[xe.length-1].senderId==="character"&&(ve[se].lastSender=ne)}catch(xe){console.error("Failed to check last message sender:",xe)}await ue.set(te.CHATS,"chat_list",ve)}}}catch(ve){console.error("Failed to update chat list:",ve)}},Z=ne=>{c(ne),K(ne,d,m,h)},R=()=>{const ne=!d;u(ne),K(l,ne,m,h)},V=()=>{const ne=!m;p(ne),K(l,d,ne,h)},ee=ne=>{const ae=parseInt(ne,10);!isNaN(ae)&&ae>=0&&ae<=100&&(g(ae),K(l,d,m,ae))},W=async()=>{try{const ne=parseInt(A,10);if(isNaN(ne)||ne<=0){pa.error("");return}const ae=`chat_messages_${e}`,ve=await ue.get(te.CHAT_MESSAGES,ae)||[];if(ve.length===0){pa.error("");return}await wv(e,ve,{manualCount:ne}),E("processing"),_(!1)}catch(ne){console.error("Failed to trigger manual extraction:",ne),pa.error("")}},U=async()=>{try{P(!0);const ne=`chat_messages_${e}`,ae=await ue.get(te.CHAT_MESSAGES,ne)||[],se=(await ue.get(te.CHARACTERS,"characters")||[]).find(he=>he.id===e)||{id:e,name:t,description:""},xe=await ue.get(te.CHAT_SETTINGS,`chat_detail_settings_${e}`),Ie=await ue.get(te.CHATS,"chat_settings"),I=xe?.userNickname||Ie?.userNickname||"",me=await e7({characterId:e,character:se,userNickname:I,displayName:l||t,allMessages:ae,overrideSettings:{enableStickers:m,stickerProbability:h}});O(me),T(!0)}catch(ne){console.error(ne),pa.error("")}finally{P(!1)}},Q=async()=>{try{const ne=`chat_messages_${e}`;await ue.delete(te.CHAT_MESSAGES,ne);const ae=await ue.get(te.CHATS,"chat_list");if(ae){const ve=ae.findIndex(se=>se.id===e);ve!==-1&&(ae[ve].lastMessage="",ae[ve].lastSender="",await ue.set(te.CHATS,"chat_list",ae))}v(!1),window.dispatchEvent(new CustomEvent("chat-settings-updated")),a(),setTimeout(()=>{window.dispatchEvent(new CustomEvent("chat-messages-cleared"))},100),n()}catch(ne){console.error("Failed to clear messages:",ne)}},oe=async()=>{try{const ne=`chat_messages_${e}`;await ue.delete(te.CHAT_MESSAGES,ne);const ae=`chat_detail_settings_${e}`;await ue.delete(te.CHAT_SETTINGS,ae);const ve=await ue.get(te.CHATS,"chat_list");if(ve){const se=ve.filter(xe=>xe.id!==e);await ue.set(te.CHATS,"chat_list",se)}k(!1),window.dispatchEvent(new CustomEvent("chat-settings-updated")),i?i():n()}catch(ne){console.error("Failed to delete chat:",ne),k(!1)}};return s.jsxs(Se.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30,mass:1},className:`fixed inset-0 z-[70] flex flex-col shadow-[-10px_0_30px_rgba(0,0,0,0.1)] ${z==="light-frosted"?"bg-white/80 backdrop-blur-xl":z==="dark-frosted"?"bg-black/60 backdrop-blur-xl":D?"bg-[#121212]":"bg-white"}`,children:[s.jsxs("div",{className:`h-16 flex items-center justify-between px-4 ${z==="light-frosted"||z==="dark-frosted"?"bg-transparent":D?"bg-[#121212]":"bg-white"}`,children:[s.jsx("button",{onClick:n,className:"p-2 -ml-2 active:opacity-60 hover:opacity-60 transition-opacity",children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:z==="dark-frosted"||D?"white":"black",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M15 18l-6-6 6-6"})})}),s.jsx("h1",{className:`font-semibold text-[18px] ${z==="dark-frosted"||D?"text-white":"text-[#333]"}`,children:""}),s.jsx("div",{className:"w-11"})]}),s.jsx(Be,{children:Y!=="idle"&&s.jsx(Se.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"absolute top-20 left-4 right-4 z-50 flex justify-center pointer-events-none",children:s.jsxs("div",{className:`px-4 py-3 rounded-xl shadow-lg flex items-center gap-3 backdrop-blur-md ${z==="light-frosted"?"bg-white/80 text-[#333]":z==="dark-frosted"?"bg-black/60 text-white":D?"bg-[#2d2d2d] text-white":"bg-white text-[#333]"}`,children:[Y==="processing"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-current border-t-transparent animate-spin"}),s.jsx("span",{className:"text-[14px] font-medium",children:"..."})]}),Y==="success"&&s.jsxs(s.Fragment,{children:[s.jsx(kt,{className:"w-5 h-5 text-[#7B9E7B]"}),s.jsx("span",{className:"text-[14px] font-medium",children:""})]}),Y==="error"&&s.jsxs(s.Fragment,{children:[s.jsx(ft,{className:"w-5 h-5 text-[#ff3b30]"}),s.jsx("span",{className:"text-[14px] font-medium",children:""})]})]})})}),s.jsxs("div",{className:`flex-1 overflow-y-auto px-5 py-6 ${z==="light-frosted"||z==="dark-frosted"?"bg-transparent":D?"bg-[#121212]":"bg-white"}`,children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] mb-3 ${z==="dark-frosted"||D?"text-white":"text-[#333]"}`,children:""}),s.jsx("input",{type:"text",value:l,onChange:ne=>Z(ne.target.value),placeholder:t===""?"":t,className:`w-full px-4 py-3 rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] outline-none transition-colors ${z==="light-frosted"?"bg-white/40 text-[#333] placeholder:text-[#999] focus:bg-white/60":z==="dark-frosted"?"bg-black/40 text-white placeholder:text-[#888] focus:bg-black/60":D?"bg-[#2d2d2d] text-white placeholder:text-[#666] focus:bg-[#3d3d3d]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999] focus:bg-[#ebebeb]"}`})]}),s.jsx("div",{className:"mb-8",children:s.jsxs(Se.button,{whileTap:{scale:.98},onClick:R,className:`w-full px-4 py-3 rounded-lg transition-colors flex items-center justify-between ${z==="light-frosted"?"bg-white/40 active:bg-white/60 hover:bg-white/60":z==="dark-frosted"?"bg-black/40 active:bg-black/60 hover:bg-black/60":D?"bg-[#2d2d2d] active:bg-[#3d3d3d] hover:bg-[#3d3d3d]":"bg-[#f5f5f5] active:bg-[#ebebeb] hover:bg-[#ebebeb]"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(G6,{className:`w-5 h-5 ${z==="dark-frosted"||D?"text-[#aaa]":"text-[#666]"}`,strokeWidth:2}),s.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] ${z==="dark-frosted"||D?"text-white":"text-[#333]"}`,children:d?"":""})]}),d&&s.jsx(Se.div,{initial:{scale:0},animate:{scale:1},className:"w-5 h-5 rounded-full bg-[#7B9E7B] flex items-center justify-center",children:s.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})})]})}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] mb-1 ${z==="dark-frosted"||D?"text-white":"text-[#333]"}`,children:""}),s.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[13px] ${z==="dark-frosted"||D?"text-[#aaa]":"text-[#999]"}`,children:""})]}),s.jsx(Se.button,{onClick:V,className:`w-12 h-7 rounded-full flex items-center px-0.5 relative ${m?"#7B9E7B":z==="dark-frosted"?"bg-black/40":D?"bg-[#3d3d3d]":"bg-[#d0d0d0]"}`,animate:{backgroundColor:m?"#7B9E7B":z==="dark-frosted"?"rgba(0,0,0,0.4)":D?"#3d3d3d":"#d0d0d0"},whileTap:{scale:.95},children:s.jsx(Se.div,{className:"w-6 h-6 rounded-full bg-white shadow-sm",animate:{x:m?20:0},transition:{type:"spring",stiffness:500,damping:30}})})]}),s.jsx(Be,{children:m&&s.jsx(Se.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] ${z==="dark-frosted"||D?"text-[#aaa]":"text-[#666]"}`,children:""}),s.jsxs("span",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] text-[#7B9E7B]",children:[h,"%"]})]}),s.jsx("div",{className:"px-1",children:s.jsx("input",{type:"range",min:"0",max:"100",value:h,onChange:ne=>ee(ne.target.value),className:`w-full h-2 rounded-lg appearance-none cursor-pointer slider ${z==="light-frosted"?"bg-white/40":z==="dark-frosted"?"bg-black/40":D?"bg-[#2d2d2d]":"bg-[#f5f5f5]"}`,style:{background:`linear-gradient(to right, #7B9E7B 0%, #7B9E7B ${h}%, ${z==="light-frosted"?"rgba(255,255,255,0.4)":z==="dark-frosted"?"rgba(0,0,0,0.4)":D?"#2d2d2d":"#f5f5f5"} ${h}%, ${z==="light-frosted"?"rgba(255,255,255,0.4)":z==="dark-frosted"?"rgba(0,0,0,0.4)":D?"#2d2d2d":"#f5f5f5"} 100%)`}})}),s.jsxs("div",{className:"flex justify-between mt-2 px-1",children:[s.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] ${z==="dark-frosted"?"text-[#888]":D?"text-[#666]":"text-[#999]"}`,children:"0%"}),s.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] ${z==="dark-frosted"?"text-[#888]":D?"text-[#666]":"text-[#999]"}`,children:"100%"})]}),s.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] mt-2 ${z==="dark-frosted"?"text-[#888]":D?"text-[#666]":"text-[#999]"}`,children:""})]})})})]}),s.jsx("div",{className:"mb-8",children:s.jsxs(Se.button,{whileTap:{scale:.98},onClick:()=>_(!0),className:`w-full px-4 py-3 rounded-lg transition-colors flex items-center justify-between ${z==="light-frosted"?"bg-white/40 active:bg-white/60 hover:bg-white/60":z==="dark-frosted"?"bg-black/40 active:bg-black/60 hover:bg-black/60":D?"bg-[#2d2d2d] active:bg-[#3d3d3d] hover:bg-[#3d3d3d]":"bg-[#f5f5f5] active:bg-[#ebebeb] hover:bg-[#ebebeb]"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Jh,{className:`w-5 h-5 ${z==="dark-frosted"||D?"text-[#aaa]":"text-[#666]"}`,strokeWidth:2}),s.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] ${z==="dark-frosted"||D?"text-white":"text-[#333]"}`,children:""})]}),s.jsx("div",{className:`text-[12px] ${z==="dark-frosted"||D?"text-[#666]":"text-[#999]"}`,children:""})]})}),s.jsx("div",{className:"mb-8",children:s.jsxs(Se.button,{whileTap:{scale:.98},onClick:U,disabled:$,className:`w-full px-4 py-3 rounded-lg transition-colors flex items-center justify-between ${z==="light-frosted"?"bg-white/40 active:bg-white/60 hover:bg-white/60":z==="dark-frosted"?"bg-black/40 active:bg-black/60 hover:bg-black/60":D?"bg-[#2d2d2d] active:bg-[#3d3d3d] hover:bg-[#3d3d3d]":"bg-[#f5f5f5] active:bg-[#ebebeb] hover:bg-[#ebebeb]"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(dc,{className:`w-5 h-5 ${z==="dark-frosted"||D?"text-[#aaa]":"text-[#666]"}`,strokeWidth:2}),s.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] ${z==="dark-frosted"||D?"text-white":"text-[#333]"}`,children:$?"...":""})]}),s.jsx("div",{className:`text-[12px] ${z==="dark-frosted"||D?"text-[#666]":"text-[#999]"}`,children:"Prompt"})]})}),s.jsx("div",{className:"mb-8",children:s.jsxs(Se.button,{whileTap:{scale:.98},onClick:()=>v(!0),className:`w-full px-4 py-3 rounded-lg transition-colors flex items-center gap-3 ${z==="light-frosted"?"bg-[#ffe5e5]/60 active:bg-[#ffd0d0]/80 hover:bg-[#ffd0d0]/80":z==="dark-frosted"?"bg-[#3a1d1d]/80 active:bg-[#4a2d2d]/80 hover:bg-[#4a2d2d]/80":D?"bg-[#3a1d1d] active:bg-[#4a2d2d] hover:bg-[#4a2d2d]":"bg-[#ffe5e5] active:bg-[#ffd0d0] hover:bg-[#ffd0d0]"}`,children:[s.jsx(zn,{className:"w-5 h-5 text-[#ff3b30]",strokeWidth:2}),s.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] text-[#ff3b30]",children:""})]})}),s.jsx("div",{className:"mb-8",children:s.jsxs(Se.button,{whileTap:{scale:.98},onClick:()=>k(!0),className:`w-full px-4 py-3 rounded-lg transition-colors flex items-center gap-3 ${z==="light-frosted"?"bg-[#ffe5e5]/60 active:bg-[#ffd0d0]/80 hover:bg-[#ffd0d0]/80":z==="dark-frosted"?"bg-[#3a1d1d]/80 active:bg-[#4a2d2d]/80 hover:bg-[#4a2d2d]/80":D?"bg-[#3a1d1d] active:bg-[#4a2d2d] hover:bg-[#4a2d2d]":"bg-[#ffe5e5] active:bg-[#ffd0d0] hover:bg-[#ffd0d0]"}`,children:[s.jsx(ft,{className:"w-5 h-5 text-[#ff3b30]",strokeWidth:2}),s.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] text-[#ff3b30]",children:""})]})})]}),Vs.createPortal(s.jsx(Be,{children:w&&s.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[s.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-black/40",onClick:()=>_(!1)}),s.jsxs(Se.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[320px] shadow-xl ${z==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":z==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":D?"bg-[#1e1e1e]":"bg-white"}`,children:[s.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-3 ${z==="dark-frosted"||D?"text-white":"text-black"}`,children:""}),s.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] text-center mb-4 ${z==="dark-frosted"||D?"text-[#aaa]":"text-[#666]"}`,children:""}),s.jsx("div",{className:"mb-6",children:s.jsx("input",{type:"number",value:A,onChange:ne=>H(ne.target.value),className:`w-full px-4 py-2 rounded-lg text-center outline-none font-['Source_Han_Sans_CN_VF:Regular',sans-serif] ${z==="light-frosted"?"bg-white/40 text-[#333] focus:bg-white/60":z==="dark-frosted"?"bg-black/40 text-white focus:bg-black/60":D?"bg-[#2d2d2d] text-white focus:bg-[#3d3d3d]":"bg-[#f5f5f5] text-[#333] focus:bg-[#ebebeb]"}`})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>_(!1),className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors ${z==="light-frosted"?"bg-white/40 text-[#666] hover:bg-white/60":z==="dark-frosted"?"bg-white/10 text-white hover:bg-white/20":D?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),s.jsx("button",{onClick:W,className:"flex-1 py-2.5 rounded-xl bg-[#7B9E7B] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity",children:""})]})]})]})}),document.body),Vs.createPortal(s.jsx(Be,{children:x&&s.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[s.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-black/40",onClick:()=>v(!1)}),s.jsxs(Se.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[320px] shadow-xl ${z==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":z==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":D?"bg-[#1e1e1e]":"bg-white"}`,children:[s.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-3 ${z==="dark-frosted"||D?"text-white":"text-black"}`,children:""}),s.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] text-center mb-6 ${z==="dark-frosted"||D?"text-[#aaa]":"text-[#666]"}`,children:""}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>v(!1),className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors ${z==="light-frosted"?"bg-white/40 text-[#666] hover:bg-white/60":z==="dark-frosted"?"bg-white/10 text-white hover:bg-white/20":D?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),s.jsx("button",{onClick:Q,className:"flex-1 py-2.5 rounded-xl bg-[#ff3b30] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity",children:""})]})]})]})}),document.body),Vs.createPortal(s.jsx(Be,{children:y&&s.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[s.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-black/40",onClick:()=>k(!1)}),s.jsxs(Se.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[320px] shadow-xl ${z==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":z==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":D?"bg-[#1e1e1e]":"bg-white"}`,children:[s.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-3 ${z==="dark-frosted"||D?"text-white":"text-black"}`,children:""}),s.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] text-center mb-6 ${z==="dark-frosted"||D?"text-[#aaa]":"text-[#666]"}`,children:""}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>k(!1),className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors ${z==="light-frosted"?"bg-white/40 text-[#666] hover:bg-white/60":z==="dark-frosted"?"bg-white/10 text-white hover:bg-white/20":D?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),s.jsx("button",{onClick:oe,className:"flex-1 py-2.5 rounded-xl bg-[#ff3b30] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity",children:""})]})]})]})}),document.body),Vs.createPortal(s.jsx(Be,{children:N&&B&&s.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[s.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-black/40",onClick:()=>T(!1)}),s.jsxs(Se.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[360px] shadow-xl max-h-[80vh] overflow-y-auto ${z==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":z==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":D?"bg-[#1e1e1e]":"bg-white"}`,children:[s.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-6 ${z==="dark-frosted"||D?"text-white":"text-black"}`,children:"Prompt "}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{className:`p-4 rounded-xl flex justify-between items-center ${z==="dark-frosted"?"bg-white/10":D?"bg-[#2d2d2d]":"bg-[#f5f5f5]"}`,children:[s.jsx("span",{className:`text-sm ${z==="dark-frosted"||D?"text-[#aaa]":"text-[#666]"}`,children:" Token "}),s.jsx("span",{className:`text-xl font-bold ${z==="dark-frosted"||D?"text-white":"text-[#333]"}`,children:B.total})]}),s.jsx("div",{className:"space-y-3",children:[{label:"",value:B.breakdown.systemTemplate,color:"#60a5fa"},{label:"",value:B.breakdown.userPersona,color:"#34d399"},{label:"",value:B.breakdown.characterPersona,color:"#f472b6"},{label:"",value:B.breakdown.worldBook,color:"#fbbf24"},{label:"",value:B.breakdown.memories,color:"#818cf8"},{label:"",value:B.breakdown.chatHistory,color:"#a78bfa"},{label:"",value:B.breakdown.functions,color:"#9ca3af"},{label:"",value:B.breakdown.other,color:"#cbd5e1"}].map((ne,ae)=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:ne.color}}),s.jsx("span",{className:`text-sm flex-1 ${z==="dark-frosted"||D?"text-[#ddd]":"text-[#555]"}`,children:ne.label}),s.jsx("span",{className:`text-sm font-medium ${z==="dark-frosted"||D?"text-white":"text-[#333]"}`,children:ne.value}),s.jsx("div",{className:"w-16 h-1.5 rounded-full bg-gray-200/20 overflow-hidden",children:s.jsx("div",{className:"h-full rounded-full",style:{width:`${Math.min(100,ne.value/B.total*100)}%`,backgroundColor:ne.color}})})]},ae))})]}),s.jsx("button",{onClick:()=>T(!1),className:`w-full py-3 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors ${z==="light-frosted"?"bg-white/40 text-[#666] hover:bg-white/60":z==="dark-frosted"?"bg-white/10 text-white hover:bg-white/20":D?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""})]})]})}),document.body)]})}const Ev=C.memo(({dateString:e})=>s.jsx("div",{className:"flex justify-center mb-3",children:s.jsx("div",{className:"bg-black/20 rounded-full px-2 py-0 flex items-center justify-center",children:s.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] text-white",children:e})})}));Ev.displayName="DateSeparator";const Av=async(e,t)=>{try{const n=await np(e,{maxSizeMB:.2,maxWidthOrHeight:512,useWebWorker:!0}),a=`sticker_${Date.now()}`,i=`meme-${a}`;await ms(i,new File([n],e.name,{type:n.type}));const l={id:a,imageKey:i,meaning:t,createdAt:new Date().toISOString()},c=await ja();return c.push(l),await ue.set(te.STICKERS,"stickers",c),l}catch(n){throw console.error("Failed to add sticker:",n),n}},ja=async()=>{try{return await ue.get(te.STICKERS,"stickers")||[]}catch(e){return console.error("Failed to get stickers:",e),[]}},ip=async e=>{try{return await wt(e)}catch(t){return console.error("Failed to get sticker image:",t),null}},Tv=async e=>{try{const t=await ja(),n=t.find(i=>i.id===e);if(!n)throw new Error("Sticker not found");n.imageKey&&await wa(n.imageKey);const a=t.filter(i=>i.id!==e);await ue.set(te.STICKERS,"stickers",a)}catch(t){throw console.error("Failed to delete sticker:",t),t}},u7=async()=>{try{const e=await ja(),t={};return e.forEach(n=>{t[n.id]=n.meaning}),t}catch(e){return console.error("Failed to get sticker meanings:",e),{}}},Dv=async e=>{const t=e.split(`
`).map(a=>a.trim()).filter(a=>a.length>0),n={success:0,failed:0,errors:[]};for(const a of t)try{const i=a.indexOf("-");if(i===-1){n.failed++,n.errors.push(`: "${a}" (: -URL)`);continue}const l=a.substring(0,i).trim(),c=a.substring(i+1).trim();if(!l){n.failed++,n.errors.push(`: "${a}"`);continue}if(!c||!c.startsWith("http://")&&!c.startsWith("https://")){n.failed++,n.errors.push(`URL: "${c}"`);continue}const u={id:`sticker_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,imageUrl:c,meaning:l,createdAt:new Date().toISOString()},m=await ja();m.push(u),await ue.set(te.STICKERS,"stickers",m),n.success++,await new Promise(p=>setTimeout(p,10))}catch(i){n.failed++,n.errors.push(`"${a.substring(0,30)}...": ${i.message||""}`)}return n},f7=Object.freeze(Object.defineProperty({__proto__:null,addSticker:Av,batchImportStickersFromURL:Dv,deleteSticker:Tv,getAllStickers:ja,getStickerImageURL:ip,getStickerMeaningsForAI:u7},Symbol.toStringTag,{value:"Module"}));function h7({onClose:e,onSelect:t,theme:n,isDarkMode:a}){const[i,l]=C.useState([]),[c,d]=C.useState({}),[u,m]=C.useState(!1),[p,h]=C.useState(null),[g,x]=C.useState(""),[v,y]=C.useState(null),[k,w]=C.useState(!1),_=C.useRef(null),[N,T]=C.useState({show:!1,message:""}),[B,O]=C.useState(!1),[$,P]=C.useState(""),[A,H]=C.useState(!1),[Y,E]=C.useState(null),[D,S]=C.useState(!1);C.useEffect(()=>{z()},[]);const z=async()=>{try{const ee=await ja();l(ee);const W={};for(const U of ee)if(U.imageUrl)W[U.id]=U.imageUrl;else if(U.imageKey){const Q=await ip(U.imageKey);Q&&(W[U.id]=Q)}d(W)}catch(ee){console.error("Failed to load stickers:",ee)}},L=ee=>{const W=ee.target.files?.[0];if(W){y(W);const U=new FileReader;U.onload=Q=>{h(Q.target?.result)},U.readAsDataURL(W),m(!0)}_.current&&(_.current.value="")},F=async()=>{if(!v||!g.trim()){T({show:!0,message:""}),setTimeout(()=>T({show:!1,message:""}),3e3);return}w(!0);try{await Av(v,g.trim()),await z(),K()}catch(ee){console.error("Failed to upload sticker:",ee),T({show:!0,message:ee.message||""}),setTimeout(()=>T({show:!1,message:""}),5e3)}finally{w(!1)}},K=()=>{m(!1),h(null),x(""),y(null)},G=ee=>{t(ee),e()},Z=async(ee,W)=>{if(ee.stopPropagation(),confirm(""))try{await Tv(W),await z()}catch(U){console.error("Failed to delete sticker:",U),T({show:!0,message:U.message||""}),setTimeout(()=>T({show:!1,message:""}),5e3)}},R=async()=>{if(!$.trim()){T({show:!0,message:"URL"}),setTimeout(()=>T({show:!1,message:""}),3e3);return}H(!0),E(null);try{const ee=await Dv($.trim());E(ee),await z(),ee.success===0&&ee.failed>0&&(T({show:!0,message:"URL"}),setTimeout(()=>T({show:!1,message:""}),5e3))}catch(ee){console.error("Failed to batch import stickers:",ee),T({show:!0,message:ee.message||""}),setTimeout(()=>T({show:!1,message:""}),5e3)}finally{H(!1)}},V=()=>{O(!1),P(""),E(null)};return s.jsxs(s.Fragment,{children:[s.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 bg-transparent z-[1050]",onClick:e}),s.jsxs(Se.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{type:"spring",stiffness:400,damping:30},className:`absolute bottom-[70px] right-3 w-[320px] h-[300px] rounded-xl shadow-lg flex flex-col z-[1051] ${n==="light-frosted"?"bg-white/20 backdrop-blur-xl border border-white/20":n==="dark-frosted"?"bg-black/20 backdrop-blur-xl border border-white/10":a?"bg-[#1e1e1e]":"bg-white"}`,onClick:ee=>ee.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[s.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[16px] ${n==="light-frosted"?"text-[#333]":a||n==="dark-frosted"?"text-white":"text-[#333]"}`,children:D?"":""}),s.jsx("button",{onClick:()=>S(!D),className:`px-3 py-1.5 rounded-lg transition-colors ${D?"bg-[#88A588] text-white":n==="light-frosted"?"bg-white/30 text-[#333] hover:bg-white/40":n==="dark-frosted"?"bg-white/10 text-white hover:bg-white/20":a?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8]"}`,children:s.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[13px]",children:D?"":""})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:s.jsxs("div",{className:"grid grid-cols-[repeat(auto-fill,80px)] gap-2.5 justify-center",children:[!D&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>_.current?.click(),className:`w-20 h-20 rounded-lg flex items-center justify-center cursor-pointer transition-colors ${n==="light-frosted"?"bg-white/20 hover:bg-white/30 active:bg-white/40":n==="dark-frosted"?"bg-white/10 hover:bg-white/20 active:bg-white/30":a?"bg-[#2d2d2d] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#e8e8e8] hover:bg-[#d8d8d8] active:bg-[#c8c8c8]"}`,children:s.jsx(Gs,{className:`w-8 h-8 ${n==="light-frosted"?"text-[#333]":a||n==="dark-frosted"?"text-[#aaa]":"text-[#999]"}`,strokeWidth:2})}),s.jsx("button",{onClick:()=>O(!0),className:`w-20 h-20 rounded-lg flex items-center justify-center cursor-pointer transition-colors ${n==="light-frosted"?"bg-white/20 hover:bg-white/30 active:bg-white/40":n==="dark-frosted"?"bg-white/10 hover:bg-white/20 active:bg-white/30":a?"bg-[#2d2d2d] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#e8e8e8] hover:bg-[#d8d8d8] active:bg-[#c8c8c8]"}`,children:s.jsx(tp,{className:`w-8 h-8 ${n==="light-frosted"?"text-[#333]":a||n==="dark-frosted"?"text-[#aaa]":"text-[#999]"}`,strokeWidth:2})})]}),i.map(ee=>s.jsxs("div",{className:"relative w-20 h-20 group",children:[s.jsx("button",{onClick:()=>!D&&G(ee.id),className:`w-full h-full rounded-lg p-1 transition-colors ${D?"cursor-default":n==="light-frosted"?"cursor-pointer hover:bg-white/30 active:bg-white/40":n==="dark-frosted"?"cursor-pointer hover:bg-white/20 active:bg-white/30":a?"cursor-pointer hover:bg-[#2d2d2d] active:bg-[#3d3d3d]":"cursor-pointer hover:bg-[#f0f0f0] active:bg-[#e8e8e8]"} ${n==="light-frosted"?"bg-white/20":n==="dark-frosted"?"bg-white/5":a?"bg-[#2d2d2d]":"bg-[#f9f9f9]"}`,children:c[ee.id]&&s.jsx("img",{src:c[ee.id],alt:ee.meaning,className:"w-full h-full object-contain"})}),s.jsx("button",{onClick:W=>Z(W,ee.id),className:`absolute -top-1 -right-1 w-5 h-5 bg-[#ff3b30] rounded-full flex items-center justify-center transition-opacity ${D?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:s.jsx(ft,{className:"w-3 h-3 text-white",strokeWidth:3})})]},ee.id))]})})]}),s.jsx("input",{ref:_,type:"file",accept:"image/*",className:"hidden",onChange:L}),s.jsx(Be,{children:u&&s.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[s.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40",onClick:K}),s.jsxs(Se.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[320px] shadow-xl ${n==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":n==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":a?"bg-[#1e1e1e]":"bg-white"}`,children:[s.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-4 ${n==="light-frosted"?"text-[#333]":a||n==="dark-frosted"?"text-white":"text-black"}`,children:""}),p&&s.jsx("img",{src:p,alt:"preview",className:`w-[100px] h-[100px] object-cover rounded-lg mx-auto mb-4 ${n==="light-frosted"?"bg-white/50":n==="dark-frosted"?"bg-white/10":a?"bg-[#2d2d2d]":"bg-[#f0f0f0]"}`}),s.jsx("input",{type:"text",value:g,onChange:ee=>x(ee.target.value),placeholder:"AI(,:)",className:`w-full px-4 py-3 rounded-xl border-none outline-none font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] mb-6 ${n==="light-frosted"?"bg-white/40 text-[#333] placeholder:text-[#999]":n==="dark-frosted"?"bg-white/10 text-white placeholder:text-[#aaa]":a?"bg-[#2d2d2d] text-white placeholder:text-[#666]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999]"}`}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:K,disabled:k,className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors disabled:opacity-50 ${n==="light-frosted"?"bg-white/30 text-[#666] hover:bg-white/40":n==="dark-frosted"?"bg-white/10 text-[#ccc] hover:bg-white/20":a?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),s.jsx("button",{onClick:F,disabled:k,className:"flex-1 py-2.5 rounded-xl bg-[#88A588] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity disabled:opacity-50",children:k?"...":""})]})]})]})}),s.jsx(Be,{children:B&&s.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[s.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40",onClick:V}),s.jsxs(Se.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[400px] shadow-xl max-h-[80vh] overflow-y-auto ${n==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":n==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":a?"bg-[#1e1e1e]":"bg-white"}`,children:[s.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-3 ${n==="light-frosted"?"text-[#333]":a||n==="dark-frosted"?"text-white":"text-black"}`,children:""}),s.jsxs("div",{className:`rounded-xl p-3 mb-4 ${n==="light-frosted"?"bg-white/50":n==="dark-frosted"?"bg-white/10":a?"bg-[#2d2d2d]":"bg-[#f5f5f5]"}`,children:[s.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[13px] mb-2 ${n==="light-frosted"?"text-[#333]":a||n==="dark-frosted"?"text-[#aaa]":"text-[#666]"}`,children:""}),s.jsxs("p",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[12px] leading-relaxed ${n==="light-frosted"?"text-[#666]":a||n==="dark-frosted"?"text-[#888]":"text-[#999]"}`,children:["",s.jsx("br",{}),s.jsx("span",{className:"text-[#88A588]",children:"-URL"}),s.jsx("br",{}),s.jsx("br",{}),"",s.jsx("br",{}),"-https://example.com/happy.jpg",s.jsx("br",{}),"-https://example.com/sad.png",s.jsx("br",{}),"-https://example.com/angry.gif"]})]}),s.jsx("textarea",{value:$,onChange:ee=>P(ee.target.value),placeholder:`-https://example.com/happy.jpg
-https://example.com/sad.png`,className:`w-full px-4 py-3 rounded-xl border-none outline-none font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] mb-4 h-[150px] resize-y ${n==="light-frosted"?"bg-white/40 text-[#333] placeholder:text-[#999]":n==="dark-frosted"?"bg-white/10 text-white placeholder:text-[#aaa]":a?"bg-[#2d2d2d] text-white placeholder:text-[#666]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999]"}`}),Y&&s.jsxs("div",{className:`rounded-xl p-4 mb-4 ${n==="light-frosted"?"bg-white/50":n==="dark-frosted"?"bg-white/10":a?"bg-[#2d2d2d]":"bg-[#f9f9f9]"}`,children:[s.jsxs("div",{className:"flex gap-4 mb-2",children:[s.jsxs("p",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-[#88A588]",children:[": ",Y.success]}),s.jsxs("p",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-[#ff3b30]",children:[": ",Y.failed]})]}),Y.errors.length>0&&s.jsxs("div",{className:"max-h-[120px] overflow-y-auto",children:[s.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[13px] mb-1 ${n==="light-frosted"?"text-[#333]":a||n==="dark-frosted"?"text-[#aaa]":"text-[#666]"}`,children:""}),s.jsxs("ul",{className:"space-y-1",children:[Y.errors.slice(0,5).map((ee,W)=>s.jsxs("li",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[12px] text-[#ff3b30] leading-relaxed",children:[" ",ee]},W)),Y.errors.length>5&&s.jsxs("li",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[12px] ${n==="light-frosted"?"text-[#666]":a||n==="dark-frosted"?"text-[#888]":"text-[#999]"}`,children:["...  ",Y.errors.length-5," "]})]})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:V,disabled:A,className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors disabled:opacity-50 ${n==="light-frosted"?"bg-white/30 text-[#666] hover:bg-white/40":n==="dark-frosted"?"bg-white/10 text-[#ccc] hover:bg-white/20":a?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),s.jsx("button",{onClick:R,disabled:A,className:"flex-1 py-2.5 rounded-xl bg-[#88A588] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity disabled:opacity-50",children:A?"...":""})]})]})]})}),N.show&&s.jsx("div",{className:"fixed top-16 left-1/2 -translate-x-1/2 z-[1300] px-4 w-full max-w-[90vw]",children:s.jsx("div",{className:"bg-[#ff3b30] rounded-[12px] px-5 py-4 shadow-lg max-w-md mx-auto max-h-[60vh] overflow-y-auto",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-white/20 flex items-center justify-center mt-0.5",children:s.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] text-white mb-1",children:""}),s.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] text-white/90 leading-relaxed break-words whitespace-pre-wrap",children:N.message})]})]})})})]})}function p7({onImageSelect:e,onError:t,children:n}){const a=C.useRef(null),i=async c=>{const d=c.target.files?.[0];if(d){if(!d.type.startsWith("image/")){t("");return}if(d.size>10*1024*1024){t("10MB");return}try{const u=await np(d,{maxWidth:1024,maxHeight:1024,quality:.85}),m=new File([u],d.name,{type:u.type}),p=`chat-image-${Date.now()}`;await ms(p,m),e(p)}catch(u){console.error("Failed to compress image:",u),t(u.message||"")}finally{a.current&&(a.current.value="")}}},l=()=>{a.current?.click()};return s.jsxs(s.Fragment,{children:[s.jsx("div",{onClick:l,className:"cursor-pointer",children:n}),s.jsx("input",{ref:a,type:"file",accept:"image/*",className:"hidden",onChange:i})]})}async function m7(e,t=1024,n=1024,a=.8){return new Promise((i,l)=>{const c=new FileReader;c.onload=d=>{const u=new Image;u.onload=()=>{let m=u.width,p=u.height;if(m>t||p>n){const v=Math.min(t/m,n/p);m*=v,p*=v}const h=document.createElement("canvas");h.width=m,h.height=p;const g=h.getContext("2d");if(!g){l(new Error(" canvas context"));return}g.drawImage(u,0,0,m,p);const x=h.toDataURL("image/jpeg",a);i(x)},u.onerror=()=>l(new Error("")),u.src=d.target?.result},c.onerror=()=>l(new Error("")),c.readAsDataURL(e)})}async function g7(e,t){try{console.log("[AITaskManager]  AI ...");const n=await t7(e);let a;t&&(console.log("[AITaskManager] ..."),a=await m7(t,1024,1024,.8));const i={apiKey:n.apiConfig.apiKey,baseUrl:n.apiConfig.baseUrl,modelName:n.apiConfig.modelName,temperature:n.apiConfig.temperature,maxTokens:n.apiConfig.maxTokens,systemPrompt:n.systemPrompt,userPrompt:n.userPrompt,pendingImageBase64:a,imageRecognitionPrompt:"100",characterName:n.characterName,userNickname:e.userNickname,displayName:e.displayName},l=await vv(e.characterId,"private_chat_reply",i);return console.log(`[AITaskManager] : ${l}`),l}catch(n){throw console.error("[AITaskManager] :",n),n}}function x7({characterId:e,characterName:t,onClose:n}){const[a,i]=C.useState([]),[l,c]=C.useState(""),d=C.useRef(!0);C.useEffect(()=>(d.current=!0,()=>{d.current=!1}),[]);const[u,m]=C.useState(()=>Fe.chatSettings?.userAvatar||null),[p,h]=C.useState(()=>Fe.characters?.find(Ne=>Ne.id===e)?.avatar||null),[g,x]=C.useState(()=>Fe.chatSettings?.chatBackground||null),[v,y]=C.useState(null),[k,w]=C.useState(null),[_,N]=C.useState(null),[T,B]=C.useState(()=>Fe.chatSettings?.userNickname||Fe.userData?.name||""),[O,$]=C.useState(!1),[P,A]=C.useState(()=>Fe.chatSettingsDetail?.[e]?.remark||t),[H,Y]=C.useState(()=>Fe.chatSettings?.bubbleStyles?.user||`background: linear-gradient(75deg, rgba(172, 188, 166, 1), rgba(172, 188, 166, 1), rgba(172, 188, 166, 1));
color: #ffffff;
border-radius: 8px;
padding: 0.625rem 0.875rem;
max-width: 70vw;`),[E,D]=C.useState(()=>Fe.chatSettings?.bubbleStyles?.character||`background: linear-gradient(-75deg, rgba(245, 245, 245, 1), rgba(245, 245, 245, 1), rgba(245, 245, 245, 1));
color: #333333;
border-radius: 8px;
padding: 0.625rem 0.875rem;
max-width: 70vw;`),[S,z]=C.useState(()=>Fe.chatSettings?.bubbleStyles?.userQuote||`background: #9BAD96;
color: rgba(255, 255, 255, 0.8);
border-radius: 4px;
padding: 0.5rem;
margin-bottom: 0.5rem;`),[L,F]=C.useState(()=>Fe.chatSettings?.bubbleStyles?.characterQuote||`background: #e8e8e8;
color: #666666;
border-radius: 4px;
padding: 0.5rem;
margin-bottom: 0.5rem;`),[K,G]=C.useState(()=>Fe.chatSettings?.timestampStyle||"default"),[Z,R]=C.useState([]),[V,ee]=C.useState(null),[W,U]=C.useState(()=>Fe.chatSettings?.darkMode||!1),[Q,oe]=C.useState(()=>Fe.chatSettings?.theme||(Fe.chatSettings?.darkMode?"dark":"light"));C.useEffect(()=>{const ke=()=>{const pe=Fe.chatSettings;U(pe?.darkMode||!1),oe(pe?.theme||(pe?.darkMode?"dark":"light"))};return window.addEventListener("chat-settings-updated",ke),(async()=>{if(!Fe.chatSettings)try{const pe=await ue.get(te.CHATS,"chat_settings");pe&&(Fe.chatSettings=pe,pe.darkMode!==void 0&&U(pe.darkMode),oe(pe.theme||(pe.darkMode?"dark":"light")),pe.userAvatar&&m(pe.userAvatar),pe.chatBackground&&x(pe.chatBackground),pe.bubbleStyles&&(Y(pe.bubbleStyles.user),D(pe.bubbleStyles.character),z(pe.bubbleStyles.userQuote),F(pe.bubbleStyles.characterQuote)),pe.timestampStyle&&G(pe.timestampStyle))}catch(pe){console.error("Failed to load global chat settings in PrivateChat",pe)}})(),()=>window.removeEventListener("chat-settings-updated",ke)},[]),C.useEffect(()=>{const ke=Ne=>{Ne.detail&&Ne.detail.characterId===e&&(console.log("[PrivateChat] ..."),ue.get(te.CHARACTERS,"characters").then(pe=>{const rt=pe?.find(Je=>Je.id===e);if(rt&&(ee(rt),Fe.characters)){const Je=Fe.characters.findIndex(Qe=>Qe.id===e);Je!==-1&&(Fe.characters[Je]=rt)}}))};return window.addEventListener("character-memories-updated",ke),()=>window.removeEventListener("character-memories-updated",ke)},[e]);const[ne,ae]=C.useState(!1);C.useRef(null);const ve=C.useRef(null),se=C.useRef(!0),xe=C.useRef(null),Ie=C.useRef(!1),I=C.useRef([]),[me,he]=C.useState(!1),[J,X]=C.useState(null),[ie,le]=C.useState({x:0,y:0}),[ye,ce]=C.useState(!1),[Ce,_e]=C.useState(""),[je,Re]=C.useState(null),st=C.useRef(null),[Oe,at]=C.useState({show:!1,message:""}),[ct,ht]=C.useState(!1),[pt,ot]=C.useState(new Set),[$t,Dt]=C.useState(!1),[Kt,Tn]=C.useState(!1),[rn,Qt]=C.useState(""),[Dn,dn]=C.useState(!1),[vt,Xt]=C.useState({}),[qe,St]=C.useState(0),[Lt,Ct]=C.useState(0),[Gt,qt]=C.useState({}),[Jt,gs]=C.useState(null),[tn,Vn]=C.useState(null),[Ms,mn]=C.useState(!1),[hr,Vr]=C.useState(""),[Fo,Mi]=C.useState(""),[td,Ps]=C.useState(0),[Ro,nd]=C.useState(new Set);C.useEffect(()=>{(async()=>{if(u)if(u.startsWith("data:"))y(u);else{const Ne=await wt(u);y(Ne)}else y(null);if(p)if(p.startsWith("data:"))w(p);else{const Ne=await wt(p);w(Ne)}else w(null);if(g)if(g.startsWith("data:"))N(g);else{const Ne=await wt(g);N(Ne)}else N(null)})()},[u,p,g]),C.useEffect(()=>{(async()=>{const Ne={},pe=await ja(),rt=new Map(pe.map(Je=>[Je.id,Je]));for(const Je of I.current)if(Je.stickerId&&!vt[Je.stickerId]){const Qe=rt.get(Je.stickerId);if(Qe){if(Qe.imageUrl)Ne[Je.stickerId]=Qe.imageUrl;else if(Qe.imageKey){const Xe=await ip(Qe.imageKey);Xe&&(Ne[Je.stickerId]=Xe)}}}Object.keys(Ne).length>0&&Xt(Je=>({...Je,...Ne}))})()},[a]),C.useEffect(()=>{(async()=>{const Ne={};for(const pe of I.current)if(pe.imageKey&&!Gt[pe.imageKey]){const rt=await wt(pe.imageKey);rt&&(Ne[pe.imageKey]=rt)}Object.keys(Ne).length>0&&qt(pe=>({...pe,...Ne}))})()},[a]);const $r=ke=>{const Ne=ke.getHours().toString().padStart(2,"0"),pe=ke.getMinutes().toString().padStart(2,"0");return`${Ne}:${pe}`},Hr=ke=>{const Ne={};return ke&&ke.split(";").filter(rt=>rt.trim()).forEach(rt=>{const[Je,Qe]=rt.split(":").map(Xe=>Xe.trim());if(Je&&Qe){const Xe=Je.replace(/-([a-z])/g,mt=>mt[1].toUpperCase());Ne[Xe]=Qe}}),Ne},Bo=(ke,Ne)=>ke.getFullYear()===Ne.getFullYear()&&ke.getMonth()===Ne.getMonth()&&ke.getDate()===Ne.getDate(),Lo=ke=>{const Ne=ke.getFullYear(),pe=(ke.getMonth()+1).toString().padStart(2,"0"),rt=ke.getDate().toString().padStart(2,"0");return`${Ne}/${pe}/${rt}`},pr=C.useMemo(()=>{const ke=[],Ne=a.filter(pe=>!pe.isImageRecognition);return Ne.forEach((pe,rt)=>{(rt===0||!Bo(pe.timestamp,Ne[rt-1].timestamp))&&ke.push({type:"date",date:Lo(pe.timestamp),id:`date-${pe.timestamp.getTime()}`});const Qe=pe.senderId==="user"&&Ne.slice(rt+1).some(Xe=>Xe.senderId==="character");ke.push({type:"message",message:pe,isUserMessageRead:Qe})}),ke},[a,qe]),Ur=L8({count:pr.length,getScrollElement:()=>ve.current,estimateSize:ke=>{const Ne=pr[ke];if(Ne?.type==="date")return 30;if(Ne?.type==="message"){const pe=Ne.message;return pe.imageKey||pe.stickerId?280:80}return 80},overscan:10});C.useEffect(()=>{I.current.length>0&&!Ie.current&&(Pi(),I.current.some(Ne=>Ne.senderId==="character"&&!Ne.isRead)?(Ie.current=!0,I.current=I.current.map(Ne=>Ne.senderId==="character"?{...Ne,isRead:!0}:Ne),Mn(I.current),i([...I.current])):Ie.current=!0)},[I.current.length]),C.useLayoutEffect(()=>{pr.length!==0&&(se.current?requestAnimationFrame(()=>{Ur.getTotalSize()>0&&ve.current&&(ve.current.scrollTop=ve.current.scrollHeight,se.current=!1)}):requestAnimationFrame(()=>{ve.current&&(ve.current.scrollTop=ve.current.scrollHeight)}))},[pr.length]),C.useEffect(()=>{se.current=!0,xe.current=null,Ie.current=!1;const ke=async()=>{try{const Qe=Fe.messages[e];if(Qe&&Qe.length>0&&(I.current=Qe,i([...Qe])),Fe.chatSettings){const Ue=Fe.chatSettings;Ue.userAvatar!==void 0&&m(Ue.userAvatar),Ue.chatBackground!==void 0&&x(Ue.chatBackground),Ue.userNickname!==void 0&&B(Ue.userNickname),Ue.bubbleStyles?.user&&Y(Ue.bubbleStyles.user),Ue.bubbleStyles?.character&&D(Ue.bubbleStyles.character),Ue.bubbleStyles?.userQuote&&z(Ue.bubbleStyles.userQuote),Ue.bubbleStyles?.characterQuote&&F(Ue.bubbleStyles.characterQuote),Ue.timestampStyle&&G(Ue.timestampStyle)}const Xe=Fe.chatSettingsDetail[e];if(Xe&&Xe.remark!==void 0&&A(Xe.remark),Fe.userData&&!Fe.chatSettings?.userNickname&&B(Fe.userData.name||""),Fe.characters){const Ue=Fe.characters.find(lt=>lt.id===e);Ue&&(h(Ue.avatar),ee(Ue))}const mt=[ue.get(te.CHAT_MESSAGES,`chat_messages_${e}`),ue.get(te.CHAT_SETTINGS,`chat_detail_settings_${e}`)];$A()?(mt.push(Promise.resolve(Fe.chatSettings)),mt.push(Promise.resolve(Fe.userData)),mt.push(Promise.resolve(Fe.characters))):(mt.push(ue.get(te.CHATS,"chat_settings").then(Ue=>(Fe.chatSettings=Ue,Ue))),mt.push(ue.get(te.USER_DATA,"userData").then(Ue=>(Fe.userData=Ue,Ue))),mt.push(ue.get(te.CHARACTERS,"characters").then(Ue=>(Fe.characters=Ue,Fe.lastUpdate=Date.now(),Ue))));const[Mt,Ge,et,At,gn]=await Promise.all(mt),Pt=await ue.get(te.USER_DATA,"balance");Pt!=null&&Ps(Pt);const it={};if(Mt&&Mt.length>0){const Ue=Mt.map(gt=>({...gt,timestamp:new Date(gt.timestamp)}));(!Qe||Qe.length!==Ue.length||Ue.length>0&&Qe.length>0&&Ue[Ue.length-1].id!==Qe[Qe.length-1].id)&&(Fe.messages[e]=Ue,I.current=Ue,it.messages=Ue)}else(!Qe||Qe.length>0)&&(it.messages=[],Fe.messages[e]=[],I.current=[]);if(et){et.userAvatar!==u&&(it.userAvatarKey=et.userAvatar),et.chatBackground!==g&&(it.chatBackgroundKey=et.chatBackground);const Ue=et.userNickname||"";Ue!==T&&(it.userNickname=Ue),et.bubbleStyles?.user&&Y(et.bubbleStyles.user),et.bubbleStyles?.character&&D(et.bubbleStyles.character),et.bubbleStyles?.userQuote&&z(et.bubbleStyles.userQuote),et.bubbleStyles?.characterQuote&&F(et.bubbleStyles.characterQuote),et.timestampStyle!==K&&G(et.timestampStyle||"default")}else if(At){const Ue=At.name||"";Ue!==T&&(it.userNickname=Ue)}else T!==""&&(it.userNickname="");Ge&&(Fe.chatSettingsDetail[e]=Ge);let xn=t;if(gn){const Ue=gn.find(lt=>lt.id===e);Ue&&(xn=Ue.name)}let It=Ge?.remark;if((!It||!It.trim())&&(xn&&xn!==""?It=xn:t&&t!==""?It=t:It=P||""),It&&It!==P&&(it.displayName=It),(!Ge||!Ge.remark)&&It&&It!==""){const Ue={...Ge||{},remark:It,isPinned:Ge?.isPinned||!1,background:Ge?.background};ue.set(te.CHAT_SETTINGS,`chat_detail_settings_${e}`,Ue).then(()=>{Fe.chatSettingsDetail||(Fe.chatSettingsDetail={}),Fe.chatSettingsDetail[e]=Ue,console.log("[PrivateChat] Auto-fixed missing remark with:",It)}).catch(lt=>{console.warn("[PrivateChat] Failed to auto-save remark:",lt)})}if(gn){const Ue=gn.find(lt=>lt.id===e);Ue&&(Ue.avatar!==p&&(it.characterAvatarKey=Ue.avatar),(!V||Ue.id!==V?.id||Ue.name!==V?.name)&&(it.character=Ue))}it.messages!==void 0&&i(it.messages),it.userAvatarKey!==void 0&&m(it.userAvatarKey),it.chatBackgroundKey!==void 0&&x(it.chatBackgroundKey),it.userNickname!==void 0&&B(it.userNickname),it.displayName!==void 0&&A(it.displayName),it.characterAvatarKey!==void 0&&h(it.characterAvatarKey),it.character!==void 0&&ee(it.character),xe.current=e}catch(Qe){console.error("Failed to load chat data:",Qe)}};ke();const Ne=()=>{i([]),I.current=[],Fe.messages[e]=[]},pe=()=>{Yf(),ke()};window.addEventListener("chat-messages-cleared",Ne),window.addEventListener("chat-settings-updated",pe);const rt=Qe=>{const{type:Xe,payload:mt}=Qe.data;if(Xe==="AI_TASK_COMPLETED"){if(console.log("[PrivateChat]  AI :",mt),mt.characterId===e){const Mt=mt.messages.map(et=>({...et,timestamp:new Date(et.timestamp)}));if(Mt.some(et=>et.senderId==="system"&&et.text.includes(""))){for(let et=I.current.length-1;et>=0;et--){const At=I.current[et];if(At.senderId==="user"&&At.redPacket&&!At.redPacket.opened){I.current[et]={...At,redPacket:{...At.redPacket,opened:!0}};break}}i([...I.current])}I.current=[...I.current,...Mt],Mn(I.current),Pn(I.current),document.hidden||!d.current?d.current&&(i([...I.current]),ae(!1)):(async()=>{for(let At=0;At<Mt.length;At++){if(!d.current)return;if(document.hidden){i(it=>{const It=Mt.slice(At).filter(Ue=>!it.some(lt=>lt.id===Ue.id));return[...it,...It]}),ae(!1);return}const gn=At===0?600:1e3+Math.random()*800;if(await new Promise(it=>setTimeout(it,gn)),!d.current)return;const Pt=Mt[At];i(it=>it.some(xn=>xn.id===Pt.id)?it:[...it,Pt]),At===0&&ae(!1)}d.current&&ae(!1)})()}}else Xe==="AI_TASK_FAILED"&&(console.error("[PrivateChat] AI :",mt),mt.characterId===e&&(at({show:!0,message:`AI: ${mt.error}`}),setTimeout(()=>at({show:!1,message:""}),5e3),ae(!1)))},Je=async Qe=>{const Xe=Qe,{taskId:mt,task:Mt}=Xe.detail;if(console.log("[PrivateChat] Service Worker :",mt),Mt.chatId===e){if(Mt.type==="memory_extraction"){console.log("[] ...");try{const{payload:Ge}=Mt,et=await fetch(`${Ge.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ge.apiKey}`},body:JSON.stringify({model:Ge.modelName,messages:[{role:"system",content:Ge.systemPrompt},{role:"user",content:Ge.userPrompt}],temperature:Ge.temperature,max_tokens:Ge.maxTokens})});if(!et.ok)throw new Error(`API Error: ${et.status}`);const At=await et.json();if(At.error)throw new Error(`API Error Details: ${JSON.stringify(At.error)}`);const gn=At.choices?.[0]?.message?.content;if(!gn)throw console.error("[] :",At),new Error("Empty response from AI (check console for details)");const Pt=Sv(gn,Ge.referenceDate);await kv(e,Pt)}catch(Ge){console.error("[] ",Ge),window.dispatchEvent(new CustomEvent("memory-extraction-failed",{detail:{characterId:e,error:Ge.message}}))}return}try{const{payload:Ge}=Mt;let et=[{role:"system",content:Ge.systemPrompt},{role:"user",content:Ge.userPrompt}];if(Ge.pendingImageBase64&&Ge.imageRecognitionPrompt){console.log("[] ...");const lt=await fetch(`${Ge.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ge.apiKey}`},body:JSON.stringify({model:Ge.modelName,messages:[{role:"user",content:[{type:"text",text:Ge.imageRecognitionPrompt},{type:"image_url",image_url:{url:Ge.pendingImageBase64}}]}],temperature:.7,max_tokens:500})});if(!lt.ok)throw new Error("");const un=(await lt.json()).choices?.[0]?.message?.content||"";console.log("[] :",un),et=[et[0],{role:"user",content:et[1].content+`

[: ${un}]`}]}const At=await fetch(`${Ge.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ge.apiKey}`},body:JSON.stringify({model:Ge.modelName,messages:et,temperature:Ge.temperature,max_tokens:Ge.maxTokens})});if(!At.ok)throw new Error(`AI API : ${At.status}`);const gn=await At.json();if(gn.error)throw new Error(`API Error Details: ${JSON.stringify(gn.error)}`);const Pt=gn.choices?.[0]?.message?.content||"";if(!Pt)throw console.error("[] :",gn),new Error("AI (check console)");console.log("[] AI :",Pt);let it,xn=[];try{it=JSON.parse(Pt),xn=it.messages||[]}catch{console.log("[]  JSON...");try{const gt=Pt.match(/```(?:json)?\s*(\{[\s\S]*?\})\s*```/);if(gt)it=JSON.parse(gt[1]),xn=it.messages||[];else{const un=Pt.indexOf("{");if(un===-1)throw new Error(" JSON ");let Fn=0,bn=-1;for(let Qs=un;Qs<Pt.length;Qs++)if(Pt[Qs]==="{"&&Fn++,Pt[Qs]==="}"&&Fn--,Fn===0){bn=Qs+1;break}if(bn===-1)throw new Error("JSON ");const Ta=Pt.substring(un,bn);it=JSON.parse(Ta),xn=it.messages||[]}}catch(gt){throw console.error("[] JSON :",gt.message),console.error("[] AI :",Pt),new Error(`AI: ${gt.message}`)}}if(xn.length===0)throw new Error("AI");console.log("[] :",xn);const It=xn.map((lt,gt)=>{if(lt.sender==="system")return{id:`${Date.now()}-${gt}`,text:lt.content,senderId:"system",senderName:"",timestamp:new Date,isRead:!0};if(lt.isPlaceholderImage){const Fn=(lt.content||"").slice(0,100);return{id:`${Date.now()}-${gt}`,text:Fn,senderId:"character",senderName:P,timestamp:new Date,isPlaceholderImage:!0,isRead:!0}}if(lt.redPacket)return{id:`${Date.now()}-${gt}`,text:"[]",senderId:"character",senderName:P,timestamp:new Date,redPacket:{amount:lt.redPacket.amount,blessing:lt.redPacket.blessing,opened:!1},isRead:!0};const un={id:`${Date.now()}-${gt}`,text:lt.stickerId?"[]":lt.content||"",senderId:"character",senderName:P,timestamp:new Date,isRead:!0};return lt.stickerId&&(un.stickerId=lt.stickerId),lt.quote&&(un.quote={sender:lt.quote.sender,content:lt.quote.content}),un});if(It.some(lt=>lt.senderId==="system"&&lt.text.includes(""))){for(let lt=I.current.length-1;lt>=0;lt--){const gt=I.current[lt];if(gt.senderId==="user"&&gt.redPacket&&!gt.redPacket.opened){I.current[lt]={...gt,redPacket:{...gt.redPacket,opened:!0}};break}}i([...I.current])}I.current=[...I.current,...It],await Mn(I.current),await Pn(I.current),document.hidden||!d.current?d.current&&(i([...I.current]),ae(!1)):(async()=>{for(let gt=0;gt<It.length;gt++){if(!d.current)return;if(document.hidden){i(bn=>{const Qs=It.slice(gt).filter(Bi=>!bn.some(Da=>Da.id===Bi.id));return[...bn,...Qs]}),ae(!1);return}const un=gt===0?600:1e3+Math.random()*800;if(await new Promise(bn=>setTimeout(bn,un)),!d.current)return;const Fn=It[gt];i(bn=>bn.some(Ta=>Ta.id===Fn.id)?bn:[...bn,Fn]),gt===0&&ae(!1)}d.current&&ae(!1)})()}catch(Ge){console.error("[PrivateChat]  AI :",Ge),at({show:!0,message:`AI: ${Ge.message}`}),setTimeout(()=>at({show:!1,message:""}),5e3),ae(!1)}}};return"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.addEventListener("message",rt),window.addEventListener("ai-task-needs-fallback",Je),()=>{window.removeEventListener("chat-messages-cleared",Ne),window.removeEventListener("chat-settings-updated",pe),window.removeEventListener("ai-task-needs-fallback",Je),"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener("message",rt),st.current&&clearTimeout(st.current),Wr.current&&clearTimeout(Wr.current)}},[e]);const Wr=C.useRef(null),Et=()=>{Wr.current&&clearTimeout(Wr.current),Wr.current=setTimeout(()=>{St(ke=>ke+1)},100)},Mn=async ke=>{try{const Ne=`chat_messages_${e}`;await ue.set(te.CHAT_MESSAGES,Ne,ke),Fe.messages[e]=ke}catch(Ne){console.error("Failed to save messages:",Ne)}},Pi=async()=>{try{const ke=await ue.get(te.CHATS,"chat_list")||[],Ne=ke.findIndex(pe=>pe.id===e);Ne!==-1&&ke[Ne].unread&&(delete ke[Ne].unread,await ue.set(te.CHATS,"chat_list",ke))}catch(ke){console.error("Failed to clear unread count:",ke)}},Pn=async ke=>{try{let Ne=await ue.get(te.CHATS,"chat_list")||[];const pe=Ne.findIndex(Ge=>Ge.id===e),rt=new Date,Je=`${rt.getHours().toString().padStart(2,"0")}:${rt.getMinutes().toString().padStart(2,"0")}`;let Qe="",Xe="";if(ke.length>0){const Ge=ke[ke.length-1];Ge.senderId==="character"?Xe=P:Xe=T,Qe=Ge.text}let mt=t;if(V?.name&&V.name!=="")mt=V.name;else if(!mt||mt===""){const Ge=Fe.characters?.find(et=>et.id===e);Ge?.name&&Ge.name!==""&&(mt=Ge.name)}const Mt={id:e,name:mt||"",lastMessage:Qe,lastSender:Xe,time:Je,timestamp:rt.getTime()};if(pe!==-1){const Ge=Ne[pe];Mt.isPinned=Ge.isPinned,Mt.remark=Ge.remark,Ne[pe]=Mt}else Ne.unshift(Mt);await ue.set(te.CHATS,"chat_list",Ne)}catch(Ne){console.error("Failed to update chat list:",Ne)}},Kr=()=>{if(l.trim()){const ke={id:Date.now().toString(),text:l.trim(),senderId:"user",senderName:T,timestamp:new Date};if(je){let Ne=je.text;je.isPlaceholderImage||je.imageUrl||je.imageKey?Ne="[]":je.stickerId&&(Ne="[]"),ke.quote={sender:je.senderId==="user"?T:P,content:Ne}}I.current=[...I.current,ke],i([...I.current]),Mn(I.current),Pn(I.current),c(""),Re(null)}},sd=ke=>{ke.key==="Enter"&&!ke.shiftKey&&(ke.preventDefault(),Kr())},Oo=async ke=>{const Ne={id:Date.now().toString(),text:"[]",senderId:"user",senderName:T,timestamp:new Date,stickerId:ke};I.current=[...I.current,Ne],i([...I.current]),Mn(I.current),Pn(I.current),dn(!1),Dt(!1)},Gr=()=>{if(!rn.trim())return;const ke={id:Date.now().toString(),text:rn.trim(),senderId:"user",senderName:T,timestamp:new Date,isPlaceholderImage:!0};I.current=[...I.current,ke],i([...I.current]),Mn(I.current),Pn(I.current),Tn(!1),Qt("")},[Nt,Na]=C.useState(null),$n=(ke,Ne)=>s.jsxs("div",{className:"w-[240px] overflow-hidden rounded-lg select-none cursor-pointer active:opacity-90 transition-opacity",onClick:async pe=>{if(pe.stopPropagation(),Ne.senderId==="character"&&!ke.opened){const rt=td+ke.amount;Ps(rt),await ue.set(te.USER_DATA,"balance",rt);const Je=I.current.map(Xe=>Xe.id===Ne.id?{...Xe,redPacket:{...Xe.redPacket,opened:!0}}:Xe),Qe={id:`${Date.now()}-system`,text:`${P}`,senderId:"system",senderName:"",timestamp:new Date,isRead:!0};Je.push(Qe),I.current=Je,i([...Je]),await Mn(Je),Pn(Je),Na({...Ne,redPacket:{...ke,opened:!0}})}else Na(Ne)},children:[s.jsxs("div",{className:"bg-[#ea5e4f] p-4 flex items-center gap-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsxs("div",{className:"w-[36px] h-[52px] bg-[#f4d03f] rounded-[18px] border-2 border-[#e6b333] flex flex-col items-center justify-center gap-[5px] relative",children:[s.jsx("div",{className:"w-[20px] h-[2px] bg-[#dba830] rounded-full opacity-80"}),s.jsx("div",{className:"w-[20px] h-[2px] bg-[#dba830] rounded-full opacity-80"}),s.jsx("div",{className:"w-[20px] h-[2px] bg-[#dba830] rounded-full opacity-80"}),s.jsx("div",{className:"w-[20px] h-[2px] bg-[#dba830] rounded-full opacity-80"}),s.jsx("div",{className:"w-[20px] h-[2px] bg-[#dba830] rounded-full opacity-80"})]})}),s.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center text-white",children:[s.jsx("p",{className:"text-[15px] font-medium leading-snug truncate mb-1",children:ke.blessing}),s.jsx("p",{className:"text-[12px] opacity-85 font-normal",children:ke.opened?"":""})]})]}),s.jsx("div",{className:"bg-white px-4 py-2 border-t border-black/5",children:s.jsx("p",{className:"text-[#999] text-[11px] tracking-wide",children:""})})]}),rd=async()=>{const ke=parseInt(hr);if(!ke||ke<=0){at({show:!0,message:""}),setTimeout(()=>at({show:!1,message:""}),3e3);return}const Ne=Fo.trim()||"",pe={id:Date.now().toString(),text:"[]",senderId:"user",senderName:T,timestamp:new Date,redPacket:{amount:ke,blessing:Ne,opened:!1}};I.current=[...I.current,pe],i([...I.current]),Mn(I.current),Pn(I.current),mn(!1),Vr(""),Mi(""),Dt(!1)},ad=async ke=>{try{if(!await wt(ke)){at({show:!0,message:""}),setTimeout(()=>at({show:!1,message:""}),3e3);return}const pe=ke.replace("_chat_image",""),rt=await wt(pe);if(rt){const Xe=await(await fetch(rt)).blob(),mt=new File([Xe],`image_${Date.now()}.jpg`,{type:Xe.type});gs(mt)}const Je={id:Date.now().toString(),text:"",senderId:"user",senderName:T||"",timestamp:new Date,imageKey:ke};I.current.push(Je),i([...I.current]),await Mn(I.current),await Pn(I.current),Dt(!1)}catch(Ne){console.error(":",Ne),at({show:!0,message:""}),setTimeout(()=>at({show:!1,message:""}),3e3)}},id=async()=>{if(!ne){ae(!0);try{if(l.trim()){const Ne={id:Date.now().toString(),text:l.trim(),senderId:"user",senderName:T,timestamp:new Date};if(je){let pe=je.text;je.isPlaceholderImage||je.imageUrl||je.imageKey?pe="[]":je.stickerId&&(pe="[]"),Ne.quote={sender:je.senderId==="user"?T:P,content:pe}}I.current=[...I.current,Ne],i([...I.current]),await Mn(I.current),await Pn(I.current),c(""),Re(null)}const ke=await g7({characterId:e,character:V||{id:e,name:t,description:"",manifestDate:void 0},userNickname:T,displayName:P,allMessages:I.current,tempActiveMemoryIds:Array.from(Ro)},Jt);console.log("[PrivateChat] AI :",ke),Jt&&gs(null)}catch(ke){console.error("[PrivateChat] :",ke),at({show:!0,message:`AI: ${ke.message}`}),setTimeout(()=>at({show:!1,message:""}),5e3),ae(!1)}}},_a=async()=>{try{let ke=await ue.get(te.CHATS,"chat_list")||[];if(ke.findIndex(pe=>pe.id===e)===-1&&a.length===0){const pe=new Date,rt=`${pe.getHours().toString().padStart(2,"0")}:${pe.getMinutes().toString().padStart(2,"0")}`,Je={id:e,name:t,lastMessage:"",lastSender:"",time:rt,timestamp:pe.getTime()};ke.unshift(Je),await ue.set(te.CHATS,"chat_list",ke)}n()}catch(ke){console.error("Failed to save chat list:",ke),n()}},xs=(ke,Ne)=>{if(ct){Aa(ke.id);return}const pe="touches"in Ne?Ne.touches[0]:Ne;st.current=setTimeout(()=>{X(ke),le({x:pe.clientX,y:pe.clientY}),he(!0)},500)},In=()=>{st.current&&(clearTimeout(st.current),st.current=null)},Ea=()=>{if(J){const ke=J.text;navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(ke).then(()=>{console.log("")}).catch(()=>{zo(ke)}):zo(ke),he(!1),X(null)}},zo=ke=>{const Ne=document.createElement("textarea");Ne.value=ke,Ne.style.position="fixed",Ne.style.top="0",Ne.style.left="0",Ne.style.width="2em",Ne.style.height="2em",Ne.style.padding="0",Ne.style.border="none",Ne.style.outline="none",Ne.style.boxShadow="none",Ne.style.background="transparent",document.body.appendChild(Ne),Ne.focus(),Ne.select();try{document.execCommand("copy")&&console.log("fallback")}catch(pe){console.error(":",pe)}document.body.removeChild(Ne)},od=()=>{J&&(I.current=I.current.filter(ke=>ke.id!==J.id),he(!1),X(null),setTimeout(()=>{i([...I.current]),Mn(I.current),Pn(I.current),requestAnimationFrame(()=>{requestAnimationFrame(()=>{Ct(ke=>ke+1)})})},0))},Ii=()=>{ht(!0),he(!1),X(null)},Vo=()=>{ht(!1),ot(new Set)},Aa=ke=>{ot(Ne=>{const pe=new Set(Ne);return pe.has(ke)?pe.delete(ke):pe.add(ke),pe})},qr=()=>{pt.size!==0&&(I.current=I.current.filter(ke=>!pt.has(ke.id)),ht(!1),ot(new Set),setTimeout(()=>{i([...I.current]),Mn(I.current),Pn(I.current),requestAnimationFrame(()=>{requestAnimationFrame(()=>{Ct(ke=>ke+1)})})},0))},ld=()=>{J&&(_e(J.text),ce(!0),he(!1))},Fi=()=>{J&&Ce.trim()&&(I.current=I.current.map(ke=>ke.id===J.id?{...ke,text:Ce}:ke),ce(!1),X(null),_e(""),setTimeout(()=>{i([...I.current]),Mn(I.current),Pn(I.current),requestAnimationFrame(()=>{requestAnimationFrame(()=>{Ct(ke=>ke+1)})})},0))},bt=()=>{ce(!1),X(null),_e("")},$o=()=>{J&&(Re(J),he(!1),X(null))},Ho=()=>{Re(null)},Ri=()=>{$(!1),Yf(),(async()=>{try{const[Ne,pe,rt]=await Promise.all([ue.get(te.CHAT_MESSAGES,`chat_messages_${e}`),ue.get(te.CHATS,"chat_settings"),ue.get(te.CHAT_SETTINGS,`chat_detail_settings_${e}`)]);if(Ne&&Ne.length>0){const Je=Ne.map(Qe=>({...Qe,timestamp:new Date(Qe.timestamp)}));I.current=Je,Fe.messages[e]=Je,i([...Je])}else i([]),I.current=[],Fe.messages[e]=[];if(pe&&(Fe.chatSettings=pe,pe.chatBackground&&pe.chatBackground!==g&&x(pe.chatBackground)),rt){Fe.chatSettingsDetail[e]=rt;const Je=rt.remark||t;Je!==P&&A(Je)}else t!==P&&A(t)}catch(Ne){console.error("Failed to reload data:",Ne)}})()};return C.useEffect(()=>{xe.current===e&&a.length>0&&wv(e,a).catch(ke=>{console.error("Failed to trigger memory extraction:",ke)})},[a.length,e]),s.jsxs(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2,ease:"easeOut"},className:`fixed inset-0 z-[60] flex flex-col ${Q==="light-frosted"?"bg-transparent":W?"bg-[#121212]":"bg-white"}`,children:[(Q==="light-frosted"||Q==="dark-frosted")&&_&&s.jsx("div",{className:"absolute inset-0 -z-20",children:s.jsx("img",{src:_,className:"w-full h-full object-cover"})}),s.jsxs("div",{className:`h-16 flex items-center justify-between px-4 ${Q==="light-frosted"?"bg-white/20 backdrop-blur-md":Q==="dark-frosted"?"bg-black/20 backdrop-blur-md":W?"bg-[#121212]":"bg-white"}`,children:[s.jsx("button",{onClick:_a,className:"p-2 -ml-2 active:opacity-60 transition-opacity",children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:Q==="light-frosted"?"#333":Q==="dark-frosted"||W?"white":"black",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M15 18l-6-6 6-6"})})}),s.jsx("h1",{className:`font-semibold text-[18px] text-center ${Q==="light-frosted"?"text-[#333]":Q==="dark-frosted"||W?"text-white":"text-[#333]"}`,children:P}),s.jsx("button",{onClick:()=>$(!0),className:"p-2 -mr-2 active:opacity-60 transition-opacity",children:s.jsx(Y_,{className:`w-6 h-6 ${Q==="light-frosted"?"text-[#333]":Q==="dark-frosted"||W?"text-white":"text-[#333]"}`,strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})]}),s.jsx("div",{ref:ve,className:"flex-1 overflow-y-auto px-4 py-4",style:{backgroundColor:Q==="light-frosted"||Q==="dark-frosted"||_?"transparent":W?"#121212":"white",backgroundImage:Q==="light-frosted"||Q==="dark-frosted"?"none":_?W?`linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url(${_})`:`url(${_})`:"none",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",position:"relative"},children:I.current.length===0?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[14px] text-[#999]",children:""})}):s.jsx("div",{style:{height:`${Ur.getTotalSize()}px`,position:"relative"},children:Ur.getVirtualItems().map(ke=>{const Ne=pr[ke.index];if(!Ne)return null;if(Ne.type==="date")return s.jsx("div",{ref:Ur.measureElement,"data-index":ke.index,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${ke.start}px)`},children:s.jsx(Ev,{dateString:Ne.date})},Ne.id);const{message:pe,isUserMessageRead:rt}=Ne,Je=!(pe.stickerId||pe.isPlaceholderImage||pe.redPacket||pe.imageKey&&(!pe.text||pe.text==="[]")),Qe=K!=="inside";return s.jsx("div",{ref:Ur.measureElement,"data-index":ke.index,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${ke.start}px)`},children:s.jsx("div",{className:"pb-3",children:s.jsxs("div",{className:"flex items-start gap-2",children:[ct&&s.jsx("div",{className:"w-6 h-6 flex items-center justify-center cursor-pointer flex-shrink-0",onClick:()=>Aa(pe.id),children:s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${pt.has(pe.id)?"bg-[#7B9E7B] border-[#7B9E7B]":"bg-white border-[#ccc]"}`,children:pt.has(pe.id)&&s.jsx(kt,{className:"w-3.5 h-3.5 text-white",strokeWidth:3})})}),s.jsxs("div",{className:`flex gap-2 items-start flex-1 ${pe.senderId==="user"?"justify-end":"justify-start"}`,children:[pe.senderId==="system"&&s.jsx("div",{className:"w-full flex justify-center py-1",children:s.jsx("div",{className:"bg-black/20 rounded-full px-2 py-0 flex items-center justify-center cursor-pointer active:opacity-70 transition-opacity select-none",onTouchStart:Xe=>xs(pe,Xe),onTouchEnd:In,onMouseDown:Xe=>xs(pe,Xe),onMouseUp:In,onMouseLeave:In,children:s.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] text-white",children:pe.text.includes("")?`${P}`:pe.text})})}),pe.senderId==="character"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-9 h-9 rounded-full bg-[#f5f5f5] flex items-center justify-center overflow-hidden flex-shrink-0",children:k?s.jsx("img",{src:k,alt:t,className:"w-full h-full object-cover"}):s.jsx(fs,{className:"w-5 h-5 text-[#999]",strokeWidth:2})}),s.jsx("div",{style:pe.stickerId||pe.isPlaceholderImage||pe.redPacket||pe.imageKey&&(!pe.text||pe.text==="[]")?{}:Hr(E),onTouchStart:Xe=>xs(pe,Xe),onTouchEnd:In,onMouseDown:Xe=>xs(pe,Xe),onMouseUp:In,onMouseLeave:In,children:pe.stickerId&&vt[pe.stickerId]?s.jsx("img",{src:vt[pe.stickerId],alt:"",className:"max-w-[150px] max-h-[150px] rounded-lg",onLoad:Et}):pe.isPlaceholderImage?s.jsx("div",{className:"w-[250px] h-[180px] bg-[#f0f0f0] rounded-lg flex items-center justify-center px-6 py-4",children:s.jsxs("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] text-[#666] text-center",children:["[",pe.text,".jpg]"]})}):pe.redPacket?$n(pe.redPacket,pe):s.jsxs(s.Fragment,{children:[pe.quote&&s.jsxs("div",{style:Hr(L),children:[s.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px]",children:pe.quote.sender}),s.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] line-clamp-2",children:pe.quote.content})]}),pe.imageKey&&Gt[pe.imageKey]&&s.jsx("img",{src:Gt[pe.imageKey],alt:"",className:`max-w-[250px] max-h-[250px] rounded-lg ${pe.text&&pe.text!=="[]"?"mb-2":""}`,onLoad:Et}),pe.text&&pe.text!=="[]"&&s.jsxs("div",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] break-words relative",children:[pe.text,K==="inside"&&Je&&s.jsx("span",{className:"float-right text-[10px] opacity-70 ml-2 mt-1 select-none leading-none pt-2",children:$r(pe.timestamp)})]})]})}),Qe&&s.jsxs("div",{className:"flex flex-col items-start gap-0.5 ml-1 self-end",children:[s.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] text-[#999]",children:$r(pe.timestamp)}),s.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] text-[#999]",children:pe.isRead?"":""})]})]}),pe.senderId==="user"&&s.jsxs(s.Fragment,{children:[Qe&&s.jsxs("div",{className:"flex flex-col items-end gap-0.5 mr-1 self-end",children:[s.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] text-[#999]",children:$r(pe.timestamp)}),s.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[11px] text-[#999]",children:rt?"":""})]}),s.jsx("div",{style:pe.stickerId||pe.isPlaceholderImage||pe.redPacket||pe.imageKey&&(!pe.text||pe.text==="[]")?{}:Hr(H),onTouchStart:Xe=>xs(pe,Xe),onTouchEnd:In,onMouseDown:Xe=>xs(pe,Xe),onMouseUp:In,onMouseLeave:In,children:pe.stickerId&&vt[pe.stickerId]?s.jsx("img",{src:vt[pe.stickerId],alt:"",className:"max-w-[150px] max-h-[150px] rounded-lg",onLoad:Et}):pe.isPlaceholderImage?s.jsx("div",{className:"w-[250px] h-[180px] bg-[#f0f0f0] rounded-lg flex items-center justify-center px-6 py-4",children:s.jsxs("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] text-[#666] text-center",children:["[",pe.text,".jpg]"]})}):pe.redPacket?$n(pe.redPacket,pe):s.jsxs(s.Fragment,{children:[pe.quote&&s.jsxs("div",{style:Hr(S),children:[s.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px]",children:pe.quote.sender}),s.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] line-clamp-2",children:pe.quote.content})]}),pe.imageKey&&Gt[pe.imageKey]&&s.jsx("img",{src:Gt[pe.imageKey],alt:"",className:`max-w-[250px] max-h-[250px] rounded-lg ${pe.text&&pe.text!=="[]"?"mb-2":""}`,onLoad:Et}),pe.text&&pe.text!=="[]"&&s.jsxs("div",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] break-words relative",children:[pe.text,K==="inside"&&Je&&s.jsx("span",{className:"float-right text-[10px] opacity-70 ml-2 mt-1 select-none leading-none pt-2",children:$r(pe.timestamp)})]})]})}),s.jsx("div",{className:"w-9 h-9 rounded-full bg-[#f5f5f5] flex items-center justify-center overflow-hidden flex-shrink-0",children:v?s.jsx("img",{src:v,alt:"User",className:"w-full h-full object-cover"}):s.jsx(fs,{className:"w-5 h-5 text-[#999]",strokeWidth:2})})]})]})]})})},pe.id)})},`virtual-list-${Lt}`)}),ct&&s.jsxs("div",{className:"bg-white border-t border-[#e5e5e5] px-4 py-3 safe-area-inset-bottom flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("span",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] text-[#666]",children:[" ",pt.size," "]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:Vo,className:"px-4 py-2 rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] text-[#666] bg-[#f5f5f5] active:bg-[#e8e8e8] transition-colors",children:""}),s.jsx("button",{onClick:qr,disabled:pt.size===0,className:`px-4 py-2 rounded-lg font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] text-white transition-colors ${pt.size===0?"bg-[#ccc] cursor-not-allowed":"bg-red-500 active:opacity-80"}`,children:""})]})]}),!ct&&s.jsxs("div",{className:`px-3 py-2 safe-area-inset-bottom ${Q==="light-frosted"?"bg-white/20 backdrop-blur-md":Q==="dark-frosted"?"bg-black/20 backdrop-blur-md":W?"bg-[#121212]":"bg-white"}`,children:[je&&s.jsxs("div",{className:`mb-2 flex items-center justify-between p-2 rounded-lg ${Q==="light-frosted"?"bg-white/50":Q==="dark-frosted"?"bg-white/10":W?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("p",{className:`font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[12px] ${Q==="light-frosted"?"text-[#666]":Q==="dark-frosted"||W?"text-[#aaa]":"text-[#666]"}`,children:[" ",je.senderId==="user"?T:P]}),s.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] truncate ${Q==="light-frosted"?"text-[#333]":Q==="dark-frosted"||W?"text-white":"text-[#333]"}`,children:je.isPlaceholderImage||je.imageUrl||je.imageKey?"[]":je.stickerId?"[]":je.text})]}),s.jsx("button",{onClick:Ho,className:`ml-2 p-1 rounded transition-colors ${Q==="light-frosted"?"active:bg-white/60":Q==="dark-frosted"?"active:bg-white/10":W?"active:bg-[#2d2d2d]":"active:bg-[#e8e8e8]"}`,children:s.jsx(ft,{className:`w-4 h-4 ${Q==="light-frosted"?"text-[#666]":Q==="dark-frosted"||W?"text-[#aaa]":"text-[#666]"}`})})]}),tn&&s.jsxs("div",{className:`mb-2 flex items-start gap-2 p-2 rounded-lg ${Q==="light-frosted"?"bg-white/50":Q==="dark-frosted"?"bg-white/10":W?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,children:[s.jsx("img",{src:tn,alt:"",className:"w-20 h-20 object-cover rounded-lg"}),s.jsx("button",{onClick:handleCancelPendingImage,className:`ml-auto p-1 rounded transition-colors ${Q==="light-frosted"?"active:bg-white/60":Q==="dark-frosted"?"active:bg-white/10":W?"active:bg-[#2d2d2d]":"active:bg-[#e8e8e8]"}`,children:s.jsx(ft,{className:`w-4 h-4 ${Q==="light-frosted"?"text-[#666]":Q==="dark-frosted"||W?"text-[#aaa]":"text-[#666]"}`})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:id,disabled:ne,className:`w-10 h-10 flex items-center justify-center transition-opacity flex-shrink-0 ${ne?"opacity-40":"active:opacity-60"}`,children:s.jsxs("svg",{className:`w-5 h-5 ${Q==="light-frosted"?"text-[#333]":Q==="dark-frosted"||W?"text-white":"text-[#333]"}`,viewBox:"0 0 24 24",stroke:"currentColor",fill:"none",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M12 2L15 9L22 12L15 15L12 22L9 15L2 12L9 9Z"}),s.jsx("path",{d:"M20 1L20.7 3.3L23 4L20.7 4.7L20 7L19.3 4.7L17 4L19.3 3.3Z",fill:"currentColor"}),s.jsx("path",{d:"M4 17L4.5 18.5L6 19L4.5 19.5L4 21L3.5 19.5L2 19L3.5 18.5Z",fill:"currentColor"})]})}),s.jsx("div",{className:`flex-1 rounded-lg px-4 py-2 min-h-[40px] max-h-[100px] flex items-center ${Q==="light-frosted"?"bg-white/20":Q==="dark-frosted"?"bg-white/10":W?"bg-[#1e1e1e]":"bg-[#f5f5f5]"}`,children:s.jsx("textarea",{value:l,onChange:ke=>c(ke.target.value),onKeyPress:sd,onFocus:()=>{Dt(!1),dn(!1)},className:`w-full resize-none outline-none font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[15px] bg-transparent leading-normal ${Q==="light-frosted"?"text-[#333] placeholder:text-[#999]":Q==="dark-frosted"?"text-white placeholder:text-[#aaa]":W?"text-white placeholder:text-[#666]":"text-[#333] placeholder:text-[#999]"}`,rows:1,style:{maxHeight:"68px",overflowY:"auto"}})}),l.trim()===""?s.jsx("button",{onClick:()=>Dt(!$t),className:"w-10 h-10 flex items-center justify-center active:opacity-60 transition-opacity flex-shrink-0",children:s.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:Q==="light-frosted"?"#333":W?"white":"#333333",strokeWidth:"2.5",children:[s.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),s.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}):s.jsx("button",{onClick:Kr,className:"w-10 h-10 bg-[#7B9E7B] rounded-full flex items-center justify-center active:opacity-80 transition-opacity flex-shrink-0",children:s.jsx(g_,{className:"w-6 h-6 text-white",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),s.jsx(Be,{children:$t&&s.jsx(Se.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{type:"spring",stiffness:400,damping:30},className:`absolute bottom-[70px] right-3 rounded-xl shadow-lg z-[998] p-2 ${Q==="light-frosted"?"bg-white/20 backdrop-blur-xl border border-white/20":Q==="dark-frosted"?"bg-black/20 backdrop-blur-xl border border-white/10":W?"bg-[#1e1e1e]":"bg-white"}`,children:s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsx("button",{onClick:()=>{dn(!0),Dt(!1)},className:"p-0 bg-transparent border-none cursor-pointer",children:s.jsx("div",{className:`w-[50px] h-[50px] rounded-lg flex items-center justify-center transition-colors ${Q==="light-frosted"?"bg-white/20 hover:bg-white/30 active:bg-white/40":Q==="dark-frosted"?"bg-white/10 hover:bg-white/20 active:bg-white/30":W?"bg-[#1e1e1e] hover:bg-[#2d2d2d] active:bg-[#3d3d3d]":"bg-white hover:bg-[#f5f5f5] active:bg-[#e8e8e8]"}`,children:s.jsx(hE,{className:`w-[24px] h-[24px] ${Q==="light-frosted"?"text-[#333]":Q==="dark-frosted"||W?"text-white":"text-[#333]"}`,strokeWidth:2.5})})}),s.jsx(p7,{onImageSelect:ad,onError:ke=>{at({show:!0,message:ke}),setTimeout(()=>at({show:!1,message:""}),3e3)},children:s.jsx("button",{className:"p-0 bg-transparent border-none cursor-pointer",children:s.jsx("div",{className:`w-[50px] h-[50px] rounded-lg flex items-center justify-center transition-colors ${Q==="light-frosted"?"bg-white/20 hover:bg-white/30 active:bg-white/40":Q==="dark-frosted"?"bg-white/10 hover:bg-white/20 active:bg-white/30":W?"bg-[#1e1e1e] hover:bg-[#2d2d2d] active:bg-[#3d3d3d]":"bg-white hover:bg-[#f5f5f5] active:bg-[#e8e8e8]"}`,children:s.jsx(ba,{className:`w-[24px] h-[24px] ${Q==="light-frosted"?"text-[#333]":Q==="dark-frosted"||W?"text-white":"text-[#333]"}`,strokeWidth:2.5})})})}),s.jsx("button",{onClick:()=>{Dt(!1),Tn(!0)},className:"p-0 bg-transparent border-none cursor-pointer",children:s.jsx("div",{className:`w-[50px] h-[50px] rounded-lg flex items-center justify-center transition-colors ${Q==="light-frosted"?"bg-white/20 hover:bg-white/30 active:bg-white/40":Q==="dark-frosted"?"bg-white/10 hover:bg-white/20 active:bg-white/30":W?"bg-[#1e1e1e] hover:bg-[#2d2d2d] active:bg-[#3d3d3d]":"bg-white hover:bg-[#f5f5f5] active:bg-[#e8e8e8]"}`,children:s.jsx(Zh,{className:`w-[24px] h-[24px] ${Q==="light-frosted"?"text-[#333]":W?"text-white":"text-[#333]"}`,strokeWidth:2.5})})}),s.jsx("button",{onClick:()=>{mn(!0),Dt(!1)},className:"p-0 bg-transparent border-none cursor-pointer",children:s.jsx("div",{className:`w-[50px] h-[50px] rounded-lg flex items-center justify-center transition-colors ${Q==="light-frosted"?"bg-white/20 hover:bg-white/30 active:bg-white/40":Q==="dark-frosted"?"bg-white/10 hover:bg-white/20 active:bg-white/30":W?"bg-[#1e1e1e] hover:bg-[#2d2d2d] active:bg-[#3d3d3d]":"bg-white hover:bg-[#f5f5f5] active:bg-[#e8e8e8]"}`,children:s.jsx("svg",{className:`w-[22px] h-[22px] ${Q==="light-frosted"?"text-[#333]":W?"text-white":"text-[#333]"}`,viewBox:"80 80 864 864",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",strokeWidth:"20",children:s.jsx("path",{d:"M604.928 416.682667a425.856 425.856 0 0 0 205.952-111.872V170.794667h-597.333333v134.016a425.813333 425.813333 0 0 0 205.952 111.872 106.666667 106.666667 0 0 1 185.429333 0z m8.874667 85.333333a106.709333 106.709333 0 0 1-203.178667 0 509.482667 509.482667 0 0 1-197.12-85.973333v437.418666h597.333333V416a509.525333 509.525333 0 0 1-197.034666 86.016zM170.88 85.504h682.666667a42.666667 42.666667 0 0 1 42.666666 42.666667v768a42.666667 42.666667 0 0 1-42.666666 42.666666h-682.666667a42.666667 42.666667 0 0 1-42.666667-42.666666v-768a42.666667 42.666667 0 0 1 42.666667-42.666667z"})})})})]})})}),s.jsx(Be,{children:Dn&&s.jsx(h7,{onClose:()=>dn(!1),onSelect:Oo,theme:Q,isDarkMode:W})}),s.jsx(Be,{children:Kt&&s.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[s.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40",onClick:()=>Tn(!1)}),s.jsxs(Se.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[320px] shadow-xl ${Q==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":Q==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":W?"bg-[#1e1e1e] border border-[#2d2d2d] text-white shadow-xl":"bg-white text-[#333]"}`,children:[s.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-4 ${W?"text-white":"text-black"}`,children:""}),s.jsx("p",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] text-center mb-4 ${W?"text-[#aaa]":"text-[#666]"}`,children:""}),s.jsx("input",{type:"text",value:rn,onChange:ke=>Qt(ke.target.value),placeholder:"",className:`w-full px-4 py-3 rounded-xl border-none outline-none font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] mb-6 transition-colors ${Q==="light-frosted"?"bg-white/40 text-[#333] placeholder:text-[#999]":Q==="dark-frosted"?"bg-white/10 text-white placeholder:text-[#aaa]":W?"bg-[#2d2d2d] text-white placeholder:text-[#666]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999]"}`,autoFocus:!0,onKeyPress:ke=>{ke.key==="Enter"&&rn.trim()&&Gr()}}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{Tn(!1),Qt("")},className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors disabled:opacity-50 ${Q==="light-frosted"?"bg-white/40 text-[#666] hover:bg-white/60":Q==="dark-frosted"?"bg-white/10 text-white hover:bg-white/20":W?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),s.jsx("button",{onClick:Gr,disabled:!rn.trim(),className:"flex-1 py-2.5 rounded-xl bg-[#7B9E7B] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity disabled:opacity-50",children:""})]})]})]})}),s.jsx(Be,{children:Ms&&s.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[s.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40",onClick:()=>mn(!1)}),s.jsxs(Se.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[360px] shadow-xl ${Q==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":Q==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":W?"bg-[#1e1e1e] border border-[#2d2d2d] text-white shadow-xl":"bg-white text-[#333]"}`,children:[s.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-4 ${W?"text-white":"text-black"}`,children:""}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] mb-2 block ${W?"text-[#aaa]":"text-[#666]"}`,children:""}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:hr,onChange:ke=>{const Ne=ke.target.value;(Ne===""||/^\d+$/.test(Ne))&&Vr(Ne)},placeholder:"0",className:`w-full px-4 py-3 pr-16 rounded-xl border-none outline-none font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] transition-colors ${Q==="light-frosted"?"bg-white/40 text-[#333] placeholder:text-[#999]":Q==="dark-frosted"?"bg-white/10 text-white placeholder:text-[#aaa]":W?"bg-[#2d2d2d] text-white placeholder:text-[#666]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999]"}`,autoFocus:!0}),s.jsx("span",{className:`absolute right-4 top-1/2 -translate-y-1/2 font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] ${W?"text-[#aaa]":"text-[#999]"}`,children:""})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] mb-2 block ${W?"text-[#aaa]":"text-[#666]"}`,children:""}),s.jsx("input",{type:"text",value:Fo,onChange:ke=>Mi(ke.target.value),placeholder:"",maxLength:20,className:`w-full px-4 py-3 rounded-xl border-none outline-none font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] transition-colors ${Q==="light-frosted"?"bg-white/40 text-[#333] placeholder:text-[#999]":Q==="dark-frosted"?"bg-white/10 text-white placeholder:text-[#aaa]":W?"bg-[#2d2d2d] text-white placeholder:text-[#666]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999]"}`})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{mn(!1),Vr(""),Mi("")},className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors ${Q==="light-frosted"?"bg-white/40 text-[#666] hover:bg-white/60":Q==="dark-frosted"?"bg-white/10 text-white hover:bg-white/20":W?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),s.jsx("button",{onClick:rd,className:"flex-1 py-2.5 rounded-xl bg-[#ff6b6b] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity",children:""})]})]})]})}),s.jsx(Be,{children:me&&s.jsx("div",{className:"fixed inset-0 z-[70]",onClick:()=>{he(!1),X(null)},children:s.jsxs(Se.div,{initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:10},transition:{type:"spring",stiffness:400,damping:30},className:`absolute rounded-lg shadow-lg py-1 min-w-[120px] ${Q==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":Q==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20":W?"bg-[#1e1e1e] border border-[#2d2d2d] text-white shadow-xl":"bg-white text-[#333] shadow-lg"}`,style:{left:Math.min(ie.x,window.innerWidth-140),top:Math.min(ie.y,window.innerHeight-200)},onClick:ke=>ke.stopPropagation(),children:[J?.senderId!=="system"&&s.jsxs("button",{onClick:Ea,className:`w-full px-4 py-2.5 flex items-center gap-3 transition-colors ${Q==="light-frosted"?"hover:bg-white/40":Q==="dark-frosted"?"hover:bg-white/10":W?"hover:bg-[#2d2d2d]":"hover:bg-[#f5f5f5]"}`,children:[s.jsx(U_,{className:`w-4 h-4 ${W||Q==="dark-frosted"?"text-[#aaa]":"text-[#666]"}`}),s.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] ${W||Q==="dark-frosted"?"text-white":"text-[#333]"}`,children:""})]}),J?.senderId!=="system"&&s.jsxs("button",{onClick:$o,className:`w-full px-4 py-2.5 flex items-center gap-3 transition-colors ${Q==="light-frosted"?"hover:bg-white/40":Q==="dark-frosted"?"hover:bg-white/10":W?"hover:bg-[#2d2d2d]":"hover:bg-[#f5f5f5]"}`,children:[s.jsx(Q6,{className:`w-4 h-4 ${W||Q==="dark-frosted"?"text-[#aaa]":"text-[#666]"}`}),s.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] ${W||Q==="dark-frosted"?"text-white":"text-[#333]"}`,children:""})]}),J?.senderId!=="system"&&s.jsxs("button",{onClick:ld,className:`w-full px-4 py-2.5 flex items-center gap-3 transition-colors ${Q==="light-frosted"?"hover:bg-white/40":Q==="dark-frosted"?"hover:bg-white/10":W?"hover:bg-[#2d2d2d]":"hover:bg-[#f5f5f5]"}`,children:[s.jsx(H6,{className:`w-4 h-4 ${W||Q==="dark-frosted"?"text-[#aaa]":"text-[#666]"}`}),s.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] ${W||Q==="dark-frosted"?"text-white":"text-[#333]"}`,children:""})]}),s.jsxs("button",{onClick:Ii,className:`w-full px-4 py-2.5 flex items-center gap-3 transition-colors ${Q==="light-frosted"?"hover:bg-white/40":Q==="dark-frosted"?"hover:bg-white/10":W?"hover:bg-[#2d2d2d]":"hover:bg-[#f5f5f5]"}`,children:[s.jsx(kt,{className:`w-4 h-4 ${W||Q==="dark-frosted"?"text-[#aaa]":"text-[#666]"}`}),s.jsx("span",{className:`font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] ${W||Q==="dark-frosted"?"text-white":"text-[#333]"}`,children:""})]}),s.jsxs("button",{onClick:od,className:`w-full px-4 py-2.5 flex items-center gap-3 transition-colors ${Q==="light-frosted"?"hover:bg-white/40":Q==="dark-frosted"?"hover:bg-white/10":W?"hover:bg-[#2d2d2d]":"hover:bg-[#f5f5f5]"}`,children:[s.jsx(zn,{className:"w-4 h-4 text-red-500"}),s.jsx("span",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] text-red-500",children:""})]})]})})}),s.jsx(Be,{children:ye&&J&&s.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center p-4",children:[s.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40",onClick:bt}),s.jsxs(Se.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",stiffness:350,damping:30},className:`relative rounded-2xl p-6 w-full max-w-[360px] shadow-xl ${Q==="light-frosted"?"bg-white/60 backdrop-blur-xl border border-white/20 shadow-white/10":Q==="dark-frosted"?"bg-black/50 backdrop-blur-xl border border-white/10 shadow-black/20 text-white":W?"bg-[#1e1e1e] border border-[#2d2d2d] text-white shadow-xl":"bg-white text-[#333]"}`,children:[s.jsx("h3",{className:`font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[18px] text-center mb-4 ${W?"text-white":"text-black"}`,children:""}),s.jsx("textarea",{value:Ce,onChange:ke=>_e(ke.target.value),className:`w-full px-4 py-3 rounded-xl border-none outline-none font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[14px] resize-none mb-6 transition-colors ${Q==="light-frosted"?"bg-white/40 text-[#333] placeholder:text-[#999]":Q==="dark-frosted"?"bg-white/10 text-white placeholder:text-[#aaa]":W?"bg-[#2d2d2d] text-white placeholder:text-[#666]":"bg-[#f5f5f5] text-[#333] placeholder:text-[#999]"}`,rows:4,autoFocus:!0,placeholder:""}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:bt,className:`flex-1 py-2.5 rounded-xl font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] transition-colors ${Q==="light-frosted"?"bg-white/40 text-[#666] hover:bg-white/60":Q==="dark-frosted"?"bg-white/10 text-white hover:bg-white/20":W?"bg-[#2d2d2d] text-[#aaa] hover:bg-[#3d3d3d] active:bg-[#4d4d4d]":"bg-[#f0f0f0] text-[#666] hover:bg-[#e8e8e8] active:bg-[#e0e0e0]"}`,children:""}),s.jsx("button",{onClick:Fi,className:"flex-1 py-2.5 rounded-xl bg-[#7B9E7B] font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] text-white hover:opacity-90 active:opacity-80 transition-opacity",children:""})]})]})]})}),s.jsx(Be,{children:Oe.show&&s.jsx(Se.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},transition:{type:"spring",stiffness:400,damping:30},className:"fixed top-16 left-1/2 -translate-x-1/2 z-[80] px-4 w-full max-w-[90vw]",children:s.jsx("div",{className:"bg-[#ff3b30] rounded-[12px] px-5 py-4 shadow-lg max-w-md mx-auto max-h-[60vh] overflow-y-auto",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-white/20 flex items-center justify-center mt-0.5",children:s.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] text-white mb-1",children:""}),s.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Regular',sans-serif] text-[13px] text-white/90 leading-relaxed break-words whitespace-pre-wrap",children:Oe.message})]})]})})})}),s.jsx(Be,{children:Nt&&Nt.redPacket&&s.jsxs("div",{className:"fixed inset-0 z-[1300] flex items-center justify-center",children:[s.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},style:{backgroundColor:"rgba(0,0,0,0.5)"},className:"absolute inset-0",onClick:()=>Na(null)}),s.jsxs(Se.div,{initial:{scale:.9,opacity:0,y:10},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"bg-[#ea5e4f] w-[320px] rounded-[8px] overflow-hidden relative shadow-2xl z-10",onClick:ke=>ke.stopPropagation(),children:[s.jsx("button",{onClick:()=>Na(null),className:"absolute top-3 left-3 z-10 text-white/70 hover:text-white active:opacity-50 transition-colors",children:s.jsx(ft,{size:20})}),s.jsxs("div",{className:"pt-12 pb-8 px-6 flex flex-col items-center text-white relative",children:[s.jsx("div",{className:"absolute top-[-100px] w-[500px] h-[300px] bg-[#d95345] rounded-[50%] -z-0"}),s.jsx("div",{className:"w-16 h-16 rounded-full border-2 border-[#fcdb9a] bg-white p-0.5 mb-3 z-10 shadow-md",children:s.jsx("div",{className:"w-full h-full rounded-full overflow-hidden bg-gray-100",children:Nt.senderId==="user"?v?s.jsx("img",{src:v,alt:"User",className:"w-full h-full object-cover"}):s.jsx(fs,{className:"w-full h-full p-3 text-gray-400"}):k?s.jsx("img",{src:k,alt:"Character",className:"w-full h-full object-cover"}):s.jsx(fs,{className:"w-full h-full p-3 text-gray-400"})})}),s.jsxs("h3",{className:"text-[16px] font-medium mb-1 tracking-wide z-10",children:[Nt.senderId==="character"?P:Nt.senderName,""]}),s.jsx("p",{className:"text-[14px] opacity-80 mb-12 tracking-wide z-10",children:Nt.redPacket.blessing}),s.jsxs("div",{className:"z-10 flex flex-col items-center",children:[s.jsxs("div",{className:"text-[48px] font-bold leading-none tracking-tighter text-[#fcdb9a] mb-3 flex items-baseline gap-1",children:[s.jsx("span",{children:Nt.redPacket.amount.toLocaleString()}),s.jsx("span",{className:"text-[14px] font-normal tracking-normal opacity-80",children:""})]}),s.jsx("div",{className:"text-[12px] text-[#fcdb9a]/80 tracking-wide flex items-center gap-1",children:s.jsx("span",{children:Nt.senderId==="user"?Nt.redPacket.opened?"":"":""})})]})]}),s.jsxs("div",{className:"bg-white px-4 py-4 min-h-[80px]",children:[s.jsx("div",{className:"border-b border-gray-100 pb-2 mb-2",children:s.jsxs("p",{className:"text-[12px] text-gray-400 tracking-wide",children:["1",Nt.redPacket.amount,""]})}),Nt.redPacket.opened||Nt.senderId!=="user"?s.jsxs("div",{className:"flex items-center justify-between py-2",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 overflow-hidden flex-shrink-0",children:Nt.senderId==="user"?k?s.jsx("img",{src:k,alt:"Receiver",className:"w-full h-full object-cover"}):s.jsx(fs,{className:"w-full h-full p-2 text-gray-400"}):v?s.jsx("img",{src:v,alt:"Receiver",className:"w-full h-full object-cover"}):s.jsx(fs,{className:"w-full h-full p-2 text-gray-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[14px] text-[#333] font-medium leading-tight",children:Nt.senderId==="user"?P:T}),s.jsx("p",{className:"text-[12px] text-gray-400 mt-0.5",children:$r(Nt.timestamp)})]})]}),s.jsx("div",{className:"text-right",children:s.jsxs("p",{className:"text-[14px] text-[#333] font-medium",children:[Nt.redPacket.amount.toLocaleString()," "]})})]}):s.jsx("div",{className:"py-8 text-center text-gray-400 text-[13px]",children:"..."})]})]})]})}),s.jsx(Be,{children:O&&s.jsx(d7,{characterId:e,characterName:t,onClose:Ri,onUpdate:()=>{},onDelete:n},"chat-settings")})]})}const b7={initial:{x:"100%"},animate:{x:0},exit:{x:"100%",zIndex:61}};function y7({onClose:e,initialChatId:t,onChatChange:n}){const[a,i]=C.useState(t||null),[l,c]=C.useState(""),[d,u]=C.useState(0),[m,p]=C.useState(()=>Fe.chatSettings?.darkMode||!1);C.useEffect(()=>{const x=()=>{p(Fe.chatSettings?.darkMode||!1)};return window.addEventListener("chat-settings-updated",x),()=>window.removeEventListener("chat-settings-updated",x)},[]),C.useEffect(()=>{if(t){i(t);const x=Zf(t,"");c(x)}},[t]);const h=(x,v)=>{i(x),c(v),n?.(x)},g=()=>{i(null),c(""),u(x=>x+1),n?.(null)};return s.jsxs("div",{className:`relative w-full h-full ${m?"bg-[#121212]":"bg-white"} overflow-hidden`,children:[s.jsx("div",{className:"absolute inset-0 w-full h-full",children:s.jsx(N8,{onClose:e,onOpenChat:h},d)}),s.jsx(Be,{children:a&&s.jsx(Se.div,{variants:b7,initial:"initial",animate:"animate",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"absolute inset-0 z-[60] w-full h-full bg-transparent",children:s.jsx(x7,{characterId:a,characterName:l,onClose:g})},"chat")})]})}const zx={shareEnabled:!1,shareScope:"all",shareCharacterId:""};function v7({onClose:e,onNavigate:t}){const[n,a]=C.useState(!1),[i,l]=C.useState(!1),[c,d]=C.useState(!1),[u,m]=C.useState(zx),[p,h]=C.useState([]),[g,x]=C.useState(!1);C.useEffect(()=>{v(),y()},[]);const v=async()=>{try{const w=await ue.get(te.HEALTH,"health_settings");w&&m({...zx,...w})}catch(w){console.error("Failed to load health settings",w)}},y=async()=>{try{const w=await ue.get(te.CHARACTERS,"characters");w&&h(w)}catch(w){console.error("Failed to load characters",w)}},k=async()=>{try{await ue.set(te.HEALTH,"health_settings",u),a(!1),l(!0),setTimeout(()=>l(!1),2e3)}catch{d(!0),setTimeout(()=>d(!1),2e3)}};return s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10",children:[s.jsx("button",{onClick:e,className:"w-10 h-10 bg-white/40 backdrop-blur-md border border-white/40 rounded-2xl flex items-center justify-center text-[#6B7C93] transition-transform active:scale-90 active:bg-white/60",children:s.jsx(On,{className:"w-5 h-5",strokeWidth:2.5})}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("span",{className:"text-[11px] font-bold text-[#9FA8DA] tracking-[0.2em] uppercase mb-0.5",children:"Health Care"}),s.jsx("h1",{className:"text-lg font-black text-[#5C6B7F] tracking-wide",children:""})]}),s.jsx("button",{onClick:()=>a(!0),className:"w-10 h-10 bg-white/40 backdrop-blur-md border border-white/40 rounded-2xl flex items-center justify-center text-[#6B7C93] transition-transform active:scale-90 active:bg-white/60",children:s.jsx(ev,{className:"w-5 h-5",strokeWidth:2.5})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[s.jsxs("div",{className:"text-center mb-8 relative",children:[s.jsx("div",{className:"inline-flex items-center justify-center p-4 rounded-3xl bg-white/30 backdrop-blur-sm border border-white/40 mb-4",children:s.jsx(Yh,{className:"w-8 h-8 text-[#88B04B]"})}),s.jsxs("p",{className:"text-sm text-[#7D8CA3] font-medium leading-relaxed max-w-[280px] mx-auto",children:["",s.jsx("br",{}),""]})]}),s.jsxs("div",{className:"grid gap-5",children:[s.jsxs("button",{onClick:()=>t("sleep"),className:"group relative bg-white/40 backdrop-blur-md border border-white/50 p-6 rounded-[2rem] text-left transition-transform active:scale-[0.96] overflow-hidden",children:[s.jsx("div",{className:"absolute top-[-20%] right-[-10%] w-32 h-32 bg-[#E6E6FA] rounded-full filter blur-[40px] opacity-60"}),s.jsxs("div",{className:"relative z-10 flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"w-12 h-12 bg-[#E6E6FA] text-[#6A5ACD] flex items-center justify-center rounded-2xl mb-4",children:s.jsx(Jy,{className:"w-6 h-6 fill-current"})}),s.jsx("h3",{className:"text-xl font-black text-[#5C6B7F] mb-1",children:""}),s.jsxs("p",{className:"text-xs text-[#8E9CB3] font-medium",children:["",s.jsx("br",{}),""]})]}),s.jsx("div",{className:"w-8 h-8 rounded-full bg-white/40 flex items-center justify-center text-[#B39EB5]",children:s.jsx(On,{className:"w-5 h-5 rotate-180"})})]})]}),s.jsxs("button",{onClick:()=>t("cycle"),className:"group relative bg-white/40 backdrop-blur-md border border-white/50 p-6 rounded-[2rem] text-left transition-transform active:scale-[0.96] overflow-hidden",children:[s.jsx("div",{className:"absolute top-[-20%] right-[-10%] w-32 h-32 bg-[#FFD1DC] rounded-full filter blur-[40px] opacity-60"}),s.jsxs("div",{className:"relative z-10 flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"w-12 h-12 bg-[#FFD1DC] text-[#E57373] flex items-center justify-center rounded-2xl mb-4",children:s.jsx(Zy,{className:"w-6 h-6"})}),s.jsx("h3",{className:"text-xl font-black text-[#5C6B7F] mb-1",children:""}),s.jsxs("p",{className:"text-xs text-[#8E9CB3] font-medium",children:["",s.jsx("br",{}),""]})]}),s.jsx("div",{className:"w-8 h-8 rounded-full bg-white/40 flex items-center justify-center text-[#FFB7B2]",children:s.jsx(On,{className:"w-5 h-5 rotate-180"})})]})]}),s.jsxs("button",{onClick:()=>t("diagnosis"),className:"group relative bg-white/40 backdrop-blur-md border border-white/50 p-6 rounded-[2rem] text-left transition-transform active:scale-[0.96] overflow-hidden",children:[s.jsx("div",{className:"absolute top-[-20%] right-[-10%] w-32 h-32 bg-[#C1E1C1] rounded-full filter blur-[40px] opacity-60"}),s.jsxs("div",{className:"relative z-10 flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"w-12 h-12 bg-[#C1E1C1] text-[#6B8E23] flex items-center justify-center rounded-2xl mb-4",children:s.jsx(nv,{className:"w-6 h-6"})}),s.jsx("h3",{className:"text-xl font-black text-[#5C6B7F] mb-1",children:""}),s.jsxs("p",{className:"text-xs text-[#8E9CB3] font-medium",children:["",s.jsx("br",{}),""]})]}),s.jsx("div",{className:"w-8 h-8 rounded-full bg-white/40 flex items-center justify-center text-[#8FBC8F]",children:s.jsx(On,{className:"w-5 h-5 rotate-180"})})]})]})]})]}),s.jsx(Be,{children:n&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6",children:[s.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>a(!1),className:"absolute inset-0 bg-[#5C6B7F]/20 backdrop-blur-sm"}),s.jsxs(Se.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:300,damping:25},className:"bg-[#FDFBF7]/95 backdrop-blur-xl w-full max-w-[320px] rounded-[2rem] border border-white/50 shadow-md relative z-10",children:[s.jsxs("div",{className:"bg-white/40 border-b border-white/50 p-6 flex justify-between items-center rounded-t-[2rem]",children:[s.jsx("span",{className:"text-lg font-black tracking-wide text-[#5C6B7F]",children:""}),s.jsx("button",{onClick:()=>a(!1),className:"bg-white/40 p-1 rounded-full text-[#7D8CA3] active:bg-white/60 transition-colors",children:s.jsx(ft,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-bold text-[#5C6B7F]",children:""}),s.jsx("p",{className:"text-[10px] text-[#9FA8DA] mt-1",children:""})]}),s.jsx("button",{onClick:()=>m({...u,shareEnabled:!u.shareEnabled}),className:`w-12 h-7 rounded-full transition-colors relative ${u.shareEnabled?"bg-[#AEC6CF]":"bg-gray-200"}`,children:s.jsx(Se.div,{layout:!0,className:"absolute top-1 left-1 w-5 h-5 bg-white rounded-full shadow-sm",animate:{x:u.shareEnabled?20:0},transition:{type:"spring",stiffness:500,damping:30}})})]}),s.jsx(Be,{children:u.shareEnabled&&s.jsxs(Se.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4 pt-4 border-t border-[#7D8CA3]/10 overflow-hidden",children:[s.jsx("label",{className:"text-xs font-bold text-[#7D8CA3] uppercase tracking-wider block mb-2",children:""}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("button",{onClick:()=>m({...u,shareScope:"all"}),className:`p-3 rounded-2xl border flex flex-col items-center gap-2 transition-all ${u.shareScope==="all"?"bg-[#AEC6CF]/10 border-[#AEC6CF] text-[#5C6B7F]":"bg-white/40 border-transparent text-[#9FA8DA]"}`,children:[s.jsx(Uc,{className:"w-5 h-5"}),s.jsx("span",{className:"text-xs font-bold",children:""})]}),s.jsxs("button",{onClick:()=>m({...u,shareScope:"specific"}),className:`p-3 rounded-2xl border flex flex-col items-center gap-2 transition-all ${u.shareScope==="specific"?"bg-[#AEC6CF]/10 border-[#AEC6CF] text-[#5C6B7F]":"bg-white/40 border-transparent text-[#9FA8DA]"}`,children:[s.jsx(fs,{className:"w-5 h-5"}),s.jsx("span",{className:"text-xs font-bold",children:""})]})]}),u.shareScope==="specific"&&s.jsxs("div",{className:"relative mt-2",children:[s.jsxs("button",{onClick:()=>x(!g),className:"w-full bg-white/50 border border-white/60 px-4 py-3 rounded-2xl text-xs font-bold text-[#5C6B7F] flex items-center justify-between active:bg-white/70 transition-colors",children:[s.jsx("div",{className:"flex items-center gap-2 pl-1",children:s.jsx("span",{children:p.find(w=>w.id===u.shareCharacterId)?.name||""})}),s.jsx(Ys,{className:`w-4 h-4 transition-transform ${g?"rotate-90":""}`})]}),s.jsx(Be,{children:g&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>x(!1)}),s.jsxs(Se.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},className:"absolute top-full left-0 right-0 mt-2 bg-white/90 backdrop-blur-xl border border-white/60 rounded-2xl shadow-lg z-20 max-h-48 overflow-y-auto p-1",children:[p.length===0&&s.jsx("div",{className:"p-3 text-center text-[10px] text-[#9FA8DA]",children:""}),p.map(w=>s.jsx("button",{onClick:()=>{m({...u,shareCharacterId:w.id}),x(!1)},className:`w-full text-left px-4 py-3 rounded-xl text-xs font-bold flex items-center gap-2 mb-1 ${u.shareCharacterId===w.id?"bg-[#AEC6CF]/20 text-[#5C6B7F]":"hover:bg-black/5 text-[#7D8CA3]"}`,children:w.name},w.id))]})]})})]})]})}),s.jsxs("button",{onClick:k,className:"w-full bg-[#AEC6CF] text-white py-3.5 rounded-2xl font-bold text-xs uppercase tracking-widest shadow-md shadow-[#AEC6CF]/30 active:scale-[0.98] transition-transform flex items-center justify-center gap-2 mt-4",children:[s.jsx(kt,{className:"w-4 h-4"}),""]})]})]})]})}),s.jsx(Be,{children:i&&s.jsx("div",{className:"fixed top-[90px] inset-x-0 z-[100] flex justify-center pointer-events-none",children:s.jsxs(Se.div,{initial:{scale:.9,opacity:0,y:-10},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},className:"mx-auto w-fit flex items-center gap-2 px-4 py-3 pointer-events-auto",style:{background:"rgba(253, 251, 247, 0.85)",backdropFilter:"blur(12px)",border:"1px solid rgba(255, 255, 255, 0.6)",borderRadius:"20px",color:"#5C6B7F",boxShadow:"0 10px 40px -10px rgba(92, 107, 127, 0.15)",fontSize:"13px",fontWeight:"bold"},children:[s.jsx("div",{className:"w-5 h-5 rounded-full bg-[#AEC6CF] flex items-center justify-center text-white",children:s.jsx(kt,{className:"w-3 h-3",strokeWidth:3})}),s.jsx("span",{children:""})]})})}),s.jsx(Be,{children:c&&s.jsx("div",{className:"fixed top-[90px] inset-x-0 z-[100] flex justify-center pointer-events-none",children:s.jsxs(Se.div,{initial:{scale:.9,opacity:0,y:-10},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},className:"mx-auto w-fit flex items-center gap-2 px-4 py-3 pointer-events-auto",style:{background:"rgba(253, 251, 247, 0.85)",backdropFilter:"blur(12px)",border:"1px solid rgba(255, 255, 255, 0.6)",borderRadius:"20px",color:"#5C6B7F",boxShadow:"0 10px 40px -10px rgba(92, 107, 127, 0.15)",fontSize:"13px",fontWeight:"bold"},children:[s.jsx("div",{className:"w-5 h-5 rounded-full bg-[#E57373] flex items-center justify-center text-white",children:s.jsx(ft,{className:"w-3 h-3",strokeWidth:3})}),s.jsx("span",{children:""})]})})})]})}function w7({onBack:e}){const[t,n]=C.useState([]),[a,i]=C.useState(""),[l,c]=C.useState(""),[d,u]=C.useState("good"),[m,p]=C.useState(null),h=(k,w)=>{p({show:!0,type:k,message:w}),setTimeout(()=>p(null),2e3)};C.useEffect(()=>{g()},[]);const g=async()=>{try{const k=await ue.get(te.HEALTH,"sleep_logs");if(k&&k.length>0){const _=new Date().toDateString(),N=k.find(T=>new Date(T.endTime).toDateString()===_);if(N){n([N]);const T=new Date(N.startTime),B=new Date(N.endTime),O=T.getHours().toString().padStart(2,"0"),$=T.getMinutes().toString().padStart(2,"0");i(`${O}:${$}`);const P=B.getHours().toString().padStart(2,"0"),A=B.getMinutes().toString().padStart(2,"0");c(`${P}:${A}`),u(N.quality),(k.length>1||!k.includes(N))&&await ue.set(te.HEALTH,"sleep_logs",[N])}else n([]),await ue.set(te.HEALTH,"sleep_logs",[])}}catch(k){console.error("Failed to load sleep logs",k)}},x=(k,w)=>{const _=k.replace(/\D/g,"");if(_.length<=4)if(_.length>=3){const N=_.slice(0,2),T=_.slice(2);if(parseInt(N)>23||parseInt(T)>59)return;w(`${N}:${T}`)}else w(_)},v=async()=>{if(a.length!==5||l.length!==5){h("error"," ( 23:00)");return}const k=new Date;k.setSeconds(0),k.setMilliseconds(0);const[w,_]=l.split(":").map(Number),N=new Date(k);N.setHours(w,_,0,0);const[T,B]=a.split(":").map(Number),O=new Date(k);O.setHours(T,B,0,0),O>N&&O.setDate(O.getDate()-1);const $={id:Date.now().toString(),startTime:O.toISOString(),endTime:N.toISOString(),quality:d,createdAt:new Date().toISOString()};try{const P=[$];await ue.set(te.HEALTH,"sleep_logs",P),n(P),h("success","")}catch{h("error","")}},y=async()=>{if(confirm(""))try{await ue.set(te.HEALTH,"sleep_logs",[]),n([]),i(""),c(""),u("good"),h("success","")}catch{h("error","")}};return s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10",children:[s.jsx("button",{onClick:e,className:"w-10 h-10 bg-white/40 backdrop-blur-md border border-white/40 rounded-2xl flex items-center justify-center text-[#6B7C93] transition-transform active:scale-90 active:bg-white/60",children:s.jsx(On,{className:"w-5 h-5",strokeWidth:2.5})}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("span",{className:"text-[11px] font-bold text-[#9FA8DA] tracking-[0.2em] uppercase mb-0.5",children:"Sleep Log"}),s.jsx("h1",{className:"text-lg font-black text-[#5C6B7F] tracking-wide",children:""})]}),s.jsx("div",{className:"w-10"})," "]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:s.jsxs("div",{className:"bg-white/60 backdrop-blur-md border border-white/60 p-6 rounded-[2rem] shadow-sm",children:[s.jsxs("h3",{className:"text-xs font-bold text-[#9FA8DA] uppercase tracking-widest mb-6 flex items-center gap-2",children:[s.jsx(No,{className:"w-4 h-4"})," "]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-bold text-[#7D8CA3] uppercase tracking-wider pl-1",children:" (HH:MM)"}),s.jsx("input",{type:"tel",placeholder:"2300",value:a,onChange:k=>x(k.target.value,i),maxLength:5,className:"w-full bg-white/50 border border-white/60 text-center py-4 rounded-2xl text-lg font-mono font-bold text-[#5C6B7F] placeholder:text-[#D1D5DB] focus:border-[#AEC6CF] focus:outline-none focus:ring-2 focus:ring-[#AEC6CF]/20"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-bold text-[#7D8CA3] uppercase tracking-wider pl-1",children:" (HH:MM)"}),s.jsx("input",{type:"tel",placeholder:"0730",value:l,onChange:k=>x(k.target.value,c),maxLength:5,className:"w-full bg-white/50 border border-white/60 text-center py-4 rounded-2xl text-lg font-mono font-bold text-[#5C6B7F] placeholder:text-[#D1D5DB] focus:border-[#AEC6CF] focus:outline-none focus:ring-2 focus:ring-[#AEC6CF]/20"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-bold text-[#7D8CA3] uppercase tracking-wider pl-1",children:""}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("button",{type:"button",onClick:()=>u("good"),className:`py-3 rounded-2xl flex flex-col items-center gap-1 transition-all active:scale-95 ${d==="good"?"bg-[#E0F2F1] text-[#4DB6AC] shadow-inner ring-1 ring-[#4DB6AC]/20":"bg-white/40 text-[#B0BEC5] hover:bg-white/60"}`,children:[s.jsx(BE,{className:"w-5 h-5"}),s.jsx("span",{className:"text-[10px] font-bold",children:""})]}),s.jsxs("button",{type:"button",onClick:()=>u("average"),className:`py-3 rounded-2xl flex flex-col items-center gap-1 transition-all active:scale-95 ${d==="average"?"bg-[#FFF3E0] text-[#FFB74D] shadow-inner ring-1 ring-[#FFB74D]/20":"bg-white/40 text-[#B0BEC5] hover:bg-white/60"}`,children:[s.jsx(R6,{className:"w-5 h-5"}),s.jsx("span",{className:"text-[10px] font-bold",children:""})]}),s.jsxs("button",{type:"button",onClick:()=>u("poor"),className:`py-3 rounded-2xl flex flex-col items-center gap-1 transition-all active:scale-95 ${d==="poor"?"bg-[#FFEBEE] text-[#E57373] shadow-inner ring-1 ring-[#E57373]/20":"bg-white/40 text-[#B0BEC5] hover:bg-white/60"}`,children:[s.jsx(FE,{className:"w-5 h-5"}),s.jsx("span",{className:"text-[10px] font-bold",children:""})]})]})]}),s.jsxs("button",{onClick:v,className:"w-full bg-[#AEC6CF] text-white py-4 font-bold text-sm tracking-widest uppercase rounded-2xl shadow-md shadow-[#AEC6CF]/30 active:scale-[0.98] transition-transform flex items-center justify-center gap-2",children:[s.jsx(kt,{className:"w-5 h-5"}),t.length>0?"":""]}),t.length>0&&s.jsxs("button",{onClick:y,className:"w-full bg-[#FFEBEE] text-[#E57373] py-4 font-bold text-sm tracking-widest uppercase rounded-2xl shadow-sm active:scale-[0.98] transition-transform flex items-center justify-center gap-2",children:[s.jsx(zn,{className:"w-5 h-5"}),""]})]})]})}),s.jsx(Be,{children:m&&m.show&&s.jsx("div",{className:"fixed top-[90px] inset-x-0 z-[100] flex justify-center pointer-events-none",children:s.jsxs(Se.div,{initial:{scale:.9,opacity:0,y:-10},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},className:"mx-auto w-fit flex items-center gap-2 px-4 py-3 pointer-events-auto",style:{background:"rgba(253, 251, 247, 0.85)",backdropFilter:"blur(12px)",border:"1px solid rgba(255, 255, 255, 0.6)",borderRadius:"20px",color:"#5C6B7F",boxShadow:"0 10px 40px -10px rgba(92, 107, 127, 0.15)",fontSize:"13px",fontWeight:"bold"},children:[s.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-white ${m.type==="success"?"bg-[#AEC6CF]":"bg-[#E57373]"}`,children:m.type==="success"?s.jsx(kt,{className:"w-3 h-3",strokeWidth:3}):s.jsx(ft,{className:"w-3 h-3",strokeWidth:3})}),s.jsx("span",{children:m.message})]})})})]})}const mf={cycleLength:28,periodLength:5};function S7({onBack:e}){const[t,n]=C.useState([]),[a,i]=C.useState(mf),[l,c]=C.useState(!1),[d,u]=C.useState(!1),[m,p]=C.useState(new Date),[h,g]=C.useState(""),[x,v]=C.useState(mf),[y,k]=C.useState(null),w=(D,S)=>{k({show:!0,type:D,message:S}),setTimeout(()=>k(null),2e3)};C.useEffect(()=>{_()},[]);const _=async()=>{try{const D=await ue.get(te.HEALTH,"cycle_logs"),S=await ue.get(te.HEALTH,"cycle_settings");if(D&&n(D.sort((z,L)=>new Date(L.startDate).getTime()-new Date(z.startDate).getTime())),S){const z={...mf,...S};i(z),v(z)}}catch(D){console.error("Failed to load cycle data",D)}},N=()=>{g(new Date().toISOString().split("T")[0]),c(!0)},T=async()=>{if(!h)return;if(t.some(z=>z.startDate===h)){w("error","");return}const S=[{id:Date.now().toString(),startDate:h},...t].sort((z,L)=>new Date(L.startDate).getTime()-new Date(z.startDate).getTime());try{await ue.set(te.HEALTH,"cycle_logs",S),n(S),c(!1),w("success","")}catch{w("error","")}},B=async D=>{if(confirm(""))try{const S=t.filter(z=>z.id!==D);await ue.set(te.HEALTH,"cycle_logs",S),n(S),w("success","")}catch{w("error","")}},O=async()=>{try{await ue.set(te.HEALTH,"cycle_settings",x),i(x),u(!1),w("success","")}catch{w("error","")}},$=D=>new Date(D.getFullYear(),D.getMonth()+1,0).getDate(),P=D=>new Date(D.getFullYear(),D.getMonth(),1).getDay(),A=D=>{const S=new Date(m.getFullYear(),m.getMonth()+D,1);p(S)},H=D=>{const S=new Date(m.getFullYear(),m.getMonth(),D);S.getTime();for(const z of t){const L=new Date(z.startDate);L.setHours(12,0,0,0),S.setHours(12,0,0,0);const F=S.getTime()-L.getTime(),K=Math.round(F/(1e3*60*60*24));if(K>=0&&K<a.periodLength)return{type:"recorded",dayIndex:K}}if(t.length>0){const z=t[0],L=new Date(z.startDate);L.setHours(12,0,0,0),S.setHours(12,0,0,0);const K=(S.getTime()-L.getTime())/(1e3*60*60*24);if(K<0)return null;const G=Math.floor(K/a.cycleLength),Z=R=>{if(R<=0)return!1;const V=new Date(L);V.setDate(L.getDate()+R*a.cycleLength);const ee=S.getTime()-V.getTime(),W=Math.round(ee/(1e3*60*60*24));return W>=0&&W<a.periodLength};if(Z(G)||Z(G+1))return{type:"predicted"}}return null},E=Cv(t,a);return s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10",children:[s.jsx("button",{onClick:e,className:"w-10 h-10 bg-white/40 backdrop-blur-md border border-white/40 rounded-2xl flex items-center justify-center text-[#6B7C93] transition-transform active:scale-90 active:bg-white/60",children:s.jsx(On,{className:"w-5 h-5",strokeWidth:2.5})}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("span",{className:"text-[11px] font-bold text-[#9FA8DA] tracking-[0.2em] uppercase mb-0.5",children:"Cycle Log"}),s.jsx("h1",{className:"text-lg font-black text-[#5C6B7F] tracking-wide",children:""})]}),s.jsx("button",{onClick:()=>u(!0),className:"w-10 h-10 bg-white/40 backdrop-blur-md border border-white/40 rounded-2xl flex items-center justify-center text-[#6B7C93] transition-transform active:scale-90 active:bg-white/60",children:s.jsx(Hc,{className:"w-5 h-5",strokeWidth:2.5})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[s.jsxs("div",{className:"bg-white/40 backdrop-blur-md border border-white/50 p-6 rounded-[2rem]",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("button",{onClick:()=>A(-1),className:"p-2 text-[#7D8CA3] active:bg-white/40 rounded-xl transition-colors",children:s.jsx(On,{className:"w-5 h-5"})}),s.jsxs("h2",{className:"text-lg font-black text-[#5C6B7F]",children:[m.getFullYear()," ",m.getMonth()+1,""]}),s.jsx("button",{onClick:()=>A(1),className:"p-2 text-[#7D8CA3] active:bg-white/40 rounded-xl transition-colors",children:s.jsx(Ys,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"grid grid-cols-7 mb-4",children:["","","","","","",""].map((D,S)=>s.jsx("div",{className:"text-center text-xs font-bold text-[#9FA8DA]",children:D},S))}),s.jsxs("div",{className:"grid grid-cols-7 gap-y-4",children:[Array.from({length:P(m)}).map((D,S)=>s.jsx("div",{},`empty-${S}`)),Array.from({length:$(m)}).map((D,S)=>{const z=S+1,L=H(z),F=new Date().toDateString()===new Date(m.getFullYear(),m.getMonth(),z).toDateString();let K="",G="text-[#7D8CA3]";return L?.type==="recorded"?(K="bg-[#FFB7B2] shadow-sm",G="text-white font-bold"):L?.type==="predicted"?(K="bg-[#FFEBEE] border-2 border-dashed border-[#FFB7B2]",G="text-[#E57373] font-bold"):F&&(K="bg-white shadow-sm",G="text-[#5C6B7F] font-bold"),s.jsx("div",{className:"flex flex-col items-center justify-center relative",children:s.jsx("div",{className:`
                          w-8 h-8 flex items-center justify-center rounded-full text-sm font-medium transition-all
                          ${K} ${G}
                       `,children:z})},z)})]}),s.jsxs("div",{className:"flex justify-center gap-6 mt-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-[#FFB7B2]"}),s.jsx("span",{className:"text-[10px] text-[#7D8CA3]",children:""})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-[#FFEBEE] border border-dashed border-[#FFB7B2]"}),s.jsx("span",{className:"text-[10px] text-[#7D8CA3]",children:""})]})]})]}),s.jsxs("div",{className:"relative bg-gradient-to-br from-[#FFD1DC] to-[#FFB7B2] p-8 rounded-[2.5rem] text-center overflow-hidden shadow-md",children:[s.jsx("div",{className:"absolute top-[-20%] right-[-20%] w-48 h-48 bg-white/20 rounded-full blur-[40px] pointer-events-none"}),s.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-32 h-32 bg-[#E57373]/10 rounded-full blur-[30px] pointer-events-none mix-blend-overlay"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"w-16 h-16 mx-auto bg-white/30 backdrop-blur-sm rounded-full flex items-center justify-center mb-4 border border-white/40",children:s.jsx(Zy,{className:"w-8 h-8 text-white drop-shadow-sm"})}),E.type==="none"?s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-black text-white mb-1 tracking-wide drop-shadow-sm",children:""}),s.jsx("p",{className:"text-xs text-white/80 font-medium",children:""})]}):E.type==="period"?s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-black text-white mb-1 tracking-wide drop-shadow-sm",children:E.message}),s.jsxs("p",{className:"text-xs text-white/90 font-bold bg-white/20 inline-block px-3 py-1 rounded-full backdrop-blur-sm",children:[" ",E.days," "]})]}):s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] font-bold text-white/70 uppercase tracking-widest mb-2",children:E.message}),s.jsxs("div",{className:"flex items-baseline justify-center gap-2 text-white drop-shadow-sm",children:[s.jsx("span",{className:"text-5xl font-black leading-none",children:E.days}),s.jsx("span",{className:"text-lg font-bold opacity-80",children:""})]})]}),s.jsx("button",{onClick:N,className:"mt-6 bg-white text-[#FFB7B2] px-6 py-2.5 rounded-2xl text-[10px] font-black uppercase tracking-widest active:scale-95 transition-transform shadow-sm",children:""})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-bold text-[#9FA8DA] uppercase tracking-widest mb-4 flex items-center gap-2 pl-2",children:[s.jsx(cr,{className:"w-4 h-4"})," "]}),s.jsx("div",{className:"space-y-3 pb-8",children:t.length===0?s.jsx("div",{className:"p-8 text-center bg-white/40 border-2 border-dashed border-[#E0E0E0] rounded-[1.5rem] text-xs text-[#9E9E9E]",children:""}):t.map(D=>s.jsxs("div",{className:"bg-white/40 backdrop-blur-sm border border-white/50 p-4 rounded-2xl flex items-center justify-between active:bg-white/60 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-2 h-10 bg-[#FFD1DC] rounded-full"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-base font-bold text-[#5C6B7F]",children:new Date(D.startDate).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"})}),s.jsx("div",{className:"text-[10px] text-[#FFB7B2] font-black uppercase tracking-wider bg-[#FFEBEE] px-2 py-0.5 rounded-md inline-block mt-1",children:""})]})]}),s.jsx("button",{onClick:()=>B(D.id),className:"w-10 h-10 rounded-xl flex items-center justify-center text-[#D6D3CC] active:bg-[#FFEBEE] active:text-[#E57373] transition-colors",children:s.jsx(zn,{className:"w-5 h-5"})})]},D.id))})]})]}),s.jsx(Be,{children:l&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6",children:[s.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>c(!1),className:"absolute inset-0 bg-[#5C6B7F]/20 backdrop-blur-sm"}),s.jsxs(Se.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:300,damping:25},className:"bg-[#FDFBF7]/95 backdrop-blur-xl w-full max-w-[320px] rounded-[2rem] border border-white/50 shadow-md overflow-hidden relative z-10",children:[s.jsxs("div",{className:"bg-white/40 border-b border-white/50 p-6 flex justify-between items-center",children:[s.jsx("span",{className:"text-lg font-black tracking-wide text-[#5C6B7F]",children:""}),s.jsx("button",{onClick:()=>c(!1),className:"bg-white/40 p-1 rounded-full text-[#7D8CA3] active:bg-white/60 transition-colors",children:s.jsx(ft,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-8",children:[s.jsx("label",{className:"block text-xs font-bold text-[#9FA8DA] mb-4 uppercase tracking-wider text-center",children:""}),s.jsx("input",{type:"date",value:h,onChange:D=>g(D.target.value),className:"w-full bg-white/50 border border-white/60 px-4 py-4 rounded-2xl text-center font-mono font-bold text-[#5C6B7F] focus:border-[#FFB7B2] focus:outline-none focus:ring-2 focus:ring-[#FFB7B2]/20 mb-8"}),s.jsx("button",{onClick:T,className:"w-full bg-[#FFB7B2] text-white py-4 text-xs font-bold uppercase tracking-widest active:scale-95 transition-all rounded-2xl shadow-sm",children:""})]})]})]})}),s.jsx(Be,{children:d&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6",children:[s.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>u(!1),className:"absolute inset-0 bg-[#5C6B7F]/20 backdrop-blur-sm"}),s.jsxs(Se.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:300,damping:25},className:"bg-[#FDFBF7]/95 backdrop-blur-xl w-full max-w-[320px] rounded-[2rem] border border-white/50 shadow-md overflow-hidden relative z-10",children:[s.jsxs("div",{className:"bg-white/40 border-b border-white/50 p-6 flex justify-between items-center",children:[s.jsx("span",{className:"text-lg font-black tracking-wide text-[#5C6B7F]",children:""}),s.jsx("button",{onClick:()=>u(!1),className:"bg-white/40 p-1 rounded-full text-[#7D8CA3] active:bg-white/60 transition-colors",children:s.jsx(ft,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-8 space-y-8",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center justify-between text-xs font-bold text-[#7D8CA3] mb-3 uppercase tracking-wider",children:[s.jsx("span",{children:""}),s.jsxs("span",{className:"text-[#FFB7B2] bg-[#FFEBEE] px-2 py-1 rounded-md",children:[x.cycleLength,""]})]}),s.jsx("input",{type:"range",min:"20",max:"45",value:x.cycleLength,onChange:D=>v({...x,cycleLength:parseInt(D.target.value)}),className:"w-full accent-[#FFB7B2] h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center justify-between text-xs font-bold text-[#7D8CA3] mb-3 uppercase tracking-wider",children:[s.jsx("span",{children:""}),s.jsxs("span",{className:"text-[#FFB7B2] bg-[#FFEBEE] px-2 py-1 rounded-md",children:[x.periodLength,""]})]}),s.jsx("input",{type:"range",min:"2",max:"10",value:x.periodLength,onChange:D=>v({...x,periodLength:parseInt(D.target.value)}),className:"w-full accent-[#FFB7B2] h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),s.jsx("div",{className:"pt-2",children:s.jsxs("button",{onClick:O,className:"w-full bg-[#5C6B7F] text-white py-4 text-xs font-bold uppercase tracking-widest active:bg-[#4A5568] transition-colors flex items-center justify-center gap-2 rounded-2xl shadow-sm",children:[s.jsx(_i,{className:"w-4 h-4"}),""]})})]})]})]})}),s.jsx(Be,{children:y&&y.show&&s.jsx("div",{className:"fixed top-[90px] inset-x-0 z-[100] flex justify-center pointer-events-none",children:s.jsxs(Se.div,{initial:{scale:.9,opacity:0,y:-10},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},className:"mx-auto w-fit flex items-center gap-2 px-4 py-3 pointer-events-auto",style:{background:"rgba(253, 251, 247, 0.85)",backdropFilter:"blur(12px)",border:"1px solid rgba(255, 255, 255, 0.6)",borderRadius:"20px",color:"#5C6B7F",boxShadow:"0 10px 40px -10px rgba(92, 107, 127, 0.15)",fontSize:"13px",fontWeight:"bold"},children:[s.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-white ${y.type==="success"?"bg-[#FFB7B2]":"bg-[#E57373]"}`,children:y.type==="success"?s.jsx(kt,{className:"w-3 h-3",strokeWidth:3}):s.jsx(ft,{className:"w-3 h-3",strokeWidth:3})}),s.jsx("span",{children:y.message})]})})})]})}function k7({onBack:e}){const[t,n]=C.useState([]),[a,i]=C.useState(!1),[l,c]=C.useState(null),[d,u]=C.useState(""),[m,p]=C.useState(""),[h,g]=C.useState("treating"),[x,v]=C.useState(""),[y,k]=C.useState(null),w=(A,H)=>{k({show:!0,type:A,message:H}),setTimeout(()=>k(null),2e3)};C.useEffect(()=>{_()},[]);const _=async()=>{try{const A=await ue.get(te.HEALTH,"diagnosis_logs");A&&n(A.sort((H,Y)=>new Date(Y.startDate).getTime()-new Date(H.startDate).getTime()))}catch(A){console.error("Failed to load diagnosis logs",A)}},N=()=>{u(""),p(""),g("treating");const A=new Date().toISOString().split("T")[0];v(A),c(null)},T=()=>{N(),i(!0)},B=A=>{u(A.illnessName),p(A.symptoms),g(A.status),v(A.startDate),c(A),i(!0)},O=async()=>{if(!d.trim()){w("error","");return}if(!x){w("error","");return}try{let A=[...t];l?(A=A.map(H=>H.id===l.id?{...H,illnessName:d,symptoms:m,status:h,startDate:x,endDate:h==="recovered"&&!H.endDate?new Date().toISOString().split("T")[0]:h==="treating"?void 0:H.endDate}:H),w("success","")):(A=[{id:Date.now().toString(),illnessName:d,symptoms:m,status:h,startDate:x,createdAt:new Date().toISOString()},...A],w("success","")),await ue.set(te.HEALTH,"diagnosis_logs",A),n(A.sort((H,Y)=>new Date(Y.startDate).getTime()-new Date(H.startDate).getTime())),i(!1),N()}catch{w("error","")}},$=async A=>{if(confirm(""))try{const H=t.filter(Y=>Y.id!==A);await ue.set(te.HEALTH,"diagnosis_logs",H),n(H),w("success","")}catch{w("error","")}},P=A=>{const H=new Date(A);return`${H.getFullYear()}${H.getMonth()+1}${H.getDate()}`};return s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 z-10",children:[s.jsx("button",{onClick:e,className:"w-10 h-10 bg-white/40 backdrop-blur-md border border-white/40 rounded-2xl flex items-center justify-center text-[#6B7C93] transition-transform active:scale-90 active:bg-white/60",children:s.jsx(On,{className:"w-5 h-5",strokeWidth:2.5})}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("span",{className:"text-[11px] font-bold text-[#9FA8DA] tracking-[0.2em] uppercase mb-0.5",children:"Medical Records"}),s.jsx("h1",{className:"text-lg font-black text-[#5C6B7F] tracking-wide",children:""})]}),s.jsx("button",{onClick:T,className:"w-10 h-10 bg-[#AEC6CF] text-white rounded-2xl flex items-center justify-center shadow-md shadow-[#AEC6CF]/30 transition-transform active:scale-90",children:s.jsx(Gs,{className:"w-5 h-5",strokeWidth:2.5})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:t.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-60",children:[s.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(nv,{className:"w-10 h-10 text-gray-300"})}),s.jsx("p",{className:"text-sm font-medium text-gray-400",children:""})]}):s.jsx("div",{className:"space-y-4",children:t.map(A=>s.jsxs("div",{onClick:()=>B(A),className:`group relative bg-white/40 backdrop-blur-md border border-white/50 p-5 rounded-[2rem] text-left transition-transform active:scale-[0.98] overflow-hidden ${A.status==="recovered"?"opacity-70 grayscale-[0.5]":""}`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-black text-[#5C6B7F] mb-1",children:A.illnessName}),s.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-lg text-[10px] font-bold uppercase tracking-wider ${A.status==="treating"?"bg-[#FFEBEE] text-[#E57373]":"bg-[#E0F2F1] text-[#4DB6AC]"}`,children:A.status==="treating"?"":""})]}),s.jsx("button",{onClick:H=>{H.stopPropagation(),$(A.id)},className:"p-2 rounded-xl text-[#B0BEC5] hover:bg-red-50 hover:text-red-400 transition-colors",children:s.jsx(zn,{className:"w-4 h-4"})})]}),A.symptoms&&s.jsx("p",{className:"text-xs text-[#7D8CA3] mb-4 line-clamp-2 bg-white/30 p-3 rounded-xl",children:A.symptoms}),s.jsx("div",{className:"flex items-center gap-4 text-[10px] text-[#9FA8DA] font-bold tracking-wide",children:s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(cr,{className:"w-3 h-3"}),P(A.startDate)]})})]},A.id))})}),s.jsx(Be,{children:a&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center sm:p-6",children:[s.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>i(!1),className:"absolute inset-0 bg-[#5C6B7F]/20 backdrop-blur-sm"}),s.jsxs(Se.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",stiffness:300,damping:30},className:"bg-[#FDFBF7] w-full max-w-[400px] h-[85vh] sm:h-auto sm:rounded-[2.5rem] rounded-t-[2.5rem] border border-white/50 shadow-2xl flex flex-col relative z-10",children:[s.jsxs("div",{className:"p-6 pb-2 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-black text-[#5C6B7F]",children:l?"":""}),s.jsx("p",{className:"text-xs text-[#9FA8DA] mt-0.5",children:""})]}),s.jsx("button",{onClick:()=>i(!1),className:"w-8 h-8 rounded-full bg-black/5 flex items-center justify-center text-[#7D8CA3]",children:s.jsx(ft,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-bold text-[#7D8CA3] uppercase tracking-wider pl-1",children:""}),s.jsx("input",{type:"text",placeholder:"",value:d,onChange:A=>u(A.target.value),className:"w-full bg-white border border-[#E0E0E0] p-4 rounded-2xl text-sm font-bold text-[#5C6B7F] placeholder:text-[#D1D5DB] focus:border-[#AEC6CF] focus:outline-none focus:ring-2 focus:ring-[#AEC6CF]/20 transition-all"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-bold text-[#7D8CA3] uppercase tracking-wider pl-1",children:""}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"date",value:x,onChange:A=>v(A.target.value),className:"w-full bg-white border border-[#E0E0E0] p-4 rounded-2xl text-sm font-bold text-[#5C6B7F] placeholder:text-[#D1D5DB] focus:border-[#AEC6CF] focus:outline-none focus:ring-2 focus:ring-[#AEC6CF]/20 transition-all appearance-none"}),s.jsx(cr,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 text-[#B0BEC5] pointer-events-none"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-bold text-[#7D8CA3] uppercase tracking-wider pl-1",children:""}),s.jsx("textarea",{placeholder:"...",value:m,onChange:A=>p(A.target.value),rows:4,className:"w-full bg-white border border-[#E0E0E0] p-4 rounded-2xl text-sm font-medium text-[#5C6B7F] placeholder:text-[#D1D5DB] focus:border-[#AEC6CF] focus:outline-none focus:ring-2 focus:ring-[#AEC6CF]/20 transition-all resize-none"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-bold text-[#7D8CA3] uppercase tracking-wider pl-1",children:""}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("button",{type:"button",onClick:()=>g("treating"),className:`p-4 rounded-2xl flex items-center justify-center gap-2 transition-all active:scale-[0.98] ${h==="treating"?"bg-[#FFEBEE] text-[#E57373] ring-1 ring-[#E57373]/20 shadow-inner":"bg-white border border-[#E0E0E0] text-[#B0BEC5]"}`,children:[s.jsx(Qh,{className:"w-4 h-4"}),s.jsx("span",{className:"text-xs font-bold",children:""})]}),s.jsxs("button",{type:"button",onClick:()=>g("recovered"),className:`p-4 rounded-2xl flex items-center justify-center gap-2 transition-all active:scale-[0.98] ${h==="recovered"?"bg-[#E0F2F1] text-[#4DB6AC] ring-1 ring-[#4DB6AC]/20 shadow-inner":"bg-white border border-[#E0E0E0] text-[#B0BEC5]"}`,children:[s.jsx(kt,{className:"w-4 h-4"}),s.jsx("span",{className:"text-xs font-bold",children:""})]})]})]})]}),s.jsx("div",{className:"p-6 border-t border-gray-100 bg-white/50 backdrop-blur-sm rounded-b-[2.5rem]",children:s.jsxs("button",{onClick:O,className:"w-full bg-[#AEC6CF] text-white py-4 rounded-2xl font-bold text-sm tracking-widest uppercase shadow-lg shadow-[#AEC6CF]/30 active:scale-[0.98] transition-transform flex items-center justify-center gap-2",children:[s.jsx(kt,{className:"w-5 h-5"}),""]})})]})]})}),s.jsx(Be,{children:y&&y.show&&s.jsx("div",{className:"fixed top-[90px] inset-x-0 z-[100] flex justify-center pointer-events-none",children:s.jsxs(Se.div,{initial:{scale:.9,opacity:0,y:-10},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},className:"mx-auto w-fit flex items-center gap-2 px-4 py-3 pointer-events-auto",style:{background:"rgba(253, 251, 247, 0.85)",backdropFilter:"blur(12px)",border:"1px solid rgba(255, 255, 255, 0.6)",borderRadius:"20px",color:"#5C6B7F",boxShadow:"0 10px 40px -10px rgba(92, 107, 127, 0.15)",fontSize:"13px",fontWeight:"bold"},children:[s.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-white ${y.type==="success"?"bg-[#8FBC8F]":"bg-[#E57373]"}`,children:y.type==="success"?s.jsx(kt,{className:"w-3 h-3",strokeWidth:3}):s.jsx(ft,{className:"w-3 h-3",strokeWidth:3})}),s.jsx("span",{children:y.message})]})})})]})}function Vx(){return s.jsxs("div",{className:"absolute inset-0 opacity-60 pointer-events-none overflow-hidden",children:[s.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[70%] h-[70%] bg-[#FFD1DC] rounded-full mix-blend-multiply filter blur-[90px]"}),s.jsx("div",{className:"absolute top-[10%] right-[-10%] w-[60%] h-[60%] bg-[#C1E1C1] rounded-full mix-blend-multiply filter blur-[90px]"}),s.jsx("div",{className:"absolute bottom-[-20%] left-[20%] w-[80%] h-[80%] bg-[#AEC6CF] rounded-full mix-blend-multiply filter blur-[90px]"}),s.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[60%] h-[60%] bg-[#E6E6FA] rounded-full mix-blend-multiply filter blur-[90px]"})]})}const $x={enter:e=>({x:e>0?"100%":"-25%",opacity:0}),center:{x:0,opacity:1},exit:e=>({x:e<0?"100%":"-25%",opacity:0})};function C7({onClose:e}){const[t,n]=C.useState("dashboard"),[a,i]=C.useState(0),l=C.useRef(!0);C.useEffect(()=>{const u=setTimeout(()=>{l.current=!1},500);return()=>clearTimeout(u)},[]);const c=u=>{i(1),n(u)},d=()=>{i(-1),n("dashboard")};return s.jsxs("div",{className:"fixed inset-0 z-50 bg-[#FDFBF7] font-['Source_Han_Sans_CN_VF',sans-serif] overflow-hidden",children:[s.jsx(Vx,{}),s.jsx("div",{className:"relative z-10 h-full w-full",children:s.jsx(Be,{initial:!1,custom:a,children:t==="dashboard"?s.jsx(Se.div,{custom:a,variants:$x,initial:l.current?"center":"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"absolute inset-0 w-full h-full",children:s.jsx(v7,{onClose:e,onNavigate:c})},"dashboard"):s.jsxs(Se.div,{custom:a,variants:$x,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"absolute inset-0 w-full h-full bg-[#FDFBF7]",children:[s.jsx(Vx,{}),s.jsxs("div",{className:"relative z-10 h-full",children:[t==="sleep"&&s.jsx(w7,{onBack:d}),t==="cycle"&&s.jsx(S7,{onBack:d}),t==="diagnosis"&&s.jsx(k7,{onBack:d})]})]},t)})})]})}function j7(){const[e,t]=C.useState([]),[n,a]=C.useState(""),[i,l]=C.useState(!1);C.useEffect(()=>{c()},[]);const c=async()=>{try{const h=await ue.get(te.SCHEDULE,"todos");h&&t(h.sort((g,x)=>x.createdAt-g.createdAt))}catch(h){console.error("Failed to load todos:",h)}},d=async h=>{try{await ue.set(te.SCHEDULE,"todos",h),t(h)}catch(g){console.error("Failed to save todos:",g)}},u=async()=>{if(!n.trim())return;const g=[{id:Date.now().toString(),text:n.trim(),completed:!1,createdAt:Date.now()},...e];await d(g),a(""),l(!1)},m=async h=>{const g=e.map(x=>x.id===h?{...x,completed:!x.completed}:x);await d(g)},p=async h=>{const g=e.filter(x=>x.id!==h);await d(g)};return s.jsxs("div",{className:"h-full flex flex-col p-4 overflow-y-auto custom-scrollbar",children:[s.jsxs("div",{className:"mb-6 ml-2 relative inline-block",children:[s.jsx("h2",{className:"text-2xl font-bold text-[#5A5A5A] relative z-10",children:"To-Do List"}),s.jsx("div",{className:"absolute bottom-1 left-0 w-full h-3 bg-[#FFE4E1] -rotate-2 z-0 opacity-70"})]}),s.jsxs("div",{className:"flex-1 space-y-3 pb-20",children:[s.jsx(Be,{initial:!1,children:e.map(h=>s.jsxs(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,height:0,marginBottom:0},transition:{type:"spring",stiffness:400,damping:30},className:`group relative p-4 rounded-xl border-2 transition-all duration-200 active:scale-[0.99] ${h.completed?"bg-[#F0F0F0] border-transparent opacity-60":"bg-white border-[#F0F0F0] shadow-sm active:border-[#D4E0D6]"}`,children:[s.jsx("div",{className:"absolute -top-2 left-1/2 -translate-x-1/2 w-3 h-3 rounded-full bg-[#D4E0D6] border border-white shadow-sm z-10"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>m(h.id),className:`w-6 h-6 rounded-md border-2 flex items-center justify-center transition-all duration-200 active:scale-90 ${h.completed?"bg-[#8CAE8C] border-[#8CAE8C]":"border-[#D1D1D1] active:border-[#8CAE8C]"}`,children:h.completed&&s.jsx(kt,{className:"w-4 h-4 text-white",strokeWidth:3})}),s.jsx("span",{className:`flex-1 text-[15px] font-medium leading-relaxed ${h.completed?"text-[#999] line-through decoration-2 decoration-[#999]/30":"text-[#5A5A5A]"}`,children:h.text}),s.jsx("button",{onClick:()=>p(h.id),className:"p-2 text-[#999] active:text-[#FF6B6B] active:scale-95 transition-colors duration-200",children:s.jsx(ft,{className:"w-5 h-5"})})]})]},h.id))}),e.length===0&&!i&&s.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-40",children:[s.jsx("div",{className:"w-20 h-20 border-4 border-dashed border-[#5A5A5A] rounded-full flex items-center justify-center mb-4",children:s.jsx(kt,{className:"w-10 h-10 text-[#5A5A5A]"})}),s.jsx("p",{className:"font-bold text-[#5A5A5A]",children:""}),s.jsx("p",{className:"text-sm",children:""})]})]}),s.jsx("div",{className:"absolute bottom-6 right-6 left-6 z-20 pointer-events-none",children:s.jsx("div",{className:"pointer-events-auto",children:s.jsx(Be,{children:i?s.jsxs(Se.div,{initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"bg-white p-2 rounded-2xl shadow-xl border-2 border-[#5A5A5A]/10 flex gap-2",children:[s.jsx("input",{type:"text",value:n,onChange:h=>a(h.target.value),placeholder:"...",autoFocus:!0,className:"flex-1 bg-transparent px-4 py-2 outline-none text-[#5A5A5A] placeholder:text-[#999]",onKeyDown:h=>h.key==="Enter"&&u()}),s.jsx("button",{onClick:u,className:"w-10 h-10 bg-[#5A5A5A] rounded-xl flex items-center justify-center text-white shadow-lg active:scale-90 transition-transform duration-200",children:s.jsx(kt,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>l(!1),className:"w-10 h-10 bg-[#F5F5F5] rounded-xl flex items-center justify-center text-[#5A5A5A] active:scale-90 transition-transform duration-200",children:s.jsx(ft,{className:"w-5 h-5"})})]}):s.jsx("div",{className:"flex justify-end",children:s.jsx(Se.button,{whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:20},onClick:()=>l(!0),className:"w-14 h-14 bg-[#5A5A5A] rounded-full shadow-lg shadow-[#5A5A5A]/30 flex items-center justify-center text-white",children:s.jsx(Gs,{className:"w-7 h-7"})})})})})})]})}const gf=["#FFD1DC","#D4E0D6","#CCE5FF","#FFF5BA","#E6E6FA"];function N7(){const[e,t]=C.useState(new Date),[n,a]=C.useState([]),[i,l]=C.useState(null),[c,d]=C.useState(!1),[u,m]=C.useState(null),[p,h]=C.useState(""),[g,x]=C.useState(!1),[v,y]=C.useState("09:00"),[k,w]=C.useState("10:00"),[_,N]=C.useState(""),[T,B]=C.useState(""),[O,$]=C.useState(gf[0]);C.useEffect(()=>{P();const R=new Date;l(D(R.getFullYear(),R.getMonth(),R.getDate()))},[]);const P=async()=>{const R=await ue.get(te.SCHEDULE,"events");if(R){const V=new Date,ee=new Date(V.getFullYear(),V.getMonth(),V.getDate()),W=R.filter(U=>{const[Q,oe,ne]=U.date.split("-").map(Number);return new Date(Q,oe-1,ne)>=ee});W.length!==R.length?(await ue.set(te.SCHEDULE,"events",W),a(W)):a(R)}},A=async R=>{await ue.set(te.SCHEDULE,"events",R),a(R)},H=(R,V)=>new Date(R,V+1,0).getDate(),Y=(R,V)=>new Date(R,V,1).getDay(),E=R=>{const V=new Date(e.getFullYear(),e.getMonth()+R,1);t(V)},D=(R,V,ee)=>`${R}-${String(V+1).padStart(2,"0")}-${String(ee).padStart(2,"0")}`,S=R=>{const V=D(e.getFullYear(),e.getMonth(),R);l(V)},z=()=>{m(null),h(""),B(""),N(""),x(!1),y("09:00"),w("10:00"),$(gf[0]),d(!0)},L=R=>{m(R.id),h(R.title),B(R.description||""),N(R.location||""),x(R.isAllDay),y(R.startTime||"09:00"),w(R.endTime||"10:00"),$(R.color),d(!0)},F=async()=>{if(!p.trim()||!i)return;if(!g&&v>=k){alert("");return}const R={id:u||Date.now().toString(),title:p,date:i,isAllDay:g,startTime:g?void 0:v,endTime:g?void 0:k,location:_,description:T,color:O};let V;u?V=n.map(ee=>ee.id===u?R:ee):V=[...n,R],await A(V),d(!1)},K=async(R,V)=>{if(R.stopPropagation(),confirm("")){const ee=n.filter(W=>W.id!==V);await A(ee)}},G=()=>{const R=e.getFullYear(),V=e.getMonth(),ee=H(R,V),W=Y(R,V),U=[];for(let Q=0;Q<W;Q++)U.push(s.jsx("div",{className:"min-h-[3rem] sm:min-h-[4rem]"},`empty-${Q}`));for(let Q=1;Q<=ee;Q++){const oe=D(R,V,Q),ne=n.filter(se=>se.date===oe),ae=i===oe,ve=new Date().toDateString()===new Date(R,V,Q).toDateString();U.push(s.jsxs("div",{onClick:()=>S(Q),className:"relative min-h-[3rem] sm:min-h-[4rem] flex flex-col items-center pt-1 cursor-pointer active:scale-95 transition-transform duration-100 group",children:[s.jsx("div",{className:`w-7 h-7 sm:w-8 sm:h-8 flex items-center justify-center rounded-full text-xs sm:text-sm font-medium transition-all z-10 ${ae?"bg-[#5A5A5A] text-white shadow-md scale-110":ve?"bg-[#FFD1DC] text-[#5A5A5A]":"text-[#5A5A5A] group-hover:bg-[#5A5A5A]/5"}`,children:Q}),s.jsxs("div",{className:"flex gap-0.5 sm:gap-1 mt-1 flex-wrap justify-center px-1",children:[ne.slice(0,4).map((se,xe)=>s.jsx("div",{className:"w-1 h-1 sm:w-1.5 sm:h-1.5 rounded-full",style:{backgroundColor:se.color}},xe)),ne.length>4&&s.jsx("div",{className:"w-1 h-1 sm:w-1.5 sm:h-1.5 rounded-full bg-gray-300"})]})]},Q))}return U},Z=i?n.filter(R=>R.date===i).sort((R,V)=>R.isAllDay&&!V.isAllDay?-1:!R.isAllDay&&V.isAllDay?1:R.isAllDay&&V.isAllDay?0:(R.startTime||"").localeCompare(V.startTime||"")):[];return s.jsxs("div",{className:"h-full flex flex-col overflow-hidden bg-[#F9F7F2]",children:[s.jsxs("div",{className:"px-6 py-4 flex items-center justify-between",children:[s.jsx("button",{onClick:()=>E(-1),className:"p-2 active:bg-[#5A5A5A]/10 active:scale-90 rounded-full transition-all duration-200",children:s.jsx(On,{className:"w-5 h-5 text-[#5A5A5A]"})}),s.jsxs("h2",{className:"text-lg font-bold text-[#5A5A5A] tracking-widest",children:[e.getFullYear()," ",e.getMonth()+1,""]}),s.jsx("button",{onClick:()=>E(1),className:"p-2 active:bg-[#5A5A5A]/10 active:scale-90 rounded-full transition-all duration-200",children:s.jsx(Ys,{className:"w-5 h-5 text-[#5A5A5A]"})})]}),s.jsx("div",{className:"grid grid-cols-7 px-4 mb-2",children:["","","","","","",""].map(R=>s.jsx("div",{className:"text-center text-xs font-bold text-[#9A9A9A]",children:R},R))}),s.jsxs("div",{className:"flex-1 overflow-y-auto px-4 pb-20 custom-scrollbar",children:[s.jsx("div",{className:"grid grid-cols-7 gap-y-2 mb-6 bg-white p-2 rounded-2xl border-2 border-dashed border-[#5A5A5A]/10 shadow-sm",children:G()}),s.jsx(Be,{mode:"wait",children:i&&s.jsxs(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"space-y-4 px-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-[#5A5A5A] font-bold border-l-4 border-[#5A5A5A] pl-2",children:i}),s.jsxs("button",{onClick:z,className:"flex items-center gap-1 text-xs font-bold bg-[#5A5A5A] text-white px-3 py-1.5 rounded-full shadow-sm active:scale-95 transition-transform duration-200",children:[s.jsx(Gs,{className:"w-3 h-3"}),""]})]}),Z.length===0?s.jsx("div",{className:"text-center py-8 text-[#999] text-sm italic opacity-60",children:""}):s.jsx("div",{className:"space-y-3",children:Z.map(R=>s.jsxs(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},onClick:()=>L(R),className:"relative p-4 rounded-xl shadow-sm border border-black/5 flex gap-4 overflow-hidden active:scale-[0.98] transition-transform duration-150 bg-white cursor-pointer",children:[s.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1.5",style:{backgroundColor:R.color}}),s.jsx("div",{className:"flex flex-col items-center justify-center min-w-[50px] border-r border-black/5 pr-4 py-1",children:R.isAllDay?s.jsx("span",{className:"text-xs font-bold text-[#5A5A5A] bg-[#5A5A5A]/10 px-2 py-1 rounded",children:""}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-sm font-bold text-[#5A5A5A]",children:R.startTime}),s.jsx("span",{className:"text-xs text-[#999] mt-0.5",children:R.endTime})]})}),s.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center gap-1",children:[s.jsx("h4",{className:"font-bold text-[#5A5A5A] truncate text-sm",children:R.title}),R.location&&s.jsxs("div",{className:"flex items-center gap-1 text-xs text-[#5A5A5A]/70",children:[s.jsx(Kf,{className:"w-3 h-3"}),s.jsx("span",{className:"truncate",children:R.location})]}),R.description&&s.jsx("p",{className:"text-xs text-[#5A5A5A]/50 truncate",children:R.description})]}),s.jsx("button",{onClick:V=>K(V,R.id),className:"absolute top-2 right-2 p-2 text-[#5A5A5A]/30 active:text-[#FF6B6B] active:scale-110 transition-all z-10",children:s.jsx(ft,{className:"w-4 h-4"})})]},R.id))})]})})]}),s.jsx(Be,{children:c&&s.jsxs("div",{className:"absolute inset-0 z-50 flex items-end justify-center sm:items-center p-0 sm:p-4 bg-black/20 backdrop-blur-[2px]",children:[s.jsx("div",{className:"absolute inset-0",onClick:()=>d(!1)}),s.jsxs(Se.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"tween",duration:.25,ease:"easeOut"},className:"bg-[#FDFBF7] w-full max-w-sm rounded-t-2xl sm:rounded-2xl shadow-2xl p-6 border-t-2 sm:border-2 border-[#5A5A5A]/10 relative z-10",children:[s.jsx("button",{onClick:()=>d(!1),className:"absolute top-4 right-4 p-2 bg-[#F5F5F5] rounded-full active:scale-90 transition-transform",children:s.jsx(ft,{className:"w-4 h-4 text-[#5A5A5A]"})}),s.jsxs("h3",{className:"text-lg font-bold text-[#5A5A5A] mb-6 flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-6 bg-[#5A5A5A] rounded-full"}),u?"":""]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-bold text-[#999] mb-1 block",children:""}),s.jsx("input",{type:"text",value:p,onChange:R=>h(R.target.value),className:"w-full bg-white border-b-2 border-[#E0E0E0] focus:border-[#5A5A5A] px-2 py-2 outline-none transition-colors rounded-t-md",placeholder:""})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs font-bold text-[#999] mb-1 block flex items-center gap-1",children:[s.jsx(Kf,{className:"w-3 h-3"})," "]}),s.jsx("input",{type:"text",value:_,onChange:R=>N(R.target.value),className:"w-full bg-white border-b-2 border-[#E0E0E0] focus:border-[#5A5A5A] px-2 py-2 outline-none transition-colors rounded-t-md text-sm",placeholder:""})]}),s.jsxs("div",{className:"flex items-center gap-2 pt-1 active:opacity-60 transition-opacity",onClick:()=>x(!g),children:[s.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center transition-colors ${g?"bg-[#5A5A5A] border-[#5A5A5A]":"border-[#999]"}`,children:g&&s.jsx(kt,{className:"w-3 h-3 text-white"})}),s.jsx("label",{className:"text-sm font-bold text-[#5A5A5A]",children:""})]}),s.jsx(Be,{children:!g&&s.jsxs(Se.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.15},className:"flex gap-4 overflow-hidden",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("label",{className:"text-xs font-bold text-[#999] mb-1 block flex items-center gap-1",children:[s.jsx(No,{className:"w-3 h-3"})," "]}),s.jsx("input",{type:"time",value:v,onChange:R=>y(R.target.value),className:"w-full bg-white border-b-2 border-[#E0E0E0] focus:border-[#5A5A5A] px-2 py-2 outline-none transition-colors rounded-t-md text-sm"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("label",{className:"text-xs font-bold text-[#999] mb-1 block flex items-center gap-1",children:[s.jsx(No,{className:"w-3 h-3"})," "]}),s.jsx("input",{type:"time",value:k,onChange:R=>w(R.target.value),className:"w-full bg-white border-b-2 border-[#E0E0E0] focus:border-[#5A5A5A] px-2 py-2 outline-none transition-colors rounded-t-md text-sm"})]})]})}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-bold text-[#999] mb-2 block",children:""}),s.jsx("div",{className:"flex gap-3",children:gf.map(R=>s.jsx("button",{onClick:()=>$(R),className:`w-8 h-8 rounded-full border-2 transition-transform ${O===R?"border-[#5A5A5A] scale-110 shadow-sm":"border-transparent active:scale-90"}`,style:{backgroundColor:R}},R))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs font-bold text-[#999] mb-1 block flex items-center gap-1",children:[s.jsx(o_,{className:"w-3 h-3"})," "]}),s.jsx("textarea",{value:T,onChange:R=>B(R.target.value),className:"w-full bg-white border-2 border-[#F0F0F0] rounded-xl px-3 py-2 outline-none focus:border-[#5A5A5A]/30 resize-none h-20 text-sm",placeholder:"..."})]}),s.jsx("button",{onClick:F,className:"w-full bg-[#5A5A5A] text-white font-bold py-3.5 rounded-xl shadow-lg mt-2 active:scale-95 transition-transform duration-150",children:u?"":" "})]})]})]})})]})}const Hx=["","","","","","",""],nc=["#FFD1DC","#D4E0D6","#CCE5FF","#FFF5BA","#E6E6FA","#FFABAB","#FFC3A0","#D5AAFF","#85E3FF","#B9FBC0"],xf={totalPeriods:12,showWeekends:!0,periodTimes:Array.from({length:12},(e,t)=>({period:t+1,startTime:`${8+t}:00`,endTime:`${8+t}:45`})),startDate:new Date().toISOString().split("T")[0],totalWeeks:20},_7=e=>{const t=new Date(e),n=new Date,a=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=new Date(n.getFullYear(),n.getMonth(),n.getDate()),l=a.getDay()||7,c=new Date(a);c.setDate(a.getDate()-(l-1));const d=i.getTime()-c.getTime(),u=Math.floor(d/(1e3*60*60*24));return{currentWeek:Math.floor(u/7)+1,firstMonday:c}},E7=(e,t,n)=>{const a=new Date(e);return a.setDate(e.getDate()+(t-1)*7+n),`${a.getMonth()+1}/${a.getDate()}`};function A7(){const[e,t]=C.useState([]),[n,a]=C.useState(null),[i,l]=C.useState(null),[c,d]=C.useState(xf),[u,m]=C.useState(!1),{currentWeek:p,firstMonday:h}=_7(c.startDate),[g,x]=C.useState(1);C.useEffect(()=>{p>0&&x(Math.min(Math.max(1,p),c.totalWeeks))},[p,c.totalWeeks]);const[v,y]=C.useState(""),[k,w]=C.useState(""),[_,N]=C.useState(nc[0]),[T,B]=C.useState(1),[O,$]=C.useState(1),[P,A]=C.useState([]),[H,Y]=C.useState(!1);C.useEffect(()=>{E()},[]);const E=async()=>{const U=await ue.get(te.SCHEDULE,"timetable_courses");if(U)t(U);else{const oe=await ue.get(te.SCHEDULE,"timetable");if(oe&&oe.length>0){const ne=oe.map(ae=>({id:Math.random().toString(36).substr(2,9),day:ae.day,startPeriod:ae.period,endPeriod:ae.period,subject:ae.subject,room:ae.room,color:ae.color,weeks:Array.from({length:xf.totalWeeks},(ve,se)=>se+1)}));t(ne),await ue.set(te.SCHEDULE,"timetable_courses",ne)}}const Q=await ue.get(te.SCHEDULE,"timetable_settings");if(Q){const oe={...xf,...Q};if(oe.periodTimes.length<oe.totalPeriods){const ne=oe.periodTimes.length;for(let ae=ne;ae<oe.totalPeriods;ae++)oe.periodTimes.push({period:ae+1,startTime:`${8+ae}:00`,endTime:`${8+ae}:45`})}d(oe)}},D=async U=>{await ue.set(te.SCHEDULE,"timetable_courses",U),t(U)},S=async U=>{const Q=[...U.periodTimes];if(Q.length<U.totalPeriods)for(let ne=Q.length;ne<U.totalPeriods;ne++)Q.push({period:ne+1,startTime:`${8+ne}:00`,endTime:`${8+ne}:45`});else Q.length>U.totalPeriods&&(Q.length=U.totalPeriods);const oe={...U,periodTimes:Q};await ue.set(te.SCHEDULE,"timetable_settings",oe),d(oe)},z=(U,Q)=>{U?(l(U),a(null),y(U.subject),w(U.room),N(U.color),B(U.startPeriod),$(U.endPeriod),A(U.weeks)):Q&&(l(null),a(Q),y(""),w(""),N(nc[Math.floor(Math.random()*nc.length)]),B(Q.period),$(Q.period),A(Array.from({length:c.totalWeeks},(oe,ne)=>ne+1))),Y(!1)},L=()=>{l(null),a(null)},F=async()=>{if(!v.trim())return;let U=[...e];const Q={id:i?i.id:Math.random().toString(36).substr(2,9),day:i?i.day:n?.day||0,startPeriod:T,endPeriod:O,subject:v.trim(),room:k.trim(),color:_,weeks:P.length>0?P:[g]};i?U=U.map(oe=>oe.id===i.id?Q:oe):U.push(Q),await D(U),L()},K=async()=>{if(!i)return;const U=e.filter(Q=>Q.id!==i.id);await D(U),L()},G=async()=>{window.confirm("")&&(await ue.delete(te.SCHEDULE,"timetable_courses"),await ue.delete(te.SCHEDULE,"timetable"),t([]),m(!1))},Z=()=>A(Array.from({length:c.totalWeeks},(U,Q)=>Q+1)),R=()=>A(Array.from({length:c.totalWeeks},(U,Q)=>Q+1).filter(U=>U%2!==0)),V=()=>A(Array.from({length:c.totalWeeks},(U,Q)=>Q+1).filter(U=>U%2===0)),ee=c.showWeekends?Hx:Hx.slice(0,5),W=Array.from({length:c.totalPeriods},(U,Q)=>Q+1);return s.jsxs("div",{className:"h-full flex flex-col relative",children:[s.jsxs("div",{className:"flex justify-between items-center px-4 py-2 bg-[#FDFBF7] border-b border-dashed border-[#5A5A5A]/10 sticky top-0 z-20",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>x(U=>Math.max(1,U-1)),disabled:g<=1,className:"p-1 rounded-full hover:bg-black/5 disabled:opacity-30 transition-colors",children:s.jsx(On,{className:"w-4 h-4 text-[#5A5A5A]"})}),s.jsxs("span",{className:"text-lg font-bold text-[#5A5A5A] min-w-[3rem] text-center",children:[" ",g," "]}),s.jsx("button",{onClick:()=>x(U=>Math.min(c.totalWeeks,U+1)),disabled:g>=c.totalWeeks,className:"p-1 rounded-full hover:bg-black/5 disabled:opacity-30 transition-colors",children:s.jsx(Ys,{className:"w-4 h-4 text-[#5A5A5A]"})})]}),p===g&&s.jsx("span",{className:"text-[10px] bg-[#5A5A5A] text-white px-1.5 py-0.5 rounded-full",children:""})]}),s.jsx("button",{onClick:()=>m(!0),className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-black/5 active:scale-90 transition-all text-[#999] hover:text-[#5A5A5A]",children:s.jsx(Hc,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex border-b border-[#5A5A5A]/10 bg-white/50 backdrop-blur-sm sticky top-[49px] z-10",children:[s.jsx("div",{className:"w-8 flex items-center justify-center border-r border-[#5A5A5A]/10 bg-[#FDFBF7]/80"}),ee.map((U,Q)=>s.jsxs("div",{className:"flex-1 py-2 text-center flex flex-col items-center justify-center text-[#5A5A5A]",children:[s.jsx("span",{className:"text-xs font-bold",children:U}),s.jsx("span",{className:"text-[10px] text-[#999] font-medium leading-none mt-0.5",children:E7(h,g,Q)})]},Q))]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pb-20",children:s.jsxs("div",{className:"flex min-h-full",children:[s.jsx("div",{className:"w-8 flex flex-col bg-[#FDFBF7] sticky left-0 z-10 border-r border-[#5A5A5A]/10 shrink-0",children:W.map(U=>{const Q=c.periodTimes[U-1];return s.jsxs("div",{className:"h-14 flex flex-col items-center justify-center text-[10px] font-bold text-[#999] border-b border-dashed border-[#5A5A5A]/10 last:border-b-0 box-border",children:[s.jsx("span",{children:U}),Q&&s.jsxs("span",{className:"text-[8px] font-normal scale-90 mt-0.5 opacity-60 flex flex-col items-center leading-none gap-0.5",children:[s.jsx("span",{children:Q.startTime}),s.jsx("span",{children:"|"}),s.jsx("span",{children:Q.endTime})]})]},U)})}),s.jsx("div",{className:"flex-1 flex",children:ee.map((U,Q)=>s.jsx("div",{className:"flex-1 flex flex-col border-r border-dashed border-[#5A5A5A]/10 last:border-r-0 min-w-[60px] relative",children:(()=>{const oe=[];let ne=1;for(;ne<=c.totalPeriods;){const ve=ne,se=e.find(xe=>xe.day===Q&&xe.startPeriod===ve&&xe.weeks.includes(g));if(se){const xe=se.endPeriod-se.startPeriod+1;oe.push(s.jsx("div",{onClick:()=>z(se),className:"w-full p-0.5 absolute z-10",style:{top:`${(se.startPeriod-1)*56}px`,height:`${xe*56}px`},children:s.jsxs(Se.div,{className:"w-full h-full rounded-lg p-1 flex flex-col justify-center items-center shadow-sm active:scale-95 transition-transform cursor-pointer border border-black/5",style:{backgroundColor:se.color},children:[s.jsx("span",{className:"text-[10px] font-bold text-[#5A5A5A] text-center leading-tight line-clamp-3 break-all",children:se.subject}),se.room&&s.jsxs("span",{className:"text-[8px] text-[#5A5A5A]/70 mt-0.5 scale-90",children:["@",se.room]})]})},`course-${se.id}`))}ne++}const ae=W.map(ve=>s.jsx("div",{onClick:()=>z(void 0,{day:Q,period:ve}),className:"h-14 border-b border-dashed border-[#5A5A5A]/10 w-full box-border"},`slot-${ve}`));return s.jsxs(s.Fragment,{children:[ae,oe]})})()},Q))})]})}),s.jsx(Be,{children:(i||n)&&s.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/20 backdrop-blur-[1px] p-6",children:s.jsxs(Se.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:400,damping:30},className:"bg-[#FDFBF7] w-full max-w-xs max-h-[85vh] flex flex-col rounded-2xl shadow-xl border-2 border-[#5A5A5A]/10 relative",children:[s.jsxs("div",{className:"p-4 border-b border-[#5A5A5A]/10 flex justify-between items-center bg-white/50 rounded-t-2xl",children:[s.jsx("h3",{className:"font-bold text-[#5A5A5A]",children:i?"":""}),s.jsx("button",{onClick:L,className:"p-1 text-[#999] hover:text-[#5A5A5A] active:scale-90 transition-transform",children:s.jsx(ft,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"overflow-y-auto p-5 space-y-4 custom-scrollbar",children:s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{type:"text",value:v,onChange:U=>y(U.target.value),placeholder:"",autoFocus:!i,className:"w-full bg-white border border-[#E0E0E0] rounded-lg px-3 py-2 text-sm outline-none focus:border-[#5A5A5A]"}),s.jsx("input",{type:"text",value:k,onChange:U=>w(U.target.value),placeholder:" ()",className:"w-full bg-white border border-[#E0E0E0] rounded-lg px-3 py-2 text-sm outline-none focus:border-[#5A5A5A]"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-xs text-[#999] block mb-1",children:""}),s.jsx("select",{value:T,onChange:U=>{const Q=parseInt(U.target.value);B(Q),Q>O&&$(Q)},className:"w-full bg-white border border-[#E0E0E0] rounded-lg px-2 py-1.5 text-sm outline-none focus:border-[#5A5A5A]",children:W.map(U=>s.jsxs("option",{value:U,children:[" ",U," "]},U))})]}),s.jsx("span",{className:"mt-5 text-[#999]",children:"-"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-xs text-[#999] block mb-1",children:""}),s.jsx("select",{value:O,onChange:U=>{const Q=parseInt(U.target.value);$(Q),Q<T&&B(Q)},className:"w-full bg-white border border-[#E0E0E0] rounded-lg px-2 py-1.5 text-sm outline-none focus:border-[#5A5A5A]",children:W.map(U=>s.jsxs("option",{value:U,children:[" ",U," "]},U))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"text-xs text-[#999]",children:[": ",s.jsxs("span",{className:"text-[#5A5A5A] font-medium",children:[P.length,""]})]}),s.jsxs("div",{className:"flex gap-2 text-xs",children:[s.jsx("button",{onClick:Z,className:"flex-1 py-1.5 bg-white border border-[#E0E0E0] rounded hover:bg-[#F5F5F5]",children:""}),s.jsx("button",{onClick:R,className:"flex-1 py-1.5 bg-white border border-[#E0E0E0] rounded hover:bg-[#F5F5F5]",children:""}),s.jsx("button",{onClick:V,className:"flex-1 py-1.5 bg-white border border-[#E0E0E0] rounded hover:bg-[#F5F5F5]",children:""})]}),s.jsx("button",{onClick:()=>Y(!H),className:"w-full py-1.5 text-xs text-[#5A5A5A] bg-[#F5F5F5] rounded flex items-center justify-center gap-1",children:H?"":""}),H&&s.jsx("div",{className:"grid grid-cols-5 gap-1.5 p-2 bg-white rounded-lg border border-[#E0E0E0]",children:Array.from({length:c.totalWeeks},(U,Q)=>Q+1).map(U=>{const Q=P.includes(U);return s.jsx("button",{onClick:()=>{A(Q?P.filter(oe=>oe!==U):[...P,U].sort((oe,ne)=>oe-ne))},className:`aspect-square flex items-center justify-center text-xs rounded transition-colors ${Q?"bg-[#5A5A5A] text-white":"bg-[#F9F9F9] text-[#999]"}`,children:U},U)})})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2 justify-center pt-2 border-t border-dashed border-[#5A5A5A]/10",children:nc.map(U=>s.jsx("button",{onClick:()=>N(U),className:`w-6 h-6 rounded-full border-2 transition-transform ${_===U?"border-[#5A5A5A] scale-110":"border-transparent active:scale-90"}`,style:{backgroundColor:U}},U))}),s.jsxs("div",{className:"flex gap-2 mt-4",children:[i&&s.jsx("button",{onClick:K,className:"flex-1 py-2 text-sm font-bold text-[#FF6B6B] bg-[#FFF0F0] rounded-lg active:scale-95 transition-transform",children:""}),s.jsx("button",{onClick:F,className:"flex-[2] py-2 text-sm font-bold text-white bg-[#5A5A5A] rounded-lg shadow-md active:scale-95 transition-transform",children:""})]})]})})]})})}),s.jsx(Be,{children:u&&s.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/20 backdrop-blur-[1px] p-4",children:s.jsxs(Se.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:400,damping:30},className:"bg-[#FDFBF7] w-full max-w-sm max-h-[80vh] flex flex-col rounded-2xl shadow-xl border-2 border-[#5A5A5A]/10 relative overflow-hidden",children:[s.jsxs("div",{className:"p-4 border-b border-[#5A5A5A]/10 flex justify-between items-center bg-white/50",children:[s.jsx("h3",{className:"font-bold text-[#5A5A5A]",children:""}),s.jsx("button",{onClick:()=>m(!1),className:"p-1 text-[#999] hover:text-[#5A5A5A] active:scale-90 transition-transform",children:s.jsx(ft,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"overflow-y-auto p-4 space-y-6 flex-1 custom-scrollbar",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-bold text-[#5A5A5A]",children:""}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"text-xs text-[#999] block mb-1",children:""}),s.jsx("input",{type:"date",value:c.startDate,onChange:U=>S({...c,startDate:U.target.value}),className:"w-full bg-white border border-[#E0E0E0] rounded-lg px-2 py-1.5 text-xs outline-none focus:border-[#5A5A5A]"})]}),s.jsxs("div",{className:"w-20",children:[s.jsx("span",{className:"text-xs text-[#999] block mb-1",children:""}),s.jsx("input",{type:"number",min:1,max:30,value:c.totalWeeks,onChange:U=>S({...c,totalWeeks:parseInt(U.target.value)||20}),className:"w-full bg-white border border-[#E0E0E0] rounded-lg px-2 py-1.5 text-xs text-center outline-none focus:border-[#5A5A5A]"})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{className:"text-sm font-bold text-[#5A5A5A]",children:""}),s.jsx("button",{onClick:()=>S({...c,showWeekends:!c.showWeekends}),className:`w-12 h-6 rounded-full relative transition-colors duration-200 ${c.showWeekends?"bg-[#5A5A5A]":"bg-[#E0E0E0]"}`,children:s.jsx(Se.div,{animate:{x:c.showWeekends?26:2},className:"w-5 h-5 bg-white rounded-full absolute top-0.5 shadow-sm"})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{className:"text-sm font-bold text-[#5A5A5A]",children:""}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>c.totalPeriods>1&&S({...c,totalPeriods:c.totalPeriods-1}),className:"w-8 h-8 rounded-lg bg-[#F5F5F5] flex items-center justify-center text-[#5A5A5A] active:scale-90",children:"-"}),s.jsx("span",{className:"w-8 text-center font-bold text-[#5A5A5A]",children:c.totalPeriods}),s.jsx("button",{onClick:()=>c.totalPeriods<20&&S({...c,totalPeriods:c.totalPeriods+1}),className:"w-8 h-8 rounded-lg bg-[#F5F5F5] flex items-center justify-center text-[#5A5A5A] active:scale-90",children:"+"})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-bold text-[#999] mb-3 uppercase tracking-wider",children:""}),s.jsx("div",{className:"space-y-2",children:Array.from({length:c.totalPeriods},(U,Q)=>{const oe=c.periodTimes[Q]||{startTime:"08:00",endTime:"08:45"};return s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"w-8 font-bold text-[#5A5A5A] text-center",children:Q+1}),s.jsx("input",{type:"time",value:oe.startTime,onChange:ne=>{const ae=[...c.periodTimes];ae[Q]||(ae[Q]={period:Q+1,startTime:"08:00",endTime:"08:45"}),ae[Q].startTime=ne.target.value,S({...c,periodTimes:ae})},className:"flex-1 bg-white border border-[#E0E0E0] rounded px-2 py-1 text-xs text-center outline-none focus:border-[#5A5A5A]"}),s.jsx("span",{className:"text-[#999]",children:"-"}),s.jsx("input",{type:"time",value:oe.endTime,onChange:ne=>{const ae=[...c.periodTimes];ae[Q]||(ae[Q]={period:Q+1,startTime:"08:00",endTime:"08:45"}),ae[Q].endTime=ne.target.value,S({...c,periodTimes:ae})},className:"flex-1 bg-white border border-[#E0E0E0] rounded px-2 py-1 text-xs text-center outline-none focus:border-[#5A5A5A]"})]},Q)})})]}),s.jsx("div",{className:"pt-4 border-t border-[#5A5A5A]/10",children:s.jsxs("button",{onClick:G,className:"w-full py-3 flex items-center justify-center gap-2 text-[#FF6B6B] bg-[#FFF0F0] rounded-xl font-bold active:scale-95 transition-transform",children:[s.jsx(zn,{className:"w-4 h-4"})," ()"]})})]})]})})})]})}const Ux={shareEnabled:!1,shareScope:"all",shareCharacterId:""};function T7({onBack:e}){const[t,n]=C.useState("todo"),[a,i]=C.useState(!1),[l,c]=C.useState(!1),[d,u]=C.useState(!1),[m,p]=C.useState(Ux),[h,g]=C.useState([]),[x,v]=C.useState(!1),y=[{id:"todo",label:"",icon:xE},{id:"calendar",label:"",icon:cr},{id:"timetable",label:"",icon:DE}];C.useEffect(()=>{k(),w()},[]);const k=async()=>{try{const N=await ue.get(te.SCHEDULE,"schedule_settings");N&&p({...Ux,...N})}catch(N){console.error("Failed to load schedule settings",N)}},w=async()=>{try{const N=await ue.get(te.CHARACTERS,"characters");N&&g(N)}catch(N){console.error("Failed to load characters",N)}},_=async()=>{try{await ue.set(te.SCHEDULE,"schedule_settings",m),i(!1),c(!0),setTimeout(()=>c(!1),2e3)}catch{u(!0),setTimeout(()=>u(!1),2e3)}};return s.jsxs("div",{className:"flex flex-col h-full bg-[#FDFBF7] text-[#5A5A5A] relative overflow-hidden",children:[s.jsxs("div",{className:"w-full relative z-10 pt-8 pb-4 px-6 flex items-center justify-between bg-[#FDFBF7]",children:[s.jsx("button",{onClick:e,className:"w-10 h-10 flex items-center justify-center rounded-full active:bg-black/10 active:scale-90 transition-all duration-200",children:s.jsx(f_,{className:"w-6 h-6 text-[#5A5A5A]",strokeWidth:2})}),s.jsx("div",{className:"text-lg font-bold tracking-widest text-[#5A5A5A] border-b-2 border-dashed border-[#5A5A5A]/30 pb-1",children:y.find(N=>N.id===t)?.label}),s.jsx("button",{onClick:()=>i(!0),className:"w-10 h-10 flex items-center justify-center rounded-full active:bg-black/10 active:scale-90 transition-all duration-200 text-[#5A5A5A]",children:s.jsx(ev,{className:"w-5 h-5",strokeWidth:2})})]}),s.jsx("div",{className:"absolute top-16 right-[-20px] w-24 h-6 bg-[#E8DCC4] rotate-[15deg] opacity-60 pointer-events-none z-0",style:{backgroundImage:"repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255,255,255,0.5) 10px, rgba(255,255,255,0.5) 20px)"}}),s.jsx("div",{className:"absolute top-20 left-[-10px] w-16 h-4 bg-[#D4E0D6] rotate-[-5deg] opacity-60 pointer-events-none z-0",style:{backgroundImage:"repeating-linear-gradient(-45deg, transparent, transparent 5px, rgba(255,255,255,0.5) 5px, rgba(255,255,255,0.5) 10px)"}}),s.jsx("div",{className:"flex-1 overflow-hidden relative w-full",children:s.jsx(Be,{mode:"wait",children:s.jsxs(Se.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2,ease:"easeInOut"},className:"h-full w-full",children:[t==="todo"&&s.jsx(j7,{}),t==="calendar"&&s.jsx(N7,{}),t==="timetable"&&s.jsx(A7,{})]},t)})}),s.jsx("div",{className:"bg-[#FDFBF7] border-t border-dashed border-[#5A5A5A]/20 pb-safe pt-2 px-6 w-full",children:s.jsx("div",{className:"w-full flex justify-between items-center h-16 md:justify-center md:gap-32",children:y.map(N=>{const T=t===N.id;return s.jsxs("button",{onClick:()=>n(N.id),className:"flex flex-col items-center justify-center gap-1 w-20 relative group active:scale-95 transition-transform duration-150",children:[s.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center transition-all duration-300 ${T?"bg-[#5A5A5A] text-[#FDFBF7] shadow-lg scale-110 rotate-[-3deg]":"bg-transparent text-[#9A9A9A]"}`,children:s.jsx(N.icon,{className:"w-5 h-5",strokeWidth:T?2.5:2})}),s.jsx("span",{className:`text-[10px] font-bold tracking-wider transition-colors duration-300 ${T?"text-[#5A5A5A]":"text-[#9A9A9A]"}`,children:N.label}),T&&s.jsx(Se.div,{layoutId:"activeTabDot",className:"absolute -bottom-1 w-1 h-1 bg-[#5A5A5A] rounded-full",transition:{type:"spring",stiffness:300,damping:30}})]},N.id)})})}),a&&s.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-[1px] z-50 flex items-center justify-center p-6",children:s.jsxs(Se.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:400,damping:30},className:"bg-[#FDFBF7] w-full max-w-[320px] rounded-2xl shadow-xl border-2 border-[#5A5A5A]/10 relative overflow-hidden",children:[s.jsxs("div",{className:"bg-white/50 border-b border-dashed border-[#5A5A5A]/10 p-4 flex justify-between items-center",children:[s.jsx("span",{className:"text-lg font-bold text-[#5A5A5A]",children:""}),s.jsx("button",{onClick:()=>i(!1),className:"p-1 text-[#999] hover:text-[#5A5A5A] active:scale-90 transition-transform",children:s.jsx(ft,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-bold text-[#5A5A5A]",children:""}),s.jsx("p",{className:"text-xs text-[#999] mt-1",children:""})]}),s.jsx("button",{onClick:()=>p({...m,shareEnabled:!m.shareEnabled}),className:`flex-shrink-0 w-12 h-6 rounded-full transition-colors relative ${m.shareEnabled?"bg-[#5A5A5A]":"bg-[#E0E0E0]"}`,children:s.jsx(Se.div,{animate:{x:m.shareEnabled?26:2},transition:{type:"spring",stiffness:500,damping:30},className:"w-5 h-5 bg-white rounded-full absolute top-0.5 shadow-sm"})})]}),s.jsx(Be,{children:m.shareEnabled&&s.jsxs(Se.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4 pt-4 border-t border-dashed border-[#5A5A5A]/10 overflow-hidden",children:[s.jsx("label",{className:"text-xs font-bold text-[#999] block mb-2",children:""}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("button",{onClick:()=>p({...m,shareScope:"all"}),className:`p-3 rounded-xl border flex flex-col items-center gap-2 transition-all ${m.shareScope==="all"?"bg-[#5A5A5A] border-[#5A5A5A] text-white":"bg-white border-[#E0E0E0] text-[#999]"}`,children:[s.jsx(Uc,{className:"w-5 h-5"}),s.jsx("span",{className:"text-xs font-bold",children:""})]}),s.jsxs("button",{onClick:()=>p({...m,shareScope:"specific"}),className:`p-3 rounded-xl border flex flex-col items-center gap-2 transition-all ${m.shareScope==="specific"?"bg-[#5A5A5A] border-[#5A5A5A] text-white":"bg-white border-[#E0E0E0] text-[#999]"}`,children:[s.jsx(fs,{className:"w-5 h-5"}),s.jsx("span",{className:"text-xs font-bold",children:""})]})]}),m.shareScope==="specific"&&s.jsxs("div",{className:"mt-2",children:[s.jsxs("button",{onClick:()=>v(!x),className:"w-full bg-white border border-[#E0E0E0] px-4 py-2.5 rounded-lg text-xs font-bold text-[#5A5A5A] flex items-center justify-between active:bg-[#F5F5F5] transition-colors",children:[s.jsx("div",{className:"flex items-center gap-2 pl-1",children:s.jsx("span",{children:h.find(N=>N.id===m.shareCharacterId)?.name||""})}),s.jsx(Ys,{className:`w-4 h-4 text-[#999] transition-transform ${x?"rotate-90":""}`})]}),s.jsx(Be,{children:x&&s.jsx(Se.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:s.jsxs("div",{className:"mt-2 bg-white border border-[#E0E0E0] rounded-xl shadow-sm max-h-48 overflow-y-auto p-1 custom-scrollbar",children:[h.length===0&&s.jsx("div",{className:"p-3 text-center text-xs text-[#999]",children:""}),h.map(N=>s.jsx("button",{onClick:()=>{p({...m,shareCharacterId:N.id}),v(!1)},className:`w-full text-left px-3 py-2 rounded-lg text-xs font-bold flex items-center gap-2 mb-1 transition-colors ${m.shareCharacterId===N.id?"bg-[#5A5A5A] text-white":"hover:bg-[#F5F5F5] text-[#5A5A5A]"}`,children:N.name},N.id))]})})})]})]})}),s.jsxs("button",{onClick:_,className:"w-full bg-[#5A5A5A] text-white py-3 rounded-xl font-bold text-sm shadow-md active:scale-[0.98] transition-transform flex items-center justify-center gap-2",children:[s.jsx(kt,{className:"w-4 h-4"}),""]})]})]})}),l&&s.jsx("div",{className:"fixed top-[90px] inset-x-0 z-[100] flex justify-center pointer-events-none",children:s.jsxs(Se.div,{initial:{scale:.9,opacity:0,y:-10},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},className:"mx-auto w-fit flex items-center gap-2 px-4 py-3 pointer-events-auto shadow-sm",style:{background:"rgba(253, 251, 247, 0.95)",backdropFilter:"blur(4px)",border:"1px dashed rgba(90, 90, 90, 0.3)",borderRadius:"16px",color:"#5A5A5A",fontSize:"13px",fontWeight:"bold"},children:[s.jsx("div",{className:"w-5 h-5 rounded-full bg-[#5A5A5A] flex items-center justify-center text-[#FDFBF7]",children:s.jsx(kt,{className:"w-3 h-3",strokeWidth:3})}),s.jsx("span",{children:""})]})}),d&&s.jsx("div",{className:"fixed top-[90px] inset-x-0 z-[100] flex justify-center pointer-events-none",children:s.jsxs(Se.div,{initial:{scale:.9,opacity:0,y:-10},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:-10},className:"mx-auto w-fit flex items-center gap-2 px-4 py-3 pointer-events-auto shadow-sm",style:{background:"rgba(253, 251, 247, 0.95)",backdropFilter:"blur(4px)",border:"1px dashed rgba(229, 115, 115, 0.5)",borderRadius:"16px",color:"#5A5A5A",fontSize:"13px",fontWeight:"bold"},children:[s.jsx("div",{className:"w-5 h-5 rounded-full bg-[#E57373] flex items-center justify-center text-white",children:s.jsx(ft,{className:"w-3 h-3",strokeWidth:3})}),s.jsx("span",{children:""})]})})]})}function D7({onClose:e}){return s.jsx("div",{className:"fixed inset-0 z-50 bg-[#FDFBF7] font-['Source_Han_Sans_CN_VF',sans-serif] overflow-hidden",children:s.jsx("div",{className:"h-full w-full",children:s.jsx(T7,{onBack:e})})})}function Mv(e){const t=C.useRef({value:e,previous:e});return C.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function Pv(e){const[t,n]=C.useState(void 0);return An(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const a=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const l=i[0];let c,d;if("borderBoxSize"in l){const u=l.borderBoxSize,m=Array.isArray(u)?u[0]:u;c=m.inlineSize,d=m.blockSize}else c=e.offsetWidth,d=e.offsetHeight;n({width:c,height:d})});return a.observe(e,{box:"border-box"}),()=>a.unobserve(e)}else n(void 0)},[e]),t}var Gc="Switch",[M7]=Ci(Gc),[P7,I7]=M7(Gc),Iv=C.forwardRef((e,t)=>{const{__scopeSwitch:n,name:a,checked:i,defaultChecked:l,required:c,disabled:d,value:u="on",onCheckedChange:m,form:p,...h}=e,[g,x]=C.useState(null),v=Bt(t,N=>x(N)),y=C.useRef(!1),k=g?p||!!g.closest("form"):!0,[w,_]=vc({prop:i,defaultProp:l??!1,onChange:m,caller:Gc});return s.jsxs(P7,{scope:n,checked:w,disabled:d,children:[s.jsx(jt.button,{type:"button",role:"switch","aria-checked":w,"aria-required":c,"data-state":Lv(w),"data-disabled":d?"":void 0,disabled:d,value:u,...h,ref:v,onClick:_t(e.onClick,N=>{_(T=>!T),k&&(y.current=N.isPropagationStopped(),y.current||N.stopPropagation())})}),k&&s.jsx(Bv,{control:g,bubbles:!y.current,name:a,value:u,checked:w,required:c,disabled:d,form:p,style:{transform:"translateX(-100%)"}})]})});Iv.displayName=Gc;var Fv="SwitchThumb",Rv=C.forwardRef((e,t)=>{const{__scopeSwitch:n,...a}=e,i=I7(Fv,n);return s.jsx(jt.span,{"data-state":Lv(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t})});Rv.displayName=Fv;var F7="SwitchBubbleInput",Bv=C.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:a=!0,...i},l)=>{const c=C.useRef(null),d=Bt(c,l),u=Mv(n),m=Pv(t);return C.useEffect(()=>{const p=c.current;if(!p)return;const h=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(h,"checked").set;if(u!==n&&x){const v=new Event("click",{bubbles:a});x.call(p,n),p.dispatchEvent(v)}},[u,n,a]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:d,style:{...i.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Bv.displayName=F7;function Lv(e){return e?"checked":"unchecked"}var R7=Iv,B7=Rv;function L7({className:e,...t}){return s.jsx(R7,{"data-slot":"switch",className:rs("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(B7,{"data-slot":"switch-thumb",className:rs("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function Wx(e,[t,n]){return Math.min(n,Math.max(t,e))}function Kx(e){const t=O7(e),n=C.forwardRef((a,i)=>{const{children:l,...c}=a,d=C.Children.toArray(l),u=d.find(V7);if(u){const m=u.props.children,p=d.map(h=>h===u?C.Children.count(m)>1?C.Children.only(null):C.isValidElement(m)?m.props.children:null:h);return s.jsx(t,{...c,ref:i,children:C.isValidElement(m)?C.cloneElement(m,void 0,p):null})}return s.jsx(t,{...c,ref:i,children:l})});return n.displayName=`${e}.Slot`,n}function O7(e){const t=C.forwardRef((n,a)=>{const{children:i,...l}=n;if(C.isValidElement(i)){const c=H7(i),d=$7(l,i.props);return i.type!==C.Fragment&&(d.ref=a?Po(a,c):c),C.cloneElement(i,d)}return C.Children.count(i)>1?C.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var z7=Symbol("radix.slottable");function V7(e){return C.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===z7}function $7(e,t){const n={...t};for(const a in t){const i=e[a],l=t[a];/^on[A-Z]/.test(a)?i&&l?n[a]=(...d)=>{const u=l(...d);return i(...d),u}:i&&(n[a]=i):a==="style"?n[a]={...i,...l}:a==="className"&&(n[a]=[i,l].filter(Boolean).join(" "))}return{...e,...n}}function H7(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function U7(e){const t=e+"CollectionProvider",[n,a]=Ci(t),[i,l]=n(t,{collectionRef:{current:null},itemMap:new Map}),c=y=>{const{scope:k,children:w}=y,_=Pe.useRef(null),N=Pe.useRef(new Map).current;return s.jsx(i,{scope:k,itemMap:N,collectionRef:_,children:w})};c.displayName=t;const d=e+"CollectionSlot",u=Kx(d),m=Pe.forwardRef((y,k)=>{const{scope:w,children:_}=y,N=l(d,w),T=Bt(k,N.collectionRef);return s.jsx(u,{ref:T,children:_})});m.displayName=d;const p=e+"CollectionItemSlot",h="data-radix-collection-item",g=Kx(p),x=Pe.forwardRef((y,k)=>{const{scope:w,children:_,...N}=y,T=Pe.useRef(null),B=Bt(k,T),O=l(p,w);return Pe.useEffect(()=>(O.itemMap.set(T,{ref:T,...N}),()=>void O.itemMap.delete(T))),s.jsx(g,{[h]:"",ref:B,children:_})});x.displayName=p;function v(y){const k=l(e+"CollectionConsumer",y);return Pe.useCallback(()=>{const _=k.collectionRef.current;if(!_)return[];const N=Array.from(_.querySelectorAll(`[${h}]`));return Array.from(k.itemMap.values()).sort((O,$)=>N.indexOf(O.ref.current)-N.indexOf($.ref.current))},[k.collectionRef,k.itemMap])}return[{Provider:c,Slot:m,ItemSlot:x},v,a]}var W7=C.createContext(void 0);function K7(e){const t=C.useContext(W7);return e||t||"ltr"}const G7=["top","right","bottom","left"],Rr=Math.min,ns=Math.max,Ac=Math.round,sc=Math.floor,Ks=e=>({x:e,y:e}),q7={left:"right",right:"left",bottom:"top",top:"bottom"},Y7={start:"end",end:"start"};function Xf(e,t,n){return ns(e,Rr(t,n))}function dr(e,t){return typeof e=="function"?e(t):e}function ur(e){return e.split("-")[0]}function Ai(e){return e.split("-")[1]}function op(e){return e==="x"?"y":"x"}function lp(e){return e==="y"?"height":"width"}const Z7=new Set(["top","bottom"]);function $s(e){return Z7.has(ur(e))?"y":"x"}function cp(e){return op($s(e))}function Q7(e,t,n){n===void 0&&(n=!1);const a=Ai(e),i=cp(e),l=lp(i);let c=i==="x"?a===(n?"end":"start")?"right":"left":a==="start"?"bottom":"top";return t.reference[l]>t.floating[l]&&(c=Tc(c)),[c,Tc(c)]}function X7(e){const t=Tc(e);return[Jf(e),t,Jf(t)]}function Jf(e){return e.replace(/start|end/g,t=>Y7[t])}const Gx=["left","right"],qx=["right","left"],J7=["top","bottom"],e9=["bottom","top"];function t9(e,t,n){switch(e){case"top":case"bottom":return n?t?qx:Gx:t?Gx:qx;case"left":case"right":return t?J7:e9;default:return[]}}function n9(e,t,n,a){const i=Ai(e);let l=t9(ur(e),n==="start",a);return i&&(l=l.map(c=>c+"-"+i),t&&(l=l.concat(l.map(Jf)))),l}function Tc(e){return e.replace(/left|right|bottom|top/g,t=>q7[t])}function s9(e){return{top:0,right:0,bottom:0,left:0,...e}}function Ov(e){return typeof e!="number"?s9(e):{top:e,right:e,bottom:e,left:e}}function Dc(e){const{x:t,y:n,width:a,height:i}=e;return{width:a,height:i,top:n,left:t,right:t+a,bottom:n+i,x:t,y:n}}function Yx(e,t,n){let{reference:a,floating:i}=e;const l=$s(t),c=cp(t),d=lp(c),u=ur(t),m=l==="y",p=a.x+a.width/2-i.width/2,h=a.y+a.height/2-i.height/2,g=a[d]/2-i[d]/2;let x;switch(u){case"top":x={x:p,y:a.y-i.height};break;case"bottom":x={x:p,y:a.y+a.height};break;case"right":x={x:a.x+a.width,y:h};break;case"left":x={x:a.x-i.width,y:h};break;default:x={x:a.x,y:a.y}}switch(Ai(t)){case"start":x[c]-=g*(n&&m?-1:1);break;case"end":x[c]+=g*(n&&m?-1:1);break}return x}const r9=async(e,t,n)=>{const{placement:a="bottom",strategy:i="absolute",middleware:l=[],platform:c}=n,d=l.filter(Boolean),u=await(c.isRTL==null?void 0:c.isRTL(t));let m=await c.getElementRects({reference:e,floating:t,strategy:i}),{x:p,y:h}=Yx(m,a,u),g=a,x={},v=0;for(let y=0;y<d.length;y++){const{name:k,fn:w}=d[y],{x:_,y:N,data:T,reset:B}=await w({x:p,y:h,initialPlacement:a,placement:g,strategy:i,middlewareData:x,rects:m,platform:c,elements:{reference:e,floating:t}});p=_??p,h=N??h,x={...x,[k]:{...x[k],...T}},B&&v<=50&&(v++,typeof B=="object"&&(B.placement&&(g=B.placement),B.rects&&(m=B.rects===!0?await c.getElementRects({reference:e,floating:t,strategy:i}):B.rects),{x:p,y:h}=Yx(m,g,u)),y=-1)}return{x:p,y:h,placement:g,strategy:i,middlewareData:x}};async function _o(e,t){var n;t===void 0&&(t={});const{x:a,y:i,platform:l,rects:c,elements:d,strategy:u}=e,{boundary:m="clippingAncestors",rootBoundary:p="viewport",elementContext:h="floating",altBoundary:g=!1,padding:x=0}=dr(t,e),v=Ov(x),k=d[g?h==="floating"?"reference":"floating":h],w=Dc(await l.getClippingRect({element:(n=await(l.isElement==null?void 0:l.isElement(k)))==null||n?k:k.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(d.floating)),boundary:m,rootBoundary:p,strategy:u})),_=h==="floating"?{x:a,y:i,width:c.floating.width,height:c.floating.height}:c.reference,N=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d.floating)),T=await(l.isElement==null?void 0:l.isElement(N))?await(l.getScale==null?void 0:l.getScale(N))||{x:1,y:1}:{x:1,y:1},B=Dc(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:_,offsetParent:N,strategy:u}):_);return{top:(w.top-B.top+v.top)/T.y,bottom:(B.bottom-w.bottom+v.bottom)/T.y,left:(w.left-B.left+v.left)/T.x,right:(B.right-w.right+v.right)/T.x}}const a9=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:a,placement:i,rects:l,platform:c,elements:d,middlewareData:u}=t,{element:m,padding:p=0}=dr(e,t)||{};if(m==null)return{};const h=Ov(p),g={x:n,y:a},x=cp(i),v=lp(x),y=await c.getDimensions(m),k=x==="y",w=k?"top":"left",_=k?"bottom":"right",N=k?"clientHeight":"clientWidth",T=l.reference[v]+l.reference[x]-g[x]-l.floating[v],B=g[x]-l.reference[x],O=await(c.getOffsetParent==null?void 0:c.getOffsetParent(m));let $=O?O[N]:0;(!$||!await(c.isElement==null?void 0:c.isElement(O)))&&($=d.floating[N]||l.floating[v]);const P=T/2-B/2,A=$/2-y[v]/2-1,H=Rr(h[w],A),Y=Rr(h[_],A),E=H,D=$-y[v]-Y,S=$/2-y[v]/2+P,z=Xf(E,S,D),L=!u.arrow&&Ai(i)!=null&&S!==z&&l.reference[v]/2-(S<E?H:Y)-y[v]/2<0,F=L?S<E?S-E:S-D:0;return{[x]:g[x]+F,data:{[x]:z,centerOffset:S-z-F,...L&&{alignmentOffset:F}},reset:L}}}),i9=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,a;const{placement:i,middlewareData:l,rects:c,initialPlacement:d,platform:u,elements:m}=t,{mainAxis:p=!0,crossAxis:h=!0,fallbackPlacements:g,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:y=!0,...k}=dr(e,t);if((n=l.arrow)!=null&&n.alignmentOffset)return{};const w=ur(i),_=$s(d),N=ur(d)===d,T=await(u.isRTL==null?void 0:u.isRTL(m.floating)),B=g||(N||!y?[Tc(d)]:X7(d)),O=v!=="none";!g&&O&&B.push(...n9(d,y,v,T));const $=[d,...B],P=await _o(t,k),A=[];let H=((a=l.flip)==null?void 0:a.overflows)||[];if(p&&A.push(P[w]),h){const S=Q7(i,c,T);A.push(P[S[0]],P[S[1]])}if(H=[...H,{placement:i,overflows:A}],!A.every(S=>S<=0)){var Y,E;const S=(((Y=l.flip)==null?void 0:Y.index)||0)+1,z=$[S];if(z&&(!(h==="alignment"?_!==$s(z):!1)||H.every(K=>$s(K.placement)===_?K.overflows[0]>0:!0)))return{data:{index:S,overflows:H},reset:{placement:z}};let L=(E=H.filter(F=>F.overflows[0]<=0).sort((F,K)=>F.overflows[1]-K.overflows[1])[0])==null?void 0:E.placement;if(!L)switch(x){case"bestFit":{var D;const F=(D=H.filter(K=>{if(O){const G=$s(K.placement);return G===_||G==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(G=>G>0).reduce((G,Z)=>G+Z,0)]).sort((K,G)=>K[1]-G[1])[0])==null?void 0:D[0];F&&(L=F);break}case"initialPlacement":L=d;break}if(i!==L)return{reset:{placement:L}}}return{}}}};function Zx(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Qx(e){return G7.some(t=>e[t]>=0)}const o9=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:a="referenceHidden",...i}=dr(e,t);switch(a){case"referenceHidden":{const l=await _o(t,{...i,elementContext:"reference"}),c=Zx(l,n.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:Qx(c)}}}case"escaped":{const l=await _o(t,{...i,altBoundary:!0}),c=Zx(l,n.floating);return{data:{escapedOffsets:c,escaped:Qx(c)}}}default:return{}}}}},zv=new Set(["left","top"]);async function l9(e,t){const{placement:n,platform:a,elements:i}=e,l=await(a.isRTL==null?void 0:a.isRTL(i.floating)),c=ur(n),d=Ai(n),u=$s(n)==="y",m=zv.has(c)?-1:1,p=l&&u?-1:1,h=dr(t,e);let{mainAxis:g,crossAxis:x,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return d&&typeof v=="number"&&(x=d==="end"?v*-1:v),u?{x:x*p,y:g*m}:{x:g*m,y:x*p}}const c9=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,a;const{x:i,y:l,placement:c,middlewareData:d}=t,u=await l9(t,e);return c===((n=d.offset)==null?void 0:n.placement)&&(a=d.arrow)!=null&&a.alignmentOffset?{}:{x:i+u.x,y:l+u.y,data:{...u,placement:c}}}}},d9=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:a,placement:i}=t,{mainAxis:l=!0,crossAxis:c=!1,limiter:d={fn:k=>{let{x:w,y:_}=k;return{x:w,y:_}}},...u}=dr(e,t),m={x:n,y:a},p=await _o(t,u),h=$s(ur(i)),g=op(h);let x=m[g],v=m[h];if(l){const k=g==="y"?"top":"left",w=g==="y"?"bottom":"right",_=x+p[k],N=x-p[w];x=Xf(_,x,N)}if(c){const k=h==="y"?"top":"left",w=h==="y"?"bottom":"right",_=v+p[k],N=v-p[w];v=Xf(_,v,N)}const y=d.fn({...t,[g]:x,[h]:v});return{...y,data:{x:y.x-n,y:y.y-a,enabled:{[g]:l,[h]:c}}}}}},u9=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:a,placement:i,rects:l,middlewareData:c}=t,{offset:d=0,mainAxis:u=!0,crossAxis:m=!0}=dr(e,t),p={x:n,y:a},h=$s(i),g=op(h);let x=p[g],v=p[h];const y=dr(d,t),k=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(u){const N=g==="y"?"height":"width",T=l.reference[g]-l.floating[N]+k.mainAxis,B=l.reference[g]+l.reference[N]-k.mainAxis;x<T?x=T:x>B&&(x=B)}if(m){var w,_;const N=g==="y"?"width":"height",T=zv.has(ur(i)),B=l.reference[h]-l.floating[N]+(T&&((w=c.offset)==null?void 0:w[h])||0)+(T?0:k.crossAxis),O=l.reference[h]+l.reference[N]+(T?0:((_=c.offset)==null?void 0:_[h])||0)-(T?k.crossAxis:0);v<B?v=B:v>O&&(v=O)}return{[g]:x,[h]:v}}}},f9=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,a;const{placement:i,rects:l,platform:c,elements:d}=t,{apply:u=()=>{},...m}=dr(e,t),p=await _o(t,m),h=ur(i),g=Ai(i),x=$s(i)==="y",{width:v,height:y}=l.floating;let k,w;h==="top"||h==="bottom"?(k=h,w=g===(await(c.isRTL==null?void 0:c.isRTL(d.floating))?"start":"end")?"left":"right"):(w=h,k=g==="end"?"top":"bottom");const _=y-p.top-p.bottom,N=v-p.left-p.right,T=Rr(y-p[k],_),B=Rr(v-p[w],N),O=!t.middlewareData.shift;let $=T,P=B;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(P=N),(a=t.middlewareData.shift)!=null&&a.enabled.y&&($=_),O&&!g){const H=ns(p.left,0),Y=ns(p.right,0),E=ns(p.top,0),D=ns(p.bottom,0);x?P=v-2*(H!==0||Y!==0?H+Y:ns(p.left,p.right)):$=y-2*(E!==0||D!==0?E+D:ns(p.top,p.bottom))}await u({...t,availableWidth:P,availableHeight:$});const A=await c.getDimensions(d.floating);return v!==A.width||y!==A.height?{reset:{rects:!0}}:{}}}};function qc(){return typeof window<"u"}function Ti(e){return Vv(e)?(e.nodeName||"").toLowerCase():"#document"}function ss(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Zs(e){var t;return(t=(Vv(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Vv(e){return qc()?e instanceof Node||e instanceof ss(e).Node:!1}function Es(e){return qc()?e instanceof Element||e instanceof ss(e).Element:!1}function qs(e){return qc()?e instanceof HTMLElement||e instanceof ss(e).HTMLElement:!1}function Xx(e){return!qc()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ss(e).ShadowRoot}const h9=new Set(["inline","contents"]);function Io(e){const{overflow:t,overflowX:n,overflowY:a,display:i}=As(e);return/auto|scroll|overlay|hidden|clip/.test(t+a+n)&&!h9.has(i)}const p9=new Set(["table","td","th"]);function m9(e){return p9.has(Ti(e))}const g9=[":popover-open",":modal"];function Yc(e){return g9.some(t=>{try{return e.matches(t)}catch{return!1}})}const x9=["transform","translate","scale","rotate","perspective"],b9=["transform","translate","scale","rotate","perspective","filter"],y9=["paint","layout","strict","content"];function dp(e){const t=up(),n=Es(e)?As(e):e;return x9.some(a=>n[a]?n[a]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||b9.some(a=>(n.willChange||"").includes(a))||y9.some(a=>(n.contain||"").includes(a))}function v9(e){let t=Br(e);for(;qs(t)&&!vi(t);){if(dp(t))return t;if(Yc(t))return null;t=Br(t)}return null}function up(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const w9=new Set(["html","body","#document"]);function vi(e){return w9.has(Ti(e))}function As(e){return ss(e).getComputedStyle(e)}function Zc(e){return Es(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Br(e){if(Ti(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Xx(e)&&e.host||Zs(e);return Xx(t)?t.host:t}function $v(e){const t=Br(e);return vi(t)?e.ownerDocument?e.ownerDocument.body:e.body:qs(t)&&Io(t)?t:$v(t)}function Eo(e,t,n){var a;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=$v(e),l=i===((a=e.ownerDocument)==null?void 0:a.body),c=ss(i);if(l){const d=eh(c);return t.concat(c,c.visualViewport||[],Io(i)?i:[],d&&n?Eo(d):[])}return t.concat(i,Eo(i,[],n))}function eh(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Hv(e){const t=As(e);let n=parseFloat(t.width)||0,a=parseFloat(t.height)||0;const i=qs(e),l=i?e.offsetWidth:n,c=i?e.offsetHeight:a,d=Ac(n)!==l||Ac(a)!==c;return d&&(n=l,a=c),{width:n,height:a,$:d}}function fp(e){return Es(e)?e:e.contextElement}function gi(e){const t=fp(e);if(!qs(t))return Ks(1);const n=t.getBoundingClientRect(),{width:a,height:i,$:l}=Hv(t);let c=(l?Ac(n.width):n.width)/a,d=(l?Ac(n.height):n.height)/i;return(!c||!Number.isFinite(c))&&(c=1),(!d||!Number.isFinite(d))&&(d=1),{x:c,y:d}}const S9=Ks(0);function Uv(e){const t=ss(e);return!up()||!t.visualViewport?S9:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function k9(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ss(e)?!1:t}function Sa(e,t,n,a){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),l=fp(e);let c=Ks(1);t&&(a?Es(a)&&(c=gi(a)):c=gi(e));const d=k9(l,n,a)?Uv(l):Ks(0);let u=(i.left+d.x)/c.x,m=(i.top+d.y)/c.y,p=i.width/c.x,h=i.height/c.y;if(l){const g=ss(l),x=a&&Es(a)?ss(a):a;let v=g,y=eh(v);for(;y&&a&&x!==v;){const k=gi(y),w=y.getBoundingClientRect(),_=As(y),N=w.left+(y.clientLeft+parseFloat(_.paddingLeft))*k.x,T=w.top+(y.clientTop+parseFloat(_.paddingTop))*k.y;u*=k.x,m*=k.y,p*=k.x,h*=k.y,u+=N,m+=T,v=ss(y),y=eh(v)}}return Dc({width:p,height:h,x:u,y:m})}function Qc(e,t){const n=Zc(e).scrollLeft;return t?t.left+n:Sa(Zs(e)).left+n}function Wv(e,t){const n=e.getBoundingClientRect(),a=n.left+t.scrollLeft-Qc(e,n),i=n.top+t.scrollTop;return{x:a,y:i}}function C9(e){let{elements:t,rect:n,offsetParent:a,strategy:i}=e;const l=i==="fixed",c=Zs(a),d=t?Yc(t.floating):!1;if(a===c||d&&l)return n;let u={scrollLeft:0,scrollTop:0},m=Ks(1);const p=Ks(0),h=qs(a);if((h||!h&&!l)&&((Ti(a)!=="body"||Io(c))&&(u=Zc(a)),qs(a))){const x=Sa(a);m=gi(a),p.x=x.x+a.clientLeft,p.y=x.y+a.clientTop}const g=c&&!h&&!l?Wv(c,u):Ks(0);return{width:n.width*m.x,height:n.height*m.y,x:n.x*m.x-u.scrollLeft*m.x+p.x+g.x,y:n.y*m.y-u.scrollTop*m.y+p.y+g.y}}function j9(e){return Array.from(e.getClientRects())}function N9(e){const t=Zs(e),n=Zc(e),a=e.ownerDocument.body,i=ns(t.scrollWidth,t.clientWidth,a.scrollWidth,a.clientWidth),l=ns(t.scrollHeight,t.clientHeight,a.scrollHeight,a.clientHeight);let c=-n.scrollLeft+Qc(e);const d=-n.scrollTop;return As(a).direction==="rtl"&&(c+=ns(t.clientWidth,a.clientWidth)-i),{width:i,height:l,x:c,y:d}}const Jx=25;function _9(e,t){const n=ss(e),a=Zs(e),i=n.visualViewport;let l=a.clientWidth,c=a.clientHeight,d=0,u=0;if(i){l=i.width,c=i.height;const p=up();(!p||p&&t==="fixed")&&(d=i.offsetLeft,u=i.offsetTop)}const m=Qc(a);if(m<=0){const p=a.ownerDocument,h=p.body,g=getComputedStyle(h),x=p.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,v=Math.abs(a.clientWidth-h.clientWidth-x);v<=Jx&&(l-=v)}else m<=Jx&&(l+=m);return{width:l,height:c,x:d,y:u}}const E9=new Set(["absolute","fixed"]);function A9(e,t){const n=Sa(e,!0,t==="fixed"),a=n.top+e.clientTop,i=n.left+e.clientLeft,l=qs(e)?gi(e):Ks(1),c=e.clientWidth*l.x,d=e.clientHeight*l.y,u=i*l.x,m=a*l.y;return{width:c,height:d,x:u,y:m}}function e1(e,t,n){let a;if(t==="viewport")a=_9(e,n);else if(t==="document")a=N9(Zs(e));else if(Es(t))a=A9(t,n);else{const i=Uv(e);a={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return Dc(a)}function Kv(e,t){const n=Br(e);return n===t||!Es(n)||vi(n)?!1:As(n).position==="fixed"||Kv(n,t)}function T9(e,t){const n=t.get(e);if(n)return n;let a=Eo(e,[],!1).filter(d=>Es(d)&&Ti(d)!=="body"),i=null;const l=As(e).position==="fixed";let c=l?Br(e):e;for(;Es(c)&&!vi(c);){const d=As(c),u=dp(c);!u&&d.position==="fixed"&&(i=null),(l?!u&&!i:!u&&d.position==="static"&&!!i&&E9.has(i.position)||Io(c)&&!u&&Kv(e,c))?a=a.filter(p=>p!==c):i=d,c=Br(c)}return t.set(e,a),a}function D9(e){let{element:t,boundary:n,rootBoundary:a,strategy:i}=e;const c=[...n==="clippingAncestors"?Yc(t)?[]:T9(t,this._c):[].concat(n),a],d=c[0],u=c.reduce((m,p)=>{const h=e1(t,p,i);return m.top=ns(h.top,m.top),m.right=Rr(h.right,m.right),m.bottom=Rr(h.bottom,m.bottom),m.left=ns(h.left,m.left),m},e1(t,d,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function M9(e){const{width:t,height:n}=Hv(e);return{width:t,height:n}}function P9(e,t,n){const a=qs(t),i=Zs(t),l=n==="fixed",c=Sa(e,!0,l,t);let d={scrollLeft:0,scrollTop:0};const u=Ks(0);function m(){u.x=Qc(i)}if(a||!a&&!l)if((Ti(t)!=="body"||Io(i))&&(d=Zc(t)),a){const x=Sa(t,!0,l,t);u.x=x.x+t.clientLeft,u.y=x.y+t.clientTop}else i&&m();l&&!a&&i&&m();const p=i&&!a&&!l?Wv(i,d):Ks(0),h=c.left+d.scrollLeft-u.x-p.x,g=c.top+d.scrollTop-u.y-p.y;return{x:h,y:g,width:c.width,height:c.height}}function bf(e){return As(e).position==="static"}function t1(e,t){if(!qs(e)||As(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Zs(e)===n&&(n=n.ownerDocument.body),n}function Gv(e,t){const n=ss(e);if(Yc(e))return n;if(!qs(e)){let i=Br(e);for(;i&&!vi(i);){if(Es(i)&&!bf(i))return i;i=Br(i)}return n}let a=t1(e,t);for(;a&&m9(a)&&bf(a);)a=t1(a,t);return a&&vi(a)&&bf(a)&&!dp(a)?n:a||v9(e)||n}const I9=async function(e){const t=this.getOffsetParent||Gv,n=this.getDimensions,a=await n(e.floating);return{reference:P9(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function F9(e){return As(e).direction==="rtl"}const R9={convertOffsetParentRelativeRectToViewportRelativeRect:C9,getDocumentElement:Zs,getClippingRect:D9,getOffsetParent:Gv,getElementRects:I9,getClientRects:j9,getDimensions:M9,getScale:gi,isElement:Es,isRTL:F9};function qv(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function B9(e,t){let n=null,a;const i=Zs(e);function l(){var d;clearTimeout(a),(d=n)==null||d.disconnect(),n=null}function c(d,u){d===void 0&&(d=!1),u===void 0&&(u=1),l();const m=e.getBoundingClientRect(),{left:p,top:h,width:g,height:x}=m;if(d||t(),!g||!x)return;const v=sc(h),y=sc(i.clientWidth-(p+g)),k=sc(i.clientHeight-(h+x)),w=sc(p),N={rootMargin:-v+"px "+-y+"px "+-k+"px "+-w+"px",threshold:ns(0,Rr(1,u))||1};let T=!0;function B(O){const $=O[0].intersectionRatio;if($!==u){if(!T)return c();$?c(!1,$):a=setTimeout(()=>{c(!1,1e-7)},1e3)}$===1&&!qv(m,e.getBoundingClientRect())&&c(),T=!1}try{n=new IntersectionObserver(B,{...N,root:i.ownerDocument})}catch{n=new IntersectionObserver(B,N)}n.observe(e)}return c(!0),l}function L9(e,t,n,a){a===void 0&&(a={});const{ancestorScroll:i=!0,ancestorResize:l=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:u=!1}=a,m=fp(e),p=i||l?[...m?Eo(m):[],...Eo(t)]:[];p.forEach(w=>{i&&w.addEventListener("scroll",n,{passive:!0}),l&&w.addEventListener("resize",n)});const h=m&&d?B9(m,n):null;let g=-1,x=null;c&&(x=new ResizeObserver(w=>{let[_]=w;_&&_.target===m&&x&&(x.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var N;(N=x)==null||N.observe(t)})),n()}),m&&!u&&x.observe(m),x.observe(t));let v,y=u?Sa(e):null;u&&k();function k(){const w=Sa(e);y&&!qv(y,w)&&n(),y=w,v=requestAnimationFrame(k)}return n(),()=>{var w;p.forEach(_=>{i&&_.removeEventListener("scroll",n),l&&_.removeEventListener("resize",n)}),h?.(),(w=x)==null||w.disconnect(),x=null,u&&cancelAnimationFrame(v)}}const O9=c9,z9=d9,V9=i9,$9=f9,H9=o9,n1=a9,U9=u9,W9=(e,t,n)=>{const a=new Map,i={platform:R9,...n},l={...i.platform,_c:a};return r9(e,t,{...i,platform:l})};var K9=typeof document<"u",G9=function(){},hc=K9?C.useLayoutEffect:G9;function Mc(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,a,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(a=n;a--!==0;)if(!Mc(e[a],t[a]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(a=n;a--!==0;)if(!{}.hasOwnProperty.call(t,i[a]))return!1;for(a=n;a--!==0;){const l=i[a];if(!(l==="_owner"&&e.$$typeof)&&!Mc(e[l],t[l]))return!1}return!0}return e!==e&&t!==t}function Yv(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function s1(e,t){const n=Yv(e);return Math.round(t*n)/n}function yf(e){const t=C.useRef(e);return hc(()=>{t.current=e}),t}function q9(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:a=[],platform:i,elements:{reference:l,floating:c}={},transform:d=!0,whileElementsMounted:u,open:m}=e,[p,h]=C.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[g,x]=C.useState(a);Mc(g,a)||x(a);const[v,y]=C.useState(null),[k,w]=C.useState(null),_=C.useCallback(K=>{K!==O.current&&(O.current=K,y(K))},[]),N=C.useCallback(K=>{K!==$.current&&($.current=K,w(K))},[]),T=l||v,B=c||k,O=C.useRef(null),$=C.useRef(null),P=C.useRef(p),A=u!=null,H=yf(u),Y=yf(i),E=yf(m),D=C.useCallback(()=>{if(!O.current||!$.current)return;const K={placement:t,strategy:n,middleware:g};Y.current&&(K.platform=Y.current),W9(O.current,$.current,K).then(G=>{const Z={...G,isPositioned:E.current!==!1};S.current&&!Mc(P.current,Z)&&(P.current=Z,Vs.flushSync(()=>{h(Z)}))})},[g,t,n,Y,E]);hc(()=>{m===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,h(K=>({...K,isPositioned:!1})))},[m]);const S=C.useRef(!1);hc(()=>(S.current=!0,()=>{S.current=!1}),[]),hc(()=>{if(T&&(O.current=T),B&&($.current=B),T&&B){if(H.current)return H.current(T,B,D);D()}},[T,B,D,H,A]);const z=C.useMemo(()=>({reference:O,floating:$,setReference:_,setFloating:N}),[_,N]),L=C.useMemo(()=>({reference:T,floating:B}),[T,B]),F=C.useMemo(()=>{const K={position:n,left:0,top:0};if(!L.floating)return K;const G=s1(L.floating,p.x),Z=s1(L.floating,p.y);return d?{...K,transform:"translate("+G+"px, "+Z+"px)",...Yv(L.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:G,top:Z}},[n,d,L.floating,p.x,p.y]);return C.useMemo(()=>({...p,update:D,refs:z,elements:L,floatingStyles:F}),[p,D,z,L,F])}const Y9=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:a,padding:i}=typeof e=="function"?e(n):e;return a&&t(a)?a.current!=null?n1({element:a.current,padding:i}).fn(n):{}:a?n1({element:a,padding:i}).fn(n):{}}}},Z9=(e,t)=>({...O9(e),options:[e,t]}),Q9=(e,t)=>({...z9(e),options:[e,t]}),X9=(e,t)=>({...U9(e),options:[e,t]}),J9=(e,t)=>({...V9(e),options:[e,t]}),eT=(e,t)=>({...$9(e),options:[e,t]}),tT=(e,t)=>({...H9(e),options:[e,t]}),nT=(e,t)=>({...Y9(e),options:[e,t]});var sT="Arrow",Zv=C.forwardRef((e,t)=>{const{children:n,width:a=10,height:i=5,...l}=e;return s.jsx(jt.svg,{...l,ref:t,width:a,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});Zv.displayName=sT;var rT=Zv,hp="Popper",[Qv,Xv]=Ci(hp),[aT,Jv]=Qv(hp),e2=e=>{const{__scopePopper:t,children:n}=e,[a,i]=C.useState(null);return s.jsx(aT,{scope:t,anchor:a,onAnchorChange:i,children:n})};e2.displayName=hp;var t2="PopperAnchor",n2=C.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:a,...i}=e,l=Jv(t2,n),c=C.useRef(null),d=Bt(t,c),u=C.useRef(null);return C.useEffect(()=>{const m=u.current;u.current=a?.current||c.current,m!==u.current&&l.onAnchorChange(u.current)}),a?null:s.jsx(jt.div,{...i,ref:d})});n2.displayName=t2;var pp="PopperContent",[iT,oT]=Qv(pp),s2=C.forwardRef((e,t)=>{const{__scopePopper:n,side:a="bottom",sideOffset:i=0,align:l="center",alignOffset:c=0,arrowPadding:d=0,avoidCollisions:u=!0,collisionBoundary:m=[],collisionPadding:p=0,sticky:h="partial",hideWhenDetached:g=!1,updatePositionStrategy:x="optimized",onPlaced:v,...y}=e,k=Jv(pp,n),[w,_]=C.useState(null),N=Bt(t,oe=>_(oe)),[T,B]=C.useState(null),O=Pv(T),$=O?.width??0,P=O?.height??0,A=a+(l!=="center"?"-"+l:""),H=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},Y=Array.isArray(m)?m:[m],E=Y.length>0,D={padding:H,boundary:Y.filter(cT),altBoundary:E},{refs:S,floatingStyles:z,placement:L,isPositioned:F,middlewareData:K}=q9({strategy:"fixed",placement:A,whileElementsMounted:(...oe)=>L9(...oe,{animationFrame:x==="always"}),elements:{reference:k.anchor},middleware:[Z9({mainAxis:i+P,alignmentAxis:c}),u&&Q9({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?X9():void 0,...D}),u&&J9({...D}),eT({...D,apply:({elements:oe,rects:ne,availableWidth:ae,availableHeight:ve})=>{const{width:se,height:xe}=ne.reference,Ie=oe.floating.style;Ie.setProperty("--radix-popper-available-width",`${ae}px`),Ie.setProperty("--radix-popper-available-height",`${ve}px`),Ie.setProperty("--radix-popper-anchor-width",`${se}px`),Ie.setProperty("--radix-popper-anchor-height",`${xe}px`)}}),T&&nT({element:T,padding:d}),dT({arrowWidth:$,arrowHeight:P}),g&&tT({strategy:"referenceHidden",...D})]}),[G,Z]=i2(L),R=ya(v);An(()=>{F&&R?.()},[F,R]);const V=K.arrow?.x,ee=K.arrow?.y,W=K.arrow?.centerOffset!==0,[U,Q]=C.useState();return An(()=>{w&&Q(window.getComputedStyle(w).zIndex)},[w]),s.jsx("div",{ref:S.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:F?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:U,"--radix-popper-transform-origin":[K.transformOrigin?.x,K.transformOrigin?.y].join(" "),...K.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(iT,{scope:n,placedSide:G,onArrowChange:B,arrowX:V,arrowY:ee,shouldHideArrow:W,children:s.jsx(jt.div,{"data-side":G,"data-align":Z,...y,ref:N,style:{...y.style,animation:F?void 0:"none"}})})})});s2.displayName=pp;var r2="PopperArrow",lT={top:"bottom",right:"left",bottom:"top",left:"right"},a2=C.forwardRef(function(t,n){const{__scopePopper:a,...i}=t,l=oT(r2,a),c=lT[l.placedSide];return s.jsx("span",{ref:l.onArrowChange,style:{position:"absolute",left:l.arrowX,top:l.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[l.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[l.placedSide],visibility:l.shouldHideArrow?"hidden":void 0},children:s.jsx(rT,{...i,ref:n,style:{...i.style,display:"block"}})})});a2.displayName=r2;function cT(e){return e!==null}var dT=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:a,middlewareData:i}=t,c=i.arrow?.centerOffset!==0,d=c?0:e.arrowWidth,u=c?0:e.arrowHeight,[m,p]=i2(n),h={start:"0%",center:"50%",end:"100%"}[p],g=(i.arrow?.x??0)+d/2,x=(i.arrow?.y??0)+u/2;let v="",y="";return m==="bottom"?(v=c?h:`${g}px`,y=`${-u}px`):m==="top"?(v=c?h:`${g}px`,y=`${a.floating.height+u}px`):m==="right"?(v=`${-u}px`,y=c?h:`${x}px`):m==="left"&&(v=`${a.floating.width+u}px`,y=c?h:`${x}px`),{data:{x:v,y}}}});function i2(e){const[t,n="center"]=e.split("-");return[t,n]}var uT=e2,fT=n2,hT=s2,pT=a2;function mT(e){const t=gT(e),n=C.forwardRef((a,i)=>{const{children:l,...c}=a,d=C.Children.toArray(l),u=d.find(bT);if(u){const m=u.props.children,p=d.map(h=>h===u?C.Children.count(m)>1?C.Children.only(null):C.isValidElement(m)?m.props.children:null:h);return s.jsx(t,{...c,ref:i,children:C.isValidElement(m)?C.cloneElement(m,void 0,p):null})}return s.jsx(t,{...c,ref:i,children:l})});return n.displayName=`${e}.Slot`,n}function gT(e){const t=C.forwardRef((n,a)=>{const{children:i,...l}=n;if(C.isValidElement(i)){const c=vT(i),d=yT(l,i.props);return i.type!==C.Fragment&&(d.ref=a?Po(a,c):c),C.cloneElement(i,d)}return C.Children.count(i)>1?C.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var xT=Symbol("radix.slottable");function bT(e){return C.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===xT}function yT(e,t){const n={...t};for(const a in t){const i=e[a],l=t[a];/^on[A-Z]/.test(a)?i&&l?n[a]=(...d)=>{const u=l(...d);return i(...d),u}:i&&(n[a]=i):a==="style"?n[a]={...i,...l}:a==="className"&&(n[a]=[i,l].filter(Boolean).join(" "))}return{...e,...n}}function vT(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var o2=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),wT="VisuallyHidden",ST=C.forwardRef((e,t)=>s.jsx(jt.span,{...e,ref:t,style:{...o2,...e.style}}));ST.displayName=wT;var kT=[" ","Enter","ArrowUp","ArrowDown"],CT=[" ","Enter"],ka="Select",[Xc,Jc,jT]=U7(ka),[Di]=Ci(ka,[jT,Xv]),ed=Xv(),[NT,Or]=Di(ka),[_T,ET]=Di(ka),l2=e=>{const{__scopeSelect:t,children:n,open:a,defaultOpen:i,onOpenChange:l,value:c,defaultValue:d,onValueChange:u,dir:m,name:p,autoComplete:h,disabled:g,required:x,form:v}=e,y=ed(t),[k,w]=C.useState(null),[_,N]=C.useState(null),[T,B]=C.useState(!1),O=K7(m),[$,P]=vc({prop:a,defaultProp:i??!1,onChange:l,caller:ka}),[A,H]=vc({prop:c,defaultProp:d,onChange:u,caller:ka}),Y=C.useRef(null),E=k?v||!!k.closest("form"):!0,[D,S]=C.useState(new Set),z=Array.from(D).map(L=>L.props.value).join(";");return s.jsx(uT,{...y,children:s.jsxs(NT,{required:x,scope:t,trigger:k,onTriggerChange:w,valueNode:_,onValueNodeChange:N,valueNodeHasChildren:T,onValueNodeHasChildrenChange:B,contentId:fi(),value:A,onValueChange:H,open:$,onOpenChange:P,dir:O,triggerPointerDownPosRef:Y,disabled:g,children:[s.jsx(Xc.Provider,{scope:t,children:s.jsx(_T,{scope:e.__scopeSelect,onNativeOptionAdd:C.useCallback(L=>{S(F=>new Set(F).add(L))},[]),onNativeOptionRemove:C.useCallback(L=>{S(F=>{const K=new Set(F);return K.delete(L),K})},[]),children:n})}),E?s.jsxs(T2,{"aria-hidden":!0,required:x,tabIndex:-1,name:p,autoComplete:h,value:A,onChange:L=>H(L.target.value),disabled:g,form:v,children:[A===void 0?s.jsx("option",{value:""}):null,Array.from(D)]},z):null]})})};l2.displayName=ka;var c2="SelectTrigger",d2=C.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:a=!1,...i}=e,l=ed(n),c=Or(c2,n),d=c.disabled||a,u=Bt(t,c.onTriggerChange),m=Jc(n),p=C.useRef("touch"),[h,g,x]=M2(y=>{const k=m().filter(N=>!N.disabled),w=k.find(N=>N.value===c.value),_=P2(k,y,w);_!==void 0&&c.onValueChange(_.value)}),v=y=>{d||(c.onOpenChange(!0),x()),y&&(c.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return s.jsx(fT,{asChild:!0,...l,children:s.jsx(jt.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:d,"data-disabled":d?"":void 0,"data-placeholder":D2(c.value)?"":void 0,...i,ref:u,onClick:_t(i.onClick,y=>{y.currentTarget.focus(),p.current!=="mouse"&&v(y)}),onPointerDown:_t(i.onPointerDown,y=>{p.current=y.pointerType;const k=y.target;k.hasPointerCapture(y.pointerId)&&k.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(v(y),y.preventDefault())}),onKeyDown:_t(i.onKeyDown,y=>{const k=h.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&g(y.key),!(k&&y.key===" ")&&kT.includes(y.key)&&(v(),y.preventDefault())})})})});d2.displayName=c2;var u2="SelectValue",f2=C.forwardRef((e,t)=>{const{__scopeSelect:n,className:a,style:i,children:l,placeholder:c="",...d}=e,u=Or(u2,n),{onValueNodeHasChildrenChange:m}=u,p=l!==void 0,h=Bt(t,u.onValueNodeChange);return An(()=>{m(p)},[m,p]),s.jsx(jt.span,{...d,ref:h,style:{pointerEvents:"none"},children:D2(u.value)?s.jsx(s.Fragment,{children:c}):l})});f2.displayName=u2;var AT="SelectIcon",h2=C.forwardRef((e,t)=>{const{__scopeSelect:n,children:a,...i}=e;return s.jsx(jt.span,{"aria-hidden":!0,...i,ref:t,children:a||""})});h2.displayName=AT;var TT="SelectPortal",p2=e=>s.jsx(Hh,{asChild:!0,...e});p2.displayName=TT;var Ca="SelectContent",m2=C.forwardRef((e,t)=>{const n=Or(Ca,e.__scopeSelect),[a,i]=C.useState();if(An(()=>{i(new DocumentFragment)},[]),!n.open){const l=a;return l?Vs.createPortal(s.jsx(g2,{scope:e.__scopeSelect,children:s.jsx(Xc.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),l):null}return s.jsx(x2,{...e,ref:t})});m2.displayName=Ca;var _s=10,[g2,zr]=Di(Ca),DT="SelectContentImpl",MT=mT("SelectContent.RemoveScroll"),x2=C.forwardRef((e,t)=>{const{__scopeSelect:n,position:a="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:l,onPointerDownOutside:c,side:d,sideOffset:u,align:m,alignOffset:p,arrowPadding:h,collisionBoundary:g,collisionPadding:x,sticky:v,hideWhenDetached:y,avoidCollisions:k,...w}=e,_=Or(Ca,n),[N,T]=C.useState(null),[B,O]=C.useState(null),$=Bt(t,oe=>T(oe)),[P,A]=C.useState(null),[H,Y]=C.useState(null),E=Jc(n),[D,S]=C.useState(!1),z=C.useRef(!1);C.useEffect(()=>{if(N)return ny(N)},[N]),Gb();const L=C.useCallback(oe=>{const[ne,...ae]=E().map(xe=>xe.ref.current),[ve]=ae.slice(-1),se=document.activeElement;for(const xe of oe)if(xe===se||(xe?.scrollIntoView({block:"nearest"}),xe===ne&&B&&(B.scrollTop=0),xe===ve&&B&&(B.scrollTop=B.scrollHeight),xe?.focus(),document.activeElement!==se))return},[E,B]),F=C.useCallback(()=>L([P,N]),[L,P,N]);C.useEffect(()=>{D&&F()},[D,F]);const{onOpenChange:K,triggerPointerDownPosRef:G}=_;C.useEffect(()=>{if(N){let oe={x:0,y:0};const ne=ve=>{oe={x:Math.abs(Math.round(ve.pageX)-(G.current?.x??0)),y:Math.abs(Math.round(ve.pageY)-(G.current?.y??0))}},ae=ve=>{oe.x<=10&&oe.y<=10?ve.preventDefault():N.contains(ve.target)||K(!1),document.removeEventListener("pointermove",ne),G.current=null};return G.current!==null&&(document.addEventListener("pointermove",ne),document.addEventListener("pointerup",ae,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ne),document.removeEventListener("pointerup",ae,{capture:!0})}}},[N,K,G]),C.useEffect(()=>{const oe=()=>K(!1);return window.addEventListener("blur",oe),window.addEventListener("resize",oe),()=>{window.removeEventListener("blur",oe),window.removeEventListener("resize",oe)}},[K]);const[Z,R]=M2(oe=>{const ne=E().filter(se=>!se.disabled),ae=ne.find(se=>se.ref.current===document.activeElement),ve=P2(ne,oe,ae);ve&&setTimeout(()=>ve.ref.current.focus())}),V=C.useCallback((oe,ne,ae)=>{const ve=!z.current&&!ae;(_.value!==void 0&&_.value===ne||ve)&&(A(oe),ve&&(z.current=!0))},[_.value]),ee=C.useCallback(()=>N?.focus(),[N]),W=C.useCallback((oe,ne,ae)=>{const ve=!z.current&&!ae;(_.value!==void 0&&_.value===ne||ve)&&Y(oe)},[_.value]),U=a==="popper"?th:b2,Q=U===th?{side:d,sideOffset:u,align:m,alignOffset:p,arrowPadding:h,collisionBoundary:g,collisionPadding:x,sticky:v,hideWhenDetached:y,avoidCollisions:k}:{};return s.jsx(g2,{scope:n,content:N,viewport:B,onViewportChange:O,itemRefCallback:V,selectedItem:P,onItemLeave:ee,itemTextRefCallback:W,focusSelectedItem:F,selectedItemText:H,position:a,isPositioned:D,searchRef:Z,children:s.jsx(Uh,{as:MT,allowPinchZoom:!0,children:s.jsx($h,{asChild:!0,trapped:_.open,onMountAutoFocus:oe=>{oe.preventDefault()},onUnmountAutoFocus:_t(i,oe=>{_.trigger?.focus({preventScroll:!0}),oe.preventDefault()}),children:s.jsx(Vh,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:oe=>oe.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:s.jsx(U,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:oe=>oe.preventDefault(),...w,...Q,onPlaced:()=>S(!0),ref:$,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:_t(w.onKeyDown,oe=>{const ne=oe.ctrlKey||oe.altKey||oe.metaKey;if(oe.key==="Tab"&&oe.preventDefault(),!ne&&oe.key.length===1&&R(oe.key),["ArrowUp","ArrowDown","Home","End"].includes(oe.key)){let ve=E().filter(se=>!se.disabled).map(se=>se.ref.current);if(["ArrowUp","End"].includes(oe.key)&&(ve=ve.slice().reverse()),["ArrowUp","ArrowDown"].includes(oe.key)){const se=oe.target,xe=ve.indexOf(se);ve=ve.slice(xe+1)}setTimeout(()=>L(ve)),oe.preventDefault()}})})})})})})});x2.displayName=DT;var PT="SelectItemAlignedPosition",b2=C.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:a,...i}=e,l=Or(Ca,n),c=zr(Ca,n),[d,u]=C.useState(null),[m,p]=C.useState(null),h=Bt(t,$=>p($)),g=Jc(n),x=C.useRef(!1),v=C.useRef(!0),{viewport:y,selectedItem:k,selectedItemText:w,focusSelectedItem:_}=c,N=C.useCallback(()=>{if(l.trigger&&l.valueNode&&d&&m&&y&&k&&w){const $=l.trigger.getBoundingClientRect(),P=m.getBoundingClientRect(),A=l.valueNode.getBoundingClientRect(),H=w.getBoundingClientRect();if(l.dir!=="rtl"){const se=H.left-P.left,xe=A.left-se,Ie=$.left-xe,I=$.width+Ie,me=Math.max(I,P.width),he=window.innerWidth-_s,J=Wx(xe,[_s,Math.max(_s,he-me)]);d.style.minWidth=I+"px",d.style.left=J+"px"}else{const se=P.right-H.right,xe=window.innerWidth-A.right-se,Ie=window.innerWidth-$.right-xe,I=$.width+Ie,me=Math.max(I,P.width),he=window.innerWidth-_s,J=Wx(xe,[_s,Math.max(_s,he-me)]);d.style.minWidth=I+"px",d.style.right=J+"px"}const Y=g(),E=window.innerHeight-_s*2,D=y.scrollHeight,S=window.getComputedStyle(m),z=parseInt(S.borderTopWidth,10),L=parseInt(S.paddingTop,10),F=parseInt(S.borderBottomWidth,10),K=parseInt(S.paddingBottom,10),G=z+L+D+K+F,Z=Math.min(k.offsetHeight*5,G),R=window.getComputedStyle(y),V=parseInt(R.paddingTop,10),ee=parseInt(R.paddingBottom,10),W=$.top+$.height/2-_s,U=E-W,Q=k.offsetHeight/2,oe=k.offsetTop+Q,ne=z+L+oe,ae=G-ne;if(ne<=W){const se=Y.length>0&&k===Y[Y.length-1].ref.current;d.style.bottom="0px";const xe=m.clientHeight-y.offsetTop-y.offsetHeight,Ie=Math.max(U,Q+(se?ee:0)+xe+F),I=ne+Ie;d.style.height=I+"px"}else{const se=Y.length>0&&k===Y[0].ref.current;d.style.top="0px";const Ie=Math.max(W,z+y.offsetTop+(se?V:0)+Q)+ae;d.style.height=Ie+"px",y.scrollTop=ne-W+y.offsetTop}d.style.margin=`${_s}px 0`,d.style.minHeight=Z+"px",d.style.maxHeight=E+"px",a?.(),requestAnimationFrame(()=>x.current=!0)}},[g,l.trigger,l.valueNode,d,m,y,k,w,l.dir,a]);An(()=>N(),[N]);const[T,B]=C.useState();An(()=>{m&&B(window.getComputedStyle(m).zIndex)},[m]);const O=C.useCallback($=>{$&&v.current===!0&&(N(),_?.(),v.current=!1)},[N,_]);return s.jsx(FT,{scope:n,contentWrapper:d,shouldExpandOnScrollRef:x,onScrollButtonChange:O,children:s.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:T},children:s.jsx(jt.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});b2.displayName=PT;var IT="SelectPopperPosition",th=C.forwardRef((e,t)=>{const{__scopeSelect:n,align:a="start",collisionPadding:i=_s,...l}=e,c=ed(n);return s.jsx(hT,{...c,...l,ref:t,align:a,collisionPadding:i,style:{boxSizing:"border-box",...l.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});th.displayName=IT;var[FT,mp]=Di(Ca,{}),nh="SelectViewport",y2=C.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:a,...i}=e,l=zr(nh,n),c=mp(nh,n),d=Bt(t,l.onViewportChange),u=C.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),s.jsx(Xc.Slot,{scope:n,children:s.jsx(jt.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:d,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:_t(i.onScroll,m=>{const p=m.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:g}=c;if(g?.current&&h){const x=Math.abs(u.current-p.scrollTop);if(x>0){const v=window.innerHeight-_s*2,y=parseFloat(h.style.minHeight),k=parseFloat(h.style.height),w=Math.max(y,k);if(w<v){const _=w+x,N=Math.min(v,_),T=_-N;h.style.height=N+"px",h.style.bottom==="0px"&&(p.scrollTop=T>0?T:0,h.style.justifyContent="flex-end")}}}u.current=p.scrollTop})})})]})});y2.displayName=nh;var v2="SelectGroup",[RT,BT]=Di(v2),LT=C.forwardRef((e,t)=>{const{__scopeSelect:n,...a}=e,i=fi();return s.jsx(RT,{scope:n,id:i,children:s.jsx(jt.div,{role:"group","aria-labelledby":i,...a,ref:t})})});LT.displayName=v2;var w2="SelectLabel",OT=C.forwardRef((e,t)=>{const{__scopeSelect:n,...a}=e,i=BT(w2,n);return s.jsx(jt.div,{id:i.id,...a,ref:t})});OT.displayName=w2;var Pc="SelectItem",[zT,S2]=Di(Pc),k2=C.forwardRef((e,t)=>{const{__scopeSelect:n,value:a,disabled:i=!1,textValue:l,...c}=e,d=Or(Pc,n),u=zr(Pc,n),m=d.value===a,[p,h]=C.useState(l??""),[g,x]=C.useState(!1),v=Bt(t,_=>u.itemRefCallback?.(_,a,i)),y=fi(),k=C.useRef("touch"),w=()=>{i||(d.onValueChange(a),d.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(zT,{scope:n,value:a,disabled:i,textId:y,isSelected:m,onItemTextChange:C.useCallback(_=>{h(N=>N||(_?.textContent??"").trim())},[]),children:s.jsx(Xc.ItemSlot,{scope:n,value:a,disabled:i,textValue:p,children:s.jsx(jt.div,{role:"option","aria-labelledby":y,"data-highlighted":g?"":void 0,"aria-selected":m&&g,"data-state":m?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...c,ref:v,onFocus:_t(c.onFocus,()=>x(!0)),onBlur:_t(c.onBlur,()=>x(!1)),onClick:_t(c.onClick,()=>{k.current!=="mouse"&&w()}),onPointerUp:_t(c.onPointerUp,()=>{k.current==="mouse"&&w()}),onPointerDown:_t(c.onPointerDown,_=>{k.current=_.pointerType}),onPointerMove:_t(c.onPointerMove,_=>{k.current=_.pointerType,i?u.onItemLeave?.():k.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:_t(c.onPointerLeave,_=>{_.currentTarget===document.activeElement&&u.onItemLeave?.()}),onKeyDown:_t(c.onKeyDown,_=>{u.searchRef?.current!==""&&_.key===" "||(CT.includes(_.key)&&w(),_.key===" "&&_.preventDefault())})})})})});k2.displayName=Pc;var mo="SelectItemText",C2=C.forwardRef((e,t)=>{const{__scopeSelect:n,className:a,style:i,...l}=e,c=Or(mo,n),d=zr(mo,n),u=S2(mo,n),m=ET(mo,n),[p,h]=C.useState(null),g=Bt(t,w=>h(w),u.onItemTextChange,w=>d.itemTextRefCallback?.(w,u.value,u.disabled)),x=p?.textContent,v=C.useMemo(()=>s.jsx("option",{value:u.value,disabled:u.disabled,children:x},u.value),[u.disabled,u.value,x]),{onNativeOptionAdd:y,onNativeOptionRemove:k}=m;return An(()=>(y(v),()=>k(v)),[y,k,v]),s.jsxs(s.Fragment,{children:[s.jsx(jt.span,{id:u.textId,...l,ref:g}),u.isSelected&&c.valueNode&&!c.valueNodeHasChildren?Vs.createPortal(l.children,c.valueNode):null]})});C2.displayName=mo;var j2="SelectItemIndicator",N2=C.forwardRef((e,t)=>{const{__scopeSelect:n,...a}=e;return S2(j2,n).isSelected?s.jsx(jt.span,{"aria-hidden":!0,...a,ref:t}):null});N2.displayName=j2;var sh="SelectScrollUpButton",_2=C.forwardRef((e,t)=>{const n=zr(sh,e.__scopeSelect),a=mp(sh,e.__scopeSelect),[i,l]=C.useState(!1),c=Bt(t,a.onScrollButtonChange);return An(()=>{if(n.viewport&&n.isPositioned){let d=function(){const m=u.scrollTop>0;l(m)};const u=n.viewport;return d(),u.addEventListener("scroll",d),()=>u.removeEventListener("scroll",d)}},[n.viewport,n.isPositioned]),i?s.jsx(A2,{...e,ref:c,onAutoScroll:()=>{const{viewport:d,selectedItem:u}=n;d&&u&&(d.scrollTop=d.scrollTop-u.offsetHeight)}}):null});_2.displayName=sh;var rh="SelectScrollDownButton",E2=C.forwardRef((e,t)=>{const n=zr(rh,e.__scopeSelect),a=mp(rh,e.__scopeSelect),[i,l]=C.useState(!1),c=Bt(t,a.onScrollButtonChange);return An(()=>{if(n.viewport&&n.isPositioned){let d=function(){const m=u.scrollHeight-u.clientHeight,p=Math.ceil(u.scrollTop)<m;l(p)};const u=n.viewport;return d(),u.addEventListener("scroll",d),()=>u.removeEventListener("scroll",d)}},[n.viewport,n.isPositioned]),i?s.jsx(A2,{...e,ref:c,onAutoScroll:()=>{const{viewport:d,selectedItem:u}=n;d&&u&&(d.scrollTop=d.scrollTop+u.offsetHeight)}}):null});E2.displayName=rh;var A2=C.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:a,...i}=e,l=zr("SelectScrollButton",n),c=C.useRef(null),d=Jc(n),u=C.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return C.useEffect(()=>()=>u(),[u]),An(()=>{d().find(p=>p.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[d]),s.jsx(jt.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:_t(i.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(a,50))}),onPointerMove:_t(i.onPointerMove,()=>{l.onItemLeave?.(),c.current===null&&(c.current=window.setInterval(a,50))}),onPointerLeave:_t(i.onPointerLeave,()=>{u()})})}),VT="SelectSeparator",$T=C.forwardRef((e,t)=>{const{__scopeSelect:n,...a}=e;return s.jsx(jt.div,{"aria-hidden":!0,...a,ref:t})});$T.displayName=VT;var ah="SelectArrow",HT=C.forwardRef((e,t)=>{const{__scopeSelect:n,...a}=e,i=ed(n),l=Or(ah,n),c=zr(ah,n);return l.open&&c.position==="popper"?s.jsx(pT,{...i,...a,ref:t}):null});HT.displayName=ah;var UT="SelectBubbleInput",T2=C.forwardRef(({__scopeSelect:e,value:t,...n},a)=>{const i=C.useRef(null),l=Bt(a,i),c=Mv(t);return C.useEffect(()=>{const d=i.current;if(!d)return;const u=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(u,"value").set;if(c!==t&&p){const h=new Event("change",{bubbles:!0});p.call(d,t),d.dispatchEvent(h)}},[c,t]),s.jsx(jt.select,{...n,style:{...o2,...n.style},ref:l,defaultValue:t})});T2.displayName=UT;function D2(e){return e===""||e===void 0}function M2(e){const t=ya(e),n=C.useRef(""),a=C.useRef(0),i=C.useCallback(c=>{const d=n.current+c;t(d),(function u(m){n.current=m,window.clearTimeout(a.current),m!==""&&(a.current=window.setTimeout(()=>u(""),1e3))})(d)},[t]),l=C.useCallback(()=>{n.current="",window.clearTimeout(a.current)},[]);return C.useEffect(()=>()=>window.clearTimeout(a.current),[]),[n,i,l]}function P2(e,t,n){const i=t.length>1&&Array.from(t).every(m=>m===t[0])?t[0]:t,l=n?e.indexOf(n):-1;let c=WT(e,Math.max(l,0));i.length===1&&(c=c.filter(m=>m!==n));const u=c.find(m=>m.textValue.toLowerCase().startsWith(i.toLowerCase()));return u!==n?u:void 0}function WT(e,t){return e.map((n,a)=>e[(t+a)%e.length])}var KT=l2,GT=d2,qT=f2,YT=h2,ZT=p2,QT=m2,XT=y2,JT=k2,eD=C2,tD=N2,nD=_2,sD=E2;function r1({...e}){return s.jsx(KT,{"data-slot":"select",...e})}function a1({...e}){return s.jsx(qT,{"data-slot":"select-value",...e})}function i1({className:e,size:t="default",children:n,...a}){return s.jsxs(GT,{"data-slot":"select-trigger","data-size":t,className:rs("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...a,children:[n,s.jsx(YT,{asChild:!0,children:s.jsx(jo,{className:"size-4 opacity-50"})})]})}function o1({className:e,children:t,position:n="popper",...a}){return s.jsx(ZT,{children:s.jsxs(QT,{"data-slot":"select-content",className:rs("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...a,children:[s.jsx(rD,{}),s.jsx(XT,{className:rs("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),s.jsx(aD,{})]})})}function ri({className:e,children:t,...n}){return s.jsxs(JT,{"data-slot":"select-item",className:rs("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[s.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:s.jsx(tD,{children:s.jsx(kt,{className:"size-4"})})}),s.jsx(eD,{children:t})]})}function rD({className:e,...t}){return s.jsx(nD,{"data-slot":"select-scroll-up-button",className:rs("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(L_,{className:"size-4"})})}function aD({className:e,...t}){return s.jsx(sD,{"data-slot":"select-scroll-down-button",className:rs("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(jo,{className:"size-4"})})}function iD({onSelect:e}){const[t,n]=C.useState([]),[a,i]=C.useState("");C.useEffect(()=>{l();const u=()=>l();return window.addEventListener("character-memories-updated",u),()=>window.removeEventListener("character-memories-updated",u)},[]);const l=async()=>{try{const u=await ue.get(te.CHARACTERS,"characters");if(u){const m=await Promise.all(u.map(async p=>{const h=p.memories?.filter(g=>g.type==="summary").length||0;if(p.avatar){if(p.avatar.startsWith("data:"))return{...p,avatarUrl:p.avatar,summaryCount:h};try{const g=await wt(p.avatar);return{...p,avatarUrl:g,summaryCount:h}}catch{return{...p,avatarUrl:null,summaryCount:h}}}return{...p,avatarUrl:null,summaryCount:h}}));n(m)}}catch(u){console.error("Failed to load characters:",u)}},c=t.filter(u=>u.name.toLowerCase().includes(a.toLowerCase())),d=u=>{let m=0;for(let h=0;h<u.length;h++)m=u.charCodeAt(h)+((m<<5)-m);const p=(m&16777215).toString(16).toUpperCase();return"#"+"00000".substring(0,6-p.length)+p};return s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("div",{className:"relative group",children:[s.jsx($c,{className:"absolute left-0 top-1/2 -translate-y-1/2 text-[#bdc3c7] transition-colors group-focus-within:text-[#2c3e50]",size:16}),s.jsx("input",{type:"text",placeholder:"...",value:a,onChange:u=>i(u.target.value),className:"w-full pl-8 py-2 bg-transparent border-b border-[#bdc3c7]/50 text-sm outline-none focus:border-[#2c3e50] transition-colors placeholder-[#bdc3c7] text-[#2c3e50]"})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[c.length===0?s.jsx("div",{className:"text-center py-8 text-[#bdc3c7] text-sm",children:""}):c.map((u,m)=>s.jsxs(Se.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:m*.05,ease:"easeOut"},onClick:()=>e?.(u),className:"group relative overflow-hidden bg-white/40 backdrop-blur-sm rounded-xl p-3.5 border border-white/40 shadow-sm hover:shadow-md transition-all active:scale-[0.98] cursor-pointer flex items-center gap-4",children:[s.jsx("div",{className:"w-11 h-11 rounded-full flex items-center justify-center text-white font-serif text-lg shadow-inner relative overflow-hidden bg-[#2c3e50]",style:{backgroundColor:u.avatarUrl?void 0:d(u.name)},children:u.avatarUrl?s.jsx("img",{src:u.avatarUrl,alt:u.name,className:"w-full h-full object-cover"}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute inset-0 bg-black/10"}),s.jsx("span",{className:"relative z-10",children:u.name[0]})]})}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx("h3",{className:"text-[#2c3e50] font-serif font-medium text-lg leading-none truncate",children:u.name})}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-xs font-serif text-[#95a5a6]",children:[u.summaryCount||0," "]}),s.jsx(Ys,{size:14,className:"text-[#bdc3c7] group-hover:translate-x-1 transition-transform"})]})]},u.id)),c.length>0&&s.jsxs("div",{className:"py-12 flex flex-col items-center justify-center opacity-30",children:[s.jsx("div",{className:"w-1 h-12 bg-gradient-to-b from-[#2c3e50] to-transparent"}),s.jsx("p",{className:"mt-4 text-xs tracking-[0.3em] font-serif text-[#2c3e50]",children:"END OF LIST"})]})]})]})}function oD(){const e=[];return s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("div",{className:"relative group",children:[s.jsx($c,{className:"absolute left-0 top-1/2 -translate-y-1/2 text-[#bdc3c7] transition-colors group-focus-within:text-[#2c3e50]",size:16}),s.jsx("input",{type:"text",placeholder:"...",className:"w-full pl-8 py-2 bg-transparent border-b border-[#bdc3c7]/50 text-sm outline-none focus:border-[#2c3e50] transition-colors placeholder-[#bdc3c7] text-[#2c3e50]"})]}),s.jsxs("div",{className:"flex flex-col gap-4",children:[e.map((t,n)=>s.jsxs(Se.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.08,ease:"easeOut"},className:"group relative w-full overflow-hidden bg-white/40 backdrop-blur-sm rounded-xl p-3.5 border border-white/40 shadow-sm hover:shadow-md transition-all active:scale-[0.98] cursor-pointer flex items-center gap-4",children:[s.jsx("div",{className:"w-11 h-11 rounded-full flex items-center justify-center bg-[#2c3e50]/5 text-[#2c3e50] border border-[#2c3e50]/10",children:s.jsx(Uc,{size:20,className:"opacity-70"})}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx("h3",{className:"text-[#2c3e50] font-serif font-medium text-lg leading-none truncate",children:t.title})}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-xs font-serif text-[#95a5a6]",children:[t.count," "]}),s.jsx(Ys,{size:14,className:"text-[#bdc3c7] group-hover:translate-x-1 transition-transform"})]})]},t.id)),s.jsxs("div",{className:"py-12 flex flex-col items-center justify-center opacity-30",children:[s.jsx("div",{className:"w-1 h-12 bg-gradient-to-b from-[#2c3e50] to-transparent"}),s.jsx("p",{className:"mt-4 text-xs tracking-[0.3em] font-serif text-[#2c3e50]",children:"END"})]})]})]})}function lD(){const e=[],t={hidden:{opacity:1},show:{opacity:1,transition:{staggerChildren:.05,delayChildren:.1}}},n={hidden:{x:-20,opacity:0},show:{x:0,opacity:1,transition:{x:{type:"tween",ease:"circOut",duration:.35},opacity:{duration:0}}}};return s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("div",{className:"relative group",children:[s.jsx($c,{className:"absolute left-0 top-1/2 -translate-y-1/2 text-[#bdc3c7] transition-colors group-focus-within:text-[#2c3e50]",size:16}),s.jsx("input",{type:"text",placeholder:"...",className:"w-full pl-8 py-2 bg-transparent border-b border-[#bdc3c7]/50 text-sm outline-none focus:border-[#2c3e50] transition-colors placeholder-[#bdc3c7] text-[#2c3e50]"})]}),s.jsxs("div",{className:"relative pl-4",children:[s.jsx("div",{className:"absolute left-[23px] top-4 bottom-0 w-[1px] bg-gradient-to-b from-[#bdc3c7] to-transparent z-0"}),s.jsxs(Se.div,{className:"flex flex-col gap-6",variants:t,initial:"hidden",animate:"show",children:[e.map(a=>{const i=a.icon;return s.jsxs(Se.div,{variants:n,className:"relative z-10 pl-8 group cursor-pointer",children:[s.jsx("div",{className:"absolute left-0 top-[22px] w-[14px] h-[14px] rounded-full bg-[#f5f5f5] border-[2px] border-[#bdc3c7] group-active:border-[#d4af37] group-active:scale-110 transition-all z-20"}),s.jsxs("div",{className:"group relative overflow-hidden bg-white/40 backdrop-blur-sm rounded-xl p-4 border border-white/40 shadow-sm active:shadow-md transition-all active:bg-white/60 flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-[#2c3e50] bg-white/50 shadow-sm",children:s.jsx(i,{size:18,strokeWidth:1.5})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-[#2c3e50] font-serif font-medium text-base leading-none",children:a.title}),s.jsx("p",{className:"text-[10px] text-[#7f8c8d] tracking-wider mt-1.5 font-mono",children:a.date})]}),s.jsx("div",{className:"flex items-center gap-3",children:s.jsx(Ys,{size:14,className:"text-[#bdc3c7] transition-colors group-active:text-[#2c3e50]"})})]})]},a.id)}),s.jsx(Se.div,{variants:n,className:"pl-8",children:s.jsxs("div",{className:"py-12 flex flex-col items-center justify-center opacity-30",children:[s.jsx("div",{className:"w-1 h-12 bg-gradient-to-b from-[#2c3e50] to-transparent"}),s.jsx("p",{className:"mt-4 text-xs tracking-[0.3em] font-serif text-[#2c3e50]",children:"END"})]})})]})]})]})}function cD({character:e,onBack:t,summaryLimit:n=3}){const[a,i]=C.useState("permanent"),[l,c]=C.useState(e.memories||[]),[d,u]=C.useState(null),[m,p]=C.useState(""),[h,g]=C.useState(""),[x,v]=C.useState([]),[y,k]=C.useState("");C.useEffect(()=>{if(e.memories){const D=mi.processMemories(e.memories,n);c(D)}},[e.memories,n]);const w=async D=>{try{const S=mi.processMemories(D,n);c(S);const z=await ue.get(te.CHARACTERS,"characters")||[],L=z.findIndex(F=>F.id===e.id);L!==-1&&(z[L].memories=S,await ue.set(te.CHARACTERS,"characters",z))}catch(S){console.error("Failed to save memories:",S)}},_=D=>{u(D.id),p(D.content),v(D.tags||[]),k(""),D.type==="event"?g(D.expires_at||""):g(D.created_at||D.date||"")},N=()=>{u(null),p(""),g(""),v([]),k("")},T=D=>{const S=l.map(z=>{if(z.id===D){const L={content:m,tags:x};return z.type==="event"?L.expires_at=h||void 0:(L.created_at=h||void 0,L.date=h||void 0),{...z,...L}}return z});w(S),u(null)},B=()=>{y.trim()&&!x.includes(y.trim())&&(v([...x,y.trim()]),k(""))},O=D=>{v(x.filter(S=>S!==D))},$=D=>{D.key==="Enter"&&(D.preventDefault(),B())},P=[{id:"permanent",label:"",sub:"Permanent",icon:c_,color:"text-blue-600",bg:"bg-blue-50"},{id:"event",label:"",sub:"Event",icon:tv,color:"text-yellow-600",bg:"bg-yellow-50"},{id:"summary",label:"",sub:"Summary",icon:M6,color:"text-green-600",bg:"bg-green-50"},{id:"date",label:"",sub:"Date",icon:f6,color:"text-pink-600",bg:"bg-pink-50"}],A=D=>{const S=l.filter(z=>z.id!==D);w(S)},H=D=>{const S=mi.createMemory(D,"...");S.date=S.created_at,w([...l,S])},Y=P.find(D=>D.id===a),E=[...l.filter(D=>D.type===a)].reverse();return s.jsxs("div",{className:"h-full flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-4 pt-2 shrink-0",children:[s.jsx("button",{onClick:t,className:"p-2 -ml-2 rounded-full hover:bg-black/5 transition-colors text-[#555] active:scale-90",children:s.jsx(On,{size:24})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-xl font-serif font-bold text-[#2c3e50]",children:e.name}),s.jsx("p",{className:"text-[10px] tracking-widest text-[#7f8c8d] uppercase",children:"Memory Summary"})]})]}),s.jsx("div",{className:"grid grid-cols-4 gap-1 px-2 mb-6 shrink-0",children:P.map(D=>{const S=a===D.id,z=D.icon;return s.jsxs("button",{onClick:()=>i(D.id),className:`flex flex-col items-center gap-1.5 p-1.5 rounded-xl transition-all ${S?"bg-white shadow-sm scale-105 z-10":"hover:bg-white/40 opacity-70"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center transition-colors ${S?`${D.bg} ${D.color}`:"bg-gray-100 text-gray-400"}`,children:s.jsx(z,{size:16,strokeWidth:S?2.5:2})}),s.jsx("span",{className:`text-[10px] font-bold whitespace-nowrap scale-90 ${S?"text-[#2c3e50]":"text-[#95a5a6]"}`,children:D.label})]},D.id)})}),s.jsx("div",{className:"flex-1 overflow-y-auto pb-20 pr-1 pl-1",children:s.jsx(Be,{mode:"popLayout",initial:!1,children:s.jsxs(Se.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"space-y-3",children:[s.jsxs("button",{onClick:()=>H(a),className:"w-full py-3 mb-2 flex items-center justify-center gap-2 text-sm text-[#95a5a6] hover:text-[#2c3e50] hover:bg-white/40 rounded-xl transition-all border border-dashed border-[#bdc3c7]/60 hover:border-[#bdc3c7]",children:[s.jsx(Gs,{size:16}),s.jsxs("span",{children:["",Y.label]})]}),E.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-3 ${Y.bg}`,children:s.jsx(Y.icon,{size:32,className:`opacity-50 ${Y.color}`})}),s.jsxs("p",{className:"text-sm text-[#95a5a6] font-medium",children:["",Y.label]}),s.jsx("p",{className:"text-[10px] text-[#bdc3c7] mt-1",children:""})]}):E.map(D=>{const S=D.active!==!1,z=d===D.id,L=D.created_at||D.date;return s.jsx(Se.div,{initial:{opacity:0,y:10},animate:{opacity:!S&&!z?.75:1,y:0},className:`group relative rounded-xl p-4 text-sm border transition-all shadow-sm ${!S&&!z?"bg-gray-50 border-gray-200 text-gray-500":"bg-white/60 border-white/40 text-[#34495e] hover:bg-white/80"}`,children:z?s.jsxs("div",{className:"space-y-3",children:[s.jsx("textarea",{value:m,onChange:F=>p(F.target.value),className:"w-full bg-white border border-gray-200 rounded-lg p-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-100 min-h-[80px]",autoFocus:!0,placeholder:"..."}),(a==="event"||a==="date")&&s.jsxs("div",{className:"flex items-center gap-2",children:[a==="event"?s.jsx(yx,{size:14,className:"text-orange-400"}):s.jsx(No,{size:14,className:"text-gray-400"}),s.jsx("input",{type:"date",value:h,onChange:F=>g(F.target.value),className:`bg-white border border-gray-200 rounded-md px-2 py-1.5 text-xs w-full focus:outline-none ${a==="event"?"focus:border-orange-300":"focus:border-blue-300"}`,placeholder:a==="event"?"":""})]}),(a==="event"||a==="summary")&&s.jsxs("div",{className:"space-y-2 pt-1",children:[s.jsx("div",{className:"flex flex-wrap gap-1.5 min-h-[24px]",children:x.map((F,K)=>s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded bg-gray-100 text-gray-600 text-xs border border-gray-200",children:[s.jsx(dc,{size:10,className:"mr-1 opacity-50"}),F,s.jsx("button",{onClick:()=>O(F),className:"ml-1.5 hover:text-red-500 transition-colors",children:s.jsx(ft,{size:10})})]},K))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(dc,{size:12,className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400"}),s.jsx("input",{value:y,onChange:F=>k(F.target.value),onKeyDown:$,placeholder:" ()",className:"w-full bg-gray-50 border border-gray-200 rounded-lg pl-7 pr-3 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-blue-200 focus:bg-white transition-all"})]}),s.jsx("button",{onClick:B,disabled:!y.trim(),className:"px-3 py-1.5 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-600 text-xs font-medium transition-colors disabled:opacity-50",children:s.jsx(Gs,{size:12})})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-1",children:[s.jsx("button",{onClick:N,className:"px-3 py-1.5 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-500 text-xs font-medium transition-colors",children:""}),s.jsxs("button",{onClick:()=>T(D.id),className:"px-3 py-1.5 rounded-lg bg-[#2c3e50] hover:bg-[#34495e] text-white text-xs font-medium transition-colors flex items-center gap-1",children:[s.jsx(kt,{size:12}),""]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex justify-between items-start gap-2",children:s.jsx("p",{className:`pr-16 leading-relaxed ${S?"":"line-through decoration-gray-300"}`,children:D.content})}),(a==="event"||a==="summary")&&D.tags&&D.tags.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1.5 mt-2",children:D.tags.map((F,K)=>s.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-[10px] bg-gray-50 text-gray-500 border border-gray-100",children:[s.jsx(dc,{size:9,className:"mr-0.5 opacity-40"}),F]},K))}),s.jsxs("div",{className:"flex justify-between items-center mt-3 pt-2 border-t border-black/5",children:[s.jsx("div",{className:"flex items-center gap-2",children:L&&s.jsxs("div",{className:"flex flex-wrap items-center gap-12",children:[s.jsxs("p",{className:`text-[10px] font-mono flex items-center gap-1.5 ${S?"text-[#7f8c8d]":"text-gray-400"}`,children:[s.jsx(No,{size:12,className:S?"text-[#bdc3c7]":"text-gray-300"}),L]}),D.type==="event"&&D.expires_at&&s.jsxs("p",{className:`text-[10px] font-mono flex items-center gap-1.5 ${S?"text-orange-400":"text-gray-400"}`,children:[s.jsx(yx,{size:12,className:S?"text-orange-300":"text-gray-300"}),D.expires_at]})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[D.type==="summary"&&s.jsxs("div",{className:`flex items-center gap-1 text-[10px] px-1.5 py-0.5 rounded-full border ${S?"bg-green-50 text-green-600 border-green-200":"bg-gray-100 text-gray-400 border-gray-200"}`,children:[S?s.jsx(qy,{size:10}):s.jsx(Cc,{size:10}),s.jsx("span",{children:S?"":""})]}),!S&&D.type==="event"&&s.jsx("span",{className:"flex items-center gap-1 text-[10px] px-2 py-0.5 rounded-full bg-gray-100 text-gray-400 border border-gray-200",children:s.jsx("span",{children:""})})]})]}),s.jsxs("div",{className:"absolute top-3 right-3 flex gap-1",children:[s.jsx("button",{onClick:()=>_(D),className:"p-1.5 text-[#bdc3c7] hover:text-[#2c3e50] hover:bg-black/5 rounded-lg transition-colors",children:s.jsx(W6,{size:14})}),s.jsx("button",{onClick:()=>A(D.id),className:"p-1.5 text-[#bdc3c7] hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:s.jsx(zn,{size:14})})]})]})},D.id)}),s.jsx("div",{className:"h-10"})]},a)})})]})}function dD({onClose:e}){const[t,n]=C.useState("solitary"),[a,i]=C.useState(null),[l,c]=C.useState(!1),[d,u]=C.useState(200),[m,p]=C.useState(3),[h,g]=C.useState(!0),[x,v]=C.useState("forever"),[y,k]=C.useState("forever");C.useEffect(()=>{(async()=>{const N=await ue.get(te.MISC,"memory_extraction_settings");N&&(u(N.threshold??200),g(N.auto_summary??!0),v(N.summary_retention??"forever"),k(N.event_retention??"forever"),Qf(N.summary_retention??"forever",N.event_retention??"forever"));const T=await ue.get(te.CHAT_SETTINGS,"chat_settings");T&&p(T.summary_limit??3)})()},[]),C.useEffect(()=>{const _=async N=>{if(a&&(!N.detail.characterId||N.detail.characterId===a.id))try{const B=(await ue.get(te.CHARACTERS,"characters")||[]).find(O=>O.id===a.id);B&&i(B)}catch(T){console.error("Failed to refresh selected character",T)}};return window.addEventListener("character-memories-updated",_),()=>window.removeEventListener("character-memories-updated",_)},[a]);const w=async()=>{await ue.set(te.MISC,"memory_extraction_settings",{threshold:d,auto_summary:h,summary_retention:x,event_retention:y});const _=await ue.get(te.CHAT_SETTINGS,"chat_settings")||{};await ue.set(te.CHAT_SETTINGS,"chat_settings",{..._,summary_limit:m}),await mi.refreshAllCharactersMemories(),await Qf(x,y),c(!1)};return s.jsxs("div",{className:"fixed inset-0 z-50 font-sans overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"absolute inset-0 bg-[#f0f2f5]",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#e0eafc] to-[#cfdef3] opacity-60"}),s.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[50%] h-[50%] bg-purple-200/20 rounded-full blur-[100px]"}),s.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[60%] h-[60%] bg-blue-200/20 rounded-full blur-[100px]"})]}),s.jsx(Be,{mode:"wait",children:a?s.jsx(Se.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},transition:{duration:.3,ease:"easeOut"},className:"relative z-30 h-full flex flex-col pt-12 px-6",children:s.jsx(cD,{character:a,onBack:()=>i(null),summaryLimit:m})},"detail"):s.jsxs(Se.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3,ease:"easeOut"},className:"relative z-20 flex flex-col h-full",children:[s.jsxs("div",{className:"flex flex-col pt-12 pb-4 px-6",children:[s.jsxs("div",{className:"flex justify-between items-start mb-6",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx(Se.h1,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-3xl text-[#2c3e50] font-serif tracking-widest font-bold",children:""}),s.jsx(Se.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-xs text-[#7f8c8d] mt-1 tracking-[0.2em] uppercase font-light",children:"Recollection"})]}),s.jsx("button",{onClick:e,className:"p-2 -mr-2 rounded-full hover:bg-black/5 transition-colors text-[#555] active:scale-90 duration-200 ml-2",children:s.jsx(ft,{size:24,strokeWidth:1.5})})]}),s.jsxs("div",{className:"flex items-end justify-between",children:[s.jsxs("div",{className:"flex gap-8",children:[s.jsx(vf,{isActive:t==="solitary",onClick:()=>n("solitary"),label:"",subLabel:"Solitary"}),s.jsx(vf,{isActive:t==="shared",onClick:()=>n("shared"),label:"",subLabel:"Shared"}),s.jsx(vf,{isActive:t==="trifling",onClick:()=>n("trifling"),label:"",subLabel:"Trifling"})]}),s.jsx("button",{onClick:()=>c(!0),className:"p-2 mb-1 text-[#95a5a6] hover:text-[#2c3e50] hover:bg-black/5 rounded-lg transition-colors",title:"",children:s.jsx(nE,{size:20,strokeWidth:1.5})})]})]}),s.jsxs("div",{className:"relative flex-1 z-10 overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 right-0 h-8 bg-gradient-to-b from-[#f0f2f5]/0 to-transparent z-20 pointer-events-none"}),s.jsxs(Be,{mode:"wait",children:[t==="solitary"&&s.jsx(Se.div,{initial:{opacity:0,filter:"blur(10px)"},animate:{opacity:1,filter:"blur(0px)"},exit:{opacity:0,filter:"blur(10px)"},transition:{duration:.4,ease:"easeOut"},className:"h-full overflow-y-auto px-6 pb-20 pt-2",children:s.jsx(iD,{onSelect:i})},"solitary"),t==="shared"&&s.jsx(Se.div,{initial:{opacity:0,filter:"blur(10px)"},animate:{opacity:1,filter:"blur(0px)"},exit:{opacity:0,filter:"blur(10px)"},transition:{duration:.4,ease:"easeOut"},className:"h-full overflow-y-auto px-6 pb-20 pt-2",children:s.jsx(oD,{})},"shared"),t==="trifling"&&s.jsx(Se.div,{initial:{opacity:0,filter:"blur(10px)"},animate:{opacity:1,filter:"blur(0px)"},exit:{opacity:0,filter:"blur(10px)"},transition:{duration:.4,ease:"easeOut"},className:"h-full overflow-y-auto px-6 pb-20 pt-2",children:s.jsx(lD,{})},"trifling")]})]})]},"list")}),s.jsx(Be,{children:l&&s.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] bg-black/20 backdrop-blur-sm flex items-center justify-center p-6",onClick:()=>c(!1),children:s.jsxs(Se.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white/90 backdrop-blur-xl rounded-2xl p-6 w-full max-w-sm shadow-xl border border-white/50",onClick:_=>_.stopPropagation(),children:[s.jsx("h3",{className:"text-lg font-bold text-[#2c3e50] mb-4",children:""}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("label",{className:"text-sm font-medium text-[#555]",children:""}),s.jsx("p",{className:"text-[10px] text-[#95a5a6]",children:""})]}),s.jsx(L7,{checked:h,onCheckedChange:g})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("label",{className:"text-sm font-medium text-[#555]",children:""}),s.jsxs("span",{className:"text-sm font-mono text-[#2c3e50]",children:[d," "]})]}),s.jsx("input",{type:"range",min:"10",max:"2000",step:"10",value:d,onChange:_=>u(Number(_.target.value)),className:"w-full accent-[#2c3e50] h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),s.jsx("p",{className:"text-[10px] text-[#95a5a6]",children:""})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("label",{className:"text-sm font-medium text-[#555]",children:""}),s.jsxs("span",{className:"text-sm font-mono text-[#2c3e50]",children:[m," "]})]}),s.jsx("input",{type:"range",min:"0",max:"100",step:"1",value:m,onChange:_=>p(Number(_.target.value)),className:"w-full accent-[#2c3e50] h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),s.jsx("p",{className:"text-[10px] text-[#95a5a6]",children:" Prompt "})]}),s.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-100",children:[s.jsx("h4",{className:"text-xs font-bold text-[#95a5a6] uppercase tracking-wider",children:""}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{className:"text-sm font-medium text-[#555]",children:" (inactive)"}),s.jsxs(r1,{value:x,onValueChange:v,children:[s.jsx(i1,{className:"w-[100px] h-8 text-xs bg-gray-50 border-gray-200",children:s.jsx(a1,{placeholder:""})}),s.jsxs(o1,{children:[s.jsx(ri,{value:"7d",children:"7"}),s.jsx(ri,{value:"30d",children:"30"}),s.jsx(ri,{value:"forever",children:""})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{className:"text-sm font-medium text-[#555]",children:" (inactive)"}),s.jsxs(r1,{value:y,onValueChange:k,children:[s.jsx(i1,{className:"w-[100px] h-8 text-xs bg-gray-50 border-gray-200",children:s.jsx(a1,{placeholder:""})}),s.jsxs(o1,{children:[s.jsx(ri,{value:"7d",children:"7"}),s.jsx(ri,{value:"30d",children:"30"}),s.jsx(ri,{value:"forever",children:""})]})]})]}),s.jsx("p",{className:"text-[10px] text-[#95a5a6]",children:"(active=false)"})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 mt-8",children:[s.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 rounded-lg text-sm text-[#7f8c8d] hover:bg-gray-100 transition-colors",children:""}),s.jsx("button",{onClick:w,className:"px-4 py-2 rounded-lg text-sm bg-[#2c3e50] text-white shadow-md hover:bg-[#34495e] transition-colors",children:""})]})]})})})]})}function vf({isActive:e,onClick:t,label:n,subLabel:a}){return s.jsxs("button",{onClick:t,className:"group flex flex-col items-start",children:[s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:`text-base font-serif tracking-wide transition-colors duration-300 ${e?"text-[#2c3e50] font-medium":"text-[#95a5a6]"}`,children:n}),e&&s.jsx(Se.div,{layoutId:"activeDot",className:"absolute -right-2 top-0 w-1.5 h-1.5 bg-[#d4af37] rounded-full"})]}),s.jsx("span",{className:`text-[10px] tracking-wider uppercase transition-colors duration-300 ${e?"text-[#d4af37]":"text-transparent group-hover:text-[#bdc3c7]"}`,children:a})]})}const ca={initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20}},da={duration:.2,ease:"easeInOut"};function uD({userData:e,preloadedImages:t={},initialChatId:n}){const[a,i]=C.useState(0),[l,c]=C.useState(0),[d,u]=C.useState(!1),[m,p]=C.useState(e),[h,g]=C.useState(!1),[x,v]=C.useState(!1),[y,k]=C.useState(!1),[w,_]=C.useState(!1),[N,T]=C.useState(!1),[B,O]=C.useState(!1),[$,P]=C.useState(!1),[A,H]=C.useState(n||null),[Y,E]=C.useState(t.desktop_wallpaper||null),D=C.useRef(0),S=C.useRef(0),z=C.useRef(null),L=C.useRef($),F=C.useRef(A);C.useEffect(()=>{L.current=$},[$]),C.useEffect(()=>{F.current=A},[A]),C.useEffect(()=>{n&&(P(!0),H(n))},[n]),C.useEffect(()=>{const le=ye=>{if(ye.data){if(ye.data.type==="open-conversation"){const{conversationId:ce}=ye.data;P(!0),H(ce)}if(ye.data.type==="AI_TASK_COMPLETED"){const{messages:ce,characterId:Ce,displayName:_e}=ye.data.payload;if(!ce||ce.length===0)return;const je=ce[ce.length-1];if(je.text&&(je.text.includes("")||je.text.includes("")||je.text.includes('"permanent":')||je.text.includes('"summary":')||je.text.includes("```json"))){console.log("[Memory] Received extraction result for",Ce);try{const Oe=Sv(je.text);kv(Ce,Oe).then(()=>{pa.success("",{description:` ${Oe.length} `,duration:3e3})})}catch(Oe){console.error("[Memory] Failed to parse/save memories",Oe)}return}const Re=_e||je.senderName||"",st=L.current;F.current,st||pa(Re,{description:je.text,action:{label:"",onClick:()=>{P(!0),H(Ce)}},duration:5e3})}if(ye.data.type==="AI_TASK_FAILED"){const{characterId:ce,error:Ce}=ye.data.payload,_e=L.current,je=F.current;(!_e||je!==ce)&&pa.error("",{description:Ce,duration:5e3})}}};return"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",le),()=>{"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener("message",le)}},[]),C.useEffect(()=>{(async()=>{try{const ce=await ue.get(te.MISC,"desktop_wallpaper");if(ce)if(ce.startsWith("data:"))E(ce);else{const Ce=await wt(ce);E(Ce)}}catch(ce){console.error("Failed to load wallpaper:",ce)}})();const ye=ce=>{E(ce.detail)};return window.addEventListener("wallpaperChange",ye),()=>{window.removeEventListener("wallpaperChange",ye)}},[]);const K=le=>{p(le)},G=()=>{P(!1),v(!1),k(!1),_(!1),T(!1),O(!1),g(!0)},Z=()=>{g(!1)},R=()=>{v(!0)},V=()=>{v(!1)},ee=()=>{k(!0)},W=()=>{k(!1)},U=()=>{_(!0)},Q=()=>{_(!1)},oe=()=>{T(!0)},ne=()=>{T(!1)},ae=()=>{O(!0)},ve=()=>{O(!1)},se=()=>{P(!0)},xe=()=>{P(!1)},Ie=le=>{H(le)},I=le=>{u(!0),D.current=le.touches[0].clientX,S.current=le.touches[0].clientX},me=le=>{if(!d)return;S.current=le.touches[0].clientX;const ye=S.current-D.current,Ce=a*-50+ye/window.innerWidth*50;Ce<=0&&Ce>=-50&&c(Ce)},he=()=>{if(!d)return;const le=S.current-D.current,ye=window.innerWidth*.3;le<-ye&&a===0?(i(1),c(-50)):le>ye&&a===1?(i(0),c(0)):c(a*-50),u(!1)},J=le=>{u(!0),D.current=le.clientX,S.current=le.clientX},X=le=>{if(!d)return;S.current=le.clientX;const ye=S.current-D.current,Ce=a*-50+ye/window.innerWidth*50;Ce<=0&&Ce>=-50&&c(Ce)},ie=()=>{if(!d)return;const le=S.current-D.current,ye=window.innerWidth*.3;le<-ye&&a===0?(i(1),c(-50)):le>ye&&a===1?(i(0),c(0)):c(a*-50),u(!1)};return C.useEffect(()=>{const le=()=>{d&&(u(!1),c(a*-50))};return window.addEventListener("mouseup",le),()=>window.removeEventListener("mouseup",le)},[d,a]),s.jsxs("div",{ref:z,className:"relative w-full h-screen overflow-hidden","data-name":"",onTouchStart:I,onTouchMove:me,onTouchEnd:he,onMouseDown:J,onMouseMove:X,onMouseUp:ie,children:[Y?s.jsx("img",{alt:"",className:"absolute inset-0 w-full h-full object-cover pointer-events-none",src:Y}):s.jsx("div",{className:"absolute inset-0 w-full h-full pointer-events-none",style:{backgroundColor:"#D5EAE3"}}),s.jsxs("div",{className:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full h-full max-w-[440px] max-h-[956px] aspect-[440/956] overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 flex transition-transform",style:{transform:`translateX(${l}%)`,transitionDuration:d?"0ms":"300ms",width:"200%"},children:[s.jsx("div",{className:"relative w-1/2 h-full flex-shrink-0",children:s.jsx(WA,{userData:m,onUserDataChange:K,onChatClick:se,onMemoryClick:ae,preloadedImages:t})}),s.jsx("div",{className:"relative w-1/2 h-full flex-shrink-0",children:s.jsx(ZA,{preloadedImages:t,onHealthClick:U,onScheduleClick:oe})})]}),s.jsx(e8,{onSettingsClick:G,onWorldBookClick:R,onCharacterClick:ee,onChatClick:se}),s.jsx(t8,{currentPage:a})]}),s.jsx(Be,{children:h&&s.jsx(Se.div,{variants:ca,initial:"initial",animate:"animate",exit:"exit",transition:da,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:le=>le.stopPropagation(),onTouchStart:le=>le.stopPropagation(),onMouseDown:le=>le.stopPropagation(),children:s.jsx(x8,{onClose:Z})},"settings")}),s.jsx(Be,{children:x&&s.jsx(Se.div,{variants:ca,initial:"initial",animate:"animate",exit:"exit",transition:da,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:le=>le.stopPropagation(),onTouchStart:le=>le.stopPropagation(),onMouseDown:le=>le.stopPropagation(),children:s.jsx(v8,{onClose:V})},"worldbook-app")}),s.jsx(Be,{children:y&&s.jsx(Se.div,{variants:ca,initial:"initial",animate:"animate",exit:"exit",transition:da,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:le=>le.stopPropagation(),onTouchStart:le=>le.stopPropagation(),onMouseDown:le=>le.stopPropagation(),children:s.jsx(C8,{onClose:W})},"character-app")}),s.jsx(Be,{children:w&&s.jsx(Se.div,{variants:ca,initial:"initial",animate:"animate",exit:"exit",transition:da,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:le=>le.stopPropagation(),onTouchStart:le=>le.stopPropagation(),onMouseDown:le=>le.stopPropagation(),children:s.jsx(C7,{onClose:Q})},"health-app")}),s.jsx(Be,{children:N&&s.jsx(Se.div,{variants:ca,initial:"initial",animate:"animate",exit:"exit",transition:da,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:le=>le.stopPropagation(),onTouchStart:le=>le.stopPropagation(),onMouseDown:le=>le.stopPropagation(),children:s.jsx(D7,{onClose:ne})},"schedule-app")}),s.jsx(Be,{children:B&&s.jsx(Se.div,{variants:ca,initial:"initial",animate:"animate",exit:"exit",transition:da,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:le=>le.stopPropagation(),onTouchStart:le=>le.stopPropagation(),onMouseDown:le=>le.stopPropagation(),children:s.jsx(dD,{onClose:ve})},"memory-app")}),s.jsx(Be,{children:$&&s.jsx(Se.div,{variants:ca,initial:"initial",animate:"animate",exit:"exit",transition:da,className:"fixed inset-0 z-[100] pointer-events-auto",onPointerDown:le=>le.stopPropagation(),onTouchStart:le=>le.stopPropagation(),onMouseDown:le=>le.stopPropagation(),children:s.jsx(y7,{onClose:xe,initialChatId:A,onChatChange:Ie})},"chat-app")})]})}function fD(){const[e,t]=C.useState(null),[n,a]=C.useState(!1),[i,l]=C.useState(!1),[c,d]=C.useState(!1);C.useEffect(()=>{const p=/iPad|iPhone|iPod/.test(navigator.userAgent);l(p);const h=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||document.referrer.includes("android-app://");d(h);const g=v=>{v.preventDefault(),t(v),!localStorage.getItem("pwa-install-prompt-closed")&&!h&&a(!0)};window.addEventListener("beforeinstallprompt",g),p&&!h&&(localStorage.getItem("pwa-install-ios-prompt-closed")||a(!0));const x=()=>{a(!1),t(null),localStorage.removeItem("pwa-install-prompt-closed"),localStorage.removeItem("pwa-install-ios-prompt-closed")};return window.addEventListener("appinstalled",x),()=>{window.removeEventListener("beforeinstallprompt",g),window.removeEventListener("appinstalled",x)}},[]);const u=async()=>{if(!e)return;e.prompt();const{outcome:p}=await e.userChoice;console.log(p==="accepted"?"":""),t(null),a(!1)},m=()=>{a(!1),i?localStorage.setItem("pwa-install-ios-prompt-closed","true"):localStorage.setItem("pwa-install-prompt-closed","true")};return c||!n?null:i?s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t-2 border-gray-200 shadow-lg z-50 animate-slide-up",children:s.jsx("div",{className:"max-w-[420px] mx-auto p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] text-black mb-2",children:" Touken OS "}),s.jsxs("div",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[13px] text-[#666] space-y-1",children:[s.jsxs("p",{className:"flex items-center gap-1",children:[" ",s.jsx(iE,{className:"w-4 h-4 inline"})," "]}),s.jsx("p",{children:'""'})]})]}),s.jsx("button",{onClick:m,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:s.jsx(ft,{className:"w-5 h-5 text-gray-500"})})]})})}):s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t-2 border-gray-200 shadow-lg z-50 animate-slide-up",children:s.jsx("div",{className:"max-w-[420px] mx-auto p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[15px] text-black mb-1",children:" Touken OS"}),s.jsx("p",{className:"font-['Source_Han_Sans_CN_VF:Light',sans-serif] text-[13px] text-[#666]",children:""})]}),s.jsxs("button",{onClick:u,className:"bg-black text-white px-4 py-2 rounded-lg font-['Source_Han_Sans_CN_VF:Medium',sans-serif] text-[14px] flex items-center gap-2 hover:bg-gray-800 transition-colors",children:[s.jsx(G_,{className:"w-4 h-4"}),""]}),s.jsx("button",{onClick:m,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:s.jsx(ft,{className:"w-5 h-5 text-gray-500"})})]})})})}function hD(){return C.useEffect(()=>{(async()=>{try{const t=new Image;t.crossOrigin="anonymous",await new Promise((i,l)=>{t.onload=i,t.onerror=l,t.src=zh});const n=[192,512],a={};for(const i of n){const l=document.createElement("canvas");l.width=i,l.height=i;const c=l.getContext("2d");if(c){c.fillStyle="#ffffff",c.fillRect(0,0,i,i);const d=Math.min(i/t.width,i/t.height)*.9,u=(i-t.width*d)/2,m=(i-t.height*d)/2;c.drawImage(t,u,m,t.width*d,t.height*d);const p=l.toDataURL("image/png");if(a[i]=p,i===192){let h=document.querySelector('link[rel="icon"]');h||(h=document.createElement("link"),h.rel="icon",document.head.appendChild(h)),h.href=p;let g=document.querySelector('link[rel="apple-touch-icon"]');g||(g=document.createElement("link"),g.rel="apple-touch-icon",document.head.appendChild(g)),g.href=p}}}pD(a)}catch(t){console.error("PWA:",t)}})()},[]),null}function pD(e){const t={name:"Touken OS",short_name:"Touken OS",description:"",start_url:window.location.origin+"/",display:"standalone",background_color:"#ffffff",theme_color:"#000000",orientation:"portrait",scope:"/",icons:[{src:e[192]||"/icon-192.png",sizes:"192x192",type:"image/png",purpose:"any"},{src:e[192]||"/icon-192.png",sizes:"192x192",type:"image/png",purpose:"maskable"},{src:e[512]||"/icon-512.png",sizes:"512x512",type:"image/png",purpose:"any"},{src:e[512]||"/icon-512.png",sizes:"512x512",type:"image/png",purpose:"maskable"}],categories:["entertainment","lifestyle"],lang:"zh-CN",dir:"ltr"},n=new Blob([JSON.stringify(t)],{type:"application/json"}),a=URL.createObjectURL(n);let i=document.querySelector('link[rel="manifest"]');i||(i=document.createElement("link"),i.rel="manifest",document.head.appendChild(i)),i.href=a}function mD({onAnimationComplete:e}){const[t,n]=C.useState(0),[a,i]=C.useState([]);return C.useEffect(()=>{let u=0;const m=setInterval(()=>{u++;const p=Math.min(100,u/100*100);n(p),p>10&&a.length===0&&i(h=>[...h,">> ..."]),p>30&&a.length===1&&i(h=>[...h,">> ..."]),p>50&&a.length===2&&i(h=>[...h,">> ..."]),p>70&&a.length===3&&i(h=>[...h,">> ..."]),p>90&&a.length===4&&i(h=>[...h,">> Touken OS "]),u>=100&&(clearInterval(m),e&&setTimeout(e,200))},20);return()=>clearInterval(m)},[a.length]),s.jsxs("div",{className:"fixed inset-0 bg-[#F5F5F5] flex flex-col items-center justify-center font-['Source_Han_Sans_CN_VF',sans-serif] z-50",children:[s.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.03]",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"40px 40px"}}),s.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-[#2C2C2C]"}),s.jsxs("div",{className:"w-full max-w-[320px] flex flex-col items-center relative z-10",children:[s.jsxs(Se.div,{initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0},transition:{duration:.8,ease:"easeOut"},className:"w-32 h-32 mb-12 relative",children:[s.jsx("div",{className:"absolute inset-0 bg-white rounded-full shadow-2xl opacity-50 blur-xl scale-90"}),s.jsx("img",{src:zh,alt:"Touken OS Logo",className:"w-full h-full object-contain relative z-10 drop-shadow-lg"})]}),s.jsx("div",{className:"w-full h-1 bg-[#D6D3CC] mb-6 relative overflow-hidden rounded-full",children:s.jsx(Se.div,{className:"absolute top-0 left-0 bottom-0 bg-[#2C2C2C]",initial:{width:"0%"},animate:{width:`${t}%`},transition:{ease:"linear",duration:.1}})}),s.jsx("div",{className:"w-full h-24 font-mono text-[10px] text-[#5A5A55] space-y-1.5 overflow-hidden flex flex-col justify-end",children:s.jsx(Be,{mode:"popLayout",children:a.map((l,c)=>s.jsxs(Se.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-1 h-1 bg-[#34C759] rounded-full shrink-0 animate-pulse"}),s.jsx("span",{className:"truncate tracking-tight",children:l})]},c))})}),s.jsx("div",{className:"absolute -bottom-24 text-[9px] text-[#8C8C89] font-mono tracking-widest opacity-60",children:"CHRONOS GOVERNMENT TERMINAL V1.0"})]})]})}function gD(){C.useEffect(()=>{if("serviceWorker"in navigator){const n=()=>{navigator.serviceWorker.register("/sw.js").then(a=>{console.log("SW registered: ",a),a.addEventListener("updatefound",()=>{const i=a.installing;i&&i.addEventListener("statechange",()=>{i.state==="installed"&&navigator.serviceWorker.controller&&(console.log("New content is available; please refresh."),confirm("")&&(i.postMessage({type:"SKIP_WAITING"}),window.location.reload()))})})}).catch(a=>{if(a.message&&a.message.includes("MIME type")){console.warn("Service Worker registration skipped: sw.js not served with correct MIME type (likely dev environment issue).");return}console.log("SW registration failed: ",a)})};document.readyState==="complete"?n():window.addEventListener("load",n),navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()})}(()=>{let n=document.querySelector('meta[name="viewport"]');n||(n=document.createElement("meta"),n.setAttribute("name","viewport"),document.head.appendChild(n)),n.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover");let a=document.querySelector('meta[name="theme-color"]');a||(a=document.createElement("meta"),a.setAttribute("name","theme-color"),document.head.appendChild(a)),a.setAttribute("content","#000000");let i=document.querySelector('meta[name="apple-mobile-web-app-capable"]');i||(i=document.createElement("meta"),i.setAttribute("name","apple-mobile-web-app-capable"),document.head.appendChild(i)),i.setAttribute("content","yes");let l=document.querySelector('meta[name="apple-mobile-web-app-status-bar-style"]');l||(l=document.createElement("meta"),l.setAttribute("name","apple-mobile-web-app-status-bar-style"),document.head.appendChild(l)),l.setAttribute("content","default");let c=document.querySelector('meta[name="apple-mobile-web-app-title"]');c||(c=document.createElement("meta"),c.setAttribute("name","apple-mobile-web-app-title"),document.head.appendChild(c)),c.setAttribute("content","Touken OS");let d=document.querySelector('meta[name="description"]');d||(d=document.createElement("meta"),d.setAttribute("name","description"),document.head.appendChild(d)),d.setAttribute("content","");let u=document.querySelector('link[rel="manifest"]');u||(u=document.createElement("link"),u.setAttribute("rel","manifest"),document.head.appendChild(u)),u.setAttribute("href","/manifest.json");let m=document.querySelector('link[rel="apple-touch-icon"]');m||(m=document.createElement("link"),m.setAttribute("rel","apple-touch-icon"),document.head.appendChild(m)),m.setAttribute("href","/icon-192.png");let p=document.querySelector('link[rel="icon"]');p||(p=document.createElement("link"),p.setAttribute("rel","icon"),document.head.appendChild(p)),p.setAttribute("href","/icon-192.png")})(),document.addEventListener("gesturestart",n=>{n.preventDefault()}),document.addEventListener("gesturechange",n=>{n.preventDefault()}),document.addEventListener("gestureend",n=>{n.preventDefault()});let t=0;document.addEventListener("touchend",n=>{const a=Date.now();a-t<=300&&n.preventDefault(),t=a},!1)},[])}function xD(){const[e,t]=C.useState("loading"),[n,a]=C.useState(null),[i,l]=C.useState(!0),[c,d]=C.useState({}),[u,m]=C.useState(null),[p,h]=C.useState(!1),[g,x]=C.useState(null);gD(),C.useEffect(()=>{window.debugImageStorage=async()=>{console.log("=== Image Storage Debug ===");const y=await av();console.log("Category stats:",y);const k=await sp();return console.log("All images:",k),console.log("Total images:",k.length),{stats:y,images:k}},console.log("Debug tools available:"),console.log("- window.debugImageStorage() - ")},[]),C.useEffect(()=>{const y=[{name:"apple-mobile-web-app-capable",content:"yes"},{name:"apple-mobile-web-app-status-bar-style",content:"default"},{name:"apple-mobile-web-app-title",content:"Touken OS"},{name:"mobile-web-app-capable",content:"yes"}],k=[{rel:"apple-touch-icon",href:"/icon-192.png"}];y.forEach(_=>{let N=document.querySelector(`meta[name="${_.name}"]`);N||(N=document.createElement("meta"),N.setAttribute("name",_.name),document.head.appendChild(N)),N.setAttribute("content",_.content)}),k.forEach(_=>{let N=document.querySelector(`link[href="${_.href}"]`);N||(N=document.createElement("link"),N.setAttribute("rel",_.rel),N.setAttribute("href",_.href),document.head.appendChild(N))}),[{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:""},{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Bakbak+One&family=Bona+Nova:ital,wght@0,400;0,700;1,400&family=Braah+One&display=swap"}].forEach(_=>{if(!document.querySelector(`link[href="${_.href}"]`)){const N=document.createElement("link");N.rel=_.rel,N.href=_.href,_.crossOrigin!==void 0&&(N.crossOrigin=_.crossOrigin),document.head.appendChild(N)}})},[]),C.useEffect(()=>{(async()=>{try{console.log("Initializing application..."),console.log("Initializing database..."),await ue.init(),(async()=>{try{const $=await ue.get(te.MISC,"memory_extraction_settings");$&&await Qf($.summary_retention??"forever",$.event_retention??"forever"),await mi.refreshAllCharactersMemories()}catch($){console.warn("[App] Background memory cleanup failed",$)}})(),!1&&"Notification"in window&&Notification.permission;const _=new URLSearchParams(window.location.search).get("chatId");_&&(console.log("Found chatId in URL:",_),m(_),window.history.replaceState({},"","/"));const N=ue.get(te.USER_DATA,"userData"),T=(async()=>{const $=["desktop_wallpaper","profileBackground","avatar","anniversary","system-icon-desktop1-chat","system-icon-desktop1-forum","system-icon-desktop1-memory","system-icon-desktop1-transfer","desktop2_timeImage","desktop2_card1","desktop2_card2","desktop2_card3","desktop2_card4","system-icon-desktop2-shop","system-icon-desktop2-game","system-icon-desktop2-schedule","system-icon-desktop2-health"],P={};return await Promise.all($.map(async A=>{try{P[A]=await wt(A)}catch(H){console.warn(`Failed to preload image ${A}`,H),P[A]=null}})),P})(),[B,O]=await Promise.all([N,T]);x({userData:B||null,images:O})}catch(k){console.error("Failed to initialize app:",k),x({userData:null,images:{}})}})()},[]),C.useEffect(()=>{p&&g&&(console.log("Animation complete and data ready, transitioning..."),d(g.images),g.userData?(console.log("User data found, redirecting to desktop"),a(g.userData),t("desktop")):(console.log("No user data found, showing login page"),t("login")),setTimeout(()=>l(!1),100))},[p,g]);const v=y=>{a(y),t("desktop")};return s.jsxs(s.Fragment,{children:[s.jsx(hD,{}),s.jsxs(Be,{mode:"wait",children:[e==="loading"&&s.jsx(Se.div,{className:"fixed inset-0 z-50",exit:{opacity:0,scale:1.1,filter:"blur(10px)"},transition:{duration:.8,ease:"easeInOut"},children:s.jsx(mD,{onAnimationComplete:()=>h(!0)})},"loading"),e==="login"&&s.jsx(Se.div,{className:"fixed inset-0 z-40",initial:{opacity:0,scale:.95,filter:"blur(10px)"},animate:{opacity:1,scale:1,filter:"blur(0px)"},exit:{opacity:0,scale:1.05,filter:"blur(10px)"},transition:{duration:.8,ease:"easeInOut"},children:s.jsx(QE,{onLoginSuccess:v})},"login"),e==="desktop"&&n&&s.jsx(Se.div,{className:"fixed inset-0 z-30",initial:{opacity:0,scale:.95,filter:"blur(10px)"},animate:{opacity:1,scale:1,filter:"blur(0px)"},exit:{opacity:0,scale:1.05,filter:"blur(10px)"},transition:{duration:.8,ease:"easeInOut"},children:s.jsx(uD,{userData:n,preloadedImages:c,initialChatId:u})},"desktop")]}),s.jsx(fD,{}),s.jsx(CA,{position:"top-center"})]})}m5.createRoot(document.getElementById("root")).render(s.jsx(xD,{}));
